 
MD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\App_Start\BundleConfig.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
{ 
public 

class 
BundleConfig 
{ 
public		 
static		 
void		 
RegisterBundles		 *
(		* +
BundleCollection		+ ;
bundles		< C
)		C D
{

 	
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str 4
)4 5
)5 6
;6 7
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) <
)< =
.= >
Include> E
(E F
$str H
,H I
$str ;
,; <
$str B
,B C
$str H
,H I
$str O
,O P
$str W
,W X
$str 7
,7 8
$str 0
,0 1
$str 2
,2 3
$str F
,F G
$str @
,@ A
$str J
,J K
$str Q
,Q R
$str   G
,  G H
$str!! N
,!!N O
$str"" G
,""G H
$str## C
,##C D
$str$$ >
,$$> ?
$str%% :
,%%: ;
$str&& B
,&&B C
$str'' >
,''> ?
$str(( _
,((_ `
$str++ 6
,++6 7
$str,, C
,,,C D
$str-- C
,--C D
$str.. ;
,..; <
$str// C
,//C D
$str00 .
,00. /
$str11 /
,11/ 0
$str22 *
,22* +
$str33 .
)33. /
)33/ 0
;330 1
bundles>> 
.>> 
Add>> 
(>> 
new>> 
StyleBundle>> '
(>>' (
$str>>( :
)>>: ;
.>>; <
Include>>< C
(>>C D
$str?? 3
,??3 4
$str@@ /
,@@/ 0
$strAA 8
,AA8 9
$strBB /
,BB/ 0
$strCC /
,CC/ 0
$strDD /
,DD/ 0
$strEE H
,EEH I
$strFF O
,FFO P
$strGG K
,GGK L
$strHH <
,HH< =
$strII 8
,II8 9
$strJJ ,
,JJ, -
$strLL F
,LLF G
$strMM B
)NN 
)NN 
;NN 
bundlesPP 
.PP 
AddPP 
(PP 
newPP 
StyleBundlePP '
(PP' (
$strPP( B
)PPB C
.PPC D
IncludePPD K
(PPK L
$strQQ /
)RR 
)RR 
;RR 
BundleTableTT 
.TT 
EnableOptimizationsTT +
=TT, -
trueTT. 2
;TT2 3
}VV 	
}WW 
}XX Ó
MD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\App_Start\FilterConfig.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
{ 
public 

class 
FilterConfig 
{ 
public 
static 
void !
RegisterGlobalFilters 0
(0 1"
GlobalFilterCollection1 G
filtersH O
)O P
{		 	
filters

 
.

 
Add

 
(

 
new

 
ErrorHandler

 (
.

( )"
AiHandleErrorAttribute

) ?
(

? @
)

@ A
)

A B
;

B C
} 	
} 
} ÈV
OD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\App_Start\IdentityConfig.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
{ 
public 

class 
EmailService 
: #
IIdentityMessageService  7
{ 
public 
Task 
	SendAsync 
( 
IdentityMessage -
message. 5
)5 6
{ 	

SmtpClient 
client 
= 
new  #

SmtpClient$ .
(. / 
ConfigurationManager/ C
.C D
AppSettingsD O
[O P
$strP \
]\ ]
,] ^
int_ b
.b c
Parsec h
(h i 
ConfigurationManageri }
.} ~
AppSettings	~ â
[
â ä
$str
ä î
]
î ï
)
ï ñ
)
ñ ó
;
ó ò
client 
. 
DeliveryMethod !
=" #
SmtpDeliveryMethod$ 6
.6 7
Network7 >
;> ?
client 
. !
UseDefaultCredentials (
=) *
false+ 0
;0 1
client 
. 
Credentials 
=  
new! $
NetworkCredential% 6
(6 7 
ConfigurationManager7 K
.K L
AppSettingsL W
[W X
$strX e
]e f
,f g 
ConfigurationManagerh |
.| }
AppSettings	} à
[
à â
$str
â ó
]
ó ò
)
ò ô
;
ô ö
var%% 
mail%% 
=%% 
new%% 
MailMessage%% &
(%%& ' 
ConfigurationManager%%' ;
.%%; <
AppSettings%%< G
[%%G H
$str%%H U
]%%U V
,%%V W
message%%X _
.%%_ `
Destination%%` k
)%%k l
{&& 
Subject'' 
='' 
message'' !
.''! "
Subject''" )
,'') *
Body(( 
=(( 
message(( 
.(( 
Body(( #
,((# $

IsBodyHtml)) 
=)) 
true)) !
,))! "
}** 
;** 
client,, 
.,, 
Send,, 
(,, 
mail,, 
),, 
;,, 
return.. 
Task.. 
... 

FromResult.. "
(.." #
$num..# $
)..$ %
;..% &
}// 	
}00 
public33 

class33 

SmsService33 
:33 #
IIdentityMessageService33 5
{44 
public55 
Task55 
	SendAsync55 
(55 
IdentityMessage55 -
message55. 5
)555 6
{66 	
return88 
Task88 
.88 

FromResult88 "
(88" #
$num88# $
)88$ %
;88% &
}99 	
}:: 
public== 

class== "
ApplicationUserManager== '
:==( )
UserManager==* 5
<==5 6
ApplicationUser==6 E
>==E F
{>> 
public?? "
ApplicationUserManager?? %
(??% &

IUserStore??& 0
<??0 1
ApplicationUser??1 @
>??@ A
store??B G
)??G H
:@@ 
base@@ 
(@@ 
store@@ 
)@@ 
{AA 	
}BB 	
publicDD 
staticDD "
ApplicationUserManagerDD ,
CreateDD- 3
(DD3 4"
IdentityFactoryOptionsDD4 J
<DDJ K"
ApplicationUserManagerDDK a
>DDa b
optionsDDc j
,DDj k
IOwinContextDDl x
context	DDy Ä
)
DDÄ Å
{EE 	
varFF 
managerFF 
=FF 
newFF "
ApplicationUserManagerFF 4
(FF4 5
newFF5 8
	UserStoreFF9 B
<FFB C
ApplicationUserFFC R
>FFR S
(FFS T
contextFFT [
.FF[ \
GetFF\ _
<FF_ ` 
ApplicationDbContextFF` t
>FFt u
(FFu v
)FFv w
)FFw x
)FFx y
;FFy z
managerHH 
.HH 
UserValidatorHH !
=HH" #
newHH$ '
UserValidatorHH( 5
<HH5 6
ApplicationUserHH6 E
>HHE F
(HHF G
managerHHG N
)HHN O
{II *
AllowOnlyAlphanumericUserNamesJJ .
=JJ/ 0
falseJJ1 6
,JJ6 7
RequireUniqueEmailKK "
=KK# $
trueKK% )
}LL 
;LL 
managerOO 
.OO 
PasswordValidatorOO %
=OO& '
newOO( +
PasswordValidatorOO, =
{PP 
RequiredLengthQQ 
=QQ  
$numQQ! "
,QQ" ##
RequireNonLetterOrDigitRR '
=RR( )
falseRR* /
,RR/ 0
RequireDigitSS 
=SS 
falseSS $
,SS$ %
RequireLowercaseTT  
=TT! "
falseTT# (
,TT( )
RequireUppercaseUU  
=UU! "
falseUU# (
,UU( )
}VV 
;VV 
managerYY 
.YY '
UserLockoutEnabledByDefaultYY /
=YY0 1
trueYY2 6
;YY6 7
managerZZ 
.ZZ )
DefaultAccountLockoutTimeSpanZZ 1
=ZZ2 3
TimeSpanZZ4 <
.ZZ< =
FromMinutesZZ= H
(ZZH I
$numZZI J
)ZZJ K
;ZZK L
manager[[ 
.[[ 0
$MaxFailedAccessAttemptsBeforeLockout[[ 8
=[[9 :
$num[[; <
;[[< =
manager__ 
.__ %
RegisterTwoFactorProvider__ -
(__- .
$str__. :
,__: ;
new__< ?$
PhoneNumberTokenProvider__@ X
<__X Y
ApplicationUser__Y h
>__h i
{`` 
MessageFormataa 
=aa 
$straa  ;
}bb 
)bb 
;bb 
managercc 
.cc %
RegisterTwoFactorProvidercc -
(cc- .
$strcc. :
,cc: ;
newcc< ?
EmailTokenProvidercc@ R
<ccR S
ApplicationUserccS b
>ccb c
{dd 
Subjectee 
=ee 
$stree )
,ee) *

BodyFormatff 
=ff 
$strff 8
}gg 
)gg 
;gg 
managerhh 
.hh 
EmailServicehh  
=hh! "
newhh# &
EmailServicehh' 3
(hh3 4
)hh4 5
;hh5 6
managerii 
.ii 

SmsServiceii 
=ii  
newii! $

SmsServiceii% /
(ii/ 0
)ii0 1
;ii1 2
varjj "
dataProtectionProviderjj &
=jj' (
optionsjj) 0
.jj0 1"
DataProtectionProviderjj1 G
;jjG H
ifkk 
(kk "
dataProtectionProviderkk &
!=kk' )
nullkk* .
)kk. /
{ll 
managermm 
.mm 
UserTokenProvidermm )
=mm* +
newnn &
DataProtectorTokenProvidernn 2
<nn2 3
ApplicationUsernn3 B
>nnB C
(nnC D"
dataProtectionProvidernnD Z
.nnZ [
Createnn[ a
(nna b
$strnnb t
)nnt u
)nnu v
;nnv w
}oo 
returnpp 
managerpp 
;pp 
}qq 	
}rr 
publicuu 

classuu $
ApplicationSignInManageruu )
:uu* +
SignInManageruu, 9
<uu9 :
ApplicationUseruu: I
,uuI J
stringuuK Q
>uuQ R
{vv 
publicww $
ApplicationSignInManagerww '
(ww' ("
ApplicationUserManagerww( >
userManagerww? J
,wwJ K"
IAuthenticationManagerwwL b!
authenticationManagerwwc x
)wwx y
:xx 
basexx 
(xx 
userManagerxx 
,xx !
authenticationManagerxx  5
)xx5 6
{yy 	
}zz 	
public|| 
override|| 
Task|| 
<|| 
ClaimsIdentity|| +
>||+ ,#
CreateUserIdentityAsync||- D
(||D E
ApplicationUser||E T
user||U Y
)||Y Z
{}} 	
return 
user 
. %
GenerateUserIdentityAsync 1
(1 2
(2 3"
ApplicationUserManager3 I
)I J
UserManagerJ U
)U V
;V W
}
ÄÄ 	
public
ÇÇ 
static
ÇÇ &
ApplicationSignInManager
ÇÇ .
Create
ÇÇ/ 5
(
ÇÇ5 6$
IdentityFactoryOptions
ÇÇ6 L
<
ÇÇL M&
ApplicationSignInManager
ÇÇM e
>
ÇÇe f
options
ÇÇg n
,
ÇÇn o
IOwinContext
ÇÇp |
contextÇÇ} Ñ
)ÇÇÑ Ö
{
ÉÉ 	
return
ÑÑ 
new
ÑÑ &
ApplicationSignInManager
ÑÑ /
(
ÑÑ/ 0
context
ÑÑ0 7
.
ÑÑ7 8
GetUserManager
ÑÑ8 F
<
ÑÑF G$
ApplicationUserManager
ÑÑG ]
>
ÑÑ] ^
(
ÑÑ^ _
)
ÑÑ_ `
,
ÑÑ` a
context
ÑÑb i
.
ÑÑi j
Authentication
ÑÑj x
)
ÑÑx y
;
ÑÑy z
}
ÖÖ 	
}
ÜÜ 
public
ââ 

class
ââ $
ApplicationRoleManager
ââ '
:
ââ( )
RoleManager
ââ* 5
<
ââ5 6
IdentityRole
ââ6 B
>
ââB C
{
ää 
public
ãã $
ApplicationRoleManager
ãã %
(
ãã% &

IRoleStore
ãã& 0
<
ãã0 1
IdentityRole
ãã1 =
,
ãã= >
string
ãã? E
>
ããE F
store
ããG L
)
ããL M
:
åå 
base
åå 
(
åå 
store
åå 
)
åå 
{
çç 	
}
éé 	
public
èè 
static
èè $
ApplicationRoleManager
èè ,
Create
èè- 3
(
èè3 4$
IdentityFactoryOptions
èè4 J
<
èèJ K$
ApplicationRoleManager
èèK a
>
èèa b
options
èèc j
,
èèj k
IOwinContext
èèl x
contextèèy Ä
)èèÄ Å
{
êê 	
var
ëë 
	roleStore
ëë 
=
ëë 
new
ëë 
	RoleStore
ëë  )
<
ëë) *
IdentityRole
ëë* 6
>
ëë6 7
(
ëë7 8
context
ëë8 ?
.
ëë? @
Get
ëë@ C
<
ëëC D"
ApplicationDbContext
ëëD X
>
ëëX Y
(
ëëY Z
)
ëëZ [
)
ëë[ \
;
ëë\ ]
return
íí 
new
íí $
ApplicationRoleManager
íí -
(
íí- .
	roleStore
íí. 7
)
íí7 8
;
íí8 9
}
ìì 	
}
îî 
}ïï °	
LD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\App_Start\RouteConfig.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
{		 
public

 

class

 
RouteConfig

 
{ 
public 
static 
void 
RegisterRoutes )
() *
RouteCollection* 9
routes: @
)@ A
{ 	
routes 
. 
IgnoreRoute 
( 
$str ;
); <
;< =
routes 
. 
MapRoute 
( 
name 
: 
$str 
,  
url 
: 
$str 1
,1 2
defaults 
: 
new 
{ 

controller  *
=+ ,
$str- 6
,6 7
action8 >
=? @
$strA H
,H I
idJ L
=M N
UrlParameterO [
.[ \
Optional\ d
}e f
) 
; 
} 	
} 
} È
MD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\App_Start\Startup.Auth.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
{ 
public 

partial 
class 
Startup  
{ 
public 
void 
ConfigureAuth !
(! "
IAppBuilder" -
app. 1
)1 2
{ 	
app 
.  
CreatePerOwinContext $
($ % 
ApplicationDbContext% 9
.9 :
Create: @
)@ A
;A B
app 
.  
CreatePerOwinContext $
<$ %"
ApplicationUserManager% ;
>; <
(< ="
ApplicationUserManager= S
.S T
CreateT Z
)Z [
;[ \
app 
.  
CreatePerOwinContext $
<$ %$
ApplicationSignInManager% =
>= >
(> ?$
ApplicationSignInManager? W
.W X
CreateX ^
)^ _
;_ `
app 
.  
CreatePerOwinContext $
<$ %"
ApplicationRoleManager% ;
>; <
(< ="
ApplicationRoleManager= S
.S T
CreateT Z
)Z [
;[ \
app 
. #
UseCookieAuthentication '
(' (
new( +'
CookieAuthenticationOptions, G
{ 
AuthenticationType "
=# $&
DefaultAuthenticationTypes% ?
.? @
ApplicationCookie@ Q
,Q R
	LoginPath 
= 
new 

PathString  *
(* +
$str+ ;
); <
,< =
}%% 
)%% 
;%% 
app&& 
.&& #
UseExternalSignInCookie&& '
(&&' (&
DefaultAuthenticationTypes&&( B
.&&B C
ExternalCookie&&C Q
)&&Q R
;&&R S
app)) 
.)) $
UseTwoFactorSignInCookie)) (
())( )&
DefaultAuthenticationTypes))) C
.))C D
TwoFactorCookie))D S
,))S T
TimeSpan))U ]
.))] ^
FromMinutes))^ i
())i j
$num))j k
)))k l
)))l m
;))m n
app.. 
... -
!UseTwoFactorRememberBrowserCookie.. 1
(..1 2&
DefaultAuthenticationTypes..2 L
...L M*
TwoFactorRememberBrowserCookie..M k
)..k l
;..l m
}BB 	
}CC 
}DD µ
LD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\App_Start\UnityConfig.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
{

 
public 

class 
UnityConfig 
{ 
private 
static 
readonly 
Lazy  $
<$ %
IUnityContainer% 4
>4 5
	Container6 ?
=@ A
newB E
LazyF J
<J K
IUnityContainerK Z
>Z [
([ \
(\ ]
)] ^
=>_ a
{ 	
var 
	container 
= 
new 
UnityContainer  .
(. /
)/ 0
;0 1
RegisterTypes 
( 
	container #
)# $
;$ %
return 
	container 
; 
} 	
)	 

;
 
public 
static 
IUnityContainer %"
GetConfiguredContainer& <
(< =
)= >
{ 	
return 
	Container 
. 
Value "
;" #
} 	
public%% 
static%% 
void%% 
RegisterTypes%% (
(%%( )
IUnityContainer%%) 8
	container%%9 B
)%%B C
{&& 	
}:: 	
};; 
}<< ∏
MD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\App_Start\WebApiConfig.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
	App_Start& /
{		 
public

 

class

 
WebApiConfig

 
{ 
public 
static 
void 
Register #
(# $
HttpConfiguration$ 5
configuration6 C
)C D
{ 	
configuration 
. 
Routes  
.  !
MapHttpRoute! -
(- .
$str. ;
,; <
$str= T
,T U
new 
{ 
id 
= 
RouteParameter )
.) *
Optional* 2
}3 4
)4 5
;5 6
var 

appXmlType 
= 
configuration *
.* +

Formatters+ 5
.5 6
XmlFormatter6 B
.B C
SupportedMediaTypesC V
.V W
FirstOrDefaultW e
(e f
tf g
=>h j
tk l
.l m
	MediaTypem v
==w y
$str	z ã
)
ã å
;
å ç
configuration 
. 

Formatters $
.$ %
XmlFormatter% 1
.1 2
SupportedMediaTypes2 E
.E F
RemoveF L
(L M

appXmlTypeM W
)W X
;X Y
} 	
} 
} â
MD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Content\reports\Class1.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Content& -
.- .
reports. 5
{ 
public 

class 
Class1 
{		 
public

 
string

 
a

 
;

 
public 
int 
b 
; 
} 
} Ò©
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\AccountController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
[ 
	Authorize 
] 
public 

class 
AccountController "
:# $

Controller% /
{ 
private $
ApplicationSignInManager (
_signInManager) 7
;7 8
private "
ApplicationUserManager &
_userManager' 3
;3 4
public 
AccountController  
(  !
)! "
{ 	
} 	
public 
AccountController  
(  !"
ApplicationUserManager! 7
userManager8 C
,C D$
ApplicationSignInManagerE ]
signInManager^ k
)l m
{ 	
UserManager 
= 
userManager %
;% &
SignInManager 
= 
signInManager )
;) *
} 	
public $
ApplicationSignInManager '
SignInManager( 5
{ 	
get 
{   
return!! 
_signInManager!! %
??!!& (
HttpContext!!) 4
.!!4 5
GetOwinContext!!5 C
(!!C D
)!!D E
.!!E F
Get!!F I
<!!I J$
ApplicationSignInManager!!J b
>!!b c
(!!c d
)!!d e
;!!e f
}"" 
private## 
set## 
{$$ 
_signInManager%% 
=%%  
value%%! &
;%%& '
}&& 
}'' 	
public)) "
ApplicationUserManager)) %
UserManager))& 1
{** 	
get++ 
{,, 
return-- 
_userManager-- #
??--$ &
HttpContext--' 2
.--2 3
GetOwinContext--3 A
(--A B
)--B C
.--C D
GetUserManager--D R
<--R S"
ApplicationUserManager--S i
>--i j
(--j k
)--k l
;--l m
}.. 
private// 
set// 
{00 
_userManager11 
=11 
value11 $
;11$ %
}22 
}33 	
[77 	
AllowAnonymous77	 
]77 
[88 	
OutputCache88	 
(88 
NoStore88 
=88 
true88 #
,88# $
Duration88% -
=88. /
$num880 1
)881 2
]882 3
public99 
ActionResult99 
Login99 !
(99! "
string99" (
	returnUrl99) 2
)992 3
{:: 	
ViewBag;; 
.;; 
	ReturnUrl;; 
=;; 
	returnUrl;;  )
;;;) *
return<< 
View<< 
(<< 
)<< 
;<< 
}== 	
[AA 	
HttpPostAA	 
]AA 
[BB 	
AllowAnonymousBB	 
]BB 
[CC 	$
ValidateAntiForgeryTokenCC	 !
]CC! "
publicDD 
asyncDD 
TaskDD 
<DD 
ActionResultDD &
>DD& '
LoginDD( -
(DD- .
LoginViewModelDD. <
modelDD= B
,DDB C
stringDDD J
	returnUrlDDK T
)DDT U
{EE 	
tryFF 
{GG 
ifHH 
(HH 

ModelStateHH 
.HH 
IsValidHH &
)HH& '
{II 
varJJ 
userJJ 
=JJ 
awaitJJ $
UserManagerJJ% 0
.JJ0 1
	FindAsyncJJ1 :
(JJ: ;
modelJJ; @
.JJ@ A
EmailJJA F
,JJF G
modelJJH M
.JJM N
PasswordJJN V
)JJV W
;JJW X
ifKK 
(KK 
userKK 
!=KK 
nullKK  $
)KK$ %
{LL 
awaitMM 
SignInAsyncMM )
(MM) *
userMM* .
,MM. /
modelMM0 5
.MM5 6

RememberMeMM6 @
)MM@ A
;MMA B
returnPP 1
%RedirectToSeleccionarCentroDeAtencionPP D
(PPD E
	returnUrlPPE N
)PPN O
;PPO P
}QQ 
elseRR 
{SS 

ModelStateTT "
.TT" #
AddModelErrorTT# 0
(TT0 1
$strTT1 3
,TT3 4
$strTT5 V
)TTV W
;TTW X
}UU 
}VV 
}WW 
catchXX 
(XX 
	ExceptionXX 
eXX 
)XX 
{YY 
}[[ 
return]] 
View]] 
(]] 
model]] 
)]] 
;]] 
}ss 	
[uu 	
HttpGetuu	 
]uu 
publicvv 
ActionResultvv 
ExtendSessionvv )
(vv) *
)vv* +
{ww 	
Systemxx 
.xx 
Webxx 
.xx 
Securityxx 
.xx  
FormsAuthenticationxx  3
.xx3 4
SetAuthCookiexx4 A
(xxA B
UserxxB F
.xxF G
IdentityxxG O
.xxO P
NamexxP T
,xxT U
falsexxV [
)xx[ \
;xx\ ]
varyy 
datayy 
=yy 
newyy 
{yy 
	IsSuccessyy &
=yy' (
trueyy) -
}yy. /
;yy/ 0
returnzz 
Jsonzz 
(zz 
datazz 
,zz 
JsonRequestBehaviorzz 1
.zz1 2
AllowGetzz2 :
)zz: ;
;zz; <
}{{ 	
private}} 
async}} 
Task}} 
SignInAsync}} &
(}}& '
ApplicationUser}}' 6
user}}7 ;
,}}; <
bool}}= A
isPersistent}}B N
)}}N O
{~~ 	!
AuthenticationManager !
.! "
SignOut" )
() *&
DefaultAuthenticationTypes* D
.D E
ExternalCookieE S
)S T
;T U
var
ÅÅ 
identity
ÅÅ 
=
ÅÅ 
await
ÅÅ  
UserManager
ÅÅ! ,
.
ÅÅ, -!
CreateIdentityAsync
ÅÅ- @
(
ÅÅ@ A
user
ÅÅA E
,
ÅÅE F(
DefaultAuthenticationTypes
ÅÅG a
.
ÅÅa b
ApplicationCookie
ÅÅb s
)
ÅÅs t
;
ÅÅt u#
AuthenticationManager
ÇÇ !
.
ÇÇ! "
SignIn
ÇÇ" (
(
ÇÇ( )
new
ÇÇ) ,&
AuthenticationProperties
ÇÇ- E
(
ÇÇE F
)
ÇÇF G
{
ÇÇH I
IsPersistent
ÇÇJ V
=
ÇÇW X
isPersistent
ÇÇY e
}
ÇÇf g
,
ÇÇg h
identity
ÇÇi q
)
ÇÇq r
;
ÇÇr s
}
ÉÉ 	
[
ÜÜ 	
AllowAnonymous
ÜÜ	 
]
ÜÜ 
public
áá 
async
áá 
Task
áá 
<
áá 
ActionResult
áá &
>
áá& '

VerifyCode
áá( 2
(
áá2 3
string
áá3 9
provider
áá: B
,
ááB C
string
ááD J
	returnUrl
ááK T
,
ááT U
bool
ááV Z

rememberMe
áá[ e
)
ááe f
{
àà 	
if
ää 
(
ää 
!
ää 
await
ää 
SignInManager
ää $
.
ää$ %"
HasBeenVerifiedAsync
ää% 9
(
ää9 :
)
ää: ;
)
ää; <
{
ãã 
return
åå 
View
åå 
(
åå 
$str
åå #
)
åå# $
;
åå$ %
}
çç 
return
éé 
View
éé 
(
éé 
new
éé !
VerifyCodeViewModel
éé /
{
éé0 1
Provider
éé2 :
=
éé; <
provider
éé= E
,
ééE F
	ReturnUrl
ééG P
=
ééQ R
	returnUrl
ééS \
,
éé\ ]

RememberMe
éé^ h
=
ééi j

rememberMe
éék u
}
éév w
)
ééw x
;
ééx y
}
èè 	
[
ìì 	
HttpPost
ìì	 
]
ìì 
[
îî 	
AllowAnonymous
îî	 
]
îî 
[
ïï 	&
ValidateAntiForgeryToken
ïï	 !
]
ïï! "
public
ññ 
async
ññ 
Task
ññ 
<
ññ 
ActionResult
ññ &
>
ññ& '

VerifyCode
ññ( 2
(
ññ2 3!
VerifyCodeViewModel
ññ3 F
model
ññG L
)
ññL M
{
óó 	
if
òò 
(
òò 
!
òò 

ModelState
òò 
.
òò 
IsValid
òò #
)
òò# $
{
ôô 
return
öö 
View
öö 
(
öö 
model
öö !
)
öö! "
;
öö" #
}
õõ 
var
°° 
result
°° 
=
°° 
await
°° 
SignInManager
°° ,
.
°°, -"
TwoFactorSignInAsync
°°- A
(
°°A B
model
°°B G
.
°°G H
Provider
°°H P
,
°°P Q
model
°°R W
.
°°W X
Code
°°X \
,
°°\ ]
isPersistent
°°^ j
:
°°j k
model
°°m r
.
°°r s

RememberMe
°°s }
,
°°} ~
rememberBrowser°° é
:°°é è
model°°ê ï
.°°ï ñ
RememberBrowser°°ñ •
)°°• ¶
;°°¶ ß
switch
¢¢ 
(
¢¢ 
result
¢¢ 
)
¢¢ 
{
££ 
case
§§ 
SignInStatus
§§ !
.
§§! "
Success
§§" )
:
§§) *
return
•• 
RedirectToLocal
•• *
(
••* +
model
••+ 0
.
••0 1
	ReturnUrl
••1 :
)
••: ;
;
••; <
case
¶¶ 
SignInStatus
¶¶ !
.
¶¶! "
	LockedOut
¶¶" +
:
¶¶+ ,
return
ßß 
View
ßß 
(
ßß  
$str
ßß  )
)
ßß) *
;
ßß* +
case
®® 
SignInStatus
®® !
.
®®! "
Failure
®®" )
:
®®) *
default
©© 
:
©© 

ModelState
™™ 
.
™™ 
AddModelError
™™ ,
(
™™, -
$str
™™- /
,
™™/ 0
$str
™™1 D
)
™™D E
;
™™E F
return
´´ 
View
´´ 
(
´´  
model
´´  %
)
´´% &
;
´´& '
}
¨¨ 
}
≠≠ 	
[
±± 	
AllowAnonymous
±±	 
]
±± 
public
≤≤ 
ActionResult
≤≤ 
Register
≤≤ $
(
≤≤$ %
)
≤≤% &
{
≥≥ 	
return
¥¥ 
View
¥¥ 
(
¥¥ 
)
¥¥ 
;
¥¥ 
}
µµ 	
[
ππ 	
HttpPost
ππ	 
]
ππ 
[
∫∫ 	
AllowAnonymous
∫∫	 
]
∫∫ 
[
ªª 	&
ValidateAntiForgeryToken
ªª	 !
]
ªª! "
public
ºº 
async
ºº 
Task
ºº 
<
ºº 
ActionResult
ºº &
>
ºº& '
Register
ºº( 0
(
ºº0 1
RegisterViewModel
ºº1 B
model
ººC H
)
ººH I
{
ΩΩ 	
if
ææ 
(
ææ 

ModelState
ææ 
.
ææ 
IsValid
ææ "
)
ææ" #
{
øø 
var
¿¿ 
user
¿¿ 
=
¿¿ 
new
¿¿ 
ApplicationUser
¿¿ .
{
¿¿/ 0
UserName
¿¿1 9
=
¿¿: ;
model
¿¿< A
.
¿¿A B
Email
¿¿B G
,
¿¿G H
Email
¿¿I N
=
¿¿O P
model
¿¿Q V
.
¿¿V W
Email
¿¿W \
}
¿¿] ^
;
¿¿^ _
var
¡¡ 
result
¡¡ 
=
¡¡ 
await
¡¡ "
UserManager
¡¡# .
.
¡¡. /
CreateAsync
¡¡/ :
(
¡¡: ;
user
¡¡; ?
,
¡¡? @
model
¡¡A F
.
¡¡F G
Password
¡¡G O
)
¡¡O P
;
¡¡P Q
if
¬¬ 
(
¬¬ 
result
¬¬ 
.
¬¬ 
	Succeeded
¬¬ $
)
¬¬$ %
{
√√ 
await
ƒƒ 
SignInManager
ƒƒ '
.
ƒƒ' (
SignInAsync
ƒƒ( 3
(
ƒƒ3 4
user
ƒƒ4 8
,
ƒƒ8 9
isPersistent
ƒƒ: F
:
ƒƒF G
false
ƒƒG L
,
ƒƒL M
rememberBrowser
ƒƒN ]
:
ƒƒ] ^
false
ƒƒ^ c
)
ƒƒc d
;
ƒƒd e
return
ÃÃ 
RedirectToAction
ÃÃ +
(
ÃÃ+ ,
$str
ÃÃ, 3
,
ÃÃ3 4
$str
ÃÃ5 ;
)
ÃÃ; <
;
ÃÃ< =
}
ÕÕ 
	AddErrors
ŒŒ 
(
ŒŒ 
result
ŒŒ  
)
ŒŒ  !
;
ŒŒ! "
}
œœ 
return
““ 
View
““ 
(
““ 
model
““ 
)
““ 
;
““ 
}
”” 	
[
◊◊ 	
AllowAnonymous
◊◊	 
]
◊◊ 
public
ÿÿ 
async
ÿÿ 
Task
ÿÿ 
<
ÿÿ 
ActionResult
ÿÿ &
>
ÿÿ& '
ConfirmEmail
ÿÿ( 4
(
ÿÿ4 5
string
ÿÿ5 ;
userId
ÿÿ< B
,
ÿÿB C
string
ÿÿD J
code
ÿÿK O
)
ÿÿO P
{
ŸŸ 	
if
⁄⁄ 
(
⁄⁄ 
userId
⁄⁄ 
==
⁄⁄ 
null
⁄⁄ 
||
⁄⁄ !
code
⁄⁄" &
==
⁄⁄' )
null
⁄⁄* .
)
⁄⁄. /
{
€€ 
return
‹‹ 
View
‹‹ 
(
‹‹ 
$str
‹‹ #
)
‹‹# $
;
‹‹$ %
}
›› 
var
ﬁﬁ 
result
ﬁﬁ 
=
ﬁﬁ 
await
ﬁﬁ 
UserManager
ﬁﬁ *
.
ﬁﬁ* +
ConfirmEmailAsync
ﬁﬁ+ <
(
ﬁﬁ< =
userId
ﬁﬁ= C
,
ﬁﬁC D
code
ﬁﬁE I
)
ﬁﬁI J
;
ﬁﬁJ K
return
ﬂﬂ 
View
ﬂﬂ 
(
ﬂﬂ 
result
ﬂﬂ 
.
ﬂﬂ 
	Succeeded
ﬂﬂ (
?
ﬂﬂ) *
$str
ﬂﬂ+ 9
:
ﬂﬂ: ;
$str
ﬂﬂ< C
)
ﬂﬂC D
;
ﬂﬂD E
}
‡‡ 	
[
‰‰ 	
AllowAnonymous
‰‰	 
]
‰‰ 
public
ÂÂ 
ActionResult
ÂÂ 
ForgotPassword
ÂÂ *
(
ÂÂ* +
)
ÂÂ+ ,
{
ÊÊ 	
return
ÁÁ 
View
ÁÁ 
(
ÁÁ 
)
ÁÁ 
;
ÁÁ 
}
ËË 	
[
ÏÏ 	
HttpPost
ÏÏ	 
]
ÏÏ 
[
ÌÌ 	
AllowAnonymous
ÌÌ	 
]
ÌÌ 
[
ÓÓ 	&
ValidateAntiForgeryToken
ÓÓ	 !
]
ÓÓ! "
public
ÔÔ 
async
ÔÔ 
Task
ÔÔ 
<
ÔÔ 
ActionResult
ÔÔ &
>
ÔÔ& '
ForgotPassword
ÔÔ( 6
(
ÔÔ6 7%
ForgotPasswordViewModel
ÔÔ7 N
model
ÔÔO T
)
ÔÔT U
{
 	
if
ÒÒ 
(
ÒÒ 

ModelState
ÒÒ 
.
ÒÒ 
IsValid
ÒÒ "
)
ÒÒ" #
{
ÚÚ 
var
ÛÛ 
user
ÛÛ 
=
ÛÛ 
await
ÛÛ  
UserManager
ÛÛ! ,
.
ÛÛ, -
FindByNameAsync
ÛÛ- <
(
ÛÛ< =
model
ÛÛ= B
.
ÛÛB C
Email
ÛÛC H
)
ÛÛH I
;
ÛÛI J
if
ÙÙ 
(
ÙÙ 
user
ÙÙ 
==
ÙÙ 
null
ÙÙ  
||
ÙÙ! #
!
ÙÙ$ %
(
ÙÙ% &
await
ÙÙ& +
UserManager
ÙÙ, 7
.
ÙÙ7 8#
IsEmailConfirmedAsync
ÙÙ8 M
(
ÙÙM N
user
ÙÙN R
.
ÙÙR S
Id
ÙÙS U
)
ÙÙU V
)
ÙÙV W
)
ÙÙW X
{
ıı 
return
˜˜ 
View
˜˜ 
(
˜˜  
$str
˜˜  <
)
˜˜< =
;
˜˜= >
}
¯¯ 
}
ÄÄ 
return
ÉÉ 
View
ÉÉ 
(
ÉÉ 
model
ÉÉ 
)
ÉÉ 
;
ÉÉ 
}
ÑÑ 	
[
àà 	
AllowAnonymous
àà	 
]
àà 
public
ââ 
ActionResult
ââ (
ForgotPasswordConfirmation
ââ 6
(
ââ6 7
)
ââ7 8
{
ää 	
return
ãã 
View
ãã 
(
ãã 
)
ãã 
;
ãã 
}
åå 	
[
êê 	
AllowAnonymous
êê	 
]
êê 
public
ëë 
ActionResult
ëë 
ResetPassword
ëë )
(
ëë) *
string
ëë* 0
code
ëë1 5
)
ëë5 6
{
íí 	
return
ìì 
code
ìì 
==
ìì 
null
ìì 
?
ìì  !
View
ìì" &
(
ìì& '
$str
ìì' .
)
ìì. /
:
ìì0 1
View
ìì2 6
(
ìì6 7
)
ìì7 8
;
ìì8 9
}
îî 	
[
òò 	
HttpPost
òò	 
]
òò 
[
ôô 	
AllowAnonymous
ôô	 
]
ôô 
[
öö 	&
ValidateAntiForgeryToken
öö	 !
]
öö! "
public
õõ 
async
õõ 
Task
õõ 
<
õõ 
ActionResult
õõ &
>
õõ& '
ResetPassword
õõ( 5
(
õõ5 6$
ResetPasswordViewModel
õõ6 L
model
õõM R
)
õõR S
{
úú 	
if
ùù 
(
ùù 
!
ùù 

ModelState
ùù 
.
ùù 
IsValid
ùù #
)
ùù# $
{
ûû 
return
üü 
View
üü 
(
üü 
model
üü !
)
üü! "
;
üü" #
}
†† 
var
°° 
user
°° 
=
°° 
await
°° 
UserManager
°° (
.
°°( )
FindByNameAsync
°°) 8
(
°°8 9
model
°°9 >
.
°°> ?
Email
°°? D
)
°°D E
;
°°E F
if
¢¢ 
(
¢¢ 
user
¢¢ 
==
¢¢ 
null
¢¢ 
)
¢¢ 
{
££ 
return
•• 
RedirectToAction
•• '
(
••' (
$str
••( C
,
••C D
$str
••E N
)
••N O
;
••O P
}
¶¶ 
var
ßß 
result
ßß 
=
ßß 
await
ßß 
UserManager
ßß *
.
ßß* + 
ResetPasswordAsync
ßß+ =
(
ßß= >
user
ßß> B
.
ßßB C
Id
ßßC E
,
ßßE F
model
ßßG L
.
ßßL M
Code
ßßM Q
,
ßßQ R
model
ßßS X
.
ßßX Y
Password
ßßY a
)
ßßa b
;
ßßb c
if
®® 
(
®® 
result
®® 
.
®® 
	Succeeded
®®  
)
®®  !
{
©© 
return
™™ 
RedirectToAction
™™ '
(
™™' (
$str
™™( C
,
™™C D
$str
™™E N
)
™™N O
;
™™O P
}
´´ 
	AddErrors
¨¨ 
(
¨¨ 
result
¨¨ 
)
¨¨ 
;
¨¨ 
return
≠≠ 
View
≠≠ 
(
≠≠ 
)
≠≠ 
;
≠≠ 
}
ÆÆ 	
[
≤≤ 	
AllowAnonymous
≤≤	 
]
≤≤ 
public
≥≥ 
ActionResult
≥≥ '
ResetPasswordConfirmation
≥≥ 5
(
≥≥5 6
)
≥≥6 7
{
¥¥ 	
return
µµ 
View
µµ 
(
µµ 
)
µµ 
;
µµ 
}
∂∂ 	
[
∫∫ 	
HttpPost
∫∫	 
]
∫∫ 
[
ªª 	
AllowAnonymous
ªª	 
]
ªª 
[
ºº 	&
ValidateAntiForgeryToken
ºº	 !
]
ºº! "
public
ΩΩ 
ActionResult
ΩΩ 
ExternalLogin
ΩΩ )
(
ΩΩ) *
string
ΩΩ* 0
provider
ΩΩ1 9
,
ΩΩ9 :
string
ΩΩ; A
	returnUrl
ΩΩB K
)
ΩΩK L
{
ææ 	
return
¿¿ 
new
¿¿ 
ChallengeResult
¿¿ &
(
¿¿& '
provider
¿¿' /
,
¿¿/ 0
Url
¿¿1 4
.
¿¿4 5
Action
¿¿5 ;
(
¿¿; <
$str
¿¿< S
,
¿¿S T
$str
¿¿U ^
,
¿¿^ _
new
¿¿` c
{
¿¿d e
	ReturnUrl
¿¿f o
=
¿¿p q
	returnUrl
¿¿r {
}
¿¿| }
)
¿¿} ~
)
¿¿~ 
;¿¿ Ä
}
¡¡ 	
[
≈≈ 	
AllowAnonymous
≈≈	 
]
≈≈ 
public
∆∆ 
async
∆∆ 
Task
∆∆ 
<
∆∆ 
ActionResult
∆∆ &
>
∆∆& '
SendCode
∆∆( 0
(
∆∆0 1
string
∆∆1 7
	returnUrl
∆∆8 A
,
∆∆A B
bool
∆∆C G

rememberMe
∆∆H R
)
∆∆R S
{
«« 	
var
»» 
userId
»» 
=
»» 
await
»» 
SignInManager
»» ,
.
»», -$
GetVerifiedUserIdAsync
»»- C
(
»»C D
)
»»D E
;
»»E F
if
…… 
(
…… 
userId
…… 
==
…… 
null
…… 
)
…… 
{
   
return
ÀÀ 
View
ÀÀ 
(
ÀÀ 
$str
ÀÀ #
)
ÀÀ# $
;
ÀÀ$ %
}
ÃÃ 
var
ÕÕ 
userFactors
ÕÕ 
=
ÕÕ 
await
ÕÕ #
UserManager
ÕÕ$ /
.
ÕÕ/ 0-
GetValidTwoFactorProvidersAsync
ÕÕ0 O
(
ÕÕO P
userId
ÕÕP V
)
ÕÕV W
;
ÕÕW X
var
ŒŒ 
factorOptions
ŒŒ 
=
ŒŒ 
userFactors
ŒŒ  +
.
ŒŒ+ ,
Select
ŒŒ, 2
(
ŒŒ2 3
purpose
ŒŒ3 :
=>
ŒŒ; =
new
ŒŒ> A
SelectListItem
ŒŒB P
{
ŒŒQ R
Text
ŒŒS W
=
ŒŒX Y
purpose
ŒŒZ a
,
ŒŒa b
Value
ŒŒc h
=
ŒŒi j
purpose
ŒŒk r
}
ŒŒs t
)
ŒŒt u
.
ŒŒu v
ToList
ŒŒv |
(
ŒŒ| }
)
ŒŒ} ~
;
ŒŒ~ 
return
œœ 
View
œœ 
(
œœ 
new
œœ 
SendCodeViewModel
œœ -
{
œœ. /
	Providers
œœ0 9
=
œœ: ;
factorOptions
œœ< I
,
œœI J
	ReturnUrl
œœK T
=
œœU V
	returnUrl
œœW `
,
œœ` a

RememberMe
œœb l
=
œœm n

rememberMe
œœo y
}
œœz {
)
œœ{ |
;
œœ| }
}
–– 	
[
‘‘ 	
HttpPost
‘‘	 
]
‘‘ 
[
’’ 	
AllowAnonymous
’’	 
]
’’ 
[
÷÷ 	&
ValidateAntiForgeryToken
÷÷	 !
]
÷÷! "
public
◊◊ 
async
◊◊ 
Task
◊◊ 
<
◊◊ 
ActionResult
◊◊ &
>
◊◊& '
SendCode
◊◊( 0
(
◊◊0 1
SendCodeViewModel
◊◊1 B
model
◊◊C H
)
◊◊H I
{
ÿÿ 	
if
ŸŸ 
(
ŸŸ 
!
ŸŸ 

ModelState
ŸŸ 
.
ŸŸ 
IsValid
ŸŸ #
)
ŸŸ# $
{
⁄⁄ 
return
€€ 
View
€€ 
(
€€ 
)
€€ 
;
€€ 
}
‹‹ 
if
ﬂﬂ 
(
ﬂﬂ 
!
ﬂﬂ 
await
ﬂﬂ 
SignInManager
ﬂﬂ $
.
ﬂﬂ$ %$
SendTwoFactorCodeAsync
ﬂﬂ% ;
(
ﬂﬂ; <
model
ﬂﬂ< A
.
ﬂﬂA B
SelectedProvider
ﬂﬂB R
)
ﬂﬂR S
)
ﬂﬂS T
{
‡‡ 
return
·· 
View
·· 
(
·· 
$str
·· #
)
··# $
;
··$ %
}
‚‚ 
return
„„ 
RedirectToAction
„„ #
(
„„# $
$str
„„$ 0
,
„„0 1
new
„„2 5
{
„„6 7
Provider
„„8 @
=
„„A B
model
„„C H
.
„„H I
SelectedProvider
„„I Y
,
„„Y Z
	ReturnUrl
„„[ d
=
„„e f
model
„„g l
.
„„l m
	ReturnUrl
„„m v
,
„„v w

RememberMe„„x Ç
=„„É Ñ
model„„Ö ä
.„„ä ã

RememberMe„„ã ï
}„„ñ ó
)„„ó ò
;„„ò ô
}
‰‰ 	
[
ËË 	
AllowAnonymous
ËË	 
]
ËË 
public
ÈÈ 
async
ÈÈ 
Task
ÈÈ 
<
ÈÈ 
ActionResult
ÈÈ &
>
ÈÈ& '#
ExternalLoginCallback
ÈÈ( =
(
ÈÈ= >
string
ÈÈ> D
	returnUrl
ÈÈE N
)
ÈÈN O
{
ÍÍ 	
var
ÎÎ 
	loginInfo
ÎÎ 
=
ÎÎ 
await
ÎÎ !#
AuthenticationManager
ÎÎ" 7
.
ÎÎ7 8'
GetExternalLoginInfoAsync
ÎÎ8 Q
(
ÎÎQ R
)
ÎÎR S
;
ÎÎS T
if
ÏÏ 
(
ÏÏ 
	loginInfo
ÏÏ 
==
ÏÏ 
null
ÏÏ !
)
ÏÏ! "
{
ÌÌ 
return
ÓÓ 
RedirectToAction
ÓÓ '
(
ÓÓ' (
$str
ÓÓ( /
)
ÓÓ/ 0
;
ÓÓ0 1
}
ÔÔ 
var
ÚÚ 
result
ÚÚ 
=
ÚÚ 
await
ÚÚ 
SignInManager
ÚÚ ,
.
ÚÚ, -!
ExternalSignInAsync
ÚÚ- @
(
ÚÚ@ A
	loginInfo
ÚÚA J
,
ÚÚJ K
isPersistent
ÚÚL X
:
ÚÚX Y
false
ÚÚZ _
)
ÚÚ_ `
;
ÚÚ` a
switch
ÛÛ 
(
ÛÛ 
result
ÛÛ 
)
ÛÛ 
{
ÙÙ 
case
ıı 
SignInStatus
ıı !
.
ıı! "
Success
ıı" )
:
ıı) *
return
ˆˆ 
RedirectToLocal
ˆˆ *
(
ˆˆ* +
	returnUrl
ˆˆ+ 4
)
ˆˆ4 5
;
ˆˆ5 6
case
˜˜ 
SignInStatus
˜˜ !
.
˜˜! "
	LockedOut
˜˜" +
:
˜˜+ ,
return
¯¯ 
View
¯¯ 
(
¯¯  
$str
¯¯  )
)
¯¯) *
;
¯¯* +
case
˘˘ 
SignInStatus
˘˘ !
.
˘˘! ""
RequiresVerification
˘˘" 6
:
˘˘6 7
return
˙˙ 
RedirectToAction
˙˙ +
(
˙˙+ ,
$str
˙˙, 6
,
˙˙6 7
new
˙˙8 ;
{
˙˙< =
	ReturnUrl
˙˙> G
=
˙˙H I
	returnUrl
˙˙J S
,
˙˙S T

RememberMe
˙˙U _
=
˙˙` a
false
˙˙b g
}
˙˙h i
)
˙˙i j
;
˙˙j k
case
˚˚ 
SignInStatus
˚˚ !
.
˚˚! "
Failure
˚˚" )
:
˚˚) *
default
¸¸ 
:
¸¸ 
ViewBag
˛˛ 
.
˛˛ 
	ReturnUrl
˛˛ %
=
˛˛& '
	returnUrl
˛˛( 1
;
˛˛1 2
ViewBag
ˇˇ 
.
ˇˇ 
LoginProvider
ˇˇ )
=
ˇˇ* +
	loginInfo
ˇˇ, 5
.
ˇˇ5 6
Login
ˇˇ6 ;
.
ˇˇ; <
LoginProvider
ˇˇ< I
;
ˇˇI J
return
ÄÄ 
View
ÄÄ 
(
ÄÄ  
$str
ÄÄ  ;
,
ÄÄ; <
new
ÄÄ= @0
"ExternalLoginConfirmationViewModel
ÄÄA c
{
ÄÄd e
Email
ÄÄf k
=
ÄÄl m
	loginInfo
ÄÄn w
.
ÄÄw x
Email
ÄÄx }
}
ÄÄ~ 
)ÄÄ Ä
;ÄÄÄ Å
}
ÅÅ 
}
ÇÇ 	
[
ÜÜ 	
HttpPost
ÜÜ	 
]
ÜÜ 
[
áá 	
AllowAnonymous
áá	 
]
áá 
[
àà 	&
ValidateAntiForgeryToken
àà	 !
]
àà! "
public
ââ 
async
ââ 
Task
ââ 
<
ââ 
ActionResult
ââ &
>
ââ& ''
ExternalLoginConfirmation
ââ( A
(
ââA B0
"ExternalLoginConfirmationViewModel
ââB d
model
ââe j
,
ââj k
string
ââl r
	returnUrl
ââs |
)
ââ| }
{
ää 	
if
ãã 
(
ãã 
User
ãã 
.
ãã 
Identity
ãã 
.
ãã 
IsAuthenticated
ãã -
)
ãã- .
{
åå 
return
çç 
RedirectToAction
çç '
(
çç' (
$str
çç( /
,
çç/ 0
$str
çç1 9
)
çç9 :
;
çç: ;
}
éé 
if
êê 
(
êê 

ModelState
êê 
.
êê 
IsValid
êê "
)
êê" #
{
ëë 
var
ìì 
info
ìì 
=
ìì 
await
ìì  #
AuthenticationManager
ìì! 6
.
ìì6 7'
GetExternalLoginInfoAsync
ìì7 P
(
ììP Q
)
ììQ R
;
ììR S
if
îî 
(
îî 
info
îî 
==
îî 
null
îî  
)
îî  !
{
ïï 
return
ññ 
View
ññ 
(
ññ  
$str
ññ  6
)
ññ6 7
;
ññ7 8
}
óó 
var
òò 
user
òò 
=
òò 
new
òò 
ApplicationUser
òò .
{
òò/ 0
UserName
òò1 9
=
òò: ;
model
òò< A
.
òòA B
Email
òòB G
,
òòG H
Email
òòI N
=
òòO P
model
òòQ V
.
òòV W
Email
òòW \
}
òò] ^
;
òò^ _
var
ôô 
result
ôô 
=
ôô 
await
ôô "
UserManager
ôô# .
.
ôô. /
CreateAsync
ôô/ :
(
ôô: ;
user
ôô; ?
)
ôô? @
;
ôô@ A
if
öö 
(
öö 
result
öö 
.
öö 
	Succeeded
öö $
)
öö$ %
{
õõ 
result
úú 
=
úú 
await
úú "
UserManager
úú# .
.
úú. /
AddLoginAsync
úú/ <
(
úú< =
user
úú= A
.
úúA B
Id
úúB D
,
úúD E
info
úúF J
.
úúJ K
Login
úúK P
)
úúP Q
;
úúQ R
if
ùù 
(
ùù 
result
ùù 
.
ùù 
	Succeeded
ùù (
)
ùù( )
{
ûû 
await
üü 
SignInManager
üü +
.
üü+ ,
SignInAsync
üü, 7
(
üü7 8
user
üü8 <
,
üü< =
isPersistent
üü> J
:
üüJ K
false
üüL Q
,
üüQ R
rememberBrowser
üüS b
:
üüb c
false
üüd i
)
üüi j
;
üüj k
return
†† 
RedirectToLocal
†† .
(
††. /
	returnUrl
††/ 8
)
††8 9
;
††9 :
}
°° 
}
¢¢ 
	AddErrors
££ 
(
££ 
result
££  
)
££  !
;
££! "
}
§§ 
ViewBag
¶¶ 
.
¶¶ 
	ReturnUrl
¶¶ 
=
¶¶ 
	returnUrl
¶¶  )
;
¶¶) *
return
ßß 
View
ßß 
(
ßß 
model
ßß 
)
ßß 
;
ßß 
}
®® 	
[
¨¨ 	
HttpPost
¨¨	 
]
¨¨ 
[
≠≠ 	&
ValidateAntiForgeryToken
≠≠	 !
]
≠≠! "
public
ÆÆ 
ActionResult
ÆÆ 
LogOff
ÆÆ "
(
ÆÆ" #
)
ÆÆ# $
{
ØØ 	#
AuthenticationManager
∞∞ !
.
∞∞! "
SignOut
∞∞" )
(
∞∞) *(
DefaultAuthenticationTypes
∞∞* D
.
∞∞D E
ApplicationCookie
∞∞E V
)
∞∞V W
;
∞∞W X
return
±± 
RedirectToAction
±± #
(
±±# $
$str
±±$ +
,
±±+ ,
$str
±±- 6
)
±±6 7
;
±±7 8
}
≤≤ 	
[
∂∂ 	
AllowAnonymous
∂∂	 
]
∂∂ 
public
∑∑ 
ActionResult
∑∑ "
ExternalLoginFailure
∑∑ 0
(
∑∑0 1
)
∑∑1 2
{
∏∏ 	
return
ππ 
View
ππ 
(
ππ 
)
ππ 
;
ππ 
}
∫∫ 	
	protected
ºº 
override
ºº 
void
ºº 
Dispose
ºº  '
(
ºº' (
bool
ºº( ,
	disposing
ºº- 6
)
ºº6 7
{
ΩΩ 	
if
ææ 
(
ææ 
	disposing
ææ 
)
ææ 
{
øø 
if
¿¿ 
(
¿¿ 
_userManager
¿¿  
!=
¿¿! #
null
¿¿$ (
)
¿¿( )
{
¡¡ 
_userManager
¬¬  
.
¬¬  !
Dispose
¬¬! (
(
¬¬( )
)
¬¬) *
;
¬¬* +
_userManager
√√  
=
√√! "
null
√√# '
;
√√' (
}
ƒƒ 
if
∆∆ 
(
∆∆ 
_signInManager
∆∆ "
!=
∆∆# %
null
∆∆& *
)
∆∆* +
{
«« 
_signInManager
»» "
.
»»" #
Dispose
»»# *
(
»»* +
)
»»+ ,
;
»», -
_signInManager
…… "
=
……# $
null
……% )
;
……) *
}
   
}
ÀÀ 
base
ÕÕ 
.
ÕÕ 
Dispose
ÕÕ 
(
ÕÕ 
	disposing
ÕÕ "
)
ÕÕ" #
;
ÕÕ# $
}
ŒŒ 	
private
““ 
const
““ 
string
““ 
XsrfKey
““ $
=
““% &
$str
““' /
;
““/ 0
private
‘‘ $
IAuthenticationManager
‘‘ &#
AuthenticationManager
‘‘' <
{
’’ 	
get
÷÷ 
{
◊◊ 
return
ÿÿ 
HttpContext
ÿÿ "
.
ÿÿ" #
GetOwinContext
ÿÿ# 1
(
ÿÿ1 2
)
ÿÿ2 3
.
ÿÿ3 4
Authentication
ÿÿ4 B
;
ÿÿB C
}
ŸŸ 
}
⁄⁄ 	
private
‹‹ 
void
‹‹ 
	AddErrors
‹‹ 
(
‹‹ 
IdentityResult
‹‹ -
result
‹‹. 4
)
‹‹4 5
{
›› 	
foreach
ﬁﬁ 
(
ﬁﬁ 
var
ﬁﬁ 
error
ﬁﬁ 
in
ﬁﬁ !
result
ﬁﬁ" (
.
ﬁﬁ( )
Errors
ﬁﬁ) /
)
ﬁﬁ/ 0
{
ﬂﬂ 

ModelState
‡‡ 
.
‡‡ 
AddModelError
‡‡ (
(
‡‡( )
$str
‡‡) +
,
‡‡+ ,
error
‡‡- 2
)
‡‡2 3
;
‡‡3 4
}
·· 
}
‚‚ 	
private
„„ 
ActionResult
„„ 
RedirectToLocal
„„ ,
(
„„, -
string
„„- 3
	returnUrl
„„4 =
)
„„= >
{
‰‰ 	
if
ÂÂ 
(
ÂÂ 
Url
ÂÂ 
.
ÂÂ 

IsLocalUrl
ÂÂ 
(
ÂÂ 
	returnUrl
ÂÂ (
)
ÂÂ( )
)
ÂÂ) *
{
ÊÊ 
return
ÁÁ 
Redirect
ÁÁ 
(
ÁÁ  
	returnUrl
ÁÁ  )
)
ÁÁ) *
;
ÁÁ* +
}
ËË 
return
ÈÈ 
RedirectToAction
ÈÈ #
(
ÈÈ# $
$str
ÈÈ$ 1
,
ÈÈ1 2
$str
ÈÈ3 ?
)
ÈÈ? @
;
ÈÈ@ A
}
ÍÍ 	
private
ÎÎ 
ActionResult
ÎÎ 3
%RedirectToSeleccionarCentroDeAtencion
ÎÎ B
(
ÎÎB C
string
ÎÎC I
	returnUrl
ÎÎJ S
)
ÎÎS T
{
ÏÏ 	
if
ÌÌ 
(
ÌÌ 
Url
ÌÌ 
.
ÌÌ 

IsLocalUrl
ÌÌ 
(
ÌÌ 
	returnUrl
ÌÌ (
)
ÌÌ( )
)
ÌÌ) *
{
ÓÓ 
return
ÔÔ 
Redirect
ÔÔ 
(
ÔÔ  
	returnUrl
ÔÔ  )
)
ÔÔ) *
;
ÔÔ* +
}
 
return
ÚÚ 
RedirectToAction
ÚÚ #
(
ÚÚ# $
$str
ÚÚ$ A
,
ÚÚA B
$str
ÚÚC U
)
ÚÚU V
;
ÚÚV W
}
ÛÛ 	
internal
ıı 
class
ıı 
ChallengeResult
ıı &
:
ıı' ($
HttpUnauthorizedResult
ıı) ?
{
ˆˆ 	
public
˜˜ 
ChallengeResult
˜˜ "
(
˜˜" #
string
˜˜# )
provider
˜˜* 2
,
˜˜2 3
string
˜˜4 :
redirectUri
˜˜; F
)
˜˜F G
:
¯¯ 
this
¯¯ 
(
¯¯ 
provider
¯¯ 
,
¯¯  
redirectUri
¯¯! ,
,
¯¯, -
null
¯¯. 2
)
¯¯2 3
{
˘˘ 
}
˙˙ 
public
¸¸ 
ChallengeResult
¸¸ "
(
¸¸" #
string
¸¸# )
provider
¸¸* 2
,
¸¸2 3
string
¸¸4 :
redirectUri
¸¸; F
,
¸¸F G
string
¸¸H N
userId
¸¸O U
)
¸¸U V
{
˝˝ 
LoginProvider
˛˛ 
=
˛˛ 
provider
˛˛  (
;
˛˛( )
RedirectUri
ˇˇ 
=
ˇˇ 
redirectUri
ˇˇ )
;
ˇˇ) *
UserId
ÄÄ 
=
ÄÄ 
userId
ÄÄ 
;
ÄÄ  
}
ÅÅ 
public
ÉÉ 
string
ÉÉ 
LoginProvider
ÉÉ '
{
ÉÉ( )
get
ÉÉ* -
;
ÉÉ- .
set
ÉÉ/ 2
;
ÉÉ2 3
}
ÉÉ4 5
public
ÑÑ 
string
ÑÑ 
RedirectUri
ÑÑ %
{
ÑÑ& '
get
ÑÑ( +
;
ÑÑ+ ,
set
ÑÑ- 0
;
ÑÑ0 1
}
ÑÑ2 3
public
ÖÖ 
string
ÖÖ 
UserId
ÖÖ  
{
ÖÖ! "
get
ÖÖ# &
;
ÖÖ& '
set
ÖÖ( +
;
ÖÖ+ ,
}
ÖÖ- .
public
áá 
override
áá 
void
áá  
ExecuteResult
áá! .
(
áá. /
ControllerContext
áá/ @
context
ááA H
)
ááH I
{
àà 
var
ââ 

properties
ââ 
=
ââ  
new
ââ! $&
AuthenticationProperties
ââ% =
{
ââ> ?
RedirectUri
ââ@ K
=
ââL M
RedirectUri
ââN Y
}
ââZ [
;
ââ[ \
if
ää 
(
ää 
UserId
ää 
!=
ää 
null
ää "
)
ää" #
{
ãã 

properties
åå 
.
åå 

Dictionary
åå )
[
åå) *
XsrfKey
åå* 1
]
åå1 2
=
åå3 4
UserId
åå5 ;
;
åå; <
}
çç 
context
éé 
.
éé 
HttpContext
éé #
.
éé# $
GetOwinContext
éé$ 2
(
éé2 3
)
éé3 4
.
éé4 5
Authentication
éé5 C
.
ééC D
	Challenge
ééD M
(
ééM N

properties
ééN X
,
ééX Y
LoginProvider
ééZ g
)
éég h
;
ééh i
}
èè 
}
êê 	
}
íí 
}ìì ¢$
VD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\ActorBaseController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
Areas 
. 
Administracion +
.+ ,
Controllers, 7
{		 
public

 

class

 
ActorBaseController

 $
:

% &
BaseController

' 5
{ 
public 
DataActorApi 
ObtenerActorRucApi .
(. /
string/ 5
numeroDocumento6 E
)E F
{ 	
DataActorApi 
dataActorApi %
=& '
new( +
DataActorApi, 8
(8 9
)9 :
;: ;
try 
{ 
string 
url 
= 
AplicacionSettings /
./ 0
Default0 7
.7 8"
UrlApiConsultaActorRuc8 N
+O P
numeroDocumentoQ `
;` a
var 
t 
= 
Task 
. 
Run  
(  !
(! "
)" #
=>$ &
GetURI' -
(- .
new. 1
Uri2 5
(5 6
url6 9
)9 :
): ;
); <
;< =
t 
. 
Wait 
( 
) 
; 
string 
result 
= 
t  !
.! "
Result" (
;( )
dataActorApi 
= 

Newtonsoft )
.) *
Json* .
.. /
JsonConvert/ :
.: ;
DeserializeObject; L
<L M
DataActorApiM Y
>Y Z
(Z [
result[ a
)a b
;b c
if 
( 
dataActorApi  
.  !
Estado! '
==( *
false+ 0
)0 1
{ 
throw 
new 
ControllerException 1
(1 2
$str2 ]
)] ^
;^ _
} 
return 
dataActorApi #
;# $
} 
catch 
( 
	Exception 
e 
) 
{ 
throw 
new 
ControllerException -
(- .
$str. R
,R S
eT U
)U V
;V W
}   
}!! 	
public## 
DataActorApi## 
ObtenerActorDniApi## .
(##. /
string##/ 5
numeroDocumento##6 E
)##E F
{$$ 	
var%% 
dataActorApi%% 
=%% 
new%% "
DataActorApi%%# /
(%%/ 0
)%%0 1
;%%1 2
try&& 
{'' 
string(( 
url(( 
=(( 
AplicacionSettings(( /
.((/ 0
Default((0 7
.((7 8"
UrlApiConsultaActorDni((8 N
+((O P
numeroDocumento((Q `
;((` a
var)) 
t)) 
=)) 
Task)) 
.)) 
Run))  
())  !
())! "
)))" #
=>))$ &
GetURI))' -
())- .
new)). 1
Uri))2 5
())5 6
url))6 9
)))9 :
))): ;
))); <
;))< =
t** 
.** 
Wait** 
(** 
)** 
;** 
string++ 
result++ 
=++ 
t++  !
.++! "
Result++" (
;++( )
dataActorApi,, 
=,, 

Newtonsoft,, )
.,,) *
Json,,* .
.,,. /
JsonConvert,,/ :
.,,: ;
DeserializeObject,,; L
<,,L M
DataActorApi,,M Y
>,,Y Z
(,,Z [
result,,[ a
),,a b
;,,b c
if-- 
(-- 
dataActorApi--  
.--  !
Estado--! '
==--( *
false--+ 0
)--0 1
{.. 
throw// 
new// 
ControllerException// 1
(//1 2
$str//2 ]
)//] ^
;//^ _
}00 
return11 
dataActorApi11 #
;11# $
}22 
catch33 
(33 
	Exception33 
e33 
)33 
{44 
throw55 
new55 
ControllerException55 -
(55- .
$str55. R
,55R S
e55T U
)55U V
;55V W
}66 
}77 	
}88 
}99 æ≥
RD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\AdminController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
AdminController  
:! "
ActorBaseController# 6
{ 
public 
AdminController 
( 
)  
{ 	
} 	
private   "
ApplicationUserManager   &
_userManager  ' 3
;  3 4
private!! "
ApplicationRoleManager!! &
_roleManager!!' 3
;!!3 4
[&& 	
	Authorize&&	 
(&& 
Roles&& 
=&& 
$str&& ,
)&&, -
]&&- .
public(( 
ActionResult(( 
Index(( !
(((! "
)((" #
{)) 	
return** 
View** 
(** 
)** 
;** 
}++ 	
publicrr 

JsonResultrr 
ListarUsuariosrr (
(rr( )
)rr) *
{ss 	
trytt 
{uu 
Listvv 
<vv 
ExpandedUserDTOvv $
>vv$ %
col_UserDTOvv& 1
=vv2 3
newvv4 7
Listvv8 <
<vv< =
ExpandedUserDTOvv= L
>vvL M
(vvM N
)vvN O
;vvO P
varxx 
resultxx 
=xx 
UserManagerxx (
.xx( )
Usersxx) .
.xx. /
ToListxx/ 5
(xx5 6
)xx6 7
;xx7 8
foreachzz 
(zz 
varzz 
itemzz !
inzz" $
resultzz% +
)zz+ ,
{{{ 
ExpandedUserDTO|| #

objUserDTO||$ .
=||/ 0
new||1 4
ExpandedUserDTO||5 D
(||D E
)||E F
;||F G

objUserDTO~~ 
.~~ 
	IdUsuario~~ (
=~~) *
item~~+ /
.~~/ 0
Id~~0 2
;~~2 3

objUserDTO 
. 
UserName '
=( )
item* .
.. /
UserName/ 7
;7 8

objUserDTO
ÄÄ 
.
ÄÄ 
Email
ÄÄ $
=
ÄÄ% &
item
ÄÄ' +
.
ÄÄ+ ,
Email
ÄÄ, 1
;
ÄÄ1 2

objUserDTO
ÅÅ 
.
ÅÅ 
LockoutEndDateUtc
ÅÅ 0
=
ÅÅ1 2
item
ÅÅ3 7
.
ÅÅ7 8
LockoutEndDateUtc
ÅÅ8 I
;
ÅÅI J

objUserDTO
ÇÇ 
.
ÇÇ  
EsUsuarioPrincipal
ÇÇ 1
=
ÇÇ2 3
item
ÇÇ4 8
.
ÇÇ8 9
UserName
ÇÇ9 A
.
ÇÇA B
ToLower
ÇÇB I
(
ÇÇI J
)
ÇÇJ K
!=
ÇÇL N
this
ÇÇO S
.
ÇÇS T
User
ÇÇT X
.
ÇÇX Y
Identity
ÇÇY a
.
ÇÇa b
Name
ÇÇb f
.
ÇÇf g
ToLower
ÇÇg n
(
ÇÇn o
)
ÇÇo p
?
ÇÇq r
true
ÇÇs w
:
ÇÇx y
false
ÇÇz 
;ÇÇ Ä

objUserDTO
ÉÉ 
.
ÉÉ 
NombresRoles
ÉÉ +
=
ÉÉ, -%
ObtenerNombreDeLosRoles
ÉÉ. E
(
ÉÉE F
item
ÉÉF J
.
ÉÉJ K
Roles
ÉÉK P
)
ÉÉP Q
;
ÉÉQ R
col_UserDTO
ÑÑ 
.
ÑÑ  
Add
ÑÑ  #
(
ÑÑ# $

objUserDTO
ÑÑ$ .
)
ÑÑ. /
;
ÑÑ/ 0
}
áá 
return
ââ 
Json
ââ 
(
ââ 
col_UserDTO
ââ '
)
ââ' (
;
ââ( )
}
ää 
catch
ãã 
(
ãã 
	Exception
ãã 
ex
ãã 
)
ãã  
{
åå 

ModelState
çç 
.
çç 
AddModelError
çç (
(
çç( )
string
çç) /
.
çç/ 0
Empty
çç0 5
,
çç5 6
$str
çç7 @
+
ççA B
ex
ççC E
)
ççE F
;
ççF G
List
éé 
<
éé 
ExpandedUserDTO
éé $
>
éé$ %
col_UserDTO
éé& 1
=
éé2 3
new
éé4 7
List
éé8 <
<
éé< =
ExpandedUserDTO
éé= L
>
ééL M
(
ééM N
)
ééN O
;
ééO P
return
êê 
Json
êê 
(
êê 
col_UserDTO
êê '
)
êê' (
;
êê( )
}
ëë 
}
íí 	
public
îî 
string
îî %
ObtenerNombreDeLosRoles
îî -
(
îî- .
IEnumerable
îî. 9
<
îî9 :
IdentityUserRole
îî: J
>
îîJ K
ListOfRoleIds
îîL Y
)
îîY Z
{
ïï 	
List
ññ 
<
ññ 
string
ññ 
>
ññ 
ListOfRoleNames
ññ (
=
ññ) *
new
ññ+ .
List
ññ/ 3
<
ññ3 4
string
ññ4 :
>
ññ: ;
(
ññ; <
)
ññ< =
;
ññ= >
foreach
ôô 
(
ôô 
var
ôô 
item
ôô 
in
ôô  
ListOfRoleIds
ôô! .
)
ôô. /
{
öö 
string
õõ 
rolename
õõ 
=
õõ  !
RoleManager
õõ" -
.
õõ- .
FindById
õõ. 6
(
õõ6 7
item
õõ7 ;
.
õõ; <
RoleId
õõ< B
)
õõB C
.
õõC D
Name
õõD H
;
õõH I
ListOfRoleNames
úú 
.
úú  
Add
úú  #
(
úú# $
rolename
úú$ ,
)
úú, -
;
úú- .
}
ùù 
string
üü 
nombresRoles
üü 
=
üü  !
string
üü" (
.
üü( )
Join
üü) -
(
üü- .
$str
üü. 2
,
üü2 3
ListOfRoleNames
üü4 C
.
üüC D
ToArray
üüD K
(
üüK L
)
üüL M
)
üüM N
;
üüN O
return
°° 
nombresRoles
°° 
;
°°  
}
££ 	
[
™™ 	
	Authorize
™™	 
(
™™ 
Roles
™™ 
=
™™ 
$str
™™ ,
)
™™, -
]
™™- .
public
¨¨ 
ActionResult
¨¨ 
Create
¨¨ "
(
¨¨" #
)
¨¨# $
{
≠≠ 	
return
∞∞ 
View
∞∞ 
(
∞∞ 
)
∞∞. /
;
∞∞/ 0
}
±± 	
public
∏∏ 

JsonResult
∏∏ 
GuardarUsuario
∏∏ (
(
∏∏( )
ExpandedUserDTO
∏∏) 8"
paramExpandedUserDTO
∏∏9 M
)
∏∏M N
{
ππ 	
try
∫∫ 
{
ªª 
var
ºº 
Email
ºº 
=
ºº "
paramExpandedUserDTO
ºº 0
.
ºº0 1
Email
ºº1 6
.
ºº6 7
Trim
ºº7 ;
(
ºº; <
)
ºº< =
;
ºº= >
var
ΩΩ 
UserName
ΩΩ 
=
ΩΩ "
paramExpandedUserDTO
ΩΩ 3
.
ΩΩ3 4
Email
ΩΩ4 9
.
ΩΩ9 :
Trim
ΩΩ: >
(
ΩΩ> ?
)
ΩΩ? @
;
ΩΩ@ A
var
ææ 
Password
ææ 
=
ææ "
paramExpandedUserDTO
ææ 3
.
ææ3 4
Password
ææ4 <
.
ææ< =
Trim
ææ= A
(
ææA B
)
ææB C
;
ææC D
if
¿¿ 
(
¿¿ 
Email
¿¿ 
==
¿¿ 
$str
¿¿ 
)
¿¿  
{
¡¡ 
throw
¬¬ 
new
¬¬ 
	Exception
¬¬ '
(
¬¬' (
$str
¬¬( 2
)
¬¬2 3
;
¬¬3 4
}
√√ 
if
≈≈ 
(
≈≈ 
Password
≈≈ 
==
≈≈ 
$str
≈≈  "
)
≈≈" #
{
∆∆ 
throw
«« 
new
«« 
	Exception
«« '
(
««' (
$str
««( 5
)
««5 6
;
««6 7
}
»» 
UserName
ÀÀ 
=
ÀÀ 
Email
ÀÀ  
.
ÀÀ  !
ToLower
ÀÀ! (
(
ÀÀ( )
)
ÀÀ) *
;
ÀÀ* +
var
œœ 
objNewAdminUser
œœ #
=
œœ$ %
new
œœ& )
ApplicationUser
œœ* 9
{
œœ: ;
UserName
œœ< D
=
œœE F
UserName
œœG O
,
œœO P
Email
œœQ V
=
œœW X
Email
œœY ^
}
œœ_ `
;
œœ` a
var
–– #
AdminUserCreateResult
–– )
=
––* +
UserManager
––, 7
.
––7 8
Create
––8 >
(
––> ?
objNewAdminUser
––? N
,
––N O
Password
––P X
)
––X Y
;
––Y Z
if
““ 
(
““ #
AdminUserCreateResult
““ )
.
““) *
	Succeeded
““* 3
)
““3 4
{
”” 
string
‘‘ 

strNewRole
‘‘ %
=
‘‘& '"
paramExpandedUserDTO
‘‘( <
.
‘‘< =
Roles
‘‘= B
.
‘‘B C
First
‘‘C H
(
‘‘H I
)
‘‘I J
.
‘‘J K
RoleName
‘‘K S
;
‘‘S T
if
÷÷ 
(
÷÷ 

strNewRole
÷÷ "
!=
÷÷# %
$str
÷÷& )
)
÷÷) *
{
◊◊ 
UserManager
ÿÿ #
.
ÿÿ# $
	AddToRole
ÿÿ$ -
(
ÿÿ- .
objNewAdminUser
ÿÿ. =
.
ÿÿ= >
Id
ÿÿ> @
,
ÿÿ@ A

strNewRole
ÿÿB L
)
ÿÿL M
;
ÿÿM N
}
ŸŸ 
return
⁄⁄ 
new
⁄⁄ "
JsonHttpStatusResult
⁄⁄ 3
(
⁄⁄3 4
new
⁄⁄4 7
{
⁄⁄8 9
code_result
⁄⁄: E
=
⁄⁄F G!
OperationResultEnum
⁄⁄H [
.
⁄⁄[ \
Success
⁄⁄\ c
,
⁄⁄c d
data
⁄⁄e i
=
⁄⁄j k
$str
⁄⁄l p
,
⁄⁄p q!
result_description⁄⁄r Ñ
=⁄⁄Ö Ü
$str⁄⁄á ´
+⁄⁄¨ ≠
Email⁄⁄Æ ≥
}⁄⁄¥ µ
,⁄⁄µ ∂
HttpStatusCode⁄⁄∑ ≈
.⁄⁄≈ ∆
OK⁄⁄∆ »
)⁄⁄» …
;⁄⁄…  
}
€€ 
else
‹‹ 
{
›› 
return
ﬁﬁ 
new
ﬁﬁ "
JsonHttpStatusResult
ﬁﬁ 3
(
ﬁﬁ3 4
Util
ﬁﬁ4 8
.
ﬁﬁ8 9
	ErrorJson
ﬁﬁ9 B
(
ﬁﬁB C
new
ﬁﬁC F
	Exception
ﬁﬁG P
(
ﬁﬁP Q
$str
ﬁﬁQ t
+
ﬁﬁu v
Email
ﬁﬁw |
+
ﬁﬁ} ~
$strﬁﬁ Ö
+ﬁﬁÜ á%
AdminUserCreateResultﬁﬁà ù
.ﬁﬁù û
Errorsﬁﬁû §
.ﬁﬁ§ •
Firstﬁﬁ• ™
(ﬁﬁ™ ´
)ﬁﬁ´ ¨
.ﬁﬁ¨ ≠
ToStringﬁﬁ≠ µ
(ﬁﬁµ ∂
)ﬁﬁ∂ ∑
)ﬁﬁ∑ ∏
)ﬁﬁ∏ π
,ﬁﬁπ ∫
HttpStatusCodeﬁﬁª …
.ﬁﬁ…  #
InternalServerErrorﬁﬁ  ›
)ﬁﬁ› ﬁ
;ﬁﬁﬁ ﬂ
}
ﬂﬂ 
}
‡‡ 
catch
·· 
(
·· 
	Exception
·· 
e
·· 
)
·· 
{
‚‚ 
return
„„ 
new
„„ "
JsonHttpStatusResult
„„ /
(
„„/ 0
Util
„„0 4
.
„„4 5
	ErrorJson
„„5 >
(
„„> ?
new
„„? B
	Exception
„„C L
(
„„L M
$str
„„M u
,
„„u v
e
„„w x
)
„„x y
)
„„y z
,
„„z {
HttpStatusCode„„| ä
.„„ä ã#
InternalServerError„„ã û
)„„û ü
;„„ü †
}
‰‰ 
}
ÂÂ 	
public
ÊÊ 
OperationResult
ÊÊ 
GuardarUsuario_
ÊÊ .
(
ÊÊ. /
ExpandedUserDTO
ÊÊ/ >"
paramExpandedUserDTO
ÊÊ? S
)
ÊÊS T
{
ÁÁ 	
try
ËË 
{
ÈÈ 
var
ÍÍ 
Email
ÍÍ 
=
ÍÍ "
paramExpandedUserDTO
ÍÍ 0
.
ÍÍ0 1
Email
ÍÍ1 6
.
ÍÍ6 7
Trim
ÍÍ7 ;
(
ÍÍ; <
)
ÍÍ< =
;
ÍÍ= >
var
ÎÎ 
UserName
ÎÎ 
=
ÎÎ "
paramExpandedUserDTO
ÎÎ 3
.
ÎÎ3 4
Email
ÎÎ4 9
.
ÎÎ9 :
Trim
ÎÎ: >
(
ÎÎ> ?
)
ÎÎ? @
;
ÎÎ@ A
var
ÏÏ 
Password
ÏÏ 
=
ÏÏ "
paramExpandedUserDTO
ÏÏ 3
.
ÏÏ3 4
Password
ÏÏ4 <
.
ÏÏ< =
Trim
ÏÏ= A
(
ÏÏA B
)
ÏÏB C
;
ÏÏC D
if
ÓÓ 
(
ÓÓ 
Email
ÓÓ 
==
ÓÓ 
$str
ÓÓ 
)
ÓÓ  
{
ÔÔ 
throw
 
new
 
	Exception
 '
(
' (
$str
( 2
)
2 3
;
3 4
}
ÒÒ 
if
ÛÛ 
(
ÛÛ 
Password
ÛÛ 
==
ÛÛ 
$str
ÛÛ  "
)
ÛÛ" #
{
ÙÙ 
throw
ıı 
new
ıı 
	Exception
ıı '
(
ıı' (
$str
ıı( 5
)
ıı5 6
;
ıı6 7
}
ˆˆ 
UserName
˘˘ 
=
˘˘ 
Email
˘˘  
.
˘˘  !
ToLower
˘˘! (
(
˘˘( )
)
˘˘) *
;
˘˘* +
var
˝˝ 
objNewAdminUser
˝˝ #
=
˝˝$ %
new
˝˝& )
ApplicationUser
˝˝* 9
{
˝˝: ;
UserName
˝˝< D
=
˝˝E F
UserName
˝˝G O
,
˝˝O P
Email
˝˝Q V
=
˝˝W X
Email
˝˝Y ^
}
˝˝_ `
;
˝˝` a
var
˛˛ #
AdminUserCreateResult
˛˛ )
=
˛˛* +
UserManager
˛˛, 7
.
˛˛7 8
Create
˛˛8 >
(
˛˛> ?
objNewAdminUser
˛˛? N
,
˛˛N O
Password
˛˛P X
)
˛˛X Y
;
˛˛Y Z
if
ÄÄ 
(
ÄÄ #
AdminUserCreateResult
ÄÄ )
.
ÄÄ) *
	Succeeded
ÄÄ* 3
==
ÄÄ4 6
true
ÄÄ7 ;
)
ÄÄ; <
{
ÅÅ 
foreach
ÇÇ 
(
ÇÇ 
var
ÇÇ 
item
ÇÇ  $
in
ÇÇ% '"
paramExpandedUserDTO
ÇÇ( <
.
ÇÇ< =
Roles
ÇÇ= B
)
ÇÇB C
{
ÉÉ 
UserManager
ÑÑ #
.
ÑÑ# $
	AddToRole
ÑÑ$ -
(
ÑÑ- .
objNewAdminUser
ÑÑ. =
.
ÑÑ= >
Id
ÑÑ> @
,
ÑÑ@ A
item
ÑÑB F
.
ÑÑF G
RoleName
ÑÑG O
)
ÑÑO P
;
ÑÑP Q
}
ÖÖ 
}
ÜÜ 
return
àà 
new
àà 
OperationResult
àà *
(
àà* +
objNewAdminUser
àà+ :
.
àà: ;
Id
àà; =
,
àà= >!
OperationResultEnum
àà> Q
.
ààQ R
Success
ààR Y
,
ààY Z
$str
àà[ ~
+àà Ä
EmailààÅ Ü
)ààÜ á
;ààá à
}
ââ 
catch
ää 
(
ää 
	Exception
ää 
e
ää 
)
ää 
{
ãã 
return
åå 
new
åå 
OperationResult
åå *
(
åå* +
e
åå+ ,
)
åå, -
;
åå- .
}
çç 
}
éé 	
[
íí 	
	Authorize
íí	 
(
íí 
Roles
íí 
=
íí 
$str
íí ,
)
íí, -
]
íí- .
public
îî 
ActionResult
îî 
EditUser
îî $
(
îî$ %
string
îî% +
UserName
îî, 4
)
îî4 5
{
ïï 	
if
ññ 
(
ññ 
UserName
ññ 
==
ññ 
null
ññ  
)
ññ  !
{
óó 
return
òò 
new
òò "
HttpStatusCodeResult
òò /
(
òò/ 0
HttpStatusCode
òò0 >
.
òò> ?

BadRequest
òò? I
)
òòI J
;
òòJ K
}
ôô 
ExpandedUserDTO
öö  
objExpandedUserDTO
öö .
=
öö/ 0
GetUser
öö1 8
(
öö8 9
UserName
öö9 A
)
ööA B
;
ööB C
if
õõ 
(
õõ  
objExpandedUserDTO
õõ "
==
õõ# %
null
õõ& *
)
õõ* +
{
úú 
return
ùù 
HttpNotFound
ùù #
(
ùù# $
)
ùù$ %
;
ùù% &
}
ûû 
return
üü 
View
üü 
(
üü  
objExpandedUserDTO
üü *
)
üü* +
;
üü+ ,
}
†† 	
[
§§ 	
	Authorize
§§	 
(
§§ 
Roles
§§ 
=
§§ 
$str
§§ ,
)
§§, -
]
§§- .
[
•• 	
HttpPost
••	 
]
•• 
[
¶¶ 	&
ValidateAntiForgeryToken
¶¶	 !
]
¶¶! "
public
®® 
ActionResult
®® 
EditUser
®® $
(
®®$ %
ExpandedUserDTO
®®% 4"
paramExpandedUserDTO
®®5 I
)
®®I J
{
©© 	
try
™™ 
{
´´ 
if
¨¨ 
(
¨¨ "
paramExpandedUserDTO
¨¨ (
==
¨¨) +
null
¨¨, 0
)
¨¨0 1
{
≠≠ 
return
ÆÆ 
new
ÆÆ "
HttpStatusCodeResult
ÆÆ 3
(
ÆÆ3 4
HttpStatusCode
ÆÆ4 B
.
ÆÆB C

BadRequest
ÆÆC M
)
ÆÆM N
;
ÆÆN O
}
ØØ 
ExpandedUserDTO
±±  
objExpandedUserDTO
±±  2
=
±±3 4
UpdateDTOUser
±±5 B
(
±±B C"
paramExpandedUserDTO
±±C W
)
±±W X
;
±±X Y
if
∏∏ 
(
∏∏  
objExpandedUserDTO
∏∏ &
==
∏∏' )
null
∏∏* .
)
∏∏. /
{
ππ 
return
∫∫ 
HttpNotFound
∫∫ '
(
∫∫' (
)
∫∫( )
;
∫∫) *
}
ªª 
return
ºº 
RedirectToAction
ºº '
(
ºº' (
$str
ºº( /
)
ºº/ 0
;
ºº0 1
}
øø 
catch
¿¿ 
(
¿¿ 
	Exception
¿¿ 
ex
¿¿ 
)
¿¿  
{
¡¡ 

ModelState
¬¬ 
.
¬¬ 
AddModelError
¬¬ (
(
¬¬( )
string
¬¬) /
.
¬¬/ 0
Empty
¬¬0 5
,
¬¬5 6
$str
¬¬7 @
+
¬¬A B
ex
¬¬C E
)
¬¬E F
;
¬¬F G
return
√√ 
View
√√ 
(
√√ 
$str
√√ &
,
√√& '
GetUser
√√( /
(
√√/ 0"
paramExpandedUserDTO
√√0 D
.
√√D E
UserName
√√E M
)
√√M N
)
√√N O
;
√√O P
}
ƒƒ 
}
≈≈ 	
public
∆∆ 
OperationResult
∆∆ 
EditarUsuario
∆∆ ,
(
∆∆, -
ExpandedUserDTO
∆∆- <"
paramExpandedUserDTO
∆∆= Q
)
∆∆Q R
{
«« 	
try
»» 
{
…… 
ExpandedUserDTO
    
objExpandedUserDTO
    2
=
  3 4
UpdateDTOUser
  5 B
(
  B C"
paramExpandedUserDTO
  C W
)
  W X
;
  X Y
ApplicationUser
ÀÀ 
user
ÀÀ  $
=
ÀÀ% &
UserManager
ÀÀ' 2
.
ÀÀ2 3

FindByName
ÀÀ3 =
(
ÀÀ= >"
paramExpandedUserDTO
ÀÀ> R
.
ÀÀR S
UserName
ÀÀS [
)
ÀÀ[ \
;
ÀÀ\ ]
foreach
ÕÕ 
(
ÕÕ 
var
ÕÕ 
item
ÕÕ !
in
ÕÕ" $"
paramExpandedUserDTO
ÕÕ% 9
.
ÕÕ9 :
Roles
ÕÕ: ?
)
ÕÕ? @
{
ŒŒ 
UserManager
œœ 
.
œœ  
	AddToRole
œœ  )
(
œœ) *
user
œœ* .
.
œœ. /
Id
œœ/ 1
,
œœ1 2
item
œœ3 7
.
œœ7 8
RoleName
œœ8 @
)
œœ@ A
;
œœA B
}
–– 
return
““ 
new
““ 
OperationResult
““ *
(
““* +!
OperationResultEnum
““+ >
.
““> ?
Success
““? F
,
““F G
$str
““H y
+
““z {#
paramExpandedUserDTO““| ê
.““ê ë
Email““ë ñ
)““ñ ó
;““ó ò
}
”” 
catch
‘‘ 
(
‘‘ 
	Exception
‘‘ 
e
‘‘ 
)
‘‘ 
{
’’ 
return
÷÷ 
new
÷÷ 
OperationResult
÷÷ *
(
÷÷* +
e
÷÷+ ,
)
÷÷, -
;
÷÷- .
}
◊◊ 
}
ÿÿ 	
[
‹‹ 	
	Authorize
‹‹	 
(
‹‹ 
Roles
‹‹ 
=
‹‹ 
$str
‹‹ ,
)
‹‹, -
]
‹‹- .
public
ﬁﬁ 

JsonResult
ﬁﬁ 

DeleteUser
ﬁﬁ $
(
ﬁﬁ$ %
string
ﬁﬁ% +
UserName
ﬁﬁ, 4
)
ﬁﬁ4 5
{
ﬂﬂ 	
try
‡‡ 
{
·· 
if
‚‚ 
(
‚‚ 
UserName
‚‚ 
.
‚‚ 
ToLower
‚‚ $
(
‚‚$ %
)
‚‚% &
==
‚‚' )
this
‚‚* .
.
‚‚. /
User
‚‚/ 3
.
‚‚3 4
Identity
‚‚4 <
.
‚‚< =
Name
‚‚= A
.
‚‚A B
ToLower
‚‚B I
(
‚‚I J
)
‚‚J K
)
‚‚K L
{
„„ 
throw
‰‰ 
new
‰‰ 
	Exception
‰‰ '
(
‰‰' (
$str
‰‰( W
)
‰‰W X
;
‰‰X Y
}
ÂÂ 
ExpandedUserDTO
ÁÁ  
objExpandedUserDTO
ÁÁ  2
=
ÁÁ3 4
GetUser
ÁÁ5 <
(
ÁÁ< =
UserName
ÁÁ= E
)
ÁÁE F
;
ÁÁF G
if
ÈÈ 
(
ÈÈ  
objExpandedUserDTO
ÈÈ &
==
ÈÈ' )
null
ÈÈ* .
)
ÈÈ. /
{
ÍÍ 
throw
ÎÎ 
new
ÎÎ 
	Exception
ÎÎ '
(
ÎÎ' (
$str
ÎÎ( ?
)
ÎÎ? @
;
ÎÎ@ A
}
ÏÏ 
else
ÌÌ 
{
ÓÓ 

DeleteUser
ÔÔ 
(
ÔÔ  
objExpandedUserDTO
ÔÔ 1
)
ÔÔ1 2
;
ÔÔ2 3
}
 
return
ÚÚ 
Json
ÚÚ 
(
ÚÚ 
Util
ÚÚ  
.
ÚÚ  !
SuccessJson
ÚÚ! ,
(
ÚÚ, -
$str
ÚÚ- D
)
ÚÚD E
)
ÚÚE F
;
ÚÚF G
}
ÛÛ 
catch
ÙÙ 
(
ÙÙ 
	Exception
ÙÙ 
ex
ÙÙ 
)
ÙÙ  
{
ıı 
HttpContext
ˆˆ 
.
ˆˆ 
Response
ˆˆ $
.
ˆˆ$ %

StatusCode
ˆˆ% /
=
ˆˆ0 1
$num
ˆˆ2 5
;
ˆˆ5 6
return
˜˜ 
Json
˜˜ 
(
˜˜ 
Util
˜˜  
.
˜˜  !
	ErrorJson
˜˜! *
(
˜˜* +
ex
˜˜+ -
)
˜˜- .
)
˜˜. /
;
˜˜/ 0
}
˙˙ 
}
˚˚ 	
[
ÄÄ 	
	Authorize
ÄÄ	 
(
ÄÄ 
Roles
ÄÄ 
=
ÄÄ 
$str
ÄÄ ,
)
ÄÄ, -
]
ÄÄ- .
public
ÇÇ 
ActionResult
ÇÇ 
	EditRoles
ÇÇ %
(
ÇÇ% &
string
ÇÇ& ,
UserName
ÇÇ- 5
)
ÇÇ5 6
{
ÉÉ 	
if
ÑÑ 
(
ÑÑ 
UserName
ÑÑ 
==
ÑÑ 
null
ÑÑ  
)
ÑÑ  !
{
ÖÖ 
return
ÜÜ 
new
ÜÜ "
HttpStatusCodeResult
ÜÜ /
(
ÜÜ/ 0
HttpStatusCode
ÜÜ0 >
.
ÜÜ> ?

BadRequest
ÜÜ? I
)
ÜÜI J
;
ÜÜJ K
}
áá 
UserName
ââ 
=
ââ 
UserName
ââ 
.
ââ  
ToLower
ââ  '
(
ââ' (
)
ââ( )
;
ââ) *
ExpandedUserDTO
åå  
objExpandedUserDTO
åå .
=
åå/ 0
GetUser
åå1 8
(
åå8 9
UserName
åå9 A
)
ååA B
;
ååB C
if
éé 
(
éé  
objExpandedUserDTO
éé "
==
éé# %
null
éé& *
)
éé* +
{
èè 
return
êê 
HttpNotFound
êê #
(
êê# $
)
êê$ %
;
êê% &
}
ëë 
UserAndRolesDTO
ìì  
objUserAndRolesDTO
ìì .
=
ìì/ 0
GetUserAndRoles
îî 
(
îî  
UserName
îî  (
)
îî( )
;
îî) *
return
ññ 
View
ññ 
(
ññ  
objUserAndRolesDTO
ññ *
)
ññ* +
;
ññ+ ,
}
óó 	
[
õõ 	
	Authorize
õõ	 
(
õõ 
Roles
õõ 
=
õõ 
$str
õõ ,
)
õõ, -
]
õõ- .
[
úú 	
HttpPost
úú	 
]
úú 
[
ùù 	&
ValidateAntiForgeryToken
ùù	 !
]
ùù! "
public
üü 
ActionResult
üü 
	EditRoles
üü %
(
üü% &
UserAndRolesDTO
üü& 5"
paramUserAndRolesDTO
üü6 J
)
üüJ K
{
†† 	
try
°° 
{
¢¢ 
if
££ 
(
££ "
paramUserAndRolesDTO
££ (
==
££) +
null
££, 0
)
££0 1
{
§§ 
return
•• 
new
•• "
HttpStatusCodeResult
•• 3
(
••3 4
HttpStatusCode
••4 B
.
••B C

BadRequest
••C M
)
••M N
;
••N O
}
¶¶ 
string
®® 
UserName
®® 
=
®®  !"
paramUserAndRolesDTO
®®" 6
.
®®6 7
UserName
®®7 ?
;
®®? @
string
©© 

strNewRole
©© !
=
©©" #
Convert
©©$ +
.
©©+ ,
ToString
©©, 4
(
©©4 5
Request
©©5 <
.
©©< =
Form
©©= A
[
©©A B
$str
©©B K
]
©©K L
)
©©L M
;
©©M N
if
´´ 
(
´´ 

strNewRole
´´ 
!=
´´ !
$str
´´" 2
)
´´2 3
{
¨¨ 
ApplicationUser
ÆÆ #
user
ÆÆ$ (
=
ÆÆ) *
UserManager
ÆÆ+ 6
.
ÆÆ6 7

FindByName
ÆÆ7 A
(
ÆÆA B
UserName
ÆÆB J
)
ÆÆJ K
;
ÆÆK L
UserManager
±± 
.
±±  
	AddToRole
±±  )
(
±±) *
user
±±* .
.
±±. /
Id
±±/ 1
,
±±1 2

strNewRole
±±3 =
)
±±= >
;
±±> ?
}
≤≤ 
ViewBag
¥¥ 
.
¥¥ 
AddRole
¥¥ 
=
¥¥  !
new
¥¥" %

SelectList
¥¥& 0
(
¥¥0 1
RolesUserIsNotIn
¥¥1 A
(
¥¥A B
UserName
¥¥B J
)
¥¥J K
)
¥¥K L
;
¥¥L M
UserAndRolesDTO
∂∂  
objUserAndRolesDTO
∂∂  2
=
∂∂3 4
GetUserAndRoles
∑∑ #
(
∑∑# $
UserName
∑∑$ ,
)
∑∑, -
;
∑∑- .
return
ππ 
View
ππ 
(
ππ  
objUserAndRolesDTO
ππ .
)
ππ. /
;
ππ/ 0
}
∫∫ 
catch
ªª 
(
ªª 
	Exception
ªª 
ex
ªª 
)
ªª  
{
ºº 

ModelState
ΩΩ 
.
ΩΩ 
AddModelError
ΩΩ (
(
ΩΩ( )
string
ΩΩ) /
.
ΩΩ/ 0
Empty
ΩΩ0 5
,
ΩΩ5 6
$str
ΩΩ7 @
+
ΩΩA B
ex
ΩΩC E
)
ΩΩE F
;
ΩΩF G
return
ææ 
View
ææ 
(
ææ 
$str
ææ '
)
ææ' (
;
ææ( )
}
øø 
}
¿¿ 	
[
ƒƒ 	
	Authorize
ƒƒ	 
(
ƒƒ 
Roles
ƒƒ 
=
ƒƒ 
$str
ƒƒ ,
)
ƒƒ, -
]
ƒƒ- .
public
∆∆ 
ActionResult
∆∆ 

DeleteRole
∆∆ &
(
∆∆& '
string
∆∆' -
UserName
∆∆. 6
,
∆∆6 7
string
∆∆8 >
RoleName
∆∆? G
)
∆∆G H
{
«« 	
try
»» 
{
…… 
if
   
(
   
(
   
UserName
   
==
    
null
  ! %
)
  % &
||
  ' )
(
  * +
RoleName
  + 3
==
  4 6
null
  7 ;
)
  ; <
)
  < =
{
ÀÀ 
return
ÃÃ 
new
ÃÃ "
HttpStatusCodeResult
ÃÃ 3
(
ÃÃ3 4
HttpStatusCode
ÃÃ4 B
.
ÃÃB C

BadRequest
ÃÃC M
)
ÃÃM N
;
ÃÃN O
}
ÕÕ 
UserName
œœ 
=
œœ 
UserName
œœ #
.
œœ# $
ToLower
œœ$ +
(
œœ+ ,
)
œœ, -
;
œœ- .
ExpandedUserDTO
““  
objExpandedUserDTO
““  2
=
““3 4
GetUser
““5 <
(
““< =
UserName
““= E
)
““E F
;
““F G
if
‘‘ 
(
‘‘  
objExpandedUserDTO
‘‘ &
==
‘‘' )
null
‘‘* .
)
‘‘. /
{
’’ 
return
÷÷ 
HttpNotFound
÷÷ '
(
÷÷' (
)
÷÷( )
;
÷÷) *
}
◊◊ 
if
ŸŸ 
(
ŸŸ 
UserName
ŸŸ 
.
ŸŸ 
ToLower
ŸŸ $
(
ŸŸ$ %
)
ŸŸ% &
==
ŸŸ' )
this
⁄⁄ 
.
⁄⁄ 
User
⁄⁄ 
.
⁄⁄ 
Identity
⁄⁄ &
.
⁄⁄& '
Name
⁄⁄' +
.
⁄⁄+ ,
ToLower
⁄⁄, 3
(
⁄⁄3 4
)
⁄⁄4 5
&&
⁄⁄6 8
RoleName
⁄⁄9 A
==
⁄⁄B D
$str
⁄⁄E T
)
⁄⁄T U
{
€€ 

ModelState
‹‹ 
.
‹‹ 
AddModelError
‹‹ ,
(
‹‹, -
string
‹‹- 3
.
‹‹3 4
Empty
‹‹4 9
,
‹‹9 :
$str
›› V
)
››V W
;
››W X
}
ﬁﬁ 
ApplicationUser
·· 
user
··  $
=
··% &
UserManager
··' 2
.
··2 3

FindByName
··3 =
(
··= >
UserName
··> F
)
··F G
;
··G H
UserManager
„„ 
.
„„ 
RemoveFromRoles
„„ +
(
„„+ ,
user
„„, 0
.
„„0 1
Id
„„1 3
,
„„3 4
RoleName
„„5 =
)
„„= >
;
„„> ?
UserManager
‰‰ 
.
‰‰ 
Update
‰‰ "
(
‰‰" #
user
‰‰# '
)
‰‰' (
;
‰‰( )
ViewBag
ÊÊ 
.
ÊÊ 
AddRole
ÊÊ 
=
ÊÊ  !
new
ÊÊ" %

SelectList
ÊÊ& 0
(
ÊÊ0 1
RolesUserIsNotIn
ÊÊ1 A
(
ÊÊA B
UserName
ÊÊB J
)
ÊÊJ K
)
ÊÊK L
;
ÊÊL M
return
ËË 
RedirectToAction
ËË '
(
ËË' (
$str
ËË( 3
,
ËË3 4
new
ËË5 8
{
ËË9 :
UserName
ËË; C
=
ËËD E
UserName
ËËF N
}
ËËO P
)
ËËP Q
;
ËËQ R
}
ÈÈ 
catch
ÍÍ 
(
ÍÍ 
	Exception
ÍÍ 
ex
ÍÍ 
)
ÍÍ  
{
ÎÎ 

ModelState
ÏÏ 
.
ÏÏ 
AddModelError
ÏÏ (
(
ÏÏ( )
string
ÏÏ) /
.
ÏÏ/ 0
Empty
ÏÏ0 5
,
ÏÏ5 6
$str
ÏÏ7 @
+
ÏÏA B
ex
ÏÏC E
)
ÏÏE F
;
ÏÏF G
ViewBag
ÓÓ 
.
ÓÓ 
AddRole
ÓÓ 
=
ÓÓ  !
new
ÓÓ" %

SelectList
ÓÓ& 0
(
ÓÓ0 1
RolesUserIsNotIn
ÓÓ1 A
(
ÓÓA B
UserName
ÓÓB J
)
ÓÓJ K
)
ÓÓK L
;
ÓÓL M
UserAndRolesDTO
  
objUserAndRolesDTO
  2
=
3 4
GetUserAndRoles
ÒÒ #
(
ÒÒ# $
UserName
ÒÒ$ ,
)
ÒÒ, -
;
ÒÒ- .
return
ÛÛ 
View
ÛÛ 
(
ÛÛ 
$str
ÛÛ '
,
ÛÛ' ( 
objUserAndRolesDTO
ÛÛ) ;
)
ÛÛ; <
;
ÛÛ< =
}
ÙÙ 
}
ıı 	
[
˚˚ 	
	Authorize
˚˚	 
(
˚˚ 
Roles
˚˚ 
=
˚˚ 
$str
˚˚ ,
)
˚˚, -
]
˚˚- .
public
˝˝ 
ActionResult
˝˝ 
ViewAllRoles
˝˝ (
(
˝˝( )
)
˝˝) *
{
˛˛ 	
return
ˇˇ 
View
ˇˇ 
(
ˇˇ 
)
ˇˇ 
;
ˇˇ 
}
ÄÄ 	
public
ÅÅ 

JsonResult
ÅÅ 
ListarRoles
ÅÅ %
(
ÅÅ% &
)
ÅÅ& '
{
ÇÇ 	
try
ÉÉ 
{
ÑÑ 
var
ÖÖ 
roleManager
ÖÖ 
=
ÖÖ  !
new
ÜÜ 
RoleManager
ÜÜ #
<
ÜÜ# $
IdentityRole
ÜÜ$ 0
>
ÜÜ0 1
(
áá 
new
àà 
	RoleStore
àà %
<
àà% &
IdentityRole
àà& 2
>
àà2 3
(
àà3 4
new
àà4 7"
ApplicationDbContext
àà8 L
(
ààL M
)
ààM N
)
ààN O
)
ââ 
;
ââ 
List
ãã 
<
ãã 
RoleDTO
ãã 
>
ãã 

colRoleDTO
ãã (
=
ãã) *
(
ãã+ ,
from
ãã, 0
objRole
ãã1 8
in
ãã9 ;
roleManager
ãã< G
.
ããG H
Roles
ããH M
select
åå, 2
new
åå3 6
RoleDTO
åå7 >
{
çç, -
Id
éé0 2
=
éé3 4
objRole
éé5 <
.
éé< =
Id
éé= ?
,
éé? @
RoleName
èè0 8
=
èè9 :
objRole
èè; B
.
èèB C
Name
èèC G
}
êê, -
)
êê- .
.
êê. /
ToList
êê/ 5
(
êê5 6
)
êê6 7
;
êê7 8
return
ëë 
Json
ëë 
(
ëë 

colRoleDTO
ëë &
)
ëë& '
;
ëë' (
}
íí 
catch
ìì 
(
ìì 
	Exception
ìì 
ex
ìì 
)
ìì  
{
îî 
List
ïï 
<
ïï 
RoleDTO
ïï 
>
ïï 

colRoleDTO
ïï (
=
ïï) *
new
ïï+ .
List
ïï/ 3
<
ïï3 4
RoleDTO
ïï4 ;
>
ïï; <
(
ïï< =
)
ïï= >
;
ïï> ?
return
óó 
Json
óó 
(
óó 

colRoleDTO
óó &
)
óó& '
;
óó' (
}
òò 
}
ôô 	
[
ùù 	
	Authorize
ùù	 
(
ùù 
Roles
ùù 
=
ùù 
$str
ùù ,
)
ùù, -
]
ùù- .
public
üü 
ActionResult
üü 
AddRole
üü #
(
üü# $
)
üü$ %
{
†† 	
return
££ 
View
££ 
(
££ 
)
££& '
;
££' (
}
§§ 	
[
®® 	
	Authorize
®®	 
(
®® 
Roles
®® 
=
®® 
$str
®® ,
)
®®, -
]
®®- .
public
¨¨ 

JsonResult
¨¨ 

GuardarRol
¨¨ $
(
¨¨$ %
RoleDTO
¨¨% ,
paramRoleDTO
¨¨- 9
)
¨¨9 :
{
≠≠ 	
try
ÆÆ 
{
ØØ 
var
∞∞ 
RoleName
∞∞ 
=
∞∞ 
paramRoleDTO
∞∞ +
.
∞∞+ ,
RoleName
∞∞, 4
.
∞∞4 5
Trim
∞∞5 9
(
∞∞9 :
)
∞∞: ;
;
∞∞; <
if
≤≤ 
(
≤≤ 
RoleName
≤≤ 
==
≤≤ 
$str
≤≤  "
)
≤≤" #
{
≥≥ 
throw
¥¥ 
new
¥¥ 
	Exception
¥¥ '
(
¥¥' (
$str
¥¥( 5
)
¥¥5 6
;
¥¥6 7
}
µµ 
var
∏∏ 
roleManager
∏∏ 
=
∏∏  !
new
ππ 
RoleManager
ππ #
<
ππ# $
IdentityRole
ππ$ 0
>
ππ0 1
(
ππ1 2
new
∫∫ 
	RoleStore
∫∫ %
<
∫∫% &
IdentityRole
∫∫& 2
>
∫∫2 3
(
∫∫3 4
new
∫∫4 7"
ApplicationDbContext
∫∫8 L
(
∫∫L M
)
∫∫M N
)
∫∫N O
)
ªª 
;
ªª 
if
ΩΩ 
(
ΩΩ 
!
ΩΩ 
roleManager
ΩΩ  
.
ΩΩ  !

RoleExists
ΩΩ! +
(
ΩΩ+ ,
RoleName
ΩΩ, 4
)
ΩΩ4 5
)
ΩΩ5 6
{
ææ 
roleManager
øø 
.
øø  
Create
øø  &
(
øø& '
new
øø' *
IdentityRole
øø+ 7
(
øø7 8
RoleName
øø8 @
)
øø@ A
)
øøA B
;
øøB C
}
¿¿ 
return
¬¬ 
Json
¬¬ 
(
¬¬ 
Util
¬¬  
.
¬¬  !
SuccessJson
¬¬! ,
(
¬¬, -
$str
¬¬- L
+
¬¬M N
RoleName
¬¬O W
)
¬¬W X
)
¬¬X Y
;
¬¬Y Z
}
ƒƒ 
catch
∆∆ 
(
∆∆ 
	Exception
∆∆ 
e
∆∆ 
)
∆∆ 
{
«« 
HttpContext
»» 
.
»» 
Response
»» $
.
»»$ %

StatusCode
»»% /
=
»»0 1
$num
»»2 5
;
»»5 6
return
…… 
Json
…… 
(
…… 
Util
……  
.
……  !
	ErrorJson
……! *
(
……* +
e
……+ ,
)
……, -
)
……- .
;
……. /
}
   
}
ÀÀ 	
[
–– 	
	Authorize
––	 
(
–– 
Roles
–– 
=
–– 
$str
–– ,
)
––, -
]
––- .
public
““ 

JsonResult
““ 
DeleteUserRole
““ (
(
““( )
string
““) /
RoleName
““0 8
)
““8 9
{
”” 	
try
‘‘ 
{
’’ 
if
÷÷ 
(
÷÷ 
RoleName
÷÷ 
.
÷÷ 
ToLower
÷÷ $
(
÷÷$ %
)
÷÷% &
==
÷÷' )
$str
÷÷* 9
)
÷÷9 :
{
◊◊ 
throw
ÿÿ 
new
ÿÿ 
	Exception
ÿÿ '
(
ÿÿ' (
String
ÿÿ( .
.
ÿÿ. /
Format
ÿÿ/ 5
(
ÿÿ5 6
$str
ÿÿ6 V
,
ÿÿV W
RoleName
ÿÿX `
)
ÿÿ` a
)
ÿÿa b
;
ÿÿb c
}
ŸŸ 
var
€€ 
roleManager
€€ 
=
€€  !
new
‹‹ 
RoleManager
‹‹ #
<
‹‹# $
IdentityRole
‹‹$ 0
>
‹‹0 1
(
‹‹1 2
new
›› 
	RoleStore
›› %
<
››% &
IdentityRole
››& 2
>
››2 3
(
››3 4
new
››4 7"
ApplicationDbContext
››8 L
(
››L M
)
››M N
)
››N O
)
››O P
;
››P Q
var
ﬂﬂ 
UsersInRole
ﬂﬂ 
=
ﬂﬂ  !
roleManager
ﬂﬂ" -
.
ﬂﬂ- .

FindByName
ﬂﬂ. 8
(
ﬂﬂ8 9
RoleName
ﬂﬂ9 A
)
ﬂﬂA B
.
ﬂﬂB C
Users
ﬂﬂC H
.
ﬂﬂH I
Count
ﬂﬂI N
(
ﬂﬂN O
)
ﬂﬂO P
;
ﬂﬂP Q
if
‡‡ 
(
‡‡ 
UsersInRole
‡‡ 
>
‡‡  !
$num
‡‡" #
)
‡‡# $
{
·· 
throw
‚‚ 
new
‚‚ 
	Exception
‚‚ '
(
‚‚' (
String
„„ 
.
„„ 
Format
„„ %
(
„„% &
$str
‰‰ R
,
‰‰R S
RoleName
ÂÂ $
)
ÂÂ$ %
)
ÊÊ 
;
ÊÊ 
}
ÁÁ 
var
ÈÈ 
objRoleToDelete
ÈÈ #
=
ÈÈ$ %
(
ÈÈ& '
from
ÈÈ' +
objRole
ÈÈ, 3
in
ÈÈ4 6
roleManager
ÈÈ7 B
.
ÈÈB C
Roles
ÈÈC H
where
ÍÍ' ,
objRole
ÍÍ- 4
.
ÍÍ4 5
Name
ÍÍ5 9
==
ÍÍ: <
RoleName
ÍÍ= E
select
ÎÎ' -
objRole
ÎÎ. 5
)
ÎÎ5 6
.
ÎÎ6 7
FirstOrDefault
ÎÎ7 E
(
ÎÎE F
)
ÎÎF G
;
ÎÎG H
if
ÏÏ 
(
ÏÏ 
objRoleToDelete
ÏÏ #
!=
ÏÏ$ &
null
ÏÏ' +
)
ÏÏ+ ,
{
ÌÌ 
roleManager
ÓÓ 
.
ÓÓ  
Delete
ÓÓ  &
(
ÓÓ& '
objRoleToDelete
ÓÓ' 6
)
ÓÓ6 7
;
ÓÓ7 8
}
ÔÔ 
else
 
{
ÒÒ 
throw
ÚÚ 
new
ÚÚ 
	Exception
ÚÚ '
(
ÚÚ' (
String
ÛÛ 
.
ÛÛ 
Format
ÛÛ %
(
ÛÛ% &
$str
ÙÙ M
,
ÙÙM N
RoleName
ıı $
)
ıı$ %
)
ˆˆ 
;
ˆˆ 
}
˜˜ 
return
˘˘ 
Json
˘˘ 
(
˘˘ 
Util
˘˘  
.
˘˘  !
SuccessJson
˘˘! ,
(
˘˘, -
$str
˘˘- @
)
˘˘@ A
)
˘˘A B
;
˘˘B C
}
˙˙ 
catch
˚˚ 
(
˚˚ 
	Exception
˚˚ 
ex
˚˚ 
)
˚˚  
{
¸¸ 
HttpContext
˝˝ 
.
˝˝ 
Response
˝˝ $
.
˝˝$ %

StatusCode
˝˝% /
=
˝˝0 1
$num
˝˝2 5
;
˝˝5 6
return
˛˛ 
Json
˛˛ 
(
˛˛ 
Util
˛˛  
.
˛˛  !
	ErrorJson
˛˛! *
(
˛˛* +
ex
˛˛+ -
)
˛˛- .
)
˛˛. /
;
˛˛/ 0
}
ˇˇ 
}
ÄÄ 	
public
àà $
ApplicationUserManager
àà %
UserManager
àà& 1
{
ââ 	
get
ää 
{
ãã 
return
åå 
_userManager
åå #
??
åå$ &
HttpContext
çç 
.
çç  
GetOwinContext
çç  .
(
çç. /
)
çç/ 0
.
éé 
GetUserManager
éé #
<
éé# $$
ApplicationUserManager
éé$ :
>
éé: ;
(
éé; <
)
éé< =
;
éé= >
}
èè 
private
êê 
set
êê 
{
ëë 
_userManager
íí 
=
íí 
value
íí $
;
íí$ %
}
ìì 
}
îî 	
public
òò $
ApplicationRoleManager
òò %
RoleManager
òò& 1
{
ôô 	
get
öö 
{
õõ 
return
úú 
_roleManager
úú #
??
úú$ &
HttpContext
ùù 
.
ùù  
GetOwinContext
ùù  .
(
ùù. /
)
ùù/ 0
.
ûû 
GetUserManager
ûû #
<
ûû# $$
ApplicationRoleManager
ûû$ :
>
ûû: ;
(
ûû; <
)
ûû< =
;
ûû= >
}
üü 
private
†† 
set
†† 
{
°° 
_roleManager
¢¢ 
=
¢¢ 
value
¢¢ $
;
¢¢$ %
}
££ 
}
§§ 	
public
®® 

JsonResult
®® %
GetAllRolesAsSelectList
®® 1
(
®®1 2
)
®®2 3
{
©© 	
List
™™ 
<
™™ 
SelectListItem
™™ 
>
™™  !
SelectRoleListItems
™™! 4
=
™™5 6
new
´´ 
List
´´ 
<
´´ 
SelectListItem
´´ '
>
´´' (
(
´´( )
)
´´) *
;
´´* +
var
≠≠ 
roleManager
≠≠ 
=
≠≠ 
new
ÆÆ 
RoleManager
ÆÆ 
<
ÆÆ  
IdentityRole
ÆÆ  ,
>
ÆÆ, -
(
ÆÆ- .
new
ØØ 
	RoleStore
ØØ !
<
ØØ! "
IdentityRole
ØØ" .
>
ØØ. /
(
ØØ/ 0
new
ØØ0 3"
ApplicationDbContext
ØØ4 H
(
ØØH I
)
ØØI J
)
ØØJ K
)
ØØK L
;
ØØL M
var
±± 
colRoleSelectList
±± !
=
±±" #
roleManager
±±$ /
.
±±/ 0
Roles
±±0 5
.
±±5 6
OrderBy
±±6 =
(
±±= >
x
±±> ?
=>
±±@ B
x
±±C D
.
±±D E
Name
±±E I
)
±±I J
.
±±J K
ToList
±±K Q
(
±±Q R
)
±±R S
;
±±S T
foreach
∫∫ 
(
∫∫ 
var
∫∫ 
item
∫∫ 
in
∫∫  
colRoleSelectList
∫∫! 2
)
∫∫2 3
{
ªª !
SelectRoleListItems
ºº #
.
ºº# $
Add
ºº$ '
(
ºº' (
new
ΩΩ 
SelectListItem
ΩΩ &
{
ææ 
Text
øø 
=
øø 
item
øø #
.
øø# $
Name
øø$ (
.
øø( )
ToString
øø) 1
(
øø1 2
)
øø2 3
,
øø3 4
Value
¿¿ 
=
¿¿ 
item
¿¿  $
.
¿¿$ %
Name
¿¿% )
.
¿¿) *
ToString
¿¿* 2
(
¿¿2 3
)
¿¿3 4
,
¿¿4 5
}
¡¡ 
)
¡¡ 
;
¡¡ 
}
¬¬ 
return
ƒƒ 
Json
ƒƒ 
(
ƒƒ !
SelectRoleListItems
ƒƒ +
)
ƒƒ+ ,
;
ƒƒ, -
}
≈≈ 	
private
ËË 
ExpandedUserDTO
ËË 
GetUser
ËË  '
(
ËË' (
string
ËË( .
paramUserName
ËË/ <
)
ËË< =
{
ÈÈ 	
ExpandedUserDTO
ÍÍ  
objExpandedUserDTO
ÍÍ .
=
ÍÍ/ 0
new
ÍÍ1 4
ExpandedUserDTO
ÍÍ5 D
(
ÍÍD E
)
ÍÍE F
;
ÍÍF G
var
ÏÏ 
result
ÏÏ 
=
ÏÏ 
UserManager
ÏÏ $
.
ÏÏ$ %

FindByName
ÏÏ% /
(
ÏÏ/ 0
paramUserName
ÏÏ0 =
)
ÏÏ= >
;
ÏÏ> ?
if
ÔÔ 
(
ÔÔ 
result
ÔÔ 
==
ÔÔ 
null
ÔÔ 
)
ÔÔ 
throw
ÔÔ  %
new
ÔÔ& )
	Exception
ÔÔ* 3
(
ÔÔ3 4
$str
ÔÔ4 M
)
ÔÔM N
;
ÔÔN O 
objExpandedUserDTO
ÒÒ 
.
ÒÒ 
UserName
ÒÒ '
=
ÒÒ( )
result
ÒÒ* 0
.
ÒÒ0 1
UserName
ÒÒ1 9
;
ÒÒ9 : 
objExpandedUserDTO
ÚÚ 
.
ÚÚ 
Email
ÚÚ $
=
ÚÚ% &
result
ÚÚ' -
.
ÚÚ- .
Email
ÚÚ. 3
;
ÚÚ3 4 
objExpandedUserDTO
ÛÛ 
.
ÛÛ 
LockoutEndDateUtc
ÛÛ 0
=
ÛÛ1 2
result
ÛÛ3 9
.
ÛÛ9 :
LockoutEndDateUtc
ÛÛ: K
;
ÛÛK L 
objExpandedUserDTO
ÙÙ 
.
ÙÙ 
AccessFailedCount
ÙÙ 0
=
ÙÙ1 2
result
ÙÙ3 9
.
ÙÙ9 :
AccessFailedCount
ÙÙ: K
;
ÙÙK L 
objExpandedUserDTO
ıı 
.
ıı 
PhoneNumber
ıı *
=
ıı+ ,
result
ıı- 3
.
ıı3 4
PhoneNumber
ıı4 ?
;
ıı? @
return
˜˜  
objExpandedUserDTO
˜˜ %
;
˜˜% &
}
¯¯ 	
private
¸¸ 
ExpandedUserDTO
¸¸ 
UpdateDTOUser
¸¸  -
(
¸¸- .
ExpandedUserDTO
¸¸. ="
paramExpandedUserDTO
¸¸> R
)
¸¸R S
{
˝˝ 	
ApplicationUser
˛˛ 
result
˛˛ "
=
˛˛# $
UserManager
ˇˇ 
.
ˇˇ 

FindByName
ˇˇ &
(
ˇˇ& '"
paramExpandedUserDTO
ˇˇ' ;
.
ˇˇ; <
UserName
ˇˇ< D
)
ˇˇD E
;
ˇˇE F
if
ÇÇ 
(
ÇÇ 
result
ÇÇ 
==
ÇÇ 
null
ÇÇ 
)
ÇÇ 
{
ÉÉ 
throw
ÑÑ 
new
ÑÑ 
	Exception
ÑÑ #
(
ÑÑ# $
$str
ÑÑ$ =
)
ÑÑ= >
;
ÑÑ> ?
}
ÖÖ 
result
áá 
.
áá 
Email
áá 
=
áá "
paramExpandedUserDTO
áá /
.
áá/ 0
Email
áá0 5
;
áá5 6
result
àà 
.
àà 
UserName
àà 
=
àà "
paramExpandedUserDTO
àà 2
.
àà2 3
Email
àà3 8
;
àà8 9
if
ãã 
(
ãã 
UserManager
ãã 
.
ãã 
IsLockedOut
ãã '
(
ãã' (
result
ãã( .
.
ãã. /
Id
ãã/ 1
)
ãã1 2
)
ãã2 3
{
åå 
UserManager
éé 
.
éé )
ResetAccessFailedCountAsync
éé 7
(
éé7 8
result
éé8 >
.
éé> ?
Id
éé? A
)
ééA B
;
ééB C
}
èè 
UserManager
ëë 
.
ëë 
Update
ëë 
(
ëë 
result
ëë %
)
ëë% &
;
ëë& '
if
îî 
(
îî 
!
îî 
string
îî 
.
îî 
IsNullOrEmpty
îî %
(
îî% &"
paramExpandedUserDTO
îî& :
.
îî: ;
Password
îî; C
)
îîC D
)
îîD E
{
ïï 
var
óó 
removePassword
óó "
=
óó# $
UserManager
óó% 0
.
óó0 1
RemovePassword
óó1 ?
(
óó? @
result
óó@ F
.
óóF G
Id
óóG I
)
óóI J
;
óóJ K
if
òò 
(
òò 
removePassword
òò "
.
òò" #
	Succeeded
òò# ,
)
òò, -
{
ôô 
var
õõ 
AddPassword
õõ #
=
õõ$ %
UserManager
úú #
.
úú# $
AddPassword
úú$ /
(
úú/ 0
result
ùù "
.
ùù" #
Id
ùù# %
,
ùù% &"
paramExpandedUserDTO
ûû 0
.
ûû0 1
Password
ûû1 9
)
üü 
;
üü 
if
°° 
(
°° 
AddPassword
°° #
.
°°# $
Errors
°°$ *
.
°°* +
Count
°°+ 0
(
°°0 1
)
°°1 2
>
°°3 4
$num
°°5 6
)
°°6 7
{
¢¢ 
throw
££ 
new
££ !
	Exception
££" +
(
££+ ,
AddPassword
££, 7
.
££7 8
Errors
££8 >
.
££> ?
FirstOrDefault
££? M
(
££M N
)
££N O
)
££O P
;
££P Q
}
§§ 
}
•• 
}
¶¶ "
paramExpandedUserDTO
ßß  
.
ßß  !
	IdUsuario
ßß! *
=
ßß+ ,
result
ßß- 3
.
ßß3 4
Id
ßß4 6
;
ßß6 7
return
©© "
paramExpandedUserDTO
©© '
;
©©' (
}
™™ 	
private
ÆÆ 
void
ÆÆ 

DeleteUser
ÆÆ 
(
ÆÆ  
ExpandedUserDTO
ÆÆ  /"
paramExpandedUserDTO
ÆÆ0 D
)
ÆÆD E
{
ØØ 	
ApplicationUser
∞∞ 
user
∞∞  
=
∞∞! "
UserManager
±± 
.
±± 

FindByName
±± &
(
±±& '"
paramExpandedUserDTO
±±' ;
.
±±; <
UserName
±±< D
)
±±D E
;
±±E F
if
¥¥ 
(
¥¥ 
user
¥¥ 
==
¥¥ 
null
¥¥ 
)
¥¥ 
{
µµ 
throw
∂∂ 
new
∂∂ 
	Exception
∂∂ #
(
∂∂# $
$str
∂∂$ =
)
∂∂= >
;
∂∂> ?
}
∑∑ 
UserManager
ππ 
.
ππ 
RemoveFromRoles
ππ '
(
ππ' (
user
ππ( ,
.
ππ, -
Id
ππ- /
,
ππ/ 0
UserManager
ππ1 <
.
ππ< =
GetRoles
ππ= E
(
ππE F
user
ππF J
.
ππJ K
Id
ππK M
)
ππM N
.
ππN O
ToArray
ππO V
(
ππV W
)
ππW X
)
ππX Y
;
ππY Z
UserManager
∫∫ 
.
∫∫ 
Update
∫∫ 
(
∫∫ 
user
∫∫ #
)
∫∫# $
;
∫∫$ %
UserManager
ªª 
.
ªª 
Delete
ªª 
(
ªª 
user
ªª #
)
ªª# $
;
ªª$ %
}
ºº 	
private
¿¿ 
UserAndRolesDTO
¿¿ 
GetUserAndRoles
¿¿  /
(
¿¿/ 0
string
¿¿0 6
UserName
¿¿7 ?
)
¿¿? @
{
¡¡ 	
ApplicationUser
√√ 
user
√√  
=
√√! "
UserManager
√√# .
.
√√. /

FindByName
√√/ 9
(
√√9 :
UserName
√√: B
)
√√B C
;
√√C D
List
≈≈ 
<
≈≈ 
UserRoleDTO
≈≈ 
>
≈≈ 
colUserRoleDTO
≈≈ ,
=
≈≈- .
(
∆∆ 
from
∆∆ 
objRole
∆∆ 
in
∆∆  
UserManager
∆∆! ,
.
∆∆, -
GetRoles
∆∆- 5
(
∆∆5 6
user
∆∆6 :
.
∆∆: ;
Id
∆∆; =
)
∆∆= >
select
«« 
new
«« 
UserRoleDTO
«« '
{
»» 
RoleName
…… 
=
…… 
objRole
……  '
,
……' (
UserName
   
=
   
UserName
    (
}
ÀÀ 
)
ÀÀ 
.
ÀÀ 
ToList
ÀÀ 
(
ÀÀ 
)
ÀÀ 
;
ÀÀ 
if
ÕÕ 
(
ÕÕ 
colUserRoleDTO
ÕÕ 
.
ÕÕ 
Count
ÕÕ $
(
ÕÕ$ %
)
ÕÕ% &
==
ÕÕ' )
$num
ÕÕ* +
)
ÕÕ+ ,
{
ŒŒ 
colUserRoleDTO
œœ 
.
œœ 
Add
œœ "
(
œœ" #
new
œœ# &
UserRoleDTO
œœ' 2
{
œœ3 4
RoleName
œœ5 =
=
œœ> ?
$str
œœ@ N
}
œœO P
)
œœP Q
;
œœQ R
}
–– 
ViewBag
““ 
.
““ 
AddRole
““ 
=
““ 
new
““ !

SelectList
““" ,
(
““, -
RolesUserIsNotIn
““- =
(
““= >
UserName
““> F
)
““F G
)
““G H
;
““H I
UserAndRolesDTO
’’  
objUserAndRolesDTO
’’ .
=
’’/ 0
new
÷÷ 
UserAndRolesDTO
÷÷ #
(
÷÷# $
)
÷÷$ %
;
÷÷% & 
objUserAndRolesDTO
◊◊ 
.
◊◊ 
UserName
◊◊ '
=
◊◊( )
UserName
◊◊* 2
;
◊◊2 3 
objUserAndRolesDTO
ÿÿ 
.
ÿÿ 
colUserRoleDTO
ÿÿ -
=
ÿÿ. /
colUserRoleDTO
ÿÿ0 >
;
ÿÿ> ?
return
ŸŸ  
objUserAndRolesDTO
ŸŸ %
;
ŸŸ% &
}
⁄⁄ 	
private
ﬁﬁ 
List
ﬁﬁ 
<
ﬁﬁ 
string
ﬁﬁ 
>
ﬁﬁ 
RolesUserIsNotIn
ﬁﬁ -
(
ﬁﬁ- .
string
ﬁﬁ. 4
UserName
ﬁﬁ5 =
)
ﬁﬁ= >
{
ﬂﬂ 	
var
·· 
colAllRoles
·· 
=
·· 
RoleManager
·· )
.
··) *
Roles
··* /
.
··/ 0
Select
··0 6
(
··6 7
x
··7 8
=>
··9 ;
x
··< =
.
··= >
Name
··> B
)
··B C
.
··C D
ToList
··D J
(
··J K
)
··K L
;
··L M
ApplicationUser
‰‰ 
user
‰‰  
=
‰‰! "
UserManager
‰‰# .
.
‰‰. /

FindByName
‰‰/ 9
(
‰‰9 :
UserName
‰‰: B
)
‰‰B C
;
‰‰C D
if
ÁÁ 
(
ÁÁ 
user
ÁÁ 
==
ÁÁ 
null
ÁÁ 
)
ÁÁ 
{
ËË 
throw
ÈÈ 
new
ÈÈ 
	Exception
ÈÈ #
(
ÈÈ# $
$str
ÈÈ$ =
)
ÈÈ= >
;
ÈÈ> ?
}
ÍÍ 
var
ÏÏ 
colRolesForUser
ÏÏ 
=
ÏÏ  !
UserManager
ÏÏ" -
.
ÏÏ- .
GetRoles
ÏÏ. 6
(
ÏÏ6 7
user
ÏÏ7 ;
.
ÏÏ; <
Id
ÏÏ< >
)
ÏÏ> ?
.
ÏÏ? @
ToList
ÏÏ@ F
(
ÏÏF G
)
ÏÏG H
;
ÏÏH I
var
ÌÌ !
colRolesUserInNotIn
ÌÌ #
=
ÌÌ$ %
(
ÌÌ& '
from
ÌÌ' +
objRole
ÌÌ, 3
in
ÌÌ4 6
colAllRoles
ÌÌ7 B
where
ÓÓ' ,
!
ÓÓ- .
colRolesForUser
ÓÓ. =
.
ÓÓ= >
Contains
ÓÓ> F
(
ÓÓF G
objRole
ÓÓG N
)
ÓÓN O
select
ÔÔ' -
objRole
ÔÔ. 5
)
ÔÔ5 6
.
ÔÔ6 7
ToList
ÔÔ7 =
(
ÔÔ= >
)
ÔÔ> ?
;
ÔÔ? @
if
ÒÒ 
(
ÒÒ !
colRolesUserInNotIn
ÒÒ #
.
ÒÒ# $
Count
ÒÒ$ )
(
ÒÒ) *
)
ÒÒ* +
==
ÒÒ, .
$num
ÒÒ/ 0
)
ÒÒ0 1
{
ÚÚ !
colRolesUserInNotIn
ÛÛ #
.
ÛÛ# $
Add
ÛÛ$ '
(
ÛÛ' (
$str
ÛÛ( 8
)
ÛÛ8 9
;
ÛÛ9 :
}
ÙÙ 
return
ˆˆ !
colRolesUserInNotIn
ˆˆ &
;
ˆˆ& '
}
˜˜ 	
}
˘˘ 
}˙˙ µ
ÅD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\CommonFunctions\HtmlStringBuilders\RestaurantHtmlStringBuilder.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Controllers

& 1
{ 
public 

static 
class '
RestaurantHtmlStringBuilder 3
{ 
public 
static 
string 
ObtenerHtmlString .
(. /
ComprobanteOrden/ ?
comprobanteOrden@ P
,P Q
FormatoImpresionR b
formatoc j
,j k.
!EstablecimientoComercialExtendido	l ç
sede
é í
,
í ì

Controller
î û

controller
ü ©
)
© ™
{ 	
StringBuilder 
sbControlHtml '
=( )
new* -
StringBuilder. ;
(; <
)< =
;= >
string 

htmlString 
= 
HtmlStringBuilder  1
.1 2#
RenderRazorViewToString2 I
(I J
$strJ |
,| }
comprobanteOrden	~ é
,
é è

controller
ê ö
)
ö õ
;
õ ú
return 

htmlString 
; 
} 	
public 
static 
string 
ObtenerHtmlString .
(. /%
ComprobanteCuentaAtencion/ H
comprobanteAtencionI \
,\ ]
FormatoImpresion^ n
formatoo v
,v w.
!EstablecimientoComercialExtendido	x ô
sede
ö û
,
û ü

Controller
† ™

controller
´ µ
)
µ ∂
{ 	
StringBuilder 
sbControlHtml '
=( )
new* -
StringBuilder. ;
(; <
)< =
;= >
string 

htmlString 
= 
HtmlStringBuilder  1
.1 2#
RenderRazorViewToString2 I
(I J
$str	J Ö
,
Ö Ü!
comprobanteAtencion
á ö
,
ö õ

controller
ú ¶
)
¶ ß
;
ß ®
return 

htmlString 
; 
} 	
} 
}!! ‹Í
{D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\CommonFunctions\HtmlStringBuilders\CoreHtmlStringBuilder.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

static 
class !
CoreHtmlStringBuilder -
{ 
public 
static 
string 
ObtenerHtmlString .
(. /
OrdenDeVenta/ ;
ordenDeVenta< H
,H I
FormatoImpresionJ Z
formato[ b
,b c
byted h
[h i
]i j
qrBytesk r
,r s5
(EstablecimientoComercialExtendidoConLogo	t ú
sede
ù °
,
° ¢

Controller
£ ≠

controller
Æ ∏
,
∏ π
IMaestroLogica
∫ »
maestroLogica
… ÷
)
÷ ◊
{ 	
StringBuilder 
sbControlHtml '
=( )
new* -
StringBuilder. ;
(; <
)< =
;= >
string 
result 
= 
$str 
; 
string 
nombreVista 
=  
$str! #
;# $
if 
( 
ordenDeVenta 
. 
IdTipoComprobante .
==/ 1
MaestroSettings2 A
.A B
DefaultB I
.I J-
!IdDetalleMaestroComprobanteBoletaJ k
)k l
{ 
nombreVista 
= 
formato %
==& (
FormatoImpresion) 9
.9 :
_80mm: ?
?@ A
$strB \
:] ^
$str_ y
;y z
result 
= 
HtmlStringBuilder *
.* +#
RenderRazorViewToString+ B
(B C
nombreVistaC N
,N O
newP S
BoletaDeVentaT a
(a b
ordenDeVentab n
,n o
sedep t
,t u
newv y.
!EstablecimientoComercialExtendido	z õ
(
õ ú
ordenDeVenta
ú ®
.
® ©
Transaccion
© ¥
(
¥ µ
)
µ ∂
.
∂ ∑
Actor_negocio2
∑ ≈
.
≈ ∆
Actor_negocio2
∆ ‘
)
‘ ’
,
’ ÷
qrBytes
◊ ﬁ
,
ﬁ ﬂ 
AplicacionSettings
‡ Ú
.
Ú Û
Default
Û ˙
.
˙ ˚$
MostrarCabeceraVoucher
˚ ë
,
ë í
(
ì î.
 ModoImpresionCaracteristicasEnum
î ¥
)
¥ µ
VentasSettings
µ √
.
√ ƒ
Default
ƒ À
.
À Ã*
modoImpresionCaracteristicas
Ã Ë
)
Ë È
,
È Í

controller
Î ı
)
ı ˆ
;
ˆ ˜
} 
else 
if 
( 
ordenDeVenta !
.! "
IdTipoComprobante" 3
==4 6
MaestroSettings7 F
.F G
DefaultG N
.N O.
"IdDetalleMaestroComprobanteFacturaO q
)q r
{ 
nombreVista 
= 
formato %
==& (
FormatoImpresion) 9
.9 :
_80mm: ?
?@ A
$strB V
:W X
$strY m
;m n
result   
=   
HtmlStringBuilder   *
.  * +#
RenderRazorViewToString  + B
(  B C
nombreVista  C N
,  N O
new  P S
Factura  T [
(  [ \
ordenDeVenta  \ h
,  h i
sede  j n
,  n o
new  p s.
!EstablecimientoComercialExtendido	  t ï
(
  ï ñ
ordenDeVenta
  ñ ¢
.
  ¢ £
Transaccion
  £ Æ
(
  Æ Ø
)
  Ø ∞
.
  ∞ ±
Actor_negocio2
  ± ø
.
  ø ¿
Actor_negocio2
  ¿ Œ
)
  Œ œ
,
  œ –
qrBytes
  — ÿ
,
  ÿ Ÿ 
AplicacionSettings
  ⁄ Ï
.
  Ï Ì
Default
  Ì Ù
.
  Ù ı$
MostrarCabeceraVoucher
  ı ã
,
  ã å
(
  ç é.
 ModoImpresionCaracteristicasEnum
  é Æ
)
  Æ Ø
VentasSettings
  Ø Ω
.
  Ω æ
Default
  æ ≈
.
  ≈ ∆*
modoImpresionCaracteristicas
  ∆ ‚
)
  ‚ „
,
  „ ‰

controller
  Â Ô
)
  Ô 
;
   Ò
}!! 
else"" 
if"" 
("" 
ordenDeVenta"" !
.""! "
IdTipoComprobante""" 3
==""4 6
MaestroSettings""7 F
.""F G
Default""G N
.""N O7
+IdDetalleMaestroComprobanteNotaVentaInterna""O z
)""z {
{## 
nombreVista$$ 
=$$ 
formato$$ %
==$$& (
FormatoImpresion$$) 9
.$$9 :
_80mm$$: ?
?$$@ A
$str$$B Z
:$$[ \
$str$$] u
;$$u v
result%% 
=%% 
HtmlStringBuilder%% *
.%%* +#
RenderRazorViewToString%%+ B
(%%B C
nombreVista%%C N
,%%N O
new%%P S
NotaDeVenta%%T _
(%%_ `
ordenDeVenta%%` l
,%%l m
sede%%n r
,%%r s
new%%t w.
!EstablecimientoComercialExtendido	%%x ô
(
%%ô ö
ordenDeVenta
%%ö ¶
.
%%¶ ß
Transaccion
%%ß ≤
(
%%≤ ≥
)
%%≥ ¥
.
%%¥ µ
Actor_negocio2
%%µ √
.
%%√ ƒ
Actor_negocio2
%%ƒ “
)
%%“ ”
,
%%” ‘
qrBytes
%%’ ‹
,
%%‹ › 
AplicacionSettings
%%ﬁ 
.
%% Ò
Default
%%Ò ¯
.
%%¯ ˘$
MostrarCabeceraVoucher
%%˘ è
,
%%è ê
(
%%ë í.
 ModoImpresionCaracteristicasEnum
%%í ≤
)
%%≤ ≥
VentasSettings
%%≥ ¡
.
%%¡ ¬
Default
%%¬ …
.
%%…  *
modoImpresionCaracteristicas
%%  Ê
)
%%Ê Á
,
%%Á Ë

controller
%%È Û
)
%%Û Ù
;
%%Ù ı
}&& 
else'' 
if'' 
('' 
ordenDeVenta'' !
.''! "
IdTipoComprobante''" 3
==''4 6
MaestroSettings''7 F
.''F G
Default''G N
.''N O<
0IdDetalleMaestroComprobanteNotaInvalidacionVenta''O 
)	'' Ä
{(( 
nombreVista)) 
=)) 
formato)) %
==))& (
FormatoImpresion))) 9
.))9 :
_80mm)): ?
?))@ A
$str))B d
:))e f
$str	))g â
;
))â ä
result** 
=** 
HtmlStringBuilder** *
.*** +#
RenderRazorViewToString**+ B
(**B C
nombreVista**C N
,**N O
new**P S!
NotaInvalidacionVenta**T i
(**i j
ordenDeVenta**j v
,**v w
sede**x |
,**| }
new	**~ Å/
!EstablecimientoComercialExtendido
**Ç £
(
**£ §
ordenDeVenta
**§ ∞
.
**∞ ±
Transaccion
**± º
(
**º Ω
)
**Ω æ
.
**æ ø
Actor_negocio2
**ø Õ
.
**Õ Œ
Actor_negocio2
**Œ ‹
)
**‹ ›
,
**› ﬁ
qrBytes
**ﬂ Ê
,
**Ê Á 
AplicacionSettings
**Ë ˙
.
**˙ ˚
Default
**˚ Ç
.
**Ç É$
MostrarCabeceraVoucher
**É ô
,
**ô ö
(
**õ ú.
 ModoImpresionCaracteristicasEnum
**ú º
)
**º Ω
VentasSettings
**Ω À
.
**À Ã
Default
**Ã ”
.
**” ‘*
modoImpresionCaracteristicas
**‘ 
)
** Ò
,
**Ò Ú

controller
**Û ˝
)
**˝ ˛
;
**˛ ˇ
}++ 
else,, 
if,, 
(,, 
ordenDeVenta,, !
.,,! "
IdTipoComprobante,," 3
==,,4 6
MaestroSettings,,7 F
.,,F G
Default,,G N
.,,N O9
-IdDetalleMaestroComprobanteNotaCreditoInterna,,O |
),,| }
{-- 
List.. 
<.. 
Detalle_maestro.. $
>..$ %
tiposNotasDeCredito..& 9
=..: ;
maestroLogica..< I
...I J#
ObtenerDetallesMaestros..J a
(..a b
MaestroSettings..b q
...q r
Default..r y
...y z4
'IdMaestroTipoDeNotaDeCreditoElectronica	..z °
)
..° ¢
;
..¢ £
nombreVista// 
=// 
formato// %
==//& (
FormatoImpresion//) 9
.//9 :
_80mm//: ?
?//@ A
$str//B o
://p q
$str	//r ü
;
//ü †
result00 
=00 
HtmlStringBuilder00 *
.00* +#
RenderRazorViewToString00+ B
(00B C
nombreVista00C N
,00N O
new00P S 
NotaDeCreditoInterna00T h
(00h i
ordenDeVenta00i u
,00u v
sede00w {
,00{ |
new	00} Ä/
!EstablecimientoComercialExtendido
00Å ¢
(
00¢ £
ordenDeVenta
00£ Ø
.
00Ø ∞
Transaccion
00∞ ª
(
00ª º
)
00º Ω
.
00Ω æ
Actor_negocio2
00æ Ã
.
00Ã Õ
Actor_negocio2
00Õ €
)
00€ ‹
,
00‹ ›!
tiposNotasDeCredito
00ﬁ Ò
,
00Ò Ú
qrBytes
00Û ˙
,
00˙ ˚ 
AplicacionSettings
00¸ é
.
00é è
Default
00è ñ
.
00ñ ó$
MostrarCabeceraVoucher
00ó ≠
,
00≠ Æ
(
00Ø ∞.
 ModoImpresionCaracteristicasEnum
00∞ –
)
00– —
VentasSettings
00— ﬂ
.
00ﬂ ‡
Default
00‡ Á
.
00Á Ë*
modoImpresionCaracteristicas
00Ë Ñ
)
00Ñ Ö
,
00Ö Ü

controller
00á ë
)
00ë í
;
00í ì
}11 
else22 
if22 
(22 
ordenDeVenta22 !
.22! "
IdTipoComprobante22" 3
==224 6
MaestroSettings227 F
.22F G
Default22G N
.22N O2
&IdDetalleMaestroComprobanteNotaCredito22O u
&&22v x
ordenDeVenta	22y Ö
.
22Ö Ü#
OperacionDeReferencia
22Ü õ
(
22õ ú
)
22ú ù
.
22ù û
IdTipoComprobante
22û Ø
==
22∞ ≤
MaestroSettings
22≥ ¬
.
22¬ √
Default
22√  
.
22  À/
!IdDetalleMaestroComprobanteBoleta
22À Ï
)
22Ï Ì
{33 
List44 
<44 
Detalle_maestro44 $
>44$ %
tiposNotasDeCredito44& 9
=44: ;
maestroLogica44< I
.44I J#
ObtenerDetallesMaestros44J a
(44a b
MaestroSettings44b q
.44q r
Default44r y
.44y z4
'IdMaestroTipoDeNotaDeCreditoElectronica	44z °
)
44° ¢
;
44¢ £
nombreVista55 
=55 
formato55 %
==55& (
FormatoImpresion55) 9
.559 :
_80mm55: ?
?55@ A
$str55B n
:55o p
$str	55q ù
;
55ù û
result66 
=66 
HtmlStringBuilder66 *
.66* +#
RenderRazorViewToString66+ B
(66B C
nombreVista66C N
,66N O
new66P S
NotaDeCredito66T a
(66a b
ordenDeVenta66b n
,66n o
sede66p t
,66t u
new66v y.
!EstablecimientoComercialExtendido	66z õ
(
66õ ú
ordenDeVenta
66ú ®
.
66® ©
Transaccion
66© ¥
(
66¥ µ
)
66µ ∂
.
66∂ ∑
Actor_negocio2
66∑ ≈
.
66≈ ∆
Actor_negocio2
66∆ ‘
)
66‘ ’
,
66’ ÷!
tiposNotasDeCredito
66◊ Í
,
66Í Î
qrBytes
66Ï Û
,
66Û Ù 
AplicacionSettings
66ı á
.
66á à
Default
66à è
.
66è ê$
MostrarCabeceraVoucher
66ê ¶
,
66¶ ß
(
66® ©.
 ModoImpresionCaracteristicasEnum
66© …
)
66…  
VentasSettings
66  ÿ
.
66ÿ Ÿ
Default
66Ÿ ‡
.
66‡ ·*
modoImpresionCaracteristicas
66· ˝
)
66˝ ˛
,
66˛ ˇ

controller
66Ä ä
)
66ä ã
;
66ã å
}77 
else88 
if88 
(88 
ordenDeVenta88 !
.88! "
IdTipoComprobante88" 3
==884 6
MaestroSettings887 F
.88F G
Default88G N
.88N O3
'IdDetalleMaestroComprobanteNotaDeDebito88O v
&&88w y
ordenDeVenta	88z Ü
.
88Ü á#
OperacionDeReferencia
88á ú
(
88ú ù
)
88ù û
.
88û ü
IdTipoComprobante
88ü ∞
==
88± ≥
MaestroSettings
88¥ √
.
88√ ƒ
Default
88ƒ À
.
88À Ã/
!IdDetalleMaestroComprobanteBoleta
88Ã Ì
)
88Ì Ó
{99 
List:: 
<:: 
Detalle_maestro:: $
>::$ %
tiposNotasDeDebito::& 8
=::9 :
maestroLogica::; H
.::H I#
ObtenerDetallesMaestros::I `
(::` a
MaestroSettings::a p
.::p q
Default::q x
.::x y3
&IdMaestroTipoDeNotaDeDebitoElectronica	::y ü
)
::ü †
;
::† °
nombreVista;; 
=;; 
formato;; %
==;;& (
FormatoImpresion;;) 9
.;;9 :
_80mm;;: ?
?;;@ A
$str;;B m
:;;n o
$str	;;p õ
;
;;õ ú
result<< 
=<< 
HtmlStringBuilder<< *
.<<* +#
RenderRazorViewToString<<+ B
(<<B C
nombreVista<<C N
,<<N O
new<<P S
NotaDeDebito<<T `
(<<` a
ordenDeVenta<<a m
,<<m n
sede<<o s
,<<s t
new<<u x.
!EstablecimientoComercialExtendido	<<y ö
(
<<ö õ
ordenDeVenta
<<õ ß
.
<<ß ®
Transaccion
<<® ≥
(
<<≥ ¥
)
<<¥ µ
.
<<µ ∂
Actor_negocio2
<<∂ ƒ
.
<<ƒ ≈
Actor_negocio2
<<≈ ”
)
<<” ‘
,
<<‘ ’ 
tiposNotasDeDebito
<<÷ Ë
,
<<Ë È
qrBytes
<<Í Ò
,
<<Ò Ú 
AplicacionSettings
<<Û Ö
.
<<Ö Ü
Default
<<Ü ç
.
<<ç é$
MostrarCabeceraVoucher
<<é §
,
<<§ •
(
<<¶ ß.
 ModoImpresionCaracteristicasEnum
<<ß «
)
<<« »
VentasSettings
<<» ÷
.
<<÷ ◊
Default
<<◊ ﬁ
.
<<ﬁ ﬂ*
modoImpresionCaracteristicas
<<ﬂ ˚
)
<<˚ ¸
,
<<¸ ˝

controller
<<˛ à
)
<<à â
;
<<â ä
}== 
else>> 
if>> 
(>> 
ordenDeVenta>> !
.>>! "
IdTipoComprobante>>" 3
==>>4 6
MaestroSettings>>7 F
.>>F G
Default>>G N
.>>N O2
&IdDetalleMaestroComprobanteNotaCredito>>O u
&&>>v x
ordenDeVenta	>>y Ö
.
>>Ö Ü#
OperacionDeReferencia
>>Ü õ
(
>>õ ú
)
>>ú ù
.
>>ù û
IdTipoComprobante
>>û Ø
==
>>∞ ≤
MaestroSettings
>>≥ ¬
.
>>¬ √
Default
>>√  
.
>>  À0
"IdDetalleMaestroComprobanteFactura
>>À Ì
)
>>Ì Ó
{?? 
List@@ 
<@@ 
Detalle_maestro@@ $
>@@$ %
tiposNotasDeCredito@@& 9
=@@: ;
maestroLogica@@< I
.@@I J#
ObtenerDetallesMaestros@@J a
(@@a b
MaestroSettings@@b q
.@@q r
Default@@r y
.@@y z4
'IdMaestroTipoDeNotaDeCreditoElectronica	@@z °
)
@@° ¢
;
@@¢ £
nombreVistaAA 
=AA 
formatoAA %
==AA& (
FormatoImpresionAA) 9
.AA9 :
_80mmAA: ?
?AA@ A
$strAAB o
:AAp q
$str	AAr ü
;
AAü †
resultBB 
=BB 
HtmlStringBuilderBB *
.BB* +#
RenderRazorViewToStringBB+ B
(BBB C
nombreVistaBBC N
,BBN O
newBBP S
NotaDeCreditoBBT a
(BBa b
ordenDeVentaBBb n
,BBn o
sedeBBp t
,BBt u
newBBv y.
!EstablecimientoComercialExtendido	BBz õ
(
BBõ ú
ordenDeVenta
BBú ®
.
BB® ©
Transaccion
BB© ¥
(
BB¥ µ
)
BBµ ∂
.
BB∂ ∑
Actor_negocio2
BB∑ ≈
.
BB≈ ∆
Actor_negocio2
BB∆ ‘
)
BB‘ ’
,
BB’ ÷!
tiposNotasDeCredito
BB◊ Í
,
BBÍ Î
qrBytes
BBÏ Û
,
BBÛ Ù 
AplicacionSettings
BBı á
.
BBá à
Default
BBà è
.
BBè ê$
MostrarCabeceraVoucher
BBê ¶
,
BB¶ ß
(
BB® ©.
 ModoImpresionCaracteristicasEnum
BB© …
)
BB…  
VentasSettings
BB  ÿ
.
BBÿ Ÿ
Default
BBŸ ‡
.
BB‡ ·*
modoImpresionCaracteristicas
BB· ˝
)
BB˝ ˛
,
BB˛ ˇ

controller
BBÄ ä
)
BBä ã
;
BBã å
}CC 
elseDD 
ifDD 
(DD 
ordenDeVentaDD !
.DD! "
IdTipoComprobanteDD" 3
==DD4 6
MaestroSettingsDD7 F
.DDF G
DefaultDDG N
.DDN O3
'IdDetalleMaestroComprobanteNotaDeDebitoDDO v
&&DDw y
ordenDeVenta	DDz Ü
.
DDÜ á#
OperacionDeReferencia
DDá ú
(
DDú ù
)
DDù û
.
DDû ü
IdTipoComprobante
DDü ∞
==
DD± ≥
MaestroSettings
DD¥ √
.
DD√ ƒ
Default
DDƒ À
.
DDÀ Ã0
"IdDetalleMaestroComprobanteFactura
DDÃ Ó
)
DDÓ Ô
{EE 
ListFF 
<FF 
Detalle_maestroFF $
>FF$ %
tiposNotasDeDebitoFF& 8
=FF9 :
maestroLogicaFF; H
.FFH I#
ObtenerDetallesMaestrosFFI `
(FF` a
MaestroSettingsFFa p
.FFp q
DefaultFFq x
.FFx y3
&IdMaestroTipoDeNotaDeDebitoElectronica	FFy ü
)
FFü †
;
FF† °
nombreVistaGG 
=GG 
formatoGG %
==GG& (
FormatoImpresionGG) 9
.GG9 :
_80mmGG: ?
?GG@ A
$strGGB n
:GGo p
$str	GGq ù
;
GGù û
resultHH 
=HH 
HtmlStringBuilderHH *
.HH* +#
RenderRazorViewToStringHH+ B
(HHB C
nombreVistaHHC N
,HHN O
newHHP S
NotaDeDebitoHHT `
(HH` a
ordenDeVentaHHa m
,HHm n
sedeHHo s
,HHs t
newHHu x.
!EstablecimientoComercialExtendido	HHy ö
(
HHö õ
ordenDeVenta
HHõ ß
.
HHß ®
Transaccion
HH® ≥
(
HH≥ ¥
)
HH¥ µ
.
HHµ ∂
Actor_negocio2
HH∂ ƒ
.
HHƒ ≈
Actor_negocio2
HH≈ ”
)
HH” ‘
,
HH‘ ’ 
tiposNotasDeDebito
HH÷ Ë
,
HHË È
qrBytes
HHÍ Ò
,
HHÒ Ú 
AplicacionSettings
HHÛ Ö
.
HHÖ Ü
Default
HHÜ ç
.
HHç é$
MostrarCabeceraVoucher
HHé §
,
HH§ •
(
HH¶ ß.
 ModoImpresionCaracteristicasEnum
HHß «
)
HH« »
VentasSettings
HH» ÷
.
HH÷ ◊
Default
HH◊ ﬁ
.
HHﬁ ﬂ*
modoImpresionCaracteristicas
HHﬂ ˚
)
HH˚ ¸
,
HH¸ ˝

controller
HH˛ à
)
HHà â
;
HHâ ä
}II 
returnJJ 
resultJJ 
;JJ 
}KK 	
publicMM 
staticMM 
stringMM 
ObtenerHtmlStringMM .
(MM. /
OrdenDeCompraMM/ <
ordenDeCompraMM= J
,MMJ K
FormatoImpresionMML \
formatoMM] d
,MMd e
byteMMf j
[MMj k
]MMk l
qrBytesMMm t
,MMt u5
(EstablecimientoComercialExtendidoConLogo	MMv û
sede
MMü £
,
MM£ §

Controller
MM• Ø

controller
MM∞ ∫
,
MM∫ ª
IMaestroLogica
MMº  
maestroLogica
MMÀ ÿ
)
MMÿ Ÿ
{NN 	
StringBuilderOO 
sbControlHtmlOO '
=OO( )
newOO* -
StringBuilderOO. ;
(OO; <
)OO< =
;OO= >
stringPP 
resultPP 
=PP 
$strPP 
;PP 
stringQQ 
nombreVistaQQ 
=QQ  
$strQQ! #
;QQ# $
ifSS 
(SS 
ordenDeCompraSS 
.SS 
IdTipoComprobanteSS /
==SS0 2
MaestroSettingsSS3 B
.SSB C
DefaultSSC J
.SSJ K-
!IdDetalleMaestroComprobanteBoletaSSK l
)SSl m
{TT 
nombreVistaUU 
=UU 
formatoUU %
==UU& (
FormatoImpresionUU) 9
.UU9 :
_80mmUU: ?
?UU@ A
$strUUB ^
:UU_ `
$strUUa }
;UU} ~
resultVV 
=VV 
HtmlStringBuilderVV *
.VV* +#
RenderRazorViewToStringVV+ B
(VVB C
nombreVistaVVC N
,VVN O
newVVP S
BoletaDeCompraVVT b
(VVb c
ordenDeCompraVVc p
,VVp q
sedeVVr v
,VVv w
qrBytesVVx 
,	VV Ä 
AplicacionSettings
VVÅ ì
.
VVì î
Default
VVî õ
.
VVõ ú$
MostrarCabeceraVoucher
VVú ≤
,
VV≤ ≥
(
VV¥ µ.
 ModoImpresionCaracteristicasEnum
VVµ ’
)
VV’ ÷
VentasSettings
VV÷ ‰
.
VV‰ Â
Default
VVÂ Ï
.
VVÏ Ì*
modoImpresionCaracteristicas
VVÌ â
)
VVâ ä
,
VVä ã

controller
VVå ñ
)
VVñ ó
;
VVó ò
}WW 
elseXX 
ifXX 
(XX 
ordenDeCompraXX "
.XX" #
IdTipoComprobanteXX# 4
==XX5 7
MaestroSettingsXX8 G
.XXG H
DefaultXXH O
.XXO P.
"IdDetalleMaestroComprobanteFacturaXXP r
)XXr s
{YY 
nombreVistaZZ 
=ZZ 
formatoZZ %
==ZZ& (
FormatoImpresionZZ) 9
.ZZ9 :
_80mmZZ: ?
?ZZ@ A
$strZZB _
:ZZ` a
$strZZb 
;	ZZ Ä
result\\ 
=\\ 
HtmlStringBuilder\\ *
.\\* +#
RenderRazorViewToString\\+ B
(\\B C
nombreVista\\C N
,\\N O
new\\P S
FacturaCompra\\T a
(\\a b
ordenDeCompra\\b o
,\\o p
sede\\q u
,\\u v
qrBytes\\w ~
,\\~  
AplicacionSettings
\\Ä í
.
\\í ì
Default
\\ì ö
.
\\ö õ$
MostrarCabeceraVoucher
\\õ ±
,
\\± ≤
(
\\≥ ¥.
 ModoImpresionCaracteristicasEnum
\\¥ ‘
)
\\‘ ’
VentasSettings
\\’ „
.
\\„ ‰
Default
\\‰ Î
.
\\Î Ï*
modoImpresionCaracteristicas
\\Ï à
)
\\à â
,
\\â ä

controller
\\ã ï
)
\\ï ñ
;
\\ñ ó
}]] 
else^^ 
if^^ 
(^^ 
ordenDeCompra^^ "
.^^" #
IdTipoComprobante^^# 4
==^^5 7
MaestroSettings^^8 G
.^^G H
Default^^H O
.^^O P8
,IdDetalleMaestroComprobanteNotaCompraInterna^^P |
)^^| }
{__ 
nombreVista`` 
=`` 
formato`` %
==``& (
FormatoImpresion``) 9
.``9 :
_80mm``: ?
?``@ A
$str``B \
:``] ^
$str``_ y
;``y z
resultaa 
=aa 
HtmlStringBuilderaa *
.aa* +#
RenderRazorViewToStringaa+ B
(aaB C
nombreVistaaaC N
,aaN O
newaaP S
NotaDeCompraaaT `
(aa` a
ordenDeCompraaaa n
,aan o
sedeaap t
,aat u
qrBytesaav }
,aa} ~
AplicacionSettings	aa ë
.
aaë í
Default
aaí ô
.
aaô ö$
MostrarCabeceraVoucher
aaö ∞
,
aa∞ ±
(
aa≤ ≥.
 ModoImpresionCaracteristicasEnum
aa≥ ”
)
aa” ‘
VentasSettings
aa‘ ‚
.
aa‚ „
Default
aa„ Í
.
aaÍ Î*
modoImpresionCaracteristicas
aaÎ á
)
aaá à
,
aaà â

controller
aaä î
)
aaî ï
;
aaï ñ
}bb 
elsecc 
ifcc 
(cc 
ordenDeCompracc "
.cc" #
IdTipoComprobantecc# 4
==cc5 7
MaestroSettingscc8 G
.ccG H
DefaultccH O
.ccO P>
1IdDetalleMaestroComprobanteNotaInvalidacionCompra	ccP Å
)
ccÅ Ç
{dd 
nombreVistaee 
=ee 
formatoee %
==ee& (
FormatoImpresionee) 9
.ee9 :
_80mmee: ?
?ee@ A
$streeB f
:eeg h
$str	eei ç
;
eeç é
resultff 
=ff 
HtmlStringBuilderff *
.ff* +#
RenderRazorViewToStringff+ B
(ffB C
nombreVistaffC N
,ffN O
newffP S"
NotaInvalidacionCompraffT j
(ffj k
ordenDeCompraffk x
,ffx y
sedeffz ~
,ff~ 
qrBytes
ffÄ á
,
ffá à 
AplicacionSettings
ffâ õ
.
ffõ ú
Default
ffú £
.
ff£ §$
MostrarCabeceraVoucher
ff§ ∫
,
ff∫ ª
(
ffº Ω.
 ModoImpresionCaracteristicasEnum
ffΩ ›
)
ff› ﬁ
VentasSettings
ffﬁ Ï
.
ffÏ Ì
Default
ffÌ Ù
.
ffÙ ı*
modoImpresionCaracteristicas
ffı ë
)
ffë í
,
ffí ì

controller
ffî û
)
ffû ü
;
ffü †
}gg 
elsehh 
ifhh 
(hh 
ordenDeComprahh "
.hh" #
IdTipoComprobantehh# 4
==hh5 7
MaestroSettingshh8 G
.hhG H
DefaulthhH O
.hhO P2
&IdDetalleMaestroComprobanteNotaCreditohhP v
&&hhw y
ordenDeCompra	hhz á
.
hhá à#
OperacionDeReferencia
hhà ù
(
hhù û
)
hhû ü
.
hhü †
IdTipoComprobante
hh† ±
==
hh≤ ¥
MaestroSettings
hhµ ƒ
.
hhƒ ≈
Default
hh≈ Ã
.
hhÃ Õ/
!IdDetalleMaestroComprobanteBoleta
hhÕ Ó
)
hhÓ Ô
{ii 
Listjj 
<jj 
Detalle_maestrojj $
>jj$ %
tiposNotasDeCreditojj& 9
=jj: ;
maestroLogicajj< I
.jjI J#
ObtenerDetallesMaestrosjjJ a
(jja b
MaestroSettingsjjb q
.jjq r
Defaultjjr y
.jjy z4
'IdMaestroTipoDeNotaDeCreditoElectronica	jjz °
)
jj° ¢
;
jj¢ £
nombreVistakk 
=kk 
formatokk %
==kk& (
FormatoImpresionkk) 9
.kk9 :
_80mmkk: ?
?kk@ A
$strkkB v
:kkw x
$str	kky ≠
;
kk≠ Æ
resultll 
=ll 
HtmlStringBuilderll *
.ll* +#
RenderRazorViewToStringll+ B
(llB C
nombreVistallC N
,llN O
newllP S
NotaDeCreditoComprallT g
(llg h
ordenDeComprallh u
,llu v
sedellw {
,ll{ | 
tiposNotasDeCredito	ll} ê
,
llê ë
qrBytes
llí ô
,
llô ö 
AplicacionSettings
llõ ≠
.
ll≠ Æ
Default
llÆ µ
.
llµ ∂$
MostrarCabeceraVoucher
ll∂ Ã
,
llÃ Õ
(
llŒ œ.
 ModoImpresionCaracteristicasEnum
llœ Ô
)
llÔ 
VentasSettings
ll ˛
.
ll˛ ˇ
Default
llˇ Ü
.
llÜ á*
modoImpresionCaracteristicas
llá £
)
ll£ §
,
ll§ •

controller
ll¶ ∞
)
ll∞ ±
;
ll± ≤
}mm 
elsenn 
ifnn 
(nn 
ordenDeComprann "
.nn" #
IdTipoComprobantenn# 4
==nn5 7
MaestroSettingsnn8 G
.nnG H
DefaultnnH O
.nnO P3
'IdDetalleMaestroComprobanteNotaDeDebitonnP w
&&nnx z
ordenDeCompra	nn{ à
.
nnà â#
OperacionDeReferencia
nnâ û
(
nnû ü
)
nnü †
.
nn† °
IdTipoComprobante
nn° ≤
==
nn≥ µ
MaestroSettings
nn∂ ≈
.
nn≈ ∆
Default
nn∆ Õ
.
nnÕ Œ/
!IdDetalleMaestroComprobanteBoleta
nnŒ Ô
)
nnÔ 
{oo 
Listpp 
<pp 
Detalle_maestropp $
>pp$ %
tiposNotasDeDebitopp& 8
=pp9 :
maestroLogicapp; H
.ppH I#
ObtenerDetallesMaestrosppI `
(pp` a
MaestroSettingsppa p
.ppp q
Defaultppq x
.ppx y3
&IdMaestroTipoDeNotaDeDebitoElectronica	ppy ü
)
ppü †
;
pp† °
nombreVistaqq 
=qq 
formatoqq %
==qq& (
FormatoImpresionqq) 9
.qq9 :
_80mmqq: ?
?qq@ A
$strqqB u
:qqv w
$str	qqx ´
;
qq´ ¨
resultrr 
=rr 
HtmlStringBuilderrr *
.rr* +#
RenderRazorViewToStringrr+ B
(rrB C
nombreVistarrC N
,rrN O
newrrP S
NotaDeDebitoComprarrT f
(rrf g
ordenDeComprarrg t
,rrt u
sederrv z
,rrz {
tiposNotasDeDebito	rr| é
,
rré è
qrBytes
rrê ó
,
rró ò 
AplicacionSettings
rrô ´
.
rr´ ¨
Default
rr¨ ≥
.
rr≥ ¥$
MostrarCabeceraVoucher
rr¥  
,
rr  À
(
rrÃ Õ.
 ModoImpresionCaracteristicasEnum
rrÕ Ì
)
rrÌ Ó
VentasSettings
rrÓ ¸
.
rr¸ ˝
Default
rr˝ Ñ
.
rrÑ Ö*
modoImpresionCaracteristicas
rrÖ °
)
rr° ¢
,
rr¢ £

controller
rr§ Æ
)
rrÆ Ø
;
rrØ ∞
}ss 
elsett 
iftt 
(tt 
ordenDeCompratt "
.tt" #
IdTipoComprobantett# 4
==tt5 7
MaestroSettingstt8 G
.ttG H
DefaultttH O
.ttO P2
&IdDetalleMaestroComprobanteNotaCreditottP v
&&ttw y
ordenDeCompra	ttz á
.
ttá à#
OperacionDeReferencia
ttà ù
(
ttù û
)
ttû ü
.
ttü †
IdTipoComprobante
tt† ±
==
tt≤ ¥
MaestroSettings
ttµ ƒ
.
ttƒ ≈
Default
tt≈ Ã
.
ttÃ Õ0
"IdDetalleMaestroComprobanteFactura
ttÕ Ô
)
ttÔ 
{uu 
Listvv 
<vv 
Detalle_maestrovv $
>vv$ %
tiposNotasDeCreditovv& 9
=vv: ;
maestroLogicavv< I
.vvI J#
ObtenerDetallesMaestrosvvJ a
(vva b
MaestroSettingsvvb q
.vvq r
Defaultvvr y
.vvy z4
'IdMaestroTipoDeNotaDeCreditoElectronica	vvz °
)
vv° ¢
;
vv¢ £
nombreVistaww 
=ww 
formatoww %
==ww& (
FormatoImpresionww) 9
.ww9 :
_80mmww: ?
?ww@ A
$strwwB w
:wwx y
$str	wwz Ø
;
wwØ ∞
resultxx 
=xx 
HtmlStringBuilderxx *
.xx* +#
RenderRazorViewToStringxx+ B
(xxB C
nombreVistaxxC N
,xxN O
newxxP S
NotaDeCreditoCompraxxT g
(xxg h
ordenDeCompraxxh u
,xxu v
sedexxw {
,xx{ | 
tiposNotasDeCredito	xx} ê
,
xxê ë
qrBytes
xxí ô
,
xxô ö 
AplicacionSettings
xxõ ≠
.
xx≠ Æ
Default
xxÆ µ
.
xxµ ∂$
MostrarCabeceraVoucher
xx∂ Ã
,
xxÃ Õ
(
xxŒ œ.
 ModoImpresionCaracteristicasEnum
xxœ Ô
)
xxÔ 
VentasSettings
xx ˛
.
xx˛ ˇ
Default
xxˇ Ü
.
xxÜ á*
modoImpresionCaracteristicas
xxá £
)
xx£ §
,
xx§ •

controller
xx¶ ∞
)
xx∞ ±
;
xx± ≤
}yy 
elsezz 
ifzz 
(zz 
ordenDeComprazz "
.zz" #
IdTipoComprobantezz# 4
==zz5 7
MaestroSettingszz8 G
.zzG H
DefaultzzH O
.zzO P3
'IdDetalleMaestroComprobanteNotaDeDebitozzP w
&&zzx z
ordenDeCompra	zz{ à
.
zzà â#
OperacionDeReferencia
zzâ û
(
zzû ü
)
zzü †
.
zz† °
IdTipoComprobante
zz° ≤
==
zz≥ µ
MaestroSettings
zz∂ ≈
.
zz≈ ∆
Default
zz∆ Õ
.
zzÕ Œ0
"IdDetalleMaestroComprobanteFactura
zzŒ 
)
zz Ò
{{{ 
List|| 
<|| 
Detalle_maestro|| $
>||$ %
tiposNotasDeDebito||& 8
=||9 :
maestroLogica||; H
.||H I#
ObtenerDetallesMaestros||I `
(||` a
MaestroSettings||a p
.||p q
Default||q x
.||x y3
&IdMaestroTipoDeNotaDeDebitoElectronica	||y ü
)
||ü †
;
||† °
nombreVista}} 
=}} 
formato}} %
==}}& (
FormatoImpresion}}) 9
.}}9 :
_80mm}}: ?
?}}@ A
$str}}B v
:}}w x
$str	}}y ≠
;
}}≠ Æ
result~~ 
=~~ 
HtmlStringBuilder~~ *
.~~* +#
RenderRazorViewToString~~+ B
(~~B C
nombreVista~~C N
,~~N O
new~~P S
NotaDeDebitoCompra~~T f
(~~f g
ordenDeCompra~~g t
,~~t u
sede~~v z
,~~z {
tiposNotasDeDebito	~~| é
,
~~é è
qrBytes
~~ê ó
,
~~ó ò 
AplicacionSettings
~~ô ´
.
~~´ ¨
Default
~~¨ ≥
.
~~≥ ¥$
MostrarCabeceraVoucher
~~¥  
,
~~  À
(
~~Ã Õ.
 ModoImpresionCaracteristicasEnum
~~Õ Ì
)
~~Ì Ó
VentasSettings
~~Ó ¸
.
~~¸ ˝
Default
~~˝ Ñ
.
~~Ñ Ö*
modoImpresionCaracteristicas
~~Ö °
)
~~° ¢
,
~~¢ £

controller
~~§ Æ
)
~~Æ Ø
;
~~Ø ∞
} 
return
ÄÄ 
result
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
public
ÉÉ 
static
ÉÉ 
string
ÉÉ 
ObtenerHtmlString
ÉÉ .
(
ÉÉ. /(
OrdenDeMovimientoDeAlmacen
ÉÉ/ I
ordenDeMovimiento
ÉÉJ [
,
ÉÉ[ \
FormatoImpresion
ÉÉ] m
formato
ÉÉn u
,
ÉÉu v
byte
ÉÉw {
[
ÉÉ{ |
]
ÉÉ| }
qrBytesÉÉ~ Ö
,ÉÉÖ Ü1
!EstablecimientoComercialExtendidoÉÉá ®
sedeÉÉ© ≠
,ÉÉ≠ Æ

ControllerÉÉØ π

controllerÉÉ∫ ƒ
)ÉÉƒ ≈
{
ÑÑ 	
StringBuilder
ÖÖ 
sbControlHtml
ÖÖ '
=
ÖÖ( )
new
ÖÖ* -
StringBuilder
ÖÖ. ;
(
ÖÖ; <
)
ÖÖ< =
;
ÖÖ= >
string
ÜÜ 
result
ÜÜ 
=
ÜÜ 
$str
ÜÜ 
;
ÜÜ 
string
áá 
nombreVista
áá 
=
áá  
$str
áá! #
;
áá# $
if
ââ 
(
ââ 
ordenDeMovimiento
ââ !
.
ââ! "
IdTipoComprobante
ââ" 3
==
ââ4 6
MaestroSettings
ââ7 F
.
ââF G
Default
ââG N
.
ââN O7
)IdDetalleMaestroComprobanteOrdenDeAlmacen
ââO x
)
ââx y
{
ää 
nombreVista
ãã 
=
ãã 
formato
ãã %
==
ãã& (
FormatoImpresion
ãã) 9
.
ãã9 :
_80mm
ãã: ?
?
ãã@ A
$str
ããB _
:
ãã` a
$str
ããb 
;ãã Ä
result
åå 
=
åå 
HtmlStringBuilder
åå *
.
åå* +%
RenderRazorViewToString
åå+ B
(
ååB C
nombreVista
ååC N
,
ååN O
new
ååP S
OrdenDeAlmacen
ååT b
(
ååb c
ordenDeMovimiento
ååc t
,
ååt u
sede
ååv z
,
ååz {
new
åå| 1
!EstablecimientoComercialExtendidoååÄ °
(åå° ¢!
ordenDeMovimientoåå¢ ≥
.åå≥ ¥
Transaccionåå¥ ø
(ååø ¿
)åå¿ ¡
.åå¡ ¬
Actor_negocio2åå¬ –
.åå– —
Actor_negocio2åå— ﬂ
)ååﬂ ‡
,åå‡ ·
qrBytesåå‚ È
,ååÈ Í"
AplicacionSettingsååÎ ˝
.åå˝ ˛
Defaultåå˛ Ö
.ååÖ Ü&
MostrarCabeceraVoucherååÜ ú
,ååú ù
(ååû ü0
 ModoImpresionCaracteristicasEnumååü ø
)ååø ¿
VentasSettingsåå¿ Œ
.ååŒ œ
Defaultååœ ÷
.åå÷ ◊,
modoImpresionCaracteristicasåå◊ Û
)ååÛ Ù
,ååÙ ı

controllerååˆ Ä
)ååÄ Å
;ååÅ Ç
}
çç 
return
éé 
result
éé 
;
éé 
}
èè 	
public
ëë 
static
ëë 
string
ëë 
ObtenerHtmlString
ëë .
(
ëë. /!
MovimientoDeAlmacen
ëë/ B!
movimientoDeAlmacen
ëëC V
,
ëëV W
FormatoImpresion
ëëX h
formato
ëëi p
,
ëëp q
byte
ëër v
[
ëëv w
]
ëëw x
qrBytesëëy Ä
,ëëÄ Å8
(EstablecimientoComercialExtendidoConLogoëëÇ ™
sedeëë´ Ø
,ëëØ ∞
Listëë± µ
<ëëµ ∂
	Proveedorëë∂ ø
>ëëø ¿
proveedoresëë¡ Ã
,ëëÃ Õ
ListëëŒ “
<ëë“ ”
Detalle_maestroëë” ‚
>ëë‚ „%
modalidadesDeTrasladoëë‰ ˘
,ëë˘ ˙
Listëë˚ ˇ
<ëëˇ Ä
Detalle_maestroëëÄ è
>ëëè ê!
motivosDeTrasladoëëë ¢
,ëë¢ £

Controllerëë§ Æ

controllerëëØ π
)ëëπ ∫
{
íí 	
StringBuilder
ìì 
sbControlHtml
ìì '
=
ìì( )
new
ìì* -
StringBuilder
ìì. ;
(
ìì; <
)
ìì< =
;
ìì= >
string
îî 
result
îî 
=
îî 
$str
îî 
;
îî 
string
ïï 
nombreVista
ïï 
=
ïï  
$str
ïï! #
;
ïï# $
if
óó 
(
óó !
movimientoDeAlmacen
óó #
.
óó# $
IdTipoComprobante
óó$ 5
==
óó6 8
MaestroSettings
óó9 H
.
óóH I
Default
óóI P
.
óóP QA
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitenteóóQ É
)óóÉ Ñ
{
òò 
nombreVista
ôô 
=
ôô 
formato
ôô %
==
ôô& (
FormatoImpresion
ôô) 9
.
ôô9 :
_80mm
ôô: ?
?
ôô@ A
$str
ôôB _
:
ôô` a
$str
ôôb 
;ôô Ä
result
öö 
=
öö 
HtmlStringBuilder
öö *
.
öö* +%
RenderRazorViewToString
öö+ B
(
ööB C
nombreVista
ööC N
,
ööN O
new
ööP S
GuiaDeRemision
ööT b
(
ööb c!
movimientoDeAlmacen
ööc v
,
ööv w
sede
ööx |
,
öö| }
newöö~ Å1
!EstablecimientoComercialExtendidoööÇ £
(öö£ §#
movimientoDeAlmacenöö§ ∑
.öö∑ ∏
Transaccionöö∏ √
(öö√ ƒ
)ööƒ ≈
.öö≈ ∆
Actor_negocio2öö∆ ‘
.öö‘ ’
Actor_negocio2öö’ „
)öö„ ‰
,öö‰ Â
qrBytesööÊ Ì
,ööÌ Ó"
AplicacionSettingsööÔ Å
.ööÅ Ç
DefaultööÇ â
.ööâ ä&
MostrarCabeceraVoucherööä †
,öö† °
(öö¢ £0
 ModoImpresionCaracteristicasEnumöö£ √
)öö√ ƒ
VentasSettingsööƒ “
.öö“ ”
Defaultöö” ⁄
.öö⁄ €,
modoImpresionCaracteristicasöö€ ˜
,öö˜ ¯
proveedoresöö˘ Ñ
,ööÑ Ö%
modalidadesDeTrasladoööÜ õ
,ööõ ú!
motivosDeTrasladoööù Æ
)ööÆ Ø
,ööØ ∞

controlleröö± ª
)ööª º
;ööº Ω
}
õõ 
else
úú 
if
úú 
(
úú !
movimientoDeAlmacen
úú (
.
úú( )
IdTipoComprobante
úú) :
==
úú; =
MaestroSettings
úú> M
.
úúM N
Default
úúN U
.
úúU V<
-IdDetalleMaestroComprobanteNotaAlmacenInternaúúV É
)úúÉ Ñ
{
ùù 
nombreVista
ûû 
=
ûû 
formato
ûû %
==
ûû& (
FormatoImpresion
ûû) 9
.
ûû9 :
_80mm
ûû: ?
?
ûû@ A
$str
ûûB ^
:
ûû_ `
$str
ûûa }
;
ûû} ~
result
üü 
=
üü 
HtmlStringBuilder
üü *
.
üü* +%
RenderRazorViewToString
üü+ B
(
üüB C
nombreVista
üüC N
,
üüN O
new
üüP S
NotaDeAlmacen
üüT a
(
üüa b!
movimientoDeAlmacen
üüb u
,
üüu v
sede
üüw {
,
üü{ |
newüü} Ä1
!EstablecimientoComercialExtendidoüüÅ ¢
(üü¢ £#
movimientoDeAlmacenüü£ ∂
.üü∂ ∑
Transaccionüü∑ ¬
(üü¬ √
)üü√ ƒ
.üüƒ ≈
Actor_negocio2üü≈ ”
.üü” ‘
Actor_negocio2üü‘ ‚
)üü‚ „
,üü„ ‰
qrBytesüüÂ Ï
,üüÏ Ì"
AplicacionSettingsüüÓ Ä
.üüÄ Å
DefaultüüÅ à
.üüà â&
MostrarCabeceraVoucherüüâ ü
,üüü †
(üü° ¢0
 ModoImpresionCaracteristicasEnumüü¢ ¬
)üü¬ √
VentasSettingsüü√ —
.üü— “
Defaultüü“ Ÿ
.üüŸ ⁄,
modoImpresionCaracteristicasüü⁄ ˆ
)üüˆ ˜
,üü˜ ¯

controllerüü˘ É
)üüÉ Ñ
;üüÑ Ö
}
†† 
else
°° 
{
¢¢ 
nombreVista
££ 
=
££ 
formato
££ %
==
££& (
FormatoImpresion
££) 9
.
££9 :
_80mm
££: ?
?
££@ A
$str
££B b
:
££c d
$str££e Ö
;££Ö Ü
result
§§ 
=
§§ 
HtmlStringBuilder
§§ *
.
§§* +%
RenderRazorViewToString
§§+ B
(
§§B C
nombreVista
§§C N
,
§§N O
new
§§P S*
DocumentoMovimientoDeAlmacen
§§T p
(
§§p q"
movimientoDeAlmacen§§q Ñ
,§§Ñ Ö
sede§§Ü ä
,§§ä ã
new§§å è1
!EstablecimientoComercialExtendido§§ê ±
(§§± ≤#
movimientoDeAlmacen§§≤ ≈
.§§≈ ∆
Transaccion§§∆ —
(§§— “
)§§“ ”
.§§” ‘
Actor_negocio2§§‘ ‚
.§§‚ „
Actor_negocio2§§„ Ò
)§§Ò Ú
,§§Ú Û
qrBytes§§Ù ˚
,§§˚ ¸"
AplicacionSettings§§˝ è
.§§è ê
Default§§ê ó
.§§ó ò&
MostrarCabeceraVoucher§§ò Æ
,§§Æ Ø
(§§∞ ±0
 ModoImpresionCaracteristicasEnum§§± —
)§§— “
VentasSettings§§“ ‡
.§§‡ ·
Default§§· Ë
.§§Ë È,
modoImpresionCaracteristicas§§È Ö
)§§Ö Ü
,§§Ü á

controller§§à í
)§§í ì
;§§ì î
}
•• 
return
¶¶ 
result
¶¶ 
;
¶¶ 
}
ßß 	
public
©© 
static
©© 
string
©© 
ObtenerHtmlString
©© .
(
©©. /!
MovimientoEconomico
©©/ B

movimiento
©©C M
,
©©M N
FormatoImpresion
©©O _
formato
©©` g
,
©©g h7
(EstablecimientoComercialExtendidoConLogo©©i ë
sede©©í ñ
,©©ñ ó

Controller©©ò ¢

controller©©£ ≠
)©©≠ Æ
{
™™ 	
StringBuilder
´´ 
sbControlHtml
´´ '
=
´´( )
new
´´* -
StringBuilder
´´. ;
(
´´; <
)
´´< =
;
´´= >
string
¨¨ 
result
¨¨ 
=
¨¨ 
$str
¨¨ 
;
¨¨ 
string
≠≠ 
nombreVista
≠≠ 
=
≠≠  
$str
≠≠! #
;
≠≠# $
nombreVista
ÆÆ 
=
ÆÆ 
formato
ÆÆ !
==
ÆÆ" $
FormatoImpresion
ÆÆ% 5
.
ÆÆ5 6
_80mm
ÆÆ6 ;
?
ÆÆ< =
$str
ÆÆ> b
:
ÆÆc d
$strÆÆe â
;ÆÆâ ä
result
ØØ 
=
ØØ 
HtmlStringBuilder
ØØ &
.
ØØ& '%
RenderRazorViewToString
ØØ' >
(
ØØ> ?
nombreVista
ØØ? J
,
ØØJ K#
ReciboDeIngresoEgreso
ØØL a
.
ØØa b
Convert
ØØb i
(
ØØi j

movimiento
ØØj t
,
ØØt u
sede
ØØv z
,
ØØz {
new
ØØ| 1
!EstablecimientoComercialExtendidoØØÄ °
(ØØ° ¢

movimientoØØ¢ ¨
.ØØ¨ ≠
TransaccionØØ≠ ∏
(ØØ∏ π
)ØØπ ∫
.ØØ∫ ª
Actor_negocio2ØØª …
.ØØ…  
Actor_negocio2ØØ  ÿ
)ØØÿ Ÿ
,ØØŸ ⁄"
AplicacionSettingsØØ€ Ì
.ØØÌ Ó
DefaultØØÓ ı
.ØØı ˆ&
MostrarCabeceraVoucherØØˆ å
)ØØå ç
,ØØç é

controllerØØè ô
)ØØô ö
;ØØö õ
return
∞∞ 
result
∞∞ 
;
∞∞ 
}
±± 	
}
≤≤ 
}∂∂ Øê
aD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\CommonFunctions\PrinterBuilder.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{   
public!! 

class!! 
PrinterBuilder!! 
{"" 
public## 
void## 
ImprimirOperacion## %
(##% &
long##& *
idOperacion##+ 6
,##6 7
int##8 ;
tipoOperacion##< I
,##I J4
(EstablecimientoComercialExtendidoConLogo##K s
sede##t x
,##x y
PedidoController	##z ä
pedidoController
##ã õ
,
##õ ú
IPedido_Logica
##ù ´
pedidoLogica
##¨ ∏
,
##∏ π
IOperacionLogica
##∫  
operacionLogica
##À ⁄
,
##⁄ €!
IActorNegocioLogica
##‹ Ô 
actorNegocioLogica
## Ç
,
##Ç É
IMaestroLogica
##Ñ í
maestroLogica
##ì †
,
##† °+
IFacturacionElectronicaLogica
##¢ ø*
facturacionElectronicaLogica
##¿ ‹
,
##‹ ›
IBarCodeUtil
##ﬁ Í
barCodeUtil
##Î ˆ
,
##ˆ ˜
IPdfUtil
##¯ Ä
pdfUtil
##Å à
)
##à â
{$$ 	
if%% 
(%% 
tipoOperacion%% 
==%%  
$num%%! "
)%%" #
{&& 
OrdenDePedido'' 
orden'' #
=''$ %
pedidoLogica''& 2
.''2 3,
 ObtenerOrdenDePedidoParaImprimir''3 S
(''S T9
,ObtenerOrdenDePedidoParaImprimirEnAplicacion	''T Ä
(
''Ä Å
idOperacion
''Å å
)
''å ç
)
''ç é
;
''é è9
-EliminarOrdenDePedidoParaImprimirEnAplicacion(( =
(((= >
idOperacion((> I
)((I J
;((J K

PrintFile_)) 
()) 
orden))  
,))  !
sede))" &
,))& '
pedidoController))( 8
,))8 9
maestroLogica)): G
,))G H
pdfUtil))I P
)))P Q
;))Q R
}** 
else++ 
if++ 
(++ 
tipoOperacion++ "
==++# %
$num++& '
)++' (
{,, 
OrdenDeVenta-- 
orden-- "
=--# $
operacionLogica--% 4
.--4 5+
ObtenerOrdenDeVentaParaImprimir--5 T
(--T U8
+ObtenerOrdenDeVentaParaImprimirEnAplicacion	--U Ä
(
--Ä Å
idOperacion
--Å å
)
--å ç
)
--ç é
;
--é è8
,EliminarOrdenDeVentaParaImprimirEnAplicacion.. <
(..< =
idOperacion..= H
)..H I
;..I J

PrintFile_// 
(// 
orden//  
,//  !
sede//" &
,//& '
pedidoController//( 8
,//8 9
operacionLogica//: I
,//I J
actorNegocioLogica//K ]
,//] ^
maestroLogica//_ l
,//l m)
facturacionElectronicaLogica	//n ä
,
//ä ã
barCodeUtil
//å ó
,
//ó ò
pdfUtil
//ô †
)
//† °
;
//° ¢
}00 
}11 	
public33 
void33 

PrintFile_33 
(33 
OrdenDePedido33 ,
orden33- 2
,332 34
(EstablecimientoComercialExtendidoConLogo334 \
sede33] a
,33a b
PedidoController33c s
pedidoController	33t Ñ
,
33Ñ Ö
IMaestroLogica
33Ü î
maestroLogica
33ï ¢
,
33¢ £
IPdfUtil
33§ ¨
pdfUtil
33≠ ¥
)
33¥ µ
{44 	
var55 
PDFventa55 
=55 
ObtenerPdfPedido55 +
(55+ ,
orden55, 1
,551 2
sede553 7
,557 8
null559 =
,55= >
(55? @
FormatoImpresion55@ P
)55P Q
VentasSettings55Q _
.55_ `
Default55` g
.55g h'
formatoImpresionPorDefecto	55h Ç
,
55Ç É
pedidoController
55Ñ î
,
55î ï
maestroLogica
55ñ £
,
55£ §
pdfUtil
55• ¨
)
55¨ ≠
;
55≠ Æ
PrintFilePDF77 
file77 
=77 
new77  #
PrintFilePDF77$ 0
(770 1
PDFventa771 9
.779 :
Save77: >
(77> ?
)77? @
,77@ A
orden77B G
.77G H
Id77H J
+77K L
$str77M S
)77S T
;77T U
file88 
.88 
PrintRotation88 
=88  
PrintRotation88! .
.88. /
None88/ 3
;883 4
ClientPrintJob:: 
cpj:: 
=::  
new::! $
ClientPrintJob::% 3
(::3 4
)::4 5
;::5 6
cpj;; 
.;; 
	PrintFile;; 
=;; 
file;;  
;;;  !
cpj<< 
.<< 
	PrintFile<< 
.<< 
Copies<<  
=<<! "
AplicacionSettings<<# 5
.<<5 6
Default<<6 =
.<<= >1
%NumeroCopiasAImprimirComprobanteVenta<<> c
;<<c d
cpj== 
.== 
ClientPrinter== 
=== 
new==  #
DefaultPrinter==$ 2
(==2 3
)==3 4
;==4 5
HttpContext?? 
.?? 
Current?? 
.??  
Response??  (
.??( )
ContentType??) 4
=??5 6
$str??7 Q
;??Q R
HttpContext@@ 
.@@ 
Current@@ 
.@@  
Response@@  (
.@@( )
BinaryWrite@@) 4
(@@4 5
cpj@@5 8
.@@8 9

GetContent@@9 C
(@@C D
)@@D E
)@@E F
;@@F G
HttpContextAA 
.AA 
CurrentAA 
.AA  
ResponseAA  (
.AA( )
EndAA) ,
(AA, -
)AA- .
;AA. /
}BB 	
publicDD 
PdfDocumentDD 
ObtenerPdfPedidoDD +
(DD+ ,
OrdenDePedidoDD, 9
ordenDePedidoDD: G
,DDG H4
(EstablecimientoComercialExtendidoConLogoDDI q
sedeDDr v
,DDv w
byteDDx |
[DD| }
]DD} ~
qrBytes	DD Ü
,
DDÜ á
FormatoImpresion
DDà ò
formato
DDô †
,
DD† °
PedidoController
DD¢ ≤
pedidoController
DD≥ √
,
DD√ ƒ
IMaestroLogica
DD≈ ”
maestroLogica
DD‘ ·
,
DD· ‚
IPdfUtil
DD„ Î
pdfUtil
DDÏ Û
)
DDÛ Ù
{EE 	
stringFF 

htmlStringFF 
=FF 
pedidoControllerFF  0
.FF0 1%
ObtenerCadenaHtmlDePedidoFF1 J
(FFJ K
ordenDePedidoFFK X
,FFX Y
formatoFFZ a
,FFa b
qrBytesFFc j
,FFj k
sedeFFl p
)FFp q
;FFq r
returnGG 
pdfUtilGG 
.GG 
ObtenerPdfDocumentoGG .
(GG. /

htmlStringGG/ 9
,GG9 :
formatoGG; B
)GGB C
;GGC D
}HH 	
publicKK 
OrdenDePedidoKK (
ArmarOrdenPedidoParaImprimirKK 9
(KK9 :
OrdenDePedidoKK: G
ordenDePedidoKKH U
,KKU V
DatosVentaIntegradaKKW j
pedidoKKk q
,KKq r#
UserProfileSessionData	KKs â
sesionUsuario
KKä ó
)
KKó ò
{LL 	
ordenDePedidoMM 
.MM 
TransaccionMM %
(MM% &
)MM& '
.MM' (
Detalle_maestro1MM( 8
=MM9 :
sesionUsuarioMM; H
.MMH I
MaestrosFrecuentesMMI [
.MM[ \
MonedaMM\ b
.MMb c
ConvertMMc j
(MMj k
)MMk l
;MMl m
ordenDePedidoNN 
.NN 
TransaccionNN %
(NN% &
)NN& '
.NN' (
ComprobanteNN( 3
.NN3 4
Detalle_maestroNN4 C
=NND E
pedidoNNF L
.NNL M
OrdenNNM R
.NNR S
ComprobanteNNS ^
.NN^ _
TipoNN_ c
.NNc d
ConvertNNd k
(NNk l
)NNl m
;NNm n
ordenDePedidoOO 
.OO 
TransaccionOO %
(OO% &
)OO& '
.OO' (
Actor_negocioOO( 5
=OO6 7
sesionUsuarioOO8 E
.OOE F
EmpleadoOOF N
.OON O
ConvertOOO V
(OOV W
)OOW X
;OOX Y
ordenDePedidoPP 
.PP 
TransaccionPP %
(PP% &
)PP& '
.PP' (
Actor_negocio1PP( 6
=PP7 8
pedidoPP9 ?
.PP? @
OrdenPP@ E
.PPE F
ClientePPF M
.PPM N
ConvertPPN U
(PPU V
)PPV W
;PPW X
foreachRR 
(RR 
varRR 
itemRR 
inRR  
ordenDePedidoRR! .
.RR. /
TransaccionRR/ :
(RR: ;
)RR; <
.RR< =
Detalle_transaccionRR= P
)RRP Q
{SS 
itemTT 
.TT 
registroTT 
=TT 
pedidoTT  &
.TT& '
OrdenTT' ,
.TT, -
PlacaTT- 2
;TT2 3
itemUU 
.UU 
Concepto_negocioUU %
=UU& '
newUU( +
Concepto_negocioUU, <
(UU< =
)UU= >
{VV 
idWW 
=WW 
pedidoWW 
.WW  
OrdenWW  %
.WW% &
DetallesWW& .
.WW. /
FirstOrDefaultWW/ =
(WW= >
dWW> ?
=>WW@ B
dWWC D
.WWD E
ProductoWWE M
.WWM N
IdWWN P
==WWQ S
itemWWT X
.WWX Y
id_concepto_negocioWWY l
)WWl m
.WWm n
ProductoWWn v
.WWv w
IdWWw y
,WWy z
codigoXX 
=XX 
pedidoXX #
.XX# $
OrdenXX$ )
.XX) *
DetallesXX* 2
.XX2 3
FirstOrDefaultXX3 A
(XXA B
dXXB C
=>XXD F
dXXG H
.XXH I
ProductoXXI Q
.XXQ R
IdXXR T
==XXU W
itemXXX \
.XX\ ]
id_concepto_negocioXX] p
)XXp q
.XXq r
ProductoXXr z
.XXz {
Codigo	XX{ Å
,
XXÅ Ç
nombreYY 
=YY 
pedidoYY #
.YY# $
OrdenYY$ )
.YY) *
DetallesYY* 2
.YY2 3
FirstOrDefaultYY3 A
(YYA B
dYYB C
=>YYD F
dYYG H
.YYH I
ProductoYYI Q
.YYQ R
IdYYR T
==YYU W
itemYYX \
.YY\ ]
id_concepto_negocioYY] p
)YYp q
.YYq r
ProductoYYr z
.YYz {
NombreConcepto	YY{ â
,
YYâ ä
Detalle_maestro4ZZ $
=ZZ% &
newZZ' *
Detalle_maestroZZ+ :
(ZZ: ;
)ZZ; <
{ZZ= >
valorZZ? D
=ZZE F
pedidoZZG M
.ZZM N
OrdenZZN S
.ZZS T
DetallesZZT \
.ZZ\ ]
FirstOrDefaultZZ] k
(ZZk l
dZZl m
=>ZZn p
dZZq r
.ZZr s
ProductoZZs {
.ZZ{ |
IdZZ| ~
==	ZZ Å
item
ZZÇ Ü
.
ZZÜ á!
id_concepto_negocio
ZZá ö
)
ZZö õ
.
ZZõ ú
Producto
ZZú §
.
ZZ§ •
EsBien
ZZ• ´
?
ZZ¨ ≠
$str
ZZÆ ±
:
ZZ≤ ≥
$str
ZZ¥ ∑
}
ZZ∏ π
}[[ 
;[[ 
}\\ 
return]] 
ordenDePedido]]  
;]]  !
}^^ 	
public`` 
void`` 8
,GuardarOrdenDePedidoParaImprimirEnAplicacion`` @
(``@ A
OrdenDePedido``A N
ordenDePedido``O \
)``\ ]
{aa 	
Listbb 
<bb 
OrdenDePedidobb 
>bb 
ordenesDePedidobb  /
=bb0 1
(bb2 3
Listbb3 7
<bb7 8
OrdenDePedidobb8 E
>bbE F
)bbF G
HttpContextbbG R
.bbR S
CurrentbbS Z
.bbZ [
Applicationbb[ f
[bbf g
$strbbg y
]bby z
??bb{ }
new	bb~ Å
List
bbÇ Ü
<
bbÜ á
OrdenDePedido
bbá î
>
bbî ï
(
bbï ñ
)
bbñ ó
;
bbó ò
ordenesDePedidodd 
.dd 
Adddd 
(dd  
ordenDePedidodd  -
)dd- .
;dd. /
HttpContextff 
.ff 
Currentff 
.ff  
Applicationff  +
.ff+ ,
Lockff, 0
(ff0 1
)ff1 2
;ff2 3
HttpContextgg 
.gg 
Currentgg 
.gg  
Applicationgg  +
[gg+ ,
$strgg, >
]gg> ?
=gg@ A
ordenesDePedidoggB Q
;ggQ R
HttpContexthh 
.hh 
Currenthh 
.hh  
Applicationhh  +
.hh+ ,
UnLockhh, 2
(hh2 3
)hh3 4
;hh4 5
}ii 	
publickk 
OrdenDePedidokk 8
,ObtenerOrdenDePedidoParaImprimirEnAplicacionkk I
(kkI J
longkkJ N
idOrdenDePedidokkO ^
)kk^ _
{ll 	
Listnn 
<nn 
OrdenDePedidonn 
>nn 
ordenesDePedidosnn  0
=nn1 2
(nn3 4
Listnn4 8
<nn8 9
OrdenDePedidonn9 F
>nnF G
)nnG H
HttpContextnnH S
.nnS T
CurrentnnT [
.nn[ \
Applicationnn\ g
[nng h
$strnnh z
]nnz {
;nn{ |
OrdenDePedidopp 
ordenDePedidopp '
=pp( )
ordenesDePedidospp* :
.pp: ;
Singlepp; A
(ppA B
ovppB D
=>ppE G
ovppH J
.ppJ K
IdppK M
==ppN P
idOrdenDePedidoppQ `
)pp` a
;ppa b
returnrr 
ordenDePedidorr  
;rr  !
}ss 	
publicuu 
voiduu 9
-EliminarOrdenDePedidoParaImprimirEnAplicacionuu A
(uuA B
longuuB F
idOrdenDePedidouuG V
)uuV W
{vv 	
Listxx 
<xx 
OrdenDePedidoxx 
>xx 
ordenesDePedidoxx  /
=xx0 1
(xx2 3
Listxx3 7
<xx7 8
OrdenDePedidoxx8 E
>xxE F
)xxF G
HttpContextxxG R
.xxR S
CurrentxxS Z
.xxZ [
Applicationxx[ f
[xxf g
$strxxg y
]xxy z
;xxz {
ordenesDePedidozz 
.zz 
Removezz "
(zz" #
ordenesDePedidozz# 2
.zz2 3
Singlezz3 9
(zz9 :
ovzz: <
=>zz= ?
ovzz@ B
.zzB C
IdzzC E
==zzF H
idOrdenDePedidozzI X
)zzX Y
)zzY Z
;zzZ [
HttpContext|| 
.|| 
Current|| 
.||  
Application||  +
.||+ ,
Lock||, 0
(||0 1
)||1 2
;||2 3
HttpContext}} 
.}} 
Current}} 
.}}  
Application}}  +
[}}+ ,
$str}}, >
]}}> ?
=}}@ A
ordenesDePedido}}B Q
;}}Q R
HttpContext~~ 
.~~ 
Current~~ 
.~~  
Application~~  +
.~~+ ,
UnLock~~, 2
(~~2 3
)~~3 4
;~~4 5
} 	
public
ÇÇ 
void
ÇÇ 

PrintFile_
ÇÇ 
(
ÇÇ 
OrdenDeVenta
ÇÇ +
orden
ÇÇ, 1
,
ÇÇ1 26
(EstablecimientoComercialExtendidoConLogo
ÇÇ3 [
sede
ÇÇ\ `
,
ÇÇ` a

Controller
ÇÇb l

controller
ÇÇm w
,
ÇÇw x
IOperacionLogicaÇÇy â
operacionLogicaÇÇä ô
,ÇÇô ö#
IActorNegocioLogicaÇÇõ Æ"
actorNegocioLogicaÇÇØ ¡
,ÇÇ¡ ¬
IMaestroLogicaÇÇ√ —
maestroLogicaÇÇ“ ﬂ
,ÇÇﬂ ‡-
IFacturacionElectronicaLogicaÇÇ· ˛,
facturacionElectronicaLogicaÇÇˇ õ
,ÇÇõ ú
IBarCodeUtilÇÇù ©
barCodeUtilÇÇ™ µ
,ÇÇµ ∂
IPdfUtilÇÇ∑ ø
pdfUtilÇÇ¿ «
)ÇÇ« »
{
ÉÉ 	
string
ÖÖ 
	QrContent
ÖÖ 
=
ÖÖ *
facturacionElectronicaLogica
ÖÖ ;
.
ÖÖ; <
	ObtenerQR
ÖÖ< E
(
ÖÖE F
orden
ÖÖF K
,
ÖÖK L
sede
ÖÖM Q
)
ÖÖQ R
;
ÖÖR S
byte
ÜÜ 
[
ÜÜ 
]
ÜÜ 
QrBytes
ÜÜ 
=
ÜÜ 
barCodeUtil
ÜÜ (
.
ÜÜ( )
ObtenerCodigoQR
ÜÜ) 8
(
ÜÜ8 9
	QrContent
ÜÜ9 B
)
ÜÜB C
;
ÜÜC D
var
áá 
PDFventa
áá 
=
áá 
ObtenerPdfVenta
áá *
(
áá* +
orden
áá+ 0
,
áá0 1
sede
áá2 6
,
áá6 7
QrBytes
áá8 ?
,
áá? @
(
ááA B
FormatoImpresion
ááB R
)
ááR S
VentasSettings
ááS a
.
ááa b
Default
ááb i
.
áái j)
formatoImpresionPorDefectoááj Ñ
,ááÑ Ö

controllerááÜ ê
,ááê ë
maestroLogicaááí ü
,ááü †
pdfUtiláá° ®
)áá® ©
;áá© ™
if
ää 
(
ää 
orden
ää 
.
ää !
TieneGuiaDeRemision
ää )
(
ää) *
)
ää* +
)
ää+ ,
{
ãã 
var
åå 
proveedores
åå 
=
åå  ! 
actorNegocioLogica
åå" 4
.
åå4 5(
ObtenerProveedoresVigentes
åå5 O
(
ååO P
)
ååP Q
;
ååQ R
var
çç %
modalidadesDeTransporte
çç +
=
çç, -
maestroLogica
çç. ;
.
çç; <(
ObtenerModalidadesTraslado
çç< V
(
ççV W
)
ççW X
;
ççX Y
var
éé !
motivosDeTransporte
éé '
=
éé( )
maestroLogica
éé* 7
.
éé7 8$
ObtenerMotivosTraslado
éé8 N
(
ééN O
)
ééO P
;
ééP Q
var
èè  
salidaDeMercaderia
èè &
=
èè' (
operacionLogica
èè) 8
.
èè8 9.
 ObtenerSalidaDeMercaderiaDeVenta
èè9 Y
(
èèY Z
orden
èèZ _
.
èè_ `
IdVenta
èè` g
)
èèg h
;
èèh i
foreach
êê 
(
êê 
var
êê 
salida
êê #
in
êê$ & 
salidaDeMercaderia
êê' 9
)
êê9 :
{
ëë 
int
íí 
[
íí 
]
íí 

idsUbigeos
íí $
=
íí% &
{
íí' (
Convert
íí) 0
.
íí0 1
ToInt32
íí1 8
(
íí8 9
salida
íí9 ?
.
íí? @&
IdUbigeoOrigenDeTraslado
íí@ X
(
ííX Y
)
ííY Z
)
ííZ [
,
íí[ \
Convert
íí] d
.
ííd e
ToInt32
ííe l
(
ííl m
salida
íím s
.
íís t(
IdUbigeoDestinoDeTrasladoíít ç
(ííç é
)ííé è
)ííè ê
}ííë í
;ííí ì
var
ìì 
ubigeos
ìì 
=
ìì  !
maestroLogica
ìì" /
.
ìì/ 0
obtenerUbigeo
ìì0 =
(
ìì= >

idsUbigeos
ìì> H
)
ììH I
;
ììI J
salida
îî 
.
îî 
UbigeoOrigen
îî '
=
îî( )
ubigeos
îî* 1
.
îî1 2
Single
îî2 8
(
îî8 9
u
îî9 :
=>
îî; =
u
îî> ?
.
îî? @
id
îî@ B
==
îîC E
Convert
îîF M
.
îîM N
ToInt32
îîN U
(
îîU V
salida
îîV \
.
îî\ ]&
IdUbigeoOrigenDeTraslado
îî] u
(
îîu v
)
îîv w
)
îîw x
)
îîx y
.
îîy z 
descripcion_cortaîîz ã
;îîã å
salida
ïï 
.
ïï 
UbigeoDestino
ïï (
=
ïï) *
ubigeos
ïï+ 2
.
ïï2 3
Single
ïï3 9
(
ïï9 :
u
ïï: ;
=>
ïï< >
u
ïï? @
.
ïï@ A
id
ïïA C
==
ïïD F
Convert
ïïG N
.
ïïN O
ToInt32
ïïO V
(
ïïV W
salida
ïïW ]
.
ïï] ^'
IdUbigeoDestinoDeTraslado
ïï^ w
(
ïïw x
)
ïïx y
)
ïïy z
)
ïïz {
.
ïï{ | 
descripcion_cortaïï| ç
;ïïç é
byte
ññ 
[
ññ 
]
ññ 
byteQr
ññ !
=
ññ" #
barCodeUtil
ññ$ /
.
ññ/ 0
ObtenerCodigoQR
ññ0 ?
(
ññ? @
salida
ññ@ F
.
ññF G
UrlDocumentoSunat
ññG X
)
ññX Y
;
ññY Z
PDFventa
óó 
.
óó 
Append
óó #
(
óó# $

PdfBuilder
óó$ .
.
óó. /.
 ObtenerPdfMovimientoDeMercaderia
óó/ O
(
óóO P
salida
óóP V
,
óóV W
sede
óóX \
,
óó\ ]
byteQr
óó^ d
,
óód e
(
óóf g
FormatoImpresion
óóg w
)
óów x
VentasSettingsóóx Ü
.óóÜ á
Defaultóóá é
.óóé è*
formatoImpresionPorDefectoóóè ©
,óó© ™
proveedoresóó´ ∂
,óó∂ ∑'
modalidadesDeTransporteóó∏ œ
,óóœ –#
motivosDeTransporteóó— ‰
,óó‰ Â

controlleróóÊ 
)óó Ò
)óóÒ Ú
;óóÚ Û
}
òò 
}
ôô 
PrintFilePDF
öö 
file
öö 
=
öö 
new
öö  #
PrintFilePDF
öö$ 0
(
öö0 1
PDFventa
öö1 9
.
öö9 :
Save
öö: >
(
öö> ?
)
öö? @
,
öö@ A
orden
ööB G
.
ööG H
Id
ööH J
+
ööK L
$str
ööM S
)
ööS T
;
ööT U
file
õõ 
.
õõ 
PrintRotation
õõ 
=
õõ  
PrintRotation
õõ! .
.
õõ. /
None
õõ/ 3
;
õõ3 4
ClientPrintJob
ùù 
cpj
ùù 
=
ùù  
new
ùù! $
ClientPrintJob
ùù% 3
(
ùù3 4
)
ùù4 5
;
ùù5 6
cpj
ûû 
.
ûû 
	PrintFile
ûû 
=
ûû 
file
ûû  
;
ûû  !
cpj
üü 
.
üü 
	PrintFile
üü 
.
üü 
Copies
üü  
=
üü! " 
AplicacionSettings
üü# 5
.
üü5 6
Default
üü6 =
.
üü= >3
%NumeroCopiasAImprimirComprobanteVenta
üü> c
;
üüc d
cpj
†† 
.
†† 
ClientPrinter
†† 
=
†† 
new
††  #
DefaultPrinter
††$ 2
(
††2 3
)
††3 4
;
††4 5
System
¢¢ 
.
¢¢ 
Web
¢¢ 
.
¢¢ 
HttpContext
¢¢ "
.
¢¢" #
Current
¢¢# *
.
¢¢* +
Response
¢¢+ 3
.
¢¢3 4
ContentType
¢¢4 ?
=
¢¢@ A
$str
¢¢B \
;
¢¢\ ]
System
££ 
.
££ 
Web
££ 
.
££ 
HttpContext
££ "
.
££" #
Current
££# *
.
££* +
Response
££+ 3
.
££3 4
BinaryWrite
££4 ?
(
££? @
cpj
££@ C
.
££C D

GetContent
££D N
(
££N O
)
££O P
)
££P Q
;
££Q R
System
§§ 
.
§§ 
Web
§§ 
.
§§ 
HttpContext
§§ "
.
§§" #
Current
§§# *
.
§§* +
Response
§§+ 3
.
§§3 4
End
§§4 7
(
§§7 8
)
§§8 9
;
§§9 :
}
•• 	
public
ßß 
PdfDocument
ßß 
ObtenerPdfVenta
ßß *
(
ßß* +
OrdenDeVenta
ßß+ 7
ordenDeVenta
ßß8 D
,
ßßD E6
(EstablecimientoComercialExtendidoConLogo
ßßF n
sede
ßßo s
,
ßßs t
byte
ßßu y
[
ßßy z
]
ßßz {
qrBytesßß| É
,ßßÉ Ñ 
FormatoImpresionßßÖ ï
formatoßßñ ù
,ßßù û

Controllerßßü ©

controllerßß™ ¥
,ßß¥ µ
IMaestroLogicaßß∂ ƒ
maestroLogicaßß≈ “
,ßß“ ”
IPdfUtilßß‘ ‹
pdfUtilßß› ‰
)ßß‰ Â
{
®® 	
string
©© 

htmlString
©© 
=
©© #
CoreHtmlStringBuilder
©©  5
.
©©5 6
ObtenerHtmlString
©©6 G
(
©©G H
ordenDeVenta
©©H T
,
©©T U
formato
©©V ]
,
©©] ^
qrBytes
©©_ f
,
©©f g
sede
©©h l
,
©©l m

controller
©©n x
,
©©x y
maestroLogica©©z á
)©©á à
;©©à â
return
™™ 
pdfUtil
™™ 
.
™™ !
ObtenerPdfDocumento
™™ .
(
™™. /

htmlString
™™/ 9
,
™™9 :
formato
™™; B
)
™™B C
;
™™C D
}
´´ 	
public
ÆÆ 
OrdenDeVenta
ÆÆ )
ArmarOrdenVentaParaImprimir
ÆÆ 7
(
ÆÆ7 8
OrdenDeVenta
ÆÆ8 D
ordenDeVenta
ÆÆE Q
,
ÆÆQ R!
DatosVentaIntegrada
ÆÆS f
venta
ÆÆg l
,
ÆÆl m%
UserProfileSessionDataÆÆn Ñ
sesionUsuarioÆÆÖ í
)ÆÆí ì
{
ØØ 	
ordenDeVenta
∞∞ 
.
∞∞ 
Transaccion
∞∞ $
(
∞∞$ %
)
∞∞% &
.
∞∞& '
Detalle_maestro1
∞∞' 7
=
∞∞8 9
sesionUsuario
∞∞: G
.
∞∞G H 
MaestrosFrecuentes
∞∞H Z
.
∞∞Z [
Moneda
∞∞[ a
.
∞∞a b
Convert
∞∞b i
(
∞∞i j
)
∞∞j k
;
∞∞k l
ordenDeVenta
±± 
.
±± 
Transaccion
±± $
(
±±$ %
)
±±% &
.
±±& '
Comprobante
±±' 2
.
±±2 3
Detalle_maestro
±±3 B
=
±±C D
venta
±±E J
.
±±J K
Orden
±±K P
.
±±P Q
Comprobante
±±Q \
.
±±\ ]
Tipo
±±] a
.
±±a b
Convert
±±b i
(
±±i j
)
±±j k
;
±±k l
ordenDeVenta
≤≤ 
.
≤≤ 
Transaccion
≤≤ $
(
≤≤$ %
)
≤≤% &
.
≤≤& '
Actor_negocio
≤≤' 4
=
≤≤5 6
sesionUsuario
≤≤7 D
.
≤≤D E
Empleado
≤≤E M
.
≤≤M N
Convert
≤≤N U
(
≤≤U V
)
≤≤V W
;
≤≤W X
ordenDeVenta
≥≥ 
.
≥≥ 
Transaccion
≥≥ $
(
≥≥$ %
)
≥≥% &
.
≥≥& '
Actor_negocio1
≥≥' 5
=
≥≥6 7
venta
≥≥8 =
.
≥≥= >
Orden
≥≥> C
.
≥≥C D
Cliente
≥≥D K
.
≥≥K L
Convert
≥≥L S
(
≥≥S T
)
≥≥T U
;
≥≥U V
foreach
µµ 
(
µµ 
var
µµ 
item
µµ 
in
µµ  
ordenDeVenta
µµ! -
.
µµ- .
Transaccion
µµ. 9
(
µµ9 :
)
µµ: ;
.
µµ; <!
Detalle_transaccion
µµ< O
)
µµO P
{
∂∂ 
item
∑∑ 
.
∑∑ 
registro
∑∑ 
=
∑∑ 
venta
∑∑  %
.
∑∑% &
Orden
∑∑& +
.
∑∑+ ,
Placa
∑∑, 1
;
∑∑1 2
item
∏∏ 
.
∏∏ 
Concepto_negocio
∏∏ %
=
∏∏& '
new
∏∏( +
Concepto_negocio
∏∏, <
(
∏∏< =
)
∏∏= >
{
ππ 
id
∫∫ 
=
∫∫ 
venta
∫∫ 
.
∫∫ 
Orden
∫∫ $
.
∫∫$ %
Detalles
∫∫% -
.
∫∫- .
FirstOrDefault
∫∫. <
(
∫∫< =
d
∫∫= >
=>
∫∫? A
d
∫∫B C
.
∫∫C D
Producto
∫∫D L
.
∫∫L M
Id
∫∫M O
==
∫∫P R
item
∫∫S W
.
∫∫W X!
id_concepto_negocio
∫∫X k
)
∫∫k l
.
∫∫l m
Producto
∫∫m u
.
∫∫u v
Id
∫∫v x
,
∫∫x y
codigo
ªª 
=
ªª 
venta
ªª "
.
ªª" #
Orden
ªª# (
.
ªª( )
Detalles
ªª) 1
.
ªª1 2
FirstOrDefault
ªª2 @
(
ªª@ A
d
ªªA B
=>
ªªC E
d
ªªF G
.
ªªG H
Producto
ªªH P
.
ªªP Q
Id
ªªQ S
==
ªªT V
item
ªªW [
.
ªª[ \!
id_concepto_negocio
ªª\ o
)
ªªo p
.
ªªp q
Producto
ªªq y
.
ªªy z
Codigoªªz Ä
,ªªÄ Å
nombre
ºº 
=
ºº 
venta
ºº "
.
ºº" #
Orden
ºº# (
.
ºº( )
Detalles
ºº) 1
.
ºº1 2
FirstOrDefault
ºº2 @
(
ºº@ A
d
ººA B
=>
ººC E
d
ººF G
.
ººG H
Producto
ººH P
.
ººP Q
Id
ººQ S
==
ººT V
item
ººW [
.
ºº[ \!
id_concepto_negocio
ºº\ o
)
ººo p
.
ººp q
Producto
ººq y
.
ººy z
NombreConceptoººz à
,ººà â
Detalle_maestro4
ΩΩ $
=
ΩΩ% &
new
ΩΩ' *
Detalle_maestro
ΩΩ+ :
(
ΩΩ: ;
)
ΩΩ; <
{
ΩΩ= >
valor
ΩΩ? D
=
ΩΩE F
venta
ΩΩG L
.
ΩΩL M
Orden
ΩΩM R
.
ΩΩR S
Detalles
ΩΩS [
.
ΩΩ[ \
FirstOrDefault
ΩΩ\ j
(
ΩΩj k
d
ΩΩk l
=>
ΩΩm o
d
ΩΩp q
.
ΩΩq r
Producto
ΩΩr z
.
ΩΩz {
Id
ΩΩ{ }
==ΩΩ~ Ä
itemΩΩÅ Ö
.ΩΩÖ Ü#
id_concepto_negocioΩΩÜ ô
)ΩΩô ö
.ΩΩö õ
ProductoΩΩõ £
.ΩΩ£ §
EsBienΩΩ§ ™
?ΩΩ´ ¨
$strΩΩ≠ ∞
:ΩΩ± ≤
$strΩΩ≥ ∂
}ΩΩ∑ ∏
}
ææ 
;
ææ 
}
øø 
return
¿¿ 
ordenDeVenta
¿¿ 
;
¿¿  
}
¡¡ 	
public
¬¬ 
void
¬¬ 9
+GuardarOrdenDeVentaParaImprimirEnAplicacion
¬¬ ?
(
¬¬? @
OrdenDeVenta
¬¬@ L
ordenDeVenta
¬¬M Y
)
¬¬Y Z
{
√√ 	
List
«« 
<
«« 
OrdenDeVenta
«« 
>
«« 
ordenesDeVenta
«« -
=
««. /
(
««0 1
List
««1 5
<
««5 6
OrdenDeVenta
««6 B
>
««B C
)
««C D
HttpContext
««D O
.
««O P
Current
««P W
.
««W X
Application
««X c
[
««c d
$str
««d u
]
««u v
??
««w y
new
««z }
List««~ Ç
<««Ç É
OrdenDeVenta««É è
>««è ê
(««ê ë
)««ë í
;««í ì
ordenesDeVenta
…… 
.
…… 
Add
…… 
(
…… 
ordenDeVenta
…… +
)
……+ ,
;
……, -
HttpContext
ÀÀ 
.
ÀÀ 
Current
ÀÀ 
.
ÀÀ  
Application
ÀÀ  +
.
ÀÀ+ ,
Lock
ÀÀ, 0
(
ÀÀ0 1
)
ÀÀ1 2
;
ÀÀ2 3
HttpContext
ÃÃ 
.
ÃÃ 
Current
ÃÃ 
.
ÃÃ  
Application
ÃÃ  +
[
ÃÃ+ ,
$str
ÃÃ, =
]
ÃÃ= >
=
ÃÃ? @
ordenesDeVenta
ÃÃA O
;
ÃÃO P
HttpContext
ÕÕ 
.
ÕÕ 
Current
ÕÕ 
.
ÕÕ  
Application
ÕÕ  +
.
ÕÕ+ ,
UnLock
ÕÕ, 2
(
ÕÕ2 3
)
ÕÕ3 4
;
ÕÕ4 5
}
ŒŒ 	
public
–– 
OrdenDeVenta
–– 9
+ObtenerOrdenDeVentaParaImprimirEnAplicacion
–– G
(
––G H
long
––H L
idOrdenDeVenta
––M [
)
––[ \
{
—— 	
List
”” 
<
”” 
OrdenDeVenta
”” 
>
”” 
ordenesDeVenta
”” -
=
””. /
(
””0 1
List
””1 5
<
””5 6
OrdenDeVenta
””6 B
>
””B C
)
””C D
HttpContext
””D O
.
””O P
Current
””P W
.
””W X
Application
””X c
[
””c d
$str
””d u
]
””u v
;
””v w
OrdenDeVenta
’’ 
ordenDeVenta
’’ %
=
’’& '
ordenesDeVenta
’’( 6
.
’’6 7
Single
’’7 =
(
’’= >
ov
’’> @
=>
’’A C
ov
’’D F
.
’’F G
Id
’’G I
==
’’J L
idOrdenDeVenta
’’M [
)
’’[ \
;
’’\ ]
return
◊◊ 
ordenDeVenta
◊◊ 
;
◊◊  
}
ÿÿ 	
public
⁄⁄ 
void
⁄⁄ :
,EliminarOrdenDeVentaParaImprimirEnAplicacion
⁄⁄ @
(
⁄⁄@ A
long
⁄⁄A E
idOrdenDeVenta
⁄⁄F T
)
⁄⁄T U
{
€€ 	
List
›› 
<
›› 
OrdenDeVenta
›› 
>
›› 
ordenesDeVenta
›› -
=
››. /
(
››0 1
List
››1 5
<
››5 6
OrdenDeVenta
››6 B
>
››B C
)
››C D
HttpContext
››D O
.
››O P
Current
››P W
.
››W X
Application
››X c
[
››c d
$str
››d u
]
››u v
;
››v w
ordenesDeVenta
ﬂﬂ 
.
ﬂﬂ 
Remove
ﬂﬂ !
(
ﬂﬂ! "
ordenesDeVenta
ﬂﬂ" 0
.
ﬂﬂ0 1
Single
ﬂﬂ1 7
(
ﬂﬂ7 8
ov
ﬂﬂ8 :
=>
ﬂﬂ; =
ov
ﬂﬂ> @
.
ﬂﬂ@ A
Id
ﬂﬂA C
==
ﬂﬂD F
idOrdenDeVenta
ﬂﬂG U
)
ﬂﬂU V
)
ﬂﬂV W
;
ﬂﬂW X
HttpContext
·· 
.
·· 
Current
·· 
.
··  
Application
··  +
.
··+ ,
Lock
··, 0
(
··0 1
)
··1 2
;
··2 3
HttpContext
‚‚ 
.
‚‚ 
Current
‚‚ 
.
‚‚  
Application
‚‚  +
[
‚‚+ ,
$str
‚‚, =
]
‚‚= >
=
‚‚? @
ordenesDeVenta
‚‚A O
;
‚‚O P
HttpContext
„„ 
.
„„ 
Current
„„ 
.
„„  
Application
„„  +
.
„„+ ,
UnLock
„„, 2
(
„„2 3
)
„„3 4
;
„„4 5
}
‰‰ 	
}
ÊÊ 
}ÁÁ …p
]D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\CommonFunctions\XmlBuilder.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

static 
class 

XmlBuilder "
{ 
public   
static   
DocumentoXml   "!
ObtenerXmlComprobante  # 8
(  8 9
OrdenDeVenta  9 E
ordenDeVenta  F R
,  R S-
!EstablecimientoComercialExtendido  T u
sede  v z
,  z {
IMaestroLogica	  | ä
maestroLogica
  ã ò
,
  ò ô'
IGeneracionArchivosLogica
  ö ≥&
generacionArchivosLogica
  ¥ Ã
,
  Ã Õ+
IFacturacionElectronicaLogica
  Œ Î*
facturacionElectronicaLogica
  Ï à
)
  à â
{!! 	
try"" 
{## 
string$$ 
	metodoApi$$  
=$$! "
$str$$# %
,$$% &
nombreArchivo$$' 4
=$$5 6
$str$$7 9
;$$9 : 
DocumentoElectronico%% $
	documento%%% .
;%%. /
switch&& 
(&& 
ordenDeVenta&& $
.&&$ %
Comprobante&&% 0
(&&0 1
)&&1 2
.&&2 3

CodigoTipo&&3 =
)&&= >
{'' 
case(( 
$str(( 
:(( 
	metodoApi)) !
=))" #
$str))$ <
;))< =
var** 
tiposNotasDeCredito** /
=**0 1
maestroLogica**2 ?
.**? @#
ObtenerDetallesMaestros**@ W
(**W X
MaestroSettings**X g
.**g h
Default**h o
.**o p4
'IdMaestroTipoDeNotaDeCreditoElectronica	**p ó
)
**ó ò
;
**ò ô
var++ 
notaDeCredito++ )
=++* +
new++, /
NotaDeCredito++0 =
(++= >
ordenDeVenta++> J
,++J K
sede++L P
,++P Q
new++R U-
!EstablecimientoComercialExtendido++V w
(++w x
ordenDeVenta	++x Ñ
.
++Ñ Ö
Transaccion
++Ö ê
(
++ê ë
)
++ë í
.
++í ì
Actor_negocio2
++ì °
.
++° ¢
Actor_negocio2
++¢ ∞
)
++∞ ±
,
++≤ ≥!
tiposNotasDeCredito
++¥ «
,
++« »
null
++… Õ
,
++Õ Œ
false
++œ ‘
,
++‘ ’
(
++÷ ◊.
 ModoImpresionCaracteristicasEnum
++◊ ˜
)
++˜ ¯
VentasSettings
++¯ Ü
.
++Ü á
Default
++á é
.
++é è*
modoImpresionCaracteristicas
++è ´
)
++´ ¨
;
++¨ ≠
	documento,, !
=,," #$
generacionArchivosLogica,,$ <
.,,< =2
&ObtenerDocumentoElectronicoNotaCredito,,= c
(,,c d
notaDeCredito,,d q
),,q r
;,,r s
break-- 
;-- 
case.. 
$str.. 
:.. 
	metodoApi// !
=//" #
$str//$ ;
;//; <
var00 
tiposNotasDeDebito00 .
=00/ 0
maestroLogica001 >
.00> ?#
ObtenerDetallesMaestros00? V
(00V W
MaestroSettings00W f
.00f g
Default00g n
.00n o3
&IdMaestroTipoDeNotaDeDebitoElectronica	00o ï
)
00ï ñ
;
00ñ ó
var11 
notaDeDebito11 (
=11) *
new11+ .
NotaDeDebito11/ ;
(11; <
ordenDeVenta11< H
,11H I
sede11J N
,11N O
new11P S-
!EstablecimientoComercialExtendido11T u
(11u v
ordenDeVenta	11v Ç
.
11Ç É
Transaccion
11É é
(
11é è
)
11è ê
.
11ê ë
Actor_negocio2
11ë ü
.
11ü †
Actor_negocio2
11† Æ
)
11Æ Ø
,
11Ø ∞ 
tiposNotasDeDebito
11± √
,
11√ ƒ
null
11≈ …
,
11…  
false
11À –
,
11– —
(
11“ ”.
 ModoImpresionCaracteristicasEnum
11” Û
)
11Û Ù
VentasSettings
11Ù Ç
.
11Ç É
Default
11É ä
.
11ä ã*
modoImpresionCaracteristicas
11ã ß
)
11ß ®
;
11® ©
	documento22 !
=22" #$
generacionArchivosLogica22$ <
.22< =1
%ObtenerDocumentoElectronicoNotaDebito22= b
(22b c
notaDeDebito22c o
)22o p
;22p q
break33 
;33 
default44 
:44 
	metodoApi55 !
=55" #
$str55$ 8
;558 9
var66 
factura66 #
=66$ %
new66& )
Factura66* 1
(661 2
ordenDeVenta662 >
,66> ?
sede66@ D
,66D E
new66F I-
!EstablecimientoComercialExtendido66J k
(66k l
ordenDeVenta66l x
.66x y
Transaccion	66y Ñ
(
66Ñ Ö
)
66Ö Ü
.
66Ü á
Actor_negocio2
66á ï
.
66ï ñ
Actor_negocio2
66ñ §
)
66§ •
,
66• ¶
null
66ß ´
,
66´ ¨
false
66≠ ≤
,
66≤ ≥
(
66¥ µ.
 ModoImpresionCaracteristicasEnum
66µ ’
)
66’ ÷
VentasSettings
66÷ ‰
.
66‰ Â
Default
66Â Ï
.
66Ï Ì*
modoImpresionCaracteristicas
66Ì â
)
66â ä
;
66ä ã
	documento77 !
=77" #$
generacionArchivosLogica77$ <
.77< =.
"ObtenerDocumentoElectronicoFactura77= _
(77_ `
factura77` g
)77g h
;77h i
break88 
;88 
}99 
var:: 
documentoResponse:: %
=::& '

RestHelper::( 2
<::2 3 
DocumentoElectronico::3 G
,::G H
DocumentoResponse::I Z
>::Z [
.::[ \
Execute::\ c
(::c d
	metodoApi::d m
,::m n
	documento::o x
,::x y+
FacturacionElectronicaSettings	::z ò
.
::ò ô
Default
::ô †
.
::† °*
UrlApiFacturacionElectronica
::° Ω
)
::Ω æ
;
::æ ø
nombreArchivo;; 
=;; 
	documento;;  )
.;;) *
IdDocumento;;* 5
;;;5 6
if<< 
(<< 
!<< 
documentoResponse<< &
.<<& '
Exito<<' ,
)<<, -
{== 
throw>> 
new>> 
ControllerException>> 1
(>>1 2
documentoResponse>>2 C
.>>C D
MensajeError>>D P
)>>P Q
;>>Q R
}?? 
return@@ 
FimarXmlComprobante@@ *
(@@* +
sede@@+ /
,@@/ 0(
facturacionElectronicaLogica@@1 M
,@@M N
documentoResponse@@O `
,@@` a
nombreArchivo@@b o
)@@o p
;@@p q
}AA 
catchBB 
(BB 
	ExceptionBB 
exBB 
)BB  
{CC 
throwDD 
newDD 
ControllerExceptionDD -
(DD- .
$strDD. Y
,DDY Z
exDD[ ]
)DD] ^
;DD^ _
}EE 
}FF 	
publicHH 
staticHH 
DocumentoXmlHH "!
ObtenerXmlComprobanteHH# 8
(HH8 9
MovimientoDeAlmacenHH9 L
movimientoDeAlmacenHHM `
,HH` a.
!EstablecimientoComercialExtendido	HHb É
sede
HHÑ à
,
HHà â
List
HHä é
<
HHé è
	Proveedor
HHè ò
>
HHò ô
proveedores
HHö •
,
HH• ¶
List
HHß ´
<
HH´ ¨
Detalle_maestro
HH¨ ª
>
HHª º#
modalidadesDeTraslado
HHΩ “
,
HH“ ”
List
HH‘ ÿ
<
HHÿ Ÿ
Detalle_maestro
HHŸ Ë
>
HHË È
motivosDeTraslado
HHÍ ˚
,
HH˚ ¸'
IGeneracionArchivosLogica
HH˝ ñ&
generacionArchivosLogica
HHó Ø
,
HHØ ∞+
IFacturacionElectronicaLogica
HH± Œ*
facturacionElectronicaLogica
HHœ Î
)
HHÎ Ï
{II 	
tryJJ 
{KK 
stringLL 
	metodoApiLL  
=LL! "
$strLL# %
,LL% &
nombreArchivoLL' 4
=LL5 6
$strLL7 9
;LL9 :
	metodoApiMM 
=MM 
$strMM 5
;MM5 6
varNN 
guiaDeRemisionNN "
=NN# $
newNN% (
GuiaDeRemisionNN) 7
(NN7 8
movimientoDeAlmacenNN8 K
,NNK L
sedeNNM Q
,NNQ R
newNNS V-
!EstablecimientoComercialExtendidoNNW x
(NNx y 
movimientoDeAlmacen	NNy å
.
NNå ç
Transaccion
NNç ò
(
NNò ô
)
NNô ö
.
NNö õ
Actor_negocio2
NNõ ©
.
NN© ™
Actor_negocio2
NN™ ∏
)
NN∏ π
,
NNπ ∫
null
NNª ø
,
NNø ¿
false
NN¡ ∆
,
NN∆ «
(
NN» ….
 ModoImpresionCaracteristicasEnum
NN… È
)
NNÈ Í
VentasSettings
NNÍ ¯
.
NN¯ ˘
Default
NN˘ Ä
.
NNÄ Å*
modoImpresionCaracteristicas
NNÅ ù
,
NNù û
proveedores
NNü ™
,
NN™ ´#
modalidadesDeTraslado
NN¨ ¡
,
NN¡ ¬
motivosDeTraslado
NN√ ‘
)
NN‘ ’
;
NN’ ÷
varOO 
guiaRemisionOO  
=OO! "$
generacionArchivosLogicaOO# ;
.OO; <5
)ObtenerDocumentoElectronicoGuiaDeRemisionOO< e
(OOe f
guiaDeRemisionOOf t
)OOt u
;OOu v
varPP 
documentoResponsePP %
=PP& '

RestHelperPP( 2
<PP2 3
GuiaRemisionPP3 ?
,PP? @
DocumentoResponsePPA R
>PPR S
.PPS T
ExecutePPT [
(PP[ \
	metodoApiPP\ e
,PPe f
guiaRemisionPPg s
,PPs t+
FacturacionElectronicaSettings	PPu ì
.
PPì î
Default
PPî õ
.
PPõ ú*
UrlApiFacturacionElectronica
PPú ∏
)
PP∏ π
;
PPπ ∫
nombreArchivoQQ 
=QQ 
guiaRemisionQQ  ,
.QQ, -
IdDocumentoQQ- 8
;QQ8 9
ifRR 
(RR 
!RR 
documentoResponseRR &
.RR& '
ExitoRR' ,
)RR, -
{SS 
throwTT 
newTT 
ControllerExceptionTT 1
(TT1 2
documentoResponseTT2 C
.TTC D
MensajeErrorTTD P
)TTP Q
;TTQ R
}UU 
returnVV 
FimarXmlComprobanteVV *
(VV* +
sedeVV+ /
,VV/ 0(
facturacionElectronicaLogicaVV1 M
,VVM N
documentoResponseVVO `
,VV` a
nombreArchivoVVb o
)VVo p
;VVp q
}WW 
catchXX 
(XX 
	ExceptionXX 
exXX 
)XX  
{YY 
throwZZ 
newZZ 
ControllerExceptionZZ -
(ZZ- .
$strZZ. Y
,ZZY Z
exZZ[ ]
)ZZ] ^
;ZZ^ _
}[[ 
}\\ 	
public^^ 
static^^ 
DocumentoXml^^ "
FimarXmlComprobante^^# 6
(^^6 7$
EstablecimientoComercial^^7 O
sede^^P T
,^^T U)
IFacturacionElectronicaLogica^^V s)
facturacionElectronicaLogica	^^t ê
,
^^ê ë
DocumentoResponse
^^í £
documentoResponse
^^§ µ
,
^^µ ∂
string
^^∑ Ω
nombreArchivo
^^æ À
)
^^À Ã
{__ 	
try`` 
{aa 
bytebb 
[bb 
]bb 
archivoCertificadobb )
=bb* +(
facturacionElectronicaLogicabb, H
.bbH I
ObtenerCertificadobbI [
(bb[ \
sedebb\ `
.bb` a
DocumentoIdentidadbba s
)bbs t
;bbt u
varcc 
firmadocc 
=cc 
newcc !
FirmadoRequestcc" 0
{dd 
TramaXmlSinFirmaee $
=ee% &
documentoResponseee' 8
.ee8 9
TramaXmlSinFirmaee9 I
,eeI J
CertificadoDigitalff &
=ff' (
Convertff) 0
.ff0 1
ToBase64Stringff1 ?
(ff? @
archivoCertificadoff@ R
)ffR S
,ffS T
PasswordCertificadogg '
=gg( )*
FacturacionElectronicaSettingsgg* H
.ggH I
DefaultggI P
.ggP Q#
ClaveCertificadoDigitalggQ h
,ggh i
}hh 
;hh 
varii 
responseFirmaii !
=ii" #

RestHelperii$ .
<ii. /
FirmadoRequestii/ =
,ii= >
FirmadoResponseii? N
>iiN O
.iiO P
ExecuteiiP W
(iiW X
$striiX d
,iid e
firmadoiif m
,iim n+
FacturacionElectronicaSettings	iio ç
.
iiç é
Default
iié ï
.
iiï ñ*
UrlApiFacturacionElectronica
iiñ ≤
)
ii≤ ≥
;
ii≥ ¥
ifjj 
(jj 
!jj 
responseFirmajj "
.jj" #
Exitojj# (
)jj( )
{kk 
throwll 
newll 
ControllerExceptionll 1
(ll1 2
responseFirmall2 ?
.ll? @
MensajeErrorll@ L
)llL M
;llM N
}mm 
bytenn 
[nn 
]nn 
xmlFirmadoBytenn %
=nn& '
Convertnn( /
.nn/ 0
FromBase64Stringnn0 @
(nn@ A
responseFirmannA N
.nnN O
TramaXmlFirmadonnO ^
)nn^ _
;nn_ `
varpp 
documentoXmlpp  
=pp! "
newpp# &
DocumentoXmlpp' 3
{pp4 5
NombreDocumentopp6 E
=ppF G
nombreArchivoppH U
,ppU V
	DocumentoppW `
=ppa b
xmlFirmadoByteppc q
}ppr s
;pps t
returnqq 
documentoXmlqq #
;qq# $
}rr 
catchss 
(ss 
	Exceptionss 
exss 
)ss  
{tt 
throwuu 
newuu 
ControllerExceptionuu -
(uu- .
$struu. Y
,uuY Z
exuu[ ]
)uu] ^
;uu^ _
}vv 
}ww 	
}xx 
}yy –
]D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\CommonFunctions\PdfBuilder.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

static 
class 

PdfBuilder "
{ 
public   
static   
PdfDocument   !,
 ObtenerPdfMovimientoDeMercaderia  " B
(  B C
MovimientoDeAlmacen  C V

movimiento  W a
,  a b5
(EstablecimientoComercialExtendidoConLogo	  c ã
sede
  å ê
,
  ê ë
byte
  í ñ
[
  ñ ó
]
  ó ò
qrBytes
  ô †
,
  † °
FormatoImpresion
  ¢ ≤
formato
  ≥ ∫
,
  ∫ ª
List
  º ¿
<
  ¿ ¡
	Proveedor
  ¡  
>
    À
proveedores
  Ã ◊
,
  ◊ ÿ
List
  Ÿ ›
<
  › ﬁ
Detalle_maestro
  ﬁ Ì
>
  Ì Ó#
modalidadesDeTraslado
  Ô Ñ
,
  Ñ Ö
List
  Ü ä
<
  ä ã
Detalle_maestro
  ã ö
>
  ö õ
motivosDeTraslado
  ú ≠
,
  ≠ Æ

Controller
  Ø π

controller
  ∫ ƒ
)
  ƒ ≈
{!! 	
IPdfUtil"" 
pdfUtil"" 
="" 
Dependencia"" *
.""* +
Resolve""+ 2
<""2 3
IPdfUtil""3 ;
>""; <
(""< =
)""= >
;""> ?
string## 

htmlString## 
=## !
CoreHtmlStringBuilder##  5
.##5 6
ObtenerHtmlString##6 G
(##G H

movimiento##H R
,##R S
formato##T [
,##[ \
qrBytes##] d
,##d e
sede##f j
,##j k
proveedores##l w
,##w x"
modalidadesDeTraslado	##y é
,
##é è
motivosDeTraslado
##ê °
,
##° ¢

controller
##£ ≠
)
##≠ Æ
;
##Æ Ø
return$$ 
pdfUtil$$ 
.$$ 
ObtenerPdfDocumento$$ .
($$. /

htmlString$$/ 9
,$$9 :
formato$$; B
)$$B C
;$$C D
}%% 	
}&& 
}** ¸
wD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\CommonFunctions\HtmlStringBuilders\HtmlStringBuilder.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

static 
class 
HtmlStringBuilder )
{ 
public 
static 
string #
RenderRazorViewToString 4
(4 5
string5 ;
viewName< D
,D E
objectF L
modelM R
,S T

ControllerU _

controller` j
)j k
{ 	

controller 
. 
ViewData 
.  
Model  %
=& '
model( -
;- .
using 
( 
var 
sw 
= 
new 
StringWriter  ,
(, -
)- .
). /
{ 
var 

viewResult 
=  
ViewEngines! ,
., -
Engines- 4
.4 5
FindPartialView5 D
(D E

controllerE O
.O P
ControllerContextP a
,a b
viewNamec k
)k l
;l m
var 
viewContext 
=  !
new" %
ViewContext& 1
(1 2

controller2 <
.< =
ControllerContext= N
,N O

viewResultP Z
.Z [
View[ _
,_ `

controllera k
.k l
ViewDatal t
,t u

controller	v Ä
.
Ä Å
TempData
Å â
,
â ä
sw
ã ç
)
ç é
;
é è

viewResult 
. 
View 
.  
Render  &
(& '
viewContext' 2
,2 3
sw4 6
)6 7
;7 8

viewResult   
.   

ViewEngine   %
.  % &
ReleaseView  & 1
(  1 2

controller  2 <
.  < =
ControllerContext  = N
,  N O

viewResult  P Z
.  Z [
View  [ _
)  _ `
;  ` a
return!! 
sw!! 
.!! 
GetStringBuilder!! *
(!!* +
)!!+ ,
.!!, -
ToString!!- 5
(!!5 6
)!!6 7
;!!7 8
}"" 
}## 	
}%% 	
})) ¥y
gD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Almacen\CommonAlmacenController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class #
CommonAlmacenController (
:) *
BaseController+ 9
{ 
	protected 
readonly 
IActorNegocioLogica .
actorNegocioLogica/ A
;A B
	protected   
readonly   
IMaestroLogica   )
maestroLogica  * 7
;  7 8
	protected!! 
readonly!! 
IOperacionLogica!! +
operacionLogica!!, ;
;!!; <
	protected"" 
readonly"" '
IInventarioHistorico_Logica"" 6%
inventarioHistoricoLogica""7 P
;""P Q
	protected## 
readonly##  
IConfiguracionLogica## /
configuracionLogica##0 C
;##C D
	protected$$ 
readonly$$ %
IGeneracionArchivosLogica$$ 4$
generacionArchivosLogica$$5 M
;$$M N
	protected%% 
readonly%% )
IFacturacionElectronicaLogica%% 8(
facturacionElectronicaLogica%%9 U
;%%U V
	protected&& 
readonly&& 
IMailer&& "
mailer&&# )
;&&) *
	protected'' 
readonly'' 
IBarCodeUtil'' '
barCodeUtil''( 3
;''3 4
public)) #
CommonAlmacenController)) &
())& '
)))' (
:))) *
base))+ /
())/ 0
)))0 1
{** 	
actorNegocioLogica++ 
=++  
Dependencia++! ,
.++, -
Resolve++- 4
<++4 5
IActorNegocioLogica++5 H
>++H I
(++I J
)++J K
;++K L
maestroLogica,, 
=,, 
Dependencia,, '
.,,' (
Resolve,,( /
<,,/ 0
IMaestroLogica,,0 >
>,,> ?
(,,? @
),,@ A
;,,A B
operacionLogica-- 
=-- 
Dependencia-- )
.--) *
Resolve--* 1
<--1 2
IOperacionLogica--2 B
>--B C
(--C D
)--D E
;--E F
configuracionLogica.. 
=..  !
Dependencia.." -
...- .
Resolve... 5
<..5 6 
IConfiguracionLogica..6 J
>..J K
(..K L
)..L M
;..M N
mailer// 
=// 
Dependencia//  
.//  !
Resolve//! (
<//( )
IMailer//) 0
>//0 1
(//1 2
)//2 3
;//3 4
barCodeUtil00 
=00 
Dependencia00 %
.00% &
Resolve00& -
<00- .
IBarCodeUtil00. :
>00: ;
(00; <
)00< =
;00= >$
generacionArchivosLogica11 $
=11% &
Dependencia11' 2
.112 3
Resolve113 :
<11: ;%
IGeneracionArchivosLogica11; T
>11T U
(11U V
)11V W
;11W X(
facturacionElectronicaLogica22 (
=22) *
Dependencia22+ 6
.226 7
Resolve227 >
<22> ?)
IFacturacionElectronicaLogica22? \
>22\ ]
(22] ^
)22^ _
;22_ `%
inventarioHistoricoLogica33 %
=33& '
Dependencia33( 3
.333 4
Resolve334 ;
<33; <'
IInventarioHistorico_Logica33< W
>33W X
(33X Y
)33Y Z
;33Z [
}55 	
public77  
ComprobanteDeAlmacen77 #$
ObtenerMovimientoAlmacen77$ <
(77< =4
(EstablecimientoComercialExtendidoConLogo77= e
sede77f j
,77j k
List77l p
<77p q
	Proveedor77q z
>77z {
proveedores	77| á
,
77á à
List
77â ç
<
77ç é
Detalle_maestro
77é ù
>
77ù û
modalidades
77ü ™
,
77™ ´
List
77¨ ∞
<
77∞ ±
Detalle_maestro
77± ¿
>
77¿ ¡
motivos
77¬ …
,
77…  "
ComprobanteDeAlmacen
77À ﬂ"
comprobanteDeAlmacen
77‡ Ù
)
77Ù ı
{88 	
try99 
{:: 
MovimientoDeAlmacen;; #
movimientoDeAlmacen;;$ 7
=;;8 9
operacionLogica;;: I
.;;I J)
ObtenerMovimientoDeMercaderia;;J g
(;;g h 
comprobanteDeAlmacen;;h |
.;;| }
Id;;} 
)	;; Ä
;
;;Ä Å
if== 
(== 
movimientoDeAlmacen== '
.==' (
IdTipoComprobante==( 9
====: <
MaestroSettings=== L
.==L M
Default==M T
.==T U?
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitente	==U á
)
==á à
{>> 
var?? 
ubigeos?? 
=??  !
maestroLogica??" /
.??/ 0
obtenerUbigeo??0 =
(??= >
new??> A
int??B E
[??E F
]??F G
{??H I
Convert??J Q
.??Q R
ToInt32??R Y
(??Y Z
movimientoDeAlmacen??Z m
.??m n%
IdUbigeoOrigenDeTraslado	??n Ü
(
??Ü á
)
??á à
)
??à â
,
??â ä
Convert
??ã í
.
??í ì
ToInt32
??ì ö
(
??ö õ!
movimientoDeAlmacen
??õ Æ
.
??Æ Ø'
IdUbigeoDestinoDeTraslado
??Ø »
(
??» …
)
??…  
)
??  À
}
??Ã Õ
)
??Õ Œ
;
??Œ œ
movimientoDeAlmacen@@ '
.@@' (
UbigeoOrigen@@( 4
=@@5 6
ubigeos@@7 >
.@@> ?
Single@@? E
(@@E F
u@@F G
=>@@H J
u@@K L
.@@L M
id@@M O
==@@P R
Convert@@S Z
.@@Z [
ToInt32@@[ b
(@@b c
movimientoDeAlmacen@@c v
.@@v w%
IdUbigeoOrigenDeTraslado	@@w è
(
@@è ê
)
@@ê ë
)
@@ë í
)
@@í ì
.
@@ì î
descripcion_corta
@@î •
;
@@• ¶
movimientoDeAlmacenAA '
.AA' (
UbigeoDestinoAA( 5
=AA6 7
ubigeosAA8 ?
.AA? @
SingleAA@ F
(AAF G
uAAG H
=>AAI K
uAAL M
.AAM N
idAAN P
==AAQ S
ConvertAAT [
.AA[ \
ToInt32AA\ c
(AAc d
movimientoDeAlmacenAAd w
.AAw x&
IdUbigeoDestinoDeTraslado	AAx ë
(
AAë í
)
AAí ì
)
AAì î
)
AAî ï
.
AAï ñ
descripcion_corta
AAñ ß
;
AAß ®
varBB 
QrBytesBB 
=BB  !
barCodeUtilBB" -
.BB- .
ObtenerCodigoQRBB. =
(BB= >
movimientoDeAlmacenBB> Q
.BBQ R
InformacionBBR ]
)BB] ^
;BB^ _ 
comprobanteDeAlmacenCC (
.CC( )%
CadenaHtmlDeComprobante80CC) B
=CCC D!
CoreHtmlStringBuilderCCE Z
.CCZ [
ObtenerHtmlStringCC[ l
(CCl m 
movimientoDeAlmacen	CCm Ä
,
CCÄ Å
FormatoImpresion
CCÇ í
.
CCí ì
_80mm
CCì ò
,
CCò ô
QrBytes
CCö °
,
CC° ¢
sede
CC£ ß
,
CCß ®
proveedores
CC© ¥
,
CC¥ µ
modalidades
CC∂ ¡
,
CC¡ ¬
motivos
CC√  
,
CC  À
this
CCÃ –
)
CC– —
;
CC— “ 
comprobanteDeAlmacenDD (
.DD( )%
CadenaHtmlDeComprobanteA4DD) B
=DDC D!
CoreHtmlStringBuilderDDE Z
.DDZ [
ObtenerHtmlStringDD[ l
(DDl m 
movimientoDeAlmacen	DDm Ä
,
DDÄ Å
FormatoImpresion
DDÇ í
.
DDí ì
A4
DDì ï
,
DDï ñ
QrBytes
DDó û
,
DDû ü
sede
DD† §
,
DD§ •
proveedores
DD¶ ±
,
DD± ≤
modalidades
DD≥ æ
,
DDæ ø
motivos
DD¿ «
,
DD« »
this
DD… Õ
)
DDÕ Œ
;
DDŒ œ
}EE 
elseFF 
ifFF 
(FF 
movimientoDeAlmacenFF ,
.FF, -
IdTipoComprobanteFF- >
==FF? A
MaestroSettingsFFB Q
.FFQ R
DefaultFFR Y
.FFY Z:
-IdDetalleMaestroComprobanteNotaAlmacenInterna	FFZ á
)
FFá à
{GG 
varHH 
	QrContentHH !
=HH" #(
facturacionElectronicaLogicaHH$ @
.HH@ A
	ObtenerQRHHA J
(HHJ K
movimientoDeAlmacenHHK ^
,HH^ _
sedeHH` d
)HHd e
;HHe f
varII 
QrBytesII 
=II  !
barCodeUtilII" -
.II- .
ObtenerCodigoQRII. =
(II= >
	QrContentII> G
)IIG H
;IIH I 
comprobanteDeAlmacenJJ (
.JJ( )%
CadenaHtmlDeComprobante80JJ) B
=JJC D!
CoreHtmlStringBuilderJJE Z
.JJZ [
ObtenerHtmlStringJJ[ l
(JJl m 
movimientoDeAlmacen	JJm Ä
,
JJÄ Å
FormatoImpresion
JJÇ í
.
JJí ì
_80mm
JJì ò
,
JJò ô
QrBytes
JJö °
,
JJ° ¢
sede
JJ£ ß
,
JJß ®
proveedores
JJ© ¥
,
JJ¥ µ
modalidades
JJ∂ ¡
,
JJ¡ ¬
motivos
JJ√  
,
JJ  À
this
JJÃ –
)
JJ– —
;
JJ— “ 
comprobanteDeAlmacenKK (
.KK( )%
CadenaHtmlDeComprobanteA4KK) B
=KKC D!
CoreHtmlStringBuilderKKE Z
.KKZ [
ObtenerHtmlStringKK[ l
(KKl m 
movimientoDeAlmacen	KKm Ä
,
KKÄ Å
FormatoImpresion
KKÇ í
.
KKí ì
A4
KKì ï
,
KKï ñ
QrBytes
KKó û
,
KKû ü
sede
KK† §
,
KK§ •
proveedores
KK¶ ±
,
KK± ≤
modalidades
KK≥ æ
,
KKæ ø
motivos
KK¿ «
,
KK« »
this
KK… Õ
)
KKÕ Œ
;
KKŒ œ
}LL 
elseMM 
{NN  
comprobanteDeAlmacenQQ (
=QQ) *
newQQ+ . 
ComprobanteDeAlmacenQQ/ C
(QQC D
)QQD E
{QQF G
IdQQH J
=QQK L
movimientoDeAlmacenQQM `
.QQ` a!
IdOperacionReferenciaQQa v
(QQv w
)QQw x
}QQy z
;QQz {)
ObtenerOrdenMovimientoAlmacenRR 1
(RR1 2
sedeRR2 6
,RR6 7 
comprobanteDeAlmacenRR8 L
,RRL M
movimientoDeAlmacenRRN a
.RRa b1
$IdTipoTransaccionOperacionReferencia	RRb Ü
(
RRÜ á
)
RRá à
)
RRà â
;
RRâ ä
}SS 
returnTT  
comprobanteDeAlmacenTT +
;TT+ ,
}UU 
catchVV 
(VV 
	ExceptionVV 
eVV 
)VV 
{WW 
throwXX 
newXX 
ControllerExceptionXX -
(XX- .
$strXX. b
,XXb c
eXXd e
)XXe f
;XXf g
}YY 
}ZZ 	
public\\  
ComprobanteDeAlmacen\\ #)
ObtenerOrdenMovimientoAlmacen\\$ A
(\\A B4
(EstablecimientoComercialExtendidoConLogo\\B j
sede\\k o
,\\o p!
ComprobanteDeAlmacen	\\q Ö"
comprobanteDeAlmacen
\\Ü ö
,
\\ö õ
int
\\ú ü
idTipoTransaccion
\\† ±
)
\\± ≤
{]] 	
try^^ 
{__ 
if`` 
(`` 
Diccionario`` 
.``  :
.TiposDeTransaccionOrdenesDeOperacionesDeVentas``  N
.``N O
Contains``O W
(``W X
idTipoTransaccion``X i
)``i j
)``j k
{aa 
OrdenDeVentabb  
ordenDeVentabb! -
=bb. /
operacionLogicabb0 ?
.bb? @
ObtenerOrdenDeVentabb@ S
(bbS T 
comprobanteDeAlmacenbbT h
.bbh i
Idbbi k
)bbk l
;bbl m
varcc 
QrContentOrdencc &
=cc' ((
facturacionElectronicaLogicacc) E
.ccE F
	ObtenerQRccF O
(ccO P
ordenDeVentaccP \
,cc\ ]
sedecc^ b
)ccb c
;ccc d
vardd 
QrBytesOrdendd $
=dd% &
barCodeUtildd' 2
.dd2 3
ObtenerCodigoQRdd3 B
(ddB C
QrContentOrdenddC Q
)ddQ R
;ddR S 
comprobanteDeAlmacenee (
.ee( )%
CadenaHtmlDeComprobante80ee) B
=eeC D!
CoreHtmlStringBuildereeE Z
.eeZ [
ObtenerHtmlStringee[ l
(eel m
ordenDeVentaeem y
,eey z
FormatoImpresion	ee{ ã
.
eeã å
_80mm
eeå ë
,
eeë í
QrBytesOrden
eeì ü
,
eeü †
sede
ee° •
,
ee• ¶
this
eeß ´
,
ee´ ¨
maestroLogica
ee≠ ∫
)
ee∫ ª
;
eeª º 
comprobanteDeAlmacenff (
.ff( )%
CadenaHtmlDeComprobanteA4ff) B
=ffC D!
CoreHtmlStringBuilderffE Z
.ffZ [
ObtenerHtmlStringff[ l
(ffl m
ordenDeVentaffm y
,ffy z
FormatoImpresion	ff{ ã
.
ffã å
A4
ffå é
,
ffé è
QrBytesOrden
ffê ú
,
ffú ù
sede
ffû ¢
,
ff¢ £
this
ff§ ®
,
ff® ©
maestroLogica
ff™ ∑
)
ff∑ ∏
;
ff∏ π
}gg 
elsehh 
ifhh 
(hh 
Diccionariohh $
.hh$ %;
/TiposDeTransaccionOrdenesDeOperacionesDeComprashh% T
.hhT U
ContainshhU ]
(hh] ^
idTipoTransaccionhh^ o
)hho p
)hhp q
{ii 
OrdenDeComprajj !
ordenDecomprajj" /
=jj0 1
operacionLogicajj2 A
.jjA B 
ObtenerOrdenDeComprajjB V
(jjV W 
comprobanteDeAlmacenjjW k
.jjk l
Idjjl n
)jjn o
;jjo p 
comprobanteDeAlmacenkk (
.kk( )%
CadenaHtmlDeComprobante80kk) B
=kkC D!
CoreHtmlStringBuilderkkE Z
.kkZ [
ObtenerHtmlStringkk[ l
(kkl m
ordenDecomprakkm z
,kkz {
FormatoImpresion	kk| å
.
kkå ç
_80mm
kkç í
,
kkí ì
null
kkî ò
,
kkò ô
sede
kkö û
,
kkû ü
this
kk† §
,
kk§ •
maestroLogica
kk¶ ≥
)
kk≥ ¥
;
kk¥ µ 
comprobanteDeAlmacenll (
.ll( )%
CadenaHtmlDeComprobanteA4ll) B
=llC D!
CoreHtmlStringBuilderllE Z
.llZ [
ObtenerHtmlStringll[ l
(lll m
ordenDecomprallm z
,llz {
FormatoImpresion	ll| å
.
llå ç
A4
llç è
,
llè ê
null
llë ï
,
llï ñ
sede
lló õ
,
llõ ú
this
llù °
,
ll° ¢
maestroLogica
ll£ ∞
)
ll∞ ±
;
ll± ≤
}mm 
returnoo  
comprobanteDeAlmacenoo +
;oo+ ,
}pp 
catchqq 
(qq 
	Exceptionqq 
eqq 
)qq 
{rr 
throwss 
newss 
ControllerExceptionss -
(ss- .
$strss. l
,ssl m
essn o
)sso p
;ssp q
}tt 
}uu 	
}vv 
}ww ‰u
fD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Almacen\OrdenAlmacenController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class "
OrdenAlmacenController '
:( )#
CommonAlmacenController* A
{ 
	protected   
readonly    
IOrdenAlmacen_Logica   /
ordenAlmacenLogica  0 B
;  B C
public"" "
OrdenAlmacenController"" %
(""% &
)""& '
:""( )
base""* .
("". /
)""/ 0
{## 	
ordenAlmacenLogica$$ 
=$$  
Dependencia$$! ,
.$$, -
Resolve$$- 4
<$$4 5 
IOrdenAlmacen_Logica$$5 I
>$$I J
($$J K
)$$K L
;$$L M
}%% 	
['' 	
	Authorize''	 
('' 
Roles'' 
='' 
$str'' <
)''< =
]''= >
public(( 
ActionResult(( 
	Principal(( %
(((% &
)((& '
{)) 	
ViewBag** 
.** 
Data** 
=** 
ordenAlmacenLogica** -
.**- .1
%ObtenerDatosParaOrdenAlmacenPrincipal**. S
(**S T
ProfileData**T _
(**_ `
)**` a
)**a b
;**b c
return@@ 
View@@ 
(@@ 
)@@ 
;@@ 
}AA 	
publicCC 

JsonResultCC !
ObtenerOrdenesAlmacenCC /
(CC/ 0
stringCC0 6
desdeCC7 <
,CC< =
stringCC> D
hastaCCE J
,CCJ K
boolCCL P
porIngresarCCQ \
,CC\ ]
boolCC^ b
entregaInmediataCCc s
,CCs t
boolCCu y
entregaDiferida	CCz â
,
CCâ ä
bool
CCã è
estadoPendiente
CCê ü
,
CCü †
bool
CC° •
estadoParcial
CC¶ ≥
,
CC≥ ¥
bool
CCµ π
estadoCompletada
CC∫  
,
CC  À
int
CCÃ œ
[
CCœ –
]
CC– —
idsAlmacenes
CC“ ﬁ
)
CCﬁ ﬂ
{DD 	
tryEE 
{FF 
DateTimeGG 

fechaDesdeGG #
=GG$ %
DateTimeGG& .
.GG. /
ParseGG/ 4
(GG4 5
desdeGG5 :
)GG: ;
;GG; <
DateTimeHH 

fechaHastaHH #
=HH$ %
DateTimeHH& .
.HH. /
ParseHH/ 4
(HH4 5
hastaHH5 :
+HH; <
$strHH= H
)HHH I
;HHI J
ListII 
<II 
OrdenAlmacenResumenII (
>II( )
ordenesAlmacenII* 8
=II9 :
ordenAlmacenLogicaII; M
.IIM N!
ObtenerOrdenesAlmacenIIN c
(IIc d

fechaDesdeIId n
,IIn o

fechaHastaIIp z
,IIz {
porIngresar	II| á
,
IIá à
entregaInmediata
IIâ ô
,
IIô ö
entregaDiferida
IIõ ™
,
II™ ´
estadoPendiente
II¨ ª
,
IIª º
estadoParcial
IIΩ  
,
II  À
estadoCompletada
IIÃ ‹
,
II‹ ›
idsAlmacenes
IIﬁ Í
,
IIÍ Î
ProfileData
IIÏ ˜
(
II˜ ¯
)
II¯ ˘
)
II˘ ˙
;
II˙ ˚
returnJJ 
JsonJJ 
(JJ 
ordenesAlmacenJJ *
)JJ* +
;JJ+ ,
}KK 
catchLL 
(LL 
	ExceptionLL 
eLL 
)LL 
{MM 
returnNN 
newNN  
JsonHttpStatusResultNN /
(NN/ 0
UtilNN0 4
.NN4 5
	ErrorJsonNN5 >
(NN> ?
eNN? @
)NN@ A
,NNA B
HttpStatusCodeNNC Q
.NNQ R
InternalServerErrorNNR e
)NNe f
;NNf g
}OO 
}PP 	
publicRR 
asyncRR 
TaskRR 
<RR 

JsonResultRR $
>RR$ %
ObtenerOrdenAlmacenRR& 9
(RR9 :
longRR: >
idOrdenAlmacenRR? M
,RRM N
boolRRO S
porIngresarRRT _
)RR_ `
{SS 	
tryTT 
{UU 
OrdenAlmacenVV 
ordenAlmacenVV )
=VV* +
ordenAlmacenLogicaVV, >
.VV> ?
ObtenerOrdenAlmacenVV? R
(VVR S
idOrdenAlmacenVVS a
,VVa b
porIngresarVVc n
)VVn o
;VVo p
varWW 
sedeWW 
=WW 
ObtenerSedeWW &
(WW& '
)WW' (
;WW( )
varXX 
proveedoresXX 
=XX  !
newXX" %
ListXX& *
<XX* +
	ProveedorXX+ 4
>XX4 5
(XX5 6
)XX6 7
;XX7 8
varYY !
modalidadesDeTrasladoYY )
=YY* +
newYY, /
ListYY0 4
<YY4 5
Detalle_maestroYY5 D
>YYD E
(YYE F
)YYF G
;YYG H
varZZ 
motivosDeTrasladoZZ %
=ZZ& '
newZZ( +
ListZZ, 0
<ZZ0 1
Detalle_maestroZZ1 @
>ZZ@ A
(ZZA B
)ZZB C
;ZZC D
var[[ %
idsComprobantesMovimiento[[ -
=[[. /
new[[0 3
List[[4 8
<[[8 9
int[[9 <
>[[< =
{[[> ?
MaestroSettings[[@ O
.[[O P
Default[[P W
.[[W X:
-IdDetalleMaestroComprobanteNotaAlmacenInterna	[[X Ö
,
[[Ö Ü
MaestroSettings
[[á ñ
.
[[ñ ó
Default
[[ó û
.
[[û ü@
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitente
[[ü —
}
[[“ ”
;
[[” ‘
if\\ 
(\\ 
ordenAlmacen\\  
.\\  !
Movimientos\\! ,
.\\, -
Select\\- 3
(\\3 4
m\\4 5
=>\\6 8
m\\9 :
.\\: ;
IdTipoComprobante\\; L
)\\L M
.\\M N
ToList\\N T
(\\T U
)\\U V
.\\V W
	Intersect\\W `
(\\` a%
idsComprobantesMovimiento\\a z
)\\z {
.\\{ |
Any\\| 
(	\\ Ä
)
\\Ä Å
)
\\Å Ç
{]] 
proveedores^^ 
=^^  !
actorNegocioLogica^^" 4
.^^4 5&
ObtenerProveedoresVigentes^^5 O
(^^O P
)^^P Q
;^^Q R!
modalidadesDeTraslado__ )
=__* +
await__, 1
maestroLogica__2 ?
.__? @+
ObtenerModalidadesTrasladoAsync__@ _
(___ `
)__` a
;__a b
motivosDeTraslado`` %
=``& '
await``( -
maestroLogica``. ;
.``; <'
ObtenerMotivosTrasladoAsync``< W
(``W X
)``X Y
;``Y Z
}aa 
foreachbb 
(bb 
varbb 
ordenbb "
inbb# %
ordenAlmacenbb& 2
.bb2 3
Ordenesbb3 :
)bb: ;
{cc 
ordendd 
.dd 
Comprobantedd %
=dd& ')
ObtenerOrdenMovimientoAlmacendd( E
(ddE F
sededdF J
,ddJ K
ordenddL Q
.ddQ R
ComprobanteddR ]
,dd] ^
ordendd_ d
.ddd e
IdTipoTransacciondde v
)ddv w
;ddw x
}ee 
foreachff 
(ff 
varff 

movimientoff '
inff( *
ordenAlmacenff+ 7
.ff7 8
Movimientosff8 C
)ffC D
{gg 

movimientohh 
.hh 
Comprobantehh *
=hh+ ,$
ObtenerMovimientoAlmacenhh- E
(hhE F
sedehhF J
,hhJ K
proveedoreshhL W
,hhW X!
modalidadesDeTrasladohhY n
,hhn o
motivosDeTraslado	hhp Å
,
hhÅ Ç

movimiento
hhÉ ç
.
hhç é
Comprobante
hhé ô
)
hhô ö
;
hhö õ
}ii 
returnjj 
Jsonjj 
(jj 
ordenAlmacenjj (
)jj( )
;jj) *
}kk 
catchll 
(ll 
	Exceptionll 
ell 
)ll 
{mm 
returnnn 
newnn  
JsonHttpStatusResultnn /
(nn/ 0
Utilnn0 4
.nn4 5
	ErrorJsonnn5 >
(nn> ?
enn? @
)nn@ A
,nnA B
HttpStatusCodennC Q
.nnQ R
InternalServerErrornnR e
)nne f
;nnf g
}oo 
}pp 	
publicrr 

JsonResultrr 1
%ObtenerRegistroMovimientoOrdenAlmacenrr ?
(rr? @
longrr@ D
idOrdenAlmacenrrE S
,rrS T
boolrrU Y
porIngresarrrZ e
)rre f
{ss 	
trytt 
{uu %
RegistroMovimientoAlmacenvv )*
registroMovimientoOrdenAlmacenvv* H
=vvI J
ordenAlmacenLogicavvK ]
.vv] ^2
%ObtenerRegistroMovimientoOrdenAlmacen	vv^ É
(
vvÉ Ñ
idOrdenAlmacen
vvÑ í
,
vví ì
porIngresar
vvî ü
,
vvü †
ProfileData
vv° ¨
(
vv¨ ≠
)
vv≠ Æ
)
vvÆ Ø
;
vvØ ∞
returnww 
Jsonww 
(ww *
registroMovimientoOrdenAlmacenww :
)ww: ;
;ww; <
}xx 
catchyy 
(yy 
	Exceptionyy 
eyy 
)yy 
{zz 
return{{ 
new{{  
JsonHttpStatusResult{{ /
({{/ 0
Util{{0 4
.{{4 5
	ErrorJson{{5 >
({{> ?
e{{? @
){{@ A
,{{A B
HttpStatusCode{{C Q
.{{Q R
InternalServerError{{R e
){{e f
;{{f g
}|| 
}}} 	
public 
async 
Task 
< 

JsonResult $
>$ %)
GuardarMovimientoOrdenAlmacen& C
(C D%
RegistroMovimientoAlmacenD ]"
movimientoOrdenAlmacen^ t
)t u
{
ÄÄ 	
try
ÅÅ 
{
ÇÇ 
OperationResult
ÉÉ 
result
ÉÉ  &
=
ÉÉ' ( 
ordenAlmacenLogica
ÉÉ) ;
.
ÉÉ; <+
GuardarMovimientoOrdenAlmacen
ÉÉ< Y
(
ÉÉY Z$
movimientoOrdenAlmacen
ÉÉZ p
,
ÉÉp q
ProfileData
ÉÉr }
(
ÉÉ} ~
)
ÉÉ~ 
)ÉÉ Ä
;ÉÉÄ Å
Util
ÑÑ 
.
ÑÑ (
ManageIfResultIsNotSuccess
ÑÑ /
(
ÑÑ/ 0
result
ÑÑ0 6
,
ÑÑ6 7
$strÑÑ8 Ç
)ÑÑÇ É
;ÑÑÉ Ñ
if
ÖÖ 
(
ÖÖ $
movimientoOrdenAlmacen
ÖÖ *
.
ÖÖ* +
TipoDeComprobante
ÖÖ+ <
.
ÖÖ< =
TipoComprobante
ÖÖ= L
.
ÖÖL M
Id
ÖÖM O
==
ÖÖP R
MaestroSettings
ÖÖS b
.
ÖÖb c
Default
ÖÖc j
.
ÖÖj kA
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitenteÖÖk ù
)ÖÖù û
{
ÜÜ 
string
áá 
path
áá 
=
áá  ! 
HostingEnvironment
áá" 4
.
áá4 5%
ApplicationPhysicalPath
áá5 L
;
ááL M
await
àà *
facturacionElectronicaLogica
àà 6
.
àà6 7,
TransmitirEnviarGuiaDeRemision
àà7 U
(
ààU V
(
ààV W
(
ààW X
OrdenDeVenta
ààX d
)
ààd e
result
ààe k
.
ààk l
objeto
ààl r
)
ààr s
.
ààs t
Transaccion
ààt 
(àà Ä
)ààÄ Å
.ààÅ Ç
Transaccion11ààÇ è
.ààè ê
Firstààê ï
(ààï ñ
)ààñ ó
.ààó ò
idààò ö
,ààö õ
ProfileDataààú ß
(ààß ®
)àà® ©
.àà© ™
Sedeàà™ Æ
,ààÆ Ø
ProfileDataàà∞ ª
(ààª º
)ààº Ω
.ààΩ æ
Empleadoààæ ∆
.àà∆ «
Idàà« …
,àà…  
pathààÀ œ
)ààœ –
;àà– —
}
ââ 
return
ää 
Json
ää 
(
ää 
new
ää 
{
ää  !
result
ää" (
.
ää( )
code_result
ää) 4
,
ää4 5
data
ää6 :
=
ää; <
result
ää= C
.
ääC D
information
ääD O
,
ääO P 
result_description
ääQ c
=
ääd e
result
ääf l
.
ääl m
title
ääm r
}
äär s
)
ääs t
;
äät u
}
ãã 
catch
åå 
(
åå 
	Exception
åå 
e
åå 
)
åå 
{
çç 
return
éé 
new
éé "
JsonHttpStatusResult
éé /
(
éé/ 0
Util
éé0 4
.
éé4 5
	ErrorJson
éé5 >
(
éé> ?
e
éé? @
)
éé@ A
,
ééA B
HttpStatusCode
ééC Q
.
ééQ R!
InternalServerError
ééR e
)
éée f
;
ééf g
}
èè 
}
êê 	
public
íí 

JsonResult
íí -
InvalidarMovimientoOrdenAlmacen
íí 9
(
íí9 :
long
íí: >&
idMovimientoOrdenAlmacen
íí? W
,
ííW X
string
ííY _
observacion
íí` k
)
íík l
{
ìì 	
try
îî 
{
ïï 
OperationResult
ññ 
result
ññ  &
=
ññ' ( 
ordenAlmacenLogica
ññ) ;
.
ññ; <-
InvalidarMovimientoOrdenAlmacen
ññ< [
(
ññ[ \&
idMovimientoOrdenAlmacen
ññ\ t
,
ññt u
observacionññv Å
,ññÅ Ç
ProfileDataññÉ é
(ññé è
)ññè ê
)ññê ë
;ññë í
Util
óó 
.
óó (
ManageIfResultIsNotSuccess
óó /
(
óó/ 0
result
óó0 6
,
óó6 7
$str
óó8 x
)
óóx y
;
óóy z
return
òò 
Json
òò 
(
òò 
new
òò 
{
òò  !
result
òò" (
.
òò( )
code_result
òò) 4
,
òò4 5
data
òò6 :
=
òò; <
result
òò= C
.
òòC D
information
òòD O
,
òòO P 
result_description
òòQ c
=
òòd e
result
òòf l
.
òòl m
title
òòm r
}
òòs t
)
òòt u
;
òòu v
}
ôô 
catch
öö 
(
öö 
	Exception
öö 
e
öö 
)
öö 
{
õõ 
return
úú 
new
úú "
JsonHttpStatusResult
úú /
(
úú/ 0
Util
úú0 4
.
úú4 5
	ErrorJson
úú5 >
(
úú> ?
e
úú? @
)
úú@ A
,
úúA B
HttpStatusCode
úúC Q
.
úúQ R!
InternalServerError
úúR e
)
úúe f
;
úúf g
}
ùù 
}
ûû 	
}
üü 
}†† Œ¥

aD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Almacen\AlmacenController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
AlmacenController "
:# $
BaseController% 3
{   
	protected!! 
readonly!! 
IActorNegocioLogica!! .
actorNegocioLogica!!/ A
;!!A B
	protected"" 
readonly"" 
IMaestroLogica"" )
maestroLogica""* 7
;""7 8
	protected## 
readonly## 
ISede_Logica## '

sedeLogica##( 2
;##2 3
	protected$$ 
readonly$$ 
IOperacionLogica$$ +
operacionLogica$$, ;
;$$; <
	protected%% 
readonly%% '
IInventarioHistorico_Logica%% 6%
inventarioHistoricoLogica%%7 P
;%%P Q
	protected&& 
readonly&&  
IConfiguracionLogica&& /
configuracionLogica&&0 C
;&&C D
	protected'' 
readonly'' %
IGeneracionArchivosLogica'' 4$
generacionArchivosLogica''5 M
;''M N
	protected(( 
readonly(( )
IFacturacionElectronicaLogica(( 8(
facturacionElectronicaLogica((9 U
;((U V
	protected)) 
readonly)) 
IMailer)) "
mailer))# )
;))) *
	protected** 
readonly** 
IBarCodeUtil** '
barCodeUtil**( 3
;**3 4
public,, 
AlmacenController,,  
(,,  !
),,! "
:,,# $
base,,% )
(,,) *
),,* +
{-- 	
actorNegocioLogica.. 
=..  
Dependencia..! ,
..., -
Resolve..- 4
<..4 5
IActorNegocioLogica..5 H
>..H I
(..I J
)..J K
;..K L
maestroLogica// 
=// 
Dependencia// '
.//' (
Resolve//( /
</// 0
IMaestroLogica//0 >
>//> ?
(//? @
)//@ A
;//A B

sedeLogica00 
=00 
Dependencia00 $
.00$ %
Resolve00% ,
<00, -
ISede_Logica00- 9
>009 :
(00: ;
)00; <
;00< =
operacionLogica11 
=11 
Dependencia11 )
.11) *
Resolve11* 1
<111 2
IOperacionLogica112 B
>11B C
(11C D
)11D E
;11E F
configuracionLogica22 
=22  !
Dependencia22" -
.22- .
Resolve22. 5
<225 6 
IConfiguracionLogica226 J
>22J K
(22K L
)22L M
;22M N
mailer33 
=33 
Dependencia33  
.33  !
Resolve33! (
<33( )
IMailer33) 0
>330 1
(331 2
)332 3
;333 4
barCodeUtil44 
=44 
Dependencia44 %
.44% &
Resolve44& -
<44- .
IBarCodeUtil44. :
>44: ;
(44; <
)44< =
;44= >$
generacionArchivosLogica55 $
=55% &
Dependencia55' 2
.552 3
Resolve553 :
<55: ;%
IGeneracionArchivosLogica55; T
>55T U
(55U V
)55V W
;55W X(
facturacionElectronicaLogica66 (
=66) *
Dependencia66+ 6
.666 7
Resolve667 >
<66> ?)
IFacturacionElectronicaLogica66? \
>66\ ]
(66] ^
)66^ _
;66_ `%
inventarioHistoricoLogica77 %
=77& '
Dependencia77( 3
.773 4
Resolve774 ;
<77; <'
IInventarioHistorico_Logica77< W
>77W X
(77X Y
)77Y Z
;77Z [
}99 	
public<< 
ActionResult<< 
OrdenesDeAlmacen<< ,
(<<, -
)<<- .
{== 	
List>> 
<>> 
string>> 
>>> 
fechas>> 
=>>  !
operacionLogica>>" 1
.>>1 23
'ObtenerFechaIncioyFinParaReporteAlmacen>>2 Y
(>>Y Z
)>>Z [
;>>[ \
ViewBag?? 
.?? 
fechaInicio?? 
=??  !
fechas??" (
[??( )
$num??) *
]??* +
;??+ ,
ViewBag@@ 
.@@ 
fechaFin@@ 
=@@ 
fechas@@ %
[@@% &
$num@@& '
]@@' (
;@@( )
ViewBagAA 
.AA '
idEstablecimientoPorDefectoAA /
=AA0 1
ProfileDataAA2 =
(AA= >
)AA> ?
.AA? @(
CentroDeAtencionSeleccionadoAA@ \
.AA\ ]$
EstablecimientoComercialAA] u
.AAu v
IdAAv x
;AAx y
ViewBagBB 
.BB (
idCentroDeAtencionPorDefectoBB 0
=BB1 2
ProfileDataBB3 >
(BB> ?
)BB? @
.BB@ A(
CentroDeAtencionSeleccionadoBBA ]
.BB] ^
IdBB^ `
;BB` a
ViewBagCC 
.CC &
idTipoActorPersonaJuridicaCC .
=CC/ 0
ActorSettingsCC1 >
.CC> ?
DefaultCC? F
.CCF G&
IdTipoActorPersonaJuridicaCCG a
;CCa b
ViewBagDD 
.DD %
IdTipoActorPersonaNaturalDD -
=DD. /
ActorSettingsDD0 =
.DD= >
DefaultDD> E
.DDE F%
IdTipoActorPersonaNaturalDDF _
;DD_ `
ViewBagEE 
.EE 
idProveedorGenericoEE '
=EE( )
ActorSettingsEE* 7
.EE7 8
DefaultEE8 ?
.EE? @
idProveedorGenericoEE@ S
;EES T
ViewBagFF 
.FF /
#idTipoPersonaSeleccionadaPorDefectoFF 7
=FF8 9
ActorSettingsFF: G
.FFG H
DefaultFFH O
.FFO P/
#IdTipoPersonaSeleccionadaPorDefectoFFP s
;FFs t
ViewBagGG 
.GG <
0idTipoDocumentoSeleccionadaConTipoPersonaNaturalGG D
=GGE F
ActorSettingsGGG T
.GGT U
DefaultGGU \
.GG\ ]=
0IdTipoDocumentoSeleccionadaConTipoPersonaNatural	GG] ç
;
GGç é
ViewBagHH 
.HH =
1idTipoDocumentoSeleccionadaConTipoPersonaJuridicaHH E
=HHF G
ActorSettingsHHH U
.HHU V
DefaultHHV ]
.HH] ^>
1IdTipoDocumentoSeleccionadaConTipoPersonaJuridica	HH^ è
;
HHè ê
ViewBagII 
.II '
idTipoDocumentoIdentidadDniII /
=II0 1
ActorSettingsII2 ?
.II? @
DefaultII@ G
.IIG H'
IdTipoDocumentoIdentidadDniIIH c
;IIc d
ViewBagJJ 
.JJ '
idTipoDocumentoIdentidadRucJJ /
=JJ0 1
ActorSettingsJJ2 ?
.JJ? @
DefaultJJ@ G
.JJG H'
IdTipoDocumentoIdentidadRucJJH c
;JJc d
ViewBagKK 
.KK *
idUbigeoSeleccionadoPorDefectoKK 2
=KK3 4
ActorSettingsKK5 B
.KKB C
DefaultKKC J
.KKJ K5
)idUbigeoSeleccionadoPorDefectoEnProveedorKKK t
;KKt u
ViewBagLL 
.LL "
idUbigeoNoEspecificadoLL *
=LL+ ,
ActorSettingsLL- :
.LL: ;
DefaultLL; B
.LLB C"
idUbigeoNoEspecificadoLLC Y
;LLY Z
ViewBagMM 
.MM *
idDocumentoNotaAlamacenInternaMM 2
=MM3 4
MaestroSettingsMM5 D
.MMD E
DefaultMME L
.MML M9
-IdDetalleMaestroComprobanteNotaAlmacenInternaMMM z
;MMz {
ViewBagNN 
.NN 
direccionSedeNN !
=NN" #
(NN$ %
ObtenerSedeNN% 0
(NN0 1
)NN1 2
.NN2 3
DomicilioFiscalNN3 B
!=NNC E
nullNNF J
)NNJ K
?NNL M
ObtenerSedeNNN Y
(NNY Z
)NNZ [
.NN[ \
DomicilioFiscalNN\ k
.NNk l
DetalleNNl s
:NNt u
$strNNv y
;NNy z
ViewBagOO 
.OO 
idUbigeoSedeOO  
=OO! "
(OO# $
ObtenerSedeOO$ /
(OO/ 0
)OO0 1
.OO1 2
DomicilioFiscalOO2 A
!=OOB D
nullOOE I
)OOI J
?OOK L
ObtenerSedeOOM X
(OOX Y
)OOY Z
.OOZ [
DomicilioFiscalOO[ j
.OOj k
UbigeoOOk q
.OOq r
IdOOr t
:OOu v
$numOOw x
;OOx y
ViewBagPP 
.PP )
idModalidadTrasladoPorDefectoPP 1
=PP2 3
MaestroSettingsPP4 C
.PPC D
DefaultPPD K
.PPK LA
4IdDetalleMaestroModalidadDeTrasladoTransportePublico	PPL Ä
;
PPÄ Å
ViewBagQQ 
.QQ &
idMotivoTrasladoPorDefectoQQ .
=QQ/ 0
MaestroSettingsQQ1 @
.QQ@ A
DefaultQQA H
.QQH I5
)IdDetalleMaestroMotivoDeTrasladoPorCompraQQI r
;QQr s
ViewBagRR 
.RR %
idTransportistaPorDefectoRR -
=RR. /
AplicacionSettingsRR0 B
.RRB C
DefaultRRC J
.RRJ K9
-IdTransportistaPorDefectoEnSalidaDeMercaderiaRRK x
;RRx y
ViewBagSS 
.SS )
idTipoDeComprobantePorDefectoSS 1
=SS2 3
AplicacionSettingsSS4 F
.SSF G
DefaultSSG N
.SSN O>
1IdTipoDeComprobantePorDefectoEnSalidaDeMercaderia	SSO Ä
;
SSÄ Å
ViewBagTT 
.TT 
	WCPScriptTT 
=TT 
WebClientPrintTT  .
.TT. /
CreateScriptTT/ ;
(TT; <
UrlUU 
.UU 
ActionUU 
(UU 
$strUU '
,UU' (
$strUU) <
,UU< =
nullUU> B
,UUB C
HttpContextUUD O
.UUO P
RequestUUP W
.UUW X
UrlUUX [
.UU[ \
SchemeUU\ b
)UUb c
,UUc d
UrlVV 
.VV 
ActionVV 
(VV 
$strVV "
,VV" #
$strVV$ -
,VV- .
nullVV/ 3
,VV3 4
HttpContextVV5 @
.VV@ A
RequestVVA H
.VVH I
UrlVVI L
.VVL M
SchemeVVM S
)VVS T
,VVT U
HttpContextVVV a
.VVa b
SessionVVb i
.VVi j
	SessionIDVVj s
)VVs t
;VVt u
returnWW 
ViewWW 
(WW 
)WW 
;WW 
}XX 	
publicZZ 
ActionResultZZ 
TrasladosInternosZZ -
(ZZ- .
)ZZ. /
{[[ 	
List\\ 
<\\ 
string\\ 
>\\ 
fechas\\ 
=\\  !
operacionLogica\\" 1
.\\1 23
'ObtenerFechaIncioyFinParaReporteAlmacen\\2 Y
(\\Y Z
)\\Z [
;\\[ \
ViewBag]] 
.]] 
fechaInicio]] 
=]]  !
fechas]]" (
[]]( )
$num]]) *
]]]* +
;]]+ ,
ViewBag^^ 
.^^ 
fechaFin^^ 
=^^ 
fechas^^ %
[^^% &
$num^^& '
]^^' (
;^^( )
ViewBag__ 
.__ "
NombreEmpleadoDeSesion__ *
=__+ ,
ProfileData__- 8
(__8 9
)__9 :
.__: ;
Empleado__; C
.__C D
NombresYApellidos__D U
;__U V
ViewBag`` 
.`` "
NombreCentroDeAtencion`` *
=``+ ,
ProfileData``- 8
(``8 9
)``9 :
.``: ;(
CentroDeAtencionSeleccionado``; W
.``W X
Nombre``X ^
;``^ _
ViewBagaa 
.aa *
idCentroDeAtencionSeleccionadoaa 2
=aa3 4
ProfileDataaa5 @
(aa@ A
)aaA B
.aaB C(
CentroDeAtencionSeleccionadoaaC _
.aa_ `
Idaa` b
;aab c
ViewBagbb 
.bb &
mostrarBuscadorCodigoBarrabb .
=bb/ 0
AplicacionSettingsbb1 C
.bbC D
DefaultbbD K
.bbK L:
.MostrarBuscadorCodigoBarraEnTrasladoMercaderiabbL z
;bbz {
ViewBagcc 
.cc %
modoDeSeleccionDeConceptocc -
=cc. /
AplicacionSettingscc0 B
.ccB C
DefaultccC J
.ccJ KC
6ModoDeSeleccionDeConceptoDeNegocioEnTrasladoMercaderia	ccK Å
;
ccÅ Ç
ViewBagdd 
.dd $
modoSeleccionTipoFamiliadd ,
=dd- .
AplicacionSettingsdd/ A
.ddA B
DefaultddB I
.ddI J<
0ModoDeSeleccionTipoDeFamiliaEnTrasladoMercaderiaddJ z
;ddz {
ViewBagee 
.ee %
numeroDecimalesEnCantidadee -
=ee. /
AplicacionSettingsee0 B
.eeB C
DefaulteeC J
.eeJ K%
NumeroDecimalesEnCantidadeeK d
;eed e
ViewBagff 
.ff *
minimoCaracteresBuscarConceptoff 2
=ff3 4
AplicacionSettingsff5 G
.ffG H
DefaultffH O
.ffO P:
.MinimoDeCaracteresParaBuscarEnSelectorConceptoffP ~
;ff~ 
ViewBaggg 
.gg (
tiempoEsperaBusquedaSelectorgg 0
=gg1 2
AplicacionSettingsgg3 E
.ggE F
DefaultggF M
.ggM N<
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidadggN ~
;gg~ 
ViewBaghh 
.hh 3
'salidaBienesSujetasADisponibilidadStockhh ;
=hh< =
!hh> ?
ProfileDatahh? J
(hhJ K
)hhK L
.hhL M2
&CentroAtencionQueTieneElStockIntegradahhM s
.hhs t!
SalidaBienesSinStock	hht à
;
hhà â
ViewBagii 
.ii '
informacionSelectorConceptoii /
=ii0 1
(ii2 3
intii3 6
)ii6 7'
InformacionSelectorConceptoii7 R
.iiR S
NombreiiS Y
;iiY Z
ViewBagkk 
.kk 
	WCPScriptkk 
=kk 
WebClientPrintkk  .
.kk. /
CreateScriptkk/ ;
(kk; <
Urlll 
.ll 
Actionll 
(ll 
$strll '
,ll' (
$strll) <
,ll< =
nullll> B
,llB C
HttpContextllD O
.llO P
RequestllP W
.llW X
UrlllX [
.ll[ \
Schemell\ b
)llb c
,llc d
Urlmm 
.mm 
Actionmm 
(mm 
$strmm "
,mm" #
$strmm$ -
,mm- .
nullmm/ 3
,mm3 4
HttpContextmm5 @
.mm@ A
RequestmmA H
.mmH I
UrlmmI L
.mmL M
SchememmM S
)mmS T
,mmT U
HttpContextmmV a
.mma b
Sessionmmb i
.mmi j
	SessionIDmmj s
)mms t
;mmt u
returnnn 
Viewnn 
(nn 
)nn 
;nn 
}oo 	
publicqq 
ActionResultqq  
MovimientosDeAlmacenqq 0
(qq0 1
)qq1 2
{rr 	
Listss 
<ss 
stringss 
>ss 
fechasss 
=ss  !
operacionLogicass" 1
.ss1 23
'ObtenerFechaIncioyFinParaReporteAlmacenss2 Y
(ssY Z
)ssZ [
;ss[ \
ViewBagtt 
.tt 
FechaIniciott 
=tt  !
fechastt" (
[tt( )
$numtt) *
]tt* +
;tt+ ,
ViewBaguu 
.uu 
FechaFinuu 
=uu 
fechasuu %
[uu% &
$numuu& '
]uu' (
;uu( )
ViewBagvv 
.vv '
IdEstablecimientoPorDefectovv /
=vv0 1
ProfileDatavv2 =
(vv= >
)vv> ?
.vv? @(
CentroDeAtencionSeleccionadovv@ \
.vv\ ]$
EstablecimientoComercialvv] u
.vvu v
Idvvv x
;vvx y
ViewBagww 
.ww (
IdCentroDeAtencionPorDefectoww 0
=ww1 2
ProfileDataww3 >
(ww> ?
)ww? @
.ww@ A(
CentroDeAtencionSeleccionadowwA ]
.ww] ^
Idww^ `
;ww` a
ViewBagxx 
.xx *
TieneRolAdministradorDeNegocioxx 2
=xx3 4
ProfileDataxx5 @
(xx@ A
)xxA B
.xxB C
EmpleadoxxC K
.xxK L
TieneRolxxL T
(xxT U
ActorSettingsxxU b
.xxb c
Defaultxxc j
.xxj k(
idRolAdministradorDeNegocio	xxk Ü
)
xxÜ á
;
xxá à
ViewBagzz 
.zz 
	WCPScriptzz 
=zz 
WebClientPrintzz  .
.zz. /
CreateScriptzz/ ;
(zz; <
Url{{ 
.{{ 
Action{{ 
({{ 
$str{{ '
,{{' (
$str{{) <
,{{< =
null{{> B
,{{B C
HttpContext{{D O
.{{O P
Request{{P W
.{{W X
Url{{X [
.{{[ \
Scheme{{\ b
){{b c
,{{c d
Url|| 
.|| 
Action|| 
(|| 
$str|| "
,||" #
$str||$ -
,||- .
null||/ 3
,||3 4
HttpContext||5 @
.||@ A
Request||A H
.||H I
Url||I L
.||L M
Scheme||M S
)||S T
,||T U
HttpContext||V a
.||a b
Session||b i
.||i j
	SessionID||j s
)||s t
;||t u
return}} 
View}} 
(}} 
)}} 
;}} 
}~~ 	
public
ÅÅ 
ActionResult
ÅÅ !
InventarioHistorico
ÅÅ /
(
ÅÅ/ 0
)
ÅÅ0 1
{
ÇÇ 	
return
ÉÉ 
View
ÉÉ 
(
ÉÉ 
)
ÉÉ 
;
ÉÉ 
}
ÑÑ 	
[
ÖÖ 	
	Authorize
ÖÖ	 
(
ÖÖ 
Roles
ÖÖ 
=
ÖÖ 
$str
ÖÖ D
)
ÖÖD E
]
ÖÖE F
public
ää 

JsonResult
ää %
ObtenerOrdenesDeAlmacen
ää 1
(
ää1 2
bool
ää2 6

porRecibir
ää7 A
,
ääA B
int
ääC F
[
ääF G
]
ääG H"
idsCentrosDeAtencion
ääI ]
,
ää] ^
string
ää_ e
desde
ääf k
,
ääk l
string
ääm s
hasta
äät y
)
ääy z
{
ãã 	
DateTime
çç 

fechaDesde
çç 
=
çç  !
DateTimeUtil
çç" .
.
çç. /E
7ObtenerFechaDesdeConPrecisionDeHorasMinutosMilisegundos
çç/ f
(
ççf g
desde
ççg l
)
ççl m
;
ççm n
DateTime
éé 

fechaHasta
éé 
=
éé  !
DateTimeUtil
éé" .
.
éé. /E
7ObtenerFechaHastaConPrecisionDeHorasMinutosMilisegundos
éé/ f
(
ééf g
hasta
éég l
)
éél m
;
éém n
try
èè 
{
êê 
List
ëë 
<
ëë $
Orden_Recibir_Entregar
ëë +
>
ëë+ ,
	resultado
ëë- 6
=
ëë7 8

porRecibir
ëë9 C
?
ëëD E
operacionLogica
ëëF U
.
ëëU V/
!ObtenerOrdenesDeAlmacenPorRecibir
ëëV w
(
ëëw x
ProfileDataëëx É
(ëëÉ Ñ
)ëëÑ Ö
.ëëÖ Ü
EmpleadoëëÜ é
.ëëé è
Idëëè ë
,ëëë í$
idsCentrosDeAtencionëëì ß
.ëëß ®
ToListëë® Æ
(ëëÆ Ø
)ëëØ ∞
,ëë∞ ±

fechaDesdeëë≤ º
,ëëº Ω

fechaHastaëëæ »
)ëë» …
:ëë  À
operacionLogicaëëÃ €
.ëë€ ‹2
"ObtenerOrdenesDeAlmacenPorEntregarëë‹ ˛
(ëë˛ ˇ
ProfileDataëëˇ ä
(ëëä ã
)ëëã å
.ëëå ç
Empleadoëëç ï
.ëëï ñ
Idëëñ ò
,ëëò ô$
idsCentrosDeAtencionëëö Æ
.ëëÆ Ø
ToListëëØ µ
(ëëµ ∂
)ëë∂ ∑
,ëë∑ ∏

fechaDesdeëëπ √
,ëë√ ƒ

fechaHastaëë≈ œ
)ëëœ –
;ëë– —
return
íí 
Json
íí 
(
íí 
	resultado
íí %
)
íí% &
;
íí& '
}
ìì 
catch
îî 
(
îî 
	Exception
îî 
e
îî 
)
îî 
{
ïï 
return
ññ 
Json
ññ 
(
ññ 
Util
ññ  
.
ññ  !
	ErrorJson
ññ! *
(
ññ* +
e
ññ+ ,
)
ññ, -
)
ññ- .
;
ññ. /
}
óó 
}
òò 	
public
öö 

JsonResult
öö #
ObtenerOrdenDeAlmacen
öö /
(
öö/ 0
long
öö0 4
idOrdenDeAlmacen
öö5 E
,
ööE F
int
ööG J
formato
ööK R
)
ööR S
{
õõ 	
try
úú 
{
ùù %
OrdenDeAlmacenViewModel
ûû '
	respuesta
ûû( 1
=
ûû2 3
new
ûû4 7%
OrdenDeAlmacenViewModel
ûû8 O
(
ûûO P
)
ûûP Q
;
ûûQ R(
OrdenDeMovimientoDeAlmacen
üü *(
ordenDeMovimientoDeAlmacen
üü+ E
=
üüF G
operacionLogica
üüH W
.
üüW X/
!ObtenerOrdenDeMovimientoDeAlmacen
üüX y
(
üüy z
idOrdenDeAlmacenüüz ä
)üüä ã
;üüã å
var
†† 
sede
†† 
=
†† 
ObtenerSede
†† &
(
††& '
)
††' (
;
††( )
string
°° (
htmlStringDeOrdenDeAlmacen
°° 1
=
°°2 3#
CoreHtmlStringBuilder
°°4 I
.
°°I J
ObtenerHtmlString
°°J [
(
°°[ \(
ordenDeMovimientoDeAlmacen
°°\ v
,
°°v w
(
°°x y
FormatoImpresion°°y â
)°°â ä
formato°°ä ë
,°°ë í
null°°ì ó
,°°ó ò
sede°°ô ù
,°°ù û
this°°ü £
)°°£ §
;°°§ •
	respuesta
££ 
=
££ 
new
££ %
OrdenDeAlmacenViewModel
££  7
(
££7 8(
ordenDeMovimientoDeAlmacen
££8 R
.
££R S
Id
££S U
,
££U V(
htmlStringDeOrdenDeAlmacen
££W q
)
££q r
;
££r s
return
•• 
Json
•• 
(
•• 
	respuesta
•• %
)
••% &
;
••& '
}
¶¶ 
catch
ßß 
(
ßß 
	Exception
ßß 
e
ßß 
)
ßß 
{
®® 
return
©© 
Json
©© 
(
©© 
Util
©©  
.
©©  !
	ErrorJson
©©! *
(
©©* +
e
©©+ ,
)
©©, -
)
©©- .
;
©©. /
}
™™ 
}
´´ 	
public
≠≠ 

JsonResult
≠≠ :
,ObtenerOrdenDeAlmacenParaMovimientoDeAlmacen
≠≠ F
(
≠≠F G
long
≠≠G K
idOrdenDeAlmacen
≠≠L \
)
≠≠\ ]
{
ÆÆ 	
try
ØØ 
{
∞∞ (
OrdenDeMovimientoDeAlmacen
±± *
ordenDeAlmacen
±±+ 9
=
±±: ;
operacionLogica
±±< K
.
±±K L/
!ObtenerOrdenDeMovimientoDeAlmacen
±±L m
(
±±m n
idOrdenDeAlmacen
±±n ~
)
±±~ 
;±± Ä<
.OrdenDeAlmacenParaMovimientoDeAlmacenViewModel
≤≤ >%
ordenDeAlmacenViewModel
≤≤? V
=
≤≤W X
new
≤≤Y \=
.OrdenDeAlmacenParaMovimientoDeAlmacenViewModel≤≤] ã
(≤≤ã å
ordenDeAlmacen≤≤å ö
)≤≤ö õ
;≤≤õ ú
return
≥≥ 
Json
≥≥ 
(
≥≥ %
ordenDeAlmacenViewModel
≥≥ 3
)
≥≥3 4
;
≥≥4 5
}
¥¥ 
catch
µµ 
(
µµ 
	Exception
µµ 
e
µµ 
)
µµ 
{
∂∂ 
return
∑∑ 
Json
∑∑ 
(
∑∑ 
Util
∑∑  
.
∑∑  !
	ErrorJson
∑∑! *
(
∑∑* +
e
∑∑+ ,
)
∑∑, -
)
∑∑- .
;
∑∑. /
}
∏∏ 
}
ππ 	
public
ªª 

JsonResult
ªª $
ObtenerStockDeProducto
ªª 0
(
ªª0 1
int
ªª1 4

idProducto
ªª5 ?
)
ªª? @
{
ºº 	
try
ΩΩ 
{
ææ 
return
øø 
Json
øø 
(
øø 
operacionLogica
øø +
.
øø+ ,$
ObtenerStockDeProducto
øø, B
(
øøB C

idProducto
øøC M
,
øøM N
ProfileData
øøO Z
(
øøZ [
)
øø[ \
.
øø\ ]7
(IdCentroAtencionQueTieneElStockIntegradaøø] Ö
)øøÖ Ü
)øøÜ á
;øøá à
}
¿¿ 
catch
¡¡ 
(
¡¡ 
	Exception
¡¡ 
e
¡¡ 
)
¡¡ 
{
¬¬ 
return
√√ 
Json
√√ 
(
√√ 
Util
√√  
.
√√  !
	ErrorJson
√√! *
(
√√* +
e
√√+ ,
)
√√, -
)
√√- .
;
√√. /
}
ƒƒ 
}
≈≈ 	
public
ﬁﬁ 
List
ﬁﬁ 
<
ﬁﬁ !
Detalle_transaccion
ﬁﬁ '
>
ﬁﬁ' (2
$ConstruirDetalleMovimientoMercaderia
ﬁﬁ) M
(
ﬁﬁM N2
$RegistroMovimientoDeAlmacenViewModel
ﬁﬁN r 
ingresoMercaderiaﬁﬁs Ñ
)ﬁﬁÑ Ö
{
ﬂﬂ 	
List
‡‡ 
<
‡‡ !
Detalle_transaccion
‡‡ $
>
‡‡$ %!
detallesConstruidos
‡‡& 9
=
‡‡: ;
new
‡‡< ?
List
‡‡@ D
<
‡‡D E!
Detalle_transaccion
‡‡E X
>
‡‡X Y
(
‡‡Y Z
)
‡‡Z [
;
‡‡[ \
foreach
·· 
(
·· 
var
·· 
item
·· 
in
··  
ingresoMercaderia
··! 2
.
··2 3
Detalles
··3 ;
)
··; <
{
‚‚ !
detallesConstruidos
„„ #
.
„„# $
Add
„„$ '
(
„„' (
new
„„( +!
Detalle_transaccion
„„, ?
(
„„? @
item
„„@ D
.
„„D E!
IngresoSalidaActual
„„E X
,
„„X Y
item
„„Z ^
.
„„^ _

IdProducto
„„_ i
,
„„i j
$str
„„k m
,
„„m n
$num
„„o p
,
„„p q
$num
„„r s
,
„„s t
null
„„u y
,
„„y z
$num
„„{ |
,
„„| }
null„„~ Ç
,„„Ç É
null„„Ñ à
,„„à â
$num„„ä ã
,„„ã å
$num„„ç é
,„„é è
$num„„ê ë
,„„ë í
item„„ì ó
.„„ó ò
Lote„„ò ú
,„„ú ù
null„„û ¢
,„„¢ £
null„„§ ®
)„„® ©
)„„© ™
;„„™ ´
}
‰‰ 
return
ÂÂ !
detallesConstruidos
ÂÂ &
;
ÂÂ& '
}
ÊÊ 	
[
ËË 	
AllowAnonymous
ËË	 
]
ËË 
public
ÈÈ 
async
ÈÈ 
Task
ÈÈ 
	PrintFile
ÈÈ #
(
ÈÈ# $
long
ÈÈ$ (
idMovimiento
ÈÈ) 5
)
ÈÈ5 6
{
ÍÍ 	!
MovimientoDeAlmacen
ÎÎ !
movimientoDeAlmacen
ÎÎ  3
=
ÎÎ4 5
operacionLogica
ÎÎ6 E
.
ÎÎE F+
ObtenerMovimientoDeMercaderia
ÎÎF c
(
ÎÎc d
idMovimiento
ÎÎd p
)
ÎÎp q
;
ÎÎq r
var
ÏÏ 
sede
ÏÏ 
=
ÏÏ 
ObtenerSede
ÏÏ "
(
ÏÏ" #
)
ÏÏ# $
;
ÏÏ$ %
var
ÌÌ 
proveedores
ÌÌ 
=
ÌÌ  
actorNegocioLogica
ÌÌ 0
.
ÌÌ0 1(
ObtenerProveedoresVigentes
ÌÌ1 K
(
ÌÌK L
)
ÌÌL M
;
ÌÌM N
var
ÓÓ #
modalidadesDeTraslado
ÓÓ %
=
ÓÓ& '
await
ÓÓ( -
maestroLogica
ÓÓ. ;
.
ÓÓ; <-
ObtenerModalidadesTrasladoAsync
ÓÓ< [
(
ÓÓ[ \
)
ÓÓ\ ]
;
ÓÓ] ^
var
ÔÔ 
motivosDeTraslado
ÔÔ !
=
ÔÔ" #
await
ÔÔ$ )
maestroLogica
ÔÔ* 7
.
ÔÔ7 8)
ObtenerMotivosTrasladoAsync
ÔÔ8 S
(
ÔÔS T
)
ÔÔT U
;
ÔÔU V
string
 
	QrContent
 
=
 *
facturacionElectronicaLogica
 ;
.
; <
	ObtenerQR
< E
(
E F!
movimientoDeAlmacen
F Y
,
Y Z
sede
[ _
)
_ `
;
` a
byte
ÒÒ 
[
ÒÒ 
]
ÒÒ 
QrBytes
ÒÒ 
=
ÒÒ 
(
ÒÒ !
movimientoDeAlmacen
ÒÒ 1
.
ÒÒ1 2
IdTipoComprobante
ÒÒ2 C
==
ÒÒD F
MaestroSettings
ÒÒG V
.
ÒÒV W
Default
ÒÒW ^
.
ÒÒ^ _A
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitenteÒÒ_ ë
)ÒÒë í
?ÒÒì î
barCodeUtilÒÒï †
.ÒÒ† °
ObtenerCodigoQRÒÒ° ∞
(ÒÒ∞ ±#
movimientoDeAlmacenÒÒ± ƒ
.ÒÒƒ ≈
InformacionÒÒ≈ –
)ÒÒ– —
:ÒÒ“ ”
barCodeUtilÒÒ‘ ﬂ
.ÒÒﬂ ‡
ObtenerCodigoQRÒÒ‡ Ô
(ÒÒÔ 
	QrContentÒÒ ˘
)ÒÒ˘ ˙
;ÒÒ˙ ˚
var
ÚÚ 
PDFventa
ÚÚ 
=
ÚÚ +
ObtenerPdfMovimientoDeAlmacen
ÚÚ 8
(
ÚÚ8 9!
movimientoDeAlmacen
ÚÚ9 L
,
ÚÚL M
sede
ÚÚN R
,
ÚÚR S
QrBytes
ÚÚT [
,
ÚÚ[ \
(
ÚÚ] ^
FormatoImpresion
ÚÚ^ n
)
ÚÚn o
VentasSettings
ÚÚo }
.
ÚÚ} ~
DefaultÚÚ~ Ö
.ÚÚÖ Ü*
formatoImpresionPorDefectoÚÚÜ †
,ÚÚ† °
proveedoresÚÚ¢ ≠
,ÚÚ≠ Æ%
modalidadesDeTrasladoÚÚØ ƒ
,ÚÚƒ ≈!
motivosDeTrasladoÚÚ∆ ◊
)ÚÚ◊ ÿ
;ÚÚÿ Ÿ
PrintFilePDF
ÛÛ 
file
ÛÛ 
=
ÛÛ 
null
ÛÛ  $
;
ÛÛ$ %
file
ıı 
=
ıı 
new
ıı 
PrintFilePDF
ıı #
(
ıı# $
PDFventa
ıı$ ,
.
ıı, -
Save
ıı- 1
(
ıı1 2
)
ıı2 3
,
ıı3 4
idMovimiento
ıı5 A
+
ııB C
$str
ııD J
)
ııJ K
;
ııK L
file
ˆˆ 
.
ˆˆ 
PrintRotation
ˆˆ 
=
ˆˆ  
PrintRotation
ˆˆ! .
.
ˆˆ. /
None
ˆˆ/ 3
;
ˆˆ3 4
ClientPrintJob
˜˜ 
cpj
˜˜ 
=
˜˜  
new
˜˜! $
ClientPrintJob
˜˜% 3
(
˜˜3 4
)
˜˜4 5
;
˜˜5 6
cpj
¯¯ 
.
¯¯ 
	PrintFile
¯¯ 
=
¯¯ 
file
¯¯  
;
¯¯  !
cpj
˘˘ 
.
˘˘ 
	PrintFile
˘˘ 
.
˘˘ 
Copies
˘˘  
=
˘˘! " 
AplicacionSettings
˘˘# 5
.
˘˘5 6
Default
˘˘6 =
.
˘˘= >3
%NumeroCopiasAImprimirComprobanteVenta
˘˘> c
;
˘˘c d
cpj
˙˙ 
.
˙˙ 
ClientPrinter
˙˙ 
=
˙˙ 
new
˙˙  #
DefaultPrinter
˙˙$ 2
(
˙˙2 3
)
˙˙3 4
;
˙˙4 5
System
¸¸ 
.
¸¸ 
Web
¸¸ 
.
¸¸ 
HttpContext
¸¸ "
.
¸¸" #
Current
¸¸# *
.
¸¸* +
Response
¸¸+ 3
.
¸¸3 4
ContentType
¸¸4 ?
=
¸¸@ A
$str
¸¸B \
;
¸¸\ ]
System
˝˝ 
.
˝˝ 
Web
˝˝ 
.
˝˝ 
HttpContext
˝˝ "
.
˝˝" #
Current
˝˝# *
.
˝˝* +
Response
˝˝+ 3
.
˝˝3 4
BinaryWrite
˝˝4 ?
(
˝˝? @
cpj
˝˝@ C
.
˝˝C D

GetContent
˝˝D N
(
˝˝N O
)
˝˝O P
)
˝˝P Q
;
˝˝Q R
System
˛˛ 
.
˛˛ 
Web
˛˛ 
.
˛˛ 
HttpContext
˛˛ "
.
˛˛" #
Current
˛˛# *
.
˛˛* +
Response
˛˛+ 3
.
˛˛3 4
End
˛˛4 7
(
˛˛7 8
)
˛˛8 9
;
˛˛9 :
}
ˇˇ 	
public
ÅÅ 
PdfDocument
ÅÅ &
ObtenerPdfOrdenDeAlmacen
ÅÅ 3
(
ÅÅ3 4(
OrdenDeMovimientoDeAlmacen
ÅÅ4 N
ordenDeAlmacen
ÅÅO ]
,
ÅÅ] ^7
(EstablecimientoComercialExtendidoConLogoÅÅ_ á
sedeÅÅà å
,ÅÅå ç
byteÅÅé í
[ÅÅí ì
]ÅÅì î
qrBytesÅÅï ú
,ÅÅú ù 
FormatoImpresionÅÅû Æ
formatoÅÅØ ∂
)ÅÅ∂ ∑
{
ÇÇ 	
string
ÉÉ 
result
ÉÉ 
=
ÉÉ #
CoreHtmlStringBuilder
ÉÉ 1
.
ÉÉ1 2
ObtenerHtmlString
ÉÉ2 C
(
ÉÉC D
ordenDeAlmacen
ÉÉD R
,
ÉÉR S
formato
ÉÉT [
,
ÉÉ[ \
qrBytes
ÉÉ] d
,
ÉÉd e
sede
ÉÉf j
,
ÉÉj k
this
ÉÉl p
)
ÉÉp q
;
ÉÉq r
var
ÑÑ 
Renderer
ÑÑ 
=
ÑÑ 
new
ÑÑ 
	SelectPdf
ÑÑ (
.
ÑÑ( )
	HtmlToPdf
ÑÑ) 2
(
ÑÑ2 3
)
ÑÑ3 4
;
ÑÑ4 5
if
ÜÜ 
(
ÜÜ 
formato
ÜÜ 
==
ÜÜ 
FormatoImpresion
ÜÜ +
.
ÜÜ+ ,
_80mm
ÜÜ, 1
)
ÜÜ1 2
{
áá 
Renderer
àà 
.
àà 
Options
àà  
.
àà  !
AutoFitWidth
àà! -
=
àà. /"
HtmlToPdfPageFitMode
àà0 D
.
ààD E
NoAdjustment
ààE Q
;
ààQ R
Renderer
ââ 
.
ââ 
Options
ââ  
.
ââ  !
AutoFitHeight
ââ! .
=
ââ/ 0"
HtmlToPdfPageFitMode
ââ1 E
.
ââE F
NoAdjustment
ââF R
;
ââR S
Renderer
ää 
.
ää 
Options
ää  
.
ää  !
WebPageWidth
ää! -
=
ää. /
$num
ää0 4
;
ää4 5
Renderer
ãã 
.
ãã 
Options
ãã  
.
ãã  !
WebPageHeight
ãã! .
=
ãã/ 0
$num
ãã1 2
;
ãã2 3
Renderer
åå 
.
åå 
Options
åå  
.
åå  !
WebPageFixedSize
åå! 1
=
åå2 3
false
åå4 9
;
åå9 :
Renderer
çç 
.
çç 
Options
çç  
.
çç  !
PdfPageSize
çç! ,
=
çç- .
PdfPageSize
çç/ :
.
çç: ;
Custom
çç; A
;
ççA B
Renderer
éé 
.
éé 
Options
éé  
.
éé  !
PdfPageCustomSize
éé! 2
=
éé3 4
new
éé5 8
SizeF
éé9 >
(
éé> ?
$num
éé? B
,
ééB C
$num
ééD G
)
ééG H
;
ééH I
}
èè 
else
êê 
if
êê 
(
êê 
formato
êê 
==
êê 
FormatoImpresion
êê  0
.
êê0 1
A4
êê1 3
)
êê3 4
{
ëë 
Renderer
íí 
.
íí 
Options
íí  
.
íí  !
PdfPageSize
íí! ,
=
íí- .
PdfPageSize
íí/ :
.
íí: ;
A4
íí; =
;
íí= >
}
ìì 
else
îî 
if
îî 
(
îî 
formato
îî 
==
îî 
FormatoImpresion
îî  0
.
îî0 1
_56mm
îî1 6
)
îî6 7
{
ïï 
Renderer
ññ 
.
ññ 
Options
ññ  
.
ññ  !
AutoFitWidth
ññ! -
=
ññ. /"
HtmlToPdfPageFitMode
ññ0 D
.
ññD E
NoAdjustment
ññE Q
;
ññQ R
Renderer
óó 
.
óó 
Options
óó  
.
óó  !
AutoFitHeight
óó! .
=
óó/ 0"
HtmlToPdfPageFitMode
óó1 E
.
óóE F
AutoFit
óóF M
;
óóM N
Renderer
òò 
.
òò 
Options
òò  
.
òò  !
WebPageWidth
òò! -
=
òò. /
$num
òò0 3
;
òò3 4
Renderer
ôô 
.
ôô 
Options
ôô  
.
ôô  !
WebPageHeight
ôô! .
=
ôô/ 0
$num
ôô1 2
;
ôô2 3
Renderer
öö 
.
öö 
Options
öö  
.
öö  !
WebPageFixedSize
öö! 1
=
öö2 3
false
öö4 9
;
öö9 :
Renderer
õõ 
.
õõ 
Options
õõ  
.
õõ  !
PdfPageSize
õõ! ,
=
õõ- .
PdfPageSize
õõ/ :
.
õõ: ;
Custom
õõ; A
;
õõA B
Renderer
úú 
.
úú 
Options
úú  
.
úú  !
PdfPageCustomSize
úú! 2
=
úú3 4
new
úú5 8
SizeF
úú9 >
(
úú> ?
$num
úú? B
,
úúB C
$num
úúD G
)
úúG H
;
úúH I
}
ùù 
Renderer
ûû 
.
ûû 
Options
ûû 
.
ûû 
MarginBottom
ûû )
=
ûû* +
$num
ûû, -
;
ûû- .
Renderer
üü 
.
üü 
Options
üü 
.
üü 
	MarginTop
üü &
=
üü' (
$num
üü) *
;
üü* +
Renderer
†† 
.
†† 
Options
†† 
.
†† 

MarginLeft
†† '
=
††( )
$num
††* +
;
††+ ,
Renderer
°° 
.
°° 
Options
°° 
.
°° 
MarginRight
°° (
=
°°) *
$num
°°+ ,
;
°°, -
Renderer
¢¢ 
.
¢¢ 
Options
¢¢ 
.
¢¢ 
DisplayHeader
¢¢ *
=
¢¢+ ,
false
¢¢- 2
;
¢¢2 3
Renderer
££ 
.
££ 
Options
££ 
.
££ $
JpegCompressionEnabled
££ 3
=
££4 5
false
££6 ;
;
££; <
return
§§ 
Renderer
§§ 
.
§§ 
ConvertHtmlString
§§ -
(
§§- .
result
§§. 4
)
§§4 5
;
§§5 6
}
•• 	
public
ßß 

JsonResult
ßß 5
'EnviarCorreoElectronicoDeOrdenDeAlmacen
ßß A
(
ßßA B
long
ßßB F
idOrden
ßßG N
,
ßßN O
int
ßßP S
formato
ßßT [
,
ßß[ \
List
ßß] a
<
ßßa b
string
ßßb h
>
ßßh i!
correosElectronicos
ßßj }
)
ßß} ~
{
®® 	
try
©© 
{
™™ (
OrdenDeMovimientoDeAlmacen
´´ *
ordenDeAlmacen
´´+ 9
=
´´: ;
operacionLogica
´´< K
.
´´K L/
!ObtenerOrdenDeMovimientoDeAlmacen
´´L m
(
´´m n
idOrden
´´n u
)
´´u v
;
´´v w
var
¨¨ 
sede
¨¨ 
=
¨¨ 
ObtenerSede
¨¨ &
(
¨¨& '
)
¨¨' (
;
¨¨( )
PdfDocument
≠≠ 
pdfMovimiento
≠≠ )
=
≠≠* +&
ObtenerPdfOrdenDeAlmacen
≠≠, D
(
≠≠D E
ordenDeAlmacen
≠≠E S
,
≠≠S T
sede
≠≠U Y
,
≠≠Y Z
null
≠≠[ _
,
≠≠_ `
(
≠≠a b
FormatoImpresion
≠≠b r
)
≠≠r s
formato
≠≠s z
)
≠≠z {
;
≠≠{ |
string
ÆÆ 
asunto
ÆÆ 
=
ÆÆ 
operacionLogica
ÆÆ  /
.
ÆÆ/ 0.
 ObtenerAsuntoDeCorreoElectronico
ÆÆ0 P
(
ÆÆP Q
sede
ÆÆQ U
,
ÆÆU V
ordenDeAlmacen
ÆÆW e
)
ÆÆe f
;
ÆÆf g
string
ØØ 
cuerpo
ØØ 
=
ØØ 
operacionLogica
ØØ  /
.
ØØ/ 0.
 ObtenerCuerpoDeCorreoElectronico
ØØ0 P
(
ØØP Q
sede
ØØQ U
,
ØØU V
ordenDeAlmacen
ØØW e
)
ØØe f
;
ØØf g
OperationResult
∞∞ 
result
∞∞  &
=
∞∞' (
mailer
∞∞) /
.
∞∞/ 0
Send
∞∞0 4
(
∞∞4 5
asunto
∞∞5 ;
,
∞∞; <
cuerpo
∞∞= C
,
∞∞C D!
correosElectronicos
∞∞E X
,
∞∞X Y 
AplicacionSettings
∞∞Z l
.
∞∞l m
Default
∞∞m t
.
∞∞t u
ToMailDefault∞∞u Ç
,∞∞Ç É
new∞∞Ñ á
List∞∞à å
<∞∞å ç

Attachment∞∞ç ó
>∞∞ó ò
(∞∞ò ô
)∞∞ô ö
{∞∞õ ú
new∞∞ù †

Attachment∞∞° ´
(∞∞´ ¨
new∞∞¨ Ø
MemoryStream∞∞∞ º
(∞∞º Ω
pdfMovimiento∞∞Ω  
.∞∞  À
Save∞∞À œ
(∞∞œ –
)∞∞– —
)∞∞— “
,∞∞“ ”
ordenDeAlmacen∞∞‘ ‚
.∞∞‚ „
Comprobante∞∞„ Ó
(∞∞Ó Ô
)∞∞Ô 
.∞∞ Ò
NumeroDeSerie∞∞Ò ˛
+∞∞ˇ Ä
$str∞∞Å Ü
+∞∞á à
ordenDeAlmacen∞∞â ó
.∞∞ó ò
Comprobante∞∞ò £
(∞∞£ §
)∞∞§ •
.∞∞• ¶#
NumeroDeComprobante∞∞¶ π
+∞∞∫ ª
$str∞∞º ¡
+∞∞¬ √
ordenDeAlmacen∞∞ƒ “
.∞∞“ ”
Tercero∞∞” ⁄
(∞∞⁄ €
)∞∞€ ‹
.∞∞‹ ›
RazonSocial∞∞› Ë
+∞∞È Í
$str∞∞Î Ò
,∞∞Ò Ú
$str∞∞Û Ñ
)∞∞Ñ Ö
}∞∞Ü á
)∞∞á à
;∞∞à â
return
±± 
Json
±± 
(
±± 
new
±± 
{
±±  !
result
±±" (
.
±±( )
code_result
±±) 4
,
±±4 5
data
±±6 :
=
±±; <
result
±±= C
.
±±C D
information
±±D O
,
±±O P 
result_description
±±Q c
=
±±d e
result
±±f l
.
±±l m
title
±±m r
}
±±s t
)
±±t u
;
±±u v
}
≤≤ 
catch
≥≥ 
(
≥≥ 
	Exception
≥≥ 
e
≥≥ 
)
≥≥ 
{
¥¥ 
return
µµ 
new
µµ "
JsonHttpStatusResult
µµ /
(
µµ/ 0
Util
µµ0 4
.
µµ4 5
	ErrorJson
µµ5 >
(
µµ> ?
e
µµ? @
)
µµ@ A
,
µµA B
HttpStatusCode
µµC Q
.
µµQ R!
InternalServerError
µµR e
)
µµe f
;
µµf g
}
∂∂ 
}
∏∏ 	
public
∫∫ 
ActionResult
∫∫ %
DescargarOrdenDeAlmacen
∫∫ 3
(
∫∫3 4
long
∫∫4 8
idOrden
∫∫9 @
,
∫∫@ A
int
∫∫B E
formato
∫∫F M
)
∫∫M N
{
ªª 	
try
ºº 
{
ΩΩ (
OrdenDeMovimientoDeAlmacen
ææ *
ordenDeAlmacen
ææ+ 9
=
ææ: ;
operacionLogica
ææ< K
.
ææK L/
!ObtenerOrdenDeMovimientoDeAlmacen
ææL m
(
ææm n
idOrden
ææn u
)
ææu v
;
ææv w
var
øø 
sede
øø 
=
øø 
ObtenerSede
øø &
(
øø& '
)
øø' (
;
øø( )
PdfDocument
¿¿ 
pdfMovimiento
¿¿ )
=
¿¿* +&
ObtenerPdfOrdenDeAlmacen
¿¿, D
(
¿¿D E
ordenDeAlmacen
¿¿E S
,
¿¿S T
sede
¿¿U Y
,
¿¿Y Z
null
¿¿[ _
,
¿¿_ `
(
¿¿a b
FormatoImpresion
¿¿b r
)
¿¿r s
formato
¿¿s z
)
¿¿z {
;
¿¿{ |
byte
¡¡ 
[
¡¡ 
]
¡¡ 
	fileBytes
¡¡  
=
¡¡! "
pdfMovimiento
¡¡# 0
.
¡¡0 1
Save
¡¡1 5
(
¡¡5 6
)
¡¡6 7
;
¡¡7 8
string
¬¬ 
fileName
¬¬ 
=
¬¬  !
ordenDeAlmacen
¬¬" 0
.
¬¬0 1
Comprobante
¬¬1 <
(
¬¬< =
)
¬¬= >
.
¬¬> ?
NumeroDeSerie
¬¬? L
+
¬¬M N
$str
¬¬O T
+
¬¬U V
ordenDeAlmacen
¬¬W e
.
¬¬e f
Comprobante
¬¬f q
(
¬¬q r
)
¬¬r s
.
¬¬s t"
NumeroDeComprobante¬¬t á
+¬¬à â
$str¬¬ä è
+¬¬ê ë
ordenDeAlmacen¬¬í †
.¬¬† °
Tercero¬¬° ®
(¬¬® ©
)¬¬© ™
.¬¬™ ´
RazonSocial¬¬´ ∂
+¬¬∑ ∏
$str¬¬π ø
;¬¬ø ¿
return
√√ 
File
√√ 
(
√√ 
	fileBytes
√√ %
,
√√% &
$str
√√' 8
,
√√8 9
fileName
√√: B
)
√√B C
;
√√C D
}
ƒƒ 
catch
≈≈ 
(
≈≈ 
LogicaException
≈≈ "
oe
≈≈# %
)
≈≈% &
{
∆∆ 
return
«« 
new
«« "
JsonHttpStatusResult
«« /
(
««/ 0
Util
««0 4
.
««4 5
	ErrorJson
««5 >
(
««> ?
oe
««? A
)
««A B
,
««B C
HttpStatusCode
««D R
.
««R S!
InternalServerError
««S f
)
««f g
;
««g h
}
»» 
catch
…… 
(
…… 
	Exception
…… 
e
…… 
)
…… 
{
   
return
ÀÀ 
new
ÀÀ "
JsonHttpStatusResult
ÀÀ /
(
ÀÀ/ 0
Util
ÀÀ0 4
.
ÀÀ4 5
	ErrorJson
ÀÀ5 >
(
ÀÀ> ?
new
ÀÀ? B
	Exception
ÀÀC L
(
ÀÀL M
$strÀÀM è
,ÀÀè ê
eÀÀë í
)ÀÀí ì
)ÀÀì î
,ÀÀî ï
HttpStatusCodeÀÀñ §
.ÀÀ§ •#
InternalServerErrorÀÀ• ∏
)ÀÀ∏ π
;ÀÀπ ∫
}
ÃÃ 
}
ÕÕ 	
public
œœ 

JsonResult
œœ 6
(ObtenerDetalleDeCompraParaOrdenDeAlmacen
œœ B
(
œœB C
long
œœC G
idOrdenDeCompra
œœH W
)
œœW X
{
–– 	
try
—— 
{
““ 
OrdenDeCompra
”” 
ordenDeCompra
”” +
=
””, -
operacionLogica
””. =
.
””= >"
ObtenerOrdenDeCompra
””> R
(
””R S
idOrdenDeCompra
””S b
)
””b c
;
””c d
List
‘‘ 
<
‘‘ ,
DetalleOrdenDeAlmacenViewModel
‘‘ 3
>
‘‘3 4
detalles
‘‘5 =
=
‘‘> ?,
DetalleOrdenDeAlmacenViewModel
‘‘@ ^
.
‘‘^ _
	Convertir
‘‘_ h
(
‘‘h i
ordenDeCompra
‘‘i v
.
‘‘v w
Detalles
‘‘w 
(‘‘ Ä
)‘‘Ä Å
,‘‘Å Ç
ordenDeCompra‘‘É ê
.‘‘ê ë'
ObtenerOrdenesDeAlmacen‘‘ë ®
(‘‘® ©
)‘‘© ™
)‘‘™ ´
;‘‘´ ¨
return
’’ 
Json
’’ 
(
’’ 
detalles
’’ $
)
’’$ %
;
’’% &
}
÷÷ 
catch
◊◊ 
(
◊◊ 
	Exception
◊◊ 
e
◊◊ 
)
◊◊ 
{
ÿÿ 
return
ŸŸ 
Json
ŸŸ 
(
ŸŸ 
Util
ŸŸ  
.
ŸŸ  !
	ErrorJson
ŸŸ! *
(
ŸŸ* +
e
ŸŸ+ ,
)
ŸŸ, -
)
ŸŸ- .
;
ŸŸ. /
}
⁄⁄ 
}
€€ 	
public
›› 

JsonResult
›› #
GuardarOrdenDeAlmacen
›› /
(
››/ 0-
RegistroOrdenDeAlmacenViewModel
››0 O
ordenDeAlmacen
››P ^
)
››^ _
{
ﬁﬁ 	
try
ﬂﬂ 
{
‡‡ 
OperationResult
·· 
result
··  &
;
··& '
List
„„ 
<
„„  
DetalleDeOperacion
„„ '
>
„„' (
detalles
„„) 1
=
„„2 3,
ConstruirDetalleOrdenDeAlmacen
„„4 R
(
„„R S
ordenDeAlmacen
„„S a
)
„„a b
;
„„b c
result
ÂÂ 
=
ÂÂ 
operacionLogica
ÂÂ (
.
ÂÂ( )#
GuardarOrdenDeAlmacen
ÂÂ) >
(
ÂÂ> ?
ordenDeAlmacen
ÂÂ? M
.
ÂÂM N 
IdOrdenDeOperacion
ÂÂN `
,
ÂÂ` a
ProfileData
ÂÂb m
(
ÂÂm n
)
ÂÂn o
.
ÂÂo p
Empleado
ÂÂp x
.
ÂÂx y
Id
ÂÂy {
,
ÂÂ{ |
ProfileDataÂÂ} à
(ÂÂà â
)ÂÂâ ä
.ÂÂä ã.
IdCentroDeAtencionSeleccionadoÂÂã ©
,ÂÂ© ™
ordenDeAlmacenÂÂ´ π
.ÂÂπ ∫!
TipoDeComprobanteÂÂ∫ À
.ÂÂÀ Ã!
SerieSeleccionadaÂÂÃ ›
,ÂÂ› ﬁ
ordenDeAlmacenÂÂﬂ Ì
.ÂÂÌ Ó 
CentroDeAtencionÂÂÓ ˛
.ÂÂ˛ ˇ
IdÂÂˇ Å
,ÂÂÅ Ç
ordenDeAlmacenÂÂÉ ë
.ÂÂë í
FechaTrasladoÂÂí ü
,ÂÂü †
ordenDeAlmacenÂÂ° Ø
.ÂÂØ ∞
ObservacionÂÂ∞ ª
,ÂÂª º
detallesÂÂΩ ≈
,ÂÂ≈ ∆
ordenDeAlmacenÂÂ« ’
.ÂÂ’ ÷!
EsGeneracionTotalÂÂ÷ Á
)ÂÂÁ Ë
;ÂÂË È
Util
ÁÁ 
.
ÁÁ (
ManageIfResultIsNotSuccess
ÁÁ /
(
ÁÁ/ 0
result
ÁÁ0 6
,
ÁÁ6 7
$str
ÁÁ8 :
)
ÁÁ: ;
;
ÁÁ; <
return
ËË 
new
ËË "
JsonHttpStatusResult
ËË /
(
ËË/ 0
new
ËË0 3
{
ËË4 5
result
ËË6 <
.
ËË< =
code_result
ËË= H
,
ËËH I
result
ËËJ P
.
ËËP Q
data
ËËQ U
,
ËËU V 
result_description
ËËW i
=
ËËj k
result
ËËl r
.
ËËr s
title
ËËs x
}
ËËy z
,
ËËz {
HttpStatusCodeËË| ä
.ËËä ã
OKËËã ç
)ËËç é
;ËËé è
}
ÈÈ 
catch
ÍÍ 
(
ÍÍ 
LogicaException
ÍÍ "
oe
ÍÍ# %
)
ÍÍ% &
{
ÎÎ 
return
ÏÏ 
new
ÏÏ "
JsonHttpStatusResult
ÏÏ /
(
ÏÏ/ 0
Util
ÏÏ0 4
.
ÏÏ4 5
	ErrorJson
ÏÏ5 >
(
ÏÏ> ?
oe
ÏÏ? A
)
ÏÏA B
,
ÏÏB C
HttpStatusCode
ÏÏD R
.
ÏÏR S!
InternalServerError
ÏÏS f
)
ÏÏf g
;
ÏÏg h
}
ÌÌ 
catch
ÓÓ 
(
ÓÓ 
	Exception
ÓÓ 
e
ÓÓ 
)
ÓÓ 
{
ÔÔ 
return
 
new
 "
JsonHttpStatusResult
 /
(
/ 0
Util
0 4
.
4 5
	ErrorJson
5 >
(
> ?
new
? B
	Exception
C L
(
L M
$str
M |
,
| }
e
~ 
) Ä
)Ä Å
,Å Ç
HttpStatusCodeÉ ë
.ë í#
InternalServerErrorí •
)• ¶
;¶ ß
}
ÒÒ 
}
ÚÚ 	
public
ÙÙ 
List
ÙÙ 
<
ÙÙ  
DetalleDeOperacion
ÙÙ &
>
ÙÙ& ',
ConstruirDetalleOrdenDeAlmacen
ÙÙ( F
(
ÙÙF G-
RegistroOrdenDeAlmacenViewModel
ÙÙG f
ordenDeAlmacen
ÙÙg u
)
ÙÙu v
{
ıı 	
List
ˆˆ 
<
ˆˆ  
DetalleDeOperacion
ˆˆ #
>
ˆˆ# $!
detallesConstruidos
ˆˆ% 8
=
ˆˆ9 :
new
ˆˆ; >
List
ˆˆ? C
<
ˆˆC D 
DetalleDeOperacion
ˆˆD V
>
ˆˆV W
(
ˆˆW X
)
ˆˆX Y
;
ˆˆY Z
foreach
˜˜ 
(
˜˜ 
var
˜˜ 
item
˜˜ 
in
˜˜  
ordenDeAlmacen
˜˜! /
.
˜˜/ 0
Detalles
˜˜0 8
)
˜˜8 9
{
¯¯ !
detallesConstruidos
˘˘ #
.
˘˘# $
Add
˘˘$ '
(
˘˘' (
new
˘˘( + 
DetalleDeOperacion
˘˘, >
(
˘˘> ?
item
˘˘? C
.
˘˘C D

IdProducto
˘˘D N
,
˘˘N O
item
˘˘P T
.
˘˘T U!
IngresoSalidaActual
˘˘U h
,
˘˘h i
$num
˘˘j k
,
˘˘k l
$num
˘˘m n
,
˘˘n o
$num
˘˘p q
,
˘˘q r
$num
˘˘s t
,
˘˘t u
$num
˘˘v w
,
˘˘w x
null
˘˘y }
,
˘˘} ~
null˘˘ É
,˘˘É Ñ
null˘˘Ö â
,˘˘â ä
null˘˘ã è
,˘˘è ê
item˘˘ë ï
.˘˘ï ñ
EsBien˘˘ñ ú
,˘˘ú ù
null˘˘û ¢
,˘˘¢ £
null˘˘§ ®
)˘˘® ©
)˘˘© ™
;˘˘™ ´
}
˙˙ 
return
˚˚ !
detallesConstruidos
˚˚ &
;
˚˚& '
}
¸¸ 	
public
ÅÅ 

JsonResult
ÅÅ )
ObtenerMovimientosDeAlmacen
ÅÅ 5
(
ÅÅ5 6
bool
ÅÅ6 :
	esEntrada
ÅÅ; D
,
ÅÅD E
int
ÅÅF I
[
ÅÅI J
]
ÅÅJ K"
idsCentrosDeAtencion
ÅÅL `
,
ÅÅ` a
string
ÅÅb h
desde
ÅÅi n
,
ÅÅn o
string
ÅÅp v
hasta
ÅÅw |
)
ÅÅ| }
{
ÇÇ 	
try
ÉÉ 
{
ÑÑ 
DateTime
ÖÖ 

fechaDesde
ÖÖ #
=
ÖÖ$ %
DateTimeUtil
ÖÖ& 2
.
ÖÖ2 3E
7ObtenerFechaDesdeConPrecisionDeHorasMinutosMilisegundos
ÖÖ3 j
(
ÖÖj k
desde
ÖÖk p
)
ÖÖp q
;
ÖÖq r
DateTime
ÜÜ 

fechaHasta
ÜÜ #
=
ÜÜ$ %
DateTimeUtil
ÜÜ& 2
.
ÜÜ2 3E
7ObtenerFechaHastaConPrecisionDeHorasMinutosMilisegundos
ÜÜ3 j
(
ÜÜj k
hasta
ÜÜk p
)
ÜÜp q
;
ÜÜq r
List
àà 
<
àà $
Entrada_Salida_Almacen
àà +
>
àà+ ,
	resultado
àà- 6
=
àà7 8
	esEntrada
àà9 B
?
ààC D
operacionLogica
ààE T
.
ààT U&
ObtenerEntradasDeAlmacen
ààU m
(
ààm n
ProfileData
ààn y
(
àày z
)
ààz {
.
àà{ |
Empleadoàà| Ñ
.ààÑ Ö
IdààÖ á
,ààá à$
idsCentrosDeAtencionààâ ù
.ààù û
ToListààû §
(àà§ •
)àà• ¶
,àà¶ ß

fechaDesdeàà® ≤
,àà≤ ≥

fechaHastaàà¥ æ
)ààæ ø
:àà¿ ¡
operacionLogicaàà¬ —
.àà— “'
ObtenerSalidasDeAlmacenàà“ È
(ààÈ Í
ProfileDataààÍ ı
(ààı ˆ
)ààˆ ˜
.àà˜ ¯
Empleadoàà¯ Ä
.ààÄ Å
IdààÅ É
,ààÉ Ñ$
idsCentrosDeAtencionààÖ ô
.ààô ö
ToListààö †
(àà† °
)àà° ¢
,àà¢ £

fechaDesdeàà§ Æ
,ààÆ Ø

fechaHastaàà∞ ∫
)àà∫ ª
;ààª º
return
ää 
Json
ää 
(
ää 
	resultado
ää %
)
ää% &
;
ää& '
}
ãã 
catch
åå 
(
åå 
	Exception
åå 
e
åå 
)
åå 
{
çç 
return
éé 
Json
éé 
(
éé 
Util
éé  
.
éé  !
	ErrorJson
éé! *
(
éé* +
e
éé+ ,
)
éé, -
)
éé- .
;
éé. /
}
èè 
}
êê 	
public
íí 
async
íí 
Task
íí 
<
íí 

JsonResult
íí $
>
íí$ %(
ObtenerMovimientoDeAlmacen
íí& @
(
íí@ A
long
ííA E
idMovimiento
ííF R
,
ííR S
int
ííT W
formato
ííX _
)
íí_ `
{
ìì 	
try
îî 
{
ïï !
MovimientoDeAlmacen
ññ #!
movimientoDeAlmacen
ññ$ 7
=
ññ8 9
operacionLogica
ññ: I
.
ññI J+
ObtenerMovimientoDeMercaderia
ññJ g
(
ññg h
idMovimiento
ññh t
)
ññt u
;
ññu v*
MovimientoDeAlmacenViewModel
óó ,
	respuesta
óó- 6
=
óó7 8
new
óó9 <*
MovimientoDeAlmacenViewModel
óó= Y
(
óóY Z
)
óóZ [
;
óó[ \
var
òò 
sede
òò 
=
òò 
ObtenerSede
òò &
(
òò& '
)
òò' (
;
òò( )
string
ôô "
htmlStringMovimiento
ôô +
=
ôô, -
$str
ôô. 0
;
ôô0 1
string
öö 
htmlStringOrden
öö &
=
öö' (
$str
öö) +
;
öö+ ,
bool
õõ #
comprobanteMovimiento
õõ *
=
õõ+ ,
false
õõ- 2
;
õõ2 3
if
ùù 
(
ùù !
movimientoDeAlmacen
ùù '
.
ùù' (
IdTipoComprobante
ùù( 9
==
ùù: <
MaestroSettings
ùù= L
.
ùùL M
Default
ùùM T
.
ùùT U<
-IdDetalleMaestroComprobanteNotaAlmacenInternaùùU Ç
||ùùÉ Ö#
movimientoDeAlmacenùùÜ ô
.ùùô ö!
IdTipoComprobanteùùö ´
==ùù¨ Æ
MaestroSettingsùùØ æ
.ùùæ ø
Defaultùùø ∆
.ùù∆ «B
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitenteùù« ˘
)ùù˘ ˙
{
ûû 
var
üü 
proveedores
üü #
=
üü$ % 
actorNegocioLogica
üü& 8
.
üü8 9(
ObtenerProveedoresVigentes
üü9 S
(
üüS T
)
üüT U
;
üüU V
var
†† #
modalidadesDeTraslado
†† -
=
††. /
await
††0 5
maestroLogica
††6 C
.
††C D-
ObtenerModalidadesTrasladoAsync
††D c
(
††c d
)
††d e
;
††e f
var
°° 
motivosDeTraslado
°° )
=
°°* +
await
°°, 1
maestroLogica
°°2 ?
.
°°? @)
ObtenerMotivosTrasladoAsync
°°@ [
(
°°[ \
)
°°\ ]
;
°°] ^
var
¢¢ 
	QrContent
¢¢ !
=
¢¢" #*
facturacionElectronicaLogica
¢¢$ @
.
¢¢@ A
	ObtenerQR
¢¢A J
(
¢¢J K!
movimientoDeAlmacen
¢¢K ^
,
¢¢^ _
sede
¢¢` d
)
¢¢d e
;
¢¢e f
var
££ 
QrBytes
££ 
=
££  !
(
££" #!
movimientoDeAlmacen
££# 6
.
££6 7
IdTipoComprobante
££7 H
==
££I K
MaestroSettings
££L [
.
££[ \
Default
££\ c
.
££c dA
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitente££d ñ
)££ñ ó
?££ò ô
barCodeUtil££ö •
.££• ¶
ObtenerCodigoQR££¶ µ
(££µ ∂#
movimientoDeAlmacen££∂ …
.££…  
Informacion££  ’
)££’ ÷
:££◊ ÿ
barCodeUtil££Ÿ ‰
.££‰ Â
ObtenerCodigoQR££Â Ù
(££Ù ı
	QrContent££ı ˛
)££˛ ˇ
;££ˇ Ä#
comprobanteMovimiento
§§ )
=
§§* +
true
§§, 0
;
§§0 1"
htmlStringMovimiento
•• (
=
••) *#
CoreHtmlStringBuilder
••+ @
.
••@ A
ObtenerHtmlString
••A R
(
••R S!
movimientoDeAlmacen
••S f
,
••f g
(
••h i
FormatoImpresion
••i y
)
••y z
formato••z Å
,••Å Ç
QrBytes••É ä
,••ä ã
sede••å ê
,••ê ë
proveedores••í ù
,••ù û%
modalidadesDeTraslado••ü ¥
,••¥ µ!
motivosDeTraslado••∂ «
,••« »
this••… Õ
)••Õ Œ
;••Œ œ
}
¶¶ 
else
ßß 
{
®® #
comprobanteMovimiento
©© )
=
©©* +
false
©©, 1
;
©©1 2"
htmlStringMovimiento
™™ (
=
™™) *#
CoreHtmlStringBuilder
™™+ @
.
™™@ A
ObtenerHtmlString
™™A R
(
™™R S!
movimientoDeAlmacen
™™S f
,
™™f g
(
™™h i
FormatoImpresion
™™i y
)
™™y z
formato™™z Å
,™™Å Ç
null™™É á
,™™á à
sede™™â ç
,™™ç é
null™™è ì
,™™ì î
null™™ï ô
,™™ô ö
null™™õ ü
,™™ü †
this™™° •
)™™• ¶
;™™¶ ß
}
´´ 
if
≠≠ 
(
≠≠ 
Diccionario
≠≠ 
.
≠≠  <
.TiposDeTransaccionOrdenesDeOperacionesDeVentas
≠≠  N
.
≠≠N O
Contains
≠≠O W
(
≠≠W X!
movimientoDeAlmacen
≠≠X k
.
≠≠k l
OrdenDeOperacion
≠≠l |
(
≠≠| }
)
≠≠} ~
.
≠≠~ 
TipoTransaccion≠≠ é
(≠≠é è
)≠≠è ê
.≠≠ê ë
Id≠≠ë ì
)≠≠ì î
)≠≠î ï
{
ÆÆ 
OrdenDeVenta
ØØ  
ordenDeVenta
ØØ! -
=
ØØ. /
operacionLogica
ØØ0 ?
.
ØØ? @!
ObtenerOrdenDeVenta
ØØ@ S
(
ØØS T!
movimientoDeAlmacen
ØØT g
.
ØØg h#
IdOperacionReferencia
ØØh }
(
ØØ} ~
)
ØØ~ 
)ØØ Ä
;ØØÄ Å
var
∞∞ 
QrContentOrden
∞∞ &
=
∞∞' (*
facturacionElectronicaLogica
∞∞) E
.
∞∞E F
	ObtenerQR
∞∞F O
(
∞∞O P!
movimientoDeAlmacen
∞∞P c
,
∞∞c d
sede
∞∞e i
)
∞∞i j
;
∞∞j k
var
±± 
QrBytesOrden
±± $
=
±±% &
barCodeUtil
±±' 2
.
±±2 3
ObtenerCodigoQR
±±3 B
(
±±B C
QrContentOrden
±±C Q
)
±±Q R
;
±±R S
htmlStringOrden
≤≤ #
=
≤≤$ %#
CoreHtmlStringBuilder
≤≤& ;
.
≤≤; <
ObtenerHtmlString
≤≤< M
(
≤≤M N
ordenDeVenta
≤≤N Z
,
≤≤Z [
(
≤≤\ ]
FormatoImpresion
≤≤] m
)
≤≤m n
formato
≤≤n u
,
≤≤u v
QrBytesOrden≤≤w É
,≤≤É Ñ
sede≤≤Ö â
,≤≤â ä
this≤≤ã è
,≤≤è ê
maestroLogica≤≤ë û
)≤≤û ü
;≤≤ü †
}
≥≥ 
else
¥¥ 
if
¥¥ 
(
¥¥ 
Diccionario
¥¥ $
.
¥¥$ %=
/TiposDeTransaccionOrdenesDeOperacionesDeCompras
¥¥% T
.
¥¥T U
Contains
¥¥U ]
(
¥¥] ^!
movimientoDeAlmacen
¥¥^ q
.
¥¥q r
OrdenDeOperacion¥¥r Ç
(¥¥Ç É
)¥¥É Ñ
.¥¥Ñ Ö
TipoTransaccion¥¥Ö î
(¥¥î ï
)¥¥ï ñ
.¥¥ñ ó
Id¥¥ó ô
)¥¥ô ö
)¥¥ö õ
{
µµ 
OrdenDeCompra
∂∂ !
ordenDecompra
∂∂" /
=
∂∂0 1
operacionLogica
∂∂2 A
.
∂∂A B"
ObtenerOrdenDeCompra
∂∂B V
(
∂∂V W!
movimientoDeAlmacen
∂∂W j
.
∂∂j k$
IdOperacionReferencia∂∂k Ä
(∂∂Ä Å
)∂∂Å Ç
)∂∂Ç É
;∂∂É Ñ
htmlStringOrden
∑∑ #
=
∑∑$ %#
CoreHtmlStringBuilder
∑∑& ;
.
∑∑; <
ObtenerHtmlString
∑∑< M
(
∑∑M N
ordenDecompra
∑∑N [
,
∑∑[ \
(
∑∑] ^
FormatoImpresion
∑∑^ n
)
∑∑n o
formato
∑∑o v
,
∑∑v w
null
∑∑x |
,
∑∑| }
sede∑∑~ Ç
,∑∑Ç É
this∑∑Ñ à
,∑∑à â
maestroLogica∑∑ä ó
)∑∑ó ò
;∑∑ò ô
}
∏∏ 
if
¡¡ 
(
¡¡ 
htmlStringOrden
¡¡ #
==
¡¡$ &
$str
¡¡' )
)
¡¡) *
htmlStringOrden
¬¬ #
=
¬¬$ %"
htmlStringMovimiento
¬¬& :
;
¬¬: ;
if
√√ 
(
√√ 
!
√√ #
comprobanteMovimiento
√√ *
)
√√* +"
htmlStringMovimiento
ƒƒ (
=
ƒƒ) *
htmlStringOrden
ƒƒ+ :
;
ƒƒ: ;
	respuesta
»» 
=
»» 
new
»» *
MovimientoDeAlmacenViewModel
»»  <
(
»»< =!
movimientoDeAlmacen
»»= P
.
»»P Q
Id
»»Q S
,
»»S T"
htmlStringMovimiento
»»U i
,
»»i j
htmlStringOrden
»»k z
)
»»z {
;
»»{ |
return
…… 
Json
…… 
(
…… 
	respuesta
…… %
)
……% &
;
……& '
}
   
catch
ÀÀ 
(
ÀÀ 
	Exception
ÀÀ 
e
ÀÀ 
)
ÀÀ 
{
ÃÃ 
return
ÕÕ 
Json
ÕÕ 
(
ÕÕ 
Util
ÕÕ  
.
ÕÕ  !
	ErrorJson
ÕÕ! *
(
ÕÕ* +
e
ÕÕ+ ,
)
ÕÕ, -
)
ÕÕ- .
;
ÕÕ. /
}
ŒŒ 
}
œœ 	
public
—— 
PdfDocument
—— +
ObtenerPdfMovimientoDeAlmacen
—— 8
(
——8 9!
MovimientoDeAlmacen
——9 L!
movimientoDeAlmacen
——M `
,
——` a7
(EstablecimientoComercialExtendidoConLogo——b ä
sede——ã è
,——è ê
byte——ë ï
[——ï ñ
]——ñ ó
qrBytes——ò ü
,——ü † 
FormatoImpresion——° ±
formato——≤ π
,——π ∫
List——ª ø
<——ø ¿
	Proveedor——¿ …
>——…  
proveedores——À ÷
,——÷ ◊
List——ÿ ‹
<——‹ ›
Detalle_maestro——› Ï
>——Ï Ì%
modalidadesDeTraslado——Ó É
,——É Ñ
List——Ö â
<——â ä
Detalle_maestro——ä ô
>——ô ö!
motivosDeTraslado——õ ¨
)——¨ ≠
{
““ 	
string
”” 
result
”” 
=
”” #
CoreHtmlStringBuilder
”” 1
.
””1 2
ObtenerHtmlString
””2 C
(
””C D!
movimientoDeAlmacen
””D W
,
””W X
formato
””Y `
,
””` a
qrBytes
””b i
,
””i j
sede
””k o
,
””o p
proveedores
””q |
,
””| }$
modalidadesDeTraslado””~ ì
,””ì î!
motivosDeTraslado””ï ¶
,””¶ ß
this””® ¨
)””¨ ≠
;””≠ Æ
var
‘‘ 
Renderer
‘‘ 
=
‘‘ 
new
‘‘ 
	SelectPdf
‘‘ (
.
‘‘( )
	HtmlToPdf
‘‘) 2
(
‘‘2 3
)
‘‘3 4
;
‘‘4 5
if
÷÷ 
(
÷÷ 
formato
÷÷ 
==
÷÷ 
FormatoImpresion
÷÷ +
.
÷÷+ ,
_80mm
÷÷, 1
)
÷÷1 2
{
◊◊ 
Renderer
ÿÿ 
.
ÿÿ 
Options
ÿÿ  
.
ÿÿ  !
AutoFitWidth
ÿÿ! -
=
ÿÿ. /"
HtmlToPdfPageFitMode
ÿÿ0 D
.
ÿÿD E
NoAdjustment
ÿÿE Q
;
ÿÿQ R
Renderer
ŸŸ 
.
ŸŸ 
Options
ŸŸ  
.
ŸŸ  !
AutoFitHeight
ŸŸ! .
=
ŸŸ/ 0"
HtmlToPdfPageFitMode
ŸŸ1 E
.
ŸŸE F
NoAdjustment
ŸŸF R
;
ŸŸR S
Renderer
⁄⁄ 
.
⁄⁄ 
Options
⁄⁄  
.
⁄⁄  !
WebPageWidth
⁄⁄! -
=
⁄⁄. /
$num
⁄⁄0 4
;
⁄⁄4 5
Renderer
€€ 
.
€€ 
Options
€€  
.
€€  !
WebPageHeight
€€! .
=
€€/ 0
$num
€€1 2
;
€€2 3
Renderer
‹‹ 
.
‹‹ 
Options
‹‹  
.
‹‹  !
WebPageFixedSize
‹‹! 1
=
‹‹2 3
false
‹‹4 9
;
‹‹9 :
Renderer
›› 
.
›› 
Options
››  
.
››  !
PdfPageSize
››! ,
=
››- .
PdfPageSize
››/ :
.
››: ;
Custom
››; A
;
››A B
Renderer
ﬁﬁ 
.
ﬁﬁ 
Options
ﬁﬁ  
.
ﬁﬁ  !
PdfPageCustomSize
ﬁﬁ! 2
=
ﬁﬁ3 4
new
ﬁﬁ5 8
SizeF
ﬁﬁ9 >
(
ﬁﬁ> ?
$num
ﬁﬁ? B
,
ﬁﬁB C
$num
ﬁﬁD G
)
ﬁﬁG H
;
ﬁﬁH I
}
ﬂﬂ 
else
‡‡ 
if
‡‡ 
(
‡‡ 
formato
‡‡ 
==
‡‡ 
FormatoImpresion
‡‡  0
.
‡‡0 1
A4
‡‡1 3
)
‡‡3 4
{
·· 
Renderer
‚‚ 
.
‚‚ 
Options
‚‚  
.
‚‚  !
PdfPageSize
‚‚! ,
=
‚‚- .
PdfPageSize
‚‚/ :
.
‚‚: ;
A4
‚‚; =
;
‚‚= >
}
„„ 
else
‰‰ 
if
‰‰ 
(
‰‰ 
formato
‰‰ 
==
‰‰ 
FormatoImpresion
‰‰  0
.
‰‰0 1
_56mm
‰‰1 6
)
‰‰6 7
{
ÂÂ 
Renderer
ÊÊ 
.
ÊÊ 
Options
ÊÊ  
.
ÊÊ  !
AutoFitWidth
ÊÊ! -
=
ÊÊ. /"
HtmlToPdfPageFitMode
ÊÊ0 D
.
ÊÊD E
NoAdjustment
ÊÊE Q
;
ÊÊQ R
Renderer
ÁÁ 
.
ÁÁ 
Options
ÁÁ  
.
ÁÁ  !
AutoFitHeight
ÁÁ! .
=
ÁÁ/ 0"
HtmlToPdfPageFitMode
ÁÁ1 E
.
ÁÁE F
AutoFit
ÁÁF M
;
ÁÁM N
Renderer
ËË 
.
ËË 
Options
ËË  
.
ËË  !
WebPageWidth
ËË! -
=
ËË. /
$num
ËË0 3
;
ËË3 4
Renderer
ÈÈ 
.
ÈÈ 
Options
ÈÈ  
.
ÈÈ  !
WebPageHeight
ÈÈ! .
=
ÈÈ/ 0
$num
ÈÈ1 2
;
ÈÈ2 3
Renderer
ÍÍ 
.
ÍÍ 
Options
ÍÍ  
.
ÍÍ  !
WebPageFixedSize
ÍÍ! 1
=
ÍÍ2 3
false
ÍÍ4 9
;
ÍÍ9 :
Renderer
ÎÎ 
.
ÎÎ 
Options
ÎÎ  
.
ÎÎ  !
PdfPageSize
ÎÎ! ,
=
ÎÎ- .
PdfPageSize
ÎÎ/ :
.
ÎÎ: ;
Custom
ÎÎ; A
;
ÎÎA B
Renderer
ÏÏ 
.
ÏÏ 
Options
ÏÏ  
.
ÏÏ  !
PdfPageCustomSize
ÏÏ! 2
=
ÏÏ3 4
new
ÏÏ5 8
SizeF
ÏÏ9 >
(
ÏÏ> ?
$num
ÏÏ? B
,
ÏÏB C
$num
ÏÏD G
)
ÏÏG H
;
ÏÏH I
}
ÌÌ 
Renderer
ÓÓ 
.
ÓÓ 
Options
ÓÓ 
.
ÓÓ 
MarginBottom
ÓÓ )
=
ÓÓ* +
$num
ÓÓ, -
;
ÓÓ- .
Renderer
ÔÔ 
.
ÔÔ 
Options
ÔÔ 
.
ÔÔ 
	MarginTop
ÔÔ &
=
ÔÔ' (
$num
ÔÔ) *
;
ÔÔ* +
Renderer
 
.
 
Options
 
.
 

MarginLeft
 '
=
( )
$num
* +
;
+ ,
Renderer
ÒÒ 
.
ÒÒ 
Options
ÒÒ 
.
ÒÒ 
MarginRight
ÒÒ (
=
ÒÒ) *
$num
ÒÒ+ ,
;
ÒÒ, -
Renderer
ÚÚ 
.
ÚÚ 
Options
ÚÚ 
.
ÚÚ 
DisplayHeader
ÚÚ *
=
ÚÚ+ ,
false
ÚÚ- 2
;
ÚÚ2 3
Renderer
ÛÛ 
.
ÛÛ 
Options
ÛÛ 
.
ÛÛ $
JpegCompressionEnabled
ÛÛ 3
=
ÛÛ4 5
false
ÛÛ6 ;
;
ÛÛ; <
return
ÙÙ 
Renderer
ÙÙ 
.
ÙÙ 
ConvertHtmlString
ÙÙ -
(
ÙÙ- .
result
ÙÙ. 4
)
ÙÙ4 5
;
ÙÙ5 6
}
ıı 	
public
˜˜ 
async
˜˜ 
Task
˜˜ 
<
˜˜ 

JsonResult
˜˜ $
>
˜˜$ %:
,EnviarCorreoElectronicoDeMovimientoDeAlmacen
˜˜& R
(
˜˜R S
long
˜˜S W
idMovimiento
˜˜X d
,
˜˜d e
int
˜˜f i
formato
˜˜j q
,
˜˜q r
List
˜˜s w
<
˜˜w x
string
˜˜x ~
>
˜˜~ #
correosElectronicos˜˜Ä ì
)˜˜ì î
{
¯¯ 	
try
˘˘ 
{
˙˙ !
MovimientoDeAlmacen
˚˚ #!
movimientoDeAlmacen
˚˚$ 7
=
˚˚8 9
operacionLogica
˚˚: I
.
˚˚I J+
ObtenerMovimientoDeMercaderia
˚˚J g
(
˚˚g h
idMovimiento
˚˚h t
)
˚˚t u
;
˚˚u v
var
¸¸ 
sede
¸¸ 
=
¸¸ 
ObtenerSede
¸¸ &
(
¸¸& '
)
¸¸' (
;
¸¸( )
var
˝˝ 
proveedores
˝˝ 
=
˝˝  ! 
actorNegocioLogica
˝˝" 4
.
˝˝4 5(
ObtenerProveedoresVigentes
˝˝5 O
(
˝˝O P
)
˝˝P Q
;
˝˝Q R
var
˛˛ #
modalidadesDeTraslado
˛˛ )
=
˛˛* +
await
˛˛, 1
maestroLogica
˛˛2 ?
.
˛˛? @-
ObtenerModalidadesTrasladoAsync
˛˛@ _
(
˛˛_ `
)
˛˛` a
;
˛˛a b
var
ˇˇ 
motivosDeTraslado
ˇˇ %
=
ˇˇ& '
await
ˇˇ( -
maestroLogica
ˇˇ. ;
.
ˇˇ; <)
ObtenerMotivosTrasladoAsync
ˇˇ< W
(
ˇˇW X
)
ˇˇX Y
;
ˇˇY Z
string
ÄÄ 
	QrContent
ÄÄ  
=
ÄÄ! "*
facturacionElectronicaLogica
ÄÄ# ?
.
ÄÄ? @
	ObtenerQR
ÄÄ@ I
(
ÄÄI J!
movimientoDeAlmacen
ÄÄJ ]
,
ÄÄ] ^
sede
ÄÄ_ c
)
ÄÄc d
;
ÄÄd e
byte
ÅÅ 
[
ÅÅ 
]
ÅÅ 
QrBytes
ÅÅ 
=
ÅÅ  
(
ÅÅ! "!
movimientoDeAlmacen
ÅÅ" 5
.
ÅÅ5 6
IdTipoComprobante
ÅÅ6 G
==
ÅÅH J
MaestroSettings
ÅÅK Z
.
ÅÅZ [
Default
ÅÅ[ b
.
ÅÅb cA
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitenteÅÅc ï
)ÅÅï ñ
?ÅÅó ò
barCodeUtilÅÅô §
.ÅÅ§ •
ObtenerCodigoQRÅÅ• ¥
(ÅÅ¥ µ#
movimientoDeAlmacenÅÅµ »
.ÅÅ» …
InformacionÅÅ… ‘
)ÅÅ‘ ’
:ÅÅ÷ ◊
barCodeUtilÅÅÿ „
.ÅÅ„ ‰
ObtenerCodigoQRÅÅ‰ Û
(ÅÅÛ Ù
	QrContentÅÅÙ ˝
)ÅÅ˝ ˛
;ÅÅ˛ ˇ
PdfDocument
ÇÇ 
pdfMovimiento
ÇÇ )
=
ÇÇ* ++
ObtenerPdfMovimientoDeAlmacen
ÇÇ, I
(
ÇÇI J!
movimientoDeAlmacen
ÇÇJ ]
,
ÇÇ] ^
sede
ÇÇ_ c
,
ÇÇc d
QrBytes
ÇÇe l
,
ÇÇl m
(
ÇÇn o
FormatoImpresion
ÇÇo 
)ÇÇ Ä
formatoÇÇÄ á
,ÇÇá à
proveedoresÇÇâ î
,ÇÇî ï%
modalidadesDeTrasladoÇÇñ ´
,ÇÇ´ ¨!
motivosDeTrasladoÇÇ≠ æ
)ÇÇæ ø
;ÇÇø ¿
string
ÉÉ 
asunto
ÉÉ 
=
ÉÉ 
operacionLogica
ÉÉ  /
.
ÉÉ/ 0.
 ObtenerAsuntoDeCorreoElectronico
ÉÉ0 P
(
ÉÉP Q
sede
ÉÉQ U
,
ÉÉU V!
movimientoDeAlmacen
ÉÉW j
)
ÉÉj k
;
ÉÉk l
string
ÑÑ 
cuerpo
ÑÑ 
=
ÑÑ 
operacionLogica
ÑÑ  /
.
ÑÑ/ 0.
 ObtenerCuerpoDeCorreoElectronico
ÑÑ0 P
(
ÑÑP Q
sede
ÑÑQ U
,
ÑÑU V!
movimientoDeAlmacen
ÑÑW j
)
ÑÑj k
;
ÑÑk l
OperationResult
ÖÖ 
result
ÖÖ  &
=
ÖÖ' (
mailer
ÖÖ) /
.
ÖÖ/ 0
Send
ÖÖ0 4
(
ÖÖ4 5
asunto
ÖÖ5 ;
,
ÖÖ; <
cuerpo
ÖÖ= C
,
ÖÖC D!
correosElectronicos
ÖÖE X
,
ÖÖX Y 
AplicacionSettings
ÖÖZ l
.
ÖÖl m
Default
ÖÖm t
.
ÖÖt u
ToMailDefaultÖÖu Ç
,ÖÖÇ É
newÖÖÑ á
ListÖÖà å
<ÖÖå ç

AttachmentÖÖç ó
>ÖÖó ò
(ÖÖò ô
)ÖÖô ö
{ÖÖõ ú
newÖÖù †

AttachmentÖÖ° ´
(ÖÖ´ ¨
newÖÖ¨ Ø
MemoryStreamÖÖ∞ º
(ÖÖº Ω
pdfMovimientoÖÖΩ  
.ÖÖ  À
SaveÖÖÀ œ
(ÖÖœ –
)ÖÖ– —
)ÖÖ— “
,ÖÖ“ ”#
movimientoDeAlmacenÖÖ‘ Á
.ÖÖÁ Ë
ComprobanteÖÖË Û
(ÖÖÛ Ù
)ÖÖÙ ı
.ÖÖı ˆ
NumeroDeSerieÖÖˆ É
+ÖÖÑ Ö
$strÖÖÜ ã
+ÖÖå ç#
movimientoDeAlmacenÖÖé °
.ÖÖ° ¢
ComprobanteÖÖ¢ ≠
(ÖÖ≠ Æ
)ÖÖÆ Ø
.ÖÖØ ∞#
NumeroDeComprobanteÖÖ∞ √
+ÖÖƒ ≈
$strÖÖ∆ À
+ÖÖÃ Õ#
movimientoDeAlmacenÖÖŒ ·
.ÖÖ· ‚
TerceroÖÖ‚ È
(ÖÖÈ Í
)ÖÖÍ Î
.ÖÖÎ Ï
RazonSocialÖÖÏ ˜
+ÖÖ¯ ˘
$strÖÖ˙ Ä
,ÖÖÄ Å
$strÖÖÇ ì
)ÖÖì î
}ÖÖï ñ
)ÖÖñ ó
;ÖÖó ò
return
ÜÜ 
Json
ÜÜ 
(
ÜÜ 
new
ÜÜ 
{
ÜÜ  !
result
ÜÜ" (
.
ÜÜ( )
code_result
ÜÜ) 4
,
ÜÜ4 5
data
ÜÜ6 :
=
ÜÜ; <
result
ÜÜ= C
.
ÜÜC D
information
ÜÜD O
,
ÜÜO P 
result_description
ÜÜQ c
=
ÜÜd e
result
ÜÜf l
.
ÜÜl m
title
ÜÜm r
}
ÜÜs t
)
ÜÜt u
;
ÜÜu v
}
áá 
catch
àà 
(
àà 
	Exception
àà 
e
àà 
)
àà 
{
ââ 
return
ää 
new
ää "
JsonHttpStatusResult
ää /
(
ää/ 0
Util
ää0 4
.
ää4 5
	ErrorJson
ää5 >
(
ää> ?
e
ää? @
)
ää@ A
,
ääA B
HttpStatusCode
ääC Q
.
ääQ R!
InternalServerError
ääR e
)
ääe f
;
ääf g
}
ãã 
}
çç 	
public
èè 
async
èè 
Task
èè 
<
èè 
ActionResult
èè &
>
èè& '*
DescargarMovimientoDeAlmacen
èè( D
(
èèD E
long
èèE I
idMovimiento
èèJ V
,
èèV W
int
èèX [
formato
èè\ c
)
èèc d
{
êê 	
try
ëë 
{
íí 
PdfDocument
ìì 
pdfMovimiento
ìì )
;
ìì) *
var
îî 
sede
îî 
=
îî 
ObtenerSede
îî &
(
îî& '
)
îî' (
;
îî( )!
MovimientoDeAlmacen
ïï #!
movimientoDeAlmacen
ïï$ 7
=
ïï8 9
operacionLogica
ïï: I
.
ïïI J+
ObtenerMovimientoDeMercaderia
ïïJ g
(
ïïg h
idMovimiento
ïïh t
)
ïït u
;
ïïu v
var
ññ 
proveedores
ññ 
=
ññ  ! 
actorNegocioLogica
ññ" 4
.
ññ4 5(
ObtenerProveedoresVigentes
ññ5 O
(
ññO P
)
ññP Q
;
ññQ R
var
óó #
modalidadesDeTraslado
óó )
=
óó* +
await
óó, 1
maestroLogica
óó2 ?
.
óó? @-
ObtenerModalidadesTrasladoAsync
óó@ _
(
óó_ `
)
óó` a
;
óóa b
var
òò 
motivosDeTraslado
òò %
=
òò& '
await
òò( -
maestroLogica
òò. ;
.
òò; <)
ObtenerMotivosTrasladoAsync
òò< W
(
òòW X
)
òòX Y
;
òòY Z
string
ôô 
	QrContent
ôô  
=
ôô! "*
facturacionElectronicaLogica
ôô# ?
.
ôô? @
	ObtenerQR
ôô@ I
(
ôôI J!
movimientoDeAlmacen
ôôJ ]
,
ôô] ^
sede
ôô_ c
)
ôôc d
;
ôôd e
byte
öö 
[
öö 
]
öö 
QrBytes
öö 
=
öö  
(
öö! "!
movimientoDeAlmacen
öö" 5
.
öö5 6
IdTipoComprobante
öö6 G
==
ööH J
MaestroSettings
ööK Z
.
ööZ [
Default
öö[ b
.
ööb cA
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitenteööc ï
)ööï ñ
?ööó ò
barCodeUtilööô §
.öö§ •
ObtenerCodigoQRöö• ¥
(öö¥ µ#
movimientoDeAlmacenööµ »
.öö» …
Informacionöö… ‘
)öö‘ ’
:öö÷ ◊
barCodeUtilööÿ „
.öö„ ‰
ObtenerCodigoQRöö‰ Û
(ööÛ Ù
	QrContentööÙ ˝
)öö˝ ˛
;öö˛ ˇ
pdfMovimiento
õõ 
=
õõ +
ObtenerPdfMovimientoDeAlmacen
õõ  =
(
õõ= >!
movimientoDeAlmacen
õõ> Q
,
õõQ R
sede
õõS W
,
õõW X
QrBytes
õõY `
,
õõ` a
(
õõb c
FormatoImpresion
õõc s
)
õõs t
formato
õõt {
,
õõ{ |
proveedoresõõ} à
,õõà â%
modalidadesDeTrasladoõõä ü
,õõü †!
motivosDeTrasladoõõ° ≤
)õõ≤ ≥
;õõ≥ ¥
byte
úú 
[
úú 
]
úú 
	fileBytes
úú  
=
úú! "
pdfMovimiento
úú# 0
.
úú0 1
Save
úú1 5
(
úú5 6
)
úú6 7
;
úú7 8
string
ùù 
fileName
ùù 
=
ùù  !!
movimientoDeAlmacen
ùù" 5
.
ùù5 6
Comprobante
ùù6 A
(
ùùA B
)
ùùB C
.
ùùC D
NumeroDeSerie
ùùD Q
+
ùùR S
$str
ùùT Y
+
ùùZ [!
movimientoDeAlmacen
ùù\ o
.
ùùo p
Comprobante
ùùp {
(
ùù{ |
)
ùù| }
.
ùù} ~"
NumeroDeComprobanteùù~ ë
+ùùí ì
$strùùî ô
+ùùö õ#
movimientoDeAlmacenùùú Ø
.ùùØ ∞
Terceroùù∞ ∑
(ùù∑ ∏
)ùù∏ π
.ùùπ ∫
RazonSocialùù∫ ≈
+ùù∆ «
$strùù» Œ
;ùùŒ œ
return
ûû 
File
ûû 
(
ûû 
	fileBytes
ûû %
,
ûû% &
$str
ûû' 8
,
ûû8 9
fileName
ûû: B
)
ûûB C
;
ûûC D
}
üü 
catch
†† 
(
†† 
LogicaException
†† "
oe
††# %
)
††% &
{
°° 
return
¢¢ 
new
¢¢ "
JsonHttpStatusResult
¢¢ /
(
¢¢/ 0
Util
¢¢0 4
.
¢¢4 5
	ErrorJson
¢¢5 >
(
¢¢> ?
oe
¢¢? A
)
¢¢A B
,
¢¢B C
HttpStatusCode
¢¢D R
.
¢¢R S!
InternalServerError
¢¢S f
)
¢¢f g
;
¢¢g h
}
££ 
catch
§§ 
(
§§ 
	Exception
§§ 
e
§§ 
)
§§ 
{
•• 
return
¶¶ 
new
¶¶ "
JsonHttpStatusResult
¶¶ /
(
¶¶/ 0
Util
¶¶0 4
.
¶¶4 5
	ErrorJson
¶¶5 >
(
¶¶> ?
new
¶¶? B
	Exception
¶¶C L
(
¶¶L M
$str¶¶M è
,¶¶è ê
e¶¶ë í
)¶¶í ì
)¶¶ì î
,¶¶î ï
HttpStatusCode¶¶ñ §
.¶¶§ •#
InternalServerError¶¶• ∏
)¶¶∏ π
;¶¶π ∫
}
ßß 
}
®® 	
public
¨¨ 

JsonResult
¨¨ 7
)ObtenerOrdenesMovimientoInternoMercaderia
¨¨ C
(
¨¨C D
bool
¨¨D H
tipoEntradaSalida
¨¨I Z
,
¨¨Z [
string
¨¨\ b
desde
¨¨c h
,
¨¨h i
string
¨¨j p
hasta
¨¨q v
)
¨¨v w
{
≠≠ 	
DateTime
ÆÆ 

fechaDesde
ÆÆ 
=
ÆÆ  !
DateTimeUtil
ÆÆ" .
.
ÆÆ. /E
7ObtenerFechaDesdeConPrecisionDeHorasMinutosMilisegundos
ÆÆ/ f
(
ÆÆf g
desde
ÆÆg l
)
ÆÆl m
;
ÆÆm n
DateTime
ØØ 

fechaHasta
ØØ 
=
ØØ  !
DateTimeUtil
ØØ" .
.
ØØ. /E
7ObtenerFechaHastaConPrecisionDeHorasMinutosMilisegundos
ØØ/ f
(
ØØf g
hasta
ØØg l
)
ØØl m
;
ØØm n
try
∞∞ 
{
±± 
List
≥≥ 
<
≥≥ $
OrdenDeTrasladoInterno
≥≥ +
>
≥≥+ ,!
ordenesDeMovimiento
≥≥- @
=
≥≥A B
tipoEntradaSalida
≥≥C T
?
≥≥U V
operacionLogica
≥≥W f
.
≥≥f g5
&ObtenerOrdenesIngresoInternoMercaderia≥≥g ç
(≥≥ç é
ProfileData≥≥é ô
(≥≥ô ö
)≥≥ö õ
.≥≥õ ú
Empleado≥≥ú §
.≥≥§ •
Id≥≥• ß
,≥≥ß ®
ProfileData≥≥© ¥
(≥≥¥ µ
)≥≥µ ∂
.≥≥∂ ∑.
IdCentroDeAtencionSeleccionado≥≥∑ ’
,≥≥’ ÷

fechaDesde≥≥◊ ·
,≥≥· ‚

fechaHasta≥≥„ Ì
)≥≥Ì Ó
:≥≥Ô 
operacionLogica
¥¥X g
.
¥¥g h4
%ObtenerOrdenesSalidaInternoMercaderia¥¥h ç
(¥¥ç é
ProfileData¥¥é ô
(¥¥ô ö
)¥¥ö õ
.¥¥õ ú
Empleado¥¥ú §
.¥¥§ •
Id¥¥• ß
,¥¥ß ®
ProfileData¥¥© ¥
(¥¥¥ µ
)¥¥µ ∂
.¥¥∂ ∑.
IdCentroDeAtencionSeleccionado¥¥∑ ’
,¥¥’ ÷

fechaDesde¥¥◊ ·
,¥¥· ‚

fechaHasta¥¥„ Ì
)¥¥Ì Ó
;¥¥Ó Ô
List
µµ 
<
µµ 9
+BandejaMovimientoInternoMercaderiaViewModel
µµ @
>
µµ@ A
	respuesta
µµB K
=
µµL M9
+BandejaMovimientoInternoMercaderiaViewModel
µµN y
.
µµy z
Convertµµz Å
(µµÅ Ç#
ordenesDeMovimientoµµÇ ï
)µµï ñ
;µµñ ó
return
∂∂ 
Json
∂∂ 
(
∂∂ 
	respuesta
∂∂ %
)
∂∂% &
;
∂∂& '
}
∑∑ 
catch
∏∏ 
(
∏∏ 
	Exception
∏∏ 
e
∏∏ 
)
∏∏ 
{
ππ 
return
∫∫ 
Json
∫∫ 
(
∫∫ 
Util
∫∫  
.
∫∫  !
	ErrorJson
∫∫! *
(
∫∫* +
e
∫∫+ ,
)
∫∫, -
)
∫∫- .
;
∫∫. /
}
ªª 
}
ºº 	
public
ææ 

JsonResult
ææ E
7ObtenerMovimientoInternoMercaderiaIncluidoDetallesOrden
ææ Q
(
ææQ R
long
ææR V
idMovimiento
ææW c
)
ææc d
{
øø 	
try
¿¿ 
{
¡¡ 
TrasladoInterno
¬¬ 
	resultado
¬¬  )
=
¬¬* +
operacionLogica
¬¬, ;
.
¬¬; <
ObtenerMovimiento
¬¬< M
(
¬¬M N
idMovimiento
¬¬N Z
)
¬¬Z [
;
¬¬[ \
return
√√ 
Json
√√ 
(
√√ 
new
√√ 4
&MovimientoInternoDeMercaderiaViewModel
√√  F
(
√√F G
	resultado
√√G P
.
√√P Q#
OrdenDeDesplazamiento
√√Q f
(
√√f g
)
√√g h
)
√√h i
)
√√i j
;
√√j k
}
ƒƒ 
catch
≈≈ 
(
≈≈ 
	Exception
≈≈ 
e
≈≈ 
)
≈≈ 
{
∆∆ 
return
«« 
Json
«« 
(
«« 
Util
««  
.
««  !
	ErrorJson
««! *
(
««* +
e
««+ ,
)
««, -
)
««- .
;
««. /
}
»» 
}
…… 	
public
ÀÀ 

JsonResult
ÀÀ 0
"GuardarMovimientoInternoMercaderia
ÀÀ <
(
ÀÀ< =:
,RegistroTrasladoInternoDeMercaderiaViewModel
ÀÀ= i*
movimientoInternoMercaderiaÀÀj Ö
)ÀÀÖ Ü
{
ÃÃ 	
try
ÕÕ 
{
ŒŒ 
OperationResult
œœ 
result
œœ  &
;
œœ& '
List
—— 
<
—— !
Detalle_transaccion
—— (
>
——( )
detalles
——* 2
=
——3 4
new
——5 8
List
——9 =
<
——= >!
Detalle_transaccion
——> Q
>
——Q R
(
——R S
)
——S T
;
——T U
foreach
““ 
(
““ 
var
““ 
item
““ !
in
““" $)
movimientoInternoMercaderia
““% @
.
““@ A
Detalles
““A I
)
““I J
{
”” 
detalles
‘‘ 
.
‘‘ 
Add
‘‘  
(
‘‘  !
new
‘‘! $!
Detalle_transaccion
‘‘% 8
(
‘‘8 9
item
‘‘9 =
.
‘‘= >
Cantidad
‘‘> F
,
‘‘F G
item
‘‘H L
.
‘‘L M
Producto
‘‘M U
.
‘‘U V
Id
‘‘V X
,
‘‘X Y
item
‘‘Z ^
.
‘‘^ _
Observacion
‘‘_ j
,
‘‘j k
$num
‘‘l m
,
‘‘m n
$num
‘‘o p
,
‘‘p q
$num
‘‘r s
,
‘‘s t
$num
‘‘u v
,
‘‘v w
null
‘‘x |
,
‘‘| }
null‘‘~ Ç
,‘‘Ç É
$num‘‘Ñ Ö
,‘‘Ö Ü
$num‘‘á à
,‘‘à â
$num‘‘ä ã
,‘‘ã å
null‘‘ç ë
,‘‘ë í
null‘‘ì ó
,‘‘ó ò
null‘‘ô ù
)‘‘ù û
)‘‘û ü
;‘‘ü †
}
’’ 
if
÷÷ 
(
÷÷ )
movimientoInternoMercaderia
÷÷ /
.
÷÷/ 0
TipoDeComprobante
÷÷0 A
.
÷÷A B
Series
÷÷B H
==
÷÷I K
null
÷÷L P
||
÷÷Q S)
movimientoInternoMercaderia
÷÷T o
.
÷÷o p 
TipoDeComprobante÷÷p Å
.÷÷Å Ç
Series÷÷Ç à
.÷÷à â
Count÷÷â é
<÷÷è ê
$num÷÷ë í
)÷÷í ì
{
◊◊ 
throw
ÿÿ 
new
ÿÿ 
LogicaException
ÿÿ -
(
ÿÿ- .
$strÿÿ. Ñ
)ÿÿÑ Ö
;ÿÿÖ Ü
}
ŸŸ 
result
⁄⁄ 
=
⁄⁄ 
operacionLogica
⁄⁄ (
.
⁄⁄( );
-ConfirmarMovimientoInternoMercaderiaIntegrado
⁄⁄) V
(
⁄⁄V W
ProfileData
⁄⁄W b
(
⁄⁄b c
)
⁄⁄c d
.
⁄⁄d e
Empleado
⁄⁄e m
.
⁄⁄m n
Id
⁄⁄n p
,
⁄⁄p q
ProfileData
€€ 
(
€€  
)
€€  !
.
€€! ",
IdCentroDeAtencionSeleccionado
€€" @
,
€€@ A)
movimientoInternoMercaderia
‹‹ /
.
‹‹/ 0
AlmacenDestino
‹‹0 >
.
‹‹> ?
Id
‹‹? A
,
‹‹A B)
movimientoInternoMercaderia
›› /
.
››/ 0 
ResponsableDestino
››0 B
.
››B C
Id
››C E
,
››E F)
movimientoInternoMercaderia
ﬁﬁ /
.
ﬁﬁ/ 0
TipoDeComprobante
ﬁﬁ0 A
.
ﬁﬁA B
EsPropio
ﬁﬁB J
==
ﬁﬁK M
true
ﬁﬁN R
?
ﬁﬁS T
$num
ﬁﬁU V
:
ﬁﬁW X)
movimientoInternoMercaderia
ﬁﬁY t
.
ﬁﬁt u 
TipoDeComprobanteﬁﬁu Ü
.ﬁﬁÜ á
TipoComprobanteﬁﬁá ñ
.ﬁﬁñ ó
Idﬁﬁó ô
,ﬁﬁô ö)
movimientoInternoMercaderia
ﬂﬂ /
.
ﬂﬂ/ 0
TipoDeComprobante
ﬂﬂ0 A
.
ﬂﬂA B
EsPropio
ﬂﬂB J
==
ﬂﬂK M
true
ﬂﬂN R
&&
ﬂﬂS U)
movimientoInternoMercaderia
ﬂﬂV q
.
ﬂﬂq r 
TipoDeComprobanteﬂﬂr É
.ﬂﬂÉ Ñ!
SerieSeleccionadaﬂﬂÑ ï
==ﬂﬂñ ò
$numﬂﬂô ö
?ﬂﬂõ ú+
movimientoInternoMercaderiaﬂﬂù ∏
.ﬂﬂ∏ π!
TipoDeComprobanteﬂﬂπ  
.ﬂﬂ  À
SeriesﬂﬂÀ —
.ﬂﬂ— “
Firstﬂﬂ“ ◊
(ﬂﬂ◊ ÿ
)ﬂﬂÿ Ÿ
.ﬂﬂŸ ⁄
Idﬂﬂ⁄ ‹
:ﬂﬂ› ﬁ+
movimientoInternoMercaderiaﬂﬂﬂ ˙
.ﬂﬂ˙ ˚!
TipoDeComprobanteﬂﬂ˚ å
.ﬂﬂå ç!
SerieSeleccionadaﬂﬂç û
,ﬂﬂû ü)
movimientoInternoMercaderia
‡‡ /
.
‡‡/ 0
TipoDeComprobante
‡‡0 A
.
‡‡A B
EsPropio
‡‡B J
,
‡‡J K)
movimientoInternoMercaderia
·· /
.
··/ 0
TipoDeComprobante
··0 A
.
··A B
SerieIngresada
··B P
,
··P Q)
movimientoInternoMercaderia
‚‚ /
.
‚‚/ 0
TipoDeComprobante
‚‚0 A
.
‚‚A B
NumeroIngresado
‚‚B Q
,
‚‚Q R)
movimientoInternoMercaderia
„„ /
.
„„/ 0
Observacion
„„0 ;
,
„„; <
detalles
‰‰ 
,
‰‰ 
ProfileData
‰‰ )
(
‰‰) *
)
‰‰* +
)
‰‰+ ,
;
‰‰, -
Util
ÂÂ 
.
ÂÂ 
VerificarError
ÂÂ #
(
ÂÂ# $
result
ÂÂ$ *
)
ÂÂ* +
;
ÂÂ+ ,
return
ÊÊ 
new
ÊÊ "
JsonHttpStatusResult
ÊÊ /
(
ÊÊ/ 0
new
ÊÊ0 3
{
ÊÊ4 5
result
ÊÊ6 <
.
ÊÊ< =
code_result
ÊÊ= H
,
ÊÊH I
data
ÊÊJ N
=
ÊÊO P
result
ÊÊQ W
.
ÊÊW X
information
ÊÊX c
,
ÊÊc d 
result_description
ÊÊe w
=
ÊÊx y
resultÊÊz Ä
.ÊÊÄ Å
titleÊÊÅ Ü
}ÊÊá à
,ÊÊà â
HttpStatusCodeÊÊä ò
.ÊÊò ô
OKÊÊô õ
)ÊÊõ ú
;ÊÊú ù
}
ÁÁ 
catch
ËË 
(
ËË 
LogicaException
ËË "
oe
ËË# %
)
ËË% &
{
ÈÈ 
return
ÍÍ 
new
ÍÍ "
JsonHttpStatusResult
ÍÍ /
(
ÍÍ/ 0
Util
ÍÍ0 4
.
ÍÍ4 5
	ErrorJson
ÍÍ5 >
(
ÍÍ> ?
oe
ÍÍ? A
)
ÍÍA B
,
ÍÍB C
HttpStatusCode
ÍÍD R
.
ÍÍR S!
InternalServerError
ÍÍS f
)
ÍÍf g
;
ÍÍg h
}
ÎÎ 
catch
ÏÏ 
(
ÏÏ 
	Exception
ÏÏ 
e
ÏÏ 
)
ÏÏ 
{
ÌÌ 
return
ÓÓ 
new
ÓÓ "
JsonHttpStatusResult
ÓÓ /
(
ÓÓ/ 0
Util
ÓÓ0 4
.
ÓÓ4 5
	ErrorJson
ÓÓ5 >
(
ÓÓ> ?
new
ÓÓ? B
	Exception
ÓÓC L
(
ÓÓL M
$strÓÓM Å
,ÓÓÅ Ç
eÓÓÉ Ñ
)ÓÓÑ Ö
)ÓÓÖ Ü
,ÓÓÜ á
HttpStatusCodeÓÓà ñ
.ÓÓñ ó#
InternalServerErrorÓÓó ™
)ÓÓ™ ´
;ÓÓ´ ¨
}
ÔÔ 
}
 	
public
ÙÙ 
async
ÙÙ 
Task
ÙÙ 
<
ÙÙ 

JsonResult
ÙÙ $
>
ÙÙ$ %:
,ObtenerTiposDeComprobanteMovimientoDeAlmacen
ÙÙ& R
(
ÙÙR S
)
ÙÙS T
{
ıı 	
try
ˆˆ 
{
˜˜ 
var
¯¯ 

resultados
¯¯ 
=
¯¯  
await
¯¯! &
operacionLogica
¯¯' 6
.
¯¯6 72
$ObtenerTiposDeComprobanteParaAlmacen
¯¯7 [
(
¯¯[ \
ProfileData
¯¯\ g
(
¯¯g h
)
¯¯h i
.
¯¯i j
Empleado
¯¯j r
.
¯¯r s
Id
¯¯s u
,
¯¯u v
ProfileData¯¯w Ç
(¯¯Ç É
)¯¯É Ñ
.¯¯Ñ Ö.
IdCentroDeAtencionSeleccionado¯¯Ö £
)¯¯£ §
;¯¯§ •
List
˘˘ 
<
˘˘ '
SelectorTipoDeComprobante
˘˘ .
>
˘˘. /
comprobantes
˘˘0 <
=
˘˘= >'
SelectorTipoDeComprobante
˘˘? X
.
˘˘X Y
Convert
˘˘Y `
(
˘˘` a

resultados
˘˘a k
,
˘˘k l
ProfileData
˘˘m x
(
˘˘x y
)
˘˘y z
.
˘˘z {-
IdCentroDeAtencionSeleccionado˘˘{ ô
)˘˘ô ö
;˘˘ö õ
return
˙˙ 
Json
˙˙ 
(
˙˙ 
comprobantes
˙˙ (
)
˙˙( )
;
˙˙) *
}
˚˚ 
catch
¸¸ 
(
¸¸ 
	Exception
¸¸ 
e
¸¸ 
)
¸¸ 
{
¸¸  !
throw
¸¸" '
e
¸¸( )
;
¸¸) *
}
¸¸+ ,
}
˝˝ 	
public
ˇˇ 

JsonResult
ˇˇ 4
&ObtenerTipoDeComprobanteGuiaDeRemision
ˇˇ @
(
ˇˇ@ A
)
ˇˇA B
{
ÄÄ 	
try
ÅÅ 
{
ÇÇ 
var
ÉÉ 

resultados
ÉÉ 
=
ÉÉ  
operacionLogica
ÉÉ! 0
.
ÉÉ0 14
&ObtenerTipoDeComprobanteGuiaDeRemision
ÉÉ1 W
(
ÉÉW X
ProfileData
ÉÉX c
(
ÉÉc d
)
ÉÉd e
.
ÉÉe f
Empleado
ÉÉf n
.
ÉÉn o
Id
ÉÉo q
,
ÉÉq r
ProfileData
ÉÉs ~
(
ÉÉ~ 
)ÉÉ Ä
.ÉÉÄ Å.
IdCentroDeAtencionSeleccionadoÉÉÅ ü
)ÉÉü †
;ÉÉ† °
List
ÑÑ 
<
ÑÑ '
SelectorTipoDeComprobante
ÑÑ .
>
ÑÑ. /
comprobantes
ÑÑ0 <
=
ÑÑ= >'
SelectorTipoDeComprobante
ÑÑ? X
.
ÑÑX Y
Convert
ÑÑY `
(
ÑÑ` a

resultados
ÑÑa k
,
ÑÑk l
ProfileData
ÑÑm x
(
ÑÑx y
)
ÑÑy z
.
ÑÑz {-
IdCentroDeAtencionSeleccionadoÑÑ{ ô
)ÑÑô ö
;ÑÑö õ
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
comprobantes
ÖÖ (
)
ÖÖ( )
;
ÖÖ) *
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
e
áá 
)
áá 
{
áá  !
throw
áá" '
e
áá( )
;
áá) *
}
áá+ ,
}
àà 	
public
ää 

JsonResult
ää 3
%ObtenerTipoDeComprobanteNotaDeAlmacen
ää ?
(
ää? @
)
ää@ A
{
ãã 	
try
åå 
{
çç 
var
éé 

resultados
éé 
=
éé  
operacionLogica
éé! 0
.
éé0 13
%ObtenerTipoDeComprobanteNotaDeAlmacen
éé1 V
(
ééV W
ProfileData
ééW b
(
ééb c
)
ééc d
.
ééd e
Empleado
éée m
.
éém n
Id
één p
,
éép q
ProfileData
éér }
(
éé} ~
)
éé~ 
.éé Ä.
IdCentroDeAtencionSeleccionadoééÄ û
)ééû ü
;ééü †
List
èè 
<
èè '
SelectorTipoDeComprobante
èè .
>
èè. /
comprobantes
èè0 <
=
èè= >'
SelectorTipoDeComprobante
èè? X
.
èèX Y
Convert
èèY `
(
èè` a

resultados
èèa k
,
èèk l
ProfileData
èèm x
(
èèx y
)
èèy z
.
èèz {-
IdCentroDeAtencionSeleccionadoèè{ ô
)èèô ö
;èèö õ
return
êê 
Json
êê 
(
êê 
comprobantes
êê (
)
êê( )
;
êê) *
}
ëë 
catch
íí 
(
íí 
	Exception
íí 
e
íí 
)
íí 
{
íí  !
throw
íí" '
e
íí( )
;
íí) *
}
íí+ ,
}
ìì 	
public
ïï 

JsonResult
ïï 5
'ObtenerTiposDeComprobanteOrdenDeAlmacen
ïï A
(
ïïA B
)
ïïB C
{
ññ 	
try
óó 
{
òò 
var
ôô 

resultados
ôô 
=
ôô  
operacionLogica
ôô! 0
.
ôô0 14
&ObtenerTipoDeComprobanteOrdenDeAlmacen
ôô1 W
(
ôôW X
ProfileData
ôôX c
(
ôôc d
)
ôôd e
.
ôôe f
Empleado
ôôf n
.
ôôn o
Id
ôôo q
,
ôôq r
ProfileData
ôôs ~
(
ôô~ 
)ôô Ä
.ôôÄ Å.
IdCentroDeAtencionSeleccionadoôôÅ ü
)ôôü †
;ôô† °
List
öö 
<
öö '
SelectorTipoDeComprobante
öö .
>
öö. /
comprobantes
öö0 <
=
öö= >'
SelectorTipoDeComprobante
öö? X
.
ööX Y
Convert
ööY `
(
öö` a

resultados
ööa k
,
öök l
ProfileData
ööm x
(
ööx y
)
ööy z
.
ööz {-
IdCentroDeAtencionSeleccionadoöö{ ô
)ööô ö
;ööö õ
return
õõ 
Json
õõ 
(
õõ 
comprobantes
õõ (
)
õõ( )
;
õõ) *
}
úú 
catch
ùù 
(
ùù 
	Exception
ùù 
e
ùù 
)
ùù 
{
ùù  !
throw
ùù" '
e
ùù( )
;
ùù) *
}
ùù+ ,
}
ûû 	
public
•• 

JsonResult
•• (
GenerarInventarioHistorico
•• 4
(
••4 5
)
••5 6
{
¶¶ 	
try
ßß 
{
®® 
var
™™ 
	resultado
™™ 
=
™™ '
inventarioHistoricoLogica
™™  9
.
™™9 :>
0CrearInventarioHistoricoClonandoInventarioFisico
™™: j
(
™™j k
ProfileData
™™k v
(
™™v w
)
™™w x
.
™™x y
Empleado™™y Å
.™™Å Ç
Id™™Ç Ñ
)™™Ñ Ö
;™™Ö Ü
Util
´´ 
.
´´ (
ManageIfResultIsNotSuccess
´´ /
(
´´/ 0
	resultado
´´0 9
,
´´9 :
$str
´´; b
)
´´b c
;
´´c d
return
¨¨ 
new
¨¨ "
JsonHttpStatusResult
¨¨ /
(
¨¨/ 0
new
¨¨0 3
{
¨¨4 5
	resultado
¨¨6 ?
.
¨¨? @
code_result
¨¨@ K
,
¨¨K L
	resultado
¨¨M V
.
¨¨V W
data
¨¨W [
,
¨¨[ \ 
result_description
¨¨] o
=
¨¨p q
	resultado
¨¨r {
.
¨¨{ |
title¨¨| Å
}¨¨Ç É
,¨¨É Ñ
HttpStatusCode¨¨Ö ì
.¨¨ì î
OK¨¨î ñ
)¨¨ñ ó
;¨¨ó ò
}
≠≠ 
catch
ÆÆ 
(
ÆÆ 
	Exception
ÆÆ 
e
ÆÆ 
)
ÆÆ 
{
ØØ 
return
∞∞ 
new
∞∞ "
JsonHttpStatusResult
∞∞ /
(
∞∞/ 0
Util
∞∞0 4
.
∞∞4 5
	ErrorJson
∞∞5 >
(
∞∞> ?
new
∞∞? B
	Exception
∞∞C L
(
∞∞L M
$str
∞∞M q
,
∞∞q r
e
∞∞s t
)
∞∞t u
)
∞∞u v
,
∞∞v w
HttpStatusCode∞∞x Ü
.∞∞Ü á#
InternalServerError∞∞á ö
)∞∞ö õ
;∞∞õ ú
}
±± 
}
≤≤ 	
public
¥¥ 

JsonResult
¥¥ 7
)GenerarInventarioHistoricoAutomaticamente
¥¥ C
(
¥¥C D
)
¥¥D E
{
µµ 	
try
∂∂ 
{
∑∑ 
var
∏∏ 
	resultado
∏∏ 
=
∏∏ '
inventarioHistoricoLogica
∏∏  9
.
∏∏9 :>
0CrearInventarioHistoricoClonandoInventarioFisico
∏∏: j
(
∏∏j k
$num
∏∏k l
)
∏∏l m
;
∏∏m n
Util
ππ 
.
ππ (
ManageIfResultIsNotSuccess
ππ /
(
ππ/ 0
	resultado
ππ0 9
,
ππ9 :
$str
ππ; b
)
ππb c
;
ππc d
return
∫∫ 
new
∫∫ "
JsonHttpStatusResult
∫∫ /
(
∫∫/ 0
new
∫∫0 3
{
∫∫4 5
	resultado
∫∫6 ?
.
∫∫? @
code_result
∫∫@ K
,
∫∫K L
	resultado
∫∫M V
.
∫∫V W
data
∫∫W [
,
∫∫[ \ 
result_description
∫∫] o
=
∫∫p q
	resultado
∫∫r {
.
∫∫{ |
title∫∫| Å
}∫∫Ç É
,∫∫É Ñ
HttpStatusCode∫∫Ö ì
.∫∫ì î
OK∫∫î ñ
)∫∫ñ ó
;∫∫ó ò
}
ªª 
catch
ºº 
(
ºº 
	Exception
ºº 
e
ºº 
)
ºº 
{
ΩΩ 
return
ææ 
new
ææ "
JsonHttpStatusResult
ææ /
(
ææ/ 0
Util
ææ0 4
.
ææ4 5
	ErrorJson
ææ5 >
(
ææ> ?
new
ææ? B
	Exception
ææC L
(
ææL M
$str
ææM q
,
ææq r
e
ææs t
)
ææt u
)
ææu v
,
ææv w
HttpStatusCodeææx Ü
.ææÜ á#
InternalServerErrorææá ö
)ææö õ
;ææõ ú
}
øø 
}
¿¿ 	
public
¬¬ 

JsonResult
¬¬ 6
(ObtenerFechaDelUltimoInventarioHistorico
¬¬ B
(
¬¬B C
)
¬¬C D
{
√√ 	
try
ƒƒ 
{
≈≈ 
var
∆∆ 
	resultado
∆∆ 
=
∆∆ '
inventarioHistoricoLogica
∆∆  9
.
∆∆9 :6
(ObtenerFechaDelUltimoInventarioHistorico
∆∆: b
(
∆∆b c
ProfileData
∆∆c n
(
∆∆n o
)
∆∆o p
.
∆∆p q-
IdCentroDeAtencionSeleccionado∆∆q è
)∆∆è ê
;∆∆ê ë
return
«« 
Json
«« 
(
«« 
	resultado
«« %
.
««% &
ToString
««& .
(
««. /
$str
««/ D
)
««D E
)
««E F
;
««F G
}
»» 
catch
   
(
   
	Exception
   
e
   
)
   
{
ÀÀ 
return
ÃÃ 
new
ÃÃ "
JsonHttpStatusResult
ÃÃ /
(
ÃÃ/ 0
Util
ÃÃ0 4
.
ÃÃ4 5
	ErrorJson
ÃÃ5 >
(
ÃÃ> ?
new
ÃÃ? B
	Exception
ÃÃC L
(
ÃÃL M
$strÃÃM Ç
,ÃÃÇ É
eÃÃÑ Ö
)ÃÃÖ Ü
)ÃÃÜ á
,ÃÃá à
HttpStatusCodeÃÃâ ó
.ÃÃó ò#
InternalServerErrorÃÃò ´
)ÃÃ´ ¨
;ÃÃ¨ ≠
}
ÕÕ 
}
ŒŒ 	
public
‘‘ 
ActionResult
‘‘ $
ConsultarGuiasRemision
‘‘ 2
(
‘‘2 3
)
‘‘3 4
{
’’ 	
List
÷÷ 
<
÷÷ 
string
÷÷ 
>
÷÷ 
fechas
÷÷ 
=
÷÷  !
operacionLogica
÷÷" 1
.
÷÷1 25
'ObtenerFechaIncioyFinParaReporteAlmacen
÷÷2 Y
(
÷÷Y Z
)
÷÷Z [
;
÷÷[ \
ViewBag
◊◊ 
.
◊◊ 
fechaInicio
◊◊ 
=
◊◊  !
fechas
◊◊" (
[
◊◊( )
$num
◊◊) *
]
◊◊* +
;
◊◊+ ,
ViewBag
ÿÿ 
.
ÿÿ 
fechaFin
ÿÿ 
=
ÿÿ 
fechas
ÿÿ %
[
ÿÿ% &
$num
ÿÿ& '
]
ÿÿ' (
;
ÿÿ( )
ViewBag
ŸŸ 
.
ŸŸ )
idEstablecimientoPorDefecto
ŸŸ /
=
ŸŸ0 1
ProfileData
ŸŸ2 =
(
ŸŸ= >
)
ŸŸ> ?
.
ŸŸ? @*
CentroDeAtencionSeleccionado
ŸŸ@ \
.
ŸŸ\ ]&
EstablecimientoComercial
ŸŸ] u
.
ŸŸu v
Id
ŸŸv x
;
ŸŸx y
ViewBag
⁄⁄ 
.
⁄⁄ *
idCentroDeAtencionPorDefecto
⁄⁄ 0
=
⁄⁄1 2
ProfileData
⁄⁄3 >
(
⁄⁄> ?
)
⁄⁄? @
.
⁄⁄@ A*
CentroDeAtencionSeleccionado
⁄⁄A ]
.
⁄⁄] ^
Id
⁄⁄^ `
;
⁄⁄` a
ViewBag
‹‹ 
.
‹‹ 
	WCPScript
‹‹ 
=
‹‹ 
WebClientPrint
‹‹  .
.
‹‹. /
CreateScript
‹‹/ ;
(
‹‹; <
Url
›› 
.
›› 
Action
›› 
(
›› 
$str
›› '
,
››' (
$str
››) <
,
››< =
null
››> B
,
››B C
HttpContext
››D O
.
››O P
Request
››P W
.
››W X
Url
››X [
.
››[ \
Scheme
››\ b
)
››b c
,
››c d
Url
ﬁﬁ 
.
ﬁﬁ 
Action
ﬁﬁ 
(
ﬁﬁ 
$str
ﬁﬁ "
,
ﬁﬁ" #
$str
ﬁﬁ$ -
,
ﬁﬁ- .
null
ﬁﬁ/ 3
,
ﬁﬁ3 4
HttpContext
ﬁﬁ5 @
.
ﬁﬁ@ A
Request
ﬁﬁA H
.
ﬁﬁH I
Url
ﬁﬁI L
.
ﬁﬁL M
Scheme
ﬁﬁM S
)
ﬁﬁS T
,
ﬁﬁT U
HttpContext
ﬁﬁV a
.
ﬁﬁa b
Session
ﬁﬁb i
.
ﬁﬁi j
	SessionID
ﬁﬁj s
)
ﬁﬁs t
;
ﬁﬁt u
return
ﬂﬂ 
View
ﬂﬂ 
(
ﬂﬂ 
)
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 	
public
·· 
async
·· 
Task
·· 
<
·· 

JsonResult
·· $
>
··$ %"
ObtenerGuiasRemision
··& :
(
··: ;
int
··; >
[
··> ?
]
··? @"
idsCentrosDeAtencion
··A U
,
··U V
string
··W ]
desde
··^ c
,
··c d
string
··e k
hasta
··l q
)
··q r
{
‚‚ 	
DateTime
„„ 

fechaDesde
„„ 
=
„„  !
DateTimeUtil
„„" .
.
„„. /E
7ObtenerFechaDesdeConPrecisionDeHorasMinutosMilisegundos
„„/ f
(
„„f g
desde
„„g l
)
„„l m
;
„„m n
DateTime
‰‰ 

fechaHasta
‰‰ 
=
‰‰  !
DateTimeUtil
‰‰" .
.
‰‰. /E
7ObtenerFechaHastaConPrecisionDeHorasMinutosMilisegundos
‰‰/ f
(
‰‰f g
hasta
‰‰g l
)
‰‰l m
;
‰‰m n
try
ÂÂ 
{
ÊÊ 
var
ÁÁ 
guiasRemision
ÁÁ !
=
ÁÁ" #
operacionLogica
ÁÁ$ 3
.
ÁÁ3 4"
ObtenerGuiasRemision
ÁÁ4 H
(
ÁÁH I"
idsCentrosDeAtencion
ÁÁI ]
,
ÁÁ] ^

fechaDesde
ÁÁ_ i
,
ÁÁi j

fechaHasta
ÁÁk u
)
ÁÁu v
;
ÁÁv w
var
ËË !
motivosDeTransporte
ËË '
=
ËË( )
await
ËË* /
maestroLogica
ËË0 =
.
ËË= >)
ObtenerMotivosTrasladoAsync
ËË> Y
(
ËËY Z
)
ËËZ [
;
ËË[ \
List
ÈÈ 
<
ÈÈ 2
$BandejaMovimientoMercaderiaViewModel
ÈÈ 9
>
ÈÈ9 :
	respuesta
ÈÈ; D
=
ÈÈE F2
$BandejaMovimientoMercaderiaViewModel
ÈÈG k
.
ÈÈk l
Convert
ÈÈl s
(
ÈÈs t
guiasRemisionÈÈt Å
,ÈÈÅ Ç#
motivosDeTransporteÈÈÉ ñ
)ÈÈñ ó
;ÈÈó ò
return
ÍÍ 
Json
ÍÍ 
(
ÍÍ 
	respuesta
ÍÍ %
)
ÍÍ% &
;
ÍÍ& '
}
ÎÎ 
catch
ÏÏ 
(
ÏÏ 
	Exception
ÏÏ 
e
ÏÏ 
)
ÏÏ 
{
ÌÌ 
return
ÓÓ 
Json
ÓÓ 
(
ÓÓ 
Util
ÓÓ  
.
ÓÓ  !
	ErrorJson
ÓÓ! *
(
ÓÓ* +
e
ÓÓ+ ,
)
ÓÓ, -
)
ÓÓ- .
;
ÓÓ. /
}
ÔÔ 
}
 	
public
ÚÚ 
async
ÚÚ 
Task
ÚÚ 
<
ÚÚ 

JsonResult
ÚÚ $
>
ÚÚ$ %!
ObtenerGuiaRemision
ÚÚ& 9
(
ÚÚ9 :
long
ÚÚ: >
idGuiaRemision
ÚÚ? M
)
ÚÚM N
{
ÛÛ 	
try
ÙÙ 
{
ıı !
MovimientoDeAlmacen
ˆˆ #
guiaRemision
ˆˆ$ 0
=
ˆˆ1 2
operacionLogica
ˆˆ3 B
.
ˆˆB C!
ObtenerGuiaRemision
ˆˆC V
(
ˆˆV W
idGuiaRemision
ˆˆW e
)
ˆˆe f
;
ˆˆf g
int
˜˜ 
[
˜˜ 
]
˜˜ 

idsUbigeos
˜˜  
=
˜˜! "
{
˜˜# $
Convert
˜˜% ,
.
˜˜, -
ToInt32
˜˜- 4
(
˜˜4 5
guiaRemision
˜˜5 A
.
˜˜A B&
IdUbigeoOrigenDeTraslado
˜˜B Z
(
˜˜Z [
)
˜˜[ \
)
˜˜\ ]
,
˜˜] ^
Convert
˜˜_ f
.
˜˜f g
ToInt32
˜˜g n
(
˜˜n o
guiaRemision
˜˜o {
.
˜˜{ |(
IdUbigeoDestinoDeTraslado˜˜| ï
(˜˜ï ñ
)˜˜ñ ó
)˜˜ó ò
}˜˜ô ö
;˜˜ö õ
var
¯¯ 
ubigeos
¯¯ 
=
¯¯ 
maestroLogica
¯¯ +
.
¯¯+ ,
obtenerUbigeo
¯¯, 9
(
¯¯9 :

idsUbigeos
¯¯: D
)
¯¯D E
;
¯¯E F
guiaRemision
˘˘ 
.
˘˘ 
UbigeoOrigen
˘˘ )
=
˘˘* +
ubigeos
˘˘, 3
.
˘˘3 4
Single
˘˘4 :
(
˘˘: ;
u
˘˘; <
=>
˘˘= ?
u
˘˘@ A
.
˘˘A B
id
˘˘B D
==
˘˘E G
Convert
˘˘H O
.
˘˘O P
ToInt32
˘˘P W
(
˘˘W X
guiaRemision
˘˘X d
.
˘˘d e&
IdUbigeoOrigenDeTraslado
˘˘e }
(
˘˘} ~
)
˘˘~ 
)˘˘ Ä
)˘˘Ä Å
.˘˘Å Ç!
descripcion_corta˘˘Ç ì
;˘˘ì î
guiaRemision
˙˙ 
.
˙˙ 
UbigeoDestino
˙˙ *
=
˙˙+ ,
ubigeos
˙˙- 4
.
˙˙4 5
Single
˙˙5 ;
(
˙˙; <
u
˙˙< =
=>
˙˙> @
u
˙˙A B
.
˙˙B C
id
˙˙C E
==
˙˙F H
Convert
˙˙I P
.
˙˙P Q
ToInt32
˙˙Q X
(
˙˙X Y
guiaRemision
˙˙Y e
.
˙˙e f'
IdUbigeoDestinoDeTraslado
˙˙f 
(˙˙ Ä
)˙˙Ä Å
)˙˙Å Ç
)˙˙Ç É
.˙˙É Ñ!
descripcion_corta˙˙Ñ ï
;˙˙ï ñ
var
˚˚ 
sede
˚˚ 
=
˚˚ 
ObtenerSede
˚˚ &
(
˚˚& '
)
˚˚' (
;
˚˚( )
var
¸¸ 
proveedores
¸¸ 
=
¸¸  ! 
actorNegocioLogica
¸¸" 4
.
¸¸4 5(
ObtenerProveedoresVigentes
¸¸5 O
(
¸¸O P
)
¸¸P Q
;
¸¸Q R
var
˝˝ %
modalidadesDeTransporte
˝˝ +
=
˝˝, -
await
˝˝. 3
maestroLogica
˝˝4 A
.
˝˝A B-
ObtenerModalidadesTrasladoAsync
˝˝B a
(
˝˝a b
)
˝˝b c
;
˝˝c d
var
˛˛ !
motivosDeTransporte
˛˛ '
=
˛˛( )
await
˛˛* /
maestroLogica
˛˛0 =
.
˛˛= >)
ObtenerMotivosTrasladoAsync
˛˛> Y
(
˛˛Y Z
)
˛˛Z [
;
˛˛[ \
byte
ˇˇ 
[
ˇˇ 
]
ˇˇ 
byteQr
ˇˇ 
=
ˇˇ 
barCodeUtil
ˇˇ  +
.
ˇˇ+ ,
ObtenerCodigoQR
ˇˇ, ;
(
ˇˇ; <
guiaRemision
ˇˇ< H
.
ˇˇH I
UrlDocumentoSunat
ˇˇI Z
)
ˇˇZ [
;
ˇˇ[ \
var
ÄÄ 
	documento
ÄÄ 
=
ÄÄ 
new
ÄÄ  #+
DocumentoDeOperacionViewModel
ÄÄ$ A
(
ÄÄA B
)
ÄÄB C
{
ÅÅ 
Id
ÇÇ 
=
ÇÇ 
idGuiaRemision
ÇÇ '
,
ÇÇ' ("
SerieNumeroDocumento
ÉÉ (
=
ÉÉ) *
guiaRemision
ÉÉ+ 7
.
ÉÉ7 8
Comprobante
ÉÉ8 C
(
ÉÉC D
)
ÉÉD E
.
ÉÉE F
NumeroDeSerie
ÉÉF S
+
ÉÉT U
$str
ÉÉV [
+
ÉÉ\ ]
guiaRemision
ÉÉ^ j
.
ÉÉj k
Comprobante
ÉÉk v
(
ÉÉv w
)
ÉÉw x
.
ÉÉx y"
NumeroDeComprobanteÉÉy å
,ÉÉå ç'
CadenaHtmlDeComprobante80
ÖÖ -
=
ÖÖ. /#
CoreHtmlStringBuilder
ÖÖ0 E
.
ÖÖE F
ObtenerHtmlString
ÖÖF W
(
ÖÖW X
guiaRemision
ÖÖX d
,
ÖÖd e
FormatoImpresion
ÖÖf v
.
ÖÖv w
_80mm
ÖÖw |
,
ÖÖ| }
byteQrÖÖ~ Ñ
,ÖÖÑ Ö
sedeÖÖÜ ä
,ÖÖä ã
proveedoresÖÖå ó
,ÖÖó ò'
modalidadesDeTransporteÖÖô ∞
,ÖÖ∞ ±#
motivosDeTransporteÖÖ≤ ≈
,ÖÖ≈ ∆
thisÖÖ« À
)ÖÖÀ Ã
,ÖÖÃ Õ'
CadenaHtmlDeComprobanteA4
ÜÜ -
=
ÜÜ. /#
CoreHtmlStringBuilder
ÜÜ0 E
.
ÜÜE F
ObtenerHtmlString
ÜÜF W
(
ÜÜW X
guiaRemision
ÜÜX d
,
ÜÜd e
FormatoImpresion
ÜÜf v
.
ÜÜv w
A4
ÜÜw y
,
ÜÜy z
byteQrÜÜ{ Å
,ÜÜÅ Ç
sedeÜÜÉ á
,ÜÜá à
proveedoresÜÜâ î
,ÜÜî ï'
modalidadesDeTransporteÜÜñ ≠
,ÜÜ≠ Æ#
motivosDeTransporteÜÜØ ¬
,ÜÜ¬ √
thisÜÜƒ »
)ÜÜ» …
}
áá 
;
áá 
return
àà 
Json
àà 
(
àà 
	documento
àà %
)
àà% &
;
àà& '
}
ââ 
catch
ää 
(
ää 
	Exception
ää 
e
ää 
)
ää 
{
ãã 
return
åå 
Json
åå 
(
åå 
Util
åå  
.
åå  !
	ErrorJson
åå! *
(
åå* +
e
åå+ ,
)
åå, -
)
åå- .
;
åå. /
}
çç 
}
éé 	
public
êê 
async
êê 
Task
êê 
<
êê 

JsonResult
êê $
>
êê$ %7
)ObtenerTiposDeComprobanteParaGuiaRemision
êê& O
(
êêO P
)
êêP Q
{
ëë 	
try
íí 
{
ìì 
var
îî 

resultados
îî 
=
îî  
await
îî! &
operacionLogica
îî' 6
.
îî6 77
)ObtenerTiposDeComprobanteParaGuiaRemision
îî7 `
(
îî` a
ProfileData
îîa l
(
îîl m
)
îîm n
.
îîn o
Empleado
îîo w
.
îîw x
Id
îîx z
,
îîz {
ProfileDataîî| á
(îîá à
)îîà â
.îîâ ä.
IdCentroDeAtencionSeleccionadoîîä ®
)îî® ©
;îî© ™
List
ïï 
<
ïï '
SelectorTipoDeComprobante
ïï .
>
ïï. /
comprobantes
ïï0 <
=
ïï= >'
SelectorTipoDeComprobante
ïï? X
.
ïïX Y
Convert
ïïY `
(
ïï` a

resultados
ïïa k
)
ïïk l
;
ïïl m
return
ññ 
Json
ññ 
(
ññ 
comprobantes
ññ (
)
ññ( )
;
ññ) *
}
óó 
catch
òò 
(
òò 
	Exception
òò 
e
òò 
)
òò 
{
ôô 
return
öö 
Json
öö 
(
öö 
Util
öö  
.
öö  !
	ErrorJson
öö! *
(
öö* +
e
öö+ ,
)
öö, -
)
öö- .
;
öö. /
}
õõ 
}
úú 	
public
ûû 

JsonResult
ûû B
4ObtenerTiposDeComprobanteParaGuiaRemisionNotaAlmacen
ûû N
(
ûûN O
)
ûûO P
{
üü 	
try
†† 
{
°° 
var
¢¢ 

resultados
¢¢ 
=
¢¢  
operacionLogica
¢¢! 0
.
¢¢0 1>
0ObtenerTiposDeComprobanteGuiaRemisionNotaAlmacen
¢¢1 a
(
¢¢a b
ProfileData
¢¢b m
(
¢¢m n
)
¢¢n o
.
¢¢o p
Empleado
¢¢p x
.
¢¢x y
Id
¢¢y {
,
¢¢{ |
ProfileData¢¢} à
(¢¢à â
)¢¢â ä
.¢¢ä ã.
IdCentroDeAtencionSeleccionado¢¢ã ©
)¢¢© ™
;¢¢™ ´
List
££ 
<
££ '
SelectorTipoDeComprobante
££ .
>
££. /
comprobantes
££0 <
=
££= >'
SelectorTipoDeComprobante
££? X
.
££X Y
Convert
££Y `
(
££` a

resultados
££a k
)
££k l
;
££l m
return
§§ 
Json
§§ 
(
§§ 
comprobantes
§§ (
)
§§( )
;
§§) *
}
•• 
catch
¶¶ 
(
¶¶ 
	Exception
¶¶ 
e
¶¶ 
)
¶¶ 
{
ßß 
return
®® 
Json
®® 
(
®® 
Util
®®  
.
®®  !
	ErrorJson
®®! *
(
®®* +
e
®®+ ,
)
®®, -
)
®®- .
;
®®. /
}
©© 
}
™™ 	
public
¨¨ 
async
¨¨ 
Task
¨¨ 
<
¨¨ 

JsonResult
¨¨ $
>
¨¨$ %!
GuardarGuiaRemision
¨¨& 9
(
¨¨9 :2
$RegistroMovimientoDeAlmacenViewModel
¨¨: ^
guiaRemision
¨¨_ k
)
¨¨k l
{
≠≠ 	
try
ÆÆ 
{
ØØ 
OperationResult
∞∞ 
result
∞∞  &
;
∞∞& '
List
≤≤ 
<
≤≤ !
Detalle_transaccion
≤≤ (
>
≤≤( )
detalles
≤≤* 2
=
≤≤3 42
$ConstruirDetalleMovimientoMercaderia
≤≤5 Y
(
≤≤Y Z
guiaRemision
≤≤Z f
)
≤≤f g
;
≤≤g h
result
¥¥ 
=
¥¥ 
operacionLogica
¥¥ (
.
¥¥( )!
GuardarGuiaRemision
¥¥) <
(
¥¥< =
guiaRemision
¥¥= I
.
¥¥I J
Tercero
¥¥J Q
.
¥¥Q R
Id
¥¥R T
,
¥¥T U
guiaRemision
¥¥V b
.
¥¥b c
TipoDeComprobante
¥¥c t
.
¥¥t u
EsPropio
¥¥u }
,
¥¥} ~
guiaRemision¥¥ ã
.¥¥ã å!
TipoDeComprobante¥¥å ù
.¥¥ù û
TipoComprobante¥¥û ≠
==¥¥Æ ∞
null¥¥± µ
?¥¥∂ ∑
$num¥¥∏ π
:¥¥∫ ª
guiaRemision¥¥º »
.¥¥» …!
TipoDeComprobante¥¥… ⁄
.¥¥⁄ €
TipoComprobante¥¥€ Í
.¥¥Í Î
Id¥¥Î Ì
,¥¥Ì Ó
guiaRemision¥¥Ô ˚
.¥¥˚ ¸!
TipoDeComprobante¥¥¸ ç
.¥¥ç é!
SerieSeleccionada¥¥é ü
,¥¥ü †
guiaRemision¥¥° ≠
.¥¥≠ Æ!
TipoDeComprobante¥¥Æ ø
.¥¥ø ¿
SerieIngresada¥¥¿ Œ
,¥¥Œ œ
guiaRemision¥¥– ‹
.¥¥‹ ›!
TipoDeComprobante¥¥› Ó
.¥¥Ó Ô
NumeroIngresado¥¥Ô ˛
,¥¥˛ ˇ
guiaRemision¥¥Ä å
.¥¥å ç#
FechaInicioTraslado¥¥ç †
,¥¥† °
guiaRemision¥¥¢ Æ
.¥¥Æ Ø
Transportista¥¥Ø º
.¥¥º Ω
Transportista¥¥Ω  
==¥¥À Õ
null¥¥Œ “
?¥¥” ‘
$num¥¥’ ÷
:¥¥◊ ÿ
guiaRemision¥¥Ÿ Â
.¥¥Â Ê
Transportista¥¥Ê Û
.¥¥Û Ù
Transportista¥¥Ù Å
.¥¥Å Ç
Id¥¥Ç Ñ
,¥¥Ñ Ö
guiaRemision¥¥Ü í
.¥¥í ì
Transportista¥¥ì †
.¥¥† °
Placa¥¥° ¶
,¥¥¶ ß
guiaRemision¥¥® ¥
.¥¥¥ µ
	Conductor¥¥µ æ
.¥¥æ ø
	Conductor¥¥ø »
==¥¥… À
null¥¥Ã –
?¥¥— “
$num¥¥” ‘
:¥¥’ ÷
guiaRemision¥¥◊ „
.¥¥„ ‰
	Conductor¥¥‰ Ì
.¥¥Ì Ó
	Conductor¥¥Ó ˜
.¥¥˜ ¯
Id¥¥¯ ˙
,¥¥˙ ˚
guiaRemision¥¥¸ à
.¥¥à â
	Conductor¥¥â í
.¥¥í ì
NumeroLicencia¥¥ì °
,¥¥° ¢
guiaRemision¥¥£ Ø
.¥¥Ø ∞#
ModalidadTransporte¥¥∞ √
==¥¥ƒ ∆
null¥¥« À
?¥¥Ã Õ
$num¥¥Œ œ
:¥¥– —
guiaRemision¥¥“ ﬁ
.¥¥ﬁ ﬂ#
ModalidadTransporte¥¥ﬂ Ú
.¥¥Ú Û
Id¥¥Û ı
,¥¥ı ˆ
guiaRemision¥¥˜ É
.¥¥É Ñ
MotivoTraslado¥¥Ñ í
==¥¥ì ï
null¥¥ñ ö
?¥¥õ ú
$num¥¥ù û
:¥¥ü †
guiaRemision¥¥° ≠
.¥¥≠ Æ
MotivoTraslado¥¥Æ º
.¥¥º Ω
Id¥¥Ω ø
,¥¥ø ¿
guiaRemision¥¥¡ Õ
.¥¥Õ Œ!
DescripcionMotivo¥¥Œ ﬂ
,¥¥ﬂ ‡
guiaRemision¥¥· Ì
.¥¥Ì Ó
PesoBrutoTotal¥¥Ó ¸
,¥¥¸ ˝
guiaRemision¥¥˛ ä
.¥¥ä ã
NumeroBultos¥¥ã ó
,¥¥ó ò
guiaRemision¥¥ô •
.¥¥• ¶
DireccionOrigen¥¥¶ µ
,¥¥µ ∂
guiaRemision¥¥∑ √
.¥¥√ ƒ
UbigeoOrigen¥¥ƒ –
==¥¥— ”
null¥¥‘ ÿ
?¥¥Ÿ ⁄
$num¥¥€ ‹
:¥¥› ﬁ
guiaRemision¥¥ﬂ Î
.¥¥Î Ï
UbigeoOrigen¥¥Ï ¯
.¥¥¯ ˘
Id¥¥˘ ˚
,¥¥˚ ¸
guiaRemision¥¥˝ â
.¥¥â ä 
DireccionDestino¥¥ä ö
,¥¥ö õ
guiaRemision¥¥ú ®
.¥¥® ©
UbigeoDestino¥¥© ∂
==¥¥∑ π
null¥¥∫ æ
?¥¥ø ¿
$num¥¥¡ ¬
:¥¥√ ƒ
guiaRemision¥¥≈ —
.¥¥— “
UbigeoDestino¥¥“ ﬂ
.¥¥ﬂ ‡
Id¥¥‡ ‚
,¥¥‚ „
guiaRemision¥¥‰ 
.¥¥ Ò#
DocumentoReferencia¥¥Ò Ñ	
,¥¥Ñ	 Ö	
guiaRemision¥¥Ü	 í	
.¥¥í	 ì	
Observacion¥¥ì	 û	
,¥¥û	 ü	
detalles¥¥†	 ®	
,¥¥®	 ©	
ProfileData¥¥™	 µ	
(¥¥µ	 ∂	
)¥¥∂	 ∑	
)¥¥∑	 ∏	
;¥¥∏	 π	
Util
µµ 
.
µµ (
ManageIfResultIsNotSuccess
µµ /
(
µµ/ 0
result
µµ0 6
,
µµ6 7
$str
µµ8 g
)
µµg h
;
µµh i
string
∂∂ 
path
∂∂ 
=
∂∂  
HostingEnvironment
∂∂ 0
.
∂∂0 1%
ApplicationPhysicalPath
∂∂1 H
;
∂∂H I
await
∑∑ *
facturacionElectronicaLogica
∑∑ 2
.
∑∑2 3,
TransmitirEnviarGuiaDeRemision
∑∑3 Q
(
∑∑Q R
result
∑∑R X
.
∑∑X Y
data
∑∑Y ]
,
∑∑] ^
ProfileData
∑∑_ j
(
∑∑j k
)
∑∑k l
.
∑∑l m
Sede
∑∑m q
,
∑∑q r
ProfileData
∑∑s ~
(
∑∑~ 
)∑∑ Ä
.∑∑Ä Å
Empleado∑∑Å â
.∑∑â ä
Id∑∑ä å
,∑∑å ç
path∑∑é í
)∑∑í ì
;∑∑ì î
return
∏∏ 
new
∏∏ "
JsonHttpStatusResult
∏∏ /
(
∏∏/ 0
new
∏∏0 3
{
∏∏4 5
result
∏∏6 <
.
∏∏< =
code_result
∏∏= H
,
∏∏H I
result
∏∏J P
.
∏∏P Q
data
∏∏Q U
,
∏∏U V 
result_description
∏∏W i
=
∏∏j k
result
∏∏l r
.
∏∏r s
title
∏∏s x
}
∏∏y z
,
∏∏z {
HttpStatusCode∏∏| ä
.∏∏ä ã
OK∏∏ã ç
)∏∏ç é
;∏∏é è
}
ππ 
catch
∫∫ 
(
∫∫ 
LogicaException
∫∫ "
oe
∫∫# %
)
∫∫% &
{
ªª 
return
ºº 
new
ºº "
JsonHttpStatusResult
ºº /
(
ºº/ 0
Util
ºº0 4
.
ºº4 5
	ErrorJson
ºº5 >
(
ºº> ?
oe
ºº? A
)
ººA B
,
ººB C
HttpStatusCode
ººD R
.
ººR S!
InternalServerError
ººS f
)
ººf g
;
ººg h
}
ΩΩ 
catch
ææ 
(
ææ 
	Exception
ææ 
e
ææ 
)
ææ 
{
øø 
return
¿¿ 
new
¿¿ "
JsonHttpStatusResult
¿¿ /
(
¿¿/ 0
Util
¿¿0 4
.
¿¿4 5
	ErrorJson
¿¿5 >
(
¿¿> ?
new
¿¿? B
	Exception
¿¿C L
(
¿¿L M
$str
¿¿M v
,
¿¿v w
e
¿¿x y
)
¿¿y z
)
¿¿z {
,
¿¿{ |
HttpStatusCode¿¿} ã
.¿¿ã å#
InternalServerError¿¿å ü
)¿¿ü †
;¿¿† °
}
¡¡ 
}
¬¬ 	
public
√√ 
async
√√ 
Task
√√ 
<
√√ 

JsonResult
√√ $
>
√√$ %1
#EnviarCorreoElectronicoConDocumento
√√& I
(
√√I J
long
√√J N
idGuiaRemision
√√O ]
,
√√] ^
int
√√_ b
formato
√√c j
,
√√j k
List
√√l p
<
√√p q
string
√√q w
>
√√w x"
correosElectronicos√√y å
)√√å ç
{
ƒƒ 	
try
≈≈ 
{
∆∆ !
MovimientoDeAlmacen
«« #
guiaRemision
««$ 0
=
««1 2
operacionLogica
««3 B
.
««B C!
ObtenerGuiaRemision
««C V
(
««V W
idGuiaRemision
««W e
)
««e f
;
««f g
int
»» 
[
»» 
]
»» 

idsUbigeos
»»  
=
»»! "
{
»»# $
Convert
»»% ,
.
»», -
ToInt32
»»- 4
(
»»4 5
guiaRemision
»»5 A
.
»»A B&
IdUbigeoOrigenDeTraslado
»»B Z
(
»»Z [
)
»»[ \
)
»»\ ]
,
»»] ^
Convert
»»_ f
.
»»f g
ToInt32
»»g n
(
»»n o
guiaRemision
»»o {
.
»»{ |(
IdUbigeoDestinoDeTraslado»»| ï
(»»ï ñ
)»»ñ ó
)»»ó ò
}»»ô ö
;»»ö õ
var
…… 
ubigeos
…… 
=
…… 
maestroLogica
…… +
.
……+ ,
obtenerUbigeo
……, 9
(
……9 :

idsUbigeos
……: D
)
……D E
;
……E F
guiaRemision
   
.
   
UbigeoOrigen
   )
=
  * +
ubigeos
  , 3
.
  3 4
Single
  4 :
(
  : ;
u
  ; <
=>
  = ?
u
  @ A
.
  A B
id
  B D
==
  E G
Convert
  H O
.
  O P
ToInt32
  P W
(
  W X
guiaRemision
  X d
.
  d e&
IdUbigeoOrigenDeTraslado
  e }
(
  } ~
)
  ~ 
)   Ä
)  Ä Å
.  Å Ç!
descripcion_corta  Ç ì
;  ì î
guiaRemision
ÀÀ 
.
ÀÀ 
UbigeoDestino
ÀÀ *
=
ÀÀ+ ,
ubigeos
ÀÀ- 4
.
ÀÀ4 5
Single
ÀÀ5 ;
(
ÀÀ; <
u
ÀÀ< =
=>
ÀÀ> @
u
ÀÀA B
.
ÀÀB C
id
ÀÀC E
==
ÀÀF H
Convert
ÀÀI P
.
ÀÀP Q
ToInt32
ÀÀQ X
(
ÀÀX Y
guiaRemision
ÀÀY e
.
ÀÀe f'
IdUbigeoDestinoDeTraslado
ÀÀf 
(ÀÀ Ä
)ÀÀÄ Å
)ÀÀÅ Ç
)ÀÀÇ É
.ÀÀÉ Ñ!
descripcion_cortaÀÀÑ ï
;ÀÀï ñ
var
ÃÃ 
sede
ÃÃ 
=
ÃÃ 
ObtenerSede
ÃÃ &
(
ÃÃ& '
)
ÃÃ' (
;
ÃÃ( )
var
ÕÕ 
proveedores
ÕÕ 
=
ÕÕ  ! 
actorNegocioLogica
ÕÕ" 4
.
ÕÕ4 5(
ObtenerProveedoresVigentes
ÕÕ5 O
(
ÕÕO P
)
ÕÕP Q
;
ÕÕQ R
var
ŒŒ %
modalidadesDeTransporte
ŒŒ +
=
ŒŒ, -
await
ŒŒ. 3
maestroLogica
ŒŒ4 A
.
ŒŒA B-
ObtenerModalidadesTrasladoAsync
ŒŒB a
(
ŒŒa b
)
ŒŒb c
;
ŒŒc d
var
œœ !
motivosDeTransporte
œœ '
=
œœ( )
await
œœ* /
maestroLogica
œœ0 =
.
œœ= >)
ObtenerMotivosTrasladoAsync
œœ> Y
(
œœY Z
)
œœZ [
;
œœ[ \
byte
–– 
[
–– 
]
–– 
byteQr
–– 
=
–– 
barCodeUtil
––  +
.
––+ ,
ObtenerCodigoQR
––, ;
(
––; <
guiaRemision
––< H
.
––H I
UrlDocumentoSunat
––I Z
)
––Z [
;
––[ \
PdfDocument
—— 
pdfGuia
—— #
=
——$ %

PdfBuilder
——& 0
.
——0 1.
 ObtenerPdfMovimientoDeMercaderia
——1 Q
(
——Q R
guiaRemision
——R ^
,
——^ _
sede
——` d
,
——d e
byteQr
——f l
,
——l m
(
——n o
FormatoImpresion
——o 
)—— Ä
formato——Ä á
,——á à
proveedores——â î
,——î ï'
modalidadesDeTransporte——ñ ≠
,——≠ Æ#
motivosDeTransporte——Ø ¬
,——¬ √
this——ƒ »
)——» …
;——…  
string
““ 
asunto
““ 
=
““ 
operacionLogica
““  /
.
““/ 0.
 ObtenerAsuntoDeCorreoElectronico
““0 P
(
““P Q
sede
““Q U
,
““U V
guiaRemision
““W c
)
““c d
;
““d e
string
”” 
cuerpo
”” 
=
”” 
operacionLogica
””  /
.
””/ 0.
 ObtenerCuerpoDeCorreoElectronico
””0 P
(
””P Q
sede
””Q U
,
””U V
guiaRemision
””W c
)
””c d
;
””d e
OperationResult
‘‘ 
result
‘‘  &
=
‘‘' (
mailer
‘‘) /
.
‘‘/ 0
Send
‘‘0 4
(
‘‘4 5
asunto
‘‘5 ;
,
‘‘; <
cuerpo
‘‘= C
,
‘‘C D!
correosElectronicos
‘‘E X
,
‘‘X Y 
AplicacionSettings
‘‘Z l
.
‘‘l m
Default
‘‘m t
.
‘‘t u
ToMailDefault‘‘u Ç
,‘‘Ç É
new‘‘Ñ á
List‘‘à å
<‘‘å ç

Attachment‘‘ç ó
>‘‘ó ò
(‘‘ò ô
)‘‘ô ö
{‘‘õ ú
new‘‘ù †

Attachment‘‘° ´
(‘‘´ ¨
new‘‘¨ Ø
MemoryStream‘‘∞ º
(‘‘º Ω
pdfGuia‘‘Ω ƒ
.‘‘ƒ ≈
Save‘‘≈ …
(‘‘…  
)‘‘  À
)‘‘À Ã
,‘‘Ã Õ
guiaRemision‘‘Œ ⁄
.‘‘⁄ €
Comprobante‘‘€ Ê
(‘‘Ê Á
)‘‘Á Ë
.‘‘Ë È
NumeroDeSerie‘‘È ˆ
+‘‘˜ ¯
$str‘‘˘ ˛
+‘‘ˇ Ä
guiaRemision‘‘Å ç
.‘‘ç é
Comprobante‘‘é ô
(‘‘ô ö
)‘‘ö õ
.‘‘õ ú#
NumeroDeComprobante‘‘ú Ø
+‘‘∞ ±
$str‘‘≤ ∑
+‘‘∏ π
guiaRemision‘‘∫ ∆
.‘‘∆ «
Tercero‘‘« Œ
(‘‘Œ œ
)‘‘œ –
.‘‘– —
RazonSocial‘‘— ‹
+‘‘› ﬁ
$str‘‘ﬂ Â
,‘‘Â Ê
$str‘‘Á ¯
)‘‘¯ ˘
}‘‘˙ ˚
)‘‘˚ ¸
;‘‘¸ ˝
return
’’ 
Json
’’ 
(
’’ 
new
’’ 
{
’’  !
result
’’" (
.
’’( )
code_result
’’) 4
,
’’4 5
data
’’6 :
=
’’; <
result
’’= C
.
’’C D
information
’’D O
,
’’O P 
result_description
’’Q c
=
’’d e
result
’’f l
.
’’l m
title
’’m r
}
’’s t
)
’’t u
;
’’u v
}
÷÷ 
catch
◊◊ 
(
◊◊ 
	Exception
◊◊ 
e
◊◊ 
)
◊◊ 
{
ÿÿ 
return
ŸŸ 
new
ŸŸ "
JsonHttpStatusResult
ŸŸ /
(
ŸŸ/ 0
Util
ŸŸ0 4
.
ŸŸ4 5
	ErrorJson
ŸŸ5 >
(
ŸŸ> ?
e
ŸŸ? @
)
ŸŸ@ A
,
ŸŸA B
HttpStatusCode
ŸŸC Q
.
ŸŸQ R!
InternalServerError
ŸŸR e
)
ŸŸe f
;
ŸŸf g
}
⁄⁄ 
}
‹‹ 	
public
ﬁﬁ 
async
ﬁﬁ 
Task
ﬁﬁ 
<
ﬁﬁ 
ActionResult
ﬁﬁ &
>
ﬁﬁ& ' 
DescargarDocumento
ﬁﬁ( :
(
ﬁﬁ: ;
long
ﬁﬁ; ?
idGuiaRemision
ﬁﬁ@ N
,
ﬁﬁN O
int
ﬁﬁP S
formato
ﬁﬁT [
)
ﬁﬁ[ \
{
ﬂﬂ 	
try
‡‡ 
{
·· 
var
‚‚ 
sede
‚‚ 
=
‚‚ 
ObtenerSede
‚‚ &
(
‚‚& '
)
‚‚' (
;
‚‚( )!
MovimientoDeAlmacen
„„ #
guiaRemision
„„$ 0
=
„„1 2
operacionLogica
„„3 B
.
„„B C!
ObtenerGuiaRemision
„„C V
(
„„V W
idGuiaRemision
„„W e
)
„„e f
;
„„f g
int
‰‰ 
[
‰‰ 
]
‰‰ 

idsUbigeos
‰‰  
=
‰‰! "
{
‰‰# $
Convert
‰‰% ,
.
‰‰, -
ToInt32
‰‰- 4
(
‰‰4 5
guiaRemision
‰‰5 A
.
‰‰A B&
IdUbigeoOrigenDeTraslado
‰‰B Z
(
‰‰Z [
)
‰‰[ \
)
‰‰\ ]
,
‰‰] ^
Convert
‰‰_ f
.
‰‰f g
ToInt32
‰‰g n
(
‰‰n o
guiaRemision
‰‰o {
.
‰‰{ |(
IdUbigeoDestinoDeTraslado‰‰| ï
(‰‰ï ñ
)‰‰ñ ó
)‰‰ó ò
}‰‰ô ö
;‰‰ö õ
var
ÂÂ 
ubigeos
ÂÂ 
=
ÂÂ 
maestroLogica
ÂÂ +
.
ÂÂ+ ,
obtenerUbigeo
ÂÂ, 9
(
ÂÂ9 :

idsUbigeos
ÂÂ: D
)
ÂÂD E
;
ÂÂE F
guiaRemision
ÊÊ 
.
ÊÊ 
UbigeoOrigen
ÊÊ )
=
ÊÊ* +
ubigeos
ÊÊ, 3
.
ÊÊ3 4
Single
ÊÊ4 :
(
ÊÊ: ;
u
ÊÊ; <
=>
ÊÊ= ?
u
ÊÊ@ A
.
ÊÊA B
id
ÊÊB D
==
ÊÊE G
Convert
ÊÊH O
.
ÊÊO P
ToInt32
ÊÊP W
(
ÊÊW X
guiaRemision
ÊÊX d
.
ÊÊd e&
IdUbigeoOrigenDeTraslado
ÊÊe }
(
ÊÊ} ~
)
ÊÊ~ 
)ÊÊ Ä
)ÊÊÄ Å
.ÊÊÅ Ç!
descripcion_cortaÊÊÇ ì
;ÊÊì î
guiaRemision
ÁÁ 
.
ÁÁ 
UbigeoDestino
ÁÁ *
=
ÁÁ+ ,
ubigeos
ÁÁ- 4
.
ÁÁ4 5
Single
ÁÁ5 ;
(
ÁÁ; <
u
ÁÁ< =
=>
ÁÁ> @
u
ÁÁA B
.
ÁÁB C
id
ÁÁC E
==
ÁÁF H
Convert
ÁÁI P
.
ÁÁP Q
ToInt32
ÁÁQ X
(
ÁÁX Y
guiaRemision
ÁÁY e
.
ÁÁe f'
IdUbigeoDestinoDeTraslado
ÁÁf 
(ÁÁ Ä
)ÁÁÄ Å
)ÁÁÅ Ç
)ÁÁÇ É
.ÁÁÉ Ñ!
descripcion_cortaÁÁÑ ï
;ÁÁï ñ
var
ËË 
proveedores
ËË 
=
ËË  ! 
actorNegocioLogica
ËË" 4
.
ËË4 5(
ObtenerProveedoresVigentes
ËË5 O
(
ËËO P
)
ËËP Q
;
ËËQ R
var
ÈÈ #
modalidadesDeTraslado
ÈÈ )
=
ÈÈ* +
await
ÈÈ, 1
maestroLogica
ÈÈ2 ?
.
ÈÈ? @-
ObtenerModalidadesTrasladoAsync
ÈÈ@ _
(
ÈÈ_ `
)
ÈÈ` a
;
ÈÈa b
var
ÍÍ 
motivosDeTraslado
ÍÍ %
=
ÍÍ& '
await
ÍÍ( -
maestroLogica
ÍÍ. ;
.
ÍÍ; <)
ObtenerMotivosTrasladoAsync
ÍÍ< W
(
ÍÍW X
)
ÍÍX Y
;
ÍÍY Z
string
ÎÎ 
	QrContent
ÎÎ  
=
ÎÎ! "*
facturacionElectronicaLogica
ÎÎ# ?
.
ÎÎ? @
	ObtenerQR
ÎÎ@ I
(
ÎÎI J
guiaRemision
ÎÎJ V
,
ÎÎV W
sede
ÎÎX \
)
ÎÎ\ ]
;
ÎÎ] ^
byte
ÏÏ 
[
ÏÏ 
]
ÏÏ 
QrBytes
ÏÏ 
=
ÏÏ  
(
ÏÏ! "
guiaRemision
ÏÏ" .
.
ÏÏ. /
IdTipoComprobante
ÏÏ/ @
==
ÏÏA C
MaestroSettings
ÏÏD S
.
ÏÏS T
Default
ÏÏT [
.
ÏÏ[ \A
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitenteÏÏ\ é
)ÏÏé è
?ÏÏê ë
barCodeUtilÏÏí ù
.ÏÏù û
ObtenerCodigoQRÏÏû ≠
(ÏÏ≠ Æ
guiaRemisionÏÏÆ ∫
.ÏÏ∫ ª
InformacionÏÏª ∆
)ÏÏ∆ «
:ÏÏ» …
barCodeUtilÏÏ  ’
.ÏÏ’ ÷
ObtenerCodigoQRÏÏ÷ Â
(ÏÏÂ Ê
	QrContentÏÏÊ Ô
)ÏÏÔ 
;ÏÏ Ò
;ÏÏÚ Û
var
ÌÌ 
pdfGuia
ÌÌ 
=
ÌÌ 

PdfBuilder
ÌÌ (
.
ÌÌ( ).
 ObtenerPdfMovimientoDeMercaderia
ÌÌ) I
(
ÌÌI J
guiaRemision
ÌÌJ V
,
ÌÌV W
sede
ÌÌX \
,
ÌÌ\ ]
QrBytes
ÌÌ^ e
,
ÌÌe f
(
ÌÌg h
FormatoImpresion
ÌÌh x
)
ÌÌx y
formatoÌÌy Ä
,ÌÌÄ Å
proveedoresÌÌÇ ç
,ÌÌç é%
modalidadesDeTrasladoÌÌè §
,ÌÌ§ •!
motivosDeTrasladoÌÌ¶ ∑
,ÌÌ∑ ∏
thisÌÌπ Ω
)ÌÌΩ æ
;ÌÌæ ø
string
ÔÔ 
fileNameZip
ÔÔ "
=
ÔÔ# $
guiaRemision
ÔÔ% 1
.
ÔÔ1 2
Comprobante
ÔÔ2 =
(
ÔÔ= >
)
ÔÔ> ?
.
ÔÔ? @
NumeroDeSerie
ÔÔ@ M
+
ÔÔN O
$str
ÔÔP U
+
ÔÔV W
guiaRemision
ÔÔX d
.
ÔÔd e
Comprobante
ÔÔe p
(
ÔÔp q
)
ÔÔq r
.
ÔÔr s"
NumeroDeComprobanteÔÔs Ü
+ÔÔá à
$strÔÔâ é
+ÔÔè ê
guiaRemisionÔÔë ù
.ÔÔù û
TerceroÔÔû •
(ÔÔ• ¶
)ÔÔ¶ ß
.ÔÔß ®
RazonSocialÔÔ® ≥
+ÔÔ¥ µ
$strÔÔ∂ º
;ÔÔº Ω
byte
 
[
 
]
 
	fileBytes
  
=
! "
null
# '
;
' (
byte
ÒÒ 
[
ÒÒ 
]
ÒÒ 
compressedBytes
ÒÒ &
;
ÒÒ& '
using
ÚÚ 
(
ÚÚ 
var
ÚÚ 
	outStream
ÚÚ $
=
ÚÚ% &
new
ÚÚ' *
MemoryStream
ÚÚ+ 7
(
ÚÚ7 8
)
ÚÚ8 9
)
ÚÚ9 :
{
ÛÛ 
using
ÙÙ 
(
ÙÙ 
var
ÙÙ 
archive
ÙÙ &
=
ÙÙ' (
new
ÙÙ) ,

ZipArchive
ÙÙ- 7
(
ÙÙ7 8
	outStream
ÙÙ8 A
,
ÙÙA B
ZipArchiveMode
ÙÙC Q
.
ÙÙQ R
Create
ÙÙR X
,
ÙÙX Y
true
ÙÙZ ^
)
ÙÙ^ _
)
ÙÙ_ `
{
ıı 
ZipArchiveEntry
ˆˆ '
fileInArchive
ˆˆ( 5
=
ˆˆ6 7
null
ˆˆ8 <
;
ˆˆ< =
fileInArchive
˜˜ %
=
˜˜& '
archive
˜˜( /
.
˜˜/ 0
CreateEntry
˜˜0 ;
(
˜˜; <
guiaRemision
˜˜< H
.
˜˜H I
Comprobante
˜˜I T
(
˜˜T U
)
˜˜U V
.
˜˜V W
NumeroDeSerie
˜˜W d
+
˜˜e f
$str
˜˜g l
+
˜˜m n
guiaRemision
˜˜o {
.
˜˜{ |
Comprobante˜˜| á
(˜˜á à
)˜˜à â
.˜˜â ä#
NumeroDeComprobante˜˜ä ù
+˜˜û ü
$str˜˜† •
+˜˜¶ ß
guiaRemision˜˜® ¥
.˜˜¥ µ
Tercero˜˜µ º
(˜˜º Ω
)˜˜Ω æ
.˜˜æ ø
RazonSocial˜˜ø  
+˜˜À Ã
$str˜˜Õ ”
,˜˜” ‘ 
CompressionLevel˜˜’ Â
.˜˜Â Ê
Optimal˜˜Ê Ì
)˜˜Ì Ó
;˜˜Ó Ô
	fileBytes
¯¯ !
=
¯¯" #
pdfGuia
¯¯$ +
.
¯¯+ ,
Save
¯¯, 0
(
¯¯0 1
)
¯¯1 2
;
¯¯2 3
using
˘˘ 
(
˘˘ 
var
˘˘ "
entryStream
˘˘# .
=
˘˘/ 0
fileInArchive
˘˘1 >
.
˘˘> ?
Open
˘˘? C
(
˘˘C D
)
˘˘D E
)
˘˘E F
using
˙˙ 
(
˙˙ 
var
˙˙ ""
fileToCompressStream
˙˙# 7
=
˙˙8 9
new
˙˙: =
MemoryStream
˙˙> J
(
˙˙J K
	fileBytes
˙˙K T
)
˙˙T U
)
˙˙U V
{
˚˚ "
fileToCompressStream
¸¸ 0
.
¸¸0 1
CopyTo
¸¸1 7
(
¸¸7 8
entryStream
¸¸8 C
)
¸¸C D
;
¸¸D E"
fileToCompressStream
˝˝ 0
.
˝˝0 1
Close
˝˝1 6
(
˝˝6 7
)
˝˝7 8
;
˝˝8 9
}
˛˛ 
fileInArchive
ÄÄ %
=
ÄÄ& '
archive
ÄÄ( /
.
ÄÄ/ 0
CreateEntry
ÄÄ0 ;
(
ÄÄ; <
guiaRemision
ÄÄ< H
.
ÄÄH I
Comprobante
ÄÄI T
(
ÄÄT U
)
ÄÄU V
.
ÄÄV W
NumeroDeSerie
ÄÄW d
+
ÄÄe f
$str
ÄÄg l
+
ÄÄm n
guiaRemision
ÄÄo {
.
ÄÄ{ |
ComprobanteÄÄ| á
(ÄÄá à
)ÄÄà â
.ÄÄâ ä#
NumeroDeComprobanteÄÄä ù
+ÄÄû ü
$strÄÄ† •
+ÄÄ¶ ß
guiaRemisionÄÄ® ¥
.ÄÄ¥ µ
TerceroÄÄµ º
(ÄÄº Ω
)ÄÄΩ æ
.ÄÄæ ø
RazonSocialÄÄø  
+ÄÄÀ Ã
$strÄÄÕ ”
,ÄÄ” ‘ 
CompressionLevelÄÄ’ Â
.ÄÄÂ Ê
OptimalÄÄÊ Ì
)ÄÄÌ Ó
;ÄÄÓ Ô
	fileBytes
ÅÅ !
=
ÅÅ" #

XmlBuilder
ÅÅ$ .
.
ÅÅ. /#
ObtenerXmlComprobante
ÅÅ/ D
(
ÅÅD E
guiaRemision
ÅÅE Q
,
ÅÅQ R
sede
ÅÅS W
,
ÅÅW X
proveedores
ÅÅY d
,
ÅÅd e#
modalidadesDeTraslado
ÅÅf {
,
ÅÅ{ | 
motivosDeTrasladoÅÅ} é
,ÅÅé è(
generacionArchivosLogicaÅÅê ®
,ÅÅ® ©,
facturacionElectronicaLogicaÅÅ™ ∆
)ÅÅ∆ «
.ÅÅ« »
	DocumentoÅÅ» —
;ÅÅ— “
using
ÇÇ 
(
ÇÇ 
var
ÇÇ "
entryStream
ÇÇ# .
=
ÇÇ/ 0
fileInArchive
ÇÇ1 >
.
ÇÇ> ?
Open
ÇÇ? C
(
ÇÇC D
)
ÇÇD E
)
ÇÇE F
using
ÉÉ 
(
ÉÉ 
var
ÉÉ ""
fileToCompressStream
ÉÉ# 7
=
ÉÉ8 9
new
ÉÉ: =
MemoryStream
ÉÉ> J
(
ÉÉJ K
	fileBytes
ÉÉK T
)
ÉÉT U
)
ÉÉU V
{
ÑÑ "
fileToCompressStream
ÖÖ 0
.
ÖÖ0 1
CopyTo
ÖÖ1 7
(
ÖÖ7 8
entryStream
ÖÖ8 C
)
ÖÖC D
;
ÖÖD E"
fileToCompressStream
ÜÜ 0
.
ÜÜ0 1
Close
ÜÜ1 6
(
ÜÜ6 7
)
ÜÜ7 8
;
ÜÜ8 9
}
áá 
}
ââ 
compressedBytes
ää #
=
ää$ %
	outStream
ää& /
.
ää/ 0
ToArray
ää0 7
(
ää7 8
)
ää8 9
;
ää9 :
}
ãã 
return
åå 
File
åå 
(
åå 
compressedBytes
åå +
,
åå+ ,
$str
åå- >
,
åå> ?
fileNameZip
åå@ K
)
ååK L
;
ååL M
}
çç 
catch
éé 
(
éé 
LogicaException
éé "
oe
éé# %
)
éé% &
{
èè 
return
êê 
new
êê "
JsonHttpStatusResult
êê /
(
êê/ 0
Util
êê0 4
.
êê4 5
	ErrorJson
êê5 >
(
êê> ?
oe
êê? A
)
êêA B
,
êêB C
HttpStatusCode
êêD R
.
êêR S!
InternalServerError
êêS f
)
êêf g
;
êêg h
}
ëë 
catch
íí 
(
íí 
	Exception
íí 
e
íí 
)
íí 
{
ìì 
return
îî 
new
îî "
JsonHttpStatusResult
îî /
(
îî/ 0
Util
îî0 4
.
îî4 5
	ErrorJson
îî5 >
(
îî> ?
new
îî? B
	Exception
îîC L
(
îîL M
$str
îîM w
,
îîw x
e
îîy z
)
îîz {
)
îî{ |
,
îî| }
HttpStatusCodeîî~ å
.îîå ç#
InternalServerErrorîîç †
)îî† °
;îî° ¢
}
ïï 
}
ññ 	
public
òò 
async
òò 
Task
òò 
<
òò 
ActionResult
òò &
>
òò& '#
DescargarDocumentoPdf
òò( =
(
òò= >
long
òò> B
idGuiaRemision
òòC Q
,
òòQ R
int
òòS V
formato
òòW ^
)
òò^ _
{
ôô 	
try
öö 
{
õõ 
var
úú 
sede
úú 
=
úú 
ObtenerSede
úú &
(
úú& '
)
úú' (
;
úú( )!
MovimientoDeAlmacen
ùù #
guiaRemision
ùù$ 0
=
ùù1 2
operacionLogica
ùù3 B
.
ùùB C!
ObtenerGuiaRemision
ùùC V
(
ùùV W
idGuiaRemision
ùùW e
)
ùùe f
;
ùùf g
int
ûû 
[
ûû 
]
ûû 

idsUbigeos
ûû  
=
ûû! "
{
ûû# $
Convert
ûû% ,
.
ûû, -
ToInt32
ûû- 4
(
ûû4 5
guiaRemision
ûû5 A
.
ûûA B&
IdUbigeoOrigenDeTraslado
ûûB Z
(
ûûZ [
)
ûû[ \
)
ûû\ ]
,
ûû] ^
Convert
ûû_ f
.
ûûf g
ToInt32
ûûg n
(
ûûn o
guiaRemision
ûûo {
.
ûû{ |(
IdUbigeoDestinoDeTrasladoûû| ï
(ûûï ñ
)ûûñ ó
)ûûó ò
}ûûô ö
;ûûö õ
var
üü 
ubigeos
üü 
=
üü 
maestroLogica
üü +
.
üü+ ,
obtenerUbigeo
üü, 9
(
üü9 :

idsUbigeos
üü: D
)
üüD E
;
üüE F
guiaRemision
†† 
.
†† 
UbigeoOrigen
†† )
=
††* +
ubigeos
††, 3
.
††3 4
Single
††4 :
(
††: ;
u
††; <
=>
††= ?
u
††@ A
.
††A B
id
††B D
==
††E G
Convert
††H O
.
††O P
ToInt32
††P W
(
††W X
guiaRemision
††X d
.
††d e&
IdUbigeoOrigenDeTraslado
††e }
(
††} ~
)
††~ 
)†† Ä
)††Ä Å
.††Å Ç!
descripcion_corta††Ç ì
;††ì î
guiaRemision
°° 
.
°° 
UbigeoDestino
°° *
=
°°+ ,
ubigeos
°°- 4
.
°°4 5
Single
°°5 ;
(
°°; <
u
°°< =
=>
°°> @
u
°°A B
.
°°B C
id
°°C E
==
°°F H
Convert
°°I P
.
°°P Q
ToInt32
°°Q X
(
°°X Y
guiaRemision
°°Y e
.
°°e f'
IdUbigeoDestinoDeTraslado
°°f 
(°° Ä
)°°Ä Å
)°°Å Ç
)°°Ç É
.°°É Ñ!
descripcion_corta°°Ñ ï
;°°ï ñ
var
¢¢ 
proveedores
¢¢ 
=
¢¢  ! 
actorNegocioLogica
¢¢" 4
.
¢¢4 5(
ObtenerProveedoresVigentes
¢¢5 O
(
¢¢O P
)
¢¢P Q
;
¢¢Q R
var
££ #
modalidadesDeTraslado
££ )
=
££* +
await
££, 1
maestroLogica
££2 ?
.
££? @-
ObtenerModalidadesTrasladoAsync
££@ _
(
££_ `
)
££` a
;
££a b
var
§§ 
motivosDeTraslado
§§ %
=
§§& '
await
§§( -
maestroLogica
§§. ;
.
§§; <)
ObtenerMotivosTrasladoAsync
§§< W
(
§§W X
)
§§X Y
;
§§Y Z
string
•• 
	QrContent
••  
=
••! "*
facturacionElectronicaLogica
••# ?
.
••? @
	ObtenerQR
••@ I
(
••I J
guiaRemision
••J V
,
••V W
sede
••X \
)
••\ ]
;
••] ^
byte
¶¶ 
[
¶¶ 
]
¶¶ 
QrBytes
¶¶ 
=
¶¶  
(
¶¶! "
guiaRemision
¶¶" .
.
¶¶. /
IdTipoComprobante
¶¶/ @
==
¶¶A C
MaestroSettings
¶¶D S
.
¶¶S T
Default
¶¶T [
.
¶¶[ \A
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitente¶¶\ é
)¶¶é è
?¶¶ê ë
barCodeUtil¶¶í ù
.¶¶ù û
ObtenerCodigoQR¶¶û ≠
(¶¶≠ Æ
guiaRemision¶¶Æ ∫
.¶¶∫ ª
Informacion¶¶ª ∆
)¶¶∆ «
:¶¶» …
barCodeUtil¶¶  ’
.¶¶’ ÷
ObtenerCodigoQR¶¶÷ Â
(¶¶Â Ê
	QrContent¶¶Ê Ô
)¶¶Ô 
;¶¶ Ò
;¶¶Ú Û
var
ßß 
pdfGuia
ßß 
=
ßß 

PdfBuilder
ßß (
.
ßß( ).
 ObtenerPdfMovimientoDeMercaderia
ßß) I
(
ßßI J
guiaRemision
ßßJ V
,
ßßV W
sede
ßßX \
,
ßß\ ]
QrBytes
ßß^ e
,
ßße f
(
ßßg h
FormatoImpresion
ßßh x
)
ßßx y
formatoßßy Ä
,ßßÄ Å
proveedoresßßÇ ç
,ßßç é%
modalidadesDeTrasladoßßè §
,ßß§ •!
motivosDeTrasladoßß¶ ∑
,ßß∑ ∏
thisßßπ Ω
)ßßΩ æ
;ßßæ ø
byte
®® 
[
®® 
]
®® 
	fileBytes
®®  
=
®®! "
pdfGuia
®®# *
.
®®* +
Save
®®+ /
(
®®/ 0
)
®®0 1
;
®®1 2
string
©© 
fileName
©© 
=
©©  !
guiaRemision
©©" .
.
©©. /
Comprobante
©©/ :
(
©©: ;
)
©©; <
.
©©< =
NumeroDeSerie
©©= J
+
©©K L
$str
©©M R
+
©©S T
guiaRemision
©©U a
.
©©a b
Comprobante
©©b m
(
©©m n
)
©©n o
.
©©o p"
NumeroDeComprobante©©p É
+©©Ñ Ö
$str©©Ü ã
+©©å ç
guiaRemision©©é ö
.©©ö õ
Tercero©©õ ¢
(©©¢ £
)©©£ §
.©©§ •
RazonSocial©©• ∞
+©©± ≤
$str©©≥ π
;©©π ∫
return
™™ 
File
™™ 
(
™™ 
	fileBytes
™™ %
,
™™% &
$str
™™' 8
,
™™8 9
fileName
™™: B
)
™™B C
;
™™C D
}
´´ 
catch
¨¨ 
(
¨¨ 
LogicaException
¨¨ "
oe
¨¨# %
)
¨¨% &
{
≠≠ 
return
ÆÆ 
new
ÆÆ "
JsonHttpStatusResult
ÆÆ /
(
ÆÆ/ 0
Util
ÆÆ0 4
.
ÆÆ4 5
	ErrorJson
ÆÆ5 >
(
ÆÆ> ?
oe
ÆÆ? A
)
ÆÆA B
,
ÆÆB C
HttpStatusCode
ÆÆD R
.
ÆÆR S!
InternalServerError
ÆÆS f
)
ÆÆf g
;
ÆÆg h
}
ØØ 
catch
∞∞ 
(
∞∞ 
	Exception
∞∞ 
e
∞∞ 
)
∞∞ 
{
±± 
return
≤≤ 
new
≤≤ "
JsonHttpStatusResult
≤≤ /
(
≤≤/ 0
Util
≤≤0 4
.
≤≤4 5
	ErrorJson
≤≤5 >
(
≤≤> ?
new
≤≤? B
	Exception
≤≤C L
(
≤≤L M
$str
≤≤M {
,
≤≤{ |
e
≤≤} ~
)
≤≤~ 
)≤≤ Ä
,≤≤Ä Å
HttpStatusCode≤≤Ç ê
.≤≤ê ë#
InternalServerError≤≤ë §
)≤≤§ •
;≤≤• ¶
}
≥≥ 
}
¥¥ 	
public
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
ActionResult
∂∂ &
>
∂∂& '#
DescargarDocumentoXml
∂∂( =
(
∂∂= >
long
∂∂> B
idGuiaRemision
∂∂C Q
)
∂∂Q R
{
∑∑ 	
try
∏∏ 
{
ππ 
var
∫∫ 
sede
∫∫ 
=
∫∫ 
ObtenerSede
∫∫ &
(
∫∫& '
)
∫∫' (
;
∫∫( )!
MovimientoDeAlmacen
ªª #
guiaRemision
ªª$ 0
=
ªª1 2
operacionLogica
ªª3 B
.
ªªB C!
ObtenerGuiaRemision
ªªC V
(
ªªV W
idGuiaRemision
ªªW e
)
ªªe f
;
ªªf g
int
ºº 
[
ºº 
]
ºº 

idsUbigeos
ºº  
=
ºº! "
{
ºº# $
Convert
ºº% ,
.
ºº, -
ToInt32
ºº- 4
(
ºº4 5
guiaRemision
ºº5 A
.
ººA B&
IdUbigeoOrigenDeTraslado
ººB Z
(
ººZ [
)
ºº[ \
)
ºº\ ]
,
ºº] ^
Convert
ºº_ f
.
ººf g
ToInt32
ººg n
(
ººn o
guiaRemision
ººo {
.
ºº{ |(
IdUbigeoDestinoDeTrasladoºº| ï
(ººï ñ
)ººñ ó
)ººó ò
}ººô ö
;ººö õ
var
ΩΩ 
ubigeos
ΩΩ 
=
ΩΩ 
maestroLogica
ΩΩ +
.
ΩΩ+ ,
obtenerUbigeo
ΩΩ, 9
(
ΩΩ9 :

idsUbigeos
ΩΩ: D
)
ΩΩD E
;
ΩΩE F
guiaRemision
ææ 
.
ææ 
UbigeoOrigen
ææ )
=
ææ* +
ubigeos
ææ, 3
.
ææ3 4
Single
ææ4 :
(
ææ: ;
u
ææ; <
=>
ææ= ?
u
ææ@ A
.
ææA B
id
ææB D
==
ææE G
Convert
ææH O
.
ææO P
ToInt32
ææP W
(
ææW X
guiaRemision
ææX d
.
ææd e&
IdUbigeoOrigenDeTraslado
ææe }
(
ææ} ~
)
ææ~ 
)ææ Ä
)ææÄ Å
.ææÅ Ç!
descripcion_cortaææÇ ì
;ææì î
guiaRemision
øø 
.
øø 
UbigeoDestino
øø *
=
øø+ ,
ubigeos
øø- 4
.
øø4 5
Single
øø5 ;
(
øø; <
u
øø< =
=>
øø> @
u
øøA B
.
øøB C
id
øøC E
==
øøF H
Convert
øøI P
.
øøP Q
ToInt32
øøQ X
(
øøX Y
guiaRemision
øøY e
.
øøe f'
IdUbigeoDestinoDeTraslado
øøf 
(øø Ä
)øøÄ Å
)øøÅ Ç
)øøÇ É
.øøÉ Ñ!
descripcion_cortaøøÑ ï
;øøï ñ
var
¿¿ 
proveedores
¿¿ 
=
¿¿  ! 
actorNegocioLogica
¿¿" 4
.
¿¿4 5(
ObtenerProveedoresVigentes
¿¿5 O
(
¿¿O P
)
¿¿P Q
;
¿¿Q R
var
¡¡ #
modalidadesDeTraslado
¡¡ )
=
¡¡* +
await
¡¡, 1
maestroLogica
¡¡2 ?
.
¡¡? @-
ObtenerModalidadesTrasladoAsync
¡¡@ _
(
¡¡_ `
)
¡¡` a
;
¡¡a b
var
¬¬ 
motivosDeTraslado
¬¬ %
=
¬¬& '
await
¬¬( -
maestroLogica
¬¬. ;
.
¬¬; <)
ObtenerMotivosTrasladoAsync
¬¬< W
(
¬¬W X
)
¬¬X Y
;
¬¬Y Z
byte
√√ 
[
√√ 
]
√√ 
	fileBytes
√√  
=
√√! "

XmlBuilder
√√# -
.
√√- .#
ObtenerXmlComprobante
√√. C
(
√√C D
guiaRemision
√√D P
,
√√P Q
sede
√√R V
,
√√V W
proveedores
√√X c
,
√√c d#
modalidadesDeTraslado
√√e z
,
√√z { 
motivosDeTraslado√√| ç
,√√ç é(
generacionArchivosLogica√√è ß
,√√ß ®,
facturacionElectronicaLogica√√© ≈
)√√≈ ∆
.√√∆ «
	Documento√√« –
;√√– —
string
ƒƒ 
fileName
ƒƒ 
=
ƒƒ  !
guiaRemision
ƒƒ" .
.
ƒƒ. /
Comprobante
ƒƒ/ :
(
ƒƒ: ;
)
ƒƒ; <
.
ƒƒ< =
NumeroDeSerie
ƒƒ= J
+
ƒƒK L
$str
ƒƒM R
+
ƒƒS T
guiaRemision
ƒƒU a
.
ƒƒa b
Comprobante
ƒƒb m
(
ƒƒm n
)
ƒƒn o
.
ƒƒo p"
NumeroDeComprobanteƒƒp É
+ƒƒÑ Ö
$strƒƒÜ ã
+ƒƒå ç
guiaRemisionƒƒé ö
.ƒƒö õ
Terceroƒƒõ ¢
(ƒƒ¢ £
)ƒƒ£ §
.ƒƒ§ •
RazonSocialƒƒ• ∞
+ƒƒ± ≤
$strƒƒ≥ π
;ƒƒπ ∫
return
≈≈ 
File
≈≈ 
(
≈≈ 
	fileBytes
≈≈ %
,
≈≈% &
$str
≈≈' 8
,
≈≈8 9
fileName
≈≈: B
)
≈≈B C
;
≈≈C D
}
∆∆ 
catch
«« 
(
«« 
LogicaException
«« "
oe
««# %
)
««% &
{
»» 
return
…… 
new
…… "
JsonHttpStatusResult
…… /
(
……/ 0
Util
……0 4
.
……4 5
	ErrorJson
……5 >
(
……> ?
oe
……? A
)
……A B
,
……B C
HttpStatusCode
……D R
.
……R S!
InternalServerError
……S f
)
……f g
;
……g h
}
   
catch
ÀÀ 
(
ÀÀ 
	Exception
ÀÀ 
e
ÀÀ 
)
ÀÀ 
{
ÃÃ 
return
ÕÕ 
new
ÕÕ "
JsonHttpStatusResult
ÕÕ /
(
ÕÕ/ 0
Util
ÕÕ0 4
.
ÕÕ4 5
	ErrorJson
ÕÕ5 >
(
ÕÕ> ?
new
ÕÕ? B
	Exception
ÕÕC L
(
ÕÕL M
$str
ÕÕM {
,
ÕÕ{ |
e
ÕÕ} ~
)
ÕÕ~ 
)ÕÕ Ä
,ÕÕÄ Å
HttpStatusCodeÕÕÇ ê
.ÕÕê ë#
InternalServerErrorÕÕë §
)ÕÕ§ •
;ÕÕ• ¶
}
ŒŒ 
}
œœ 	
public
““ 

JsonResult
““ #
InvalidarGuiaRemision
““ /
(
““/ 0
long
““0 4
idGuiaRemision
““5 C
,
““C D
string
““E K
observacion
““L W
)
““W X
{
”” 	
try
‘‘ 
{
’’ 
OperationResult
÷÷ 
result
÷÷  &
=
÷÷' (
operacionLogica
÷÷) 8
.
÷÷8 9#
InvalidarGuiaRemision
÷÷9 N
(
÷÷N O
idGuiaRemision
÷÷O ]
,
÷÷] ^
ProfileData
÷÷_ j
(
÷÷j k
)
÷÷k l
.
÷÷l m
Empleado
÷÷m u
.
÷÷u v
Id
÷÷v x
,
÷÷x y
ProfileData÷÷z Ö
(÷÷Ö Ü
)÷÷Ü á
.÷÷á à.
IdCentroDeAtencionSeleccionado÷÷à ¶
,÷÷¶ ß
observacion÷÷® ≥
)÷÷≥ ¥
;÷÷¥ µ
Util
◊◊ 
.
◊◊ (
ManageIfResultIsNotSuccess
◊◊ /
(
◊◊/ 0
result
◊◊0 6
,
◊◊6 7
$str
◊◊8 i
)
◊◊i j
;
◊◊j k
return
ÿÿ 
Json
ÿÿ 
(
ÿÿ 
new
ÿÿ 
{
ÿÿ  !
result
ÿÿ" (
.
ÿÿ( )
code_result
ÿÿ) 4
,
ÿÿ4 5
result
ÿÿ6 <
.
ÿÿ< =
data
ÿÿ= A
,
ÿÿA B 
result_description
ÿÿC U
=
ÿÿV W
result
ÿÿX ^
.
ÿÿ^ _
title
ÿÿ_ d
}
ÿÿe f
)
ÿÿf g
;
ÿÿg h
}
ŸŸ 
catch
⁄⁄ 
(
⁄⁄ 
LogicaException
⁄⁄ "
oe
⁄⁄# %
)
⁄⁄% &
{
€€ 
return
‹‹ 
new
‹‹ "
JsonHttpStatusResult
‹‹ /
(
‹‹/ 0
Util
‹‹0 4
.
‹‹4 5
	ErrorJson
‹‹5 >
(
‹‹> ?
oe
‹‹? A
)
‹‹A B
,
‹‹B C
HttpStatusCode
‹‹D R
.
‹‹R S!
InternalServerError
‹‹S f
)
‹‹f g
;
‹‹g h
}
›› 
catch
ﬁﬁ 
(
ﬁﬁ 
	Exception
ﬁﬁ 
e
ﬁﬁ 
)
ﬁﬁ 
{
ﬂﬂ 
return
‡‡ 
new
‡‡ "
JsonHttpStatusResult
‡‡ /
(
‡‡/ 0
Util
‡‡0 4
.
‡‡4 5
	ErrorJson
‡‡5 >
(
‡‡> ?
e
‡‡? @
)
‡‡@ A
,
‡‡A B
HttpStatusCode
‡‡C Q
.
‡‡Q R!
InternalServerError
‡‡R e
)
‡‡e f
;
‡‡f g
}
·· 
}
‚‚ 	
public
ÂÂ 

JsonResult
ÂÂ :
,ObtenerParametrosParaRegistradorGuiaRemision
ÂÂ F
(
ÂÂF G
)
ÂÂG H
{
ÊÊ 	
try
ÁÁ 
{
ËË 
var
ÈÈ 
configuracion
ÈÈ !
=
ÈÈ" #
new
ÈÈ$ '2
$ConfiguracionRegistradorGuiaRemision
ÈÈ( L
{
ÍÍ 
DireccionSede
ÎÎ !
=
ÎÎ" #
(
ÎÎ$ %
ObtenerSede
ÎÎ% 0
(
ÎÎ0 1
)
ÎÎ1 2
.
ÎÎ2 3
DomicilioFiscal
ÎÎ3 B
!=
ÎÎC E
null
ÎÎF J
)
ÎÎJ K
?
ÎÎL M
ObtenerSede
ÎÎN Y
(
ÎÎY Z
)
ÎÎZ [
.
ÎÎ[ \
DomicilioFiscal
ÎÎ\ k
.
ÎÎk l
Detalle
ÎÎl s
:
ÎÎt u
$str
ÎÎv x
,
ÎÎx y
IdUbigeoSede
ÏÏ  
=
ÏÏ! "
(
ÏÏ# $
ObtenerSede
ÏÏ$ /
(
ÏÏ/ 0
)
ÏÏ0 1
.
ÏÏ1 2
DomicilioFiscal
ÏÏ2 A
!=
ÏÏB D
null
ÏÏE I
)
ÏÏI J
?
ÏÏK L
ObtenerSede
ÏÏM X
(
ÏÏX Y
)
ÏÏY Z
.
ÏÏZ [
DomicilioFiscal
ÏÏ[ j
.
ÏÏj k
Ubigeo
ÏÏk q
.
ÏÏq r
Id
ÏÏr t
:
ÏÏu v
ActorSettingsÏÏw Ñ
.ÏÏÑ Ö
DefaultÏÏÖ å
.ÏÏå ç.
IdUbigeoSeleccionadoPorDefectoÏÏç ´
,ÏÏ´ ¨!
NumeroDocumentoSede
ÌÌ '
=
ÌÌ( )
ObtenerSede
ÌÌ* 5
(
ÌÌ5 6
)
ÌÌ6 7
.
ÌÌ7 8 
DocumentoIdentidad
ÌÌ8 J
}
ÓÓ 
;
ÓÓ 
return
ÔÔ 
Json
ÔÔ 
(
ÔÔ 
new
ÔÔ 
{
ÔÔ  !
data
ÔÔ" &
=
ÔÔ' (
configuracion
ÔÔ) 6
}
ÔÔ7 8
)
ÔÔ8 9
;
ÔÔ9 :
}
 
catch
ÒÒ 
(
ÒÒ 
	Exception
ÒÒ 
e
ÒÒ 
)
ÒÒ 
{
ÚÚ 
return
ÛÛ 
new
ÛÛ "
JsonHttpStatusResult
ÛÛ /
(
ÛÛ/ 0
Util
ÛÛ0 4
.
ÛÛ4 5
	ErrorJson
ÛÛ5 >
(
ÛÛ> ?
e
ÛÛ? @
)
ÛÛ@ A
,
ÛÛA B
HttpStatusCode
ÛÛC Q
.
ÛÛQ R!
InternalServerError
ÛÛR e
)
ÛÛe f
;
ÛÛf g
}
ÙÙ 
}
ıı 	
[
˜˜ 	
	Authorize
˜˜	 
(
˜˜ 
Roles
˜˜ 
=
˜˜ 
$str
˜˜ ,
)
˜˜, -
]
˜˜- .
public
¯¯ 
async
¯¯ 
Task
¯¯ 
<
¯¯ 

JsonResult
¯¯ $
>
¯¯$ %!
EnviarGuiasRemision
¯¯& 9
(
¯¯9 :
string
¯¯: @
desde
¯¯A F
,
¯¯F G
string
¯¯H N
hasta
¯¯O T
)
¯¯T U
{
˘˘ 	
try
˙˙ 
{
˚˚ 
DateTime
¸¸ 

fechaDesde
¸¸ #
=
¸¸$ %
DateTimeUtil
¸¸& 2
.
¸¸2 3E
7ObtenerFechaDesdeConPrecisionDeHorasMinutosMilisegundos
¸¸3 j
(
¸¸j k
desde
¸¸k p
)
¸¸p q
;
¸¸q r
DateTime
˝˝ 

fechaHasta
˝˝ #
=
˝˝$ %
DateTimeUtil
˝˝& 2
.
˝˝2 3E
7ObtenerFechaHastaConPrecisionDeHorasMinutosMilisegundos
˝˝3 j
(
˝˝j k
hasta
˝˝k p
)
˝˝p q
;
˝˝q r
string
˛˛ 
path
˛˛ 
=
˛˛  
HostingEnvironment
˛˛ 0
.
˛˛0 1%
ApplicationPhysicalPath
˛˛1 H
;
˛˛H I
OperationResult
ˇˇ 
result
ˇˇ  &
=
ˇˇ' (
await
ˇˇ) .*
facturacionElectronicaLogica
ˇˇ/ K
.
ˇˇK L(
EnviarGuiaDeRemisionManual
ˇˇL f
(
ˇˇf g

fechaDesde
ˇˇg q
,
ˇˇq r

fechaHasta
ˇˇs }
,
ˇˇ} ~
ProfileDataˇˇ ä
(ˇˇä ã
)ˇˇã å
.ˇˇå ç
Sedeˇˇç ë
,ˇˇë í
ProfileDataˇˇì û
(ˇˇû ü
)ˇˇü †
.ˇˇ† °
Empleadoˇˇ° ©
.ˇˇ© ™
Idˇˇ™ ¨
,ˇˇ¨ ≠
pathˇˇÆ ≤
)ˇˇ≤ ≥
;ˇˇ≥ ¥
return
ÄÄ 
new
ÄÄ "
JsonHttpStatusResult
ÄÄ /
(
ÄÄ/ 0
new
ÄÄ0 3
{
ÄÄ4 5
result
ÄÄ6 <
.
ÄÄ< =
code_result
ÄÄ= H
,
ÄÄH I
result
ÄÄJ P
.
ÄÄP Q
data
ÄÄQ U
,
ÄÄU V 
result_description
ÄÄW i
=
ÄÄj k
result
ÄÄl r
.
ÄÄr s
title
ÄÄs x
}
ÄÄy z
,
ÄÄz {
HttpStatusCodeÄÄ| ä
.ÄÄä ã
OKÄÄã ç
)ÄÄç é
;ÄÄé è
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
e
ÇÇ 
)
ÇÇ 
{
ÉÉ 
return
ÑÑ 
new
ÑÑ "
JsonHttpStatusResult
ÑÑ /
(
ÑÑ/ 0
Util
ÑÑ0 4
.
ÑÑ4 5
	ErrorJson
ÑÑ5 >
(
ÑÑ> ?
new
ÑÑ? B
	Exception
ÑÑC L
(
ÑÑL M
$str
ÑÑM x
,
ÑÑx y
e
ÑÑz {
)
ÑÑ{ |
)
ÑÑ| }
,
ÑÑ} ~
HttpStatusCodeÑÑ ç
.ÑÑç é#
InternalServerErrorÑÑé °
)ÑÑ° ¢
;ÑÑ¢ £
}
ÖÖ 
}
ÜÜ 	
[
àà 	
	Authorize
àà	 
(
àà 
Roles
àà 
=
àà 
$str
àà ,
)
àà, -
]
àà- .
public
ââ 

JsonResult
ââ )
ConsultarEnvioGuiasRemision
ââ 5
(
ââ5 6
)
ââ6 7
{
ää 	
try
ãã 
{
åå 
OperationResult
çç 
result
çç  &
=
çç' (*
facturacionElectronicaLogica
çç) E
.
ççE F*
ConsultarGuiasRemisionManual
ççF b
(
ççb c
)
ççc d
;
ççd e
return
éé 
new
éé "
JsonHttpStatusResult
éé /
(
éé/ 0
new
éé0 3
{
éé4 5
result
éé6 <
.
éé< =
code_result
éé= H
,
ééH I
result
ééJ P
.
ééP Q
data
ééQ U
,
ééU V 
result_description
ééW i
=
ééj k
result
éél r
.
éér s
title
éés x
}
ééy z
,
ééz {
HttpStatusCodeéé| ä
.ééä ã
OKééã ç
)ééç é
;ééé è
}
èè 
catch
êê 
(
êê 
	Exception
êê 
e
êê 
)
êê 
{
ëë 
return
íí 
new
íí "
JsonHttpStatusResult
íí /
(
íí/ 0
Util
íí0 4
.
íí4 5
	ErrorJson
íí5 >
(
íí> ?
new
íí? B
	Exception
ííC L
(
ííL M
$str
ííM {
,
íí{ |
e
íí} ~
)
íí~ 
)íí Ä
,ííÄ Å
HttpStatusCodeííÇ ê
.ííê ë#
InternalServerErrorííë §
)íí§ •
;íí• ¶
}
ìì 
}
îî 	
}
ïï 
}ññ ü
hD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Almacen\AlmacenAjustesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class $
AlmacenAjustesController 1
:2 3
BaseController4 B
{ 
	protected		 
readonly		 $
IAjusteInventario_Logica		 3
_ajusteInventario		4 E
;		E F
public $
AlmacenAjustesController '
(' (
)( )
:) *
base* .
(. /
)/ 0
{ 	
_ajusteInventario 
= 
Dependencia  +
.+ ,
Resolve, 3
<3 4$
IAjusteInventario_Logica4 L
>L M
(M N
)N O
;O P
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str ,
), -
]- .
public 
void 
CuadrarStock  
(  !
)! "
{ 	
_ajusteInventario !
.! "?
3CuadrarStockFisicoEntreInventarioActualYMovimientos" U
(U V
)V W
;W X
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str ,
), -
]- .
public 
void #
CorregirCostosUnitarios +
(+ ,
), -
{ 	
_ajusteInventario 
. 6
*RecalcularCostoUnitarioYTotalEnMovimientos H
(H I
)I J
;J K
} 	
}   
}!! ≥«
iD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Almacen\AlmacenReportesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class %
AlmacenReportesController 2
:3 4
BaseController5 C
{ 
	protected 
readonly 
IOperacionLogica +
operacionLogica, ;
;; <
	protected 
readonly 
IActorNegocioLogica .
actorNegocioLogica/ A
;A B
	protected 
readonly 
IConceptoLogica *
conceptoLogica+ 9
;9 :
	protected 
readonly "
IAlmacenReporte_Logica 1"
almacenReportingLogica2 H
;H I
	protected 
readonly $
IInventarioActual_Logica 3#
inventarioActual_Logica4 K
;K L
	protected 
readonly $
ICentroDeAtencion_Logica 3#
centroDeAtencion_Logica4 K
;K L
public!! %
AlmacenReportesController!! (
(!!( )
)!!) *
:!!* +
base!!+ /
(!!/ 0
)!!0 1
{"" 	
operacionLogica## 
=## 
Dependencia## )
.##) *
Resolve##* 1
<##1 2
IOperacionLogica##2 B
>##B C
(##C D
)##D E
;##E F
actorNegocioLogica$$ 
=$$  
Dependencia$$! ,
.$$, -
Resolve$$- 4
<$$4 5
IActorNegocioLogica$$5 H
>$$H I
($$I J
)$$J K
;$$K L
conceptoLogica%% 
=%% 
Dependencia%% (
.%%( )
Resolve%%) 0
<%%0 1
IConceptoLogica%%1 @
>%%@ A
(%%A B
)%%B C
;%%C D"
almacenReportingLogica&& "
=&&# $
Dependencia&&% 0
.&&0 1
Resolve&&1 8
<&&8 9"
IAlmacenReporte_Logica&&9 O
>&&O P
(&&P Q
)&&Q R
;&&R S#
inventarioActual_Logica'' #
=''$ %
Dependencia''& 1
.''1 2
Resolve''2 9
<''9 :$
IInventarioActual_Logica'': R
>''R S
(''S T
)''T U
;''U V#
centroDeAtencion_Logica)) #
=))$ %
Dependencia))& 1
.))1 2
Resolve))2 9
<))9 :$
ICentroDeAtencion_Logica)): R
>))R S
())S T
)))T U
;))U V
}++ 	
[-- 	
	Authorize--	 
(-- 
Roles-- 
=-- 
$str-- D
)--D E
]--E F
public.. 
ActionResult.. 
	Principal.. %
(..% &
)..& '
{// 	
ViewBag00 
.00 
Data00 
=00 "
almacenReportingLogica00 5
.005 6,
 ObtenerDatosParaReportePrincipal006 V
(00V W
ProfileData00W b
(00b c
)00c d
)00d e
;00e f
return11 
View11 
(11 
)11 
;11 
}22 	
[44 	
	Authorize44	 
(44 
Roles44 
=44 
$str44 D
)44D E
]44E F
public55 
ActionResult55 
ReporteKardex55 )
(55) *
)55* +
{66 	
List77 
<77 
DateTime77 
>77 
fechas77 !
=77" #
operacionLogica77$ 3
.773 4=
1ObtenerFechaIncioyFinParaReporteVentaPuntoDeVenta774 e
(77e f
)77f g
;77g h
ViewBag88 
.88 
fechaInicio88 
=88  !
fechas88" (
[88( )
$num88) *
]88* +
.88+ ,
AddDays88, 3
(883 4
-884 5
$num885 6
)886 7
;887 8
ViewBag99 
.99 
fechaFin99 
=99 
fechas99 %
[99% &
$num99& '
]99' (
;99( )
return:: 
View:: 
(:: 
):: 
;:: 
};; 	
public== 
ActionResult== !
ReporteConceptoBasico== 1
(==1 2
)==2 3
{>> 	
List?? 
<?? 
DateTime?? 
>?? 
fechas?? !
=??" #
operacionLogica??$ 3
.??3 4=
1ObtenerFechaIncioyFinParaReporteVentaPuntoDeVenta??4 e
(??e f
)??f g
;??g h
ViewBag@@ 
.@@ 
fechaInicio@@ 
=@@  !
fechas@@" (
[@@( )
$num@@) *
]@@* +
.@@+ ,
AddDays@@, 3
(@@3 4
-@@4 5
$num@@5 6
)@@6 7
;@@7 8
ViewBagAA 
.AA 
fechaFinAA 
=AA 
fechasAA %
[AA% &
$numAA& '
]AA' (
;AA( )
returnBB 
ViewBB 
(BB 
)BB 
;BB 
}CC 	
[EE 	
	AuthorizeEE	 
(EE 
RolesEE 
=EE 
$strEE D
)EED E
]EEE F
publicFF 
ActionResultFF '
ReporteInventarioValorizadoFF 7
(FF7 8
)FF8 9
{GG 	
ViewBagHH 
.HH 
fechaActualHH 
=HH  
DateTimeUtilHH! -
.HH- .
FechaActualHH. 9
(HH9 :
)HH: ;
;HH; <
returnJJ 
ViewJJ 
(JJ 
)JJ 
;JJ 
}KK 	
publicPP 

JsonResultPP '
ObtenerInventarioValorizadoPP 5
(PP5 6
intPP6 9
	idAlmacenPP: C
,PPC D
intPPE H
[PPH I
]PPI J
idsConceptosBasicosPPK ^
,PP^ _
intPP` c
[PPc d
]PPd e(
idsValoresDeCaracteristicas	PPf Å
,
PPÅ Ç
bool
PPÉ á
conLote
PPà è
)
PPè ê
{QQ 	
tryRR 
{SS 
ListTT 
<TT 
stringTT 
>TT 
cadenaTT #
=TT$ %
newTT& )
ListTT* .
<TT. /
stringTT/ 5
>TT5 6
(TT6 7
)TT7 8
;TT8 9
ListUU 
<UU 
Detalle_maestroUU $
>UU$ %

resultadosUU& 0
=UU1 2
conceptoLogicaUU3 A
.UUA B"
ObtenerCaracteristicasUUB X
(UUX Y
)UUY Z
;UUZ [
ListVV 
<VV "
ComboGenericoViewModelVV +
>VV+ ,
caracteristicasVV- <
=VV= >"
ComboGenericoViewModelVV? U
.VVU V
ConvertVVV ]
(VV] ^

resultadosVV^ h
)VVh i
;VVi j
ListWW 
<WW )
InventarioValorizadoViewModelWW 2
>WW2 3
inventarioViewModelWW4 G
;WWG H
varXX #
idCentroAtencionPreciosXX +
=XX, -
ProfileDataXX. 9
(XX9 :
)XX: ;
.XX; <.
"IdCentroAtencionQueTieneLosPreciosXX< ^
;XX^ _
ifYY 
(YY '
idsValoresDeCaracteristicasYY /
==YY0 2
nullYY3 7
)YY7 8
{ZZ '
idsValoresDeCaracteristicas[[ /
=[[0 1
new[[2 5
int[[6 9
[[[9 :
][[: ;
{[[< =
}[[> ?
;[[? @
}\\ 
if^^ 
(^^ 
idsConceptosBasicos^^ '
==^^( *
null^^+ /
)^^/ 0
{__ 
idsConceptosBasicos`` '
=``( )
new``* -
int``. 1
[``1 2
]``2 3
{``4 5
}``6 7
;``7 8
}aa 
inventarioViewModelcc #
=cc$ %)
InventarioValorizadoViewModelcc& C
.ccC D
ConvertccD K
(ccK L#
inventarioActual_LogicaccL c
.ccc d.
!ObtenerInventarioValorizadoActual	ccd Ö
(
ccÖ Ü
	idAlmacen
ccÜ è
,
ccè ê%
idCentroAtencionPrecios
ccë ®
,
cc® ©!
idsConceptosBasicos
cc™ Ω
,
ccΩ æ)
idsValoresDeCaracteristicas
ccø ⁄
)
cc⁄ €
,
cc€ ‹
caracteristicas
cc› Ï
,
ccÏ Ì
conLote
ccÓ ı
)
ccı ˆ
;
ccˆ ˜
decimalee 
?ee 
cantidadTotalee &
=ee' (
nullee) -
;ee- .
decimalff 
?ff 
costoUnitarioTotalff +
=ff, -
nullff. 2
;ff2 3
decimalgg 
?gg 
precioVentaTotalgg )
=gg* +
nullgg, 0
;gg0 1
decimalhh 

costoTotalhh "
=hh# $
inventarioViewModelhh% 8
.hh8 9
Sumhh9 <
(hh< =
ivmhh= @
=>hhA C
ivmhhD G
.hhG H

CostoTotalhhH R
)hhR S
;hhS T
decimalii 
importeTotalii $
=ii% &
inventarioViewModelii' :
.ii: ;
Sumii; >
(ii> ?
ivmii? B
=>iiC E
ivmiiF I
.iiI J
ImporteTotaliiJ V
)iiV W
;iiW X
decimaljj 
utilidadTotaljj %
=jj& '
inventarioViewModeljj( ;
.jj; <
Sumjj< ?
(jj? @
ivmjj@ C
=>jjD F
ivmjjG J
.jjJ K
UtilidadjjK S
)jjS T
;jjT U
varkk 
totaleskk 
=kk 
newkk !)
InventarioValorizadoViewModelkk" ?
(kk? @
$strkk@ I
,kkI J
cantidadTotalkkK X
,kkX Y
$strkkZ \
,kk\ ]
costoUnitarioTotalkk^ p
,kkp q

costoTotalkkr |
,kk| }
precioVentaTotal	kk~ é
,
kké è
importeTotal
kkê ú
,
kkú ù
utilidadTotal
kkû ´
,
kk´ ¨
new
kk≠ ∞
List
kk± µ
<
kkµ ∂3
%Valor_caracteristica_concepto_negocio
kk∂ €
>
kk€ ‹
(
kk‹ ›
)
kk› ﬁ
,
kkﬁ ﬂ
caracteristicas
kk‡ Ô
)
kkÔ 
;
kk Ò
cadenamm 
=mm 0
$ConvertInventarioValorizadoViewModelmm =
(mm= >
inventarioViewModelmm> Q
)mmQ R
;mmR S
returnpp 
Jsonpp 
(pp 
newpp 
{pp  !
cadenapp" (
,pp( )
totalespp* 1
}pp2 3
)pp3 4
;pp4 5
}qq 
catchrr 
(rr 
	Exceptionrr 
err 
)rr 
{ss 
throwtt 
newtt 
ControllerExceptiontt -
(tt- .
$strtt. V
,ttV W
ettX Y
)ttY Z
;ttZ [
}uu 
}vv 	
publicxx 
Listxx 
<xx 
Stringxx 
>xx 0
$ConvertInventarioValorizadoViewModelxx @
(xx@ A
ListxxA E
<xxE F)
InventarioValorizadoViewModelxxF c
>xxc d
inventarioViewModelxxe x
)xxx y
{yy 	
varzz 
listDynamiczz 
=zz 
newzz !
Listzz" &
<zz& '
dynamiczz' .
>zz. /
(zz/ 0
)zz0 1
;zz1 2
List{{ 
<{{ 
JObject{{ 
>{{ 
jobject{{ !
={{" #
new{{$ '
List{{( ,
<{{, -
JObject{{- 4
>{{4 5
({{5 6
){{6 7
;{{7 8
List|| 
<|| 
string|| 
>|| 
cadena|| 
=||  !
new||" %
List||& *
<||* +
string||+ 1
>||1 2
(||2 3
)||3 4
;||4 5
foreach 
( 
var 
item 
in  
inventarioViewModel! 4
)4 5
{
ÄÄ 
dynamic
ÅÅ 
itemDynamic
ÅÅ #
=
ÅÅ$ %
new
ÅÅ& )
System
ÅÅ* 0
.
ÅÅ0 1
Dynamic
ÅÅ1 8
.
ÅÅ8 9
ExpandoObject
ÅÅ9 F
(
ÅÅF G
)
ÅÅG H
;
ÅÅH I
itemDynamic
ÇÇ 
.
ÇÇ .
 _______Nombre_De_Concepto_______
ÇÇ <
=
ÇÇ= >
item
ÇÇ? C
.
ÇÇC D
Producto
ÇÇD L
;
ÇÇL M
foreach
ÉÉ 
(
ÉÉ 
var
ÉÉ 
	itemValor
ÉÉ &
in
ÉÉ' )
item
ÉÉ* .
.
ÉÉ. /$
ValoresCaracteristicas
ÉÉ/ E
)
ÉÉE F
{
ÑÑ 
(
ÖÖ 
(
ÖÖ 
IDictionary
ÖÖ !
<
ÖÖ! "
string
ÖÖ" (
,
ÖÖ( )
object
ÖÖ* 0
>
ÖÖ0 1
)
ÖÖ1 2
itemDynamic
ÖÖ2 =
)
ÖÖ= >
.
ÖÖ> ?
Add
ÖÖ? B
(
ÖÖB C
	itemValor
ÖÖC L
.
ÖÖL M"
NombreCaracteristica
ÖÖM a
,
ÖÖa b
	itemValor
ÖÖc l
.
ÖÖl m
NombreValor
ÖÖm x
)
ÖÖx y
;
ÖÖy z
}
ÜÜ 
itemDynamic
áá 
.
áá 
Lote
áá  
=
áá! "
item
áá# '
.
áá' (
Lote
áá( ,
;
áá, -
itemDynamic
àà 
.
àà 
Cant
àà  
=
àà! "
item
àà# '
.
àà' (
Cantidad
àà( 0
!=
àà1 3
null
àà4 8
?
àà9 :
(
àà; <
(
àà< =
decimal
àà= D
)
ààD E
item
ààE I
.
ààI J
Cantidad
ààJ R
)
ààR S
.
ààS T
ToString
ààT \
(
àà\ ]
$str
àà] `
+
ààa b 
AplicacionSettings
ààc u
.
ààu v
Default
ààv }
.
àà} ~(
NumeroDecimalesEnCantidadàà~ ó
)ààó ò
:ààô ö
nullààõ ü
;ààü †
itemDynamic
ââ 
.
ââ 
CU
ââ 
=
ââ  
item
ââ! %
.
ââ% &
CostoUnitario
ââ& 3
!=
ââ4 6
null
ââ7 ;
?
ââ< =
(
ââ> ?
(
ââ? @
decimal
ââ@ G
)
ââG H
item
ââH L
.
ââL M
CostoUnitario
ââM Z
)
ââZ [
.
ââ[ \
ToString
ââ\ d
(
ââd e
$str
ââe h
+
ââi j 
AplicacionSettings
ââk }
.
ââ} ~
Defaultââ~ Ö
.ââÖ Ü'
NumeroDecimalesEnPrecioââÜ ù
)ââù û
:ââü †
nullââ° •
;ââ• ¶
itemDynamic
ää 
.
ää 
Costo
ää !
=
ää" #
item
ää$ (
.
ää( )

CostoTotal
ää) 3
.
ää3 4
ToString
ää4 <
(
ää< =
$str
ää= A
)
ääA B
;
ääB C
itemDynamic
ãã 
.
ãã 
PU
ãã 
=
ãã  
item
ãã! %
.
ãã% &
PrecioVenta
ãã& 1
!=
ãã2 4
null
ãã5 9
?
ãã: ;
(
ãã< =
(
ãã= >
decimal
ãã> E
)
ããE F
item
ããF J
.
ããJ K
PrecioVenta
ããK V
)
ããV W
.
ããW X
ToString
ããX `
(
ãã` a
$str
ããa d
+
ããe f 
AplicacionSettings
ããg y
.
ããy z
Defaultããz Å
.ããÅ Ç'
NumeroDecimalesEnPrecioããÇ ô
)ããô ö
:ããõ ú
nullããù °
;ãã° ¢
itemDynamic
åå 
.
åå 
Val_Vta
åå #
=
åå$ %
item
åå& *
.
åå* +
ImporteTotal
åå+ 7
.
åå7 8
ToString
åå8 @
(
åå@ A
$str
ååA E
)
ååE F
;
ååF G
itemDynamic
çç 
.
çç 
Utilidad
çç $
=
çç% &
item
çç' +
.
çç+ ,
Utilidad
çç, 4
.
çç4 5
ToString
çç5 =
(
çç= >
$str
çç> B
)
ççB C
;
ççC D
listDynamic
éé 
.
éé 
Add
éé 
(
éé  
itemDynamic
éé  +
)
éé+ ,
;
éé, -
string
èè 
json
èè 
=
èè 
JsonConvert
èè )
.
èè) *
SerializeObject
èè* 9
(
èè9 :
itemDynamic
èè: E
)
èèE F
;
èèF G
cadena
êê 
.
êê 
Add
êê 
(
êê 
json
êê 
)
êê  
;
êê  !
jobject
ëë 
.
ëë 
Add
ëë 
(
ëë 
JObject
ëë #
.
ëë# $
Parse
ëë$ )
(
ëë) *
json
ëë* .
)
ëë. /
)
ëë/ 0
;
ëë0 1
}
íí 
return
îî 
cadena
îî 
;
îî 
}
ññ 	
public
ùù 
ActionResult
ùù .
 ObtenerReporteDeSalidasDeAlcohol
ùù <
(
ùù< =
string
ùù= C
fechaInicio
ùùD O
,
ùùO P
string
ùùQ W
fechaFin
ùùX `
,
ùù` a
[
ùùb c
System
ùùc i
.
ùùi j
Web
ùùj m
.
ùùm n
Http
ùùn r
.
ùùr s
FromUri
ùùs z
]
ùùz {
int
ùù| 
[ùù Ä
]ùùÄ Å!
idsEntidadInternaùùÇ ì
)ùùì î
{
ûû 	
try
üü 
{
†† 
DateTime
°° 

fechaDesde
°° #
=
°°$ %
DateTimeUtil
°°& 2
.
°°2 39
+ObtenerFechaDesdeConPrecisionDeMilisegundos
°°3 ^
(
°°^ _
fechaInicio
°°_ j
)
°°j k
;
°°k l
DateTime
¢¢ 

fechaHasta
¢¢ #
=
¢¢$ %
DateTimeUtil
¢¢& 2
.
¢¢2 39
+ObtenerFechaHastaConPrecisionDeMilisegundos
¢¢3 ^
(
¢¢^ _
fechaFin
¢¢_ g
)
¢¢g h
;
¢¢h i
List
§§ 
<
§§ %
Reporte_Concepto_Basico
§§ ,
>
§§, -'
detalladoConceptosBasicos
§§. G
=
§§H I
operacionLogica
§§J Y
.
§§Y Z.
 ObtenerReporteDeSalidasDeAlcohol
§§Z z
(
§§z {

fechaDesde§§{ Ö
,§§Ö Ü

fechaHasta§§á ë
,§§ë í!
idsEntidadInterna§§ì §
)§§§ •
;§§• ¶
List
¶¶ 
<
¶¶ 5
'ReporteDeConceptoBasicoAlcoholViewModel
¶¶ <
>
¶¶< =>
0reporteDetalladoDeConceptoBasicoAlcoholViewModel
¶¶> n
=
¶¶o p6
'ReporteDeConceptoBasicoAlcoholViewModel¶¶q ò
.¶¶ò ô0
 ConvertirConceptosBasicosALitros¶¶ô π
(¶¶π ∫)
detalladoConceptosBasicos¶¶∫ ”
)¶¶” ‘
;¶¶‘ ’
string
©© %
_nombresCentrosAtencion
©© .
=
©©/ 0
$str
©©1 3
;
©©3 4
foreach
´´ 
(
´´ 
var
´´ 
item
´´ !
in
´´" $
idsEntidadInterna
´´% 6
)
´´6 7
{
¨¨ 
string
≠≠ #
_nombreCentroAtencion
≠≠ 0
=
≠≠1 2%
centroDeAtencion_Logica
≠≠3 J
.
≠≠J K-
ObtenerNombreDeCentroDeAtencion
≠≠K j
(
≠≠j k
item
≠≠k o
)
≠≠o p
;
≠≠p q%
_nombresCentrosAtencion
ÆÆ +
+=
ÆÆ, .
$str
ÆÆ/ 5
+
ÆÆ6 7#
_nombreCentroAtencion
ÆÆ8 M
;
ÆÆM N
}
ØØ 
ReportParameter
≤≤ $
parametroNombreEmpresa
≤≤  6
=
≤≤7 8
new
≤≤9 <
ReportParameter
≤≤= L
(
≤≤L M
$str
≤≤M \
,
≤≤\ ]
ObtenerSede
≤≤^ i
(
≤≤i j
)
≤≤j k
.
≤≤k l
Nombre
≤≤l r
)
≤≤r s
;
≤≤s t
ReportParameter
≥≥ +
parametroNombreCentroAtencion
≥≥  =
=
≥≥> ?
new
≥≥@ C
ReportParameter
≥≥D S
(
≥≥S T
$str
≥≥T j
,
≥≥j k&
_nombresCentrosAtencion≥≥l É
)≥≥É Ñ
;≥≥Ñ Ö
ReportParameter
¥¥ !
parametroFechaDesde
¥¥  3
=
¥¥4 5
new
¥¥6 9
ReportParameter
¥¥: I
(
¥¥I J
$str
¥¥J V
,
¥¥V W

fechaDesde
¥¥X b
.
¥¥b c
ToString
¥¥c k
(
¥¥k l
)
¥¥l m
)
¥¥m n
;
¥¥n o
ReportParameter
µµ !
parametroFechaHasta
µµ  3
=
µµ4 5
new
µµ6 9
ReportParameter
µµ: I
(
µµI J
$str
µµJ V
,
µµV W

fechaHasta
µµX b
.
µµb c
ToString
µµc k
(
µµk l
)
µµl m
)
µµm n
;
µµn o
var
∑∑ 
sede
∑∑ 
=
∑∑ 
ObtenerSede
∑∑ &
(
∑∑& '
)
∑∑' (
;
∑∑( )
string
∏∏ 

logoString
∏∏ !
=
∏∏" #
Convert
∏∏$ +
.
∏∏+ ,
ToBase64String
∏∏, :
(
∏∏: ;
sede
∏∏; ?
.
∏∏? @
Logo
∏∏@ D
,
∏∏D E
$num
∏∏F G
,
∏∏G H
sede
∏∏I M
.
∏∏M N
Logo
∏∏N R
.
∏∏R S
Length
∏∏S Y
)
∏∏Y Z
;
∏∏Z [
ReportParameter
ππ 
logoSede
ππ  (
=
ππ) *
new
ππ+ .
ReportParameter
ππ/ >
(
ππ> ?
$str
ππ? I
,
ππI J

logoString
ππK U
)
ππU V
;
ππV W
ReportParameter
ªª 
empleadoSede
ªª  ,
=
ªª- .
new
ªª/ 2
ReportParameter
ªª3 B
(
ªªB C
$str
ªªC L
,
ªªL M
ProfileData
ªªN Y
(
ªªY Z
)
ªªZ [
.
ªª[ \
Empleado
ªª\ d
.
ªªd e
NombresYApellidos
ªªe v
)
ªªv w
;
ªªw x
DateTime
ΩΩ 
fechaActual
ΩΩ $
=
ΩΩ% &
DateTimeUtil
ΩΩ& 2
.
ΩΩ2 3
FechaActual
ΩΩ3 >
(
ΩΩ> ?
)
ΩΩ? @
;
ΩΩ@ A
ReportParameter
ææ  
fechaActualSistema
ææ  2
=
ææ3 4
new
ææ5 8
ReportParameter
ææ9 H
(
ææH I
$str
ææI ]
,
ææ] ^
fechaActual
ææ_ j
.
ææj k
ToString
ææk s
(
ææs t
)
ææt u
)
ææu v
;
ææv w
var
¿¿ 
	rptviewer
¿¿ 
=
¿¿ 
new
¿¿  #
ReportViewer
¿¿$ 0
(
¿¿0 1
)
¿¿1 2
;
¿¿2 3
	rptviewer
¡¡ 
.
¡¡ 
LocalReport
¡¡ %
.
¡¡% &

ReportPath
¡¡& 0
=
¡¡1 2
Request
¡¡3 :
.
¡¡: ;
MapPath
¡¡; B
(
¡¡B C
Request
¡¡C J
.
¡¡J K
ApplicationPath
¡¡K Z
)
¡¡Z [
+
¡¡\ ]
$str¡¡^ î
;¡¡î ï
	rptviewer
¬¬ 
.
¬¬ 
LocalReport
¬¬ %
.
¬¬% &
SetParameters
¬¬& 3
(
¬¬3 4
new
¬¬4 7
ReportParameter
¬¬8 G
[
¬¬G H
]
¬¬H I
{
√√ $
parametroNombreEmpresa
ƒƒ *
,
ƒƒ+ ,!
parametroFechaDesde
ƒƒ, ?
,
ƒƒ? @!
parametroFechaHasta
ƒƒA T
,
ƒƒT U+
parametroNombreCentroAtencion
ƒƒV s
,
ƒƒs t
logoSede
ƒƒu }
,
ƒƒ} ~
empleadoSedeƒƒ ã
,ƒƒã å"
fechaActualSistemaƒƒç ü
}
≈≈ 
)
≈≈ 
;
≈≈ 
ReportDataSource
»»  4
&rptdatasourceDetalladoConceptosBasicos
»»! G
=
»»H I
new
»»J M
ReportDataSource
»»N ^
(
»»^ _
$str
»»_ q
,
»»q r?
0reporteDetalladoDeConceptoBasicoAlcoholViewModel»»s £
)»»£ §
;»»§ •
	rptviewer
ÀÀ 
.
ÀÀ 
ProcessingMode
ÀÀ (
=
ÀÀ) *
ProcessingMode
ÀÀ+ 9
.
ÀÀ9 :
Local
ÀÀ: ?
;
ÀÀ? @
	rptviewer
ÃÃ 
.
ÃÃ 
LocalReport
ÃÃ %
.
ÃÃ% &
DataSources
ÃÃ& 1
.
ÃÃ1 2
Add
ÃÃ2 5
(
ÃÃ5 64
&rptdatasourceDetalladoConceptosBasicos
ÃÃ6 \
)
ÃÃ\ ]
;
ÃÃ] ^
	rptviewer
ŒŒ 
.
ŒŒ !
SizeToReportContent
ŒŒ -
=
ŒŒ. /
true
ŒŒ0 4
;
ŒŒ4 5
	rptviewer
œœ 
.
œœ 
Width
œœ 
=
œœ  !
Unit
œœ" &
.
œœ& '

Percentage
œœ' 1
(
œœ1 2
$num
œœ2 5
)
œœ5 6
;
œœ6 7
	rptviewer
–– 
.
–– 
Height
––  
=
––! "
Unit
––# '
.
––' (

Percentage
––( 2
(
––2 3
$num
––3 6
)
––6 7
;
––7 8
ViewBag
—— 
.
—— 
ReportViewer
—— $
=
——% &
	rptviewer
——' 0
;
——0 1
return
”” 
View
”” 
(
”” 
$str
”” 1
)
””1 2
;
””2 3
}
‘‘ 
catch
’’ 
(
’’ 
	Exception
’’ 
e
’’ 
)
’’ 
{
÷÷ 
throw
◊◊ 
new
◊◊ !
ControllerException
◊◊ -
(
◊◊- .
$str
◊◊. \
,
◊◊\ ]
e
◊◊^ _
)
◊◊_ `
;
◊◊` a
}
ÿÿ 
}
ŸŸ 	
}
›› 
}ﬁﬁ πò
}D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Almacen\AlmacenReportesController_InventariosActuales.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class %
AlmacenReportesController 2
{ 
public 
ActionResult *
InventariosActuales_Inventario :
(: ;
[; <
System< B
.B C
WebC F
.F G
HttpG K
.K L
FromUriL S
]S T
stringU [
[[ \
]\ ]
	almacenes^ g
,g h
[i j
Systemj p
.p q
Webq t
.t u
Httpu y
.y z
FromUri	z Å
]
Å Ç
int
É Ü
[
Ü á
]
á à
idsFamilias
â î
,
î ï
string
ñ ú
nombresFamilias
ù ¨
,
¨ ≠
bool
Æ ≤
todasLasFamilias
≥ √
)
√ ƒ
{ 	
var 
	rptviewer 
= 1
%GenerarInventariosActuales_Inventario A
(A B
	almacenesB K
,K L
idsFamiliasM X
,X Y
nombresFamiliasZ i
,i j
todasLasFamiliask {
,{ |
true	} Å
)
Å Ç
;
Ç É
ViewBag 
. 
ReportViewer  
=! "
	rptviewer# ,
;, -
return 
View 
( 
$str -
)- .
;. /
} 	
public 
ActionResult 2
&InventariosActuales_InventarioSemaforo B
(B C
[C D
SystemD J
.J K
WebK N
.N O
HttpO S
.S T
FromUriT [
][ \
string] c
[c d
]d e
	almacenesf o
,o p
[q r
Systemr x
.x y
Weby |
.| }
Http	} Å
.
Å Ç
FromUri
Ç â
]
â ä
int
ã é
[
é è
]
è ê
idsFamilias
ë ú
,
ú ù
string
û §
nombresFamilias
• ¥
,
¥ µ
bool
∂ ∫
todasLasFamilias
ª À
,
À Ã
bool
Õ —

estadoBajo
“ ‹
,
‹ ›
bool
ﬁ ‚
estadoNormal
„ Ô
,
Ô 
bool
Ò ı

estadoAlto
ˆ Ä
)
Ä Å
{ 	
var 
	rptviewer 
= 9
-GenerarInventariosActuales_InventarioSemaforo I
(I J
	almacenesJ S
,S T
idsFamiliasU `
,` a
nombresFamiliasb q
,q r
todasLasFamilias	s É
,
É Ñ

estadoBajo
Ö è
,
è ê
estadoNormal
ë ù
,
ù û

estadoAlto
ü ©
,
© ™
true
´ Ø
)
Ø ∞
;
∞ ±
ViewBag 
. 
ReportViewer  
=! "
	rptviewer# ,
;, -
return 
View 
( 
$str -
)- .
;. /
} 	
public 
ActionResult 4
(InventariosActuales_InventarioValorizado D
(D E
[E F
SystemF L
.L M
WebM P
.P Q
HttpQ U
.U V
FromUriV ]
]] ^
string_ e
[e f
]f g
	almacenesh q
,q r
[s t
Systemt z
.z {
Web{ ~
.~ 
Http	 É
.
É Ñ
FromUri
Ñ ã
]
ã å
int
ç ê
[
ê ë
]
ë í
idsFamilias
ì û
,
û ü
string
† ¶
nombresFamilias
ß ∂
,
∂ ∑
bool
∏ º
todasLasFamilias
Ω Õ
)
Õ Œ
{ 	
var 
	rptviewer 
= ;
/GenerarInventariosActuales_InventarioValorizado K
(K L
	almacenesL U
,U V
idsFamiliasW b
,b c
nombresFamiliasd s
,s t
todasLasFamilias	u Ö
,
Ö Ü
true
á ã
)
ã å
;
å ç
ViewBag 
. 
ReportViewer  
=! "
	rptviewer# ,
;, -
return   
View   
(   
$str   -
)  - .
;  . /
}!! 	
public"" 
ReportViewer"" 1
%GenerarInventariosActuales_Inventario"" A
(""A B
string""B H
[""H I
]""I J
almacenesString""K Z
,""Z [
int""\ _
[""_ `
]""` a
idsFamilias""b m
,""m n
string""o u
nombresFamilias	""v Ö
,
""Ö Ü
bool
""á ã
todasLasFamilias
""å ú
,
""ú ù
bool
""û ¢
fromRequest
""£ Æ
)
""Æ Ø
{## 	
var$$ 
	almacenes$$ 
=$$ 
ObtenerItems$$ (
($$( )
almacenesString$$) 8
)$$8 9
;$$9 :
List%% 
<%% 
InventarioFisico%% !
>%%! "

inventario%%# -
=%%. /#
inventarioActual_Logica%%0 G
.%%G H&
InventariosFisicosActuales%%H b
(%%b c
	almacenes%%c l
,%%l m
todasLasFamilias%%n ~
,%%~ 
idsFamilias
%%Ä ã
)
%%ã å
.
%%å ç
OrderBy
%%ç î
(
%%î ï
i
%%ï ñ
=>
%%ó ô
i
%%ö õ
.
%%õ ú
Concepto
%%ú §
)
%%§ •
.
%%• ¶
ToList
%%¶ ¨
(
%%¨ ≠
)
%%≠ Æ
;
%%Æ Ø
var&& 
parametrosBasicos&& !
=&&" #$
ObtenerParametrosBasicos&&$ <
(&&< =
)&&= >
;&&> ?
ReportParameter'' 
parametroAlmacenes'' .
=''/ 0
new''1 4
ReportParameter''5 D
(''D E
$str''E P
,''P Q
String''R X
.''X Y
Join''Y ]
(''] ^
$str''^ a
,''a b
	almacenes''b k
.''k l
Select''l r
(''r s
a''s t
=>''t v
a''w x
.''x y
Nombre''y 
)	'' Ä
)
''Ä Å
)
''Å Ç
;
''Ç É
ReportParameter(( 
parametroFamilias(( -
=((. /
new((0 3
ReportParameter((4 C
(((C D
$str((D N
,((N O
nombresFamilias((P _
??((` b
$str((c j
)((j k
;((k l
var)) 
	rptviewer)) 
=)) 
new)) 
ReportViewer))  ,
()), -
)))- .
{))/ 0
ProcessingMode))1 ?
=))@ A
ProcessingMode))B P
.))P Q
Local))Q V
,))V W
SizeToReportContent))X k
=))l m
true))n r
,))r s
Width))t y
=))z {
Unit	))| Ä
.
))Ä Å

Percentage
))Å ã
(
))ã å
$num
))å è
)
))è ê
,
))ê ë
Height
))í ò
=
))ô ö
Unit
))õ ü
.
))ü †

Percentage
))† ™
(
))™ ´
$num
))´ Æ
)
))Æ Ø
}
))∞ ±
;
))± ≤
string** 
path** 
=** 
$str** ^
;**^ _
	rptviewer++ 
.++ 
LocalReport++ !
.++! "

ReportPath++" ,
=++- .
fromRequest++/ :
?++; <
Request++= D
.++D E
MapPath++E L
(++L M
Request++M T
.++T U
ApplicationPath++U d
)++d e
+++f g
path++h l
:++m n
HostingEnvironment	++o Å
.
++Å Ç
MapPath
++Ç â
(
++â ä
path
++ä é
)
++é è
;
++è ê
	rptviewer,, 
.,, 
LocalReport,, !
.,,! "
SetParameters,," /
(,,/ 0
new,,0 3
ReportParameter,,4 C
[,,C D
],,D E
{,,F G
parametrosBasicos-- !
.--! "

NombreSede--" ,
,--, -
parametrosBasicos.. !
...! "
FechaActualSistema.." 4
,..4 5
parametrosBasicos// !
.//! "
LogoSede//" *
,//* +
parametrosBasicos00 !
.00! "
Usuario00" )
,00) *
parametroFamilias11 !
,11! "
parametroAlmacenes22 "
}33 
)33 
;33 
ReportDataSource44 
rptdatasourceStock44 /
=440 1
new442 5
ReportDataSource446 F
(44F G
$str44G Z
,44Z [

inventario44\ f
)44f g
;44g h
	rptviewer55 
.55 
LocalReport55 !
.55! "
DataSources55" -
.55- .
Add55. 1
(551 2
rptdatasourceStock552 D
)55D E
;55E F
return66 
	rptviewer66 
;66 
}77 	
public88 
ReportViewer88 9
-GenerarInventariosActuales_InventarioSemaforo88 I
(88I J
string88J P
[88P Q
]88Q R
almacenesString88S b
,88b c
[88d e
System88e k
.88k l
Web88l o
.88o p
Http88p t
.88t u
FromUri88u |
]88| }
int	88~ Å
[
88Å Ç
]
88Ç É
idsFamilias
88Ñ è
,
88è ê
string
88ë ó
nombresFamilias
88ò ß
,
88ß ®
bool
88© ≠
todasLasFamilias
88Æ æ
,
88æ ø
bool
88¿ ƒ

estadoBajo
88≈ œ
,
88œ –
bool
88— ’
estadoNormal
88÷ ‚
,
88‚ „
bool
88‰ Ë

estadoAlto
88È Û
,
88Û Ù
bool
88ı ˘
fromRequest
88˙ Ö
)
88Ö Ü
{99 	
try:: 
{;; 
var<< 
	almacenes<< 
=<< 
ObtenerItems<<  ,
(<<, -
almacenesString<<- <
)<<< =
;<<= >
List== 
<== 
InventarioSemaforo== '
>==' (

inventario==) 3
===4 5#
inventarioActual_Logica==6 M
.==M N'
InventariosSemaforoActuales==N i
(==i j
	almacenes==j s
,==s t
todasLasFamilias	==u Ö
,
==Ö Ü
idsFamilias
==á í
,
==í ì

estadoBajo
==î û
,
==û ü
estadoNormal
==† ¨
,
==¨ ≠

estadoAlto
==Æ ∏
)
==∏ π
;
==π ∫
var>> 
parametrosBasicos>> %
=>>& '$
ObtenerParametrosBasicos>>( @
(>>@ A
)>>A B
;>>B C
ReportParameter?? 
parametroAlmacenes??  2
=??3 4
new??5 8
ReportParameter??9 H
(??H I
$str??I T
,??T U
String??V \
.??\ ]
Join??] a
(??a b
$str??b e
,??e f
	almacenes??g p
.??p q
Select??q w
(??w x
a??x y
=>??z |
a??} ~
.??~ 
Nombre	?? Ö
)
??Ö Ü
)
??Ü á
)
??á à
;
??à â
ReportParameter@@ 
parametroFamilias@@  1
=@@2 3
new@@4 7
ReportParameter@@8 G
(@@G H
$str@@H R
,@@R S
nombresFamilias@@T c
??@@d f
$str@@g n
)@@n o
;@@o p
varAA 
	rptviewerAA 
=AA 
newAA  #
ReportViewerAA$ 0
(AA0 1
)AA1 2
{AA3 4
ProcessingModeAA5 C
=AAD E
ProcessingModeAAF T
.AAT U
LocalAAU Z
,AAZ [
SizeToReportContentAA\ o
=AAp q
trueAAr v
,AAv w
WidthAAx }
=AA~ 
Unit
AAÄ Ñ
.
AAÑ Ö

Percentage
AAÖ è
(
AAè ê
$num
AAê ì
)
AAì î
,
AAî ï
Height
AAñ ú
=
AAù û
Unit
AAü £
.
AA£ §

Percentage
AA§ Æ
(
AAÆ Ø
$num
AAØ ≤
)
AA≤ ≥
}
AA¥ µ
;
AAµ ∂
stringBB 
pathBB 
=BB 
$strBB j
;BBj k
	rptviewerCC 
.CC 
LocalReportCC %
.CC% &

ReportPathCC& 0
=CC1 2
fromRequestCC3 >
?CC? @
RequestCCA H
.CCH I
MapPathCCI P
(CCP Q
RequestCCQ X
.CCX Y
ApplicationPathCCY h
)CCh i
+CCj k
pathCCl p
:CCq r
HostingEnvironment	CCs Ö
.
CCÖ Ü
MapPath
CCÜ ç
(
CCç é
path
CCé í
)
CCí ì
;
CCì î
	rptviewerDD 
.DD 
LocalReportDD %
.DD% &
SetParametersDD& 3
(DD3 4
newDD4 7
ReportParameterDD8 G
[DDG H
]DDH I
{DDJ K
parametrosBasicosEE !
.EE! "

NombreSedeEE" ,
,EE, -
parametrosBasicosFF !
.FF! "
FechaActualSistemaFF" 4
,FF4 5
parametrosBasicosGG !
.GG! "
LogoSedeGG" *
,GG* +
parametrosBasicosHH !
.HH! "
UsuarioHH" )
,HH) *
parametroFamiliasII !
,II! "
parametroAlmacenesJJ "
}KK 
)KK 
;KK 
ReportDataSourceLL  (
rptdatasourceStockPorFamiliaLL! =
=LL> ?
newLL@ C
ReportDataSourceLLD T
(LLT U
$strLLU p
,LLp q

inventarioLLr |
)LL| }
;LL} ~
	rptviewerMM 
.MM 
LocalReportMM %
.MM% &
DataSourcesMM& 1
.MM1 2
AddMM2 5
(MM5 6(
rptdatasourceStockPorFamiliaMM6 R
)MMR S
;MMS T
returnNN 
	rptviewerNN  
;NN  !
}OO 
catchPP 
(PP 
	ExceptionPP 
ePP 
)PP 
{QQ 
throwRR 
newRR 
ControllerExceptionRR -
(RR- .
$strRR. _
,RR_ `
eRRa b
)RRb c
;RRc d
}SS 
}TT 	
publicVV 
ReportViewerVV ;
/GenerarInventariosActuales_InventarioValorizadoVV K
(VVK L
stringVVL R
[VVR S
]VVS T
almacenesStringVVU d
,VVd e
[VVf g
SystemVVg m
.VVm n
WebVVn q
.VVq r
HttpVVr v
.VVv w
FromUriVVw ~
]VV~ 
int
VVÄ É
[
VVÉ Ñ
]
VVÑ Ö
idsFamilias
VVÜ ë
,
VVë í
string
VVì ô
nombresFamilias
VVö ©
,
VV© ™
bool
VV´ Ø
todasLasFamilias
VV∞ ¿
,
VV¿ ¡
bool
VV¬ ∆
fromRequest
VV« “
)
VV“ ”
{WW 	
varXX 
	almacenesXX 
=XX 
ObtenerItemsXX (
(XX( )
almacenesStringXX) 8
)XX8 9
;XX9 :
ListYY 
<YY  
InventarioValorizadoYY %
>YY% &

inventarioYY' 1
=YY2 3#
inventarioActual_LogicaYY4 K
.YYK L*
InventariosValorizadosActualesYYL j
(YYj k
	almacenesYYk t
,YYt u
todasLasFamilias	YYv Ü
,
YYÜ á
idsFamilias
YYà ì
)
YYì î
.
YYî ï
OrderBy
YYï ú
(
YYú ù
i
YYù û
=>
YYü °
i
YY¢ £
.
YY£ §
Concepto
YY§ ¨
)
YY¨ ≠
.
YY≠ Æ
ToList
YYÆ ¥
(
YY¥ µ
)
YYµ ∂
;
YY∂ ∑
varZZ 
parametrosBasicosZZ !
=ZZ" #$
ObtenerParametrosBasicosZZ$ <
(ZZ< =
)ZZ= >
;ZZ> ?
ReportParameter[[ 
parametroAlmacenes[[ .
=[[/ 0
new[[1 4
ReportParameter[[5 D
([[D E
$str[[E P
,[[P Q
String[[R X
.[[X Y
Join[[Y ]
([[] ^
$str[[^ a
,[[a b
	almacenes[[c l
.[[l m
Select[[m s
([[s t
a[[t u
=>[[v x
a[[y z
.[[z {
Nombre	[[{ Å
)
[[Å Ç
)
[[Ç É
)
[[É Ñ
;
[[Ñ Ö
ReportParameter\\ 
parametroFamilias\\ -
=\\. /
new\\0 3
ReportParameter\\4 C
(\\C D
$str\\D N
,\\N O
nombresFamilias\\P _
??\\` b
$str\\c j
)\\j k
;\\k l
var]] 
	rptviewer]] 
=]] 
new]] 
ReportViewer]]  ,
(]], -
)]]- .
{]]/ 0
ProcessingMode]]1 ?
=]]@ A
ProcessingMode]]B P
.]]P Q
Local]]Q V
,]]V W
SizeToReportContent]]X k
=]]l m
true]]n r
,]]r s
Width]]t y
=]]z {
Unit	]]| Ä
.
]]Ä Å

Percentage
]]Å ã
(
]]ã å
$num
]]å è
)
]]è ê
,
]]ê ë
Height
]]í ò
=
]]ô ö
Unit
]]õ ü
.
]]ü †

Percentage
]]† ™
(
]]™ ´
$num
]]´ Æ
)
]]Æ Ø
}
]]∞ ±
;
]]± ≤
string^^ 
path^^ 
=^^ 
$str^^ h
;^^h i
	rptviewer__ 
.__ 
LocalReport__ !
.__! "

ReportPath__" ,
=__- .
fromRequest__/ :
?__; <
Request__= D
.__D E
MapPath__E L
(__L M
Request__M T
.__T U
ApplicationPath__U d
)__d e
+__f g
path__h l
:__m n
HostingEnvironment	__o Å
.
__Å Ç
MapPath
__Ç â
(
__â ä
path
__ä é
)
__é è
;
__è ê
	rptviewer`` 
.`` 
LocalReport`` !
.``! "
SetParameters``" /
(``/ 0
new``0 3
ReportParameter``4 C
[``C D
]``D E
{``F G
parametrosBasicosaa !
.aa! "

NombreSedeaa" ,
,aa, -
parametrosBasicosbb !
.bb! "
FechaActualSistemabb" 4
,bb4 5
parametrosBasicoscc !
.cc! "
LogoSedecc" *
,cc* +
parametrosBasicosdd !
.dd! "
Usuariodd" )
,dd) *
parametroFamiliasee !
,ee! "
parametroAlmacenesff "
}gg 
)gg 
;gg 
ReportDataSourcehh 
rptdatasourceStockhh /
=hh0 1
newhh2 5
ReportDataSourcehh6 F
(hhF G
$strhhG d
,hhd e

inventariohhf p
)hhp q
;hhq r
	rptviewerii 
.ii 
LocalReportii !
.ii! "
DataSourcesii" -
.ii- .
Addii. 1
(ii1 2
rptdatasourceStockii2 D
)iiD E
;iiE F
returnjj 
	rptviewerjj 
;jj 
}kk 	
}mm 
}nn Èü
}D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Almacen\AlmacenReportesController_InventariosPorFecha.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class %
AlmacenReportesController 2
{ 
public 
ActionResult *
InventariosPorFecha_Inventario :
(: ;
int; >
	idAlmacen? H
,H I
stringJ P
nombreAlmacenQ ^
,^ _
DateTime` h

fechaHastai s
,s t
[u v
Systemv |
.| }
Web	} Ä
.
Ä Å
Http
Å Ö
.
Ö Ü
FromUri
Ü ç
]
ç é
int
è í
[
í ì
]
ì î
idsFamilias
ï †
,
† °
string
¢ ®
nombresFamilias
© ∏
,
∏ π
bool
∫ æ
todasLasFamilias
ø œ
)
œ –
{ 	
var 
	rptviewer 
= 1
%GenerarInventariosPorFecha_Inventario A
(A B
	idAlmacenB K
,K L
nombreAlmacenM Z
,Z [

fechaHasta\ f
,f g
idsFamiliash s
,s t
nombresFamilias	u Ñ
,
Ñ Ö
todasLasFamilias
Ü ñ
,
ñ ó
true
ò ú
)
ú ù
;
ù û
ViewBag 
. 
ReportViewer  
=! "
	rptviewer# ,
;, -
return 
View 
( 
$str -
)- .
;. /
} 	
public 
ActionResult 2
&InventariosPorFecha_InventarioSemaforo B
(B C
intC F
	idAlmacenG P
,P Q
stringR X
nombreAlmacenY f
,f g
DateTimeh p

fechaHastaq {
,{ |
[} ~
System	~ Ñ
.
Ñ Ö
Web
Ö à
.
à â
Http
â ç
.
ç é
FromUri
é ï
]
ï ñ
int
ó ö
[
ö õ
]
õ ú
idsFamilias
ù ®
,
® ©
string
™ ∞
nombresFamilias
± ¿
,
¿ ¡
bool
¬ ∆
todasLasFamilias
« ◊
,
◊ ÿ
bool
Ÿ ›

estadoBajo
ﬁ Ë
,
Ë È
bool
Í Ó
estadoNormal
Ô ˚
,
˚ ¸
bool
˝ Å

estadoAlto
Ç å
)
å ç
{ 	
var 
	rptviewer 
= 9
-GenerarInventariosPorFecha_InventarioSemaforo I
(I J
	idAlmacenJ S
,S T
nombreAlmacenU b
,b c

fechaHastad n
,n o
idsFamiliasp {
,{ |
nombresFamilias	} å
,
å ç
todasLasFamilias
é û
,
û ü

estadoBajo
† ™
,
™ ´
estadoNormal
¨ ∏
,
∏ π

estadoAlto
∫ ƒ
,
ƒ ≈
true
∆  
)
  À
;
À Ã
ViewBag 
. 
ReportViewer  
=! "
	rptviewer# ,
;, -
return 
View 
( 
$str -
)- .
;. /
} 	
public 
ActionResult 4
(InventariosPorFecha_InventarioValorizado D
(D E
intE H
	idAlmacenI R
,R S
stringT Z
nombreAlmacen[ h
,h i
DateTimej r

fechaHastas }
,} ~
[	 Ä
System
Ä Ü
.
Ü á
Web
á ä
.
ä ã
Http
ã è
.
è ê
FromUri
ê ó
]
ó ò
int
ô ú
[
ú ù
]
ù û
idsFamilias
ü ™
,
™ ´
string
¨ ≤
nombresFamilias
≥ ¬
,
¬ √
bool
ƒ »
todasLasFamilias
… Ÿ
)
Ÿ ⁄
{   	
var"" 
	rptviewer"" 
="" ;
/GenerarInventariosPorFecha_InventarioValorizado"" K
(""K L
	idAlmacen""L U
,""U V
nombreAlmacen""W d
,""d e

fechaHasta""f p
,""p q
idsFamilias""r }
,""} ~
nombresFamilias	"" é
,
""é è
todasLasFamilias
""ê †
,
""† °
true
""¢ ¶
)
""¶ ß
;
""ß ®
ViewBag## 
.## 
ReportViewer##  
=##! "
	rptviewer### ,
;##, -
return$$ 
View$$ 
($$ 
$str$$ -
)$$- .
;$$. /
}%% 	
public&& 
ReportViewer&& 1
%GenerarInventariosPorFecha_Inventario&& A
(&&A B
int&&B E
	idAlmacen&&F O
,&&O P
string&&Q W
nombreAlmacen&&X e
,&&e f
DateTime&&g o

fechaHasta&&p z
,&&z {
[&&| }
System	&&} É
.
&&É Ñ
Web
&&Ñ á
.
&&á à
Http
&&à å
.
&&å ç
FromUri
&&ç î
]
&&î ï
int
&&ñ ô
[
&&ô ö
]
&&ö õ
idsFamilias
&&ú ß
,
&&ß ®
string
&&© Ø
nombresFamilias
&&∞ ø
,
&&ø ¿
bool
&&¡ ≈
todasLasFamilias
&&∆ ÷
,
&&÷ ◊
bool
&&ÿ ‹
fromRequest
&&› Ë
)
&&Ë È
{'' 	
List(( 
<(( 
InventarioFisico(( !
>((! "

inventario((# -
=((. /"
almacenReportingLogica((0 F
.((F G,
 ObtenerInventarioFisicoHistorico((G g
(((g h
	idAlmacen((h q
,((q r
ProfileData((s ~
(((~ 
)	(( Ä
.
((Ä Å
Empleado
((Å â
.
((â ä
Id
((ä å
,
((å ç

fechaHasta
((é ò
,
((ò ô
todasLasFamilias
((ö ™
,
((™ ´
idsFamilias
((¨ ∑
)
((∑ ∏
.
((∏ π
OrderBy
((π ¿
(
((¿ ¡
i
((¡ ¬
=>
((√ ≈
i
((∆ «
.
((« »
Concepto
((» –
)
((– —
.
((— “
ToList
((“ ÿ
(
((ÿ Ÿ
)
((Ÿ ⁄
;
((⁄ €
var)) 
parametrosBasicos)) !
=))" #$
ObtenerParametrosBasicos))$ <
())< =
)))= >
;))> ?
ReportParameter** "
parametroNombreAlmacen** 2
=**3 4
new**5 8
ReportParameter**9 H
(**H I
$str**I X
,**X Y
nombreAlmacen**Z g
)**g h
;**h i
ReportParameter++ 
parametroFamilias++ -
=++. /
new++0 3
ReportParameter++4 C
(++C D
$str++D N
,++N O
nombresFamilias++P _
??++` b
$str++c j
)++j k
;++k l
ReportParameter,, 
parametroFechaHasta,, /
=,,0 1
new,,2 5
ReportParameter,,6 E
(,,E F
$str,,F R
,,,R S

fechaHasta,,T ^
.,,^ _
ToString,,_ g
(,,g h
),,h i
),,i j
;,,j k
var-- 
	rptviewer-- 
=-- 
new-- 
ReportViewer--  ,
(--, -
)--- .
{--/ 0
ProcessingMode--1 ?
=--@ A
ProcessingMode--B P
.--P Q
Local--Q V
,--V W
SizeToReportContent--X k
=--l m
true--n r
,--r s
Width--t y
=--z {
Unit	--| Ä
.
--Ä Å

Percentage
--Å ã
(
--ã å
$num
--å è
)
--è ê
,
--ê ë
Height
--í ò
=
--ô ö
Unit
--õ ü
.
--ü †

Percentage
--† ™
(
--™ ´
$num
--´ Æ
)
--Æ Ø
}
--∞ ±
;
--± ≤
string.. 
path.. 
=.. 
$str.. ^
;..^ _
	rptviewer// 
.// 
LocalReport// !
.//! "

ReportPath//" ,
=//- .
fromRequest/// :
?//; <
Request//= D
.//D E
MapPath//E L
(//L M
Request//M T
.//T U
ApplicationPath//U d
)//d e
+//f g
path//h l
://m n
HostingEnvironment	//o Å
.
//Å Ç
MapPath
//Ç â
(
//â ä
path
//ä é
)
//é è
;
//è ê
	rptviewer00 
.00 
LocalReport00 !
.00! "
SetParameters00" /
(00/ 0
new000 3
ReportParameter004 C
[00C D
]00D E
{00F G
parametrosBasicos11 !
.11! "

NombreSede11" ,
,11, -
parametrosBasicos22 !
.22! "
FechaActualSistema22" 4
,224 5
parametrosBasicos33 !
.33! "
LogoSede33" *
,33* +
parametrosBasicos44 !
.44! "
Usuario44" )
,44) *
parametroFamilias55 !
,55! ""
parametroNombreAlmacen66 &
,66& '
parametroFechaHasta77 #
}88 
)88 
;88 
ReportDataSource99 
rptdatasourceStock99 /
=990 1
new992 5
ReportDataSource996 F
(99F G
$str99G Z
,99Z [

inventario99\ f
)99f g
;99g h
	rptviewer:: 
.:: 
LocalReport:: !
.::! "
DataSources::" -
.::- .
Add::. 1
(::1 2
rptdatasourceStock::2 D
)::D E
;::E F
return;; 
	rptviewer;; 
;;; 
}<< 	
public== 
ReportViewer== 9
-GenerarInventariosPorFecha_InventarioSemaforo== I
(==I J
int==J M
	idAlmacen==N W
,==W X
string==Y _
nombreAlmacen==` m
,==m n
DateTime==o w

fechaHasta	==x Ç
,
==Ç É
[
==Ñ Ö
System
==Ö ã
.
==ã å
Web
==å è
.
==è ê
Http
==ê î
.
==î ï
FromUri
==ï ú
]
==ú ù
int
==û °
[
==° ¢
]
==¢ £
idsFamilias
==§ Ø
,
==Ø ∞
string
==± ∑
nombresFamilias
==∏ «
,
==« »
bool
==… Õ
todasLasFamilias
==Œ ﬁ
,
==ﬁ ﬂ
bool
==‡ ‰

estadoBajo
==Â Ô
,
==Ô 
bool
==Ò ı
estadoNormal
==ˆ Ç
,
==Ç É
bool
==Ñ à

estadoAlto
==â ì
,
==ì î
bool
==ï ô
fromRequest
==ö •
)
==• ¶
{>> 	
try?? 
{@@ 
ListAA 
<AA 
InventarioSemaforoAA '
>AA' (

inventarioAA) 3
=AA4 5"
almacenReportingLogicaAA6 L
.AAL M'
InventarioSemaforoHistoricoAAM h
(AAh i
	idAlmacenAAi r
,AAr s
ProfileDataAAt 
(	AA Ä
)
AAÄ Å
.
AAÅ Ç
Empleado
AAÇ ä
.
AAä ã
Id
AAã ç
,
AAç é

fechaHasta
AAè ô
,
AAô ö
todasLasFamilias
AAõ ´
,
AA´ ¨
idsFamilias
AA≠ ∏
,
AA∏ π

estadoBajo
AA∫ ƒ
,
AAƒ ≈
estadoNormal
AA∆ “
,
AA“ ”

estadoAlto
AA‘ ﬁ
)
AAﬁ ﬂ
;
AAﬂ ‡
varBB 
parametrosBasicosBB %
=BB& '$
ObtenerParametrosBasicosBB( @
(BB@ A
)BBA B
;BBB C
ReportParameterCC "
parametroNombreAlmacenCC  6
=CC7 8
newCC9 <
ReportParameterCC= L
(CCL M
$strCCM \
,CC\ ]
nombreAlmacenCC^ k
)CCk l
;CCl m
ReportParameterDD 
parametroFamiliasDD  1
=DD2 3
newDD4 7
ReportParameterDD8 G
(DDG H
$strDDH R
,DDR S
nombresFamiliasDDT c
??DDd f
$strDDg n
)DDn o
;DDo p
ReportParameterEE 
parametroFechaHastaEE  3
=EE4 5
newEE6 9
ReportParameterEE: I
(EEI J
$strEEJ V
,EEV W

fechaHastaEEX b
.EEb c
ToStringEEc k
(EEk l
)EEl m
)EEm n
;EEn o
varFF 
	rptviewerFF 
=FF 
newFF  #
ReportViewerFF$ 0
(FF0 1
)FF1 2
{FF3 4
ProcessingModeFF5 C
=FFD E
ProcessingModeFFF T
.FFT U
LocalFFU Z
,FFZ [
SizeToReportContentFF\ o
=FFp q
trueFFr v
,FFv w
WidthFFx }
=FF~ 
Unit
FFÄ Ñ
.
FFÑ Ö

Percentage
FFÖ è
(
FFè ê
$num
FFê ì
)
FFì î
,
FFî ï
Height
FFñ ú
=
FFù û
Unit
FFü £
.
FF£ §

Percentage
FF§ Æ
(
FFÆ Ø
$num
FFØ ≤
)
FF≤ ≥
}
FF¥ µ
;
FFµ ∂
stringGG 
pathGG 
=GG 
$strGG j
;GGj k
	rptviewerHH 
.HH 
LocalReportHH %
.HH% &

ReportPathHH& 0
=HH1 2
fromRequestHH3 >
?HH? @
RequestHHA H
.HHH I
MapPathHHI P
(HHP Q
RequestHHQ X
.HHX Y
ApplicationPathHHY h
)HHh i
+HHj k
pathHHl p
:HHq r
HostingEnvironment	HHs Ö
.
HHÖ Ü
MapPath
HHÜ ç
(
HHç é
path
HHé í
)
HHí ì
;
HHì î
	rptviewerII 
.II 
LocalReportII %
.II% &
SetParametersII& 3
(II3 4
newII4 7
ReportParameterII8 G
[IIG H
]IIH I
{IIJ K
parametrosBasicosJJ !
.JJ! "

NombreSedeJJ" ,
,JJ, -
parametrosBasicosKK !
.KK! "
FechaActualSistemaKK" 4
,KK4 5
parametrosBasicosLL !
.LL! "
LogoSedeLL" *
,LL* +
parametrosBasicosMM !
.MM! "
UsuarioMM" )
,MM) *
parametroFamiliasNN !
,NN! ""
parametroNombreAlmacenOO &
,OO& '
parametroFechaHastaPP #
}QQ 
)QQ 
;QQ 
ReportDataSourceRR  (
rptdatasourceStockPorFamiliaRR! =
=RR> ?
newRR@ C
ReportDataSourceRRD T
(RRT U
$strRRU p
,RRp q

inventarioRRr |
)RR| }
;RR} ~
	rptviewerSS 
.SS 
LocalReportSS %
.SS% &
DataSourcesSS& 1
.SS1 2
AddSS2 5
(SS5 6(
rptdatasourceStockPorFamiliaSS6 R
)SSR S
;SSS T
returnTT 
	rptviewerTT  
;TT  !
}UU 
catchVV 
(VV 
	ExceptionVV 
eVV 
)VV 
{WW 
throwXX 
newXX 
ControllerExceptionXX -
(XX- .
$strXX. _
,XX_ `
eXXa b
)XXb c
;XXc d
}YY 
}ZZ 	
public\\ 
ReportViewer\\ ;
/GenerarInventariosPorFecha_InventarioValorizado\\ K
(\\K L
int\\L O
	idAlmacen\\P Y
,\\Y Z
string\\[ a
nombreAlmacen\\b o
,\\o p
DateTime\\q y

fechaHasta	\\z Ñ
,
\\Ñ Ö
[
\\Ü á
System
\\á ç
.
\\ç é
Web
\\é ë
.
\\ë í
Http
\\í ñ
.
\\ñ ó
FromUri
\\ó û
]
\\û ü
int
\\† £
[
\\£ §
]
\\§ •
idsFamilias
\\¶ ±
,
\\± ≤
string
\\≥ π
nombresFamilias
\\∫ …
,
\\…  
bool
\\À œ
todasLasFamilias
\\– ‡
,
\\‡ ·
bool
\\‚ Ê
fromRequest
\\Á Ú
)
\\Ú Û
{]] 	
List^^ 
<^^  
InventarioValorizado^^ %
>^^% &

inventario^^' 1
=^^2 3"
almacenReportingLogica^^4 J
.^^J K)
InventarioValorizadoHistorico^^K h
(^^h i
	idAlmacen^^i r
,^^r s
ProfileData^^t 
(	^^ Ä
)
^^Ä Å
.
^^Å Ç
Empleado
^^Ç ä
.
^^ä ã
Id
^^ã ç
,
^^ç é

fechaHasta
^^è ô
,
^^ô ö
todasLasFamilias
^^õ ´
,
^^´ ¨
idsFamilias
^^≠ ∏
)
^^∏ π
.
^^π ∫
OrderBy
^^∫ ¡
(
^^¡ ¬
i
^^¬ √
=>
^^ƒ ∆
i
^^« »
.
^^» …
Concepto
^^… —
)
^^— “
.
^^“ ”
ToList
^^” Ÿ
(
^^Ÿ ⁄
)
^^⁄ €
;
^^€ ‹
var__ 
parametrosBasicos__ !
=__" #$
ObtenerParametrosBasicos__$ <
(__< =
)__= >
;__> ?
ReportParameter`` "
parametroNombreAlmacen`` 2
=``3 4
new``5 8
ReportParameter``9 H
(``H I
$str``I X
,``X Y
nombreAlmacen``Z g
)``g h
;``h i
ReportParameteraa 
parametroFamiliasaa -
=aa. /
newaa0 3
ReportParameteraa4 C
(aaC D
$straaD N
,aaN O
nombresFamiliasaaP _
??aa` b
$straac j
)aaj k
;aak l
ReportParameterbb 
parametroFechaHastabb /
=bb0 1
newbb2 5
ReportParameterbb6 E
(bbE F
$strbbF R
,bbR S

fechaHastabbT ^
.bb^ _
ToStringbb_ g
(bbg h
)bbh i
)bbi j
;bbj k
varcc 
	rptviewercc 
=cc 
newcc 
ReportViewercc  ,
(cc, -
)cc- .
{cc/ 0
ProcessingModecc1 ?
=cc@ A
ProcessingModeccB P
.ccP Q
LocalccQ V
,ccV W
SizeToReportContentccX k
=ccl m
trueccn r
,ccr s
Widthcct y
=ccz {
Unit	cc| Ä
.
ccÄ Å

Percentage
ccÅ ã
(
ccã å
$num
ccå è
)
ccè ê
,
ccê ë
Height
ccí ò
=
ccô ö
Unit
ccõ ü
.
ccü †

Percentage
cc† ™
(
cc™ ´
$num
cc´ Æ
)
ccÆ Ø
}
cc∞ ±
;
cc± ≤
stringdd 
pathdd 
=dd 
$strdd h
;ddh i
	rptvieweree 
.ee 
LocalReportee !
.ee! "

ReportPathee" ,
=ee- .
fromRequestee/ :
?ee; <
Requestee= D
.eeD E
MapPatheeE L
(eeL M
RequesteeM T
.eeT U
ApplicationPatheeU d
)eed e
+eef g
patheeh l
:eem n
HostingEnvironment	eeo Å
.
eeÅ Ç
MapPath
eeÇ â
(
eeâ ä
path
eeä é
)
eeé è
;
eeè ê
	rptviewerff 
.ff 
LocalReportff !
.ff! "
SetParametersff" /
(ff/ 0
newff0 3
ReportParameterff4 C
[ffC D
]ffD E
{ffF G
parametrosBasicosgg !
.gg! "

NombreSedegg" ,
,gg, -
parametrosBasicoshh !
.hh! "
FechaActualSistemahh" 4
,hh4 5
parametrosBasicosii !
.ii! "
LogoSedeii" *
,ii* +
parametrosBasicosjj !
.jj! "
Usuariojj" )
,jj) *
parametroFamiliaskk !
,kk! ""
parametroNombreAlmacenll &
,ll& '
parametroFechaHastamm #
}nn 
)nn 
;nn 
ReportDataSourceoo 
rptdatasourceStockoo /
=oo0 1
newoo2 5
ReportDataSourceoo6 F
(ooF G
$strooG d
,ood e

inventariooof p
)oop q
;ooq r
	rptviewerpp 
.pp 
LocalReportpp !
.pp! "
DataSourcespp" -
.pp- .
Addpp. 1
(pp1 2
rptdatasourceStockpp2 D
)ppD E
;ppE F
returnqq 
	rptviewerqq 
;qq 
}rr 	
}tt 
}uu ßz
pD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Almacen\AlmacenReportesController_Kardex.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class %
AlmacenReportesController 2
{ 
public 
ActionResult 
Kardex_Fisico )
() *
int* -
	idAlmacen. 7
,7 8
string9 ?
nombreAlmacen@ M
,M N
DateTimeO W

fechaDesdeX b
,b c
DateTimed l

fechaHastam w
,w x
inty |

idConcepto	} á
,
á à
string
â è
nombreConcepto
ê û
)
û ü
{ 	
var 
	rptviewer 
= !
Generar_Kardex_Fisico 1
(1 2
	idAlmacen2 ;
,; <
nombreAlmacen= J
,J K

fechaDesdeL V
,V W

fechaHastaX b
,b c

idConceptod n
,n o
nombreConceptop ~
,~ 
true	 É
)
É Ñ
;
Ñ Ö
ViewBag 
. 
ReportViewer  
=! "
	rptviewer# ,
;, -
return 
View 
( 
$str -
)- .
;. /
} 	
public 
ActionResult 
Kardex_Valorizado -
(- .
int. 1
	idAlmacen2 ;
,; <
string= C
nombreAlmacenD Q
,Q R
DateTimeS [

fechaDesde\ f
,f g
DateTimeh p

fechaHastaq {
,{ |
int	} Ä

idConcepto
Å ã
,
ã å
string
ç ì
nombreConcepto
î ¢
)
¢ £
{ 	
var 
	rptviewer 
= %
Generar_Kardex_Valorizado 5
(5 6
	idAlmacen6 ?
,? @
nombreAlmacenA N
,N O

fechaDesdeP Z
,Z [

fechaHasta\ f
,f g

idConceptoh r
,r s
nombreConcepto	t Ç
,
Ç É
true
Ñ à
)
à â
;
â ä
ViewBag 
. 
ReportViewer  
=! "
	rptviewer# ,
;, -
return 
View 
( 
$str -
)- .
;. /
} 	
public 
ReportViewer !
Generar_Kardex_Fisico 1
(1 2
int2 5
	idAlmacen6 ?
,? @
stringA G
nombreAlmacenH U
,U V
DateTimeW _

fechaDesde` j
,j k
DateTimel t

fechaHastau 
,	 Ä
int
Å Ñ

idConcepto
Ö è
,
è ê
string
ë ó
nombreConcepto
ò ¶
,
¶ ß
bool
® ¨
fromRequest
≠ ∏
)
∏ π
{   	
try!! 
{"" 
var## 
kardex## 
=## "
almacenReportingLogica## 3
.##3 4
KardexFisico##4 @
(##@ A
	idAlmacen##A J
,##J K
ProfileData##L W
(##W X
)##X Y
.##Y Z
Empleado##Z b
.##b c
Id##c e
,##e f

fechaDesde##g q
,##q r

fechaHasta##s }
,##} ~

idConcepto	## â
)
##â ä
;
##ä ã
var$$ 
minMax$$ 
=$$ "
almacenReportingLogica$$ 3
.$$3 4%
ObtenerStockMinimoYMaximo$$4 M
($$M N

idConcepto$$N X
)$$X Y
;$$Y Z
var%% 
parametrosBasicos%% %
=%%& '$
ObtenerParametrosBasicos%%( @
(%%@ A
)%%A B
;%%B C
ReportParameter&& 
parametroAlamacen&&  1
=&&2 3
new&&4 7
ReportParameter&&8 G
(&&G H
$str&&H Q
,&&Q R
nombreAlmacen&&S `
)&&` a
;&&a b
ReportParameter'' 
parametroFechaDesde''  3
=''4 5
new''6 9
ReportParameter'': I
(''I J
$str''J V
,''V W

fechaDesde''X b
.''b c
ToString''c k
(''k l
)''l m
)''m n
;''n o
ReportParameter(( 
parametroFechaHasta((  3
=((4 5
new((6 9
ReportParameter((: I
(((I J
$str((J V
,((V W

fechaHasta((X b
.((b c
ToString((c k
(((k l
)((l m
)((m n
;((n o
ReportParameter)) 
parametroConcepto))  1
=))2 3
new))4 7
ReportParameter))8 G
())G H
$str))H R
,))R S
nombreConcepto))T b
)))b c
;))c d
ReportParameter**  
parametroStockMinimo**  4
=**5 6
new**7 :
ReportParameter**; J
(**J K
$str**K X
,**X Y
minMax**Z `
.**` a
StockMinimo**a l
.**l m
ToString**m u
(**u v
)**v w
)**w x
;**x y
ReportParameter++  
parametroStockMaximo++  4
=++5 6
new++7 :
ReportParameter++; J
(++J K
$str++K X
,++X Y
minMax++Z `
.++` a
StockMaximo++a l
.++l m
ToString++m u
(++u v
)++v w
)++w x
;++x y
ReportParameter,,  
parametroStockActual,,  4
=,,5 6
new,,7 :
ReportParameter,,; J
(,,J K
$str,,K X
,,,X Y
kardex,,Z `
.,,` a
Last,,a e
(,,e f
),,f g
.,,g h
CantidadSaldo,,h u
.,,u v
ToString,,v ~
(,,~ 
)	,, Ä
)
,,Ä Å
;
,,Å Ç
var.. 
	rptviewer.. 
=.. 
new..  #
ReportViewer..$ 0
(..0 1
)..1 2
{..3 4
ProcessingMode..5 C
=..D E
ProcessingMode..F T
...T U
Local..U Z
,..Z [
SizeToReportContent..\ o
=..p q
true..r v
,..v w
Width..x }
=..~ 
Unit
..Ä Ñ
.
..Ñ Ö

Percentage
..Ö è
(
..è ê
$num
..ê ì
)
..ì î
,
..î ï
Height
..ñ ú
=
..ù û
Unit
..ü £
.
..£ §

Percentage
..§ Æ
(
..Æ Ø
$num
..Ø ≤
)
..≤ ≥
}
..¥ µ
;
..µ ∂
string// 
path// 
=// 
$str// Q
;//Q R
	rptviewer11 
.11 
LocalReport11 %
.11% &

ReportPath11& 0
=111 2
fromRequest113 >
?11? @
Request11A H
.11H I
MapPath11I P
(11P Q
Request11Q X
.11X Y
ApplicationPath11Y h
)11h i
+11j k
path11l p
:11q r
HostingEnvironment	11s Ö
.
11Ö Ü
MapPath
11Ü ç
(
11ç é
path
11é í
)
11í ì
;
11ì î
	rptviewer22 
.22 
LocalReport22 %
.22% &
SetParameters22& 3
(223 4
new224 7
ReportParameter228 G
[22G H
]22H I
{33 
parametrosBasicos44 %
.44% &
FechaActualSistema44& 8
,448 9
parametrosBasicos55 %
.55% &
LogoSede55& .
,55. /
parametrosBasicos66 %
.66% &

NombreSede66& 0
,660 1
parametrosBasicos77 %
.77% &
Usuario77& -
,77- .
parametroAlamacen88 %
,88% &
parametroFechaDesde99 '
,99' (
parametroFechaHasta:: '
,::' (
parametroConcepto;; %
,;;% & 
parametroStockMinimo<< (
,<<( ) 
parametroStockMaximo== (
,==( ) 
parametroStockActual>> (
}?? 
)?? 
;?? 
ReportDataSource@@  !
rptdatasourceEntradas@@! 6
=@@7 8
new@@9 <
ReportDataSource@@= M
(@@M N
$str@@N c
,@@c d
kardex@@e k
)@@k l
;@@l m
	rptviewerAA 
.AA 
LocalReportAA %
.AA% &
DataSourcesAA& 1
.AA1 2
AddAA2 5
(AA5 6!
rptdatasourceEntradasAA6 K
)AAK L
;AAL M
returnBB 
	rptviewerBB  
;BB  !
}CC 
catchDD 
(DD 
	ExceptionDD 
eDD 
)DD 
{EE 
throwFF 
newFF 
ControllerExceptionFF -
(FF- .
$strFF. N
,FFN O
eFFP Q
)FFQ R
;FFR S
}GG 
}HH 	
publicII 
ReportViewerII %
Generar_Kardex_ValorizadoII 5
(II5 6
intII6 9
	idAlmacenII: C
,IIC D
stringIIE K
nombreAlmacenIIL Y
,IIY Z
DateTimeII[ c

fechaDesdeIId n
,IIn o
DateTimeIIp x

fechaHasta	IIy É
,
IIÉ Ñ
int
IIÖ à

idConcepto
IIâ ì
,
IIì î
string
IIï õ
nombreConcepto
IIú ™
,
II™ ´
bool
II¨ ∞
fromRequest
II± º
)
IIº Ω
{JJ 	
tryKK 
{LL 
varMM 
kardexMM 
=MM "
almacenReportingLogicaMM 3
.MM3 4
KardexValorizadoMM4 D
(MMD E
	idAlmacenMME N
,MMN O
ProfileDataMMP [
(MM[ \
)MM\ ]
.MM] ^
EmpleadoMM^ f
.MMf g
IdMMg i
,MMi j

fechaDesdeMMk u
,MMu v

fechaHasta	MMw Å
,
MMÅ Ç

idConcepto
MMÉ ç
)
MMç é
;
MMé è
varNN 
minMaxNN 
=NN "
almacenReportingLogicaNN 3
.NN3 4%
ObtenerStockMinimoYMaximoNN4 M
(NNM N

idConceptoNNN X
)NNX Y
;NNY Z
varPP 
parametrosBasicosPP %
=PP& '$
ObtenerParametrosBasicosPP( @
(PP@ A
)PPA B
;PPB C
ReportParameterQQ 
parametroAlamacenQQ  1
=QQ2 3
newQQ4 7
ReportParameterQQ8 G
(QQG H
$strQQH Q
,QQQ R
nombreAlmacenQQS `
)QQ` a
;QQa b
ReportParameterRR 
parametroFechaDesdeRR  3
=RR4 5
newRR6 9
ReportParameterRR: I
(RRI J
$strRRJ V
,RRV W

fechaDesdeRRX b
.RRb c
ToStringRRc k
(RRk l
)RRl m
)RRm n
;RRn o
ReportParameterSS 
parametroFechaHastaSS  3
=SS4 5
newSS6 9
ReportParameterSS: I
(SSI J
$strSSJ V
,SSV W

fechaHastaSSX b
.SSb c
ToStringSSc k
(SSk l
)SSl m
)SSm n
;SSn o
ReportParameterTT 
parametroConceptoTT  1
=TT2 3
newTT4 7
ReportParameterTT8 G
(TTG H
$strTTH R
,TTR S
nombreConceptoTTT b
)TTb c
;TTc d
ReportParameterUU  
parametroStockMinimoUU  4
=UU5 6
newUU7 :
ReportParameterUU; J
(UUJ K
$strUUK X
,UUX Y
minMaxUUZ `
.UU` a
StockMinimoUUa l
.UUl m
ToStringUUm u
(UUu v
)UUv w
)UUw x
;UUx y
ReportParameterVV  
parametroStockMaximoVV  4
=VV5 6
newVV7 :
ReportParameterVV; J
(VVJ K
$strVVK X
,VVX Y
minMaxVVZ `
.VV` a
StockMaximoVVa l
.VVl m
ToStringVVm u
(VVu v
)VVv w
)VVw x
;VVx y
ReportParameterWW  
parametroStockActualWW  4
=WW5 6
newWW7 :
ReportParameterWW; J
(WWJ K
$strWWK X
,WWX Y
kardexWWZ `
.WW` a
LastWWa e
(WWe f
)WWf g
.WWg h
CantidadSaldoWWh u
.WWu v
ToStringWWv ~
(WW~ 
)	WW Ä
)
WWÄ Å
;
WWÅ Ç
varXX 
	rptviewerXX 
=XX 
newXX  #
ReportViewerXX$ 0
(XX0 1
)XX1 2
{XX3 4
ProcessingModeXX5 C
=XXD E
ProcessingModeXXF T
.XXT U
LocalXXU Z
,XXZ [
SizeToReportContentXX\ o
=XXp q
trueXXr v
,XXv w
WidthXXx }
=XX~ 
Unit
XXÄ Ñ
.
XXÑ Ö

Percentage
XXÖ è
(
XXè ê
$num
XXê ì
)
XXì î
,
XXî ï
Height
XXñ ú
=
XXù û
Unit
XXü £
.
XX£ §

Percentage
XX§ Æ
(
XXÆ Ø
$num
XXØ ≤
)
XX≤ ≥
}
XX¥ µ
;
XXµ ∂
stringYY 
pathYY 
=YY 
$strYY U
;YYU V
	rptviewer[[ 
.[[ 
LocalReport[[ %
.[[% &

ReportPath[[& 0
=[[1 2
fromRequest[[3 >
?[[? @
Request[[A H
.[[H I
MapPath[[I P
([[P Q
Request[[Q X
.[[X Y
ApplicationPath[[Y h
)[[h i
+[[j k
path[[l p
:[[q r
HostingEnvironment	[[s Ö
.
[[Ö Ü
MapPath
[[Ü ç
(
[[ç é
path
[[é í
)
[[í ì
;
[[ì î
	rptviewer\\ 
.\\ 
LocalReport\\ %
.\\% &
SetParameters\\& 3
(\\3 4
new\\4 7
ReportParameter\\8 G
[\\G H
]\\H I
{]] 
parametrosBasicos^^ %
.^^% &
FechaActualSistema^^& 8
,^^8 9
parametrosBasicos__ %
.__% &
LogoSede__& .
,__. /
parametrosBasicos`` %
.``% &

NombreSede``& 0
,``0 1
parametrosBasicosaa %
.aa% &
Usuarioaa& -
,aa- .
parametroAlamacenbb %
,bb% &
parametroFechaDesdecc '
,cc' (
parametroFechaHastadd '
,dd' (
parametroConceptoee %
,ee% & 
parametroStockMinimoff (
,ff( ) 
parametroStockMaximogg (
,gg( ) 
parametroStockActualhh (
}ii 
)ii 
;ii 
ReportDataSourcejj  !
rptdatasourceEntradasjj! 6
=jj7 8
newjj9 <
ReportDataSourcejj= M
(jjM N
$strjjN g
,jjg h
kardexjji o
)jjo p
;jjp q
	rptviewerkk 
.kk 
LocalReportkk %
.kk% &
DataSourceskk& 1
.kk1 2
Addkk2 5
(kk5 6!
rptdatasourceEntradaskk6 K
)kkK L
;kkL M
returnll 
	rptviewerll  
;ll  !
}mm 
catchnn 
(nn 
	Exceptionnn 
enn 
)nn 
{oo 
throwpp 
newpp 
ControllerExceptionpp -
(pp- .
$strpp. R
,ppR S
eppT U
)ppU V
;ppV W
}qq 
}rr 	
}ss 
}tt ú†
uD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Almacen\AlmacenReportesController_Movimientos.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class %
AlmacenReportesController 2
{ 
public 
ActionResult  
Movimientos_Entradas 0
(0 1
int1 4
	idAlmacen5 >
,> ?
string@ F
nombreAlmacenG T
,T U
DateTimeV ^

fechaDesde_ i
,i j
DateTimek s

fechaHastat ~
,~ 
[
Ä Å
System
Å á
.
á à
Web
à ã
.
ã å
Http
å ê
.
ê ë
FromUri
ë ò
]
ò ô
int
ö ù
[
ù û
]
û ü
idsFamilias
† ´
,
´ ¨
string
≠ ≥
nombresFamilias
¥ √
,
√ ƒ
bool
≈ …
todasLasFamilias
  ⁄
)
⁄ €
{ 	
var 
	rptviewer 
= (
Generar_Movimientos_Entradas 8
(8 9
	idAlmacen9 B
,B C
nombreAlmacenD Q
,Q R

fechaDesdeS ]
,] ^

fechaHasta_ i
,i j
idsFamiliask v
,v w
nombresFamilias	y à
,
à â
todasLasFamilias
ã õ
,
õ ú
true
ù °
)
° ¢
;
¢ £
ViewBag 
. 
ReportViewer  
=! "
	rptviewer# ,
;, -
return 
View 
( 
$str -
)- .
;. /
} 	
public 
ActionResult 
Movimientos_Salidas /
(/ 0
int0 3
	idAlmacen4 =
,= >
string? E
nombreAlmacenF S
,S T
DateTimeU ]

fechaDesde^ h
,h i
DateTimej r

fechaHastas }
,} ~
[	 Ä
System
Ä Ü
.
Ü á
Web
á ä
.
ä ã
Http
ã è
.
è ê
FromUri
ê ó
]
ó ò
int
ô ú
[
ú ù
]
ù û
idsFamilias
ü ™
,
™ ´
string
¨ ≤
nombresFamilias
≥ ¬
,
¬ √
bool
ƒ »
todasLasFamilias
… Ÿ
)
Ÿ ⁄
{ 	
var 
	rptviewer 
= '
Generar_Movimientos_Salidas 7
(7 8
	idAlmacen8 A
,A B
nombreAlmacenC P
,P Q

fechaDesdeR \
,\ ]

fechaHasta^ h
,h i
idsFamiliasj u
,u v
nombresFamilias	w Ü
,
Ü á
todasLasFamilias
à ò
,
ò ô
true
ö û
)
û ü
;
ü †
ViewBag 
. 
ReportViewer  
=! "
	rptviewer# ,
;, -
return 
View 
( 
$str -
)- .
;. /
} 	
public   
ActionResult   $
Movimientos_Vencimientos   4
(  4 5
int  5 8
	idAlmacen  9 B
,  B C
string  D J
nombreAlmacen  K X
,  X Y
DateTime  Z b

fechaDesde  c m
,  m n
DateTime  o w

fechaHasta	  x Ç
,
  Ç É
[
  Ñ Ö
System
  Ö ã
.
  ã å
Web
  å è
.
  è ê
Http
  ê î
.
  î ï
FromUri
  ï ú
]
  ú ù
int
  û °
[
  ° ¢
]
  ¢ £
idsFamilias
  § Ø
,
  Ø ∞
string
  ± ∑
nombresFamilias
  ∏ «
,
  « »
bool
  … Õ
todasLasFamilias
  Œ ﬁ
)
  ﬁ ﬂ
{!! 	
var"" 
	rptviewer"" 
="" ,
 Generar_Movimientos_Vencimientos"" <
(""< =
	idAlmacen""= F
,""F G
nombreAlmacen""H U
,""U V

fechaDesde""W a
,""a b

fechaHasta""c m
,""m n
idsFamilias""o z
,""z {
nombresFamilias	""| ã
,
""ã å
todasLasFamilias
""ç ù
,
""ù û
true
""ü £
)
""£ §
;
""§ •
ViewBag## 
.## 
ReportViewer##  
=##! "
	rptviewer### ,
;##, -
return$$ 
View$$ 
($$ 
$str$$ -
)$$- .
;$$. /
}%% 	
public&& 
ReportViewer&& (
Generar_Movimientos_Entradas&& 8
(&&8 9
int&&9 <
	idAlmacen&&= F
,&&F G
string&&H N
nombreAlmacen&&O \
,&&\ ]
DateTime&&^ f

fechaDesde&&g q
,&&q r
DateTime&&s {

fechaHasta	&&| Ü
,
&&Ü á
[
&&à â
System
&&â è
.
&&è ê
Web
&&ê ì
.
&&ì î
Http
&&î ò
.
&&ò ô
FromUri
&&ô †
]
&&† °
int
&&¢ •
[
&&• ¶
]
&&¶ ß
idsFamilias
&&® ≥
,
&&≥ ¥
string
&&µ ª
nombresFamilias
&&º À
,
&&À Ã
bool
&&Õ —
todasLasFamilias
&&“ ‚
,
&&‚ „
bool
&&‰ Ë
fromRequest
&&È Ù
)
&&Ù ı
{'' 	
try(( 
{)) 
var** 
entradas** 
=** "
almacenReportingLogica** 5
.**5 6
Entradas**6 >
(**> ?
	idAlmacen**? H
,**H I

fechaDesde**J T
,**T U

fechaHasta**V `
,**` a
todasLasFamilias**b r
,**r s
idsFamilias**t 
)	** Ä
;
**Ä Å
var++ 
parametrosBasicos++ %
=++& '$
ObtenerParametrosBasicos++( @
(++@ A
)++A B
;++B C
ReportParameter,, 
parametroFamilias,,  1
=,,2 3
new,,4 7
ReportParameter,,8 G
(,,G H
$str,,H R
,,,R S
nombresFamilias,,T c
??,,c e
$str,,f m
),,m n
;,,n o
ReportParameter-- 
parametroAlamacen--  1
=--2 3
new--4 7
ReportParameter--8 G
(--G H
$str--H Q
,--Q R
nombreAlmacen--S `
)--` a
;--a b
ReportParameter.. 
parametroFechaDesde..  3
=..4 5
new..6 9
ReportParameter..: I
(..I J
$str..J V
,..V W

fechaDesde..X b
...b c
ToString..c k
(..k l
)..l m
)..m n
;..n o
ReportParameter// 
parametroFechaHasta//  3
=//4 5
new//6 9
ReportParameter//: I
(//I J
$str//J V
,//V W

fechaHasta//X b
.//b c
ToString//c k
(//k l
)//l m
)//m n
;//n o
var11 
	rptviewer11 
=11 
new11  #
ReportViewer11$ 0
(110 1
)111 2
{113 4
ProcessingMode115 C
=11D E
ProcessingMode11F T
.11T U
Local11U Z
,11Z [
SizeToReportContent11\ o
=11p q
true11r v
,11v w
Width11x }
=11~ 
Unit
11Ä Ñ
.
11Ñ Ö

Percentage
11Ö è
(
11è ê
$num
11ê ì
)
11ì î
,
11î ï
Height
11ñ ú
=
11ù û
Unit
11ü £
.
11£ §

Percentage
11§ Æ
(
11Æ Ø
$num
11Ø ≤
)
11≤ ≥
}
11¥ µ
;
11µ ∂
string22 
path22 
=22 
$str22 X
;22X Y
	rptviewer44 
.44 
LocalReport44 %
.44% &

ReportPath44& 0
=441 2
fromRequest443 >
?44? @
Request44A H
.44H I
MapPath44I P
(44P Q
Request44Q X
.44X Y
ApplicationPath44Y h
)44h i
+44j k
path44l p
:44q r
HostingEnvironment	44s Ö
.
44Ö Ü
MapPath
44Ü ç
(
44ç é
path
44é í
)
44í ì
;
44ì î
	rptviewer55 
.55 
LocalReport55 %
.55% &
SetParameters55& 3
(553 4
new554 7
ReportParameter558 G
[55G H
]55H I
{66 
parametrosBasicos77 %
.77% &
FechaActualSistema77& 8
,778 9
parametrosBasicos88 %
.88% &
LogoSede88& .
,88. /
parametrosBasicos99 %
.99% &

NombreSede99& 0
,990 1
parametrosBasicos:: %
.::% &
Usuario::& -
,::- .
parametroFamilias;; %
,;;% &
parametroAlamacen<< %
,<<% &
parametroFechaDesde== '
,==' (
parametroFechaHasta>> '
}?? 
)?? 
;?? 
ReportDataSource@@  !
rptdatasourceEntradas@@! 6
=@@7 8
new@@9 <
ReportDataSource@@= M
(@@M N
$str@@N _
,@@_ `
entradas@@a i
)@@i j
;@@j k
	rptviewerAA 
.AA 
LocalReportAA %
.AA% &
DataSourcesAA& 1
.AA1 2
AddAA2 5
(AA5 6!
rptdatasourceEntradasAA6 K
)AAK L
;AAL M
returnBB 
	rptviewerBB  
;BB  !
}CC 
catchDD 
(DD 
	ExceptionDD 
eDD 
)DD 
{EE 
throwFF 
newFF 
ControllerExceptionFF -
(FF- .
$strFF. I
,FFI J
eFFK L
)FFL M
;FFM N
}GG 
}HH 	
publicII 
ReportViewerII '
Generar_Movimientos_SalidasII 7
(II7 8
intII8 ;
	idAlmacenII< E
,IIE F
stringIIG M
nombreAlmacenIIN [
,II[ \
DateTimeII] e

fechaDesdeIIf p
,IIp q
DateTimeIIr z

fechaHasta	II{ Ö
,
IIÖ Ü
int
IIá ä
[
IIä ã
]
IIã å
idsFamilias
IIç ò
,
IIò ô
string
IIõ °
nombresFamilias
II¢ ±
,
II± ≤
bool
II≥ ∑
todasLasFamilias
II∏ »
,
II» …
bool
II  Œ
fromRequest
IIœ ⁄
)
II⁄ €
{JJ 	
tryKK 
{LL 
varMM 
entradasMM 
=MM "
almacenReportingLogicaMM 5
.MM5 6
SalidasMM6 =
(MM= >
	idAlmacenMM> G
,MMG H

fechaDesdeMMI S
,MMS T

fechaHastaMMU _
,MM_ `
todasLasFamiliasMMa q
,MMq r
idsFamiliasMMs ~
)MM~ 
;	MM Ä
varNN 
parametrosBasicosNN %
=NN& '$
ObtenerParametrosBasicosNN( @
(NN@ A
)NNA B
;NNB C
ReportParameterOO 
parametroFamiliasOO  1
=OO2 3
newOO4 7
ReportParameterOO8 G
(OOG H
$strOOH R
,OOR S
nombresFamiliasOOT c
??OOc e
$strOOf m
)OOm n
;OOn o
ReportParameterPP 
parametroAlamacenPP  1
=PP2 3
newPP4 7
ReportParameterPP8 G
(PPG H
$strPPH Q
,PPQ R
nombreAlmacenPPS `
)PP` a
;PPa b
ReportParameterQQ 
parametroFechaDesdeQQ  3
=QQ4 5
newQQ6 9
ReportParameterQQ: I
(QQI J
$strQQJ V
,QQV W

fechaDesdeQQX b
.QQb c
ToStringQQc k
(QQk l
)QQl m
)QQm n
;QQn o
ReportParameterRR 
parametroFechaHastaRR  3
=RR4 5
newRR6 9
ReportParameterRR: I
(RRI J
$strRRJ V
,RRV W

fechaHastaRRX b
.RRb c
ToStringRRc k
(RRk l
)RRl m
)RRm n
;RRn o
varTT 
	rptviewerTT 
=TT 
newTT  #
ReportViewerTT$ 0
(TT0 1
)TT1 2
{TT3 4
ProcessingModeTT5 C
=TTD E
ProcessingModeTTF T
.TTT U
LocalTTU Z
,TTZ [
SizeToReportContentTT\ o
=TTp q
trueTTr v
,TTv w
WidthTTx }
=TT~ 
Unit
TTÄ Ñ
.
TTÑ Ö

Percentage
TTÖ è
(
TTè ê
$num
TTê ì
)
TTì î
,
TTî ï
Height
TTñ ú
=
TTù û
Unit
TTü £
.
TT£ §

Percentage
TT§ Æ
(
TTÆ Ø
$num
TTØ ≤
)
TT≤ ≥
}
TT¥ µ
;
TTµ ∂
stringUU 
pathUU 
=UU 
$strUU W
;UUW X
	rptviewerWW 
.WW 
LocalReportWW %
.WW% &

ReportPathWW& 0
=WW1 2
fromRequestWW3 >
?WW? @
RequestWWA H
.WWH I
MapPathWWI P
(WWP Q
RequestWWQ X
.WWX Y
ApplicationPathWWY h
)WWh i
+WWj k
pathWWl p
:WWq r
HostingEnvironment	WWs Ö
.
WWÖ Ü
MapPath
WWÜ ç
(
WWç é
path
WWé í
)
WWí ì
;
WWì î
	rptviewerXX 
.XX 
LocalReportXX %
.XX% &
SetParametersXX& 3
(XX3 4
newXX4 7
ReportParameterXX8 G
[XXG H
]XXH I
{YY 
parametrosBasicosZZ %
.ZZ% &
FechaActualSistemaZZ& 8
,ZZ8 9
parametrosBasicos[[ %
.[[% &
LogoSede[[& .
,[[. /
parametrosBasicos\\ %
.\\% &

NombreSede\\& 0
,\\0 1
parametrosBasicos]] %
.]]% &
Usuario]]& -
,]]- .
parametroFamilias^^ %
,^^% &
parametroAlamacen__ %
,__% &
parametroFechaDesde`` '
,``' (
parametroFechaHastaaa '
}bb 
)bb 
;bb 
ReportDataSourcecc  !
rptdatasourceEntradascc! 6
=cc7 8
newcc9 <
ReportDataSourcecc= M
(ccM N
$strccN ^
,cc^ _
entradascc` h
)cch i
;cci j
	rptviewerdd 
.dd 
LocalReportdd %
.dd% &
DataSourcesdd& 1
.dd1 2
Adddd2 5
(dd5 6!
rptdatasourceEntradasdd6 K
)ddK L
;ddL M
returnee 
	rptvieweree  
;ee  !
}ff 
catchgg 
(gg 
	Exceptiongg 
egg 
)gg 
{hh 
throwii 
newii 
ControllerExceptionii -
(ii- .
$strii. H
,iiH I
eiiJ K
)iiK L
;iiL M
}jj 
}kk 	
publicmm 
ReportViewermm ,
 Generar_Movimientos_Vencimientosmm <
(mm< =
intmm= @
	idAlmacenmmA J
,mmJ K
stringmmL R
nombreAlmacenmmS `
,mm` a
DateTimemmb j

fechaDesdemmk u
,mmu v
DateTimemmw 

fechaHasta
mmÄ ä
,
mmä ã
int
mmå è
[
mmè ê
]
mmê ë
idsFamilias
mmí ù
,
mmù û
string
mmü •
nombresFamilias
mm¶ µ
,
mmµ ∂
bool
mm∑ ª
todasLasFamilias
mmº Ã
,
mmÃ Õ
bool
mmŒ “
fromRequest
mm” ﬁ
)
mmﬁ ﬂ
{nn 	
tryoo 
{pp 
varqq 
vencimientosqq  
=qq! ""
almacenReportingLogicaqq# 9
.qq9 :
Vencimientosqq: F
(qqF G
	idAlmacenqqG P
,qqP Q

fechaDesdeqqR \
,qq\ ]

fechaHastaqq^ h
,qqh i
todasLasFamiliasqqj z
,qqz {
idsFamilias	qq| á
)
qqá à
;
qqà â
varrr 
parametrosBasicosrr %
=rr& '$
ObtenerParametrosBasicosrr( @
(rr@ A
)rrA B
;rrB C
ReportParameterss 
parametroFamiliasss  1
=ss2 3
newss4 7
ReportParameterss8 G
(ssG H
$strssH R
,ssR S
nombresFamiliasssT c
??ssd f
$strssg n
)ssn o
;sso p
ReportParametertt 
parametroAlamacentt  1
=tt2 3
newtt4 7
ReportParametertt8 G
(ttG H
$strttH Q
,ttQ R
nombreAlmacenttS `
)tt` a
;tta b
ReportParameteruu 
parametroFechaDesdeuu  3
=uu4 5
newuu6 9
ReportParameteruu: I
(uuI J
$struuJ V
,uuV W

fechaDesdeuuX b
.uub c
ToStringuuc k
(uuk l
)uul m
)uum n
;uun o
ReportParametervv 
parametroFechaHastavv  3
=vv4 5
newvv6 9
ReportParametervv: I
(vvI J
$strvvJ V
,vvV W

fechaHastavvX b
.vvb c
ToStringvvc k
(vvk l
)vvl m
)vvm n
;vvn o
varxx 
	rptviewerxx 
=xx 
newxx  #
ReportViewerxx$ 0
(xx0 1
)xx1 2
{xx3 4
ProcessingModexx5 C
=xxD E
ProcessingModexxF T
.xxT U
LocalxxU Z
,xxZ [
SizeToReportContentxx\ o
=xxp q
truexxr v
,xxv w
Widthxxx }
=xx~ 
Unit
xxÄ Ñ
.
xxÑ Ö

Percentage
xxÖ è
(
xxè ê
$num
xxê ì
)
xxì î
,
xxî ï
Height
xxñ ú
=
xxù û
Unit
xxü £
.
xx£ §

Percentage
xx§ Æ
(
xxÆ Ø
$num
xxØ ≤
)
xx≤ ≥
}
xx¥ µ
;
xxµ ∂
stringyy 
pathyy 
=yy 
$stryy \
;yy\ ]
	rptviewer{{ 
.{{ 
LocalReport{{ %
.{{% &

ReportPath{{& 0
={{1 2
fromRequest{{3 >
?{{? @
Request{{A H
.{{H I
MapPath{{I P
({{P Q
Request{{Q X
.{{X Y
ApplicationPath{{Y h
){{h i
+{{j k
path{{l p
:{{q r
HostingEnvironment	{{s Ö
.
{{Ö Ü
MapPath
{{Ü ç
(
{{ç é
path
{{é í
)
{{í ì
;
{{ì î
	rptviewer|| 
.|| 
LocalReport|| %
.||% &
SetParameters||& 3
(||3 4
new||4 7
ReportParameter||8 G
[||G H
]||H I
{}} 
parametrosBasicos~~ %
.~~% &
FechaActualSistema~~& 8
,~~8 9
parametrosBasicos %
.% &
LogoSede& .
,. /
parametrosBasicos
ÄÄ %
.
ÄÄ% &

NombreSede
ÄÄ& 0
,
ÄÄ0 1
parametrosBasicos
ÅÅ %
.
ÅÅ% &
Usuario
ÅÅ& -
,
ÅÅ- .
parametroFamilias
ÇÇ %
,
ÇÇ% &
parametroAlamacen
ÉÉ %
,
ÉÉ% &!
parametroFechaDesde
ÑÑ '
,
ÑÑ' (!
parametroFechaHasta
ÖÖ '
}
ÜÜ 
)
ÜÜ 
;
ÜÜ 
ReportDataSource
áá  #
rptdatasourceEntradas
áá! 6
=
áá7 8
new
áá9 <
ReportDataSource
áá= M
(
ááM N
$str
ááN c
,
áác d
vencimientos
ááe q
)
ááq r
;
áár s
	rptviewer
àà 
.
àà 
LocalReport
àà %
.
àà% &
DataSources
àà& 1
.
àà1 2
Add
àà2 5
(
àà5 6#
rptdatasourceEntradas
àà6 K
)
ààK L
;
ààL M
return
ââ 
	rptviewer
ââ  
;
ââ  !
}
ää 
catch
ãã 
(
ãã 
	Exception
ãã 
e
ãã 
)
ãã 
{
åå 
throw
çç 
new
çç !
ControllerException
çç -
(
çç- .
$str
çç. M
,
ççM N
e
ççO P
)
ççP Q
;
ççQ R
}
éé 
}
èè 	
}
êê 
}ëë £
iD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Concepto\CaracteristicaController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class $
CaracteristicaController )
:* +
BaseController, :
{ 
private 
readonly "
ICaracteristica_Logica /!
_logicaCaracteristica0 E
;E F
public $
CaracteristicaController '
(' (
)( )
{ 	!
_logicaCaracteristica !
=" #
Dependencia$ /
./ 0
Resolve0 7
<7 8"
ICaracteristica_Logica8 N
>N O
(O P
)P Q
;Q R
} 	
public 

JsonResult L
@ObtenerCaracteristicasYValoresDeCaracteristicasDeConceptoNegocio Z
(Z [
int[ ^

idConcepto_ i
)i j
{   	
try!! 
{"" 
var## 
concepto## 
=## !
_logicaCaracteristica## 4
.##4 5B
6ObtenerConceptoNegocioConSusCaracteristicasYSusValores##5 k
(##k l

idConcepto##l v
)##v w
;##w x
return$$ 
Json$$ 
($$ 
concepto$$ $
)$$$ %
;$$% &
}%% 
catch&& 
(&& 
	Exception&& 
e&& 
)&& 
{'' 
return(( 
Json(( 
((( 
Util((  
.((  !
	ErrorJson((! *
(((* +
e((+ ,
)((, -
)((- .
;((. /
})) 
}** 	
},, 
}-- ˜0
kD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Concepto\ConceptoReportesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class &
ConceptoReportesController +
:, -
BaseController. <
{ 
private 
readonly 
IConceptoLogica (
_logicaConcepto) 8
;8 9
public &
ConceptoReportesController )
() *
)* +
{ 	
_logicaConcepto 
= 
Dependencia )
.) *
Resolve* 1
<1 2
IConceptoLogica2 A
>A B
(B C
)C D
;D E
} 	
[   	
	Authorize  	 
(   
Roles   
=   
$str   E
)  E F
]  F G
public!! 
ActionResult!! !
ReportesAdministrador!! 1
(!!1 2
)!!2 3
{"" 	
return## 
View## 
(## 
)## 
;## 
}$$ 	
public&& 
ActionResult&& -
!ReporteDeProductoConCodigoDeBarra&& =
(&&= >
)&&> ?
{'' 	
List(( 
<(( 
ConceptoDeNegocio(( "
>((" #
	resultado(($ -
=((. /
_logicaConcepto((0 ?
.((? @
obtenerMercaderias((@ R
(((R S
)((S T
;((T U
List)) 
<)) $
ReporteProductoViewModel)) )
>))) *$
reporteProductoViewModel))+ C
=))D E$
ReporteProductoViewModel))F ^
.))^ _
Convert))_ f
())f g
	resultado))g p
)))p q
;))q r
ReportParameter** 
entidadInterna** *
=**+ ,
new**- 0
ReportParameter**1 @
(**@ A
$str**A W
,**W X
ProfileData**Y d
(**d e
)**e f
.**f g/
"NombreCentroDeAtencionSeleccionado	**g â
)
**â ä
;
**ä ã
ReportParameter++ 
fecha++ !
=++" #
new++$ '
ReportParameter++( 7
(++7 8
$str++8 E
,++E F
DateTimeUtil++F R
.++R S
FechaActual++S ^
(++^ _
)++_ `
.++` a
ToString++a i
(++i j
)++j k
)++k l
;++l m
ReportParameter,, 
nombreEmpresa,, )
=,,* +
new,,, /
ReportParameter,,0 ?
(,,? @
$str,,@ O
,,,O P
ObtenerSede,,Q \
(,,\ ]
),,] ^
.,,^ _
Nombre,,_ e
),,e f
;,,f g
var-- 
sede-- 
=-- 
ObtenerSede-- "
(--" #
)--# $
;--$ %
string.. 

logoString.. 
=.. 
Convert..  '
...' (
ToBase64String..( 6
(..6 7
sede..7 ;
...; <
Logo..< @
,..@ A
$num..B C
,..C D
sede..E I
...I J
Logo..J N
...N O
Length..O U
)..U V
;..V W
ReportParameter// 
logoSede// $
=//% &
new//' *
ReportParameter//+ :
(//: ;
$str//; E
,//E F

logoString//G Q
)//Q R
;//R S
ReportParameter00 
empleadoSede00 (
=00) *
new00+ .
ReportParameter00/ >
(00> ?
$str00? H
,00H I
ProfileData00J U
(00U V
)00V W
.00W X
Empleado00X `
.00` a
NombresYApellidos00a r
)00r s
;00s t
DateTime11 
fechaActual11  
=11! "
DateTimeUtil11" .
.11. /
FechaActual11/ :
(11: ;
)11; <
;11< =
ReportParameter22 
fechaActualSistema22 .
=22/ 0
new221 4
ReportParameter225 D
(22D E
$str22E Y
,22Y Z
fechaActual22[ f
.22f g
ToString22g o
(22o p
)22p q
)22q r
;22r s
var33 
	rptviewer33 
=33 
new33 
ReportViewer33  ,
(33, -
)33- .
;33. /
	rptviewer44 
.44 
ProcessingMode44 $
=44% &
ProcessingMode44' 5
.445 6
Local446 ;
;44; <
	rptviewer55 
.55 
LocalReport55 !
.55! "

ReportPath55" ,
=55- .
Request55/ 6
.556 7
MapPath557 >
(55> ?
Request55? F
.55F G
ApplicationPath55G V
)55V W
+55X Y
$str	55Z ã
;
55ã å
	rptviewer66 
.66 
LocalReport66 !
.66! "
SetParameters66" /
(66/ 0
new660 3
ReportParameter664 C
[66C D
]66D E
{66F G
entidadInterna66H V
,66V W
nombreEmpresa66X e
,66e f
fecha66g l
,66l m
logoSede66n v
,66v w
empleadoSede	66x Ñ
,
66Ñ Ö 
fechaActualSistema
66Ü ò
}
66ô ö
)
66ö õ
;
66õ ú
ReportDataSource77 
rptdatasourceStock77 /
=770 1
new772 5
ReportDataSource776 F
(77F G
$str77G a
,77a b$
reporteProductoViewModel77c {
)77{ |
;77| }
	rptviewer88 
.88 
LocalReport88 !
.88! "
DataSources88" -
.88- .
Add88. 1
(881 2
rptdatasourceStock882 D
)88D E
;88E F
	rptviewer99 
.99 
SizeToReportContent99 )
=99* +
true99, 0
;990 1
ViewBag:: 
.:: 
ReportViewer::  
=::! "
	rptviewer::# ,
;::, -
return;; 
View;; 
(;; 
$str;; -
);;- .
;;;. /
}<< 	
}== 
}>> ◊L
vD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Finanza\FinanzaReportes_EstadoCuentaController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class 2
&FinanzaReportes_EstadoCuentaController ?
:@ A
BaseControllerB P
{ 
	protected 
readonly 
IOperacionLogica +
operacionLogica, ;
;; <
	protected 
readonly 
IActorNegocioLogica .
actorNegocioLogica/ A
;A B
	protected 
readonly 
IConceptoLogica *
conceptoLogica+ 9
;9 :
	protected 
readonly "
IFinanzaReporte_Logica 1"
finanzaReportingLogica2 H
;H I
public!! 2
&FinanzaReportes_EstadoCuentaController!! 5
(!!5 6
)!!6 7
:!!8 9
base!!: >
(!!> ?
)!!? @
{"" 	
operacionLogica## 
=## 
Dependencia## )
.##) *
Resolve##* 1
<##1 2
IOperacionLogica##2 B
>##B C
(##C D
)##D E
;##E F
actorNegocioLogica$$ 
=$$  
Dependencia$$! ,
.$$, -
Resolve$$- 4
<$$4 5
IActorNegocioLogica$$5 H
>$$H I
($$I J
)$$J K
;$$K L
conceptoLogica%% 
=%% 
Dependencia%% (
.%%( )
Resolve%%) 0
<%%0 1
IConceptoLogica%%1 @
>%%@ A
(%%A B
)%%B C
;%%C D"
finanzaReportingLogica&& "
=&&# $
Dependencia&&% 0
.&&0 1
Resolve&&1 8
<&&8 9"
IFinanzaReporte_Logica&&9 O
>&&O P
(&&P Q
)&&Q R
;&&R S
}'' 	
public)) 
ActionResult)) /
#EstadoCuenta_EstadoCuentaPorCliente)) ?
())? @
DateTime))@ H

fechaDesde))I S
,))S T
DateTime))U ]

fechaHasta))^ h
,))h i
int))j m
	idCliente))n w
,))w x
string))y 
nombreCliente
))Ä ç
)
))ç é
{** 	

fechaDesde++ 
=++ 
DateTime++ !
.++! "
Parse++" '
(++' (

fechaDesde++( 2
.++2 3
ToString++3 ;
(++; <
$str++< H
)++H I
+++J K
$str++L W
)++W X
;++X Y

fechaHasta,, 
=,, 
DateTime,, !
.,,! "
Parse,," '
(,,' (

fechaHasta,,( 2
.,,2 3
ToString,,3 ;
(,,; <
$str,,< H
),,H I
+,,J K
$str,,L W
),,W X
;,,X Y
EstadoDeCuenta.. 
estadoDeCuenta.. )
=..* +
operacionLogica.., ;
...; <(
ObtenerEstadoDeCuentaCliente..< X
(..X Y
	idCliente..Y b
,..b c

fechaDesde..d n
,..n o

fechaHasta..p z
)..z {
;..{ |
ReportParameter00 "
parametroNombreEmpresa00 2
=003 4
new005 8
ReportParameter009 H
(00H I
$str00I X
,00X Y
ObtenerSede00Z e
(00e f
)00f g
.00g h
Nombre00h n
)00n o
;00o p
ReportParameter11 
parametroCliente11 ,
=11- .
new11/ 2
ReportParameter113 B
(11B C
$str11C L
,11L M
nombreCliente11N [
)11[ \
;11\ ]
ReportParameter22 
parametroFechaDesde22 /
=220 1
new222 5
ReportParameter226 E
(22E F
$str22F R
,22R S

fechaDesde22T ^
.22^ _
ToString22_ g
(22g h
)22h i
)22i j
;22j k
ReportParameter33 
parametroFechaHasta33 /
=330 1
new332 5
ReportParameter336 E
(33E F
$str33F R
,33R S

fechaHasta33T ^
.33^ _
ToString33_ g
(33g h
)33h i
)33i j
;33j k
ReportParameter44 "
parametroSaldoAnterior44 2
=443 4
new445 8
ReportParameter449 H
(44H I
$str44I X
,44X Y
estadoDeCuenta44Z h
.44h i
SaldoAnterior44i v
.44v w
ToString44w 
(	44 Ä
)
44Ä Å
)
44Å Ç
;
44Ç É
ReportParameter55 
parametroEntregas55 -
=55. /
new550 3
ReportParameter554 C
(55C D
$str55D N
,55N O
estadoDeCuenta55P ^
.55^ _
Entregas55_ g
.55g h
ToString55h p
(55p q
)55q r
)55r s
;55s t
ReportParameter66 
parametroPagos66 *
=66+ ,
new66- 0
ReportParameter661 @
(66@ A
$str66A H
,66H I
estadoDeCuenta66J X
.66X Y
Pagos66Y ^
.66^ _
ToString66_ g
(66g h
)66h i
)66i j
;66j k
ReportParameter77 
parametroSaldoFinal77 /
=770 1
new772 5
ReportParameter776 E
(77E F
$str77F R
,77R S
estadoDeCuenta77T b
.77b c

SaldoFinal77c m
.77m n
ToString77n v
(77v w
)77w x
)77x y
;77y z
var99 
sede99 
=99 
ObtenerSede99 "
(99" #
)99# $
;99$ %
string:: 

logoString:: 
=:: 
Convert::  '
.::' (
ToBase64String::( 6
(::6 7
sede::7 ;
.::; <
Logo::< @
,::@ A
$num::B C
,::C D
sede::E I
.::I J
Logo::J N
.::N O
Length::O U
)::U V
;::V W
ReportParameter;; 
logoSede;; $
=;;% &
new;;' *
ReportParameter;;+ :
(;;: ;
$str;;; E
,;;E F

logoString;;G Q
);;Q R
;;;R S
DateTime== 
fechaActual==  
===! "
DateTimeUtil==# /
.==/ 0
FechaActual==0 ;
(==; <
)==< =
;=== >
ReportParameter>> 
fechaActualSistema>> .
=>>/ 0
new>>1 4
ReportParameter>>5 D
(>>D E
$str>>E R
,>>R S
fechaActual>>T _
.>>_ `
ToString>>` h
(>>h i
)>>i j
)>>j k
;>>k l
ReportParameter@@ 
empleadoSede@@ (
=@@) *
new@@+ .
ReportParameter@@/ >
(@@> ?
$str@@? H
,@@H I
ProfileData@@J U
(@@U V
)@@V W
.@@W X
Empleado@@X `
.@@` a
NombresYApellidos@@a r
)@@r s
;@@s t
varBB 
	rptviewerBB 
=BB 
newBB 
ReportViewerBB  ,
(BB, -
)BB- .
;BB. /
	rptviewerCC 
.CC 
LocalReportCC !
.CC! "

ReportPathCC" ,
=CC- .
RequestCC/ 6
.CC6 7
MapPathCC7 >
(CC> ?
RequestCC? F
.CCF G
ApplicationPathCCG V
)CCV W
+CCX Y
$str	CCZ è
;
CCè ê
	rptviewerDD 
.DD 
LocalReportDD !
.DD! "
SetParametersDD" /
(DD/ 0
newDD0 3
ReportParameterDD4 C
[DDC D
]DDD E
{EE "
parametroNombreEmpresaEE $
,EE$ %
parametroClienteEE% 5
,EE6 7
parametroFechaDesdeEE7 J
,EEJ K
parametroFechaHastaEEL _
,EE_ `"
parametroSaldoAnteriorEEa w
,EEw x
parametroEntregas	EEx â
,
EEâ ä
parametroPagos
EEä ò
,
EEò ô!
parametroSaldoFinal
EEö ≠
,
EE≠ Æ
empleadoSede
EEØ ª
,
EEª º 
fechaActualSistema
EEΩ œ
,
EEœ –
logoSede
EE— Ÿ
}
EEŸ ⁄
)
EE⁄ €
;
EE€ ‹
ReportDataSourceGG "
rptdatasourceDetalladoGG 3
=GG4 5
newGG6 9
ReportDataSourceGG: J
(GGJ K
$strGGK i
,GGi j
estadoDeCuentaGGk y
.GGy z
Detalle	GGz Å
)
GGÅ Ç
;
GGÇ É
	rptviewerII 
.II 
ProcessingModeII $
=II% &
ProcessingModeII' 5
.II5 6
LocalII6 ;
;II; <
	rptviewerJJ 
.JJ 
LocalReportJJ !
.JJ! "
DataSourcesJJ" -
.JJ- .
AddJJ. 1
(JJ1 2"
rptdatasourceDetalladoJJ2 H
)JJH I
;JJI J
	rptviewerKK 
.KK 
SizeToReportContentKK )
=KK* +
trueKK, 0
;KK0 1
	rptviewerLL 
.LL 
WidthLL 
=LL 
UnitLL "
.LL" #

PercentageLL# -
(LL- .
$numLL. 1
)LL1 2
;LL2 3
	rptviewerMM 
.MM 
HeightMM 
=MM 
UnitMM #
.MM# $

PercentageMM$ .
(MM. /
$numMM/ 2
)MM2 3
;MM3 4
ViewBagNN 
.NN 
ReportViewerNN  
=NN! "
	rptviewerNN# ,
;NN, -
returnPP 
ViewPP 
(PP 
$strPP -
)PP- .
;PP. /
}RR 	
}SS 
}TT É¶
xD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Finanza\FinanzaReportes_PorCobrarPagarController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class 4
(FinanzaReportes_PorCobrarPagarController A
:B C
BaseControllerD R
{ 
	protected 
readonly 
IOperacionLogica +
operacionLogica, ;
;; <
	protected 
readonly 
IActorNegocioLogica .
actorNegocioLogica/ A
;A B
	protected 
readonly 
IConceptoLogica *
conceptoLogica+ 9
;9 :
	protected 
readonly "
IFinanzaReporte_Logica 1"
finanzaReportingLogica2 H
;H I
	protected   
readonly   $
ICentroDeAtencion_Logica   3"
centroDeAtencionLogica  4 J
;  J K
public"" 4
(FinanzaReportes_PorCobrarPagarController"" 7
(""7 8
)""8 9
:"": ;
base""< @
(""@ A
)""A B
{## 	
operacionLogica$$ 
=$$ 
Dependencia$$ )
.$$) *
Resolve$$* 1
<$$1 2
IOperacionLogica$$2 B
>$$B C
($$C D
)$$D E
;$$E F
actorNegocioLogica%% 
=%%  
Dependencia%%! ,
.%%, -
Resolve%%- 4
<%%4 5
IActorNegocioLogica%%5 H
>%%H I
(%%I J
)%%J K
;%%K L
conceptoLogica&& 
=&& 
Dependencia&& (
.&&( )
Resolve&&) 0
<&&0 1
IConceptoLogica&&1 @
>&&@ A
(&&A B
)&&B C
;&&C D"
finanzaReportingLogica'' "
=''# $
Dependencia''% 0
.''0 1
Resolve''1 8
<''8 9"
IFinanzaReporte_Logica''9 O
>''O P
(''P Q
)''Q R
;''R S"
centroDeAtencionLogica(( "
=((# $
Dependencia((% 0
.((0 1
Resolve((1 8
<((8 9$
ICentroDeAtencion_Logica((9 Q
>((Q R
(((R S
)((S T
;((T U
})) 	
public++ 
ActionResult++ ,
 PorCobrarPagar_PorCobrarClientes++ <
(++< =
)++= >
{,, 	
DateTime-- 
fechaActual--  
=--! "
DateTimeUtil--# /
.--/ 0
FechaActual--0 ;
(--; <
)--< =
;--= >
fechaActual.. 
=.. 
fechaActual.. %
...% &
AddMilliseconds..& 5
(..5 6
-..6 7
fechaActual..7 B
...B C
Millisecond..C N
)..N O
;..O P
List00 
<00 
Cuota00 
>00 
DeudasDeCliente00 '
=00( )
operacionLogica00* 9
.009 :)
ObtenerReporteDeudasDeCliente00: W
(00W X
)00X Y
;00Y Z
List11 
<11 !
DeudaClienteViewModel11 &
>11& '*
reporteDeDeudaDeClienteDetalle11( F
=11G H!
DeudaClienteViewModel11I ^
.11^ _
Convert11_ f
(11f g
DeudasDeCliente11g v
)11v w
;11w x
List22 
<22 !
DeudaClienteViewModel22 &
>22& '*
reporteDeDeudaDeClienteResumen22( F
=22G H!
DeudaClienteViewModel22I ^
.22^ _
Resumen22_ f
(22f g+
reporteDeDeudaDeClienteDetalle	22g Ö
)
22Ö Ü
;
22Ü á
var44 
	rptviewer44 
=44 
new44 
ReportViewer44  ,
(44, -
)44- .
;44. /
ReportParameter55  
parametroFechaActual55 0
=551 2
new553 6
ReportParameter557 F
(55F G
$str55G T
,55T U
fechaActual55V a
.55a b
ToString55b j
(55j k
)55k l
)55l m
;55m n
ReportParameter66 
nombreEmpresa66 )
=66* +
new66, /
ReportParameter660 ?
(66? @
$str66@ O
,66O P
ObtenerSede66Q \
(66\ ]
)66] ^
.66^ _
Nombre66_ e
)66e f
;66f g
ReportParameter77  
nombreCentroAtencion77 0
=771 2
new773 6
ReportParameter777 F
(77F G
$str77G ]
,77] ^
ProfileData77_ j
(77j k
)77k l
.77l m/
"NombreCentroDeAtencionSeleccionado	77m è
)
77è ê
;
77ê ë
var99 
sede99 
=99 
ObtenerSede99 "
(99" #
)99# $
;99$ %
string:: 

logoString:: 
=:: 
Convert::  '
.::' (
ToBase64String::( 6
(::6 7
sede::7 ;
.::; <
Logo::< @
,::@ A
$num::B C
,::C D
sede::E I
.::I J
Logo::J N
.::N O
Length::O U
)::U V
;::V W
ReportParameter;; 
logoSede;; $
=;;% &
new;;' *
ReportParameter;;+ :
(;;: ;
$str;;; E
,;;E F

logoString;;G Q
);;Q R
;;;R S
ReportParameter<< 
empleadoSede<< (
=<<) *
new<<+ .
ReportParameter<</ >
(<<> ?
$str<<? H
,<<H I
ProfileData<<J U
(<<U V
)<<V W
.<<W X
Empleado<<X `
.<<` a
NombresYApellidos<<a r
)<<r s
;<<s t
	rptviewer== 
.== 
LocalReport== !
.==! "

ReportPath==" ,
===- .
Request==/ 6
.==6 7
MapPath==7 >
(==> ?
Request==? F
.==F G
ApplicationPath==G V
)==V W
+==X Y
$str	==Z è
;
==è ê
	rptviewer?? 
.?? 
LocalReport?? !
.??! "
SetParameters??" /
(??/ 0
new??0 3
ReportParameter??4 C
[??C D
]??D E
{??F G 
parametroFechaActual??H \
,??\ ]
nombreEmpresa??^ k
,??k l!
nombreCentroAtencion	??m Å
,
??Å Ç
logoSede
??É ã
,
??ã å
empleadoSede
??ç ô
}
??ö õ
)
??õ ú
;
??ú ù
ReportDataSource@@ '
rptdatasourceReporteResumen@@ 8
=@@9 :
new@@; >
ReportDataSource@@? O
(@@O P
$str@@P l
,@@l m+
reporteDeDeudaDeClienteResumen	@@n å
)
@@å ç
;
@@ç é
ReportDataSourceAA '
rptdatasourcereporteDetalleAA 8
=AA9 :
newAA; >
ReportDataSourceAA? O
(AAO P
$strAAP l
,AAl m+
reporteDeDeudaDeClienteDetalle	AAn å
)
AAå ç
;
AAç é
	rptviewerCC 
.CC 
ProcessingModeCC $
=CC% &
ProcessingModeCC' 5
.CC5 6
LocalCC6 ;
;CC; <
	rptviewerDD 
.DD 
LocalReportDD !
.DD! "
DataSourcesDD" -
.DD- .
AddDD. 1
(DD1 2'
rptdatasourceReporteResumenDD2 M
)DDM N
;DDN O
	rptviewerEE 
.EE 
LocalReportEE !
.EE! "
DataSourcesEE" -
.EE- .
AddEE. 1
(EE1 2'
rptdatasourcereporteDetalleEE2 M
)EEM N
;EEN O
	rptviewerFF 
.FF 
SizeToReportContentFF )
=FF* +
trueFF, 0
;FF0 1
	rptviewerGG 
.GG 
WidthGG 
=GG 
UnitGG "
.GG" #

PercentageGG# -
(GG- .
$numGG. 1
)GG1 2
;GG2 3
	rptviewerHH 
.HH 
HeightHH 
=HH 
UnitHH #
.HH# $

PercentageHH$ .
(HH. /
$numHH/ 2
)HH2 3
;HH3 4
ViewBagII 
.II 
ReportViewerII  
=II! "
	rptviewerII# ,
;II, -
returnJJ 
ViewJJ 
(JJ 
$strJJ -
)JJ- .
;JJ. /
}KK 	
publicMM 
ActionResultMM .
"PorCobrarPagar_PorPagarProveedoresMM >
(MM> ?
)MM? @
{NN 	
DateTimeOO 
fechaActualOO  
=OO! "
DateTimeUtilOO# /
.OO/ 0
FechaActualOO0 ;
(OO; <
)OO< =
;OO= >
fechaActualPP 
=PP 
fechaActualPP %
.PP% &
AddMillisecondsPP& 5
(PP5 6
-PP6 7
fechaActualPP7 B
.PPB C
MillisecondPPC N
)PPN O
;PPO P
ListRR 
<RR 
CuotaRR 
>RR 
DeudasAProveedorRR (
=RR) *
operacionLogicaRR+ :
.RR: ;*
ObtenerReporteDeudasAProveedorRR; Y
(RRY Z
)RRZ [
;RR[ \
ListSS 
<SS #
DeudaProveedorViewModelSS (
>SS( )+
reporteDeDeudaAProveedorDetalleSS* I
=SSJ K#
DeudaProveedorViewModelSSL c
.SSc d
ConvertSSd k
(SSk l
DeudasAProveedorSSl |
)SS| }
;SS} ~
ListTT 
<TT #
DeudaProveedorViewModelTT (
>TT( )+
reporteDeDeudaAProveedorResumenTT* I
=TTJ K#
DeudaProveedorViewModelTTL c
.TTc d
ResumenTTd k
(TTk l,
reporteDeDeudaAProveedorDetalle	TTl ã
)
TTã å
;
TTå ç
varVV 
	rptviewerVV 
=VV 
newVV 
ReportViewerVV  ,
(VV, -
)VV- .
;VV. /
ReportParameterWW  
parametroFechaActualWW 0
=WW1 2
newWW3 6
ReportParameterWW7 F
(WWF G
$strWWG T
,WWT U
fechaActualWWV a
.WWa b
ToStringWWb j
(WWj k
)WWk l
)WWl m
;WWm n
ReportParameterXX 
nombreEmpresaXX )
=XX* +
newXX, /
ReportParameterXX0 ?
(XX? @
$strXX@ O
,XXO P
ObtenerSedeXXQ \
(XX\ ]
)XX] ^
.XX^ _
NombreXX_ e
)XXe f
;XXf g
ReportParameterYY  
nombreCentroAtencionYY 0
=YY1 2
newYY3 6
ReportParameterYY7 F
(YYF G
$strYYG ]
,YY] ^
ProfileDataYY_ j
(YYj k
)YYk l
.YYl m/
"NombreCentroDeAtencionSeleccionado	YYm è
)
YYè ê
;
YYê ë
var[[ 
sede[[ 
=[[ 
ObtenerSede[[ "
([[" #
)[[# $
;[[$ %
string\\ 

logoString\\ 
=\\ 
Convert\\  '
.\\' (
ToBase64String\\( 6
(\\6 7
sede\\7 ;
.\\; <
Logo\\< @
,\\@ A
$num\\B C
,\\C D
sede\\E I
.\\I J
Logo\\J N
.\\N O
Length\\O U
)\\U V
;\\V W
ReportParameter]] 
logoSede]] $
=]]% &
new]]' *
ReportParameter]]+ :
(]]: ;
$str]]; E
,]]E F

logoString]]G Q
)]]Q R
;]]R S
ReportParameter^^ 
empleadoSede^^ (
=^^) *
new^^+ .
ReportParameter^^/ >
(^^> ?
$str^^? H
,^^H I
ProfileData^^J U
(^^U V
)^^V W
.^^W X
Empleado^^X `
.^^` a
NombresYApellidos^^a r
)^^r s
;^^s t
	rptviewer__ 
.__ 
LocalReport__ !
.__! "

ReportPath__" ,
=__- .
Request__/ 6
.__6 7
MapPath__7 >
(__> ?
Request__? F
.__F G
ApplicationPath__G V
)__V W
+__X Y
$str	__Z ë
;
__ë í
	rptviewer`` 
.`` 
LocalReport`` !
.``! "
SetParameters``" /
(``/ 0
new``0 3
ReportParameter``4 C
[``C D
]``D E
{``F G 
parametroFechaActual``H \
,``\ ]
nombreEmpresa``^ k
,``k l!
nombreCentroAtencion	``m Å
,
``Å Ç
empleadoSede
``É è
,
``è ê
logoSede
``ë ô
}
``ö õ
)
``õ ú
;
``ú ù
ReportDataSourceaa '
rptdatasourceReporteResumenaa 8
=aa9 :
newaa; >
ReportDataSourceaa? O
(aaO P
$straaP n
,aan o,
reporteDeDeudaAProveedorResumen	aap è
)
aaè ê
;
aaê ë
ReportDataSourcebb '
rptdatasourcereporteDetallebb 8
=bb9 :
newbb; >
ReportDataSourcebb? O
(bbO P
$strbbP n
,bbn o,
reporteDeDeudaAProveedorDetalle	bbp è
)
bbè ê
;
bbê ë
	rptviewerdd 
.dd 
ProcessingModedd $
=dd% &
ProcessingModedd' 5
.dd5 6
Localdd6 ;
;dd; <
	rptvieweree 
.ee 
LocalReportee !
.ee! "
DataSourcesee" -
.ee- .
Addee. 1
(ee1 2'
rptdatasourceReporteResumenee2 M
)eeM N
;eeN O
	rptviewerff 
.ff 
LocalReportff !
.ff! "
DataSourcesff" -
.ff- .
Addff. 1
(ff1 2'
rptdatasourcereporteDetalleff2 M
)ffM N
;ffN O
	rptviewergg 
.gg 
SizeToReportContentgg )
=gg* +
truegg, 0
;gg0 1
	rptviewerhh 
.hh 
Widthhh 
=hh 
Unithh "
.hh" #

Percentagehh# -
(hh- .
$numhh. 1
)hh1 2
;hh2 3
	rptviewerii 
.ii 
Heightii 
=ii 
Unitii #
.ii# $

Percentageii$ .
(ii. /
$numii/ 2
)ii2 3
;ii3 4
ViewBagjj 
.jj 
ReportViewerjj  
=jj! "
	rptviewerjj# ,
;jj, -
returnkk 
Viewkk 
(kk 
$strkk -
)kk- .
;kk. /
}ll 	
publicnn 
ActionResultnn .
"PorCobrarPagar_PorCobrarPorClientenn >
(nn> ?
boolnn? C
todosLosClientesnnD T
,nnT U
[nnV W
SystemnnW ]
.nn] ^
Webnn^ a
.nna b
Httpnnb f
.nnf g
FromUrinng n
]nnn o
intnnp s
[nns t
]nnt u
idsClientes	nnv Å
,
nnÅ Ç
string
nnÉ â
nombresClientes
nnä ô
)
nnô ö
{oo 	
varpp 
	rptviewerpp 
=pp 5
)GenerarPorCobrarPagar_PorCobrarPorClientepp E
(ppE F
todosLosClientesppF V
,ppV W
idsClientesppX c
,ppc d
nombresClientesppe t
,ppt u
trueppv z
)ppz {
;pp{ |
ViewBagqq 
.qq 
ReportViewerqq  
=qq! "
	rptviewerqq# ,
;qq, -
returnrr 
Viewrr 
(rr 
$strrr -
)rr- .
;rr. /
}ss 	
publicuu 
ReportVieweruu 5
)GenerarPorCobrarPagar_PorCobrarPorClienteuu E
(uuE F
booluuF J
todosLosClientesuuK [
,uu[ \
intuu] `
[uu` a
]uua b
idsClientesuuc n
,uun o
stringuup v
nombresClientes	uuw Ü
,
uuÜ á
bool
uuà å
fromRequest
uuç ò
)
uuò ô
{vv 	
tryww 
{xx 
varyy 
detalladoDeudasyy #
=yy$ %
operacionLogicayy& 5
.yy5 6#
ObtenerDeudasDeClientesyy6 M
(yyM N
todosLosClientesyyN ^
,yy^ _
idsClientesyy` k
)yyk l
;yyl m
varzz 
resumenDeudaszz !
=zz" #
Reporte_Deudazz$ 1
.zz1 2
Resumenzz2 9
(zz9 :
detalladoDeudaszz: I
)zzI J
;zzJ K
var{{ 
parametrosBasicos{{ %
={{& '$
ObtenerParametrosBasicos{{( @
({{@ A
){{A B
;{{B C
ReportParameter|| 
nombreDeReporte||  /
=||0 1
new||2 5
ReportParameter||6 E
(||E F
$str||F U
,||U V
$str||W p
)||p q
;||q r
var}} 
	rptviewer}} 
=}} 
new}}  #
ReportViewer}}$ 0
(}}0 1
)}}1 2
{}}3 4
ProcessingMode}}5 C
=}}D E
ProcessingMode}}F T
.}}T U
Local}}U Z
,}}Z [
SizeToReportContent}}\ o
=}}p q
true}}r v
,}}v w
Width}}x }
=}}~ 
Unit
}}Ä Ñ
.
}}Ñ Ö

Percentage
}}Ö è
(
}}è ê
$num
}}ê ì
)
}}ì î
,
}}î ï
Height
}}ñ ú
=
}}ù û
Unit
}}ü £
.
}}£ §

Percentage
}}§ Æ
(
}}Æ Ø
$num
}}Ø ≤
)
}}≤ ≥
}
}}¥ µ
;
}}µ ∂
string~~ 
path~~ 
=~~ 
$str~~ [
;~~[ \
	rptviewer 
. 
LocalReport %
.% &

ReportPath& 0
=1 2
fromRequest3 >
?? @
RequestA H
.H I
MapPathI P
(P Q
RequestQ X
.X Y
ApplicationPathY h
)h i
+j k
pathl p
:q r
HostingEnvironment	s Ö
.
Ö Ü
MapPath
Ü ç
(
ç é
path
é í
)
í ì
;
ì î
	rptviewer
ÄÄ 
.
ÄÄ 
LocalReport
ÄÄ %
.
ÄÄ% &
SetParameters
ÄÄ& 3
(
ÄÄ3 4
new
ÄÄ4 7
ReportParameter
ÄÄ8 G
[
ÄÄG H
]
ÄÄH I
{
ÄÄJ K
parametrosBasicos
ÅÅ !
.
ÅÅ! "

NombreSede
ÅÅ" ,
,
ÅÅ, -
parametrosBasicos
ÇÇ !
.
ÇÇ! " 
FechaActualSistema
ÇÇ" 4
,
ÇÇ4 5
parametrosBasicos
ÉÉ !
.
ÉÉ! "
LogoSede
ÉÉ" *
,
ÉÉ* +
parametrosBasicos
ÑÑ !
.
ÑÑ! "
Usuario
ÑÑ" )
,
ÑÑ) *
nombreDeReporte
ÖÖ 
}
ÜÜ 
)
ÜÜ 
;
ÜÜ 
ReportDataSource
áá  (
rptdatasourceResumenDeudas
áá! ;
=
áá< =
new
áá> A
ReportDataSource
ááB R
(
ááR S
$str
ááS i
,
áái j
resumenDeudas
áák x
)
ááx y
;
ááy z
ReportDataSource
àà  *
rptdatasourceDetalladoDeudas
àà! =
=
àà> ?
new
àà@ C
ReportDataSource
ààD T
(
ààT U
$str
ààU k
,
ààk l
detalladoDeudas
ààm |
)
àà| }
;
àà} ~
	rptviewer
ââ 
.
ââ 
LocalReport
ââ %
.
ââ% &
DataSources
ââ& 1
.
ââ1 2
Add
ââ2 5
(
ââ5 6(
rptdatasourceResumenDeudas
ââ6 P
)
ââP Q
;
ââQ R
	rptviewer
ää 
.
ää 
LocalReport
ää %
.
ää% &
DataSources
ää& 1
.
ää1 2
Add
ää2 5
(
ää5 6*
rptdatasourceDetalladoDeudas
ää6 R
)
ääR S
;
ääS T
return
ãã 
	rptviewer
ãã  
;
ãã  !
}
åå 
catch
çç 
(
çç 
	Exception
çç 
e
çç 
)
çç 
{
éé 
throw
èè 
new
èè !
ControllerException
èè -
(
èè- .
$str
èè. b
,
èèb c
e
èèd e
)
èèe f
;
èèf g
}
êê 
}
ëë 	
public
ìì 
ActionResult
ìì 1
#PorCobrarPagar_PorPagarPorProveedor
ìì ?
(
ìì? @
bool
ìì@ D!
todosLosProveedores
ììE X
,
ììX Y
[
ììZ [
System
ìì[ a
.
ììa b
Web
ììb e
.
ììe f
Http
ììf j
.
ììj k
FromUri
ììk r
]
ììr s
int
ììt w
[
ììw x
]
ììx y
idsProveedoresììz à
,ììà â
stringììä ê"
nombresProveedoresììë £
)ìì£ §
{
îî 	
var
ïï 
	rptviewer
ïï 
=
ïï 8
*GenerarPorCobrarPagar_PorPagarPorProveedor
ïï F
(
ïïF G!
todosLosProveedores
ïïG Z
,
ïïZ [
idsProveedores
ïï\ j
,
ïïj k 
nombresProveedores
ïïl ~
,
ïï~ 
trueïïÄ Ñ
)ïïÑ Ö
;ïïÖ Ü
ViewBag
ññ 
.
ññ 
ReportViewer
ññ  
=
ññ! "
	rptviewer
ññ# ,
;
ññ, -
return
óó 
View
óó 
(
óó 
$str
óó -
)
óó- .
;
óó. /
}
òò 	
public
öö 
ReportViewer
öö 8
*GenerarPorCobrarPagar_PorPagarPorProveedor
öö F
(
ööF G
bool
ööG K!
todosLosProveedores
ööL _
,
öö_ `
int
ööa d
[
ööd e
]
ööe f
idsProveedores
öög u
,
ööu v
string
ööw }!
nombresProveedoresöö~ ê
,ööê ë
boolööí ñ
fromRequestööó ¢
)öö¢ £
{
õõ 	
try
úú 
{
ùù 
var
ûû 
detalladoDeudas
ûû #
=
ûû$ %
operacionLogica
ûû& 5
.
ûû5 6%
ObtenerDeudasDeClientes
ûû6 M
(
ûûM N!
todosLosProveedores
ûûN a
,
ûûa b
idsProveedores
ûûc q
)
ûûq r
;
ûûr s
var
üü 
resumenDeudas
üü !
=
üü" #
Reporte_Deuda
üü$ 1
.
üü1 2
Resumen
üü2 9
(
üü9 :
detalladoDeudas
üü: I
)
üüI J
;
üüJ K
var
†† 
parametrosBasicos
†† %
=
††& '&
ObtenerParametrosBasicos
††( @
(
††@ A
)
††A B
;
††B C
ReportParameter
°° 
nombreDeReporte
°°  /
=
°°0 1
new
°°2 5
ReportParameter
°°6 E
(
°°E F
$str
°°F U
,
°°U V
$str
°°W r
)
°°r s
;
°°s t
var
¢¢ 
	rptviewer
¢¢ 
=
¢¢ 
new
¢¢  #
ReportViewer
¢¢$ 0
(
¢¢0 1
)
¢¢1 2
{
¢¢3 4
ProcessingMode
¢¢5 C
=
¢¢D E
ProcessingMode
¢¢F T
.
¢¢T U
Local
¢¢U Z
,
¢¢Z [!
SizeToReportContent
¢¢\ o
=
¢¢p q
true
¢¢r v
,
¢¢v w
Width
¢¢x }
=
¢¢~ 
Unit¢¢Ä Ñ
.¢¢Ñ Ö

Percentage¢¢Ö è
(¢¢è ê
$num¢¢ê ì
)¢¢ì î
,¢¢î ï
Height¢¢ñ ú
=¢¢ù û
Unit¢¢ü £
.¢¢£ §

Percentage¢¢§ Æ
(¢¢Æ Ø
$num¢¢Ø ≤
)¢¢≤ ≥
}¢¢¥ µ
;¢¢µ ∂
string
££ 
path
££ 
=
££ 
$str
££ [
;
££[ \
	rptviewer
§§ 
.
§§ 
LocalReport
§§ %
.
§§% &

ReportPath
§§& 0
=
§§1 2
fromRequest
§§3 >
?
§§? @
Request
§§A H
.
§§H I
MapPath
§§I P
(
§§P Q
Request
§§Q X
.
§§X Y
ApplicationPath
§§Y h
)
§§h i
+
§§j k
path
§§l p
:
§§q r!
HostingEnvironment§§s Ö
.§§Ö Ü
MapPath§§Ü ç
(§§ç é
path§§é í
)§§í ì
;§§ì î
	rptviewer
•• 
.
•• 
LocalReport
•• %
.
••% &
SetParameters
••& 3
(
••3 4
new
••4 7
ReportParameter
••8 G
[
••G H
]
••H I
{
••J K
parametrosBasicos
¶¶ !
.
¶¶! "

NombreSede
¶¶" ,
,
¶¶, -
parametrosBasicos
ßß !
.
ßß! " 
FechaActualSistema
ßß" 4
,
ßß4 5
parametrosBasicos
®® !
.
®®! "
LogoSede
®®" *
,
®®* +
parametrosBasicos
©© !
.
©©! "
Usuario
©©" )
,
©©) *
nombreDeReporte
™™ 
}
´´ 
)
´´ 
;
´´ 
ReportDataSource
¨¨  (
rptdatasourceResumenDeudas
¨¨! ;
=
¨¨< =
new
¨¨> A
ReportDataSource
¨¨B R
(
¨¨R S
$str
¨¨S i
,
¨¨i j
resumenDeudas
¨¨k x
)
¨¨x y
;
¨¨y z
ReportDataSource
≠≠  *
rptdatasourceDetalladoDeudas
≠≠! =
=
≠≠> ?
new
≠≠@ C
ReportDataSource
≠≠D T
(
≠≠T U
$str
≠≠U k
,
≠≠k l
detalladoDeudas
≠≠m |
)
≠≠| }
;
≠≠} ~
	rptviewer
ÆÆ 
.
ÆÆ 
LocalReport
ÆÆ %
.
ÆÆ% &
DataSources
ÆÆ& 1
.
ÆÆ1 2
Add
ÆÆ2 5
(
ÆÆ5 6(
rptdatasourceResumenDeudas
ÆÆ6 P
)
ÆÆP Q
;
ÆÆQ R
	rptviewer
ØØ 
.
ØØ 
LocalReport
ØØ %
.
ØØ% &
DataSources
ØØ& 1
.
ØØ1 2
Add
ØØ2 5
(
ØØ5 6*
rptdatasourceDetalladoDeudas
ØØ6 R
)
ØØR S
;
ØØS T
return
∞∞ 
	rptviewer
∞∞  
;
∞∞  !
}
±± 
catch
≤≤ 
(
≤≤ 
	Exception
≤≤ 
e
≤≤ 
)
≤≤ 
{
≥≥ 
throw
¥¥ 
new
¥¥ !
ControllerException
¥¥ -
(
¥¥- .
$str
¥¥. d
,
¥¥d e
e
¥¥f g
)
¥¥g h
;
¥¥h i
}
µµ 
}
∂∂ 	
public
ââ 
ActionResult
ââ ,
PorCobrarPagar_PorCobrarGrupos
ââ :
(
ââ: ;
bool
ââ; ?
todosLosGrupos
ââ@ N
,
ââN O
[
ââP Q
System
ââQ W
.
ââW X
Web
ââX [
.
ââ[ \
Http
ââ\ `
.
ââ` a
FromUri
ââa h
]
ââh i
int
ââj m
[
ââm n
]
âân o
	idsGrupos
ââp y
,
âây z
stringââ{ Å
nombresGruposââÇ è
)ââè ê
{
ää 	
var
ãã 
	rptviewer
ãã 
=
ãã 3
%GenerarPorCobrarPagar_PorCobrarGrupos
ãã A
(
ããA B
todosLosGrupos
ããB P
,
ããP Q
	idsGrupos
ããR [
,
ãã[ \
nombresGrupos
ãã] j
,
ããj k
true
ããl p
)
ããp q
;
ããq r
ViewBag
åå 
.
åå 
ReportViewer
åå  
=
åå! "
	rptviewer
åå# ,
;
åå, -
return
çç 
View
çç 
(
çç 
$str
çç -
)
çç- .
;
çç. /
}
éé 	
public
èè 
ReportViewer
èè 3
%GenerarPorCobrarPagar_PorCobrarGrupos
èè A
(
èèA B
bool
èèB F
todosLosGrupos
èèG U
,
èèU V
[
èèW X
System
èèX ^
.
èè^ _
Web
èè_ b
.
èèb c
Http
èèc g
.
èèg h
FromUri
èèh o
]
èèo p
int
èèq t
[
èèt u
]
èèu v
	idsGruposèèw Ä
,èèÄ Å
stringèèÇ à
nombresGruposèèâ ñ
,èèñ ó
boolèèò ú
fromRequestèèù ®
)èè® ©
{
êê 	
List
ëë 
<
ëë 
OperacionGrupo
ëë 
>
ëë  $
cuentasPorCobrarGrupos
ëë! 7
=
ëë8 9$
finanzaReportingLogica
ëë: P
.
ëëP Q+
ObtenerCuentasPorCobrarGrupos
ëëQ n
(
ëën o
todosLosGrupos
ëëo }
,
ëë} ~
	idsGruposëë à
)ëëà â
;ëëâ ä
var
íí 
parametrosBasicos
íí !
=
íí" #&
ObtenerParametrosBasicos
íí$ <
(
íí< =
)
íí= >
;
íí> ?
ReportParameter
ìì !
parametroFechaHasta
ìì /
=
ìì0 1
new
ìì2 5
ReportParameter
ìì6 E
(
ììE F
$str
ììF R
,
ììR S
DateTimeUtil
ììT `
.
ìì` a
FechaActual
ììa l
(
ììl m
)
ììm n
.
ììn o
ToString
ììo w
(
ììw x
)
ììx y
)
ììy z
;
ììz {
ReportParameter
îî $
parametroNombresGrupos
îî 2
=
îî3 4
new
îî5 8
ReportParameter
îî9 H
(
îîH I
$str
îîI X
,
îîX Y
nombresGrupos
îîZ g
??
îîh j
$str
îîk r
)
îîr s
;
îîs t
var
ïï 
	rptviewer
ïï 
=
ïï 
new
ïï 
ReportViewer
ïï  ,
(
ïï, -
)
ïï- .
{
ïï/ 0
ProcessingMode
ïï1 ?
=
ïï@ A
ProcessingMode
ïïB P
.
ïïP Q
Local
ïïQ V
,
ïïV W!
SizeToReportContent
ïïX k
=
ïïl m
true
ïïn r
,
ïïr s
Width
ïït y
=
ïïz {
Unitïï| Ä
.ïïÄ Å

PercentageïïÅ ã
(ïïã å
$numïïå è
)ïïè ê
,ïïê ë
Heightïïí ò
=ïïô ö
Unitïïõ ü
.ïïü †

Percentageïï† ™
(ïï™ ´
$numïï´ Æ
)ïïÆ Ø
}ïï∞ ±
;ïï± ≤
string
ññ 
path
ññ 
=
ññ 
$str
ññ _
;
ññ_ `
	rptviewer
óó 
.
óó 
LocalReport
óó !
.
óó! "

ReportPath
óó" ,
=
óó- .
fromRequest
óó/ :
?
óó; <
Request
óó= D
.
óóD E
MapPath
óóE L
(
óóL M
Request
óóM T
.
óóT U
ApplicationPath
óóU d
)
óód e
+
óóf g
path
óóh l
:
óóm n!
HostingEnvironmentóóo Å
.óóÅ Ç
MapPathóóÇ â
(óóâ ä
pathóóä é
)óóé è
;óóè ê
	rptviewer
òò 
.
òò 
LocalReport
òò !
.
òò! "
SetParameters
òò" /
(
òò/ 0
new
òò0 3
ReportParameter
òò4 C
[
òòC D
]
òòD E
{
òòF G
parametrosBasicos
ôô !
.
ôô! "

NombreSede
ôô" ,
,
ôô, -
parametrosBasicos
öö !
.
öö! " 
FechaActualSistema
öö" 4
,
öö4 5
parametrosBasicos
õõ !
.
õõ! "
LogoSede
õõ" *
,
õõ* +
parametrosBasicos
úú !
.
úú! "
Usuario
úú" )
,
úú) *!
parametroFechaHasta
ùù #
,
ùù# $$
parametroNombresGrupos
ûû &
}
üü 
)
üü 
;
üü 
ReportDataSource
†† %
rptdatasourceFacturadas
†† 4
=
††5 6
new
††7 :
ReportDataSource
††; K
(
††K L
$str
††L k
,
††k l%
cuentasPorCobrarGrupos††m É
)††É Ñ
;††Ñ Ö
	rptviewer
°° 
.
°° 
LocalReport
°° !
.
°°! "
DataSources
°°" -
.
°°- .
Add
°°. 1
(
°°1 2%
rptdatasourceFacturadas
°°2 I
)
°°I J
;
°°J K
return
¢¢ 
	rptviewer
¢¢ 
;
¢¢ 
}
££ 	
public
•• 
ActionResult
•• 4
&PorCobrarPagar_PorCobrarGrupoDetallado
•• B
(
••B C
int
••C F
idGrupo
••G N
,
••N O
string
••P V
nombreGrupo
••W b
)
••b c
{
¶¶ 	
var
ßß 
	rptviewer
ßß 
=
ßß ;
-GenerarPorCobrarPagar_PorCobrarGrupoDetallado
ßß I
(
ßßI J
idGrupo
ßßJ Q
,
ßßQ R
nombreGrupo
ßßS ^
,
ßß^ _
true
ßß` d
)
ßßd e
;
ßße f
ViewBag
®® 
.
®® 
ReportViewer
®®  
=
®®! "
	rptviewer
®®# ,
;
®®, -
return
©© 
View
©© 
(
©© 
$str
©© -
)
©©- .
;
©©. /
}
™™ 	
public
´´ 
ReportViewer
´´ ;
-GenerarPorCobrarPagar_PorCobrarGrupoDetallado
´´ I
(
´´I J
int
´´J M
idGrupo
´´N U
,
´´U V
string
´´W ]
nombreGrupo
´´^ i
,
´´i j
bool
´´k o
fromRequest
´´p {
)
´´{ |
{
¨¨ 	
List
≠≠ 
<
≠≠ %
OperacionGrupoDetallado
≠≠ (
>
≠≠( ),
cuentasPorCobrarGrupoDetallado
≠≠* H
=
≠≠I J$
finanzaReportingLogica
≠≠K a
.
≠≠a b4
%ObtenerCuentasPorCobrarGrupoDetallado≠≠b á
(≠≠á à
idGrupo≠≠à è
)≠≠è ê
;≠≠ê ë
var
ÆÆ 
parametrosBasicos
ÆÆ !
=
ÆÆ" #&
ObtenerParametrosBasicos
ÆÆ$ <
(
ÆÆ< =
)
ÆÆ= >
;
ÆÆ> ?
ReportParameter
ØØ !
parametroFechaHasta
ØØ /
=
ØØ0 1
new
ØØ2 5
ReportParameter
ØØ6 E
(
ØØE F
$str
ØØF R
,
ØØR S
DateTimeUtil
ØØT `
.
ØØ` a
FechaActual
ØØa l
(
ØØl m
)
ØØm n
.
ØØn o
ToString
ØØo w
(
ØØw x
)
ØØx y
)
ØØy z
;
ØØz {
ReportParameter
∞∞ "
parametroNombreGrupo
∞∞ 0
=
∞∞1 2
new
∞∞3 6
ReportParameter
∞∞7 F
(
∞∞F G
$str
∞∞G T
,
∞∞T U
nombreGrupo
∞∞V a
)
∞∞a b
;
∞∞b c
ReportParameter
±± (
parametroNombreResponsable
±± 6
=
±±7 8
new
±±9 <
ReportParameter
±±= L
(
±±L M
$str
±±M `
,
±±` a-
cuentasPorCobrarGrupoDetallado±±b Ä
.±±Ä Å
FirstOrDefault±±Å è
(±±è ê
)±±ê ë
.±±ë í!
NombreResponsable±±í £
)±±£ §
;±±§ •
var
≤≤ 
	rptviewer
≤≤ 
=
≤≤ 
new
≤≤ 
ReportViewer
≤≤  ,
(
≤≤, -
)
≤≤- .
{
≤≤/ 0
ProcessingMode
≤≤1 ?
=
≤≤@ A
ProcessingMode
≤≤B P
.
≤≤P Q
Local
≤≤Q V
,
≤≤V W!
SizeToReportContent
≤≤X k
=
≤≤l m
true
≤≤n r
,
≤≤r s
Width
≤≤t y
=
≤≤z {
Unit≤≤| Ä
.≤≤Ä Å

Percentage≤≤Å ã
(≤≤ã å
$num≤≤å è
)≤≤è ê
,≤≤ê ë
Height≤≤í ò
=≤≤ô ö
Unit≤≤õ ü
.≤≤ü †

Percentage≤≤† ™
(≤≤™ ´
$num≤≤´ Æ
)≤≤Æ Ø
}≤≤∞ ±
;≤≤± ≤
string
≥≥ 
path
≥≥ 
=
≥≥ 
$str
≥≥ g
;
≥≥g h
	rptviewer
¥¥ 
.
¥¥ 
LocalReport
¥¥ !
.
¥¥! "

ReportPath
¥¥" ,
=
¥¥- .
fromRequest
¥¥/ :
?
¥¥; <
Request
¥¥= D
.
¥¥D E
MapPath
¥¥E L
(
¥¥L M
Request
¥¥M T
.
¥¥T U
ApplicationPath
¥¥U d
)
¥¥d e
+
¥¥f g
path
¥¥h l
:
¥¥m n!
HostingEnvironment¥¥o Å
.¥¥Å Ç
MapPath¥¥Ç â
(¥¥â ä
path¥¥ä é
)¥¥é è
;¥¥è ê
	rptviewer
µµ 
.
µµ 
LocalReport
µµ !
.
µµ! "
SetParameters
µµ" /
(
µµ/ 0
new
µµ0 3
ReportParameter
µµ4 C
[
µµC D
]
µµD E
{
µµF G
parametrosBasicos
∂∂ !
.
∂∂! "

NombreSede
∂∂" ,
,
∂∂, -
parametrosBasicos
∑∑ !
.
∑∑! " 
FechaActualSistema
∑∑" 4
,
∑∑4 5
parametrosBasicos
∏∏ !
.
∏∏! "
LogoSede
∏∏" *
,
∏∏* +
parametrosBasicos
ππ !
.
ππ! "
Usuario
ππ" )
,
ππ) *!
parametroFechaHasta
∫∫ #
,
∫∫# $"
parametroNombreGrupo
ªª $
,
ªª$ %(
parametroNombreResponsable
ºº *
}
ΩΩ 
)
ΩΩ 
;
ΩΩ 
ReportDataSource
ææ %
rptdatasourceFacturadas
ææ 4
=
ææ5 6
new
ææ7 :
ReportDataSource
ææ; K
(
ææK L
$str
ææL s
,
ææs t-
cuentasPorCobrarGrupoDetalladoææu ì
)ææì î
;ææî ï
	rptviewer
øø 
.
øø 
LocalReport
øø !
.
øø! "
DataSources
øø" -
.
øø- .
Add
øø. 1
(
øø1 2%
rptdatasourceFacturadas
øø2 I
)
øøI J
;
øøJ K
return
¿¿ 
	rptviewer
¿¿ 
;
¿¿ 
}
¡¡ 	
}
¬¬ 
}√√ ∏á
zD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Finanza\FinanzaReportes_MovimientosCajasController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class 6
*FinanzaReportes_MovimientosCajasController C
:D E
BaseControllerF T
{ 
	protected 
readonly 
IOperacionLogica +
operacionLogica, ;
;; <
	protected 
readonly 
IActorNegocioLogica .
actorNegocioLogica/ A
;A B
	protected 
readonly 
IConceptoLogica *
conceptoLogica+ 9
;9 :
	protected 
readonly "
IFinanzaReporte_Logica 1"
finanzaReportingLogica2 H
;H I
	protected   
readonly   $
ICentroDeAtencion_Logica   3"
centroDeAtencionLogica  4 J
;  J K
public"" 6
*FinanzaReportes_MovimientosCajasController"" 9
(""9 :
)"": ;
:""< =
base""> B
(""B C
)""C D
{## 	
operacionLogica$$ 
=$$ 
Dependencia$$ )
.$$) *
Resolve$$* 1
<$$1 2
IOperacionLogica$$2 B
>$$B C
($$C D
)$$D E
;$$E F
actorNegocioLogica%% 
=%%  
Dependencia%%! ,
.%%, -
Resolve%%- 4
<%%4 5
IActorNegocioLogica%%5 H
>%%H I
(%%I J
)%%J K
;%%K L
conceptoLogica&& 
=&& 
Dependencia&& (
.&&( )
Resolve&&) 0
<&&0 1
IConceptoLogica&&1 @
>&&@ A
(&&A B
)&&B C
;&&C D"
finanzaReportingLogica'' "
=''# $
Dependencia''% 0
.''0 1
Resolve''1 8
<''8 9"
IFinanzaReporte_Logica''9 O
>''O P
(''P Q
)''Q R
;''R S"
centroDeAtencionLogica(( "
=((# $
Dependencia((% 0
.((0 1
Resolve((1 8
<((8 9$
ICentroDeAtencion_Logica((9 Q
>((Q R
(((R S
)((S T
;((T U
})) 	
public** 
ActionResult** +
MovimientosCajas_CobrosClientes** ;
(**; <
DateTime**< D

fechaDesde**E O
,**O P
DateTime**Q Y

fechaHasta**Z d
,**d e
bool**f j
todasLasCajas**k x
,**x y
[**z {
System	**{ Å
.
**Å Ç
Web
**Ç Ö
.
**Ö Ü
Http
**Ü ä
.
**ä ã
FromUri
**ã í
]
**í ì
int
**î ó
[
**ó ò
]
**ò ô
idsCajas
**ö ¢
,
**¢ £
string
**§ ™
nombresCajas
**´ ∑
,
**∑ ∏
bool
**π Ω
todosLosClientes
**æ Œ
,
**Œ œ
[
**– —
System
**— ◊
.
**◊ ÿ
Web
**ÿ €
.
**€ ‹
Http
**‹ ‡
.
**‡ ·
FromUri
**· Ë
]
**Ë È
int
**Í Ì
[
**Ì Ó
]
**Ó Ô
idsClientes
** ˚
,
**˚ ¸
string
**˝ É
nombresClientes
**Ñ ì
)
**ì î
{++ 	
var,, 
	rptviewer,, 
=,, 2
&GenerarMovimientosCajas_CobrosClientes,, B
(,,B C

fechaDesde,,C M
,,,M N

fechaHasta,,O Y
,,,Y Z
todasLasCajas,,[ h
,,,h i
idsCajas,,j r
,,,r s
nombresCajas	,,t Ä
,
,,Ä Å
todosLosClientes
,,Ç í
,
,,í ì
idsClientes
,,î ü
,
,,ü †
nombresClientes
,,° ∞
,
,,∞ ±
true
,,≤ ∂
)
,,∂ ∑
;
,,∑ ∏
ViewBag-- 
.-- 
ReportViewer--  
=--! "
	rptviewer--# ,
;--, -
return.. 
View.. 
(.. 
$str.. -
)..- .
;... /
}// 	
public11 
ReportViewer11 2
&GenerarMovimientosCajas_CobrosClientes11 B
(11B C
DateTime11C K

fechaDesde11L V
,11V W
DateTime11X `

fechaHasta11a k
,11k l
bool11m q
todasLasCajas11r 
,	11 Ä
int
11Å Ñ
[
11Ñ Ö
]
11Ö Ü
idsCajas
11á è
,
11è ê
string
11ë ó
nombresCajas
11ò §
,
11§ •
bool
11¶ ™
todosLosClientes
11´ ª
,
11ª º
int
11Ω ¿
[
11¿ ¡
]
11¡ ¬
idsClientes
11√ Œ
,
11Œ œ
string
11– ÷
nombresClientes
11◊ Ê
,
11Ê Á
bool
11Ë Ï
fromRequest
11Ì ¯
)
11¯ ˘
{22 	
try33 
{44 
var55 
detalladoPagos55 "
=55# $
operacionLogica55% 4
.554 5"
ObtenerPagosDeClientes555 K
(55K L

fechaDesde55L V
,55V W

fechaHasta55X b
,55b c
todasLasCajas55d q
,55q r
idsCajas55s {
,55{ |
todosLosClientes	55} ç
,
55ç é
idsClientes
55è ö
)
55ö õ
;
55õ ú
var66 
resumenPagos66  
=66! "
Reporte_Pago66# /
.66/ 0
Resumen660 7
(667 8
detalladoPagos668 F
)66F G
;66G H
var77 
parametrosBasicos77 %
=77& '$
ObtenerParametrosBasicos77( @
(77@ A
)77A B
;77B C
ReportParameter88 
nombreDeReporte88  /
=880 1
new882 5
ReportParameter886 E
(88E F
$str88F U
,88U V
$str88W k
)88k l
;88l m
ReportParameter99 
parametroFechaDesde99  3
=994 5
new996 9
ReportParameter99: I
(99I J
$str99J V
,99V W

fechaDesde99X b
.99b c
ToString99c k
(99k l
)99l m
)99m n
;99n o
ReportParameter:: 
parametroFechaHasta::  3
=::4 5
new::6 9
ReportParameter::: I
(::I J
$str::J V
,::V W

fechaHasta::X b
.::b c
ToString::c k
(::k l
)::l m
)::m n
;::n o
var;; 
	rptviewer;; 
=;; 
new;;  #
ReportViewer;;$ 0
(;;0 1
);;1 2
{;;3 4
ProcessingMode;;5 C
=;;D E
ProcessingMode;;F T
.;;T U
Local;;U Z
,;;Z [
SizeToReportContent;;\ o
=;;p q
true;;r v
,;;v w
Width;;x }
=;;~ 
Unit
;;Ä Ñ
.
;;Ñ Ö

Percentage
;;Ö è
(
;;è ê
$num
;;ê ì
)
;;ì î
,
;;î ï
Height
;;ñ ú
=
;;ù û
Unit
;;ü £
.
;;£ §

Percentage
;;§ Æ
(
;;Æ Ø
$num
;;Ø ≤
)
;;≤ ≥
}
;;¥ µ
;
;;µ ∂
string<< 
path<< 
=<< 
$str<< Z
;<<Z [
	rptviewer== 
.== 
LocalReport== %
.==% &

ReportPath==& 0
===1 2
fromRequest==3 >
?==? @
Request==A H
.==H I
MapPath==I P
(==P Q
Request==Q X
.==X Y
ApplicationPath==Y h
)==h i
+==j k
path==l p
:==q r
HostingEnvironment	==s Ö
.
==Ö Ü
MapPath
==Ü ç
(
==ç é
path
==é í
)
==í ì
;
==ì î
	rptviewer>> 
.>> 
LocalReport>> %
.>>% &
SetParameters>>& 3
(>>3 4
new>>4 7
ReportParameter>>8 G
[>>G H
]>>H I
{>>J K
parametrosBasicos?? !
.??! "

NombreSede??" ,
,??, -
parametrosBasicos@@ !
.@@! "
FechaActualSistema@@" 4
,@@4 5
parametrosBasicosAA !
.AA! "
LogoSedeAA" *
,AA* +
parametrosBasicosBB !
.BB! "
UsuarioBB" )
,BB) *
nombreDeReporteCC 
,CC  
parametroFechaDesdeDD #
,DD# $
parametroFechaHastaEE #
}FF 
)FF 
;FF 
ReportDataSourceGG  %
rptdatasourceResumenPagosGG! :
=GG; <
newGG= @
ReportDataSourceGGA Q
(GGQ R
$strGGR g
,GGg h
resumenPagosGGi u
)GGu v
;GGv w
ReportDataSourceHH  '
rptdatasourceDetalladoPagosHH! <
=HH= >
newHH? B
ReportDataSourceHHC S
(HHS T
$strHHT i
,HHi j
detalladoPagosHHk y
)HHy z
;HHz {
	rptviewerII 
.II 
LocalReportII %
.II% &
DataSourcesII& 1
.II1 2
AddII2 5
(II5 6%
rptdatasourceResumenPagosII6 O
)IIO P
;IIP Q
	rptviewerJJ 
.JJ 
LocalReportJJ %
.JJ% &
DataSourcesJJ& 1
.JJ1 2
AddJJ2 5
(JJ5 6'
rptdatasourceDetalladoPagosJJ6 Q
)JJQ R
;JJR S
returnKK 
	rptviewerKK  
;KK  !
}LL 
catchMM 
(MM 
	ExceptionMM 
eMM 
)MM 
{NN 
throwOO 
newOO 
ControllerExceptionOO -
(OO- .
$strOO. a
,OOa b
eOOc d
)OOd e
;OOe f
}PP 
}QQ 	
publicSS 
ActionResultSS -
!MovimientosCajas_PagosProveedoresSS =
(SS= >
DateTimeSS> F

fechaDesdeSSG Q
,SSQ R
DateTimeSSS [

fechaHastaSS\ f
,SSf g
boolSSh l
todasLasCajasSSm z
,SSz {
[SS| }
System	SS} É
.
SSÉ Ñ
Web
SSÑ á
.
SSá à
Http
SSà å
.
SSå ç
FromUri
SSç î
]
SSî ï
int
SSñ ô
[
SSô ö
]
SSö õ
idsCajas
SSú §
,
SS§ •
string
SS¶ ¨
nombresCajas
SS≠ π
,
SSπ ∫
bool
SSª ø!
todosLosProveedores
SS¿ ”
,
SS” ‘
[
SS’ ÷
System
SS÷ ‹
.
SS‹ ›
Web
SS› ‡
.
SS‡ ·
Http
SS· Â
.
SSÂ Ê
FromUri
SSÊ Ì
]
SSÌ Ó
int
SSÔ Ú
[
SSÚ Û
]
SSÛ Ù
idsProveedores
SSı É
,
SSÉ Ñ
string
SSÖ ã 
nombresProveedores
SSå û
)
SSû ü
{TT 	
varUU 
	rptviewerUU 
=UU 4
(GenerarMovimientosCajas_PagosProveedoresUU D
(UUD E

fechaDesdeUUE O
,UUO P

fechaHastaUUQ [
,UU[ \
todasLasCajasUU] j
,UUj k
idsCajasUUl t
,UUt u
nombresCajas	UUv Ç
,
UUÇ É!
todosLosProveedores
UUÑ ó
,
UUó ò
idsProveedores
UUô ß
,
UUß ® 
nombresProveedores
UU© ª
,
UUª º
true
UUΩ ¡
)
UU¡ ¬
;
UU¬ √
ViewBagVV 
.VV 
ReportViewerVV  
=VV! "
	rptviewerVV# ,
;VV, -
returnWW 
ViewWW 
(WW 
$strWW -
)WW- .
;WW. /
}XX 	
publicZZ 
ReportViewerZZ 4
(GenerarMovimientosCajas_PagosProveedoresZZ D
(ZZD E
DateTimeZZE M

fechaDesdeZZN X
,ZZX Y
DateTimeZZZ b

fechaHastaZZc m
,ZZm n
boolZZo s
todasLasCajas	ZZt Å
,
ZZÅ Ç
int
ZZÉ Ü
[
ZZÜ á
]
ZZá à
idsCajas
ZZâ ë
,
ZZë í
string
ZZì ô
nombresCajas
ZZö ¶
,
ZZ¶ ß
bool
ZZ® ¨!
todosLosProveedores
ZZ≠ ¿
,
ZZ¿ ¡
int
ZZ¬ ≈
[
ZZ≈ ∆
]
ZZ∆ «
idsProveedores
ZZ» ÷
,
ZZ÷ ◊
string
ZZÿ ﬁ 
nombresProveedores
ZZﬂ Ò
,
ZZÒ Ú
bool
ZZÛ ˜
fromRequest
ZZ¯ É
)
ZZÉ Ñ
{[[ 	
try\\ 
{]] 
var^^ 
detalladoPagos^^ "
=^^# $
operacionLogica^^% 4
.^^4 5$
ObtenerPagosAProveedores^^5 M
(^^M N

fechaDesde^^N X
,^^X Y

fechaHasta^^Z d
,^^d e
todasLasCajas^^f s
,^^s t
idsCajas^^u }
,^^} ~ 
todosLosProveedores	^^ í
,
^^í ì
idsProveedores
^^î ¢
)
^^¢ £
;
^^£ §
var__ 
resumenPagos__  
=__! "
Reporte_Pago__# /
.__/ 0
Resumen__0 7
(__7 8
detalladoPagos__8 F
)__F G
;__G H
var`` 
parametrosBasicos`` %
=``& '$
ObtenerParametrosBasicos``( @
(``@ A
)``A B
;``B C
ReportParameteraa 
nombreDeReporteaa  /
=aa0 1
newaa2 5
ReportParameteraa6 E
(aaE F
$straaF U
,aaU V
$straaW m
)aam n
;aan o
ReportParameterbb 
parametroFechaDesdebb  3
=bb4 5
newbb6 9
ReportParameterbb: I
(bbI J
$strbbJ V
,bbV W

fechaDesdebbX b
.bbb c
ToStringbbc k
(bbk l
)bbl m
)bbm n
;bbn o
ReportParametercc 
parametroFechaHastacc  3
=cc4 5
newcc6 9
ReportParametercc: I
(ccI J
$strccJ V
,ccV W

fechaHastaccX b
.ccb c
ToStringccc k
(cck l
)ccl m
)ccm n
;ccn o
vardd 
	rptviewerdd 
=dd 
newdd  #
ReportViewerdd$ 0
(dd0 1
)dd1 2
{dd3 4
ProcessingModedd5 C
=ddD E
ProcessingModeddF T
.ddT U
LocalddU Z
,ddZ [
SizeToReportContentdd\ o
=ddp q
trueddr v
,ddv w
Widthddx }
=dd~ 
Unit
ddÄ Ñ
.
ddÑ Ö

Percentage
ddÖ è
(
ddè ê
$num
ddê ì
)
ddì î
,
ddî ï
Height
ddñ ú
=
ddù û
Unit
ddü £
.
dd£ §

Percentage
dd§ Æ
(
ddÆ Ø
$num
ddØ ≤
)
dd≤ ≥
}
dd¥ µ
;
ddµ ∂
stringee 
pathee 
=ee 
$stree Z
;eeZ [
	rptviewerff 
.ff 
LocalReportff %
.ff% &

ReportPathff& 0
=ff1 2
fromRequestff3 >
?ff? @
RequestffA H
.ffH I
MapPathffI P
(ffP Q
RequestffQ X
.ffX Y
ApplicationPathffY h
)ffh i
+ffj k
pathffl p
:ffq r
HostingEnvironment	ffs Ö
.
ffÖ Ü
MapPath
ffÜ ç
(
ffç é
path
ffé í
)
ffí ì
;
ffì î
	rptviewergg 
.gg 
LocalReportgg %
.gg% &
SetParametersgg& 3
(gg3 4
newgg4 7
ReportParametergg8 G
[ggG H
]ggH I
{ggJ K
parametrosBasicoshh !
.hh! "

NombreSedehh" ,
,hh, -
parametrosBasicosii !
.ii! "
FechaActualSistemaii" 4
,ii4 5
parametrosBasicosjj !
.jj! "
LogoSedejj" *
,jj* +
parametrosBasicoskk !
.kk! "
Usuariokk" )
,kk) *
nombreDeReportell 
,ll  
parametroFechaDesdemm #
,mm# $
parametroFechaHastann #
}oo 
)oo 
;oo 
ReportDataSourcepp  %
rptdatasourceResumenPagospp! :
=pp; <
newpp= @
ReportDataSourceppA Q
(ppQ R
$strppR g
,ppg h
resumenPagosppi u
)ppu v
;ppv w
ReportDataSourceqq  '
rptdatasourceDetalladoPagosqq! <
=qq= >
newqq? B
ReportDataSourceqqC S
(qqS T
$strqqT i
,qqi j
detalladoPagosqqk y
)qqy z
;qqz {
	rptviewerrr 
.rr 
LocalReportrr %
.rr% &
DataSourcesrr& 1
.rr1 2
Addrr2 5
(rr5 6%
rptdatasourceResumenPagosrr6 O
)rrO P
;rrP Q
	rptviewerss 
.ss 
LocalReportss %
.ss% &
DataSourcesss& 1
.ss1 2
Addss2 5
(ss5 6'
rptdatasourceDetalladoPagosss6 Q
)ssQ R
;ssR S
returntt 
	rptviewertt  
;tt  !
}uu 
catchvv 
(vv 
	Exceptionvv 
evv 
)vv 
{ww 
throwxx 
newxx 
ControllerExceptionxx -
(xx- .
$strxx. c
,xxc d
exxe f
)xxf g
;xxg h
}yy 
}zz 	
}
»» 	
}
…… öÕ
yD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Finanza\FinanzaReportes_MovimientosCajaController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class 5
)FinanzaReportes_MovimientosCajaController B
:C D
BaseControllerE S
{ 
	protected 
readonly 
IOperacionLogica +
operacionLogica, ;
;; <
	protected 
readonly 
IActorNegocioLogica .
actorNegocioLogica/ A
;A B
	protected 
readonly 
IConceptoLogica *
conceptoLogica+ 9
;9 :
	protected 
readonly "
IFinanzaReporte_Logica 1"
finanzaReportingLogica2 H
;H I
	protected   
readonly   $
ICentroDeAtencion_Logica   3"
centroDeAtencionLogica  4 J
;  J K
public## 5
)FinanzaReportes_MovimientosCajaController## 8
(##8 9
)##9 :
:##; <
base##= A
(##A B
)##B C
{$$ 	
operacionLogica%% 
=%% 
Dependencia%% )
.%%) *
Resolve%%* 1
<%%1 2
IOperacionLogica%%2 B
>%%B C
(%%C D
)%%D E
;%%E F
actorNegocioLogica&& 
=&&  
Dependencia&&! ,
.&&, -
Resolve&&- 4
<&&4 5
IActorNegocioLogica&&5 H
>&&H I
(&&I J
)&&J K
;&&K L
conceptoLogica'' 
='' 
Dependencia'' (
.''( )
Resolve'') 0
<''0 1
IConceptoLogica''1 @
>''@ A
(''A B
)''B C
;''C D"
finanzaReportingLogica(( "
=((# $
Dependencia((% 0
.((0 1
Resolve((1 8
<((8 9"
IFinanzaReporte_Logica((9 O
>((O P
(((P Q
)((Q R
;((R S"
centroDeAtencionLogica)) "
=))# $
Dependencia))% 0
.))0 1
Resolve))1 8
<))8 9$
ICentroDeAtencion_Logica))9 Q
>))Q R
())R S
)))S T
;))T U
}++ 	
public-- 
ActionResult-- $
MovimientosCaja_Ingresos-- 4
(--4 5
bool--5 9
esCuenta--: B
,--B C
int--D G
idCaja--H N
,--N O
string--P V

nombreCaja--W a
,--a b
DateTime--c k

fechaDesde--l v
,--v w
DateTime	--x Ä

fechaHasta
--Å ã
,
--ã å
bool
--ç ë 
todosLosMediosPago
--í §
,
--§ •
[
--¶ ß
System
--ß ≠
.
--≠ Æ
Web
--Æ ±
.
--± ≤
Http
--≤ ∂
.
--∂ ∑
FromUri
--∑ æ
]
--æ ø
int
--¿ √
[
--√ ƒ
]
--ƒ ≈
idsMediosPago
--∆ ”
,
--” ‘
string
--’ €
nombresMediosPago
--‹ Ì
,
--Ì Ó
bool
--Ô Û!
todasLasOperaciones
--Ù á
,
--á à
[
--â ä
System
--ä ê
.
--ê ë
Web
--ë î
.
--î ï
Http
--ï ô
.
--ô ö
FromUri
--ö °
]
--° ¢
int
--£ ¶
[
--¶ ß
]
--ß ®
idsOperaciones
--© ∑
,
--∑ ∏
string
--π ø 
nombresOperaciones
--¿ “
)
--“ ”
{.. 	
var// 
	rptviewer// 
=// +
GenerarMovimientosCaja_Ingresos// ;
(//; <
esCuenta//< D
,//D E
idCaja//F L
,//L M

nombreCaja//N X
,//X Y

fechaDesde//Z d
,//d e

fechaHasta//f p
,//p q
todosLosMediosPago	//r Ñ
,
//Ñ Ö
idsMediosPago
//Ü ì
,
//ì î
nombresMediosPago
//ï ¶
,
//¶ ß!
todasLasOperaciones
//® ª
,
//ª º
idsOperaciones
//Ω À
,
//À Ã 
nombresOperaciones
//Õ ﬂ
,
//ﬂ ‡
true
//· Â
)
//Â Ê
;
//Ê Á
ViewBag00 
.00 
ReportViewer00  
=00! "
	rptviewer00# ,
;00, -
return11 
View11 
(11 
$str11 -
)11- .
;11. /
}22 	
public44 
ReportViewer44 +
GenerarMovimientosCaja_Ingresos44 ;
(44; <
bool44< @
esCuenta44A I
,44I J
int44K N
idCaja44O U
,44U V
string44W ]

nombreCaja44^ h
,44h i
DateTime44j r

fechaDesde44s }
,44} ~
DateTime	44 á

fechaHasta
44à í
,
44í ì
bool
44î ò 
todosLosMediosPago
44ô ´
,
44´ ¨
[
44≠ Æ
System
44Æ ¥
.
44¥ µ
Web
44µ ∏
.
44∏ π
Http
44π Ω
.
44Ω æ
FromUri
44æ ≈
]
44≈ ∆
int
44«  
[
44  À
]
44À Ã
idsMediosPago
44Õ ⁄
,
44⁄ €
string
44‹ ‚
nombresMediosPago
44„ Ù
,
44Ù ı
bool
44ˆ ˙!
todasLasOperaciones
44˚ é
,
44é è
[
44ê ë
System
44ë ó
.
44ó ò
Web
44ò õ
.
44õ ú
Http
44ú †
.
44† °
FromUri
44° ®
]
44® ©
int
44™ ≠
[
44≠ Æ
]
44Æ Ø
idsOperaciones
44∞ æ
,
44æ ø
string
44¿ ∆ 
nombresOperaciones
44« Ÿ
,
44Ÿ ⁄
bool
44€ ﬂ
fromRequest
44‡ Î
)
44Î Ï
{55 	
List66 
<66 
IngresoEgreso66 
>66 
ingresos66  (
=66) *"
finanzaReportingLogica66+ A
.66A B
Ingresos66B J
(66J K
esCuenta66K S
,66S T
idCaja66U [
,66[ \

fechaDesde66] g
,66g h

fechaHasta66i s
,66s t
todosLosMediosPago	66u á
,
66á à
idsMediosPago
66â ñ
,
66ñ ó!
todasLasOperaciones
66ò ´
,
66´ ¨
idsOperaciones
66≠ ª
)
66ª º
;
66º Ω
var77 
parametrosBasicos77 !
=77" #$
ObtenerParametrosBasicos77$ <
(77< =
)77= >
;77> ?
ReportParameter88 
parametroNombreCaja88 /
=880 1
new882 5
ReportParameter886 E
(88E F
$str88F R
,88R S

nombreCaja88T ^
)88^ _
;88_ `
ReportParameter99 
parametroMediosPago99 /
=990 1
new992 5
ReportParameter996 E
(99E F
$str99F R
,99R S
nombresMediosPago99T e
??99f h
$str99i p
)99p q
;99q r
ReportParameter::  
parametroOperaciones:: 0
=::1 2
new::3 6
ReportParameter::7 F
(::F G
$str::G T
,::T U
nombresOperaciones::V h
??::i k
$str::l s
)::s t
;::t u
ReportParameter;; 
parametroFechaDesde;; /
=;;0 1
new;;2 5
ReportParameter;;6 E
(;;E F
$str;;F R
,;;R S

fechaDesde;;T ^
.;;^ _
ToString;;_ g
(;;g h
);;h i
);;i j
;;;j k
ReportParameter<< 
parametroFechaHasta<< /
=<<0 1
new<<2 5
ReportParameter<<6 E
(<<E F
$str<<F R
,<<R S

fechaHasta<<T ^
.<<^ _
ToString<<_ g
(<<g h
)<<h i
)<<i j
;<<j k
var== 
	rptviewer== 
=== 
new== 
ReportViewer==  ,
(==, -
)==- .
{==/ 0
ProcessingMode==1 ?
===@ A
ProcessingMode==B P
.==P Q
Local==Q V
,==V W
SizeToReportContent==X k
===l m
true==n r
,==r s
Width==t y
===z {
Unit	==| Ä
.
==Ä Å

Percentage
==Å ã
(
==ã å
$num
==å è
)
==è ê
,
==ê ë
Height
==í ò
=
==ô ö
Unit
==õ ü
.
==ü †

Percentage
==† ™
(
==™ ´
$num
==´ Æ
)
==Æ Ø
}
==∞ ±
;
==± ≤
string>> 
path>> 
=>> 
$str>> Y
;>>Y Z
	rptviewer?? 
.?? 
LocalReport?? !
.??! "

ReportPath??" ,
=??- .
fromRequest??/ :
???; <
Request??= D
.??D E
MapPath??E L
(??L M
Request??M T
.??T U
ApplicationPath??U d
)??d e
+??f g
path??h l
:??m n
HostingEnvironment	??o Å
.
??Å Ç
MapPath
??Ç â
(
??â ä
path
??ä é
)
??é è
;
??è ê
	rptviewer@@ 
.@@ 
LocalReport@@ !
.@@! "
SetParameters@@" /
(@@/ 0
new@@0 3
ReportParameter@@4 C
[@@C D
]@@D E
{@@F G
parametrosBasicosAA !
.AA! "

NombreSedeAA" ,
,AA, -
parametrosBasicosBB !
.BB! "
FechaActualSistemaBB" 4
,BB4 5
parametrosBasicosCC !
.CC! "
LogoSedeCC" *
,CC* +
parametrosBasicosDD !
.DD! "
UsuarioDD" )
,DD) *
parametroMediosPagoEE #
,EE# $ 
parametroOperacionesFF $
,FF$ %
parametroNombreCajaGG #
,GG# $
parametroFechaDesdeHH #
,HH# $
parametroFechaHastaII #
}JJ 
)JJ 
;JJ 
ReportDataSourceKK !
rptdatasourceIngresosKK 2
=KK3 4
newKK5 8
ReportDataSourceKK9 I
(KKI J
$strKKJ [
,KK[ \
ingresosKK] e
)KKe f
;KKf g
	rptviewerLL 
.LL 
LocalReportLL !
.LL! "
DataSourcesLL" -
.LL- .
AddLL. 1
(LL1 2!
rptdatasourceIngresosLL2 G
)LLG H
;LLH I
returnMM 
	rptviewerMM 
;MM 
}NN 	
publicPP 
ActionResultPP #
MovimientosCaja_EgresosPP 3
(PP3 4
boolPP4 8
esCuentaPP9 A
,PPA B
intPPC F
idCajaPPG M
,PPM N
stringPPO U

nombreCajaPPV `
,PP` a
DateTimePPb j

fechaDesdePPk u
,PPu v
DateTimePPw 

fechaHasta
PPÄ ä
,
PPä ã
bool
PPå ê 
todosLosMediosPago
PPë £
,
PP£ §
[
PP• ¶
System
PP¶ ¨
.
PP¨ ≠
Web
PP≠ ∞
.
PP∞ ±
Http
PP± µ
.
PPµ ∂
FromUri
PP∂ Ω
]
PPΩ æ
int
PPø ¬
[
PP¬ √
]
PP√ ƒ
idsMediosPago
PP≈ “
,
PP“ ”
string
PP‘ ⁄
nombresMediosPago
PP€ Ï
,
PPÏ Ì
bool
PPÓ Ú!
todasLasOperaciones
PPÛ Ü
,
PPÜ á
[
PPà â
System
PPâ è
.
PPè ê
Web
PPê ì
.
PPì î
Http
PPî ò
.
PPò ô
FromUri
PPô †
]
PP† °
int
PP¢ •
[
PP• ¶
]
PP¶ ß
idsOperaciones
PP® ∂
,
PP∂ ∑
string
PP∏ æ 
nombresOperaciones
PPø —
)
PP— “
{QQ 	
varRR 
	rptviewerRR 
=RR *
GenerarMovimientosCaja_EgresosRR :
(RR: ;
esCuentaRR; C
,RRC D
idCajaRRE K
,RRK L

nombreCajaRRM W
,RRW X

fechaDesdeRRY c
,RRc d

fechaHastaRRe o
,RRo p
todosLosMediosPago	RRq É
,
RRÉ Ñ
idsMediosPago
RRÖ í
,
RRí ì
nombresMediosPago
RRî •
,
RR• ¶!
todasLasOperaciones
RRß ∫
,
RR∫ ª
idsOperaciones
RRº  
,
RR  À 
nombresOperaciones
RRÃ ﬁ
,
RRﬁ ﬂ
true
RR‡ ‰
)
RR‰ Â
;
RRÂ Ê
ViewBagSS 
.SS 
ReportViewerSS  
=SS! "
	rptviewerSS# ,
;SS, -
returnTT 
ViewTT 
(TT 
$strTT -
)TT- .
;TT. /
}UU 	
publicWW 
ReportViewerWW *
GenerarMovimientosCaja_EgresosWW :
(WW: ;
boolWW; ?
esCuentaWW@ H
,WWH I
intWWJ M
idCajaWWN T
,WWT U
stringWWV \

nombreCajaWW] g
,WWg h
DateTimeWWi q

fechaDesdeWWr |
,WW| }
DateTime	WW~ Ü

fechaHasta
WWá ë
,
WWë í
bool
WWì ó 
todosLosMediosPago
WWò ™
,
WW™ ´
[
WW¨ ≠
System
WW≠ ≥
.
WW≥ ¥
Web
WW¥ ∑
.
WW∑ ∏
Http
WW∏ º
.
WWº Ω
FromUri
WWΩ ƒ
]
WWƒ ≈
int
WW∆ …
[
WW…  
]
WW  À
idsMediosPago
WWÃ Ÿ
,
WWŸ ⁄
string
WW€ ·
nombresMediosPago
WW‚ Û
,
WWÛ Ù
bool
WWı ˘!
todasLasOperaciones
WW˙ ç
,
WWç é
[
WWè ê
System
WWê ñ
.
WWñ ó
Web
WWó ö
.
WWö õ
Http
WWõ ü
.
WWü †
FromUri
WW† ß
]
WWß ®
int
WW© ¨
[
WW¨ ≠
]
WW≠ Æ
idsOperaciones
WWØ Ω
,
WWΩ æ
string
WWø ≈ 
nombresOperaciones
WW∆ ÿ
,
WWÿ Ÿ
bool
WW⁄ ﬁ
fromRequest
WWﬂ Í
)
WWÍ Î
{XX 	
ListYY 
<YY 
IngresoEgresoYY 
>YY 
egresosYY  '
=YY( )"
finanzaReportingLogicaYY* @
.YY@ A
EgresosYYA H
(YYH I
esCuentaYYI Q
,YYQ R
idCajaYYS Y
,YYY Z

fechaDesdeYY[ e
,YYe f

fechaHastaYYg q
,YYq r
todosLosMediosPago	YYs Ö
,
YYÖ Ü
idsMediosPago
YYá î
,
YYî ï!
todasLasOperaciones
YYñ ©
,
YY© ™
idsOperaciones
YY´ π
)
YYπ ∫
;
YY∫ ª
varZZ 
parametrosBasicosZZ !
=ZZ" #$
ObtenerParametrosBasicosZZ$ <
(ZZ< =
)ZZ= >
;ZZ> ?
ReportParameter[[ 
parametroNombreCaja[[ /
=[[0 1
new[[2 5
ReportParameter[[6 E
([[E F
$str[[F R
,[[R S

nombreCaja[[T ^
)[[^ _
;[[_ `
ReportParameter\\ 
parametroMediosPago\\ /
=\\0 1
new\\2 5
ReportParameter\\6 E
(\\E F
$str\\F R
,\\R S
nombresMediosPago\\T e
??\\f h
$str\\i p
)\\p q
;\\q r
ReportParameter]]  
parametroOperaciones]] 0
=]]1 2
new]]3 6
ReportParameter]]7 F
(]]F G
$str]]G T
,]]T U
nombresOperaciones]]V h
??]]i k
$str]]l s
)]]s t
;]]t u
ReportParameter^^ 
parametroFechaDesde^^ /
=^^0 1
new^^2 5
ReportParameter^^6 E
(^^E F
$str^^F R
,^^R S

fechaDesde^^T ^
.^^^ _
ToString^^_ g
(^^g h
)^^h i
)^^i j
;^^j k
ReportParameter__ 
parametroFechaHasta__ /
=__0 1
new__2 5
ReportParameter__6 E
(__E F
$str__F R
,__R S

fechaHasta__T ^
.__^ _
ToString___ g
(__g h
)__h i
)__i j
;__j k
var`` 
	rptviewer`` 
=`` 
new`` 
ReportViewer``  ,
(``, -
)``- .
{``/ 0
ProcessingMode``1 ?
=``@ A
ProcessingMode``B P
.``P Q
Local``Q V
,``V W
SizeToReportContent``X k
=``l m
true``n r
,``r s
Width``t y
=``z {
Unit	``| Ä
.
``Ä Å

Percentage
``Å ã
(
``ã å
$num
``å è
)
``è ê
,
``ê ë
Height
``í ò
=
``ô ö
Unit
``õ ü
.
``ü †

Percentage
``† ™
(
``™ ´
$num
``´ Æ
)
``Æ Ø
}
``∞ ±
;
``± ≤
stringaa 
pathaa 
=aa 
$straa X
;aaX Y
	rptviewerbb 
.bb 
LocalReportbb !
.bb! "

ReportPathbb" ,
=bb- .
fromRequestbb/ :
?bb; <
Requestbb= D
.bbD E
MapPathbbE L
(bbL M
RequestbbM T
.bbT U
ApplicationPathbbU d
)bbd e
+bbf g
pathbbh l
:bbm n
HostingEnvironment	bbo Å
.
bbÅ Ç
MapPath
bbÇ â
(
bbâ ä
path
bbä é
)
bbé è
;
bbè ê
	rptviewercc 
.cc 
LocalReportcc !
.cc! "
SetParameterscc" /
(cc/ 0
newcc0 3
ReportParametercc4 C
[ccC D
]ccD E
{ccF G
parametrosBasicosdd !
.dd! "

NombreSededd" ,
,dd, -
parametrosBasicosee !
.ee! "
FechaActualSistemaee" 4
,ee4 5
parametrosBasicosff !
.ff! "
LogoSedeff" *
,ff* +
parametrosBasicosgg !
.gg! "
Usuariogg" )
,gg) *
parametroNombreCajahh #
,hh# $
parametroMediosPagoii #
,ii# $ 
parametroOperacionesjj $
,jj$ %
parametroFechaDesdekk #
,kk# $
parametroFechaHastall #
}mm 
)mm 
;mm 
ReportDataSourcenn  
rptdatasourceEgresosnn 1
=nn2 3
newnn4 7
ReportDataSourcenn8 H
(nnH I
$strnnI Y
,nnY Z
egresosnn[ b
)nnb c
;nnc d
	rptvieweroo 
.oo 
LocalReportoo !
.oo! "
DataSourcesoo" -
.oo- .
Addoo. 1
(oo1 2 
rptdatasourceEgresosoo2 F
)ooF G
;ooG H
returnpp 
	rptviewerpp 
;pp 
}qq 	
publicss 
ActionResultss !
MovimientosCaja_Flujoss 1
(ss1 2
boolss2 6
esCuentass7 ?
,ss? @
intssA D
idCajassE K
,ssK L
stringssM S

nombreCajassT ^
,ss^ _
DateTimess` h

fechaDesdessi s
,sss t
DateTimessu }

fechaHasta	ss~ à
,
ssà â
bool
ssä é 
todosLosMediosPago
ssè °
,
ss° ¢
[
ss£ §
System
ss§ ™
.
ss™ ´
Web
ss´ Æ
.
ssÆ Ø
Http
ssØ ≥
.
ss≥ ¥
FromUri
ss¥ ª
]
ssª º
int
ssΩ ¿
[
ss¿ ¡
]
ss¡ ¬
idsMediosPago
ss√ –
,
ss– —
string
ss“ ÿ
nombresMediosPago
ssŸ Í
)
ssÍ Î
{tt 	
varuu 
	rptvieweruu 
=uu (
GenerarMovimientosCaja_Flujouu 8
(uu8 9
esCuentauu9 A
,uuA B
idCajauuC I
,uuI J

nombreCajauuK U
,uuU V

fechaDesdeuuW a
,uua b

fechaHastauuc m
,uum n
todosLosMediosPago	uuo Å
,
uuÅ Ç
idsMediosPago
uuÉ ê
,
uuê ë
nombresMediosPago
uuí £
,
uu£ §
true
uu• ©
)
uu© ™
;
uu™ ´
ViewBagvv 
.vv 
ReportViewervv  
=vv! "
	rptviewervv# ,
;vv, -
returnww 
Viewww 
(ww 
$strww -
)ww- .
;ww. /
}xx 	
publiczz 
ReportViewerzz (
GenerarMovimientosCaja_Flujozz 8
(zz8 9
boolzz9 =
esCuentazz> F
,zzF G
intzzH K
idCajazzL R
,zzR S
stringzzT Z

nombreCajazz[ e
,zze f
DateTimezzg o

fechaDesdezzp z
,zzz {
DateTime	zz| Ñ

fechaHasta
zzÖ è
,
zzè ê
bool
zzë ï 
todosLosMediosPago
zzñ ®
,
zz® ©
[
zz™ ´
System
zz´ ±
.
zz± ≤
Web
zz≤ µ
.
zzµ ∂
Http
zz∂ ∫
.
zz∫ ª
FromUri
zzª ¬
]
zz¬ √
int
zzƒ «
[
zz« »
]
zz» …
idsMediosPago
zz  ◊
,
zz◊ ÿ
string
zzŸ ﬂ
nombresMediosPago
zz‡ Ò
,
zzÒ Ú
bool
zzÛ ˜
fromRequest
zz¯ É
)
zzÉ Ñ
{{{ 	
var|| 
flujo|| 
=|| "
finanzaReportingLogica|| .
.||. /
Flujo||/ 4
(||4 5
esCuenta||5 =
,||= >
idCaja||? E
,||E F

fechaDesde||G Q
,||Q R

fechaHasta||S ]
,||] ^
todosLosMediosPago||_ q
,||q r
idsMediosPago	||s Ä
)
||Ä Å
;
||Å Ç
var}} 
parametrosBasicos}} !
=}}" #$
ObtenerParametrosBasicos}}$ <
(}}< =
)}}= >
;}}> ?
ReportParameter~~ 
parametroNombreCaja~~ /
=~~0 1
new~~2 5
ReportParameter~~6 E
(~~E F
$str~~F R
,~~R S

nombreCaja~~T ^
)~~^ _
;~~_ `
ReportParameter 
parametroMediosPago /
=0 1
new2 5
ReportParameter6 E
(E F
$strF R
,R S
nombresMediosPagoT e
??f h
$stri p
)p q
;q r
ReportParameter
ÄÄ !
parametroFechaDesde
ÄÄ /
=
ÄÄ0 1
new
ÄÄ2 5
ReportParameter
ÄÄ6 E
(
ÄÄE F
$str
ÄÄF R
,
ÄÄR S

fechaDesde
ÄÄT ^
.
ÄÄ^ _
ToString
ÄÄ_ g
(
ÄÄg h
)
ÄÄh i
)
ÄÄi j
;
ÄÄj k
ReportParameter
ÅÅ !
parametroFechaHasta
ÅÅ /
=
ÅÅ0 1
new
ÅÅ2 5
ReportParameter
ÅÅ6 E
(
ÅÅE F
$str
ÅÅF R
,
ÅÅR S

fechaHasta
ÅÅT ^
.
ÅÅ^ _
ToString
ÅÅ_ g
(
ÅÅg h
)
ÅÅh i
)
ÅÅi j
;
ÅÅj k
var
ÇÇ 
	rptviewer
ÇÇ 
=
ÇÇ 
new
ÇÇ 
ReportViewer
ÇÇ  ,
(
ÇÇ, -
)
ÇÇ- .
{
ÇÇ/ 0
ProcessingMode
ÇÇ1 ?
=
ÇÇ@ A
ProcessingMode
ÇÇB P
.
ÇÇP Q
Local
ÇÇQ V
,
ÇÇV W!
SizeToReportContent
ÇÇX k
=
ÇÇl m
true
ÇÇn r
,
ÇÇr s
Width
ÇÇt y
=
ÇÇz {
UnitÇÇ| Ä
.ÇÇÄ Å

PercentageÇÇÅ ã
(ÇÇã å
$numÇÇå è
)ÇÇè ê
,ÇÇê ë
HeightÇÇí ò
=ÇÇô ö
UnitÇÇõ ü
.ÇÇü †

PercentageÇÇ† ™
(ÇÇ™ ´
$numÇÇ´ Æ
)ÇÇÆ Ø
}ÇÇ∞ ±
;ÇÇ± ≤
string
ÉÉ 
path
ÉÉ 
=
ÉÉ 
$str
ÉÉ V
;
ÉÉV W
	rptviewer
ÑÑ 
.
ÑÑ 
LocalReport
ÑÑ !
.
ÑÑ! "

ReportPath
ÑÑ" ,
=
ÑÑ- .
fromRequest
ÑÑ/ :
?
ÑÑ; <
Request
ÑÑ= D
.
ÑÑD E
MapPath
ÑÑE L
(
ÑÑL M
Request
ÑÑM T
.
ÑÑT U
ApplicationPath
ÑÑU d
)
ÑÑd e
+
ÑÑf g
path
ÑÑh l
:
ÑÑm n!
HostingEnvironmentÑÑo Å
.ÑÑÅ Ç
MapPathÑÑÇ â
(ÑÑâ ä
pathÑÑä é
)ÑÑé è
;ÑÑè ê
	rptviewer
ÖÖ 
.
ÖÖ 
LocalReport
ÖÖ !
.
ÖÖ! "
SetParameters
ÖÖ" /
(
ÖÖ/ 0
new
ÖÖ0 3
ReportParameter
ÖÖ4 C
[
ÖÖC D
]
ÖÖD E
{
ÖÖF G
parametrosBasicos
ÜÜ !
.
ÜÜ! "

NombreSede
ÜÜ" ,
,
ÜÜ, -
parametrosBasicos
áá !
.
áá! " 
FechaActualSistema
áá" 4
,
áá4 5
parametrosBasicos
àà !
.
àà! "
LogoSede
àà" *
,
àà* +
parametrosBasicos
ââ !
.
ââ! "
Usuario
ââ" )
,
ââ) *!
parametroNombreCaja
ää #
,
ää# $!
parametroMediosPago
ãã #
,
ãã# $!
parametroFechaDesde
åå #
,
åå# $!
parametroFechaHasta
çç #
}
éé 
)
éé 
;
éé 
ReportDataSource
èè '
rptdatasourceResumenFlujo
èè 6
=
èè7 8
new
èè9 <
ReportDataSource
èè= M
(
èèM N
$str
èèN c
,
èèc d
new
èèe h
List
èèi m
<
èèm n
ResumenFlujo
èèn z
>
èèz {
{
èè| }
flujoèè~ É
.èèÉ Ñ
ResumenèèÑ ã
}èèå ç
)èèç é
;èèé è
ReportDataSource
êê '
rptdatasourceDetalleFlujo
êê 6
=
êê7 8
new
êê9 <
ReportDataSource
êê= M
(
êêM N
$str
êêN c
,
êêc d
flujo
êêe j
.
êêj k
Detalles
êêk s
)
êês t
;
êêt u
	rptviewer
ëë 
.
ëë 
LocalReport
ëë !
.
ëë! "
DataSources
ëë" -
.
ëë- .
Add
ëë. 1
(
ëë1 2'
rptdatasourceResumenFlujo
ëë2 K
)
ëëK L
;
ëëL M
	rptviewer
íí 
.
íí 
LocalReport
íí !
.
íí! "
DataSources
íí" -
.
íí- .
Add
íí. 1
(
íí1 2'
rptdatasourceDetalleFlujo
íí2 K
)
ííK L
;
ííL M
return
ìì 
	rptviewer
ìì 
;
ìì 
}
îî 	
}
ññ 
}óó ä
jD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Finanza\TesoreriaAjustesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class &
TesoreriaAjustesController 3
:4 5
BaseController6 D
{		 
	protected

 
readonly

 #
IAjusteTesoreria_Logica

 2
_ajusteTesoreria

3 C
;

C D
public &
TesoreriaAjustesController )
() *
)* +
:+ ,
base, 0
(0 1
)1 2
{ 	
_ajusteTesoreria 
= 
Dependencia *
.* +
Resolve+ 2
<2 3#
IAjusteTesoreria_Logica3 J
>J K
(K L
)L M
;M N
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str ,
), -
]- .
public 
void $
CorregirTiposTransaccion ,
(, -
)- .
{ 	
_ajusteTesoreria 
. >
2CorregirTipoTransaccionPagoEnNotasDeCreditoYDebito O
(O P
)P Q
;Q R
} 	
} 
} ﬁS
~D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\LibrosElectronicos\LibrosElectronicosFoxcontController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{   
public!! 

partial!! 
class!! /
#LibrosElectronicosFoxcontController!! <
:!!= >
BaseController!!? M
{"" 
	protected## 
readonly## 
IConceptoLogica## *
conceptoLogica##+ 9
;##9 :
	protected$$ 
readonly$$ 
IOperacionLogica$$ +
operacionLogica$$, ;
;$$; <
	protected%% 
readonly%% 
IActorNegocioLogica%% .
actorNegocioLogica%%/ A
;%%A B
	protected&& 
readonly&& %
ILibrosElectronicosLogica&& 4$
librosElectronicosLogica&&5 M
;&&M N
	protected'' 
readonly'' ,
 ILibrosElectronicosFoxcontLogica'' ;+
librosElectronicosFoxcontLogica''< [
;''[ \/
#LibrosElectronicosGeneradorReportes(( +
	generador((, 5
=((6 7
new((8 ;/
#LibrosElectronicosGeneradorReportes((< _
(((_ `
)((` a
;((a b
public** /
#LibrosElectronicosFoxcontController** 2
(**2 3
)**3 4
:**5 6
base**7 ;
(**; <
)**< =
{++ 	
conceptoLogica,, 
=,, 
Dependencia,, (
.,,( )
Resolve,,) 0
<,,0 1
IConceptoLogica,,1 @
>,,@ A
(,,A B
),,B C
;,,C D
operacionLogica-- 
=-- 
Dependencia-- )
.--) *
Resolve--* 1
<--1 2
IOperacionLogica--2 B
>--B C
(--C D
)--D E
;--E F
actorNegocioLogica.. 
=..  
Dependencia..! ,
..., -
Resolve..- 4
<..4 5
IActorNegocioLogica..5 H
>..H I
(..I J
)..J K
;..K L$
librosElectronicosLogica// $
=//% &
Dependencia//' 2
.//2 3
Resolve//3 :
<//: ;%
ILibrosElectronicosLogica//; T
>//T U
(//U V
)//V W
;//W X+
librosElectronicosFoxcontLogica00 +
=00, -
Dependencia00. 9
.009 :
Resolve00: A
<00A B,
 ILibrosElectronicosFoxcontLogica00B b
>00b c
(00c d
)00d e
;00e f
}11 	
public22 

JsonResult22 8
,ReporteVentaFormatoFoxcontBoletaVentaFactura22 F
(22F G
int22G J
	idPeriodo22K T
)22T U
{33 	
try44 
{55 
var66 
sede66 
=66 
ObtenerSede66 &
(66& '
)66' (
;66( )
var77 
periodo77 
=77 $
librosElectronicosLogica77 6
.776 7
ObtenerPeriodo777 E
(77E F
	idPeriodo77F O
)77O P
;77P Q
var88 
	rptviewer88 
=88 
	generador88  )
.88) *A
5GenerarReporteDeVentaFormatoFoxcontBoletaVentaFactura88* _
(88_ `
ProfileData88` k
(88k l
)88l m
.88m n
Empleado88n v
.88v w
Id88w y
,88y z
sede88{ 
,	88 Ä
periodo
88Å à
,
88à â
true
88ä é
,
88é è-
librosElectronicosFoxcontLogica
88ê Ø
,
88Ø ∞
Request
88± ∏
.
88∏ π
MapPath
88π ¿
(
88¿ ¡
Request
88¡ »
.
88» …
ApplicationPath
88… ÿ
)
88ÿ Ÿ
)
88Ÿ ⁄
;
88⁄ €
string:: 
filename:: 
;::  
string;; 
filenameContent;; &
;;;& '
filenameContent<< 
=<<  !
periodo<<" )
.<<) *
mes<<* -
+<<. /
$str<<0 3
+<<4 5
periodo<<6 =
.<<= >
anio<<> B
;<<B C
filename== 
=== 
string== !
.==! "
Format==" (
(==( )
$str==) 2
,==2 3
filenameContent==4 C
,==C D
$str==E J
)==J K
;==K L
filename>> 
=>> 
filename>> #
.>># $
Replace>>$ +
(>>+ ,
$str>>, /
,>>/ 0
$str>>1 3
)>>3 4
;>>4 5
byte@@ 
[@@ 
]@@ 
bytes@@ 
=@@ 
	rptviewer@@ (
.@@( )
LocalReport@@) 4
.@@4 5
Render@@5 ;
(@@; <
$str@@< C
,@@C D
null@@E I
,@@I J
out@@K N
string@@O U
mimeType@@V ^
,@@^ _
out@@` c
string@@d j
encoding@@k s
,@@s t
out@@u x
string@@y 
	extension
@@Ä â
,
@@â ä
out
@@ã é
string
@@è ï
[
@@ï ñ
]
@@ñ ó
	streamids
@@ò °
,
@@° ¢
out
@@£ ¶
Warning
@@ß Æ
[
@@Æ Ø
]
@@Ø ∞
warnings
@@± π
)
@@π ∫
;
@@∫ ª
ResponseBB 
.BB 
ClearHeadersBB %
(BB% &
)BB& '
;BB' (
ResponseCC 
.CC 
ClearCC 
(CC 
)CC  
;CC  !
ResponseDD 
.DD 
	AddHeaderDD "
(DD" #
$strDD# 8
,DD8 9
$strDD: Q
+DDR S
filenameDDT \
)DD\ ]
;DD] ^
ResponseEE 
.EE 
ContentTypeEE $
=EE% &
mimeTypeEE' /
;EE/ 0
ResponseFF 
.FF 
BinaryWriteFF $
(FF$ %
bytesFF% *
)FF* +
;FF+ ,
ResponseGG 
.GG 
FlushGG 
(GG 
)GG  
;GG  !
ResponseHH 
.HH 
EndHH 
(HH 
)HH 
;HH 
returnJJ 
JsonJJ 
(JJ 
$strJJ ;
)JJ; <
;JJ< =
}KK 
catchLL 
(LL 
	ExceptionLL 
eLL 
)LL 
{MM 
throwNN 
newNN 
ControllerExceptionNN -
(NN- .
$strNN. i
,NNi j
eNNk l
)NNl m
;NNm n
}OO 
}PP 	
publicRR 

JsonResultRR 7
+ReporteVentaFormatoFoxcontNotaCreditoDebitoRR E
(RRE F
intRRF I
	idPeriodoRRJ S
)RRS T
{SS 	
tryTT 
{UU 
varVV 
sedeVV 
=VV 
ObtenerSedeVV &
(VV& '
)VV' (
;VV( )
varWW 
periodoWW 
=WW $
librosElectronicosLogicaWW 6
.WW6 7
ObtenerPeriodoWW7 E
(WWE F
	idPeriodoWWF O
)WWO P
;WWP Q
varXX 
	rptviewerXX 
=XX 
	generadorXX  )
.XX) *@
4GenerarReporteDeVentaFormatoFoxcontNotaCreditoDebitoXX* ^
(XX^ _
ProfileDataXX_ j
(XXj k
)XXk l
.XXl m
EmpleadoXXm u
.XXu v
IdXXv x
,XXx y
sedeXXz ~
,XX~ 
periodo
XXÄ á
,
XXá à
true
XXâ ç
,
XXç é-
librosElectronicosFoxcontLogica
XXè Æ
,
XXÆ Ø
Request
XX∞ ∑
.
XX∑ ∏
MapPath
XX∏ ø
(
XXø ¿
Request
XX¿ «
.
XX« »
ApplicationPath
XX» ◊
)
XX◊ ÿ
)
XXÿ Ÿ
;
XXŸ ⁄
ViewBagYY 
.YY 
ReportViewerYY $
=YY% &
	rptviewerYY' 0
;YY0 1
string[[ 
filename[[ 
;[[  
string\\ 
filenameContent\\ &
;\\& '
filenameContent]] 
=]]  !
periodo]]" )
.]]) *
mes]]* -
+]]. /
$str]]0 3
+]]4 5
periodo]]6 =
.]]= >
anio]]> B
;]]B C
filename^^ 
=^^ 
string^^ !
.^^! "
Format^^" (
(^^( )
$str^^) 2
,^^2 3
filenameContent^^4 C
,^^C D
$str^^E J
)^^J K
;^^K L
filename`` 
=`` 
filename`` #
.``# $
Replace``$ +
(``+ ,
$str``, /
,``/ 0
$str``1 3
)``3 4
;``4 5
bytebb 
[bb 
]bb 
bytesbb 
=bb 
	rptviewerbb (
.bb( )
LocalReportbb) 4
.bb4 5
Renderbb5 ;
(bb; <
$strbb< C
,bbC D
nullbbE I
,bbI J
outbbK N
stringbbO U
mimeTypebbV ^
,bb^ _
outbb` c
stringbbd j
encodingbbk s
,bbs t
outbbu x
stringbby 
	extension
bbÄ â
,
bbâ ä
out
bbã é
string
bbè ï
[
bbï ñ
]
bbñ ó
	streamids
bbò °
,
bb° ¢
out
bb£ ¶
Warning
bbß Æ
[
bbÆ Ø
]
bbØ ∞
warnings
bb± π
)
bbπ ∫
;
bb∫ ª
Responsedd 
.dd 
ClearHeadersdd %
(dd% &
)dd& '
;dd' (
Responseee 
.ee 
Clearee 
(ee 
)ee  
;ee  !
Responseff 
.ff 
	AddHeaderff "
(ff" #
$strff# 8
,ff8 9
$strff: Q
+ffR S
filenameffT \
)ff\ ]
;ff] ^
Responsegg 
.gg 
ContentTypegg $
=gg% &
mimeTypegg' /
;gg/ 0
Responsehh 
.hh 
BinaryWritehh $
(hh$ %
byteshh% *
)hh* +
;hh+ ,
Responseii 
.ii 
Flushii 
(ii 
)ii  
;ii  !
Responsejj 
.jj 
Endjj 
(jj 
)jj 
;jj 
returnll 
Jsonll 
(ll 
$strll ;
)ll; <
;ll< =
}mm 
catchnn 
(nn 
	Exceptionnn 
enn 
)nn 
{oo 
throwpp 
newpp 
ControllerExceptionpp -
(pp- .
$str	pp. Ü
,
ppÜ á
e
ppà â
)
ppâ ä
;
ppä ã
}qq 
}rr 	
}ss 
}tt ê6
}D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\LibrosElectronicos\LibrosElectronicosAdsoftController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{   
public!! 

partial!! 
class!! .
"LibrosElectronicosAdsoftController!! ;
:!!< =
BaseController!!> L
{"" 
	protected## 
readonly## 
IConceptoLogica## *
conceptoLogica##+ 9
;##9 :
	protected$$ 
readonly$$ 
IOperacionLogica$$ +
operacionLogica$$, ;
;$$; <
	protected%% 
readonly%% 
IActorNegocioLogica%% .
actorNegocioLogica%%/ A
;%%A B
	protected&& 
readonly&& %
ILibrosElectronicosLogica&& 4$
librosElectronicosLogica&&5 M
;&&M N
	protected'' 
readonly'' +
ILibrosElectronicosAdsoftLogica'' :*
librosElectronicosAdsoftLogica''; Y
;''Y Z/
#LibrosElectronicosGeneradorReportes(( +
	generador((, 5
=((6 7
new((8 ;/
#LibrosElectronicosGeneradorReportes((< _
(((_ `
)((` a
;((a b
public** .
"LibrosElectronicosAdsoftController** 1
(**1 2
)**2 3
:**4 5
base**6 :
(**: ;
)**; <
{++ 	
conceptoLogica,, 
=,, 
Dependencia,, (
.,,( )
Resolve,,) 0
<,,0 1
IConceptoLogica,,1 @
>,,@ A
(,,A B
),,B C
;,,C D
operacionLogica-- 
=-- 
Dependencia-- )
.--) *
Resolve--* 1
<--1 2
IOperacionLogica--2 B
>--B C
(--C D
)--D E
;--E F
actorNegocioLogica.. 
=..  
Dependencia..! ,
..., -
Resolve..- 4
<..4 5
IActorNegocioLogica..5 H
>..H I
(..I J
)..J K
;..K L$
librosElectronicosLogica// $
=//% &
Dependencia//' 2
.//2 3
Resolve//3 :
<//: ;%
ILibrosElectronicosLogica//; T
>//T U
(//U V
)//V W
;//W X*
librosElectronicosAdsoftLogica00 *
=00+ ,
Dependencia00- 8
.008 9
Resolve009 @
<00@ A+
ILibrosElectronicosAdsoftLogica00A `
>00` a
(00a b
)00b c
;00c d
}11 	
public22 

JsonResult22 %
ReporteVentaFormatoAdsoft22 3
(223 4
int224 7
	idPeriodo228 A
)22A B
{33 	
try44 
{55 
var66 
periodo66 
=66 $
librosElectronicosLogica66 6
.666 7
ObtenerPeriodo667 E
(66E F
	idPeriodo66F O
)66O P
;66P Q
var77 
sede77 
=77 
ObtenerSede77 &
(77& '
)77' (
;77( )
var88 
	rptviewer88 
=88 
	generador88  )
.88) *.
"GenerarReporteDeVentaFormatoAdsoft88* L
(88L M
ProfileData88M X
(88X Y
)88Y Z
.88Z [
Empleado88[ c
.88c d
Id88d f
,88f g
sede88h l
,88l m
periodo88n u
,88u v
true88w {
,88{ |+
librosElectronicosAdsoftLogica	88} õ
,
88õ ú
Request
88ù §
.
88§ •
MapPath
88• ¨
(
88¨ ≠
Request
88≠ ¥
.
88¥ µ
ApplicationPath
88µ ƒ
)
88ƒ ≈
)
88≈ ∆
;
88∆ «
string:: 
filename:: 
;::  
string;; 
filenameContent;; &
;;;& '
filenameContent<< 
=<<  !
this<<" &
.<<& '
ObtenerSede<<' 2
(<<2 3
)<<3 4
.<<4 5
DocumentoIdentidad<<5 G
+<<H I
$str<<J M
+<<N O
this<<P T
.<<T U
ObtenerSede<<U `
(<<` a
)<<a b
.<<b c
Nombre<<c i
+<<j k
$str<<l o
+<<p q
periodo<<r y
.<<y z
anio<<z ~
+	<< Ä
$str
<<Å Ñ
+
<<Ö Ü
periodo
<<á é
.
<<é è
mes
<<è í
;
<<í ì
filename== 
=== 
string== !
.==! "
Format==" (
(==( )
$str==) 2
,==2 3
filenameContent==4 C
,==C D
$str==E J
)==J K
;==K L
filename>> 
=>> 
filename>> #
.>># $
Replace>>$ +
(>>+ ,
$str>>, /
,>>/ 0
$str>>1 3
)>>3 4
;>>4 5
byte@@ 
[@@ 
]@@ 
bytes@@ 
=@@ 
	rptviewer@@ (
.@@( )
LocalReport@@) 4
.@@4 5
Render@@5 ;
(@@; <
$str@@< C
,@@C D
null@@E I
,@@I J
out@@K N
string@@O U
mimeType@@V ^
,@@^ _
out@@` c
string@@d j
encoding@@k s
,@@s t
out@@u x
string@@y 
	extension
@@Ä â
,
@@â ä
out
@@ã é
string
@@è ï
[
@@ï ñ
]
@@ñ ó
	streamids
@@ò °
,
@@° ¢
out
@@£ ¶
Warning
@@ß Æ
[
@@Æ Ø
]
@@Ø ∞
warnings
@@± π
)
@@π ∫
;
@@∫ ª
ResponseBB 
.BB 
ClearHeadersBB %
(BB% &
)BB& '
;BB' (
ResponseCC 
.CC 
ClearCC 
(CC 
)CC  
;CC  !
ResponseDD 
.DD 
	AddHeaderDD "
(DD" #
$strDD# 8
,DD8 9
$strDD: Q
+DDR S
filenameDDT \
)DD\ ]
;DD] ^
ResponseEE 
.EE 
ContentTypeEE $
=EE% &
mimeTypeEE' /
;EE/ 0
ResponseFF 
.FF 
BinaryWriteFF $
(FF$ %
bytesFF% *
)FF* +
;FF+ ,
ResponseGG 
.GG 
FlushGG 
(GG 
)GG  
;GG  !
ResponseHH 
.HH 
EndHH 
(HH 
)HH 
;HH 
returnJJ 
JsonJJ 
(JJ 
$strJJ ;
)JJ; <
;JJ< =
}KK 
catchLL 
(LL 
	ExceptionLL 
eLL 
)LL 
{MM 
throwNN 
newNN 
ControllerExceptionNN -
(NN- .
$strNN. a
,NNa b
eNNc d
)NNd e
;NNe f
}OO 
}PP 	
}QQ 
}RR ¸∑
}D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\LibrosElectronicos\LibrosElectronicosConcarController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public   

partial   
class   .
"LibrosElectronicosConcarController   ;
:  < =
BaseController  > L
{!! 
	protected"" 
readonly"" 
IConceptoLogica"" *
conceptoLogica""+ 9
;""9 :
	protected## 
readonly## 
IOperacionLogica## +
operacionLogica##, ;
;##; <
	protected$$ 
readonly$$ 
IActorNegocioLogica$$ .
actorNegocioLogica$$/ A
;$$A B
	protected%% 
readonly%% %
ILibrosElectronicosLogica%% 4$
librosElectronicosLogica%%5 M
;%%M N
	protected&& 
readonly&& +
ILibrosElectronicosConcarLogica&& :*
librosElectronicosConcarLogica&&; Y
;&&Y Z
public(( .
"LibrosElectronicosConcarController(( 1
(((1 2
)((2 3
:((4 5
base((6 :
(((: ;
)((; <
{)) 	
conceptoLogica** 
=** 
Dependencia** (
.**( )
Resolve**) 0
<**0 1
IConceptoLogica**1 @
>**@ A
(**A B
)**B C
;**C D
operacionLogica++ 
=++ 
Dependencia++ )
.++) *
Resolve++* 1
<++1 2
IOperacionLogica++2 B
>++B C
(++C D
)++D E
;++E F
actorNegocioLogica,, 
=,,  
Dependencia,,! ,
.,,, -
Resolve,,- 4
<,,4 5
IActorNegocioLogica,,5 H
>,,H I
(,,I J
),,J K
;,,K L$
librosElectronicosLogica-- $
=--% &
Dependencia--' 2
.--2 3
Resolve--3 :
<--: ;%
ILibrosElectronicosLogica--; T
>--T U
(--U V
)--V W
;--W X*
librosElectronicosConcarLogica.. *
=..+ ,
Dependencia..- 8
...8 9
Resolve..9 @
<..@ A+
ILibrosElectronicosConcarLogica..A `
>..` a
(..a b
)..b c
;..c d
}// 	
public11 
ActionResult11 +
ObtenerLibrosElectronicosConcar11 ;
(11; <
int11< ?
	idPeriodo11@ I
)11I J
{22 	
try33 
{44 
var55 
sede55 
=55 
ObtenerSede55 &
(55& '
)55' (
;55( )
var66 
periodo66 
=66 $
librosElectronicosLogica66 6
.666 7
ObtenerPeriodo667 E
(66E F
	idPeriodo66F O
)66O P
;66P Q
string77 
fileNameZip77 "
=77# $
sede77% )
.77) *
DocumentoIdentidad77* <
+77= >
$str77? I
+77J K
periodo77L S
.77S T
nombre77T Z
+77[ \
$str77] c
;77c d
var99 
compressedBytes99 #
=99$ %+
GenerarLibrosElectronicosConcar99& E
(99E F
sede99F J
,99J K
periodo99L S
)99S T
;99T U
return:: 
File:: 
(:: 
compressedBytes:: +
,::+ ,
$str::- >
,::> ?
fileNameZip::@ K
)::K L
;::L M
};; 
catch<< 
(<< 
LogicaException<< "
oe<<# %
)<<% &
{== 
return>> 
new>>  
JsonHttpStatusResult>> /
(>>/ 0
Util>>0 4
.>>4 5
	ErrorJson>>5 >
(>>> ?
oe>>? A
)>>A B
,>>B C
HttpStatusCode>>D R
.>>R S
InternalServerError>>S f
)>>f g
;>>g h
}?? 
catch@@ 
(@@ 
	Exception@@ 
e@@ 
)@@ 
{AA 
returnBB 
newBB  
JsonHttpStatusResultBB /
(BB/ 0
UtilBB0 4
.BB4 5
	ErrorJsonBB5 >
(BB> ?
newBB? B
	ExceptionBBC L
(BBL M
$str	BBM Å
,
BBÅ Ç
e
BBÉ Ñ
)
BBÑ Ö
)
BBÖ Ü
,
BBÜ á
HttpStatusCode
BBà ñ
.
BBñ ó!
InternalServerError
BBó ™
)
BB™ ´
;
BB´ ¨
}CC 
}DD 	
publicFF 
byteFF 
[FF 
]FF +
GenerarLibrosElectronicosConcarFF 5
(FF5 6$
EstablecimientoComercialFF6 N
sedeFFO S
,FFS T
PeriodoFFU \
periodoFF] d
)FFd e
{GG 	
tryHH 
{II "
LibroElectronicoConcarJJ &$
librosElectronicosConcarJJ' ?
=JJ@ A*
librosElectronicosConcarLogicaJJB `
.JJ` a,
ObtenerLibrosElectronicosConcar	JJa Ä
(
JJÄ Å
periodo
JJÅ à
)
JJà â
;
JJâ ä
byteKK 
[KK 
]KK 
	fileBytesKK  
=KK! "
nullKK# '
;KK' (
byteLL 
[LL 
]LL 
compressedBytesLL &
;LL& '
usingMM 
(MM 
varMM 
	outStreamMM $
=MM% &
newMM' *
MemoryStreamMM+ 7
(MM7 8
)MM8 9
)MM9 :
{NN 
usingOO 
(OO 
varOO 
archiveOO &
=OO' (
newOO) ,

ZipArchiveOO- 7
(OO7 8
	outStreamOO8 A
,OOA B
ZipArchiveModeOOC Q
.OOQ R
CreateOOR X
,OOX Y
trueOOZ ^
)OO^ _
)OO_ `
{PP 
ZipArchiveEntryQQ '
fileInArchive03QQ( 7
=QQ8 9
nullQQ: >
;QQ> ?
varRR 
rptviewer03RR '
=RR( )'
GenerarReporteConcarConRdlcRR* E
(RRE F$
librosElectronicosConcarRRF ^
.RR^ _
RegistroCobranzasRR_ p
,RRp q
trueRRr v
,RRv w
RequestRRx 
.	RR Ä
MapPath
RRÄ á
(
RRá à
Request
RRà è
.
RRè ê
ApplicationPath
RRê ü
)
RRü †
)
RR† °
;
RR° ¢
stringSS 
filenameContent03SS 0
=SS1 2
sedeSS3 7
.SS7 8
DocumentoIdentidadSS8 J
+SSK L
$strSSM \
+SS] ^
periodoSS_ f
.SSf g
nombreSSg m
;SSm n
fileInArchive03TT '
=TT( )
archiveTT* 1
.TT1 2
CreateEntryTT2 =
(TT= >
stringTT> D
.TTD E
FormatTTE K
(TTK L
$strTTL U
,TTU V
filenameContent03TTW h
,TTh i
$strTTj o
)TTo p
.TTp q
ReplaceTTq x
(TTx y
$strTTy |
,TT| }
$str	TT~ Ä
)
TTÄ Å
,
TTÅ Ç
CompressionLevel
TTÉ ì
.
TTì î
Optimal
TTî õ
)
TTõ ú
;
TTú ù
	fileBytesUU !
=UU" #
rptviewer03UU$ /
.UU/ 0
LocalReportUU0 ;
.UU; <
RenderUU< B
(UUB C
$strUUC J
,UUJ K
nullUUL P
,UUP Q
outUUR U
stringUUV \

mimeType03UU] g
,UUg h
outUUi l
stringUUm s

encoding03UUt ~
,UU~ 
out
UUÄ É
string
UUÑ ä
extension03
UUã ñ
,
UUñ ó
out
UUò õ
string
UUú ¢
[
UU¢ £
]
UU£ §
streamids03
UU• ∞
,
UU∞ ±
out
UU≤ µ
Warning
UU∂ Ω
[
UUΩ æ
]
UUæ ø

warnings03
UU¿  
)
UU  À
;
UUÀ Ã
usingVV 
(VV 
varVV "
entryStreamVV# .
=VV/ 0
fileInArchive03VV1 @
.VV@ A
OpenVVA E
(VVE F
)VVF G
)VVG H
usingWW 
(WW 
varWW " 
fileToCompressStreamWW# 7
=WW8 9
newWW: =
MemoryStreamWW> J
(WWJ K
	fileBytesWWK T
)WWT U
)WWU V
{XX  
fileToCompressStreamYY 0
.YY0 1
CopyToYY1 7
(YY7 8
entryStreamYY8 C
)YYC D
;YYD E 
fileToCompressStreamZZ 0
.ZZ0 1
CloseZZ1 6
(ZZ6 7
)ZZ7 8
;ZZ8 9
}[[ 
ZipArchiveEntry]] '
fileInArchive05]]( 7
=]]8 9
null]]: >
;]]> ?
var^^ 
rptviewer05^^ '
=^^( )'
GenerarReporteConcarConRdlc^^* E
(^^E F$
librosElectronicosConcar^^F ^
.^^^ _
RegistroVentas^^_ m
,^^m n
true^^o s
,^^s t
Request^^u |
.^^| }
MapPath	^^} Ñ
(
^^Ñ Ö
Request
^^Ö å
.
^^å ç
ApplicationPath
^^ç ú
)
^^ú ù
)
^^ù û
;
^^û ü
string__ 
filenameContent05__ 0
=__1 2
sede__3 7
.__7 8
DocumentoIdentidad__8 J
+__K L
$str__M \
+__] ^
periodo___ f
.__f g
nombre__g m
;__m n
fileInArchive05`` '
=``( )
archive``* 1
.``1 2
CreateEntry``2 =
(``= >
string``> D
.``D E
Format``E K
(``K L
$str``L U
,``U V
filenameContent05``W h
,``h i
$str``j o
)``o p
.``p q
Replace``q x
(``x y
$str``y |
,``| }
$str	``~ Ä
)
``Ä Å
,
``Å Ç
CompressionLevel
``É ì
.
``ì î
Optimal
``î õ
)
``õ ú
;
``ú ù
	fileBytesaa !
=aa" #
rptviewer05aa$ /
.aa/ 0
LocalReportaa0 ;
.aa; <
Renderaa< B
(aaB C
$straaC J
,aaJ K
nullaaL P
,aaP Q
outaaR U
stringaaV \

mimeType05aa] g
,aag h
outaai l
stringaam s

encoding05aat ~
,aa~ 
out
aaÄ É
string
aaÑ ä
extension05
aaã ñ
,
aañ ó
out
aaò õ
string
aaú ¢
[
aa¢ £
]
aa£ §
streamids05
aa• ∞
,
aa∞ ±
out
aa≤ µ
Warning
aa∂ Ω
[
aaΩ æ
]
aaæ ø

warnings05
aa¿  
)
aa  À
;
aaÀ Ã
usingbb 
(bb 
varbb "
entryStreambb# .
=bb/ 0
fileInArchive05bb1 @
.bb@ A
OpenbbA E
(bbE F
)bbF G
)bbG H
usingcc 
(cc 
varcc " 
fileToCompressStreamcc# 7
=cc8 9
newcc: =
MemoryStreamcc> J
(ccJ K
	fileBytesccK T
)ccT U
)ccU V
{dd  
fileToCompressStreamee 0
.ee0 1
CopyToee1 7
(ee7 8
entryStreamee8 C
)eeC D
;eeD E 
fileToCompressStreamff 0
.ff0 1
Closeff1 6
(ff6 7
)ff7 8
;ff8 9
}gg 
ZipArchiveEntryii '
fileInArchive31ii( 7
=ii8 9
nullii: >
;ii> ?
varjj 
rptviewer31jj '
=jj( )'
GenerarReporteConcarConRdlcjj* E
(jjE F$
librosElectronicosConcarjjF ^
.jj^ _
RegistroNotasjj_ l
,jjl m
truejjn r
,jjr s
Requestjjt {
.jj{ |
MapPath	jj| É
(
jjÉ Ñ
Request
jjÑ ã
.
jjã å
ApplicationPath
jjå õ
)
jjõ ú
)
jjú ù
;
jjù û
stringkk 
filenameContent31kk 0
=kk1 2
sedekk3 7
.kk7 8
DocumentoIdentidadkk8 J
+kkK L
$strkkM \
+kk] ^
periodokk_ f
.kkf g
nombrekkg m
;kkm n
fileInArchive31ll '
=ll( )
archivell* 1
.ll1 2
CreateEntryll2 =
(ll= >
stringll> D
.llD E
FormatllE K
(llK L
$strllL U
,llU V
filenameContent31llW h
,llh i
$strllj o
)llo p
.llp q
Replacellq x
(llx y
$strlly |
,ll| }
$str	ll~ Ä
)
llÄ Å
,
llÅ Ç
CompressionLevel
llÉ ì
.
llì î
Optimal
llî õ
)
llõ ú
;
llú ù
	fileBytesmm !
=mm" #
rptviewer31mm$ /
.mm/ 0
LocalReportmm0 ;
.mm; <
Rendermm< B
(mmB C
$strmmC J
,mmJ K
nullmmL P
,mmP Q
outmmR U
stringmmV \

mimeType31mm] g
,mmg h
outmmi l
stringmmm s

encoding31mmt ~
,mm~ 
out
mmÄ É
string
mmÑ ä
extension31
mmã ñ
,
mmñ ó
out
mmò õ
string
mmú ¢
[
mm¢ £
]
mm£ §
streamids31
mm• ∞
,
mm∞ ±
out
mm≤ µ
Warning
mm∂ Ω
[
mmΩ æ
]
mmæ ø

warnings31
mm¿  
)
mm  À
;
mmÀ Ã
usingnn 
(nn 
varnn "
entryStreamnn# .
=nn/ 0
fileInArchive31nn1 @
.nn@ A
OpennnA E
(nnE F
)nnF G
)nnG H
usingoo 
(oo 
varoo " 
fileToCompressStreamoo# 7
=oo8 9
newoo: =
MemoryStreamoo> J
(ooJ K
	fileBytesooK T
)ooT U
)ooU V
{pp  
fileToCompressStreamqq 0
.qq0 1
CopyToqq1 7
(qq7 8
entryStreamqq8 C
)qqC D
;qqD E 
fileToCompressStreamrr 0
.rr0 1
Closerr1 6
(rr6 7
)rr7 8
;rr8 9
}ss 
ZipArchiveEntryuu '
fileInArchiveuu( 5
=uu6 7
nulluu8 <
;uu< =
varvv 
	rptviewervv %
=vv& '.
"GenerarReporteClienteConcarConRdlcvv( J
(vvJ K$
librosElectronicosConcarvvK c
.vvc d
RegistroClientesvvd t
,vvt u
truevvv z
,vvz {
Request	vv| É
.
vvÉ Ñ
MapPath
vvÑ ã
(
vvã å
Request
vvå ì
.
vvì î
ApplicationPath
vvî £
)
vv£ §
)
vv§ •
;
vv• ¶
stringww 
filenameCan03ww ,
=ww- .
sedeww/ 3
.ww3 4
DocumentoIdentidadww4 F
+wwG H
$strwwI R
+wwS T
periodowwU \
.ww\ ]
nombreww] c
;wwc d
fileInArchivexx %
=xx& '
archivexx( /
.xx/ 0
CreateEntryxx0 ;
(xx; <
stringxx< B
.xxB C
FormatxxC I
(xxI J
$strxxJ S
,xxS T
filenameCan03xxU b
,xxb c
$strxxd i
)xxi j
.xxj k
Replacexxk r
(xxr s
$strxxs v
,xxv w
$strxxx z
)xxz {
,xx{ |
CompressionLevel	xx} ç
.
xxç é
Optimal
xxé ï
)
xxï ñ
;
xxñ ó
	fileBytesyy !
=yy" #
	rptvieweryy$ -
.yy- .
LocalReportyy. 9
.yy9 :
Renderyy: @
(yy@ A
$stryyA H
,yyH I
nullyyJ N
,yyN O
outyyP S
stringyyT Z
mimeTypeyy[ c
,yyc d
outyye h
stringyyi o
encodingyyp x
,yyx y
outyyz }
string	yy~ Ñ
	extension
yyÖ é
,
yyé è
out
yyê ì
string
yyî ö
[
yyö õ
]
yyõ ú
	streamids
yyù ¶
,
yy¶ ß
out
yy® ´
Warning
yy¨ ≥
[
yy≥ ¥
]
yy¥ µ
warnings
yy∂ æ
)
yyæ ø
;
yyø ¿
usingzz 
(zz 
varzz "
entryStreamzz# .
=zz/ 0
fileInArchivezz1 >
.zz> ?
Openzz? C
(zzC D
)zzD E
)zzE F
using{{ 
({{ 
var{{ " 
fileToCompressStream{{# 7
={{8 9
new{{: =
MemoryStream{{> J
({{J K
	fileBytes{{K T
){{T U
){{U V
{||  
fileToCompressStream}} 0
.}}0 1
CopyTo}}1 7
(}}7 8
entryStream}}8 C
)}}C D
;}}D E 
fileToCompressStream~~ 0
.~~0 1
Close~~1 6
(~~6 7
)~~7 8
;~~8 9
} 
}
ÄÄ 
compressedBytes
ÅÅ #
=
ÅÅ$ %
	outStream
ÅÅ& /
.
ÅÅ/ 0
ToArray
ÅÅ0 7
(
ÅÅ7 8
)
ÅÅ8 9
;
ÅÅ9 :
}
ÇÇ 
return
ÉÉ 
compressedBytes
ÉÉ &
;
ÉÉ& '
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ 
	Exception
ÖÖ 
e
ÖÖ 
)
ÖÖ 
{
ÜÜ 
throw
áá 
new
áá !
ControllerException
áá -
(
áá- .
$str
áá. b
,
ááb c
e
áád e
)
ááe f
;
ááf g
}
àà 
}
ââ 	
public
ãã 
ReportViewer
ãã )
GenerarReporteConcarConRdlc
ãã 7
(
ãã7 8
List
ãã8 <
<
ãã< =*
DetalleAsientoContableConcar
ãã= Y
>
ããY Z
registrosConcar
ãã[ j
,
ããj k
bool
ããl p
fromRequest
ããq |
,
ãã| }
stringãã~ Ñ
requestMapPathããÖ ì
)ããì î
{
åå 	
try
çç 
{
éé 
var
èè 
	rptviewer
èè 
=
èè 
new
èè  #
ReportViewer
èè$ 0
(
èè0 1
)
èè1 2
;
èè2 3
string
êê 
path
êê 
=
êê 
$str
êê p
;
êêp q
	rptviewer
ëë 
.
ëë 
LocalReport
ëë %
.
ëë% &

ReportPath
ëë& 0
=
ëë1 2
fromRequest
ëë3 >
?
ëë? @
requestMapPath
ëëA O
+
ëëP Q
path
ëëR V
:
ëëW X 
HostingEnvironment
ëëY k
.
ëëk l
MapPath
ëël s
(
ëës t
path
ëët x
)
ëëx y
;
ëëy z
	rptviewer
íí 
.
íí 
LocalReport
íí %
.
íí% &
SetParameters
íí& 3
(
íí3 4
new
íí4 7
ReportParameter
íí8 G
[
ííG H
]
ííH I
{
ííJ K
}
ííL M
)
ííM N
;
ííN O
ReportDataSource
ìì  "
rptdatasourcereporte
ìì! 5
=
ìì6 7
new
ìì8 ;
ReportDataSource
ìì< L
(
ììL M
$str
ììM d
,
ììd e
registrosConcar
ììf u
)
ììu v
;
ììv w
	rptviewer
ïï 
.
ïï 
ProcessingMode
ïï (
=
ïï) *
ProcessingMode
ïï+ 9
.
ïï9 :
Local
ïï: ?
;
ïï? @
	rptviewer
ññ 
.
ññ 
LocalReport
ññ %
.
ññ% &
DataSources
ññ& 1
.
ññ1 2
Add
ññ2 5
(
ññ5 6"
rptdatasourcereporte
ññ6 J
)
ññJ K
;
ññK L
	rptviewer
óó 
.
óó !
SizeToReportContent
óó -
=
óó. /
true
óó0 4
;
óó4 5
	rptviewer
òò 
.
òò 
Width
òò 
=
òò  !
Unit
òò" &
.
òò& '

Percentage
òò' 1
(
òò1 2
$num
òò2 5
)
òò5 6
;
òò6 7
	rptviewer
ôô 
.
ôô 
Height
ôô  
=
ôô! "
Unit
ôô# '
.
ôô' (

Percentage
ôô( 2
(
ôô2 3
$num
ôô3 6
)
ôô6 7
;
ôô7 8
return
õõ 
	rptviewer
õõ  
;
õõ  !
}
úú 
catch
ùù 
(
ùù 
	Exception
ùù 
e
ùù 
)
ùù 
{
ûû 
throw
üü 
new
üü !
ControllerException
üü -
(
üü- .
$str
üü. O
,
üüO P
e
üüQ R
)
üüR S
;
üüS T
}
†† 
}
°° 	
public
££ 
ReportViewer
££ 0
"GenerarReporteClienteConcarConRdlc
££ >
(
££> ?
List
££? C
<
££C D#
RegistroClienteConcar
££D Y
>
££Y Z
registrosCliente
££[ k
,
££k l
bool
££m q
fromRequest
££r }
,
££} ~
string££ Ö
requestMapPath££Ü î
)££î ï
{
§§ 	
try
•• 
{
¶¶ 
var
ßß 
	rptviewer
ßß 
=
ßß 
new
ßß  #
ReportViewer
ßß$ 0
(
ßß0 1
)
ßß1 2
;
ßß2 3
string
®® 
path
®® 
=
®® 
$str
®® w
;
®®w x
	rptviewer
©© 
.
©© 
LocalReport
©© %
.
©©% &

ReportPath
©©& 0
=
©©1 2
fromRequest
©©3 >
?
©©? @
requestMapPath
©©A O
+
©©P Q
path
©©R V
:
©©W X 
HostingEnvironment
©©Y k
.
©©k l
MapPath
©©l s
(
©©s t
path
©©t x
)
©©x y
;
©©y z
	rptviewer
™™ 
.
™™ 
LocalReport
™™ %
.
™™% &
SetParameters
™™& 3
(
™™3 4
new
™™4 7
ReportParameter
™™8 G
[
™™G H
]
™™H I
{
™™J K
}
™™L M
)
™™M N
;
™™N O
ReportDataSource
´´  "
rptdatasourcereporte
´´! 5
=
´´6 7
new
´´8 ;
ReportDataSource
´´< L
(
´´L M
$str
´´M k
,
´´k l
registrosCliente
´´m }
)
´´} ~
;
´´~ 
	rptviewer
≠≠ 
.
≠≠ 
ProcessingMode
≠≠ (
=
≠≠) *
ProcessingMode
≠≠+ 9
.
≠≠9 :
Local
≠≠: ?
;
≠≠? @
	rptviewer
ÆÆ 
.
ÆÆ 
LocalReport
ÆÆ %
.
ÆÆ% &
DataSources
ÆÆ& 1
.
ÆÆ1 2
Add
ÆÆ2 5
(
ÆÆ5 6"
rptdatasourcereporte
ÆÆ6 J
)
ÆÆJ K
;
ÆÆK L
	rptviewer
ØØ 
.
ØØ !
SizeToReportContent
ØØ -
=
ØØ. /
true
ØØ0 4
;
ØØ4 5
	rptviewer
∞∞ 
.
∞∞ 
Width
∞∞ 
=
∞∞  !
Unit
∞∞" &
.
∞∞& '

Percentage
∞∞' 1
(
∞∞1 2
$num
∞∞2 5
)
∞∞5 6
;
∞∞6 7
	rptviewer
±± 
.
±± 
Height
±±  
=
±±! "
Unit
±±# '
.
±±' (

Percentage
±±( 2
(
±±2 3
$num
±±3 6
)
±±6 7
;
±±7 8
return
≥≥ 
	rptviewer
≥≥  
;
≥≥  !
}
¥¥ 
catch
µµ 
(
µµ 
	Exception
µµ 
e
µµ 
)
µµ 
{
∂∂ 
throw
∑∑ 
new
∑∑ !
ControllerException
∑∑ -
(
∑∑- .
$str
∑∑. O
,
∑∑O P
e
∑∑Q R
)
∑∑R S
;
∑∑S T
}
∏∏ 
}
ππ 	
}
ªª 
}ºº ∞
iD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Finanza\FinanzaReportesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class %
FinanzaReportesController 2
:3 4
BaseController5 C
{ 
	protected 
readonly 
IOperacionLogica +
operacionLogica, ;
;; <
	protected 
readonly 
IActorNegocioLogica .
actorNegocioLogica/ A
;A B
	protected 
readonly 
IConceptoLogica *
conceptoLogica+ 9
;9 :
	protected 
readonly "
IFinanzaReporte_Logica 1"
finanzaReportingLogica2 H
;H I
public!! %
FinanzaReportesController!! (
(!!( )
)!!) *
:!!+ ,
base!!- 1
(!!1 2
)!!2 3
{"" 	
operacionLogica## 
=## 
Dependencia## )
.##) *
Resolve##* 1
<##1 2
IOperacionLogica##2 B
>##B C
(##C D
)##D E
;##E F
actorNegocioLogica$$ 
=$$  
Dependencia$$! ,
.$$, -
Resolve$$- 4
<$$4 5
IActorNegocioLogica$$5 H
>$$H I
($$I J
)$$J K
;$$K L
conceptoLogica%% 
=%% 
Dependencia%% (
.%%( )
Resolve%%) 0
<%%0 1
IConceptoLogica%%1 @
>%%@ A
(%%A B
)%%B C
;%%C D"
finanzaReportingLogica&& "
=&&# $
Dependencia&&% 0
.&&0 1
Resolve&&1 8
<&&8 9"
IFinanzaReporte_Logica&&9 O
>&&O P
(&&P Q
)&&Q R
;&&R S
}'' 	
[)) 	
	Authorize))	 
()) 
Roles)) 
=)) 
$str)) A
)))A B
]))B C
public** 
ActionResult** 
	Principal** %
(**% &
)**& '
{++ 	
ViewBag,, 
.,, 
Data,, 
=,, "
finanzaReportingLogica,, 1
.,,1 2,
 ObtenerDatosParaReportePrincipal,,2 R
(,,R S
ProfileData,,S ^
(,,^ _
),,_ `
),,` a
;,,a b
return-- 
View-- 
(-- 
)-- 
;-- 
}.. 	
}// 
}00 ÉI
gD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Pedido\PedidoReportesController.cs
	namespace   	
Tsp  
 
.   
Sigescom   
.   
WebApplication   %
.  % &
Controllers  & 1
{!! 
public"" 

class"" $
PedidoReportesController"" )
:""* +
BaseController"", :
{## 
	protected$$ 
readonly$$ $
ICentroDeAtencion_Logica$$ 3#
centroDeAtencion_Logica$$4 K
;$$K L
	protected%% 
readonly%% 
IOperacionLogica%% +
operacionLogica%%, ;
;%%; <
	protected&& 
readonly&& 
IPedido_Logica&& )
pedidoLogica&&* 6
;&&6 7
	protected'' 
readonly'' !
IPedidoReporte_Logica'' 0!
pedidoReportingLogica''1 F
;''F G
public** $
PedidoReportesController** '
(**' (
)**( )
:*** +
base**, 0
(**0 1
)**1 2
{++ 	
operacionLogica,, 
=,, 
Dependencia,, )
.,,) *
Resolve,,* 1
<,,1 2
IOperacionLogica,,2 B
>,,B C
(,,C D
),,D E
;,,E F#
centroDeAtencion_Logica-- #
=--$ %
Dependencia--& 1
.--1 2
Resolve--2 9
<--9 :$
ICentroDeAtencion_Logica--: R
>--R S
(--S T
)--T U
;--U V
pedidoLogica.. 
=.. 
Dependencia.. &
...& '
Resolve..' .
<... /
IPedido_Logica../ =
>..= >
(..> ?
)..? @
;..@ A!
pedidoReportingLogica// !
=//" #
Dependencia//$ /
./// 0
Resolve//0 7
<//7 8!
IPedidoReporte_Logica//8 M
>//M N
(//N O
)//O P
;//P Q
}00 	
public33 
ActionResult33 
Index33 !
(33! "
)33" #
{44 	
ViewBag55 
.55 
Data55 
=55 !
pedidoReportingLogica55 0
.550 1,
 ObtenerDatosParaReportePrincipal551 Q
(55Q R
ProfileData55R ]
(55] ^
)55^ _
)55_ `
;55` a
return66 
View66 
(66 
)66 
;66 
}77 	
public99 
ActionResult99 
PedidosInvalidados99 .
(99. /
int99/ 2&
idEstablecimientoComercial993 M
,99M N
string99O U!
nombreEstablecimiento99V k
,99k l
DateTime99m u

fechaDesde	99v Ä
,
99Ä Å
DateTime
99Ç ä

fechaHasta
99ã ï
,
99ï ñ
[
99ó ò
System
99ò û
.
99û ü
Web
99ü ¢
.
99¢ £
Http
99£ ß
.
99ß ®
FromUri
99® Ø
]
99Ø ∞
int
99± ¥
[
99¥ µ
]
99µ ∂
idsPuntosVenta
99∑ ≈
,
99≈ ∆
bool
99« À!
todosLosPuntosVenta
99Ã ﬂ
,
99ﬂ ‡
string
99· Á 
nombresPuntosVenta
99Ë ˙
)
99˙ ˚
{:: 	
var;; 
	rptviewer;; 
=;; ,
 GenerarReportePedidosInvalidados;; <
(;;< =&
idEstablecimientoComercial;;= W
,;;W X!
nombreEstablecimiento;;Y n
,;;n o

fechaDesde;;p z
,;;z {

fechaHasta	;;| Ü
,
;;Ü á
idsPuntosVenta
;;à ñ
,
;;ñ ó!
todosLosPuntosVenta
;;ò ´
,
;;´ ¨ 
nombresPuntosVenta
;;≠ ø
,
;;ø ¿
true
;;¡ ≈
)
;;≈ ∆
;
;;« »
ViewBag<< 
.<< 
ReportViewer<<  
=<<  !
	rptviewer<<! *
;<<* +
return== 
View== 
(== 
$str== -
)==- .
;==. /
}>> 	
public@@ 
ReportViewer@@ ,
 GenerarReportePedidosInvalidados@@ <
(@@< =
int@@= @&
idEstablecimientoComercial@@A [
,@@[ \
string@@\ b!
nombreEstablecimiento@@c x
,@@x y
DateTime	@@y Å

fechaDesde
@@Ç å
,
@@å ç
DateTime
@@é ñ

fechaHasta
@@ó °
,
@@° ¢
[
@@£ §
System
@@§ ™
.
@@™ ´
Web
@@´ Æ
.
@@Æ Ø
Http
@@Ø ≥
.
@@≥ ¥
FromUri
@@¥ ª
]
@@ª º
int
@@Ω ¿
[
@@¿ ¡
]
@@¡ ¬
idsPuntosVenta
@@√ —
,
@@— “
bool
@@“ ÷!
todosLosPuntosVenta
@@◊ Í
,
@@Í Î
string
@@Î Ò 
nombresPuntosVenta
@@Ú Ñ
,
@@Ñ Ö
bool
@@Ü ä
fromRequest
@@ã ñ
)
@@ñ ó
{AA 	
tryBB 
{CC 
varDD 
entradasDD 
=DD 
pedidoLogicaDD +
.DD+ ,,
 ObtenerReportePedidosInvalidadosDD, L
(DDL M

fechaDesdeDDM W
,DDW X

fechaHastaDDY c
,DDc d
idsPuntosVentaDDe s
,DDs t 
todosLosPuntosVenta	DDu à
,
DDà â(
idEstablecimientoComercial
DDä §
)
DD§ •
;
DD• ¶
varEE 
parametrosBasicosEE %
=EE& '$
ObtenerParametrosBasicosEE( @
(EE@ A
)EEA B
;EEB C
ReportParameterFF  
parametroPuntosVentaFF  4
=FF5 6
newFF7 :
ReportParameterFF; J
(FFJ K
$strFFK X
,FFX Y
nombresPuntosVentaFFZ l
??FFm o
$strFFp w
)FFw x
;FFx y
ReportParameterGG *
parametroNombreEstablecimientoGG  >
=GG? @
newGGA D
ReportParameterGGE T
(GGT U
$strGGU l
,GGl m"
nombreEstablecimiento	GGn É
)
GGÉ Ñ
;
GGÑ Ö
ReportParameterHH 
parametroFechaDesdeHH  3
=HH4 5
newHH6 9
ReportParameterHH: I
(HHI J
$strHHJ V
,HHV W

fechaDesdeHHX b
.HHb c
ToStringHHc k
(HHk l
)HHl m
)HHm n
;HHn o
ReportParameterII 
parametroFechaHastaII  3
=II4 5
newII6 9
ReportParameterII: I
(III J
$strIIJ V
,IIV W

fechaHastaIIX b
.IIb c
ToStringIIc k
(IIk l
)IIl m
)IIm n
;IIn o
varKK 
	rptviewerKK 
=KK 
newKK  #
ReportViewerKK$ 0
(KK0 1
)KK1 2
{KK3 4
ProcessingModeKK5 C
=KKD E
ProcessingModeKKF T
.KKT U
LocalKKU Z
,KKZ [
SizeToReportContentKK\ o
=KKp q
trueKKr v
,KKv w
WidthKKx }
=KK~ 
Unit
KKÄ Ñ
.
KKÑ Ö

Percentage
KKÖ è
(
KKè ê
$num
KKê ì
)
KKì î
,
KKî ï
Height
KKñ ú
=
KKù û
Unit
KKü £
.
KK£ §

Percentage
KK§ Æ
(
KKÆ Ø
$num
KKØ ≤
)
KK≤ ≥
}
KK¥ µ
;
KKµ ∂
stringLL 
pathLL 
=LL 
$strLL V
;LLV W
	rptviewerNN 
.NN 
LocalReportNN %
.NN% &

ReportPathNN& 0
=NN1 2
fromRequestNN3 >
?NN? @
RequestNNA H
.NNH I
MapPathNNI P
(NNP Q
RequestNNQ X
.NNX Y
ApplicationPathNNY h
)NNh i
+NNj k
pathNNl p
:NNq r
HostingEnvironment	NNs Ö
.
NNÖ Ü
MapPath
NNÜ ç
(
NNç é
path
NNé í
)
NNí ì
;
NNì î
	rptviewerOO 
.OO 
LocalReportOO %
.OO% &
SetParametersOO& 3
(OO3 4
newOO4 7
ReportParameterOO8 G
[OOG H
]OOH I
{PP 
parametrosBasicosQQ %
.QQ% &
FechaActualSistemaQQ& 8
,QQ8 9
parametrosBasicosRR %
.RR% &
LogoSedeRR& .
,RR. /
parametrosBasicosSS %
.SS% &
UsuarioSS& -
,SS- . 
parametroPuntosVentaTT (
,TT( )*
parametroNombreEstablecimientoUU 2
,UU2 3
parametroFechaDesdeVV '
,VV' (
parametroFechaHastaWW '
}XX 
)XX 
;XX 
ReportDataSourceYY  !
rptdatasourceEntradasYY! 6
=YY7 8
newYY9 <
ReportDataSourceYY= M
(YYM N
$strYYN b
,YYb c
entradasYYd l
)YYl m
;YYm n
	rptviewerZZ 
.ZZ 
LocalReportZZ %
.ZZ% &
DataSourcesZZ& 1
.ZZ1 2
AddZZ2 5
(ZZ5 6!
rptdatasourceEntradasZZ6 K
)ZZK L
;ZZL M
return[[ 
	rptviewer[[  
;[[  !
}\\ 
catch]] 
(]] 
	Exception]] 
e]] 
)]] 
{^^ 
throw__ 
new__ 
ControllerException__ -
(__- .
$str__. T
,__T U
e__V W
)__W X
;__X Y
}aa 
}bb 	
}cc 
}dd ˙’
_D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Pedido\PedidoController.cs
	namespace   	
Tsp  
 
.   
Sigescom   
.   
WebApplication   %
.  % &
Controllers  & 1
{!! 
public"" 

class"" 
PedidoController"" !
:""" #
BaseController""$ 2
{## 
private$$ 
readonly$$ 
IConceptoLogica$$ (
conceptoLogica$$) 7
;$$7 8
	protected%% 
readonly%% 
IMailer%% "
mailer%%# )
;%%) *
	protected&& 
readonly&& "
IVentaUtilitarioLogica&& 1
	ventaUtil&&2 ;
;&&; <
	protected'' 
readonly'' 
IPdfUtil'' #
pdfUtil''$ +
;''+ ,
	protected(( 
readonly(( 
IPedido_Logica(( )
pedidoLogica((* 6
;((6 7
	protected)) 
readonly)) 
IOperacionLogica)) +
operacionLogica)), ;
;)); <
	protected** 
readonly** )
IFacturacionElectronicaLogica** 8(
facturacionElectronicaLogica**9 U
;**U V
	protected++ 
readonly++ 
IActorNegocioLogica++ .
actorNegocioLogica++/ A
;++A B
	protected,, 
readonly,, 
IMaestroLogica,, )
maestroLogica,,* 7
;,,7 8
	protected-- 
readonly-- 
IBarCodeUtil-- '
barCodeUtil--( 3
;--3 4
private.. 
readonly..  
IConfiguracionLogica.. - 
_configuracionLogica... B
;..B C
public// 
PedidoController// 
(//  
)//  !
{00 	
conceptoLogica11 
=11 
Dependencia11 (
.11( )
Resolve11) 0
<110 1
IConceptoLogica111 @
>11@ A
(11A B
)11B C
;11C D
mailer22 
=22 
Dependencia22  
.22  !
Resolve22! (
<22( )
IMailer22) 0
>220 1
(221 2
)222 3
;223 4
	ventaUtil33 
=33 
Dependencia33 #
.33# $
Resolve33$ +
<33+ ,"
IVentaUtilitarioLogica33, B
>33B C
(33C D
)33D E
;33E F
pdfUtil44 
=44 
Dependencia44 !
.44! "
Resolve44" )
<44) *
IPdfUtil44* 2
>442 3
(443 4
)444 5
;445 6
pedidoLogica55 
=55 
Dependencia55 &
.55& '
Resolve55' .
<55. /
IPedido_Logica55/ =
>55= >
(55> ?
)55? @
;55@ A
operacionLogica66 
=66 
Dependencia66 )
.66) *
Resolve66* 1
<661 2
IOperacionLogica662 B
>66B C
(66C D
)66D E
;66E F(
facturacionElectronicaLogica77 (
=77) *
Dependencia77+ 6
.776 7
Resolve777 >
<77> ?)
IFacturacionElectronicaLogica77? \
>77\ ]
(77] ^
)77^ _
;77_ `
actorNegocioLogica88 
=88  
Dependencia88! ,
.88, -
Resolve88- 4
<884 5
IActorNegocioLogica885 H
>88H I
(88I J
)88J K
;88K L
maestroLogica99 
=99 
Dependencia99 '
.99' (
Resolve99( /
<99/ 0
IMaestroLogica990 >
>99> ?
(99? @
)99@ A
;99A B
barCodeUtil:: 
=:: 
Dependencia:: %
.::% &
Resolve::& -
<::- .
IBarCodeUtil::. :
>::: ;
(::; <
)::< =
;::= > 
_configuracionLogica;;  
=;;! "
Dependencia;;# .
.;;. /
Resolve;;/ 6
<;;6 7 
IConfiguracionLogica;;7 K
>;;K L
(;;L M
);;M N
;;;N O
}== 	
public?? 
ActionResult?? 
Index?? !
(??! "
)??" #
{@@ 	
ViewBagAA 
.AA 
DataAA 
=AA 
pedidoLogicaAA '
.AA' ($
ObetenerDatosParaPedidosAA( @
(AA@ A
ProfileDataAAA L
(AAL M
)AAM N
)AAN O
;AAO P
ViewBagBB 
.BB 
FechaInicioBB 
=BB  !
DateTimeUtilBB" .
.BB. /
FechaActualBB/ :
(BB: ;
)BB; <
.BB< =
ToStringBB= E
(BBE F
$strBBF R
)BBR S
;BBS T
ViewBagCC 
.CC 
FechaFinCC 
=CC 
DateTimeUtilCC +
.CC+ ,
FechaActualCC, 7
(CC7 8
)CC8 9
.CC9 :
ToStringCC: B
(CCB C
$strCCC O
)CCO P
;CCP Q
varDD 
	modoVentaDD 
=DD 
(DD 
intDD  
)DD  !
	ModoVentaDD! *
.DD* +
VentaNormalDD+ 6
;DD6 7
ViewBagEE 
.EE 
TasaIGVEE 
=EE 
TransaccionSettingsEE 1
.EE1 2
DefaultEE2 9
.EE9 :
TasaIGVEE: A
;EEA B
ViewBagFF 
.FF 
AplicaLeyAmazoniaFF %
=FF& '
TransaccionSettingsFF( ;
.FF; <
DefaultFF< C
.FFC D
AplicaLeyAmazoniaFFD U
;FFU V
ViewBagGG 
.GG %
MostrarCodigoBarraBalanzaGG -
=GG. /
VentasSettingsGG0 >
.GG> ?
DefaultGG? F
.GGF G/
#ModoDeIngresoDeCodigoDeBarraEnVentaGGG j
==GGk m
(GGn o
intGGo r
)GGr s*
ModoIngresoCodigoBarraEnVenta	GGs ê
.
GGê ë"
CodigoBarraDeBalanza
GGë •
||
GG¶ ®
VentasSettings
GG© ∑
.
GG∑ ∏
Default
GG∏ ø
.
GGø ¿1
#ModoDeIngresoDeCodigoDeBarraEnVenta
GG¿ „
==
GG‰ Ê
(
GGÁ Ë
int
GGË Î
)
GGÎ Ï+
ModoIngresoCodigoBarraEnVenta
GGÏ â
.
GGâ ä
Ambos
GGä è
;
GGè ê
ViewBagHH 
.HH &
CursorInicialEnCodigoBarraHH .
=HH/ 0
VentasSettingsHH1 ?
.HH? @
DefaultHH@ G
.HHG H0
$CursorPorDefectoEnCodigoBarraEnVentaHHH l
==HHm o
(HHp q
intHHq t
)HHt u,
CursorInicialCodigoBarraEnVenta	HHu î
.
HHî ï#
CodigoBarraDeProducto
HHï ™
;
HH™ ´
ViewBagII 
.II "
EsVentaPorContingenciaII *
=II+ ,
	modoVentaII- 6
==II7 9
(II: ;
intII; >
)II> ?
	ModoVentaII? H
.IIH I 
VentaPorContingenciaIII ]
;II] ^
ViewBagJJ 
.JJ "
EsVentaModoCajaAlmacenJJ *
=JJ+ ,
	modoVentaJJ- 6
==JJ7 9
(JJ: ;
intJJ; >
)JJ> ?
	ModoVentaJJ? H
.JJH I 
VentaModoCajaAlmacenJJI ]
;JJ] ^
ViewBagKK 
.KK -
!PermitirRegistroDeGuiasDeRemisionKK 5
=KK6 7
VentasSettingsKK8 F
.KKF G
DefaultKKG N
.KKN O>
1PermitirRegistroDeGuiasDeRemisionEnVentaIntegrada	KKO Ä
;
KKÄ Å
ViewBagLL 
.LL ,
 PermitirRegistroConceptoServicioLL 4
=LL5 6
VentasSettingsLL7 E
.LLE F
DefaultLLF M
.LLM N,
 PermitirRegistroConceptoServicioLLN n
;LLn o
ViewBagMM 
.MM !
PermitirRegistroFleteMM )
=MM* +
AplicacionSettingsMM, >
.MM> ?
DefaultMM? F
.MMF G(
PermitirRegistroFleteEnVentaMMG c
;MMc d
ViewBagNN 
.NN !
PermitirRegistroPlacaNN )
=NN* +
VentasSettingsNN, :
.NN: ;
DefaultNN; B
.NNB C*
PermitirRegistroDePlacaEnVentaNNC a
;NNa b
ViewBagOO 
.OO 
IdClienteGenericoOO %
=OO& '
ActorSettingsOO( 5
.OO5 6
DefaultOO6 =
.OO= >
IdClienteGenericoOO> O
;OOO P
ViewBagPP 
.PP !
IdMedioDePagoEfectivoPP )
=PP* +
MaestroSettingsPP, ;
.PP; <
DefaultPP< C
.PPC D/
#IdDetalleMaestroMedioDepagoEfectivoPPD g
;PPg h
ViewBagQQ 
.QQ "
IdTipoDocumentoFacturaQQ *
=QQ+ ,
MaestroSettingsQQ- <
.QQ< =
DefaultQQ= D
.QQD E.
"IdDetalleMaestroComprobanteFacturaQQE g
;QQg h
ViewBagRR 
.RR 2
&IdTipoDocumentoCuandoClienteEsGenericoRR :
=RR; <
TransaccionSettingsRR= P
.RRP Q
DefaultRRQ X
.RRX Y2
&IdTipoDocumentoCuandoClienteEsGenericoRRY 
;	RR Ä
ViewBagSS 
.SS .
"IdTipoDocumentoPorDefectoParaVentaSS 6
=SS7 8
TransaccionSettingsSS9 L
.SSL M
DefaultSSM T
.SST U.
"IdTipoDocumentoPorDefectoParaVentaSSU w
;SSw x
ViewBagTT 
.TT #
IdTipoComprobantePedidoTT +
=TT, -
PedidoSettingsTT. <
.TT< =
DefaultTT= D
.TTD E#
IdTipoComprobantePedidoTTE \
;TT\ ]
ViewBagUU 
.UU -
!IdTipoComprobanteEmitirPorDefectoUU 5
=UU6 7
PedidoSettingsUU8 F
.UUF G
DefaultUUG N
.UUN O-
!IdTipoComprobanteEmitirPorDefectoUUO p
;UUp q
ViewBagVV 
.VV 
ImprimirPedidoVV "
=VV# $
PedidoSettingsVV% 3
.VV3 4
DefaultVV4 ;
.VV; <
ImprimirPedidoVV< J
;VVJ K
ViewBagWW 
.WW !
EsPregeneracionPedidoWW )
=WW* +
falseWW, 1
;WW1 2
ViewBagXX 
.XX 
IdOrdenAPregenerarXX &
=XX' (
$numXX) *
;XX* +
ViewBagYY 
.YY 
	WCPScriptYY 
=YY 

NeodynamicYY  *
.YY* +
SDKYY+ .
.YY. /
WebYY/ 2
.YY2 3
WebClientPrintYY3 A
.YYA B
CreateScriptYYB N
(YYN O
UrlZZ 
.ZZ 
ActionZZ 
(ZZ 
$strZZ +
,ZZ+ ,
$strZZ- @
,ZZ@ A
nullZZB F
,ZZF G
HttpContextZZH S
.ZZS T
RequestZZT [
.ZZ[ \
UrlZZ\ _
.ZZ_ `
SchemeZZ` f
)ZZf g
,ZZg h
Url[[ 
.[[ 
Action[[ 
([[ 
$str[[ &
,[[& '
$str[[( 0
,[[0 1
null[[2 6
,[[6 7
HttpContext[[8 C
.[[C D
Request[[D K
.[[K L
Url[[L O
.[[O P
Scheme[[P V
)[[V W
,[[W X
HttpContext[[Y d
.[[d e
Session[[e l
.[[l m
	SessionID[[m v
)[[v w
;[[w x
return\\ 
View\\ 
(\\ 
)\\ 
;\\ 
}]] 	
[^^ 	

ActionName^^	 
(^^ 
$str^^ )
)^^) *
]^^* +
public__ 
ActionResult__ 
Index__ !
(__! "
long__" &
idOrden__' .
)__. /
{`` 	
ViewBagaa 
.aa 
Dataaa 
=aa 
pedidoLogicaaa '
.aa' ($
ObetenerDatosParaPedidosaa( @
(aa@ A
ProfileDataaaA L
(aaL M
)aaM N
)aaN O
;aaO P
ViewBagbb 
.bb 
FechaIniciobb 
=bb  !
DateTimeUtilbb" .
.bb. /
FechaActualbb/ :
(bb: ;
)bb; <
.bb< =
ToStringbb= E
(bbE F
$strbbF R
)bbR S
;bbS T
ViewBagcc 
.cc 
FechaFincc 
=cc 
DateTimeUtilcc +
.cc+ ,
FechaActualcc, 7
(cc7 8
)cc8 9
.cc9 :
ToStringcc: B
(ccB C
$strccC O
)ccO P
;ccP Q
vardd 
	modoVentadd 
=dd 
(dd 
intdd  
)dd  !
	ModoVentadd! *
.dd* +
VentaNormaldd+ 6
;dd6 7
ViewBagee 
.ee 
TasaIGVee 
=ee 
TransaccionSettingsee 1
.ee1 2
Defaultee2 9
.ee9 :
TasaIGVee: A
;eeA B
ViewBagff 
.ff 
AplicaLeyAmazoniaff %
=ff& '
TransaccionSettingsff( ;
.ff; <
Defaultff< C
.ffC D
AplicaLeyAmazoniaffD U
;ffU V
ViewBaggg 
.gg %
MostrarCodigoBarraBalanzagg -
=gg. /
VentasSettingsgg0 >
.gg> ?
Defaultgg? F
.ggF G/
#ModoDeIngresoDeCodigoDeBarraEnVentaggG j
==ggk m
(ggn o
intggo r
)ggr s*
ModoIngresoCodigoBarraEnVenta	ggs ê
.
ggê ë"
CodigoBarraDeBalanza
ggë •
||
gg¶ ®
VentasSettings
gg© ∑
.
gg∑ ∏
Default
gg∏ ø
.
ggø ¿1
#ModoDeIngresoDeCodigoDeBarraEnVenta
gg¿ „
==
gg‰ Ê
(
ggÁ Ë
int
ggË Î
)
ggÎ Ï+
ModoIngresoCodigoBarraEnVenta
ggÏ â
.
ggâ ä
Ambos
ggä è
;
ggè ê
ViewBaghh 
.hh &
CursorInicialEnCodigoBarrahh .
=hh/ 0
VentasSettingshh1 ?
.hh? @
Defaulthh@ G
.hhG H0
$CursorPorDefectoEnCodigoBarraEnVentahhH l
==hhm o
(hhp q
inthhq t
)hht u,
CursorInicialCodigoBarraEnVenta	hhu î
.
hhî ï#
CodigoBarraDeProducto
hhï ™
;
hh™ ´
ViewBagii 
.ii "
EsVentaPorContingenciaii *
=ii+ ,
	modoVentaii- 6
==ii7 9
(ii: ;
intii; >
)ii> ?
	ModoVentaii? H
.iiH I 
VentaPorContingenciaiiI ]
;ii] ^
ViewBagjj 
.jj "
EsVentaModoCajaAlmacenjj *
=jj+ ,
	modoVentajj- 6
==jj7 9
(jj: ;
intjj; >
)jj> ?
	ModoVentajj? H
.jjH I 
VentaModoCajaAlmacenjjI ]
;jj] ^
ViewBagkk 
.kk -
!PermitirRegistroDeGuiasDeRemisionkk 5
=kk6 7
VentasSettingskk8 F
.kkF G
DefaultkkG N
.kkN O>
1PermitirRegistroDeGuiasDeRemisionEnVentaIntegrada	kkO Ä
;
kkÄ Å
ViewBagll 
.ll ,
 PermitirRegistroConceptoServicioll 4
=ll5 6
VentasSettingsll7 E
.llE F
DefaultllF M
.llM N,
 PermitirRegistroConceptoServiciollN n
;lln o
ViewBagmm 
.mm !
PermitirRegistroFletemm )
=mm* +
AplicacionSettingsmm, >
.mm> ?
Defaultmm? F
.mmF G(
PermitirRegistroFleteEnVentammG c
;mmc d
ViewBagnn 
.nn !
PermitirRegistroPlacann )
=nn* +
VentasSettingsnn, :
.nn: ;
Defaultnn; B
.nnB C*
PermitirRegistroDePlacaEnVentannC a
;nna b
ViewBagoo 
.oo 
IdClienteGenericooo %
=oo& '
ActorSettingsoo( 5
.oo5 6
Defaultoo6 =
.oo= >
IdClienteGenericooo> O
;ooO P
ViewBagpp 
.pp !
IdMedioDePagoEfectivopp )
=pp* +
MaestroSettingspp, ;
.pp; <
Defaultpp< C
.ppC D/
#IdDetalleMaestroMedioDepagoEfectivoppD g
;ppg h
ViewBagqq 
.qq "
IdTipoDocumentoFacturaqq *
=qq+ ,
MaestroSettingsqq- <
.qq< =
Defaultqq= D
.qqD E.
"IdDetalleMaestroComprobanteFacturaqqE g
;qqg h
ViewBagrr 
.rr 2
&IdTipoDocumentoCuandoClienteEsGenericorr :
=rr; <
TransaccionSettingsrr= P
.rrP Q
DefaultrrQ X
.rrX Y2
&IdTipoDocumentoCuandoClienteEsGenericorrY 
;	rr Ä
ViewBagss 
.ss .
"IdTipoDocumentoPorDefectoParaVentass 6
=ss7 8
TransaccionSettingsss9 L
.ssL M
DefaultssM T
.ssT U.
"IdTipoDocumentoPorDefectoParaVentassU w
;ssw x
ViewBagtt 
.tt #
IdTipoComprobantePedidott +
=tt, -
PedidoSettingstt. <
.tt< =
Defaulttt= D
.ttD E#
IdTipoComprobantePedidottE \
;tt\ ]
ViewBaguu 
.uu -
!IdTipoComprobanteEmitirPorDefectouu 5
=uu6 7
PedidoSettingsuu8 F
.uuF G
DefaultuuG N
.uuN O-
!IdTipoComprobanteEmitirPorDefectouuO p
;uup q
ViewBagvv 
.vv 
ImprimirPedidovv "
=vv# $
PedidoSettingsvv% 3
.vv3 4
Defaultvv4 ;
.vv; <
ImprimirPedidovv< J
;vvJ K
ViewBagww 
.ww !
EsPregeneracionPedidoww )
=ww* +
trueww, 0
;ww0 1
ViewBagxx 
.xx 
IdOrdenAPregenerarxx &
=xx' (
idOrdenxx) 0
;xx0 1
ViewBagyy 
.yy 
	WCPScriptyy 
=yy 

Neodynamicyy  *
.yy* +
SDKyy+ .
.yy. /
Webyy/ 2
.yy2 3
WebClientPrintyy3 A
.yyA B
CreateScriptyyB N
(yyN O
Urlzz 
.zz 
Actionzz 
(zz 
$strzz +
,zz+ ,
$strzz- @
,zz@ A
nullzzB F
,zzF G
HttpContextzzH S
.zzS T
RequestzzT [
.zz[ \
Urlzz\ _
.zz_ `
Schemezz` f
)zzf g
,zzg h
Url{{ 
.{{ 
Action{{ 
({{ 
$str{{ &
,{{& '
$str{{( 0
,{{0 1
null{{2 6
,{{6 7
HttpContext{{8 C
.{{C D
Request{{D K
.{{K L
Url{{L O
.{{O P
Scheme{{P V
){{V W
,{{W X
HttpContext{{Y d
.{{d e
Session{{e l
.{{l m
	SessionID{{m v
){{v w
;{{w x
return|| 
View|| 
(|| 
$str|| 
)||  
;||  !
}}} 	
public 

JsonResult 
ObtenerPedidos (
(( )
string) /
desde0 5
,5 6
string7 =
hasta> C
)C D
{
ÄÄ 	
try
ÅÅ 
{
ÇÇ 
DateTime
ÉÉ 

fechaDesde
ÉÉ #
=
ÉÉ$ %
DateTime
ÉÉ& .
.
ÉÉ. /
Parse
ÉÉ/ 4
(
ÉÉ4 5
desde
ÉÉ5 :
)
ÉÉ: ;
;
ÉÉ; <
DateTime
ÑÑ 

fechaHasta
ÑÑ #
=
ÑÑ$ %
DateTime
ÑÑ& .
.
ÑÑ. /
Parse
ÑÑ/ 4
(
ÑÑ4 5
hasta
ÑÑ5 :
+
ÑÑ; <
$str
ÑÑ= H
)
ÑÑH I
;
ÑÑI J
List
ÖÖ 
<
ÖÖ  
ResumenOrdenPedido
ÖÖ '
>
ÖÖ' (
ordenPedidos
ÖÖ) 5
=
ÖÖ6 7
pedidoLogica
ÖÖ8 D
.
ÖÖD E$
ObtenerOrdenesDePedido
ÖÖE [
(
ÖÖ[ \

fechaDesde
ÖÖ\ f
,
ÖÖf g

fechaHasta
ÖÖh r
)
ÖÖr s
;
ÖÖs t
return
ÜÜ 
Json
ÜÜ 
(
ÜÜ 
ordenPedidos
ÜÜ (
)
ÜÜ( )
;
ÜÜ) *
}
áá 
catch
àà 
(
àà 
	Exception
àà 
ex
àà 
)
àà  
{
ââ 
return
ää 
new
ää "
JsonHttpStatusResult
ää /
(
ää/ 0
Util
ää0 4
.
ää4 5
	ErrorJson
ää5 >
(
ää> ?
ex
ää? A
)
ääA B
,
ääB C
HttpStatusCode
ääD R
.
ääR S!
InternalServerError
ääS f
)
ääf g
;
ääg h
}
ãã 
}
åå 	
public
éé 

JsonResult
éé (
ObtenerParametrosDePedidos
éé 4
(
éé4 5
)
éé5 6
{
èè 	
try
êê 
{
ëë 
var
íí %
parametrosConfiguracion
íí +
=
íí, -
new
íí. 1#
ConfiguracionDePedido
íí2 G
{
ìì 
FechaActual
îî 
=
îî  !
DateTimeUtil
îî" .
.
îî. /
FechaActual
îî/ :
(
îî: ;
)
îî; <
.
îî< =
ToString
îî= E
(
îîE F
$str
îîF [
)
îî[ \
}
ïï 
;
ïï 
return
ññ 
Json
ññ 
(
ññ 
new
ññ 
{
ññ  !%
parametrosConfiguracion
ññ" 9
}
ññ: ;
)
ññ; <
;
ññ< =
}
óó 
catch
òò 
(
òò 
	Exception
òò 
ex
òò 
)
òò  
{
ôô 
return
öö 
new
öö "
JsonHttpStatusResult
öö /
(
öö/ 0
Util
öö0 4
.
öö4 5
	ErrorJson
öö5 >
(
öö> ?
ex
öö? A
)
ööA B
,
ööB C
HttpStatusCode
ööD R
.
ööR S!
InternalServerError
ööS f
)
ööf g
;
öög h
}
õõ 
}
úú 	
public
ûû 

JsonResult
ûû 
GuardarPedido
ûû '
(
ûû' (!
DatosVentaIntegrada
ûû( ;
pedido
ûû< B
)
ûûB C
{
üü 	
try
†† 
{
°° 
OperationResult
¢¢ 
result
¢¢  &
;
¢¢& '
PrinterBuilder
££ 
printerBuilder
££ -
=
££. /
new
££0 3
PrinterBuilder
££4 B
(
££B C
)
££C D
;
££D E
if
§§ 
(
§§ 
pedido
§§ 
.
§§ 
Orden
§§  
.
§§  !
Id
§§! #
>
§§$ %
$num
§§& '
)
§§' (
{
•• 
result
¶¶ 
=
¶¶ 
pedidoLogica
¶¶ )
.
¶¶) *
EditarPedido
¶¶* 6
(
¶¶6 7
pedido
¶¶7 =
,
¶¶= >
ProfileData
¶¶? J
(
¶¶J K
)
¶¶K L
)
¶¶L M
;
¶¶M N
}
ßß 
else
®® 
{
©© 
result
™™ 
=
™™ 
pedidoLogica
™™ )
.
™™) *
AgregarPedido
™™* 7
(
™™7 8
pedido
™™8 >
,
™™> ?
ProfileData
™™@ K
(
™™K L
)
™™L M
)
™™M N
;
™™N O
}
´´ 
Util
¨¨ 
.
¨¨ (
ManageIfResultIsNotSuccess
¨¨ /
(
¨¨/ 0
result
¨¨0 6
,
¨¨6 7
$str
¨¨8 Z
)
¨¨Z [
;
¨¨[ \
var
ÆÆ 
ordenPedido
ÆÆ 
=
ÆÆ  !
printerBuilder
ÆÆ" 0
.
ÆÆ0 1*
ArmarOrdenPedidoParaImprimir
ÆÆ1 M
(
ÆÆM N
(
ÆÆN O
OrdenDePedido
ÆÆO \
)
ÆÆ\ ]
result
ÆÆ] c
.
ÆÆc d
objeto
ÆÆd j
,
ÆÆj k
pedido
ÆÆl r
,
ÆÆr s
ProfileData
ÆÆt 
(ÆÆ Ä
)ÆÆÄ Å
)ÆÆÅ Ç
;ÆÆÇ É
printerBuilder
∞∞ 
.
∞∞ :
,GuardarOrdenDePedidoParaImprimirEnAplicacion
∞∞ K
(
∞∞K L
ordenPedido
∞∞L W
)
∞∞W X
;
∞∞X Y
Util
≤≤ 
.
≤≤ (
ManageIfResultIsNotSuccess
≤≤ /
(
≤≤/ 0
result
≤≤0 6
,
≤≤6 7
$str
≤≤8 V
)
≤≤V W
;
≤≤W X
return
≥≥ 
Json
≥≥ 
(
≥≥ 
new
≥≥ 
{
≥≥  !
result
≥≥" (
.
≥≥( )
code_result
≥≥) 4
,
≥≥4 5
data
≥≥6 :
=
≥≥; <
result
≥≥= C
.
≥≥C D
data
≥≥D H
,
≥≥H I 
result_description
≥≥J \
=
≥≥] ^
result
≥≥_ e
.
≥≥e f
title
≥≥f k
,
≥≥k l
IdOrden
≥≥m t
=
≥≥u v
result
≥≥w }
.
≥≥} ~
information≥≥~ â
}≥≥ä ã
)≥≥ã å
;≥≥å ç
}
¥¥ 
catch
µµ 
(
µµ 
LogicaException
µµ "
LogicException
µµ# 1
)
µµ1 2
{
∂∂ 
return
∑∑ 
new
∑∑ "
JsonHttpStatusResult
∑∑ /
(
∑∑/ 0
Util
∑∑0 4
.
∑∑4 5
	ErrorJson
∑∑5 >
(
∑∑> ?
LogicException
∑∑? M
)
∑∑M N
,
∑∑N O
HttpStatusCode
∑∑P ^
.
∑∑^ _!
InternalServerError
∑∑_ r
)
∑∑r s
;
∑∑s t
}
∏∏ 
catch
ππ 
(
ππ 
	Exception
ππ 
ex
ππ 
)
ππ  
{
∫∫ 
return
ªª 
new
ªª "
JsonHttpStatusResult
ªª /
(
ªª/ 0
Util
ªª0 4
.
ªª4 5
	ErrorJson
ªª5 >
(
ªª> ?
new
ªª? B
	Exception
ªªC L
(
ªªL M
$str
ªªM r
,
ªªr s
ex
ªªt v
)
ªªv w
)
ªªw x
,
ªªx y
HttpStatusCodeªªz à
.ªªà â#
InternalServerErrorªªâ ú
)ªªú ù
;ªªù û
}
ºº 
}
ΩΩ 	
public
øø 

JsonResult
øø 
InvalidarPedido
øø )
(
øø) *
int
øø* -
IdOrdenPedido
øø. ;
,
øø; <
string
øø= C
Observacion
øøD O
)
øøO P
{
¿¿ 	
try
¡¡ 
{
¬¬ 
OperationResult
√√ 
result
√√  &
;
√√& '
result
ƒƒ 
=
ƒƒ 
pedidoLogica
ƒƒ %
.
ƒƒ% &
InvalidarPedido
ƒƒ& 5
(
ƒƒ5 6
IdOrdenPedido
ƒƒ6 C
,
ƒƒC D
Observacion
ƒƒE P
,
ƒƒP Q
ProfileData
ƒƒR ]
(
ƒƒ] ^
)
ƒƒ^ _
)
ƒƒ_ `
;
ƒƒ` a
Util
≈≈ 
.
≈≈ (
ManageIfResultIsNotSuccess
≈≈ /
(
≈≈/ 0
result
≈≈0 6
,
≈≈6 7
$str
≈≈8 V
)
≈≈V W
;
≈≈W X
return
∆∆ 
Json
∆∆ 
(
∆∆ 
new
∆∆ 
{
∆∆  !
result
∆∆" (
.
∆∆( )
code_result
∆∆) 4
,
∆∆4 5 
result_description
∆∆6 H
=
∆∆I J
result
∆∆K Q
.
∆∆Q R
title
∆∆R W
}
∆∆X Y
)
∆∆Y Z
;
∆∆Z [
}
«« 
catch
»» 
(
»» 
	Exception
»» 
ex
»» 
)
»»  
{
…… 
return
   
new
   "
JsonHttpStatusResult
   /
(
  / 0
Util
  0 4
.
  4 5
	ErrorJson
  5 >
(
  > ?
ex
  ? A
)
  A B
,
  B C
HttpStatusCode
  D R
.
  R S!
InternalServerError
  S f
)
  f g
;
  g h
}
ÀÀ 
}
ÃÃ 	
public
ŒŒ 

JsonResult
ŒŒ %
ObtenerPedidoParaEditar
ŒŒ 1
(
ŒŒ1 2
int
ŒŒ2 5
IdOrdenPedido
ŒŒ6 C
)
ŒŒC D
{
œœ 	
try
–– 
{
—— 
var
““ 
OrdenPedido
““ 
=
““  !
pedidoLogica
““" .
.
““. /"
ObtenerOrdenDePedido
““/ C
(
““C D
IdOrdenPedido
““D Q
)
““Q R
;
““R S
List
”” 
<
”” )
Concepto_Negocio_Comercial_
”” 0
>
””0 1
	Conceptos
””2 ;
=
””< =
new
””> A
List
””B F
<
””F G)
Concepto_Negocio_Comercial_
””G b
>
””b c
(
””c d
)
””d e
;
””e f
foreach
‘‘ 
(
‘‘ 
var
‘‘ 
item
‘‘ !
in
‘‘" $
OrdenPedido
‘‘% 0
.
‘‘0 1
Orden
‘‘1 6
.
‘‘6 7
Detalles
‘‘7 ?
)
‘‘? @
{
’’ 
	Conceptos
◊◊ 
.
◊◊ 
Add
◊◊ !
(
◊◊! "
conceptoLogica
◊◊" 0
.
◊◊0 1<
.ObtenerConceptoDeNegocioComercialPorIdConcepto
◊◊1 _
(
◊◊_ `
ProfileData
◊◊` k
(
◊◊k l
)
◊◊l m
,
◊◊m n
item
◊◊o s
.
◊◊s t
Producto
◊◊t |
.
◊◊| }
Id
◊◊} 
,◊◊ Ä
true◊◊Å Ö
,◊◊Ö Ü
true◊◊á ã
)◊◊ã å
)◊◊å ç
;◊◊ç é
}
ŸŸ 
return
⁄⁄ 
Json
⁄⁄ 
(
⁄⁄ 
new
⁄⁄ 
{
⁄⁄  !
OrdenPedido
⁄⁄" -
=
⁄⁄. /
OrdenPedido
⁄⁄0 ;
,
⁄⁄; <
	Conceptos
⁄⁄= F
=
⁄⁄G H
	Conceptos
⁄⁄I R
}
⁄⁄S T
)
⁄⁄T U
;
⁄⁄U V
}
€€ 
catch
‹‹ 
(
‹‹ 
	Exception
‹‹ 
ex
‹‹ 
)
‹‹  
{
›› 
return
ﬁﬁ 
new
ﬁﬁ "
JsonHttpStatusResult
ﬁﬁ /
(
ﬁﬁ/ 0
Util
ﬁﬁ0 4
.
ﬁﬁ4 5
	ErrorJson
ﬁﬁ5 >
(
ﬁﬁ> ?
ex
ﬁﬁ? A
)
ﬁﬁA B
,
ﬁﬁB C
HttpStatusCode
ﬁﬁD R
.
ﬁﬁR S!
InternalServerError
ﬁﬁS f
)
ﬁﬁf g
;
ﬁﬁg h
}
ﬂﬂ 
}
‡‡ 	
public
„„ 

JsonResult
„„ &
ObtenerDocumentoDePedido
„„ 2
(
„„2 3
long
„„3 7
idOrdenDePedido
„„8 G
)
„„G H
{
‰‰ 	
try
ÂÂ 
{
ÊÊ 
OrdenDePedido
ÁÁ 
ordenDePedido
ÁÁ +
=
ÁÁ, -
pedidoLogica
ÁÁ. :
.
ÁÁ: ;-
ObtenerOrdenDePedidoComprobante
ÁÁ; Z
(
ÁÁZ [
idOrdenDePedido
ÁÁ[ j
)
ÁÁj k
;
ÁÁk l
var
ËË 
sede
ËË 
=
ËË 
ObtenerSede
ËË &
(
ËË& '
)
ËË' (
;
ËË( )
var
ÈÈ 

htmlString
ÈÈ 
=
ÈÈ  '
ObtenerCadenaHtmlDePedido
ÈÈ! :
(
ÈÈ: ;
ordenDePedido
ÈÈ; H
,
ÈÈH I
(
ÈÈJ K
FormatoImpresion
ÈÈK [
)
ÈÈ[ \
$num
ÈÈ\ ]
,
ÈÈ] ^
null
ÈÈ_ c
,
ÈÈc d
sede
ÈÈe i
)
ÈÈi j
;
ÈÈj k
var
ÍÍ 
	respuesta
ÍÍ 
=
ÍÍ 
new
ÍÍ  #
PedidoViewModel
ÍÍ$ 3
(
ÍÍ3 4
ordenDePedido
ÍÍ4 A
,
ÍÍA B

htmlString
ÍÍC M
)
ÍÍM N
;
ÍÍN O
return
ÎÎ 
Json
ÎÎ 
(
ÎÎ 
	respuesta
ÎÎ %
)
ÎÎ% &
;
ÎÎ& '
}
ÏÏ 
catch
ÌÌ 
(
ÌÌ 
	Exception
ÌÌ 
e
ÌÌ 
)
ÌÌ 
{
ÓÓ 
HttpContext
ÔÔ 
.
ÔÔ 
Response
ÔÔ $
.
ÔÔ$ %

StatusCode
ÔÔ% /
=
ÔÔ0 1
$num
ÔÔ2 5
;
ÔÔ5 6
return
 
Json
 
(
 
Util
  
.
  !
	ErrorJson
! *
(
* +
e
+ ,
)
, -
)
- .
;
. /
}
ÒÒ 
}
ÚÚ 	
public
ÙÙ 
PdfDocument
ÙÙ 
ObtenerPdfPedido
ÙÙ +
(
ÙÙ+ ,
OrdenDePedido
ÙÙ, 9
ordenDePedido
ÙÙ: G
,
ÙÙG H6
(EstablecimientoComercialExtendidoConLogo
ÙÙI q
sede
ÙÙr v
,
ÙÙv w
byte
ÙÙx |
[
ÙÙ| }
]
ÙÙ} ~
qrBytesÙÙ Ü
,ÙÙÜ á 
FormatoImpresionÙÙà ò
formatoÙÙô †
)ÙÙ† °
{
ıı 	
string
ˆˆ 

htmlString
ˆˆ 
=
ˆˆ '
ObtenerCadenaHtmlDePedido
ˆˆ  9
(
ˆˆ9 :
ordenDePedido
ˆˆ: G
,
ˆˆG H
formato
ˆˆI P
,
ˆˆP Q
qrBytes
ˆˆR Y
,
ˆˆY Z
sede
ˆˆ[ _
)
ˆˆ_ `
;
ˆˆ` a
return
˜˜ 
pdfUtil
˜˜ 
.
˜˜ !
ObtenerPdfDocumento
˜˜ .
(
˜˜. /

htmlString
˜˜/ 9
,
˜˜9 :
formato
˜˜; B
)
˜˜B C
;
˜˜C D
}
¯¯ 	
public
˙˙ 
string
˙˙ '
ObtenerCadenaHtmlDePedido
˙˙ /
(
˙˙/ 0
OrdenDePedido
˙˙0 =
ordenDeCotizacion
˙˙> O
,
˙˙O P
FormatoImpresion
˙˙Q a
formato
˙˙b i
,
˙˙i j
byte
˙˙k o
[
˙˙o p
]
˙˙p q
qrBytes
˙˙r y
,
˙˙y z7
(EstablecimientoComercialExtendidoConLogo˙˙{ £
sede˙˙§ ®
)˙˙® ©
{
˚˚ 	
StringBuilder
¸¸ 
sbControlHtml
¸¸ '
=
¸¸( )
new
¸¸* -
StringBuilder
¸¸. ;
(
¸¸; <
)
¸¸< =
;
¸¸= >
string
˝˝ 
result
˝˝ 
=
˝˝ 
$str
˝˝ 
;
˝˝ 
string
˛˛ 
nombreVista
˛˛ 
=
˛˛  
$str
˛˛! #
;
˛˛# $
nombreVista
ÄÄ 
=
ÄÄ 
formato
ÄÄ !
==
ÄÄ" $
FormatoImpresion
ÄÄ% 5
.
ÄÄ5 6
_80mm
ÄÄ6 ;
?
ÄÄ< =
$str
ÄÄ> S
:
ÄÄT U
$str
ÄÄV k
;
ÄÄk l
result
ÅÅ 
=
ÅÅ 
HtmlStringBuilder
ÅÅ &
.
ÅÅ& '%
RenderRazorViewToString
ÅÅ' >
(
ÅÅ> ?
nombreVista
ÅÅ? J
,
ÅÅJ K
new
ÅÅL O
DocumentoDePedido
ÅÅP a
(
ÅÅa b
ordenDeCotizacion
ÅÅb s
,
ÅÅs t
sede
ÅÅu y
,
ÅÅy z
new
ÅÅ{ ~0
!EstablecimientoComercialExtendidoÅÅ †
(ÅÅ† °!
ordenDeCotizacionÅÅ° ≤
.ÅÅ≤ ≥
TransaccionÅÅ≥ æ
(ÅÅæ ø
)ÅÅø ¿
.ÅÅ¿ ¡
Actor_negocio2ÅÅ¡ œ
.ÅÅœ –
Actor_negocio2ÅÅ– ﬁ
)ÅÅﬁ ﬂ
,ÅÅﬂ ‡
qrBytesÅÅ· Ë
,ÅÅË È"
AplicacionSettingsÅÅÍ ¸
.ÅÅ¸ ˝
DefaultÅÅ˝ Ñ
.ÅÅÑ Ö&
MostrarCabeceraVoucherÅÅÖ õ
,ÅÅõ ú
(ÅÅù û0
 ModoImpresionCaracteristicasEnumÅÅû æ
)ÅÅæ ø
VentasSettingsÅÅø Õ
.ÅÅÕ Œ
DefaultÅÅŒ ’
.ÅÅ’ ÷,
modoImpresionCaracteristicasÅÅ÷ Ú
)ÅÅÚ Û
,ÅÅÛ Ù
thisÅÅı ˘
)ÅÅ˘ ˙
;ÅÅ˙ ˚
return
ÉÉ 
result
ÉÉ 
;
ÉÉ 
}
ÑÑ 	
public
ÜÜ 

JsonResult
ÜÜ *
ObtenerHtmlDocumentoDePedido
ÜÜ 6
(
ÜÜ6 7
long
ÜÜ7 ;
idOrden
ÜÜ< C
,
ÜÜC D
int
ÜÜE H
formato
ÜÜI P
)
ÜÜP Q
{
áá 	
OrdenDePedido
àà 
ordenDePedido
àà '
=
àà( )
pedidoLogica
àà* 6
.
àà6 7-
ObtenerOrdenDePedidoComprobante
àà7 V
(
ààV W
idOrden
ààW ^
)
àà^ _
;
àà_ `
var
ââ 
sede
ââ 
=
ââ 
ObtenerSede
ââ "
(
ââ" #
)
ââ# $
;
ââ$ %
var
ää 

htmlString
ää 
=
ää '
ObtenerCadenaHtmlDePedido
ää 6
(
ää6 7
ordenDePedido
ää7 D
,
ääD E
(
ääF G
FormatoImpresion
ääG W
)
ääW X
formato
ääX _
,
ää_ `
null
ääa e
,
ääe f
sede
ääg k
)
ääk l
;
ääl m
return
ãã 
Json
ãã 
(
ãã 

htmlString
ãã "
)
ãã" #
;
ãã# $
}
åå 	
public
éé 

JsonResult
éé (
ObtenerFormatosDeImpresion
éé 4
(
éé4 5
)
éé5 6
{
èè 	
var
êê 
valoresEnum
êê 
=
êê 
Enum
êê "
.
êê" #
	GetValues
êê# ,
(
êê, -
typeof
êê- 3
(
êê3 4
FormatoImpresion
êê4 D
)
êêD E
)
êêE F
;
êêF G
List
ëë 
<
ëë $
ComboGenericoViewModel
ëë '
>
ëë' (
formatos
ëë) 1
=
ëë2 3
new
ëë4 7
List
ëë8 <
<
ëë< =$
ComboGenericoViewModel
ëë= S
>
ëëS T
(
ëëT U
)
ëëU V
;
ëëV W
foreach
íí 
(
íí 
var
íí 
item
íí 
in
íí  
valoresEnum
íí! ,
)
íí, -
{
ìì 
if
îî 
(
îî 
(
îî 
int
îî 
)
îî 
item
îî 
!=
îî  
(
îî! "
int
îî" %
)
îî% &
FormatoImpresion
îî& 6
.
îî6 7
_56mm
îî7 <
)
îî< =
formatos
ïï 
.
ïï 
Add
ïï  
(
ïï  !
new
ïï! $$
ComboGenericoViewModel
ïï% ;
(
ïï; <
(
ïï< =
int
ïï= @
)
ïï@ A
item
ïïA E
,
ïïE F
(
ïïG H
(
ïïH I
FormatoImpresion
ïïI Y
)
ïïY Z
Convert
ïïZ a
.
ïïa b
ToInt32
ïïb i
(
ïïi j
item
ïïj n
)
ïïn o
)
ïïo p
.
ïïp q
ToString
ïïq y
(
ïïy z
)
ïïz {
)
ïï{ |
)
ïï| }
;
ïï} ~
}
ññ 
return
óó 
Json
óó 
(
óó 
formatos
óó  
)
óó  !
;
óó! "
}
òò 	
public
õõ 

JsonResult
õõ &
ObtenerTipoDeComprobante
õõ 2
(
õõ2 3
int
õõ3 6!
idTipoDeComprobante
õõ7 J
)
õõJ K
{
úú 	
try
ùù 
{
ûû 
TipoDeComprobante
üü !
tipoDeComprobante
üü" 3
=
üü4 5"
_configuracionLogica
üü6 J
.
üüJ K&
ObtenerTipoDeComprobante
üüK c
(
üüc d!
idTipoDeComprobante
üüd w
)
üüw x
;
üüx y.
 RegistroTipoComprobanteViewModel
†† 0(
tipoDeComprobanteViewModel
††1 K
=
††L M
new
††N Q.
 RegistroTipoComprobanteViewModel
††R r
(
††r s 
tipoDeComprobante††s Ñ
)††Ñ Ö
;††Ö Ü
return
°° 
Json
°° 
(
°° (
tipoDeComprobanteViewModel
°° 6
)
°°6 7
;
°°7 8
}
¢¢ 
catch
££ 
(
££ 
	Exception
££ 
e
££ 
)
££ 
{
§§ 
return
•• 
Json
•• 
(
•• 
Util
••  
.
••  !
	ErrorJson
••! *
(
••* +
e
••+ ,
)
••, -
)
••- .
;
••. /
}
¶¶ 
}
ßß 	
public
™™ 
void
™™ 
	PrintFile
™™ 
(
™™ 
long
™™ "
idOperacion
™™# .
,
™™. /
int
™™0 3
tipoOperacion
™™4 A
)
™™A B
{
´´ 	
PrinterBuilder
¨¨ 
printerBuilder
¨¨ )
=
¨¨* +
new
¨¨, /
PrinterBuilder
¨¨0 >
(
¨¨> ?
)
¨¨? @
;
¨¨@ A6
(EstablecimientoComercialExtendidoConLogo
≠≠ 4
sede
≠≠5 9
=
≠≠: ;
ObtenerSede
≠≠< G
(
≠≠G H
)
≠≠H I
;
≠≠I J
printerBuilder
ÆÆ 
.
ÆÆ 
ImprimirOperacion
ÆÆ ,
(
ÆÆ, -
idOperacion
ÆÆ- 8
,
ÆÆ8 9
tipoOperacion
ÆÆ: G
,
ÆÆG H
sede
ÆÆI M
,
ÆÆM N
this
ÆÆO S
,
ÆÆS T
pedidoLogica
ÆÆU a
,
ÆÆa b
operacionLogica
ÆÆc r
,
ÆÆr s!
actorNegocioLogicaÆÆt Ü
,ÆÆÜ á
maestroLogicaÆÆà ï
,ÆÆï ñ,
facturacionElectronicaLogicaÆÆó ≥
,ÆÆ≥ ¥
barCodeUtilÆÆµ ¿
,ÆÆ¿ ¡
pdfUtilÆÆ¬ …
)ÆÆ…  
;ÆÆ  À
}
ØØ 	
public
≥≥ 

JsonResult
≥≥ 
ConfirmarPedido
≥≥ )
(
≥≥) *!
DatosVentaIntegrada
≥≥* =
pedido
≥≥> D
)
≥≥D E
{
¥¥ 	
try
µµ 
{
∂∂ 
PrinterBuilder
∑∑ 
printerBuilder
∑∑ -
=
∑∑. /
new
∑∑0 3
PrinterBuilder
∑∑4 B
(
∑∑B C
)
∑∑C D
;
∑∑D E
OperationResult
∏∏ 
result
∏∏  &
=
∏∏' (
pedidoLogica
∏∏) 5
.
∏∏5 6
ConfirmarPedido
∏∏6 E
(
∏∏E F
ModoOperacionEnum
∏∏F W
.
∏∏W X
PorMostrador
∏∏X d
,
∏∏d e
ProfileData
∏∏f q
(
∏∏q r
)
∏∏r s
,
∏∏s t
pedido
∏∏u {
)
∏∏{ |
;
∏∏| }
Util
ππ 
.
ππ (
ManageIfResultIsNotSuccess
ππ /
(
ππ/ 0
result
ππ0 6
,
ππ6 7
$str
ππ8 ]
)
ππ] ^
;
ππ^ _
var
ªª 

ordenVenta
ªª 
=
ªª  
printerBuilder
ªª! /
.
ªª/ 0)
ArmarOrdenVentaParaImprimir
ªª0 K
(
ªªK L
(
ªªL M
OrdenDeVenta
ªªM Y
)
ªªY Z
result
ªªZ `
.
ªª` a
objeto
ªªa g
,
ªªg h
pedido
ªªi o
,
ªªo p
ProfileData
ªªq |
(
ªª| }
)
ªª} ~
)
ªª~ 
;ªª Ä
printerBuilder
ΩΩ 
.
ΩΩ 9
+GuardarOrdenDeVentaParaImprimirEnAplicacion
ΩΩ J
(
ΩΩJ K

ordenVenta
ΩΩK U
)
ΩΩU V
;
ΩΩV W
return
ææ 
Json
ææ 
(
ææ 
new
ææ 
{
ææ  !
result
ææ" (
.
ææ( )
code_result
ææ) 4
,
ææ4 5
data
ææ6 :
=
ææ; <
result
ææ= C
.
ææC D
data
ææD H
,
ææH I 
result_description
ææJ \
=
ææ] ^
result
ææ_ e
.
ææe f
title
ææf k
,
ææk l
IdOrden
ææm t
=
ææu v
result
ææw }
.
ææ} ~
informationææ~ â
}ææä ã
)ææã å
;ææå ç
}
øø 
catch
¿¿ 
(
¿¿ 
LogicaException
¿¿ "
le
¿¿# %
)
¿¿% &
{
¡¡ 
return
¬¬ 
new
¬¬ "
JsonHttpStatusResult
¬¬ /
(
¬¬/ 0
Util
¬¬0 4
.
¬¬4 5
	ErrorJson
¬¬5 >
(
¬¬> ?
le
¬¬? A
)
¬¬A B
,
¬¬B C
HttpStatusCode
¬¬D R
.
¬¬R S!
InternalServerError
¬¬S f
)
¬¬f g
;
¬¬g h
}
√√ 
catch
ƒƒ 
(
ƒƒ 
	Exception
ƒƒ 
e
ƒƒ 
)
ƒƒ 
{
≈≈ 
return
∆∆ 
new
∆∆ "
JsonHttpStatusResult
∆∆ /
(
∆∆/ 0
Util
∆∆0 4
.
∆∆4 5
	ErrorJson
∆∆5 >
(
∆∆> ?
new
∆∆? B
	Exception
∆∆C L
(
∆∆L M
$str
∆∆M q
,
∆∆q r
e
∆∆s t
)
∆∆t u
)
∆∆u v
,
∆∆v w
HttpStatusCode∆∆x Ü
.∆∆Ü á#
InternalServerError∆∆á ö
)∆∆ö õ
;∆∆õ ú
}
«« 
}
»» 	
}
ÀÀ 
}ÃÃ ü¿
oD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Venta\VentaReportes_PorGruposController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class -
!VentaReportes_PorGruposController :
:; <
BaseController= K
{ 
	protected 
readonly 
IOperacionLogica +
operacionLogica, ;
;; <
	protected 
readonly 
IActorNegocioLogica .
actorNegocioLogica/ A
;A B
	protected 
readonly 
IConceptoLogica *
conceptoLogica+ 9
;9 :
	protected 
readonly  
IVentaReporte_Logica /
ventaReporte_Logica0 C
;C D
	protected 
readonly $
ICentroDeAtencion_Logica 3#
centroDeAtencion_Logica4 K
;K L
public -
!VentaReportes_PorGruposController 0
(0 1
)1 2
:3 4
base5 9
(9 :
): ;
{   	
operacionLogica!! 
=!! 
Dependencia!! )
.!!) *
Resolve!!* 1
<!!1 2
IOperacionLogica!!2 B
>!!B C
(!!C D
)!!D E
;!!E F
actorNegocioLogica"" 
=""  
Dependencia""! ,
."", -
Resolve""- 4
<""4 5
IActorNegocioLogica""5 H
>""H I
(""I J
)""J K
;""K L
conceptoLogica## 
=## 
Dependencia## (
.##( )
Resolve##) 0
<##0 1
IConceptoLogica##1 @
>##@ A
(##A B
)##B C
;##C D
ventaReporte_Logica$$ 
=$$  !
Dependencia$$" -
.$$- .
Resolve$$. 5
<$$5 6 
IVentaReporte_Logica$$6 J
>$$J K
($$K L
)$$L M
;$$M N#
centroDeAtencion_Logica%% #
=%%$ %
Dependencia%%& 1
.%%1 2
Resolve%%2 9
<%%9 :$
ICentroDeAtencion_Logica%%: R
>%%R S
(%%S T
)%%T U
;%%U V
}&& 	
public(( 
ActionResult(( -
!PorGrupos_VentasPorFamiliasGrupos(( =
(((= >
int((> A
idPuntoVenta((B N
,((N O
string((P V
nombrePuntoVenta((W g
,((g h
string((i o"
nombreEstablecimiento	((p Ö
,
((Ö Ü
DateTime
((á è

fechaDesde
((ê ö
,
((ö õ
DateTime
((ú §

fechaHasta
((• Ø
,
((Ø ∞
bool
((± µ
todasLasFamilias
((∂ ∆
,
((∆ «
[
((» …
System
((… œ
.
((œ –
Web
((– ”
.
((” ‘
Http
((‘ ÿ
.
((ÿ Ÿ
FromUri
((Ÿ ‡
]
((‡ ·
int
((‚ Â
[
((Â Ê
]
((Ê Á
idsFamilias
((Ë Û
,
((Û Ù
string
((ı ˚
nombresFamilias
((¸ ã
,
((ã å
bool
((ç ë
todosLosGrupos
((í †
,
((† °
[
((¢ £
System
((£ ©
.
((© ™
Web
((™ ≠
.
((≠ Æ
Http
((Æ ≤
.
((≤ ≥
FromUri
((≥ ∫
]
((∫ ª
int
((º ø
[
((ø ¿
]
((¿ ¡
	idsGrupos
((¬ À
,
((À Ã
string
((Õ ”
nombresGrupos
((‘ ·
)
((· ‚
{)) 	
var** 
	rptviewer** 
=** 4
(GenerarPorGrupos_VentasPorFamiliasGrupos** D
(**D E
idPuntoVenta**E Q
,**Q R
nombrePuntoVenta**S c
,**c d!
nombreEstablecimiento**e z
,**z {

fechaDesde	**| Ü
,
**Ü á

fechaHasta
**à í
,
**í ì
todasLasFamilias
**î §
,
**§ •
idsFamilias
**¶ ±
,
**± ≤
nombresFamilias
**≥ ¬
,
**¬ √
todosLosGrupos
**ƒ “
,
**“ ”
	idsGrupos
**‘ ›
,
**› ﬁ
nombresGrupos
**ﬂ Ï
,
**Ï Ì
true
**Ó Ú
)
**Ú Û
;
**Û Ù
ViewBag++ 
.++ 
ReportViewer++  
=++! "
	rptviewer++# ,
;++, -
return,, 
View,, 
(,, 
$str,, -
),,- .
;,,. /
}-- 	
public.. 
ReportViewer.. 4
(GenerarPorGrupos_VentasPorFamiliasGrupos.. D
(..D E
int..E H
idPuntoVenta..I U
,..U V
string..W ]
nombrePuntoVenta..^ n
,..n o
string..p v"
nombreEstablecimiento	..w å
,
..å ç
DateTime
..é ñ

fechaDesde
..ó °
,
..° ¢
DateTime
..£ ´

fechaHasta
..¨ ∂
,
..∂ ∑
bool
..∏ º
todasLasFamilias
..Ω Õ
,
..Õ Œ
[
..œ –
System
..– ÷
.
..÷ ◊
Web
..◊ ⁄
.
..⁄ €
Http
..€ ﬂ
.
..ﬂ ‡
FromUri
..‡ Á
]
..Á Ë
int
..È Ï
[
..Ï Ì
]
..Ì Ó
idsFamilias
..Ô ˙
,
..˙ ˚
string
..¸ Ç
nombresFamilias
..É í
,
..í ì
bool
..î ò
todosLosGrupos
..ô ß
,
..ß ®
[
..© ™
System
..™ ∞
.
..∞ ±
Web
..± ¥
.
..¥ µ
Http
..µ π
.
..π ∫
FromUri
..∫ ¡
]
..¡ ¬
int
..√ ∆
[
..∆ «
]
..« »
	idsGrupos
..… “
,
..“ ”
string
..‘ ⁄
nombresGrupos
..€ Ë
,
..Ë È
bool
..Í Ó
fromRequest
..Ô ˙
)
..˙ ˚
{// 	
List00 
<00 !
OperacionFamiliaGrupo00 &
>00& '#
ventasPorFamiliasGrupos00( ?
=00@ A
ventaReporte_Logica00B U
.00U V*
ObtenerVentasPorFamiliasGrupos00V t
(00t u
idPuntoVenta	00u Å
,
00Å Ç

fechaDesde
00É ç
,
00ç é

fechaHasta
00è ô
,
00ô ö
todasLasFamilias
00õ ´
,
00´ ¨
idsFamilias
00≠ ∏
,
00∏ π
todosLosGrupos
00∫ »
,
00» …
	idsGrupos
00  ”
)
00” ‘
;
00‘ ’
var11 
parametrosBasicos11 !
=11" #$
ObtenerParametrosBasicos11$ <
(11< =
)11= >
;11> ?
ReportParameter22 %
parametroNombrePuntoVenta22 5
=226 7
new228 ;
ReportParameter22< K
(22K L
$str22L ^
,22^ _
nombrePuntoVenta22` p
)22p q
;22q r
ReportParameter33 *
parametroNombreEstablecimiento33 :
=33; <
new33= @
ReportParameter33A P
(33P Q
$str33Q h
,33h i!
nombreEstablecimiento33j 
)	33 Ä
;
33Ä Å
ReportParameter44 
parametroFechaDesde44 /
=440 1
new442 5
ReportParameter446 E
(44E F
$str44F R
,44R S

fechaDesde44T ^
.44^ _
ToString44_ g
(44g h
)44h i
)44i j
;44j k
ReportParameter55 
parametroFechaHasta55 /
=550 1
new552 5
ReportParameter556 E
(55E F
$str55F R
,55R S

fechaHasta55T ^
.55^ _
ToString55_ g
(55g h
)55h i
)55i j
;55j k
var66 
	rptviewer66 
=66 
new66 
ReportViewer66  ,
(66, -
)66- .
{66/ 0
ProcessingMode661 ?
=66@ A
ProcessingMode66B P
.66P Q
Local66Q V
,66V W
SizeToReportContent66X k
=66l m
true66n r
,66r s
Width66t y
=66z {
Unit	66| Ä
.
66Ä Å

Percentage
66Å ã
(
66ã å
$num
66å è
)
66è ê
,
66ê ë
Height
66í ò
=
66ô ö
Unit
66õ ü
.
66ü †

Percentage
66† ™
(
66™ ´
$num
66´ Æ
)
66Æ Ø
}
66∞ ±
;
66± ≤
string77 
path77 
=77 
$str77 `
;77` a
	rptviewer88 
.88 
LocalReport88 !
.88! "

ReportPath88" ,
=88- .
fromRequest88/ :
?88; <
Request88= D
.88D E
MapPath88E L
(88L M
Request88M T
.88T U
ApplicationPath88U d
)88d e
+88f g
path88h l
:88m n
HostingEnvironment	88o Å
.
88Å Ç
MapPath
88Ç â
(
88â ä
path
88ä é
)
88é è
;
88è ê
	rptviewer99 
.99 
LocalReport99 !
.99! "
SetParameters99" /
(99/ 0
new990 3
ReportParameter994 C
[99C D
]99D E
{99F G
parametrosBasicos:: !
.::! "

NombreSede::" ,
,::, -
parametrosBasicos;; !
.;;! "
FechaActualSistema;;" 4
,;;4 5
parametrosBasicos<< !
.<<! "
LogoSede<<" *
,<<* +
parametrosBasicos== !
.==! "
Usuario==" )
,==) *%
parametroNombrePuntoVenta>> )
,>>) **
parametroNombreEstablecimiento?? .
,??. /
parametroFechaDesde@@ #
,@@# $
parametroFechaHastaAA #
,AA# $
}BB 
)BB 
;BB 
ReportDataSourceCC #
rptdatasourceFacturadasCC 4
=CC5 6
newCC7 :
ReportDataSourceCC; K
(CCK L
$strCCL l
,CCl m$
ventasPorFamiliasGrupos	CCn Ö
)
CCÖ Ü
;
CCÜ á
	rptviewerDD 
.DD 
LocalReportDD !
.DD! "
DataSourcesDD" -
.DD- .
AddDD. 1
(DD1 2#
rptdatasourceFacturadasDD2 I
)DDI J
;DDJ K
returnEE 
	rptviewerEE 
;EE 
}FF 	
publicHH 
ActionResultHH %
PorGrupos_VentasPorGruposHH 5
(HH5 6
intHH6 9
idPuntoVentaHH: F
,HHF G
stringHHH N
nombrePuntoVentaHHO _
,HH_ `
stringHHa g!
nombreEstablecimientoHHh }
,HH} ~
DateTime	HH á

fechaDesde
HHà í
,
HHí ì
DateTime
HHî ú

fechaHasta
HHù ß
,
HHß ®
bool
HH© ≠
todosLosGrupos
HHÆ º
,
HHº Ω
[
HHæ ø
System
HHø ≈
.
HH≈ ∆
Web
HH∆ …
.
HH…  
Http
HH  Œ
.
HHŒ œ
FromUri
HHœ ÷
]
HH÷ ◊
int
HHÿ €
[
HH€ ‹
]
HH‹ ›
	idsGrupos
HHﬁ Á
,
HHÁ Ë
string
HHÈ Ô
nombresGrupos
HH ˝
)
HH˝ ˛
{II 	
varJJ 
	rptviewerJJ 
=JJ ,
 GenerarPorGrupos_VentasPorGruposJJ <
(JJ< =
idPuntoVentaJJ= I
,JJI J
nombrePuntoVentaJJK [
,JJ[ \!
nombreEstablecimientoJJ] r
,JJr s

fechaDesdeJJt ~
,JJ~ 

fechaHasta
JJÄ ä
,
JJä ã
todosLosGrupos
JJå ö
,
JJö õ
	idsGrupos
JJú •
,
JJ• ¶
nombresGrupos
JJß ¥
,
JJ¥ µ
true
JJ∂ ∫
)
JJ∫ ª
;
JJª º
ViewBagKK 
.KK 
ReportViewerKK  
=KK! "
	rptviewerKK# ,
;KK, -
returnLL 
ViewLL 
(LL 
$strLL -
)LL- .
;LL. /
}MM 	
publicNN 
ReportViewerNN ,
 GenerarPorGrupos_VentasPorGruposNN <
(NN< =
intNN= @
idPuntoVentaNNA M
,NNM N
stringNNO U
nombrePuntoVentaNNV f
,NNf g
stringNNh n"
nombreEstablecimiento	NNo Ñ
,
NNÑ Ö
DateTime
NNÜ é

fechaDesde
NNè ô
,
NNô ö
DateTime
NNõ £

fechaHasta
NN§ Æ
,
NNÆ Ø
bool
NN∞ ¥
todosLosGrupos
NNµ √
,
NN√ ƒ
[
NN≈ ∆
System
NN∆ Ã
.
NNÃ Õ
Web
NNÕ –
.
NN– —
Http
NN— ’
.
NN’ ÷
FromUri
NN÷ ›
]
NN› ﬁ
int
NNﬂ ‚
[
NN‚ „
]
NN„ ‰
	idsGrupos
NNÂ Ó
,
NNÓ Ô
string
NN ˆ
nombresGrupos
NN˜ Ñ
,
NNÑ Ö
bool
NNÜ ä
fromRequest
NNã ñ
)
NNñ ó
{OO 	
ListPP 
<PP 
OperacionGrupoPP 
>PP  
ventasPorGruposPP! 0
=PP1 2
ventaReporte_LogicaPP3 F
.PPF G"
ObtenerVentasPorGruposPPG ]
(PP] ^
idPuntoVentaPP^ j
,PPj k

fechaDesdePPl v
,PPv w

fechaHasta	PPx Ç
,
PPÇ É
todosLosGrupos
PPÑ í
,
PPí ì
	idsGrupos
PPî ù
)
PPù û
;
PPû ü
varQQ 
parametrosBasicosQQ !
=QQ" #$
ObtenerParametrosBasicosQQ$ <
(QQ< =
)QQ= >
;QQ> ?
ReportParameterRR %
parametroNombrePuntoVentaRR 5
=RR6 7
newRR8 ;
ReportParameterRR< K
(RRK L
$strRRL ^
,RR^ _
nombrePuntoVentaRR` p
)RRp q
;RRq r
ReportParameterSS *
parametroNombreEstablecimientoSS :
=SS; <
newSS= @
ReportParameterSSA P
(SSP Q
$strSSQ h
,SSh i!
nombreEstablecimientoSSj 
)	SS Ä
;
SSÄ Å
ReportParameterTT 
parametroFechaDesdeTT /
=TT0 1
newTT2 5
ReportParameterTT6 E
(TTE F
$strTTF R
,TTR S

fechaDesdeTTT ^
.TT^ _
ToStringTT_ g
(TTg h
)TTh i
)TTi j
;TTj k
ReportParameterUU 
parametroFechaHastaUU /
=UU0 1
newUU2 5
ReportParameterUU6 E
(UUE F
$strUUF R
,UUR S

fechaHastaUUT ^
.UU^ _
ToStringUU_ g
(UUg h
)UUh i
)UUi j
;UUj k
ReportParameterVV "
parametroNombresGruposVV 2
=VV3 4
newVV5 8
ReportParameterVV9 H
(VVH I
$strVVI X
,VVX Y
nombresGruposVVZ g
??VVh j
$strVVk r
)VVr s
;VVs t
varWW 
	rptviewerWW 
=WW 
newWW 
ReportViewerWW  ,
(WW, -
)WW- .
{WW/ 0
ProcessingModeWW1 ?
=WW@ A
ProcessingModeWWB P
.WWP Q
LocalWWQ V
,WWV W
SizeToReportContentWWX k
=WWl m
trueWWn r
,WWr s
WidthWWt y
=WWz {
Unit	WW| Ä
.
WWÄ Å

Percentage
WWÅ ã
(
WWã å
$num
WWå è
)
WWè ê
,
WWê ë
Height
WWí ò
=
WWô ö
Unit
WWõ ü
.
WWü †

Percentage
WW† ™
(
WW™ ´
$num
WW´ Æ
)
WWÆ Ø
}
WW∞ ±
;
WW± ≤
stringXX 
pathXX 
=XX 
$strXX X
;XXX Y
	rptviewerYY 
.YY 
LocalReportYY !
.YY! "

ReportPathYY" ,
=YY- .
fromRequestYY/ :
?YY; <
RequestYY= D
.YYD E
MapPathYYE L
(YYL M
RequestYYM T
.YYT U
ApplicationPathYYU d
)YYd e
+YYf g
pathYYh l
:YYm n
HostingEnvironment	YYo Å
.
YYÅ Ç
MapPath
YYÇ â
(
YYâ ä
path
YYä é
)
YYé è
;
YYè ê
	rptviewerZZ 
.ZZ 
LocalReportZZ !
.ZZ! "
SetParametersZZ" /
(ZZ/ 0
newZZ0 3
ReportParameterZZ4 C
[ZZC D
]ZZD E
{ZZF G
parametrosBasicos[[ !
.[[! "

NombreSede[[" ,
,[[, -
parametrosBasicos\\ !
.\\! "
FechaActualSistema\\" 4
,\\4 5
parametrosBasicos]] !
.]]! "
LogoSede]]" *
,]]* +
parametrosBasicos^^ !
.^^! "
Usuario^^" )
,^^) *%
parametroNombrePuntoVenta__ )
,__) *
parametroFechaDesde`` #
,``# $*
parametroNombreEstablecimientoaa .
,aa. /
parametroFechaHastabb #
,bb# $"
parametroNombresGruposcc &
}dd 
)dd 
;dd 
ReportDataSourceee #
rptdatasourceFacturadasee 4
=ee5 6
newee7 :
ReportDataSourceee; K
(eeK L
$streeL d
,eed e
ventasPorGruposeef u
)eeu v
;eev w
	rptviewerff 
.ff 
LocalReportff !
.ff! "
DataSourcesff" -
.ff- .
Addff. 1
(ff1 2#
rptdatasourceFacturadasff2 I
)ffI J
;ffJ K
returngg 
	rptviewergg 
;gg 
}hh 	
publicjj 
ActionResultjj -
!PorGrupos_VentasPorGrupoDetalladojj =
(jj= >
intjj> A
idPuntoVentajjB N
,jjN O
stringjjP V
nombrePuntoVentajjW g
,jjg h
stringjji o"
nombreEstablecimiento	jjp Ö
,
jjÖ Ü
DateTime
jjá è

fechaDesde
jjê ö
,
jjö õ
DateTime
jjú §

fechaHasta
jj• Ø
,
jjØ ∞
int
jj± ¥
idGrupo
jjµ º
,
jjº Ω
string
jjæ ƒ
nombreGrupo
jj≈ –
)
jj– —
{kk 	
varll 
	rptviewerll 
=ll 4
(GenerarPorGrupos_VentasPorGrupoDetalladoll D
(llD E
idPuntoVentallE Q
,llQ R
nombrePuntoVentallS c
,llc d!
nombreEstablecimientolle z
,llz {

fechaDesde	ll| Ü
,
llÜ á

fechaHasta
llà í
,
llí ì
idGrupo
llî õ
,
llõ ú
nombreGrupo
llù ®
,
ll® ©
true
ll™ Æ
)
llÆ Ø
;
llØ ∞
ViewBagmm 
.mm 
ReportViewermm  
=mm! "
	rptviewermm# ,
;mm, -
returnnn 
Viewnn 
(nn 
$strnn -
)nn- .
;nn. /
}oo 	
publicpp 
ReportViewerpp 4
(GenerarPorGrupos_VentasPorGrupoDetalladopp D
(ppD E
intppE H
idPuntoVentappI U
,ppU V
stringppW ]
nombrePuntoVentapp^ n
,ppn o
stringppp v"
nombreEstablecimiento	ppw å
,
ppå ç
DateTime
ppé ñ

fechaDesde
ppó °
,
pp° ¢
DateTime
pp£ ´

fechaHasta
pp¨ ∂
,
pp∂ ∑
int
pp∏ ª
idGrupo
ppº √
,
pp√ ƒ
string
pp≈ À
nombreGrupo
ppÃ ◊
,
pp◊ ÿ
bool
ppŸ ›
fromRequest
ppﬁ È
)
ppÈ Í
{qq 	
Listrr 
<rr #
OperacionGrupoDetalladorr (
>rr( )#
ventasPorGrupoDetalladorr* A
=rrB C
ventaReporte_LogicarrD W
.rrW X*
ObtenerVentasPorGrupoDetalladorrX v
(rrv w
idPuntoVenta	rrw É
,
rrÉ Ñ

fechaDesde
rrÖ è
,
rrè ê

fechaHasta
rrë õ
,
rrõ ú
idGrupo
rrù §
)
rr§ •
;
rr• ¶
varss 
parametrosBasicosss !
=ss" #$
ObtenerParametrosBasicosss$ <
(ss< =
)ss= >
;ss> ?
ReportParametertt %
parametroNombrePuntoVentatt 5
=tt6 7
newtt8 ;
ReportParametertt< K
(ttK L
$strttL ^
,tt^ _
nombrePuntoVentatt` p
)ttp q
;ttq r
ReportParameteruu *
parametroNombreEstablecimientouu :
=uu; <
newuu= @
ReportParameteruuA P
(uuP Q
$struuQ h
,uuh i!
nombreEstablecimientouuj 
)	uu Ä
;
uuÄ Å
ReportParametervv 
parametroFechaDesdevv /
=vv0 1
newvv2 5
ReportParametervv6 E
(vvE F
$strvvF R
,vvR S

fechaDesdevvT ^
.vv^ _
ToStringvv_ g
(vvg h
)vvh i
)vvi j
;vvj k
ReportParameterww 
parametroFechaHastaww /
=ww0 1
newww2 5
ReportParameterww6 E
(wwE F
$strwwF R
,wwR S

fechaHastawwT ^
.ww^ _
ToStringww_ g
(wwg h
)wwh i
)wwi j
;wwj k
ReportParameterxx  
parametroNombreGrupoxx 0
=xx1 2
newxx3 6
ReportParameterxx7 F
(xxF G
$strxxG T
,xxT U
nombreGrupoxxV a
)xxa b
;xxb c
ReportParameteryy &
parametroNombreResponsableyy 6
=yy7 8
newyy9 <
ReportParameteryy= L
(yyL M
$stryyM `
,yy` a#
ventasPorGrupoDetalladoyyb y
.yyy z
FirstOrDefault	yyz à
(
yyà â
)
yyâ ä
==
yyã ç
null
yyé í
?
yyì î
$str
yyï ò
:
yyô ö%
ventasPorGrupoDetallado
yyõ ≤
.
yy≤ ≥
FirstOrDefault
yy≥ ¡
(
yy¡ ¬
)
yy¬ √
.
yy√ ƒ
NombreResponsable
yyƒ ’
)
yy’ ÷
;
yy÷ ◊
varzz 
	rptviewerzz 
=zz 
newzz 
ReportViewerzz  ,
(zz, -
)zz- .
{zz/ 0
ProcessingModezz1 ?
=zz@ A
ProcessingModezzB P
.zzP Q
LocalzzQ V
,zzV W
SizeToReportContentzzX k
=zzl m
truezzn r
,zzr s
Widthzzt y
=zzz {
Unit	zz| Ä
.
zzÄ Å

Percentage
zzÅ ã
(
zzã å
$num
zzå è
)
zzè ê
,
zzê ë
Height
zzí ò
=
zzô ö
Unit
zzõ ü
.
zzü †

Percentage
zz† ™
(
zz™ ´
$num
zz´ Æ
)
zzÆ Ø
}
zz∞ ±
;
zz± ≤
string{{ 
path{{ 
={{ 
$str{{ `
;{{` a
	rptviewer|| 
.|| 
LocalReport|| !
.||! "

ReportPath||" ,
=||- .
fromRequest||/ :
?||; <
Request||= D
.||D E
MapPath||E L
(||L M
Request||M T
.||T U
ApplicationPath||U d
)||d e
+||f g
path||h l
:||m n
HostingEnvironment	||o Å
.
||Å Ç
MapPath
||Ç â
(
||â ä
path
||ä é
)
||é è
;
||è ê
	rptviewer}} 
.}} 
LocalReport}} !
.}}! "
SetParameters}}" /
(}}/ 0
new}}0 3
ReportParameter}}4 C
[}}C D
]}}D E
{}}F G
parametrosBasicos~~ !
.~~! "

NombreSede~~" ,
,~~, -
parametrosBasicos !
.! "
FechaActualSistema" 4
,4 5
parametrosBasicos
ÄÄ !
.
ÄÄ! "
LogoSede
ÄÄ" *
,
ÄÄ* +
parametrosBasicos
ÅÅ !
.
ÅÅ! "
Usuario
ÅÅ" )
,
ÅÅ) *'
parametroNombrePuntoVenta
ÇÇ )
,
ÇÇ) *!
parametroFechaDesde
ÉÉ #
,
ÉÉ# $,
parametroNombreEstablecimiento
ÑÑ .
,
ÑÑ. /!
parametroFechaHasta
ÖÖ #
,
ÖÖ# $"
parametroNombreGrupo
ÜÜ $
,
ÜÜ$ %(
parametroNombreResponsable
áá *
}
àà 
)
àà 
;
àà 
ReportDataSource
ââ %
rptdatasourceFacturadas
ââ 4
=
ââ5 6
new
ââ7 :
ReportDataSource
ââ; K
(
ââK L
$str
ââL l
,
ââl m&
ventasPorGrupoDetalladoâân Ö
)ââÖ Ü
;ââÜ á
	rptviewer
ää 
.
ää 
LocalReport
ää !
.
ää! "
DataSources
ää" -
.
ää- .
Add
ää. 1
(
ää1 2%
rptdatasourceFacturadas
ää2 I
)
ääI J
;
ääJ K
return
ãã 
	rptviewer
ãã 
;
ãã 
}
åå 	
}
çç 
}éé á
eD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Venta\VentaReportesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

partial 
class #
VentaReportesController 0
:1 2
BaseController3 A
{ 
	protected 
readonly 
IOperacionLogica +
operacionLogica, ;
;; <
	protected 
readonly 
IActorNegocioLogica .
actorNegocioLogica/ A
;A B
	protected 
readonly 
IConceptoLogica *
conceptoLogica+ 9
;9 :
	protected 
readonly  
IVentaReporte_Logica / 
ventaReportingLogica0 D
;D E
	protected 
readonly $
ICentroDeAtencion_Logica 3#
centroDeAtencion_Logica4 K
;K L
public #
VentaReportesController &
(& '
)' (
:) *
base+ /
(/ 0
)0 1
{ 	
operacionLogica 
= 
Dependencia )
.) *
Resolve* 1
<1 2
IOperacionLogica2 B
>B C
(C D
)D E
;E F
actorNegocioLogica   
=    
Dependencia  ! ,
.  , -
Resolve  - 4
<  4 5
IActorNegocioLogica  5 H
>  H I
(  I J
)  J K
;  K L
conceptoLogica!! 
=!! 
Dependencia!! (
.!!( )
Resolve!!) 0
<!!0 1
IConceptoLogica!!1 @
>!!@ A
(!!A B
)!!B C
;!!C D 
ventaReportingLogica""  
=""! "
Dependencia""# .
."". /
Resolve""/ 6
<""6 7 
IVentaReporte_Logica""7 K
>""K L
(""L M
)""M N
;""N O#
centroDeAtencion_Logica## #
=##$ %
Dependencia##& 1
.##1 2
Resolve##2 9
<##9 :$
ICentroDeAtencion_Logica##: R
>##R S
(##S T
)##T U
;##U V
}$$ 	
[&& 	
	Authorize&&	 
(&& 
Roles&& 
=&& 
$str&& C
)&&C D
]&&D E
public'' 
ActionResult'' 
	Principal'' %
(''% &
)''& '
{(( 	
ViewBag)) 
.)) 
Data)) 
=))  
ventaReportingLogica)) /
.))/ 0,
 ObtenerDatosParaReportePrincipal))0 P
())P Q
ProfileData))Q \
())\ ]
)))] ^
)))^ _
;))_ `
return** 
View** 
(** 
)** 
;** 
}++ 	
},, 
}-- Ç
aD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\CorreccionInventarioController.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Controllers		& 1
{

 
public 

class *
CorreccionInventarioController /
:0 1
BaseController2 @
{ 
	protected 
readonly "
IAlmacenReporte_Logica 1"
almacenReportingLogica3 I
;I J
	protected 
readonly '
IInventarioHistorico_Logica 6%
inventarioHistoricoLogica7 P
;P Q
	protected 
readonly $
IInventarioActual_Logica 3"
inventarioActualLogica4 J
;J K
public *
CorreccionInventarioController -
(- .
). /
:0 1
base2 6
(6 7
)7 8
{ 	"
inventarioActualLogica "
=# $
Dependencia% 0
.0 1
Resolve1 8
<8 9$
IInventarioActual_Logica9 Q
>Q R
(R S
)S T
;T U%
inventarioHistoricoLogica %
=& '
Dependencia( 3
.3 4
Resolve4 ;
<; <'
IInventarioHistorico_Logica< W
>W X
(X Y
)Y Z
;Z ["
almacenReportingLogica "
=# $
Dependencia% 0
.0 1
Resolve1 8
<8 9"
IAlmacenReporte_Logica9 O
>O P
(P Q
)Q R
;R S
} 
public 

ActionResult 
Corregir  
(  !
)! "
{ 	
return 
View 
( 
) 
; 
} 	
}   
}!! æ

uD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\HotelApiControllers\CatalogoHabitacionesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
.1 2
HotelApiControllers2 E
{ 
public 

class *
CatalogoHabitacionesController /
:0 1
ApiController2 ?
{ 
private 
readonly 
IHotelLogica %
hotelLogica& 1
;1 2
List 
< 
RoomType 
> 
RoomCatalog "
;" #
public *
CatalogoHabitacionesController -
(- .
). /
{0 1
hotelLogica 
= 
Dependencia %
.% &
Resolve& -
<- .
IHotelLogica. :
>: ;
(; <
)< =
;= >
} 	
[ 	
HttpGet	 
] 
public 
List 
< 
RoomType 
> 
CatologoRoomType .
(. /
)/ 0
{ 	
return 
RoomCatalog 
; 
} 	
} 
} Ö&
ÄD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\HotelApiControllers\Reserva\HabitacionesDisponiblesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
.1 2
ApiControllers2 @
{ 
[ 
Route 

(
 
$str 
) 
] 
public 

class -
!HabitacionesDisponiblesController 2
:3 4
ApiController5 B
{ 
private 
readonly 
IHotelLogica %
hotelLogica& 1
;1 2
List 
< 
RoomType 
> 

roomsTypes !
;! "
List 
< 
RoomType 
> 
availableRooms %
;% &
public -
!HabitacionesDisponiblesController 0
(0 1
)1 2
{ 	
hotelLogica 
= 
Dependencia %
.% &
Resolve& -
<- .
IHotelLogica. :
>: ;
(; <
)< =
;= >
availableRooms 
= 
new  
List! %
<% &
RoomType& .
>. /
(/ 0
)0 1
{   
new!! 
RoomType!! 
(!! 
)!! 
{!! 
Id!!  
=!!  !
$num!!! "
,!!" #
Name!!# '
=!!' (
$str!!( 5
,!!5 6

PriceValue!!6 @
=!!@ A
$num!!A G
,!!G H
AvailabilityAmount!!I [
=!![ \
$num!!\ ]
}!!] ^
,!!^ _
new"" 
RoomType"" 
("" 
)"" 
{""  
Id""  "
=""" #
$num""# $
,""$ %
Name""% )
="") *
$str""* 5
,""5 6

PriceValue""6 @
=""@ A
$num""A D
,""D E
AvailabilityAmount""F X
=""X Y
$num""Y Z
}""Z [
,""[ \
new## 
RoomType## 
(## 
)## 
{##  
Id##  "
=##" #
$num### $
,##$ %
Name##% )
=##) *
$str##* 2
,##2 3

PriceValue##3 =
=##= >
$num##> A
,##A B
AvailabilityAmount##C U
=##U V
$num##V W
}##W X
,##X Y
new$$ 
RoomType$$ 
($$ 
)$$ 
{$$  
Id$$  "
=$$" #
$num$$# $
,$$$ %
Name$$% )
=$$) *
$str$$* 3
,$$3 4

PriceValue$$4 >
=$$> ?
$num$$? F
,$$F G
AvailabilityAmount$$H Z
=$$Z [
$num$$[ \
}$$\ ]
}%% 
;%% 
}&& 	
[,, 	
HttpGet,,	 
],, 
[-- 	
Route--	 
(-- 
$str-- #
)--# $
]--$ %
public.. 
string.. 
GetAvailableRoomss.. (
(..( )
int..) ,
numero..- 3
)..3 4
{// 	
return00 
(00 
$str00 
)00 
;00 
}11 	
[44 	
HttpPost44	 
]44 
public55 
IHttpActionResult55  
AvailableRooms55! /
(55/ 0
DateBooking550 ;
dateBooking55< G
)55G H
{66 	
try77 
{88 
if99 
(99 

ModelState99 
.99 
IsValid99 &
)99& '
{:: 

roomsTypes;; 
=;;  
hotelLogica;;! ,
.;;, -'
ObtenerRoomTypesDisponibles;;- H
(;;H I
dateBooking;;I T
);;T U
;;;U V
Console<< 
.<< 
	WriteLine<< %
(<<% &
dateBooking<<& 1
.<<1 2
	EntryDate<<2 ;
.<<; <
ToString<<< D
(<<D E
)<<E F
,<<F G
dateBooking<<H S
.<<S T
DepartureDate<<T a
.<<a b
ToString<<b j
(<<j k
)<<k l
)<<l m
;<<m n
return== 
Ok== 
(== 

roomsTypes== (
)==( )
;==) *
}>> 
else?? 
{@@ 
returnAA 

BadRequestAA %
(AA% &
$strAA& 7
)AA7 8
;AA8 9
}BB 
}DD 
catchEE 
(EE 
	ExceptionEE 
exEE 
)EE  
{FF 
returnGG 

BadRequestGG !
(GG! "
$strGG" Q
)GGQ R
;GGR S
}HH 
}II 	
}xx 
}yy »
vD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\HotelApiControllers\Reserva\ReservaOnlineController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
.1 2
ApiControllers2 @
{ 
[ 
Route 

(
 
$str 
) 
]  
public 

class #
ReservaOnlineController (
:) *
ApiController+ 8
{ 
ObjectCache 
cache 
= 
MemoryCache '
.' (
Default( /
;/ 0
private 
readonly 
IHotelLogica %
hotelLogica& 1
;1 2
private 
readonly 
IEmpleado_Logica )
empleadoLogica* 8
;8 9
private 
readonly 
ISession_Logica (
sessionLogica) 6
;6 7
private 
readonly  
ITipoDeCambio_Logica -
tipoCambioLogica. >
;> ?
private 
readonly $
ICentroDeAtencion_Logica 1"
centroDeAtencionLogica2 H
;H I"
UserProfileSessionData 
sessionProfile -
;- .
public #
ReservaOnlineController &
(& '
)' (
{   	
hotelLogica!! 
=!! 
Dependencia!! %
.!!% &
Resolve!!& -
<!!- .
IHotelLogica!!. :
>!!: ;
(!!; <
)!!< =
;!!= >"
centroDeAtencionLogica"" "
=""# $
Dependencia""% 0
.""0 1
Resolve""1 8
<""8 9$
ICentroDeAtencion_Logica""9 Q
>""Q R
(""R S
)""S T
;""T U
sessionLogica## 
=## 
Dependencia## &
.##& '
Resolve##' .
<##. /
ISession_Logica##/ >
>##> ?
(##? @
)##@ A
;##A B
tipoCambioLogica$$ 
=$$ 
Dependencia$$ *
.$$* +
Resolve$$+ 2
<$$2 3 
ITipoDeCambio_Logica$$3 G
>$$G H
($$H I
)$$I J
;$$J K
sessionProfile%% 
=%% 
sessionLogica%% *
.%%* + 
GenerarSesionUsuario%%+ ?
(%%? @
)%%@ A
;%%A B
}'' 	
[,, 	
HttpPost,,	 
],, 
public-- 
IHttpActionResult--  
PostBooking--! ,
(--, -
Booking--- 4
booking--5 <
)--< =
{.. 	
if// 
(// 

ModelState// 
.// 
IsValid// "
)//" #
{00 
var11 

tipoCambio11 
=11  
tipoCambioLogica11! 1
.111 2(
ObtenerTipoCambioDolarActual112 N
(11N O
)11O P
;11P Q
var22 
completeSession22 #
=22$ %
sessionLogica22& 3
.223 4
ResolverSession224 C
(22C D
sessionProfile22D R
,22R S

tipoCambio22T ^
,22^ _
booking22` g
.22g h
IdFilial22h p
)22p q
;22q r
hotelLogica33 
.33 
RegistrarBooking33 ,
(33, -
booking33- 4
,334 5
completeSession336 E
)33E F
;33F G
}44 
else55 
{66 
}77 
Console99 
.99 
	WriteLine99 
(99 
booking99 %
.99% &
DateBooking99& 1
.991 2
	EntryDate992 ;
)99; <
;99< =
return;; 
Ok;; 
(;; 
);; 
;;; 
}<< 	
}\\ 
}]] ºO
QD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\BaseController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
BaseController 
:  !

Controller" ,
{ 
public 
BaseController 
( 
) 
{ 	
} 	
	protected "
UserProfileSessionData (
ProfileData) 4
(4 5
)5 6
{ 	
var 
profileData 
= 
this "
." #
Session# *
[* +
$str+ 8
]8 9
as: <"
UserProfileSessionData= S
;S T
return 
profileData 
; 
} 	
	protected&& 
List&& 
<&& 
ItemGenericoBase&& '
>&&' (
ObtenerItems&&) 5
(&&5 6
string&&6 <
[&&< =
]&&= >
almacenesString&&? N
)&&N O
{'' 	
return(( 
almacenesString(( "
.((" #
Select((# )
((() *
a((* +
=>((, .
new((/ 2
ItemGenericoBase((3 C
(((C D
)((D E
{((F G
Id((H J
=((K L
int((M P
.((P Q
Parse((Q V
(((V W
a((W X
.((X Y
Split((Y ^
(((^ _
$char((_ b
)((b c
[((c d
$num((d e
]((e f
)((f g
,((g h
Nombre((i o
=((p q
a((r s
.((s t
Split((t y
(((y z
$char((z }
)((} ~
[((~ 
$num	(( Ä
]
((Ä Å
}
((Ç É
)
((É Ñ
.
((Ñ Ö
ToList
((Ö ã
(
((ã å
)
((å ç
;
((ç é
})) 	
public++ $
ParametrosBasicosReporte++ '$
ObtenerParametrosBasicos++( @
(++@ A
)++A B
{,, 	
var-- 
sede-- 
=-- 
ObtenerSede-- "
(--" #
)--# $
;--$ %
DateTime.. 
fechaActual..  
=..! "
DateTimeUtil..# /
.../ 0
FechaActual..0 ;
(..; <
)..< =
;..= >
string// 

logoString// 
=// 
Convert//  '
.//' (
ToBase64String//( 6
(//6 7
sede//7 ;
.//; <
Logo//< @
,//@ A
$num//B C
,//C D
sede//E I
.//I J
Logo//J N
.//N O
Length//O U
)//U V
;//V W
return00 
new00 $
ParametrosBasicosReporte00 /
{11 

NombreSede22 
=22 
new22  
ReportParameter22! 0
(220 1
$str221 =
,22= >
sede22? C
.22C D
Nombre22D J
)22J K
,22K L
LogoSede33 
=33 
new33 
ReportParameter33 .
(33. /
$str33/ 9
,339 :

logoString33; E
)33E F
,33F G
FechaActualSistema44 "
=44# $
new44% (
ReportParameter44) 8
(448 9
$str449 F
,44F G
fechaActual44H S
.44S T
ToString44T \
(44\ ]
)44] ^
)44^ _
,44_ `
Usuario55 
=55 
new55 
ReportParameter55 -
(55- .
$str55. 7
,557 8
ProfileData559 D
(55D E
)55E F
.55F G
Empleado55G O
.55O P
NombresYApellidos55P a
)55a b
}66 
;66 
}77 	
public88 4
(EstablecimientoComercialExtendidoConLogo88 7
ObtenerSede888 C
(88C D
)88D E
{99 	
return:: 
(:: 4
(EstablecimientoComercialExtendidoConLogo:: <
)::< =
System::= C
.::C D
Web::D G
.::G H
HttpContext::H S
.::S T
Current::T [
.::[ \
Application::\ g
[::g h
$str::h n
]::n o
;::o p
};; 	
public== 
static== 
string== =
1FormatearParametroDiasAntesDisponiblesParaReporte== N
(==N O
int==O R
	diasAntes==S \
)==\ ]
{>> 	
return?? 
(?? 
$str?? 
+?? 
	diasAntes?? #
.??# $
ToString??$ ,
(??, -
)??- .
+??/ 0
$str??1 4
)??4 5
;??5 6
}@@ 	
publicBB 
staticBB 
voidBB 
ResetParametersBB *
(BB* +
)BB+ ,
{CC 	
}EE 	
publicGG 

TipoCambioGG (
ObtenerTipoCambioDolarActualGG 6
(GG6 7
)GG7 8
{HH 	

TipoCambioII 

tipoCambioII !
=II" #
newII$ '

TipoCambioII( 2
(II2 3
)II3 4
;II4 5
tryJJ 
{KK 
stringLL 
urlLL 
=LL 
AplicacionSettingsLL /
.LL/ 0
DefaultLL0 7
.LL7 8$
UrlApiConsultaTipoCambioLL8 P
+LLQ R
AplicacionSettingsLLS e
.LLe f
DefaultLLf m
.LLm n'
IdMonedaDolarApiTipoCambio	LLn à
;
LLà â
varMM 
tMM 
=MM 
TaskMM 
.MM 
RunMM  
(MM  !
(MM! "
)MM" #
=>MM$ &
GetURIMM' -
(MM- .
newMM. 1
UriMM2 5
(MM5 6
urlMM6 9
)MM9 :
)MM: ;
)MM; <
;MM< =
tNN 
.NN 
WaitNN 
(NN 
)NN 
;NN 
stringOO 
resultOO 
=OO 
tOO  !
.OO! "
ResultOO" (
;OO( )

tipoCambioPP 
=PP 

NewtonsoftPP '
.PP' (
JsonPP( ,
.PP, -
JsonConvertPP- 8
.PP8 9
DeserializeObjectPP9 J
<PPJ K

TipoCambioPPK U
>PPU V
(PPV W
resultPPW ]
)PP] ^
;PP^ _

tipoCambioQQ 
.QQ 
IdMonedaQQ #
=QQ$ %
MaestroSettingsQQ& 5
.QQ5 6
DefaultQQ6 =
.QQ= >)
IdDetalleMaestroMonedaDolaresQQ> [
;QQ[ \
ifRR 
(RR 

tipoCambioRR 
.RR 
EstadoRR %
==RR& (
falseRR) .
)RR. /
{SS 

tipoCambioTT 
=TT  
newTT! $

TipoCambioTT% /
(TT/ 0
)TT0 1
;TT1 2
}UU 
}VV 
catchWW 
(WW 
	ExceptionWW 
)WW 
{XX 

tipoCambioYY 
=YY 
newYY  

TipoCambioYY! +
(YY+ ,
)YY, -
;YY- .
}ZZ 
return[[ 

tipoCambio[[ 
;[[ 
}\\ 	
	protected^^ 
static^^ 
async^^ 
Task^^ #
<^^# $
string^^$ *
>^^* +
GetURI^^, 2
(^^2 3
Uri^^3 6
u^^7 8
)^^8 9
{__ 	
var`` 
response`` 
=`` 
string`` !
.``! "
Empty``" '
;``' (
usingaa 
(aa 
varaa 
clientaa 
=aa 
newaa  #

HttpClientaa$ .
(aa. /
)aa/ 0
)aa0 1
{bb 
HttpResponseMessagecc #
resultcc$ *
=cc+ ,
awaitcc- 2
clientcc3 9
.cc9 :
GetAsynccc: B
(ccB C
uccC D
)ccD E
;ccE F
ifdd 
(dd 
resultdd 
.dd 
IsSuccessStatusCodedd .
)dd. /
{ee 
responseff 
=ff 
awaitff $
resultff% +
.ff+ ,
Contentff, 3
.ff3 4
ReadAsStringAsyncff4 E
(ffE F
)ffF G
;ffG H
}gg 
}hh 
returnii 
responseii 
;ii 
}jj 	
publicll 
staticll 
stringll 
	Encriptarll &
(ll& '
stringll' -
_cadenaAencriptarll. ?
)ll? @
{mm 	
stringnn 
resultnn 
=nn 
stringnn "
.nn" #
Emptynn# (
;nn( )
byteoo 
[oo 
]oo 
encrytedoo 
=oo 
Systemoo $
.oo$ %
Textoo% )
.oo) *
Encodingoo* 2
.oo2 3
ASCIIoo3 8
.oo8 9
GetBytesoo9 A
(ooA B
_cadenaAencriptarooB S
)ooS T
;ooT U
resultpp 
=pp 
Convertpp 
.pp 
ToBase64Stringpp +
(pp+ ,
encrytedpp, 4
)pp4 5
;pp5 6
returnqq 
resultqq 
;qq 
}rr 	
publictt 
statictt 
stringtt 
DesEncriptartt )
(tt) *
stringtt* 0 
_cadenaAdesencriptartt1 E
)ttE F
{uu 	
stringvv 
resultvv 
=vv 
stringvv "
.vv" #
Emptyvv# (
;vv( )
byteww 
[ww 
]ww 
decrytedww 
=ww 
Convertww %
.ww% &
FromBase64Stringww& 6
(ww6 7 
_cadenaAdesencriptarww7 K
)wwK L
;wwL M
resultxx 
=xx 
Systemxx 
.xx 
Textxx  
.xx  !
Encodingxx! )
.xx) *
ASCIIxx* /
.xx/ 0
	GetStringxx0 9
(xx9 :
decrytedxx: B
)xxB C
;xxC D
returnyy 
resultyy 
;yy 
}zz 	
}{{ 
}|| ∑Ì
]D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\CentroDeAtencionController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class &
CentroDeAtencionController +
:, -
BaseController. <
{ 
private 
readonly 
IConceptoLogica (
conceptoLogica) 7
;7 8
	protected   
readonly   
IMaestroLogica   )
maestroLogica  * 7
;  7 8
	protected!! 
readonly!! 
IActorNegocioLogica!! .
actorNegocioLogica!!/ A
;!!A B
	protected"" 
readonly"" 
IOperacionLogica"" +
_operacionLogica"", <
;""< =
	protected## 
readonly## 
ISession_Logica## *
_sesionLogica##+ 8
;##8 9
	protected$$ 
readonly$$ 
ISede_Logica$$ '
_sedeLogica$$( 3
;$$3 4
	protected%% 
readonly%% 
ISucursal_Logica%% +
_sucursalLogica%%, ;
;%%; <
	protected&& 
readonly&& (
IEstablecimiento_Repositorio&& 7!
_establecimientoDatos&&8 M
;&&M N
	protected'' 
readonly'' $
ICentroDeAtencion_Logica'' 3!
_centroAtencionLogica''4 I
;''I J
	protected(( 
readonly(( #
IEstablecimiento_Logica(( 2"
_establecimientoLogica((3 I
;((I J
	protected)) 
readonly)) $
IInventarioActual_Logica)) 3#
_inventarioActualLogica))4 K
;))K L
	protected** 
readonly**  
ITipoDeCambio_Logica** /
_tipoDeCambioLogica**0 C
;**C D
public33 &
CentroDeAtencionController33 )
(33) *
)33* +
{44 	
actorNegocioLogica55 
=55  
Dependencia55! ,
.55, -
Resolve55- 4
<554 5
IActorNegocioLogica555 H
>55H I
(55I J
)55J K
;55K L
conceptoLogica77 
=77 
Dependencia77 (
.77( )
Resolve77) 0
<770 1
IConceptoLogica771 @
>77@ A
(77A B
)77B C
;77C D
maestroLogica88 
=88 
Dependencia88 '
.88' (
Resolve88( /
<88/ 0
IMaestroLogica880 >
>88> ?
(88? @
)88@ A
;88A B
_operacionLogica99 
=99 
Dependencia99 *
.99* +
Resolve99+ 2
<992 3
IOperacionLogica993 C
>99C D
(99D E
)99E F
;99F G
_sesionLogica:: 
=:: 
Dependencia:: '
.::' (
Resolve::( /
<::/ 0
ISession_Logica::0 ?
>::? @
(::@ A
)::A B
;::B C
_sedeLogica;; 
=;; 
Dependencia;; $
.;;$ %
Resolve;;% ,
<;;, -
ISede_Logica;;- 9
>;;9 :
(;;: ;
);;; <
;;;< =!
_establecimientoDatos<< !
=<<" #
Dependencia<<$ /
.<</ 0
Resolve<<0 7
<<<7 8(
IEstablecimiento_Repositorio<<8 T
><<T U
(<<U V
)<<V W
;<<W X
_sucursalLogica>> 
=>> 
Dependencia>> )
.>>) *
Resolve>>* 1
<>>1 2
ISucursal_Logica>>2 B
>>>B C
(>>C D
)>>D E
;>>E F!
_centroAtencionLogica?? !
=??" #
Dependencia??$ /
.??/ 0
Resolve??0 7
<??7 8$
ICentroDeAtencion_Logica??8 P
>??P Q
(??Q R
)??R S
;??S T"
_establecimientoLogica@@ "
=@@# $
Dependencia@@% 0
.@@0 1
Resolve@@1 8
<@@8 9#
IEstablecimiento_Logica@@9 P
>@@P Q
(@@Q R
)@@R S
;@@S T#
_inventarioActualLogicaBB #
=BB$ %
DependenciaBB& 1
.BB1 2
ResolveBB2 9
<BB9 :$
IInventarioActual_LogicaBB: R
>BBR S
(BBS T
)BBT U
;BBU V
_tipoDeCambioLogicaCC 
=CC  !
DependenciaCC" -
.CC- .
ResolveCC. 5
<CC5 6 
ITipoDeCambio_LogicaCC6 J
>CCJ K
(CCK L
)CCL M
;CCM N
}GG 	
publicLL 
ActionResultLL '
SeleccionarCentroDeAtencionLL 7
(LL7 8
)LL8 9
{MM 	"
UserProfileSessionDataNN "
profileNN# *
=NN+ ,
_sesionLogicaNN- :
.NN: ; 
GenerarSesionUsuarioNN; O
(NNO P
UserNNP T
.NNT U
IdentityNNU ]
.NN] ^
	GetUserIdNN^ g
(NNg h
)NNh i
,NNi j
UserNNk o
.NNo p
IdentityNNp x
.NNx y
GetUserName	NNy Ñ
(
NNÑ Ö
)
NNÖ Ü
)
NNÜ á
;
NNá à
thisOO 
.OO 
SessionOO 
[OO 
$strOO &
]OO& '
=OO( )
profileOO* 1
;OO1 2
returnPP 
ViewPP 
(PP 
profilePP 
)PP  
;PP  !
}QQ 	
[TT 	
HttpPostTT	 
]TT 
publicUU 
ActionResultUU '
SeleccionarCentroDeAtencionUU 7
(UU7 8"
UserProfileSessionDataUU8 N
profileUUO V
)UUV W
{VV 	
varWW 
profileDataWW 
=WW (
EstablecerDatosSesionUsuarioWW :
(WW: ;
profileWW; B
)WWB C
;WWC D
ifYY 
(YY 
profileDataYY 
.YY 
MensajeErrorYY '
==YY( *
$strYY+ -
)YY- .
{ZZ 
this[[ 
.[[ 
Session[[ 
[[[ 
$str[[ -
][[- .
=[[/ 0
$num[[1 3
;[[3 4
this\\ 
.\\ 
Session\\ 
[\\ 
$str\\ -
]\\- .
=\\/ 0
$num\\1 3
;\\3 4
Configuraciones^^ 
.^^  
Reset^^  %
(^^% &
)^^& '
;^^' (!
ConfiguracionesLogica__ %
.__% &
Reset__& +
(__+ ,
)__, -
;__- .
Systemaa 
.aa 
Webaa 
.aa 
HttpContextaa &
.aa& '
Currentaa' .
.aa. /
Applicationaa/ :
.aa: ;
Lockaa; ?
(aa? @
)aa@ A
;aaA B
Systembb 
.bb 
Webbb 
.bb 
HttpContextbb &
.bb& '
Currentbb' .
.bb. /
Applicationbb/ :
[bb: ;
$strbb; A
]bbA B
=bbC D
profileDatabbE P
.bbP Q
SedebbQ U
;bbU V
Systemcc 
.cc 
Webcc 
.cc 
HttpContextcc &
.cc& '
Currentcc' .
.cc. /
Applicationcc/ :
.cc: ;
UnLockcc; A
(ccA B
)ccB C
;ccC D
returnee 
RedirectToLocalee &
(ee& '
)ee' (
;ee( )
}ff 
elsegg 
{hh 
returnii 
Viewii 
(ii 
profileDataii '
)ii' (
;ii( )
}jj 
}kk 	
privateoo 
ActionResultoo 
RedirectToLocaloo ,
(oo, -
)oo- .
{pp 	
returnqq 
RedirectToActionqq #
(qq# $
$strqq$ 1
,qq1 2
$strqq3 ?
)qq? @
;qq@ A
}rr 	
publictt 

JsonResulttt )
ObtenerRolesCentrosDeAtenciontt 7
(tt7 8
)tt8 9
{uu 	
tryvv 
{ww 
varxx 

resultadosxx 
=xx  !
_centroAtencionLogicaxx! 6
.xx6 7*
ObtenerRolesDeCentroDeAtencionxx7 U
(xxU V
)xxV W
;xxW X
Listyy 
<yy "
ComboGenericoViewModelyy +
>yy+ ,
rolesyy- 2
=yy3 4
newyy5 8
Listyy9 =
<yy= >"
ComboGenericoViewModelyy> T
>yyT U
(yyU V
)yyV W
;yyW X
roleszz 
=zz "
ComboGenericoViewModelzz .
.zz. /
Convertzz/ 6
(zz6 7

resultadoszz7 A
)zzA B
;zzB C
return{{ 
Json{{ 
({{ 
roles{{ !
){{! "
;{{" #
}|| 
catch}} 
(}} 
	Exception}} 
e}} 
)}} 
{~~ 
return 
Json 
( 
Util  
.  !
	ErrorJson! *
(* +
e+ ,
), -
)- .
;. /
}
ÄÄ 
}
ÅÅ 	
public
ÖÖ $
UserProfileSessionData
ÖÖ %*
EstablecerDatosSesionUsuario
ÖÖ& B
(
ÖÖB C$
UserProfileSessionData
ÖÖC Y
profile
ÖÖZ a
)
ÖÖa b
{
ÜÜ 	
var
áá 
profileData
áá 
=
áá 
this
áá "
.
áá" #
ProfileData
áá# .
(
áá. /
)
áá/ 0
;
áá0 1
profileData
àà 
.
àà 
MensajeError
àà $
=
àà% &
$str
àà' )
;
àà) *
try
ââ 
{
ää 
if
ãã 
(
ãã 

ModelState
ãã 
.
ãã 
IsValid
ãã &
)
ãã& '
{
åå 
var
çç 
sede
çç 
=
çç 
_sedeLogica
çç *
.
çç* + 
ObtenerSedeConLogo
çç+ =
(
çç= >
)
çç> ?
;
çç? @
profileData
éé 
.
éé  
Sede
éé  $
=
éé% &
sede
éé' +
;
éé+ ,
profileData
èè 
.
èè  

NombreSede
èè  *
=
èè+ ,
sede
èè- 1
.
èè1 2
Nombre
èè2 8
;
èè8 9
var
ëë 
clientePorDefecto
ëë )
=
ëë* + 
actorNegocioLogica
ëë, >
.
ëë> ?$
ObtenerClienteGenerico
ëë? U
(
ëëU V
)
ëëV W
;
ëëW X
profileData
íí 
.
íí  
ClientePorDefecto
íí  1
=
íí2 3
clientePorDefecto
íí4 E
;
ííE F
if
îî 
(
îî 
profileData
îî #
.
îî# $*
CentrosDeAtencionProgramados
îî$ @
.
îî@ A
Count
îîA F
>
îîG H
$num
îîI J
)
îîJ K
{
ïï 
profileData
ññ #
.
ññ# $*
CentroDeAtencionSeleccionado
ññ$ @
=
ññA B
profileData
ññC N
.
ññN O*
CentrosDeAtencionProgramados
ññO k
.
ññk l
SingleOrDefault
ññl {
(
ññ{ |
cap
ññ| 
=>ññÄ Ç
capññÉ Ü
.ññÜ á
Idññá â
==ññä å
profileññç î
.ññî ï.
IdCentroDeAtencionInicioSesionññï ≥
)ññ≥ ¥
;ññ¥ µ
}
óó 
if
ôô 
(
ôô 
profileData
ôô #
.
ôô# $*
CentroDeAtencionSeleccionado
ôô$ @
!=
ôôA C
null
ôôD H
)
ôôH I
{
öö 
profileData
úú #
.
úú# $2
$EstablecimientoComercialSeleccionado
úú$ H
=
úúI J
profileData
úúK V
.
úúV W*
CentroDeAtencionSeleccionado
úúW s
.
úús t'
EstablecimientoComercialúút å
.úúå ç
Idúúç è
==úúê í
sedeúúì ó
.úúó ò
Idúúò ö
?úúö õ
sedeúúú †
:úú† °%
_establecimientoDatosúú° ∂
.úú∂ ∑?
/ObtenerEstablecimientoComercialExtendidoConLogoúú∑ Ê
(úúÊ Á
profileDataúúÁ Ú
.úúÚ Û,
CentroDeAtencionSeleccionadoúúÛ è
.úúè ê(
EstablecimientoComercialúúê ®
.úú® ©
Idúú© ´
)úú´ ¨
;úú¨ ≠
profileData
ûû #
.
ûû# $0
"IdCentroAtencionQueTieneLosPrecios
ûû$ F
=
ûûG H#
_centroAtencionLogica
ûûI ^
.
ûû^ _>
/ObtenerIdCentroDeAtencionParaObtencionDePreciosûû_ é
(ûûé è
profileDataûûè ö
.ûûö õ,
CentroDeAtencionSeleccionadoûûõ ∑
,ûû∑ ∏
profileDataûûπ ƒ
.ûûƒ ≈4
$EstablecimientoComercialSeleccionadoûû≈ È
)ûûÈ Í
;ûûÍ Î
profileData
†† #
.
††# $6
(IdCentroAtencionQueTieneElStockIntegrada
††$ L
=
††M N#
_centroAtencionLogica
††O d
.
††d e<
-ObtenerIdCentroDeAtencionParaObtencionDeStock††e í
(††í ì!
ModoOperacionEnum††ì §
.††§ •
PorMostrador††• ±
,††± ≤
profileData††≥ æ
.††æ ø,
CentroDeAtencionSeleccionado††ø €
,††€ ‹
profileData††› Ë
.††Ë È4
$EstablecimientoComercialSeleccionado††È ç
)††ç é
;††é è
profileData
¢¢ #
.
¢¢# $4
&CentroAtencionQueTieneElStockIntegrada
¢¢$ J
=
¢¢K L#
_centroAtencionLogica
¢¢M b
.
¢¢b c&
ObtenerCentroDeAtencion_
¢¢c {
(
¢¢{ |
profileData¢¢| á
.¢¢á à8
(IdCentroAtencionQueTieneElStockIntegrada¢¢à ∞
)¢¢∞ ±
;¢¢± ≤
profileData
§§ #
.
§§# $5
'IdCentroAtencionQueTieneElStockDosPasos
§§$ K
=
§§L M#
_centroAtencionLogica
§§N c
.
§§c d<
-ObtenerIdCentroDeAtencionParaObtencionDeStock§§d ë
(§§ë í!
ModoOperacionEnum§§í £
.§§£ §&
PorMostradorEnDosPasos§§§ ∫
,§§∫ ª
profileData§§º «
.§§« »,
CentroDeAtencionSeleccionado§§» ‰
,§§‰ Â
profileData§§Ê Ò
.§§Ò Ú4
$EstablecimientoComercialSeleccionado§§Ú ñ
)§§ñ ó
;§§ó ò
profileData
¶¶ #
.
¶¶# $8
*IdCentroAtencionQueTieneElStockCorporativa
¶¶$ N
=
¶¶O P#
_centroAtencionLogica
¶¶Q f
.
¶¶f g<
-ObtenerIdCentroDeAtencionParaObtencionDeStock¶¶g î
(¶¶î ï!
ModoOperacionEnum¶¶ï ¶
.¶¶¶ ß
Corporativa¶¶ß ≤
,¶¶≤ ≥
profileData¶¶¥ ø
.¶¶ø ¿,
CentroDeAtencionSeleccionado¶¶¿ ‹
,¶¶‹ ›
profileData¶¶ﬁ È
.¶¶È Í4
$EstablecimientoComercialSeleccionado¶¶Í é
)¶¶é è
;¶¶è ê
}
ßß 
profileData
®® 
.
®®  $
CostoUnitarioDelIcbper
®®  6
=
®®7 8
conceptoLogica
®®9 G
.
®®G H3
%ObtenerCostoUnitarioDelIcbperALaFecha
®®H m
(
®®m n
)
®®n o
;
®®o p
profileData
™™ 
.
™™  
TipoDeCambio
™™  ,
=
™™- .!
_tipoDeCambioLogica
™™/ B
.
™™B C*
ObtenerTipoCambioDolarActual
™™C _
(
™™_ `
)
™™` a
;
™™a b
profileData
¨¨ 
.
¨¨  ,
SetIdAlmacenIdInventarioFisico
¨¨  >
(
¨¨> ?%
_inventarioActualLogica
¨¨? V
.
¨¨V W2
$ObtenerIdsAlmacenIdsInventarioActual
¨¨W {
(
¨¨{ |
)
¨¨| }
)
¨¨} ~
;
¨¨~ 
profileData
ÆÆ 
.
ÆÆ   
MaestrosFrecuentes
ÆÆ  2
=
ÆÆ3 4
new
ÆÆ5 8
MaestroSesion
ÆÆ9 F
{
ØØ 
Moneda
∞∞ 
=
∞∞  
ItemGenerico
∞∞! -
.
∞∞- .
Convert
∞∞. 5
(
∞∞5 6
maestroLogica
∞∞6 C
.
∞∞C D%
ObtenerMonedaPorDefecto
∞∞D [
(
∞∞[ \
)
∞∞\ ]
)
∞∞] ^
}
±± 
;
±± 
profileData
¥¥ 
.
¥¥  (
OperacionSesionContenedora
¥¥  :
=
¥¥; <
_operacionLogica
¥¥= M
.
¥¥M N/
!ObtenerOperacionSesionContenedora
¥¥N o
(
¥¥o p
profileData
¥¥p {
.
¥¥{ |-
IdCentroDeAtencionSeleccionado¥¥| ö
)¥¥ö õ
;¥¥õ ú
var
∂∂ 

stringJson
∂∂ "
=
∂∂# $
System
∂∂% +
.
∂∂+ ,
IO
∂∂, .
.
∂∂. /
File
∂∂/ 3
.
∂∂3 4
ReadAllText
∂∂4 ?
(
∂∂? @
Path
∂∂@ D
.
∂∂D E
Combine
∂∂E L
(
∂∂L M
System
∂∂M S
.
∂∂S T
	AppDomain
∂∂T ]
.
∂∂] ^
CurrentDomain
∂∂^ k
.
∂∂k l
BaseDirectory
∂∂l y
,
∂∂y z
$str∂∂{ ®
)∂∂® ©
)∂∂© ™
;∂∂™ ´
profileData
∑∑ 
.
∑∑  !
MensajesTransaccion
∑∑  3
=
∑∑4 5
JsonConvert
∑∑6 A
.
∑∑A B
DeserializeObject
∑∑B S
<
∑∑S T!
MensajesTransaccion
∑∑T g
>
∑∑g h
(
∑∑h i

stringJson
∑∑i s
)
∑∑s t
;
∑∑t u
return
∏∏ 
profileData
∏∏ &
;
∏∏& '
}
ππ 
else
∫∫ 
{
ªª 

ModelState
ºº 
.
ºº 
AddModelError
ºº ,
(
ºº, -
$str
ºº- /
,
ºº/ 0
$str
ºº1 p
)
ººp q
;
ººq r
}
ΩΩ 
}
ææ 
catch
øø 
(
øø 
	Exception
øø 
e
øø 
)
øø 
{
¿¿ 
profileData
¡¡ 
.
¡¡ 
MensajeError
¡¡ (
=
¡¡) *
$str
¡¡+ K
+
¡¡L M
e
¡¡N O
.
¡¡O P
Message
¡¡P W
+
¡¡X Y
e
¡¡Z [
.
¡¡[ \

StackTrace
¡¡\ f
;
¡¡f g
}
¬¬ 
return
√√ 
profileData
√√ 
;
√√ 
}
ƒƒ 	
public
»» 
ActionResult
»» 
Sede
»»  
(
»»  !
)
»»! "
{
…… 	
ViewBag
   
.
   F
8permitirRegistroCodigoDigemidEnEstableciemientoComercial
   L
=
  M N
ActorSettings
  O \
.
  \ ]
Default
  ] d
.
  d eG
8PermitirRegistroCodigoDigemidEnEstableciemientoComercial  e ù
;  ù û
ViewBag
ÀÀ 
.
ÀÀ 
idRolAlmacen
ÀÀ  
=
ÀÀ! "
ActorSettings
ÀÀ# 0
.
ÀÀ0 1
Default
ÀÀ1 8
.
ÀÀ8 9
IdRolAlmacen
ÀÀ9 E
;
ÀÀE F
return
ÃÃ 
View
ÃÃ 
(
ÃÃ 
)
ÃÃ 
;
ÃÃ 
}
ÕÕ 	
public
œœ 
ActionResult
œœ 
Sucursal
œœ $
(
œœ$ %
)
œœ% &
{
–– 	
ViewBag
—— 
.
—— F
8permitirRegistroCodigoDigemidEnEstableciemientoComercial
—— L
=
——M N
ActorSettings
——O \
.
——\ ]
Default
——] d
.
——d eG
8PermitirRegistroCodigoDigemidEnEstableciemientoComercial——e ù
;——ù û
return
““ 
View
““ 
(
““ 
)
““ 
;
““ 
}
”” 	
public
’’ 
ActionResult
’’ 
	Sucursal_
’’ %
(
’’% &
int
’’& )

idSucursal
’’* 4
)
’’4 5
{
÷÷ 	&
EstablecimientoComercial
◊◊ $
sucursal
◊◊% -
=
◊◊. /
_sucursalLogica
◊◊0 ?
.
◊◊? @0
"ObtenerSucursalComoEstablecimiento
◊◊@ b
(
◊◊b c

idSucursal
◊◊c m
)
◊◊m n
;
◊◊n o
ViewBag
ÿÿ 
.
ÿÿ 

IdSucursal
ÿÿ 
=
ÿÿ  
sucursal
ÿÿ! )
.
ÿÿ) *
Id
ÿÿ* ,
;
ÿÿ, -
ViewBag
ŸŸ 
.
ŸŸ 
nombre
ŸŸ 
=
ŸŸ 
sucursal
ŸŸ %
.
ŸŸ% &
Nombre
ŸŸ& ,
;
ŸŸ, -
ViewBag
⁄⁄ 
.
⁄⁄ 
idRolAlmacen
⁄⁄  
=
⁄⁄! "
ActorSettings
⁄⁄# 0
.
⁄⁄0 1
Default
⁄⁄1 8
.
⁄⁄8 9
IdRolAlmacen
⁄⁄9 E
;
⁄⁄E F
return
€€ 
View
€€ 
(
€€ 
)
€€ 
;
€€ 
}
‹‹ 	
public
‡‡ 

JsonResult
‡‡ 
	CrearSede
‡‡ #
(
‡‡# $#
RegistroSedeViewModel
‡‡$ 9
sede
‡‡: >
)
‡‡> ?
{
·· 	
try
‚‚ 
{
„„ 
OperationResult
‰‰ 
	resultado
‰‰  )
;
‰‰) *
if
ÂÂ 
(
ÂÂ 
sede
ÂÂ 
.
ÂÂ 
Id
ÂÂ 
>
ÂÂ 
$num
ÂÂ 
)
ÂÂ  
{
ÊÊ 
	resultado
ÁÁ 
=
ÁÁ 
_sedeLogica
ÁÁ  +
.
ÁÁ+ ,
ActualizarSede
ÁÁ, :
(
ÁÁ: ;
sede
ÁÁ; ?
.
ÁÁ? @
IdActor
ÁÁ@ G
,
ÁÁG H
sede
ÁÁI M
.
ÁÁM N
Id
ÁÁN P
,
ÁÁP Q
sede
ÁÁR V
.
ÁÁV W&
NumeroDocumentoIdentidad
ÁÁW o
,
ÁÁo p
sede
ÁÁq u
.
ÁÁu v$
CodigoEstablecimientoÁÁv ã
,ÁÁã å
sedeÁÁç ë
.ÁÁë í,
CodigoEstablecimientoDigemidÁÁí Æ
,ÁÁÆ Ø
sedeÁÁ∞ ¥
.ÁÁ¥ µ'
InformacionPublicitariaÁÁµ Ã
,ÁÁÃ Õ
sedeÁÁŒ “
.ÁÁ“ ”
TipoPersonaÁÁ” ﬁ
.ÁÁﬁ ﬂ
IdÁÁﬂ ·
,ÁÁ· ‚
sedeÁÁ„ Á
.ÁÁÁ Ë

ClaseActorÁÁË Ú
.ÁÁÚ Û
IdÁÁÛ ı
,ÁÁı ˆ
sedeÁÁ˜ ˚
.ÁÁ˚ ¸
RazonSocialÁÁ¸ á
,ÁÁá à
sedeÁÁâ ç
.ÁÁç é
NombreComercialÁÁé ù
,ÁÁù û
sedeÁÁü £
.ÁÁ£ §
NombreInternoÁÁ§ ±
,ÁÁ± ≤
sedeÁÁ≥ ∑
.ÁÁ∑ ∏
TelefonoÁÁ∏ ¿
,ÁÁ¿ ¡
sedeÁÁ¬ ∆
.ÁÁ∆ «
CorreoÁÁ« Õ
,ÁÁÕ Œ'
CrearYResolverDireccionÁÁœ Ê
(ÁÁÊ Á
sedeÁÁÁ Î
.ÁÁÎ Ï
	DireccionÁÁÏ ı
,ÁÁı ˆ
sedeÁÁ˜ ˚
.ÁÁ˚ ¸
IdActorÁÁ¸ É
)ÁÁÉ Ñ
,ÁÁÑ Ö
sedeÁÁÜ ä
.ÁÁä ã
FotoÁÁã è
.ÁÁè ê
HayFotoÁÁê ó
?ÁÁò ô
ConvertÁÁö °
.ÁÁ° ¢ 
FromBase64StringÁÁ¢ ≤
(ÁÁ≤ ≥
sedeÁÁ≥ ∑
.ÁÁ∑ ∏
FotoÁÁ∏ º
.ÁÁº Ω
FotoÁÁΩ ¡
)ÁÁ¡ ¬
:ÁÁ√ ƒ
nullÁÁ≈ …
)ÁÁ…  
;ÁÁ  À
}
ËË 
else
ÈÈ 
{
ÍÍ 
if
ÎÎ 
(
ÎÎ 
sede
ÎÎ 
.
ÎÎ 
IdActor
ÎÎ $
>
ÎÎ% &
$num
ÎÎ' (
)
ÎÎ( )
{
ÏÏ 
	resultado
ÓÓ !
=
ÓÓ" #
new
ÓÓ$ '
OperationResult
ÓÓ( 7
(
ÓÓ7 8
)
ÓÓ8 9
;
ÓÓ9 :
}
ÔÔ 
else
 
{
ÒÒ 
	resultado
ÚÚ !
=
ÚÚ" #
_sedeLogica
ÚÚ$ /
.
ÚÚ/ 0
	CrearSede
ÚÚ0 9
(
ÚÚ9 :
sede
ÚÚ: >
.
ÚÚ> ?&
NumeroDocumentoIdentidad
ÚÚ? W
,
ÚÚW X
sede
ÚÚY ]
.
ÚÚ] ^#
CodigoEstablecimiento
ÚÚ^ s
,
ÚÚs t
sede
ÚÚu y
.
ÚÚy z+
CodigoEstablecimientoDigemidÚÚz ñ
,ÚÚñ ó
sedeÚÚò ú
.ÚÚú ù'
InformacionPublicitariaÚÚù ¥
,ÚÚ¥ µ
sedeÚÚ∂ ∫
.ÚÚ∫ ª
TipoPersonaÚÚª ∆
.ÚÚ∆ «
IdÚÚ« …
,ÚÚ…  
sedeÚÚÀ œ
.ÚÚœ –

ClaseActorÚÚ– ⁄
.ÚÚ⁄ €
IdÚÚ€ ›
,ÚÚ› ﬁ
sedeÚÚﬂ „
.ÚÚ„ ‰
RazonSocialÚÚ‰ Ô
,ÚÚÔ 
sedeÚÚÒ ı
.ÚÚı ˆ
NombreComercialÚÚˆ Ö
,ÚÚÖ Ü
sedeÚÚá ã
.ÚÚã å
NombreInternoÚÚå ô
,ÚÚô ö
sedeÚÚõ ü
.ÚÚü †
TelefonoÚÚ† ®
,ÚÚ® ©
sedeÚÚ™ Æ
.ÚÚÆ Ø
CorreoÚÚØ µ
,ÚÚµ ∂
CrearDireccionÚÚ∑ ≈
(ÚÚ≈ ∆
sedeÚÚ∆  
.ÚÚ  À
	DireccionÚÚÀ ‘
)ÚÚ‘ ’
,ÚÚ’ ÷
sedeÚÚ◊ €
.ÚÚ€ ‹
FotoÚÚ‹ ‡
.ÚÚ‡ ·
HayFotoÚÚ· Ë
?ÚÚÈ Í
ConvertÚÚÎ Ú
.ÚÚÚ Û 
FromBase64StringÚÚÛ É
(ÚÚÉ Ñ
sedeÚÚÑ à
.ÚÚà â
FotoÚÚâ ç
.ÚÚç é
FotoÚÚé í
)ÚÚí ì
:ÚÚî ï
nullÚÚñ ö
)ÚÚö õ
;ÚÚõ ú
}
ÛÛ 
}
ÙÙ 
Util
ıı 
.
ıı (
ManageIfResultIsNotSuccess
ıı /
(
ıı/ 0
	resultado
ıı0 9
,
ıı9 :
$str
ıı; R
)
ııR S
;
ııS T
return
ˆˆ 
new
ˆˆ "
JsonHttpStatusResult
ˆˆ /
(
ˆˆ/ 0
new
ˆˆ0 3
{
ˆˆ4 5
	resultado
ˆˆ6 ?
.
ˆˆ? @
code_result
ˆˆ@ K
,
ˆˆK L
	resultado
ˆˆM V
.
ˆˆV W
data
ˆˆW [
,
ˆˆ[ \ 
result_description
ˆˆ] o
=
ˆˆp q
	resultado
ˆˆr {
.
ˆˆ{ |
titleˆˆ| Å
}ˆˆÇ É
,ˆˆÉ Ñ
HttpStatusCodeˆˆÖ ì
.ˆˆì î
OKˆˆî ñ
)ˆˆñ ó
;ˆˆó ò
}
˜˜ 
catch
¯¯ 
(
¯¯ 
LogicaException
¯¯ "
oe
¯¯# %
)
¯¯% &
{
˘˘ 
return
˙˙ 
new
˙˙ "
JsonHttpStatusResult
˙˙ /
(
˙˙/ 0
Util
˙˙0 4
.
˙˙4 5
	ErrorJson
˙˙5 >
(
˙˙> ?
oe
˙˙? A
)
˙˙A B
,
˙˙B C
HttpStatusCode
˙˙D R
.
˙˙R S!
InternalServerError
˙˙S f
)
˙˙f g
;
˙˙g h
}
˚˚ 
catch
¸¸ 
(
¸¸ 
	Exception
¸¸ 
e
¸¸ 
)
¸¸ 
{
˝˝ 
return
˛˛ 
new
˛˛ "
JsonHttpStatusResult
˛˛ /
(
˛˛/ 0
Util
˛˛0 4
.
˛˛4 5
	ErrorJson
˛˛5 >
(
˛˛> ?
new
˛˛? B
	Exception
˛˛C L
(
˛˛L M
$str
˛˛M p
,
˛˛p q
e
˛˛r s
)
˛˛s t
)
˛˛t u
,
˛˛u v
HttpStatusCode˛˛w Ö
.˛˛Ö Ü#
InternalServerError˛˛Ü ô
)˛˛ô ö
;˛˛ö õ
}
ˇˇ 
}
ÄÄ 	
public
ÇÇ 

JsonResult
ÇÇ "
ObtenerSedePrincipal
ÇÇ .
(
ÇÇ. /
)
ÇÇ/ 0
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 6
(EstablecimientoComercialExtendidoConLogo
áá 8
sede
áá9 =
=
áá> ?
_sedeLogica
áá@ K
.
ááK L 
ObtenerSedeConLogo
ááL ^
(
áá^ _
)
áá_ `
;
áá` a#
RegistroSedeViewModel
àà %
sedeViewModel
àà& 3
=
àà4 5
new
àà6 9#
RegistroSedeViewModel
àà: O
(
ààO P
sede
ààP T
)
ààT U
;
ààU V
return
ââ 
Json
ââ 
(
ââ 
sedeViewModel
ââ )
)
ââ) *
;
ââ* +
}
ää 
catch
ãã 
(
ãã 
	Exception
ãã 
e
ãã 
)
ãã 
{
åå 
return
çç 
Json
çç 
(
çç 
Util
çç  
.
çç  !
	ErrorJson
çç! *
(
çç* +
e
çç+ ,
)
çç, -
)
çç- .
;
çç. /
}
éé 
}
èè 	
public
ëë 

JsonResult
ëë 0
"ObtenerEstablecimientosComerciales
ëë <
(
ëë< =
)
ëë= >
{
íí 	
try
ìì 
{
îî 
List
ïï 
<
ïï /
!EstablecimientoComercialExtendido
ïï 6
>
ïï6 7)
establecimientosComerciales
ïï8 S
=
ïïT U$
_establecimientoLogica
ïïV l
.
ïïl mC
4ObtenerEstablecimientosComercialesExtendidosVigentesïïm °
(ïï° ¢
)ïï¢ £
;ïï£ §
List
ññ 
<
ññ $
ComboGenericoViewModel
ññ +
>
ññ+ ,/
!establecimientoComercialViewModel
ññ- N
=
ññO P$
ComboGenericoViewModel
ññQ g
.
ññg h
Convert
ññh o
(
ñño p*
establecimientosComercialesññp ã
)ññã å
;ññå ç
return
óó 
Json
óó 
(
óó /
!establecimientoComercialViewModel
óó =
)
óó= >
;
óó> ?
}
òò 
catch
ôô 
(
ôô 
	Exception
ôô 
e
ôô 
)
ôô 
{
öö 
return
õõ 
Json
õõ 
(
õõ 
Util
õõ  
.
õõ  !
	ErrorJson
õõ! *
(
õõ* +
e
õõ+ ,
)
õõ, -
)
õõ- .
;
õõ. /
}
úú 
}
ùù 	
public
üü 

JsonResult
üü 1
#ObtenerCentrosDeAtencionParaPrecios
üü =
(
üü= >
)
üü> ?
{
†† 	
try
°° 
{
¢¢ 
List
££ 
<
££ 
CentroDeAtencion
££ %
>
££% &
centrosDeAtencion
££' 8
=
££9 :#
_centroAtencionLogica
££; P
.
££P Q.
 ObtenerCentrosDeAtencionVigentes
££Q q
(
££q r
)
££r s
;
££s t
List
§§ 
<
§§ $
ComboGenericoViewModel
§§ +
>
§§+ ,$
centrosDeAtencionCombo
§§- C
=
§§D E
new
§§F I
List
§§J N
<
§§N O$
ComboGenericoViewModel
§§O e
>
§§e f
(
§§f g
)
§§g h
;
§§h i
foreach
•• 
(
•• 
var
•• 
centroDeAtencion
•• -
in
••. 0
centrosDeAtencion
••1 B
)
••B C
{
¶¶ $
centrosDeAtencionCombo
ßß *
.
ßß* +
Add
ßß+ .
(
ßß. /
new
ßß/ 2$
ComboGenericoViewModel
ßß3 I
(
ßßI J
centroDeAtencion
ßßJ Z
.
ßßZ [
Id
ßß[ ]
,
ßß] ^
centroDeAtencion
ßß_ o
.
ßßo p'
EstablecimientoComercialßßp à
.ßßà â
NombreInternoßßâ ñ
+ßßó ò
$strßßô û
+ßßü † 
centroDeAtencionßß° ±
.ßß± ≤
Nombreßß≤ ∏
)ßß∏ π
)ßßπ ∫
;ßß∫ ª
}
®® 
return
©© 
Json
©© 
(
©© $
centrosDeAtencionCombo
©© 2
)
©©2 3
;
©©3 4
}
™™ 
catch
´´ 
(
´´ 
	Exception
´´ 
e
´´ 
)
´´ 
{
¨¨ 
return
≠≠ 
Json
≠≠ 
(
≠≠ 
Util
≠≠  
.
≠≠  !
	ErrorJson
≠≠! *
(
≠≠* +
e
≠≠+ ,
)
≠≠, -
)
≠≠- .
;
≠≠. /
}
ÆÆ 
}
ØØ 	
public
±± 
	Direccion
±± %
CrearYResolverDireccion
±± 0
(
±±0 1 
DireccionViewModel
±±1 C 
direccionViewModel
±±D V
,
±±V W
int
±±X [
idActor
±±\ c
)
±±c d
{
≤≤ 	
	Direccion
≥≥ 
	direccion
≥≥ 
=
≥≥  !
new
≥≥" %
	Direccion
≥≥& /
(
≥≥/ 0
)
≥≥0 1
;
≥≥1 2
if
µµ 
(
µµ  
direccionViewModel
µµ "
!=
µµ# %
null
µµ& *
)
µµ* +
{
∂∂ 
if
∑∑ 
(
∑∑  
direccionViewModel
∑∑ &
.
∑∑& '
Id
∑∑' )
>
∑∑* +
$num
∑∑, -
)
∑∑- .
{
∏∏ 
	direccion
ππ 
=
ππ 
new
ππ  #
	Direccion
ππ$ -
(
ππ- . 
direccionViewModel
ππ. @
.
ππ@ A
Id
ππA C
,
ππC D
idActor
ππE L
,
ππL M 
direccionViewModel
ππN `
.
ππ` a
Tipo
ππa e
.
ππe f
Id
ππf h
,
ππh i 
direccionViewModel
ππj |
.
ππ| }
Nacionππ} É
.ππÉ Ñ
IdππÑ Ü
,ππÜ á"
direccionViewModelππà ö
.ππö õ
Ubigeoππõ °
.ππ° ¢
Idππ¢ §
,ππ§ •"
direccionViewModelππ¶ ∏
.ππ∏ π
Detalleπππ ¿
,ππ¿ ¡
null
∫∫ 
,
∫∫ 
null
∫∫ "
,
∫∫" # 
direccionViewModel
∫∫$ 6
.
∫∫6 7
EsPrincipal
∫∫7 B
,
∫∫B C 
direccionViewModel
∫∫D V
.
∫∫V W
	EsVigente
∫∫W `
)
∫∫` a
;
∫∫a b
}
ªª 
else
ºº 
{
ΩΩ 
	direccion
ææ 
=
ææ 
new
ææ  #
	Direccion
ææ$ -
(
ææ- .
idActor
ææ. 5
,
ææ5 6
MaestroSettings
ææ7 F
.
ææF G
Default
ææG N
.
ææN O:
,IdDetalleMaestroTipoDireccionDomicilioFiscal
ææO {
,
ææ{ |
MaestroSettingsææ} å
.ææå ç
Defaultææç î
.ææî ï*
IdDetalleMaestroNacionPeruææï Ø
,ææØ ∞"
direccionViewModelææ± √
.ææ√ ƒ
Ubigeoææƒ  
.ææ  À
IdææÀ Õ
,ææÕ Œ 
direccionViewModel
øø *
.
øø* +
Detalle
øø+ 2
,
øø2 3
null
øø4 8
,
øø8 9
null
øø: >
,
øø> ? 
direccionViewModel
øø@ R
.
øøR S
EsPrincipal
øøS ^
,
øø^ _ 
direccionViewModel
øø` r
.
øør s
	EsVigente
øøs |
)
øø| }
;
øø} ~
}
¿¿ 
}
¡¡ 
return
¬¬ 
	direccion
¬¬ 
;
¬¬ 
}
√√ 	
public
≈≈ 
	Direccion
≈≈ 
CrearDireccion
≈≈ '
(
≈≈' ( 
DireccionViewModel
≈≈( :
direccionSede
≈≈; H
)
≈≈H I
{
∆∆ 	
	Direccion
«« 
	direccion
«« 
=
««  !
new
««" %
	Direccion
««& /
(
««/ 0
)
««0 1
;
««1 2
if
…… 
(
…… 
direccionSede
…… 
!=
……  
null
……! %
)
……% &
{
   
	direccion
ÀÀ 
=
ÀÀ 
new
ÀÀ 
	Direccion
ÀÀ  )
(
ÀÀ) *
MaestroSettings
ÀÀ* 9
.
ÀÀ9 :
Default
ÀÀ: A
.
ÀÀA B:
,IdDetalleMaestroTipoDireccionDomicilioFiscal
ÀÀB n
,
ÀÀn o
MaestroSettings
ÀÀp 
.ÀÀ Ä
DefaultÀÀÄ á
.ÀÀá à*
IdDetalleMaestroNacionPeruÀÀà ¢
,ÀÀ¢ £
direccionSedeÀÀ§ ±
.ÀÀ± ≤
UbigeoÀÀ≤ ∏
.ÀÀ∏ π
IdÀÀπ ª
,ÀÀª º
direccionSedeÀÀΩ  
.ÀÀ  À
DetalleÀÀÀ “
,ÀÀ“ ”
null
ÃÃ 
,
ÃÃ 
null
ÃÃ 
,
ÃÃ 
direccionSede
ÃÃ  -
.
ÃÃ- .
EsPrincipal
ÃÃ. 9
,
ÃÃ9 :
direccionSede
ÃÃ; H
.
ÃÃH I
	EsVigente
ÃÃI R
)
ÃÃR S
;
ÃÃS T
}
ÕÕ 
return
œœ 
	direccion
œœ 
;
œœ 
}
–– 	
public
‘‘ 

JsonResult
‘‘ 
CrearSucursal
‘‘ '
(
‘‘' ('
RegistroSucursalViewModel
‘‘( A
sucursal
‘‘B J
)
‘‘J K
{
’’ 	
try
÷÷ 
{
◊◊ 
OperationResult
ÿÿ 
	resultado
ÿÿ  )
;
ÿÿ) *
if
ŸŸ 
(
ŸŸ 
sucursal
ŸŸ 
.
ŸŸ 
Id
ŸŸ 
>
ŸŸ  !
$num
ŸŸ" #
)
ŸŸ# $
{
⁄⁄ 
	resultado
€€ 
=
€€ 
_sucursalLogica
€€  /
.
€€/ 0 
ActualizarSucursal
€€0 B
(
€€B C
sucursal
€€C K
.
€€K L
IdActor
€€L S
,
€€S T
sucursal
€€U ]
.
€€] ^
Id
€€^ `
,
€€` a
sucursal
€€b j
.
€€j k$
CodigoEstablecimiento€€k Ä
,€€Ä Å
sucursal€€Ç ä
.€€ä ã,
CodigoEstablecimientoDigemid€€ã ß
,€€ß ®
sucursal€€© ±
.€€± ≤'
InformacionPublicitaria€€≤ …
,€€…  
sucursal€€À ”
.€€” ‘
Nombre€€‘ ⁄
,€€⁄ €
sucursal€€‹ ‰
.€€‰ Â
NombreInterno€€Â Ú
,€€Ú Û
sucursal€€Ù ¸
.€€¸ ˝
Telefono€€˝ Ö
,€€Ö Ü
sucursal€€á è
.€€è ê
Correo€€ê ñ
,€€ñ ó'
CrearYResolverDireccion€€ò Ø
(€€Ø ∞
sucursal€€∞ ∏
.€€∏ π
	Direccion€€π ¬
,€€¬ √
sucursal€€ƒ Ã
.€€Ã Õ
IdActor€€Õ ‘
)€€‘ ’
,€€’ ÷
sucursal€€◊ ﬂ
.€€ﬂ ‡
Foto€€‡ ‰
.€€‰ Â
HayFoto€€Â Ï
?€€Ì Ó
Convert€€Ô ˆ
.€€ˆ ˜ 
FromBase64String€€˜ á
(€€á à
sucursal€€à ê
.€€ê ë
Foto€€ë ï
.€€ï ñ
Foto€€ñ ö
)€€ö õ
:€€ú ù
null€€û ¢
)€€¢ £
;€€£ §
}
‹‹ 
else
›› 
{
ﬁﬁ 
if
ﬂﬂ 
(
ﬂﬂ 
sucursal
ﬂﬂ  
.
ﬂﬂ  !
IdActor
ﬂﬂ! (
>
ﬂﬂ) *
$num
ﬂﬂ+ ,
)
ﬂﬂ, -
{
‡‡ 
	resultado
·· !
=
··" #
new
··$ '
OperationResult
··( 7
(
··7 8
)
··8 9
;
··9 :
}
„„ 
else
‰‰ 
{
ÂÂ 
	resultado
ÊÊ !
=
ÊÊ" #
_sucursalLogica
ÊÊ$ 3
.
ÊÊ3 4
CrearSucursal
ÊÊ4 A
(
ÊÊA B
sucursal
ÊÊB J
.
ÊÊJ K#
CodigoEstablecimiento
ÊÊK `
,
ÊÊ` a
sucursal
ÊÊb j
.
ÊÊj k+
CodigoEstablecimientoDigemidÊÊk á
,ÊÊá à
sucursalÊÊâ ë
.ÊÊë í'
InformacionPublicitariaÊÊí ©
,ÊÊ© ™
sucursalÊÊ´ ≥
.ÊÊ≥ ¥
NombreÊÊ¥ ∫
,ÊÊ∫ ª
sucursalÊÊº ƒ
.ÊÊƒ ≈
NombreInternoÊÊ≈ “
,ÊÊ“ ”
sucursalÊÊ‘ ‹
.ÊÊ‹ ›
TelefonoÊÊ› Â
,ÊÊÂ Ê
sucursalÊÊÁ Ô
.ÊÊÔ 
CorreoÊÊ ˆ
,ÊÊˆ ˜
CrearDireccionÊÊ¯ Ü
(ÊÊÜ á
sucursalÊÊá è
.ÊÊè ê
	DireccionÊÊê ô
)ÊÊô ö
,ÊÊö õ
sucursalÊÊú §
.ÊÊ§ •
FotoÊÊ• ©
.ÊÊ© ™
HayFotoÊÊ™ ±
?ÊÊ≤ ≥
ConvertÊÊ¥ ª
.ÊÊª º 
FromBase64StringÊÊº Ã
(ÊÊÃ Õ
sucursalÊÊÕ ’
.ÊÊ’ ÷
FotoÊÊ÷ ⁄
.ÊÊ⁄ €
FotoÊÊ€ ﬂ
)ÊÊﬂ ‡
:ÊÊ· ‚
nullÊÊ„ Á
)ÊÊÁ Ë
;ÊÊË È
}
ÁÁ 
}
ËË 
Util
ÍÍ 
.
ÍÍ (
ManageIfResultIsNotSuccess
ÍÍ /
(
ÍÍ/ 0
	resultado
ÍÍ0 9
,
ÍÍ9 :
$str
ÍÍ; Y
)
ÍÍY Z
;
ÍÍZ [
return
ÎÎ 
new
ÎÎ "
JsonHttpStatusResult
ÎÎ /
(
ÎÎ/ 0
new
ÎÎ0 3
{
ÎÎ4 5
code_result
ÎÎ6 A
=
ÎÎB C
	resultado
ÎÎD M
.
ÎÎM N
code_result
ÎÎN Y
,
ÎÎY Z
data
ÎÎ[ _
=
ÎÎ` a
	resultado
ÎÎb k
.
ÎÎk l
data
ÎÎl p
,
ÎÎp q!
result_descriptionÎÎr Ñ
=ÎÎÖ Ü
	resultadoÎÎá ê
.ÎÎê ë
titleÎÎë ñ
}ÎÎó ò
,ÎÎò ô
HttpStatusCodeÎÎö ®
.ÎÎ® ©
OKÎÎ© ´
)ÎÎ´ ¨
;ÎÎ¨ ≠
}
ÏÏ 
catch
ÌÌ 
(
ÌÌ 
LogicaException
ÌÌ "
oe
ÌÌ# %
)
ÌÌ% &
{
ÓÓ 
return
ÔÔ 
new
ÔÔ "
JsonHttpStatusResult
ÔÔ /
(
ÔÔ/ 0
Util
ÔÔ0 4
.
ÔÔ4 5
	ErrorJson
ÔÔ5 >
(
ÔÔ> ?
oe
ÔÔ? A
)
ÔÔA B
,
ÔÔB C
HttpStatusCode
ÔÔD R
.
ÔÔR S!
InternalServerError
ÔÔS f
)
ÔÔf g
;
ÔÔg h
}
 
catch
ÒÒ 
(
ÒÒ 
	Exception
ÒÒ 
e
ÒÒ 
)
ÒÒ 
{
ÚÚ 
return
ÛÛ 
new
ÛÛ "
JsonHttpStatusResult
ÛÛ /
(
ÛÛ/ 0
Util
ÛÛ0 4
.
ÛÛ4 5
	ErrorJson
ÛÛ5 >
(
ÛÛ> ?
new
ÛÛ? B
	Exception
ÛÛC L
(
ÛÛL M
$str
ÛÛM t
,
ÛÛt u
e
ÛÛv w
)
ÛÛw x
)
ÛÛx y
,
ÛÛy z
HttpStatusCodeÛÛ{ â
.ÛÛâ ä#
InternalServerErrorÛÛä ù
)ÛÛù û
;ÛÛû ü
}
ÙÙ 
}
ıı 	
public
˜˜ 

JsonResult
˜˜ &
ObtenerSucursalesBandeja
˜˜ 2
(
˜˜2 3
)
˜˜3 4
{
¯¯ 	
try
˘˘ 
{
˙˙ 
List
˚˚ 
<
˚˚ 
Sucursal
˚˚ 
>
˚˚ 

sucursales
˚˚ )
=
˚˚* +
_sucursalLogica
˚˚, ;
.
˚˚; <'
ObtenerSucursalesVigentes
˚˚< U
(
˚˚U V
)
˚˚V W
;
˚˚W X
List
¸¸ 
<
¸¸ &
BandejaSucursalViewModel
¸¸ -
>
¸¸- .!
sucursalesViewModel
¸¸/ B
=
¸¸C D&
BandejaSucursalViewModel
¸¸E ]
.
¸¸] ^
Convert
¸¸^ e
(
¸¸e f

sucursales
¸¸f p
)
¸¸p q
;
¸¸q r
return
˝˝ 
Json
˝˝ 
(
˝˝ !
sucursalesViewModel
˝˝ /
)
˝˝/ 0
;
˝˝0 1
}
˛˛ 
catch
ˇˇ 
(
ˇˇ 
	Exception
ˇˇ 
e
ˇˇ 
)
ˇˇ 
{
ÄÄ 
return
ÅÅ 
Json
ÅÅ 
(
ÅÅ 
Util
ÅÅ  
.
ÅÅ  !
	ErrorJson
ÅÅ! *
(
ÅÅ* +
e
ÅÅ+ ,
)
ÅÅ, -
)
ÅÅ- .
;
ÅÅ. /
}
ÇÇ 
}
ÉÉ 	
public
ÖÖ 

JsonResult
ÖÖ 
ObtenerSucursales
ÖÖ +
(
ÖÖ+ ,
)
ÖÖ, -
{
ÜÜ 	
try
áá 
{
àà 
List
ââ 
<
ââ 
Sucursal
ââ 
>
ââ 

sucursales
ââ )
=
ââ* +
_sucursalLogica
ââ, ;
.
ââ; <'
ObtenerSucursalesVigentes
ââ< U
(
ââU V
)
ââV W
;
ââW X
List
ää 
<
ää $
ComboGenericoViewModel
ää +
>
ää+ ,!
sucursalesViewModel
ää- @
=
ääA B$
ComboGenericoViewModel
ääC Y
.
ääY Z
Convert
ääZ a
(
ääa b

sucursales
ääb l
)
ääl m
;
ääm n
return
ãã 
Json
ãã 
(
ãã !
sucursalesViewModel
ãã /
)
ãã/ 0
;
ãã0 1
}
åå 
catch
çç 
(
çç 
	Exception
çç 
e
çç 
)
çç 
{
éé 
return
èè 
Json
èè 
(
èè 
Util
èè  
.
èè  !
	ErrorJson
èè! *
(
èè* +
e
èè+ ,
)
èè, -
)
èè- .
;
èè. /
}
êê 
}
ëë 	
public
ìì 

JsonResult
ìì 
ObtenerSucursal
ìì )
(
ìì) *
int
ìì* -

idSucursal
ìì. 8
)
ìì8 9
{
îî 	
try
ïï 
{
ññ 6
(EstablecimientoComercialExtendidoConLogo
óó 8
sucursal
óó9 A
=
óóB C#
_establecimientoDatos
óóD Y
.
óóY Z>
/ObtenerEstablecimientoComercialExtendidoConLogoóóZ â
(óóâ ä

idSucursalóóä î
)óóî ï
;óóï ñ'
RegistroSucursalViewModel
òò )
sucursalViewModel
òò* ;
=
òò< =
new
òò> A'
RegistroSucursalViewModel
òòB [
(
òò[ \
sucursal
òò\ d
)
òòd e
;
òòe f
return
ôô 
Json
ôô 
(
ôô 
sucursalViewModel
ôô -
)
ôô- .
;
ôô. /
}
öö 
catch
õõ 
(
õõ 
	Exception
õõ 
e
õõ 
)
õõ 
{
úú 
return
ùù 
Json
ùù 
(
ùù 
Util
ùù  
.
ùù  !
	ErrorJson
ùù! *
(
ùù* +
e
ùù+ ,
)
ùù, -
)
ùù- .
;
ùù. /
}
ûû 
}
üü 	
public
°° 

JsonResult
°° 
EliminarSucursal
°° *
(
°°* +
int
°°+ .

idSucursal
°°/ 9
)
°°9 :
{
¢¢ 	
try
££ 
{
§§ 
OperationResult
¶¶ 
	resultado
¶¶  )
=
¶¶* +
_sucursalLogica
¶¶, ;
.
¶¶; <
DarDeBajaSucursal
¶¶< M
(
¶¶M N

idSucursal
¶¶N X
)
¶¶X Y
;
¶¶Y Z
Util
ßß 
.
ßß (
ManageIfResultIsNotSuccess
ßß /
(
ßß/ 0
	resultado
ßß0 9
,
ßß9 :
$str
ßß; [
)
ßß[ \
;
ßß\ ]
return
®® 
new
®® "
JsonHttpStatusResult
®® /
(
®®/ 0
new
®®0 3
{
®®4 5
code_result
®®6 A
=
®®B C
	resultado
®®D M
.
®®M N
code_result
®®N Y
,
®®Y Z
data
®®[ _
=
®®` a
	resultado
®®b k
.
®®k l
data
®®l p
,
®®p q!
result_description®®r Ñ
=®®Ö Ü
	resultado®®á ê
.®®ê ë
title®®ë ñ
}®®ó ò
,®®ò ô
HttpStatusCode®®ö ®
.®®® ©
OK®®© ´
)®®´ ¨
;®®¨ ≠
}
©© 
catch
™™ 
(
™™ 
LogicaException
™™ "
oe
™™# %
)
™™% &
{
´´ 
return
¨¨ 
new
¨¨ "
JsonHttpStatusResult
¨¨ /
(
¨¨/ 0
Util
¨¨0 4
.
¨¨4 5
	ErrorJson
¨¨5 >
(
¨¨> ?
oe
¨¨? A
)
¨¨A B
,
¨¨B C
HttpStatusCode
¨¨D R
.
¨¨R S!
InternalServerError
¨¨S f
)
¨¨f g
;
¨¨g h
}
≠≠ 
catch
ÆÆ 
(
ÆÆ 
	Exception
ÆÆ 
e
ÆÆ 
)
ÆÆ 
{
ØØ 
return
∞∞ 
new
∞∞ "
JsonHttpStatusResult
∞∞ /
(
∞∞/ 0
Util
∞∞0 4
.
∞∞4 5
	ErrorJson
∞∞5 >
(
∞∞> ?
new
∞∞? B
	Exception
∞∞C L
(
∞∞L M
$str
∞∞M u
,
∞∞u v
e
∞∞w x
)
∞∞x y
)
∞∞y z
,
∞∞z {
HttpStatusCode∞∞| ä
.∞∞ä ã#
InternalServerError∞∞ã û
)∞∞û ü
;∞∞ü †
}
±± 
}
≥≥ 	
public
∑∑ 

JsonResult
∑∑ #
CrearCentroDeAtencion
∑∑ /
(
∑∑/ 0/
!RegistroCentroDeAtencionViewModel
∑∑0 Q
centroDeAtencion
∑∑R b
,
∑∑b c
int
∑∑d g)
idEstablecimientoComercial∑∑h Ç
)∑∑Ç É
{
∏∏ 	
try
ππ 
{
∫∫ 
OperationResult
ªª 
	resultado
ªª  )
;
ªª) *
List
ºº 
<
ºº 
int
ºº 
>
ºº 
roles
ºº 
=
ºº  !
new
ºº" %
List
ºº& *
<
ºº* +
int
ºº+ .
>
ºº. /
(
ºº/ 0
)
ºº0 1
;
ºº1 2
roles
ΩΩ 
=
ΩΩ 
centroDeAtencion
ΩΩ (
.
ΩΩ( )
Roles
ΩΩ) .
.
ΩΩ. /
Select
ΩΩ/ 5
(
ΩΩ5 6
r
ΩΩ6 7
=>
ΩΩ8 :
r
ΩΩ; <
.
ΩΩ< =
Id
ΩΩ= ?
)
ΩΩ? @
.
ΩΩ@ A
ToList
ΩΩA G
(
ΩΩG H
)
ΩΩH I
;
ΩΩI J
if
ææ 
(
ææ 
centroDeAtencion
ææ $
.
ææ$ %
Id
ææ% '
>
ææ( )
$num
ææ* +
)
ææ+ ,
{
øø 
	resultado
¿¿ 
=
¿¿ #
_centroAtencionLogica
¿¿  5
.
¿¿5 6(
ActualizarCentroDeAtencion
¿¿6 P
(
¿¿P Q
ProfileData
¿¿Q \
(
¿¿\ ]
)
¿¿] ^
.
¿¿^ _
Empleado
¿¿_ g
.
¿¿g h
Id
¿¿h j
,
¿¿j k
centroDeAtencion
¿¿l |
.
¿¿| }
IdActor¿¿} Ñ
,¿¿Ñ Ö 
centroDeAtencion¿¿Ü ñ
.¿¿ñ ó
Id¿¿ó ô
,¿¿ô ö 
centroDeAtencion¿¿õ ´
.¿¿´ ¨
Codigo¿¿¨ ≤
,¿¿≤ ≥ 
centroDeAtencion¿¿¥ ƒ
.¿¿ƒ ≈
Nombre¿¿≈ À
,¿¿À Ã 
centroDeAtencion¿¿Õ ›
.¿¿› ﬁ$
SalidaBienesSinStock¿¿ﬁ Ú
,¿¿Ú Û
roles¿¿Ù ˘
,¿¿˘ ˙*
idEstablecimientoComercial¿¿˚ ï
)¿¿ï ñ
;¿¿ñ ó
}
¡¡ 
else
¬¬ 
{
√√ 
if
ƒƒ 
(
ƒƒ 
centroDeAtencion
ƒƒ (
.
ƒƒ( )
IdActor
ƒƒ) 0
>
ƒƒ1 2
$num
ƒƒ3 4
)
ƒƒ4 5
{
≈≈ 
	resultado
∆∆ !
=
∆∆" #
new
∆∆$ '
OperationResult
∆∆( 7
(
∆∆7 8
)
∆∆8 9
;
∆∆9 :
}
«« 
else
»» 
{
…… 
	resultado
   !
=
  " ##
_centroAtencionLogica
  $ 9
.
  9 :#
CrearCentroDeAtencion
  : O
(
  O P
ProfileData
  P [
(
  [ \
)
  \ ]
.
  ] ^
Empleado
  ^ f
.
  f g
Id
  g i
,
  i j
centroDeAtencion
  k {
.
  { |
Codigo  | Ç
,  Ç É 
centroDeAtencion  Ñ î
.  î ï
Nombre  ï õ
,  õ ú 
centroDeAtencion  ù ≠
.  ≠ Æ$
SalidaBienesSinStock  Æ ¬
,  ¬ √
roles  ƒ …
,  …  *
idEstablecimientoComercial  À Â
)  Â Ê
;  Ê Á
}
ÀÀ 
}
ÃÃ 
Util
ÕÕ 
.
ÕÕ (
ManageIfResultIsNotSuccess
ÕÕ /
(
ÕÕ/ 0
	resultado
ÕÕ0 9
,
ÕÕ9 :
$str
ÕÕ; `
)
ÕÕ` a
;
ÕÕa b
return
ŒŒ 
new
ŒŒ "
JsonHttpStatusResult
ŒŒ /
(
ŒŒ/ 0
new
ŒŒ0 3
{
ŒŒ4 5
	resultado
ŒŒ6 ?
.
ŒŒ? @
code_result
ŒŒ@ K
,
ŒŒK L
	resultado
ŒŒM V
.
ŒŒV W
data
ŒŒW [
,
ŒŒ[ \ 
result_description
ŒŒ] o
=
ŒŒp q
	resultado
ŒŒr {
.
ŒŒ{ |
titleŒŒ| Å
}ŒŒÇ É
,ŒŒÉ Ñ
HttpStatusCodeŒŒÖ ì
.ŒŒì î
OKŒŒî ñ
)ŒŒñ ó
;ŒŒó ò
}
œœ 
catch
–– 
(
–– 
LogicaException
–– "
oe
––# %
)
––% &
{
—— 
return
““ 
new
““ "
JsonHttpStatusResult
““ /
(
““/ 0
Util
““0 4
.
““4 5
	ErrorJson
““5 >
(
““> ?
oe
““? A
)
““A B
,
““B C
HttpStatusCode
““D R
.
““R S!
InternalServerError
““S f
)
““f g
;
““g h
}
”” 
catch
‘‘ 
(
‘‘ 
	Exception
‘‘ 
e
‘‘ 
)
‘‘ 
{
’’ 
return
÷÷ 
new
÷÷ "
JsonHttpStatusResult
÷÷ /
(
÷÷/ 0
Util
÷÷0 4
.
÷÷4 5
	ErrorJson
÷÷5 >
(
÷÷> ?
new
÷÷? B
	Exception
÷÷C L
(
÷÷L M
$str
÷÷M {
,
÷÷{ |
e
÷÷} ~
)
÷÷~ 
)÷÷ Ä
,÷÷Ä Å
HttpStatusCode÷÷Ç ê
.÷÷ê ë#
InternalServerError÷÷ë §
)÷÷§ •
;÷÷• ¶
}
◊◊ 
}
ÿÿ 	
public
⁄⁄ 

JsonResult
⁄⁄ -
ObtenerCentrosDeAtencionBandeja
⁄⁄ 9
(
⁄⁄9 :
int
⁄⁄: =(
idEstablecimientoComercial
⁄⁄> X
)
⁄⁄X Y
{
€€ 	
try
‹‹ 
{
›› 
List
ﬁﬁ 
<
ﬁﬁ '
CentroDeAtencionExtendido
ﬁﬁ .
>
ﬁﬁ. /
centrosDeAtencion
ﬁﬁ0 A
=
ﬁﬁB C
new
ﬁﬁD G
List
ﬁﬁH L
<
ﬁﬁL M'
CentroDeAtencionExtendido
ﬁﬁM f
>
ﬁﬁf g
(
ﬁﬁg h
)
ﬁﬁh i
;
ﬁﬁi j
centrosDeAtencion
ﬂﬂ !
=
ﬂﬂ" ##
_centroAtencionLogica
ﬂﬂ$ 9
.
ﬂﬂ9 :I
;ObtenerCentrosDeAtencionVigentesPorEstablecimientoComercial
ﬂﬂ: u
(
ﬂﬂu v)
idEstablecimientoComercialﬂﬂv ê
)ﬂﬂê ë
;ﬂﬂë í
List
‡‡ 
<
‡‡ .
 BandejaCentroDeAtencionViewModel
‡‡ 5
>
‡‡5 6(
centrosDeAtencionViewModel
‡‡7 Q
=
‡‡R S.
 BandejaCentroDeAtencionViewModel
‡‡T t
.
‡‡t u
Convert
‡‡u |
(
‡‡| } 
centrosDeAtencion‡‡} é
)‡‡é è
;‡‡è ê
return
·· 
Json
·· 
(
·· (
centrosDeAtencionViewModel
·· 6
)
··6 7
;
··7 8
}
‚‚ 
catch
„„ 
(
„„ 
	Exception
„„ 
e
„„ 
)
„„ 
{
‰‰ 
return
ÂÂ 
Json
ÂÂ 
(
ÂÂ 
Util
ÂÂ  
.
ÂÂ  !
	ErrorJson
ÂÂ! *
(
ÂÂ* +
e
ÂÂ+ ,
)
ÂÂ, -
)
ÂÂ- .
;
ÂÂ. /
}
ÊÊ 
}
ÁÁ 	
public
ÈÈ 

JsonResult
ÈÈ &
ObtenerCentrosDeAtencion
ÈÈ 2
(
ÈÈ2 3
)
ÈÈ3 4
{
ÍÍ 	
try
ÎÎ 
{
ÏÏ 
List
ÌÌ 
<
ÌÌ 
CentroDeAtencion
ÌÌ %
>
ÌÌ% &
centrosDeAtencion
ÌÌ' 8
=
ÌÌ9 :#
_centroAtencionLogica
ÌÌ; P
.
ÌÌP Q.
 ObtenerCentrosDeAtencionVigentes
ÌÌQ q
(
ÌÌq r
)
ÌÌr s
;
ÌÌs t
List
ÓÓ 
<
ÓÓ $
ComboGenericoViewModel
ÓÓ +
>
ÓÓ+ ,(
centrosDeAtencionViewModel
ÓÓ- G
=
ÓÓH I$
ComboGenericoViewModel
ÓÓJ `
.
ÓÓ` a
Convert
ÓÓa h
(
ÓÓh i
centrosDeAtencion
ÓÓi z
)
ÓÓz {
;
ÓÓ{ |
return
ÔÔ 
Json
ÔÔ 
(
ÔÔ (
centrosDeAtencionViewModel
ÔÔ 6
)
ÔÔ6 7
;
ÔÔ7 8
}
 
catch
ÒÒ 
(
ÒÒ 
	Exception
ÒÒ 
e
ÒÒ 
)
ÒÒ 
{
ÚÚ 
return
ÛÛ 
Json
ÛÛ 
(
ÛÛ 
Util
ÛÛ  
.
ÛÛ  !
	ErrorJson
ÛÛ! *
(
ÛÛ* +
e
ÛÛ+ ,
)
ÛÛ, -
)
ÛÛ- .
;
ÛÛ. /
}
ÙÙ 
}
ıı 	
public
˜˜ 

JsonResult
˜˜ %
ObtenerCentroDeAtencion
˜˜ 1
(
˜˜1 2
int
˜˜2 5 
idCentroDeAtencion
˜˜6 H
,
˜˜H I
int
˜˜J M(
idEstablecimientoComercial
˜˜N h
)
˜˜h i
{
¯¯ 	
try
˘˘ 
{
˙˙ '
CentroDeAtencionExtendido
˚˚ )
centrosDeAtencion
˚˚* ;
=
˚˚< =#
_centroAtencionLogica
˚˚> S
.
˚˚S T2
$ObtenerCentroDeAtencionSucursalOSede
˚˚T x
(
˚˚x y!
idCentroDeAtencion˚˚y ã
,˚˚ã å*
idEstablecimientoComercial˚˚ç ß
)˚˚ß ®
;˚˚® ©/
!RegistroCentroDeAtencionViewModel
¸¸ 1'
centroDeAtencionViewModel
¸¸2 K
=
¸¸L M
new
¸¸N Q/
!RegistroCentroDeAtencionViewModel
¸¸R s
(
¸¸s t 
centrosDeAtencion¸¸t Ö
)¸¸Ö Ü
;¸¸Ü á
return
˝˝ 
Json
˝˝ 
(
˝˝ '
centroDeAtencionViewModel
˝˝ 5
)
˝˝5 6
;
˝˝6 7
}
˛˛ 
catch
ˇˇ 
(
ˇˇ 
	Exception
ˇˇ 
e
ˇˇ 
)
ˇˇ 
{
ÄÄ 
return
ÅÅ 
Json
ÅÅ 
(
ÅÅ 
Util
ÅÅ  
.
ÅÅ  !
	ErrorJson
ÅÅ! *
(
ÅÅ* +
e
ÅÅ+ ,
)
ÅÅ, -
)
ÅÅ- .
;
ÅÅ. /
}
ÇÇ 
}
ÉÉ 	
public
ÖÖ 

JsonResult
ÖÖ A
3ObtenerCentrosDeAtencionPorEstablecimientoComercial
ÖÖ M
(
ÖÖM N
int
ÖÖN Q(
idEstablecimientoComercial
ÖÖR l
)
ÖÖl m
{
ÜÜ 	
try
áá 
{
àà 
List
ââ 
<
ââ '
CentroDeAtencionExtendido
ââ .
>
ââ. /
centrosDeAtencion
ââ0 A
=
ââB C#
_centroAtencionLogica
ââD Y
.
ââY ZJ
;ObtenerCentrosDeAtencionVigentesPorEstablecimientoComercialââZ ï
(ââï ñ*
idEstablecimientoComercialââñ ∞
)ââ∞ ±
;ââ± ≤
List
ää 
<
ää $
ComboGenericoViewModel
ää +
>
ää+ ,(
centrosDeAtencionViewModel
ää- G
=
ääH I$
ComboGenericoViewModel
ääJ `
.
ää` a
Convert
ääa h
(
ääh i
centrosDeAtencion
ääi z
)
ääz {
;
ää{ |
return
ãã 
Json
ãã 
(
ãã (
centrosDeAtencionViewModel
ãã 6
)
ãã6 7
;
ãã7 8
}
åå 
catch
çç 
(
çç 
	Exception
çç 
e
çç 
)
çç 
{
éé 
return
èè 
Json
èè 
(
èè 
Util
èè  
.
èè  !
	ErrorJson
èè! *
(
èè* +
e
èè+ ,
)
èè, -
)
èè- .
;
èè. /
}
êê 
}
ëë 	
public
ìì 

JsonResult
ìì &
EliminarCentroDeAtencion
ìì 2
(
ìì2 3
int
ìì3 6 
idCentroDeAtencion
ìì7 I
)
ììI J
{
îî 	
try
ïï 
{
ññ 
OperationResult
òò 
	resultado
òò  )
=
òò* +#
_centroAtencionLogica
òò, A
.
òòA B'
DarDeBajaCentroDeAtencion
òòB [
(
òò[ \ 
idCentroDeAtencion
òò\ n
)
òòn o
;
òòo p
Util
ôô 
.
ôô (
ManageIfResultIsNotSuccess
ôô /
(
ôô/ 0
	resultado
ôô0 9
,
ôô9 :
$str
ôô; e
)
ôôe f
;
ôôf g
return
öö 
new
öö "
JsonHttpStatusResult
öö /
(
öö/ 0
new
öö0 3
{
öö4 5
code_result
öö6 A
=
ööB C
	resultado
ööD M
.
ööM N
code_result
ööN Y
,
ööY Z
data
öö[ _
=
öö` a
	resultado
ööb k
.
öök l
data
ööl p
,
ööp q!
result_descriptionöör Ñ
=ööÖ Ü
	resultadoööá ê
.ööê ë
titleööë ñ
}ööó ò
,ööò ô
HttpStatusCodeööö ®
.öö® ©
OKöö© ´
)öö´ ¨
;öö¨ ≠
}
õõ 
catch
úú 
(
úú 
LogicaException
úú "
oe
úú# %
)
úú% &
{
ùù 
return
ûû 
new
ûû "
JsonHttpStatusResult
ûû /
(
ûû/ 0
Util
ûû0 4
.
ûû4 5
	ErrorJson
ûû5 >
(
ûû> ?
oe
ûû? A
)
ûûA B
,
ûûB C
HttpStatusCode
ûûD R
.
ûûR S!
InternalServerError
ûûS f
)
ûûf g
;
ûûg h
}
üü 
catch
†† 
(
†† 
	Exception
†† 
e
†† 
)
†† 
{
°° 
return
¢¢ 
new
¢¢ "
JsonHttpStatusResult
¢¢ /
(
¢¢/ 0
Util
¢¢0 4
.
¢¢4 5
	ErrorJson
¢¢5 >
(
¢¢> ?
new
¢¢? B
	Exception
¢¢C L
(
¢¢L M
$str
¢¢M 
,¢¢ Ä
e¢¢Å Ç
)¢¢Ç É
)¢¢É Ñ
,¢¢Ñ Ö
HttpStatusCode¢¢Ü î
.¢¢î ï#
InternalServerError¢¢ï ®
)¢¢® ©
;¢¢© ™
}
££ 
}
•• 	
public
ßß 

JsonResult
ßß T
FEstablecerCentrosDeAtencionParaPreciosYStockDeEstablecimientoComercial
ßß `
(
ßß` a
int
ßßa d(
idEstablecimientoComercial
ßße 
,ßß Ä
intßßÅ Ñ)
idCentroDeAtencionPreciosßßÖ û
,ßßû ü
intßß† £'
idCentroDeAtencionStockßß§ ª
)ßßª º
{
®® 	
try
©© 
{
™™ 
OperationResult
´´ 
	resultado
´´  )
=
´´* +#
_centroAtencionLogica
´´, A
.
´´A BT
EEstablecerCentroDeAtencionParaPreciosYStockDeEstablecimientoComercial´´B á
(´´á à*
idEstablecimientoComercial´´à ¢
,´´¢ £)
idCentroDeAtencionPrecios´´§ Ω
,´´Ω æ'
idCentroDeAtencionStock´´ø ÷
)´´÷ ◊
;´´◊ ÿ
Util
≠≠ 
.
≠≠ (
ManageIfResultIsNotSuccess
≠≠ /
(
≠≠/ 0
	resultado
≠≠0 9
,
≠≠9 :
$str≠≠; ë
)≠≠ë í
;≠≠í ì
return
ÆÆ 
new
ÆÆ "
JsonHttpStatusResult
ÆÆ /
(
ÆÆ/ 0
new
ÆÆ0 3
{
ÆÆ4 5
	resultado
ÆÆ6 ?
.
ÆÆ? @
code_result
ÆÆ@ K
,
ÆÆK L
	resultado
ÆÆM V
.
ÆÆV W
data
ÆÆW [
,
ÆÆ[ \ 
result_description
ÆÆ] o
=
ÆÆp q
	resultado
ÆÆr {
.
ÆÆ{ |
titleÆÆ| Å
}ÆÆÇ É
,ÆÆÉ Ñ
HttpStatusCodeÆÆÖ ì
.ÆÆì î
OKÆÆî ñ
)ÆÆñ ó
;ÆÆó ò
}
ØØ 
catch
∞∞ 
(
∞∞ 
LogicaException
∞∞ "
oe
∞∞# %
)
∞∞% &
{
±± 
return
≤≤ 
new
≤≤ "
JsonHttpStatusResult
≤≤ /
(
≤≤/ 0
Util
≤≤0 4
.
≤≤4 5
	ErrorJson
≤≤5 >
(
≤≤> ?
oe
≤≤? A
)
≤≤A B
,
≤≤B C
HttpStatusCode
≤≤D R
.
≤≤R S!
InternalServerError
≤≤S f
)
≤≤f g
;
≤≤g h
}
≥≥ 
catch
¥¥ 
(
¥¥ 
	Exception
¥¥ 
e
¥¥ 
)
¥¥ 
{
µµ 
return
∂∂ 
new
∂∂ "
JsonHttpStatusResult
∂∂ /
(
∂∂/ 0
Util
∂∂0 4
.
∂∂4 5
	ErrorJson
∂∂5 >
(
∂∂> ?
new
∂∂? B
	Exception
∂∂C L
(
∂∂L M
$str∂∂M £
,∂∂£ §
e∂∂• ¶
)∂∂¶ ß
)∂∂ß ®
,∂∂® ©
HttpStatusCode∂∂™ ∏
.∂∂∏ π#
InternalServerError∂∂π Ã
)∂∂Ã Õ
;∂∂Õ Œ
}
∑∑ 
}
∏∏ 	
public
ºº 

JsonResult
ºº B
4ObtenerCentrosDeAtencionConRolPuntoDeVentaNoVigentes
ºº N
(
ººN O
)
ººO P
{
ΩΩ 	
try
ææ 
{
øø 
List
¿¿ 
<
¿¿ $
ComboGenericoViewModel
¿¿ +
>
¿¿+ ,(
comboGenericoPuntosDeVenta
¿¿- G
=
¿¿H I$
ComboGenericoViewModel
¿¿J `
.
¿¿` a
Convert
¿¿a h
(
¿¿h i#
_centroAtencionLogica
¿¿i ~
.
¿¿~ -
ObtenerPuntosDeVentaNoVigentes¿¿ ù
(¿¿ù û
)¿¿û ü
)¿¿ü †
;¿¿† °
return
¬¬ 
Json
¬¬ 
(
¬¬ (
comboGenericoPuntosDeVenta
¬¬ 6
)
¬¬6 7
;
¬¬7 8
}
√√ 
catch
ƒƒ 
(
ƒƒ 
	Exception
ƒƒ 
e
ƒƒ 
)
ƒƒ 
{
≈≈ 
return
∆∆ 
Json
∆∆ 
(
∆∆ 
Util
∆∆  
.
∆∆  !
	ErrorJson
∆∆! *
(
∆∆* +
e
∆∆+ ,
)
∆∆, -
)
∆∆- .
;
∆∆. /
}
«« 
}
»» 	
public
   

JsonResult
   C
5ObtenerCentrosDeAtencionConRolPuntoDeCompraNoVigentes
   O
(
  O P
)
  P Q
{
ÀÀ 	
try
ÃÃ 
{
ÕÕ 
List
ŒŒ 
<
ŒŒ $
ComboGenericoViewModel
ŒŒ +
>
ŒŒ+ ,)
comboGenericoPuntosDeCompra
ŒŒ- H
=
ŒŒI J$
ComboGenericoViewModel
ŒŒK a
.
ŒŒa b
Convert
ŒŒb i
(
ŒŒi j#
_centroAtencionLogica
ŒŒj 
.ŒŒ Ä/
ObtenerPuntosDeCompraNoVigentesŒŒÄ ü
(ŒŒü †
)ŒŒ† °
)ŒŒ° ¢
;ŒŒ¢ £
return
–– 
Json
–– 
(
–– )
comboGenericoPuntosDeCompra
–– 7
)
––7 8
;
––8 9
}
—— 
catch
““ 
(
““ 
	Exception
““ 
e
““ 
)
““ 
{
”” 
return
‘‘ 
Json
‘‘ 
(
‘‘ 
Util
‘‘  
.
‘‘  !
	ErrorJson
‘‘! *
(
‘‘* +
e
‘‘+ ,
)
‘‘, -
)
‘‘- .
;
‘‘. /
}
’’ 
}
÷÷ 	
public
◊◊ 

JsonResult
◊◊ =
/ObtenerCentrosDeAtencionConRolAlmacenNoVigentes
◊◊ I
(
◊◊I J
)
◊◊J K
{
ÿÿ 	
try
ŸŸ 
{
⁄⁄ 
List
€€ 
<
€€ $
ComboGenericoViewModel
€€ +
>
€€+ ,$
comboGenericoAlmacenes
€€- C
=
€€D E$
ComboGenericoViewModel
€€F \
.
€€\ ]
Convert
€€] d
(
€€d e#
_centroAtencionLogica
€€e z
.
€€z {)
ObtenerAlmacenesNoVigentes€€{ ï
(€€ï ñ
)€€ñ ó
)€€ó ò
;€€ò ô
return
›› 
Json
›› 
(
›› $
comboGenericoAlmacenes
›› 2
)
››2 3
;
››3 4
}
ﬁﬁ 
catch
ﬂﬂ 
(
ﬂﬂ 
	Exception
ﬂﬂ 
e
ﬂﬂ 
)
ﬂﬂ 
{
ﬂﬂ  !
throw
ﬂﬂ" '
e
ﬂﬂ( )
;
ﬂﬂ) *
}
ﬂﬂ+ ,
}
‡‡ 	
public
·· 

JsonResult
·· 8
*ObtenerCentrosDeAtencionConRolPuntoDeVenta
·· D
(
··D E
)
··E F
{
‚‚ 	
try
„„ 
{
‰‰ 
List
ÂÂ 
<
ÂÂ $
ComboGenericoViewModel
ÂÂ +
>
ÂÂ+ ,(
comboGenericoPuntosDeVenta
ÂÂ- G
=
ÂÂH I$
ComboGenericoViewModel
ÂÂJ `
.
ÂÂ` a
Convert
ÂÂa h
(
ÂÂh i#
_centroAtencionLogica
ÂÂi ~
.
ÂÂ~ +
ObtenerPuntosDeVentaVigentesÂÂ õ
(ÂÂõ ú
)ÂÂú ù
)ÂÂù û
;ÂÂû ü
return
ÁÁ 
Json
ÁÁ 
(
ÁÁ (
comboGenericoPuntosDeVenta
ÁÁ 6
)
ÁÁ6 7
;
ÁÁ7 8
}
ËË 
catch
ÈÈ 
(
ÈÈ 
	Exception
ÈÈ 
e
ÈÈ 
)
ÈÈ 
{
ÍÍ 
return
ÎÎ 
Json
ÎÎ 
(
ÎÎ 
Util
ÎÎ  
.
ÎÎ  !
	ErrorJson
ÎÎ! *
(
ÎÎ* +
e
ÎÎ+ ,
)
ÎÎ, -
)
ÎÎ- .
;
ÎÎ. /
}
ÏÏ 
}
ÌÌ 	
public
ÔÔ 

JsonResult
ÔÔ 9
+ObtenerCentrosDeAtencionConRolPuntoDeCompra
ÔÔ E
(
ÔÔE F
)
ÔÔF G
{
 	
try
ÒÒ 
{
ÚÚ 
List
ÛÛ 
<
ÛÛ $
ComboGenericoViewModel
ÛÛ +
>
ÛÛ+ ,)
comboGenericoPuntosDeCompra
ÛÛ- H
=
ÛÛI J$
ComboGenericoViewModel
ÛÛK a
.
ÛÛa b
Convert
ÛÛb i
(
ÛÛi j#
_centroAtencionLogica
ÛÛj 
.ÛÛ Ä-
ObtenerPuntosDeCompraVigentesÛÛÄ ù
(ÛÛù û
)ÛÛû ü
)ÛÛü †
;ÛÛ† °
return
ıı 
Json
ıı 
(
ıı )
comboGenericoPuntosDeCompra
ıı 7
)
ıı7 8
;
ıı8 9
}
ˆˆ 
catch
˜˜ 
(
˜˜ 
	Exception
˜˜ 
e
˜˜ 
)
˜˜ 
{
¯¯ 
return
˘˘ 
Json
˘˘ 
(
˘˘ 
Util
˘˘  
.
˘˘  !
	ErrorJson
˘˘! *
(
˘˘* +
e
˘˘+ ,
)
˘˘, -
)
˘˘- .
;
˘˘. /
}
˙˙ 
}
˚˚ 	
public
˝˝ 

JsonResult
˝˝ 0
"ObtenerCentrosDeAtencionConRolCaja
˝˝ <
(
˝˝< =
)
˝˝= >
{
˛˛ 	
try
ˇˇ 
{
ÄÄ 
List
ÅÅ 
<
ÅÅ $
ComboGenericoViewModel
ÅÅ +
>
ÅÅ+ ,8
*comboGenericoDeEntidadesInternasConRolCaja
ÅÅ- W
=
ÅÅX Y$
ComboGenericoViewModel
ÅÅZ p
.
ÅÅp q
Convert
ÅÅq x
(
ÅÅx y$
_centroAtencionLogicaÅÅy é
.ÅÅé è$
ObtenerCajasVigentesÅÅè £
(ÅÅ£ §
)ÅÅ§ •
)ÅÅ• ¶
;ÅÅ¶ ß
return
ÉÉ 
Json
ÉÉ 
(
ÉÉ 8
*comboGenericoDeEntidadesInternasConRolCaja
ÉÉ F
)
ÉÉF G
;
ÉÉG H
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ 
	Exception
ÖÖ 
e
ÖÖ 
)
ÖÖ 
{
ÖÖ  !
throw
ÖÖ" '
e
ÖÖ( )
;
ÖÖ) *
}
ÖÖ+ ,
}
ÜÜ 	
public
àà 

JsonResult
àà 3
%ObtenerCentrosDeAtencionConRolAlmacen
àà ?
(
àà? @
)
àà@ A
{
ââ 	
try
ää 
{
ãã 
List
åå 
<
åå $
ComboGenericoViewModel
åå +
>
åå+ ,$
comboGenericoAlmacenes
åå- C
=
ååD E$
ComboGenericoViewModel
ååF \
.
åå\ ]
Convert
åå] d
(
ååd e#
_centroAtencionLogica
ååe z
.
ååz {'
ObtenerAlmacenesVigentesåå{ ì
(ååì î
)ååî ï
)ååï ñ
;ååñ ó
return
éé 
Json
éé 
(
éé $
comboGenericoAlmacenes
éé 2
)
éé2 3
;
éé3 4
}
èè 
catch
êê 
(
êê 
	Exception
êê 
e
êê 
)
êê 
{
êê  !
throw
êê" '
e
êê( )
;
êê) *
}
êê+ ,
}
ëë 	
public
ìì 

JsonResult
ìì [
MObtenerCentrosDeAtencionConRolPuntoDeVentaVigentesConEstablecimientoComercial
ìì g
(
ììg h
)
ììh i
{
îî 	
try
ïï 
{
ññ 
List
óó 
<
óó $
ComboGenericoViewModel
óó +
>
óó+ ,(
comboGenericoPuntosDeVenta
óó- G
=
óóH I$
ComboGenericoViewModel
óóJ `
.
óó` aC
4ConvertirCentroDeAtencionConEstablecimientoComercialóóa ï
(óóï ñ%
_centroAtencionLogicaóóñ ´
.óó´ ¨,
ObtenerPuntosDeVentaVigentesóó¨ »
(óó» …
)óó…  
)óó  À
;óóÀ Ã
return
òò 
Json
òò 
(
òò (
comboGenericoPuntosDeVenta
òò 6
)
òò6 7
;
òò7 8
}
ôô 
catch
öö 
(
öö 
	Exception
öö 
e
öö 
)
öö 
{
õõ 
return
úú 
Json
úú 
(
úú 
Util
úú  
.
úú  !
	ErrorJson
úú! *
(
úú* +
e
úú+ ,
)
úú, -
)
úú- .
;
úú. /
}
ùù 
}
ûû 	
public
†† 

JsonResult
†† \
NObtenerCentrosDeAtencionConRolPuntoDeCompraVigentesConEstablecimientoComercial
†† h
(
††h i
)
††i j
{
°° 	
try
¢¢ 
{
££ 
List
§§ 
<
§§ $
ComboGenericoViewModel
§§ +
>
§§+ ,)
comboGenericoPuntosDeCompra
§§- H
=
§§I J$
ComboGenericoViewModel
§§K a
.
§§a bC
4ConvertirCentroDeAtencionConEstablecimientoComercial§§b ñ
(§§ñ ó%
_centroAtencionLogica§§ó ¨
.§§¨ ≠-
ObtenerPuntosDeCompraVigentes§§≠  
(§§  À
)§§À Ã
)§§Ã Õ
;§§Õ Œ
return
•• 
Json
•• 
(
•• )
comboGenericoPuntosDeCompra
•• 7
)
••7 8
;
••8 9
}
¶¶ 
catch
ßß 
(
ßß 
	Exception
ßß 
e
ßß 
)
ßß 
{
®® 
return
©© 
Json
©© 
(
©© 
Util
©©  
.
©©  !
	ErrorJson
©©! *
(
©©* +
e
©©+ ,
)
©©, -
)
©©- .
;
©©. /
}
™™ 
}
´´ 	
public
≠≠ 

JsonResult
≠≠ S
EObtenerCentrosDeAtencionConRolCajaVigentesConEstablecimientoComercial
≠≠ _
(
≠≠_ `
)
≠≠` a
{
ÆÆ 	
try
ØØ 
{
∞∞ 
List
±± 
<
±± $
ComboGenericoViewModel
±± +
>
±±+ , 
comboGenericoCajas
±±- ?
=
±±@ A$
ComboGenericoViewModel
±±B X
.
±±X YC
4ConvertirCentroDeAtencionConEstablecimientoComercial±±Y ç
(±±ç é%
_centroAtencionLogica±±é £
.±±£ §$
ObtenerCajasVigentes±±§ ∏
(±±∏ π
)±±π ∫
)±±∫ ª
;±±ª º
return
≤≤ 
Json
≤≤ 
(
≤≤  
comboGenericoCajas
≤≤ .
)
≤≤. /
;
≤≤/ 0
}
≥≥ 
catch
¥¥ 
(
¥¥ 
	Exception
¥¥ 
e
¥¥ 
)
¥¥ 
{
µµ 
return
∂∂ 
Json
∂∂ 
(
∂∂ 
Util
∂∂  
.
∂∂  !
	ErrorJson
∂∂! *
(
∂∂* +
e
∂∂+ ,
)
∂∂, -
)
∂∂- .
;
∂∂. /
}
∑∑ 
}
∏∏ 	
public
∫∫ 

JsonResult
∫∫ V
HObtenerCentrosDeAtencionConRolAlmacenVigentesConEstablecimientoComercial
∫∫ b
(
∫∫b c
)
∫∫c d
{
ªª 	
try
ºº 
{
ΩΩ 
List
ææ 
<
ææ $
ComboGenericoViewModel
ææ +
>
ææ+ ,$
comboGenericoAlmacenes
ææ- C
=
ææD E$
ComboGenericoViewModel
ææF \
.
ææ\ ]C
4ConvertirCentroDeAtencionConEstablecimientoComercialææ] ë
(ææë í%
_centroAtencionLogicaææí ß
.ææß ®(
ObtenerAlmacenesVigentesææ® ¿
(ææ¿ ¡
)ææ¡ ¬
)ææ¬ √
;ææ√ ƒ
return
øø 
Json
øø 
(
øø $
comboGenericoAlmacenes
øø 2
)
øø2 3
;
øø3 4
}
¿¿ 
catch
¡¡ 
(
¡¡ 
	Exception
¡¡ 
e
¡¡ 
)
¡¡ 
{
¬¬ 
return
√√ 
Json
√√ 
(
√√ 
Util
√√  
.
√√  !
	ErrorJson
√√! *
(
√√* +
e
√√+ ,
)
√√, -
)
√√- .
;
√√. /
}
ƒƒ 
}
≈≈ 	
public
«« 

JsonResult
«« b
TObtenerCentrosDeAtencionConRolPuntoDeVentaVigentesConCodigoYEstablecimientoComercial
«« n
(
««n o
)
««o p
{
»» 	
try
…… 
{
   
List
ÀÀ 
<
ÀÀ *
ComboCentroAtencionViewModel
ÀÀ 1
>
ÀÀ1 2(
comboGenericoPuntosDeVenta
ÀÀ3 M
=
ÀÀN O*
ComboCentroAtencionViewModel
ÀÀP l
.
ÀÀl m
Convert
ÀÀm t
(
ÀÀt u$
_centroAtencionLogicaÀÀu ä
.ÀÀä ã,
ObtenerPuntosDeVentaVigentesÀÀã ß
(ÀÀß ®
)ÀÀ® ©
)ÀÀ© ™
;ÀÀ™ ´
return
ÃÃ 
Json
ÃÃ 
(
ÃÃ (
comboGenericoPuntosDeVenta
ÃÃ 6
)
ÃÃ6 7
;
ÃÃ7 8
}
ÕÕ 
catch
ŒŒ 
(
ŒŒ 
	Exception
ŒŒ 
e
ŒŒ 
)
ŒŒ 
{
œœ 
return
–– 
Json
–– 
(
–– 
Util
––  
.
––  !
	ErrorJson
––! *
(
––* +
e
––+ ,
)
––, -
)
––- .
;
––. /
}
—— 
}
““ 	
public
‘‘ 

JsonResult
‘‘ c
UObtenerCentrosDeAtencionConRolPuntoDeCompraVigentesConCodigoYEstablecimientoComercial
‘‘ o
(
‘‘o p
)
‘‘p q
{
’’ 	
try
÷÷ 
{
◊◊ 
List
ÿÿ 
<
ÿÿ *
ComboCentroAtencionViewModel
ÿÿ 1
>
ÿÿ1 2)
comboGenericoPuntosDeCompra
ÿÿ3 N
=
ÿÿO P*
ComboCentroAtencionViewModel
ÿÿQ m
.
ÿÿm n
Convert
ÿÿn u
(
ÿÿu v$
_centroAtencionLogicaÿÿv ã
.ÿÿã å-
ObtenerPuntosDeCompraVigentesÿÿå ©
(ÿÿ© ™
)ÿÿ™ ´
)ÿÿ´ ¨
;ÿÿ¨ ≠
return
ŸŸ 
Json
ŸŸ 
(
ŸŸ )
comboGenericoPuntosDeCompra
ŸŸ 7
)
ŸŸ7 8
;
ŸŸ8 9
}
⁄⁄ 
catch
€€ 
(
€€ 
	Exception
€€ 
e
€€ 
)
€€ 
{
‹‹ 
return
›› 
Json
›› 
(
›› 
Util
››  
.
››  !
	ErrorJson
››! *
(
››* +
e
››+ ,
)
››, -
)
››- .
;
››. /
}
ﬁﬁ 
}
ﬂﬂ 	
public
·· 

JsonResult
·· Z
LObtenerCentrosDeAtencionConRolCajaVigentesConCodigoYEstablecimientoComercial
·· f
(
··f g
)
··g h
{
‚‚ 	
try
„„ 
{
‰‰ 
List
ÂÂ 
<
ÂÂ *
ComboCentroAtencionViewModel
ÂÂ 1
>
ÂÂ1 2 
comboGenericoCajas
ÂÂ3 E
=
ÂÂF G*
ComboCentroAtencionViewModel
ÂÂH d
.
ÂÂd e
Convert
ÂÂe l
(
ÂÂl m$
_centroAtencionLogicaÂÂm Ç
.ÂÂÇ É$
ObtenerCajasVigentesÂÂÉ ó
(ÂÂó ò
)ÂÂò ô
)ÂÂô ö
;ÂÂö õ
return
ÊÊ 
Json
ÊÊ 
(
ÊÊ  
comboGenericoCajas
ÊÊ .
)
ÊÊ. /
;
ÊÊ/ 0
}
ÁÁ 
catch
ËË 
(
ËË 
	Exception
ËË 
e
ËË 
)
ËË 
{
ÈÈ 
return
ÍÍ 
Json
ÍÍ 
(
ÍÍ 
Util
ÍÍ  
.
ÍÍ  !
	ErrorJson
ÍÍ! *
(
ÍÍ* +
e
ÍÍ+ ,
)
ÍÍ, -
)
ÍÍ- .
;
ÍÍ. /
}
ÎÎ 
}
ÏÏ 	
public
ÓÓ 

JsonResult
ÓÓ ]
OObtenerCentrosDeAtencionConRolAlmacenVigentesConCodigoYEstablecimientoComercial
ÓÓ i
(
ÓÓi j
)
ÓÓj k
{
ÔÔ 	
try
 
{
ÒÒ 
List
ÚÚ 
<
ÚÚ *
ComboCentroAtencionViewModel
ÚÚ 1
>
ÚÚ1 2$
comboGenericoAlmacenes
ÚÚ3 I
=
ÚÚJ K*
ComboCentroAtencionViewModel
ÚÚL h
.
ÚÚh i
Convert
ÚÚi p
(
ÚÚp q$
_centroAtencionLogicaÚÚq Ü
.ÚÚÜ á(
ObtenerAlmacenesVigentesÚÚá ü
(ÚÚü †
)ÚÚ† °
)ÚÚ° ¢
;ÚÚ¢ £
return
ÛÛ 
Json
ÛÛ 
(
ÛÛ $
comboGenericoAlmacenes
ÛÛ 2
)
ÛÛ2 3
;
ÛÛ3 4
}
ÙÙ 
catch
ıı 
(
ıı 
	Exception
ıı 
e
ıı 
)
ıı 
{
ˆˆ 
return
˜˜ 
Json
˜˜ 
(
˜˜ 
Util
˜˜  
.
˜˜  !
	ErrorJson
˜˜! *
(
˜˜* +
e
˜˜+ ,
)
˜˜, -
)
˜˜- .
;
˜˜. /
}
¯¯ 
}
˘˘ 	
public
˚˚ 

JsonResult
˚˚ [
MObtenerCentrosDeAtencionConRolPuntoDeVentaVigentesPorEstablecimientoComercial
˚˚ g
(
˚˚g h
int
˚˚h k)
idEstablecimientoComercial˚˚l Ü
)˚˚Ü á
{
¸¸ 	
try
˝˝ 
{
˛˛ 
List
ˇˇ 
<
ˇˇ '
CentroDeAtencionExtendido
ˇˇ .
>
ˇˇ. /
centrosDeAtencion
ˇˇ0 A
=
ˇˇB C#
_centroAtencionLogica
ˇˇD Y
.
ˇˇY ZF
7ObtenerPuntosDeVentaVigentesPorEstablecimientoComercialˇˇZ ë
(ˇˇë í*
idEstablecimientoComercialˇˇí ¨
)ˇˇ¨ ≠
;ˇˇ≠ Æ
List
ÄÄ 
<
ÄÄ $
ComboGenericoViewModel
ÄÄ +
>
ÄÄ+ ,(
centrosDeAtencionViewModel
ÄÄ- G
=
ÄÄH I$
ComboGenericoViewModel
ÄÄJ `
.
ÄÄ` a
Convert
ÄÄa h
(
ÄÄh i
centrosDeAtencion
ÄÄi z
)
ÄÄz {
;
ÄÄ{ |
return
ÅÅ 
Json
ÅÅ 
(
ÅÅ (
centrosDeAtencionViewModel
ÅÅ 6
)
ÅÅ6 7
;
ÅÅ7 8
}
ÇÇ 
catch
ÉÉ 
(
ÉÉ 
	Exception
ÉÉ 
e
ÉÉ 
)
ÉÉ 
{
ÑÑ 
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
Util
ÖÖ  
.
ÖÖ  !
	ErrorJson
ÖÖ! *
(
ÖÖ* +
e
ÖÖ+ ,
)
ÖÖ, -
)
ÖÖ- .
;
ÖÖ. /
}
ÜÜ 
}
áá 	
public
ââ 

JsonResult
ââ \
NObtenerCentrosDeAtencionConRolPuntoDeCompraVigentesPorEstablecimientoComercial
ââ h
(
ââh i
int
ââi l)
idEstablecimientoComercialââm á
)ââá à
{
ää 	
try
ãã 
{
åå 
List
çç 
<
çç '
CentroDeAtencionExtendido
çç .
>
çç. /
centrosDeAtencion
çç0 A
=
ççB C#
_centroAtencionLogica
ççD Y
.
ççY ZG
8ObtenerPuntosDeCompraVigentesPorEstablecimientoComercialççZ í
(ççí ì*
idEstablecimientoComercialççì ≠
)çç≠ Æ
;ççÆ Ø
List
éé 
<
éé $
ComboGenericoViewModel
éé +
>
éé+ ,(
centrosDeAtencionViewModel
éé- G
=
ééH I$
ComboGenericoViewModel
ééJ `
.
éé` a
Convert
ééa h
(
ééh i
centrosDeAtencion
ééi z
)
ééz {
;
éé{ |
return
èè 
Json
èè 
(
èè (
centrosDeAtencionViewModel
èè 6
)
èè6 7
;
èè7 8
}
êê 
catch
ëë 
(
ëë 
	Exception
ëë 
e
ëë 
)
ëë 
{
íí 
return
ìì 
Json
ìì 
(
ìì 
Util
ìì  
.
ìì  !
	ErrorJson
ìì! *
(
ìì* +
e
ìì+ ,
)
ìì, -
)
ìì- .
;
ìì. /
}
îî 
}
ïï 	
public
óó 

JsonResult
óó S
EObtenerCentrosDeAtencionConRolCajaVigentesPorEstablecimientoComercial
óó _
(
óó_ `
int
óó` c(
idEstablecimientoComercial
óód ~
)
óó~ 
{
òò 	
try
ôô 
{
öö 
List
õõ 
<
õõ '
CentroDeAtencionExtendido
õõ .
>
õõ. /
centrosDeAtencion
õõ0 A
=
õõB C#
_centroAtencionLogica
õõD Y
.
õõY Z>
/ObtenerCajasVigentesPorEstablecimientoComercialõõZ â
(õõâ ä*
idEstablecimientoComercialõõä §
)õõ§ •
;õõ• ¶
List
úú 
<
úú $
ComboGenericoViewModel
úú +
>
úú+ ,(
centrosDeAtencionViewModel
úú- G
=
úúH I$
ComboGenericoViewModel
úúJ `
.
úú` a
Convert
úúa h
(
úúh i
centrosDeAtencion
úúi z
)
úúz {
;
úú{ |
return
ùù 
Json
ùù 
(
ùù (
centrosDeAtencionViewModel
ùù 6
)
ùù6 7
;
ùù7 8
}
ûû 
catch
üü 
(
üü 
	Exception
üü 
e
üü 
)
üü 
{
†† 
return
°° 
Json
°° 
(
°° 
Util
°°  
.
°°  !
	ErrorJson
°°! *
(
°°* +
e
°°+ ,
)
°°, -
)
°°- .
;
°°. /
}
¢¢ 
}
££ 	
public
•• 

JsonResult
•• V
HObtenerCentrosDeAtencionConRolAlmacenVigentesPorEstablecimientoComercial
•• b
(
••b c
int
••c f)
idEstablecimientoComercial••g Å
)••Å Ç
{
¶¶ 	
try
ßß 
{
®® 
List
©© 
<
©© '
CentroDeAtencionExtendido
©© .
>
©©. /
centrosDeAtencion
©©0 A
=
©©B C#
_centroAtencionLogica
©©D Y
.
©©Y ZB
3ObtenerAlmacenesVigentesPorEstablecimientoComercial©©Z ç
(©©ç é*
idEstablecimientoComercial©©é ®
)©©® ©
;©©© ™
List
™™ 
<
™™ $
ComboGenericoViewModel
™™ +
>
™™+ ,(
centrosDeAtencionViewModel
™™- G
=
™™H I$
ComboGenericoViewModel
™™J `
.
™™` a
Convert
™™a h
(
™™h i
centrosDeAtencion
™™i z
)
™™z {
;
™™{ |
return
´´ 
Json
´´ 
(
´´ (
centrosDeAtencionViewModel
´´ 6
)
´´6 7
;
´´7 8
}
¨¨ 
catch
≠≠ 
(
≠≠ 
	Exception
≠≠ 
e
≠≠ 
)
≠≠ 
{
ÆÆ 
return
ØØ 
Json
ØØ 
(
ØØ 
Util
ØØ  
.
ØØ  !
	ErrorJson
ØØ! *
(
ØØ* +
e
ØØ+ ,
)
ØØ, -
)
ØØ- .
;
ØØ. /
}
∞∞ 
}
±± 	
public
≥≥ 

JsonResult
≥≥ ^
PObtenerCentrosDeAtencionConRolPuntoDeVentaVigentesPorEstablecimientosComerciales
≥≥ j
(
≥≥j k
int
≥≥k n
[
≥≥n o
]
≥≥o p-
idsEstablecimientosComerciales≥≥q è
)≥≥è ê
{
¥¥ 	
try
µµ 
{
∂∂ 
List
∑∑ 
<
∑∑ '
CentroDeAtencionExtendido
∑∑ .
>
∑∑. /
centrosDeAtencion
∑∑0 A
=
∑∑B C#
_centroAtencionLogica
∑∑D Y
.
∑∑Y ZI
:ObtenerPuntosDeVentaVigentesPorEstablecimientosComerciales∑∑Z î
(∑∑î ï.
idsEstablecimientosComerciales∑∑ï ≥
.∑∑≥ ¥
ToList∑∑¥ ∫
(∑∑∫ ª
)∑∑ª º
)∑∑º Ω
;∑∑Ω æ
List
∏∏ 
<
∏∏ $
ComboGenericoViewModel
∏∏ +
>
∏∏+ ,(
centrosDeAtencionViewModel
∏∏- G
=
∏∏H I$
ComboGenericoViewModel
∏∏J `
.
∏∏` a
Convert
∏∏a h
(
∏∏h i
centrosDeAtencion
∏∏i z
)
∏∏z {
;
∏∏{ |
return
ππ 
Json
ππ 
(
ππ (
centrosDeAtencionViewModel
ππ 6
)
ππ6 7
;
ππ7 8
}
∫∫ 
catch
ªª 
(
ªª 
	Exception
ªª 
e
ªª 
)
ªª 
{
ºº 
return
ΩΩ 
Json
ΩΩ 
(
ΩΩ 
Util
ΩΩ  
.
ΩΩ  !
	ErrorJson
ΩΩ! *
(
ΩΩ* +
e
ΩΩ+ ,
)
ΩΩ, -
)
ΩΩ- .
;
ΩΩ. /
}
ææ 
}
øø 	
public
¡¡ 

JsonResult
¡¡ _
QObtenerCentrosDeAtencionConRolPuntoDeCompraVigentesPorEstablecimientosComerciales
¡¡ k
(
¡¡k l
int
¡¡l o
[
¡¡o p
]
¡¡p q-
idsEstablecimientosComerciales¡¡r ê
)¡¡ê ë
{
¬¬ 	
try
√√ 
{
ƒƒ 
List
≈≈ 
<
≈≈ '
CentroDeAtencionExtendido
≈≈ .
>
≈≈. /
centrosDeAtencion
≈≈0 A
=
≈≈B C#
_centroAtencionLogica
≈≈D Y
.
≈≈Y ZJ
;ObtenerPuntosDeCompraVigentesPorEstablecimientosComerciales≈≈Z ï
(≈≈ï ñ.
idsEstablecimientosComerciales≈≈ñ ¥
.≈≈¥ µ
ToList≈≈µ ª
(≈≈ª º
)≈≈º Ω
)≈≈Ω æ
;≈≈æ ø
List
∆∆ 
<
∆∆ $
ComboGenericoViewModel
∆∆ +
>
∆∆+ ,(
centrosDeAtencionViewModel
∆∆- G
=
∆∆H I$
ComboGenericoViewModel
∆∆J `
.
∆∆` a
Convert
∆∆a h
(
∆∆h i
centrosDeAtencion
∆∆i z
)
∆∆z {
;
∆∆{ |
return
«« 
Json
«« 
(
«« (
centrosDeAtencionViewModel
«« 6
)
««6 7
;
««7 8
}
»» 
catch
…… 
(
…… 
	Exception
…… 
e
…… 
)
…… 
{
   
return
ÀÀ 
Json
ÀÀ 
(
ÀÀ 
Util
ÀÀ  
.
ÀÀ  !
	ErrorJson
ÀÀ! *
(
ÀÀ* +
e
ÀÀ+ ,
)
ÀÀ, -
)
ÀÀ- .
;
ÀÀ. /
}
ÃÃ 
}
ÕÕ 	
public
œœ 

JsonResult
œœ V
HObtenerCentrosDeAtencionConRolCajaVigentesPorEstablecimientosComerciales
œœ b
(
œœb c
int
œœc f
[
œœf g
]
œœg h-
idsEstablecimientosComercialesœœi á
)œœá à
{
–– 	
try
—— 
{
““ 
List
”” 
<
”” '
CentroDeAtencionExtendido
”” .
>
””. /
centrosDeAtencion
””0 A
=
””B C#
_centroAtencionLogica
””D Y
.
””Y ZA
2ObtenerCajasVigentesPorEstablecimientosComerciales””Z å
(””å ç.
idsEstablecimientosComerciales””ç ´
.””´ ¨
ToList””¨ ≤
(””≤ ≥
)””≥ ¥
)””¥ µ
;””µ ∂
List
‘‘ 
<
‘‘ $
ComboGenericoViewModel
‘‘ +
>
‘‘+ ,(
centrosDeAtencionViewModel
‘‘- G
=
‘‘H I$
ComboGenericoViewModel
‘‘J `
.
‘‘` a
Convert
‘‘a h
(
‘‘h i
centrosDeAtencion
‘‘i z
)
‘‘z {
;
‘‘{ |
return
’’ 
Json
’’ 
(
’’ (
centrosDeAtencionViewModel
’’ 6
)
’’6 7
;
’’7 8
}
÷÷ 
catch
◊◊ 
(
◊◊ 
	Exception
◊◊ 
e
◊◊ 
)
◊◊ 
{
ÿÿ 
return
ŸŸ 
Json
ŸŸ 
(
ŸŸ 
Util
ŸŸ  
.
ŸŸ  !
	ErrorJson
ŸŸ! *
(
ŸŸ* +
e
ŸŸ+ ,
)
ŸŸ, -
)
ŸŸ- .
;
ŸŸ. /
}
⁄⁄ 
}
€€ 	
public
›› 

JsonResult
›› Y
KObtenerCentrosDeAtencionConRolAlmacenVigentesPorEstablecimientosComerciales
›› e
(
››e f
int
››f i
[
››i j
]
››j k-
idsEstablecimientosComerciales››l ä
)››ä ã
{
ﬁﬁ 	
try
ﬂﬂ 
{
‡‡ 
List
·· 
<
·· '
CentroDeAtencionExtendido
·· .
>
··. /
centrosDeAtencion
··0 A
=
··B C#
_centroAtencionLogica
··D Y
.
··Y ZE
6ObtenerAlmacenesVigentesPorEstablecimientosComerciales··Z ê
(··ê ë.
idsEstablecimientosComerciales··ë Ø
.··Ø ∞
ToList··∞ ∂
(··∂ ∑
)··∑ ∏
)··∏ π
;··π ∫
List
‚‚ 
<
‚‚ $
ComboGenericoViewModel
‚‚ +
>
‚‚+ ,(
centrosDeAtencionViewModel
‚‚- G
=
‚‚H I$
ComboGenericoViewModel
‚‚J `
.
‚‚` a
Convert
‚‚a h
(
‚‚h i
centrosDeAtencion
‚‚i z
)
‚‚z {
;
‚‚{ |
return
„„ 
Json
„„ 
(
„„ (
centrosDeAtencionViewModel
„„ 6
)
„„6 7
;
„„7 8
}
‰‰ 
catch
ÂÂ 
(
ÂÂ 
	Exception
ÂÂ 
e
ÂÂ 
)
ÂÂ 
{
ÊÊ 
return
ÁÁ 
Json
ÁÁ 
(
ÁÁ 
Util
ÁÁ  
.
ÁÁ  !
	ErrorJson
ÁÁ! *
(
ÁÁ* +
e
ÁÁ+ ,
)
ÁÁ, -
)
ÁÁ- .
;
ÁÁ. /
}
ËË 
}
ÈÈ 	
public
ÎÎ 

JsonResult
ÎÎ V
HObtenerCentrosDeAtencionPorEstablecimientoComercialParaCarteraDeClientes
ÎÎ b
(
ÎÎb c
int
ÎÎc f)
idEstablecimientoComercialÎÎg Å
)ÎÎÅ Ç
{
ÏÏ 	
try
ÌÌ 
{
ÓÓ 
List
ÔÔ 
<
ÔÔ 
int
ÔÔ 
>
ÔÔ )
excludeIdsCentrosDeAtencion
ÔÔ 5
=
ÔÔ6 7 
actorNegocioLogica
ÔÔ8 J
.
ÔÔJ K>
0ObtenerIdsCentrosDeAtencionDeLaCarteraDeClientes
ÔÔK {
(
ÔÔ{ |
)
ÔÔ| }
;
ÔÔ} ~
List
 
<
 '
CentroDeAtencionExtendido
 .
>
. /
centrosDeAtencion
0 A
=
B C#
_centroAtencionLogica
D Y
.
Y ZJ
;ObtenerCentrosDeAtencionVigentesPorEstablecimientoComercialZ ï
(ï ñ*
idEstablecimientoComercialñ ∞
)∞ ±
.± ≤
Where≤ ∑
(∑ ∏
ca∏ ∫
=>ª Ω
!æ ø+
excludeIdsCentrosDeAtencionø ⁄
.⁄ €
Contains€ „
(„ ‰
ca‰ Ê
.Ê Á
IdÁ È
)È Í
)Í Î
.Î Ï
ToListÏ Ú
(Ú Û
)Û Ù
;Ù ı
List
ÒÒ 
<
ÒÒ $
ComboGenericoViewModel
ÒÒ +
>
ÒÒ+ ,(
centrosDeAtencionViewModel
ÒÒ- G
=
ÒÒH I$
ComboGenericoViewModel
ÒÒJ `
.
ÒÒ` a
Convert
ÒÒa h
(
ÒÒh i
centrosDeAtencion
ÒÒi z
)
ÒÒz {
;
ÒÒ{ |
return
ÚÚ 
Json
ÚÚ 
(
ÚÚ (
centrosDeAtencionViewModel
ÚÚ 6
)
ÚÚ6 7
;
ÚÚ7 8
}
ÛÛ 
catch
ÙÙ 
(
ÙÙ 
	Exception
ÙÙ 
e
ÙÙ 
)
ÙÙ 
{
ıı 
return
ˆˆ 
Json
ˆˆ 
(
ˆˆ 
Util
ˆˆ  
.
ˆˆ  !
	ErrorJson
ˆˆ! *
(
ˆˆ* +
e
ˆˆ+ ,
)
ˆˆ, -
)
ˆˆ- .
;
ˆˆ. /
}
˜˜ 
}
¯¯ 	
}
˚˚ 
}¸¸ ö∏
[D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\ActorComercialController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
Areas 
. 
Administracion +
.+ ,
Controllers, 7
{ 
public 

class $
ActorComercialController )
:* +
ActorBaseController, ?
{ 
private 
new 
readonly 
IActorNegocioLogica 0
actorNegocioLogica1 C
;C D
private 
readonly *
IValidacionActorNegocio_Logica 7)
_validacionActorNegocioLogica8 U
;U V
public $
ActorComercialController '
(' (
)( )
{ 	)
_validacionActorNegocioLogica )
=* +
Dependencia, 7
.7 8
Resolve8 ?
<? @*
IValidacionActorNegocio_Logica@ ^
>^ _
(_ `
)` a
;a b
actorNegocioLogica 
=  
Dependencia! ,
., -
Resolve- 4
<4 5
IActorNegocioLogica5 H
>H I
(I J
)J K
;K L
} 	
public$$ 

JsonResult$$ 9
-ResolverActorComercialPorDocumentoDeIdentidad$$ G
($$G H
int$$H K
idRol$$L Q
,$$Q R
string$$S Y
numeroDocumento$$Z i
)$$i j
{%% 	
try&& 
{'' 
OperationResult(( 
result((  &
=((' (
new(() ,
OperationResult((- <
(((< =
OperationResultEnum((= P
.((P Q
Success((Q X
)((X Y
;((Y Z
ActorComercial_)) 
actorComercial))  .
=))/ 0"
ResolverActorComercial))1 G
())G H
idRol))H M
,))M N
numeroDocumento))O ^
)))^ _
;))_ `
return** 
new**  
JsonHttpStatusResult** /
(**/ 0
new**0 3
{**4 5
result**6 <
.**< =
code_result**= H
,**H I
result**J P
.**P Q
data**Q U
,**U V
result_description**W i
=**j k
result**l r
.**r s
title**s x
,**x y
information	**z Ö
=
**Ü á
actorComercial
**à ñ
}
**ó ò
,
**ò ô
HttpStatusCode
**ö ®
.
**® ©
OK
**© ´
)
**´ ¨
;
**¨ ≠
}++ 
catch,, 
(,, 
	Exception,, 
e,, 
),, 
{-- 
return.. 
new..  
JsonHttpStatusResult.. /
(../ 0
Util..0 4
...4 5
	ErrorJson..5 >
(..> ?
e..? @
)..@ A
,..A B
HttpStatusCode..C Q
...Q R
InternalServerError..R e
)..e f
;..f g
}// 
}00 	
public22 
ActorComercial_22 "
ResolverActorComercial22 5
(225 6
int226 9
idRol22: ?
,22? @
string22A G
numeroDocumento22H W
)22W X
{33 	
ActorComercial_44 
actorComercial44 *
=44+ ,
actorNegocioLogica44- ?
.44? @?
3ObtenerActorComercialCreandoloSiExisteSoloComoActor44@ s
(44s t
idRol44t y
,44y z
numeroDocumento	44{ ä
)
44ä ã
;
44ã å
if55 
(55 
actorComercial55 
==55 !
null55" &
)55& '
{66 "
RegistroActorComercial77 &"
registroActorComercial77' =
=77> ?
null77@ D
;77D E
ItemGenerico88 "
tipoDocumentoIdentidad88 3
=884 5
actorNegocioLogica886 H
.88H I0
$DeterminarTipoDeDocumentoDeIdentidad88I m
(88m n
numeroDocumento88n }
)88} ~
;88~ 
if99 
(99 "
tipoDocumentoIdentidad99 *
==99+ -
null99. 2
)992 3
{:: 
throw;; 
new;; 
ControllerException;; 1
(;;1 2
$str;;2 q
);;q r
;;;r s
}<< 
if== 
(== "
tipoDocumentoIdentidad== *
.==* +
Id==+ -
====. 0
ActorSettings==1 >
.==> ?
Default==? F
.==F G'
IdTipoDocumentoIdentidadDni==G b
)==b c
{>> "
registroActorComercial?? *
=??+ ,
ObtenerActorDniApi??- ?
(??? @
numeroDocumento??@ O
)??O P
.??P Q
ConvertirConDni??Q `
(??` a
numeroDocumento??a p
)??p q
;??q r
}@@ 
elseAA 
ifAA 
(AA "
tipoDocumentoIdentidadAA /
.AA/ 0
IdAA0 2
==AA3 5
ActorSettingsAA6 C
.AAC D
DefaultAAD K
.AAK L'
IdTipoDocumentoIdentidadRucAAL g
)AAg h
{BB "
registroActorComercialCC *
=CC+ ,
ObtenerActorRucApiCC- ?
(CC? @
numeroDocumentoCC@ O
)CCO P
.CCP Q
ConvertirConRucCCQ `
(CC` a
numeroDocumentoCCa p
)CCp q
;CCq r
}DD 
varEE 
resultEE 
=EE 
actorNegocioLogicaEE /
.EE/ 0!
GuardarActorComercialEE0 E
(EEE F
idRolEEF K
,EEK L"
registroActorComercialEEM c
)EEc d
;EEd e
UtilFF 
.FF &
ManageIfResultIsNotSuccessFF /
(FF/ 0
resultFF0 6
,FF6 7
$str	FF8 î
)
FFî ï
;
FFï ñ
actorComercialGG 
=GG  
(GG! "
ActorComercial_GG" 1
)GG1 2
resultGG2 8
.GG8 9
informationGG9 D
;GGD E
}HH 
returnII 
actorComercialII !
;II! "
}JJ 	
publicSS 

JsonResultSS )
ResolverObtenerActorComercialSS 7
(SS7 8
intSS8 ;
idRolSS< A
,SSA B
intSSC F
idTipoDocumentoSSG V
,SSV W
stringSSX ^
numeroDocumentoSS_ n
)SSn o
{TT 	
ActorComercial_UU 
actorComercialUU *
=UU+ ,
newUU- 0
ActorComercial_UU1 @
(UU@ A
)UUA B
;UUB C
tryVV 
{WW )
_validacionActorNegocioLogicaXX -
.XX- .%
ValidarDocumentoIdentidadXX. G
(XXG H
numeroDocumentoXXH W
,XXW X
newXXY \
ItemGenericoXX] i
(XXi j
idTipoDocumentoXXj y
)XXy z
)XXz {
;XX{ |-
!RespuestaVerificacionActorNegocioYY 1
	respuestaYY2 ;
=YY< =
actorNegocioLogicaYY> P
.YYP Q
VerificarActorYYQ _
(YY_ `
idTipoDocumentoYY` o
,YYo p
numeroDocumento	YYq Ä
,
YYÄ Å
idRol
YYÇ á
)
YYá à
;
YYà â
ifZZ 
(ZZ 
	respuestaZZ 
.ZZ 
	respuestaZZ '
==ZZ( *%
RespuestaVerificacionEnumZZ+ D
.ZZD E
ExisteSoloActorZZE T
)ZZT U
{[[ 
actorComercial\\ "
=\\# $
new\\% (
ActorComercial_\\) 8
(\\8 9
	respuesta\\9 B
.\\B C
actor\\C H
)\\H I
;\\I J
}]] 
if^^ 
(^^ 
	respuesta^^ 
.^^ 
	respuesta^^ '
==^^( *%
RespuestaVerificacionEnum^^+ D
.^^D E
ExisteActorNegocio^^E W
)^^W X
{__ 
actorComercial`` "
=``# $
new``% (
ActorComercial_``) 8
(``8 9
idRol``9 >
,``> ?
	respuesta``@ I
.``I J
actorNegocio``J V
)``V W
;``W X
}aa 
ifbb 
(bb 
	respuestabb 
.bb 
	respuestabb '
==bb( *%
RespuestaVerificacionEnumbb+ D
.bbD E
NoExisteActorbbE R
)bbR S
{cc 
ifdd 
(dd 
idTipoDocumentodd '
==dd( *
ActorSettingsdd+ 8
.dd8 9
Defaultdd9 @
.dd@ A'
IdTipoDocumentoIdentidadDniddA \
)dd\ ]
{ee 
actorComercialff &
=ff' (
ObtenerActorDniApiff) ;
(ff; <
numeroDocumentoff< K
)ffK L
.ffL M
ConvertirConDniffM \
(ff\ ]
numeroDocumentoff] l
)ffl m
;ffm n
}gg 
elsehh 
ifhh 
(hh 
idTipoDocumentohh ,
==hh- /
ActorSettingshh0 =
.hh= >
Defaulthh> E
.hhE F'
IdTipoDocumentoIdentidadRuchhF a
)hha b
{ii 
actorComercialjj &
=jj' (
ObtenerActorRucApijj) ;
(jj; <
numeroDocumentojj< K
)jjK L
.jjL M
ConvertirConRucjjM \
(jj\ ]
numeroDocumentojj] l
)jjl m
;jjm n
}kk 
elsell 
{mm 
thrownn 
newnn !
ControllerExceptionnn" 5
(nn5 6
$strnn6 
)	nn Ä
;
nnÄ Å
}oo 
}pp 
returnqq 
Jsonqq 
(qq 
newqq 
{qq  !
	respuestaqq" +
.qq+ ,
	respuestaqq, 5
,qq5 6
actorComercialqq7 E
}qqF G
)qqG H
;qqH I
}rr 
catchss 
(ss 
	Exceptionss 
ess 
)ss 
{tt 
returnuu 
newuu  
JsonHttpStatusResultuu /
(uu/ 0
Utiluu0 4
.uu4 5
	ErrorJsonuu5 >
(uu> ?
euu? @
)uu@ A
,uuA B
HttpStatusCodeuuC Q
.uuQ R
InternalServerErroruuR e
)uue f
;uuf g
}vv 
}ww 	
publicyy 

JsonResultyy !
GuardarActorComercialyy /
(yy/ 0
intyy0 3
idRolyy4 9
,yy9 :"
RegistroActorComercialyy; Q
actorComercialyyR `
)yy` a
{zz 	
try{{ 
{|| 
OperationResult}} 
result}}  &
;}}& '
result~~ 
=~~ 
actorNegocioLogica~~ +
.~~+ ,!
GuardarActorComercial~~, A
(~~A B
idRol~~B G
,~~G H
actorComercial~~I W
)~~W X
;~~X Y
Util 
. &
ManageIfResultIsNotSuccess /
(/ 0
result0 6
,6 7
$str8 f
)f g
;g h
return
ÄÄ 
Json
ÄÄ 
(
ÄÄ 
new
ÄÄ 
{
ÄÄ  !
result
ÄÄ" (
.
ÄÄ( )
code_result
ÄÄ) 4
,
ÄÄ4 5
result
ÄÄ6 <
.
ÄÄ< =
data
ÄÄ= A
,
ÄÄA B 
result_description
ÄÄC U
=
ÄÄV W
result
ÄÄX ^
.
ÄÄ^ _
title
ÄÄ_ d
,
ÄÄd e
result
ÄÄf l
.
ÄÄl m
information
ÄÄm x
}
ÄÄy z
)
ÄÄz {
;
ÄÄ{ |
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
e
ÇÇ 
)
ÇÇ 
{
ÉÉ 
return
ÑÑ 
new
ÑÑ "
JsonHttpStatusResult
ÑÑ /
(
ÑÑ/ 0
Util
ÑÑ0 4
.
ÑÑ4 5
	ErrorJson
ÑÑ5 >
(
ÑÑ> ?
e
ÑÑ? @
)
ÑÑ@ A
,
ÑÑA B
HttpStatusCode
ÑÑC Q
.
ÑÑQ R!
InternalServerError
ÑÑR e
)
ÑÑe f
;
ÑÑf g
}
ÖÖ 
}
ÜÜ 	
public
áá 

JsonResult
áá ;
-ObtenerParametrosParaSelectorDeActorComercial
áá G
(
ááG H
)
ááH I
{
àà 	
try
ââ 
{
ää 
var
ãã 
data
ãã 
=
ãã 
new
ãã 1
#ConfiguracionSelectorActorComercial
ãã B
{
åå "
IdEmpleadoPorDefecto
çç (
=
çç) *
ProfileData
çç+ 6
(
çç6 7
)
çç7 8
.
çç8 9
Empleado
çç9 A
.
ççA B
Id
ççB D
}
éé 
;
éé 
return
èè 
Json
èè 
(
èè 
new
èè 
{
èè  !
data
èè" &
}
èè' (
)
èè( )
;
èè) *
}
êê 
catch
ëë 
(
ëë 
	Exception
ëë 
e
ëë 
)
ëë 
{
íí 
return
ìì 
new
ìì "
JsonHttpStatusResult
ìì /
(
ìì/ 0
Util
ìì0 4
.
ìì4 5
	ErrorJson
ìì5 >
(
ìì> ?
e
ìì? @
)
ìì@ A
,
ììA B
HttpStatusCode
ììC Q
.
ììQ R!
InternalServerError
ììR e
)
ììe f
;
ììf g
}
îî 
}
ïï 	
public
ññ 

JsonResult
ññ ;
-ObtenerParametrosParaRegistroDeActorComercial
ññ G
(
ññG H
)
ññH I
{
óó 	
try
òò 
{
ôô 
var
öö 
data
öö 
=
öö 
new
öö 1
#ConfiguracionRegistroActorComercial
öö B
{
õõ 
FechaActual
úú 
=
úú  !
DateTimeUtil
úú" .
.
úú. /
FechaActual
úú/ :
(
úú: ;
)
úú; <
.
úú< =
ToString
úú= E
(
úúE F
$str
úúF R
)
úúR S
}
ùù 
;
ùù 
return
ûû 
Json
ûû 
(
ûû 
new
ûû 
{
ûû  !
data
ûû" &
}
ûû' (
)
ûû( )
;
ûû) *
}
üü 
catch
†† 
(
†† 
	Exception
†† 
e
†† 
)
†† 
{
°° 
return
¢¢ 
new
¢¢ "
JsonHttpStatusResult
¢¢ /
(
¢¢/ 0
Util
¢¢0 4
.
¢¢4 5
	ErrorJson
¢¢5 >
(
¢¢> ?
e
¢¢? @
)
¢¢@ A
,
¢¢A B
HttpStatusCode
¢¢C Q
.
¢¢Q R!
InternalServerError
¢¢R e
)
¢¢e f
;
¢¢f g
}
££ 
}
§§ 	
public
¶¶ 

JsonResult
¶¶ (
ObtenerActorComercialPorId
¶¶ 4
(
¶¶4 5
int
¶¶5 8
idRol
¶¶9 >
,
¶¶> ?
int
¶¶@ C
id
¶¶D F
)
¶¶F G
{
ßß 	
try
®® 
{
©© 
OperationResult
™™ 
result
™™  &
=
™™' (
new
™™) ,
OperationResult
™™- <
(
™™< =!
OperationResultEnum
™™= P
.
™™P Q
Success
™™Q X
)
™™X Y
;
™™Y Z
ActorComercial_
´´ 
actorComercial
´´  .
=
´´/ 0 
actorNegocioLogica
´´1 C
.
´´C D(
ObtenerActorComercialPorId
´´D ^
(
´´^ _
idRol
´´_ d
,
´´d e
id
´´f h
)
´´h i
;
´´i j
return
¨¨ 
new
¨¨ "
JsonHttpStatusResult
¨¨ /
(
¨¨/ 0
new
¨¨0 3
{
¨¨4 5
result
¨¨6 <
.
¨¨< =
code_result
¨¨= H
,
¨¨H I
result
¨¨J P
.
¨¨P Q
data
¨¨Q U
,
¨¨U V 
result_description
¨¨W i
=
¨¨j k
result
¨¨l r
.
¨¨r s
title
¨¨s x
,
¨¨x y
information¨¨z Ö
=¨¨Ü á
actorComercial¨¨à ñ
}¨¨ó ò
,¨¨ò ô
HttpStatusCode¨¨ö ®
.¨¨® ©
OK¨¨© ´
)¨¨´ ¨
;¨¨¨ ≠
}
≠≠ 
catch
ÆÆ 
(
ÆÆ 
	Exception
ÆÆ 
e
ÆÆ 
)
ÆÆ 
{
ØØ 
return
∞∞ 
new
∞∞ "
JsonHttpStatusResult
∞∞ /
(
∞∞/ 0
Util
∞∞0 4
.
∞∞4 5
	ErrorJson
∞∞5 >
(
∞∞> ?
e
∞∞? @
)
∞∞@ A
,
∞∞A B
HttpStatusCode
∞∞C Q
.
∞∞Q R!
InternalServerError
∞∞R e
)
∞∞e f
;
∞∞f g
}
±± 
}
≤≤ 	
public
≥≥ 

JsonResult
≥≥ 6
(ObtenerActoresComercialesPorRolYBusqueda
≥≥ B
(
≥≥B C
int
≥≥C F
idRol
≥≥G L
,
≥≥L M
string
≥≥N T
cadenaBusqueda
≥≥U c
)
≥≥c d
{
¥¥ 	
try
µµ 
{
∂∂ 
List
∑∑ 
<
∑∑ $
SelectorActorComercial
∑∑ +
>
∑∑+ ,(
selectorActoresComerciales
∑∑- G
=
∑∑H I 
actorNegocioLogica
∑∑J \
.
∑∑\ ]?
0ObtenerActoresComercialesVigentesPorRolYBusqueda∑∑] ç
(∑∑ç é
idRol∑∑é ì
,∑∑ì î
cadenaBusqueda∑∑ï £
)∑∑£ §
;∑∑§ •
var
∏∏ 

jsonResult
∏∏ 
=
∏∏  
Json
∏∏! %
(
∏∏% &(
selectorActoresComerciales
∏∏& @
,
∏∏@ A!
JsonRequestBehavior
∏∏B U
.
∏∏U V
AllowGet
∏∏V ^
)
∏∏^ _
;
∏∏_ `

jsonResult
ππ 
.
ππ 
MaxJsonLength
ππ (
=
ππ) *
int
ππ+ .
.
ππ. /
MaxValue
ππ/ 7
;
ππ7 8
return
∫∫ 

jsonResult
∫∫ !
;
∫∫! "
}
ªª 
catch
ºº 
(
ºº 
	Exception
ºº 
e
ºº 
)
ºº 
{
ΩΩ 
return
ææ 
new
ææ "
JsonHttpStatusResult
ææ /
(
ææ/ 0
Util
ææ0 4
.
ææ4 5
	ErrorJson
ææ5 >
(
ææ> ?
new
ææ? B
	Exception
ææC L
(
ææL M
$str
ææM w
,
ææw x
e
ææy z
)
ææz {
)
ææ{ |
,
ææ| }
HttpStatusCodeææ~ å
.ææå ç#
InternalServerErrorææç †
)ææ† °
;ææ° ¢
}
øø 
}
¿¿ 	
public
¡¡ 

JsonResult
¡¡ :
,ObtenerActoresComercialesPorCentroDeAtencion
¡¡ F
(
¡¡F G
int
¡¡G J 
idCentroDeAtencion
¡¡K ]
)
¡¡] ^
{
¬¬ 	
try
√√ 
{
ƒƒ 
List
≈≈ 
<
≈≈ 
ItemGenerico
≈≈ !
>
≈≈! "
	empleados
≈≈# ,
=
≈≈- . 
actorNegocioLogica
≈≈/ A
.
≈≈A B:
,ObtenerActoresComercialesPorCentroDeAtencion
≈≈B n
(
≈≈n o!
idCentroDeAtencion≈≈o Å
)≈≈Å Ç
;≈≈Ç É
return
∆∆ 
Json
∆∆ 
(
∆∆ 
	empleados
∆∆ %
)
∆∆% &
;
∆∆& '
}
«« 
catch
»» 
(
»» 
LogicaException
»» "
oe
»»# %
)
»»% &
{
…… 
return
   
new
   "
JsonHttpStatusResult
   /
(
  / 0
Util
  0 4
.
  4 5
	ErrorJson
  5 >
(
  > ?
oe
  ? A
)
  A B
,
  B C
HttpStatusCode
  D R
.
  R S!
InternalServerError
  S f
)
  f g
;
  g h
}
ÀÀ 
}
ÃÃ 	
public
ŒŒ 

JsonResult
ŒŒ -
ObtenerGruposActoresComerciales
ŒŒ 9
(
ŒŒ9 :
)
ŒŒ: ;
{
œœ 	
try
–– 
{
—— 
var
““ 
	respuesta
““ 
=
““  
actorNegocioLogica
““  2
.
““2 3-
ObtenerGruposActoresComerciales
““3 R
(
““R S
)
““S T
;
““T U
return
”” 
Json
”” 
(
”” 
	respuesta
”” %
)
””% &
;
””& '
}
‘‘ 
catch
’’ 
(
’’ 
	Exception
’’ 
e
’’ 
)
’’ 
{
÷÷ 
return
◊◊ 
Json
◊◊ 
(
◊◊ 
Util
◊◊  
.
◊◊  !
	ErrorJson
◊◊! *
(
◊◊* +
e
◊◊+ ,
)
◊◊, -
)
◊◊- .
;
◊◊. /
}
ÿÿ 
}
ŸŸ 	
public
€€ 

JsonResult
€€ 3
%ObtenerGruposActoresComercialesPorRol
€€ ?
(
€€? @
int
€€@ C
idRol
€€D I
)
€€I J
{
‹‹ 	
try
›› 
{
ﬁﬁ 
var
ﬂﬂ 
	respuesta
ﬂﬂ 
=
ﬂﬂ  
actorNegocioLogica
ﬂﬂ  2
.
ﬂﬂ2 33
%ObtenerGruposActoresComercialesPorRol
ﬂﬂ3 X
(
ﬂﬂX Y
idRol
ﬂﬂY ^
)
ﬂﬂ^ _
;
ﬂﬂ_ `
return
‡‡ 
Json
‡‡ 
(
‡‡ 
	respuesta
‡‡ %
)
‡‡% &
;
‡‡& '
}
·· 
catch
‚‚ 
(
‚‚ 
	Exception
‚‚ 
e
‚‚ 
)
‚‚ 
{
„„ 
return
‰‰ 
Json
‰‰ 
(
‰‰ 
Util
‰‰  
.
‰‰  !
	ErrorJson
‰‰! *
(
‰‰* +
e
‰‰+ ,
)
‰‰, -
)
‰‰- .
;
‰‰. /
}
ÂÂ 
}
ÊÊ 	
public
ËË 

JsonResult
ËË F
8ObtenerActoresComercialesDeGrupoActoresComercialesPorRol
ËË R
(
ËËR S
int
ËËS V
idRol
ËËW \
,
ËË\ ]
int
ËË^ a'
idGrupoActoresComerciales
ËËb {
)
ËË{ |
{
ÈÈ 	
try
ÍÍ 
{
ÎÎ 
var
ÏÏ 
	respuesta
ÏÏ 
=
ÏÏ  
actorNegocioLogica
ÏÏ  2
.
ÏÏ2 3F
8ObtenerActoresComercialesDeGrupoActoresComercialesPorRol
ÏÏ3 k
(
ÏÏk l
idRol
ÏÏl q
,
ÏÏq r(
idGrupoActoresComercialesÏÏs å
)ÏÏå ç
;ÏÏç é
return
ÌÌ 
Json
ÌÌ 
(
ÌÌ 
	respuesta
ÌÌ %
)
ÌÌ% &
;
ÌÌ& '
}
ÓÓ 
catch
ÔÔ 
(
ÔÔ 
	Exception
ÔÔ 
e
ÔÔ 
)
ÔÔ 
{
 
return
ÒÒ 
Json
ÒÒ 
(
ÒÒ 
Util
ÒÒ  
.
ÒÒ  !
	ErrorJson
ÒÒ! *
(
ÒÒ* +
e
ÒÒ+ ,
)
ÒÒ, -
)
ÒÒ- .
;
ÒÒ. /
}
ÚÚ 
}
ÛÛ 	
public
ıı 

JsonResult
ıı C
5ObtenerGruposActoresComercialesPorRolDeActorComercial
ıı O
(
ııO P
int
ııP S
idRol
ııT Y
,
ııY Z
int
ıı[ ^
idActorComercial
ıı_ o
)
ııo p
{
ˆˆ 	
try
˜˜ 
{
¯¯ 
var
˘˘ 
	respuesta
˘˘ 
=
˘˘  
actorNegocioLogica
˘˘  2
.
˘˘2 3C
5ObtenerGruposActoresComercialesPorRolDeActorComercial
˘˘3 h
(
˘˘h i
idRol
˘˘i n
,
˘˘n o
idActorComercial˘˘p Ä
)˘˘Ä Å
;˘˘Å Ç
return
˙˙ 
Json
˙˙ 
(
˙˙ 
	respuesta
˙˙ %
)
˙˙% &
;
˙˙& '
}
˚˚ 
catch
¸¸ 
(
¸¸ 
	Exception
¸¸ 
e
¸¸ 
)
¸¸ 
{
˝˝ 
return
˛˛ 
Json
˛˛ 
(
˛˛ 
Util
˛˛  
.
˛˛  !
	ErrorJson
˛˛! *
(
˛˛* +
e
˛˛+ ,
)
˛˛, -
)
˛˛- .
;
˛˛. /
}
ˇˇ 
}
ÄÄ 	
}
ÅÅ 
}ÇÇ û⁄
XD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Hotel\HotelController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
HotelController  
:! "
BaseController# 1
{ 
private   
readonly   
IHotelLogica   %
hotelLogica  & 1
;  1 2
private!! 
new!! 
readonly!! 
IActorNegocioLogica!! 0
actorNegocioLogica!!1 C
;!!C D
private"" 
readonly"" (
IEstablecimiento_Repositorio"" 5!
_establecimientoDatos""6 K
;""K L
private## 
readonly## $
ICentroDeAtencion_Logica## 1#
_centroDeAtencionLogica##2 I
;##I J
private$$ 
new$$ 
readonly$$ 
IOperacionLogica$$ -
operacionLogica$$. =
;$$= >
private%% 
readonly%% 
IMaestroLogica%% '
maestroLogica%%( 5
;%%5 6
private&& 
readonly&& 
IConceptoLogica&& (
logicaConcepto&&) 7
;&&7 8
	protected'' 
readonly'' )
IFacturacionElectronicaLogica'' 8(
facturacionElectronicaLogica''9 U
;''U V
	protected(( 
readonly(( 
IPdfUtil(( #
pdfUtil(($ +
;((+ ,
	protected)) 
readonly)) 
IBarCodeUtil)) '
barCodeUtil))( 3
;))3 4
	protected** 
readonly** "
IVentaUtilitarioLogica** 1
	ventaUtil**2 ;
;**; <
public,, 
HotelController,, 
(,, 
),,  
{-- 	
hotelLogica.. 
=.. 
Dependencia.. %
...% &
Resolve..& -
<..- .
IHotelLogica... :
>..: ;
(..; <
)..< =
;..= >
actorNegocioLogica// 
=//  
Dependencia//! ,
.//, -
Resolve//- 4
<//4 5
IActorNegocioLogica//5 H
>//H I
(//I J
)//J K
;//K L!
_establecimientoDatos00 !
=00" #
Dependencia00$ /
.00/ 0
Resolve000 7
<007 8(
IEstablecimiento_Repositorio008 T
>00T U
(00U V
)00V W
;00W X#
_centroDeAtencionLogica11 #
=11$ %
Dependencia11& 1
.111 2
Resolve112 9
<119 :$
ICentroDeAtencion_Logica11: R
>11R S
(11S T
)11T U
;11U V
operacionLogica22 
=22 
Dependencia22 )
.22) *
Resolve22* 1
<221 2
IOperacionLogica222 B
>22B C
(22C D
)22D E
;22E F
maestroLogica33 
=33 
Dependencia33 '
.33' (
Resolve33( /
<33/ 0
IMaestroLogica330 >
>33> ?
(33? @
)33@ A
;33A B
logicaConcepto44 
=44 
Dependencia44 (
.44( )
Resolve44) 0
<440 1
IConceptoLogica441 @
>44@ A
(44A B
)44B C
;44C D(
facturacionElectronicaLogica55 (
=55) *
Dependencia55+ 6
.556 7
Resolve557 >
<55> ?)
IFacturacionElectronicaLogica55? \
>55\ ]
(55] ^
)55^ _
;55_ `
barCodeUtil66 
=66 
Dependencia66 %
.66% &
Resolve66& -
<66- .
IBarCodeUtil66. :
>66: ;
(66; <
)66< =
;66= >
	ventaUtil77 
=77 
Dependencia77 #
.77# $
Resolve77$ +
<77+ ,"
IVentaUtilitarioLogica77, B
>77B C
(77C D
)77D E
;77E F
}88 	
[;; 	
	Authorize;;	 
(;; 
Roles;; 
=;; 
$str;; D
);;D E
];;E F
public<< 
ActionResult<< 
Index<< !
(<<! "
)<<" #
{== 	
var>> 
fechaActual>> 
=>> 
DateTimeUtil>> *
.>>* +
FechaActual>>+ 6
(>>6 7
)>>7 8
.>>8 9
Date>>9 =
;>>= >
ViewBag?? 
.?? 

fechaDesde?? 
=??  
fechaActual??! ,
.??, -
AddDays??- 4
(??4 5
-??5 6
HotelSettings??6 C
.??C D
Default??D K
.??K L;
/DiasAntesALaFechaActualPorDefectoEnPlanificador??L {
)??{ |
.??| }
ToString	??} Ö
(
??Ö Ü
$str
??Ü í
)
??í ì
;
??ì î
ViewBag@@ 
.@@ 

fechaHasta@@ 
=@@  
fechaActual@@! ,
.@@, -
AddDays@@- 4
(@@4 5
HotelSettings@@5 B
.@@B C
Default@@C J
.@@J K=
1DiasDespuesALaFechaActualPorDefectoEnPlanificador@@K |
)@@| }
.@@} ~
ToString	@@~ Ü
(
@@Ü á
$str
@@á ì
)
@@ì î
;
@@î ï
ViewBagAA 
.AA 
fechaActualAA 
=AA  !
fechaActualAA" -
.AA- .
ToStringAA. 6
(AA6 7
$strAA7 C
)AAC D
;AAD E
ViewBagBB 
.BB $
accionesEstadoDisponibleBB ,
=BB- .
DiccionarioHotelBB/ ?
.BB? @0
$AccionesDeEstadoHabitacionDisponibleBB@ d
(BBd e
)BBe f
;BBf g
ViewBagCC 
.CC !
accionesEstadoOcupadaCC )
=CC* +
DiccionarioHotelCC, <
.CC< =-
!AccionesDeEstadoHabitacionOcupadaCC= ^
(CC^ _
)CC_ `
;CC` a
ViewBagDD 
.DD #
accionesEstadoReservadaDD +
=DD, -
DiccionarioHotelDD. >
.DD> ?/
#AccionesDeEstadoHabitacionReservadaDD? b
(DDb c
)DDc d
;DDd e
ViewBagEE 
.EE !
EstablecimientoSesionEE )
=EE* +
ProfileDataEE, 7
(EE7 8
)EE8 9
.EE9 :0
$EstablecimientoComercialSeleccionadoEE: ^
.EE^ _
ToItemGenericoEE_ m
(EEm n
)EEn o
;EEo p
ViewBagFF 
.FF 1
%UsuarioTieneRolAdministradorDeNegocioFF 9
=FF: ;
ProfileDataFF< G
(FFG H
)FFH I
.FFI J
EmpleadoFFJ R
.FFR S
TieneRolFFS [
(FF[ \
ActorSettingsFF\ i
.FFi j
DefaultFFj q
.FFq r(
idRolAdministradorDeNegocio	FFr ç
)
FFç é
;
FFé è
ViewBagGG 
.GG 
EstablecimientosGG $
=GG% &
ViewBagGG' .
.GG. /1
%UsuarioTieneRolAdministradorDeNegocioGG/ T
?GGU V!
_establecimientoDatosGGW l
.GGl mI
<ObtenerEstablecimientosComercialesVigentesComoItemsGenericos	GGm ©
(
GG© ™
)
GG™ ´
:
GG¨ ≠
new
GGÆ ±
List
GG≤ ∂
<
GG∂ ∑
ItemGenerico
GG∑ √
>
GG√ ƒ
(
GGƒ ≈
)
GG≈ ∆
{
GG« »
ProfileData
GG… ‘
(
GG‘ ’
)
GG’ ÷
.
GG÷ ◊2
$EstablecimientoComercialSeleccionado
GG◊ ˚
.
GG˚ ¸
ToItemGenerico
GG¸ ä
(
GGä ã
)
GGã å
}
GGç é
;
GGé è
ViewBagHH 
.HH +
MaximoDiasMostrarEnPlanificadorHH 3
=HH4 5
HotelSettingsHH6 C
.HHC D
DefaultHHD K
.HHK L+
MaximoDiasMostrarEnPlanificadorHHL k
;HHk l
ViewBagII 
.II )
configuracionEstadoHabitacionII 1
=II2 3)
ConfiguracionEstadoHabitacionII4 Q
.IIQ R
DefaultIIR Y
;IIY Z
returnJJ 
ViewJJ 
(JJ 
)JJ 
;JJ 
}KK 	
[LL 	
	AuthorizeLL	 
(LL 
RolesLL 
=LL 
$strLL D
)LLD E
]LLE F
publicMM 
ActionResultMM 
ReservasMM $
(MM$ %
)MM% &
{NN 	
varOO 
fechaInicialesOO 
=OO  
operacionLogicaOO! 0
.OO0 14
(ObtenerFechaIncioyFinBasadoEnFechaActualOO1 Y
(OOY Z
)OOZ [
;OO[ \
ViewBagPP 
.PP 

fechaDesdePP 
=PP  
fechaInicialesPP! /
[PP/ 0
$numPP0 1
]PP1 2
.PP2 3
ToStringPP3 ;
(PP; <
$strPP< H
)PPH I
;PPI J
ViewBagQQ 
.QQ 

fechaHastaQQ 
=QQ  
fechaInicialesQQ! /
[QQ/ 0
$numQQ0 1
]QQ1 2
.QQ2 3
ToStringQQ3 ;
(QQ; <
$strQQ< H
)QQH I
;QQI J
ViewBagRR 
.RR !
EstablecimientoSesionRR )
=RR* +
ProfileDataRR, 7
(RR7 8
)RR8 9
.RR9 :0
$EstablecimientoComercialSeleccionadoRR: ^
.RR^ _
ToItemGenericoRR_ m
(RRm n
)RRn o
;RRo p
ViewBagSS 
.SS 1
%UsuarioTieneRolAdministradorDeNegocioSS 9
=SS: ;
ProfileDataSS< G
(SSG H
)SSH I
.SSI J
EmpleadoSSJ R
.SSR S
TieneRolSSS [
(SS[ \
ActorSettingsSS\ i
.SSi j
DefaultSSj q
.SSq r(
idRolAdministradorDeNegocio	SSr ç
)
SSç é
;
SSé è
ViewBagTT 
.TT 
EstablecimientosTT $
=TT% &
ViewBagTT' .
.TT. /1
%UsuarioTieneRolAdministradorDeNegocioTT/ T
?TTU V!
_establecimientoDatosTTW l
.TTl mI
<ObtenerEstablecimientosComercialesVigentesComoItemsGenericos	TTm ©
(
TT© ™
)
TT™ ´
:
TT¨ ≠
new
TTÆ ±
List
TT≤ ∂
<
TT∂ ∑
ItemGenerico
TT∑ √
>
TT√ ƒ
(
TTƒ ≈
)
TT≈ ∆
{
TT« »
ProfileData
TT… ‘
(
TT‘ ’
)
TT’ ÷
.
TT÷ ◊2
$EstablecimientoComercialSeleccionado
TT◊ ˚
.
TT˚ ¸
ToItemGenerico
TT¸ ä
(
TTä ã
)
TTã å
}
TTç é
;
TTé è
returnUU 
ViewUU 
(UU 
)UU 
;UU 
}VV 	
[WW 	
	AuthorizeWW	 
(WW 
RolesWW 
=WW 
$strWW D
)WWD E
]WWE F
publicXX 
ActionResultXX 
ConsumosXX $
(XX$ %
)XX% &
{YY 	
stringZZ 
mascaraDeIngresoZZ #
=ZZ$ %
VentasSettingsZZ& 4
.ZZ4 5
DefaultZZ5 <
.ZZ< =,
 MascaraDeCamposAIngresarEnVentasZZ= ]
;ZZ] ^
var[[ 
fechaActual[[ 
=[[ 
DateTimeUtil[[ *
.[[* +
FechaActual[[+ 6
([[6 7
)[[7 8
.[[8 9
Date[[9 =
;[[= >
ViewBag\\ 
.\\ 
fechaActual\\ 
=\\  !
fechaActual\\" -
.\\- .
ToString\\. 6
(\\6 7
$str\\7 C
)\\C D
;\\D E
ViewBag]] 
.]] !
EstablecimientoSesion]] )
=]]* +
ProfileData]], 7
(]]7 8
)]]8 9
.]]9 :0
$EstablecimientoComercialSeleccionado]]: ^
.]]^ _
ToItemGenerico]]_ m
(]]m n
)]]n o
;]]o p
ViewBag^^ 
.^^ 1
%UsuarioTieneRolAdministradorDeNegocio^^ 9
=^^: ;
ProfileData^^< G
(^^G H
)^^H I
.^^I J
Empleado^^J R
.^^R S
TieneRol^^S [
(^^[ \
ActorSettings^^\ i
.^^i j
Default^^j q
.^^q r(
idRolAdministradorDeNegocio	^^r ç
)
^^ç é
;
^^é è
ViewBag__ 
.__ 
Establecimientos__ $
=__% &
ViewBag__' .
.__. /1
%UsuarioTieneRolAdministradorDeNegocio__/ T
?__U V!
_establecimientoDatos__W l
.__l mI
<ObtenerEstablecimientosComercialesVigentesComoItemsGenericos	__m ©
(
__© ™
)
__™ ´
:
__¨ ≠
new
__Æ ±
List
__≤ ∂
<
__∂ ∑
ItemGenerico
__∑ √
>
__√ ƒ
(
__ƒ ≈
)
__≈ ∆
{
__« »
ProfileData
__… ‘
(
__‘ ’
)
__’ ÷
.
__÷ ◊2
$EstablecimientoComercialSeleccionado
__◊ ˚
.
__˚ ¸
ToItemGenerico
__¸ ä
(
__ä ã
)
__ã å
}
__ç é
;
__é è
ViewBagaa 
.aa $
permitirIngresarCantidadaa ,
=aa- .
	ventaUtilaa/ 8
.aa8 9*
ObtenerCamposEditablesEnVentasaa9 W
(aaW X
mascaraDeIngresoaaX h
,aah i*
ElementoDeCalculoEnVentasEnum	aaj á
.
aaá à
Cantidad
aaà ê
)
aaê ë
;
aaë í
ViewBagbb 
.bb .
"cursorPorDefectoCodigoBarraEnVentabb 6
=bb7 8
VentasSettingsbb9 G
.bbG H
DefaultbbH O
.bbO P0
$CursorPorDefectoEnCodigoBarraEnVentabbP t
;bbt u
ViewBagcc 
.cc ,
 flujoDespuesDeCodigoBarraEnVentacc 4
=cc5 6
VentasSettingscc7 E
.ccE F
DefaultccF M
.ccM N,
 FlujoDespuesDeCodigoBarraEnVentaccN n
;ccn o
ViewBagdd 
.dd #
checketDetalleUnificadodd +
=dd, -
AplicacionSettingsdd. @
.dd@ A
DefaultddA H
.ddH I#
ChecketDetalleUnificadoddI `
;dd` a
ViewBagee 
.ee 
tasaIGVee 
=ee 
TransaccionSettingsee 1
.ee1 2
Defaultee2 9
.ee9 :
TasaIGVee: A
;eeA B
ViewBagff 
.ff 
aplicaLeyAmazoniaff %
=ff& '
TransaccionSettingsff( ;
.ff; <
Defaultff< C
.ffC D
AplicaLeyAmazoniaffD U
;ffU V
ViewBaggg 
.gg #
numeroDecimalesEnPreciogg +
=gg, -
AplicacionSettingsgg. @
.gg@ A
DefaultggA H
.ggH I#
NumeroDecimalesEnPrecioggI `
;gg` a
ViewBaghh 
.hh &
mascaraDeCalculoPorDefectohh .
=hh/ 0
VentasSettingshh1 ?
.hh? @
Defaulthh@ G
.hhG H.
"MascaraDeCalculoPorDefectoEnVentashhH j
;hhj k
ViewBagii 
.ii )
idConceptoBasicoBolsaPlasticaii 1
=ii2 3
MaestroSettingsii4 C
.iiC D
DefaultiiD K
.iiK L7
+IdDetalleMaestroConceptoBasicoBolsaPlasticaiiL w
;iiw x
ViewBagjj 
.jj -
!ventasSujetasADisponibilidadStockjj 5
=jj6 7
!jj8 9
ProfileDatajj9 D
(jjD E
)jjE F
.jjF G(
CentroDeAtencionSeleccionadojjG c
.jjc d 
SalidaBienesSinStockjjd x
;jjx y
ViewBagkk 
.kk -
!aplicarCantidadPorDefectoEnVentaskk 5
=kk6 7
AplicacionSettingskk8 J
.kkJ K
DefaultkkK R
.kkR S-
!AplicarCantidadPorDefectoEnVentaskkS t
;kkt u
ViewBagll 
.ll &
cantidadPorDefectoEnVentasll .
=ll/ 0
AplicacionSettingsll1 C
.llC D
DefaultllD K
.llK L&
CantidadPorDefectoEnVentasllL f
;llf g
ViewBagmm 
.mm $
modoSeleccionTipoFamiliamm ,
=mm- .
AplicacionSettingsmm/ A
.mmA B
DefaultmmB I
.mmI J0
$ModoDeSeleccionTipoDeFamiliaEnVentasmmJ n
;mmn o
ViewBagnn 
.nn )
modoIngresoCodigoBarraEnVentann 1
=nn2 3
VentasSettingsnn4 B
.nnB C
DefaultnnC J
.nnJ K/
#ModoDeIngresoDeCodigoDeBarraEnVentannK n
;nnn o
ViewBagoo 
.oo %
modoDeSeleccionDeConceptooo -
=oo. /
VentasSettingsoo0 >
.oo> ?
Defaultoo? F
.ooF G.
"ModoDeSeleccionDeConceptoDeNegocioooG i
;ooi j
ViewBagpp 
.pp *
minimoCaracteresBuscarConceptopp 2
=pp3 4
AplicacionSettingspp5 G
.ppG H
DefaultppH O
.ppO P:
.MinimoDeCaracteresParaBuscarEnSelectorConceptoppP ~
;pp~ 
ViewBagqq 
.qq (
tiempoEsperaBusquedaSelectorqq 0
=qq1 2
AplicacionSettingsqq3 E
.qqE F
DefaultqqF M
.qqM N<
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidadqqN ~
;qq~ 
returnrr 
Viewrr 
(rr 
)rr 
;rr 
}ss 	
[tt 	
	Authorizett	 
(tt 
Rolestt 
=tt 
$strtt 1
)tt1 2
]tt2 3
publicuu 
ActionResultuu 
Habitacionesuu (
(uu( )
)uu) *
{vv 	
ViewBagww 
.ww '
idEstablecimientoPorDefectoww /
=ww0 1
ProfileDataww2 =
(ww= >
)ww> ?
.ww? @0
$EstablecimientoComercialSeleccionadoww@ d
.wwd e
Idwwe g
;wwg h
returnxx 
Viewxx 
(xx 
)xx 
;xx 
}yy 	
[zz 	
	Authorizezz	 
(zz 
Roleszz 
=zz 
$strzz 1
)zz1 2
]zz2 3
public{{ 
ActionResult{{ 
TipoHabitacion{{ *
({{* +
){{+ ,
{|| 	
ViewBag}} 
.}} 
idFamiliaHabitacion}} '
=}}( )
HotelSettings}}* 7
.}}7 8
Default}}8 ?
.}}? @-
!IdDetalleMaestroFamiliaHabitacion}}@ a
;}}a b
ViewBag~~ 
.~~ (
idCaracteristicaAforoAdultos~~ 0
=~~1 2
HotelSettings~~3 @
.~~@ A
Default~~A H
.~~H I(
IdCaracteristicaAforoAdultos~~I e
;~~e f
ViewBag 
. &
idCaracteristicaAforoNinos .
=/ 0
HotelSettings1 >
.> ?
Default? F
.F G&
IdCaracteristicaAforoNinosG a
;a b
ViewBag
ÄÄ 
.
ÄÄ %
numeroDecimalesEnPrecio
ÄÄ +
=
ÄÄ, - 
AplicacionSettings
ÄÄ. @
.
ÄÄ@ A
Default
ÄÄA H
.
ÄÄH I%
NumeroDecimalesEnPrecio
ÄÄI `
;
ÄÄ` a
ViewBag
ÅÅ 
.
ÅÅ -
tamanioMaximoFotoTipoHabitacion
ÅÅ 3
=
ÅÅ4 5
HotelSettings
ÅÅ6 C
.
ÅÅC D
Default
ÅÅD K
.
ÅÅK L-
TamanioMaximoFotoTipoHabitacion
ÅÅL k
;
ÅÅk l
ViewBag
ÇÇ 
.
ÇÇ .
 maximaCantidadFotoTipoHabitacion
ÇÇ 4
=
ÇÇ5 6
HotelSettings
ÇÇ7 D
.
ÇÇD E
Default
ÇÇE L
.
ÇÇL M.
 MaximaCantidadFotoTipoHabitacion
ÇÇM m
;
ÇÇm n
return
ÉÉ 
View
ÉÉ 
(
ÉÉ 
)
ÉÉ 
;
ÉÉ 
}
ÑÑ 	
[
ÖÖ 	
	Authorize
ÖÖ	 
(
ÖÖ 
Roles
ÖÖ 
=
ÖÖ 
$str
ÖÖ 1
)
ÖÖ1 2
]
ÖÖ2 3
public
ÜÜ 
ActionResult
ÜÜ 
	Ambientes
ÜÜ %
(
ÜÜ% &
)
ÜÜ& '
{
áá 	
ViewBag
àà 
.
àà )
idEstablecimientoPorDefecto
àà /
=
àà0 1
ProfileData
àà2 =
(
àà= >
)
àà> ?
.
àà? @2
$EstablecimientoComercialSeleccionado
àà@ d
.
ààd e
Id
ààe g
;
ààg h
return
ââ 
View
ââ 
(
ââ 
)
ââ 
;
ââ 
}
ää 	
[
ãã 	
	Authorize
ãã	 
(
ãã 
Roles
ãã 
=
ãã 
$str
ãã D
)
ããD E
]
ããE F
public
åå 
ActionResult
åå 
DetalleReserva
åå *
(
åå* +
long
åå+ /
idEstablecimiento
åå0 A
,
ååA B
long
ååC G
idAtencionMacro
ååH W
,
ååW X
long
ååY ]

idAtencion
åå^ h
)
ååh i
{
çç 	
ViewBag
éé 
.
éé '
accionesProcesoHabitacion
éé -
=
éé. /
DiccionarioHotel
éé0 @
.
éé@ A)
AccionesProcesoDeHabitacion
ééA \
.
éé\ ]
ToList
éé] c
(
ééc d
)
ééd e
;
éée f
ViewBag
èè 
.
èè 
idAtencionMacro
èè #
=
èè$ %
idAtencionMacro
èè& 5
;
èè5 6
ViewBag
êê 
.
êê 

idAtencion
êê 
=
êê  

idAtencion
êê! +
;
êê+ ,
ViewBag
ëë 
.
ëë 
idRolCliente
ëë  
=
ëë! "
ActorSettings
ëë# 0
.
ëë0 1
Default
ëë1 8
.
ëë8 9
IdRolCliente
ëë9 E
;
ëëE F
ViewBag
íí 
.
íí 
idClienteGenerico
íí %
=
íí& '
ActorSettings
íí( 5
.
íí5 6
Default
íí6 =
.
íí= >
IdClienteGenerico
íí> O
;
ííO P
ViewBag
ìì 
.
ìì *
tiempoEsperaBusquedaSelector
ìì 0
=
ìì1 2 
AplicacionSettings
ìì3 E
.
ììE F
Default
ììF M
.
ììM N>
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidad
ììN ~
;
ìì~ 
ViewBag
îî 
.
îî 2
$minimoCaracteresBuscarActorComercial
îî 8
=
îî9 :
ActorSettings
îî; H
.
îîH I
Default
îîI P
.
îîP QC
4MinimoDeCaracteresParaBuscarEnSelectorActorComercialîîQ Ö
;îîÖ Ü
ViewBag
ïï 
.
ïï =
/mascaraDeVisualizacionValidacionRegistroCliente
ïï C
=
ïïD E
ActorSettings
ïïF S
.
ïïS T
Default
ïïT [
.
ïï[ \>
/MascaraDeVisualizacionValidacionRegistroClienteïï\ ã
;ïïã å
ViewBag
ññ 
.
ññ  
idEstadoRegistrado
ññ &
=
ññ' (
MaestroSettings
ññ) 8
.
ññ8 9
Default
ññ9 @
.
ññ@ A.
 IdDetalleMaestroEstadoRegistrado
ññA a
;
ñña b
ViewBag
óó 
.
óó  
idEstadoConfirmado
óó &
=
óó' (
MaestroSettings
óó) 8
.
óó8 9
Default
óó9 @
.
óó@ A.
 IdDetalleMaestroEstadoConfirmado
óóA a
;
óóa b
ViewBag
òò 
.
òò 
idEstadoCheckedIn
òò %
=
òò& '
MaestroSettings
òò( 7
.
òò7 8
Default
òò8 ?
.
òò? @-
IdDetalleMaestroEstadoCheckedIn
òò@ _
;
òò_ `
ViewBag
ôô 
.
ôô  
idEstadoCheckedOut
ôô &
=
ôô' (
MaestroSettings
ôô) 8
.
ôô8 9
Default
ôô9 @
.
ôô@ A.
 IdDetalleMaestroEstadoCheckedOut
ôôA a
;
ôôa b
ViewBag
öö 
.
öö 
idEstadoFacturado
öö %
=
öö& '
MaestroSettings
öö( 7
.
öö7 8
Default
öö8 ?
.
öö? @-
IdDetalleMaestroEstadoFacturado
öö@ _
;
öö_ `
ViewBag
õõ 
.
õõ 
idEstadoAnulado
õõ #
=
õõ$ %
MaestroSettings
õõ& 5
.
õõ5 6
Default
õõ6 =
.
õõ= >+
IdDetalleMaestroEstadoAnulado
õõ> [
;
õõ[ \
ViewBag
úú 
.
úú %
idEstadoEntradaCambiado
úú +
=
úú, -
MaestroSettings
úú. =
.
úú= >
Default
úú> E
.
úúE F3
%IdDetalleMaestroEstadoEntradaCambiado
úúF k
;
úúk l
ViewBag
ùù 
.
ùù $
idEstadoSalidaCambiado
ùù *
=
ùù+ ,
MaestroSettings
ùù- <
.
ùù< =
Default
ùù= D
.
ùùD E2
$IdDetalleMaestroEstadoSalidaCambiado
ùùE i
;
ùùi j
ViewBag
ûû 
.
ûû 
fechaActual
ûû 
=
ûû  !
DateTimeUtil
ûû" .
.
ûû. /
FechaActual
ûû/ :
(
ûû: ;
)
ûû; <
.
ûû< =
ToString
ûû= E
(
ûûE F
$str
ûûF R
)
ûûR S
;
ûûS T
ViewBag
üü 
.
üü 
idEstablecimiento
üü %
=
üü& '
idEstablecimiento
üü( 9
;
üü9 :
return
†† 
View
†† 
(
†† 
)
†† 
;
†† 
}
°° 	
public
¢¢ 
ActionResult
¢¢ 
Complementos
¢¢ (
(
¢¢( )
)
¢¢) *
{
££ 	
return
§§ 
View
§§ 
(
§§ 
)
§§ 
;
§§ 
}
•• 	
public
©© 

JsonResult
©© (
ObtenerReportePlanificador
©© 4
(
©©4 5
int
©©5 8
idEstablecimiento
©©9 J
)
©©J K
{
™™ 	
try
´´ 
{
¨¨ !
ReportePlanificador
≠≠ #
planificador
≠≠$ 0
=
≠≠1 2
hotelLogica
≠≠3 >
.
≠≠> ?(
ObtenerReportePlanificador
≠≠? Y
(
≠≠Y Z
idEstablecimiento
≠≠Z k
,
≠≠k l
ProfileData
≠≠m x
(
≠≠x y
)
≠≠y z
.
≠≠z {1
"IdCentroAtencionQueTieneLosPrecios≠≠{ ù
)≠≠ù û
;≠≠û ü
return
ÆÆ 
Json
ÆÆ 
(
ÆÆ 
planificador
ÆÆ (
)
ÆÆ( )
;
ÆÆ) *
}
ØØ 
catch
∞∞ 
(
∞∞ 
	Exception
∞∞ 
e
∞∞ 
)
∞∞ 
{
±± 
return
≤≤ 
new
≤≤ "
JsonHttpStatusResult
≤≤ /
(
≤≤/ 0
Util
≤≤0 4
.
≤≤4 5
	ErrorJson
≤≤5 >
(
≤≤> ?
e
≤≤? @
)
≤≤@ A
,
≤≤A B
HttpStatusCode
≤≤C Q
.
≤≤Q R!
InternalServerError
≤≤R e
)
≤≤e f
;
≤≤f g
}
≥≥ 
}
¥¥ 	
public
µµ 

JsonResult
µµ -
ObtenerPlanificadorHabitaciones
µµ 9
(
µµ9 :
int
µµ: =
idEstablecimiento
µµ> O
,
µµO P
string
µµQ W

fechaDesde
µµX b
,
µµb c
string
µµd j

fechaHasta
µµk u
,
µµu v
int
µµw z

idAmbienteµµ{ Ö
,µµÖ Ü
intµµá ä 
idTipoHabitacionµµã õ
)µµõ ú
{
∂∂ 	
try
∑∑ 
{
∏∏ 
DateTime
ππ 
fechaInicio
ππ $
=
ππ% &
DateTime
ππ' /
.
ππ/ 0
Parse
ππ0 5
(
ππ5 6

fechaDesde
ππ6 @
)
ππ@ A
;
ππA B
DateTime
∫∫ 
fechaFin
∫∫ !
=
∫∫" #
DateTime
∫∫$ ,
.
∫∫, -
Parse
∫∫- 2
(
∫∫2 3

fechaHasta
∫∫3 =
)
∫∫= >
;
∫∫> ?
Planificador
ªª &
planificadorHabitaciones
ªª 5
=
ªª6 7
hotelLogica
ªª8 C
.
ªªC D-
ObtenerPlanificadorHabitaciones
ªªD c
(
ªªc d
idEstablecimiento
ªªd u
,
ªªu v
fechaInicioªªw Ç
,ªªÇ É
fechaFinªªÑ å
,ªªå ç

idAmbienteªªé ò
,ªªò ô 
idTipoHabitacionªªö ™
,ªª™ ´
ProfileDataªª¨ ∑
(ªª∑ ∏
)ªª∏ π
.ªªπ ∫2
"IdCentroAtencionQueTieneLosPreciosªª∫ ‹
)ªª‹ ›
;ªª› ﬁ
return
ºº 
Json
ºº 
(
ºº &
planificadorHabitaciones
ºº 4
)
ºº4 5
;
ºº5 6
}
ΩΩ 
catch
ææ 
(
ææ 
	Exception
ææ 
e
ææ 
)
ææ 
{
øø 
return
¿¿ 
new
¿¿ "
JsonHttpStatusResult
¿¿ /
(
¿¿/ 0
Util
¿¿0 4
.
¿¿4 5
	ErrorJson
¿¿5 >
(
¿¿> ?
e
¿¿? @
)
¿¿@ A
,
¿¿A B
HttpStatusCode
¿¿C Q
.
¿¿Q R!
InternalServerError
¿¿R e
)
¿¿e f
;
¿¿f g
}
¡¡ 
}
¬¬ 	
public
√√ 

JsonResult
√√ )
CambiarEnLimpiezaHabitacion
√√ 5
(
√√5 6
int
√√6 9
idHabitacion
√√: F
)
√√F G
{
ƒƒ 	
try
≈≈ 
{
∆∆ 
OperationResult
«« 
	resultado
««  )
;
««) *
	resultado
»» 
=
»» 
hotelLogica
»» '
.
»»' (+
CambiarEnLimpiezaDeHabitacion
»»( E
(
»»E F
idHabitacion
»»F R
)
»»R S
;
»»S T
Util
…… 
.
…… 
VerificarError
…… #
(
……# $
	resultado
……$ -
)
……- .
;
……. /
return
   
Json
   
(
   
new
   
{
    !
	resultado
  " +
.
  + ,
code_result
  , 7
,
  7 8
	resultado
  9 B
.
  B C
data
  C G
,
  G H 
result_description
  I [
=
  \ ]
	resultado
  ^ g
.
  g h
title
  h m
}
  n o
)
  o p
;
  p q
}
ÀÀ 
catch
ÃÃ 
(
ÃÃ 
LogicaException
ÃÃ "
oe
ÃÃ# %
)
ÃÃ% &
{
ÕÕ 
return
ŒŒ 
new
ŒŒ "
JsonHttpStatusResult
ŒŒ /
(
ŒŒ/ 0
Util
ŒŒ0 4
.
ŒŒ4 5
	ErrorJson
ŒŒ5 >
(
ŒŒ> ?
oe
ŒŒ? A
)
ŒŒA B
,
ŒŒB C
HttpStatusCode
ŒŒD R
.
ŒŒR S!
InternalServerError
ŒŒS f
)
ŒŒf g
;
ŒŒg h
}
œœ 
}
–– 	
public
‘‘ 

JsonResult
‘‘ 
ObtenerHabitacion
‘‘ +
(
‘‘+ ,
int
‘‘, /
id
‘‘0 2
)
‘‘2 3
{
’’ 	
try
÷÷ 
{
◊◊ 

Habitacion
ÿÿ 

habitacion
ÿÿ %
=
ÿÿ& '
hotelLogica
ÿÿ( 3
.
ÿÿ3 4
ObtenerHabitacion
ÿÿ4 E
(
ÿÿE F
id
ÿÿF H
)
ÿÿH I
;
ÿÿI J
return
ŸŸ 
Json
ŸŸ 
(
ŸŸ 

habitacion
ŸŸ &
)
ŸŸ& '
;
ŸŸ' (
}
⁄⁄ 
catch
€€ 
(
€€ 
	Exception
€€ 
e
€€ 
)
€€ 
{
‹‹ 
return
›› 
new
›› "
JsonHttpStatusResult
›› /
(
››/ 0
Util
››0 4
.
››4 5
	ErrorJson
››5 >
(
››> ?
e
››? @
)
››@ A
,
››A B
HttpStatusCode
››C Q
.
››Q R!
InternalServerError
››R e
)
››e f
;
››f g
}
ﬁﬁ 
}
ﬂﬂ 	
public
‡‡ 

JsonResult
‡‡ (
ObtenerHabitacionesBandeja
‡‡ 4
(
‡‡4 5
int
‡‡5 8
idEstablecimiento
‡‡9 J
)
‡‡J K
{
·· 	
try
„„ 
{
‰‰ 
List
ÂÂ 
<
ÂÂ 
HabitacionBandeja
ÂÂ &
>
ÂÂ& '
habitaciones
ÂÂ( 4
=
ÂÂ5 6
hotelLogica
ÂÂ7 B
.
ÂÂB C(
ObtenerHabitacionesBandeja
ÂÂC ]
(
ÂÂ] ^
idEstablecimiento
ÂÂ^ o
)
ÂÂo p
;
ÂÂp q
return
ÁÁ 
Json
ÁÁ 
(
ÁÁ 
habitaciones
ÁÁ (
)
ÁÁ( )
;
ÁÁ) *
}
ËË 
catch
ÈÈ 
(
ÈÈ 
	Exception
ÈÈ 
e
ÈÈ 
)
ÈÈ 
{
ÍÍ 
return
ÎÎ 
new
ÎÎ "
JsonHttpStatusResult
ÎÎ /
(
ÎÎ/ 0
Util
ÎÎ0 4
.
ÎÎ4 5
	ErrorJson
ÎÎ5 >
(
ÎÎ> ?
e
ÎÎ? @
)
ÎÎ@ A
,
ÎÎA B
HttpStatusCode
ÎÎC Q
.
ÎÎQ R!
InternalServerError
ÎÎR e
)
ÎÎe f
;
ÎÎf g
}
ÏÏ 
}
ÌÌ 	
public
ÓÓ 

JsonResult
ÓÓ 
GuardarHabitacion
ÓÓ +
(
ÓÓ+ ,

Habitacion
ÓÓ, 6

habitacion
ÓÓ7 A
)
ÓÓA B
{
ÔÔ 	
try
 
{
ÒÒ 
OperationResult
ÚÚ 
	resultado
ÚÚ  )
;
ÚÚ) *
if
ÛÛ 
(
ÛÛ 

habitacion
ÛÛ 
.
ÛÛ 
Id
ÛÛ !
!=
ÛÛ" $
$num
ÛÛ% &
)
ÛÛ& '
{
ÙÙ 
	resultado
ıı 
=
ıı 
hotelLogica
ıı  +
.
ıı+ ,
EditarHabitacion
ıı, <
(
ıı< =

habitacion
ıı= G
)
ııG H
;
ııH I
}
ˆˆ 
else
˜˜ 
{
¯¯ 
	resultado
˘˘ 
=
˘˘ 
hotelLogica
˘˘  +
.
˘˘+ ,
CrearHabitacion
˘˘, ;
(
˘˘; <

habitacion
˘˘< F
)
˘˘F G
;
˘˘G H
}
˙˙ 
Util
¸¸ 
.
¸¸ 
VerificarError
¸¸ #
(
¸¸# $
	resultado
¸¸$ -
)
¸¸- .
;
¸¸. /
return
˝˝ 
Json
˝˝ 
(
˝˝ 
new
˝˝ 
{
˝˝  !
	resultado
˝˝" +
.
˝˝+ ,
code_result
˝˝, 7
,
˝˝7 8
	resultado
˝˝9 B
.
˝˝B C
data
˝˝C G
,
˝˝G H 
result_description
˝˝I [
=
˝˝\ ]
	resultado
˝˝^ g
.
˝˝g h
title
˝˝h m
}
˝˝n o
)
˝˝o p
;
˝˝p q
}
˛˛ 
catch
ˇˇ 
(
ˇˇ 
	Exception
ˇˇ 
e
ˇˇ 
)
ˇˇ 
{
ÄÄ 
return
ÅÅ 
new
ÅÅ "
JsonHttpStatusResult
ÅÅ /
(
ÅÅ/ 0
Util
ÅÅ0 4
.
ÅÅ4 5
	ErrorJson
ÅÅ5 >
(
ÅÅ> ?
e
ÅÅ? @
)
ÅÅ@ A
,
ÅÅA B
HttpStatusCode
ÅÅC Q
.
ÅÅQ R!
InternalServerError
ÅÅR e
)
ÅÅe f
;
ÅÅf g
}
ÇÇ 
}
ÉÉ 	
public
ÑÑ 

JsonResult
ÑÑ (
CambiarEsVigenteHabitacion
ÑÑ 4
(
ÑÑ4 5
int
ÑÑ5 8
id
ÑÑ9 ;
)
ÑÑ; <
{
ÖÖ 	
try
ÜÜ 
{
áá 
OperationResult
àà 
	resultado
àà  )
;
àà) *
	resultado
ââ 
=
ââ 
hotelLogica
ââ '
.
ââ' ((
CambiarEsVigenteHabitacion
ââ( B
(
ââB C
id
ââC E
)
ââE F
;
ââF G
Util
ää 
.
ää 
VerificarError
ää #
(
ää# $
	resultado
ää$ -
)
ää- .
;
ää. /
return
ãã 
Json
ãã 
(
ãã 
new
ãã 
{
ãã  !
	resultado
ãã" +
.
ãã+ ,
code_result
ãã, 7
,
ãã7 8
	resultado
ãã9 B
.
ããB C
data
ããC G
,
ããG H 
result_description
ããI [
=
ãã\ ]
	resultado
ãã^ g
.
ããg h
title
ããh m
}
ããn o
)
ãão p
;
ããp q
}
åå 
catch
çç 
(
çç 
	Exception
çç 
e
çç 
)
çç 
{
éé 
return
êê 
new
êê "
JsonHttpStatusResult
êê /
(
êê/ 0
Util
êê0 4
.
êê4 5
	ErrorJson
êê5 >
(
êê> ?
e
êê? @
)
êê@ A
,
êêA B
HttpStatusCode
êêC Q
.
êêQ R!
InternalServerError
êêR e
)
êêe f
;
êêf g
}
ëë 
}
ìì 	
public
îî 

JsonResult
îî ,
ObtenerHabitacionesDisponibles
îî 8
(
îî8 9
int
îî9 <
idTipoHabitacion
îî= M
,
îîM N
string
îîO U

fechaDesde
îîV `
,
îî` a
string
îîb h

fechaHasta
îîi s
,
îîs t
int
îîu x 
idEstablecimientoîîy ä
,îîä ã
intîîå è

idAmbienteîîê ö
)îîö õ
{
ïï 	
try
ññ 
{
óó 
DateTime
òò 
fechaInicio
òò $
=
òò% &
DateTime
òò' /
.
òò/ 0
Parse
òò0 5
(
òò5 6

fechaDesde
òò6 @
)
òò@ A
;
òòA B
DateTime
ôô 
fechaFin
ôô !
=
ôô" #
DateTime
ôô$ ,
.
ôô, -
Parse
ôô- 2
(
ôô2 3

fechaHasta
ôô3 =
)
ôô= >
;
ôô> ?
List
öö 
<
öö 

Habitacion
öö 
>
öö  %
habitacionesDisponibles
öö! 8
=
öö9 :
hotelLogica
öö; F
.
ööF G,
ObtenerHabitacionesDisponibles
ööG e
(
ööe f
idTipoHabitacion
ööf v
,
ööv w
fechaInicioööx É
,ööÉ Ñ
fechaFinööÖ ç
,ööç é!
idEstablecimientoööè †
,öö† °

idAmbienteöö¢ ¨
,öö¨ ≠
ProfileDataööÆ π
(ööπ ∫
)öö∫ ª
.ööª º2
"IdCentroAtencionQueTieneLosPreciosööº ﬁ
)ööﬁ ﬂ
;ööﬂ ‡
return
õõ 
Json
õõ 
(
õõ %
habitacionesDisponibles
õõ 3
)
õõ3 4
;
õõ4 5
}
úú 
catch
ùù 
(
ùù 
	Exception
ùù 
e
ùù 
)
ùù 
{
ûû 
return
üü 
new
üü "
JsonHttpStatusResult
üü /
(
üü/ 0
Util
üü0 4
.
üü4 5
	ErrorJson
üü5 >
(
üü> ?
e
üü? @
)
üü@ A
,
üüA B
HttpStatusCode
üüC Q
.
üüQ R!
InternalServerError
üüR e
)
üüe f
;
üüf g
}
†† 
}
°° 	
public
¢¢ 

JsonResult
¢¢ )
ObtenerHabitacionDisponible
¢¢ 5
(
¢¢5 6
int
¢¢6 9
idHabitacion
¢¢: F
)
¢¢F G
{
££ 	
try
§§ 
{
•• 

Habitacion
¶¶ "
habitacionDisponible
¶¶ /
=
¶¶0 1
hotelLogica
¶¶2 =
.
¶¶= >)
ObtenerHabitacionDisponible
¶¶> Y
(
¶¶Y Z
idHabitacion
¶¶Z f
,
¶¶f g
ProfileData
¶¶h s
(
¶¶s t
)
¶¶t u
.
¶¶u v1
"IdCentroAtencionQueTieneLosPrecios¶¶v ò
)¶¶ò ô
;¶¶ô ö
return
ßß 
Json
ßß 
(
ßß "
habitacionDisponible
ßß 0
)
ßß0 1
;
ßß1 2
}
®® 
catch
©© 
(
©© 
	Exception
©© 
e
©© 
)
©© 
{
™™ 
return
´´ 
new
´´ "
JsonHttpStatusResult
´´ /
(
´´/ 0
Util
´´0 4
.
´´4 5
	ErrorJson
´´5 >
(
´´> ?
e
´´? @
)
´´@ A
,
´´A B
HttpStatusCode
´´C Q
.
´´Q R!
InternalServerError
´´R e
)
´´e f
;
´´f g
}
¨¨ 
}
≠≠ 	
public
±± 

JsonResult
±± -
CambiarVigenciaDelAmbienteHotel
±± 9
(
±±9 :
int
±±: =
id
±±> @
)
±±@ A
{
≤≤ 	
try
≥≥ 
{
¥¥ 
OperationResult
∂∂ 
	resultado
∂∂  )
;
∂∂) *
	resultado
∏∏ 
=
∏∏ 
hotelLogica
∏∏ '
.
∏∏' (-
CambiarVigenciaDelAmbienteHotel
∏∏( G
(
∏∏G H
id
∏∏H J
)
∏∏J K
;
∏∏K L
Util
ππ 
.
ππ 
VerificarError
ππ #
(
ππ# $
	resultado
ππ$ -
)
ππ- .
;
ππ. /
return
∫∫ 
Json
∫∫ 
(
∫∫ 
new
∫∫ 
{
∫∫  !
	resultado
∫∫" +
.
∫∫+ ,
code_result
∫∫, 7
,
∫∫7 8
	resultado
∫∫9 B
.
∫∫B C
data
∫∫C G
,
∫∫G H 
result_description
∫∫I [
=
∫∫\ ]
	resultado
∫∫^ g
.
∫∫g h
title
∫∫h m
}
∫∫n o
)
∫∫o p
;
∫∫p q
}
ªª 
catch
ºº 
(
ºº 
LogicaException
ºº "
oe
ºº# %
)
ºº% &
{
ΩΩ 
return
ææ 
new
ææ "
JsonHttpStatusResult
ææ /
(
ææ/ 0
Util
ææ0 4
.
ææ4 5
	ErrorJson
ææ5 >
(
ææ> ?
oe
ææ? A
)
ææA B
,
ææB C
HttpStatusCode
ææD R
.
ææR S!
InternalServerError
ææS f
)
ææf g
;
ææg h
}
øø 
}
¿¿ 	
public
¡¡ 

JsonResult
¡¡ 5
'ObtenerAmbientesHotelPorEstablecimiento
¡¡ A
(
¡¡A B
int
¡¡B E
idEstablecimiento
¡¡F W
)
¡¡W X
{
¬¬ 	
try
√√ 
{
ƒƒ 
List
≈≈ 
<
≈≈ 
AmbienteHotel
≈≈ "
>
≈≈" #
ambientesDeHotel
≈≈$ 4
=
≈≈5 6
hotelLogica
≈≈7 B
.
≈≈B C5
'ObtenerAmbientesHotelPorEstablecimiento
≈≈C j
(
≈≈j k
idEstablecimiento
≈≈k |
)
≈≈| }
;
≈≈} ~
return
∆∆ 
Json
∆∆ 
(
∆∆ 
ambientesDeHotel
∆∆ ,
)
∆∆, -
;
∆∆- .
}
«« 
catch
»» 
(
»» 
	Exception
»» 
e
»» 
)
»» 
{
…… 
return
   
new
   "
JsonHttpStatusResult
   /
(
  / 0
Util
  0 4
.
  4 5
	ErrorJson
  5 >
(
  > ?
e
  ? @
)
  @ A
,
  A B
HttpStatusCode
  C Q
.
  Q R!
InternalServerError
  R e
)
  e f
;
  f g
}
ÀÀ 
}
ÃÃ 	
public
ÕÕ 

JsonResult
ÕÕ D
6ObtenerAmbientesVigentesPorEstablecimientoSimplificado
ÕÕ P
(
ÕÕP Q
int
ÕÕQ T
idEstablecimiento
ÕÕU f
)
ÕÕf g
{
ŒŒ 	
try
œœ 
{
–– 
List
—— 
<
—— 
ItemGenerico
—— !
>
——! "
ambientesDeHotel
——# 3
=
——4 5
hotelLogica
——6 A
.
——A BD
6ObtenerAmbientesVigentesPorEstablecimientoSimplificado
——B x
(
——x y 
idEstablecimiento——y ä
)——ä ã
;——ã å
return
““ 
Json
““ 
(
““ 
ambientesDeHotel
““ ,
)
““, -
;
““- .
}
”” 
catch
‘‘ 
(
‘‘ 
	Exception
‘‘ 
e
‘‘ 
)
‘‘ 
{
’’ 
return
÷÷ 
new
÷÷ "
JsonHttpStatusResult
÷÷ /
(
÷÷/ 0
Util
÷÷0 4
.
÷÷4 5
	ErrorJson
÷÷5 >
(
÷÷> ?
e
÷÷? @
)
÷÷@ A
,
÷÷A B
HttpStatusCode
÷÷C Q
.
÷÷Q R!
InternalServerError
÷÷R e
)
÷÷e f
;
÷÷f g
}
◊◊ 
}
ÿÿ 	
public
ŸŸ 

JsonResult
ŸŸ 
GuardarAmbiente
ŸŸ )
(
ŸŸ) *
AmbienteHotel
ŸŸ* 7
ambiente
ŸŸ8 @
)
ŸŸ@ A
{
⁄⁄ 	
try
€€ 
{
‹‹ 
OperationResult
ﬁﬁ 
	resultado
ﬁﬁ  )
;
ﬁﬁ) *
if
‡‡ 
(
‡‡ 
ambiente
‡‡ 
.
‡‡ 
Id
‡‡ 
!=
‡‡  "
$num
‡‡# $
)
‡‡$ %
{
·· 
	resultado
‚‚ 
=
‚‚ 
hotelLogica
‚‚  +
.
‚‚+ ,
EditarAmbiente
‚‚, :
(
‚‚: ;
ambiente
‚‚; C
)
‚‚C D
;
‚‚D E
}
„„ 
else
‰‰ 
{
ÂÂ 
	resultado
ÊÊ 
=
ÊÊ 
hotelLogica
ÊÊ  +
.
ÊÊ+ ,
CrearAmbiente
ÊÊ, 9
(
ÊÊ9 :
ambiente
ÊÊ: B
)
ÊÊB C
;
ÊÊC D
}
ÁÁ 
Util
ËË 
.
ËË 
VerificarError
ËË #
(
ËË# $
	resultado
ËË$ -
)
ËË- .
;
ËË. /
return
ÈÈ 
Json
ÈÈ 
(
ÈÈ 
new
ÈÈ 
{
ÈÈ  !
	resultado
ÈÈ" +
.
ÈÈ+ ,
code_result
ÈÈ, 7
,
ÈÈ7 8
	resultado
ÈÈ9 B
.
ÈÈB C
data
ÈÈC G
,
ÈÈG H 
result_description
ÈÈI [
=
ÈÈ\ ]
	resultado
ÈÈ^ g
.
ÈÈg h
title
ÈÈh m
}
ÈÈn o
)
ÈÈo p
;
ÈÈp q
}
ÍÍ 
catch
ÎÎ 
(
ÎÎ 
	Exception
ÎÎ 
e
ÎÎ 
)
ÎÎ 
{
ÏÏ 
return
ÌÌ 
new
ÌÌ "
JsonHttpStatusResult
ÌÌ /
(
ÌÌ/ 0
Util
ÌÌ0 4
.
ÌÌ4 5
	ErrorJson
ÌÌ5 >
(
ÌÌ> ?
e
ÌÌ? @
)
ÌÌ@ A
,
ÌÌA B
HttpStatusCode
ÌÌC Q
.
ÌÌQ R!
InternalServerError
ÌÌR e
)
ÌÌe f
;
ÌÌf g
}
ÓÓ 
}
ÔÔ 	
public
ÛÛ 

JsonResult
ÛÛ 8
*ObtenerTiposHabitacionVigentesSimplificado
ÛÛ D
(
ÛÛD E
)
ÛÛE F
{
ÙÙ 	
try
ıı 
{
ˆˆ 
List
˜˜ 
<
˜˜ 
ItemGenerico
˜˜ !
>
˜˜! "%
tipoHabitacionesDeHotel
˜˜# :
=
˜˜; <
hotelLogica
˜˜= H
.
˜˜H I8
*ObtenerTiposHabitacionVigentesSimplificado
˜˜I s
(
˜˜s t
)
˜˜t u
;
˜˜u v
return
¯¯ 
Json
¯¯ 
(
¯¯ %
tipoHabitacionesDeHotel
¯¯ 3
)
¯¯3 4
;
¯¯4 5
}
˘˘ 
catch
˙˙ 
(
˙˙ 
	Exception
˙˙ 
e
˙˙ 
)
˙˙ 
{
˚˚ 
return
¸¸ 
new
¸¸ "
JsonHttpStatusResult
¸¸ /
(
¸¸/ 0
Util
¸¸0 4
.
¸¸4 5
	ErrorJson
¸¸5 >
(
¸¸> ?
e
¸¸? @
)
¸¸@ A
,
¸¸A B
HttpStatusCode
¸¸C Q
.
¸¸Q R!
InternalServerError
¸¸R e
)
¸¸e f
;
¸¸f g
}
˝˝ 
}
˛˛ 	
public
ˇˇ 

JsonResult
ˇˇ .
 CambiarVigenciaDelTipoHabitacion
ˇˇ :
(
ˇˇ: ;
int
ˇˇ; >
id
ˇˇ? A
)
ˇˇA B
{
ÄÄ 	
try
ÅÅ 
{
ÇÇ 
OperationResult
ÉÉ 
	resultado
ÉÉ  )
;
ÉÉ) *
	resultado
ÑÑ 
=
ÑÑ 
hotelLogica
ÑÑ '
.
ÑÑ' (.
 CambiarVigenciaDelTipoHabitacion
ÑÑ( H
(
ÑÑH I
id
ÑÑI K
)
ÑÑK L
;
ÑÑL M
Util
ÖÖ 
.
ÖÖ 
VerificarError
ÖÖ #
(
ÖÖ# $
	resultado
ÖÖ$ -
)
ÖÖ- .
;
ÖÖ. /
return
ÜÜ 
Json
ÜÜ 
(
ÜÜ 
new
ÜÜ 
{
ÜÜ  !
	resultado
ÜÜ" +
.
ÜÜ+ ,
code_result
ÜÜ, 7
,
ÜÜ7 8
	resultado
ÜÜ9 B
.
ÜÜB C
data
ÜÜC G
,
ÜÜG H 
result_description
ÜÜI [
=
ÜÜ\ ]
	resultado
ÜÜ^ g
.
ÜÜg h
title
ÜÜh m
}
ÜÜn o
)
ÜÜo p
;
ÜÜp q
}
áá 
catch
àà 
(
àà 
LogicaException
àà "
oe
àà# %
)
àà% &
{
ââ 
return
ää 
new
ää "
JsonHttpStatusResult
ää /
(
ää/ 0
Util
ää0 4
.
ää4 5
	ErrorJson
ää5 >
(
ää> ?
oe
ää? A
)
ääA B
,
ääB C
HttpStatusCode
ääD R
.
ääR S!
InternalServerError
ääS f
)
ääf g
;
ääg h
}
ãã 
}
åå 	
public
çç 

JsonResult
çç #
ObtenerTipoHabitacion
çç /
(
çç/ 0
int
çç0 3
id
çç4 6
)
çç6 7
{
éé 	
try
èè 
{
êê 
TipoHabitacion
ëë 
tipoHabitacion
ëë -
=
ëë. /
hotelLogica
ëë0 ;
.
ëë; <#
ObtenerTipoHabitacion
ëë< Q
(
ëëQ R
id
ëëR T
,
ëëT U
ProfileData
ëëV a
(
ëëa b
)
ëëb c
)
ëëc d
;
ëëd e
List
íí 
<
íí $
ComboGenericoViewModel
íí +
>
íí+ ,
puntosDePrecio
íí- ;
=
íí< =$
ComboGenericoViewModel
íí> T
.
ííT U
Convert
ííU \
(
íí\ ]%
_centroDeAtencionLogica
íí] t
.
íít u$
ObtenerPuntosDePrecioííu ä
(ííä ã
)ííã å
)ííå ç
;ííç é
var
ìì 
tarifasDePrecio
ìì #
=
ìì$ %$
ComboGenericoViewModel
ìì& <
.
ìì< =
Convert
ìì= D
(
ììD E
maestroLogica
ììE R
.
ììR S
obtenerTarifas
ììS a
(
ììa b
)
ììb c
)
ììc d
;
ììd e
var
îî  
preciosCompraVenta
îî &
=
îî' (
logicaConcepto
îî) 7
.
îî7 88
*ObtenerPreciosCompraVentaDeConceptoNegocio
îî8 b
(
îîb c
tipoHabitacion
îîc q
.
îîq r
Id
îîr t
)
îît u
;
îîu v%
RegistroPrecioViewModel
ïï '
precios
ïï( /
=
ïï0 1
new
ïï2 5%
RegistroPrecioViewModel
ïï6 M
(
ïïM N
tipoHabitacion
ïïN \
.
ïï\ ]
Precios
ïï] d
,
ïïd e
tipoHabitacion
ïïf t
.
ïït u
Id
ïïu w
,
ïïw x
puntosDePrecioïïy á
,ïïá à
tarifasDePrecioïïâ ò
,ïïò ô
DateTimeUtilïïö ¶
.ïï¶ ß
FechaActualïïß ≤
(ïï≤ ≥
)ïï≥ ¥
)ïï¥ µ
;ïïµ ∂
return
ññ 
Json
ññ 
(
ññ 
new
ññ 
{
ññ  !
tipoHabitacion
ññ" 0
,
ññ0 1
precios
ññ2 9
}
ññ: ;
)
ññ; <
;
ññ< =
}
óó 
catch
òò 
(
òò 
	Exception
òò 
e
òò 
)
òò 
{
ôô 
return
öö 
new
öö "
JsonHttpStatusResult
öö /
(
öö/ 0
Util
öö0 4
.
öö4 5
	ErrorJson
öö5 >
(
öö> ?
e
öö? @
)
öö@ A
,
ööA B
HttpStatusCode
ööC Q
.
ööQ R!
InternalServerError
ööR e
)
ööe f
;
ööf g
}
õõ 
}
úú 	
public
ùù 

JsonResult
ùù ,
ObtenerTipoHabitacionesBandeja
ùù 8
(
ùù8 9
)
ùù9 :
{
ûû 	
try
üü 
{
†† 
List
°° 
<
°° %
TipoHabitacionesBandeja
°° ,
>
°°, -%
tipoHabitacionesDeHotel
°°. E
=
°°F G
hotelLogica
°°H S
.
°°S T%
ObtenerTipoHabitaciones
°°T k
(
°°k l
)
°°l m
;
°°m n
return
¢¢ 
Json
¢¢ 
(
¢¢ %
tipoHabitacionesDeHotel
¢¢ 3
)
¢¢3 4
;
¢¢4 5
}
££ 
catch
§§ 
(
§§ 
	Exception
§§ 
e
§§ 
)
§§ 
{
•• 
return
¶¶ 
new
¶¶ "
JsonHttpStatusResult
¶¶ /
(
¶¶/ 0
Util
¶¶0 4
.
¶¶4 5
	ErrorJson
¶¶5 >
(
¶¶> ?
e
¶¶? @
)
¶¶@ A
,
¶¶A B
HttpStatusCode
¶¶C Q
.
¶¶Q R!
InternalServerError
¶¶R e
)
¶¶e f
;
¶¶f g
}
ßß 
}
®® 	
public
©© 

JsonResult
©© #
GuardarTipoHabitacion
©© /
(
©©/ 0
TipoHabitacion
©©0 >
tipoHabitacion
©©? M
,
©©M N%
RegistroPrecioViewModel
©©O f
precios
©©g n
)
©©n o
{
™™ 	
try
´´ 
{
¨¨ 
OperationResult
≠≠ 
	resultado
≠≠  )
;
≠≠) *
tipoHabitacion
ÆÆ 
.
ÆÆ 
Precios
ÆÆ &
=
ÆÆ' (%
RegistroPrecioViewModel
ÆÆ) @
.
ÆÆ@ A
Convert
ÆÆA H
(
ÆÆH I
precios
ÆÆI P
)
ÆÆP Q
;
ÆÆQ R
if
ØØ 
(
ØØ 
tipoHabitacion
ØØ "
.
ØØ" #
Id
ØØ# %
!=
ØØ& (
$num
ØØ) *
)
ØØ* +
{
∞∞ 
	resultado
±± 
=
±± 
hotelLogica
±±  +
.
±±+ ,"
EditarTipoHabitacion
±±, @
(
±±@ A
tipoHabitacion
±±A O
,
±±O P
ProfileData
±±Q \
(
±±\ ]
)
±±] ^
)
±±^ _
;
±±_ `
}
≤≤ 
else
≥≥ 
{
¥¥ 
	resultado
µµ 
=
µµ 
hotelLogica
µµ  +
.
µµ+ ,!
CrearTipoHabitacion
µµ, ?
(
µµ? @
tipoHabitacion
µµ@ N
,
µµN O
ProfileData
µµP [
(
µµ[ \
)
µµ\ ]
)
µµ] ^
;
µµ^ _
tipoHabitacion
∂∂ "
.
∂∂" #'
IdsValoresCaracteristicas
∂∂# <
=
∂∂= >
null
∂∂? C
;
∂∂C D
}
∑∑ 
Util
∏∏ 
.
∏∏ 
VerificarError
∏∏ #
(
∏∏# $
	resultado
∏∏$ -
)
∏∏- .
;
∏∏. /
return
ππ 
Json
ππ 
(
ππ 
new
ππ 
{
ππ  !
	resultado
ππ" +
.
ππ+ ,
code_result
ππ, 7
,
ππ7 8
	resultado
ππ9 B
.
ππB C
data
ππC G
,
ππG H 
result_description
ππI [
=
ππ\ ]
	resultado
ππ^ g
.
ππg h
title
ππh m
}
ππn o
)
ππo p
;
ππp q
}
∫∫ 
catch
ªª 
(
ªª 
	Exception
ªª 
e
ªª 
)
ªª 
{
ºº 
return
ΩΩ 
new
ΩΩ "
JsonHttpStatusResult
ΩΩ /
(
ΩΩ/ 0
Util
ΩΩ0 4
.
ΩΩ4 5
	ErrorJson
ΩΩ5 >
(
ΩΩ> ?
e
ΩΩ? @
)
ΩΩ@ A
,
ΩΩA B
HttpStatusCode
ΩΩC Q
.
ΩΩQ R!
InternalServerError
ΩΩR e
)
ΩΩe f
;
ΩΩf g
}
ææ 
}
øø 	
public
√√ 

JsonResult
√√ 
ObtenerTipoCamas
√√ *
(
√√* +
)
√√+ ,
{
ƒƒ 	
try
≈≈ 
{
∆∆ 
List
«« 
<
«« 
ItemGenerico
«« !
>
««! "
	tipoCamas
««# ,
=
««- .
hotelLogica
««/ :
.
««: ;
ObtenerTipoCamas
««; K
(
««K L
)
««L M
;
««M N
return
»» 
Json
»» 
(
»» 
	tipoCamas
»» %
)
»»% &
;
»»& '
}
…… 
catch
   
(
   
	Exception
   
e
   
)
   
{
ÀÀ 
return
ÃÃ 
new
ÃÃ "
JsonHttpStatusResult
ÃÃ /
(
ÃÃ/ 0
Util
ÃÃ0 4
.
ÃÃ4 5
	ErrorJson
ÃÃ5 >
(
ÃÃ> ?
e
ÃÃ? @
)
ÃÃ@ A
,
ÃÃA B
HttpStatusCode
ÃÃC Q
.
ÃÃQ R!
InternalServerError
ÃÃR e
)
ÃÃe f
;
ÃÃf g
}
ÕÕ 
}
ŒŒ 	
public
““ 

JsonResult
““ !
ObtenerComplementos
““ -
(
““- .
)
““. /
{
”” 	
try
‘‘ 
{
’’ 
List
÷÷ 
<
÷÷ 
ItemGenerico
÷÷ !
>
÷÷! "
	tipoCamas
÷÷# ,
=
÷÷- .
hotelLogica
÷÷/ :
.
÷÷: ;
ObtenerTipoCamas
÷÷; K
(
÷÷K L
)
÷÷L M
;
÷÷M N
return
◊◊ 
Json
◊◊ 
(
◊◊ 
	tipoCamas
◊◊ %
)
◊◊% &
;
◊◊& '
}
ÿÿ 
catch
ŸŸ 
(
ŸŸ 
	Exception
ŸŸ 
e
ŸŸ 
)
ŸŸ 
{
⁄⁄ 
return
€€ 
new
€€ "
JsonHttpStatusResult
€€ /
(
€€/ 0
Util
€€0 4
.
€€4 5
	ErrorJson
€€5 >
(
€€> ?
e
€€? @
)
€€@ A
,
€€A B
HttpStatusCode
€€C Q
.
€€Q R!
InternalServerError
€€R e
)
€€e f
;
€€f g
}
‹‹ 
}
›› 	
public
ﬁﬁ 

JsonResult
ﬁﬁ  
GuardarComplemento
ﬁﬁ ,
(
ﬁﬁ, -
Complemento
ﬁﬁ- 8
complemento
ﬁﬁ9 D
)
ﬁﬁD E
{
ﬂﬂ 	
try
‡‡ 
{
·· 
OperationResult
‚‚ 
	resultado
‚‚  )
;
‚‚) *
if
„„ 
(
„„ 
complemento
„„ 
.
„„  
Id
„„  "
!=
„„# %
$num
„„& '
)
„„' (
{
‰‰ 
	resultado
ÂÂ 
=
ÂÂ 
hotelLogica
ÂÂ  +
.
ÂÂ+ ,#
ActualizarComplemento
ÂÂ, A
(
ÂÂA B
complemento
ÂÂB M
)
ÂÂM N
;
ÂÂN O
}
ÊÊ 
else
ÁÁ 
{
ËË 
	resultado
ÈÈ 
=
ÈÈ 
hotelLogica
ÈÈ  +
.
ÈÈ+ , 
GuardarComplemento
ÈÈ, >
(
ÈÈ> ?
complemento
ÈÈ? J
)
ÈÈJ K
;
ÈÈK L
}
ÍÍ 
Util
ÎÎ 
.
ÎÎ 
VerificarError
ÎÎ #
(
ÎÎ# $
	resultado
ÎÎ$ -
)
ÎÎ- .
;
ÎÎ. /
return
ÏÏ 
Json
ÏÏ 
(
ÏÏ 
new
ÏÏ 
{
ÏÏ  !
	resultado
ÏÏ" +
.
ÏÏ+ ,
code_result
ÏÏ, 7
,
ÏÏ7 8
	resultado
ÏÏ9 B
.
ÏÏB C
data
ÏÏC G
,
ÏÏG H 
result_description
ÏÏI [
=
ÏÏ\ ]
	resultado
ÏÏ^ g
.
ÏÏg h
title
ÏÏh m
}
ÏÏn o
)
ÏÏo p
;
ÏÏp q
}
ÌÌ 
catch
ÓÓ 
(
ÓÓ 
	Exception
ÓÓ 
e
ÓÓ 
)
ÓÓ 
{
ÔÔ 
return
 
new
 "
JsonHttpStatusResult
 /
(
/ 0
Util
0 4
.
4 5
	ErrorJson
5 >
(
> ?
e
? @
)
@ A
,
A B
HttpStatusCode
C Q
.
Q R!
InternalServerError
R e
)
e f
;
f g
}
ÒÒ 
}
ÚÚ 	
public
ˆˆ 

JsonResult
ˆˆ $
ObtenerReservasBandeja
ˆˆ 0
(
ˆˆ0 1
int
ˆˆ1 4
idEstablecimiento
ˆˆ5 F
,
ˆˆF G
string
ˆˆH N

fechaDesde
ˆˆO Y
,
ˆˆY Z
string
ˆˆ[ a

fechaHasta
ˆˆb l
)
ˆˆl m
{
˜˜ 	
try
¯¯ 
{
˘˘ 
DateTime
˙˙ 
fechaInicio
˙˙ $
=
˙˙% &
DateTime
˙˙' /
.
˙˙/ 0
Parse
˙˙0 5
(
˙˙5 6

fechaDesde
˙˙6 @
)
˙˙@ A
;
˙˙A B
DateTime
˚˚ 
fechaFin
˚˚ !
=
˚˚" #
DateTime
˚˚$ ,
.
˚˚, -
Parse
˚˚- 2
(
˚˚2 3

fechaHasta
˚˚3 =
+
˚˚> ?
$str
˚˚@ K
)
˚˚K L
;
˚˚L M
List
¸¸ 
<
¸¸ 
ReservaBandeja
¸¸ #
>
¸¸# $
reservaBandejas
¸¸% 4
=
¸¸5 6
hotelLogica
¸¸7 B
.
¸¸B C#
ObtenerReservaBandeja
¸¸C X
(
¸¸X Y
idEstablecimiento
¸¸Y j
,
¸¸j k
fechaInicio
¸¸l w
,
¸¸w x
fechaFin¸¸y Å
)¸¸Å Ç
;¸¸Ç É
return
˝˝ 
Json
˝˝ 
(
˝˝ 
reservaBandejas
˝˝ +
)
˝˝+ ,
;
˝˝, -
}
˛˛ 
catch
ˇˇ 
(
ˇˇ 
	Exception
ˇˇ 
e
ˇˇ 
)
ˇˇ 
{
ÄÄ 
return
ÅÅ 
new
ÅÅ "
JsonHttpStatusResult
ÅÅ /
(
ÅÅ/ 0
Util
ÅÅ0 4
.
ÅÅ4 5
	ErrorJson
ÅÅ5 >
(
ÅÅ> ?
e
ÅÅ? @
)
ÅÅ@ A
,
ÅÅA B
HttpStatusCode
ÅÅC Q
.
ÅÅQ R!
InternalServerError
ÅÅR e
)
ÅÅe f
;
ÅÅf g
}
ÇÇ 
}
ÉÉ 	
public
ÑÑ 

JsonResult
ÑÑ 5
'ObtenerParametrosParaRegistradorReserva
ÑÑ A
(
ÑÑA B
)
ÑÑB C
{
ÖÖ 	
try
ÜÜ 
{
áá 
var
àà 
fechaActual
àà 
=
àà  !
DateTimeUtil
àà" .
.
àà. /
FechaActual
àà/ :
(
àà: ;
)
àà; <
;
àà< =
var
ââ 
data
ââ 
=
ââ 
new
ââ "
ConfiguracionReserva
ââ 3
{
ää 
FechaActual
ãã 
=
ãã  !
fechaActual
ãã" -
.
ãã- .
ToString
ãã. 6
(
ãã6 7
$str
ãã7 C
)
ããC D
,
ããD E#
AgregarDiaAFechaDesde
åå )
=
åå* +
(
åå, -
(
åå- .
fechaActual
åå. 9
.
åå9 :
Date
åå: >
.
åå> ?
AddHours
åå? G
(
ååG H
$num
ååH J
)
ååJ K
-
ååL M
fechaActual
ååN Y
)
ååY Z
.
ååZ [
TotalMinutes
åå[ g
-
ååh i
HotelSettings
ååj w
.
ååw x
Default
ååx 
.åå Ä/
ToleranciaEnMinutosParaCheckingååÄ ü
)ååü †
>åå° ¢
$numåå£ §
}
çç 
;
çç 
return
éé 
Json
éé 
(
éé 
new
éé 
{
éé  !
data
éé" &
}
éé' (
)
éé( )
;
éé) *
}
èè 
catch
êê 
(
êê 
	Exception
êê 
e
êê 
)
êê 
{
ëë 
return
íí 
new
íí "
JsonHttpStatusResult
íí /
(
íí/ 0
Util
íí0 4
.
íí4 5
	ErrorJson
íí5 >
(
íí> ?
e
íí? @
)
íí@ A
,
ííA B
HttpStatusCode
ííC Q
.
ííQ R!
InternalServerError
ííR e
)
ííe f
;
ííf g
}
ìì 
}
îî 	
public
ïï 

JsonResult
ïï 5
'ObtenerParametrosParaRegistradorHuesped
ïï A
(
ïïA B
)
ïïB C
{
ññ 	
try
óó 
{
òò 
var
ôô 
data
ôô 
=
ôô "
ConfiguracionHuesped
ôô /
.
ôô/ 0
Default
ôô0 7
;
ôô7 8
return
öö 
Json
öö 
(
öö 
new
öö 
{
öö  !
data
öö" &
}
öö' (
)
öö( )
;
öö) *
}
õõ 
catch
úú 
(
úú 
	Exception
úú 
e
úú 
)
úú 
{
ùù 
return
ûû 
new
ûû "
JsonHttpStatusResult
ûû /
(
ûû/ 0
Util
ûû0 4
.
ûû4 5
	ErrorJson
ûû5 >
(
ûû> ?
e
ûû? @
)
ûû@ A
,
ûûA B
HttpStatusCode
ûûC Q
.
ûûQ R!
InternalServerError
ûûR e
)
ûûe f
;
ûûf g
}
üü 
}
†† 	
public
°° 

JsonResult
°° .
 ObtenerConfiguracionParaFacturar
°° :
(
°°: ;
)
°°; <
{
¢¢ 	
try
££ 
{
§§ 
return
•• 
Json
•• 
(
•• 
new
•• 
{
••  !
data
••" &
=
••' (#
ConfiguracionFacturar
••) >
.
••> ?
Default
••? F
}
••G H
)
••H I
;
••I J
}
¶¶ 
catch
ßß 
(
ßß 
	Exception
ßß 
e
ßß 
)
ßß 
{
®® 
return
©© 
new
©© "
JsonHttpStatusResult
©© /
(
©©/ 0
Util
©©0 4
.
©©4 5
	ErrorJson
©©5 >
(
©©> ?
e
©©? @
)
©©@ A
,
©©A B
HttpStatusCode
©©C Q
.
©©Q R!
InternalServerError
©©R e
)
©©e f
;
©©f g
}
™™ 
}
´´ 	
public
¨¨ 

JsonResult
¨¨ 
GuardarReserva
¨¨ (
(
¨¨( ) 
AtencionMacroHotel
¨¨) ;
reserva
¨¨< C
)
¨¨C D
{
≠≠ 	
try
ÆÆ 
{
ØØ 
OperationResult
∞∞ 
	resultado
∞∞  )
=
∞∞* +
hotelLogica
∞∞, 7
.
∞∞7 8
ConfirmarReserva
∞∞8 H
(
∞∞H I
reserva
∞∞I P
,
∞∞P Q
ProfileData
∞∞R ]
(
∞∞] ^
)
∞∞^ _
)
∞∞_ `
;
∞∞` a
Util
±± 
.
±± 
VerificarError
±± #
(
±±# $
	resultado
±±$ -
)
±±- .
;
±±. /
return
≤≤ 
Json
≤≤ 
(
≤≤ 
new
≤≤ 
{
≤≤  !
	resultado
≤≤" +
.
≤≤+ ,
code_result
≤≤, 7
,
≤≤7 8
	resultado
≤≤9 B
.
≤≤B C
data
≤≤C G
,
≤≤G H 
result_description
≤≤I [
=
≤≤\ ]
	resultado
≤≤^ g
.
≤≤g h
title
≤≤h m
}
≤≤n o
)
≤≤o p
;
≤≤p q
}
≥≥ 
catch
¥¥ 
(
¥¥ 
	Exception
¥¥ 
e
¥¥ 
)
¥¥ 
{
µµ 
return
∂∂ 
new
∂∂ "
JsonHttpStatusResult
∂∂ /
(
∂∂/ 0
Util
∂∂0 4
.
∂∂4 5
	ErrorJson
∂∂5 >
(
∂∂> ?
e
∂∂? @
)
∂∂@ A
,
∂∂A B
HttpStatusCode
∂∂C Q
.
∂∂Q R!
InternalServerError
∂∂R e
)
∂∂e f
;
∂∂f g
}
∑∑ 
}
∏∏ 	
public
ππ 

JsonResult
ππ 
CheckInReserva
ππ (
(
ππ( ) 
AtencionMacroHotel
ππ) ;
reserva
ππ< C
)
ππC D
{
∫∫ 	
try
ªª 
{
ºº 
OperationResult
ΩΩ 
	resultado
ΩΩ  )
=
ΩΩ* +
hotelLogica
ΩΩ, 7
.
ΩΩ7 8
CheckInReserva
ΩΩ8 F
(
ΩΩF G
reserva
ΩΩG N
,
ΩΩN O
ProfileData
ΩΩP [
(
ΩΩ[ \
)
ΩΩ\ ]
)
ΩΩ] ^
;
ΩΩ^ _
Util
ææ 
.
ææ 
VerificarError
ææ #
(
ææ# $
	resultado
ææ$ -
)
ææ- .
;
ææ. /
return
øø 
Json
øø 
(
øø 
new
øø 
{
øø  !
	resultado
øø" +
.
øø+ ,
code_result
øø, 7
,
øø7 8
	resultado
øø9 B
.
øøB C
data
øøC G
,
øøG H 
result_description
øøI [
=
øø\ ]
	resultado
øø^ g
.
øøg h
title
øøh m
}
øøn o
)
øøo p
;
øøp q
}
¿¿ 
catch
¡¡ 
(
¡¡ 
	Exception
¡¡ 
e
¡¡ 
)
¡¡ 
{
¬¬ 
return
√√ 
new
√√ "
JsonHttpStatusResult
√√ /
(
√√/ 0
Util
√√0 4
.
√√4 5
	ErrorJson
√√5 >
(
√√> ?
e
√√? @
)
√√@ A
,
√√A B
HttpStatusCode
√√C Q
.
√√Q R!
InternalServerError
√√R e
)
√√e f
;
√√f g
}
ƒƒ 
}
≈≈ 	
public
…… 

JsonResult
…… -
ObtenerUltimoMotivoViajeHuesped
…… 9
(
……9 :
int
……: =
	idHuesped
……> G
)
……G H
{
   	
try
ÀÀ 
{
ÃÃ 
ItemGenerico
ÕÕ 
motivoViaje
ÕÕ (
=
ÕÕ) *
hotelLogica
ÕÕ+ 6
.
ÕÕ6 7-
ObtenerUltimoMotivoViajeHuesped
ÕÕ7 V
(
ÕÕV W
	idHuesped
ÕÕW `
)
ÕÕ` a
;
ÕÕa b
return
ŒŒ 
Json
ŒŒ 
(
ŒŒ 
motivoViaje
ŒŒ '
)
ŒŒ' (
;
ŒŒ( )
}
œœ 
catch
–– 
(
–– 
	Exception
–– 
e
–– 
)
–– 
{
—— 
return
““ 
new
““ "
JsonHttpStatusResult
““ /
(
““/ 0
Util
““0 4
.
““4 5
	ErrorJson
““5 >
(
““> ?
e
““? @
)
““@ A
,
““A B
HttpStatusCode
““C Q
.
““Q R!
InternalServerError
““R e
)
““e f
;
““f g
}
”” 
}
‘‘ 	
public
’’ 

JsonResult
’’ 
AgregarHuesped
’’ (
(
’’( )
long
’’) -

idAtencion
’’. 8
,
’’8 9
int
’’: =
idActorComercial
’’> N
,
’’N O
int
’’P S
idMotivoViaje
’’T a
,
’’a b
bool
’’c g
	esTitular
’’h q
)
’’q r
{
÷÷ 	
try
◊◊ 
{
ÿÿ 
OperationResult
ŸŸ 
	resultado
ŸŸ  )
=
ŸŸ* +
hotelLogica
ŸŸ, 7
.
ŸŸ7 8
AgregarHuesped
ŸŸ8 F
(
ŸŸF G

idAtencion
ŸŸG Q
,
ŸŸQ R
idActorComercial
ŸŸS c
,
ŸŸc d
idMotivoViaje
ŸŸe r
,
ŸŸr s
	esTitular
ŸŸt }
)
ŸŸ} ~
;
ŸŸ~ 
Util
⁄⁄ 
.
⁄⁄ 
VerificarError
⁄⁄ #
(
⁄⁄# $
	resultado
⁄⁄$ -
)
⁄⁄- .
;
⁄⁄. /
return
€€ 
Json
€€ 
(
€€ 
new
€€ 
{
€€  !
	resultado
€€" +
.
€€+ ,
code_result
€€, 7
,
€€7 8
	resultado
€€9 B
.
€€B C
data
€€C G
,
€€G H 
result_description
€€I [
=
€€\ ]
	resultado
€€^ g
.
€€g h
title
€€h m
}
€€n o
)
€€o p
;
€€p q
}
‹‹ 
catch
›› 
(
›› 
	Exception
›› 
e
›› 
)
›› 
{
ﬁﬁ 
return
ﬂﬂ 
new
ﬂﬂ "
JsonHttpStatusResult
ﬂﬂ /
(
ﬂﬂ/ 0
Util
ﬂﬂ0 4
.
ﬂﬂ4 5
	ErrorJson
ﬂﬂ5 >
(
ﬂﬂ> ?
e
ﬂﬂ? @
)
ﬂﬂ@ A
,
ﬂﬂA B
HttpStatusCode
ﬂﬂC Q
.
ﬂﬂQ R!
InternalServerError
ﬂﬂR e
)
ﬂﬂe f
;
ﬂﬂf g
}
‡‡ 
}
·· 	
public
‚‚ 

JsonResult
‚‚ #
CambiarTitularHuesped
‚‚ /
(
‚‚/ 0
int
‚‚0 3
idHuespedCambiado
‚‚4 E
,
‚‚E F
int
‚‚G J#
idHuespedNuevoTitular
‚‚K `
)
‚‚` a
{
„„ 	
try
‰‰ 
{
ÂÂ 
OperationResult
ÊÊ 
	resultado
ÊÊ  )
=
ÊÊ* +
hotelLogica
ÊÊ, 7
.
ÊÊ7 8#
CambiarTitularHuesped
ÊÊ8 M
(
ÊÊM N
idHuespedCambiado
ÊÊN _
,
ÊÊ_ `#
idHuespedNuevoTitular
ÊÊa v
)
ÊÊv w
;
ÊÊw x
Util
ÁÁ 
.
ÁÁ 
VerificarError
ÁÁ #
(
ÁÁ# $
	resultado
ÁÁ$ -
)
ÁÁ- .
;
ÁÁ. /
return
ËË 
Json
ËË 
(
ËË 
new
ËË 
{
ËË  !
	resultado
ËË" +
.
ËË+ ,
code_result
ËË, 7
,
ËË7 8
	resultado
ËË9 B
.
ËËB C
data
ËËC G
,
ËËG H 
result_description
ËËI [
=
ËË\ ]
	resultado
ËË^ g
.
ËËg h
title
ËËh m
}
ËËn o
)
ËËo p
;
ËËp q
}
ÈÈ 
catch
ÍÍ 
(
ÍÍ 
	Exception
ÍÍ 
e
ÍÍ 
)
ÍÍ 
{
ÎÎ 
return
ÏÏ 
new
ÏÏ "
JsonHttpStatusResult
ÏÏ /
(
ÏÏ/ 0
Util
ÏÏ0 4
.
ÏÏ4 5
	ErrorJson
ÏÏ5 >
(
ÏÏ> ?
e
ÏÏ? @
)
ÏÏ@ A
,
ÏÏA B
HttpStatusCode
ÏÏC Q
.
ÏÏQ R!
InternalServerError
ÏÏR e
)
ÏÏe f
;
ÏÏf g
}
ÌÌ 
}
ÓÓ 	
public
ÔÔ 

JsonResult
ÔÔ 
EliminarHuesped
ÔÔ )
(
ÔÔ) *
int
ÔÔ* -
	idHuesped
ÔÔ. 7
)
ÔÔ7 8
{
 	
try
ÒÒ 
{
ÚÚ 
OperationResult
ÛÛ 
	resultado
ÛÛ  )
=
ÛÛ* +
hotelLogica
ÛÛ, 7
.
ÛÛ7 8
EliminarHuesped
ÛÛ8 G
(
ÛÛG H
	idHuesped
ÛÛH Q
)
ÛÛQ R
;
ÛÛR S
Util
ÙÙ 
.
ÙÙ 
VerificarError
ÙÙ #
(
ÙÙ# $
	resultado
ÙÙ$ -
)
ÙÙ- .
;
ÙÙ. /
return
ıı 
Json
ıı 
(
ıı 
new
ıı 
{
ıı  !
	resultado
ıı" +
.
ıı+ ,
code_result
ıı, 7
,
ıı7 8
	resultado
ıı9 B
.
ııB C
data
ııC G
,
ııG H 
result_description
ııI [
=
ıı\ ]
	resultado
ıı^ g
.
ııg h
title
ııh m
}
ıın o
)
ııo p
;
ııp q
}
ˆˆ 
catch
˜˜ 
(
˜˜ 
	Exception
˜˜ 
e
˜˜ 
)
˜˜ 
{
¯¯ 
return
˘˘ 
new
˘˘ "
JsonHttpStatusResult
˘˘ /
(
˘˘/ 0
Util
˘˘0 4
.
˘˘4 5
	ErrorJson
˘˘5 >
(
˘˘> ?
e
˘˘? @
)
˘˘@ A
,
˘˘A B
HttpStatusCode
˘˘C Q
.
˘˘Q R!
InternalServerError
˘˘R e
)
˘˘e f
;
˘˘f g
}
˙˙ 
}
˚˚ 	
public
ˇˇ 

JsonResult
ˇˇ '
ObtenerAtencionMacroHotel
ˇˇ 3
(
ˇˇ3 4
long
ˇˇ4 8

idAtencion
ˇˇ9 C
)
ˇˇC D
{
ÄÄ 	
try
ÅÅ 
{
ÇÇ  
AtencionMacroHotel
ÉÉ "
atencionMacro
ÉÉ# 0
=
ÉÉ1 2
hotelLogica
ÉÉ3 >
.
ÉÉ> ?"
ObtenerAtencionMacro
ÉÉ? S
(
ÉÉS T

idAtencion
ÉÉT ^
,
ÉÉ^ _
ProfileData
ÉÉ` k
(
ÉÉk l
)
ÉÉl m
)
ÉÉm n
;
ÉÉn o
return
ÑÑ 
Json
ÑÑ 
(
ÑÑ 
atencionMacro
ÑÑ )
)
ÑÑ) *
;
ÑÑ* +
}
ÖÖ 
catch
ÜÜ 
(
ÜÜ 
	Exception
ÜÜ 
e
ÜÜ 
)
ÜÜ 
{
áá 
return
àà 
new
àà "
JsonHttpStatusResult
àà /
(
àà/ 0
Util
àà0 4
.
àà4 5
	ErrorJson
àà5 >
(
àà> ?
e
àà? @
)
àà@ A
,
ààA B
HttpStatusCode
ààC Q
.
ààQ R!
InternalServerError
ààR e
)
ààe f
;
ààf g
}
ââ 
}
ää 	
public
ãã 

JsonResult
ãã /
!ObtenerAtencionDesdeAtencionMacro
ãã ;
(
ãã; <
long
ãã< @
idAtencionMacro
ããA P
)
ããP Q
{
åå 	
try
çç 
{
éé 
Atencion
èè 
atencion
èè !
=
èè" #
hotelLogica
èè$ /
.
èè/ 0/
!ObtenerAtencionDesdeAtencionMacro
èè0 Q
(
èèQ R
idAtencionMacro
èèR a
)
èèa b
;
èèb c
if
êê 
(
êê 
atencion
êê 
.
êê 
TieneFacturacion
êê -
)
êê- .
{
ëë 
var
íí 
sede
íí 
=
íí 
ObtenerSede
íí *
(
íí* +
)
íí+ ,
;
íí, -
foreach
ìì 
(
ìì 
var
ìì  
comprobante
ìì! ,
in
ìì- /
atencion
ìì0 8
.
ìì8 9$
ComprobantesFacturados
ìì9 O
)
ììO P
{
îî 
OrdenDeVenta
ïï $
ordenDeVenta
ïï% 1
=
ïï2 3
operacionLogica
ïï4 C
.
ïïC D!
ObtenerOrdenDeVenta
ïïD W
(
ïïW X
comprobante
ïïX c
.
ïïc d
IdOrden
ïïd k
)
ïïk l
;
ïïl m
string
ññ 
	QrContent
ññ (
=
ññ) **
facturacionElectronicaLogica
ññ+ G
.
ññG H
	ObtenerQR
ññH Q
(
ññQ R
ordenDeVenta
ññR ^
,
ññ^ _
sede
ññ` d
)
ññd e
;
ññe f
byte
óó 
[
óó 
]
óó 
QrBytes
óó &
=
óó' (
barCodeUtil
óó) 4
.
óó4 5
ObtenerCodigoQR
óó5 D
(
óóD E
	QrContent
óóE N
)
óóN O
;
óóO P
comprobante
òò #
.
òò# $'
CadenaHtmlDeComprobante80
òò$ =
=
òò> ?#
CoreHtmlStringBuilder
òò@ U
.
òòU V
ObtenerHtmlString
òòV g
(
òòg h
ordenDeVenta
òòh t
,
òòt u
FormatoImpresionòòv Ü
.òòÜ á
_80mmòòá å
,òòå ç
QrBytesòòé ï
,òòï ñ
sedeòòó õ
,òòõ ú
thisòòù °
,òò° ¢
maestroLogicaòò£ ∞
)òò∞ ±
;òò± ≤
comprobante
ôô #
.
ôô# $'
CadenaHtmlDeComprobanteA4
ôô$ =
=
ôô> ?#
CoreHtmlStringBuilder
ôô@ U
.
ôôU V
ObtenerHtmlString
ôôV g
(
ôôg h
ordenDeVenta
ôôh t
,
ôôt u
FormatoImpresionôôv Ü
.ôôÜ á
A4ôôá â
,ôôâ ä
QrBytesôôã í
,ôôí ì
sedeôôî ò
,ôôò ô
thisôôö û
,ôôû ü
maestroLogicaôô† ≠
)ôô≠ Æ
;ôôÆ Ø
}
öö 
}
õõ 
return
úú 
Json
úú 
(
úú 
atencion
úú $
)
úú$ %
;
úú% &
}
ùù 
catch
ûû 
(
ûû 
	Exception
ûû 
e
ûû 
)
ûû 
{
üü 
return
†† 
new
†† "
JsonHttpStatusResult
†† /
(
††/ 0
Util
††0 4
.
††4 5
	ErrorJson
††5 >
(
††> ?
e
††? @
)
††@ A
,
††A B
HttpStatusCode
††C Q
.
††Q R!
InternalServerError
††R e
)
††e f
;
††f g
}
°° 
}
¢¢ 	
public
££ 

JsonResult
££ *
ObtenerAtencionDesdeAtencion
££ 6
(
££6 7
long
££7 ;

idAtencion
££< F
)
££F G
{
§§ 	
try
•• 
{
¶¶ 
Atencion
ßß 
atencion
ßß !
=
ßß" #
hotelLogica
ßß$ /
.
ßß/ 0*
ObtenerAtencionDesdeAtencion
ßß0 L
(
ßßL M

idAtencion
ßßM W
)
ßßW X
;
ßßX Y
if
®® 
(
®® 
atencion
®® 
.
®® 
TieneFacturacion
®® -
)
®®- .
{
©© 
var
™™ 
sede
™™ 
=
™™ 
ObtenerSede
™™ *
(
™™* +
)
™™+ ,
;
™™, -
foreach
´´ 
(
´´ 
var
´´  
comprobante
´´! ,
in
´´- /
atencion
´´0 8
.
´´8 9$
ComprobantesFacturados
´´9 O
)
´´O P
{
¨¨ 
OrdenDeVenta
≠≠ $
ordenDeVenta
≠≠% 1
=
≠≠2 3
operacionLogica
≠≠4 C
.
≠≠C D!
ObtenerOrdenDeVenta
≠≠D W
(
≠≠W X
comprobante
≠≠X c
.
≠≠c d
IdOrden
≠≠d k
)
≠≠k l
;
≠≠l m
string
ÆÆ 
	QrContent
ÆÆ (
=
ÆÆ) **
facturacionElectronicaLogica
ÆÆ+ G
.
ÆÆG H
	ObtenerQR
ÆÆH Q
(
ÆÆQ R
ordenDeVenta
ÆÆR ^
,
ÆÆ^ _
sede
ÆÆ` d
)
ÆÆd e
;
ÆÆe f
byte
ØØ 
[
ØØ 
]
ØØ 
QrBytes
ØØ &
=
ØØ' (
barCodeUtil
ØØ) 4
.
ØØ4 5
ObtenerCodigoQR
ØØ5 D
(
ØØD E
	QrContent
ØØE N
)
ØØN O
;
ØØO P
comprobante
∞∞ #
.
∞∞# $'
CadenaHtmlDeComprobante80
∞∞$ =
=
∞∞> ?#
CoreHtmlStringBuilder
∞∞@ U
.
∞∞U V
ObtenerHtmlString
∞∞V g
(
∞∞g h
ordenDeVenta
∞∞h t
,
∞∞t u
FormatoImpresion∞∞v Ü
.∞∞Ü á
_80mm∞∞á å
,∞∞å ç
QrBytes∞∞é ï
,∞∞ï ñ
sede∞∞ó õ
,∞∞õ ú
this∞∞ù °
,∞∞° ¢
maestroLogica∞∞£ ∞
)∞∞∞ ±
;∞∞± ≤
comprobante
±± #
.
±±# $'
CadenaHtmlDeComprobanteA4
±±$ =
=
±±> ?#
CoreHtmlStringBuilder
±±@ U
.
±±U V
ObtenerHtmlString
±±V g
(
±±g h
ordenDeVenta
±±h t
,
±±t u
FormatoImpresion±±v Ü
.±±Ü á
A4±±á â
,±±â ä
QrBytes±±ã í
,±±í ì
sede±±î ò
,±±ò ô
this±±ö û
,±±û ü
maestroLogica±±† ≠
)±±≠ Æ
;±±Æ Ø
}
≤≤ 
}
≥≥ 
return
¥¥ 
Json
¥¥ 
(
¥¥ 
atencion
¥¥ $
)
¥¥$ %
;
¥¥% &
}
µµ 
catch
∂∂ 
(
∂∂ 
	Exception
∂∂ 
e
∂∂ 
)
∂∂ 
{
∑∑ 
return
∏∏ 
new
∏∏ "
JsonHttpStatusResult
∏∏ /
(
∏∏/ 0
Util
∏∏0 4
.
∏∏4 5
	ErrorJson
∏∏5 >
(
∏∏> ?
e
∏∏? @
)
∏∏@ A
,
∏∏A B
HttpStatusCode
∏∏C Q
.
∏∏Q R!
InternalServerError
∏∏R e
)
∏∏e f
;
∏∏f g
}
ππ 
}
∫∫ 	
public
ææ 

JsonResult
ææ 
GuardarAnotacion
ææ *
(
ææ* +
AtencionHotel
ææ+ 8
atencion
ææ9 A
)
ææA B
{
øø 	
try
¿¿ 
{
¡¡ 
OperationResult
¬¬ 
	resultado
¬¬  )
=
¬¬* +
hotelLogica
¬¬, 7
.
¬¬7 8
GuardarAnotacion
¬¬8 H
(
¬¬H I
atencion
¬¬I Q
)
¬¬Q R
;
¬¬R S
Util
√√ 
.
√√ 
VerificarError
√√ #
(
√√# $
	resultado
√√$ -
)
√√- .
;
√√. /
return
ƒƒ 
Json
ƒƒ 
(
ƒƒ 
new
ƒƒ 
{
ƒƒ  !
	resultado
ƒƒ" +
.
ƒƒ+ ,
code_result
ƒƒ, 7
,
ƒƒ7 8
	resultado
ƒƒ9 B
.
ƒƒB C
data
ƒƒC G
,
ƒƒG H 
result_description
ƒƒI [
=
ƒƒ\ ]
	resultado
ƒƒ^ g
.
ƒƒg h
title
ƒƒh m
,
ƒƒm n
	resultado
ƒƒo x
.
ƒƒx y
informationƒƒy Ñ
}ƒƒÖ Ü
)ƒƒÜ á
;ƒƒá à
}
≈≈ 
catch
∆∆ 
(
∆∆ 
	Exception
∆∆ 
e
∆∆ 
)
∆∆ 
{
«« 
return
»» 
new
»» "
JsonHttpStatusResult
»» /
(
»»/ 0
Util
»»0 4
.
»»4 5
	ErrorJson
»»5 >
(
»»> ?
e
»»? @
)
»»@ A
,
»»A B
HttpStatusCode
»»C Q
.
»»Q R!
InternalServerError
»»R e
)
»»e f
;
»»f g
}
…… 
}
   	
public
ŒŒ 

JsonResult
ŒŒ ,
EditarResponsableAtencionMacro
ŒŒ 8
(
ŒŒ8 9
long
ŒŒ9 =
idAtencionMacro
ŒŒ> M
,
ŒŒM N
int
ŒŒO R
idResponsable
ŒŒS `
)
ŒŒ` a
{
œœ 	
try
–– 
{
—— 
OperationResult
““ 
	resultado
““  )
=
““* +
hotelLogica
““, 7
.
““7 8,
EditarResponsableAtencionMacro
““8 V
(
““V W
idAtencionMacro
““W f
,
““f g
idResponsable
““h u
)
““u v
;
““v w
Util
”” 
.
”” 
VerificarError
”” #
(
””# $
	resultado
””$ -
)
””- .
;
””. /
return
‘‘ 
Json
‘‘ 
(
‘‘ 
new
‘‘ 
{
‘‘  !
	resultado
‘‘" +
.
‘‘+ ,
code_result
‘‘, 7
,
‘‘7 8
	resultado
‘‘9 B
.
‘‘B C
data
‘‘C G
,
‘‘G H 
result_description
‘‘I [
=
‘‘\ ]
	resultado
‘‘^ g
.
‘‘g h
title
‘‘h m
}
‘‘n o
)
‘‘o p
;
‘‘p q
}
’’ 
catch
÷÷ 
(
÷÷ 
	Exception
÷÷ 
e
÷÷ 
)
÷÷ 
{
◊◊ 
return
ÿÿ 
new
ÿÿ "
JsonHttpStatusResult
ÿÿ /
(
ÿÿ/ 0
Util
ÿÿ0 4
.
ÿÿ4 5
	ErrorJson
ÿÿ5 >
(
ÿÿ> ?
e
ÿÿ? @
)
ÿÿ@ A
,
ÿÿA B
HttpStatusCode
ÿÿC Q
.
ÿÿQ R!
InternalServerError
ÿÿR e
)
ÿÿe f
;
ÿÿf g
}
ŸŸ 
}
⁄⁄ 	
public
€€ 

JsonResult
€€ !
EditarFechaAtencion
€€ -
(
€€- .
AtencionHotel
€€. ;
atencion
€€< D
)
€€D E
{
‹‹ 	
try
›› 
{
ﬁﬁ 
OperationResult
ﬂﬂ 
	resultado
ﬂﬂ  )
=
ﬂﬂ* +
hotelLogica
ﬂﬂ, 7
.
ﬂﬂ7 8!
EditarFechaAtencion
ﬂﬂ8 K
(
ﬂﬂK L
atencion
ﬂﬂL T
)
ﬂﬂT U
;
ﬂﬂU V
Util
‡‡ 
.
‡‡ 
VerificarError
‡‡ #
(
‡‡# $
	resultado
‡‡$ -
)
‡‡- .
;
‡‡. /
return
·· 
Json
·· 
(
·· 
new
·· 
{
··  !
	resultado
··" +
.
··+ ,
code_result
··, 7
,
··7 8
	resultado
··9 B
.
··B C
data
··C G
,
··G H 
result_description
··I [
=
··\ ]
	resultado
··^ g
.
··g h
title
··h m
}
··n o
)
··o p
;
··p q
}
‚‚ 
catch
„„ 
(
„„ 
	Exception
„„ 
e
„„ 
)
„„ 
{
‰‰ 
return
ÂÂ 
new
ÂÂ "
JsonHttpStatusResult
ÂÂ /
(
ÂÂ/ 0
Util
ÂÂ0 4
.
ÂÂ4 5
	ErrorJson
ÂÂ5 >
(
ÂÂ> ?
e
ÂÂ? @
)
ÂÂ@ A
,
ÂÂA B
HttpStatusCode
ÂÂC Q
.
ÂÂQ R!
InternalServerError
ÂÂR e
)
ÂÂe f
;
ÂÂf g
}
ÊÊ 
}
ÁÁ 	
public
ËË 

JsonResult
ËË '
CambiarHabitacionAtencion
ËË 3
(
ËË3 4
AtencionHotel
ËË4 A&
atencionCambioHabitacion
ËËB Z
)
ËËZ [
{
ÈÈ 	
try
ÍÍ 
{
ÎÎ 
OperationResult
ÏÏ 
	resultado
ÏÏ  )
=
ÏÏ* +
hotelLogica
ÏÏ, 7
.
ÏÏ7 8'
CambiarHabitacionAtencion
ÏÏ8 Q
(
ÏÏQ R&
atencionCambioHabitacion
ÏÏR j
,
ÏÏj k
ProfileData
ÏÏl w
(
ÏÏw x
)
ÏÏx y
)
ÏÏy z
;
ÏÏz {
Util
ÌÌ 
.
ÌÌ 
VerificarError
ÌÌ #
(
ÌÌ# $
	resultado
ÌÌ$ -
)
ÌÌ- .
;
ÌÌ. /
return
ÓÓ 
Json
ÓÓ 
(
ÓÓ 
new
ÓÓ 
{
ÓÓ  !
	resultado
ÓÓ" +
.
ÓÓ+ ,
code_result
ÓÓ, 7
,
ÓÓ7 8
	resultado
ÓÓ9 B
.
ÓÓB C
data
ÓÓC G
,
ÓÓG H 
result_description
ÓÓI [
=
ÓÓ\ ]
	resultado
ÓÓ^ g
.
ÓÓg h
title
ÓÓh m
}
ÓÓn o
)
ÓÓo p
;
ÓÓp q
}
ÔÔ 
catch
 
(
 
	Exception
 
e
 
)
 
{
ÒÒ 
return
ÚÚ 
new
ÚÚ "
JsonHttpStatusResult
ÚÚ /
(
ÚÚ/ 0
Util
ÚÚ0 4
.
ÚÚ4 5
	ErrorJson
ÚÚ5 >
(
ÚÚ> ?
e
ÚÚ? @
)
ÚÚ@ A
,
ÚÚA B
HttpStatusCode
ÚÚC Q
.
ÚÚQ R!
InternalServerError
ÚÚR e
)
ÚÚe f
;
ÚÚf g
}
ÛÛ 
}
ÙÙ 	
public
ıı 

JsonResult
ıı $
ConfirmarAtencionMacro
ıı 0
(
ıı0 1
long
ıı1 5
idAtencionMacro
ıı6 E
,
ııE F
string
ııG M
observacion
ııN Y
)
ııY Z
{
ˆˆ 	
try
˜˜ 
{
¯¯ 
OperationResult
˘˘ 
	resultado
˘˘  )
=
˘˘* +
hotelLogica
˘˘, 7
.
˘˘7 8$
ConfirmarAtencionMacro
˘˘8 N
(
˘˘N O
idAtencionMacro
˘˘O ^
,
˘˘^ _
observacion
˘˘` k
,
˘˘k l
ProfileData
˘˘m x
(
˘˘x y
)
˘˘y z
)
˘˘z {
;
˘˘{ |
Util
˙˙ 
.
˙˙ 
VerificarError
˙˙ #
(
˙˙# $
	resultado
˙˙$ -
)
˙˙- .
;
˙˙. /
return
˚˚ 
Json
˚˚ 
(
˚˚ 
new
˚˚ 
{
˚˚  !
	resultado
˚˚" +
.
˚˚+ ,
code_result
˚˚, 7
,
˚˚7 8
	resultado
˚˚9 B
.
˚˚B C
data
˚˚C G
,
˚˚G H 
result_description
˚˚I [
=
˚˚\ ]
	resultado
˚˚^ g
.
˚˚g h
title
˚˚h m
,
˚˚m n
	resultado
˚˚o x
.
˚˚x y
information˚˚y Ñ
}˚˚Ö Ü
)˚˚Ü á
;˚˚á à
}
¸¸ 
catch
˝˝ 
(
˝˝ 
	Exception
˝˝ 
e
˝˝ 
)
˝˝ 
{
˛˛ 
return
ˇˇ 
new
ˇˇ "
JsonHttpStatusResult
ˇˇ /
(
ˇˇ/ 0
Util
ˇˇ0 4
.
ˇˇ4 5
	ErrorJson
ˇˇ5 >
(
ˇˇ> ?
e
ˇˇ? @
)
ˇˇ@ A
,
ˇˇA B
HttpStatusCode
ˇˇC Q
.
ˇˇQ R!
InternalServerError
ˇˇR e
)
ˇˇe f
;
ˇˇf g
}
ÄÄ 
}
ÅÅ 	
public
ÇÇ 

JsonResult
ÇÇ 
ConfirmarAtencion
ÇÇ +
(
ÇÇ+ ,
long
ÇÇ, 0

idAtencion
ÇÇ1 ;
,
ÇÇ; <
string
ÇÇ= C
observacion
ÇÇD O
)
ÇÇO P
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 
OperationResult
ÜÜ 
	resultado
ÜÜ  )
=
ÜÜ* +
hotelLogica
ÜÜ, 7
.
ÜÜ7 8
ConfirmarAtencion
ÜÜ8 I
(
ÜÜI J

idAtencion
ÜÜJ T
,
ÜÜT U
observacion
ÜÜV a
,
ÜÜa b
ProfileData
ÜÜc n
(
ÜÜn o
)
ÜÜo p
)
ÜÜp q
;
ÜÜq r
Util
áá 
.
áá 
VerificarError
áá #
(
áá# $
	resultado
áá$ -
)
áá- .
;
áá. /
return
àà 
Json
àà 
(
àà 
new
àà 
{
àà  !
	resultado
àà" +
.
àà+ ,
code_result
àà, 7
,
àà7 8
	resultado
àà9 B
.
ààB C
data
ààC G
,
ààG H 
result_description
ààI [
=
àà\ ]
	resultado
àà^ g
.
ààg h
title
ààh m
,
ààm n
	resultado
àào x
.
ààx y
informationàày Ñ
}ààÖ Ü
)ààÜ á
;ààá à
}
ââ 
catch
ää 
(
ää 
	Exception
ää 
e
ää 
)
ää 
{
ãã 
return
åå 
new
åå "
JsonHttpStatusResult
åå /
(
åå/ 0
Util
åå0 4
.
åå4 5
	ErrorJson
åå5 >
(
åå> ?
e
åå? @
)
åå@ A
,
ååA B
HttpStatusCode
ååC Q
.
ååQ R!
InternalServerError
ååR e
)
ååe f
;
ååf g
}
çç 
}
éé 	
public
èè 

JsonResult
èè "
CheckInAtencionMacro
èè .
(
èè. /
long
èè/ 3
idAtencionMacro
èè4 C
,
èèC D
string
èèE K
observacion
èèL W
)
èèW X
{
êê 	
try
ëë 
{
íí 
OperationResult
ìì 
	resultado
ìì  )
=
ìì* +
hotelLogica
ìì, 7
.
ìì7 8"
CheckInAtencionMacro
ìì8 L
(
ììL M
idAtencionMacro
ììM \
,
ìì\ ]
observacion
ìì^ i
,
ììi j
ProfileData
ììk v
(
ììv w
)
ììw x
)
ììx y
;
ììy z
Util
îî 
.
îî 
VerificarError
îî #
(
îî# $
	resultado
îî$ -
)
îî- .
;
îî. /
return
ïï 
Json
ïï 
(
ïï 
new
ïï 
{
ïï  !
	resultado
ïï" +
.
ïï+ ,
code_result
ïï, 7
,
ïï7 8
	resultado
ïï9 B
.
ïïB C
data
ïïC G
,
ïïG H 
result_description
ïïI [
=
ïï\ ]
	resultado
ïï^ g
.
ïïg h
title
ïïh m
,
ïïm n
	resultado
ïïo x
.
ïïx y
informationïïy Ñ
}ïïÖ Ü
)ïïÜ á
;ïïá à
}
ññ 
catch
óó 
(
óó 
	Exception
óó 
e
óó 
)
óó 
{
òò 
return
ôô 
new
ôô "
JsonHttpStatusResult
ôô /
(
ôô/ 0
Util
ôô0 4
.
ôô4 5
	ErrorJson
ôô5 >
(
ôô> ?
e
ôô? @
)
ôô@ A
,
ôôA B
HttpStatusCode
ôôC Q
.
ôôQ R!
InternalServerError
ôôR e
)
ôôe f
;
ôôf g
}
öö 
}
õõ 	
public
úú 

JsonResult
úú 
CheckInAtencion
úú )
(
úú) *
long
úú* .

idAtencion
úú/ 9
,
úú9 :
string
úú; A
observacion
úúB M
)
úúM N
{
ùù 	
try
ûû 
{
üü 
OperationResult
†† 
	resultado
††  )
=
††* +
hotelLogica
††, 7
.
††7 8
CheckInAtencion
††8 G
(
††G H

idAtencion
††H R
,
††R S
observacion
††T _
,
††_ `
ProfileData
††a l
(
††l m
)
††m n
)
††n o
;
††o p
Util
°° 
.
°° 
VerificarError
°° #
(
°°# $
	resultado
°°$ -
)
°°- .
;
°°. /
return
¢¢ 
Json
¢¢ 
(
¢¢ 
new
¢¢ 
{
¢¢  !
	resultado
¢¢" +
.
¢¢+ ,
code_result
¢¢, 7
,
¢¢7 8
	resultado
¢¢9 B
.
¢¢B C
data
¢¢C G
,
¢¢G H 
result_description
¢¢I [
=
¢¢\ ]
	resultado
¢¢^ g
.
¢¢g h
title
¢¢h m
,
¢¢m n
	resultado
¢¢o x
.
¢¢x y
information¢¢y Ñ
}¢¢Ö Ü
)¢¢Ü á
;¢¢á à
}
££ 
catch
§§ 
(
§§ 
	Exception
§§ 
e
§§ 
)
§§ 
{
•• 
return
¶¶ 
new
¶¶ "
JsonHttpStatusResult
¶¶ /
(
¶¶/ 0
Util
¶¶0 4
.
¶¶4 5
	ErrorJson
¶¶5 >
(
¶¶> ?
e
¶¶? @
)
¶¶@ A
,
¶¶A B
HttpStatusCode
¶¶C Q
.
¶¶Q R!
InternalServerError
¶¶R e
)
¶¶e f
;
¶¶f g
}
ßß 
}
®® 	
public
©© 

JsonResult
©© #
CheckOutAtencionMacro
©© /
(
©©/ 0
long
©©0 4
idAtencionMacro
©©5 D
,
©©D E
string
©©F L
observacion
©©M X
)
©©X Y
{
™™ 	
try
´´ 
{
¨¨ 
OperationResult
≠≠ 
	resultado
≠≠  )
=
≠≠* +
hotelLogica
≠≠, 7
.
≠≠7 8#
CheckOutAtencionMacro
≠≠8 M
(
≠≠M N
idAtencionMacro
≠≠N ]
,
≠≠] ^
observacion
≠≠_ j
,
≠≠j k
ProfileData
≠≠l w
(
≠≠w x
)
≠≠x y
)
≠≠y z
;
≠≠z {
Util
ÆÆ 
.
ÆÆ 
VerificarError
ÆÆ #
(
ÆÆ# $
	resultado
ÆÆ$ -
)
ÆÆ- .
;
ÆÆ. /
return
ØØ 
Json
ØØ 
(
ØØ 
new
ØØ 
{
ØØ  !
	resultado
ØØ" +
.
ØØ+ ,
code_result
ØØ, 7
,
ØØ7 8
	resultado
ØØ9 B
.
ØØB C
data
ØØC G
,
ØØG H 
result_description
ØØI [
=
ØØ\ ]
	resultado
ØØ^ g
.
ØØg h
title
ØØh m
,
ØØm n
	resultado
ØØo x
.
ØØx y
informationØØy Ñ
}ØØÖ Ü
)ØØÜ á
;ØØá à
}
∞∞ 
catch
±± 
(
±± 
	Exception
±± 
e
±± 
)
±± 
{
≤≤ 
return
≥≥ 
new
≥≥ "
JsonHttpStatusResult
≥≥ /
(
≥≥/ 0
Util
≥≥0 4
.
≥≥4 5
	ErrorJson
≥≥5 >
(
≥≥> ?
e
≥≥? @
)
≥≥@ A
,
≥≥A B
HttpStatusCode
≥≥C Q
.
≥≥Q R!
InternalServerError
≥≥R e
)
≥≥e f
;
≥≥f g
}
¥¥ 
}
µµ 	
public
∂∂ 

JsonResult
∂∂ 
CheckOutAtencion
∂∂ *
(
∂∂* +
long
∂∂+ /

idAtencion
∂∂0 :
,
∂∂: ;
string
∂∂< B
observacion
∂∂C N
)
∂∂N O
{
∑∑ 	
try
∏∏ 
{
ππ 
OperationResult
∫∫ 
	resultado
∫∫  )
=
∫∫* +
hotelLogica
∫∫, 7
.
∫∫7 8
CheckOutAtencion
∫∫8 H
(
∫∫H I

idAtencion
∫∫I S
,
∫∫S T
observacion
∫∫U `
,
∫∫` a
ProfileData
∫∫b m
(
∫∫m n
)
∫∫n o
)
∫∫o p
;
∫∫p q
Util
ªª 
.
ªª 
VerificarError
ªª #
(
ªª# $
	resultado
ªª$ -
)
ªª- .
;
ªª. /
return
ºº 
Json
ºº 
(
ºº 
new
ºº 
{
ºº  !
	resultado
ºº" +
.
ºº+ ,
code_result
ºº, 7
,
ºº7 8
	resultado
ºº9 B
.
ººB C
data
ººC G
,
ººG H 
result_description
ººI [
=
ºº\ ]
	resultado
ºº^ g
.
ººg h
title
ººh m
,
ººm n
	resultado
ººo x
.
ººx y
informationººy Ñ
}ººÖ Ü
)ººÜ á
;ººá à
}
ΩΩ 
catch
ææ 
(
ææ 
	Exception
ææ 
e
ææ 
)
ææ 
{
øø 
return
¿¿ 
new
¿¿ "
JsonHttpStatusResult
¿¿ /
(
¿¿/ 0
Util
¿¿0 4
.
¿¿4 5
	ErrorJson
¿¿5 >
(
¿¿> ?
e
¿¿? @
)
¿¿@ A
,
¿¿A B
HttpStatusCode
¿¿C Q
.
¿¿Q R!
InternalServerError
¿¿R e
)
¿¿e f
;
¿¿f g
}
¡¡ 
}
¬¬ 	
public
√√ 

JsonResult
√√ .
 ObtenerComprobantesAtencionMacro
√√ :
(
√√: ;
long
√√; ?
idAtencionMacro
√√@ O
)
√√O P
{
ƒƒ 	
try
≈≈ 
{
∆∆ 
List
«« 
<
«« !
ComprobanteAtencion
«« (
>
««( )
comprobantes
««* 6
=
««7 8
hotelLogica
««9 D
.
««D E0
"ObtenerComprobantesDeAtencionMacro
««E g
(
««g h
idAtencionMacro
««h w
)
««w x
;
««x y
return
»» 
Json
»» 
(
»» 
comprobantes
»» (
)
»»( )
;
»») *
}
…… 
catch
   
(
   
	Exception
   
e
   
)
   
{
ÀÀ 
return
ÃÃ 
new
ÃÃ "
JsonHttpStatusResult
ÃÃ /
(
ÃÃ/ 0
Util
ÃÃ0 4
.
ÃÃ4 5
	ErrorJson
ÃÃ5 >
(
ÃÃ> ?
e
ÃÃ? @
)
ÃÃ@ A
,
ÃÃA B
HttpStatusCode
ÃÃC Q
.
ÃÃQ R!
InternalServerError
ÃÃR e
)
ÃÃe f
;
ÃÃf g
}
ÕÕ 
}
ŒŒ 	
public
œœ 

JsonResult
œœ )
ObtenerComprobantesAtencion
œœ 5
(
œœ5 6
long
œœ6 :
idAtencionMacro
œœ; J
,
œœJ K
long
œœL P

idAtencion
œœQ [
)
œœ[ \
{
–– 	
try
—— 
{
““ 
List
”” 
<
”” !
ComprobanteAtencion
”” (
>
””( )
comprobantes
””* 6
=
””7 8
hotelLogica
””9 D
.
””D E+
ObtenerComprobantesDeAtencion
””E b
(
””b c
idAtencionMacro
””c r
,
””r s

idAtencion
””t ~
)
””~ 
;”” Ä
return
‘‘ 
Json
‘‘ 
(
‘‘ 
comprobantes
‘‘ (
)
‘‘( )
;
‘‘) *
}
’’ 
catch
÷÷ 
(
÷÷ 
	Exception
÷÷ 
e
÷÷ 
)
÷÷ 
{
◊◊ 
return
ÿÿ 
new
ÿÿ "
JsonHttpStatusResult
ÿÿ /
(
ÿÿ/ 0
Util
ÿÿ0 4
.
ÿÿ4 5
	ErrorJson
ÿÿ5 >
(
ÿÿ> ?
e
ÿÿ? @
)
ÿÿ@ A
,
ÿÿA B
HttpStatusCode
ÿÿC Q
.
ÿÿQ R!
InternalServerError
ÿÿR e
)
ÿÿe f
;
ÿÿf g
}
ŸŸ 
}
⁄⁄ 	
public
€€ 

JsonResult
€€ !
AnularAtencionMacro
€€ -
(
€€- .
long
€€. 2
idAtencionMacro
€€3 B
,
€€B C
List
€€D H
<
€€H I!
ComprobanteAtencion
€€I \
>
€€\ ]
comprobantes
€€^ j
,
€€j k
string
€€l r
observacion
€€s ~
)
€€~ 
{
‹‹ 	
try
›› 
{
ﬁﬁ 
OperationResult
ﬂﬂ 
	resultado
ﬂﬂ  )
=
ﬂﬂ* +
hotelLogica
ﬂﬂ, 7
.
ﬂﬂ7 8!
AnularAtencionMacro
ﬂﬂ8 K
(
ﬂﬂK L
idAtencionMacro
ﬂﬂL [
,
ﬂﬂ[ \
comprobantes
ﬂﬂ] i
,
ﬂﬂi j
observacion
ﬂﬂk v
,
ﬂﬂv w
ProfileDataﬂﬂx É
(ﬂﬂÉ Ñ
)ﬂﬂÑ Ö
)ﬂﬂÖ Ü
;ﬂﬂÜ á
Util
‡‡ 
.
‡‡ 
VerificarError
‡‡ #
(
‡‡# $
	resultado
‡‡$ -
)
‡‡- .
;
‡‡. /
return
·· 
Json
·· 
(
·· 
new
·· 
{
··  !
	resultado
··" +
.
··+ ,
code_result
··, 7
,
··7 8
	resultado
··9 B
.
··B C
data
··C G
,
··G H 
result_description
··I [
=
··\ ]
	resultado
··^ g
.
··g h
title
··h m
,
··m n
	resultado
··o x
.
··x y
information··y Ñ
}··Ö Ü
)··Ü á
;··á à
}
‚‚ 
catch
„„ 
(
„„ 
	Exception
„„ 
e
„„ 
)
„„ 
{
‰‰ 
return
ÂÂ 
new
ÂÂ "
JsonHttpStatusResult
ÂÂ /
(
ÂÂ/ 0
Util
ÂÂ0 4
.
ÂÂ4 5
	ErrorJson
ÂÂ5 >
(
ÂÂ> ?
e
ÂÂ? @
)
ÂÂ@ A
,
ÂÂA B
HttpStatusCode
ÂÂC Q
.
ÂÂQ R!
InternalServerError
ÂÂR e
)
ÂÂe f
;
ÂÂf g
}
ÊÊ 
}
ÁÁ 	
public
ËË 

JsonResult
ËË 
AnularAtencion
ËË (
(
ËË( )
long
ËË) -

idAtencion
ËË. 8
,
ËË8 9
long
ËË: >
idAtencionMacro
ËË? N
,
ËËN O
List
ËËP T
<
ËËT U!
ComprobanteAtencion
ËËU h
>
ËËh i
comprobantes
ËËj v
,
ËËv w
string
ËËx ~
observacionËË ä
)ËËä ã
{
ÈÈ 	
try
ÍÍ 
{
ÎÎ 
OperationResult
ÏÏ 
	resultado
ÏÏ  )
=
ÏÏ* +
hotelLogica
ÏÏ, 7
.
ÏÏ7 8
AnularAtencion
ÏÏ8 F
(
ÏÏF G

idAtencion
ÏÏG Q
,
ÏÏQ R
idAtencionMacro
ÏÏS b
,
ÏÏb c
comprobantes
ÏÏd p
,
ÏÏp q
observacion
ÏÏr }
,
ÏÏ} ~
ProfileDataÏÏ ä
(ÏÏä ã
)ÏÏã å
)ÏÏå ç
;ÏÏç é
Util
ÌÌ 
.
ÌÌ 
VerificarError
ÌÌ #
(
ÌÌ# $
	resultado
ÌÌ$ -
)
ÌÌ- .
;
ÌÌ. /
return
ÓÓ 
Json
ÓÓ 
(
ÓÓ 
new
ÓÓ 
{
ÓÓ  !
	resultado
ÓÓ" +
.
ÓÓ+ ,
code_result
ÓÓ, 7
,
ÓÓ7 8
	resultado
ÓÓ9 B
.
ÓÓB C
data
ÓÓC G
,
ÓÓG H 
result_description
ÓÓI [
=
ÓÓ\ ]
	resultado
ÓÓ^ g
.
ÓÓg h
title
ÓÓh m
,
ÓÓm n
	resultado
ÓÓo x
.
ÓÓx y
informationÓÓy Ñ
}ÓÓÖ Ü
)ÓÓÜ á
;ÓÓá à
}
ÔÔ 
catch
 
(
 
	Exception
 
e
 
)
 
{
ÒÒ 
return
ÚÚ 
new
ÚÚ "
JsonHttpStatusResult
ÚÚ /
(
ÚÚ/ 0
Util
ÚÚ0 4
.
ÚÚ4 5
	ErrorJson
ÚÚ5 >
(
ÚÚ> ?
e
ÚÚ? @
)
ÚÚ@ A
,
ÚÚA B
HttpStatusCode
ÚÚC Q
.
ÚÚQ R!
InternalServerError
ÚÚR e
)
ÚÚe f
;
ÚÚf g
}
ÛÛ 
}
ÙÙ 	
public
ıı 

JsonResult
ıı -
RegistrarIncidenteAtencionMacro
ıı 9
(
ıı9 :
long
ıı: >
idAtencionMacro
ıı? N
,
ııN O
bool
ııP T
esDevolucion
ııU a
,
ııa b
List
ııc g
<
ııg h!
ComprobanteAtencion
ııh {
>
ıı{ |
comprobantesıı} â
,ııâ ä
stringııã ë
observacionııí ù
)ııù û
{
ˆˆ 	
try
˜˜ 
{
¯¯ 
OperationResult
˘˘ 
	resultado
˘˘  )
=
˘˘* +
hotelLogica
˘˘, 7
.
˘˘7 8-
RegistrarIncidenteAtencionMacro
˘˘8 W
(
˘˘W X
idAtencionMacro
˘˘X g
,
˘˘g h
esDevolucion
˘˘i u
,
˘˘u v
comprobantes˘˘w É
,˘˘É Ñ
observacion˘˘Ö ê
,˘˘ê ë
ProfileData˘˘í ù
(˘˘ù û
)˘˘û ü
)˘˘ü †
;˘˘† °
Util
˙˙ 
.
˙˙ 
VerificarError
˙˙ #
(
˙˙# $
	resultado
˙˙$ -
)
˙˙- .
;
˙˙. /
return
˚˚ 
Json
˚˚ 
(
˚˚ 
new
˚˚ 
{
˚˚  !
	resultado
˚˚" +
.
˚˚+ ,
code_result
˚˚, 7
,
˚˚7 8
	resultado
˚˚9 B
.
˚˚B C
data
˚˚C G
,
˚˚G H 
result_description
˚˚I [
=
˚˚\ ]
	resultado
˚˚^ g
.
˚˚g h
title
˚˚h m
,
˚˚m n
	resultado
˚˚o x
.
˚˚x y
information˚˚y Ñ
}˚˚Ö Ü
)˚˚Ü á
;˚˚á à
}
¸¸ 
catch
˝˝ 
(
˝˝ 
	Exception
˝˝ 
e
˝˝ 
)
˝˝ 
{
˛˛ 
return
ˇˇ 
new
ˇˇ "
JsonHttpStatusResult
ˇˇ /
(
ˇˇ/ 0
Util
ˇˇ0 4
.
ˇˇ4 5
	ErrorJson
ˇˇ5 >
(
ˇˇ> ?
e
ˇˇ? @
)
ˇˇ@ A
,
ˇˇA B
HttpStatusCode
ˇˇC Q
.
ˇˇQ R!
InternalServerError
ˇˇR e
)
ˇˇe f
;
ˇˇf g
}
ÄÄ 
}
ÅÅ 	
public
ÇÇ 

JsonResult
ÇÇ (
RegistrarIncidenteAtencion
ÇÇ 4
(
ÇÇ4 5
long
ÇÇ5 9

idAtencion
ÇÇ: D
,
ÇÇD E
long
ÇÇF J
idAtencionMacro
ÇÇK Z
,
ÇÇZ [
bool
ÇÇ\ `
esDevolucion
ÇÇa m
,
ÇÇm n
List
ÇÇo s
<
ÇÇs t"
ComprobanteAtencionÇÇt á
>ÇÇá à
comprobantesÇÇâ ï
,ÇÇï ñ
stringÇÇó ù
observacionÇÇû ©
)ÇÇ© ™
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 
OperationResult
ÜÜ 
	resultado
ÜÜ  )
=
ÜÜ* +
hotelLogica
ÜÜ, 7
.
ÜÜ7 8(
RegistrarIncidenteAtencion
ÜÜ8 R
(
ÜÜR S

idAtencion
ÜÜS ]
,
ÜÜ] ^
idAtencionMacro
ÜÜ_ n
,
ÜÜn o
esDevolucion
ÜÜp |
,
ÜÜ| }
comprobantesÜÜ~ ä
,ÜÜä ã
observacionÜÜå ó
,ÜÜó ò
ProfileDataÜÜô §
(ÜÜ§ •
)ÜÜ• ¶
)ÜÜ¶ ß
;ÜÜß ®
Util
áá 
.
áá 
VerificarError
áá #
(
áá# $
	resultado
áá$ -
)
áá- .
;
áá. /
return
àà 
Json
àà 
(
àà 
new
àà 
{
àà  !
	resultado
àà" +
.
àà+ ,
code_result
àà, 7
,
àà7 8
	resultado
àà9 B
.
ààB C
data
ààC G
,
ààG H 
result_description
ààI [
=
àà\ ]
	resultado
àà^ g
.
ààg h
title
ààh m
,
ààm n
	resultado
àào x
.
ààx y
informationàày Ñ
}ààÖ Ü
)ààÜ á
;ààá à
}
ââ 
catch
ää 
(
ää 
	Exception
ää 
e
ää 
)
ää 
{
ãã 
return
åå 
new
åå "
JsonHttpStatusResult
åå /
(
åå/ 0
Util
åå0 4
.
åå4 5
	ErrorJson
åå5 >
(
åå> ?
e
åå? @
)
åå@ A
,
ååA B
HttpStatusCode
ååC Q
.
ååQ R!
InternalServerError
ååR e
)
ååe f
;
ååf g
}
çç 
}
éé 	
public
èè 

JsonResult
èè #
FacturarAtencionMacro
èè /
(
èè/ 0
Atencion
èè0 8
atencion
èè9 A
)
èèA B
{
êê 	
try
ëë 
{
íí 
OperationResult
ìì "
resultadoFacturacion
ìì  4
=
ìì5 6
hotelLogica
ìì7 B
.
ììB C#
FacturarAtencionMacro
ììC X
(
ììX Y
atencion
ììY a
,
ììa b
ProfileData
ììc n
(
ììn o
)
ììo p
)
ììp q
;
ììq r
Util
îî 
.
îî (
ManageIfResultIsNotSuccess
îî /
(
îî/ 0"
resultadoFacturacion
îî0 D
,
îîD E
$str
îîF t
)
îît u
;
îîu v
OperationResult
ïï #
resultadoComprobantes
ïï  5
=
ïï6 7-
GenerarDocumentosParaVisualizar
ïï8 W
(
ïïW X
(
ïïX Y

Dictionary
ïïY c
<
ïïc d
long
ïïd h
,
ïïh i
long
ïïj n
>
ïïn o
)
ïïo p#
resultadoFacturacionïïp Ñ
.ïïÑ Ö
objetoïïÖ ã
)ïïã å
;ïïå ç
return
ññ 
Json
ññ 
(
ññ 
new
ññ 
{
ññ  !"
resultadoFacturacion
ññ" 6
.
ññ6 7
code_result
ññ7 B
,
ññB C"
resultadoFacturacion
ññD X
.
ññX Y
information
ññY d
,
ññd e 
result_description
ññf x
=
ññy z$
resultadoComprobantesññ{ ê
.ññê ë
titleññë ñ
,ñññ ó

documentosññò ¢
=ññ£ §%
resultadoComprobantesññ• ∫
.ññ∫ ª
informationññª ∆
}ññ« »
)ññ» …
;ññ…  
}
óó 
catch
òò 
(
òò 
	Exception
òò 
e
òò 
)
òò 
{
ôô 
return
öö 
new
öö "
JsonHttpStatusResult
öö /
(
öö/ 0
Util
öö0 4
.
öö4 5
	ErrorJson
öö5 >
(
öö> ?
e
öö? @
)
öö@ A
,
ööA B
HttpStatusCode
ööC Q
.
ööQ R!
InternalServerError
ööR e
)
ööe f
;
ööf g
}
õõ 
}
úú 	
public
ùù 

JsonResult
ùù 
FacturarAtencion
ùù *
(
ùù* +
Atencion
ùù+ 3
atencion
ùù4 <
)
ùù< =
{
ûû 	
try
üü 
{
†† 
OperationResult
°° "
resultadoFacturacion
°°  4
=
°°5 6
hotelLogica
°°7 B
.
°°B C
FacturarAtencion
°°C S
(
°°S T
atencion
°°T \
,
°°\ ]
ProfileData
°°^ i
(
°°i j
)
°°j k
)
°°k l
;
°°l m
Util
¢¢ 
.
¢¢ (
ManageIfResultIsNotSuccess
¢¢ /
(
¢¢/ 0"
resultadoFacturacion
¢¢0 D
,
¢¢D E
$str
¢¢F t
)
¢¢t u
;
¢¢u v
OperationResult
££ #
resultadoComprobantes
££  5
=
££6 7-
GenerarDocumentosParaVisualizar
££8 W
(
££W X
(
££X Y

Dictionary
££Y c
<
££c d
long
££d h
,
££h i
long
££j n
>
££n o
)
££o p#
resultadoFacturacion££p Ñ
.££Ñ Ö
objeto££Ö ã
)££ã å
;££å ç
return
§§ 
Json
§§ 
(
§§ 
new
§§ 
{
§§  !"
resultadoFacturacion
§§" 6
.
§§6 7
code_result
§§7 B
,
§§B C"
resultadoFacturacion
§§D X
.
§§X Y
information
§§Y d
,
§§d e 
result_description
§§f x
=
§§y z$
resultadoComprobantes§§{ ê
.§§ê ë
title§§ë ñ
,§§ñ ó

documentos§§ò ¢
=§§£ §%
resultadoComprobantes§§• ∫
.§§∫ ª
information§§ª ∆
}§§« »
)§§» …
;§§…  
}
•• 
catch
¶¶ 
(
¶¶ 
	Exception
¶¶ 
e
¶¶ 
)
¶¶ 
{
ßß 
return
®® 
new
®® "
JsonHttpStatusResult
®® /
(
®®/ 0
Util
®®0 4
.
®®4 5
	ErrorJson
®®5 >
(
®®> ?
e
®®? @
)
®®@ A
,
®®A B
HttpStatusCode
®®C Q
.
®®Q R!
InternalServerError
®®R e
)
®®e f
;
®®f g
}
©© 
}
™™ 	
public
´´ 
OperationResult
´´ -
GenerarDocumentosParaVisualizar
´´ >
(
´´> ?

Dictionary
´´? I
<
´´I J
long
´´J N
,
´´N O
long
´´P T
>
´´T U&
diccionarioIdsOrdenVenta
´´V n
)
´´n o
{
¨¨ 	
try
≠≠ 
{
ÆÆ 
OperationResult
ØØ 
	resultado
ØØ  )
=
ØØ* +
new
ØØ, /
OperationResult
ØØ0 ?
(
ØØ? @
)
ØØ@ A
;
ØØA B
List
∞∞ 
<
∞∞ ,
DocumentoComprobanteOrdenVenta
∞∞ 3
>
∞∞3 4

documentos
∞∞5 ?
=
∞∞@ A
new
∞∞B E
List
∞∞F J
<
∞∞J K,
DocumentoComprobanteOrdenVenta
∞∞K i
>
∞∞i j
(
∞∞j k
)
∞∞k l
;
∞∞l m
var
±± 
sede
±± 
=
±± 
ObtenerSede
±± &
(
±±& '
)
±±' (
;
±±( )
foreach
≤≤ 
(
≤≤ 
var
≤≤ 
item
≤≤ !
in
≤≤" $&
diccionarioIdsOrdenVenta
≤≤% =
)
≤≤= >
{
≥≥ 
OrdenDeVenta
¥¥  
ordenDeVenta
¥¥! -
=
¥¥. /
operacionLogica
¥¥0 ?
.
¥¥? @!
ObtenerOrdenDeVenta
¥¥@ S
(
¥¥S T
item
¥¥T X
.
¥¥X Y
Value
¥¥Y ^
)
¥¥^ _
;
¥¥_ `
string
µµ 
	QrContent
µµ $
=
µµ% &*
facturacionElectronicaLogica
µµ' C
.
µµC D
	ObtenerQR
µµD M
(
µµM N
ordenDeVenta
µµN Z
,
µµZ [
sede
µµ\ `
)
µµ` a
;
µµa b
byte
∂∂ 
[
∂∂ 
]
∂∂ 
QrBytes
∂∂ "
=
∂∂# $
barCodeUtil
∂∂% 0
.
∂∂0 1
ObtenerCodigoQR
∂∂1 @
(
∂∂@ A
	QrContent
∂∂A J
)
∂∂J K
;
∂∂K L
var
∑∑ 
htmlString80
∑∑ $
=
∑∑% &#
CoreHtmlStringBuilder
∑∑' <
.
∑∑< =
ObtenerHtmlString
∑∑= N
(
∑∑N O
ordenDeVenta
∑∑O [
,
∑∑[ \
FormatoImpresion
∑∑] m
.
∑∑m n
_80mm
∑∑n s
,
∑∑s t
QrBytes
∑∑u |
,
∑∑| }
sede∑∑~ Ç
,∑∑Ç É
this∑∑Ñ à
,∑∑à â
maestroLogica∑∑ä ó
)∑∑ó ò
;∑∑ò ô
var
∏∏ 
htmlStringA4
∏∏ $
=
∏∏% &#
CoreHtmlStringBuilder
∏∏' <
.
∏∏< =
ObtenerHtmlString
∏∏= N
(
∏∏N O
ordenDeVenta
∏∏O [
,
∏∏[ \
FormatoImpresion
∏∏] m
.
∏∏m n
A4
∏∏n p
,
∏∏p q
QrBytes
∏∏r y
,
∏∏y z
sede
∏∏{ 
,∏∏ Ä
this∏∏Å Ö
,∏∏Ö Ü
maestroLogica∏∏á î
)∏∏î ï
;∏∏ï ñ

documentos
ππ 
.
ππ 
Add
ππ "
(
ππ" #
new
ππ# &,
DocumentoComprobanteOrdenVenta
ππ' E
(
ππE F
)
ππF G
{
∫∫ 
Id
ªª 
=
ªª 
item
ªª !
.
ªª! "
Key
ªª" %
,
ªª% &
IdOrden
ºº 
=
ºº  !
item
ºº" &
.
ºº& '
Value
ºº' ,
,
ºº, -'
CadenaHtmlDeComprobante80
ΩΩ 1
=
ΩΩ2 3
htmlString80
ΩΩ4 @
,
ΩΩ@ A'
CadenaHtmlDeComprobanteA4
ææ 1
=
ææ2 3
htmlStringA4
ææ4 @
}
øø 
)
øø 
;
øø 
}
¿¿ 
	resultado
¡¡ 
.
¡¡ 
information
¡¡ %
=
¡¡& '

documentos
¡¡( 2
;
¡¡2 3
return
¬¬ 
	resultado
¬¬  
;
¬¬  !
}
√√ 
catch
ƒƒ 
(
ƒƒ 
	Exception
ƒƒ 
e
ƒƒ 
)
ƒƒ 
{
≈≈ 
throw
∆∆ 
new
∆∆ !
ControllerException
∆∆ -
(
∆∆- .
$str
∆∆. d
,
∆∆d e
e
∆∆f g
)
∆∆g h
;
∆∆h i
}
«« 
}
»» 	
public
ÃÃ 

JsonResult
ÃÃ 
ObtenerConsumos
ÃÃ )
(
ÃÃ) *
int
ÃÃ* -
idEstablecimiento
ÃÃ. ?
,
ÃÃ? @
string
ÃÃA G

fechaDesde
ÃÃH R
,
ÃÃR S
string
ÃÃT Z

fechaHasta
ÃÃ[ e
)
ÃÃe f
{
ÕÕ 	
try
ŒŒ 
{
œœ 
DateTime
–– 
fechaInicio
–– $
=
––% &
DateTime
––' /
.
––/ 0
Parse
––0 5
(
––5 6

fechaDesde
––6 @
)
––@ A
;
––A B
DateTime
—— 
fechaFin
—— !
=
——" #
DateTime
——$ ,
.
——, -
Parse
——- 2
(
——2 3

fechaHasta
——3 =
+
——> ?
$str
——@ K
)
——K L
;
——L M
List
““ 
<
““ 
Consumo
““ 
>
““ 
consumos
““ &
=
““' (
hotelLogica
““) 4
.
““4 5
ObtenerConsumos
““5 D
(
““D E
idEstablecimiento
““E V
,
““V W
fechaInicio
““X c
,
““c d
fechaFin
““e m
)
““m n
;
““n o
return
”” 
Json
”” 
(
”” 
consumos
”” $
)
””$ %
;
””% &
}
‘‘ 
catch
’’ 
(
’’ 
	Exception
’’ 
e
’’ 
)
’’ 
{
÷÷ 
return
◊◊ 
new
◊◊ "
JsonHttpStatusResult
◊◊ /
(
◊◊/ 0
Util
◊◊0 4
.
◊◊4 5
	ErrorJson
◊◊5 >
(
◊◊> ?
e
◊◊? @
)
◊◊@ A
,
◊◊A B
HttpStatusCode
◊◊C Q
.
◊◊Q R!
InternalServerError
◊◊R e
)
◊◊e f
;
◊◊f g
}
ÿÿ 
}
ŸŸ 	
public
⁄⁄ 

JsonResult
⁄⁄ .
 ObtenerConsumoHabitacionAtencion
⁄⁄ :
(
⁄⁄: ;
int
⁄⁄; >

idAtencion
⁄⁄? I
)
⁄⁄I J
{
€€ 	
try
‹‹ 
{
›› 
ConsumoHabitacion
ﬁﬁ !
consumoHabitacion
ﬁﬁ" 3
=
ﬁﬁ4 5
hotelLogica
ﬁﬁ6 A
.
ﬁﬁA B&
ObtenerConsumoHabitacion
ﬁﬁB Z
(
ﬁﬁZ [

idAtencion
ﬁﬁ[ e
)
ﬁﬁe f
;
ﬁﬁf g
return
ﬂﬂ 
Json
ﬂﬂ 
(
ﬂﬂ 
consumoHabitacion
ﬂﬂ -
)
ﬂﬂ- .
;
ﬂﬂ. /
}
‡‡ 
catch
·· 
(
·· 
	Exception
·· 
e
·· 
)
·· 
{
‚‚ 
return
„„ 
new
„„ "
JsonHttpStatusResult
„„ /
(
„„/ 0
Util
„„0 4
.
„„4 5
	ErrorJson
„„5 >
(
„„> ?
e
„„? @
)
„„@ A
,
„„A B
HttpStatusCode
„„C Q
.
„„Q R!
InternalServerError
„„R e
)
„„e f
;
„„f g
}
‰‰ 
}
ÂÂ 	
public
ÊÊ 

JsonResult
ÊÊ 
ConfirmarConsumo
ÊÊ *
(
ÊÊ* +
ConsumoHabitacion
ÊÊ+ <
consumoHabitacion
ÊÊ= N
)
ÊÊN O
{
ÁÁ 	
try
ËË 
{
ÈÈ 
OperationResult
ÍÍ 
	resultado
ÍÍ  )
=
ÍÍ* +
hotelLogica
ÍÍ, 7
.
ÍÍ7 8
ConfirmarConsumo
ÍÍ8 H
(
ÍÍH I
consumoHabitacion
ÍÍI Z
,
ÍÍZ [
ProfileData
ÍÍ\ g
(
ÍÍg h
)
ÍÍh i
)
ÍÍi j
;
ÍÍj k
Util
ÎÎ 
.
ÎÎ (
ManageIfResultIsNotSuccess
ÎÎ /
(
ÎÎ/ 0
	resultado
ÎÎ0 9
,
ÎÎ9 :
$str
ÎÎ; e
)
ÎÎe f
;
ÎÎf g
return
ÏÏ 
Json
ÏÏ 
(
ÏÏ 
new
ÏÏ 
{
ÏÏ  !
	resultado
ÏÏ" +
.
ÏÏ+ ,
code_result
ÏÏ, 7
,
ÏÏ7 8
	resultado
ÏÏ9 B
.
ÏÏB C
data
ÏÏC G
,
ÏÏG H 
result_description
ÏÏI [
=
ÏÏ\ ]
	resultado
ÏÏ^ g
.
ÏÏg h
title
ÏÏh m
}
ÏÏn o
)
ÏÏo p
;
ÏÏp q
}
ÌÌ 
catch
ÓÓ 
(
ÓÓ 
	Exception
ÓÓ 
e
ÓÓ 
)
ÓÓ 
{
ÔÔ 
return
 
new
 "
JsonHttpStatusResult
 /
(
/ 0
Util
0 4
.
4 5
	ErrorJson
5 >
(
> ?
e
? @
)
@ A
,
A B
HttpStatusCode
C Q
.
Q R!
InternalServerError
R e
)
e f
;
f g
}
ÒÒ 
}
ÚÚ 	
public
ÛÛ 

JsonResult
ÛÛ 
InvalidarConsumo
ÛÛ *
(
ÛÛ* +
int
ÛÛ+ .
	idConsumo
ÛÛ/ 8
)
ÛÛ8 9
{
ÙÙ 	
try
ıı 
{
ˆˆ 
OperationResult
˜˜ 
	resultado
˜˜  )
=
˜˜* +
hotelLogica
˜˜, 7
.
˜˜7 8
InvalidarConsumo
˜˜8 H
(
˜˜H I
	idConsumo
˜˜I R
,
˜˜R S
ProfileData
˜˜T _
(
˜˜_ `
)
˜˜` a
)
˜˜a b
;
˜˜b c
Util
¯¯ 
.
¯¯ (
ManageIfResultIsNotSuccess
¯¯ /
(
¯¯/ 0
	resultado
¯¯0 9
,
¯¯9 :
$str
¯¯; Z
)
¯¯Z [
;
¯¯[ \
return
˘˘ 
Json
˘˘ 
(
˘˘ 
new
˘˘ 
{
˘˘  !
	resultado
˘˘" +
.
˘˘+ ,
code_result
˘˘, 7
,
˘˘7 8
	resultado
˘˘9 B
.
˘˘B C
data
˘˘C G
,
˘˘G H 
result_description
˘˘I [
=
˘˘\ ]
	resultado
˘˘^ g
.
˘˘g h
title
˘˘h m
}
˘˘n o
)
˘˘o p
;
˘˘p q
}
˙˙ 
catch
˚˚ 
(
˚˚ 
LogicaException
˚˚ "
oe
˚˚# %
)
˚˚% &
{
¸¸ 
return
˝˝ 
new
˝˝ "
JsonHttpStatusResult
˝˝ /
(
˝˝/ 0
Util
˝˝0 4
.
˝˝4 5
	ErrorJson
˝˝5 >
(
˝˝> ?
oe
˝˝? A
)
˝˝A B
,
˝˝B C
HttpStatusCode
˝˝D R
.
˝˝R S!
InternalServerError
˝˝S f
)
˝˝f g
;
˝˝g h
}
˛˛ 
}
ˇˇ 	
public
ÄÄ 

JsonResult
ÄÄ :
,ObtenerAtencionesEnCheckedInComoHabitaciones
ÄÄ F
(
ÄÄF G
int
ÄÄG J
idEstablecimiento
ÄÄK \
)
ÄÄ\ ]
{
ÅÅ 	
try
ÇÇ 
{
ÉÉ 
List
ÑÑ 
<
ÑÑ 
ItemGenerico
ÑÑ !
>
ÑÑ! "
	respuesta
ÑÑ# ,
=
ÑÑ- .
hotelLogica
ÑÑ/ :
.
ÑÑ: ;:
,ObtenerAtencionesEnCheckedInComoHabitaciones
ÑÑ; g
(
ÑÑg h
idEstablecimiento
ÑÑh y
)
ÑÑy z
;
ÑÑz {
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
	respuesta
ÖÖ %
)
ÖÖ% &
;
ÖÖ& '
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
e
áá 
)
áá 
{
àà 
return
ââ 
new
ââ "
JsonHttpStatusResult
ââ /
(
ââ/ 0
Util
ââ0 4
.
ââ4 5
	ErrorJson
ââ5 >
(
ââ> ?
e
ââ? @
)
ââ@ A
,
ââA B
HttpStatusCode
ââC Q
.
ââQ R!
InternalServerError
ââR e
)
ââe f
;
ââf g
}
ää 
}
ãã 	
}
çç 
}éé òˆ
kD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Hotel\HotelReportes_AtencionesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class .
"HotelReportes_AtencionesController 3
:4 5
BaseController6 D
{ 
private 
readonly  
IHotelReporte_Logica -
hotelReporte_Logica. A
;A B
public .
"HotelReportes_AtencionesController 1
(1 2
)2 3
:4 5
base6 :
(: ;
); <
{ 	
hotelReporte_Logica 
=  !
Dependencia" -
.- .
Resolve. 5
<5 6 
IHotelReporte_Logica6 J
>J K
(K L
)L M
;M N
} 	
public 
ActionResult 
Atenciones_Ingresos /
(/ 0
int0 3
idEstablecimiento4 E
,E F
stringG M!
nombreEstablecimientoN c
,c d
DateTimee m

fechaDesden x
,x y
DateTime	z Ç

fechaHasta
É ç
)
ç é
{   	
var!! 
	rptviewer!! 
=!! &
GenerarAtenciones_Ingresos!! 6
(!!6 7
idEstablecimiento!!7 H
,!!H I!
nombreEstablecimiento!!J _
,!!_ `

fechaDesde!!a k
,!!k l

fechaHasta!!m w
,!!w x
true!!y }
)!!} ~
;!!~ 
ViewBag"" 
."" 
ReportViewer""  
=""! "
	rptviewer""# ,
;"", -
return## 
View## 
(## 
$str## -
)##- .
;##. /
}$$ 	
public%% 
ReportViewer%% &
GenerarAtenciones_Ingresos%% 6
(%%6 7
int%%7 :
idEstablecimiento%%; L
,%%L M
string%%N T!
nombreEstablecimiento%%U j
,%%j k
DateTime%%l t

fechaDesde%%u 
,	%% Ä
DateTime
%%Å â

fechaHasta
%%ä î
,
%%î ï
bool
%%ñ ö
fromRequest
%%õ ¶
)
%%¶ ß
{&& 	
List'' 
<'' 
Ingreso'' 
>'' 
ingresos'' "
=''# $
hotelReporte_Logica''% 8
.''8 9
ObtenerIngresos''9 H
(''H I
idEstablecimiento''I Z
,''Z [

fechaDesde''\ f
,''f g

fechaHasta''h r
)''r s
;''s t
var(( 
parametrosBasicos(( !
=((" #$
ObtenerParametrosBasicos(($ <
(((< =
)((= >
;((> ?
ReportParameter)) *
parametroNombreEstablecimiento)) :
=)); <
new))= @
ReportParameter))A P
())P Q
$str))Q h
,))h i!
nombreEstablecimiento))j 
)	)) Ä
;
))Ä Å
ReportParameter** 
parametroFechaDesde** /
=**0 1
new**2 5
ReportParameter**6 E
(**E F
$str**F R
,**R S

fechaDesde**T ^
.**^ _
ToString**_ g
(**g h
)**h i
)**i j
;**j k
ReportParameter++ 
parametroFechaHasta++ /
=++0 1
new++2 5
ReportParameter++6 E
(++E F
$str++F R
,++R S

fechaHasta++T ^
.++^ _
ToString++_ g
(++g h
)++h i
)++i j
;++j k
var,, 
	rptviewer,, 
=,, 
new,, 
ReportViewer,,  ,
(,,, -
),,- .
{,,/ 0
ProcessingMode,,1 ?
=,,@ A
ProcessingMode,,B P
.,,P Q
Local,,Q V
,,,V W
SizeToReportContent,,X k
=,,l m
true,,n r
,,,r s
Width,,t y
=,,z {
Unit	,,| Ä
.
,,Ä Å

Percentage
,,Å ã
(
,,ã å
$num
,,å è
)
,,è ê
,
,,ê ë
Height
,,í ò
=
,,ô ö
Unit
,,õ ü
.
,,ü †

Percentage
,,† ™
(
,,™ ´
$num
,,´ Æ
)
,,Æ Ø
}
,,∞ ±
;
,,± ≤
string-- 
path-- 
=-- 
$str-- L
;--L M
	rptviewer.. 
... 
LocalReport.. !
...! "

ReportPath.." ,
=..- .
fromRequest../ :
?..; <
Request..= D
...D E
MapPath..E L
(..L M
Request..M T
...T U
ApplicationPath..U d
)..d e
+..f g
path..h l
:..m n
HostingEnvironment	..o Å
.
..Å Ç
MapPath
..Ç â
(
..â ä
path
..ä é
)
..é è
;
..è ê
	rptviewer// 
.// 
LocalReport// !
.//! "
SetParameters//" /
(/// 0
new//0 3
ReportParameter//4 C
[//C D
]//D E
{//F G
parametrosBasicos00 !
.00! "

NombreSede00" ,
,00, -
parametrosBasicos11 !
.11! "
FechaActualSistema11" 4
,114 5
parametrosBasicos22 !
.22! "
LogoSede22" *
,22* +
parametrosBasicos33 !
.33! "
Usuario33" )
,33) **
parametroNombreEstablecimiento44 .
,44. /
parametroFechaDesde55 #
,55# $
parametroFechaHasta66 #
}77 
)77 
;77 
ReportDataSource88 !
rptdatasourceIngresos88 2
=883 4
new885 8
ReportDataSource889 I
(88I J
$str88J [
,88[ \
ingresos88] e
)88e f
;88f g
	rptviewer99 
.99 
LocalReport99 !
.99! "
DataSources99" -
.99- .
Add99. 1
(991 2!
rptdatasourceIngresos992 G
)99G H
;99H I
return:: 
	rptviewer:: 
;:: 
};; 	
public<< 
ActionResult<< 
Atenciones_Salidas<< .
(<<. /
int<</ 2
idEstablecimiento<<3 D
,<<D E
string<<F L!
nombreEstablecimiento<<M b
,<<b c
DateTime<<d l

fechaDesde<<m w
,<<w x
DateTime	<<y Å

fechaHasta
<<Ç å
)
<<å ç
{== 	
var>> 
	rptviewer>> 
=>> %
GenerarAtenciones_Salidas>> 5
(>>5 6
idEstablecimiento>>6 G
,>>G H!
nombreEstablecimiento>>I ^
,>>^ _

fechaDesde>>` j
,>>j k

fechaHasta>>l v
,>>v w
true>>x |
)>>| }
;>>} ~
ViewBag?? 
.?? 
ReportViewer??  
=??! "
	rptviewer??# ,
;??, -
return@@ 
View@@ 
(@@ 
$str@@ -
)@@- .
;@@. /
}AA 	
publicBB 
ReportViewerBB %
GenerarAtenciones_SalidasBB 5
(BB5 6
intBB6 9
idEstablecimientoBB: K
,BBK L
stringBBM S!
nombreEstablecimientoBBT i
,BBi j
DateTimeBBk s

fechaDesdeBBt ~
,BB~ 
DateTime
BBÄ à

fechaHasta
BBâ ì
,
BBì î
bool
BBï ô
fromRequest
BBö •
)
BB• ¶
{CC 	
ListDD 
<DD 
SalidaDD 
>DD 
salidasDD  
=DD! "
hotelReporte_LogicaDD# 6
.DD6 7
ObtenerSalidasDD7 E
(DDE F
idEstablecimientoDDF W
,DDW X

fechaDesdeDDY c
,DDc d

fechaHastaDDe o
)DDo p
;DDp q
varEE 
parametrosBasicosEE !
=EE" #$
ObtenerParametrosBasicosEE$ <
(EE< =
)EE= >
;EE> ?
ReportParameterFF *
parametroNombreEstablecimientoFF :
=FF; <
newFF= @
ReportParameterFFA P
(FFP Q
$strFFQ h
,FFh i!
nombreEstablecimientoFFj 
)	FF Ä
;
FFÄ Å
ReportParameterGG 
parametroFechaDesdeGG /
=GG0 1
newGG2 5
ReportParameterGG6 E
(GGE F
$strGGF R
,GGR S

fechaDesdeGGT ^
.GG^ _
ToStringGG_ g
(GGg h
)GGh i
)GGi j
;GGj k
ReportParameterHH 
parametroFechaHastaHH /
=HH0 1
newHH2 5
ReportParameterHH6 E
(HHE F
$strHHF R
,HHR S

fechaHastaHHT ^
.HH^ _
ToStringHH_ g
(HHg h
)HHh i
)HHi j
;HHj k
varII 
	rptviewerII 
=II 
newII 
ReportViewerII  ,
(II, -
)II- .
{II/ 0
ProcessingModeII1 ?
=II@ A
ProcessingModeIIB P
.IIP Q
LocalIIQ V
,IIV W
SizeToReportContentIIX k
=IIl m
trueIIn r
,IIr s
WidthIIt y
=IIz {
Unit	II| Ä
.
IIÄ Å

Percentage
IIÅ ã
(
IIã å
$num
IIå è
)
IIè ê
,
IIê ë
Height
IIí ò
=
IIô ö
Unit
IIõ ü
.
IIü †

Percentage
II† ™
(
II™ ´
$num
II´ Æ
)
IIÆ Ø
}
II∞ ±
;
II± ≤
stringJJ 
pathJJ 
=JJ 
$strJJ K
;JJK L
	rptviewerKK 
.KK 
LocalReportKK !
.KK! "

ReportPathKK" ,
=KK- .
fromRequestKK/ :
?KK; <
RequestKK= D
.KKD E
MapPathKKE L
(KKL M
RequestKKM T
.KKT U
ApplicationPathKKU d
)KKd e
+KKf g
pathKKh l
:KKm n
HostingEnvironment	KKo Å
.
KKÅ Ç
MapPath
KKÇ â
(
KKâ ä
path
KKä é
)
KKé è
;
KKè ê
	rptviewerLL 
.LL 
LocalReportLL !
.LL! "
SetParametersLL" /
(LL/ 0
newLL0 3
ReportParameterLL4 C
[LLC D
]LLD E
{LLF G
parametrosBasicosMM !
.MM! "

NombreSedeMM" ,
,MM, -
parametrosBasicosNN !
.NN! "
FechaActualSistemaNN" 4
,NN4 5
parametrosBasicosOO !
.OO! "
LogoSedeOO" *
,OO* +
parametrosBasicosPP !
.PP! "
UsuarioPP" )
,PP) **
parametroNombreEstablecimientoQQ .
,QQ. /
parametroFechaDesdeRR #
,RR# $
parametroFechaHastaSS #
}TT 
)TT 
;TT 
ReportDataSourceUU  
rptdatasourceSalidasUU 1
=UU2 3
newUU4 7
ReportDataSourceUU8 H
(UUH I
$strUUI Y
,UUY Z
salidasUU[ b
)UUb c
;UUc d
	rptviewerVV 
.VV 
LocalReportVV !
.VV! "
DataSourcesVV" -
.VV- .
AddVV. 1
(VV1 2 
rptdatasourceSalidasVV2 F
)VVF G
;VVG H
returnWW 
	rptviewerWW 
;WW 
}XX 	
publicYY 
ActionResultYY 
Atenciones_AnuladasYY /
(YY/ 0
intYY0 3
idEstablecimientoYY4 E
,YYE F
stringYYG M!
nombreEstablecimientoYYN c
,YYc d
DateTimeYYe m

fechaDesdeYYn x
,YYx y
DateTime	YYz Ç

fechaHasta
YYÉ ç
)
YYç é
{ZZ 	
var[[ 
	rptviewer[[ 
=[[ &
GenerarAtenciones_Anuladas[[ 6
([[6 7
idEstablecimiento[[7 H
,[[H I!
nombreEstablecimiento[[J _
,[[_ `

fechaDesde[[a k
,[[k l

fechaHasta[[m w
,[[w x
true[[y }
)[[} ~
;[[~ 
ViewBag\\ 
.\\ 
ReportViewer\\  
=\\! "
	rptviewer\\# ,
;\\, -
return]] 
View]] 
(]] 
$str]] -
)]]- .
;]]. /
}^^ 	
public__ 
ReportViewer__ &
GenerarAtenciones_Anuladas__ 6
(__6 7
int__7 :
idEstablecimiento__; L
,__L M
string__N T!
nombreEstablecimiento__U j
,__j k
DateTime__l t

fechaDesde__u 
,	__ Ä
DateTime
__Å â

fechaHasta
__ä î
,
__î ï
bool
__ñ ö
fromRequest
__õ ¶
)
__¶ ß
{`` 	
Listaa 
<aa 
Anuladaaa 
>aa 
anuladasaa "
=aa# $
hotelReporte_Logicaaa% 8
.aa8 9
ObtenerAnuladasaa9 H
(aaH I
idEstablecimientoaaI Z
,aaZ [

fechaDesdeaa\ f
,aaf g

fechaHastaaah r
)aar s
;aas t
varbb 
parametrosBasicosbb !
=bb" #$
ObtenerParametrosBasicosbb$ <
(bb< =
)bb= >
;bb> ?
ReportParametercc *
parametroNombreEstablecimientocc :
=cc; <
newcc= @
ReportParameterccA P
(ccP Q
$strccQ h
,cch i!
nombreEstablecimientoccj 
)	cc Ä
;
ccÄ Å
ReportParameterdd 
parametroFechaDesdedd /
=dd0 1
newdd2 5
ReportParameterdd6 E
(ddE F
$strddF R
,ddR S

fechaDesdeddT ^
.dd^ _
ToStringdd_ g
(ddg h
)ddh i
)ddi j
;ddj k
ReportParameteree 
parametroFechaHastaee /
=ee0 1
newee2 5
ReportParameteree6 E
(eeE F
$streeF R
,eeR S

fechaHastaeeT ^
.ee^ _
ToStringee_ g
(eeg h
)eeh i
)eei j
;eej k
varff 
	rptviewerff 
=ff 
newff 
ReportViewerff  ,
(ff, -
)ff- .
{ff/ 0
ProcessingModeff1 ?
=ff@ A
ProcessingModeffB P
.ffP Q
LocalffQ V
,ffV W
SizeToReportContentffX k
=ffl m
trueffn r
,ffr s
Widthfft y
=ffz {
Unit	ff| Ä
.
ffÄ Å

Percentage
ffÅ ã
(
ffã å
$num
ffå è
)
ffè ê
,
ffê ë
Height
ffí ò
=
ffô ö
Unit
ffõ ü
.
ffü †

Percentage
ff† ™
(
ff™ ´
$num
ff´ Æ
)
ffÆ Ø
}
ff∞ ±
;
ff± ≤
stringgg 
pathgg 
=gg 
$strgg L
;ggL M
	rptviewerhh 
.hh 
LocalReporthh !
.hh! "

ReportPathhh" ,
=hh- .
fromRequesthh/ :
?hh; <
Requesthh= D
.hhD E
MapPathhhE L
(hhL M
RequesthhM T
.hhT U
ApplicationPathhhU d
)hhd e
+hhf g
pathhhh l
:hhm n
HostingEnvironment	hho Å
.
hhÅ Ç
MapPath
hhÇ â
(
hhâ ä
path
hhä é
)
hhé è
;
hhè ê
	rptviewerii 
.ii 
LocalReportii !
.ii! "
SetParametersii" /
(ii/ 0
newii0 3
ReportParameterii4 C
[iiC D
]iiD E
{iiF G
parametrosBasicosjj !
.jj! "

NombreSedejj" ,
,jj, -
parametrosBasicoskk !
.kk! "
FechaActualSistemakk" 4
,kk4 5
parametrosBasicosll !
.ll! "
LogoSedell" *
,ll* +
parametrosBasicosmm !
.mm! "
Usuariomm" )
,mm) **
parametroNombreEstablecimientonn .
,nn. /
parametroFechaDesdeoo #
,oo# $
parametroFechaHastapp #
}qq 
)qq 
;qq 
ReportDataSourcerr !
rptdatasourceAnuladasrr 2
=rr3 4
newrr5 8
ReportDataSourcerr9 I
(rrI J
$strrrJ [
,rr[ \
anuladasrr] e
)rre f
;rrf g
	rptviewerss 
.ss 
LocalReportss !
.ss! "
DataSourcesss" -
.ss- .
Addss. 1
(ss1 2!
rptdatasourceAnuladasss2 G
)ssG H
;ssH I
returntt 
	rptviewertt 
;tt 
}uu 	
publicvv 
ActionResultvv #
Atenciones_FormularioT1vv 3
(vv3 4
intvv4 7
idEstablecimientovv8 I
,vvI J
stringvvK Q!
nombreEstablecimientovvR g
,vvg h
DateTimevvi q

fechaDesdevvr |
,vv| }
DateTime	vv~ Ü

fechaHasta
vvá ë
)
vvë í
{ww 	
varxx 
	rptviewerxx 
=xx *
GenerarAtenciones_FormularioT1xx :
(xx: ;
idEstablecimientoxx; L
,xxL M!
nombreEstablecimientoxxN c
,xxc d

fechaDesdexxe o
,xxo p

fechaHastaxxq {
,xx{ |
true	xx} Å
)
xxÅ Ç
;
xxÇ É
ViewBagyy 
.yy 
ReportVieweryy  
=yy! "
	rptvieweryy# ,
;yy, -
returnzz 
Viewzz 
(zz 
$strzz -
)zz- .
;zz. /
}{{ 	
public|| 
ReportViewer|| *
GenerarAtenciones_FormularioT1|| :
(||: ;
int||; >
idEstablecimiento||? P
,||P Q
string||R X!
nombreEstablecimiento||Y n
,||n o
DateTime||p x

fechaDesde	||y É
,
||É Ñ
DateTime
||Ö ç

fechaHasta
||é ò
,
||ò ô
bool
||ö û
fromRequest
||ü ™
)
||™ ´
{}} 	
FormularioT1~~ 
formularioT1~~ %
=~~& '
hotelReporte_Logica~~( ;
.~~; <
ObtenerFormularioT1~~< O
(~~O P
idEstablecimiento~~P a
,~~a b

fechaDesde~~c m
,~~m n

fechaHasta~~o y
)~~y z
;~~z {
var 
sede 
= 
ObtenerSede "
(" #
)# $
;$ %
ReportParameter
ÄÄ "
parametroRazonSocial
ÄÄ 0
=
ÄÄ1 2
new
ÄÄ3 6
ReportParameter
ÄÄ7 F
(
ÄÄF G
$str
ÄÄG T
,
ÄÄT U
sede
ÄÄV Z
.
ÄÄZ [
Nombre
ÄÄ[ a
)
ÄÄa b
;
ÄÄb c
ReportParameter
ÅÅ 
parametroRuc
ÅÅ (
=
ÅÅ) *
new
ÅÅ+ .
ReportParameter
ÅÅ/ >
(
ÅÅ> ?
$str
ÅÅ? D
,
ÅÅD E
sede
ÅÅF J
.
ÅÅJ K 
DocumentoIdentidad
ÅÅK ]
)
ÅÅ] ^
;
ÅÅ^ _
ReportParameter
ÇÇ &
parametroNombreComercial
ÇÇ 4
=
ÇÇ5 6
new
ÇÇ7 :
ReportParameter
ÇÇ; J
(
ÇÇJ K
$str
ÇÇK \
,
ÇÇ\ ]
sede
ÇÇ^ b
.
ÇÇb c
NombreComercial
ÇÇc r
)
ÇÇr s
;
ÇÇs t
ReportParameter
ÉÉ 
parametroClase
ÉÉ *
=
ÉÉ+ ,
new
ÉÉ- 0
ReportParameter
ÉÉ1 @
(
ÉÉ@ A
$str
ÉÉA H
,
ÉÉH I
HotelSettings
ÉÉJ W
.
ÉÉW X
Default
ÉÉX _
.
ÉÉ_ ` 
ClaseHotelMincetur
ÉÉ` r
)
ÉÉr s
;
ÉÉs t
ReportParameter
ÑÑ  
parametroCategoria
ÑÑ .
=
ÑÑ/ 0
new
ÑÑ1 4
ReportParameter
ÑÑ5 D
(
ÑÑD E
$str
ÑÑE P
,
ÑÑP Q
HotelSettings
ÑÑR _
.
ÑÑ_ `
Default
ÑÑ` g
.
ÑÑg h$
CategoriaHotelMincetur
ÑÑh ~
)
ÑÑ~ 
;ÑÑ Ä
ReportParameter
ÖÖ (
parametroNumeroCertificado
ÖÖ 6
=
ÖÖ7 8
new
ÖÖ9 <
ReportParameter
ÖÖ= L
(
ÖÖL M
$str
ÖÖM `
,
ÖÖ` a
HotelSettings
ÖÖb o
.
ÖÖo p
Default
ÖÖp w
.
ÖÖw x-
NumeroCertificadoHotelMinceturÖÖx ñ
)ÖÖñ ó
;ÖÖó ò
ReportParameter
ÜÜ  
parametroDireccion
ÜÜ .
=
ÜÜ/ 0
new
ÜÜ1 4
ReportParameter
ÜÜ5 D
(
ÜÜD E
$str
ÜÜE P
,
ÜÜP Q
sede
ÜÜR V
.
ÜÜV W
DomicilioFiscal
ÜÜW f
.
ÜÜf g
Detalle
ÜÜg n
)
ÜÜn o
;
ÜÜo p
ReportParameter
áá #
parametroTelefonoFijo
áá 1
=
áá2 3
new
áá4 7
ReportParameter
áá8 G
(
ááG H
$str
ááH V
,
ááV W
sede
ááX \
.
áá\ ]
Telefono
áá] e
)
ááe f
;
ááf g
ReportParameter
àà )
parametroSistemaCoordenadas
àà 7
=
àà8 9
new
àà: =
ReportParameter
àà> M
(
ààM N
$str
ààN b
,
ààb c
HotelSettings
ààd q
.
ààq r
Default
ààr y
.
àày z.
SistemaCoordenadasHotelMinceturààz ô
)ààô ö
;ààö õ
ReportParameter
ââ 
parametroRegion
ââ +
=
ââ, -
new
ââ. 1
ReportParameter
ââ2 A
(
ââA B
$str
ââB J
,
ââJ K
sede
ââL P
.
ââP Q
DomicilioFiscal
ââQ `
.
ââ` a
Ubigeo
ââa g
.
ââg h
Nombre
ââh n
.
âân o
Split
ââo t
(
âât u
$char
ââu x
)
ââx y
[
âây z
$num
ââz {
]
ââ{ |
)
ââ| }
;
ââ} ~
ReportParameter
ää  
parametroProvincia
ää .
=
ää/ 0
new
ää1 4
ReportParameter
ää5 D
(
ääD E
$str
ääE P
,
ääP Q
sede
ääR V
.
ääV W
DomicilioFiscal
ääW f
.
ääf g
Ubigeo
ääg m
.
ääm n
Nombre
ään t
.
äät u
Split
ääu z
(
ääz {
$char
ää{ ~
)
ää~ 
[ää Ä
$numääÄ Å
]ääÅ Ç
)ääÇ É
;ääÉ Ñ
ReportParameter
ãã 
parametroDistrito
ãã -
=
ãã. /
new
ãã0 3
ReportParameter
ãã4 C
(
ããC D
$str
ããD N
,
ããN O
sede
ããP T
.
ããT U
DomicilioFiscal
ããU d
.
ããd e
Ubigeo
ããe k
.
ããk l
Nombre
ããl r
.
ããr s
Split
ããs x
(
ããx y
$char
ããy |
)
ãã| }
[
ãã} ~
$num
ãã~ 
]ãã Ä
)ããÄ Å
;ããÅ Ç
ReportParameter
åå  
parametroPaginaWeb
åå .
=
åå/ 0
new
åå1 4
ReportParameter
åå5 D
(
ååD E
$str
ååE P
,
ååP Q
HotelSettings
ååR _
.
åå_ `
Default
åå` g
.
ååg h$
PaginaWebHotelMincetur
ååh ~
)
åå~ 
;åå Ä
ReportParameter
çç #
parametroEmailReserva
çç 1
=
çç2 3
new
çç4 7
ReportParameter
çç8 G
(
ççG H
$str
ççH V
,
ççV W
HotelSettings
ççX e
.
ççe f
Default
ççf m
.
ççm n(
EmailReservaHotelMinceturççn á
)ççá à
;ççà â
ReportParameter
éé 
parametroAnio
éé )
=
éé* +
new
éé, /
ReportParameter
éé0 ?
(
éé? @
$str
éé@ F
,
ééF G

fechaDesde
ééH R
.
ééR S
Year
ééS W
.
ééW X
ToString
ééX `
(
éé` a
)
ééa b
)
ééb c
;
ééc d
ReportParameter
èè 
parametroMes
èè (
=
èè) *
new
èè+ .
ReportParameter
èè/ >
(
èè> ?
$str
èè? D
,
èèD E

fechaDesde
èèF P
.
èèP Q
ToString
èèQ Y
(
èèY Z
$str
èèZ `
,
èè` a
CultureInfo
èèb m
.
èèm n$
CreateSpecificCultureèèn É
(èèÉ Ñ
$strèèÑ à
)èèà â
)èèâ ä
.èèä ã
ToUpperèèã í
(èèí ì
)èèì î
)èèî ï
;èèï ñ
ReportParameter
êê )
parametroResolucionJefatura
êê 7
=
êê8 9
new
êê: =
ReportParameter
êê> M
(
êêM N
$str
êêN b
,
êêb c
HotelSettings
êêd q
.
êêq r
Default
êêr y
.
êêy z0
!ResolucionJefaturaReporteMinceturêêz õ
)êêõ ú
;êêú ù
var
íí 
	rptviewer
íí 
=
íí 
new
íí 
ReportViewer
íí  ,
(
íí, -
)
íí- .
{
íí/ 0
ProcessingMode
íí1 ?
=
íí@ A
ProcessingMode
ííB P
.
ííP Q
Local
ííQ V
,
ííV W!
SizeToReportContent
ííX k
=
ííl m
true
íín r
,
íír s
Width
íít y
=
ííz {
Unitíí| Ä
.ííÄ Å

PercentageííÅ ã
(ííã å
$numííå è
)ííè ê
,ííê ë
Heightííí ò
=ííô ö
Unitííõ ü
.ííü †

Percentageíí† ™
(íí™ ´
$numíí´ Æ
)ííÆ Ø
}íí∞ ±
;íí± ≤
string
ìì 
path
ìì 
=
ìì 
$str
ìì M
;
ììM N
	rptviewer
îî 
.
îî 
LocalReport
îî !
.
îî! "

ReportPath
îî" ,
=
îî- .
fromRequest
îî/ :
?
îî; <
Request
îî= D
.
îîD E
MapPath
îîE L
(
îîL M
Request
îîM T
.
îîT U
ApplicationPath
îîU d
)
îîd e
+
îîf g
path
îîh l
:
îîm n!
HostingEnvironmentîîo Å
.îîÅ Ç
MapPathîîÇ â
(îîâ ä
pathîîä é
)îîé è
;îîè ê
	rptviewer
ïï 
.
ïï 
LocalReport
ïï !
.
ïï! "
SetParameters
ïï" /
(
ïï/ 0
new
ïï0 3
ReportParameter
ïï4 C
[
ïïC D
]
ïïD E
{
ïïF G"
parametroRazonSocial
ññ $
,
ññ$ %
parametroRuc
óó 
,
óó &
parametroNombreComercial
òò (
,
òò( )
parametroClase
ôô 
,
ôô  
parametroCategoria
öö "
,
öö" #(
parametroNumeroCertificado
õõ *
,
õõ* + 
parametroDireccion
úú "
,
úú" ##
parametroTelefonoFijo
ùù %
,
ùù% &)
parametroSistemaCoordenadas
ûû +
,
ûû+ ,
parametroRegion
üü 
,
üü   
parametroProvincia
†† "
,
††" #
parametroDistrito
°° !
,
°°! " 
parametroPaginaWeb
¢¢ "
,
¢¢" ##
parametroEmailReserva
££ %
,
££% &
parametroAnio
§§ 
,
§§ 
parametroMes
•• 
,
•• )
parametroResolucionJefatura
¶¶ +
}
ßß 
)
ßß 
;
ßß 
ReportDataSource
®® $
rptdatasourceArribo1_8
®® 3
=
®®4 5
new
®®6 9
ReportDataSource
®®: J
(
®®J K
$str
®®K `
,
®®` a
formularioT1
®®b n
.
®®n o
Dias1_8Arribos
®®o }
)
®®} ~
;
®®~ 
ReportDataSource
©© %
rptdatasourceArribo9_16
©© 4
=
©©5 6
new
©©7 :
ReportDataSource
©©; K
(
©©K L
$str
©©L b
,
©©b c
formularioT1
©©d p
.
©©p q
Dias9_16Arribos©©q Ä
)©©Ä Å
;©©Å Ç
ReportDataSource
™™ &
rptdatasourceArribo17_24
™™ 5
=
™™6 7
new
™™8 ;
ReportDataSource
™™< L
(
™™L M
$str
™™M d
,
™™d e
formularioT1
™™f r
.
™™r s
Dias17_24Arribos™™s É
)™™É Ñ
;™™Ñ Ö
ReportDataSource
´´ )
rptdatasourceArribo25_Total
´´ 8
=
´´9 :
new
´´; >
ReportDataSource
´´? O
(
´´O P
$str
´´P j
,
´´j k
formularioT1
´´l x
.
´´x y"
Dias25_TotalArribos´´y å
)´´å ç
;´´ç é
ReportDataSource
¨¨ 4
&rptdatasourceiboPernoctacionExtranjero
¨¨ C
=
¨¨D E
new
¨¨F I
ReportDataSource
¨¨J Z
(
¨¨Z [
$str¨¨[ Ä
,¨¨Ä Å
formularioT1¨¨Ç é
.¨¨é è0
 ArribosPernoctacionesExtranjeros¨¨è Ø
)¨¨Ø ∞
;¨¨∞ ±
ReportDataSource
≠≠ 2
$rptdatasourceiboPernoctacionNacional
≠≠ A
=
≠≠B C
new
≠≠D G
ReportDataSource
≠≠H X
(
≠≠X Y
$str
≠≠Y |
,
≠≠| }
formularioT1≠≠~ ä
.≠≠ä ã/
ArribosPernoctacionesNacionales≠≠ã ™
)≠≠™ ´
;≠≠´ ¨
ReportDataSource
ÆÆ #
rptdatasourceivoViaje
ÆÆ 2
=
ÆÆ3 4
new
ÆÆ5 8
ReportDataSource
ÆÆ9 I
(
ÆÆI J
$str
ÆÆJ ^
,
ÆÆ^ _
formularioT1
ÆÆ` l
.
ÆÆl m
MotivoViajes
ÆÆm y
)
ÆÆy z
;
ÆÆz {
	rptviewer
ØØ 
.
ØØ 
LocalReport
ØØ !
.
ØØ! "
DataSources
ØØ" -
.
ØØ- .
Add
ØØ. 1
(
ØØ1 2$
rptdatasourceArribo1_8
ØØ2 H
)
ØØH I
;
ØØI J
	rptviewer
∞∞ 
.
∞∞ 
LocalReport
∞∞ !
.
∞∞! "
DataSources
∞∞" -
.
∞∞- .
Add
∞∞. 1
(
∞∞1 2%
rptdatasourceArribo9_16
∞∞2 I
)
∞∞I J
;
∞∞J K
	rptviewer
±± 
.
±± 
LocalReport
±± !
.
±±! "
DataSources
±±" -
.
±±- .
Add
±±. 1
(
±±1 2&
rptdatasourceArribo17_24
±±2 J
)
±±J K
;
±±K L
	rptviewer
≤≤ 
.
≤≤ 
LocalReport
≤≤ !
.
≤≤! "
DataSources
≤≤" -
.
≤≤- .
Add
≤≤. 1
(
≤≤1 2)
rptdatasourceArribo25_Total
≤≤2 M
)
≤≤M N
;
≤≤N O
	rptviewer
≥≥ 
.
≥≥ 
LocalReport
≥≥ !
.
≥≥! "
DataSources
≥≥" -
.
≥≥- .
Add
≥≥. 1
(
≥≥1 24
&rptdatasourceiboPernoctacionExtranjero
≥≥2 X
)
≥≥X Y
;
≥≥Y Z
	rptviewer
¥¥ 
.
¥¥ 
LocalReport
¥¥ !
.
¥¥! "
DataSources
¥¥" -
.
¥¥- .
Add
¥¥. 1
(
¥¥1 22
$rptdatasourceiboPernoctacionNacional
¥¥2 V
)
¥¥V W
;
¥¥W X
	rptviewer
µµ 
.
µµ 
LocalReport
µµ !
.
µµ! "
DataSources
µµ" -
.
µµ- .
Add
µµ. 1
(
µµ1 2#
rptdatasourceivoViaje
µµ2 G
)
µµG H
;
µµH I
return
∂∂ 
	rptviewer
∂∂ 
;
∂∂ 
}
∑∑ 	
}
∏∏ 
}ππ Í:
iD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Hotel\HotelReportes_ReservasController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class ,
 HotelReportes_ReservasController 1
:2 3
BaseController4 B
{ 
private 
readonly  
IHotelReporte_Logica -
hotelReporte_Logica. A
;A B
public ,
 HotelReportes_ReservasController /
(/ 0
)0 1
:2 3
base4 8
(8 9
)9 :
{ 	
hotelReporte_Logica 
=  !
Dependencia" -
.- .
Resolve. 5
<5 6 
IHotelReporte_Logica6 J
>J K
(K L
)L M
;M N
} 	
public 
ActionResult  
Reservas_Confirmadas 0
(0 1
int1 4
idEstablecimiento5 F
,F G
stringH N!
nombreEstablecimientoO d
,d e
DateTimef n

fechaDesdeo y
,y z
DateTime	{ É

fechaHasta
Ñ é
,
é è
[
ê ë
System
ë ó
.
ó ò
Web
ò õ
.
õ ú
Http
ú †
.
† °
FromUri
° ®
]
® ©
int
™ ≠
[
≠ Æ
]
Æ Ø 
idsTiposHabitacion
∞ ¬
,
¬ √
string
ƒ  $
nombresTiposHabitacion
À ·
,
· ‚
bool
„ Á"
todosTiposHabitacion
Ë ¸
)
¸ ˝
{ 	
var 
	rptviewer 
= '
GenerarReservas_Confirmadas 7
(7 8
idEstablecimiento8 I
,I J!
nombreEstablecimientoK `
,` a

fechaDesdeb l
,l m

fechaHastan x
,x y
idsTiposHabitacion	z å
,
å ç$
nombresTiposHabitacion
é §
,
§ •"
todosTiposHabitacion
¶ ∫
,
∫ ª
true
º ¿
)
¿ ¡
;
¡ ¬
ViewBag   
.   
ReportViewer    
=  ! "
	rptviewer  # ,
;  , -
return!! 
View!! 
(!! 
$str!! -
)!!- .
;!!. /
}"" 	
public## 
ReportViewer## '
GenerarReservas_Confirmadas## 7
(##7 8
int##8 ;
idEstablecimiento##< M
,##M N
string##O U!
nombreEstablecimiento##V k
,##k l
DateTime##m u

fechaDesde	##v Ä
,
##Ä Å
DateTime
##Ç ä

fechaHasta
##ã ï
,
##ï ñ
int
##ó ö
[
##ö õ
]
##õ ú 
idsTiposHabitacion
##ù Ø
,
##Ø ∞
string
##± ∑$
nombresTiposHabitacion
##∏ Œ
,
##Œ œ
bool
##– ‘"
todosTiposHabitacion
##’ È
,
##È Í
bool
##Î Ô
fromRequest
## ˚
)
##˚ ¸
{$$ 	
List%% 
<%% 
Reserva%% 
>%% 
reservas%% "
=%%# $
hotelReporte_Logica%%% 8
.%%8 9&
ObtenerReservasConfirmadas%%9 S
(%%S T
idEstablecimiento%%T e
,%%e f

fechaDesde%%g q
,%%q r

fechaHasta%%s }
,%%} ~!
todosTiposHabitacion	%% ì
,
%%ì î 
idsTiposHabitacion
%%ï ß
)
%%ß ®
;
%%® ©
var&& 
parametrosBasicos&& !
=&&" #$
ObtenerParametrosBasicos&&$ <
(&&< =
)&&= >
;&&> ?
ReportParameter'' *
parametroNombreEstablecimiento'' :
=''; <
new''= @
ReportParameter''A P
(''P Q
$str''Q h
,''h i!
nombreEstablecimiento''j 
)	'' Ä
;
''Ä Å
ReportParameter(( 
parametroFechaDesde(( /
=((0 1
new((2 5
ReportParameter((6 E
(((E F
$str((F R
,((R S

fechaDesde((T ^
.((^ _
ToString((_ g
(((g h
)((h i
)((i j
;((j k
ReportParameter)) 
parametroFechaHasta)) /
=))0 1
new))2 5
ReportParameter))6 E
())E F
$str))F R
,))R S

fechaHasta))T ^
.))^ _
ToString))_ g
())g h
)))h i
)))i j
;))j k
ReportParameter** *
parametroNombreTiposHabitacion** :
=**; <
new**= @
ReportParameter**A P
(**P Q
$str**Q h
,**h i#
nombresTiposHabitacion	**j Ä
??
**Å É
$str
**Ñ ã
)
**ã å
;
**å ç
var++ 
	rptviewer++ 
=++ 
new++ 
ReportViewer++  ,
(++, -
)++- .
{++/ 0
ProcessingMode++1 ?
=++@ A
ProcessingMode++B P
.++P Q
Local++Q V
,++V W
SizeToReportContent++X k
=++l m
true++n r
,++r s
Width++t y
=++z {
Unit	++| Ä
.
++Ä Å

Percentage
++Å ã
(
++ã å
$num
++å è
)
++è ê
,
++ê ë
Height
++í ò
=
++ô ö
Unit
++õ ü
.
++ü †

Percentage
++† ™
(
++™ ´
$num
++´ Æ
)
++Æ Ø
}
++∞ ±
;
++± ≤
string,, 
path,, 
=,, 
$str,, M
;,,M N
	rptviewer-- 
.-- 
LocalReport-- !
.--! "

ReportPath--" ,
=--- .
fromRequest--/ :
?--; <
Request--= D
.--D E
MapPath--E L
(--L M
Request--M T
.--T U
ApplicationPath--U d
)--d e
+--f g
path--h l
:--m n
HostingEnvironment	--o Å
.
--Å Ç
MapPath
--Ç â
(
--â ä
path
--ä é
)
--é è
;
--è ê
	rptviewer.. 
... 
LocalReport.. !
...! "
SetParameters.." /
(../ 0
new..0 3
ReportParameter..4 C
[..C D
]..D E
{..F G
parametrosBasicos// !
.//! "

NombreSede//" ,
,//, -
parametrosBasicos00 !
.00! "
FechaActualSistema00" 4
,004 5
parametrosBasicos11 !
.11! "
LogoSede11" *
,11* +
parametrosBasicos22 !
.22! "
Usuario22" )
,22) **
parametroNombreEstablecimiento33 .
,33. /
parametroFechaDesde44 #
,44# $
parametroFechaHasta55 #
,55# $*
parametroNombreTiposHabitacion66 .
}77 
)77 
;77 
ReportDataSource88 #
rptdatasourceFacturadas88 4
=885 6
new887 :
ReportDataSource88; K
(88K L
$str88L `
,88` a
reservas88b j
)88j k
;88k l
	rptviewer99 
.99 
LocalReport99 !
.99! "
DataSources99" -
.99- .
Add99. 1
(991 2#
rptdatasourceFacturadas992 I
)99I J
;99J K
return:: 
	rptviewer:: 
;:: 
};; 	
}<< 
}== ˙>
jD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Hotel\HotelReportes_HuespedesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class -
!HotelReportes_HuespedesController 2
:3 4
BaseController5 C
{ 
private 
readonly  
IHotelReporte_Logica -
hotelReporte_Logica. A
;A B
public -
!HotelReportes_HuespedesController 0
(0 1
)1 2
:3 4
base5 9
(9 :
): ;
{ 	
hotelReporte_Logica 
=  !
Dependencia" -
.- .
Resolve. 5
<5 6 
IHotelReporte_Logica6 J
>J K
(K L
)L M
;M N
} 	
public   

JsonResult   '
Huespedes_RegistroHuespedes   5
(  5 6
int  6 9
idEstablecimiento  : K
,  K L
string  M S!
nombreEstablecimiento  T i
,  i j
DateTime  k s

fechaDesde  t ~
,  ~ 
DateTime
  Ä à

fechaHasta
  â ì
)
  ì î
{!! 	
try"" 
{## 
var$$ 
	rptviewer$$ 
=$$ .
"GenerarHuespedes_RegistroHuespedes$$  B
($$B C
idEstablecimiento$$C T
,$$T U

fechaDesde$$V `
,$$` a

fechaHasta$$b l
,$$l m
true$$n r
)$$r s
;$$s t
string&& 
filenameContent&& &
=&&' (!
nombreEstablecimiento&&) >
+&&? @
$str&&A Q
+&&R S

fechaDesde&&T ^
.&&^ _
ToString&&_ g
(&&g h
$str&&h t
)&&t u
+&&v w
$str&&x {
+&&| }

fechaHasta	&&~ à
.
&&à â
ToString
&&â ë
(
&&ë í
$str
&&í û
)
&&û ü
;
&&ü †
string'' 
filename'' 
=''  !
string''" (
.''( )
Format'') /
(''/ 0
$str''0 9
,''9 :
filenameContent''; J
,''J K
$str''L Q
)''Q R
;''R S
filename(( 
=(( 
filename(( #
.((# $
Replace(($ +
(((+ ,
$str((, /
,((/ 0
$str((1 3
)((3 4
;((4 5
byte)) 
[)) 
])) 
bytes)) 
=)) 
	rptviewer)) (
.))( )
LocalReport))) 4
.))4 5
Render))5 ;
()); <
$str))< C
,))C D
null))E I
,))I J
out))K N
string))O U
mimeType))V ^
,))^ _
out))` c
string))d j
encoding))k s
,))s t
out))u x
string))y 
	extension
))Ä â
,
))â ä
out
))ã é
string
))è ï
[
))ï ñ
]
))ñ ó
	streamids
))ò °
,
))° ¢
out
))£ ¶
Warning
))ß Æ
[
))Æ Ø
]
))Ø ∞
warnings
))± π
)
))π ∫
;
))∫ ª
Response** 
.** 
ClearHeaders** %
(**% &
)**& '
;**' (
Response++ 
.++ 
Clear++ 
(++ 
)++  
;++  !
Response,, 
.,, 
	AddHeader,, "
(,," #
$str,,# 8
,,,8 9
$str,,: Q
+,,R S
filename,,T \
),,\ ]
;,,] ^
Response-- 
.-- 
ContentType-- $
=--% &
mimeType--' /
;--/ 0
Response.. 
... 
BinaryWrite.. $
(..$ %
bytes..% *
)..* +
;..+ ,
Response// 
.// 
Flush// 
(// 
)//  
;//  !
Response00 
.00 
End00 
(00 
)00 
;00 
return11 
Json11 
(11 
$str11 ;
)11; <
;11< =
}22 
catch33 
(33 
	Exception33 
e33 
)33 
{44 
throw55 
new55 
ControllerException55 -
(55- .
$str55. Y
,55Y Z
e55[ \
)55\ ]
;55] ^
}66 
}77 	
public99 
ReportViewer99 .
"GenerarHuespedes_RegistroHuespedes99 >
(99> ?
int99? B
idEstablecimiento99C T
,99T U
DateTime99V ^

fechaDesde99_ i
,99i j
DateTime99k s

fechaHasta99t ~
,99~ 
bool
99Ä Ñ
fromRequest
99Ö ê
)
99ê ë
{:: 	
List;; 
<;; 
RegistroHuesped;;  
>;;  !
registroHuespedes;;" 3
=;;4 5
hotelReporte_Logica;;6 I
.;;I J$
ObtenerRegistroHuespedes;;J b
(;;b c
idEstablecimiento;;c t
,;;t u

fechaDesde	;;v Ä
,
;;Ä Å

fechaHasta
;;Ç å
)
;;å ç
;
;;ç é
ReportParameter<< 
parametroFechaDesde<< /
=<<0 1
new<<2 5
ReportParameter<<6 E
(<<E F
$str<<F R
,<<R S

fechaDesde<<T ^
.<<^ _
ToString<<_ g
(<<g h
)<<h i
)<<i j
;<<j k
ReportParameter== 
parametroFechaHasta== /
===0 1
new==2 5
ReportParameter==6 E
(==E F
$str==F R
,==R S

fechaHasta==T ^
.==^ _
ToString==_ g
(==g h
)==h i
)==i j
;==j k
var>> 
	rptviewer>> 
=>> 
new>> 
ReportViewer>>  ,
(>>, -
)>>- .
{>>/ 0
ProcessingMode>>1 ?
=>>@ A
ProcessingMode>>B P
.>>P Q
Local>>Q V
,>>V W
SizeToReportContent>>X k
=>>l m
true>>n r
,>>r s
Width>>t y
=>>z {
Unit	>>| Ä
.
>>Ä Å

Percentage
>>Å ã
(
>>ã å
$num
>>å è
)
>>è ê
,
>>ê ë
Height
>>í ò
=
>>ô ö
Unit
>>õ ü
.
>>ü †

Percentage
>>† ™
(
>>™ ´
$num
>>´ Æ
)
>>Æ Ø
}
>>∞ ±
;
>>± ≤
string?? 
path?? 
=?? 
$str?? T
;??T U
	rptviewer@@ 
.@@ 
LocalReport@@ !
.@@! "

ReportPath@@" ,
=@@- .
fromRequest@@/ :
?@@; <
Request@@= D
.@@D E
MapPath@@E L
(@@L M
Request@@M T
.@@T U
ApplicationPath@@U d
)@@d e
+@@f g
path@@h l
:@@m n
HostingEnvironment	@@o Å
.
@@Å Ç
MapPath
@@Ç â
(
@@â ä
path
@@ä é
)
@@é è
;
@@è ê
	rptviewerAA 
.AA 
LocalReportAA !
.AA! "
SetParametersAA" /
(AA/ 0
newAA0 3
ReportParameterAA4 C
[AAC D
]AAD E
{AAF G
parametroFechaDesdeBB #
,BB# $
parametroFechaHastaCC #
}DD 
)DD 
;DD 
ReportDataSourceEE *
rptdatasourceRegistroHuespedesEE ;
=EE< =
newEE> A
ReportDataSourceEEB R
(EER S
$strEES m
,EEm n
registroHuespedes	EEo Ä
)
EEÄ Å
;
EEÅ Ç
	rptviewerFF 
.FF 
LocalReportFF !
.FF! "
DataSourcesFF" -
.FF- .
AddFF. 1
(FF1 2*
rptdatasourceRegistroHuespedesFF2 P
)FFP Q
;FFQ R
returnGG 
	rptviewerGG 
;GG 
}HH 	
}II 
}JJ òÉ
lD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Hotel\HotelReportes_FacturacionController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class /
#HotelReportes_FacturacionController 4
:5 6
BaseController7 E
{ 
private 
readonly  
IHotelReporte_Logica -
hotelReporte_Logica. A
;A B
public /
#HotelReportes_FacturacionController 2
(2 3
)3 4
:5 6
base7 ;
(; <
)< =
{ 	
hotelReporte_Logica 
=  !
Dependencia" -
.- .
Resolve. 5
<5 6 
IHotelReporte_Logica6 J
>J K
(K L
)L M
;M N
} 	
public 
ActionResult "
Facturacion_Facturadas 2
(2 3
int3 6
idEstablecimiento7 H
,H I
stringJ P!
nombreEstablecimientoQ f
,f g
DateTimeh p

fechaDesdeq {
,{ |
DateTime	} Ö

fechaHasta
Ü ê
)
ê ë
{ 	
var 
	rptviewer 
= )
GenerarFacturacion_Facturadas 9
(9 :
idEstablecimiento: K
,K L!
nombreEstablecimientoM b
,b c

fechaDesded n
,n o

fechaHastap z
,z {
true	| Ä
)
Ä Å
;
Å Ç
ViewBag   
.   
ReportViewer    
=  ! "
	rptviewer  # ,
;  , -
return!! 
View!! 
(!! 
$str!! -
)!!- .
;!!. /
}"" 	
public## 
ReportViewer## )
GenerarFacturacion_Facturadas## 9
(##9 :
int##: =
idEstablecimiento##> O
,##O P
string##Q W!
nombreEstablecimiento##X m
,##m n
DateTime##o w

fechaDesde	##x Ç
,
##Ç É
DateTime
##Ñ å

fechaHasta
##ç ó
,
##ó ò
bool
##ô ù
fromRequest
##û ©
)
##© ™
{$$ 	
List%% 
<%% 
	Facturada%% 
>%% 

facturadas%% &
=%%' (
hotelReporte_Logica%%) <
.%%< =
ObtenerFacturadas%%= N
(%%N O
idEstablecimiento%%O `
,%%` a

fechaDesde%%b l
,%%l m

fechaHasta%%n x
)%%x y
;%%y z
var&& 
parametrosBasicos&& !
=&&" #$
ObtenerParametrosBasicos&&$ <
(&&< =
)&&= >
;&&> ?
ReportParameter'' *
parametroNombreEstablecimiento'' :
=''; <
new''= @
ReportParameter''A P
(''P Q
$str''Q h
,''h i!
nombreEstablecimiento''j 
)	'' Ä
;
''Ä Å
ReportParameter(( 
parametroFechaDesde(( /
=((0 1
new((2 5
ReportParameter((6 E
(((E F
$str((F R
,((R S

fechaDesde((T ^
.((^ _
ToString((_ g
(((g h
)((h i
)((i j
;((j k
ReportParameter)) 
parametroFechaHasta)) /
=))0 1
new))2 5
ReportParameter))6 E
())E F
$str))F R
,))R S

fechaHasta))T ^
.))^ _
ToString))_ g
())g h
)))h i
)))i j
;))j k
var** 
	rptviewer** 
=** 
new** 
ReportViewer**  ,
(**, -
)**- .
{**/ 0
ProcessingMode**1 ?
=**@ A
ProcessingMode**B P
.**P Q
Local**Q V
,**V W
SizeToReportContent**X k
=**l m
true**n r
,**r s
Width**t y
=**z {
Unit	**| Ä
.
**Ä Å

Percentage
**Å ã
(
**ã å
$num
**å è
)
**è ê
,
**ê ë
Height
**í ò
=
**ô ö
Unit
**õ ü
.
**ü †

Percentage
**† ™
(
**™ ´
$num
**´ Æ
)
**Æ Ø
}
**∞ ±
;
**± ≤
string++ 
path++ 
=++ 
$str++ O
;++O P
	rptviewer,, 
.,, 
LocalReport,, !
.,,! "

ReportPath,," ,
=,,- .
fromRequest,,/ :
?,,; <
Request,,= D
.,,D E
MapPath,,E L
(,,L M
Request,,M T
.,,T U
ApplicationPath,,U d
),,d e
+,,f g
path,,h l
:,,m n
HostingEnvironment	,,o Å
.
,,Å Ç
MapPath
,,Ç â
(
,,â ä
path
,,ä é
)
,,é è
;
,,è ê
	rptviewer-- 
.-- 
LocalReport-- !
.--! "
SetParameters--" /
(--/ 0
new--0 3
ReportParameter--4 C
[--C D
]--D E
{--F G
parametrosBasicos.. !
...! "

NombreSede.." ,
,.., -
parametrosBasicos// !
.//! "
FechaActualSistema//" 4
,//4 5
parametrosBasicos00 !
.00! "
LogoSede00" *
,00* +
parametrosBasicos11 !
.11! "
Usuario11" )
,11) **
parametroNombreEstablecimiento22 .
,22. /
parametroFechaDesde33 #
,33# $
parametroFechaHasta44 #
}55 
)55 
;55 
ReportDataSource66 #
rptdatasourceFacturadas66 4
=665 6
new667 :
ReportDataSource66; K
(66K L
$str66L _
,66_ `

facturadas66a k
)66k l
;66l m
	rptviewer77 
.77 
LocalReport77 !
.77! "
DataSources77" -
.77- .
Add77. 1
(771 2#
rptdatasourceFacturadas772 I
)77I J
;77J K
return88 
	rptviewer88 
;88 
}99 	
public:: 
ActionResult:: $
Facturacion_NoFacturadas:: 4
(::4 5
int::5 8
idEstablecimiento::9 J
,::J K
string::L R!
nombreEstablecimiento::S h
,::h i
DateTime::j r

fechaDesde::s }
,::} ~
DateTime	:: á

fechaHasta
::à í
)
::í ì
{;; 	
var<< 
	rptviewer<< 
=<< +
GenerarFacturacion_NoFacturadas<< ;
(<<; <
idEstablecimiento<<< M
,<<M N!
nombreEstablecimiento<<O d
,<<d e

fechaDesde<<f p
,<<p q

fechaHasta<<r |
,<<| }
true	<<~ Ç
)
<<Ç É
;
<<É Ñ
ViewBag== 
.== 
ReportViewer==  
===! "
	rptviewer==# ,
;==, -
return>> 
View>> 
(>> 
$str>> -
)>>- .
;>>. /
}?? 	
public@@ 
ReportViewer@@ +
GenerarFacturacion_NoFacturadas@@ ;
(@@; <
int@@< ?
idEstablecimiento@@@ Q
,@@Q R
string@@S Y!
nombreEstablecimiento@@Z o
,@@o p
DateTime@@q y

fechaDesde	@@z Ñ
,
@@Ñ Ö
DateTime
@@Ü é

fechaHasta
@@è ô
,
@@ô ö
bool
@@õ ü
fromRequest
@@† ´
)
@@´ ¨
{AA 	
ListBB 
<BB 
NoFacturadaBB 
>BB 
noFacturadasBB *
=BB+ ,
hotelReporte_LogicaBB- @
.BB@ A
ObtenerNoFacturadasBBA T
(BBT U
idEstablecimientoBBU f
,BBf g

fechaDesdeBBh r
,BBr s

fechaHastaBBt ~
)BB~ 
;	BB Ä
varCC 
parametrosBasicosCC !
=CC" #$
ObtenerParametrosBasicosCC$ <
(CC< =
)CC= >
;CC> ?
ReportParameterDD *
parametroNombreEstablecimientoDD :
=DD; <
newDD= @
ReportParameterDDA P
(DDP Q
$strDDQ h
,DDh i!
nombreEstablecimientoDDj 
)	DD Ä
;
DDÄ Å
ReportParameterEE 
parametroFechaDesdeEE /
=EE0 1
newEE2 5
ReportParameterEE6 E
(EEE F
$strEEF R
,EER S

fechaDesdeEET ^
.EE^ _
ToStringEE_ g
(EEg h
)EEh i
)EEi j
;EEj k
ReportParameterFF 
parametroFechaHastaFF /
=FF0 1
newFF2 5
ReportParameterFF6 E
(FFE F
$strFFF R
,FFR S

fechaHastaFFT ^
.FF^ _
ToStringFF_ g
(FFg h
)FFh i
)FFi j
;FFj k
varGG 
	rptviewerGG 
=GG 
newGG 
ReportViewerGG  ,
(GG, -
)GG- .
{GG/ 0
ProcessingModeGG1 ?
=GG@ A
ProcessingModeGGB P
.GGP Q
LocalGGQ V
,GGV W
SizeToReportContentGGX k
=GGl m
trueGGn r
,GGr s
WidthGGt y
=GGz {
Unit	GG| Ä
.
GGÄ Å

Percentage
GGÅ ã
(
GGã å
$num
GGå è
)
GGè ê
,
GGê ë
Height
GGí ò
=
GGô ö
Unit
GGõ ü
.
GGü †

Percentage
GG† ™
(
GG™ ´
$num
GG´ Æ
)
GGÆ Ø
}
GG∞ ±
;
GG± ≤
stringHH 
pathHH 
=HH 
$strHH Q
;HHQ R
	rptviewerII 
.II 
LocalReportII !
.II! "

ReportPathII" ,
=II- .
fromRequestII/ :
?II; <
RequestII= D
.IID E
MapPathIIE L
(IIL M
RequestIIM T
.IIT U
ApplicationPathIIU d
)IId e
+IIf g
pathIIh l
:IIm n
HostingEnvironment	IIo Å
.
IIÅ Ç
MapPath
IIÇ â
(
IIâ ä
path
IIä é
)
IIé è
;
IIè ê
	rptviewerJJ 
.JJ 
LocalReportJJ !
.JJ! "
SetParametersJJ" /
(JJ/ 0
newJJ0 3
ReportParameterJJ4 C
[JJC D
]JJD E
{JJF G
parametrosBasicosKK !
.KK! "

NombreSedeKK" ,
,KK, -
parametrosBasicosLL !
.LL! "
FechaActualSistemaLL" 4
,LL4 5
parametrosBasicosMM !
.MM! "
LogoSedeMM" *
,MM* +
parametrosBasicosNN !
.NN! "
UsuarioNN" )
,NN) **
parametroNombreEstablecimientoOO .
,OO. /
parametroFechaDesdePP #
,PP# $
parametroFechaHastaQQ #
}RR 
)RR 
;RR 
ReportDataSourceSS %
rptdatasourceNoFacturadasSS 6
=SS7 8
newSS9 <
ReportDataSourceSS= M
(SSM N
$strSSN c
,SSc d
noFacturadasSSe q
)SSq r
;SSr s
	rptviewerTT 
.TT 
LocalReportTT !
.TT! "
DataSourcesTT" -
.TT- .
AddTT. 1
(TT1 2%
rptdatasourceNoFacturadasTT2 K
)TTK L
;TTL M
returnUU 
	rptviewerUU 
;UU 
}VV 	
publicWW 
ActionResultWW "
Facturacion_IncidentesWW 2
(WW2 3
intWW3 6
idEstablecimientoWW7 H
,WWH I
stringWWJ P!
nombreEstablecimientoWWQ f
,WWf g
DateTimeWWh p

fechaDesdeWWq {
,WW{ |
DateTime	WW} Ö

fechaHasta
WWÜ ê
)
WWê ë
{XX 	
varYY 
	rptviewerYY 
=YY )
GenerarFacturacion_IncidentesYY 9
(YY9 :
idEstablecimientoYY: K
,YYK L!
nombreEstablecimientoYYM b
,YYb c

fechaDesdeYYd n
,YYn o

fechaHastaYYp z
,YYz {
true	YY| Ä
)
YYÄ Å
;
YYÅ Ç
ViewBagZZ 
.ZZ 
ReportViewerZZ  
=ZZ! "
	rptviewerZZ# ,
;ZZ, -
return[[ 
View[[ 
([[ 
$str[[ -
)[[- .
;[[. /
}\\ 	
public]] 
ReportViewer]] )
GenerarFacturacion_Incidentes]] 9
(]]9 :
int]]: =
idEstablecimiento]]> O
,]]O P
string]]Q W!
nombreEstablecimiento]]X m
,]]m n
DateTime]]o w

fechaDesde	]]x Ç
,
]]Ç É
DateTime
]]Ñ å

fechaHasta
]]ç ó
,
]]ó ò
bool
]]ô ù
fromRequest
]]û ©
)
]]© ™
{^^ 	
List__ 
<__ 
	Incidente__ 
>__ 

facturadas__ &
=__' (
hotelReporte_Logica__) <
.__< =
ObtenerIncidentes__= N
(__N O
idEstablecimiento__O `
,__` a

fechaDesde__b l
,__l m

fechaHasta__n x
)__x y
;__y z
var`` 
parametrosBasicos`` !
=``" #$
ObtenerParametrosBasicos``$ <
(``< =
)``= >
;``> ?
ReportParameteraa *
parametroNombreEstablecimientoaa :
=aa; <
newaa= @
ReportParameteraaA P
(aaP Q
$straaQ h
,aah i!
nombreEstablecimientoaaj 
)	aa Ä
;
aaÄ Å
ReportParameterbb 
parametroFechaDesdebb /
=bb0 1
newbb2 5
ReportParameterbb6 E
(bbE F
$strbbF R
,bbR S

fechaDesdebbT ^
.bb^ _
ToStringbb_ g
(bbg h
)bbh i
)bbi j
;bbj k
ReportParametercc 
parametroFechaHastacc /
=cc0 1
newcc2 5
ReportParametercc6 E
(ccE F
$strccF R
,ccR S

fechaHastaccT ^
.cc^ _
ToStringcc_ g
(ccg h
)cch i
)cci j
;ccj k
vardd 
	rptviewerdd 
=dd 
newdd 
ReportViewerdd  ,
(dd, -
)dd- .
{dd/ 0
ProcessingModedd1 ?
=dd@ A
ProcessingModeddB P
.ddP Q
LocalddQ V
,ddV W
SizeToReportContentddX k
=ddl m
trueddn r
,ddr s
Widthddt y
=ddz {
Unit	dd| Ä
.
ddÄ Å

Percentage
ddÅ ã
(
ddã å
$num
ddå è
)
ddè ê
,
ddê ë
Height
ddí ò
=
ddô ö
Unit
ddõ ü
.
ddü †

Percentage
dd† ™
(
dd™ ´
$num
dd´ Æ
)
ddÆ Ø
}
dd∞ ±
;
dd± ≤
stringee 
pathee 
=ee 
$stree O
;eeO P
	rptviewerff 
.ff 
LocalReportff !
.ff! "

ReportPathff" ,
=ff- .
fromRequestff/ :
?ff; <
Requestff= D
.ffD E
MapPathffE L
(ffL M
RequestffM T
.ffT U
ApplicationPathffU d
)ffd e
+fff g
pathffh l
:ffm n
HostingEnvironment	ffo Å
.
ffÅ Ç
MapPath
ffÇ â
(
ffâ ä
path
ffä é
)
ffé è
;
ffè ê
	rptviewergg 
.gg 
LocalReportgg !
.gg! "
SetParametersgg" /
(gg/ 0
newgg0 3
ReportParametergg4 C
[ggC D
]ggD E
{ggF G
parametrosBasicoshh !
.hh! "

NombreSedehh" ,
,hh, -
parametrosBasicosii !
.ii! "
FechaActualSistemaii" 4
,ii4 5
parametrosBasicosjj !
.jj! "
LogoSedejj" *
,jj* +
parametrosBasicoskk !
.kk! "
Usuariokk" )
,kk) **
parametroNombreEstablecimientoll .
,ll. /
parametroFechaDesdemm #
,mm# $
parametroFechaHastann #
}oo 
)oo 
;oo 
ReportDataSourcepp #
rptdatasourceFacturadaspp 4
=pp5 6
newpp7 :
ReportDataSourcepp; K
(ppK L
$strppL _
,pp_ `

facturadasppa k
)ppk l
;ppl m
	rptviewerqq 
.qq 
LocalReportqq !
.qq! "
DataSourcesqq" -
.qq- .
Addqq. 1
(qq1 2#
rptdatasourceFacturadasqq2 I
)qqI J
;qqJ K
returnrr 
	rptviewerrr 
;rr 
}ss 	
}tt 
}uu ä
`D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Hotel\HotelReportesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class #
HotelReportesController (
:) *
BaseController+ 9
{ 
private 
readonly 
IHotelLogica %
hotelLogica& 1
;1 2
private 
readonly  
IHotelReporte_Logica -
hotelReporte_Logica. A
;A B
	protected 
readonly 
IActorNegocioLogica .
actorNegocioLogica/ A
;A B
	protected 
readonly #
IEstablecimiento_Logica 2!
establecimientoLogica3 H
;H I
public #
HotelReportesController &
(& '
)' (
:) *
base+ /
(/ 0
)0 1
{ 	
hotelLogica 
= 
Dependencia %
.% &
Resolve& -
<- .
IHotelLogica. :
>: ;
(; <
)< =
;= >
hotelReporte_Logica 
=  !
Dependencia" -
.- .
Resolve. 5
<5 6 
IHotelReporte_Logica6 J
>J K
(K L
)L M
;M N
actorNegocioLogica   
=    
Dependencia  ! ,
.  , -
Resolve  - 4
<  4 5
IActorNegocioLogica  5 H
>  H I
(  I J
)  J K
;  K L!
establecimientoLogica!! !
=!!" #
Dependencia!!$ /
.!!/ 0
Resolve!!0 7
<!!7 8#
IEstablecimiento_Logica!!8 O
>!!O P
(!!P Q
)!!Q R
;!!R S
}## 	
[%% 	
	Authorize%%	 
(%% 
Roles%% 
=%% 
$str%% 1
)%%1 2
]%%2 3
public&& 
ActionResult&& 
Reportes&& $
(&&$ %
)&&% &
{'' 	
ViewBag(( 
.(( 
Data(( 
=(( 
hotelReporte_Logica(( .
.((. /,
 ObtenerDatosParaReportePrincipal((/ O
(((O P
ProfileData((P [
((([ \
)((\ ]
)((] ^
;((^ _
return)) 
View)) 
()) 
))) 
;)) 
}** 	
},, 
}-- «˜
wD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\ReportGeneration\LibrosElectronicosGeneradorReportes.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
.1 2
reportGeneration2 B
{ 
public 

class /
#LibrosElectronicosGeneradorReportes 4
{ 
	protected 
readonly %
ILibrosElectronicosLogica 4$
librosElectronicosLogica5 M
;M N
public /
#LibrosElectronicosGeneradorReportes 2
(2 3
)3 4
{ 	$
librosElectronicosLogica   $
=  % &
Dependencia  ' 2
.  2 3
Resolve  3 :
<  : ;%
ILibrosElectronicosLogica  ; T
>  T U
(  U V
)  V W
;  W X
}!! 	
public++ 
ReportViewer++ .
"GenerarReporteDeVentaFormatoAdsoft++ >
(++> ?
int++? B

idEmpleado++C M
,++M N$
EstablecimientoComercial++O g
sede++h l
,++l m
Periodo++n u
	periodoLE++v 
,	++ Ä
bool
++Å Ö
fromRequest
++Ü ë
,
++ë í-
ILibrosElectronicosAdsoftLogica
++ì ≤,
librosElectronicosAdsoftLogica
++≥ —
,
++— “
string
++” Ÿ
requestMapPath
++⁄ Ë
)
++Ë È
{,, 	
try-- 
{.. 
List// 
<// %
ReporteVentaClienteAdsoft// .
>//. /%
reporteVentaClienteAdsoft//0 I
=//J K*
librosElectronicosAdsoftLogica//L j
.//j k,
ObtenerLibrosElectronicosAdsoft	//k ä
(
//ä ã

idEmpleado
//ã ï
,
//ï ñ
	periodoLE
//ó †
.
//† °

FechaDesde
//° ´
,
//´ ¨
	periodoLE
//≠ ∂
.
//∂ ∑

FechaHasta
//∑ ¡
)
//¡ ¬
;
//¬ √
var00 
	rptviewer00 
=00 
new00  #
ReportViewer00$ 0
(000 1
)001 2
;002 3
ReportParameter22 
fecha22  %
=22& '
new22( +
ReportParameter22, ;
(22; <
$str22< E
,22E F
	periodoLE22G P
.22P Q
anio22Q U
+22V W
$str22X [
+22\ ]
	periodoLE22^ g
.22g h
mes22h k
)22k l
;22l m
ReportParameter33 
ruc33  #
=33$ %
new33& )
ReportParameter33* 9
(339 :
$str33: ?
,33? @
sede33A E
.33E F
DocumentoIdentidad33F X
)33X Y
;33Y Z
ReportParameter44 
razonSocial44  +
=44, -
new44. 1
ReportParameter442 A
(44A B
$str44B O
,44O P
sede44Q U
.44U V
Nombre44V \
)44\ ]
;44] ^
string66 
path66 
=66 
$str66 |
;66| }
	rptviewer77 
.77 
LocalReport77 %
.77% &

ReportPath77& 0
=771 2
fromRequest773 >
?77? @
requestMapPath77A O
+77P Q
path77R V
:77W X
HostingEnvironment77Y k
.77k l
MapPath77l s
(77s t
path77t x
)77x y
;77y z
	rptviewer88 
.88 
LocalReport88 %
.88% &
SetParameters88& 3
(883 4
new884 7
ReportParameter888 G
[88G H
]88H I
{88J K
fecha88L Q
,88Q R
ruc88S V
,88V W
razonSocial88X c
}88d e
)88e f
;88f g
ReportDataSource99  %
rptdatasourcereporteVenta99! :
=99; <
new99= @
ReportDataSource99A Q
(99Q R
$str99R t
,99t u&
reporteVentaClienteAdsoft	99v è
)
99è ê
;
99ê ë
	rptviewer;; 
.;; 
ProcessingMode;; (
=;;) *
ProcessingMode;;+ 9
.;;9 :
Local;;: ?
;;;? @
	rptviewer<< 
.<< 
LocalReport<< %
.<<% &
DataSources<<& 1
.<<1 2
Add<<2 5
(<<5 6%
rptdatasourcereporteVenta<<6 O
)<<O P
;<<P Q
	rptviewer== 
.== 
SizeToReportContent== -
===. /
true==0 4
;==4 5
	rptviewer>> 
.>> 
Width>> 
=>>  !
Unit>>" &
.>>& '

Percentage>>' 1
(>>1 2
$num>>2 5
)>>5 6
;>>6 7
	rptviewer?? 
.?? 
Height??  
=??! "
Unit??# '
.??' (

Percentage??( 2
(??2 3
$num??3 6
)??6 7
;??7 8
returnAA 
	rptviewerAA  
;AA  !
}BB 
catchCC 
(CC 
	ExceptionCC 
eCC 
)CC 
{DD 
throwEE 
newEE 
ControllerExceptionEE -
(EE- .
$strEE. a
,EEa b
eEEc d
)EEd e
;EEe f
}FF 
}GG 	
publicQQ 
ReportViewerQQ A
5GenerarReporteDeVentaFormatoFoxcontBoletaVentaFacturaQQ Q
(QQQ R
intQQR U

idEmpleadoQQV `
,QQ` a$
EstablecimientoComercialQQb z
sedeQQ{ 
,	QQ Ä
Periodo
QQÅ à
	periodoLE
QQâ í
,
QQí ì
bool
QQî ò
fromRequest
QQô §
,
QQ§ •.
 ILibrosElectronicosFoxcontLogica
QQ¶ ∆-
librosElectronicosFoxcontLogica
QQ« Ê
,
QQÊ Á
string
QQË Ó
requestMapPath
QQÔ ˝
)
QQ˝ ˛
{RR 	
trySS 
{TT 
ListUU 
<UU %
ReporteVentaClienteFoxcomUU .
>UU. /%
reporteVentaClienteFoxcomUU0 I
=UUJ K+
librosElectronicosFoxcontLogicaUUL k
.UUk l8
+ObtenerVentaClienteFoxcomBoletaVentaFactura	UUl ó
(
UUó ò

idEmpleado
UUò ¢
,
UU¢ £
	periodoLE
UU§ ≠
.
UU≠ Æ

FechaDesde
UUÆ ∏
,
UU∏ π
	periodoLE
UU∫ √
.
UU√ ƒ

FechaHasta
UUƒ Œ
)
UUŒ œ
;
UUœ –
varVV 
	rptviewerVV 
=VV 
newVV  #
ReportViewerVV$ 0
(VV0 1
)VV1 2
;VV2 3
ReportParameterXX 
periodoXX  '
=XX( )
newXX* -
ReportParameterXX. =
(XX= >
$strXX> G
,XXG H
	periodoLEXXI R
.XXR S
mesXXS V
+XXW X
$strXXY \
+XX] ^
	periodoLEXX_ h
.XXh i
anioXXi m
)XXm n
;XXn o
ReportParameterYY 
rucYY  #
=YY$ %
newYY& )
ReportParameterYY* 9
(YY9 :
$strYY: ?
,YY? @
sedeYYA E
.YYE F
DocumentoIdentidadYYF X
)YYX Y
;YYY Z
ReportParameterZZ 
razonSocialZZ  +
=ZZ, -
newZZ. 1
ReportParameterZZ2 A
(ZZA B
$strZZB O
,ZZO P
sedeZZQ U
.ZZU V
NombreZZV \
)ZZ\ ]
;ZZ] ^
string\\ 
path\\ 
=\\ 
$str\\ |
;\\| }
	rptviewer]] 
.]] 
LocalReport]] %
.]]% &

ReportPath]]& 0
=]]1 2
fromRequest]]3 >
?]]? @
requestMapPath]]A O
+]]P Q
path]]R V
:]]W X
HostingEnvironment]]Y k
.]]k l
MapPath]]l s
(]]s t
path]]t x
)]]x y
;]]y z
	rptviewer^^ 
.^^ 
LocalReport^^ %
.^^% &
SetParameters^^& 3
(^^3 4
new^^4 7
ReportParameter^^8 G
[^^G H
]^^H I
{^^J K
periodo^^L S
,^^S T
ruc^^U X
,^^X Y
razonSocial^^Z e
}^^f g
)^^g h
;^^h i
ReportDataSource__  %
rptdatasourcereporteVenta__! :
=__; <
new__= @
ReportDataSource__A Q
(__Q R
$str__R g
,__g h&
reporteVentaClienteFoxcom	__i Ç
)
__Ç É
;
__É Ñ
	rptvieweraa 
.aa 
ProcessingModeaa (
=aa) *
ProcessingModeaa+ 9
.aa9 :
Localaa: ?
;aa? @
	rptviewerbb 
.bb 
LocalReportbb %
.bb% &
DataSourcesbb& 1
.bb1 2
Addbb2 5
(bb5 6%
rptdatasourcereporteVentabb6 O
)bbO P
;bbP Q
	rptviewercc 
.cc 
SizeToReportContentcc -
=cc. /
truecc0 4
;cc4 5
	rptviewerdd 
.dd 
Widthdd 
=dd  !
Unitdd" &
.dd& '

Percentagedd' 1
(dd1 2
$numdd2 5
)dd5 6
;dd6 7
	rptvieweree 
.ee 
Heightee  
=ee! "
Unitee# '
.ee' (

Percentageee( 2
(ee2 3
$numee3 6
)ee6 7
;ee7 8
returngg 
	rptviewergg  
;gg  !
}hh 
catchjj 
(jj 
	Exceptionjj 
ejj 
)jj 
{kk 
throwll 
newll 
ControllerExceptionll -
(ll- .
$strll. i
,lli j
ellk l
)lll m
;llm n
}mm 
}nn 	
publicxx 
ReportViewerxx @
4GenerarReporteDeVentaFormatoFoxcontNotaCreditoDebitoxx P
(xxP Q
intxxQ T

idEmpleadoxxU _
,xx_ `$
EstablecimientoComercialxxa y
sedexxz ~
,xx~ 
Periodo
xxÄ á
	periodoLE
xxà ë
,
xxë í
bool
xxì ó
fromRequest
xxò £
,
xx£ §.
 ILibrosElectronicosFoxcontLogica
xx• ≈-
librosElectronicosFoxcontLogica
xx∆ Â
,
xxÂ Ê
string
xxÁ Ì
requestMapPath
xxÓ ¸
)
xx¸ ˝
{yy 	
tryzz 
{{{ 
List|| 
<|| %
ReporteVentaClienteFoxcom|| .
>||. /%
reporteVentaClienteFoxcom||0 I
=||J K+
librosElectronicosFoxcontLogica||L k
.||k l7
*ObtenerVentaClienteFoxcomNotaCreditoDebito	||l ñ
(
||ñ ó

idEmpleado
||ó °
,
||° ¢
	periodoLE
||£ ¨
.
||¨ ≠

FechaDesde
||≠ ∑
,
||∑ ∏
	periodoLE
||π ¬
.
||¬ √

FechaHasta
||√ Õ
)
||Õ Œ
;
||Œ œ
var}} 
	rptviewer}} 
=}} 
new}}  #
ReportViewer}}$ 0
(}}0 1
)}}1 2
;}}2 3
ReportParameter 
periodo  '
=( )
new* -
ReportParameter. =
(= >
$str> G
,G H
	periodoLEI R
.R S
mesS V
+W X
$strY \
+] ^
	periodoLE_ h
.h i
anioi m
)m n
;n o
ReportParameter
ÄÄ 
ruc
ÄÄ  #
=
ÄÄ$ %
new
ÄÄ& )
ReportParameter
ÄÄ* 9
(
ÄÄ9 :
$str
ÄÄ: ?
,
ÄÄ? @
sede
ÄÄA E
.
ÄÄE F 
DocumentoIdentidad
ÄÄF X
)
ÄÄX Y
;
ÄÄY Z
ReportParameter
ÅÅ 
razonSocial
ÅÅ  +
=
ÅÅ, -
new
ÅÅ. 1
ReportParameter
ÅÅ2 A
(
ÅÅA B
$str
ÅÅB O
,
ÅÅO P
sede
ÅÅQ U
.
ÅÅU V
Nombre
ÅÅV \
)
ÅÅ\ ]
;
ÅÅ] ^
string
ÉÉ 
path
ÉÉ 
=
ÉÉ 
$strÉÉ é
;ÉÉé è
	rptviewer
ÑÑ 
.
ÑÑ 
LocalReport
ÑÑ %
.
ÑÑ% &

ReportPath
ÑÑ& 0
=
ÑÑ1 2
fromRequest
ÑÑ3 >
?
ÑÑ? @
requestMapPath
ÑÑA O
+
ÑÑP Q
path
ÑÑR V
:
ÑÑW X 
HostingEnvironment
ÑÑY k
.
ÑÑk l
MapPath
ÑÑl s
(
ÑÑs t
path
ÑÑt x
)
ÑÑx y
;
ÑÑy z
	rptviewer
ÖÖ 
.
ÖÖ 
LocalReport
ÖÖ %
.
ÖÖ% &
SetParameters
ÖÖ& 3
(
ÖÖ3 4
new
ÖÖ4 7
ReportParameter
ÖÖ8 G
[
ÖÖG H
]
ÖÖH I
{
ÖÖJ K
periodo
ÖÖL S
,
ÖÖS T
ruc
ÖÖU X
,
ÖÖX Y
razonSocial
ÖÖZ e
}
ÖÖf g
)
ÖÖg h
;
ÖÖh i
ReportDataSource
ÜÜ  '
rptdatasourcereporteVenta
ÜÜ! :
=
ÜÜ; <
new
ÜÜ= @
ReportDataSource
ÜÜA Q
(
ÜÜQ R
$str
ÜÜR g
,
ÜÜg h(
reporteVentaClienteFoxcomÜÜi Ç
)ÜÜÇ É
;ÜÜÉ Ñ
	rptviewer
àà 
.
àà 
ProcessingMode
àà (
=
àà) *
ProcessingMode
àà+ 9
.
àà9 :
Local
àà: ?
;
àà? @
	rptviewer
ââ 
.
ââ 
LocalReport
ââ %
.
ââ% &
DataSources
ââ& 1
.
ââ1 2
Add
ââ2 5
(
ââ5 6'
rptdatasourcereporteVenta
ââ6 O
)
ââO P
;
ââP Q
	rptviewer
ää 
.
ää !
SizeToReportContent
ää -
=
ää. /
true
ää0 4
;
ää4 5
	rptviewer
ãã 
.
ãã 
Width
ãã 
=
ãã  !
Unit
ãã" &
.
ãã& '

Percentage
ãã' 1
(
ãã1 2
$num
ãã2 5
)
ãã5 6
;
ãã6 7
	rptviewer
åå 
.
åå 
Height
åå  
=
åå! "
Unit
åå# '
.
åå' (

Percentage
åå( 2
(
åå2 3
$num
åå3 6
)
åå6 7
;
åå7 8
return
éé 
	rptviewer
éé  
;
éé  !
}
èè 
catch
ëë 
(
ëë 
	Exception
ëë 
e
ëë 
)
ëë 
{
íí 
throw
ìì 
new
ìì !
ControllerException
ìì -
(
ìì- .
$strìì. Ü
,ììÜ á
eììà â
)ììâ ä
;ììä ã
}
îî 
}
ïï 	
public
óó 
ReportViewer
óó 8
*GenerarReporteDeVentasEIngresosSinConcepto
óó F
(
óóF G
int
óóG J

idEmpleado
óóK U
,
óóU V&
EstablecimientoComercial
óóW o
sede
óóp t
,
óót u
Periodo
óóv }
periodoóó~ Ö
,óóÖ Ü
boolóóá ã
fromRequestóóå ó
,óóó ò 
IOperacionLogicaóóô ©
operacionLogicaóó™ π
,óóπ ∫
stringóóª ¡
requestMapPathóó¬ –
)óó– —
{
òò 	
try
ôô 
{
öö 
List
õõ 
<
õõ .
 ReporteVentaDetalladoSinConcepto
õõ 5
>
õõ5 6.
 reporteVentaDetalladoSinConcepto
õõ7 W
=
õõX Y
operacionLogica
õõZ i
.
õõi j6
'ObtenerReporteVentaDetalladoSinConceptoõõj ë
(õõë í

idEmpleadoõõí ú
,õõú ù
periodoõõû •
.õõ• ¶

FechaDesdeõõ¶ ∞
,õõ∞ ±
periodoõõ≤ π
.õõπ ∫

FechaHastaõõ∫ ƒ
)õõƒ ≈
;õõ≈ ∆
var
ùù 
	rptviewer
ùù 
=
ùù 
new
ùù  #
ReportViewer
ùù$ 0
(
ùù0 1
)
ùù1 2
;
ùù2 3
ReportParameter
†† 
fecha
††  %
=
††& '
new
††( +
ReportParameter
††, ;
(
††; <
$str
††< E
,
††E F
periodo
††G N
.
††N O
anio
††O S
+
††T U
$str
††V Y
+
††Z [
periodo
††\ c
.
††c d
mes
††d g
)
††g h
;
††h i
ReportParameter
°° 
ruc
°°  #
=
°°$ %
new
°°& )
ReportParameter
°°* 9
(
°°9 :
$str
°°: ?
,
°°? @
sede
°°A E
.
°°E F 
DocumentoIdentidad
°°F X
)
°°X Y
;
°°Y Z
ReportParameter
¢¢ 
razonSocial
¢¢  +
=
¢¢, -
new
¢¢. 1
ReportParameter
¢¢2 A
(
¢¢A B
$str
¢¢B O
,
¢¢O P
sede
¢¢Q U
.
¢¢U V
Nombre
¢¢V \
)
¢¢\ ]
;
¢¢] ^
string
•• 
path
•• 
=
•• 
$str
•• c
;
••c d
	rptviewer
¶¶ 
.
¶¶ 
LocalReport
¶¶ %
.
¶¶% &

ReportPath
¶¶& 0
=
¶¶1 2
fromRequest
¶¶3 >
?
¶¶? @
requestMapPath
¶¶A O
+
¶¶P Q
path
¶¶R V
:
¶¶W X 
HostingEnvironment
¶¶Y k
.
¶¶k l
MapPath
¶¶l s
(
¶¶s t
path
¶¶t x
)
¶¶x y
;
¶¶y z
	rptviewer
ßß 
.
ßß 
LocalReport
ßß %
.
ßß% &
SetParameters
ßß& 3
(
ßß3 4
new
ßß4 7
ReportParameter
ßß8 G
[
ßßG H
]
ßßH I
{
ßßJ K
fecha
ßßL Q
,
ßßQ R
ruc
ßßS V
,
ßßV W
razonSocial
ßßX c
}
ßßd e
)
ßße f
;
ßßf g
ReportDataSource
®®  ;
-rptdatasourcereporteVentaDetalladaSinConcepto
®®! N
=
®®O P
new
®®Q T
ReportDataSource
®®U e
(
®®e f
$str®®f à
,®®à â0
 reporteVentaDetalladoSinConcepto®®ä ™
)®®™ ´
;®®´ ¨
	rptviewer
™™ 
.
™™ 
ProcessingMode
™™ (
=
™™) *
ProcessingMode
™™+ 9
.
™™9 :
Local
™™: ?
;
™™? @
	rptviewer
´´ 
.
´´ 
LocalReport
´´ %
.
´´% &
DataSources
´´& 1
.
´´1 2
Add
´´2 5
(
´´5 6;
-rptdatasourcereporteVentaDetalladaSinConcepto
´´6 c
)
´´c d
;
´´d e
	rptviewer
¨¨ 
.
¨¨ !
SizeToReportContent
¨¨ -
=
¨¨. /
true
¨¨0 4
;
¨¨4 5
	rptviewer
≠≠ 
.
≠≠ 
Width
≠≠ 
=
≠≠  !
Unit
≠≠" &
.
≠≠& '

Percentage
≠≠' 1
(
≠≠1 2
$num
≠≠2 5
)
≠≠5 6
;
≠≠6 7
	rptviewer
ÆÆ 
.
ÆÆ 
Height
ÆÆ  
=
ÆÆ! "
Unit
ÆÆ# '
.
ÆÆ' (

Percentage
ÆÆ( 2
(
ÆÆ2 3
$num
ÆÆ3 6
)
ÆÆ6 7
;
ÆÆ7 8
return
∞∞ 
	rptviewer
∞∞  
;
∞∞  !
}
±± 
catch
≤≤ 
(
≤≤ 
	Exception
≤≤ 
e
≤≤ 
)
≤≤ 
{
≥≥ 
throw
¥¥ 
new
¥¥ !
ControllerException
¥¥ -
(
¥¥- .
$str
¥¥. k
,
¥¥k l
e
¥¥m n
)
¥¥n o
;
¥¥o p
}
µµ 
}
∂∂ 	
public
∏∏ 
ReportViewer
∏∏ -
GenerarReporteDeVentasEIngresos
∏∏ ;
(
∏∏; <
int
∏∏< ?

idEmpleado
∏∏@ J
,
∏∏J K&
EstablecimientoComercial
∏∏L d
sede
∏∏e i
,
∏∏i j
Periodo
∏∏k r
periodo
∏∏s z
,
∏∏z {
bool∏∏| Ä
fromRequest∏∏Å å
,∏∏å ç 
IOperacionLogica∏∏é û
operacionLogica∏∏ü Æ
,∏∏Æ Ø
string∏∏∞ ∂
requestMapPath∏∏∑ ≈
)∏∏≈ ∆
{
ππ 	
try
∫∫ 
{
ªª 
List
ºº 
<
ºº 
OperacionDeVenta
ºº %
>
ºº% &!
operacionesDeVentas
ºº' :
=
ºº; <
operacionLogica
ºº= L
.
ººL Mv
gObtenerOrdenesConBoletaYFacturaYNotasDeCreditoYDebitoDeVentasInvalidadasYTributablesIncluyendoConceptosººM ¥
(ºº¥ µ

idEmpleadoººµ ø
,ººø ¿
periodoºº¡ »
.ºº» …

FechaDesdeºº… ”
,ºº” ‘
periodoºº’ ‹
.ºº‹ ›

FechaHastaºº› Á
)ººÁ Ë
;ººË È
List
ΩΩ 
<
ΩΩ ,
ReporteVentaDetalladoViewModel
ΩΩ 3
>
ΩΩ3 4,
reporteVentaDetalladoViewModel
ΩΩ5 S
=
ΩΩT U,
ReporteVentaDetalladoViewModel
ΩΩV t
.
ΩΩt u
Convert
ΩΩu |
(
ΩΩ| }"
operacionesDeVentasΩΩ} ê
)ΩΩê ë
;ΩΩë í
var
øø 
	rptviewer
øø 
=
øø 
new
øø  #
ReportViewer
øø$ 0
(
øø0 1
)
øø1 2
;
øø2 3
ReportParameter
¬¬ 
fecha
¬¬  %
=
¬¬& '
new
¬¬( +
ReportParameter
¬¬, ;
(
¬¬; <
$str
¬¬< E
,
¬¬E F
periodo
¬¬G N
.
¬¬N O
anio
¬¬O S
+
¬¬T U
$str
¬¬V Y
+
¬¬Z [
periodo
¬¬\ c
.
¬¬c d
mes
¬¬d g
)
¬¬g h
;
¬¬h i
ReportParameter
√√ 
ruc
√√  #
=
√√$ %
new
√√& )
ReportParameter
√√* 9
(
√√9 :
$str
√√: ?
,
√√? @
sede
√√A E
.
√√E F 
DocumentoIdentidad
√√F X
)
√√X Y
;
√√Y Z
ReportParameter
ƒƒ 
razonSocial
ƒƒ  +
=
ƒƒ, -
new
ƒƒ. 1
ReportParameter
ƒƒ2 A
(
ƒƒA B
$str
ƒƒB O
,
ƒƒO P
sede
ƒƒQ U
.
ƒƒU V
Nombre
ƒƒV \
)
ƒƒ\ ]
;
ƒƒ] ^
string
∆∆ 
path
∆∆ 
=
∆∆ 
$str
∆∆ q
;
∆∆q r
	rptviewer
«« 
.
«« 
LocalReport
«« %
.
««% &

ReportPath
««& 0
=
««1 2
fromRequest
««3 >
?
««? @
requestMapPath
««A O
+
««P Q
path
««R V
:
««W X 
HostingEnvironment
««Y k
.
««k l
MapPath
««l s
(
««s t
path
««t x
)
««x y
;
««y z
	rptviewer
»» 
.
»» 
LocalReport
»» %
.
»»% &
SetParameters
»»& 3
(
»»3 4
new
»»4 7
ReportParameter
»»8 G
[
»»G H
]
»»H I
{
»»J K
fecha
»»L Q
,
»»Q R
ruc
»»S V
,
»»V W
razonSocial
»»X c
}
»»d e
)
»»e f
;
»»f g
ReportDataSource
……  0
"rptdatasourcereporteVentaDetallada
……! C
=
……D E
new
……F I
ReportDataSource
……J Z
(
……Z [
$str
……[ r
,
……r s-
reporteVentaDetalladoViewModel……t í
)……í ì
;……ì î
	rptviewer
ÀÀ 
.
ÀÀ 
ProcessingMode
ÀÀ (
=
ÀÀ) *
ProcessingMode
ÀÀ+ 9
.
ÀÀ9 :
Local
ÀÀ: ?
;
ÀÀ? @
	rptviewer
ÃÃ 
.
ÃÃ 
LocalReport
ÃÃ %
.
ÃÃ% &
DataSources
ÃÃ& 1
.
ÃÃ1 2
Add
ÃÃ2 5
(
ÃÃ5 60
"rptdatasourcereporteVentaDetallada
ÃÃ6 X
)
ÃÃX Y
;
ÃÃY Z
	rptviewer
ÕÕ 
.
ÕÕ !
SizeToReportContent
ÕÕ -
=
ÕÕ. /
true
ÕÕ0 4
;
ÕÕ4 5
	rptviewer
ŒŒ 
.
ŒŒ 
Width
ŒŒ 
=
ŒŒ  !
Unit
ŒŒ" &
.
ŒŒ& '

Percentage
ŒŒ' 1
(
ŒŒ1 2
$num
ŒŒ2 5
)
ŒŒ5 6
;
ŒŒ6 7
	rptviewer
œœ 
.
œœ 
Height
œœ  
=
œœ! "
Unit
œœ# '
.
œœ' (

Percentage
œœ( 2
(
œœ2 3
$num
œœ3 6
)
œœ6 7
;
œœ7 8
return
—— 
	rptviewer
——  
;
——  !
}
““ 
catch
”” 
(
”” 
	Exception
”” 
e
”” 
)
”” 
{
‘‘ 
throw
’’ 
new
’’ !
ControllerException
’’ -
(
’’- .
$str
’’. h
,
’’h i
e
’’j k
)
’’k l
;
’’l m
}
÷÷ 
}
◊◊ 	
public
ŸŸ 
byte
ŸŸ 
[
ŸŸ 
]
ŸŸ 4
&GenerarLibrosElectronicosTXTComprimido
ŸŸ <
(
ŸŸ< =
int
ŸŸ= @

idEmpleado
ŸŸA K
,
ŸŸK L&
EstablecimientoComercial
ŸŸM e
sede
ŸŸf j
,
ŸŸj k
Periodo
ŸŸl s
periodo
ŸŸt {
,
ŸŸ{ |
ListŸŸ} Å
<ŸŸÅ Ç
ItemGenericoŸŸÇ é
>ŸŸé è#
librosSeleccionadosŸŸê £
)ŸŸ£ §
{
⁄⁄ 	
try
€€ 
{
‹‹ 
byte
›› 
[
›› 
]
›› 
	fileBytes
››  
=
››! "
null
››# '
;
››' (
byte
ﬁﬁ 
[
ﬁﬁ 
]
ﬁﬁ 
compressedBytes
ﬁﬁ &
;
ﬁﬁ& '
using
ﬂﬂ 
(
ﬂﬂ 
var
ﬂﬂ 
	outStream
ﬂﬂ $
=
ﬂﬂ% &
new
ﬂﬂ' *
MemoryStream
ﬂﬂ+ 7
(
ﬂﬂ7 8
)
ﬂﬂ8 9
)
ﬂﬂ9 :
{
‡‡ 
using
·· 
(
·· 
var
·· 
archive
·· &
=
··' (
new
··) ,

ZipArchive
··- 7
(
··7 8
	outStream
··8 A
,
··A B
ZipArchiveMode
··C Q
.
··Q R
Create
··R X
,
··X Y
true
··Z ^
)
··^ _
)
··_ `
{
‚‚ 
foreach
„„ 
(
„„  !
var
„„! $
libroSeleccionado
„„% 6
in
„„7 9!
librosSeleccionados
„„: M
)
„„M N
{
‰‰ 
ZipArchiveEntry
ÂÂ +
fileInArchive
ÂÂ, 9
=
ÂÂ: ;
null
ÂÂ< @
;
ÂÂ@ A
if
ÊÊ 
(
ÊÊ  
libroSeleccionado
ÊÊ  1
.
ÊÊ1 2
Id
ÊÊ2 4
==
ÊÊ5 7
MaestroSettings
ÊÊ8 G
.
ÊÊG H
Default
ÊÊH O
.
ÊÊO P<
.IdDetalleMaestroLibroElectronicoVentasIngresos
ÊÊP ~
)
ÊÊ~ 
{
ÁÁ 
var
ËË  #!
libroVentasIngresos
ËË$ 7
=
ËË8 9!
librosSeleccionados
ËË: M
.
ËËM N
Single
ËËN T
(
ËËT U
ls
ËËU W
=>
ËËX Z
ls
ËË[ ]
.
ËË] ^
Id
ËË^ `
==
ËËa c
MaestroSettings
ËËd s
.
ËËs t
Default
ËËt {
.
ËË{ |=
.IdDetalleMaestroLibroElectronicoVentasIngresosËË| ™
)ËË™ ´
;ËË´ ¨
List
ÈÈ  $
<
ÈÈ$ %(
DetalleLibroVentasIngresos
ÈÈ% ?
>
ÈÈ? @
registrosDeVentas
ÈÈA R
=
ÈÈS T&
librosElectronicosLogica
ÈÈU m
.
ÈÈm n7
(ObtenerLibroElectronicoDeVentasEIngresosÈÈn ñ
(ÈÈñ ó
periodoÈÈó û
,ÈÈû ü

idEmpleadoÈÈ† ™
)ÈÈ™ ´
;ÈÈ´ ¨
fileInArchive
ÍÍ  -
=
ÍÍ. /
archive
ÍÍ0 7
.
ÍÍ7 8
CreateEntry
ÍÍ8 C
(
ÍÍC D(
DetalleLibroVentasIngresos
ÍÍD ^
.
ÍÍ^ _
NombreArchivoTXT
ÍÍ_ o
(
ÍÍo p
sede
ÍÍp t
.
ÍÍt u!
DocumentoIdentidadÍÍu á
,ÍÍá à
periodoÍÍâ ê
,ÍÍê ë#
libroVentasIngresosÍÍí •
,ÍÍ• ¶!
registrosDeVentasÍÍß ∏
)ÍÍ∏ π
,ÍÍπ ∫ 
CompressionLevelÍÍª À
.ÍÍÀ Ã
OptimalÍÍÃ ”
)ÍÍ” ‘
;ÍÍ‘ ’
	fileBytes
ÎÎ  )
=
ÎÎ* +
Encoding
ÎÎ, 4
.
ÎÎ4 5
UTF8
ÎÎ5 9
.
ÎÎ9 :
GetBytes
ÎÎ: B
(
ÎÎB C(
DetalleLibroVentasIngresos
ÎÎC ]
.
ÎÎ] ^
ContenidoTXT
ÎÎ^ j
(
ÎÎj k
registrosDeVentas
ÎÎk |
)
ÎÎ| }
)
ÎÎ} ~
;
ÎÎ~ 
}
ÏÏ 
if
ÌÌ 
(
ÌÌ  
libroSeleccionado
ÌÌ  1
.
ÌÌ1 2
Id
ÌÌ2 4
==
ÌÌ5 7
MaestroSettings
ÌÌ8 G
.
ÌÌG H
Default
ÌÌH O
.
ÌÌO P5
'IdDetalleMaestroLibroElectronicoCompras
ÌÌP w
)
ÌÌw x
{
ÓÓ 
var
ÔÔ  #
libroCompras
ÔÔ$ 0
=
ÔÔ1 2!
librosSeleccionados
ÔÔ3 F
.
ÔÔF G
Single
ÔÔG M
(
ÔÔM N
ls
ÔÔN P
=>
ÔÔQ S
ls
ÔÔT V
.
ÔÔV W
Id
ÔÔW Y
==
ÔÔZ \
MaestroSettings
ÔÔ] l
.
ÔÔl m
Default
ÔÔm t
.
ÔÔt u6
'IdDetalleMaestroLibroElectronicoComprasÔÔu ú
)ÔÔú ù
;ÔÔù û
List
  $
<
$ %
LibroCompras
% 1
>
1 2 
registrosDeCompras
3 E
=
F G
new
H K
List
L P
<
P Q
LibroCompras
Q ]
>
] ^
(
^ _
)
_ `
;
` a
fileInArchive
ÒÒ  -
=
ÒÒ. /
archive
ÒÒ0 7
.
ÒÒ7 8
CreateEntry
ÒÒ8 C
(
ÒÒC D
LibroCompras
ÒÒD P
.
ÒÒP Q
NombreArchivoTXT
ÒÒQ a
(
ÒÒa b
sede
ÒÒb f
.
ÒÒf g 
DocumentoIdentidad
ÒÒg y
,
ÒÒy z
periodoÒÒ{ Ç
,ÒÒÇ É
libroComprasÒÒÑ ê
,ÒÒê ë"
registrosDeComprasÒÒí §
)ÒÒ§ •
,ÒÒ• ¶ 
CompressionLevelÒÒß ∑
.ÒÒ∑ ∏
OptimalÒÒ∏ ø
)ÒÒø ¿
;ÒÒ¿ ¡
	fileBytes
ÚÚ  )
=
ÚÚ* +
Encoding
ÚÚ, 4
.
ÚÚ4 5
UTF8
ÚÚ5 9
.
ÚÚ9 :
GetBytes
ÚÚ: B
(
ÚÚB C
LibroCompras
ÚÚC O
.
ÚÚO P
ContenidoTXT
ÚÚP \
(
ÚÚ\ ] 
registrosDeCompras
ÚÚ] o
)
ÚÚo p
)
ÚÚp q
;
ÚÚq r
}
ÛÛ 
if
ÙÙ 
(
ÙÙ  
libroSeleccionado
ÙÙ  1
.
ÙÙ1 2
Id
ÙÙ2 4
==
ÙÙ5 7
MaestroSettings
ÙÙ8 G
.
ÙÙG H
Default
ÙÙH O
.
ÙÙO PD
5IdDetalleMaestroLibroElectronicoComprasNoDomiciliadasÙÙP Ö
)ÙÙÖ Ü
{
ıı 
var
ˆˆ  #(
libroComprasNoDomiciliadas
ˆˆ$ >
=
ˆˆ? @!
librosSeleccionados
ˆˆA T
.
ˆˆT U
Single
ˆˆU [
(
ˆˆ[ \
ls
ˆˆ\ ^
=>
ˆˆ_ a
ls
ˆˆb d
.
ˆˆd e
Id
ˆˆe g
==
ˆˆh j
MaestroSettings
ˆˆk z
.
ˆˆz {
Defaultˆˆ{ Ç
.ˆˆÇ ÉE
5IdDetalleMaestroLibroElectronicoComprasNoDomiciliadasˆˆÉ ∏
)ˆˆ∏ π
;ˆˆπ ∫
List
˜˜  $
<
˜˜$ %(
LibroComprasNoDomiciliadas
˜˜% ?
>
˜˜? @.
 registrosDeComprasNoDomiciliadas
˜˜A a
=
˜˜b c
new
˜˜d g
List
˜˜h l
<
˜˜l m)
LibroComprasNoDomiciliadas˜˜m á
>˜˜á à
(˜˜à â
)˜˜â ä
;˜˜ä ã
fileInArchive
¯¯  -
=
¯¯. /
archive
¯¯0 7
.
¯¯7 8
CreateEntry
¯¯8 C
(
¯¯C D(
LibroComprasNoDomiciliadas
¯¯D ^
.
¯¯^ _
NombreArchivoTXT
¯¯_ o
(
¯¯o p
sede
¯¯p t
.
¯¯t u!
DocumentoIdentidad¯¯u á
,¯¯á à
periodo¯¯â ê
,¯¯ê ë*
libroComprasNoDomiciliadas¯¯í ¨
,¯¯¨ ≠0
 registrosDeComprasNoDomiciliadas¯¯Æ Œ
)¯¯Œ œ
,¯¯œ – 
CompressionLevel¯¯— ·
.¯¯· ‚
Optimal¯¯‚ È
)¯¯È Í
;¯¯Í Î
	fileBytes
˘˘  )
=
˘˘* +
Encoding
˘˘, 4
.
˘˘4 5
UTF8
˘˘5 9
.
˘˘9 :
GetBytes
˘˘: B
(
˘˘B C(
LibroComprasNoDomiciliadas
˘˘C ]
.
˘˘] ^
ContenidoTXT
˘˘^ j
(
˘˘j k/
 registrosDeComprasNoDomiciliadas˘˘k ã
)˘˘ã å
)˘˘å ç
;˘˘ç é
}
˙˙ 
using
˚˚ !
(
˚˚" #
var
˚˚# &
entryStream
˚˚' 2
=
˚˚3 4
fileInArchive
˚˚5 B
.
˚˚B C
Open
˚˚C G
(
˚˚G H
)
˚˚H I
)
˚˚I J
using
¸¸ !
(
¸¸" #
var
¸¸# &"
fileToCompressStream
¸¸' ;
=
¸¸< =
new
¸¸> A
MemoryStream
¸¸B N
(
¸¸N O
	fileBytes
¸¸O X
)
¸¸X Y
)
¸¸Y Z
{
˝˝ "
fileToCompressStream
˛˛  4
.
˛˛4 5
CopyTo
˛˛5 ;
(
˛˛; <
entryStream
˛˛< G
)
˛˛G H
;
˛˛H I"
fileToCompressStream
ˇˇ  4
.
ˇˇ4 5
Close
ˇˇ5 :
(
ˇˇ: ;
)
ˇˇ; <
;
ˇˇ< =
}
ÄÄ 
}
ÅÅ 
}
ÇÇ 
compressedBytes
ÉÉ #
=
ÉÉ$ %
	outStream
ÉÉ& /
.
ÉÉ/ 0
ToArray
ÉÉ0 7
(
ÉÉ7 8
)
ÉÉ8 9
;
ÉÉ9 :
}
ÑÑ 
return
ÖÖ 
compressedBytes
ÖÖ &
;
ÖÖ& '
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
e
áá 
)
áá 
{
àà 
throw
ââ 
new
ââ !
ControllerException
ââ -
(
ââ- .
$str
ââ. ]
,
ââ] ^
e
ââ_ `
)
ââ` a
;
ââa b
}
ää 
}
ãã 	
public
åå 
byte
åå 
[
åå 
]
åå 4
&GenerarLibrosElectronicosCSVComprimido
åå <
(
åå< =
int
åå= @

idEmpleado
ååA K
,
ååK L&
EstablecimientoComercial
ååM e
sede
ååf j
,
ååj k
Periodo
åål s
periodo
ååt {
,
åå{ |
Liståå} Å
<ååÅ Ç
ItemGenericoååÇ é
>ååé è#
librosSeleccionadosååê £
)åå£ §
{
çç 	
try
éé 
{
èè 
byte
êê 
[
êê 
]
êê 
	fileBytes
êê  
=
êê! "
null
êê# '
;
êê' (
byte
ëë 
[
ëë 
]
ëë 
compressedBytes
ëë &
;
ëë& '
using
íí 
(
íí 
var
íí 
	outStream
íí $
=
íí% &
new
íí' *
MemoryStream
íí+ 7
(
íí7 8
)
íí8 9
)
íí9 :
{
ìì 
using
îî 
(
îî 
var
îî 
archive
îî &
=
îî' (
new
îî) ,

ZipArchive
îî- 7
(
îî7 8
	outStream
îî8 A
,
îîA B
ZipArchiveMode
îîC Q
.
îîQ R
Create
îîR X
,
îîX Y
true
îîZ ^
)
îî^ _
)
îî_ `
{
ïï 
foreach
ññ 
(
ññ  !
var
ññ! $
libroSeleccionado
ññ% 6
in
ññ7 9!
librosSeleccionados
ññ: M
)
ññM N
{
óó 
ZipArchiveEntry
òò +
fileInArchive
òò, 9
=
òò: ;
null
òò< @
;
òò@ A
if
ôô 
(
ôô  
libroSeleccionado
ôô  1
.
ôô1 2
Id
ôô2 4
==
ôô5 7
MaestroSettings
ôô8 G
.
ôôG H
Default
ôôH O
.
ôôO P<
.IdDetalleMaestroLibroElectronicoVentasIngresos
ôôP ~
)
ôô~ 
{
öö 
var
õõ  #!
libroVentasIngresos
õõ$ 7
=
õõ8 9!
librosSeleccionados
õõ: M
.
õõM N
Single
õõN T
(
õõT U
ls
õõU W
=>
õõX Z
ls
õõ[ ]
.
õõ] ^
Id
õõ^ `
==
õõa c
MaestroSettings
õõd s
.
õõs t
Default
õõt {
.
õõ{ |=
.IdDetalleMaestroLibroElectronicoVentasIngresosõõ| ™
)õõ™ ´
;õõ´ ¨
List
úú  $
<
úú$ %(
DetalleLibroVentasIngresos
úú% ?
>
úú? @
registrosDeVentas
úúA R
=
úúS T&
librosElectronicosLogica
úúU m
.
úúm n7
(ObtenerLibroElectronicoDeVentasEIngresosúún ñ
(úúñ ó
periodoúúó û
,úúû ü

idEmpleadoúú† ™
)úú™ ´
;úú´ ¨
fileInArchive
ùù  -
=
ùù. /
archive
ùù0 7
.
ùù7 8
CreateEntry
ùù8 C
(
ùùC D(
DetalleLibroVentasIngresos
ùùD ^
.
ùù^ _
NombreArchivoCSV
ùù_ o
(
ùùo p
sede
ùùp t
.
ùùt u!
DocumentoIdentidadùùu á
,ùùá à
periodoùùâ ê
,ùùê ë#
libroVentasIngresosùùí •
,ùù• ¶!
registrosDeVentasùùß ∏
)ùù∏ π
,ùùπ ∫ 
CompressionLevelùùª À
.ùùÀ Ã
OptimalùùÃ ”
)ùù” ‘
;ùù‘ ’
	fileBytes
ûû  )
=
ûû* +
Encoding
ûû, 4
.
ûû4 5
Unicode
ûû5 <
.
ûû< =
GetBytes
ûû= E
(
ûûE F(
DetalleLibroVentasIngresos
ûûF `
.
ûû` a
ContenidoCSV
ûûa m
(
ûûm n
registrosDeVentas
ûûn 
)ûû Ä
)ûûÄ Å
;ûûÅ Ç
}
üü 
if
†† 
(
††  
libroSeleccionado
††  1
.
††1 2
Id
††2 4
==
††5 7
MaestroSettings
††8 G
.
††G H
Default
††H O
.
††O P5
'IdDetalleMaestroLibroElectronicoCompras
††P w
)
††w x
{
°° 
var
¢¢  #
libroCompras
¢¢$ 0
=
¢¢1 2!
librosSeleccionados
¢¢3 F
.
¢¢F G
Single
¢¢G M
(
¢¢M N
ls
¢¢N P
=>
¢¢Q S
ls
¢¢T V
.
¢¢V W
Id
¢¢W Y
==
¢¢Z \
MaestroSettings
¢¢] l
.
¢¢l m
Default
¢¢m t
.
¢¢t u6
'IdDetalleMaestroLibroElectronicoCompras¢¢u ú
)¢¢ú ù
;¢¢ù û
List
££  $
<
££$ %
LibroCompras
££% 1
>
££1 2 
registrosDeCompras
££3 E
=
££F G
new
££H K
List
££L P
<
££P Q
LibroCompras
££Q ]
>
££] ^
(
££^ _
)
££_ `
;
££` a
fileInArchive
§§  -
=
§§. /
archive
§§0 7
.
§§7 8
CreateEntry
§§8 C
(
§§C D
LibroCompras
§§D P
.
§§P Q
NombreArchivoCSV
§§Q a
(
§§a b
sede
§§b f
.
§§f g 
DocumentoIdentidad
§§g y
,
§§y z
periodo§§{ Ç
,§§Ç É
libroCompras§§Ñ ê
,§§ê ë"
registrosDeCompras§§í §
)§§§ •
,§§• ¶ 
CompressionLevel§§ß ∑
.§§∑ ∏
Optimal§§∏ ø
)§§ø ¿
;§§¿ ¡
	fileBytes
••  )
=
••* +
Encoding
••, 4
.
••4 5
Unicode
••5 <
.
••< =
GetBytes
••= E
(
••E F
LibroCompras
••F R
.
••R S
ContenidoCSV
••S _
(
••_ ` 
registrosDeCompras
••` r
)
••r s
)
••s t
;
••t u
}
¶¶ 
if
ßß 
(
ßß  
libroSeleccionado
ßß  1
.
ßß1 2
Id
ßß2 4
==
ßß5 7
MaestroSettings
ßß8 G
.
ßßG H
Default
ßßH O
.
ßßO PD
5IdDetalleMaestroLibroElectronicoComprasNoDomiciliadasßßP Ö
)ßßÖ Ü
{
®® 
var
©©  #(
libroComprasNoDomiciliadas
©©$ >
=
©©? @!
librosSeleccionados
©©A T
.
©©T U
Single
©©U [
(
©©[ \
ls
©©\ ^
=>
©©_ a
ls
©©b d
.
©©d e
Id
©©e g
==
©©h j
MaestroSettings
©©k z
.
©©z {
Default©©{ Ç
.©©Ç ÉE
5IdDetalleMaestroLibroElectronicoComprasNoDomiciliadas©©É ∏
)©©∏ π
;©©π ∫
List
™™  $
<
™™$ %(
LibroComprasNoDomiciliadas
™™% ?
>
™™? @.
 registrosDeComprasNoDomiciliadas
™™A a
=
™™b c
new
™™d g
List
™™h l
<
™™l m)
LibroComprasNoDomiciliadas™™m á
>™™á à
(™™à â
)™™â ä
;™™ä ã
fileInArchive
´´  -
=
´´. /
archive
´´0 7
.
´´7 8
CreateEntry
´´8 C
(
´´C D(
LibroComprasNoDomiciliadas
´´D ^
.
´´^ _
NombreArchivoCSV
´´_ o
(
´´o p
sede
´´p t
.
´´t u!
DocumentoIdentidad´´u á
,´´á à
periodo´´â ê
,´´ê ë*
libroComprasNoDomiciliadas´´í ¨
,´´¨ ≠0
 registrosDeComprasNoDomiciliadas´´Æ Œ
)´´Œ œ
,´´œ – 
CompressionLevel´´— ·
.´´· ‚
Optimal´´‚ È
)´´È Í
;´´Í Î
	fileBytes
¨¨  )
=
¨¨* +
Encoding
¨¨, 4
.
¨¨4 5
Unicode
¨¨5 <
.
¨¨< =
GetBytes
¨¨= E
(
¨¨E F(
LibroComprasNoDomiciliadas
¨¨F `
.
¨¨` a
ContenidoCSV
¨¨a m
(
¨¨m n/
 registrosDeComprasNoDomiciliadas¨¨n é
)¨¨é è
)¨¨è ê
;¨¨ê ë
}
≠≠ 
using
ÆÆ !
(
ÆÆ" #
var
ÆÆ# &
entryStream
ÆÆ' 2
=
ÆÆ3 4
fileInArchive
ÆÆ5 B
.
ÆÆB C
Open
ÆÆC G
(
ÆÆG H
)
ÆÆH I
)
ÆÆI J
using
ØØ !
(
ØØ" #
var
ØØ# &"
fileToCompressStream
ØØ' ;
=
ØØ< =
new
ØØ> A
MemoryStream
ØØB N
(
ØØN O
	fileBytes
ØØO X
)
ØØX Y
)
ØØY Z
{
∞∞ "
fileToCompressStream
±±  4
.
±±4 5
CopyTo
±±5 ;
(
±±; <
entryStream
±±< G
)
±±G H
;
±±H I"
fileToCompressStream
≤≤  4
.
≤≤4 5
Close
≤≤5 :
(
≤≤: ;
)
≤≤; <
;
≤≤< =
}
≥≥ 
}
¥¥ 
}
µµ 
compressedBytes
∂∂ #
=
∂∂$ %
	outStream
∂∂& /
.
∂∂/ 0
ToArray
∂∂0 7
(
∂∂7 8
)
∂∂8 9
;
∂∂9 :
}
∑∑ 
return
∏∏ 
compressedBytes
∏∏ &
;
∏∏& '
}
ππ 
catch
∫∫ 
(
∫∫ 
	Exception
∫∫ 
e
∫∫ 
)
∫∫ 
{
ªª 
throw
ºº 
new
ºº !
ControllerException
ºº -
(
ºº- .
$str
ºº. ]
,
ºº] ^
e
ºº_ `
)
ºº` a
;
ººa b
}
ΩΩ 
}
ææ 	
public
¡¡ 
ReportViewer
¡¡ *
GenerarReporteDeVentaEnExcel
¡¡ 8
(
¡¡8 9
int
¡¡9 <

idEmpleado
¡¡= G
,
¡¡G H&
EstablecimientoComercial
¡¡I a
sede
¡¡b f
,
¡¡f g
Periodo
¡¡h o
periodo
¡¡p w
,
¡¡w x
bool
¡¡y }
fromRequest¡¡~ â
,¡¡â ä
string¡¡ã ë
requestMapPath¡¡í †
)¡¡† °
{
¬¬ 	
try
√√ 
{
ƒƒ 
List
≈≈ 
<
≈≈ !
ReporteVentaCliente
≈≈ (
>
≈≈( )
registrosDeVenta
≈≈* :
=
≈≈; <&
librosElectronicosLogica
≈≈= U
.
≈≈U V%
ObtenerRegistrosDeVenta
≈≈V m
(
≈≈m n
periodo
≈≈n u
,
≈≈u v

idEmpleado≈≈w Å
)≈≈Å Ç
;≈≈Ç É
var
«« 
	rptviewer
«« 
=
«« 
new
««  #
ReportViewer
««$ 0
(
««0 1
)
««1 2
;
««2 3
ReportParameter
…… 
fecha
……  %
=
……& '
new
……( +
ReportParameter
……, ;
(
……; <
$str
……< E
,
……E F
new
……G J
DateTime
……K S
(
……S T
$num
……T U
,
……U V
int
……W Z
.
……Z [
Parse
……[ `
(
……` a
periodo
……a h
.
……h i
mes
……i l
)
……l m
,
……m n
$num
……o p
)
……p q
.
……q r
ToString
……r z
(
……z {
$str……{ Å
,……Å Ç
CultureInfo……É é
.……é è%
CreateSpecificCulture……è §
(……§ •
$str……• ©
)……© ™
)……™ ´
+……¨ ≠
$str……Æ ±
+……≤ ≥
periodo……¥ ª
.……ª º
anio……º ¿
)……¿ ¡
;……¡ ¬
ReportParameter
   
ruc
    #
=
  $ %
new
  & )
ReportParameter
  * 9
(
  9 :
$str
  : ?
,
  ? @
sede
  A E
.
  E F 
DocumentoIdentidad
  F X
)
  X Y
;
  Y Z
ReportParameter
ÀÀ 
razonSocial
ÀÀ  +
=
ÀÀ, -
new
ÀÀ. 1
ReportParameter
ÀÀ2 A
(
ÀÀA B
$str
ÀÀB O
,
ÀÀO P
sede
ÀÀQ U
.
ÀÀU V
Nombre
ÀÀV \
)
ÀÀ\ ]
;
ÀÀ] ^
string
ÕÕ 
path
ÕÕ 
=
ÕÕ 
$str
ÕÕ V
;
ÕÕV W
	rptviewer
ŒŒ 
.
ŒŒ 
LocalReport
ŒŒ %
.
ŒŒ% &

ReportPath
ŒŒ& 0
=
ŒŒ1 2
fromRequest
ŒŒ3 >
?
ŒŒ? @
requestMapPath
ŒŒA O
+
ŒŒP Q
path
ŒŒR V
:
ŒŒW X 
HostingEnvironment
ŒŒY k
.
ŒŒk l
MapPath
ŒŒl s
(
ŒŒs t
path
ŒŒt x
)
ŒŒx y
;
ŒŒy z
	rptviewer
œœ 
.
œœ 
LocalReport
œœ %
.
œœ% &
SetParameters
œœ& 3
(
œœ3 4
new
œœ4 7
ReportParameter
œœ8 G
[
œœG H
]
œœH I
{
œœJ K
fecha
œœL Q
,
œœQ R
ruc
œœS V
,
œœV W
razonSocial
œœX c
}
œœd e
)
œœe f
;
œœf g
ReportDataSource
––  '
rptdatasourcereporteVenta
––! :
=
––; <
new
––= @
ReportDataSource
––A Q
(
––Q R
$str
––R o
,
––o p
registrosDeVenta––q Å
)––Å Ç
;––Ç É
	rptviewer
““ 
.
““ 
ProcessingMode
““ (
=
““) *
ProcessingMode
““+ 9
.
““9 :
Local
““: ?
;
““? @
	rptviewer
”” 
.
”” 
LocalReport
”” %
.
””% &
DataSources
””& 1
.
””1 2
Add
””2 5
(
””5 6'
rptdatasourcereporteVenta
””6 O
)
””O P
;
””P Q
	rptviewer
‘‘ 
.
‘‘ !
SizeToReportContent
‘‘ -
=
‘‘. /
true
‘‘0 4
;
‘‘4 5
	rptviewer
’’ 
.
’’ 
Width
’’ 
=
’’  !
Unit
’’" &
.
’’& '

Percentage
’’' 1
(
’’1 2
$num
’’2 5
)
’’5 6
;
’’6 7
	rptviewer
÷÷ 
.
÷÷ 
Height
÷÷  
=
÷÷! "
Unit
÷÷# '
.
÷÷' (

Percentage
÷÷( 2
(
÷÷2 3
$num
÷÷3 6
)
÷÷6 7
;
÷÷7 8
return
ÿÿ 
	rptviewer
ÿÿ  
;
ÿÿ  !
}
ŸŸ 
catch
€€ 
(
€€ 
	Exception
€€ 
e
€€ 
)
€€ 
{
‹‹ 
throw
›› 
new
›› !
ControllerException
›› -
(
››- .
$str
››. i
,
››i j
e
››k l
)
››l m
;
››m n
}
ﬁﬁ 
}
ﬂﬂ 	
}
‡‡ 
}·· «
lD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Restaurante\RestauranteAtencionController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class )
RestauranteAtencionController .
:/ 0
BaseController1 ?
{ 
private 
readonly 
IAtencion_Logica )
_atencionLogica* 9
;9 :
	protected 
readonly 
IPdfUtil #
_pdfUtil$ ,
;, -
	protected 
readonly 
IBarCodeUtil '
barCodeUtil( 3
;3 4
public   )
RestauranteAtencionController   ,
(  , -
)  - .
:  . /
base  0 4
(  4 5
)  5 6
{!! 	
_atencionLogica"" 
="" 
Dependencia"" )
."") *
Resolve""* 1
<""1 2
IAtencion_Logica""2 B
>""B C
(""C D
)""D E
;""E F
_pdfUtil## 
=## 
Dependencia## "
.##" #
Resolve### *
<##* +
IPdfUtil##+ 3
>##3 4
(##4 5
)##5 6
;##6 7
}$$ 	
SesionRestaurante%% 
SesionRestaurante%% +
{&& 	
get'' 
{(( 
return)) 
()) 
SesionRestaurante)) )
)))) *
this))* .
.)). /
Session))/ 6
[))6 7
$str))7 J
]))J K
;))K L
}** 
set++ 
{,, 
this-- 
.-- 
Session-- 
[-- 
$str-- 0
]--0 1
=--2 3
value--4 9
;--9 :
}.. 
}// 	
public22 

JsonResult22 
CambiarMesa22 %
(22% &
AtencionRestaurante22& 9
atencion22: B
,22B C
int22D G
idNuevaMesa22H S
)22S T
{33 	
try44 
{55 
OperationResult66 
result66  &
=66' (
_atencionLogica66) 8
.668 9
CambiarDeMesa669 F
(66F G
atencion66G O
,66O P
idNuevaMesa66Q \
,66\ ]
SesionRestaurante66^ o
)66o p
;66p q
return77 
Json77 
(77 
new77 
{77  !
result77" (
.77( )
code_result77) 4
,774 5
data776 :
=77; <
result77= C
.77C D
information77D O
,77O P
result_description77Q c
=77d e
result77f l
.77l m
title77m r
,77r s
result77t z
.77z {
objeto	77{ Å
}
77Ç É
)
77É Ñ
;
77Ñ Ö
}88 
catch99 
(99 
	Exception99 
e99 
)99 
{:: 
return;; 
new;;  
JsonHttpStatusResult;; /
(;;/ 0
Util;;0 4
.;;4 5
	ErrorJson;;5 >
(;;> ?
e;;? @
);;@ A
,;;A B
HttpStatusCode;;C Q
.;;Q R
InternalServerError;;R e
);;e f
;;;f g
}<< 
}>> 	
}@@ 
}AA ù€
lD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Restaurante\RestauranteReportesController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class )
RestauranteReportesController .
:/ 0
BaseController1 ?
{ 
private 
readonly 
IRestauranteLogica +
restauranteLogica, =
;= >
	protected 
readonly 
IActorNegocioLogica .
actorNegocioLogica/ A
;A B
	protected 
readonly #
IEstablecimiento_Logica 2!
establecimientoLogica3 H
;H I
public )
RestauranteReportesController ,
(, -
)- .
:. /
base/ 3
(3 4
)4 5
{ 	
actorNegocioLogica 
=  
Dependencia! ,
., -
Resolve- 4
<4 5
IActorNegocioLogica5 H
>H I
(I J
)J K
;K L
restauranteLogica 
= 
Dependencia  +
.+ ,
Resolve, 3
<3 4
IRestauranteLogica4 F
>F G
(G H
)H I
;I J!
establecimientoLogica !
=" #
Dependencia$ /
./ 0
Resolve0 7
<7 8#
IEstablecimiento_Logica8 O
>O P
(P Q
)Q R
;R S
}   	
public"" 
async"" 
Task"" 
<"" 
ActionResult"" &
>""& '
Reportes""( 0
(""0 1
)""1 2
{## 	
SesionRestaurante$$ 
=$$ 
await$$  %
restauranteLogica$$& 7
.$$7 8
ObtenerSesion$$8 E
($$E F
ProfileData$$F Q
($$Q R
)$$R S
)$$S T
;$$T U
ViewBag%% 
.%% 
fechaHoraInicio%% #
=%%$ %
DateTime%%& .
.%%. /
Now%%/ 2
.%%2 3
AddDays%%3 :
(%%: ;
-%%; <
$num%%< >
)%%> ?
.%%? @
Date%%@ D
;%%D E
ViewBag&& 
.&& 
fechaHoraFin&&  
=&&! "
DateTime&&# +
.&&+ ,
Now&&, /
.&&/ 0
Date&&0 4
.&&4 5
AddDays&&5 <
(&&< =
$num&&= >
)&&> ?
.&&? @
AddTicks&&@ H
(&&H I
-&&I J
$num&&J K
)&&K L
;&&L M
ViewBag'' 
.'' 

parametros'' 
=''  ,
 ConfiguracionRestauranteReportes''! A
.''A B
Default''B I
;''I J
ViewBag(( 
.(( 
establecimientos(( $
=((% &!
establecimientoLogica((' <
.((< =H
<ObtenerEstablecimientosComercialesVigentesComoItemsGenericos((= y
(((y z
)((z {
;(({ |
return)) 
View)) 
()) 
$str)) =
)))= >
;))> ?
}** 	
SesionRestaurante++ 
SesionRestaurante++ +
{,, 	
get-- 
{.. 
return// 
(// 
SesionRestaurante// )
)//) *
this//* .
.//. /
Session/// 6
[//6 7
$str//7 J
]//J K
;//K L
}00 
set11 
{22 
this33 
.33 
Session33 
[33 
$str33 0
]330 1
=332 3
value334 9
;339 :
}44 
}55 	
public66 
ActionResult66 !
ReporteOrdenesPorMozo66 1
(661 2
DateTime662 :
desde66; @
,66@ A
DateTime66B J
hasta66K P
)66P Q
{77 	
var88 
restaurante88 
=88 
new88 !
ItemGenerico88" .
{88/ 0
Id881 3
=884 5
SesionRestaurante886 G
.88G H
SesionDeUsuario88H W
.88W X*
IdCentroDeAtencionSeleccionado88X v
,88v w
Nombre88x ~
=	88 Ä
SesionRestaurante
88Å í
.
88í ì
SesionDeUsuario
88ì ¢
.
88¢ £0
"NombreCentroDeAtencionSeleccionado
88£ ≈
}
88∆ «
;
88« »
var99 
	rptviewer99 
=99 *
GenerarReporteDeOrdenesPorMozo99 :
(99: ;
restaurante99; F
,99F G
desde99H M
,99M N
hasta99O T
,99T U
true99V Z
)99Z [
;99[ \
ViewBag:: 
.:: 
ReportViewer::  
=::! "
	rptviewer::# ,
;::, -
return;; 
View;; 
(;; 
$str;; -
);;- .
;;;. /
}<< 	
public== 
ReportViewer== *
GenerarReporteDeOrdenesPorMozo== :
(==: ;
ItemGenerico==; G
establecimiento==H W
,==W X
DateTime==Y a
desde==b g
,==g h
DateTime==i q
hasta==r w
,==w x
bool==y }
fromRequest	==~ â
)
==â ä
{>> 	
List?? 
<?? !
ResumenOrden_Consulta?? &
>??& '
detalles??( 0
=??1 2
restauranteLogica??3 D
.??D E,
 ObtenerReporteDeResumenDeOrdenes??E e
(??e f
desde??f k
,??k l
hasta??m r
)??r s
;??s t
ReportParameter@@ 

nombreSede@@ &
=@@' (
new@@) ,
ReportParameter@@- <
(@@< =
$str@@= I
,@@I J
ObtenerSede@@K V
(@@V W
)@@W X
.@@X Y
Nombre@@Y _
)@@_ `
;@@` a
ReportParameterAA  
nombreCentroAtencionAA 0
=AA1 2
newAA3 6
ReportParameterAA7 F
(AAF G
$strAAG ]
,AA] ^
establecimientoAA_ n
.AAn o
NombreAAo u
)AAu v
;AAv w
ReportParameterBB 
inicioReporteBB )
=BB* +
newBB, /
ReportParameterBB0 ?
(BB? @
$strBB@ G
,BBG H
desdeBBI N
.BBN O
ToStringBBO W
(BBW X
)BBX Y
)BBY Z
;BBZ [
ReportParameterCC 
finalReporteCC (
=CC) *
newCC+ .
ReportParameterCC/ >
(CC> ?
$strCC? F
,CCF G
hastaCCH M
.CCM N
ToStringCCN V
(CCV W
)CCW X
)CCX Y
;CCY Z
varEE 
sedeEE 
=EE 
ObtenerSedeEE "
(EE" #
)EE# $
;EE$ %
stringFF 

logoStringFF 
=FF 
ConvertFF  '
.FF' (
ToBase64StringFF( 6
(FF6 7
sedeFF7 ;
.FF; <
LogoFF< @
,FF@ A
$numFFB C
,FFC D
sedeFFE I
.FFI J
LogoFFJ N
.FFN O
LengthFFO U
)FFU V
;FFV W
ReportParameterGG 
logoSedeGG $
=GG% &
newGG' *
ReportParameterGG+ :
(GG: ;
$strGG; E
,GGE F

logoStringGGG Q
)GGQ R
;GGR S
ReportParameterII 
empleadoSedeII (
=II) *
newII+ .
ReportParameterII/ >
(II> ?
$strII? H
,IIH I
ProfileDataIIJ U
(IIU V
)IIV W
.IIW X
EmpleadoIIX `
.II` a
NombresYApellidosIIa r
)IIr s
;IIs t
DateTimeKK 
fechaActualKK  
=KK! "
DateTimeUtilKK" .
.KK. /
FechaActualKK/ :
(KK: ;
)KK; <
;KK< =
ReportParameterLL 
fechaActualSistemaLL .
=LL/ 0
newLL1 4
ReportParameterLL5 D
(LLD E
$strLLE R
,LLR S
fechaActualLLT _
.LL_ `
ToStringLL` h
(LLh i
)LLi j
)LLj k
;LLk l
varMM 
	rptviewerMM 
=MM 
newMM 
ReportViewerMM  ,
(MM, -
)MM- .
{MM/ 0
ProcessingModeMM1 ?
=MM@ A
ProcessingModeMMB P
.MMP Q
LocalMMQ V
,MMV W
SizeToReportContentMMX k
=MMl m
trueMMn r
,MMr s
WidthMMt y
=MMz {
Unit	MM| Ä
.
MMÄ Å

Percentage
MMÅ ã
(
MMã å
$num
MMå è
)
MMè ê
,
MMê ë
Height
MMí ò
=
MMô ö
Unit
MMõ ü
.
MMü †

Percentage
MM† ™
(
MM™ ´
$num
MM´ Æ
)
MMÆ Ø
}
MM∞ ±
;
MM± ≤
stringNN 
pathNN 
=NN 
$strNN M
;NNM N
	rptviewerOO 
.OO 
LocalReportOO !
.OO! "

ReportPathOO" ,
=OO- .
fromRequestOO/ :
?OO; <
RequestOO= D
.OOD E
MapPathOOE L
(OOL M
RequestOOM T
.OOT U
ApplicationPathOOU d
)OOd e
+OOf g
pathOOh l
:OOm n
HostingEnvironment	OOo Å
.
OOÅ Ç
MapPath
OOÇ â
(
OOâ ä
path
OOä é
)
OOé è
;
OOè ê
	rptviewerPP 
.PP 
LocalReportPP !
.PP! "
SetParametersPP" /
(PP/ 0
newPP0 3
ReportParameterPP4 C
[PPC D
]PPD E
{PPF G

nombreSedePPH R
,PPR S 
nombreCentroAtencionPPT h
,PPh i
inicioReportePPj w
,PPw x
finalReporte	PPy Ö
,
PPÖ Ü
logoSede
PPá è
,
PPè ê
empleadoSede
PPë ù
,
PPù û 
fechaActualSistema
PPü ±
}
PP≤ ≥
)
PP≥ ¥
;
PP¥ µ
ReportDataSourceQQ 
rptdatasourceQQ *
=QQ+ ,
newQQ- 0
ReportDataSourceQQ1 A
(QQA B
$strQQB `
,QQ` a
detallesQQb j
)QQj k
;QQk l
	rptviewerRR 
.RR 
LocalReportRR !
.RR! "
DataSourcesRR" -
.RR- .
AddRR. 1
(RR1 2
rptdatasourceRR2 ?
)RR? @
;RR@ A
returnSS 
	rptviewerSS 
;SS 
}TT 	
publicVV 
ActionResultVV #
ReporteOrdenesDetalladoVV 3
(VV3 4
DateTimeVV4 <
desdeVV= B
,VVB C
DateTimeVVD L
hastaVVM R
)VVR S
{WW 	
varXX 
restauranteXX 
=XX 
newXX !
ItemGenericoXX" .
{XX/ 0
IdXX1 3
=XX4 5
SesionRestauranteXX6 G
.XXG H
SesionDeUsuarioXXH W
.XXW X*
IdCentroDeAtencionSeleccionadoXXX v
,XXv w
NombreXXx ~
=	XX Ä
SesionRestaurante
XXÅ í
.
XXí ì
SesionDeUsuario
XXì ¢
.
XX¢ £0
"NombreCentroDeAtencionSeleccionado
XX£ ≈
}
XX∆ «
;
XX« »
varYY 
	rptviewerYY 
=YY *
GenerarReporteOrdenesDetalladoYY :
(YY: ;
restauranteYY; F
,YYF G
desdeYYH M
,YYM N
hastaYYO T
,YYT U
trueYYV Z
)YYZ [
;YY[ \
ViewBagZZ 
.ZZ 
ReportViewerZZ  
=ZZ! "
	rptviewerZZ# ,
;ZZ, -
return[[ 
View[[ 
([[ 
$str[[ -
)[[- .
;[[. /
}\\ 	
public]] 
ReportViewer]] *
GenerarReporteOrdenesDetallado]] :
(]]: ;
ItemGenerico]]; G
restaurante]]H S
,]]S T
DateTime]]U ]
desde]]^ c
,]]c d
DateTime]]e m
hasta]]n s
,]]s t
bool]]u y
fromRequest	]]z Ö
)
]]Ö Ü
{^^ 	
List__ 
<__ !
DetalleOrden_Consulta__ &
>__& '
detalles__( 0
=__1 2
restauranteLogica__3 D
.__D E4
(ObtenerReporteDetallesAtendidosEnOrdenes__E m
(__m n
desde__n s
,__s t
hasta__u z
)__z {
;__{ |
ReportParameter`` 

nombreSede`` &
=``' (
new``) ,
ReportParameter``- <
(``< =
$str``= I
,``I J
ObtenerSede``K V
(``V W
)``W X
.``X Y
Nombre``Y _
)``_ `
;``` a
ReportParameteraa  
nombreCentroAtencionaa 0
=aa1 2
newaa3 6
ReportParameteraa7 F
(aaF G
$straaG ]
,aa] ^
restauranteaa_ j
.aaj k
Nombreaak q
)aaq r
;aar s
ReportParameterbb 
inicioReportebb )
=bb* +
newbb, /
ReportParameterbb0 ?
(bb? @
$strbb@ G
,bbG H
desdebbI N
.bbN O
ToStringbbO W
(bbW X
)bbX Y
)bbY Z
;bbZ [
ReportParametercc 
finalReportecc (
=cc) *
newcc+ .
ReportParametercc/ >
(cc> ?
$strcc? F
,ccF G
hastaccH M
.ccM N
ToStringccN V
(ccV W
)ccW X
)ccX Y
;ccY Z
varee 
sedeee 
=ee 
ObtenerSedeee "
(ee" #
)ee# $
;ee$ %
stringff 

logoStringff 
=ff 
Convertff  '
.ff' (
ToBase64Stringff( 6
(ff6 7
sedeff7 ;
.ff; <
Logoff< @
,ff@ A
$numffB C
,ffC D
sedeffE I
.ffI J
LogoffJ N
.ffN O
LengthffO U
)ffU V
;ffV W
ReportParametergg 
logoSedegg $
=gg% &
newgg' *
ReportParametergg+ :
(gg: ;
$strgg; E
,ggE F

logoStringggG Q
)ggQ R
;ggR S
ReportParameterii 
empleadoSedeii (
=ii) *
newii+ .
ReportParameterii/ >
(ii> ?
$strii? H
,iiH I
ProfileDataiiJ U
(iiU V
)iiV W
.iiW X
EmpleadoiiX `
.ii` a
NombresYApellidosiia r
)iir s
;iis t
DateTimekk 
fechaActualkk  
=kk! "
DateTimeUtilkk" .
.kk. /
FechaActualkk/ :
(kk: ;
)kk; <
;kk< =
ReportParameterll 
fechaActualSistemall .
=ll/ 0
newll1 4
ReportParameterll5 D
(llD E
$strllE R
,llR S
fechaActualllT _
.ll_ `
ToStringll` h
(llh i
)lli j
)llj k
;llk l
varnn 
	rptviewernn 
=nn 
newnn 
ReportViewernn  ,
(nn, -
)nn- .
{nn/ 0
ProcessingModenn1 ?
=nn@ A
ProcessingModennB P
.nnP Q
LocalnnQ V
,nnV W
SizeToReportContentnnX k
=nnl m
truennn r
,nnr s
Widthnnt y
=nnz {
Unit	nn| Ä
.
nnÄ Å

Percentage
nnÅ ã
(
nnã å
$num
nnå è
)
nnè ê
,
nnê ë
Height
nní ò
=
nnô ö
Unit
nnõ ü
.
nnü †

Percentage
nn† ™
(
nn™ ´
$num
nn´ Æ
)
nnÆ Ø
}
nn∞ ±
;
nn± ≤
stringoo 
pathoo 
=oo 
$stroo P
;ooP Q
	rptviewerpp 
.pp 
LocalReportpp !
.pp! "

ReportPathpp" ,
=pp- .
fromRequestpp/ :
?pp; <
Requestpp= D
.ppD E
MapPathppE L
(ppL M
RequestppM T
.ppT U
ApplicationPathppU d
)ppd e
+ppf g
pathpph l
:ppm n
HostingEnvironment	ppo Å
.
ppÅ Ç
MapPath
ppÇ â
(
ppâ ä
path
ppä é
)
ppé è
;
ppè ê
	rptviewerqq 
.qq 
LocalReportqq !
.qq! "
SetParametersqq" /
(qq/ 0
newqq0 3
ReportParameterqq4 C
[qqC D
]qqD E
{qqF G

nombreSedeqqH R
,qqR S 
nombreCentroAtencionqqT h
,qqh i
inicioReporteqqj w
,qqw x
finalReporte	qqy Ö
,
qqÖ Ü
logoSede
qqá è
,
qqè ê
empleadoSede
qqë ù
,
qqù û 
fechaActualSistema
qqü ±
}
qq≤ ≥
)
qq≥ ¥
;
qq¥ µ
ReportDataSourcerr 
rptdatasourcerr *
=rr+ ,
newrr- 0
ReportDataSourcerr1 A
(rrA B
$strrrB a
,rra b
detallesrrc k
)rrk l
;rrl m
	rptviewerss 
.ss 
LocalReportss !
.ss! "
DataSourcesss" -
.ss- .
Addss. 1
(ss1 2
rptdatasourcess2 ?
)ss? @
;ss@ A
returntt 
	rptviewertt 
;tt 
}uu 	
publicxx 
ActionResultxx (
ReporteDevolucionesEnOrdenesxx 8
(xx8 9
DateTimexx9 A
desdexxB G
,xxG H
DateTimexxI Q
hastaxxR W
)xxW X
{yy 	
varzz 
restaurantezz 
=zz 
newzz !
ItemGenericozz" .
{zz/ 0
Idzz1 3
=zz4 5
SesionRestaurantezz6 G
.zzG H
SesionDeUsuariozzH W
.zzW X*
IdCentroDeAtencionSeleccionadozzX v
,zzv w
Nombrezzx ~
=	zz Ä
SesionRestaurante
zzÅ í
.
zzí ì
SesionDeUsuario
zzì ¢
.
zz¢ £0
"NombreCentroDeAtencionSeleccionado
zz£ ≈
}
zz∆ «
;
zz« »
var{{ 
	rptviewer{{ 
={{ /
#GenerarReporteDevolucionesEnOrdenes{{ ?
({{? @
restaurante{{@ K
,{{K L
desde{{M R
,{{R S
hasta{{T Y
,{{Y Z
true{{[ _
){{_ `
;{{` a
ViewBag|| 
.|| 
ReportViewer||  
=||! "
	rptviewer||# ,
;||, -
return}} 
View}} 
(}} 
$str}} -
)}}- .
;}}. /
}~~ 	
public 
ReportViewer /
#GenerarReporteDevolucionesEnOrdenes ?
(? @
ItemGenerico@ L
restauranteM X
,X Y
DateTimeZ b
desdec h
,h i
DateTimej r
hastas x
,x y
boolz ~
fromRequest	 ä
)
ä ã
{
ÄÄ 	
List
ÅÅ 
<
ÅÅ #
DetalleOrden_Consulta
ÅÅ &
>
ÅÅ& '
detalles
ÅÅ( 0
=
ÅÅ1 2
restauranteLogica
ÅÅ3 D
.
ÅÅD E6
(ObtenerReporteDetallesDevueltosEnOrdenes
ÅÅE m
(
ÅÅm n
desde
ÅÅn s
,
ÅÅs t
hasta
ÅÅu z
)
ÅÅz {
;
ÅÅ{ |
ReportParameter
ÇÇ 

nombreSede
ÇÇ &
=
ÇÇ' (
new
ÇÇ) ,
ReportParameter
ÇÇ- <
(
ÇÇ< =
$str
ÇÇ= I
,
ÇÇI J
ObtenerSede
ÇÇK V
(
ÇÇV W
)
ÇÇW X
.
ÇÇX Y
Nombre
ÇÇY _
)
ÇÇ_ `
;
ÇÇ` a
ReportParameter
ÉÉ "
nombreCentroAtencion
ÉÉ 0
=
ÉÉ1 2
new
ÉÉ3 6
ReportParameter
ÉÉ7 F
(
ÉÉF G
$str
ÉÉG ]
,
ÉÉ] ^
restaurante
ÉÉ_ j
.
ÉÉj k
Nombre
ÉÉk q
)
ÉÉq r
;
ÉÉr s
ReportParameter
ÑÑ 
inicioReporte
ÑÑ )
=
ÑÑ* +
new
ÑÑ, /
ReportParameter
ÑÑ0 ?
(
ÑÑ? @
$str
ÑÑ@ G
,
ÑÑG H
desde
ÑÑI N
.
ÑÑN O
ToString
ÑÑO W
(
ÑÑW X
)
ÑÑX Y
)
ÑÑY Z
;
ÑÑZ [
ReportParameter
ÖÖ 
finalReporte
ÖÖ (
=
ÖÖ) *
new
ÖÖ+ .
ReportParameter
ÖÖ/ >
(
ÖÖ> ?
$str
ÖÖ? F
,
ÖÖF G
hasta
ÖÖH M
.
ÖÖM N
ToString
ÖÖN V
(
ÖÖV W
)
ÖÖW X
)
ÖÖX Y
;
ÖÖY Z
var
áá 
sede
áá 
=
áá 
ObtenerSede
áá "
(
áá" #
)
áá# $
;
áá$ %
string
àà 

logoString
àà 
=
àà 
Convert
àà  '
.
àà' (
ToBase64String
àà( 6
(
àà6 7
sede
àà7 ;
.
àà; <
Logo
àà< @
,
àà@ A
$num
ààB C
,
ààC D
sede
ààE I
.
ààI J
Logo
ààJ N
.
ààN O
Length
ààO U
)
ààU V
;
ààV W
ReportParameter
ââ 
logoSede
ââ $
=
ââ% &
new
ââ' *
ReportParameter
ââ+ :
(
ââ: ;
$str
ââ; E
,
ââE F

logoString
ââG Q
)
ââQ R
;
ââR S
ReportParameter
ãã 
empleadoSede
ãã (
=
ãã) *
new
ãã+ .
ReportParameter
ãã/ >
(
ãã> ?
$str
ãã? H
,
ããH I
ProfileData
ããJ U
(
ããU V
)
ããV W
.
ããW X
Empleado
ããX `
.
ãã` a
NombresYApellidos
ããa r
)
ããr s
;
ããs t
DateTime
çç 
fechaActual
çç  
=
çç! "
DateTimeUtil
çç" .
.
çç. /
FechaActual
çç/ :
(
çç: ;
)
çç; <
;
çç< =
ReportParameter
éé  
fechaActualSistema
éé .
=
éé/ 0
new
éé1 4
ReportParameter
éé5 D
(
ééD E
$str
ééE R
,
ééR S
fechaActual
ééT _
.
éé_ `
ToString
éé` h
(
ééh i
)
ééi j
)
ééj k
;
éék l
var
êê 
	rptviewer
êê 
=
êê 
new
êê 
ReportViewer
êê  ,
(
êê, -
)
êê- .
{
êê/ 0
ProcessingMode
êê1 ?
=
êê@ A
ProcessingMode
êêB P
.
êêP Q
Local
êêQ V
,
êêV W!
SizeToReportContent
êêX k
=
êêl m
true
êên r
,
êêr s
Width
êêt y
=
êêz {
Unitêê| Ä
.êêÄ Å

PercentageêêÅ ã
(êêã å
$numêêå è
)êêè ê
,êêê ë
Heightêêí ò
=êêô ö
Unitêêõ ü
.êêü †

Percentageêê† ™
(êê™ ´
$numêê´ Æ
)êêÆ Ø
}êê∞ ±
;êê± ≤
string
ëë 
path
ëë 
=
ëë 
$str
ëë T
;
ëëT U
	rptviewer
íí 
.
íí 
LocalReport
íí !
.
íí! "

ReportPath
íí" ,
=
íí- .
fromRequest
íí/ :
?
íí; <
Request
íí= D
.
ííD E
MapPath
ííE L
(
ííL M
Request
ííM T
.
ííT U
ApplicationPath
ííU d
)
ííd e
+
ííf g
path
ííh l
:
íím n!
HostingEnvironmentíío Å
.ííÅ Ç
MapPathííÇ â
(ííâ ä
pathííä é
)ííé è
;ííè ê
	rptviewer
ìì 
.
ìì 
LocalReport
ìì !
.
ìì! "
SetParameters
ìì" /
(
ìì/ 0
new
ìì0 3
ReportParameter
ìì4 C
[
ììC D
]
ììD E
{
ììF G

nombreSede
ììH R
,
ììR S"
nombreCentroAtencion
ììT h
,
ììh i
inicioReporte
ììj w
,
ììw x
finalReporteììy Ö
,ììÖ Ü
logoSedeììá è
,ììè ê
empleadoSedeììë ù
,ììù û"
fechaActualSistemaììü ±
}ìì≤ ≥
)ìì≥ ¥
;ìì¥ µ
ReportDataSource
îî 
rptdatasource
îî *
=
îî+ ,
new
îî- 0
ReportDataSource
îî1 A
(
îîA B
$str
îîB S
,
îîS T
detalles
îîU ]
)
îî] ^
;
îî^ _
	rptviewer
ïï 
.
ïï 
LocalReport
ïï !
.
ïï! "
DataSources
ïï" -
.
ïï- .
Add
ïï. 1
(
ïï1 2
rptdatasource
ïï2 ?
)
ïï? @
;
ïï@ A
return
ññ 
	rptviewer
ññ 
;
ññ 
}
óó 	
public
òò 
ActionResult
òò )
ReporteDeOrdenesPorConcepto
òò 7
(
òò7 8
DateTime
òò8 @
desde
òòA F
,
òòF G
DateTime
òòH P
hasta
òòQ V
)
òòV W
{
ôô 	
var
öö 
restaurante
öö 
=
öö 
new
öö !
ItemGenerico
öö" .
{
öö/ 0
Id
öö1 3
=
öö4 5
SesionRestaurante
öö6 G
.
ööG H
SesionDeUsuario
ööH W
.
ööW X,
IdCentroDeAtencionSeleccionado
ööX v
,
ööv w
Nombre
ööx ~
=öö Ä!
SesionRestauranteööÅ í
.ööí ì
SesionDeUsuarioööì ¢
.öö¢ £2
"NombreCentroDeAtencionSeleccionadoöö£ ≈
}öö∆ «
;öö« »
var
õõ 
	rptviewer
õõ 
=
õõ 0
"GenerarReporteDeOrdenesPorConcepto
õõ >
(
õõ> ?
restaurante
õõ? J
,
õõJ K
desde
õõL Q
,
õõQ R
hasta
õõS X
,
õõX Y
true
õõZ ^
)
õõ^ _
;
õõ_ `
ViewBag
úú 
.
úú 
ReportViewer
úú  
=
úú! "
	rptviewer
úú# ,
;
úú, -
return
ùù 
View
ùù 
(
ùù 
$str
ùù -
)
ùù- .
;
ùù. /
}
ûû 	
public
üü 
ReportViewer
üü 0
"GenerarReporteDeOrdenesPorConcepto
üü >
(
üü> ?
ItemGenerico
üü? K
restaurante
üüL W
,
üüW X
DateTime
üüY a
desde
üüb g
,
üüg h
DateTime
üüi q
hasta
üür w
,
üüw x
bool
üüy }
fromRequestüü~ â
)üüâ ä
{
†† 	
List
°° 
<
°° &
ItemRestaurante_Consulta
°° )
>
°°) *
detalles
°°+ 3
=
°°4 5
restauranteLogica
°°6 G
.
°°G H0
"ObtenerReporteDeItemsDeRestaurante
°°H j
(
°°j k
desde
°°k p
,
°°p q
hasta
°°r w
)
°°w x
;
°°x y
ReportParameter
¢¢ 

nombreSede
¢¢ &
=
¢¢' (
new
¢¢) ,
ReportParameter
¢¢- <
(
¢¢< =
$str
¢¢= I
,
¢¢I J
ObtenerSede
¢¢K V
(
¢¢V W
)
¢¢W X
.
¢¢X Y
Nombre
¢¢Y _
)
¢¢_ `
;
¢¢` a
ReportParameter
££ "
nombreCentroAtencion
££ 0
=
££1 2
new
££3 6
ReportParameter
££7 F
(
££F G
$str
££G ]
,
££] ^
restaurante
££_ j
.
££j k
Nombre
££k q
)
££q r
;
££r s
ReportParameter
§§ 
inicioReporte
§§ )
=
§§* +
new
§§, /
ReportParameter
§§0 ?
(
§§? @
$str
§§@ G
,
§§G H
desde
§§I N
.
§§N O
ToString
§§O W
(
§§W X
)
§§X Y
)
§§Y Z
;
§§Z [
ReportParameter
•• 
finalReporte
•• (
=
••) *
new
••+ .
ReportParameter
••/ >
(
••> ?
$str
••? F
,
••F G
hasta
••H M
.
••M N
ToString
••N V
(
••V W
)
••W X
)
••X Y
;
••Y Z
var
ßß 
sede
ßß 
=
ßß 
ObtenerSede
ßß "
(
ßß" #
)
ßß# $
;
ßß$ %
string
®® 

logoString
®® 
=
®® 
Convert
®®  '
.
®®' (
ToBase64String
®®( 6
(
®®6 7
sede
®®7 ;
.
®®; <
Logo
®®< @
,
®®@ A
$num
®®B C
,
®®C D
sede
®®E I
.
®®I J
Logo
®®J N
.
®®N O
Length
®®O U
)
®®U V
;
®®V W
ReportParameter
©© 
logoSede
©© $
=
©©% &
new
©©' *
ReportParameter
©©+ :
(
©©: ;
$str
©©; E
,
©©E F

logoString
©©G Q
)
©©Q R
;
©©R S
ReportParameter
´´ 
empleadoSede
´´ (
=
´´) *
new
´´+ .
ReportParameter
´´/ >
(
´´> ?
$str
´´? H
,
´´H I
ProfileData
´´J U
(
´´U V
)
´´V W
.
´´W X
Empleado
´´X `
.
´´` a
NombresYApellidos
´´a r
)
´´r s
;
´´s t
DateTime
≠≠ 
fechaActual
≠≠  
=
≠≠! "
DateTimeUtil
≠≠" .
.
≠≠. /
FechaActual
≠≠/ :
(
≠≠: ;
)
≠≠; <
;
≠≠< =
ReportParameter
ÆÆ  
fechaActualSistema
ÆÆ .
=
ÆÆ/ 0
new
ÆÆ1 4
ReportParameter
ÆÆ5 D
(
ÆÆD E
$str
ÆÆE R
,
ÆÆR S
fechaActual
ÆÆT _
.
ÆÆ_ `
ToString
ÆÆ` h
(
ÆÆh i
)
ÆÆi j
)
ÆÆj k
;
ÆÆk l
var
ØØ 
	rptviewer
ØØ 
=
ØØ 
new
ØØ 
ReportViewer
ØØ  ,
(
ØØ, -
)
ØØ- .
{
ØØ/ 0
ProcessingMode
ØØ1 ?
=
ØØ@ A
ProcessingMode
ØØB P
.
ØØP Q
Local
ØØQ V
,
ØØV W!
SizeToReportContent
ØØX k
=
ØØl m
true
ØØn r
,
ØØr s
Width
ØØt y
=
ØØz {
UnitØØ| Ä
.ØØÄ Å

PercentageØØÅ ã
(ØØã å
$numØØå è
)ØØè ê
,ØØê ë
HeightØØí ò
=ØØô ö
UnitØØõ ü
.ØØü †

PercentageØØ† ™
(ØØ™ ´
$numØØ´ Æ
)ØØÆ Ø
}ØØ∞ ±
;ØØ± ≤
string
∞∞ 
path
∞∞ 
=
∞∞ 
$str
∞∞ Q
;
∞∞Q R
	rptviewer
±± 
.
±± 
LocalReport
±± !
.
±±! "

ReportPath
±±" ,
=
±±- .
fromRequest
±±/ :
?
±±; <
Request
±±= D
.
±±D E
MapPath
±±E L
(
±±L M
Request
±±M T
.
±±T U
ApplicationPath
±±U d
)
±±d e
+
±±f g
path
±±h l
:
±±m n!
HostingEnvironment±±o Å
.±±Å Ç
MapPath±±Ç â
(±±â ä
path±±ä é
)±±é è
;±±è ê
	rptviewer
≤≤ 
.
≤≤ 
LocalReport
≤≤ !
.
≤≤! "
SetParameters
≤≤" /
(
≤≤/ 0
new
≤≤0 3
ReportParameter
≤≤4 C
[
≤≤C D
]
≤≤D E
{
≤≤F G

nombreSede
≤≤H R
,
≤≤R S"
nombreCentroAtencion
≤≤T h
,
≤≤h i
inicioReporte
≤≤j w
,
≤≤w x
finalReporte≤≤y Ö
,≤≤Ö Ü
logoSede≤≤á è
,≤≤è ê
empleadoSede≤≤ë ù
,≤≤ù û"
fechaActualSistema≤≤ü ±
}≤≤≤ ≥
)≤≤≥ ¥
;≤≤¥ µ
ReportDataSource
≥≥ 
rptdatasource
≥≥ *
=
≥≥+ ,
new
≥≥- 0
ReportDataSource
≥≥1 A
(
≥≥A B
$str
≥≥B [
,
≥≥[ \
detalles
≥≥] e
)
≥≥e f
;
≥≥f g
	rptviewer
¥¥ 
.
¥¥ 
LocalReport
¥¥ !
.
¥¥! "
DataSources
¥¥" -
.
¥¥- .
Add
¥¥. 1
(
¥¥1 2
rptdatasource
¥¥2 ?
)
¥¥? @
;
¥¥@ A
return
µµ 
	rptviewer
µµ 
;
µµ 
}
∂∂ 	
public
ππ 
ActionResult
ππ !
ReporteDeAtenciones
ππ /
(
ππ/ 0
DateTime
ππ0 8
desde
ππ9 >
,
ππ> ?
DateTime
ππ@ H
hasta
ππI N
,
ππN O
int
ππP S
idEstablecimiento
ππT e
,
ππe f
string
ππg m$
nombreEstablecimientoππn É
)ππÉ Ñ
{
∫∫ 	
var
ªª 
establecimiento
ªª 
=
ªª  !
new
ªª" %
ItemGenerico
ªª& 2
{
ªª3 4
Id
ªª5 7
=
ªª8 9
idEstablecimiento
ªª: K
,
ªªK L
Nombre
ªªM S
=
ªªT U#
nombreEstablecimiento
ªªV k
}
ªªl m
;
ªªm n
var
ºº 
	rptviewer
ºº 
=
ºº (
GenerarReporteDeAtenciones
ºº 6
(
ºº6 7
establecimiento
ºº7 F
,
ººF G
desde
ººH M
,
ººM N
hasta
ººO T
,
ººT U
true
ººV Z
)
ººZ [
;
ºº[ \
ViewBag
ΩΩ 
.
ΩΩ 
ReportViewer
ΩΩ  
=
ΩΩ! "
	rptviewer
ΩΩ# ,
;
ΩΩ, -
return
ææ 
View
ææ 
(
ææ 
$str
ææ -
)
ææ- .
;
ææ. /
}
øø 	
public
¿¿ 
ReportViewer
¿¿ (
GenerarReporteDeAtenciones
¿¿ 6
(
¿¿6 7
ItemGenerico
¿¿7 C
establecimiento
¿¿D S
,
¿¿S T
DateTime
¿¿U ]
desde
¿¿^ c
,
¿¿c d
DateTime
¿¿e m
hasta
¿¿n s
,
¿¿s t
bool
¿¿u y
fromRequest¿¿z Ö
)¿¿Ö Ü
{
¡¡ 	
List
¬¬ 
<
¬¬ $
OrdenAtencion_Consulta
¬¬ '
>
¬¬' (
ordenesAtencion
¬¬) 8
=
¬¬9 :
restauranteLogica
¬¬; L
.
¬¬L M$
ObtenerOrdenesAtencion
¬¬M c
(
¬¬c d
desde
¬¬d i
,
¬¬i j
hasta
¬¬k p
,
¬¬p q
establecimiento¬¬r Å
.¬¬Å Ç
Id¬¬Ç Ñ
)¬¬Ñ Ö
;¬¬Ö Ü
var
√√ 
parametrosBasicos
√√ !
=
√√" #&
ObtenerParametrosBasicos
√√$ <
(
√√< =
)
√√= >
;
√√> ?
ReportParameter
ƒƒ #
nombreEstablecimiento
ƒƒ 1
=
ƒƒ2 3
new
ƒƒ4 7
ReportParameter
ƒƒ8 G
(
ƒƒG H
$str
ƒƒH _
,
ƒƒ_ `
establecimiento
ƒƒa p
.
ƒƒp q
Nombre
ƒƒq w
)
ƒƒw x
;
ƒƒx y
ReportParameter
≈≈ 
inicioReporte
≈≈ )
=
≈≈* +
new
≈≈, /
ReportParameter
≈≈0 ?
(
≈≈? @
$str
≈≈@ G
,
≈≈G H
desde
≈≈I N
.
≈≈N O
ToString
≈≈O W
(
≈≈W X
)
≈≈X Y
)
≈≈Y Z
;
≈≈Z [
ReportParameter
∆∆ 
finalReporte
∆∆ (
=
∆∆) *
new
∆∆+ .
ReportParameter
∆∆/ >
(
∆∆> ?
$str
∆∆? F
,
∆∆F G
hasta
∆∆H M
.
∆∆M N
ToString
∆∆N V
(
∆∆V W
)
∆∆W X
)
∆∆X Y
;
∆∆Y Z
var
«« 
	rptviewer
«« 
=
«« 
new
«« 
ReportViewer
««  ,
(
««, -
)
««- .
{
««/ 0
ProcessingMode
««1 ?
=
««@ A
ProcessingMode
««B P
.
««P Q
Local
««Q V
,
««V W!
SizeToReportContent
««X k
=
««l m
true
««n r
,
««r s
Width
««t y
=
««z {
Unit««| Ä
.««Ä Å

Percentage««Å ã
(««ã å
$num««å è
)««è ê
,««ê ë
Height««í ò
=««ô ö
Unit««õ ü
.««ü †

Percentage««† ™
(««™ ´
$num««´ Æ
)««Æ Ø
}««∞ ±
;««± ≤
string
»» 
path
»» 
=
»» 
$str
»» P
;
»»P Q
	rptviewer
…… 
.
…… 
LocalReport
…… !
.
……! "

ReportPath
……" ,
=
……- .
fromRequest
……/ :
?
……; <
Request
……= D
.
……D E
MapPath
……E L
(
……L M
Request
……M T
.
……T U
ApplicationPath
……U d
)
……d e
+
……f g
path
……h l
:
……m n!
HostingEnvironment……o Å
.……Å Ç
MapPath……Ç â
(……â ä
path……ä é
)……é è
;……è ê
	rptviewer
   
.
   
LocalReport
   !
.
  ! "
SetParameters
  " /
(
  / 0
new
  0 3
ReportParameter
  4 C
[
  C D
]
  D E
{
  F G
parametrosBasicos
  H Y
.
  Y Z

NombreSede
  Z d
,
  d e#
nombreEstablecimiento
  f {
,
  { |
inicioReporte  } ä
,  ä ã
finalReporte  å ò
,  ò ô!
parametrosBasicos  ö ´
.  ´ ¨
LogoSede  ¨ ¥
,  ¥ µ!
parametrosBasicos  ∂ «
.  « »
Usuario  » œ
,  œ –!
parametrosBasicos  — ‚
.  ‚ „"
FechaActualSistema  „ ı
}  ˆ ˜
)  ˜ ¯
;  ¯ ˘
ReportDataSource
ÀÀ 
rptdatasource
ÀÀ *
=
ÀÀ+ ,
new
ÀÀ- 0
ReportDataSource
ÀÀ1 A
(
ÀÀA B
$str
ÀÀB Z
,
ÀÀZ [
ordenesAtencion
ÀÀ\ k
)
ÀÀk l
;
ÀÀl m
	rptviewer
ÃÃ 
.
ÃÃ 
LocalReport
ÃÃ !
.
ÃÃ! "
DataSources
ÃÃ" -
.
ÃÃ- .
Add
ÃÃ. 1
(
ÃÃ1 2
rptdatasource
ÃÃ2 ?
)
ÃÃ? @
;
ÃÃ@ A
return
ÕÕ 
	rptviewer
ÕÕ 
;
ÕÕ 
}
ŒŒ 	
public
–– 
ActionResult
–– &
ReportePorModoAtenciones
–– 4
(
––4 5
DateTime
––5 =
desde
––> C
,
––C D
DateTime
––E M
hasta
––N S
,
––S T
int
––U X
idEstablecimiento
––Y j
,
––j k
string
––l r$
nombreEstablecimiento––s à
)––à â
{
—— 	
var
““ 
establecimiento
““ 
=
““  !
new
““" %
ItemGenerico
““& 2
{
““3 4
Id
““5 7
=
““8 9
idEstablecimiento
““: K
,
““K L
Nombre
““M S
=
““T U#
nombreEstablecimiento
““V k
}
““l m
;
““m n
var
”” 
	rptviewer
”” 
=
”” -
GenerarReportePorModoAtenciones
”” ;
(
””; <
establecimiento
””< K
,
””K L
desde
””M R
,
””R S
hasta
””T Y
,
””Y Z
true
””[ _
)
””_ `
;
””` a
ViewBag
‘‘ 
.
‘‘ 
ReportViewer
‘‘  
=
‘‘! "
	rptviewer
‘‘# ,
;
‘‘, -
return
’’ 
View
’’ 
(
’’ 
$str
’’ -
)
’’- .
;
’’. /
}
÷÷ 	
public
◊◊ 
ReportViewer
◊◊ -
GenerarReportePorModoAtenciones
◊◊ ;
(
◊◊; <
ItemGenerico
◊◊< H
establecimiento
◊◊I X
,
◊◊X Y
DateTime
◊◊Z b
desde
◊◊c h
,
◊◊h i
DateTime
◊◊j r
hasta
◊◊s x
,
◊◊x y
bool
◊◊z ~
fromRequest◊◊ ä
)◊◊ä ã
{
ÿÿ 	
List
ŸŸ 
<
ŸŸ +
OrdenPorModoAtencion_Consulta
ŸŸ .
>
ŸŸ. /
ordenesAtencion
ŸŸ0 ?
=
ŸŸ@ A
restauranteLogica
ŸŸB S
.
ŸŸS T+
ObtenerOrdenesPorModoAtencion
ŸŸT q
(
ŸŸq r
desde
ŸŸr w
,
ŸŸw x
hasta
ŸŸy ~
,
ŸŸ~ 
establecimientoŸŸÄ è
.ŸŸè ê
IdŸŸê í
)ŸŸí ì
;ŸŸì î
var
⁄⁄ 
parametrosBasicos
⁄⁄ !
=
⁄⁄" #&
ObtenerParametrosBasicos
⁄⁄$ <
(
⁄⁄< =
)
⁄⁄= >
;
⁄⁄> ?
ReportParameter
€€ #
nombreEstablecimiento
€€ 1
=
€€2 3
new
€€4 7
ReportParameter
€€8 G
(
€€G H
$str
€€H _
,
€€_ `
establecimiento
€€a p
.
€€p q
Nombre
€€q w
)
€€w x
;
€€x y
ReportParameter
‹‹ 
inicioReporte
‹‹ )
=
‹‹* +
new
‹‹, /
ReportParameter
‹‹0 ?
(
‹‹? @
$str
‹‹@ G
,
‹‹G H
desde
‹‹I N
.
‹‹N O
ToString
‹‹O W
(
‹‹W X
)
‹‹X Y
)
‹‹Y Z
;
‹‹Z [
ReportParameter
›› 
finalReporte
›› (
=
››) *
new
››+ .
ReportParameter
››/ >
(
››> ?
$str
››? F
,
››F G
hasta
››H M
.
››M N
ToString
››N V
(
››V W
)
››W X
)
››X Y
;
››Y Z
var
ﬁﬁ 
	rptviewer
ﬁﬁ 
=
ﬁﬁ 
new
ﬁﬁ 
ReportViewer
ﬁﬁ  ,
(
ﬁﬁ, -
)
ﬁﬁ- .
{
ﬁﬁ/ 0
ProcessingMode
ﬁﬁ1 ?
=
ﬁﬁ@ A
ProcessingMode
ﬁﬁB P
.
ﬁﬁP Q
Local
ﬁﬁQ V
,
ﬁﬁV W!
SizeToReportContent
ﬁﬁX k
=
ﬁﬁl m
true
ﬁﬁn r
,
ﬁﬁr s
Width
ﬁﬁt y
=
ﬁﬁz {
Unitﬁﬁ| Ä
.ﬁﬁÄ Å

PercentageﬁﬁÅ ã
(ﬁﬁã å
$numﬁﬁå è
)ﬁﬁè ê
,ﬁﬁê ë
Heightﬁﬁí ò
=ﬁﬁô ö
Unitﬁﬁõ ü
.ﬁﬁü †

Percentageﬁﬁ† ™
(ﬁﬁ™ ´
$numﬁﬁ´ Æ
)ﬁﬁÆ Ø
}ﬁﬁ∞ ±
;ﬁﬁ± ≤
string
ﬂﬂ 
path
ﬂﬂ 
=
ﬂﬂ 
$str
ﬂﬂ U
;
ﬂﬂU V
	rptviewer
‡‡ 
.
‡‡ 
LocalReport
‡‡ !
.
‡‡! "

ReportPath
‡‡" ,
=
‡‡- .
fromRequest
‡‡/ :
?
‡‡; <
Request
‡‡= D
.
‡‡D E
MapPath
‡‡E L
(
‡‡L M
Request
‡‡M T
.
‡‡T U
ApplicationPath
‡‡U d
)
‡‡d e
+
‡‡f g
path
‡‡h l
:
‡‡m n!
HostingEnvironment‡‡o Å
.‡‡Å Ç
MapPath‡‡Ç â
(‡‡â ä
path‡‡ä é
)‡‡é è
;‡‡è ê
	rptviewer
·· 
.
·· 
LocalReport
·· !
.
··! "
SetParameters
··" /
(
··/ 0
new
··0 3
ReportParameter
··4 C
[
··C D
]
··D E
{
··F G
parametrosBasicos
··H Y
.
··Y Z

NombreSede
··Z d
,
··d e#
nombreEstablecimiento
··f {
,
··{ |
inicioReporte··} ä
,··ä ã
finalReporte··å ò
,··ò ô!
parametrosBasicos··ö ´
.··´ ¨
LogoSede··¨ ¥
,··¥ µ!
parametrosBasicos··∂ «
.··« »
Usuario··» œ
,··œ –!
parametrosBasicos··— ‚
.··‚ „"
FechaActualSistema··„ ı
}··ˆ ˜
)··˜ ¯
;··¯ ˘
ReportDataSource
‚‚ 
rptdatasource
‚‚ *
=
‚‚+ ,
new
‚‚- 0
ReportDataSource
‚‚1 A
(
‚‚A B
$str
‚‚B Z
,
‚‚Z [
ordenesAtencion
‚‚\ k
)
‚‚k l
;
‚‚l m
	rptviewer
„„ 
.
„„ 
LocalReport
„„ !
.
„„! "
DataSources
„„" -
.
„„- .
Add
„„. 1
(
„„1 2
rptdatasource
„„2 ?
)
„„? @
;
„„@ A
return
‰‰ 
	rptviewer
‰‰ 
;
‰‰ 
}
ÂÂ 	
}
ÊÊ 
}ÁÁ ôï
dD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Restaurante\RestauranteController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class !
RestauranteController &
:' (
BaseController) 7
{ 
private   
readonly   
IRestauranteLogica   +
restauranteLogica  , =
;  = >
	protected!! 
readonly!! 
IActorNegocioLogica!! .
actorNegocioLogica!!/ A
;!!A B
	protected"" 
readonly"" 
IAtencion_Logica"" +
atencionLogica"", :
;"": ;
	protected## 
readonly## 
ICaja_Logica## '

cajaLogica##( 2
;##2 3
	protected%% 
readonly%% 
IMaestroLogica%% )
maestroLogica%%* 7
;%%7 8
	protected&& 
readonly&& 
IOperacionLogica&& +
operacionLogica&&, ;
;&&; <
	protected'' 
readonly'' )
IFacturacionElectronicaLogica'' 8(
facturacionElectronicaLogica''9 U
;''U V
	protected(( 
readonly(( 
IPdfUtil(( #
pdfUtil(($ +
;((+ ,
	protected)) 
readonly)) 
IBarCodeUtil)) '
barCodeUtil))( 3
;))3 4
	protected** 
readonly** $
ICentroDeAtencion_Logica** 3#
centroDeAtencion_Logica**4 K
;**K L
public,, !
RestauranteController,, $
(,,$ %
),,% &
:,,' (
base,,) -
(,,- .
),,. /
{-- 	
restauranteLogica.. 
=.. 
Dependencia..  +
...+ ,
Resolve.., 3
<..3 4
IRestauranteLogica..4 F
>..F G
(..G H
)..H I
;..I J
actorNegocioLogica// 
=//  
Dependencia//! ,
.//, -
Resolve//- 4
<//4 5
IActorNegocioLogica//5 H
>//H I
(//I J
)//J K
;//K L
maestroLogica00 
=00 
Dependencia00 '
.00' (
Resolve00( /
<00/ 0
IMaestroLogica000 >
>00> ?
(00? @
)00@ A
;00A B
operacionLogica11 
=11 
Dependencia11 )
.11) *
Resolve11* 1
<111 2
IOperacionLogica112 B
>11B C
(11C D
)11D E
;11E F
barCodeUtil22 
=22 
Dependencia22 %
.22% &
Resolve22& -
<22- .
IBarCodeUtil22. :
>22: ;
(22; <
)22< =
;22= >(
facturacionElectronicaLogica33 (
=33) *
Dependencia33+ 6
.336 7
Resolve337 >
<33> ?)
IFacturacionElectronicaLogica33? \
>33\ ]
(33] ^
)33^ _
;33_ `
pdfUtil44 
=44 
Dependencia44 !
.44! "
Resolve44" )
<44) *
IPdfUtil44* 2
>442 3
(443 4
)444 5
;445 6
atencionLogica55 
=55 
Dependencia55 (
.55( )
Resolve55) 0
<550 1
IAtencion_Logica551 A
>55A B
(55B C
)55C D
;55D E

cajaLogica66 
=66 
Dependencia66 $
.66$ %
Resolve66% ,
<66, -
ICaja_Logica66- 9
>669 :
(66: ;
)66; <
;66< =#
centroDeAtencion_Logica77 #
=77$ %
Dependencia77& 1
.771 2
Resolve772 9
<779 :$
ICentroDeAtencion_Logica77: R
>77R S
(77S T
)77T U
;77U V
}88 	
SesionRestaurante99 
SesionRestaurante99 +
{:: 	
get;; 
{<< 
return== 
(== 
SesionRestaurante== )
)==) *
this==* .
.==. /
Session==/ 6
[==6 7
$str==7 J
]==J K
;==K L
}>> 
set?? 
{@@ 
thisAA 
.AA 
SessionAA 
[AA 
$strAA 0
]AA0 1
=AA2 3
valueAA4 9
;AA9 :
}BB 
}CC 	
publicDD 
asyncDD 
TaskDD 
<DD 
ActionResultDD &
>DD& '
IndexDD( -
(DD- .
)DD. /
{EE 	
SesionRestauranteFF 
=FF 
awaitFF  %
restauranteLogicaFF& 7
.FF7 8
ObtenerSesionFF8 E
(FFE F
ProfileDataFFF Q
(FFQ R
)FFR S
)FFS T
;FFT U
ViewBagGG 
.GG %
ParametrosDeConfiguracionGG -
=GG. /
atencionLogicaGG0 >
.GG> ?,
 ObtenerConfiguracionParaAtencionGG? _
(GG_ `
SesionRestauranteGG` q
)GGq r
;GGr s
ViewBagHH 
.HH 
	WCPScriptHH 
=HH 

NeodynamicHH  *
.HH* +
SDKHH+ .
.HH. /
WebHH/ 2
.HH2 3
WebClientPrintHH3 A
.HHA B
CreateScriptHHB N
(HHN O
UrlII 
.II 
ActionII 
(II 
$strII *
,II* +
$strII, ?
,II? @
nullIIA E
,IIE F
HttpContextIIG R
.IIR S
RequestIIS Z
.IIZ [
UrlII[ ^
.II^ _
SchemeII_ e
)IIe f
,IIf g
UrlJJ 
.JJ 
ActionJJ 
(JJ 
$strJJ $
,JJ$ %
$strJJ& 3
,JJ3 4
nullJJ5 9
,JJ9 :
HttpContextJJ; F
.JJF G
RequestJJG N
.JJN O
UrlJJO R
.JJR S
SchemeJJS Y
)JJY Z
,JJZ [
HttpContextJJ\ g
.JJg h
SessionJJh o
.JJo p
	SessionIDJJp y
)JJy z
;JJz {
returnKK 
ViewKK 
(KK 
)KK 
;KK 
}LL 	
publicNN 
asyncNN 
TaskNN 
<NN 
ActionResultNN &
>NN& '
CajaNN( ,
(NN, -
)NN- .
{OO 	
SesionRestaurantePP 
=PP 
awaitPP  %
restauranteLogicaPP& 7
.PP7 8
ObtenerSesionPP8 E
(PPE F
ProfileDataPPF Q
(PPQ R
)PPR S
)PPS T
;PPT U
ViewBagQQ 
.QQ 
ConfiguracionQQ !
=QQ" #

cajaLogicaQQ$ .
.QQ. /(
ObtenerConfiguracionParaCajaQQ/ K
(QQK L
SesionRestauranteQQL ]
)QQ] ^
;QQ^ _
ViewBagSS 
.SS 
	WCPScriptSS 
=SS 

NeodynamicSS  *
.SS* +
SDKSS+ .
.SS. /
WebSS/ 2
.SS2 3
WebClientPrintSS3 A
.SSA B
CreateScriptSSB N
(SSN O
UrlTT 
.TT 
ActionTT 
(TT 
$strTT *
,TT* +
$strTT, ?
,TT? @
nullTTA E
,TTE F
HttpContextTTG R
.TTR S
RequestTTS Z
.TTZ [
UrlTT[ ^
.TT^ _
SchemeTT_ e
)TTe f
,TTf g
UrlUU 
.UU 
ActionUU 
(UU 
$strUU $
,UU$ %
$strUU& 3
,UU3 4
nullUU5 9
,UU9 :
HttpContextUU; F
.UUF G
RequestUUG N
.UUN O
UrlUUO R
.UUR S
SchemeUUS Y
)UUY Z
,UUZ [
HttpContextUU\ g
.UUg h
SessionUUh o
.UUo p
	SessionIDUUp y
)UUy z
;UUz {
returnWW 
ViewWW 
(WW 
)WW 
;WW 
}XX 	
publicYY 
asyncYY 
TaskYY 
<YY 
ActionResultYY &
>YY& '
PreparacionYY( 3
(YY3 4
)YY4 5
{ZZ 	
SesionRestaurante[[ 
=[[ 
await[[  %
restauranteLogica[[& 7
.[[7 8
ObtenerSesion[[8 E
([[E F
ProfileData[[F Q
([[Q R
)[[R S
)[[S T
;[[T U
ViewBag\\ 
.\\ %
ParametrosDeConfiguracion\\ -
=\\. /)
ConfiguracionRestauranteOrden\\0 M
.\\M N
Default\\N U
;\\U V
ViewBag]] 
.]] -
!ParametrosDeConfiguracionAtencion]] 5
=]]6 7
atencionLogica]]8 F
.]]F G,
 ObtenerConfiguracionParaAtencion]]G g
(]]g h
SesionRestaurante]]h y
)]]y z
;]]z {
return^^ 
View^^ 
(^^ 
)^^ 
;^^ 
}__ 	
publicaa 
ActionResultaa 
Complementosaa (
(aa( )
)aa) *
{bb 	
returncc 
Viewcc 
(cc 
)cc 
;cc 
}dd 	
publicgg 

JsonResultgg 
ActualizarMesagg (
(gg( )
Mesagg) -
mesagg. 2
)gg2 3
{hh 	
tryii 
{jj 
OperationResultkk 
resultkk  &
=kk' (
restauranteLogicakk) :
.kk: ;
ActualizarMesakk; I
(kkI J
mesakkJ N
)kkN O
;kkO P
returnll 
Jsonll 
(ll 
resultll "
.ll" #
datall# '
)ll' (
;ll( )
}mm 
catchnn 
(nn 
	Exceptionnn 
enn 
)nn 
{oo 
returnpp 
newpp  
JsonHttpStatusResultpp /
(pp/ 0
Utilpp0 4
.pp4 5
	ErrorJsonpp5 >
(pp> ?
epp? @
)pp@ A
,ppA B
HttpStatusCodeppC Q
.ppQ R
InternalServerErrorppR e
)ppe f
;ppf g
}qq 
}rr 	
publicss 
asyncss 
Taskss 
<ss 

JsonResultss $
>ss$ %
ActualizarAmbientess& 8
(ss8 9
Ambientess9 A
ambientessB J
)ssJ K
{tt 	
tryuu 
{vv 
OperationResultww 
resultww  &
=ww' (
awaitww) .
restauranteLogicaww/ @
.ww@ A
ActualizarAmbientewwA S
(wwS T
ambientewwT \
)ww\ ]
;ww] ^
returnxx 
Jsonxx 
(xx 
resultxx "
.xx" #
dataxx# '
)xx' (
;xx( )
}yy 
catchzz 
(zz 
	Exceptionzz 
ezz 
)zz 
{{{ 
return|| 
new||  
JsonHttpStatusResult|| /
(||/ 0
Util||0 4
.||4 5
	ErrorJson||5 >
(||> ?
e||? @
)||@ A
,||A B
HttpStatusCode||C Q
.||Q R
InternalServerError||R e
)||e f
;||f g
}}} 
}~~ 	
public 
async 
Task 
< 

JsonResult $
>$ %
AgregarAmbiente& 5
(5 6
Ambiente6 >
ambiente? G
)G H
{
ÄÄ 	
try
ÅÅ 
{
ÇÇ 
var
ÉÉ 
result
ÉÉ 
=
ÉÉ 
await
ÉÉ "
restauranteLogica
ÉÉ# 4
.
ÉÉ4 5
CrearAmbiente
ÉÉ5 B
(
ÉÉB C
ambiente
ÉÉC K
)
ÉÉK L
;
ÉÉL M
return
ÑÑ 
Json
ÑÑ 
(
ÑÑ 
new
ÑÑ 
{
ÑÑ  !
result
ÑÑ" (
.
ÑÑ( )
code_result
ÑÑ) 4
,
ÑÑ4 5
data
ÑÑ6 :
=
ÑÑ; <
result
ÑÑ= C
.
ÑÑC D
data
ÑÑD H
,
ÑÑH I 
result_description
ÑÑJ \
=
ÑÑ] ^
result
ÑÑ_ e
.
ÑÑe f
title
ÑÑf k
,
ÑÑk l
IdOrden
ÑÑm t
=
ÑÑu v
result
ÑÑw }
.
ÑÑ} ~
informationÑÑ~ â
}ÑÑä ã
)ÑÑã å
;ÑÑå ç
}
ÖÖ 
catch
ÜÜ 
(
ÜÜ 
	Exception
ÜÜ 
e
ÜÜ 
)
ÜÜ 
{
áá 
return
àà 
new
àà "
JsonHttpStatusResult
àà /
(
àà/ 0
Util
àà0 4
.
àà4 5
	ErrorJson
àà5 >
(
àà> ?
e
àà? @
)
àà@ A
,
ààA B
HttpStatusCode
ààC Q
.
ààQ R!
InternalServerError
ààR e
)
ààe f
;
ààf g
}
ââ 
}
ää 	
public
ãã 
async
ãã 
Task
ãã 
<
ãã 

JsonResult
ãã $
>
ãã$ %
EliminarAmbiente
ãã& 6
(
ãã6 7
int
ãã7 :

idAmbiente
ãã; E
)
ããE F
{
åå 	
try
çç 
{
éé 
OperationResult
èè 
result
èè  &
=
èè' (
await
èè) .
restauranteLogica
èè/ @
.
èè@ A
EliminarAmbiente
èèA Q
(
èèQ R

idAmbiente
èèR \
)
èè\ ]
;
èè] ^
return
êê 
Json
êê 
(
êê 
new
êê 
{
êê  !
result
êê" (
.
êê( )
code_result
êê) 4
,
êê4 5
data
êê6 :
=
êê; <
result
êê= C
.
êêC D
data
êêD H
,
êêH I 
result_description
êêJ \
=
êê] ^
result
êê_ e
.
êêe f
title
êêf k
,
êêk l
IdOrden
êêm t
=
êêu v
result
êêw }
.
êê} ~
informationêê~ â
}êêä ã
)êêã å
;êêå ç
}
íí 
catch
ìì 
(
ìì 
	Exception
ìì 
e
ìì 
)
ìì 
{
îî 
return
ïï 
new
ïï "
JsonHttpStatusResult
ïï /
(
ïï/ 0
Util
ïï0 4
.
ïï4 5
	ErrorJson
ïï5 >
(
ïï> ?
e
ïï? @
)
ïï@ A
,
ïïA B
HttpStatusCode
ïïC Q
.
ïïQ R!
InternalServerError
ïïR e
)
ïïe f
;
ïïf g
}
ññ 
}
òò 	
public
ôô 

JsonResult
ôô 
AgregarMesa
ôô %
(
ôô% &
Mesa
ôô& *
mesa
ôô+ /
)
ôô/ 0
{
öö 	
try
õõ 
{
úú 
var
ùù 
result
ùù 
=
ùù 
restauranteLogica
ùù .
.
ùù. /
	CrearMesa
ùù/ 8
(
ùù8 9
mesa
ùù9 =
)
ùù= >
;
ùù> ?
return
ûû 
Json
ûû 
(
ûû 
new
ûû 
{
ûû  !
result
ûû" (
.
ûû( )
code_result
ûû) 4
,
ûû4 5
data
ûû6 :
=
ûû; <
result
ûû= C
.
ûûC D
data
ûûD H
,
ûûH I 
result_description
ûûJ \
=
ûû] ^
result
ûû_ e
.
ûûe f
title
ûûf k
,
ûûk l
IdOrden
ûûm t
=
ûûu v
result
ûûw }
.
ûû} ~
informationûû~ â
}ûûä ã
)ûûã å
;ûûå ç
}
†† 
catch
°° 
(
°° 
	Exception
°° 
e
°° 
)
°° 
{
¢¢ 
return
££ 
new
££ "
JsonHttpStatusResult
££ /
(
££/ 0
Util
££0 4
.
££4 5
	ErrorJson
££5 >
(
££> ?
e
££? @
)
££@ A
,
££A B
HttpStatusCode
££C Q
.
££Q R!
InternalServerError
££R e
)
££e f
;
££f g
}
§§ 
}
¶¶ 	
public
ßß 

JsonResult
ßß 
EliminarMesa
ßß &
(
ßß& '
int
ßß' *
idMesa
ßß+ 1
)
ßß1 2
{
®® 	
try
©© 
{
™™ 
OperationResult
´´ 
result
´´  &
=
´´' (
restauranteLogica
´´) :
.
´´: ;
EliminarMesa
´´; G
(
´´G H
idMesa
´´H N
)
´´N O
;
´´O P
return
¨¨ 
Json
¨¨ 
(
¨¨ 
new
¨¨ 
{
¨¨  !
result
¨¨" (
.
¨¨( )
code_result
¨¨) 4
,
¨¨4 5
data
¨¨6 :
=
¨¨; <
result
¨¨= C
.
¨¨C D
information
¨¨D O
,
¨¨O P 
result_description
¨¨Q c
=
¨¨d e
result
¨¨f l
.
¨¨l m
title
¨¨m r
,
¨¨r s
result
¨¨t z
.
¨¨z {
objeto¨¨{ Å
}¨¨Ç É
)¨¨É Ñ
;¨¨Ñ Ö
}
≠≠ 
catch
ÆÆ 
(
ÆÆ 
	Exception
ÆÆ 
e
ÆÆ 
)
ÆÆ 
{
ØØ 
return
∞∞ 
new
∞∞ "
JsonHttpStatusResult
∞∞ /
(
∞∞/ 0
Util
∞∞0 4
.
∞∞4 5
	ErrorJson
∞∞5 >
(
∞∞> ?
e
∞∞? @
)
∞∞@ A
,
∞∞A B
HttpStatusCode
∞∞C Q
.
∞∞Q R!
InternalServerError
∞∞R e
)
∞∞e f
;
∞∞f g
}
±± 
}
≥≥ 	
public
¥¥ 

JsonResult
¥¥ 
ObtenerCategorias
¥¥ +
(
¥¥+ ,
)
¥¥, -
{
µµ 	
try
∂∂ 
{
∑∑ 
List
∏∏ 
<
∏∏ 
ItemJerarquico
∏∏ #
>
∏∏# $

categorias
∏∏% /
=
∏∏0 1
restauranteLogica
∏∏2 C
.
∏∏C D*
ObtenerCategoriasRestaurante
∏∏D `
(
∏∏` a
)
∏∏a b
;
∏∏b c
return
ππ 
Json
ππ 
(
ππ 

categorias
ππ &
)
ππ& '
;
ππ' (
}
∫∫ 
catch
ªª 
(
ªª 
	Exception
ªª 
e
ªª 
)
ªª 
{
ºº 
return
ΩΩ 
new
ΩΩ "
JsonHttpStatusResult
ΩΩ /
(
ΩΩ/ 0
Util
ΩΩ0 4
.
ΩΩ4 5
	ErrorJson
ΩΩ5 >
(
ΩΩ> ?
e
ΩΩ? @
)
ΩΩ@ A
,
ΩΩA B
HttpStatusCode
ΩΩC Q
.
ΩΩQ R!
InternalServerError
ΩΩR e
)
ΩΩe f
;
ΩΩf g
}
ææ 
}
øø 	
public
¿¿ 

JsonResult
¿¿ +
ObtenerIdsDeItemsPorCategoria
¿¿ 7
(
¿¿7 8
long
¿¿8 <
IdCategoria
¿¿= H
)
¿¿H I
{
¡¡ 	
try
¬¬ 
{
√√ 
long
ƒƒ 
[
ƒƒ 
]
ƒƒ 
Ids
ƒƒ 
=
ƒƒ 
restauranteLogica
ƒƒ .
.
ƒƒ. /+
ObtenerIdsDeitemsPorCategoria
ƒƒ/ L
(
ƒƒL M
IdCategoria
ƒƒM X
)
ƒƒX Y
;
ƒƒY Z
return
≈≈ 
Json
≈≈ 
(
≈≈ 
Ids
≈≈ 
)
≈≈  
;
≈≈  !
}
∆∆ 
catch
«« 
(
«« 
	Exception
«« 
e
«« 
)
«« 
{
»» 
return
…… 
new
…… "
JsonHttpStatusResult
…… /
(
……/ 0
Util
……0 4
.
……4 5
	ErrorJson
……5 >
(
……> ?
e
……? @
)
……@ A
,
……A B
HttpStatusCode
……C Q
.
……Q R!
InternalServerError
……R e
)
……e f
;
……f g
}
   
}
ÃÃ 	
public
ÕÕ 
async
ÕÕ 
Task
ÕÕ 
<
ÕÕ 

JsonResult
ÕÕ $
>
ÕÕ$ %$
ObtenerMesasDeAmbiente
ÕÕ& <
(
ÕÕ< =
int
ÕÕ= @

idAmbiente
ÕÕA K
)
ÕÕK L
{
ŒŒ 	
try
œœ 
{
–– 
List
—— 
<
—— 
Mesa
—— 
>
—— 
mesas
——  
=
——! "
await
——# (
restauranteLogica
——) :
.
——: ;$
ObtenerMesasDeAmbiente
——; Q
(
——Q R

idAmbiente
——R \
)
——\ ]
;
——] ^
return
““ 
Json
““ 
(
““ 
mesas
““ !
)
““! "
;
““" #
}
”” 
catch
‘‘ 
(
‘‘ 
	Exception
‘‘ 
e
‘‘ 
)
‘‘ 
{
’’ 
return
÷÷ 
new
÷÷ "
JsonHttpStatusResult
÷÷ /
(
÷÷/ 0
Util
÷÷0 4
.
÷÷4 5
	ErrorJson
÷÷5 >
(
÷÷> ?
e
÷÷? @
)
÷÷@ A
,
÷÷A B
HttpStatusCode
÷÷C Q
.
÷÷Q R!
InternalServerError
÷÷R e
)
÷÷e f
;
÷÷f g
}
◊◊ 
}
ÿÿ 	
public
ŸŸ 
async
ŸŸ 
Task
ŸŸ 
<
ŸŸ 

JsonResult
ŸŸ $
>
ŸŸ$ %&
ObtenerTodosLosAmbientes
ŸŸ& >
(
ŸŸ> ?
)
ŸŸ? @
{
⁄⁄ 	
try
€€ 
{
‹‹ 
List
›› 
<
›› 
Ambiente
›› 
>
›› 
	ambientes
›› (
=
››) *
(
››+ ,
await
››, 1
restauranteLogica
››2 C
.
››C D
ObtenerAmbientes
››D T
(
››T U
)
››U V
)
››V W
;
››W X
return
ﬁﬁ 
Json
ﬁﬁ 
(
ﬁﬁ 
	ambientes
ﬁﬁ %
)
ﬁﬁ% &
;
ﬁﬁ& '
}
ﬂﬂ 
catch
‡‡ 
(
‡‡ 
	Exception
‡‡ 
e
‡‡ 
)
‡‡ 
{
·· 
return
‚‚ 
new
‚‚ "
JsonHttpStatusResult
‚‚ /
(
‚‚/ 0
Util
‚‚0 4
.
‚‚4 5
	ErrorJson
‚‚5 >
(
‚‚> ?
e
‚‚? @
)
‚‚@ A
,
‚‚A B
HttpStatusCode
‚‚C Q
.
‚‚Q R!
InternalServerError
‚‚R e
)
‚‚e f
;
‚‚f g
}
„„ 
}
‰‰ 	
public
ÂÂ 
async
ÂÂ 
Task
ÂÂ 
<
ÂÂ 

JsonResult
ÂÂ $
>
ÂÂ$ %
ObtenerAmbientes
ÂÂ& 6
(
ÂÂ6 7
int
ÂÂ7 :
IdEstablecimiento
ÂÂ; L
)
ÂÂL M
{
ÊÊ 	
try
ÁÁ 
{
ËË 
List
ÈÈ 
<
ÈÈ 
Ambiente
ÈÈ 
>
ÈÈ 
	ambientes
ÈÈ (
=
ÈÈ) *
(
ÈÈ+ ,
await
ÈÈ, 1
restauranteLogica
ÈÈ2 C
.
ÈÈC D
ObtenerAmbientes
ÈÈD T
(
ÈÈT U
IdEstablecimiento
ÈÈU f
)
ÈÈf g
)
ÈÈg h
;
ÈÈh i
return
ÍÍ 
Json
ÍÍ 
(
ÍÍ 
	ambientes
ÍÍ %
)
ÍÍ% &
;
ÍÍ& '
}
ÎÎ 
catch
ÏÏ 
(
ÏÏ 
	Exception
ÏÏ 
e
ÏÏ 
)
ÏÏ 
{
ÌÌ 
return
ÓÓ 
new
ÓÓ "
JsonHttpStatusResult
ÓÓ /
(
ÓÓ/ 0
Util
ÓÓ0 4
.
ÓÓ4 5
	ErrorJson
ÓÓ5 >
(
ÓÓ> ?
e
ÓÓ? @
)
ÓÓ@ A
,
ÓÓA B
HttpStatusCode
ÓÓC Q
.
ÓÓQ R!
InternalServerError
ÓÓR e
)
ÓÓe f
;
ÓÓf g
}
ÔÔ 
}
 	
public
ÒÒ 

JsonResult
ÒÒ /
!ObtenerCentrosAtencionRestaurante
ÒÒ ;
(
ÒÒ; <
int
ÒÒ< ?
idEstablecimiento
ÒÒ@ Q
)
ÒÒQ R
{
ÚÚ 	
try
ÛÛ 
{
ÙÙ 
List
ıı 
<
ıı '
CentroAtencionRestaurante
ıı .
>
ıı. /
centrosAtencion
ıı0 ?
=
ıı@ A
restauranteLogica
ııB S
.
ııS T7
)ObtenerPuntoDeVeliveryPuntoAlPasoVigentes
ııT }
(
ıı} ~ 
idEstablecimientoıı~ è
)ııè ê
;ııê ë
return
ˆˆ 
Json
ˆˆ 
(
ˆˆ 
centrosAtencion
ˆˆ +
)
ˆˆ+ ,
;
ˆˆ, -
}
˜˜ 
catch
¯¯ 
(
¯¯ 
	Exception
¯¯ 
e
¯¯ 
)
¯¯ 
{
˘˘ 
return
˙˙ 
new
˙˙ "
JsonHttpStatusResult
˙˙ /
(
˙˙/ 0
Util
˙˙0 4
.
˙˙4 5
	ErrorJson
˙˙5 >
(
˙˙> ?
e
˙˙? @
)
˙˙@ A
,
˙˙A B
HttpStatusCode
˙˙C Q
.
˙˙Q R!
InternalServerError
˙˙R e
)
˙˙e f
;
˙˙f g
}
˚˚ 
}
¸¸ 	
public
˝˝ 
async
˝˝ 
Task
˝˝ 
<
˝˝ 

JsonResult
˝˝ $
>
˝˝$ %%
ObtenerItemsSuperficial
˝˝& =
(
˝˝= >
)
˝˝> ?
{
˛˛ 	
try
ˇˇ 
{
ÄÄ 
List
ÅÅ 
<
ÅÅ 
ItemRestaurante
ÅÅ $
>
ÅÅ$ %
items
ÅÅ& +
=
ÅÅ, -
await
ÅÅ. 3
restauranteLogica
ÅÅ4 E
.
ÅÅE F'
ObtenerItemsDeRestaurante
ÅÅF _
(
ÅÅ_ `
)
ÅÅ` a
;
ÅÅa b
return
ÇÇ 
Json
ÇÇ 
(
ÇÇ 
items
ÇÇ !
)
ÇÇ! "
;
ÇÇ" #
}
ÉÉ 
catch
ÑÑ 
(
ÑÑ 
	Exception
ÑÑ 
e
ÑÑ 
)
ÑÑ 
{
ÖÖ 
return
ÜÜ 
new
ÜÜ "
JsonHttpStatusResult
ÜÜ /
(
ÜÜ/ 0
Util
ÜÜ0 4
.
ÜÜ4 5
	ErrorJson
ÜÜ5 >
(
ÜÜ> ?
e
ÜÜ? @
)
ÜÜ@ A
,
ÜÜA B
HttpStatusCode
ÜÜC Q
.
ÜÜQ R!
InternalServerError
ÜÜR e
)
ÜÜe f
;
ÜÜf g
}
áá 
}
àà 	
public
ââ 

JsonResult
ââ #
ObtenerAtencionDeMesa
ââ /
(
ââ/ 0
int
ââ0 3
IdMesa
ââ4 :
)
ââ: ;
{
ää 	
try
ãã 
{
åå !
AtencionRestaurante
çç #
atencion
çç$ ,
=
çç- .
restauranteLogica
çç/ @
.
çç@ A#
ObtenerAtencionDeMesa
ççA V
(
ççV W
IdMesa
ççW ]
)
çç] ^
;
çç^ _
return
éé 
Json
éé 
(
éé 
atencion
éé $
)
éé$ %
;
éé% &
}
èè 
catch
êê 
(
êê 
	Exception
êê 
e
êê 
)
êê 
{
ëë 
return
íí 
new
íí "
JsonHttpStatusResult
íí /
(
íí/ 0
Util
íí0 4
.
íí4 5
	ErrorJson
íí5 >
(
íí> ?
e
íí? @
)
íí@ A
,
ííA B
HttpStatusCode
ííC Q
.
ííQ R!
InternalServerError
ííR e
)
ííe f
;
ííf g
}
ìì 
}
îî 	
public
ïï 
async
ïï 
Task
ïï 
<
ïï 

JsonResult
ïï $
>
ïï$ %%
ObtenerItemsDeCategoria
ïï& =
(
ïï= >
int
ïï> A
IdCategoria
ïïB M
)
ïïM N
{
ññ 	
try
óó 
{
òò 
List
ôô 
<
ôô 
ItemRestaurante
ôô $
>
ôô$ %
items
ôô& +
=
ôô, -
await
ôô. 3
restauranteLogica
ôô4 E
.
ôôE F3
%ObtenerItemsDeRestaurantePorCategoria
ôôF k
(
ôôk l
IdCategoria
ôôl w
)
ôôw x
;
ôôx y
return
öö 
Json
öö 
(
öö 
items
öö !
)
öö! "
;
öö" #
}
õõ 
catch
úú 
(
úú 
	Exception
úú 
e
úú 
)
úú 
{
ùù 
return
ûû 
new
ûû "
JsonHttpStatusResult
ûû /
(
ûû/ 0
Util
ûû0 4
.
ûû4 5
	ErrorJson
ûû5 >
(
ûû> ?
e
ûû? @
)
ûû@ A
,
ûûA B
HttpStatusCode
ûûC Q
.
ûûQ R!
InternalServerError
ûûR e
)
ûûe f
;
ûûf g
}
üü 
}
†† 	
public
°° 
async
°° 
Task
°° 
<
°° 

JsonResult
°° $
>
°°$ %
ObtenerMozos
°°& 2
(
°°2 3
)
°°3 4
{
¢¢ 	
try
££ 
{
§§ 
var
•• 
mozos
•• 
=
•• 
await
•• !
restauranteLogica
••" 3
.
••3 4"
ObtenerMozosVigentes
••4 H
(
••H I
)
••I J
;
••J K
return
¶¶ 
Json
¶¶ 
(
¶¶ 
mozos
¶¶ !
)
¶¶! "
;
¶¶" #
}
ßß 
catch
®® 
(
®® 
	Exception
®® 
e
®® 
)
®® 
{
©© 
throw
™™ 
new
™™ !
ControllerException
™™ -
(
™™- .
$str
™™. S
,
™™S T
e
™™U V
)
™™V W
;
™™W X
}
´´ 
}
¨¨ 	
public
≤≤ 

JsonResult
≤≤ #
CrearAtencionConOrden
≤≤ /
(
≤≤/ 0!
AtencionRestaurante
≤≤0 C
atencion
≤≤D L
)
≤≤L M
{
≥≥ 	
try
¥¥ 
{
µµ 
OperationResult
∂∂ 
result
∂∂  &
=
∂∂' (
restauranteLogica
∂∂) :
.
∂∂: ;#
CrearAtencionConOrden
∂∂; P
(
∂∂P Q
atencion
∂∂Q Y
,
∂∂Y Z
SesionRestaurante
∂∂[ l
)
∂∂l m
;
∂∂m n
return
∑∑ 
Json
∑∑ 
(
∑∑ 
new
∑∑ 
{
∑∑  !
result
∑∑" (
.
∑∑( )
code_result
∑∑) 4
,
∑∑4 5
data
∑∑6 :
=
∑∑; <
result
∑∑= C
.
∑∑C D
information
∑∑D O
,
∑∑O P 
result_description
∑∑Q c
=
∑∑d e
result
∑∑f l
.
∑∑l m
title
∑∑m r
}
∑∑s t
)
∑∑t u
;
∑∑u v
}
∏∏ 
catch
ππ 
(
ππ 
	Exception
ππ 
e
ππ 
)
ππ 
{
∫∫ 
return
ªª 
new
ªª "
JsonHttpStatusResult
ªª /
(
ªª/ 0
Util
ªª0 4
.
ªª4 5
	ErrorJson
ªª5 >
(
ªª> ?
e
ªª? @
)
ªª@ A
,
ªªA B
HttpStatusCode
ªªC Q
.
ªªQ R!
InternalServerError
ªªR e
)
ªªe f
;
ªªf g
}
ºº 
}
ΩΩ 	
public
øø 

JsonResult
øø %
FinalizarAtencionCocina
øø 1
(
øø1 2
long
øø2 6

IdAtencion
øø7 A
)
øøA B
{
¿¿ 	
try
¡¡ 
{
¬¬ 
OperationResult
√√ 
result
√√  &
=
√√' (
restauranteLogica
√√) :
.
√√: ;%
FinalizarAtencionCocina
√√; R
(
√√R S

IdAtencion
√√S ]
)
√√] ^
;
√√^ _
return
ƒƒ 
Json
ƒƒ 
(
ƒƒ 
new
ƒƒ 
{
ƒƒ  !
result
ƒƒ" (
.
ƒƒ( )
code_result
ƒƒ) 4
,
ƒƒ4 5
data
ƒƒ6 :
=
ƒƒ; <
result
ƒƒ= C
.
ƒƒC D
information
ƒƒD O
,
ƒƒO P 
result_description
ƒƒQ c
=
ƒƒd e
result
ƒƒf l
.
ƒƒl m
title
ƒƒm r
}
ƒƒs t
)
ƒƒt u
;
ƒƒu v
}
≈≈ 
catch
∆∆ 
(
∆∆ 
	Exception
∆∆ 
e
∆∆ 
)
∆∆ 
{
«« 
return
»» 
new
»» "
JsonHttpStatusResult
»» /
(
»»/ 0
Util
»»0 4
.
»»4 5
	ErrorJson
»»5 >
(
»»> ?
e
»»? @
)
»»@ A
,
»»A B
HttpStatusCode
»»C Q
.
»»Q R!
InternalServerError
»»R e
)
»»e f
;
»»f g
}
…… 
}
   	
public
ÀÀ 

JsonResult
ÀÀ 
CerrarAtencion
ÀÀ (
(
ÀÀ( )
long
ÀÀ) -
Id
ÀÀ. 0
)
ÀÀ0 1
{
ÃÃ 	
try
ÕÕ 
{
ŒŒ 
OperationResult
œœ 
result
œœ  &
=
œœ' (
atencionLogica
œœ) 7
.
œœ7 89
+CerrarAtencionYSusOrdenesAtendiendoDetalles
œœ8 c
(
œœc d
Id
œœd f
,
œœf g
SesionRestaurante
œœh y
.
œœy z
SesionDeUsuarioœœz â
.œœâ ä
Empleadoœœä í
.œœí ì
Idœœì ï
)œœï ñ
;œœñ ó
return
–– 
Json
–– 
(
–– 
new
–– 
{
––  !
result
––" (
.
––( )
code_result
––) 4
,
––4 5
data
––6 :
=
––; <
result
––= C
.
––C D
information
––D O
,
––O P 
result_description
––Q c
=
––d e
result
––f l
.
––l m
title
––m r
,
––r s
result
––t z
.
––z {
objeto––{ Å
}––Ç É
)––É Ñ
;––Ñ Ö
}
—— 
catch
““ 
(
““ 
	Exception
““ 
e
““ 
)
““ 
{
”” 
return
‘‘ 
new
‘‘ "
JsonHttpStatusResult
‘‘ /
(
‘‘/ 0
Util
‘‘0 4
.
‘‘4 5
	ErrorJson
‘‘5 >
(
‘‘> ?
e
‘‘? @
)
‘‘@ A
,
‘‘A B
HttpStatusCode
‘‘C Q
.
‘‘Q R!
InternalServerError
‘‘R e
)
‘‘e f
;
‘‘f g
}
’’ 
}
◊◊ 	
public
ÿÿ 

JsonResult
ÿÿ '
ObtenerAtencionesCerradas
ÿÿ 3
(
ÿÿ3 4
string
ÿÿ4 :
desde
ÿÿ; @
,
ÿÿ@ A
string
ÿÿB H
hasta
ÿÿI N
)
ÿÿN O
{
ŸŸ 	
try
⁄⁄ 
{
€€ 
DateTime
‹‹ 

fechaDesde
‹‹ #
=
‹‹$ %
DateTimeUtil
‹‹& 2
.
‹‹2 39
+ObtenerFechaDesdeConPrecisionDeMilisegundos
‹‹3 ^
(
‹‹^ _
desde
‹‹_ d
)
‹‹d e
;
‹‹e f
DateTime
›› 

fechaHasta
›› #
=
››$ %
DateTimeUtil
››& 2
.
››2 39
+ObtenerFechaHastaConPrecisionDeMilisegundos
››3 ^
(
››^ _
hasta
››_ d
)
››d e
;
››e f
List
ﬁﬁ 
<
ﬁﬁ 
ResumenAtencion
ﬁﬁ $
>
ﬁﬁ$ %
	resumenes
ﬁﬁ& /
=
ﬁﬁ0 1
restauranteLogica
ﬁﬁ2 C
.
ﬁﬁC D.
 ObtenerResumenAtencionesCerradas
ﬁﬁD d
(
ﬁﬁd e

fechaDesde
ﬁﬁe o
,
ﬁﬁo p

fechaHasta
ﬁﬁq {
,
ﬁﬁ{ | 
SesionRestauranteﬁﬁ} é
)ﬁﬁé è
;ﬁﬁè ê
var
ﬂﬂ 

jsonResult
ﬂﬂ 
=
ﬂﬂ  
Json
ﬂﬂ! %
(
ﬂﬂ% &
	resumenes
ﬂﬂ& /
,
ﬂﬂ/ 0!
JsonRequestBehavior
ﬂﬂ1 D
.
ﬂﬂD E
AllowGet
ﬂﬂE M
)
ﬂﬂM N
;
ﬂﬂN O

jsonResult
‡‡ 
.
‡‡ 
MaxJsonLength
‡‡ (
=
‡‡) *
int
‡‡+ .
.
‡‡. /
MaxValue
‡‡/ 7
;
‡‡7 8
return
·· 

jsonResult
·· !
;
··! "
}
‚‚ 
catch
„„ 
(
„„ 
	Exception
„„ 
e
„„ 
)
„„ 
{
‰‰ 
return
ÂÂ 
new
ÂÂ "
JsonHttpStatusResult
ÂÂ /
(
ÂÂ/ 0
Util
ÂÂ0 4
.
ÂÂ4 5
	ErrorJson
ÂÂ5 >
(
ÂÂ> ?
new
ÂÂ? B
	Exception
ÂÂC L
(
ÂÂL M
$str
ÂÂM |
,
ÂÂ| }
e
ÂÂ~ 
)ÂÂ Ä
)ÂÂÄ Å
,ÂÂÅ Ç
HttpStatusCodeÂÂÉ ë
.ÂÂë í#
InternalServerErrorÂÂí •
)ÂÂ• ¶
;ÂÂ¶ ß
}
ÊÊ 
}
ÁÁ 	
public
ËË 

JsonResult
ËË *
ObtenerAtencionesConfirmadas
ËË 6
(
ËË6 7
)
ËË7 8
{
ÈÈ 	
try
ÍÍ 
{
ÎÎ 
List
ÏÏ 
<
ÏÏ !
AtencionRestaurante
ÏÏ (
>
ÏÏ( )

atenciones
ÏÏ* 4
=
ÏÏ5 6
restauranteLogica
ÏÏ7 H
.
ÏÏH I*
ObtenerAtencionesConfirmadas
ÏÏI e
(
ÏÏe f
)
ÏÏf g
.
ÏÏg h
ToList
ÏÏh n
(
ÏÏn o
)
ÏÏo p
;
ÏÏp q
return
ÌÌ 
Json
ÌÌ 
(
ÌÌ 

atenciones
ÌÌ &
)
ÌÌ& '
;
ÌÌ' (
}
ÓÓ 
catch
ÔÔ 
(
ÔÔ 
	Exception
ÔÔ 
e
ÔÔ 
)
ÔÔ 
{
 
return
ÒÒ 
new
ÒÒ "
JsonHttpStatusResult
ÒÒ /
(
ÒÒ/ 0
Util
ÒÒ0 4
.
ÒÒ4 5
	ErrorJson
ÒÒ5 >
(
ÒÒ> ?
e
ÒÒ? @
)
ÒÒ@ A
,
ÒÒA B
HttpStatusCode
ÒÒC Q
.
ÒÒQ R!
InternalServerError
ÒÒR e
)
ÒÒe f
;
ÒÒf g
}
ÚÚ 
}
ÛÛ 	
public
ÙÙ 

JsonResult
ÙÙ &
ObtenerAtencionesSinMesa
ÙÙ 2
(
ÙÙ2 3
int
ÙÙ3 6
idCentroAtencion
ÙÙ7 G
)
ÙÙG H
{
ıı 	
try
ˆˆ 
{
˜˜ 
List
¯¯ 
<
¯¯ 
AtencionSinMesa
¯¯ $
>
¯¯$ %

atenciones
¯¯& 0
=
¯¯1 2
restauranteLogica
¯¯3 D
.
¯¯D E&
ObtenerAtencionesSinMesa
¯¯E ]
(
¯¯] ^
idCentroAtencion
¯¯^ n
)
¯¯n o
.
¯¯o p
ToList
¯¯p v
(
¯¯v w
)
¯¯w x
;
¯¯x y
return
˘˘ 
Json
˘˘ 
(
˘˘ 

atenciones
˘˘ &
)
˘˘& '
;
˘˘' (
}
˙˙ 
catch
˚˚ 
(
˚˚ 
	Exception
˚˚ 
e
˚˚ 
)
˚˚ 
{
¸¸ 
return
˝˝ 
new
˝˝ "
JsonHttpStatusResult
˝˝ /
(
˝˝/ 0
Util
˝˝0 4
.
˝˝4 5
	ErrorJson
˝˝5 >
(
˝˝> ?
e
˝˝? @
)
˝˝@ A
,
˝˝A B
HttpStatusCode
˝˝C Q
.
˝˝Q R!
InternalServerError
˝˝R e
)
˝˝e f
;
˝˝f g
}
˛˛ 
}
ˇˇ 	
public
ÄÄ 

JsonResult
ÄÄ '
ObtenerAtencionEspecifica
ÄÄ 3
(
ÄÄ3 4
long
ÄÄ4 8
id
ÄÄ9 ;
)
ÄÄ; <
{
ÅÅ 	
try
ÇÇ 
{
ÉÉ !
AtencionRestaurante
ÑÑ #
atencion
ÑÑ$ ,
=
ÑÑ- .
restauranteLogica
ÑÑ/ @
.
ÑÑ@ A'
ObtenerAtencionEspecifica
ÑÑA Z
(
ÑÑZ [
id
ÑÑ[ ]
)
ÑÑ] ^
;
ÑÑ^ _
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
atencion
ÖÖ $
)
ÖÖ$ %
;
ÖÖ% &
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
e
áá 
)
áá 
{
àà 
return
ââ 
new
ââ "
JsonHttpStatusResult
ââ /
(
ââ/ 0
Util
ââ0 4
.
ââ4 5
	ErrorJson
ââ5 >
(
ââ> ?
e
ââ? @
)
ââ@ A
,
ââA B
HttpStatusCode
ââC Q
.
ââQ R!
InternalServerError
ââR e
)
ââe f
;
ââf g
}
ää 
}
åå 	
public
íí 

JsonResult
íí 
FacturarAtencion
íí *
(
íí* +!
AtencionRestaurante
íí+ >
atencion
íí? G
)
ííG H
{
ìì 	
try
îî 
{
ïï 
var
ññ 
result
ññ 
=
ññ 
restauranteLogica
ññ .
.
ññ. /"
ConfirmarFacturacion
ññ/ C
(
ññC D
atencion
ññD L
,
ññL M
SesionRestaurante
ññN _
)
ññ_ `
;
ññ` a
OperationResult
óó 
	resultado
óó  )
=
óó* +'
GenerarDocumentosAtencion
óó, E
(
óóE F
atencion
óóF N
.
óóN O
Id
óóO Q
,
óóQ R
(
óóS T

Dictionary
óóT ^
<
óó^ _
long
óó_ c
,
óóc d
long
óóe i
>
óói j
)
óój k
result
óók q
.
óóq r
objeto
óór x
)
óóx y
;
óóy z
return
òò 
Json
òò 
(
òò 
new
òò 
{
òò  !
	resultado
òò" +
.
òò+ ,
code_result
òò, 7
,
òò7 8
	resultado
òò9 B
.
òòB C
information
òòC N
,
òòN O 
result_description
òòP b
=
òòc d
	resultado
òòe n
.
òòn o
title
òòo t
,
òòt u
	resultado
òòv 
.òò Ä
objetoòòÄ Ü
}òòá à
)òòà â
;òòâ ä
}
ôô 
catch
öö 
(
öö 
	Exception
öö 
e
öö 
)
öö 
{
õõ 
return
úú 
new
úú "
JsonHttpStatusResult
úú /
(
úú/ 0
Util
úú0 4
.
úú4 5
	ErrorJson
úú5 >
(
úú> ?
e
úú? @
)
úú@ A
,
úúA B
HttpStatusCode
úúC Q
.
úúQ R!
InternalServerError
úúR e
)
úúe f
;
úúf g
}
ùù 
}
ûû 	
public
•• 

JsonResult
•• #
ConfirmarPagoAtencion
•• /
(
••/ 0
long
••0 4

idAtencion
••5 ?
)
••? @
{
¶¶ 	
try
ßß 
{
®® 
OperationResult
©© 
result
©©  &
=
©©' (
restauranteLogica
©©) :
.
©©: ;#
ConfirmarPagoAtencion
©©; P
(
©©P Q

idAtencion
©©Q [
,
©©[ \
SesionRestaurante
©©] n
)
©©n o
;
©©o p
return
™™ 
Json
™™ 
(
™™ 
result
™™ "
)
™™" #
;
™™# $
}
´´ 
catch
¨¨ 
(
¨¨ 
	Exception
¨¨ 
e
¨¨ 
)
¨¨ 
{
≠≠ 
return
ÆÆ 
new
ÆÆ "
JsonHttpStatusResult
ÆÆ /
(
ÆÆ/ 0
Util
ÆÆ0 4
.
ÆÆ4 5
	ErrorJson
ÆÆ5 >
(
ÆÆ> ?
e
ÆÆ? @
)
ÆÆ@ A
,
ÆÆA B
HttpStatusCode
ÆÆC Q
.
ÆÆQ R!
InternalServerError
ÆÆR e
)
ÆÆe f
;
ÆÆf g
}
ØØ 
}
∞∞ 	
public
≤≤ 
OperationResult
≤≤ '
GenerarDocumentosAtencion
≤≤ 8
(
≤≤8 9
long
≤≤9 =

idAtencion
≤≤> H
,
≤≤H I

Dictionary
≤≤J T
<
≤≤T U
long
≤≤U Y
,
≤≤Y Z
long
≤≤[ _
>
≤≤_ `%
diccionarioIdOrdenVenta
≤≤a x
)
≤≤x y
{
≥≥ 	
try
¥¥ 
{
µµ 
OperationResult
∂∂ 
	resultado
∂∂  )
=
∂∂* +
new
∂∂, /
OperationResult
∂∂0 ?
(
∂∂? @
)
∂∂@ A
;
∂∂A B
List
∑∑ 
<
∑∑ ,
DocumentoComprobanteOrdenVenta
∑∑ 3
>
∑∑3 4

documentos
∑∑5 ?
=
∑∑@ A
new
∑∑B E
List
∑∑F J
<
∑∑J K,
DocumentoComprobanteOrdenVenta
∑∑K i
>
∑∑i j
(
∑∑j k
)
∑∑k l
;
∑∑l m
var
∏∏ 
sede
∏∏ 
=
∏∏ 
ObtenerSede
∏∏ &
(
∏∏& '
)
∏∏' (
;
∏∏( )
foreach
∫∫ 
(
∫∫ 
var
∫∫ 
item
∫∫ !
in
∫∫" $%
diccionarioIdOrdenVenta
∫∫% <
)
∫∫< =
{
ªª 
OrdenDeVenta
ºº  
ordenDeVenta
ºº! -
=
ºº. /
operacionLogica
ºº0 ?
.
ºº? @!
ObtenerOrdenDeVenta
ºº@ S
(
ººS T
item
ººT X
.
ººX Y
Value
ººY ^
)
ºº^ _
;
ºº_ `
string
ΩΩ 
	QrContent
ΩΩ $
=
ΩΩ% &*
facturacionElectronicaLogica
ΩΩ' C
.
ΩΩC D
	ObtenerQR
ΩΩD M
(
ΩΩM N
ordenDeVenta
ΩΩN Z
,
ΩΩZ [
sede
ΩΩ\ `
)
ΩΩ` a
;
ΩΩa b
byte
ææ 
[
ææ 
]
ææ 
QrBytes
ææ "
=
ææ# $
barCodeUtil
ææ% 0
.
ææ0 1
ObtenerCodigoQR
ææ1 @
(
ææ@ A
	QrContent
ææA J
)
ææJ K
;
ææK L
var
øø 
htmlString80
øø $
=
øø% &#
CoreHtmlStringBuilder
øø' <
.
øø< =
ObtenerHtmlString
øø= N
(
øøN O
ordenDeVenta
øøO [
,
øø[ \
FormatoImpresion
øø] m
.
øøm n
_80mm
øøn s
,
øøs t
QrBytes
øøu |
,
øø| }
sedeøø~ Ç
,øøÇ É
thisøøÑ à
,øøà â
maestroLogicaøøä ó
)øøó ò
;øøò ô
var
¿¿ 
htmlStringA4
¿¿ $
=
¿¿% &#
CoreHtmlStringBuilder
¿¿' <
.
¿¿< =
ObtenerHtmlString
¿¿= N
(
¿¿N O
ordenDeVenta
¿¿O [
,
¿¿[ \
FormatoImpresion
¿¿] m
.
¿¿m n
A4
¿¿n p
,
¿¿p q
QrBytes
¿¿r y
,
¿¿y z
sede
¿¿{ 
,¿¿ Ä
this¿¿Å Ö
,¿¿Ö Ü
maestroLogica¿¿á î
)¿¿î ï
;¿¿ï ñ

documentos
¡¡ 
.
¡¡ 
Add
¡¡ "
(
¡¡" #
new
¡¡# &,
DocumentoComprobanteOrdenVenta
¡¡' E
(
¡¡E F
)
¡¡F G
{
¬¬ 
Id
√√ 
=
√√ 
item
√√ !
.
√√! "
Key
√√" %
,
√√% &
IdOrden
ƒƒ 
=
ƒƒ  !
item
ƒƒ" &
.
ƒƒ& '
Value
ƒƒ' ,
,
ƒƒ, -'
CadenaHtmlDeComprobante80
≈≈ 1
=
≈≈2 3
htmlString80
≈≈4 @
,
≈≈@ A'
CadenaHtmlDeComprobanteA4
∆∆ 1
=
∆∆2 3
htmlStringA4
∆∆4 @
}
«« 
)
«« 
;
«« 
}
»» 
var
…… !
comprobanteAtencion
…… '
=
……( )
restauranteLogica
……* ;
.
……; <.
 ObtenerComprobanteCuentaAtencion
……< \
(
……\ ]

idAtencion
……] g
)
……g h
;
……h i
string
   

htmlString
   !
=
  " #
HtmlStringBuilder
  # 4
.
  4 5%
RenderRazorViewToString
  5 L
(
  L M
$str  M à
,  à â#
comprobanteAtencion  ä ù
,  ù û
this  ü £
)  £ §
;  § •
	resultado
ÀÀ 
.
ÀÀ 
title
ÀÀ 
=
ÀÀ  !%
OperationResultSettings
ÀÀ" 9
.
ÀÀ9 :
Default
ÀÀ: A
.
ÀÀA B/
!OperationResultSuccessDescription
ÀÀB c
;
ÀÀc d
	resultado
ÃÃ 
.
ÃÃ 
objeto
ÃÃ  
=
ÃÃ! "

htmlString
ÃÃ# -
;
ÃÃ- .
	resultado
ÕÕ 
.
ÕÕ 
information
ÕÕ %
=
ÕÕ& '

documentos
ÕÕ( 2
;
ÕÕ2 3
return
ŒŒ 
	resultado
ŒŒ  
;
ŒŒ  !
}
œœ 
catch
–– 
(
–– 
	Exception
–– 
e
–– 
)
–– 
{
—— 
throw
““ 
new
““ !
ControllerException
““ -
(
““- .
$str
““. d
,
““d e
e
““f g
)
““g h
;
““h i
}
”” 
}
‘‘ 	
public
÷÷ 

JsonResult
÷÷ '
ObtenerDocumentosAtencion
÷÷ 3
(
÷÷3 4
long
÷÷4 8

idAtencion
÷÷9 C
)
÷÷C D
{
◊◊ 	
try
ÿÿ 
{
ŸŸ 
var
⁄⁄ %
diccionarioIdOrdenVenta
⁄⁄ +
=
⁄⁄, -
restauranteLogica
⁄⁄. ?
.
⁄⁄? @.
 ObtenerIdsOrdenDeVentaDeAtencion
⁄⁄@ `
(
⁄⁄` a

idAtencion
⁄⁄a k
)
⁄⁄k l
;
⁄⁄l m
var
€€ 
	resultado
€€ 
=
€€ '
GenerarDocumentosAtencion
€€  9
(
€€9 :

idAtencion
€€: D
,
€€D E%
diccionarioIdOrdenVenta
€€E \
)
€€\ ]
;
€€] ^
return
‹‹ 
Json
‹‹ 
(
‹‹ 
new
‹‹ 
{
‹‹  !
	resultado
‹‹" +
.
‹‹+ ,
code_result
‹‹, 7
,
‹‹7 8
	resultado
‹‹9 B
.
‹‹B C
information
‹‹C N
,
‹‹N O 
result_description
‹‹P b
=
‹‹c d
	resultado
‹‹e n
.
‹‹n o
title
‹‹o t
,
‹‹t u
	resultado
‹‹v 
.‹‹ Ä
objeto‹‹Ä Ü
}‹‹á à
)‹‹à â
;‹‹â ä
}
›› 
catch
ﬁﬁ 
(
ﬁﬁ 
	Exception
ﬁﬁ 
e
ﬁﬁ 
)
ﬁﬁ 
{
ﬂﬂ 
return
‡‡ 
new
‡‡ "
JsonHttpStatusResult
‡‡ /
(
‡‡/ 0
Util
‡‡0 4
.
‡‡4 5
	ErrorJson
‡‡5 >
(
‡‡> ?
e
‡‡? @
)
‡‡@ A
,
‡‡A B
HttpStatusCode
‡‡C Q
.
‡‡Q R!
InternalServerError
‡‡R e
)
‡‡e f
;
‡‡f g
}
·· 
}
‚‚ 	
public
ËË 

JsonResult
ËË $
AgregarOrdenDeAtencion
ËË 0
(
ËË0 1
Orden_Atencion
ËË1 ?
Orden
ËË@ E
)
ËËE F
{
ÈÈ 	
try
ÍÍ 
{
ÎÎ 
var
ÏÏ 
result
ÏÏ 
=
ÏÏ 
restauranteLogica
ÏÏ .
.
ÏÏ. /$
AgregarOrdenDeAtencion
ÏÏ/ E
(
ÏÏE F
Orden
ÏÏF K
,
ÏÏK L
SesionRestaurante
ÏÏM ^
)
ÏÏ^ _
;
ÏÏ_ `
return
ÌÌ 
Json
ÌÌ 
(
ÌÌ 
new
ÌÌ 
{
ÌÌ  !
result
ÌÌ" (
.
ÌÌ( )
code_result
ÌÌ) 4
,
ÌÌ4 5
data
ÌÌ6 :
=
ÌÌ; <
result
ÌÌ= C
.
ÌÌC D
information
ÌÌD O
,
ÌÌO P 
result_description
ÌÌQ c
=
ÌÌd e
result
ÌÌf l
.
ÌÌl m
title
ÌÌm r
}
ÌÌs t
)
ÌÌt u
;
ÌÌu v
}
ÓÓ 
catch
ÔÔ 
(
ÔÔ 
	Exception
ÔÔ 
e
ÔÔ 
)
ÔÔ 
{
 
return
ÒÒ 
new
ÒÒ "
JsonHttpStatusResult
ÒÒ /
(
ÒÒ/ 0
Util
ÒÒ0 4
.
ÒÒ4 5
	ErrorJson
ÒÒ5 >
(
ÒÒ> ?
e
ÒÒ? @
)
ÒÒ@ A
,
ÒÒA B
HttpStatusCode
ÒÒC Q
.
ÒÒQ R!
InternalServerError
ÒÒR e
)
ÒÒe f
;
ÒÒf g
}
ÚÚ 
}
ÛÛ 	
public
ÙÙ 

JsonResult
ÙÙ "
CambiarEstadoDeOrden
ÙÙ .
(
ÙÙ. /
long
ÙÙ/ 3
IdOrden
ÙÙ4 ;
,
ÙÙ; <
int
ÙÙ= @
Estado
ÙÙA G
)
ÙÙG H
{
ıı 	
try
ˆˆ 
{
˜˜ 
OperationResult
¯¯ 
result
¯¯  &
=
¯¯' (
restauranteLogica
¯¯) :
.
¯¯: ;"
CambiarEstadoDeOrden
¯¯; O
(
¯¯O P
IdOrden
¯¯P W
,
¯¯W X
Estado
¯¯Y _
)
¯¯_ `
;
¯¯` a
return
˘˘ 
Json
˘˘ 
(
˘˘ 
new
˘˘ 
{
˘˘  !
result
˘˘" (
.
˘˘( )
code_result
˘˘) 4
,
˘˘4 5
data
˘˘6 :
=
˘˘; <
result
˘˘= C
.
˘˘C D
information
˘˘D O
,
˘˘O P 
result_description
˘˘Q c
=
˘˘d e
result
˘˘f l
.
˘˘l m
title
˘˘m r
}
˘˘s t
)
˘˘t u
;
˘˘u v
}
˙˙ 
catch
˚˚ 
(
˚˚ 
	Exception
˚˚ 
e
˚˚ 
)
˚˚ 
{
¸¸ 
return
˝˝ 
new
˝˝ "
JsonHttpStatusResult
˝˝ /
(
˝˝/ 0
Util
˝˝0 4
.
˝˝4 5
	ErrorJson
˝˝5 >
(
˝˝> ?
e
˝˝? @
)
˝˝@ A
,
˝˝A B
HttpStatusCode
˝˝C Q
.
˝˝Q R!
InternalServerError
˝˝R e
)
˝˝e f
;
˝˝f g
}
˛˛ 
}
ˇˇ 	
public
ÄÄ 

JsonResult
ÄÄ $
CambiarEstadoDeOrdenes
ÄÄ 0
(
ÄÄ0 1
long
ÄÄ1 5
[
ÄÄ5 6
]
ÄÄ6 7
Ids
ÄÄ8 ;
,
ÄÄ; <
int
ÄÄ= @
Estado
ÄÄA G
)
ÄÄG H
{
ÅÅ 	
try
ÇÇ 
{
ÉÉ 
OperationResult
ÑÑ 
result
ÑÑ  &
=
ÑÑ' (
restauranteLogica
ÑÑ) :
.
ÑÑ: ;$
CambiarEstadoDeOrdenes
ÑÑ; Q
(
ÑÑQ R
Ids
ÑÑR U
,
ÑÑU V
Estado
ÑÑW ]
)
ÑÑ] ^
;
ÑÑ^ _
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
new
ÖÖ 
{
ÖÖ  !
result
ÖÖ" (
.
ÖÖ( )
code_result
ÖÖ) 4
,
ÖÖ4 5
data
ÖÖ6 :
=
ÖÖ; <
result
ÖÖ= C
.
ÖÖC D
information
ÖÖD O
,
ÖÖO P 
result_description
ÖÖQ c
=
ÖÖd e
result
ÖÖf l
.
ÖÖl m
title
ÖÖm r
}
ÖÖs t
)
ÖÖt u
;
ÖÖu v
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
e
áá 
)
áá 
{
àà 
return
ââ 
new
ââ "
JsonHttpStatusResult
ââ /
(
ââ/ 0
Util
ââ0 4
.
ââ4 5
	ErrorJson
ââ5 >
(
ââ> ?
e
ââ? @
)
ââ@ A
,
ââA B
HttpStatusCode
ââC Q
.
ââQ R!
InternalServerError
ââR e
)
ââe f
;
ââf g
}
ää 
}
ãã 	
public
åå 

JsonResult
åå %
ObtenerOrdenesPorEstado
åå 1
(
åå1 2
int
åå2 5
	NumEstado
åå6 ?
)
åå? @
{
çç 	
try
éé 
{
èè 
List
êê 
<
êê 
Orden_Atencion
êê #
>
êê# $
ordenes
êê% ,
=
êê- .
new
êê/ 2
List
êê3 7
<
êê7 8
Orden_Atencion
êê8 F
>
êêF G
(
êêG H
)
êêH I
;
êêI J
ordenes
ëë 
=
ëë 
restauranteLogica
ëë +
.
ëë+ ,%
ObtenerOrdenesPorEstado
ëë, C
(
ëëC D
	NumEstado
ëëD M
)
ëëM N
;
ëëN O
return
íí 
Json
íí 
(
íí 
ordenes
íí #
)
íí# $
;
íí$ %
}
ìì 
catch
îî 
(
îî 
	Exception
îî 
e
îî 
)
îî 
{
ïï 
return
ññ 
new
ññ "
JsonHttpStatusResult
ññ /
(
ññ/ 0
Util
ññ0 4
.
ññ4 5
	ErrorJson
ññ5 >
(
ññ> ?
e
ññ? @
)
ññ@ A
,
ññA B
HttpStatusCode
ññC Q
.
ññQ R!
InternalServerError
ññR e
)
ññe f
;
ññf g
}
óó 
}
òò 	
public
ôô 

JsonResult
ôô '
ObtenerOrdenesConfirmadas
ôô 3
(
ôô3 4
)
ôô4 5
{
öö 	
try
õõ 
{
úú 
List
ùù 
<
ùù 
Orden_Atencion
ùù #
>
ùù# $
ordenes
ùù% ,
=
ùù- .
new
ùù/ 2
List
ùù3 7
<
ùù7 8
Orden_Atencion
ùù8 F
>
ùùF G
(
ùùG H
)
ùùH I
;
ùùI J
ordenes
ûû 
=
ûû 
restauranteLogica
ûû +
.
ûû+ ,%
ObtenerOrdenesPorEstado
ûû, C
(
ûûC D
MaestroSettings
ûûD S
.
ûûS T
Default
ûûT [
.
ûû[ \.
 IdDetalleMaestroEstadoConfirmado
ûû\ |
)
ûû| }
;
ûû} ~
return
üü 
Json
üü 
(
üü 
ordenes
üü #
)
üü# $
;
üü$ %
}
†† 
catch
°° 
(
°° 
	Exception
°° 
e
°° 
)
°° 
{
¢¢ 
return
££ 
new
££ "
JsonHttpStatusResult
££ /
(
££/ 0
Util
££0 4
.
££4 5
	ErrorJson
££5 >
(
££> ?
e
££? @
)
££@ A
,
££A B
HttpStatusCode
££C Q
.
££Q R!
InternalServerError
££R e
)
££e f
;
££f g
}
§§ 
}
•• 	
public
¶¶ 

JsonResult
¶¶ 4
&ObtenerOrdenesPorEstadoDesdeUnAmbiente
¶¶ @
(
¶¶@ A
int
¶¶A D
	NumEstado
¶¶E N
,
¶¶N O
int
¶¶P S

IdAmbiente
¶¶T ^
)
¶¶^ _
{
ßß 	
try
®® 
{
©© 
List
™™ 
<
™™ 
Orden_Atencion
™™ #
>
™™# $
ordenes
™™% ,
=
™™- .
new
™™/ 2
List
™™3 7
<
™™7 8
Orden_Atencion
™™8 F
>
™™F G
(
™™G H
)
™™H I
;
™™I J
ordenes
¨¨ 
=
¨¨ 
restauranteLogica
¨¨ +
.
¨¨+ ,4
&ObtenerOrdenesPorEstadoDesdeUnAmbiente
¨¨, R
(
¨¨R S
	NumEstado
¨¨S \
,
¨¨\ ]

IdAmbiente
¨¨^ h
)
¨¨h i
;
¨¨i j
return
ÆÆ 
Json
ÆÆ 
(
ÆÆ 
ordenes
ÆÆ #
)
ÆÆ# $
;
ÆÆ$ %
}
∞∞ 
catch
±± 
(
±± 
	Exception
±± 
e
±± 
)
±± 
{
≤≤ 
return
≥≥ 
new
≥≥ "
JsonHttpStatusResult
≥≥ /
(
≥≥/ 0
Util
≥≥0 4
.
≥≥4 5
	ErrorJson
≥≥5 >
(
≥≥> ?
e
≥≥? @
)
≥≥@ A
,
≥≥A B
HttpStatusCode
≥≥C Q
.
≥≥Q R!
InternalServerError
≥≥R e
)
≥≥e f
;
≥≥f g
}
¥¥ 
}
µµ 	
public
∂∂ 

JsonResult
∂∂ 
CerrarOrden
∂∂ %
(
∂∂% &
long
∂∂& *
idOrden
∂∂+ 2
)
∂∂2 3
{
∑∑ 	
try
∏∏ 
{
ππ 
OperationResult
∫∫ 
result
∫∫  &
=
∫∫' (
restauranteLogica
∫∫) :
.
∫∫: ;
CerrarOrden
∫∫; F
(
∫∫F G
idOrden
∫∫G N
)
∫∫N O
;
∫∫O P
return
ªª 
Json
ªª 
(
ªª 
new
ªª 
{
ªª  !
result
ªª" (
.
ªª( )
code_result
ªª) 4
,
ªª4 5
data
ªª6 :
=
ªª; <
result
ªª= C
.
ªªC D
information
ªªD O
,
ªªO P 
result_description
ªªQ c
=
ªªd e
result
ªªf l
.
ªªl m
title
ªªm r
}
ªªs t
)
ªªt u
;
ªªu v
}
ºº 
catch
ΩΩ 
(
ΩΩ 
	Exception
ΩΩ 
e
ΩΩ 
)
ΩΩ 
{
ææ 
return
øø 
new
øø "
JsonHttpStatusResult
øø /
(
øø/ 0
Util
øø0 4
.
øø4 5
	ErrorJson
øø5 >
(
øø> ?
e
øø? @
)
øø@ A
,
øøA B
HttpStatusCode
øøC Q
.
øøQ R!
InternalServerError
øøR e
)
øøe f
;
øøf g
}
¿¿ 
}
¬¬ 	
public
»» 
ActionResult
»» 
ObtenerOrdenPDF
»» +
(
»»+ ,
long
»», 0
idOrden
»»1 8
)
»»8 9
{
…… 	
var
   
sede
   
=
   
ObtenerSede
   "
(
  " #
)
  # $
;
  $ %
var
ÀÀ 
comprobanteOrden
ÀÀ  
=
ÀÀ! "
restauranteLogica
ÀÀ# 4
.
ÀÀ4 55
'ObtenerComprobanteOrdenSinItemsAnulados
ÀÀ5 \
(
ÀÀ\ ]
idOrden
ÀÀ] d
)
ÀÀd e
;
ÀÀe f
var
ÃÃ 
PDForden
ÃÃ 
=
ÃÃ 
ObtenerPdfOrden
ÃÃ *
(
ÃÃ* +
comprobanteOrden
ÃÃ+ ;
,
ÃÃ; <
sede
ÃÃ= A
,
ÃÃA B
FormatoImpresion
ÃÃC S
.
ÃÃS T
_80mm
ÃÃT Y
)
ÃÃY Z
;
ÃÃZ [
PDForden
ÕÕ 
.
ÕÕ 
ViewerPreferences
ÕÕ &
.
ÕÕ& '
	FitWindow
ÕÕ' 0
=
ÕÕ1 2
false
ÕÕ3 8
;
ÕÕ8 9
return
ŒŒ 
base
ŒŒ 
.
ŒŒ 
File
ŒŒ 
(
ŒŒ 
PDForden
ŒŒ %
.
ŒŒ% &
Save
ŒŒ& *
(
ŒŒ* +
)
ŒŒ+ ,
,
ŒŒ, -
$str
ŒŒ. ?
)
ŒŒ? @
;
ŒŒ@ A
}
œœ 	
public
—— 
ActionResult
——  
ObtenerAtencionPDF
—— .
(
——. /
long
——/ 3

idAtencion
——4 >
)
——> ?
{
““ 	
var
”” 
sede
”” 
=
”” 
ObtenerSede
”” "
(
””" #
)
””# $
;
””$ %
var
‘‘ !
comprobanteAtencion
‘‘ #
=
‘‘$ %
restauranteLogica
‘‘& 7
.
‘‘7 8.
 ObtenerComprobanteCuentaAtencion
‘‘8 X
(
‘‘X Y

idAtencion
‘‘Y c
)
‘‘c d
;
‘‘d e
string
’’ 

htmlString
’’ 
=
’’ )
RestaurantHtmlStringBuilder
’’  ;
.
’’; <
ObtenerHtmlString
’’< M
(
’’M N!
comprobanteAtencion
’’N a
,
’’a b
FormatoImpresion
’’c s
.
’’s t
_80mm
’’t y
,
’’y z
sede
’’{ 
,’’ Ä
this’’Å Ö
)’’Ö Ü
;’’Ü á
var
ÿÿ 
documentoPdf
ÿÿ 
=
ÿÿ 
pdfUtil
ÿÿ &
.
ÿÿ& '!
ObtenerPdfDocumento
ÿÿ' :
(
ÿÿ: ;

htmlString
ÿÿ; E
,
ÿÿE F
FormatoImpresion
ÿÿG W
.
ÿÿW X
_80mm
ÿÿX ]
)
ÿÿ] ^
;
ÿÿ^ _
documentoPdf
ŸŸ 
.
ŸŸ 
ViewerPreferences
ŸŸ *
.
ŸŸ* +
	FitWindow
ŸŸ+ 4
=
ŸŸ5 6
false
ŸŸ7 <
;
ŸŸ< =
return
⁄⁄ 
base
⁄⁄ 
.
⁄⁄ 
File
⁄⁄ 
(
⁄⁄ 
documentoPdf
⁄⁄ )
.
⁄⁄) *
Save
⁄⁄* .
(
⁄⁄. /
)
⁄⁄/ 0
,
⁄⁄0 1
$str
⁄⁄2 C
)
⁄⁄C D
;
⁄⁄D E
}
€€ 	
public
›› 
string
›› &
ObtenerAtencionPDFString
›› .
(
››. /
long
››/ 3

idAtencion
››4 >
)
››> ?
{
ﬁﬁ 	
var
ﬂﬂ 
sede
ﬂﬂ 
=
ﬂﬂ 
ObtenerSede
ﬂﬂ "
(
ﬂﬂ" #
)
ﬂﬂ# $
;
ﬂﬂ$ %
var
‡‡ !
comprobanteAtencion
‡‡ #
=
‡‡$ %
restauranteLogica
‡‡& 7
.
‡‡7 8.
 ObtenerComprobanteCuentaAtencion
‡‡8 X
(
‡‡X Y

idAtencion
‡‡Y c
)
‡‡c d
;
‡‡d e
string
·· 

htmlString
·· 
=
·· )
RestaurantHtmlStringBuilder
··  ;
.
··; <
ObtenerHtmlString
··< M
(
··M N!
comprobanteAtencion
··N a
,
··a b
FormatoImpresion
··c s
.
··s t
_80mm
··t y
,
··y z
sede
··{ 
,·· Ä
this··Å Ö
)··Ö Ü
;··Ü á
var
„„ 
documentoPdf
„„ 
=
„„ 
pdfUtil
„„ &
.
„„& '!
ObtenerPdfDocumento
„„' :
(
„„: ;

htmlString
„„; E
,
„„E F
FormatoImpresion
„„G W
.
„„W X
_80mm
„„X ]
)
„„] ^
;
„„^ _
byte
‰‰ 
[
‰‰ 
]
‰‰ 
	fileBytes
‰‰ 
=
‰‰ 
documentoPdf
‰‰ +
.
‰‰+ ,
Save
‰‰, 0
(
‰‰0 1
)
‰‰1 2
;
‰‰2 3
return
ÂÂ 
Convert
ÂÂ 
.
ÂÂ 
ToBase64String
ÂÂ )
(
ÂÂ) *
	fileBytes
ÂÂ* 3
)
ÂÂ3 4
;
ÂÂ4 5
}
ÊÊ 	
public
ËË 
ActionResult
ËË 
ObtenerOrdenHtml
ËË ,
(
ËË, -
long
ËË- 1
idOrden
ËË2 9
)
ËË9 :
{
ÈÈ 	
var
ÎÎ 
sede
ÎÎ 
=
ÎÎ 
ObtenerSede
ÎÎ "
(
ÎÎ" #
)
ÎÎ# $
;
ÎÎ$ %
var
ÏÏ 
comprobanteOrden
ÏÏ  
=
ÏÏ! "
restauranteLogica
ÏÏ# 4
.
ÏÏ4 55
'ObtenerComprobanteOrdenSinItemsAnulados
ÏÏ5 \
(
ÏÏ\ ]
idOrden
ÏÏ] d
)
ÏÏd e
;
ÏÏe f
string
ÌÌ 

htmlString
ÌÌ 
=
ÌÌ )
RestaurantHtmlStringBuilder
ÌÌ  ;
.
ÌÌ; <
ObtenerHtmlString
ÌÌ< M
(
ÌÌM N
comprobanteOrden
ÌÌN ^
,
ÌÌ^ _
FormatoImpresion
ÌÌ` p
.
ÌÌp q
_80mm
ÌÌq v
,
ÌÌv w
sede
ÌÌx |
,
ÌÌ| }
thisÌÌ~ Ç
)ÌÌÇ É
;ÌÌÉ Ñ
return
ÓÓ 
Json
ÓÓ 
(
ÓÓ 

htmlString
ÓÓ "
)
ÓÓ" #
;
ÓÓ# $
}
ÔÔ 	
public
ÒÒ 
ActionResult
ÒÒ !
ObtenerAtencionHtml
ÒÒ /
(
ÒÒ/ 0
long
ÒÒ0 4

idAtencion
ÒÒ5 ?
)
ÒÒ? @
{
ÚÚ 	
var
ÛÛ 
sede
ÛÛ 
=
ÛÛ 
ObtenerSede
ÛÛ "
(
ÛÛ" #
)
ÛÛ# $
;
ÛÛ$ %
var
ÙÙ !
comprobanteAtencion
ÙÙ #
=
ÙÙ$ %
restauranteLogica
ÙÙ& 7
.
ÙÙ7 8.
 ObtenerComprobanteCuentaAtencion
ÙÙ8 X
(
ÙÙX Y

idAtencion
ÙÙY c
)
ÙÙc d
;
ÙÙd e
string
ıı 

htmlString
ıı 
=
ıı )
RestaurantHtmlStringBuilder
ıı  ;
.
ıı; <
ObtenerHtmlString
ıı< M
(
ııM N!
comprobanteAtencion
ııN a
,
ııa b
FormatoImpresion
ııc s
.
ııs t
_80mm
ııt y
,
ııy z
sede
ıı{ 
,ıı Ä
thisııÅ Ö
)ııÖ Ü
;ııÜ á
return
ˆˆ 
Json
ˆˆ 
(
ˆˆ 

htmlString
ˆˆ "
)
ˆˆ" #
;
ˆˆ# $
}
˜˜ 	
public
˚˚ 
void
˚˚ 
Imprimir
˚˚ 
(
˚˚ 
int
˚˚  
tipoDocumento
˚˚! .
,
˚˚. /
int
˚˚0 3
idDocumento
˚˚4 ?
)
˚˚? @
{
¸¸ 	
switch
˝˝ 
(
˝˝ 
tipoDocumento
˝˝ !
)
˝˝! "
{
˛˛ 
case
ˇˇ 
$num
ˇˇ 
:
ˇˇ 
ImprimirOrden
ˇˇ $
(
ˇˇ$ %
idDocumento
ˇˇ% 0
)
ˇˇ0 1
;
ˇˇ1 2
break
ˇˇ2 7
;
ˇˇ7 8
case
ÄÄ 
$num
ÄÄ 
:
ÄÄ 
ImprimirCuenta
ÄÄ &
(
ÄÄ& '
idDocumento
ÄÄ' 2
)
ÄÄ2 3
;
ÄÄ3 4
break
ÄÄ5 :
;
ÄÄ: ;
default
ÅÅ 
:
ÅÅ 
break
ÇÇ 
;
ÇÇ 
}
ÉÉ 
}
ÑÑ 	
public
ÖÖ 
PdfDocument
ÖÖ 
ObtenerPdfOrden
ÖÖ *
(
ÖÖ* +
ComprobanteOrden
ÖÖ+ ;
orden
ÖÖ< A
,
ÖÖA B6
(EstablecimientoComercialExtendidoConLogo
ÖÖC k
sede
ÖÖl p
,
ÖÖp q
FormatoImpresionÖÖr Ç
formatoÖÖÉ ä
)ÖÖä ã
{
ÜÜ 	
string
áá 

htmlString
áá 
=
áá )
RestaurantHtmlStringBuilder
áá  ;
.
áá; <
ObtenerHtmlString
áá< M
(
ááM N
orden
ááN S
,
ááS T
formato
ááU \
,
áá\ ]
sede
áá^ b
,
ááb c
this
áád h
)
ááh i
;
áái j
return
àà 
pdfUtil
àà 
.
àà !
ObtenerPdfDocumento
àà .
(
àà. /

htmlString
àà/ 9
,
àà9 :
formato
àà; B
)
ààB C
;
ààC D
}
ââ 	
public
ää 
void
ää 
ImprimirOrden
ää !
(
ää! "
long
ää" &
idOrden
ää' .
)
ää. /
{
ãã 	6
(EstablecimientoComercialExtendidoConLogo
åå 4
sede
åå5 9
=
åå: ;
ObtenerSede
åå< G
(
ååG H
)
ååH I
;
ååI J
var
çç 
orden
çç 
=
çç 
restauranteLogica
çç )
.
çç) *5
'ObtenerComprobanteOrdenSinItemsAnulados
çç* Q
(
ççQ R
idOrden
ççR Y
)
ççY Z
;
ççZ [
var
éé 
PDForden
éé 
=
éé 
ObtenerPdfOrden
éé *
(
éé* +
orden
éé+ 0
,
éé0 1
sede
éé2 6
,
éé6 7
FormatoImpresion
éé8 H
.
ééH I
_80mm
ééI N
)
ééN O
;
ééO P
PrintFilePDF
èè 
file
èè 
=
èè 
null
èè  $
;
èè$ %
file
êê 
=
êê 
new
êê 
PrintFilePDF
êê #
(
êê# $
PDForden
êê$ ,
.
êê, -
Save
êê- 1
(
êê1 2
)
êê2 3
,
êê3 4
orden
êê5 :
.
êê: ;
Orden
êê; @
.
êê@ A
Codigo
êêA G
+
êêH I
$str
êêJ P
)
êêP Q
;
êêQ R
file
ëë 
.
ëë 
PrintRotation
ëë 
=
ëë  
PrintRotation
ëë! .
.
ëë. /
None
ëë/ 3
;
ëë3 4
ClientPrintJob
íí 
cpj
íí 
=
íí  
new
íí! $
ClientPrintJob
íí% 3
(
íí3 4
)
íí4 5
;
íí5 6
cpj
ìì 
.
ìì 
	PrintFile
ìì 
=
ìì 
file
ìì  
;
ìì  !
cpj
îî 
.
îî 
	PrintFile
îî 
.
îî 
Copies
îî  
=
îî! "
$num
îî# $
;
îî$ %
cpj
ïï 
.
ïï 
ClientPrinter
ïï 
=
ïï 
new
ïï  #
DefaultPrinter
ïï$ 2
(
ïï2 3
)
ïï3 4
;
ïï4 5
System
ññ 
.
ññ 
Web
ññ 
.
ññ 
HttpContext
ññ "
.
ññ" #
Current
ññ# *
.
ññ* +
Response
ññ+ 3
.
ññ3 4
ContentType
ññ4 ?
=
ññ@ A
$str
ññB \
;
ññ\ ]
System
óó 
.
óó 
Web
óó 
.
óó 
HttpContext
óó "
.
óó" #
Current
óó# *
.
óó* +
Response
óó+ 3
.
óó3 4
BinaryWrite
óó4 ?
(
óó? @
cpj
óó@ C
.
óóC D

GetContent
óóD N
(
óóN O
)
óóO P
)
óóP Q
;
óóQ R
System
òò 
.
òò 
Web
òò 
.
òò 
HttpContext
òò "
.
òò" #
Current
òò# *
.
òò* +
Response
òò+ 3
.
òò3 4
End
òò4 7
(
òò7 8
)
òò8 9
;
òò9 :
}
ôô 	
public
öö 
PdfDocument
öö 
ObtenerPdfCuenta
öö +
(
öö+ ,'
ComprobanteCuentaAtencion
öö, E
cuenta
ööF L
,
ööL M6
(EstablecimientoComercialExtendidoConLogo
ööN v
sede
ööw {
,
öö{ |
FormatoImpresionöö} ç
formatoööé ï
)ööï ñ
{
õõ 	
string
úú 

htmlString
úú 
=
úú )
RestaurantHtmlStringBuilder
úú  ;
.
úú; <
ObtenerHtmlString
úú< M
(
úúM N
cuenta
úúN T
,
úúT U
formato
úúV ]
,
úú] ^
sede
úú_ c
,
úúc d
this
úúe i
)
úúi j
;
úúj k
return
ùù 
pdfUtil
ùù 
.
ùù !
ObtenerPdfDocumento
ùù .
(
ùù. /

htmlString
ùù/ 9
,
ùù9 :
formato
ùù; B
)
ùùB C
;
ùùC D
}
ûû 	
public
°° 
void
°° 
ImprimirCuenta
°° "
(
°°" #
long
°°# '

idAtencion
°°( 2
)
°°2 3
{
¢¢ 	6
(EstablecimientoComercialExtendidoConLogo
££ 4
sede
££5 9
=
££: ;
ObtenerSede
££< G
(
££G H
)
££H I
;
££I J
var
§§ 
cuenta
§§ 
=
§§ 
restauranteLogica
§§ *
.
§§* +.
 ObtenerComprobanteCuentaAtencion
§§+ K
(
§§K L

idAtencion
§§L V
)
§§V W
;
§§W X
var
•• 
	PDFcuenta
•• 
=
•• 
ObtenerPdfCuenta
•• ,
(
••, -
cuenta
••- 3
,
••3 4
sede
••5 9
,
••9 :
FormatoImpresion
••; K
.
••K L
_80mm
••L Q
)
••Q R
;
••R S
PrintFilePDF
¶¶ 
file
¶¶ 
=
¶¶ 
null
¶¶  $
;
¶¶$ %
file
ßß 
=
ßß 
new
ßß 
PrintFilePDF
ßß #
(
ßß# $
	PDFcuenta
ßß$ -
.
ßß- .
Save
ßß. 2
(
ßß2 3
)
ßß3 4
,
ßß4 5
cuenta
ßß6 <
.
ßß< =
Atencion
ßß= E
.
ßßE F
Id
ßßF H
+
ßßI J
$str
ßßK Q
)
ßßQ R
;
ßßR S
file
®® 
.
®® 
PrintRotation
®® 
=
®®  
PrintRotation
®®! .
.
®®. /
None
®®/ 3
;
®®3 4
ClientPrintJob
©© 
cpj
©© 
=
©©  
new
©©! $
ClientPrintJob
©©% 3
(
©©3 4
)
©©4 5
;
©©5 6
cpj
™™ 
.
™™ 
	PrintFile
™™ 
=
™™ 
file
™™  
;
™™  !
cpj
´´ 
.
´´ 
	PrintFile
´´ 
.
´´ 
Copies
´´  
=
´´! "
$num
´´# $
;
´´$ %
cpj
¨¨ 
.
¨¨ 
ClientPrinter
¨¨ 
=
¨¨ 
new
¨¨  #
DefaultPrinter
¨¨$ 2
(
¨¨2 3
)
¨¨3 4
;
¨¨4 5
System
≠≠ 
.
≠≠ 
Web
≠≠ 
.
≠≠ 
HttpContext
≠≠ "
.
≠≠" #
Current
≠≠# *
.
≠≠* +
Response
≠≠+ 3
.
≠≠3 4
ContentType
≠≠4 ?
=
≠≠@ A
$str
≠≠B \
;
≠≠\ ]
System
ÆÆ 
.
ÆÆ 
Web
ÆÆ 
.
ÆÆ 
HttpContext
ÆÆ "
.
ÆÆ" #
Current
ÆÆ# *
.
ÆÆ* +
Response
ÆÆ+ 3
.
ÆÆ3 4
BinaryWrite
ÆÆ4 ?
(
ÆÆ? @
cpj
ÆÆ@ C
.
ÆÆC D

GetContent
ÆÆD N
(
ÆÆN O
)
ÆÆO P
)
ÆÆP Q
;
ÆÆQ R
System
ØØ 
.
ØØ 
Web
ØØ 
.
ØØ 
HttpContext
ØØ "
.
ØØ" #
Current
ØØ# *
.
ØØ* +
Response
ØØ+ 3
.
ØØ3 4
End
ØØ4 7
(
ØØ7 8
)
ØØ8 9
;
ØØ9 :
}
∞∞ 	
public
¥¥ 

JsonResult
¥¥ #
AtenderDetalleDeOrden
¥¥ /
(
¥¥/ 0
int
¥¥0 3
id
¥¥4 6
)
¥¥6 7
{
µµ 	
try
∂∂ 
{
∑∑ 
OperationResult
∏∏ 
result
∏∏  &
=
∏∏' (
new
∏∏) ,
OperationResult
∏∏- <
(
∏∏< =
)
∏∏= >
;
∏∏> ?
result
ππ 
=
ππ 
restauranteLogica
ππ *
.
ππ* +#
AtenderDetalleDeOrden
ππ+ @
(
ππ@ A
id
ππA C
)
ππC D
;
ππD E
return
∫∫ 
Json
∫∫ 
(
∫∫ 
new
∫∫ 
{
∫∫  !
result
∫∫" (
.
∫∫( )
code_result
∫∫) 4
,
∫∫4 5
data
∫∫6 :
=
∫∫; <
result
∫∫= C
.
∫∫C D
information
∫∫D O
,
∫∫O P 
result_description
∫∫Q c
=
∫∫d e
result
∫∫f l
.
∫∫l m
title
∫∫m r
}
∫∫s t
)
∫∫t u
;
∫∫u v
}
ªª 
catch
ºº 
(
ºº 
	Exception
ºº 
e
ºº 
)
ºº 
{
ΩΩ 
return
ææ 
new
ææ "
JsonHttpStatusResult
ææ /
(
ææ/ 0
Util
ææ0 4
.
ææ4 5
	ErrorJson
ææ5 >
(
ææ> ?
e
ææ? @
)
ææ@ A
,
ææA B
HttpStatusCode
ææC Q
.
ææQ R!
InternalServerError
ææR e
)
ææe f
;
ææf g
}
øø 
}
¿¿ 	
public
¡¡ 

JsonResult
¡¡ "
AnularDetalleDeOrden
¡¡ .
(
¡¡. /
int
¡¡/ 2
id
¡¡3 5
)
¡¡5 6
{
¬¬ 	
try
√√ 
{
ƒƒ 
OperationResult
≈≈ 
result
≈≈  &
=
≈≈' (
new
≈≈) ,
OperationResult
≈≈- <
(
≈≈< =
)
≈≈= >
;
≈≈> ?
result
∆∆ 
=
∆∆ 
restauranteLogica
∆∆ *
.
∆∆* +"
AnularDetalleDeOrden
∆∆+ ?
(
∆∆? @
id
∆∆@ B
)
∆∆B C
;
∆∆C D
return
«« 
Json
«« 
(
«« 
new
«« 
{
««  !
result
««" (
.
««( )
code_result
««) 4
,
««4 5
data
««6 :
=
««; <
result
««= C
.
««C D
information
««D O
,
««O P 
result_description
««Q c
=
««d e
result
««f l
.
««l m
title
««m r
}
««s t
)
««t u
;
««u v
}
»» 
catch
…… 
(
…… 
	Exception
…… 
e
…… 
)
…… 
{
   
return
ÀÀ 
new
ÀÀ "
JsonHttpStatusResult
ÀÀ /
(
ÀÀ/ 0
Util
ÀÀ0 4
.
ÀÀ4 5
	ErrorJson
ÀÀ5 >
(
ÀÀ> ?
e
ÀÀ? @
)
ÀÀ@ A
,
ÀÀA B
HttpStatusCode
ÀÀC Q
.
ÀÀQ R!
InternalServerError
ÀÀR e
)
ÀÀe f
;
ÀÀf g
}
ÃÃ 
}
ÕÕ 	
public
ŒŒ 

JsonResult
ŒŒ $
DevolverDetalleDeOrden
ŒŒ 0
(
ŒŒ0 1
int
ŒŒ1 4
id
ŒŒ5 7
)
ŒŒ7 8
{
œœ 	
try
–– 
{
—— 
OperationResult
““ 
result
““  &
=
““' (
new
““) ,
OperationResult
““- <
(
““< =
)
““= >
;
““> ?
result
”” 
=
”” 
restauranteLogica
”” *
.
””* +$
DevolverDetalleDeOrden
””+ A
(
””A B
id
””B D
)
””D E
;
””E F
return
‘‘ 
Json
‘‘ 
(
‘‘ 
new
‘‘ 
{
‘‘  !
result
‘‘" (
.
‘‘( )
code_result
‘‘) 4
,
‘‘4 5
data
‘‘6 :
=
‘‘; <
result
‘‘= C
.
‘‘C D
information
‘‘D O
,
‘‘O P 
result_description
‘‘Q c
=
‘‘d e
result
‘‘f l
.
‘‘l m
title
‘‘m r
}
‘‘s t
)
‘‘t u
;
‘‘u v
}
’’ 
catch
÷÷ 
(
÷÷ 
	Exception
÷÷ 
e
÷÷ 
)
÷÷ 
{
◊◊ 
return
ÿÿ 
new
ÿÿ "
JsonHttpStatusResult
ÿÿ /
(
ÿÿ/ 0
Util
ÿÿ0 4
.
ÿÿ4 5
	ErrorJson
ÿÿ5 >
(
ÿÿ> ?
e
ÿÿ? @
)
ÿÿ@ A
,
ÿÿA B
HttpStatusCode
ÿÿC Q
.
ÿÿQ R!
InternalServerError
ÿÿR e
)
ÿÿe f
;
ÿÿf g
}
ŸŸ 
}
⁄⁄ 	
public
€€ 

JsonResult
€€ "
ServirDetalleDeOrden
€€ .
(
€€. /
int
€€/ 2
id
€€3 5
)
€€5 6
{
‹‹ 	
try
›› 
{
ﬁﬁ 
OperationResult
ﬂﬂ 
result
ﬂﬂ  &
=
ﬂﬂ' (
new
ﬂﬂ) ,
OperationResult
ﬂﬂ- <
(
ﬂﬂ< =
)
ﬂﬂ= >
;
ﬂﬂ> ?
result
‡‡ 
=
‡‡ 
restauranteLogica
‡‡ *
.
‡‡* +"
ServirDetalleDeOrden
‡‡+ ?
(
‡‡? @
id
‡‡@ B
)
‡‡B C
;
‡‡C D
return
·· 
Json
·· 
(
·· 
new
·· 
{
··  !
result
··" (
.
··( )
code_result
··) 4
,
··4 5
data
··6 :
=
··; <
result
··= C
.
··C D
information
··D O
,
··O P 
result_description
··Q c
=
··d e
result
··f l
.
··l m
title
··m r
}
··s t
)
··t u
;
··u v
}
‚‚ 
catch
„„ 
(
„„ 
	Exception
„„ 
e
„„ 
)
„„ 
{
‰‰ 
return
ÂÂ 
new
ÂÂ "
JsonHttpStatusResult
ÂÂ /
(
ÂÂ/ 0
Util
ÂÂ0 4
.
ÂÂ4 5
	ErrorJson
ÂÂ5 >
(
ÂÂ> ?
e
ÂÂ? @
)
ÂÂ@ A
,
ÂÂA B
HttpStatusCode
ÂÂC Q
.
ÂÂQ R!
InternalServerError
ÂÂR e
)
ÂÂe f
;
ÂÂf g
}
ÊÊ 
}
ÁÁ 	
public
ËË 

JsonResult
ËË $
PrepararDetalleDeOrden
ËË 0
(
ËË0 1
int
ËË1 4
id
ËË5 7
)
ËË7 8
{
ÈÈ 	
try
ÍÍ 
{
ÎÎ 
OperationResult
ÏÏ 
result
ÏÏ  &
=
ÏÏ' (
new
ÏÏ) ,
OperationResult
ÏÏ- <
(
ÏÏ< =
)
ÏÏ= >
;
ÏÏ> ?
result
ÌÌ 
=
ÌÌ 
restauranteLogica
ÌÌ *
.
ÌÌ* +$
PrepararDetalleDeOrden
ÌÌ+ A
(
ÌÌA B
id
ÌÌB D
)
ÌÌD E
;
ÌÌE F
return
ÓÓ 
Json
ÓÓ 
(
ÓÓ 
new
ÓÓ 
{
ÓÓ  !
result
ÓÓ" (
.
ÓÓ( )
code_result
ÓÓ) 4
,
ÓÓ4 5
data
ÓÓ6 :
=
ÓÓ; <
result
ÓÓ= C
.
ÓÓC D
information
ÓÓD O
,
ÓÓO P 
result_description
ÓÓQ c
=
ÓÓd e
result
ÓÓf l
.
ÓÓl m
title
ÓÓm r
}
ÓÓs t
)
ÓÓt u
;
ÓÓu v
}
ÔÔ 
catch
 
(
 
	Exception
 
e
 
)
 
{
ÒÒ 
return
ÚÚ 
new
ÚÚ "
JsonHttpStatusResult
ÚÚ /
(
ÚÚ/ 0
Util
ÚÚ0 4
.
ÚÚ4 5
	ErrorJson
ÚÚ5 >
(
ÚÚ> ?
e
ÚÚ? @
)
ÚÚ@ A
,
ÚÚA B
HttpStatusCode
ÚÚC Q
.
ÚÚQ R!
InternalServerError
ÚÚR e
)
ÚÚe f
;
ÚÚf g
}
ÛÛ 
}
ÙÙ 	
public
ıı 

JsonResult
ıı $
ObservarDetalleDeOrden
ıı 0
(
ıı0 1
int
ıı1 4
id
ıı5 7
)
ıı7 8
{
ˆˆ 	
try
˜˜ 
{
¯¯ 
OperationResult
˘˘ 
result
˘˘  &
=
˘˘' (
new
˘˘) ,
OperationResult
˘˘- <
(
˘˘< =
)
˘˘= >
;
˘˘> ?
result
˙˙ 
=
˙˙ 
restauranteLogica
˙˙ *
.
˙˙* +$
ObservarDetalleDeOrden
˙˙+ A
(
˙˙A B
id
˙˙B D
)
˙˙D E
;
˙˙E F
return
˚˚ 
Json
˚˚ 
(
˚˚ 
new
˚˚ 
{
˚˚  !
result
˚˚" (
.
˚˚( )
code_result
˚˚) 4
,
˚˚4 5
data
˚˚6 :
=
˚˚; <
result
˚˚= C
.
˚˚C D
information
˚˚D O
,
˚˚O P 
result_description
˚˚Q c
=
˚˚d e
result
˚˚f l
.
˚˚l m
title
˚˚m r
}
˚˚s t
)
˚˚t u
;
˚˚u v
}
¸¸ 
catch
˝˝ 
(
˝˝ 
	Exception
˝˝ 
e
˝˝ 
)
˝˝ 
{
˛˛ 
return
ˇˇ 
new
ˇˇ "
JsonHttpStatusResult
ˇˇ /
(
ˇˇ/ 0
Util
ˇˇ0 4
.
ˇˇ4 5
	ErrorJson
ˇˇ5 >
(
ˇˇ> ?
e
ˇˇ? @
)
ˇˇ@ A
,
ˇˇA B
HttpStatusCode
ˇˇC Q
.
ˇˇQ R!
InternalServerError
ˇˇR e
)
ˇˇe f
;
ˇˇf g
}
ÄÄ 
}
ÅÅ 	
public
ÇÇ 

JsonResult
ÇÇ $
ReanudarDetalleDeOrden
ÇÇ 0
(
ÇÇ0 1
int
ÇÇ1 4
id
ÇÇ5 7
)
ÇÇ7 8
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 
OperationResult
ÜÜ 
result
ÜÜ  &
=
ÜÜ' (
new
ÜÜ) ,
OperationResult
ÜÜ- <
(
ÜÜ< =
)
ÜÜ= >
;
ÜÜ> ?
result
áá 
=
áá 
restauranteLogica
áá *
.
áá* +$
ReanudarDetalleDeOrden
áá+ A
(
ááA B
id
ááB D
)
ááD E
;
ááE F
return
àà 
Json
àà 
(
àà 
new
àà 
{
àà  !
result
àà" (
.
àà( )
code_result
àà) 4
,
àà4 5
data
àà6 :
=
àà; <
result
àà= C
.
ààC D
information
ààD O
,
ààO P 
result_description
ààQ c
=
ààd e
result
ààf l
.
ààl m
title
ààm r
}
ààs t
)
ààt u
;
ààu v
}
ââ 
catch
ää 
(
ää 
	Exception
ää 
e
ää 
)
ää 
{
ãã 
return
åå 
new
åå "
JsonHttpStatusResult
åå /
(
åå/ 0
Util
åå0 4
.
åå4 5
	ErrorJson
åå5 >
(
åå> ?
e
åå? @
)
åå@ A
,
ååA B
HttpStatusCode
ååC Q
.
ååQ R!
InternalServerError
ååR e
)
ååe f
;
ååf g
}
çç 
}
éé 	
public
èè 

JsonResult
èè -
ReanudarTodosLosDetallesDeOrden
èè 9
(
èè9 :
long
èè: >
idOrden
èè? F
)
èèF G
{
êê 	
try
ëë 
{
íí 
OperationResult
ìì 
result
ìì  &
=
ìì' (
new
ìì) ,
OperationResult
ìì- <
(
ìì< =
)
ìì= >
;
ìì> ?
result
îî 
=
îî 
restauranteLogica
îî *
.
îî* +-
ReanudarTodosLosDetallesDeOrden
îî+ J
(
îîJ K
idOrden
îîK R
)
îîR S
;
îîS T
return
ïï 
Json
ïï 
(
ïï 
new
ïï 
{
ïï  !
result
ïï" (
.
ïï( )
code_result
ïï) 4
,
ïï4 5
data
ïï6 :
=
ïï; <
result
ïï= C
.
ïïC D
information
ïïD O
,
ïïO P 
result_description
ïïQ c
=
ïïd e
result
ïïf l
.
ïïl m
title
ïïm r
}
ïïs t
)
ïït u
;
ïïu v
}
ññ 
catch
óó 
(
óó 
	Exception
óó 
e
óó 
)
óó 
{
òò 
return
ôô 
new
ôô "
JsonHttpStatusResult
ôô /
(
ôô/ 0
Util
ôô0 4
.
ôô4 5
	ErrorJson
ôô5 >
(
ôô> ?
e
ôô? @
)
ôô@ A
,
ôôA B
HttpStatusCode
ôôC Q
.
ôôQ R!
InternalServerError
ôôR e
)
ôôe f
;
ôôf g
}
öö 
}
õõ 	
public
úú 

JsonResult
úú ,
AtenderTodosLosDetallesDeOrden
úú 8
(
úú8 9
long
úú9 =
idOrden
úú> E
)
úúE F
{
ùù 	
try
ûû 
{
üü 
OperationResult
†† 
result
††  &
=
††' (
new
††) ,
OperationResult
††- <
(
††< =
)
††= >
;
††> ?
result
°° 
=
°° 
restauranteLogica
°° *
.
°°* +,
AtenderTodosLosDetallesDeOrden
°°+ I
(
°°I J
idOrden
°°J Q
)
°°Q R
;
°°R S
return
¢¢ 
Json
¢¢ 
(
¢¢ 
new
¢¢ 
{
¢¢  !
result
¢¢" (
.
¢¢( )
code_result
¢¢) 4
,
¢¢4 5
data
¢¢6 :
=
¢¢; <
result
¢¢= C
.
¢¢C D
information
¢¢D O
,
¢¢O P 
result_description
¢¢Q c
=
¢¢d e
result
¢¢f l
.
¢¢l m
title
¢¢m r
}
¢¢s t
)
¢¢t u
;
¢¢u v
}
££ 
catch
§§ 
(
§§ 
	Exception
§§ 
e
§§ 
)
§§ 
{
•• 
return
¶¶ 
new
¶¶ "
JsonHttpStatusResult
¶¶ /
(
¶¶/ 0
Util
¶¶0 4
.
¶¶4 5
	ErrorJson
¶¶5 >
(
¶¶> ?
e
¶¶? @
)
¶¶@ A
,
¶¶A B
HttpStatusCode
¶¶C Q
.
¶¶Q R!
InternalServerError
¶¶R e
)
¶¶e f
;
¶¶f g
}
ßß 
}
®® 	
public
©© 

JsonResult
©© '
PrepararDetallesDeOrdenes
©© 3
(
©©3 4
long
©©4 8
[
©©8 9
]
©©9 :"
idsDetallesDeOrdenes
©©; O
)
©©O P
{
™™ 	
try
´´ 
{
¨¨ 
OperationResult
≠≠ 
result
≠≠  &
=
≠≠' (
new
≠≠) ,
OperationResult
≠≠- <
(
≠≠< =
)
≠≠= >
;
≠≠> ?
result
ÆÆ 
=
ÆÆ 
restauranteLogica
ÆÆ *
.
ÆÆ* +'
PrepararDetallesDeOrdenes
ÆÆ+ D
(
ÆÆD E"
idsDetallesDeOrdenes
ÆÆE Y
)
ÆÆY Z
;
ÆÆZ [
return
ØØ 
Json
ØØ 
(
ØØ 
new
ØØ 
{
ØØ  !
result
ØØ" (
.
ØØ( )
code_result
ØØ) 4
,
ØØ4 5
data
ØØ6 :
=
ØØ; <
result
ØØ= C
.
ØØC D
information
ØØD O
,
ØØO P 
result_description
ØØQ c
=
ØØd e
result
ØØf l
.
ØØl m
title
ØØm r
}
ØØs t
)
ØØt u
;
ØØu v
}
∞∞ 
catch
±± 
(
±± 
	Exception
±± 
e
±± 
)
±± 
{
≤≤ 
return
≥≥ 
new
≥≥ "
JsonHttpStatusResult
≥≥ /
(
≥≥/ 0
Util
≥≥0 4
.
≥≥4 5
	ErrorJson
≥≥5 >
(
≥≥> ?
e
≥≥? @
)
≥≥@ A
,
≥≥A B
HttpStatusCode
≥≥C Q
.
≥≥Q R!
InternalServerError
≥≥R e
)
≥≥e f
;
≥≥f g
}
¥¥ 
}
µµ 	
public
∂∂ 

JsonResult
∂∂ %
ServirDetallesDeOrdenes
∂∂ 1
(
∂∂1 2
long
∂∂2 6
[
∂∂6 7
]
∂∂7 8"
idsDetallesDeOrdenes
∂∂9 M
)
∂∂M N
{
∑∑ 	
try
∏∏ 
{
ππ 
OperationResult
∫∫ 
result
∫∫  &
=
∫∫' (
new
∫∫) ,
OperationResult
∫∫- <
(
∫∫< =
)
∫∫= >
;
∫∫> ?
result
ªª 
=
ªª 
restauranteLogica
ªª *
.
ªª* +%
ServirDetallesDeOrdenes
ªª+ B
(
ªªB C"
idsDetallesDeOrdenes
ªªC W
)
ªªW X
;
ªªX Y
return
ºº 
Json
ºº 
(
ºº 
new
ºº 
{
ºº  !
result
ºº" (
.
ºº( )
code_result
ºº) 4
,
ºº4 5
data
ºº6 :
=
ºº; <
result
ºº= C
.
ººC D
information
ººD O
,
ººO P 
result_description
ººQ c
=
ººd e
result
ººf l
.
ººl m
title
ººm r
}
ººs t
)
ººt u
;
ººu v
}
ΩΩ 
catch
ææ 
(
ææ 
	Exception
ææ 
e
ææ 
)
ææ 
{
øø 
return
¿¿ 
new
¿¿ "
JsonHttpStatusResult
¿¿ /
(
¿¿/ 0
Util
¿¿0 4
.
¿¿4 5
	ErrorJson
¿¿5 >
(
¿¿> ?
e
¿¿? @
)
¿¿@ A
,
¿¿A B
HttpStatusCode
¿¿C Q
.
¿¿Q R!
InternalServerError
¿¿R e
)
¿¿e f
;
¿¿f g
}
¡¡ 
}
¬¬ 	
public
√√ 

JsonResult
√√ +
AnularTodosLosDetallesDeOrden
√√ 7
(
√√7 8
long
√√8 <
idOrden
√√= D
)
√√D E
{
ƒƒ 	
try
≈≈ 
{
∆∆ 
OperationResult
«« 
result
««  &
=
««' (
new
««) ,
OperationResult
««- <
(
««< =
)
««= >
;
««> ?
result
»» 
=
»» 
restauranteLogica
»» *
.
»»* ++
AnularTodosLosDetallesDeOrden
»»+ H
(
»»H I
idOrden
»»I P
)
»»P Q
;
»»Q R
return
…… 
Json
…… 
(
…… 
new
…… 
{
……  !
result
……" (
.
……( )
code_result
……) 4
,
……4 5
data
……6 :
=
……; <
result
……= C
.
……C D
information
……D O
,
……O P 
result_description
……Q c
=
……d e
result
……f l
.
……l m
title
……m r
}
……s t
)
……t u
;
……u v
}
   
catch
ÀÀ 
(
ÀÀ 
	Exception
ÀÀ 
e
ÀÀ 
)
ÀÀ 
{
ÃÃ 
return
ÕÕ 
new
ÕÕ "
JsonHttpStatusResult
ÕÕ /
(
ÕÕ/ 0
Util
ÕÕ0 4
.
ÕÕ4 5
	ErrorJson
ÕÕ5 >
(
ÕÕ> ?
e
ÕÕ? @
)
ÕÕ@ A
,
ÕÕA B
HttpStatusCode
ÕÕC Q
.
ÕÕQ R!
InternalServerError
ÕÕR e
)
ÕÕe f
;
ÕÕf g
}
ŒŒ 
}
œœ 	
public
—— 

JsonResult
—— 8
*ObtenerConfiguracionRestauranteFacturacion
—— D
(
——D E
)
——E F
{
““ 	
try
”” 
{
‘‘ 
return
’’ 
Json
’’ 
(
’’ 
new
’’ 
{
’’  !
data
’’" &
=
’’' (1
#ConfiguracionRestauranteFacturacion
’’) L
.
’’L M
Default
’’M T
}
’’U V
)
’’V W
;
’’W X
}
÷÷ 
catch
◊◊ 
(
◊◊ 
	Exception
◊◊ 
e
◊◊ 
)
◊◊ 
{
ÿÿ 
return
ŸŸ 
new
ŸŸ "
JsonHttpStatusResult
ŸŸ /
(
ŸŸ/ 0
Util
ŸŸ0 4
.
ŸŸ4 5
	ErrorJson
ŸŸ5 >
(
ŸŸ> ?
e
ŸŸ? @
)
ŸŸ@ A
,
ŸŸA B
HttpStatusCode
ŸŸC Q
.
ŸŸQ R!
InternalServerError
ŸŸR e
)
ŸŸe f
;
ŸŸf g
}
⁄⁄ 
}
€€ 	
public
‹‹ 

JsonResult
‹‹ -
ActualizarImportesDeTransaccion
‹‹ 9
(
‹‹9 :
List
‹‹: >
<
‹‹> ?
ItemGenerico
‹‹? K
>
‹‹K L
NuevosImportes
‹‹M [
)
‹‹[ \
{
›› 	
try
ﬁﬁ 
{
ﬂﬂ 
OperationResult
‡‡ 
result
‡‡  &
=
‡‡' (
new
‡‡) ,
OperationResult
‡‡- <
(
‡‡< =
)
‡‡= >
;
‡‡> ?
result
·· 
=
·· 
restauranteLogica
·· *
.
··* +-
ActualizarImportesDeTransaccion
··+ J
(
··J K
NuevosImportes
··K Y
)
··Y Z
;
··Z [
return
‚‚ 
Json
‚‚ 
(
‚‚ 
new
‚‚ 
{
‚‚  !
result
‚‚" (
.
‚‚( )
code_result
‚‚) 4
,
‚‚4 5
data
‚‚6 :
=
‚‚; <
result
‚‚= C
.
‚‚C D
information
‚‚D O
,
‚‚O P 
result_description
‚‚Q c
=
‚‚d e
result
‚‚f l
.
‚‚l m
title
‚‚m r
}
‚‚s t
)
‚‚t u
;
‚‚u v
}
„„ 
catch
‰‰ 
(
‰‰ 
	Exception
‰‰ 
e
‰‰ 
)
‰‰ 
{
ÂÂ 
return
ÊÊ 
new
ÊÊ "
JsonHttpStatusResult
ÊÊ /
(
ÊÊ/ 0
Util
ÊÊ0 4
.
ÊÊ4 5
	ErrorJson
ÊÊ5 >
(
ÊÊ> ?
e
ÊÊ? @
)
ÊÊ@ A
,
ÊÊA B
HttpStatusCode
ÊÊC Q
.
ÊÊQ R!
InternalServerError
ÊÊR e
)
ÊÊe f
;
ÊÊf g
}
ÁÁ 
}
ËË 	
public
ÈÈ 

JsonResult
ÈÈ E
7ObtenerItemDeRestauranteIncluyendoComplementosDeFamilia
ÈÈ Q
(
ÈÈQ R
int
ÈÈR U
id
ÈÈV X
)
ÈÈX Y
{
ÍÍ 	
try
ÎÎ 
{
ÏÏ 
ItemRestaurante
ÌÌ 
item
ÌÌ  $
=
ÌÌ% &
restauranteLogica
ÌÌ' 8
.
ÌÌ8 9E
7ObtenerItemDeRestauranteIncluyendoComplementosDeFamilia
ÌÌ9 p
(
ÌÌp q
id
ÌÌq s
)
ÌÌs t
;
ÌÌt u
return
ÓÓ 
Json
ÓÓ 
(
ÓÓ 
item
ÓÓ  
)
ÓÓ  !
;
ÓÓ! "
}
ÔÔ 
catch
 
(
 
	Exception
 
e
 
)
 
{
ÒÒ 
return
ÚÚ 
new
ÚÚ "
JsonHttpStatusResult
ÚÚ /
(
ÚÚ/ 0
Util
ÚÚ0 4
.
ÚÚ4 5
	ErrorJson
ÚÚ5 >
(
ÚÚ> ?
e
ÚÚ? @
)
ÚÚ@ A
,
ÚÚA B
HttpStatusCode
ÚÚC Q
.
ÚÚQ R!
InternalServerError
ÚÚR e
)
ÚÚe f
;
ÚÚf g
}
ÛÛ 
}
ÙÙ 	
public
ıı 

JsonResult
ıı 1
#ActualizarJsonDetalleDeDetalleOrden
ıı =
(
ıı= >
long
ıı> B
	idDetalle
ııC L
,
ııL M
string
ııN T

jsonString
ııU _
)
ıı_ `
{
ˆˆ 	
try
˜˜ 
{
¯¯ 
OperationResult
˘˘ 
result
˘˘  &
=
˘˘' (
restauranteLogica
˘˘) :
.
˘˘: ;1
#ActualizarJsonDetalleDeDetalleOrden
˘˘; ^
(
˘˘^ _
	idDetalle
˘˘_ h
,
˘˘h i

jsonString
˘˘i s
)
˘˘s t
;
˘˘t u
return
˙˙ 
Json
˙˙ 
(
˙˙ 
result
˙˙ "
.
˙˙" #
data
˙˙# '
)
˙˙' (
;
˙˙( )
}
˚˚ 
catch
¸¸ 
(
¸¸ 
	Exception
¸¸ 
e
¸¸ 
)
¸¸ 
{
˝˝ 
return
˛˛ 
new
˛˛ "
JsonHttpStatusResult
˛˛ /
(
˛˛/ 0
Util
˛˛0 4
.
˛˛4 5
	ErrorJson
˛˛5 >
(
˛˛> ?
e
˛˛? @
)
˛˛@ A
,
˛˛A B
HttpStatusCode
˛˛C Q
.
˛˛Q R!
InternalServerError
˛˛R e
)
˛˛e f
;
˛˛f g
}
ˇˇ 
}
ÄÄ 	
public
ÑÑ 

JsonResult
ÑÑ !
ObtenerComplementos
ÑÑ -
(
ÑÑ- .
)
ÑÑ. /
{
ÖÖ 	
try
ÜÜ 
{
áá 
List
àà 
<
àà 
Complemento
àà  
>
àà  !
complementos
àà" .
=
àà/ 0
restauranteLogica
àà1 B
.
ààB C!
ObtenerComplementos
ààC V
(
ààV W
)
ààW X
.
ààX Y
ToList
ààY _
(
àà_ `
)
àà` a
;
ààa b
return
ââ 
Json
ââ 
(
ââ 
complementos
ââ (
)
ââ( )
;
ââ) *
}
ää 
catch
ãã 
(
ãã 
	Exception
ãã 
e
ãã 
)
ãã 
{
åå 
throw
çç 
new
çç 
LogicaException
çç )
(
çç) *
$str
çç* R
,
ççR S
e
ççT U
)
ççU V
;
ççV W
}
éé 
}
èè 	
public
ëë 

JsonResult
ëë #
ActualizarComplemento
ëë /
(
ëë/ 0
Complemento
ëë0 ;
complemento
ëë< G
)
ëëG H
{
íí 	
try
ìì 
{
îî 
OperationResult
ïï 
result
ïï  &
=
ïï' (
restauranteLogica
ïï) :
.
ïï: ;#
ActualizarComplemento
ïï; P
(
ïïP Q
complemento
ïïQ \
)
ïï\ ]
;
ïï] ^
return
ññ 
Json
ññ 
(
ññ 
new
ññ 
{
ññ  !
result
ññ" (
.
ññ( )
code_result
ññ) 4
,
ññ4 5
data
ññ6 :
=
ññ; <
result
ññ= C
.
ññC D
data
ññD H
,
ññH I 
result_description
ññJ \
=
ññ] ^
result
ññ_ e
.
ññe f
title
ññf k
,
ññk l
IdOrden
ññm t
=
ññu v
result
ññw }
.
ññ} ~
informationññ~ â
}ññä ã
)ññã å
;ññå ç
}
óó 
catch
òò 
(
òò 
	Exception
òò 
e
òò 
)
òò 
{
ôô 
throw
öö 
new
öö 
LogicaException
öö )
(
öö) *
$str
öö* T
,
ööT U
e
ööV W
)
ööW X
;
ööX Y
}
õõ 
}
úú 	
}
üü 
}†† ∫Ì
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\CocheraController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
CocheraController "
:# $
BaseController% 3
{ 
private 
readonly 
ICocheraLogica '
cocheraLogica( 5
;5 6
	protected 
readonly 
IBarCodeUtil '
barCodeUtil( 3
;3 4
	protected 
readonly 
IOperacionLogica +
operacionLogica, ;
;; <
	protected 
readonly 
IMaestroLogica )
maestroLogica* 7
;7 8
	protected 
readonly )
IFacturacionElectronicaLogica 8(
facturacionElectronicaLogica9 U
;U V
public 
CocheraController  
(  !
)! "
{   	
cocheraLogica!! 
=!! 
Dependencia!! '
.!!' (
Resolve!!( /
<!!/ 0
ICocheraLogica!!0 >
>!!> ?
(!!? @
)!!@ A
;!!A B
barCodeUtil"" 
="" 
Dependencia"" %
.""% &
Resolve""& -
<""- .
IBarCodeUtil"". :
>"": ;
(""; <
)""< =
;""= >
operacionLogica## 
=## 
Dependencia## )
.##) *
Resolve##* 1
<##1 2
IOperacionLogica##2 B
>##B C
(##C D
)##D E
;##E F
maestroLogica$$ 
=$$ 
Dependencia$$ '
.$$' (
Resolve$$( /
<$$/ 0
IMaestroLogica$$0 >
>$$> ?
($$? @
)$$@ A
;$$A B(
facturacionElectronicaLogica%% (
=%%) *
Dependencia%%+ 6
.%%6 7
Resolve%%7 >
<%%> ?)
IFacturacionElectronicaLogica%%? \
>%%\ ]
(%%] ^
)%%^ _
;%%_ `
}'' 	
SesionCochera)) 
SesionCochera)) #
{** 	
get++ 
{++ 
return,, 
(,, 
SesionCochera,, %
),,% &
this,,& *
.,,* +
Session,,+ 2
[,,2 3
$str,,3 B
],,B C
;,,C D
}-- 
set.. 
{.. 
this// 
.// 
Session// 
[// 
$str// ,
]//, -
=//. /
value//0 5
;//5 6
}00 
}11 	
public33 
ActionResult33 
Index33 !
(33! "
)33" #
{44 	
SesionCochera66 
=66 
cocheraLogica66 )
.66) *
ObtenerSesion66* 7
(667 8
ProfileData668 C
(66C D
)66D E
)66E F
;66F G
ViewBag88 
.88 
fechaInicio88 
=88  !
DateTimeUtil88! -
.88- .
FechaActual88. 9
(889 :
)88: ;
.88; <
AddDays88< C
(88C D
-88D E
$num88E F
)88F G
.88G H
ToString88H P
(88P Q
$str88Q ]
)88] ^
;88^ _
ViewBag99 
.99 
fechaFin99 
=99 
DateTimeUtil99 *
.99* +
FechaActual99+ 6
(996 7
)997 8
.998 9
ToString999 A
(99A B
$str99B N
)99N O
;99O P
ViewBag:: 
.:: (
IdSistemDePagoPlanaPorTurnos:: 0
=::1 2
(::3 4
int::4 7
)::7 8
SistemaPagoCochera::8 J
.::J K
PLN::K N
;::N O
ViewBag;; 
.;; !
IdSistemDePagoPorHora;; )
=;;* +
(;;, -
int;;- 0
);;0 1
SistemaPagoCochera;;1 C
.;;C D
HOR;;D G
;;;G H
ViewBag<< 
.<< "
IdSistemDePagoAbonados<< *
=<<+ ,
(<<- .
int<<. 1
)<<1 2
SistemaPagoCochera<<2 D
.<<D E
ABN<<E H
;<<H I
ViewBag== 
.== 
IdEstadoIngresado== %
===& '
MaestroSettings==( 7
.==7 8
Default==8 ?
.==? @+
IdDetalleMaestroEstadoIngresado==@ _
;==_ `
ViewBag>> 
.>> 
IdEstadoFinalizado>> &
=>>' (
MaestroSettings>>) 8
.>>8 9
Default>>9 @
.>>@ A,
 IdDetalleMaestroEstadoFinalizado>>A a
;>>a b
ViewBag?? 
.?? 
IdMedioPagoDefault?? &
=??' (
MaestroSettings??) 8
.??8 9
Default??9 @
.??@ A/
#IdDetalleMaestroMedioDepagoEfectivo??A d
;??d e
ViewBag@@ 
.@@ 
PrecioPerdidaTicket@@ '
=@@( )
SesionCochera@@* 7
.@@7 8
Precio@@8 >
(@@> ?
SesionCochera@@? L
.@@L M
Configuracion@@M Z
.@@Z [%
IdConceptoPerdidaDeTicket@@[ t
)@@t u
.@@u v
Importe@@v }
;@@} ~
ViewBagAA 
.AA 
IdRolClienteAA  
=AA! "
ActorSettingsAA# 0
.AA0 1
DefaultAA1 8
.AA8 9
IdRolClienteAA9 E
;AAE F
ViewBagBB 
.BB 
NombreRolClienteBB $
=BB% &
$strBB' 0
;BB0 1
ViewBagCC 
.CC 
AplicaLeyAmazoniaCC %
=CC& '
TransaccionSettingsCC( ;
.CC; <
DefaultCC< C
.CCC D
AplicaLeyAmazoniaCCD U
;CCU V
ViewBagDD 
.DD 
TasaIGVDD 
=DD 
TransaccionSettingsDD 1
.DD1 2
DefaultDD2 9
.DD9 :
TasaIGVDD: A
;DDA B
ViewBagEE 
.EE (
TiempoEsperaBusquedaSelectorEE 0
=EE1 2
AplicacionSettingsEE3 E
.EEE F
DefaultEEF M
.EEM N<
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidadEEN ~
;EE~ 
ViewBagFF 
.FF 0
$MinimoCaracteresBuscarActorComercialFF 8
=FF9 :
ActorSettingsFF; H
.FFH I
DefaultFFI P
.FFP QA
4MinimoDeCaracteresParaBuscarEnSelectorActorComercial	FFQ Ö
;
FFÖ Ü
ViewBagGG 
.GG ;
/MascaraDeVisualizacionValidacionRegistroClienteGG C
=GGD E
ActorSettingsGGF S
.GGS T
DefaultGGT [
.GG[ \<
/MascaraDeVisualizacionValidacionRegistroCliente	GG\ ã
;
GGã å
returnHH 
ViewHH 
(HH 
)HH 
;HH 
}II 	
publicKK 
ActionResultKK 
ExoneracionesKK )
(KK) *
)KK* +
{LL 	
ViewBagMM 
.MM 
fechaInicioMM 
=MM  !
DateTimeUtilMM! -
.MM- .
FechaActualMM. 9
(MM9 :
)MM: ;
.MM; <
AddDaysMM< C
(MMC D
-MMD E
$numMME F
)MMF G
.MMG H
ToStringMMH P
(MMP Q
$strMMQ ]
)MM] ^
;MM^ _
ViewBagNN 
.NN 
fechaFinNN 
=NN 
DateTimeUtilNN *
.NN* +
FechaActualNN+ 6
(NN6 7
)NN7 8
.NN8 9
ToStringNN9 A
(NNA B
$strNNB N
)NNN O
;NNO P
returnOO 
ViewOO 
(OO 
)OO 
;OO 
}PP 	
publicRR 

JsonResultRR %
ObtenerMovimientosCocheraRR 3
(RR3 4
stringRR4 :
desdeRR; @
,RR@ A
stringRRB H
hastaRRI N
)RRN O
{SS 	
DateTimeTT 

fechaDesdeTT 
=TT  !
DateTimeTT" *
.TT* +
ParseTT+ 0
(TT0 1
desdeTT1 6
)TT6 7
;TT7 8
DateTimeVV 

fechaHastaVV 
=VV  !
DateTimeVV" *
.VV* +
ParseVV+ 0
(VV0 1
hastaVV1 6
+VV7 8
$strVV9 D
)VVD E
;VVE F
tryWW 
{XX 
ListYY 
<YY #
MovimientoCocheraBasicoYY ,
>YY, -
ordenesDeVehiculosYY. @
=YYA B
cocheraLogicaYYC P
.YYP Q*
ObtenerMovimientosDatosBasicosYYQ o
(YYo p

fechaDesdeYYp z
,YYz {

fechaHasta	YY| Ü
,
YYÜ á
ProfileData
YYà ì
(
YYì î
)
YYî ï
.
YYï ñ,
IdCentroDeAtencionSeleccionado
YYñ ¥
)
YY¥ µ
.
YYµ ∂
OrderByDescending
YY∂ «
(
YY« »
ov
YY»  
=>
YY  Ã
ov
YYÃ Œ
.
YYŒ œ
Id
YYœ —
)
YY— “
.
YY“ ”
ToList
YY” Ÿ
(
YYŸ ⁄
)
YY⁄ €
;
YY€ ‹
returnZZ 
JsonZZ 
(ZZ 
ordenesDeVehiculosZZ .
)ZZ. /
;ZZ/ 0
}[[ 
catch\\ 
(\\ 
	Exception\\ 
e\\ 
)\\ 
{]] 
return^^ 
new^^  
JsonHttpStatusResult^^ /
(^^/ 0
Util^^0 4
.^^4 5
	ErrorJson^^5 >
(^^> ?
e^^? @
)^^@ A
,^^A B
HttpStatusCode^^C Q
.^^Q R
InternalServerError^^R e
)^^e f
;^^f g
}__ 
}`` 	
publicbb 

JsonResultbb -
!ObtenerVehiculoParaEditarPorPlacabb ;
(bb; <
stringbb< B
placabbC H
)bbH I
{cc 	
trydd 
{ee 
varff 
vehiculoff 
=ff 
cocheraLogicaff ,
.ff, -#
ObtenerVehiculoPorPlacaff- D
(ffD E
placaffE J
)ffJ K
;ffK L
returngg 
Jsongg 
(gg 
vehiculogg $
)gg$ %
;gg% &
}hh 
catchii 
(ii 
	Exceptionii 
eii 
)ii 
{jj 
returnkk 
newkk  
JsonHttpStatusResultkk /
(kk/ 0
Utilkk0 4
.kk4 5
	ErrorJsonkk5 >
(kk> ?
ekk? @
)kk@ A
,kkA B
HttpStatusCodekkC Q
.kkQ R
InternalServerErrorkkR e
)kke f
;kkf g
}ll 
}mm 	
publicpp 

JsonResultpp #
ObtenerVehiculoPorPlacapp 1
(pp1 2
stringpp2 8
placapp9 >
)pp> ?
{qq 	
tryrr 
{ss 
vartt 
vehiculott 
=tt 
cocheraLogicatt ,
.tt, -#
ObtenerVehiculoPorPlacatt- D
(ttD E
placattE J
)ttJ K
;ttK L
returnuu 
Jsonuu 
(uu 
newuu  
{uu! "

encontradouu# -
=uu. /
vehiculouu0 8
!=uu9 ;
nulluu< @
,uu@ A
datauuB F
=uuG H
vehiculouuI Q
}uuR S
)uuS T
;uuT U
}vv 
catchww 
(ww 
	Exceptionww 
eww 
)ww 
{xx 
returnyy 
newyy  
JsonHttpStatusResultyy /
(yy/ 0
Utilyy0 4
.yy4 5
	ErrorJsonyy5 >
(yy> ?
eyy? @
)yy@ A
,yyA B
HttpStatusCodeyyC Q
.yyQ R
InternalServerErroryyR e
)yye f
;yyf g
}zz 
}{{ 	
public}} 

JsonResult}} "
ObtenerTiposDeVehiculo}} 0
(}}0 1
)}}1 2
{~~ 	
try 
{
ÄÄ 
return
ÅÅ 
Json
ÅÅ 
(
ÅÅ 
cocheraLogica
ÅÅ )
.
ÅÅ) *$
ObtenerTiposDeVehiculo
ÅÅ* @
(
ÅÅ@ A
)
ÅÅA B
)
ÅÅB C
;
ÅÅC D
}
ÇÇ 
catch
ÉÉ 
(
ÉÉ 
	Exception
ÉÉ 
e
ÉÉ 
)
ÉÉ 
{
ÑÑ 
return
ÖÖ 
new
ÖÖ "
JsonHttpStatusResult
ÖÖ /
(
ÖÖ/ 0
Util
ÖÖ0 4
.
ÖÖ4 5
	ErrorJson
ÖÖ5 >
(
ÖÖ> ?
e
ÖÖ? @
)
ÖÖ@ A
,
ÖÖA B
HttpStatusCode
ÖÖC Q
.
ÖÖQ R!
InternalServerError
ÖÖR e
)
ÖÖe f
;
ÖÖf g
}
ÜÜ 
}
áá 	
public
ââ 

JsonResult
ââ "
ObtenerExoneraciones
ââ .
(
ââ. /
int
ââ/ 2
	idCochera
ââ3 <
)
ââ< =
{
ää 	
try
ãã 
{
åå 
var
çç 
exoneraciones
çç !
=
çç" #
cocheraLogica
çç$ 1
.
çç1 2(
ObtenerVehiculosExonerados
çç2 L
(
ççL M
	idCochera
ççM V
)
ççV W
;
ççW X
return
éé 
Json
éé 
(
éé 
exoneraciones
éé )
)
éé) *
;
éé* +
}
èè 
catch
êê 
(
êê 
	Exception
êê 
e
êê 
)
êê 
{
ëë 
return
íí 
new
íí "
JsonHttpStatusResult
íí /
(
íí/ 0
Util
íí0 4
.
íí4 5
	ErrorJson
íí5 >
(
íí> ?
e
íí? @
)
íí@ A
,
ííA B
HttpStatusCode
ííC Q
.
ííQ R!
InternalServerError
ííR e
)
ííe f
;
ííf g
}
ìì 
}
îî 	
public
ïï 

JsonResult
ïï %
ObtenerMarcasDeVehiculo
ïï 1
(
ïï1 2
)
ïï2 3
{
ññ 	
try
óó 
{
òò 
List
ôô 
<
ôô 
ItemGenerico
ôô !
>
ôô! "
marcas
ôô# )
=
ôô* +
cocheraLogica
ôô, 9
.
ôô9 :%
ObtenerMarcasDeVehiculo
ôô: Q
(
ôôQ R
)
ôôR S
;
ôôS T
return
öö 
Json
öö 
(
öö 
marcas
öö "
)
öö" #
;
öö# $
}
õõ 
catch
úú 
(
úú 
	Exception
úú 
e
úú 
)
úú 
{
ùù 
return
ûû 
new
ûû "
JsonHttpStatusResult
ûû /
(
ûû/ 0
Util
ûû0 4
.
ûû4 5
	ErrorJson
ûû5 >
(
ûû> ?
e
ûû? @
)
ûû@ A
,
ûûA B
HttpStatusCode
ûûC Q
.
ûûQ R!
InternalServerError
ûûR e
)
ûûe f
;
ûûf g
}
üü 
}
†† 	
public
¢¢ 

JsonResult
¢¢ 
ObtenerCocheras
¢¢ )
(
¢¢) *
)
¢¢* +
{
££ 	
try
§§ 
{
•• 
List
¶¶ 
<
¶¶ 
ItemGenerico
¶¶ !
>
¶¶! "
cocheras
¶¶# +
=
¶¶, -
cocheraLogica
¶¶. ;
.
¶¶; <
ObtenerCocheras
¶¶< K
(
¶¶K L
)
¶¶L M
;
¶¶M N
return
ßß 
Json
ßß 
(
ßß 
cocheras
ßß $
)
ßß$ %
;
ßß% &
}
®® 
catch
©© 
(
©© 
	Exception
©© 
e
©© 
)
©© 
{
™™ 
return
´´ 
new
´´ "
JsonHttpStatusResult
´´ /
(
´´/ 0
Util
´´0 4
.
´´4 5
	ErrorJson
´´5 >
(
´´> ?
e
´´? @
)
´´@ A
,
´´A B
HttpStatusCode
´´C Q
.
´´Q R!
InternalServerError
´´R e
)
´´e f
;
´´f g
}
¨¨ 
}
≠≠ 	
public
ØØ 

JsonResult
ØØ -
ObtenerSistemaDePagoParaCochera
ØØ 9
(
ØØ9 :
)
ØØ: ;
{
∞∞ 	
try
±± 
{
≤≤ 
List
≥≥ 
<
≥≥ 
ItemGenerico
≥≥ !
>
≥≥! "
sistemasDePago
≥≥# 1
=
≥≥2 3
cocheraLogica
≥≥4 A
.
≥≥A B#
ObtenerSistemasDePago
≥≥B W
(
≥≥W X
)
≥≥X Y
;
≥≥Y Z
return
¥¥ 
Json
¥¥ 
(
¥¥ 
sistemasDePago
¥¥ *
)
¥¥* +
;
¥¥+ ,
}
µµ 
catch
∂∂ 
(
∂∂ 
	Exception
∂∂ 
e
∂∂ 
)
∂∂ 
{
∑∑ 
return
∏∏ 
new
∏∏ "
JsonHttpStatusResult
∏∏ /
(
∏∏/ 0
Util
∏∏0 4
.
∏∏4 5
	ErrorJson
∏∏5 >
(
∏∏> ?
e
∏∏? @
)
∏∏@ A
,
∏∏A B
HttpStatusCode
∏∏C Q
.
∏∏Q R!
InternalServerError
∏∏R e
)
∏∏e f
;
∏∏f g
}
ππ 
}
∫∫ 	
public
ΩΩ 

JsonResult
ΩΩ 
GuardarVehiculo
ΩΩ )
(
ΩΩ) *
Vehiculo
ΩΩ* 2
vehiculo
ΩΩ3 ;
)
ΩΩ; <
{
ææ 	
try
øø 
{
¿¿ 
OperationResult
¡¡ 
	resultado
¡¡  )
=
¡¡* +
null
¡¡, 0
;
¡¡0 1
if
¬¬ 
(
¬¬ 
vehiculo
¬¬ 
.
¬¬ 
Id
¬¬ 
!=
¬¬  "
$num
¬¬# $
)
¬¬$ %
{
√√ 
	resultado
ƒƒ 
=
ƒƒ 
cocheraLogica
ƒƒ  -
.
ƒƒ- .
EditarVehiculo
ƒƒ. <
(
ƒƒ< =
vehiculo
ƒƒ= E
)
ƒƒE F
;
ƒƒF G
}
≈≈ 
else
∆∆ 
{
«« 
	resultado
»» 
=
»» 
cocheraLogica
»»  -
.
»»- .
RegistrarVehiculo
»». ?
(
»»? @
vehiculo
»»@ H
)
»»H I
;
»»I J
}
…… 
Util
   
.
   (
ManageIfResultIsNotSuccess
   /
(
  / 0
	resultado
  0 9
,
  9 :
$str
  ; V
)
  V W
;
  W X
var
ÀÀ 
information
ÀÀ 
=
ÀÀ  !
	resultado
ÀÀ" +
.
ÀÀ+ ,
information
ÀÀ, 7
;
ÀÀ7 8
return
ÃÃ 
new
ÃÃ "
JsonHttpStatusResult
ÃÃ /
(
ÃÃ/ 0
new
ÃÃ0 3
{
ÃÃ4 5
	resultado
ÃÃ6 ?
.
ÃÃ? @
code_result
ÃÃ@ K
,
ÃÃK L
	resultado
ÃÃM V
.
ÃÃV W
data
ÃÃW [
,
ÃÃ[ \ 
result_description
ÃÃ] o
=
ÃÃp q
	resultado
ÃÃr {
.
ÃÃ{ |
titleÃÃ| Å
,ÃÃÅ Ç
informationÃÃÉ é
}ÃÃé è
,ÃÃè ê
HttpStatusCodeÃÃë ü
.ÃÃü †
OKÃÃ† ¢
)ÃÃ¢ £
;ÃÃ£ §
}
ÕÕ 
catch
ŒŒ 
(
ŒŒ 
	Exception
ŒŒ 
e
ŒŒ 
)
ŒŒ 
{
œœ 
return
–– 
new
–– "
JsonHttpStatusResult
–– /
(
––/ 0
Util
––0 4
.
––4 5
	ErrorJson
––5 >
(
––> ?
e
––? @
)
––@ A
,
––A B
HttpStatusCode
––C Q
.
––Q R!
InternalServerError
––R e
)
––e f
;
––f g
}
—— 
}
““ 	
public
”” 

JsonResult
”” 
ExonerarVehiculo
”” *
(
””* +
Vehiculo
””+ 3
vehiculo
””4 <
,
””< =
int
””> A
	idCochera
””B K
)
””K L
{
‘‘ 	
try
’’ 
{
÷÷ 
OperationResult
◊◊ 
	resultado
◊◊  )
=
◊◊* +
null
◊◊, 0
;
◊◊0 1
	resultado
ÿÿ 
=
ÿÿ 
cocheraLogica
ÿÿ )
.
ÿÿ) *
ExonerarVehiculo
ÿÿ* :
(
ÿÿ: ;
vehiculo
ÿÿ; C
,
ÿÿC D
	idCochera
ÿÿE N
)
ÿÿN O
;
ÿÿO P
Util
ŸŸ 
.
ŸŸ (
ManageIfResultIsNotSuccess
ŸŸ /
(
ŸŸ/ 0
	resultado
ŸŸ0 9
,
ŸŸ9 :
$str
ŸŸ; g
)
ŸŸg h
;
ŸŸh i
return
⁄⁄ 
new
⁄⁄ "
JsonHttpStatusResult
⁄⁄ .
(
⁄⁄. /
new
⁄⁄/ 2
{
⁄⁄3 4
	resultado
⁄⁄5 >
.
⁄⁄> ?
code_result
⁄⁄? J
,
⁄⁄J K
	resultado
⁄⁄L U
.
⁄⁄U V
data
⁄⁄V Z
,
⁄⁄Z [ 
result_description
⁄⁄\ n
=
⁄⁄o p
	resultado
⁄⁄q z
.
⁄⁄z {
title⁄⁄{ Ä
}⁄⁄Ä Å
,⁄⁄Å Ç
HttpStatusCode⁄⁄É ë
.⁄⁄ë í
OK⁄⁄í î
)⁄⁄î ï
;⁄⁄ï ñ
}
€€ 
catch
‹‹ 
(
‹‹ 
	Exception
‹‹ 
e
‹‹ 
)
‹‹ 
{
›› 
return
ﬁﬁ 
new
ﬁﬁ "
JsonHttpStatusResult
ﬁﬁ /
(
ﬁﬁ/ 0
Util
ﬁﬁ0 4
.
ﬁﬁ4 5
	ErrorJson
ﬁﬁ5 >
(
ﬁﬁ> ?
e
ﬁﬁ? @
)
ﬁﬁ@ A
,
ﬁﬁA B
HttpStatusCode
ﬁﬁC Q
.
ﬁﬁQ R!
InternalServerError
ﬁﬁR e
)
ﬁﬁe f
;
ﬁﬁf g
}
ﬂﬂ 
}
‡‡ 	
public
‚‚ 

JsonResult
‚‚ (
QuitarExoneracionAVehiculo
‚‚ 4
(
‚‚4 5#
ExoneracionDeVehiculo
‚‚5 J
exoneracion
‚‚K V
)
‚‚V W
{
„„ 	
try
‰‰ 
{
ÂÂ 
OperationResult
ÊÊ 
	resultado
ÊÊ  )
=
ÊÊ* +
null
ÊÊ, 0
;
ÊÊ0 1
	resultado
ÁÁ 
=
ÁÁ 
cocheraLogica
ÁÁ )
.
ÁÁ) *(
QuitarExoneracionAVehiculo
ÁÁ* D
(
ÁÁD E
exoneracion
ÁÁE P
)
ÁÁP Q
;
ÁÁQ R
Util
ËË 
.
ËË (
ManageIfResultIsNotSuccess
ËË /
(
ËË/ 0
	resultado
ËË0 9
,
ËË9 :
$str
ËË; c
)
ËËc d
;
ËËd e
return
ÈÈ 
new
ÈÈ "
JsonHttpStatusResult
ÈÈ /
(
ÈÈ/ 0
new
ÈÈ0 3
{
ÈÈ4 5
	resultado
ÈÈ6 ?
.
ÈÈ? @
code_result
ÈÈ@ K
,
ÈÈK L
	resultado
ÈÈM V
.
ÈÈV W
data
ÈÈW [
,
ÈÈ[ \ 
result_description
ÈÈ] o
=
ÈÈp q
	resultado
ÈÈr {
.
ÈÈ{ |
titleÈÈ| Å
}ÈÈÇ É
,ÈÈÉ Ñ
HttpStatusCodeÈÈÖ ì
.ÈÈì î
OKÈÈî ñ
)ÈÈñ ó
;ÈÈó ò
}
ÍÍ 
catch
ÎÎ 
(
ÎÎ 
	Exception
ÎÎ 
e
ÎÎ 
)
ÎÎ 
{
ÏÏ 
return
ÌÌ 
new
ÌÌ "
JsonHttpStatusResult
ÌÌ /
(
ÌÌ/ 0
Util
ÌÌ0 4
.
ÌÌ4 5
	ErrorJson
ÌÌ5 >
(
ÌÌ> ?
e
ÌÌ? @
)
ÌÌ@ A
,
ÌÌA B
HttpStatusCode
ÌÌC Q
.
ÌÌQ R!
InternalServerError
ÌÌR e
)
ÌÌe f
;
ÌÌf g
}
ÓÓ 
}
ÔÔ 	
public
 

JsonResult
 
RegistrarIngreso
 *
(
* +
Ingreso
+ 2
ingreso
3 :
)
: ;
{
ÒÒ 	
try
ÚÚ 
{
ÛÛ 
OperationResult
ÙÙ 
	resultado
ÙÙ  )
=
ÙÙ* +
null
ÙÙ, 0
;
ÙÙ0 1
	resultado
ıı 
=
ıı 
cocheraLogica
ıı )
.
ıı) *
RegistrarIngreso
ıı* :
(
ıı: ;
SesionCochera
ıı; H
,
ııH I
ingreso
ııJ Q
)
ııQ R
;
ııR S
Util
ˆˆ 
.
ˆˆ (
ManageIfResultIsNotSuccess
ˆˆ /
(
ˆˆ/ 0
	resultado
ˆˆ0 9
,
ˆˆ9 :
$str
ˆˆ; a
)
ˆˆa b
;
ˆˆb c
var
˜˜ 
nombreVista
˜˜ 
=
˜˜  !
$str
˜˜" F
;
˜˜F G
var
¯¯ 
result
¯¯ 
=
¯¯ 
HtmlStringBuilder
¯¯ -
.
¯¯- .%
RenderRazorViewToString
¯¯. E
(
¯¯E F
nombreVista
¯¯F Q
,
¯¯Q R
	resultado
¯¯S \
.
¯¯\ ]
information
¯¯] h
,
¯¯h i
this
¯¯j n
)
¯¯n o
;
¯¯o p
return
˙˙ 
new
˙˙ "
JsonHttpStatusResult
˙˙ /
(
˙˙/ 0
new
˙˙0 3
{
˙˙4 5
	resultado
˙˙6 ?
.
˙˙? @
code_result
˙˙@ K
,
˙˙K L
	resultado
˙˙M V
.
˙˙V W
data
˙˙W [
,
˙˙[ \ 
result_description
˙˙] o
=
˙˙p q
	resultado
˙˙r {
.
˙˙{ |
title˙˙| Å
,˙˙Å Ç
information˙˙É é
=˙˙è ê
result˙˙ë ó
}˙˙ò ô
,˙˙ô ö
HttpStatusCode˙˙õ ©
.˙˙© ™
OK˙˙™ ¨
)˙˙¨ ≠
;˙˙≠ Æ
}
˚˚ 
catch
¸¸ 
(
¸¸ 
	Exception
¸¸ 
e
¸¸ 
)
¸¸ 
{
˝˝ 
return
ˇˇ 
new
ˇˇ "
JsonHttpStatusResult
ˇˇ /
(
ˇˇ/ 0
Util
ˇˇ0 4
.
ˇˇ4 5
	ErrorJson
ˇˇ5 >
(
ˇˇ> ?
e
ˇˇ? @
)
ˇˇ@ A
,
ˇˇA B
HttpStatusCode
ˇˇC Q
.
ˇˇQ R!
InternalServerError
ˇˇR e
)
ˇˇe f
;
ˇˇf g
}
ÄÄ 
}
ÅÅ 	
public
áá 

JsonResult
áá )
ObtenerMovimientoParaSalida
áá 5
(
áá5 6
string
áá6 <
placa
áá= B
)
ááB C
{
àà 	
try
ââ 
{
ää 
MovimientoCochera
ãã !

movimiento
ãã" ,
=
ãã- .
cocheraLogica
ãã/ <
.
ãã< =)
ObtenerMovimientoParaSalida
ãã= X
(
ããX Y
placa
ããY ^
,
ãã^ _
SesionCochera
ãã` m
)
ããm n
;
ããn o
return
åå 
Json
åå 
(
åå 
new
åå 
{
åå  !

encontrado
åå" ,
=
åå- .

movimiento
åå/ 9
!=
åå9 ;
null
åå; ?
,
åå? @
data
ååA E
=
ååF G

movimiento
ååH R
}
ååS T
)
ååT U
;
ååU V
}
çç 
catch
éé 
(
éé 
	Exception
éé 
e
éé 
)
éé 
{
èè 
return
êê 
new
êê "
JsonHttpStatusResult
êê /
(
êê/ 0
Util
êê0 4
.
êê4 5
	ErrorJson
êê5 >
(
êê> ?
e
êê? @
)
êê@ A
,
êêA B
HttpStatusCode
êêC Q
.
êêQ R!
InternalServerError
êêR e
)
êêe f
;
êêf g
}
ëë 
}
íí 	
public
îî 

JsonResult
îî 
RegistrarSalida
îî )
(
îî) *
MovimientoCochera
îî* ;
salida
îî< B
,
îîB C!
DatosVentaIntegrada
îîD W!
datosVentaIntegrada
îîX k
)
îîk l
{
ïï 	
try
ññ 
{
óó 0
"ResultadoRegistroMovimientoCochera
òò 2
	resultado
òò3 <
=
òò= >
cocheraLogica
òò? L
.
òòL M
RegistrarSalida
òòM \
(
òò\ ]
salida
òò] c
,
òòc d!
datosVentaIntegrada
òòe x
,
òòx y
SesionCocheraòòz á
)òòá à
;òòà â
var
ôô %
nombreVistaTicketSalida
ôô +
=
ôô, -
$str
ôô. Q
;
ôôQ R
var
öö 
ticketHtmlString
öö $
=
öö% &
HtmlStringBuilder
öö' 8
.
öö8 9%
RenderRazorViewToString
öö9 P
(
ööP Q%
nombreVistaTicketSalida
ööQ h
,
ööh i
new
ööj m"
TicketSalidaCocheraöön Å
(ööÅ Ç
SesionCocheraööÇ è
.ööè ê
SesionDeUsuarioööê ü
.ööü †
Sedeöö† §
,öö§ •
SesionCocheraöö¶ ≥
.öö≥ ¥
SesionDeUsuarioöö¥ √
.öö√ ƒ4
$EstablecimientoComercialSeleccionadoööƒ Ë
,ööË È
	resultadoööÍ Û
.ööÛ Ù

MovimientoööÙ ˛
,öö˛ ˇ
	resultadoööÄ â
.ööâ ä

Movimientoööä î
.ööî ï
Comprobanteööï †
.öö† °
Serieöö° ¶
,öö¶ ß
Convertöö® Ø
.ööØ ∞
ToInt32öö∞ ∑
(öö∑ ∏
	resultadoöö∏ ¡
.öö¡ ¬

Movimientoöö¬ Ã
.ööÃ Õ
ComprobanteööÕ ÿ
.ööÿ Ÿ
NumeroööŸ ﬂ
)ööﬂ ‡
,öö‡ ·
barCodeUtilöö‚ Ì
.ööÌ Ó#
ObtenerCodigoBarrasööÓ Å
(ööÅ Ç
	resultadoööÇ ã
.ööã å

Movimientoööå ñ
.ööñ ó
Vehiculoööó ü
.ööü †
Placaöö† •
)öö• ¶
)öö¶ ß
,ööß ®
thisöö© ≠
)öö≠ Æ
;ööÆ Ø
var
õõ 
ordenDeVenta
õõ  
=
õõ! "
operacionLogica
õõ# 2
.
õõ2 3-
ObtenerOrdenDeVentaParaImprimir
õõ3 R
(
õõR S
	resultado
õõS \
.
õõ\ ]
OrdenDeVenta
õõ] i
)
õõi j
;
õõj k
string
úú 
	qrContent
úú  
=
úú! "*
facturacionElectronicaLogica
úú# ?
.
úú? @
	ObtenerQR
úú@ I
(
úúI J
ordenDeVenta
úúJ V
,
úúV W
SesionCochera
úúX e
.
úúe f
SesionDeUsuario
úúf u
.
úúu v
Sede
úúv z
)
úúz {
;
úú{ |
byte
ùù 
[
ùù 
]
ùù 
qrBytes
ùù 
=
ùù  
barCodeUtil
ùù! ,
.
ùù, -
ObtenerCodigoQR
ùù- <
(
ùù< =
	qrContent
ùù= F
)
ùùF G
;
ùùG H
var
ûû (
comprobanteVentaHtmlString
ûû .
=
ûû/ 0#
CoreHtmlStringBuilder
ûû1 F
.
ûûF G
ObtenerHtmlString
ûûG X
(
ûûX Y
ordenDeVenta
ûûY e
,
ûûe f
FormatoImpresion
ûûg w
.
ûûw x
_80mm
ûûx }
,
ûû} ~
qrBytesûû Ü
,ûûÜ á
SesionCocheraûûà ï
.ûûï ñ
SesionDeUsuarioûûñ •
.ûû• ¶
Sedeûû¶ ™
,ûû™ ´
thisûû¨ ∞
,ûû∞ ±
maestroLogicaûû≤ ø
)ûûø ¿
;ûû¿ ¡
return
üü 
new
üü "
JsonHttpStatusResult
üü /
(
üü/ 0
new
üü0 3
{
üü4 5!
OperationResultEnum
üü6 I
.
üüI J
Success
üüJ Q
,
üüS T 
result_description
üüU g
=
üüh i
$strüüj ã
,üüã å
ticketüüç ì
=üüì î 
ticketHtmlStringüüî §
,üü§ • 
comprobanteVentaüü¶ ∂
=üü∂ ∑*
comprobanteVentaHtmlStringüü∏ “
}üü“ ”
,üü” ‘
HttpStatusCodeüü’ „
.üü„ ‰
OKüü‰ Ê
)üüÊ Á
;üüÁ Ë
}
†† 
catch
°° 
(
°° 
	Exception
°° 
e
°° 
)
°° 
{
¢¢ 
return
££ 
new
££ "
JsonHttpStatusResult
££ /
(
££/ 0
Util
££0 4
.
££4 5
	ErrorJson
££5 >
(
££> ?
e
££? @
)
££@ A
,
££A B
HttpStatusCode
££C Q
.
££Q R!
InternalServerError
££R e
)
££e f
;
££f g
}
§§ 
}
•• 	
public
ßß 
ActionResult
ßß 
Reportes
ßß $
(
ßß$ %
)
ßß% &
{
®® 	
ViewBag
©© 
.
©© 
fechaHoraInicio
©© #
=
©©$ %
DateTime
©©& .
.
©©. /
Now
©©/ 2
.
©©2 3
AddDays
©©3 :
(
©©: ;
-
©©; <
$num
©©< >
)
©©> ?
;
©©? @
ViewBag
™™ 
.
™™ 
fechaHoraFin
™™  
=
™™! "
DateTime
™™# +
.
™™+ ,
Now
™™, /
;
™™/ 0
ViewBag
´´ 
.
´´  
cantidadMaximaDias
´´ &
=
´´' (
$num
´´) +
;
´´+ ,
return
¨¨ 
View
¨¨ 
(
¨¨ 
)
¨¨ 
;
¨¨ 
}
≠≠ 	
public
±± 
ActionResult
±± (
ReporteVehiculosIngresados
±± 6
(
±±6 7
int
±±7 :
	idCochera
±±; D
,
±±D E
string
±±F L
nombreCochera
±±M Z
)
±±Z [
{
≤≤ 	
var
≥≥ 
cochera
≥≥ 
=
≥≥ 
new
≥≥ 
ItemGenerico
≥≥ *
{
≥≥+ ,
Id
≥≥- /
=
≥≥0 1
	idCochera
≥≥2 ;
,
≥≥; <
Nombre
≥≥= C
=
≥≥D E
nombreCochera
≥≥F S
}
≥≥T U
;
≥≥U V
var
¥¥ 
	rptviewer
¥¥ 
=
¥¥ /
!GenerarReporteVehiculosIngresados
¥¥ =
(
¥¥= >
cochera
¥¥> E
,
¥¥E F
true
¥¥G K
)
¥¥K L
;
¥¥L M
ViewBag
µµ 
.
µµ 
ReportViewer
µµ  
=
µµ! "
	rptviewer
µµ# ,
;
µµ, -
return
∂∂ 
View
∂∂ 
(
∂∂ 
$str
∂∂ -
)
∂∂- .
;
∂∂. /
}
∑∑ 	
public
ππ 
ReportViewer
ππ /
!GenerarReporteVehiculosIngresados
ππ =
(
ππ= >
ItemGenerico
ππ> J
cochera
ππK R
,
ππR S
bool
ππT X
fromRequest
ππY d
)
ππd e
{
∫∫ 	
List
ªª 
<
ªª "
EntradaSalidaUsuario
ªª %
>
ªª% &!
vehiculosIngresados
ªª' :
=
ªª; <
cocheraLogica
ªª= J
.
ªªJ K(
ObtenerVehiculosIngresados
ªªK e
(
ªªe f
cochera
ªªf m
.
ªªm n
Id
ªªn p
)
ªªp q
;
ªªq r
ReportParameter
ºº 

nombreSede
ºº &
=
ºº' (
new
ºº) ,
ReportParameter
ºº- <
(
ºº< =
$str
ºº= I
,
ººI J
ObtenerSede
ººK V
(
ººV W
)
ººW X
.
ººX Y
Nombre
ººY _
)
ºº_ `
;
ºº` a
ReportParameter
ΩΩ "
nombreCentroAtencion
ΩΩ 0
=
ΩΩ1 2
new
ΩΩ3 6
ReportParameter
ΩΩ7 F
(
ΩΩF G
$str
ΩΩG ]
,
ΩΩ] ^
cochera
ΩΩ_ f
.
ΩΩf g
Nombre
ΩΩg m
)
ΩΩm n
;
ΩΩn o
var
ææ 
	rptviewer
ææ 
=
ææ 
new
ææ 
ReportViewer
ææ  ,
(
ææ, -
)
ææ- .
{
ææ/ 0
ProcessingMode
ææ1 ?
=
ææ@ A
ProcessingMode
ææB P
.
ææP Q
Local
ææQ V
,
ææV W!
SizeToReportContent
ææX k
=
ææl m
true
ææn r
,
æær s
Width
ææt y
=
ææz {
Unitææ| Ä
.ææÄ Å

PercentageææÅ ã
(ææã å
$numææå è
)ææè ê
,ææê ë
Heightææí ò
=ææô ö
Unitææõ ü
.ææü †

Percentageææ† ™
(ææ™ ´
$numææ´ Æ
)ææÆ Ø
}ææØ ∞
;ææ∞ ±
string
øø 
path
øø 
=
øø 
$str
øø N
;
øøN O
	rptviewer
¿¿ 
.
¿¿ 
LocalReport
¿¿ !
.
¿¿! "

ReportPath
¿¿" ,
=
¿¿- .
fromRequest
¿¿/ :
?
¿¿; <
Request
¿¿= D
.
¿¿D E
MapPath
¿¿E L
(
¿¿L M
Request
¿¿M T
.
¿¿T U
ApplicationPath
¿¿U d
)
¿¿d e
+
¿¿f g
path
¿¿h l
:
¿¿m n!
HostingEnvironment¿¿o Å
.¿¿Å Ç
MapPath¿¿Ç â
(¿¿â ä
path¿¿ä é
)¿¿é è
;¿¿è ê
	rptviewer
¡¡ 
.
¡¡ 
LocalReport
¡¡ !
.
¡¡! "
SetParameters
¡¡" /
(
¡¡/ 0
new
¡¡0 3
ReportParameter
¡¡4 C
[
¡¡C D
]
¡¡D E
{
¡¡F G

nombreSede
¡¡G Q
,
¡¡Q R"
nombreCentroAtencion
¡¡S g
}
¡¡g h
)
¡¡h i
;
¡¡i j
ReportDataSource
¬¬ 
rptdatasource
¬¬ *
=
¬¬+ ,
new
¬¬- 0
ReportDataSource
¬¬1 A
(
¬¬A B
$str
¬¬B ^
,
¬¬^ _!
vehiculosIngresados
¬¬` s
)
¬¬s t
;
¬¬t u
	rptviewer
√√ 
.
√√ 
LocalReport
√√ !
.
√√! "
DataSources
√√" -
.
√√- .
Add
√√. 1
(
√√1 2
rptdatasource
√√2 ?
)
√√? @
;
√√@ A
return
ƒƒ 
	rptviewer
ƒƒ 
;
ƒƒ 
}
≈≈ 	
public
«« 
ActionResult
«« %
ReporteIngresosYSalidas
«« 3
(
««3 4
int
««4 7
	idCochera
««8 A
,
««A B
string
««C I
nombreCochera
««J W
,
««W X
DateTime
««Y a
desde
««b g
,
««g h
DateTime
««i q
hasta
««r w
)
««w x
{
»» 	
var
…… 
cochera
…… 
=
…… 
new
…… 
ItemGenerico
…… *
{
……+ ,
Id
……- /
=
……0 1
	idCochera
……2 ;
,
……; <
Nombre
……= C
=
……D E
nombreCochera
……F S
}
……T U
;
……U V
var
ÀÀ 
	rptviewer
ÀÀ 
=
ÀÀ ,
GenerarReporteIngresosYSalidas
ÀÀ :
(
ÀÀ: ;
cochera
ÀÀ; B
,
ÀÀB C
desde
ÀÀD I
,
ÀÀI J
hasta
ÀÀK P
,
ÀÀP Q
true
ÀÀR V
)
ÀÀV W
;
ÀÀW X
ViewBag
ÃÃ 
.
ÃÃ 
ReportViewer
ÃÃ  
=
ÃÃ! "
	rptviewer
ÃÃ# ,
;
ÃÃ, -
return
ÕÕ 
View
ÕÕ 
(
ÕÕ 
$str
ÕÕ -
)
ÕÕ- .
;
ÕÕ. /
}
ŒŒ 	
public
–– 
ReportViewer
–– ,
GenerarReporteIngresosYSalidas
–– :
(
––: ;
ItemGenerico
––; G
cochera
––H O
,
––O P
DateTime
––Q Y
desde
––Z _
,
––_ `
DateTime
––a i
hasta
––j o
,
––o p
bool
––q u
fromRequest––v Å
)––Å Ç
{
—— 	
List
““ 
<
““ 
EntradaSalida
““ 
>
““ 
ingresosYSalidas
““  0
=
““1 2
cocheraLogica
““3 @
.
““@ A%
ObtenerEntradasYSalidas
““A X
(
““X Y
cochera
““Y `
.
““` a
Id
““a c
,
““c d
desde
““d i
,
““i j
hasta
““k p
)
““p q
;
““q r
ReportParameter
”” 

nombreSede
”” &
=
””' (
new
””) ,
ReportParameter
””- <
(
””< =
$str
””= I
,
””I J
ObtenerSede
””K V
(
””V W
)
””W X
.
””X Y
Nombre
””Y _
)
””_ `
;
””` a
ReportParameter
‘‘ "
nombreCentroAtencion
‘‘ 0
=
‘‘1 2
new
‘‘3 6
ReportParameter
‘‘7 F
(
‘‘F G
$str
‘‘G ]
,
‘‘] ^
cochera
‘‘_ f
.
‘‘f g
Nombre
‘‘g m
)
‘‘m n
;
‘‘n o
string
’’ 
path
’’ 
=
’’ 
$str
’’ K
;
’’K L
ReportDataSource
÷÷ 
rptdatasource
÷÷ *
=
÷÷+ ,
new
÷÷- 0
ReportDataSource
÷÷1 A
(
÷÷A B
$str
÷÷B [
,
÷÷[ \
ingresosYSalidas
÷÷] m
)
÷÷m n
;
÷÷n o
var
◊◊ 
	rptviewer
◊◊ 
=
◊◊ 
new
◊◊ 
ReportViewer
◊◊  ,
(
◊◊, -
)
◊◊- .
{
◊◊/ 0
ProcessingMode
◊◊1 ?
=
◊◊@ A
ProcessingMode
◊◊B P
.
◊◊P Q
Local
◊◊Q V
,
◊◊V W!
SizeToReportContent
◊◊X k
=
◊◊l m
true
◊◊n r
,
◊◊r s
Width
◊◊t y
=
◊◊z {
Unit◊◊| Ä
.◊◊Ä Å

Percentage◊◊Å ã
(◊◊ã å
$num◊◊å è
)◊◊è ê
,◊◊ê ë
Height◊◊í ò
=◊◊ô ö
Unit◊◊õ ü
.◊◊ü †

Percentage◊◊† ™
(◊◊™ ´
$num◊◊´ Æ
)◊◊Æ Ø
}◊◊∞ ±
;◊◊± ≤
	rptviewer
ÿÿ 
.
ÿÿ 
LocalReport
ÿÿ !
.
ÿÿ! "

ReportPath
ÿÿ" ,
=
ÿÿ- .
fromRequest
ÿÿ/ :
?
ÿÿ; <
Request
ÿÿ= D
.
ÿÿD E
MapPath
ÿÿE L
(
ÿÿL M
Request
ÿÿM T
.
ÿÿT U
ApplicationPath
ÿÿU d
)
ÿÿd e
+
ÿÿf g
path
ÿÿh l
:
ÿÿm n!
HostingEnvironmentÿÿo Å
.ÿÿÅ Ç
MapPathÿÿÇ â
(ÿÿâ ä
pathÿÿä é
)ÿÿé è
;ÿÿè ê
	rptviewer
ŸŸ 
.
ŸŸ 
LocalReport
ŸŸ !
.
ŸŸ! "
SetParameters
ŸŸ" /
(
ŸŸ/ 0
new
ŸŸ0 3
ReportParameter
ŸŸ4 C
[
ŸŸC D
]
ŸŸD E
{
ŸŸF G

nombreSede
ŸŸH R
,
ŸŸR S"
nombreCentroAtencion
ŸŸT h
}
ŸŸi j
)
ŸŸj k
;
ŸŸk l
	rptviewer
⁄⁄ 
.
⁄⁄ 
LocalReport
⁄⁄ !
.
⁄⁄! "
DataSources
⁄⁄" -
.
⁄⁄- .
Add
⁄⁄. 1
(
⁄⁄1 2
rptdatasource
⁄⁄2 ?
)
⁄⁄? @
;
⁄⁄@ A
return
€€ 
	rptviewer
€€ 
;
€€ 
}
‹‹ 	
public
ﬁﬁ 
ActionResult
ﬁﬁ "
ReporteExoneraciones
ﬁﬁ 0
(
ﬁﬁ0 1
int
ﬁﬁ1 4
	idCochera
ﬁﬁ5 >
,
ﬁﬁ> ?
string
ﬁﬁ@ F
nombreCochera
ﬁﬁG T
)
ﬁﬁT U
{
ﬂﬂ 	
var
‡‡ 
cochera
‡‡ 
=
‡‡ 
new
‡‡ 
ItemGenerico
‡‡ *
{
‡‡+ ,
Id
‡‡- /
=
‡‡0 1
	idCochera
‡‡2 ;
,
‡‡; <
Nombre
‡‡= C
=
‡‡D E
nombreCochera
‡‡F S
}
‡‡T U
;
‡‡U V
var
·· 
	rptviewer
·· 
=
·· )
GenerarReporteExoneraciones
·· 7
(
··7 8
cochera
··8 ?
,
··? @
true
··A E
)
··E F
;
··F G
ViewBag
‚‚ 
.
‚‚ 
ReportViewer
‚‚  
=
‚‚! "
	rptviewer
‚‚# ,
;
‚‚, -
return
„„ 
View
„„ 
(
„„ 
$str
„„ -
)
„„- .
;
„„. /
}
‰‰ 	
public
ÊÊ 
ReportViewer
ÊÊ )
GenerarReporteExoneraciones
ÊÊ 7
(
ÊÊ7 8
ItemGenerico
ÊÊ8 D
cochera
ÊÊE L
,
ÊÊL M
bool
ÊÊN R
fromRequest
ÊÊS ^
)
ÊÊ^ _
{
ÁÁ 	
List
ËË 
<
ËË (
ExoneracionDeVehiculo_Flat
ËË +
>
ËË+ ,
ingresosYSalidas
ËË- =
=
ËË> ?(
ExoneracionDeVehiculo_Flat
ËË@ Z
.
ËËZ [
Convert
ËË[ b
(
ËËb c
cocheraLogica
ËËc p
.
ËËp q1
"ObtenerVehiculosExoneradosVigentesËËq ì
(ËËì î
cocheraËËî õ
.ËËõ ú
IdËËú û
)ËËû ü
)ËËü †
;ËË° ¢
ReportParameter
ÈÈ 

nombreSede
ÈÈ &
=
ÈÈ' (
new
ÈÈ) ,
ReportParameter
ÈÈ- <
(
ÈÈ< =
$str
ÈÈ= I
,
ÈÈI J
ObtenerSede
ÈÈK V
(
ÈÈV W
)
ÈÈW X
.
ÈÈX Y
Nombre
ÈÈY _
)
ÈÈ_ `
;
ÈÈ` a
ReportParameter
ÍÍ "
nombreCentroAtencion
ÍÍ 0
=
ÍÍ1 2
new
ÍÍ3 6
ReportParameter
ÍÍ7 F
(
ÍÍF G
$str
ÍÍG ]
,
ÍÍ] ^
cochera
ÍÍ_ f
.
ÍÍf g
Nombre
ÍÍg m
)
ÍÍm n
;
ÍÍn o
string
ÎÎ 
path
ÎÎ 
=
ÎÎ 
$str
ÎÎ N
;
ÎÎN O
ReportDataSource
ÏÏ 
rptdatasource
ÏÏ *
=
ÏÏ+ ,
new
ÏÏ- 0
ReportDataSource
ÏÏ1 A
(
ÏÏA B
$str
ÏÏB X
,
ÏÏX Y
ingresosYSalidas
ÏÏZ j
)
ÏÏj k
;
ÏÏk l
var
ÌÌ 
	rptviewer
ÌÌ 
=
ÌÌ 
new
ÌÌ 
ReportViewer
ÌÌ  ,
(
ÌÌ, -
)
ÌÌ- .
{
ÌÌ/ 0
ProcessingMode
ÌÌ1 ?
=
ÌÌ@ A
ProcessingMode
ÌÌB P
.
ÌÌP Q
Local
ÌÌQ V
,
ÌÌV W!
SizeToReportContent
ÌÌX k
=
ÌÌl m
true
ÌÌn r
,
ÌÌr s
Width
ÌÌt y
=
ÌÌz {
UnitÌÌ| Ä
.ÌÌÄ Å

PercentageÌÌÅ ã
(ÌÌã å
$numÌÌå è
)ÌÌè ê
,ÌÌê ë
HeightÌÌí ò
=ÌÌô ö
UnitÌÌõ ü
.ÌÌü †

PercentageÌÌ† ™
(ÌÌ™ ´
$numÌÌ´ Æ
)ÌÌÆ Ø
}ÌÌ∞ ±
;ÌÌ± ≤
	rptviewer
ÓÓ 
.
ÓÓ 
LocalReport
ÓÓ !
.
ÓÓ! "

ReportPath
ÓÓ" ,
=
ÓÓ- .
fromRequest
ÓÓ/ :
?
ÓÓ; <
Request
ÓÓ= D
.
ÓÓD E
MapPath
ÓÓE L
(
ÓÓL M
Request
ÓÓM T
.
ÓÓT U
ApplicationPath
ÓÓU d
)
ÓÓd e
+
ÓÓf g
path
ÓÓh l
:
ÓÓm n!
HostingEnvironmentÓÓo Å
.ÓÓÅ Ç
MapPathÓÓÇ â
(ÓÓâ ä
pathÓÓä é
)ÓÓé è
;ÓÓè ê
	rptviewer
ÔÔ 
.
ÔÔ 
LocalReport
ÔÔ !
.
ÔÔ! "
SetParameters
ÔÔ" /
(
ÔÔ/ 0
new
ÔÔ0 3
ReportParameter
ÔÔ4 C
[
ÔÔC D
]
ÔÔD E
{
ÔÔF G

nombreSede
ÔÔH R
,
ÔÔR S"
nombreCentroAtencion
ÔÔT h
}
ÔÔi j
)
ÔÔj k
;
ÔÔk l
	rptviewer
 
.
 
LocalReport
 !
.
! "
DataSources
" -
.
- .
Add
. 1
(
1 2
rptdatasource
2 ?
)
? @
;
@ A
return
ÒÒ 
	rptviewer
ÒÒ 
;
ÒÒ 
}
ÚÚ 	
}
ÛÛ 
}ÙÙ …Á
WD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\CotizacionController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class  
CotizacionController %
:& '
BaseController( 6
{ 
private   
readonly   
ICotizacionLogica   *
cotizacionLogica  + ;
;  ; <
private!! 
readonly!! 
IConceptoLogica!! (
conceptoLogica!!) 7
;!!7 8
	protected"" 
readonly"" 
IMailer"" "
mailer""# )
;"") *
	protected## 
readonly## "
IVentaUtilitarioLogica## 1
	ventaUtil##2 ;
;##; <
	protected$$ 
readonly$$ 
IPdfUtil$$ #
pdfUtil$$$ +
;$$+ ,
public''  
CotizacionController'' #
(''# $
)''$ %
{(( 	
cotizacionLogica)) 
=)) 
Dependencia)) *
.))* +
Resolve))+ 2
<))2 3
ICotizacionLogica))3 D
>))D E
())E F
)))F G
;))G H
conceptoLogica** 
=** 
Dependencia** (
.**( )
Resolve**) 0
<**0 1
IConceptoLogica**1 @
>**@ A
(**A B
)**B C
;**C D
mailer++ 
=++ 
Dependencia++  
.++  !
Resolve++! (
<++( )
IMailer++) 0
>++0 1
(++1 2
)++2 3
;++3 4
	ventaUtil,, 
=,, 
Dependencia,, #
.,,# $
Resolve,,$ +
<,,+ ,"
IVentaUtilitarioLogica,,, B
>,,B C
(,,C D
),,D E
;,,E F
pdfUtil-- 
=-- 
Dependencia-- !
.--! "
Resolve--" )
<--) *
IPdfUtil--* 2
>--2 3
(--3 4
)--4 5
;--5 6
}00 	
public33 
ActionResult33 
Index33 !
(33! "
)33" #
{44 	
string55 
mascaraDeIngreso55 #
=55$ %
VentasSettings55& 4
.554 5
Default555 <
.55< =,
 MascaraDeCamposAIngresarEnVentas55= ]
;55] ^
string66 
mascaraDeCalculo66 #
=66$ %
VentasSettings66& 4
.664 5
Default665 <
.66< =*
MascaraFormasDeCalculoEnVentas66= [
;66[ \
ViewBag77 
.77 
fechaInicio77 
=77  !
DateTimeUtil77! -
.77- .
FechaActual77. 9
(779 :
)77: ;
.77; <
AddDays77< C
(77C D
-77D E
$num77E F
)77F G
.77G H
ToString77H P
(77P Q
$str77Q ]
)77] ^
;77^ _
ViewBag88 
.88 
fechaFin88 
=88 
DateTimeUtil88 *
.88* +
FechaActual88+ 6
(886 7
)887 8
.888 9
ToString889 A
(88A B
$str88B N
)88N O
;88O P
ViewBag99 
.99 %
idTipoActorPersonaNatural99 -
=99. /
ActorSettings990 =
.99= >
Default99> E
.99E F%
IdTipoActorPersonaNatural99F _
;99_ `
ViewBag:: 
.:: 
aplicaLeyAmazonia:: %
=::& '
TransaccionSettings::( ;
.::; <
Default::< C
.::C D
AplicaLeyAmazonia::D U
;::U V
ViewBag;; 
.;; 
tasaIGV;; 
=;; 
TransaccionSettings;; 1
.;;1 2
Default;;2 9
.;;9 :
TasaIGV;;: A
;;;A B
ViewBag<< 
.<< !
idMedioDePagoEfectivo<< )
=<<* +
MaestroSettings<<, ;
.<<; <
Default<<< C
.<<C D/
#IdDetalleMaestroMedioDepagoEfectivo<<D g
;<<g h
ViewBag== 
.== -
!ventasSujetasADisponibilidadStock== 5
===6 7
!==8 9
ProfileData==9 D
(==D E
)==E F
.==F G2
&CentroAtencionQueTieneElStockIntegrada==G m
.==m n!
SalidaBienesSinStock	==n Ç
;
==Ç É
ViewBag>> 
.>> &
idTipoActorPersonaJuridica>> .
=>>/ 0
ActorSettings>>1 >
.>>> ?
Default>>? F
.>>F G&
IdTipoActorPersonaJuridica>>G a
;>>a b
ViewBag?? 
.?? 
precioContieneIgv?? %
=??& '
TransaccionSettings??( ;
.??; <
Default??< C
.??C D
PrecioContieneIGV??D U
;??U V
ViewBag@@ 
.@@ 
idClienteGenerico@@ %
=@@& '
ActorSettings@@( 5
.@@5 6
Default@@6 =
.@@= >
IdClienteGenerico@@> O
;@@O P
ViewBagAA 
.AA 
idProveedorGenericoAA '
=AA( )
ActorSettingsAA* 7
.AA7 8
DefaultAA8 ?
.AA? @
idProveedorGenericoAA@ S
;AAS T
ViewBagBB 
.BB 2
&idTipoDocumentoCuandoClienteEsGenericoBB :
=BB; <
TransaccionSettingsBB= P
.BBP Q
DefaultBBQ X
.BBX Y2
&IdTipoDocumentoCuandoClienteEsGenericoBBY 
;	BB Ä
ViewBagCC 
.CC .
"idTipoDocumentoPorDefectoParaVentaCC 6
=CC7 8
TransaccionSettingsCC9 L
.CCL M
DefaultCCM T
.CCT U.
"IdTipoDocumentoPorDefectoParaVentaCCU w
;CCw x
ViewBagDD 
.DD )
mostrarAliasDeClienteGenericoDD 1
=DD2 3
TransaccionSettingsDD4 G
.DDG H
DefaultDDH O
.DDO P)
MostrarAliasDeClienteGenericoDDP m
;DDm n
ViewBagEE 
.EE (
precioUnitarioCalculadoVentaEE 0
=EE1 2
AplicacionSettingsEE3 E
.EEE F
DefaultEEF M
.EEM N(
PrecioUnitarioCalculadoVentaEEN j
;EEj k
ViewBagFF 
.FF #
mostrarDetalleUnificadoFF +
=FF, -
AplicacionSettingsFF. @
.FF@ A
DefaultFFA H
.FFH I#
MostrarDetalleUnificadoFFI `
;FF` a
ViewBagGG 
.GG #
checketDetalleUnificadoGG +
=GG, -
AplicacionSettingsGG. @
.GG@ A
DefaultGGA H
.GGH I#
ChecketDetalleUnificadoGGI `
;GG` a
ViewBagHH 
.HH !
valorDetalleUnificadoHH )
=HH* +
AplicacionSettingsHH, >
.HH> ?
DefaultHH? F
.HHF G!
ValorDetalleUnificadoHHG \
;HH\ ]
ViewBagII 
.II -
!aplicarCantidadPorDefectoEnVentasII 5
=II6 7
AplicacionSettingsII8 J
.IIJ K
DefaultIIK R
.IIR S-
!AplicarCantidadPorDefectoEnVentasIIS t
;IIt u
ViewBagJJ 
.JJ &
cantidadPorDefectoEnVentasJJ .
=JJ/ 0
AplicacionSettingsJJ1 C
.JJC D
DefaultJJD K
.JJK L&
CantidadPorDefectoEnVentasJJL f
;JJf g
ViewBagKK 
.KK /
#idTipoPersonaSeleccionadaPorDefectoKK 7
=KK8 9
ActorSettingsKK: G
.KKG H
DefaultKKH O
.KKO P/
#IdTipoPersonaSeleccionadaPorDefectoKKP s
;KKs t
ViewBagLL 
.LL <
0idTipoDocumentoSeleccionadaConTipoPersonaNaturalLL D
=LLE F
ActorSettingsLLG T
.LLT U
DefaultLLU \
.LL\ ]=
0IdTipoDocumentoSeleccionadaConTipoPersonaNatural	LL] ç
;
LLç é
ViewBagMM 
.MM =
1idTipoDocumentoSeleccionadaConTipoPersonaJuridicaMM E
=MMF G
ActorSettingsMMH U
.MMU V
DefaultMMV ]
.MM] ^>
1IdTipoDocumentoSeleccionadaConTipoPersonaJuridica	MM^ è
;
MMè ê
ViewBagNN 
.NN (
precioUnitarioIngresadoVentaNN 0
=NN1 2
AplicacionSettingsNN3 E
.NNE F
DefaultNNF M
.NNM N(
PrecioUnitarioIngresadoVentaNNN j
;NNj k
ViewBagOO 
.OO '
idTipoDocumentoIdentidadDniOO /
=OO0 1
ActorSettingsOO2 ?
.OO? @
DefaultOO@ G
.OOG H'
IdTipoDocumentoIdentidadDniOOH c
;OOc d
ViewBagPP 
.PP '
idTipoDocumentoIdentidadRucPP /
=PP0 1
ActorSettingsPP2 ?
.PP? @
DefaultPP@ G
.PPG H'
IdTipoDocumentoIdentidadRucPPH c
;PPc d
ViewBagQQ 
.QQ 3
'idDetalleMaestroCatalogoDocumentoBoletaQQ ;
=QQ< =
MaestroSettingsQQ> M
.QQM N
DefaultQQN U
.QQU V-
!IdDetalleMaestroComprobanteBoletaQQV w
;QQw x
ViewBagRR 
.RR 4
(idDetalleMaestroCatalogoDocumentoFacturaRR <
=RR= >
MaestroSettingsRR? N
.RRN O
DefaultRRO V
.RRV W.
"IdDetalleMaestroComprobanteFacturaRRW y
;RRy z
ViewBagSS 
.SS =
1montoMaximoAVenderCuandoClienteNoEstaIdenticicadoSS E
=SSF G*
FacturacionElectronicaSettingsSSH f
.SSf g
DefaultSSg n
.SSn o>
1MontoMaximoAVenderCuandoClienteNoEstaIdenticicado	SSo †
;
SS† °
ViewBagTT 
.TT "
permitirVentaAlCreditoTT *
=TT+ ,
AplicacionSettingsTT- ?
.TT? @
DefaultTT@ G
.TTG H"
PermitirVentaAlCreditoTTH ^
;TT^ _
ViewBagUU 
.UU '
permitirVentaConFechaPasadaUU /
=UU0 1
AplicacionSettingsUU2 D
.UUD E
DefaultUUE L
.UUL M'
PermitirVentaConFechaPasadaUUM h
;UUh i
ViewBagVV 
.VV 
fechaActualVV 
=VV  !
DateTimeUtilVV! -
.VV- .
FechaActualVV. 9
(VV9 :
)VV: ;
;VV; <
ViewBagWW 
.WW !
permitirRegistroFleteWW )
=WW* +
AplicacionSettingsWW, >
.WW> ?
DefaultWW? F
.WWF G(
PermitirRegistroFleteEnVentaWWG c
;WWc d
ViewBagXX 
.XX 
VenderConBoletaCadaXX '
=XX( )
VentasSettingsXX* 8
.XX8 9
DefaultXX9 @
.XX@ A
VenderConBoletaCadaXXA T
;XXT U
ViewBagYY 
.YY *
idUbigeoSeleccionadoPorDefectoYY 2
=YY3 4
ActorSettingsYY5 B
.YYB C
DefaultYYC J
.YYJ K3
'idUbigeoSeleccionadoPorDefectoEnClienteYYK r
;YYr s
ViewBagZZ 
.ZZ "
idUbigeoNoEspecificadoZZ *
=ZZ+ ,
ActorSettingsZZ- :
.ZZ: ;
DefaultZZ; B
.ZZB C"
idUbigeoNoEspecificadoZZC Y
;ZZY Z
ViewBag[[ 
.[[ )
modoIngresoCodigoBarraEnVenta[[ 1
=[[2 3
VentasSettings[[4 B
.[[B C
Default[[C J
.[[J K/
#ModoDeIngresoDeCodigoDeBarraEnVenta[[K n
;[[n o
ViewBag\\ 
.\\ .
"cursorPorDefectoCodigoBarraEnVenta\\ 6
=\\7 8
VentasSettings\\9 G
.\\G H
Default\\H O
.\\O P0
$CursorPorDefectoEnCodigoBarraEnVenta\\P t
;\\t u
ViewBag]] 
.]] -
!permitirRegistroDeGuiasDeRemision]] 5
=]]6 7
VentasSettings]]8 F
.]]F G
Default]]G N
.]]N O>
1PermitirRegistroDeGuiasDeRemisionEnVentaIntegrada	]]O Ä
;
]]Ä Å
ViewBag^^ 
.^^ 
direccionSede^^ !
=^^" #
(^^$ %
ObtenerSede^^% 0
(^^0 1
)^^1 2
.^^2 3
DomicilioFiscal^^3 B
!=^^C E
null^^F J
)^^J K
?^^L M
ObtenerSede^^N Y
(^^Y Z
)^^Z [
.^^[ \
DomicilioFiscal^^\ k
.^^k l
Detalle^^l s
:^^t u
$str^^v y
;^^y z
ViewBag__ 
.__ 
idUbigeoSede__  
=__! "
(__# $
ObtenerSede__$ /
(__/ 0
)__0 1
.__1 2
DomicilioFiscal__2 A
!=__B D
null__E I
)__I J
?__K L
ObtenerSede__M X
(__X Y
)__Y Z
.__Z [
DomicilioFiscal__[ j
.__j k
Ubigeo__k q
.__q r
Id__r t
:__u v
$num__w x
;__x y
ViewBag`` 
.`` )
idModalidadTrasladoPorDefecto`` 1
=``2 3
AplicacionSettings``4 F
.``F G
Default``G N
.``N O@
3IdModalidadDeTrasladoPorDefectoEnSalidaDeMercaderia	``O Ç
;
``Ç É
ViewBagaa 
.aa &
idMotivoTrasladoPorDefectoaa .
=aa/ 0
AplicacionSettingsaa1 C
.aaC D
DefaultaaD K
.aaK L<
0IdMotivoDeTrasladoPorDefectoEnSalidaDeMercaderiaaaL |
;aa| }
ViewBagbb 
.bb %
idTransportistaPorDefectobb -
=bb. /
AplicacionSettingsbb0 B
.bbB C
DefaultbbC J
.bbJ K9
-IdTransportistaPorDefectoEnSalidaDeMercaderiabbK x
;bbx y
ViewBagcc 
.cc )
idTipoDeComprobantePorDefectocc 1
=cc2 3
AplicacionSettingscc4 F
.ccF G
DefaultccG N
.ccN O>
1IdTipoDeComprobantePorDefectoEnSalidaDeMercaderia	ccO Ä
;
ccÄ Å
ViewBagdd 
.dd +
costoUnitarioPorBolsaDePlasticodd 3
=dd4 5
ProfileDatadd6 A
(ddA B
)ddB C
.ddC D"
CostoUnitarioDelIcbperddD Z
;ddZ [
ViewBagee 
.ee 1
%permitirRegistroNumeroBolsaDePlasticoee 9
=ee: ;
VentasSettingsee< J
.eeJ K
DefaulteeK R
.eeR S+
PermitirRegistroDeIcbperEnVentaeeS r
;eer s
ViewBagff 
.ff 2
&permitirRegistroDeLoteEnDetalleDeVentaff :
=ff; <
VentasSettingsff= K
.ffK L
DefaultffL S
.ffS T2
&PermitirRegistroDeLoteEnDetalleDeVentaffT z
;ffz {
ViewBaggg 
.gg )
idConceptoBasicoBolsaPlasticagg 1
=gg2 3
MaestroSettingsgg4 C
.ggC D
DefaultggD K
.ggK L7
+IdDetalleMaestroConceptoBasicoBolsaPlasticaggL w
;ggw x
ViewBaghh 
.hh *
idTarifaSeleccionadoPorDefectohh 2
=hh3 4
VentasSettingshh5 C
.hhC D
DefaulthhD K
.hhK L*
IdTarifaSeleccionadoPorDefectohhL j
;hhj k
ViewBagii 
.ii *
modoDeRegistroDeDetalleDeVentaii 2
=ii3 4
VentasSettingsii5 C
.iiC D
DefaultiiD K
.iiK L6
*ModoDeRegistroDeDetalleDeVentaYCobroMasivoiiL v
;iiv w
ViewBagjj 
.jj $
permitirIngresarCantidadjj ,
=jj- .
	ventaUtiljj/ 8
.jj8 9*
ObtenerCamposEditablesEnVentasjj9 W
(jjW X
mascaraDeIngresojjX h
,jjh i*
ElementoDeCalculoEnVentasEnum	jjj á
.
jjá à
Cantidad
jjà ê
)
jjê ë
;
jjë í
ViewBagkk 
.kk *
permitirIngresarPrecioUnitariokk 2
=kk3 4
	ventaUtilkk5 >
.kk> ?*
ObtenerCamposEditablesEnVentaskk? ]
(kk] ^
mascaraDeIngresokk^ n
,kkn o*
ElementoDeCalculoEnVentasEnum	kkp ç
.
kkç é
PrecioUnitario
kké ú
)
kkú ù
;
kkù û
ViewBagll 
.ll #
permitirIngresarImportell +
=ll, -
	ventaUtilll. 7
.ll7 8*
ObtenerCamposEditablesEnVentasll8 V
(llV W
mascaraDeIngresollW g
,llg h*
ElementoDeCalculoEnVentasEnum	lli Ü
.
llÜ á
Importe
llá é
)
llé è
;
llè ê
ViewBagmm 
.mm 2
&ingresarCantidadCalcularPrecioUnitariomm :
=mm; <
	ventaUtilmm= F
.mmF G+
ObtenerFormasDeCalculosEnVentasmmG f
(mmf g
mascaraDeCalculommg w
,mmw x*
ElementoDeCalculoEnVentasEnum	mmy ñ
.
mmñ ó
Cantidad
mmó ü
,
mmü †+
ElementoDeCalculoEnVentasEnum
mm° æ
.
mmæ ø
PrecioUnitario
mmø Õ
)
mmÕ Œ
;
mmŒ œ
ViewBagnn 
.nn 1
%ingresarPrecioUnitarioCalcularImportenn 9
=nn: ;
	ventaUtilnn< E
.nnE F+
ObtenerFormasDeCalculosEnVentasnnF e
(nne f
mascaraDeCalculonnf v
,nnv w*
ElementoDeCalculoEnVentasEnum	nnx ï
.
nnï ñ
PrecioUnitario
nnñ §
,
nn§ •+
ElementoDeCalculoEnVentasEnum
nn¶ √
.
nn√ ƒ
Importe
nnƒ À
)
nnÀ Ã
;
nnÃ Õ
ViewBagoo 
.oo +
ingresarImporteCalcularCantidadoo 3
=oo4 5
	ventaUtiloo6 ?
.oo? @+
ObtenerFormasDeCalculosEnVentasoo@ _
(oo_ `
mascaraDeCalculooo` p
,oop q*
ElementoDeCalculoEnVentasEnum	oor è
.
ooè ê
Importe
ooê ó
,
ooó ò+
ElementoDeCalculoEnVentasEnum
ooô ∂
.
oo∂ ∑
Cantidad
oo∑ ø
)
ooø ¿
;
oo¿ ¡
ViewBagpp 
.pp .
"modoDeSeleccionDeConceptoDeNegociopp 6
=pp7 8
VentasSettingspp9 G
.ppG H
DefaultppH O
.ppO P.
"ModoDeSeleccionDeConceptoDeNegocioppP r
;ppr s
ViewBagqq 
.qq 1
%idComprobantePredeterminadoPorDefectoqq 9
=qq: ;
MaestroSettingsqq< K
.qqK L
DefaultqqL S
.qqS T7
+IdDetalleMaestroComprobanteNotaVentaInternaqqT 
;	qq Ä
ViewBagrr 
.rr &
mascaraDeCalculoPorDefectorr .
=rr/ 0
VentasSettingsrr1 ?
.rr? @
Defaultrr@ G
.rrG H.
"MascaraDeCalculoPorDefectoEnVentasrrH j
;rrj k
ViewBagss 
.ss 3
'mascaraDeCalculoPrecioUnitarioCalculadoss ;
=ss< =
VentasSettingsss> L
.ssL M
DefaultssM T
.ssT U3
'MascaraDeCalculoPrecioUnitarioCalculadossU |
;ss| }
ViewBagtt 
.tt ,
 flujoDespuesDeCodigoBarraEnVentatt 4
=tt5 6
VentasSettingstt7 E
.ttE F
DefaultttF M
.ttM N,
 FlujoDespuesDeCodigoBarraEnVentattN n
;ttn o
ViewBaguu 
.uu /
#esPregeneracionVentaDesdeCotizacionuu 7
=uu8 9
falseuu: ?
;uu? @
ViewBagvv 
.vv (
idOrdenCotizacionAPregenerarvv 0
=vv1 2
$numvv3 4
;vv4 5
ViewBagww 
.ww ,
 permitirRegistroConceptoServicioww 4
=ww5 6
VentasSettingsww7 E
.wwE F
DefaultwwF M
.wwM N,
 PermitirRegistroConceptoServiciowwN n
;wwn o
ViewBagxx 
.xx %
numeroDecimalesEnCantidadxx -
=xx. /
AplicacionSettingsxx0 B
.xxB C
DefaultxxC J
.xxJ K%
NumeroDecimalesEnCantidadxxK d
;xxd e
ViewBagyy 
.yy #
numeroDecimalesEnPrecioyy +
=yy, -
AplicacionSettingsyy. @
.yy@ A
DefaultyyA H
.yyH I#
NumeroDecimalesEnPrecioyyI `
;yy` a
ViewBagzz 
.zz &
mostrarBuscadorCodigoBarrazz .
=zz/ 0
AplicacionSettingszz1 C
.zzC D
DefaultzzD K
.zzK L2
&MostrarBuscadorCodigoBarraEnCotizacionzzL r
;zzr s
ViewBag{{ 
.{{ %
modoDeSeleccionDeConcepto{{ -
={{. /
AplicacionSettings{{0 B
.{{B C
Default{{C J
.{{J K:
.ModoDeSeleccionDeConceptoDeNegocioEnCotizacion{{K y
;{{y z
ViewBag|| 
.|| $
modoSeleccionTipoFamilia|| ,
=||- .
AplicacionSettings||/ A
.||A B
Default||B I
.||I J4
(ModoDeSeleccionTipoDeFamiliaEnCotizacion||J r
;||r s
ViewBag}} 
.}} *
minimoCaracteresBuscarConcepto}} 2
=}}3 4
AplicacionSettings}}5 G
.}}G H
Default}}H O
.}}O P:
.MinimoDeCaracteresParaBuscarEnSelectorConcepto}}P ~
;}}~ 
ViewBag~~ 
.~~ 
idRolCliente~~  
=~~! "
ActorSettings~~# 0
.~~0 1
Default~~1 8
.~~8 9
IdRolCliente~~9 E
;~~E F
ViewBag 
. (
tiempoEsperaBusquedaSelector 0
=1 2
AplicacionSettings3 E
.E F
DefaultF M
.M N<
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidadN ~
;~ 
ViewBag
ÄÄ 
.
ÄÄ 2
$minimoCaracteresBuscarActorComercial
ÄÄ 8
=
ÄÄ9 :
ActorSettings
ÄÄ; H
.
ÄÄH I
Default
ÄÄI P
.
ÄÄP QC
4MinimoDeCaracteresParaBuscarEnSelectorActorComercialÄÄQ Ö
;ÄÄÖ Ü
ViewBag
ÅÅ 
.
ÅÅ =
/mascaraDeVisualizacionValidacionRegistroCliente
ÅÅ C
=
ÅÅD E
ActorSettings
ÅÅF S
.
ÅÅS T
Default
ÅÅT [
.
ÅÅ[ \>
/MascaraDeVisualizacionValidacionRegistroClienteÅÅ\ ã
;ÅÅã å
ViewBag
ÇÇ 
.
ÇÇ )
informacionSelectorConcepto
ÇÇ /
=
ÇÇ0 1 
CotizacionSettings
ÇÇ2 D
.
ÇÇD E
Default
ÇÇE L
.
ÇÇL M5
'InformacionSelectorConceptoEnCotizacion
ÇÇM t
;
ÇÇt u
ViewBag
ÉÉ 
.
ÉÉ -
permitirSeleccionarGrupoCliente
ÉÉ 3
=
ÉÉ4 5
Diccionario
ÉÉ6 A
.
ÉÉA B4
&MapeoOperacionesGruposVsPermitirGrupos
ÉÉB h
.
ÉÉh i
Single
ÉÉi o
(
ÉÉo p
m
ÉÉp q
=>
ÉÉr t
m
ÉÉu v
.
ÉÉv w
Key
ÉÉw z
==
ÉÉ{ }
(
ÉÉ~ 
intÉÉ Ç
)ÉÉÇ É3
#OperacionesGruposActoresComercialesÉÉÉ ¶
.ÉÉ¶ ß

CotizacionÉÉß ±
)ÉÉ± ≤
.ÉÉ≤ ≥
ValueÉÉ≥ ∏
;ÉÉ∏ π
ViewBag
ÑÑ 
.
ÑÑ /
!permitirConvertirCotizacionAVenta
ÑÑ 5
=
ÑÑ6 7 
CotizacionSettings
ÑÑ8 J
.
ÑÑJ K
Default
ÑÑK R
.
ÑÑR SA
2MascaraParaPermitirConvertirCotizacionAVentaPedidoÑÑS Ö
[ÑÑÖ Ü
$numÑÑÜ á
]ÑÑá à
==ÑÑâ ã
$charÑÑå è
;ÑÑè ê
ViewBag
ÖÖ 
.
ÖÖ 0
"permitirConvertirCotizacionAPedido
ÖÖ 6
=
ÖÖ7 8 
CotizacionSettings
ÖÖ9 K
.
ÖÖK L
Default
ÖÖL S
.
ÖÖS TA
2MascaraParaPermitirConvertirCotizacionAVentaPedidoÖÖT Ü
[ÖÖÜ á
$numÖÖá à
]ÖÖà â
==ÖÖä å
$charÖÖç ê
;ÖÖê ë
ViewBag
áá 
.
áá 
	WCPScript
áá 
=
áá 
WebClientPrint
áá  .
.
áá. /
CreateScript
áá/ ;
(
áá; <
Url
àà 
.
àà 
Action
àà 
(
àà 
$str
àà +
,
àà+ ,
$str
àà- @
,
àà@ A
null
ààB F
,
ààF G
HttpContext
ààH S
.
ààS T
Request
ààT [
.
àà[ \
Url
àà\ _
.
àà_ `
Scheme
àà` f
)
ààf g
,
ààg h
Url
ââ 
.
ââ 
Action
ââ 
(
ââ 
$str
ââ /
,
ââ/ 0
$str
ââ1 =
,
ââ= >
null
ââ? C
,
ââC D
HttpContext
ââE P
.
ââP Q
Request
ââQ X
.
ââX Y
Url
ââY \
.
ââ\ ]
Scheme
ââ] c
)
ââc d
,
ââd e
HttpContext
ââf q
.
ââq r
Session
ââr y
.
âây z
	SessionIDââz É
)ââÉ Ñ
;ââÑ Ö
return
ää 
View
ää 
(
ää 
)
ää 
;
ää 
}
ãã 	
public
èè 

JsonResult
èè !
ObtenerCotizaciones
èè -
(
èè- .
string
èè. 4
desde
èè5 :
,
èè: ;
string
èè< B
hasta
èèC H
)
èèH I
{
êê 	
DateTime
ëë 

fechaDesde
ëë 
=
ëë  !
DateTime
ëë" *
.
ëë* +
Parse
ëë+ 0
(
ëë0 1
desde
ëë1 6
)
ëë6 7
;
ëë7 8
DateTime
íí 

fechaHasta
íí 
=
íí  !
DateTime
íí" *
.
íí* +
Parse
íí+ 0
(
íí0 1
hasta
íí1 6
+
íí7 8
$str
íí9 D
)
ííD E
;
ííE F
try
ìì 
{
îî 
List
ïï 
<
ïï 
OrdenDeCotizacion
ïï &
>
ïï& '!
ordenesDeCotizacion
ïï( ;
=
ïï< =
cotizacionLogica
ïï> N
.
ïïN O(
ObtenerOrdenesDeCotizacion
ïïO i
(
ïïi j
ProfileData
ïïj u
(
ïïu v
)
ïïv w
.
ïïw x
Empleadoïïx Ä
.ïïÄ Å
IdïïÅ É
,ïïÉ Ñ
ProfileDataïïÖ ê
(ïïê ë
)ïïë í
.ïïí ì.
IdCentroDeAtencionSeleccionadoïïì ±
,ïï± ≤

fechaDesdeïï≥ Ω
,ïïΩ æ

fechaHastaïïø …
)ïï…  
;ïï  À
List
ññ 
<
ññ (
BandejaCotizacionViewModel
ññ /
>
ññ/ 0
	respuesta
ññ1 :
=
ññ; <(
BandejaCotizacionViewModel
ññ= W
.
ññW X
Convert
ññX _
(
ññ_ `!
ordenesDeCotizacion
ññ` s
)
ññs t
;
ññt u
return
óó 
Json
óó 
(
óó 
	respuesta
óó %
)
óó% &
;
óó& '
}
òò 
catch
ôô 
(
ôô 
	Exception
ôô 
e
ôô 
)
ôô 
{
öö 
return
õõ 
new
õõ "
JsonHttpStatusResult
õõ /
(
õõ/ 0
Util
õõ0 4
.
õõ4 5
	ErrorJson
õõ5 >
(
õõ> ?
e
õõ? @
)
õõ@ A
,
õõA B
HttpStatusCode
õõC Q
.
õõQ R!
InternalServerError
õõR e
)
õõe f
;
õõf g
}
úú 
}
ùù 	
public
üü 

JsonResult
üü &
ObtenerOrdenDeCotizacion
üü 2
(
üü2 3
long
üü3 7
idOrdenVenta
üü8 D
)
üüD E
{
†† 	
try
°° 
{
¢¢ 
OrdenDeCotizacion
££ !
ordenDeCotizacion
££" 3
=
££4 5
cotizacionLogica
££6 F
.
££F G&
ObtenerOrdenDeCotizacion
££G _
(
££_ `
idOrdenVenta
££` l
)
££l m
;
££m n
var
§§ 
	respuesta
§§ 
=
§§ 
new
§§  #!
CotizacionViewModel
§§$ 7
(
§§7 8
ordenDeCotizacion
§§8 I
)
§§I J
;
§§J K
return
•• 
Json
•• 
(
•• 
	respuesta
•• %
)
••% &
;
••& '
}
¶¶ 
catch
ßß 
(
ßß 
	Exception
ßß 
e
ßß 
)
ßß 
{
®® 
HttpContext
©© 
.
©© 
Response
©© $
.
©©$ %

StatusCode
©©% /
=
©©0 1
$num
©©2 5
;
©©5 6
return
™™ 
Json
™™ 
(
™™ 
Util
™™  
.
™™  !
	ErrorJson
™™! *
(
™™* +
e
™™+ ,
)
™™, -
)
™™- .
;
™™. /
}
´´ 
}
¨¨ 	
public
ÆÆ 
async
ÆÆ 
Task
ÆÆ 
<
ÆÆ 

JsonResult
ÆÆ $
>
ÆÆ$ %)
ObtenerCotizacionParaEditar
ÆÆ& A
(
ÆÆA B
long
ÆÆB F
idOrden
ÆÆG N
)
ÆÆN O
{
ØØ 	
try
∞∞ 
{
±± 
int
≤≤ 0
"idCentroAtencionQueTieneLosPrecios
≤≤ 6
=
≤≤7 8
ProfileData
≤≤9 D
(
≤≤D E
)
≤≤E F
.
≤≤F G0
"IdCentroAtencionQueTieneLosPrecios
≤≤G i
;
≤≤i j
int
≥≥ 4
&idCentroAtencionQueTieneStockIntegrado
≥≥ :
=
≥≥; <
ProfileData
≥≥= H
(
≥≥H I
)
≥≥I J
.
≥≥J K6
(IdCentroAtencionQueTieneElStockIntegrada
≥≥K s
;
≥≥s t
long
¥¥ +
idTransaccionInventarioFisico
¥¥ 2
=
¥¥3 4
ProfileData
¥¥5 @
(
¥¥@ A
)
¥¥A B
.
¥¥B C'
ObtenerIdInventarioActual
¥¥C \
(
¥¥\ ]5
&idCentroAtencionQueTieneStockIntegrado¥¥] É
)¥¥É Ñ
;¥¥Ñ Ö
OrdenDeCotizacion
∂∂ !
ordenDeCotizacion
∂∂" 3
=
∂∂4 5
cotizacionLogica
∂∂6 F
.
∂∂F G&
ObtenerOrdenDeCotizacion
∂∂G _
(
∂∂_ `
idOrden
∂∂` g
)
∂∂g h
;
∂∂h i
var
∑∑ 
registro
∑∑ 
=
∑∑ 
new
∑∑ ")
RegistroCotizacionViewModel
∑∑# >
(
∑∑> ?
ordenDeCotizacion
∑∑? P
,
∑∑P Q'
SelectorTipoDeComprobante
∑∑R k
.
∑∑k l
Convert
∑∑l s
(
∑∑s t
await
∑∑t y
cotizacionLogica∑∑z ä
.∑∑ä ã7
'ObtenerTiposDeComprobanteParaCotizacion∑∑ã ≤
(∑∑≤ ≥
ProfileData∑∑≥ æ
(∑∑æ ø
)∑∑ø ¿
.∑∑¿ ¡.
IdCentroDeAtencionSeleccionado∑∑¡ ﬂ
)∑∑ﬂ ‡
)∑∑‡ ·
)∑∑· ‚
;∑∑‚ „
foreach
∏∏ 
(
∏∏ 
var
∏∏ 
item
∏∏ !
in
∏∏" $
registro
∏∏% -
.
∏∏- .
Detalles
∏∏. 6
)
∏∏6 7
{
ππ 
item
∫∫ 
.
∫∫ 
ConceptoCompleto
∫∫ )
=
∫∫* +
conceptoLogica
∫∫, :
.
∫∫: ;<
.ObtenerConceptoDeNegocioComercialPorIdConcepto
∫∫; i
(
∫∫i j
ProfileData
∫∫j u
(
∫∫u v
)
∫∫v w
,
∫∫w x
item
∫∫y }
.
∫∫} ~
Producto∫∫~ Ü
.∫∫Ü á
Id∫∫á â
,∫∫â ä
true∫∫ã è
,∫∫è ê
true∫∫ë ï
)∫∫ï ñ
;∫∫ñ ó
}
ªª 
return
ºº 
Json
ºº 
(
ºº 
registro
ºº $
)
ºº$ %
;
ºº% &
}
ΩΩ 
catch
ææ 
(
ææ 
	Exception
ææ 
e
ææ 
)
ææ 
{
øø 
HttpContext
¿¿ 
.
¿¿ 
Response
¿¿ $
.
¿¿$ %

StatusCode
¿¿% /
=
¿¿0 1
$num
¿¿2 5
;
¿¿5 6
return
¡¡ 
Json
¡¡ 
(
¡¡ 
Util
¡¡  
.
¡¡  !
	ErrorJson
¡¡! *
(
¡¡* +
e
¡¡+ ,
)
¡¡, -
)
¡¡- .
;
¡¡. /
}
¬¬ 
}
√√ 	
public
≈≈ 

JsonResult
≈≈ 
GuardarCotizacion
≈≈ +
(
≈≈+ ,)
RegistroCotizacionViewModel
≈≈, G

cotizacion
≈≈H R
)
≈≈R S
{
∆∆ 	
try
«« 
{
»» 
OperationResult
…… 
result
……  &
;
……& '
List
   
<
    
DetalleDeOperacion
   '
>
  ' (
detalles
  ) 1
=
  2 3)
ConstruirDetalleTransaccion
  4 O
(
  O P

cotizacion
  P Z
.
  Z [
Detalles
  [ c
.
  c d
ToList
  d j
(
  j k
)
  k l
)
  l m
;
  m n
if
ÀÀ 
(
ÀÀ 

cotizacion
ÀÀ 
.
ÀÀ 
Id
ÀÀ !
>
ÀÀ" #
$num
ÀÀ$ %
)
ÀÀ% &
{
ÃÃ 
result
ÕÕ 
=
ÕÕ 
cotizacionLogica
ÕÕ -
.
ÕÕ- .
EditarCotizacion
ÕÕ. >
(
ÕÕ> ?

cotizacion
ÕÕ? I
.
ÕÕI J
Id
ÕÕJ L
,
ÕÕL M

cotizacion
ÕÕN X
.
ÕÕX Y
IdOrden
ÕÕY `
,
ÕÕ` a

cotizacion
ÕÕb l
.
ÕÕl m
IdComprobante
ÕÕm z
,
ÕÕz {

cotizacionÕÕ| Ü
.ÕÕÜ á
IdEstadoÕÕá è
,ÕÕè ê
ProfileDataÕÕë ú
(ÕÕú ù
)ÕÕù û
.ÕÕû ü
EmpleadoÕÕü ß
.ÕÕß ®
IdÕÕ® ™
,ÕÕ™ ´
ProfileDataÕÕ¨ ∑
(ÕÕ∑ ∏
)ÕÕ∏ π
.ÕÕπ ∫.
IdCentroDeAtencionSeleccionadoÕÕ∫ ÿ
,ÕÕÿ Ÿ

cotizacionÕÕ⁄ ‰
.ÕÕ‰ Â
ClienteÕÕÂ Ï
.ÕÕÏ Ì
IdÕÕÌ Ô
,ÕÕÔ 

cotizacionÕÕÒ ˚
.ÕÕ˚ ¸
AliasÕÕ¸ Å
,ÕÕÅ Ç

cotizacionÕÕÉ ç
.ÕÕç é!
TipoDeComprobanteÕÕé ü
.ÕÕü †
TipoComprobanteÕÕ† Ø
.ÕÕØ ∞
IdÕÕ∞ ≤
,ÕÕ≤ ≥

cotizacionÕÕ¥ æ
.ÕÕæ ø!
TipoDeComprobanteÕÕø –
.ÕÕ– —!
SerieSeleccionadaÕÕ— ‚
==ÕÕ„ Â
$numÕÕÊ Á
?ÕÕË È

cotizacionÕÕÍ Ù
.ÕÕÙ ı!
TipoDeComprobanteÕÕı Ü
.ÕÕÜ á
SeriesÕÕá ç
.ÕÕç é
FirstÕÕé ì
(ÕÕì î
)ÕÕî ï
.ÕÕï ñ
IdÕÕñ ò
:ÕÕô ö

cotizacionÕÕõ •
.ÕÕ• ¶!
TipoDeComprobanteÕÕ¶ ∑
.ÕÕ∑ ∏!
SerieSeleccionadaÕÕ∏ …
,ÕÕ…  

cotizacion
ŒŒ 
.
ŒŒ 
GrabaIgv
ŒŒ '
,
ŒŒ' (

cotizacion
ŒŒ) 3
.
ŒŒ3 4
FechaVencimiento
ŒŒ4 D
,
ŒŒD E

cotizacion
ŒŒF P
.
ŒŒP Q
Observacion
ŒŒQ \
,
ŒŒ\ ]
detalles
ŒŒ^ f
,
ŒŒf g

cotizacion
ŒŒh r
.
ŒŒr s
Flete
ŒŒs x
)
ŒŒx y
;
ŒŒy z
}
œœ 
else
–– 
{
—— 
result
““ 
=
““ 
cotizacionLogica
““ -
.
““- .
AgregarCotizacion
““. ?
(
““? @
ProfileData
““@ K
(
““K L
)
““L M
.
““M N
Empleado
““N V
.
““V W
Id
““W Y
,
““Y Z
ProfileData
““[ f
(
““f g
)
““g h
.
““h i-
IdCentroDeAtencionSeleccionado““i á
,““á à

cotizacion““â ì
.““ì î
Cliente““î õ
.““õ ú
Id““ú û
,““û ü

cotizacion““† ™
.““™ ´
Alias““´ ∞
,““∞ ±

cotizacion““≤ º
.““º Ω!
TipoDeComprobante““Ω Œ
.““Œ œ
TipoComprobante““œ ﬁ
.““ﬁ ﬂ
Id““ﬂ ·
,““· ‚

cotizacion““„ Ì
.““Ì Ó!
TipoDeComprobante““Ó ˇ
.““ˇ Ä!
SerieSeleccionada““Ä ë
==““í î
$num““ï ñ
?““ó ò

cotizacion““ô £
.““£ §!
TipoDeComprobante““§ µ
.““µ ∂
Series““∂ º
.““º Ω
First““Ω ¬
(““¬ √
)““√ ƒ
.““ƒ ≈
Id““≈ «
:““» …

cotizacion““  ‘
.““‘ ’!
TipoDeComprobante““’ Ê
.““Ê Á!
SerieSeleccionada““Á ¯
,““¯ ˘

cotizacion““˙ Ñ
.““Ñ Ö
GrabaIgv““Ö ç
,““ç é

cotizacion““è ô
.““ô ö 
FechaVencimiento““ö ™
,““™ ´

cotizacion““¨ ∂
.““∂ ∑
Observacion““∑ ¬
,““¬ √
detalles““ƒ Ã
,““Ã Õ

cotizacion““Œ ÿ
.““ÿ Ÿ
Flete““Ÿ ﬁ
)““ﬁ ﬂ
;““ﬂ ‡
}
”” 
Util
÷÷ 
.
÷÷ (
ManageIfResultIsNotSuccess
÷÷ /
(
÷÷/ 0
result
÷÷0 6
,
÷÷6 7
$str
÷÷8 Z
)
÷÷Z [
;
÷÷[ \
return
ÿÿ 
Json
ÿÿ 
(
ÿÿ 
new
ÿÿ 
{
ÿÿ  !
result
ÿÿ" (
.
ÿÿ( )
code_result
ÿÿ) 4
,
ÿÿ4 5
data
ÿÿ6 :
=
ÿÿ; <
result
ÿÿ= C
.
ÿÿC D
data
ÿÿD H
,
ÿÿH I 
result_description
ÿÿJ \
=
ÿÿ] ^
result
ÿÿ_ e
.
ÿÿe f
title
ÿÿf k
,
ÿÿk l
IdOrden
ÿÿm t
=
ÿÿu v
result
ÿÿw }
.
ÿÿ} ~
informationÿÿ~ â
}ÿÿä ã
)ÿÿã å
;ÿÿå ç
}
ŸŸ 
catch
⁄⁄ 
(
⁄⁄ 
LogicaException
⁄⁄ "
oe
⁄⁄# %
)
⁄⁄% &
{
€€ 
return
‹‹ 
new
‹‹ "
JsonHttpStatusResult
‹‹ /
(
‹‹/ 0
Util
‹‹0 4
.
‹‹4 5
	ErrorJson
‹‹5 >
(
‹‹> ?
oe
‹‹? A
)
‹‹A B
,
‹‹B C
HttpStatusCode
‹‹D R
.
‹‹R S!
InternalServerError
‹‹S f
)
‹‹f g
;
‹‹g h
}
›› 
catch
ﬁﬁ 
(
ﬁﬁ 
	Exception
ﬁﬁ 
e
ﬁﬁ 
)
ﬁﬁ 
{
ﬂﬂ 
return
‡‡ 
new
‡‡ "
JsonHttpStatusResult
‡‡ /
(
‡‡/ 0
Util
‡‡0 4
.
‡‡4 5
	ErrorJson
‡‡5 >
(
‡‡> ?
new
‡‡? B
	Exception
‡‡C L
(
‡‡L M
$str
‡‡M v
,
‡‡v w
e
‡‡x y
)
‡‡y z
)
‡‡z {
,
‡‡{ |
HttpStatusCode‡‡} ã
.‡‡ã å#
InternalServerError‡‡å ü
)‡‡ü †
;‡‡† °
}
·· 
}
‚‚ 	
public
ÊÊ 
List
ÊÊ 
<
ÊÊ  
DetalleDeOperacion
ÊÊ &
>
ÊÊ& ')
ConstruirDetalleTransaccion
ÊÊ( C
(
ÊÊC D
List
ÊÊD H
<
ÊÊH I+
RegistroDetalleVentaViewModel
ÊÊI f
>
ÊÊf g
detalles
ÊÊh p
)
ÊÊp q
{
ÁÁ 	
List
ËË 
<
ËË  
DetalleDeOperacion
ËË #
>
ËË# $!
detallesConstruidos
ËË% 8
=
ËË9 :
new
ËË; >
List
ËË? C
<
ËËC D 
DetalleDeOperacion
ËËD V
>
ËËV W
(
ËËW X
)
ËËX Y
;
ËËY Z
foreach
ÈÈ 
(
ÈÈ 
var
ÈÈ 
item
ÈÈ 
in
ÈÈ  
detalles
ÈÈ! )
)
ÈÈ) *
{
ÍÍ !
detallesConstruidos
ÎÎ #
.
ÎÎ# $
Add
ÎÎ$ '
(
ÎÎ' (
new
ÎÎ( + 
DetalleDeOperacion
ÎÎ, >
(
ÎÎ> ?
item
ÎÎ? C
.
ÎÎC D
	IdDetalle
ÎÎD M
,
ÎÎM N
item
ÏÏ 
.
ÏÏ 
Producto
ÏÏ !
.
ÏÏ! "
Id
ÏÏ" $
,
ÏÏ$ %
item
ÌÌ 
.
ÌÌ 
Cantidad
ÌÌ !
,
ÌÌ! "
item
ÓÓ 
.
ÓÓ 
PrecioUnitario
ÓÓ '
,
ÓÓ' (
item
ÔÔ 
.
ÔÔ 
Importe
ÔÔ  
,
ÔÔ  !
$num
 
,
 
$num
 
,
 
item
ÒÒ 
.
ÒÒ 
	Descuento
ÒÒ "
,
ÒÒ" #
null
ÚÚ 
,
ÚÚ 
null
ÚÚ 
,
ÚÚ 
null
ÚÚ  $
,
ÚÚ$ %
null
ÚÚ& *
,
ÚÚ* +
true
ÚÚ, 0
,
ÚÚ0 1
item
ÚÚ2 6
.
ÚÚ6 7
MascaraDeCalculo
ÚÚ7 G
,
ÚÚG H
null
ÚÚI M
)
ÚÚM N
)
ÚÚN O
;
ÚÚO P
}
ÛÛ 
return
ÙÙ !
detallesConstruidos
ÙÙ &
;
ÙÙ& '
}
ıı 	
public
˜˜ 
async
˜˜ 
Task
˜˜ 
<
˜˜ 

JsonResult
˜˜ $
>
˜˜$ %K
=ObtenerTiposDeComprobanteConSeriesAutonumericasParaCotizacion
˜˜& c
(
˜˜c d
)
˜˜d e
{
¯¯ 	
try
˘˘ 
{
˙˙ 
var
˚˚ 

resultados
˚˚ 
=
˚˚  
await
˚˚! &
cotizacionLogica
˚˚' 7
.
˚˚7 85
'ObtenerTiposDeComprobanteParaCotizacion
˚˚8 _
(
˚˚_ `
ProfileData
˚˚` k
(
˚˚k l
)
˚˚l m
.
˚˚m n-
IdCentroDeAtencionSeleccionado˚˚n å
)˚˚å ç
;˚˚ç é
List
¸¸ 
<
¸¸ '
SelectorTipoDeComprobante
¸¸ .
>
¸¸. /
comprobantes
¸¸0 <
=
¸¸= >'
SelectorTipoDeComprobante
¸¸? X
.
¸¸X Y
Convert
¸¸Y `
(
¸¸` a

resultados
¸¸a k
,
¸¸k l
ProfileData
¸¸m x
(
¸¸x y
)
¸¸y z
.
¸¸z {-
IdCentroDeAtencionSeleccionado¸¸{ ô
,¸¸ô ö
true¸¸õ ü
)¸¸ü †
;¸¸† °
return
˝˝ 
Json
˝˝ 
(
˝˝ 
comprobantes
˝˝ (
)
˝˝( )
;
˝˝) *
}
˛˛ 
catch
ˇˇ 
(
ˇˇ 
	Exception
ˇˇ 
e
ˇˇ 
)
ˇˇ 
{
ÄÄ 
return
ÅÅ 
Json
ÅÅ 
(
ÅÅ 
Util
ÅÅ  
.
ÅÅ  !
	ErrorJson
ÅÅ! *
(
ÅÅ* +
e
ÅÅ+ ,
)
ÅÅ, -
)
ÅÅ- .
;
ÅÅ. /
}
ÇÇ 
}
ÉÉ 	
public
àà 

JsonResult
àà *
ObtenerDocumentoDeCotizacion
àà 6
(
àà6 7
long
àà7 ;!
idOrdenDeCotizacion
àà< O
)
ààO P
{
ââ 	
try
ää 
{
ãã 
OrdenDeCotizacion
åå !
ordenDeCotizacion
åå" 3
=
åå4 5
cotizacionLogica
åå6 F
.
ååF G&
ObtenerOrdenDeCotizacion
ååG _
(
åå_ `!
idOrdenDeCotizacion
åå` s
)
åås t
;
ååt u
var
çç 
sede
çç 
=
çç 
ObtenerSede
çç &
(
çç& '
)
çç' (
;
çç( )
var
éé 

htmlString
éé 
=
éé  +
ObtenerCadenaHtmlDeCotizacion
éé! >
(
éé> ?
ordenDeCotizacion
éé? P
,
ééP Q
(
ééR S
FormatoImpresion
ééS c
)
ééc d
$num
ééd e
,
éée f
null
éég k
,
éék l
sede
éém q
)
ééq r
;
éér s
var
èè 
	respuesta
èè 
=
èè 
new
èè  #!
CotizacionViewModel
èè$ 7
(
èè7 8
ordenDeCotizacion
èè8 I
,
èèI J

htmlString
èèK U
)
èèU V
;
èèV W
return
êê 
Json
êê 
(
êê 
	respuesta
êê %
)
êê% &
;
êê& '
}
ëë 
catch
íí 
(
íí 
	Exception
íí 
e
íí 
)
íí 
{
ìì 
HttpContext
îî 
.
îî 
Response
îî $
.
îî$ %

StatusCode
îî% /
=
îî0 1
$num
îî2 5
;
îî5 6
return
ïï 
Json
ïï 
(
ïï 
Util
ïï  
.
ïï  !
	ErrorJson
ïï! *
(
ïï* +
e
ïï+ ,
)
ïï, -
)
ïï- .
;
ïï. /
}
ññ 
}
óó 	
string
ôô +
ObtenerCadenaHtmlDeCotizacion
ôô ,
(
ôô, -
OrdenDeCotizacion
ôô- >
ordenDeCotizacion
ôô? P
,
ôôP Q
FormatoImpresion
ôôR b
formato
ôôc j
,
ôôj k
byte
ôôl p
[
ôôp q
]
ôôq r
qrBytes
ôôs z
,
ôôz {7
(EstablecimientoComercialExtendidoConLogoôô| §
sedeôô• ©
)ôô© ™
{
öö 	
StringBuilder
õõ 
sbControlHtml
õõ '
=
õõ( )
new
õõ* -
StringBuilder
õõ. ;
(
õõ; <
)
õõ< =
;
õõ= >
string
úú 
result
úú 
=
úú 
$str
úú 
;
úú 
string
ùù 
nombreVista
ùù 
=
ùù  
$str
ùù! #
;
ùù# $
nombreVista
üü 
=
üü 
formato
üü !
==
üü" $
FormatoImpresion
üü% 5
.
üü5 6
_80mm
üü6 ;
?
üü< =
$str
üü> W
:
üüX Y
$str
üüZ s
;
üüs t
result
†† 
=
†† 
HtmlStringBuilder
†† &
.
††& '%
RenderRazorViewToString
††' >
(
††> ?
nombreVista
††? J
,
††J K
new
††L O#
DocumentoDeCotizacion
††P e
(
††e f
ordenDeCotizacion
††f w
,
††w x
sede
††y }
,
††} ~
new††Ä É1
!EstablecimientoComercialExtendido††Ñ •
(††• ¶!
ordenDeCotizacion††ß ∏
.††∏ π
Transaccion††π ƒ
(††ƒ ≈
)††≈ ∆
.††∆ «
Actor_negocio2††« ’
.††’ ÷
Actor_negocio2††÷ ‰
)††‰ Â
,††Â Ê
qrBytes††Á Ó
,††Ó Ô"
AplicacionSettings†† Ç
.††Ç É
Default††É ä
.††ä ã&
MostrarCabeceraVoucher††ã °
,††° ¢
(††£ §0
 ModoImpresionCaracteristicasEnum††§ ƒ
)††ƒ ≈
VentasSettings††≈ ”
.††” ‘
Default††‘ €
.††€ ‹,
modoImpresionCaracteristicas††‹ ¯
)††¯ ˘
,††˘ ˙
this††˚ ˇ
)††ˇ Ä
;††Ä Å
return
¢¢ 
result
¢¢ 
;
¢¢ 
}
££ 	
public
•• 

JsonResult
•• .
 ObtenerHtmlDocumentoDeCotizacion
•• :
(
••: ;
long
••; ?
idOrden
••@ G
,
••G H
int
••I L
formato
••M T
)
••T U
{
¶¶ 	
OrdenDeCotizacion
ßß 
ordenDeCotizacion
ßß /
=
ßß0 1
cotizacionLogica
ßß2 B
.
ßßB C&
ObtenerOrdenDeCotizacion
ßßC [
(
ßß[ \
idOrden
ßß\ c
)
ßßc d
;
ßßd e
var
®® 
sede
®® 
=
®® 
ObtenerSede
®® "
(
®®" #
)
®®# $
;
®®$ %
var
©© 

htmlString
©© 
=
©© +
ObtenerCadenaHtmlDeCotizacion
©© :
(
©©: ;
ordenDeCotizacion
©©; L
,
©©L M
(
©©N O
FormatoImpresion
©©O _
)
©©_ `
formato
©©` g
,
©©g h
null
©©i m
,
©©m n
sede
©©o s
)
©©s t
;
©©t u
return
™™ 
Json
™™ 
(
™™ 

htmlString
™™ "
)
™™" #
;
™™# $
}
´´ 	
public
≠≠ 

JsonResult
≠≠ =
/EnviarCorreoElectronicoConDocumentoDeCotizacion
≠≠ I
(
≠≠I J
long
≠≠J N
idOrden
≠≠O V
,
≠≠V W
int
≠≠X [
formato
≠≠\ c
,
≠≠c d
List
≠≠e i
<
≠≠i j
string
≠≠j p
>
≠≠p q"
correosElectronicos≠≠r Ö
)≠≠Ö Ü
{
ÆÆ 	
try
ØØ 
{
∞∞ 
OrdenDeCotizacion
±± !
ordenDeCotizacion
±±" 3
=
±±4 5
cotizacionLogica
±±6 F
.
±±F G&
ObtenerOrdenDeCotizacion
±±G _
(
±±_ `
idOrden
±±` g
)
±±g h
;
±±h i
var
≤≤ 
sede
≤≤ 
=
≤≤ 
ObtenerSede
≤≤ &
(
≤≤& '
)
≤≤' (
;
≤≤( )
PdfDocument
≥≥ 
pdfVenta
≥≥ $
=
≥≥% &"
ObtenerPdfCotizacion
≥≥' ;
(
≥≥; <
ordenDeCotizacion
≥≥< M
,
≥≥M N
sede
≥≥O S
,
≥≥S T
null
≥≥U Y
,
≥≥Y Z
(
≥≥[ \
FormatoImpresion
≥≥\ l
)
≥≥l m
formato
≥≥m t
)
≥≥t u
;
≥≥u v
string
¥¥ 
asunto
¥¥ 
=
¥¥ 
cotizacionLogica
¥¥  0
.
¥¥0 1.
 ObtenerAsuntoDeCorreoElectronico
¥¥1 Q
(
¥¥Q R
sede
¥¥R V
,
¥¥V W
ordenDeCotizacion
¥¥X i
)
¥¥i j
;
¥¥j k
string
µµ 
cuerpo
µµ 
=
µµ 
cotizacionLogica
µµ  0
.
µµ0 1.
 ObtenerCuerpoDeCorreoElectronico
µµ1 Q
(
µµQ R
sede
µµR V
,
µµV W
ordenDeCotizacion
µµX i
)
µµi j
;
µµj k
OperationResult
∂∂ 
result
∂∂  &
=
∂∂' (
mailer
∂∂) /
.
∂∂/ 0
Send
∂∂0 4
(
∂∂4 5
asunto
∂∂5 ;
,
∂∂; <
cuerpo
∂∂= C
,
∂∂C D!
correosElectronicos
∂∂E X
,
∂∂X Y 
AplicacionSettings
∂∂Z l
.
∂∂l m
Default
∂∂m t
.
∂∂t u
ToMailDefault∂∂u Ç
,∂∂Ç É
new∂∂Ñ á
List∂∂à å
<∂∂å ç

Attachment∂∂ç ó
>∂∂ó ò
(∂∂ò ô
)∂∂ô ö
{∂∂õ ú
new∂∂ù †

Attachment∂∂° ´
(∂∂´ ¨
new∂∂¨ Ø
MemoryStream∂∂∞ º
(∂∂º Ω
pdfVenta∂∂Ω ≈
.∂∂≈ ∆
Save∂∂∆  
(∂∂  À
)∂∂À Ã
)∂∂Ã Õ
,∂∂Õ Œ!
ordenDeCotizacion∂∂œ ‡
.∂∂‡ ·
Comprobante∂∂· Ï
(∂∂Ï Ì
)∂∂Ì Ó
.∂∂Ó Ô
NumeroDeSerie∂∂Ô ¸
+∂∂˝ ˛
$str∂∂ˇ Ñ
+∂∂Ö Ü!
ordenDeCotizacion∂∂á ò
.∂∂ò ô
Comprobante∂∂ô §
(∂∂§ •
)∂∂• ¶
.∂∂¶ ß#
NumeroDeComprobante∂∂ß ∫
+∂∂ª º
$str∂∂Ω ¬
+∂∂√ ƒ!
ordenDeCotizacion∂∂≈ ÷
.∂∂÷ ◊
Cliente∂∂◊ ﬁ
(∂∂ﬁ ﬂ
)∂∂ﬂ ‡
.∂∂‡ ·
RazonSocial∂∂· Ï
+∂∂Ì Ó
$str∂∂Ô ı
,∂∂ı ˆ
$str∂∂˜ à
)∂∂à â
}∂∂ä ã
)∂∂ã å
;∂∂å ç
return
∑∑ 
Json
∑∑ 
(
∑∑ 
new
∑∑ 
{
∑∑  !
result
∑∑" (
.
∑∑( )
code_result
∑∑) 4
,
∑∑4 5
data
∑∑6 :
=
∑∑; <
result
∑∑= C
.
∑∑C D
information
∑∑D O
,
∑∑O P 
result_description
∑∑Q c
=
∑∑d e
result
∑∑f l
.
∑∑l m
title
∑∑m r
}
∑∑s t
)
∑∑t u
;
∑∑u v
}
∏∏ 
catch
ππ 
(
ππ 
	Exception
ππ 
e
ππ 
)
ππ 
{
∫∫ 
return
ªª 
new
ªª "
JsonHttpStatusResult
ªª /
(
ªª/ 0
Util
ªª0 4
.
ªª4 5
	ErrorJson
ªª5 >
(
ªª> ?
e
ªª? @
)
ªª@ A
,
ªªA B
HttpStatusCode
ªªC Q
.
ªªQ R!
InternalServerError
ªªR e
)
ªªe f
;
ªªf g
}
ºº 
}
ææ 	
public
¿¿ 
ActionResult
¿¿ ,
DescargarDocumentoDeCotizacion
¿¿ :
(
¿¿: ;
long
¿¿; ?
idOrden
¿¿@ G
,
¿¿G H
int
¿¿I L
formato
¿¿M T
)
¿¿T U
{
¡¡ 	
try
¬¬ 
{
√√ 
OrdenDeCotizacion
ƒƒ !
ordenDeCotizacion
ƒƒ" 3
=
ƒƒ4 5
cotizacionLogica
ƒƒ6 F
.
ƒƒF G&
ObtenerOrdenDeCotizacion
ƒƒG _
(
ƒƒ_ `
idOrden
ƒƒ` g
)
ƒƒg h
;
ƒƒh i
var
≈≈ 
sede
≈≈ 
=
≈≈ 
ObtenerSede
≈≈ &
(
≈≈& '
)
≈≈' (
;
≈≈( )
PdfDocument
∆∆ 
pdfVenta
∆∆ $
=
∆∆% &"
ObtenerPdfCotizacion
∆∆' ;
(
∆∆; <
ordenDeCotizacion
∆∆< M
,
∆∆M N
sede
∆∆O S
,
∆∆S T
null
∆∆U Y
,
∆∆Y Z
(
∆∆[ \
FormatoImpresion
∆∆\ l
)
∆∆l m
formato
∆∆m t
)
∆∆t u
;
∆∆u v
byte
«« 
[
«« 
]
«« 
	fileBytes
««  
=
««! "
pdfVenta
««# +
.
««+ ,
Save
««, 0
(
««0 1
)
««1 2
;
««2 3
string
»» 
fileName
»» 
=
»»  !
ordenDeCotizacion
»»" 3
.
»»3 4
Comprobante
»»4 ?
(
»»? @
)
»»@ A
.
»»A B
NumeroDeSerie
»»B O
+
»»P Q
$str
»»R W
+
»»X Y
ordenDeCotizacion
»»Z k
.
»»k l
Comprobante
»»l w
(
»»w x
)
»»x y
.
»»y z"
NumeroDeComprobante»»z ç
+»»é è
$str»»ê ï
+»»ñ ó!
ordenDeCotizacion»»ò ©
.»»© ™
Cliente»»™ ±
(»»± ≤
)»»≤ ≥
.»»≥ ¥
RazonSocial»»¥ ø
+»»¿ ¡
$str»»¬ »
;»»» …
return
…… 
File
…… 
(
…… 
	fileBytes
…… %
,
……% &
$str
……' 8
,
……8 9
fileName
……: B
)
……B C
;
……C D
}
   
catch
ÀÀ 
(
ÀÀ 
LogicaException
ÀÀ "
oe
ÀÀ# %
)
ÀÀ% &
{
ÃÃ 
return
ÕÕ 
new
ÕÕ "
JsonHttpStatusResult
ÕÕ /
(
ÕÕ/ 0
Util
ÕÕ0 4
.
ÕÕ4 5
	ErrorJson
ÕÕ5 >
(
ÕÕ> ?
oe
ÕÕ? A
)
ÕÕA B
,
ÕÕB C
HttpStatusCode
ÕÕD R
.
ÕÕR S!
InternalServerError
ÕÕS f
)
ÕÕf g
;
ÕÕg h
}
ŒŒ 
catch
œœ 
(
œœ 
	Exception
œœ 
e
œœ 
)
œœ 
{
–– 
return
—— 
new
—— "
JsonHttpStatusResult
—— /
(
——/ 0
Util
——0 4
.
——4 5
	ErrorJson
——5 >
(
——> ?
new
——? B
	Exception
——C L
(
——L M
$str
——M w
,
——w x
e
——y z
)
——z {
)
——{ |
,
——| }
HttpStatusCode——~ å
.——å ç#
InternalServerError——ç †
)——† °
;——° ¢
}
““ 
}
”” 	
public
’’ 
PdfDocument
’’ "
ObtenerPdfCotizacion
’’ /
(
’’/ 0
OrdenDeCotizacion
’’0 A
ordenDeCotizacion
’’B S
,
’’S T6
(EstablecimientoComercialExtendidoConLogo
’’U }
sede’’~ Ç
,’’Ç É
byte’’Ñ à
[’’à â
]’’â ä
qrBytes’’ã í
,’’í ì 
FormatoImpresion’’î §
formato’’• ¨
)’’¨ ≠
{
÷÷ 	
string
◊◊ 

htmlString
◊◊ 
=
◊◊ +
ObtenerCadenaHtmlDeCotizacion
◊◊  =
(
◊◊= >
ordenDeCotizacion
◊◊> O
,
◊◊O P
formato
◊◊Q X
,
◊◊X Y
qrBytes
◊◊Z a
,
◊◊a b
sede
◊◊c g
)
◊◊g h
;
◊◊h i
return
ÿÿ 
pdfUtil
ÿÿ 
.
ÿÿ !
ObtenerPdfDocumento
ÿÿ .
(
ÿÿ. /

htmlString
ÿÿ/ 9
,
ÿÿ9 :
formato
ÿÿ; B
)
ÿÿB C
;
ÿÿC D
}
ŸŸ 	
public
€€ 
void
€€  
ImprimirCotizacion
€€ &
(
€€& '
long
€€' +
idOrdenCotizacion
€€, =
)
€€= >
{
‹‹ 	
OrdenDeCotizacion
›› 
ordenDeCotizacion
›› /
=
››0 1
cotizacionLogica
››2 B
.
››B C&
ObtenerOrdenDeCotizacion
››C [
(
››[ \
idOrdenCotizacion
››\ m
)
››m n
;
››n o
var
ﬁﬁ 
sede
ﬁﬁ 
=
ﬁﬁ 
ObtenerSede
ﬁﬁ "
(
ﬁﬁ" #
)
ﬁﬁ# $
;
ﬁﬁ$ %
var
ﬂﬂ 

imageVenta
ﬂﬂ 
=
ﬂﬂ $
ObtenerImageCotizacion
ﬂﬂ 3
(
ﬂﬂ3 4
ordenDeCotizacion
ﬂﬂ4 E
,
ﬂﬂE F
sede
ﬂﬂG K
,
ﬂﬂK L
null
ﬂﬂM Q
,
ﬂﬂQ R
(
ﬂﬂS T
FormatoImpresion
ﬂﬂT d
)
ﬂﬂd e
VentasSettings
ﬂﬂe s
.
ﬂﬂs t
Default
ﬂﬂt {
.
ﬂﬂ{ |)
formatoImpresionPorDefectoﬂﬂ| ñ
)ﬂﬂñ ó
;ﬂﬂó ò
MemoryStream
‡‡ 
ms
‡‡ 
=
‡‡ 
new
‡‡ !
MemoryStream
‡‡" .
(
‡‡. /
)
‡‡/ 0
;
‡‡0 1

imageVenta
‚‚ 
.
‚‚ 
Save
‚‚ 
(
‚‚ 
ms
‚‚ 
,
‚‚ 
ImageFormat
‚‚  +
.
‚‚+ ,
Jpeg
‚‚, 0
)
‚‚0 1
;
‚‚1 2
var
‰‰ 

imageBytes
‰‰ 
=
‰‰ 
ms
‰‰ 
.
‰‰  
ToArray
‰‰  '
(
‰‰' (
)
‰‰( )
;
‰‰) *
	PrintFile
ÊÊ 
file
ÊÊ 
=
ÊÊ 
null
ÊÊ !
;
ÊÊ! "
file
ÁÁ 
=
ÁÁ 
new
ÁÁ 
	PrintFile
ÁÁ  
(
ÁÁ  !

imageBytes
ÁÁ! +
,
ÁÁ+ ,
idOrdenCotizacion
ÁÁ- >
+
ÁÁ? @
$str
ÁÁA G
)
ÁÁG H
;
ÁÁH I
ClientPrintJob
ÈÈ 
cpj
ÈÈ 
=
ÈÈ  
new
ÈÈ! $
ClientPrintJob
ÈÈ% 3
(
ÈÈ3 4
)
ÈÈ4 5
;
ÈÈ5 6
cpj
ÍÍ 
.
ÍÍ 
	PrintFile
ÍÍ 
=
ÍÍ 
file
ÍÍ  
;
ÍÍ  !
cpj
ÎÎ 
.
ÎÎ 
	PrintFile
ÎÎ 
.
ÎÎ 
Copies
ÎÎ  
=
ÎÎ! " 
AplicacionSettings
ÎÎ# 5
.
ÎÎ5 6
Default
ÎÎ6 =
.
ÎÎ= >3
%NumeroCopiasAImprimirComprobanteVenta
ÎÎ> c
;
ÎÎc d
cpj
ÏÏ 
.
ÏÏ 
ClientPrinter
ÏÏ 
=
ÏÏ 
new
ÏÏ  #
DefaultPrinter
ÏÏ$ 2
(
ÏÏ2 3
)
ÏÏ3 4
;
ÏÏ4 5
System
ÌÌ 
.
ÌÌ 
Web
ÌÌ 
.
ÌÌ 
HttpContext
ÌÌ "
.
ÌÌ" #
Current
ÌÌ# *
.
ÌÌ* +
Response
ÌÌ+ 3
.
ÌÌ3 4
ContentType
ÌÌ4 ?
=
ÌÌ@ A
$str
ÌÌB \
;
ÌÌ\ ]
System
ÓÓ 
.
ÓÓ 
Web
ÓÓ 
.
ÓÓ 
HttpContext
ÓÓ "
.
ÓÓ" #
Current
ÓÓ# *
.
ÓÓ* +
Response
ÓÓ+ 3
.
ÓÓ3 4
BinaryWrite
ÓÓ4 ?
(
ÓÓ? @
cpj
ÓÓ@ C
.
ÓÓC D

GetContent
ÓÓD N
(
ÓÓN O
)
ÓÓO P
)
ÓÓP Q
;
ÓÓQ R
System
ÔÔ 
.
ÔÔ 
Web
ÔÔ 
.
ÔÔ 
HttpContext
ÔÔ "
.
ÔÔ" #
Current
ÔÔ# *
.
ÔÔ* +
Response
ÔÔ+ 3
.
ÔÔ3 4
End
ÔÔ4 7
(
ÔÔ7 8
)
ÔÔ8 9
;
ÔÔ9 :
}
 	
public
ÚÚ 
System
ÚÚ 
.
ÚÚ 
Drawing
ÚÚ 
.
ÚÚ 
Image
ÚÚ #$
ObtenerImageCotizacion
ÚÚ$ :
(
ÚÚ: ;
OrdenDeCotizacion
ÚÚ; L
ordenDeCotizacion
ÚÚM ^
,
ÚÚ^ _7
(EstablecimientoComercialExtendidoConLogoÚÚ` à
sedeÚÚâ ç
,ÚÚç é
byteÚÚè ì
[ÚÚì î
]ÚÚî ï
qrBytesÚÚñ ù
,ÚÚù û 
FormatoImpresionÚÚü Ø
formatoÚÚ∞ ∑
)ÚÚ∑ ∏
{
ÛÛ 	
string
ÙÙ 
result
ÙÙ 
=
ÙÙ +
ObtenerCadenaHtmlDeCotizacion
ÙÙ 9
(
ÙÙ9 :
ordenDeCotizacion
ÙÙ: K
,
ÙÙK L
formato
ÙÙM T
,
ÙÙT U
qrBytes
ÙÙV ]
,
ÙÙ] ^
sede
ÙÙ_ c
)
ÙÙc d
;
ÙÙd e
HtmlToImage
ıı 
imgConverter
ıı $
=
ıı% &
new
ıı' *
HtmlToImage
ıı+ 6
(
ıı6 7
)
ıı7 8
;
ıı8 9
imgConverter
ˆˆ 
.
ˆˆ 
WebPageFixedSize
ˆˆ )
=
ˆˆ* +
false
ˆˆ, 1
;
ˆˆ1 2
if
¯¯ 
(
¯¯ 
formato
¯¯ 
==
¯¯ 
FormatoImpresion
¯¯ +
.
¯¯+ ,
_80mm
¯¯, 1
)
¯¯1 2
{
˘˘ 
imgConverter
˙˙ 
.
˙˙ 
WebPageWidth
˙˙ )
=
˙˙* +
$num
˙˙, /
;
˙˙/ 0
}
˚˚ 
else
¸¸ 
if
¸¸ 
(
¸¸ 
formato
¸¸ 
==
¸¸ 
FormatoImpresion
¸¸  0
.
¸¸0 1
A4
¸¸1 3
)
¸¸3 4
{
˝˝ 
imgConverter
˛˛ 
.
˛˛ 
WebPageWidth
˛˛ )
=
˛˛* +
$num
˛˛, /
;
˛˛/ 0
}
ˇˇ 
else
ÄÄ 
if
ÄÄ 
(
ÄÄ 
formato
ÄÄ 
==
ÄÄ 
FormatoImpresion
ÄÄ  0
.
ÄÄ0 1
_56mm
ÄÄ1 6
)
ÄÄ6 7
{
ÅÅ 
imgConverter
ÇÇ 
.
ÇÇ 
WebPageWidth
ÇÇ )
=
ÇÇ* +
$num
ÇÇ, /
;
ÇÇ/ 0
}
ÉÉ 
System
ÖÖ 
.
ÖÖ 
Drawing
ÖÖ 
.
ÖÖ 
Image
ÖÖ  
image
ÖÖ! &
=
ÖÖ' (
imgConverter
ÖÖ) 5
.
ÖÖ5 6
ConvertHtmlString
ÖÖ6 G
(
ÖÖG H
result
ÖÖH N
)
ÖÖN O
;
ÖÖO P
return
ÜÜ 
image
ÜÜ 
;
ÜÜ 
}
áá 	
}
ää 
}ãã Ü—
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\EjemploController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
EjemploController "
:# $
BaseController% 3
{ 
private 
readonly 
ICocheraLogica '
cocheraLogica( 5
;5 6
private 
new 
readonly 
IActorNegocioLogica 0
actorNegocioLogica1 C
;C D
public 
EjemploController  
(  !
)! "
{ 	
cocheraLogica 
= 
Dependencia '
.' (
Resolve( /
</ 0
ICocheraLogica0 >
>> ?
(? @
)@ A
;A B
actorNegocioLogica 
=  
Dependencia! ,
., -
Resolve- 4
<4 5
IActorNegocioLogica5 H
>H I
(I J
)J K
;K L
} 	
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
public   
ActionResult   
Reportes   $
(  $ %
)  % &
{!! 	
ViewBag"" 
."" 
fechaHoraInicio"" #
=""$ %
DateTime""& .
."". /
Now""/ 2
.""2 3
AddDays""3 :
("": ;
-""; <
$num""< >
)""> ?
;""? @
ViewBag## 
.## 
fechaHoraFin##  
=##! "
DateTime### +
.##+ ,
Now##, /
;##/ 0
ViewBag$$ 
.$$ 
cantidadMaximaDias$$ &
=$$' (
$num$$) +
;$$+ ,
return%% 
View%% 
(%% 
)%% 
;%% 
}&& 	
public(( 
ActionResult(( 
TemplateVertical(( ,
(((, -
)((- .
{)) 	
var** 
sede** 
=** 
ObtenerSede** "
(**" #
)**# $
;**$ %
string++ 

logoString++ 
=++ 
Convert++  '
.++' (
ToBase64String++( 6
(++6 7
sede++7 ;
.++; <
Logo++< @
,++@ A
$num++B C
,++C D
sede++E I
.++I J
Logo++J N
.++N O
Length++O U
)++U V
;++V W
var,, 
cochera,, 
=,, 
new,, 
ItemGenerico,, *
{,,+ ,
Id,,- /
=,,0 1
$num,,2 3
,,,3 4
Nombre,,5 ;
=,,< =
$str,,> ^
},,_ `
;,,` a
bool-- 
fromRequest-- 
=-- 
true-- #
;--# $
List.. 
<..  
EntradaSalidaUsuario.. %
>..% &
vehiculosIngresados..' :
=..; <
cocheraLogica..= J
...J K&
ObtenerVehiculosIngresados..K e
(..e f
cochera..f m
...m n
Id..n p
)..p q
;..q r
ReportParameter// 

nombreSede// &
=//' (
new//) ,
ReportParameter//- <
(//< =
$str//= I
,//I J
sede//K O
.//O P
Nombre//P V
)//V W
;//W X
ReportParameter00 
logoSede00 $
=00% &
new00' *
ReportParameter00+ :
(00: ;
$str00; E
,00E F

logoString00G Q
)00Q R
;00R S
ReportParameter11  
nombreCentroAtencion11 0
=111 2
new113 6
ReportParameter117 F
(11F G
$str11G ]
,11] ^
cochera11_ f
.11f g
Nombre11g m
)11m n
;11n o
ReportParameter22 
empleadoSede22 (
=22) *
new22+ .
ReportParameter22/ >
(22> ?
$str22? H
,22H I
ProfileData22J U
(22U V
)22V W
.22W X
Empleado22X `
.22` a
NombresYApellidos22a r
)22r s
;22s t
DateTime33 
fechaActual33  
=33! "
DateTimeUtil33" .
.33. /
FechaActual33/ :
(33: ;
)33; <
;33< =
ReportParameter44 
fechaActualSistema44 .
=44/ 0
new441 4
ReportParameter445 D
(44D E
$str44E R
,44R S
fechaActual44T _
.44_ `
ToString44` h
(44h i
)44i j
)44j k
;44k l
var55 
	rptviewer55 
=55 
new55 
ReportViewer55  ,
(55, -
)55- .
{55/ 0
ProcessingMode551 ?
=55@ A
ProcessingMode55B P
.55P Q
Local55Q V
,55V W
SizeToReportContent55X k
=55l m
true55n r
,55r s
Width55t y
=55z {
Unit	55| Ä
.
55Ä Å

Percentage
55Å ã
(
55ã å
$num
55å è
)
55è ê
,
55ê ë
Height
55í ò
=
55ô ö
Unit
55õ ü
.
55ü †

Percentage
55† ™
(
55™ ´
$num
55´ Æ
)
55Æ Ø
}
55∞ ±
;
55± ≤
string77 
path77 
=77 
$str77 Q
;77Q R
	rptviewer88 
.88 
LocalReport88 !
.88! "

ReportPath88" ,
=88- .
fromRequest88/ :
?88; <
Request88= D
.88D E
MapPath88E L
(88L M
Request88M T
.88T U
ApplicationPath88U d
)88d e
+88f g
path88h l
:88m n
HostingEnvironment	88o Å
.
88Å Ç
MapPath
88Ç â
(
88â ä
path
88ä é
)
88é è
;
88è ê
	rptviewer99 
.99 
LocalReport99 !
.99! "
SetParameters99" /
(99/ 0
new990 3
ReportParameter994 C
[99C D
]99D E
{99F G

nombreSede99H R
,99R S 
nombreCentroAtencion99T h
,99h i
logoSede99i q
,99q r
empleadoSede99s 
,	99 Ä 
fechaActualSistema
99Å ì
}
99î ï
)
99ï ñ
;
99ñ ó
ReportDataSource:: 
rptdatasource:: *
=::+ ,
new::- 0
ReportDataSource::1 A
(::A B
$str::B ^
,::^ _
vehiculosIngresados::` s
)::s t
;::t u
	rptviewer;; 
.;; 
LocalReport;; !
.;;! "
DataSources;;" -
.;;- .
Add;;. 1
(;;1 2
rptdatasource;;2 ?
);;? @
;;;@ A
ViewBag<< 
.<< 
ReportViewer<<  
=<<! "
	rptviewer<<# ,
;<<, -
return== 
View== 
(== 
$str== -
)==- .
;==. /
}>> 	
publicAA 
ActionResultAA 
TemplateHorizontalAA .
(AA. /
)AA/ 0
{BB 	
varDD 
sedeDD 
=DD 
ObtenerSedeDD "
(DD" #
)DD# $
;DD$ %
stringEE 

logoStringEE 
=EE 
ConvertEE  '
.EE' (
ToBase64StringEE( 6
(EE6 7
sedeEE7 ;
.EE; <
LogoEE< @
,EE@ A
$numEEB C
,EEC D
sedeEEE I
.EEI J
LogoEEJ N
.EEN O
LengthEEO U
)EEU V
;EEV W
varFF 
cocheraFF 
=FF 
newFF 
ItemGenericoFF *
{FF+ ,
IdFF- /
=FF0 1
$numFF2 3
,FF3 4
NombreFF5 ;
=FF< =
$strFF> ^
}FF_ `
;FF` a
boolGG 
fromRequestGG 
=GG 
trueGG #
;GG# $
ListHH 
<HH  
EntradaSalidaUsuarioHH %
>HH% &
vehiculosIngresadosHH' :
=HH; <
cocheraLogicaHH= J
.HHJ K&
ObtenerVehiculosIngresadosHHK e
(HHe f
cocheraHHf m
.HHm n
IdHHn p
)HHp q
;HHq r
ReportParameterII 

nombreSedeII &
=II' (
newII) ,
ReportParameterII- <
(II< =
$strII= I
,III J
sedeIIK O
.IIO P
NombreIIP V
)IIV W
;IIW X
ReportParameterJJ 
logoSedeJJ $
=JJ% &
newJJ' *
ReportParameterJJ+ :
(JJ: ;
$strJJ; E
,JJE F

logoStringJJG Q
)JJQ R
;JJR S
ReportParameterKK  
nombreCentroAtencionKK 0
=KK1 2
newKK3 6
ReportParameterKK7 F
(KKF G
$strKKG ]
,KK] ^
cocheraKK_ f
.KKf g
NombreKKg m
)KKm n
;KKn o
ReportParameterLL 
usuarioLL #
=LL$ %
newLL& )
ReportParameterLL* 9
(LL9 :
$strLL: C
,LLC D
ProfileDataLLE P
(LLP Q
)LLQ R
.LLR S
EmpleadoLLS [
.LL[ \
NombresYApellidosLL\ m
)LLm n
;LLn o
DateTimeMM 
fechaActualMM  
=MM! "
DateTimeUtilMM" .
.MM. /
FechaActualMM/ :
(MM: ;
)MM; <
;MM< =
ReportParameterNN 
fechayHoraActualNN ,
=NN- .
newNN/ 2
ReportParameterNN3 B
(NNB C
$strNNC P
,NNP Q
fechaActualNNR ]
.NN] ^
ToStringNN^ f
(NNf g
)NNg h
)NNh i
;NNi j
varPP 
	rptviewerPP 
=PP 
newPP 
ReportViewerPP  ,
(PP, -
)PP- .
{PP/ 0
ProcessingModePP1 ?
=PP@ A
ProcessingModePPB P
.PPP Q
LocalPPQ V
,PPV W
SizeToReportContentPPX k
=PPl m
truePPn r
,PPr s
WidthPPt y
=PPz {
Unit	PP| Ä
.
PPÄ Å

Percentage
PPÅ ã
(
PPã å
$num
PPå è
)
PPè ê
,
PPê ë
Height
PPí ò
=
PPô ö
Unit
PPõ ü
.
PPü †

Percentage
PP† ™
(
PP™ ´
$num
PP´ Æ
)
PPÆ Ø
}
PP∞ ±
;
PP± ≤
stringQQ 
pathQQ 
=QQ 
$strQQ S
;QQS T
	rptviewerRR 
.RR 
LocalReportRR !
.RR! "

ReportPathRR" ,
=RR- .
fromRequestRR/ :
?RR; <
RequestRR= D
.RRD E
MapPathRRE L
(RRL M
RequestRRM T
.RRT U
ApplicationPathRRU d
)RRd e
+RRf g
pathRRh l
:RRm n
HostingEnvironment	RRo Å
.
RRÅ Ç
MapPath
RRÇ â
(
RRâ ä
path
RRä é
)
RRé è
;
RRè ê
	rptviewerSS 
.SS 
LocalReportSS !
.SS! "
SetParametersSS" /
(SS/ 0
newSS0 3
ReportParameterSS4 C
[SSC D
]SSD E
{SSF G

nombreSedeSSH R
,SSR S 
nombreCentroAtencionSST h
,SSh i
logoSedeSSj r
,SSr s
usuarioSSt {
,SS{ |
fechayHoraActual	SS} ç
}
SSé è
)
SSè ê
;
SSê ë
ReportDataSourceTT 
rptdatasourceTT *
=TT+ ,
newTT- 0
ReportDataSourceTT1 A
(TTA B
$strTTB ^
,TT^ _
vehiculosIngresadosTT` s
)TTs t
;TTt u
	rptviewerUU 
.UU 
LocalReportUU !
.UU! "
DataSourcesUU" -
.UU- .
AddUU. 1
(UU1 2
rptdatasourceUU2 ?
)UU? @
;UU@ A
ViewBagVV 
.VV 
ReportViewerVV  
=VV! "
	rptviewerVV# ,
;VV, -
returnWW 
ViewWW 
(WW 
$strWW -
)WW- .
;WW. /
}XX 	
publicZZ 
ActionResultZZ &
ReporteVehiculosIngresadosZZ 6
(ZZ6 7
intZZ7 :
	idCocheraZZ; D
,ZZD E
stringZZF L
nombreCocheraZZM Z
)ZZZ [
{[[ 	
var\\ 
cochera\\ 
=\\ 
new\\ 
ItemGenerico\\ *
{\\+ ,
Id\\- /
=\\0 1
	idCochera\\2 ;
,\\; <
Nombre\\= C
=\\D E
nombreCochera\\F S
}\\T U
;\\U V
var]] 
	rptviewer]] 
=]] -
!GenerarReporteVehiculosIngresados]] =
(]]= >
cochera]]> E
,]]E F
true]]G K
)]]K L
;]]L M
ViewBag^^ 
.^^ 
ReportViewer^^  
=^^! "
	rptviewer^^# ,
;^^, -
return__ 
View__ 
(__ 
$str__ -
)__- .
;__. /
}`` 	
publicbb 
ReportViewerbb -
!GenerarReporteVehiculosIngresadosbb =
(bb= >
ItemGenericobb> J
cocherabbK R
,bbR S
boolbbT X
fromRequestbbY d
)bbd e
{cc 	
Listdd 
<dd  
EntradaSalidaUsuariodd %
>dd% &
vehiculosIngresadosdd' :
=dd; <
cocheraLogicadd= J
.ddJ K&
ObtenerVehiculosIngresadosddK e
(dde f
cocheraddf m
.ddm n
Idddn p
)ddp q
;ddq r
ReportParameteree 

nombreSedeee &
=ee' (
newee) ,
ReportParameteree- <
(ee< =
$stree= I
,eeI J
ObtenerSedeeeK V
(eeV W
)eeW X
.eeX Y
NombreeeY _
)ee_ `
;ee` a
ReportParameterff  
nombreCentroAtencionff 0
=ff1 2
newff3 6
ReportParameterff7 F
(ffF G
$strffG ]
,ff] ^
cocheraff_ f
.fff g
Nombreffg m
)ffm n
;ffn o
vargg 
	rptviewergg 
=gg 
newgg 
ReportViewergg  ,
(gg, -
)gg- .
{gg/ 0
ProcessingModegg1 ?
=gg@ A
ProcessingModeggB P
.ggP Q
LocalggQ V
,ggV W
SizeToReportContentggX k
=ggl m
trueggn r
,ggr s
Widthggt y
=ggz {
Unit	gg| Ä
.
ggÄ Å

Percentage
ggÅ ã
(
ggã å
$num
ggå è
)
ggè ê
,
ggê ë
Height
ggí ò
=
ggô ö
Unit
ggõ ü
.
ggü †

Percentage
gg† ™
(
gg™ ´
$num
gg´ Æ
)
ggÆ Ø
}
gg∞ ±
;
gg± ≤
stringhh 
pathhh 
=hh 
$strhh N
;hhN O
	rptviewerii 
.ii 
LocalReportii !
.ii! "

ReportPathii" ,
=ii- .
fromRequestii/ :
?ii; <
Requestii= D
.iiD E
MapPathiiE L
(iiL M
RequestiiM T
.iiT U
ApplicationPathiiU d
)iid e
+iif g
pathiih l
:iim n
HostingEnvironment	iio Å
.
iiÅ Ç
MapPath
iiÇ â
(
iiâ ä
path
iiä é
)
iié è
;
iiè ê
	rptviewerjj 
.jj 
LocalReportjj !
.jj! "
SetParametersjj" /
(jj/ 0
newjj0 3
ReportParameterjj4 C
[jjC D
]jjD E
{jjF G

nombreSedejjH R
,jjR S 
nombreCentroAtencionjjT h
}jji j
)jjj k
;jjk l
ReportDataSourcekk 
rptdatasourcekk *
=kk+ ,
newkk- 0
ReportDataSourcekk1 A
(kkA B
$strkkB ^
,kk^ _
vehiculosIngresadoskk` s
)kks t
;kkt u
	rptviewerll 
.ll 
LocalReportll !
.ll! "
DataSourcesll" -
.ll- .
Addll. 1
(ll1 2
rptdatasourcell2 ?
)ll? @
;ll@ A
returnmm 
	rptviewermm 
;mm 
}nn 	
publicpp 
ActionResultpp #
ReporteIngresosYSalidaspp 3
(pp3 4
intpp4 7
	idCocherapp8 A
,ppA B
stringppC I
nombreCocherappJ W
,ppW X
DateTimeppY a
desdeppb g
,ppg h
DateTimeppi q
hastappr w
)ppw x
{qq 	
varrr 
cocherarr 
=rr 
newrr 
ItemGenericorr *
{rr+ ,
Idrr- /
=rr0 1
	idCocherarr2 ;
,rr; <
Nombrerr= C
=rrD E
nombreCocherarrF S
}rrT U
;rrU V
vartt 
	rptviewertt 
=tt *
GenerarReporteIngresosYSalidastt :
(tt: ;
cocheratt; B
,ttB C
desdettD I
,ttI J
hastattK P
,ttP Q
truettR V
)ttV W
;ttW X
ViewBaguu 
.uu 
ReportVieweruu  
=uu! "
	rptvieweruu# ,
;uu, -
returnvv 
Viewvv 
(vv 
$strvv -
)vv- .
;vv. /
}ww 	
publicyy 
ReportVieweryy *
GenerarReporteIngresosYSalidasyy :
(yy: ;
ItemGenericoyy; G
cocherayyH O
,yyO P
DateTimeyyQ Y
desdeyyZ _
,yy_ `
DateTimeyya i
hastayyj o
,yyo p
boolyyq u
fromRequest	yyv Å
)
yyÅ Ç
{zz 	
List{{ 
<{{ 
EntradaSalida{{ 
>{{ 
ingresosYSalidas{{  0
={{1 2
cocheraLogica{{3 @
.{{@ A#
ObtenerEntradasYSalidas{{A X
({{X Y
cochera{{Y `
.{{` a
Id{{a c
,{{c d
desde{{e j
,{{j k
hasta{{l q
){{q r
;{{r s
ReportParameter|| 

nombreSede|| &
=||' (
new||) ,
ReportParameter||- <
(||< =
$str||= I
,||I J
ObtenerSede||K V
(||V W
)||W X
.||X Y
Nombre||Y _
)||_ `
;||` a
ReportParameter~~  
nombreCentroAtencion~~ 0
=~~1 2
new~~3 6
ReportParameter~~7 F
(~~F G
$str~~G ]
,~~] ^
cochera~~_ f
.~~f g
Nombre~~g m
)~~m n
;~~n o
string 
path 
= 
$str K
;K L
ReportDataSource
ÄÄ 
rptdatasource
ÄÄ *
=
ÄÄ+ ,
new
ÄÄ- 0
ReportDataSource
ÄÄ1 A
(
ÄÄA B
$str
ÄÄB [
,
ÄÄ[ \
ingresosYSalidas
ÄÄ] m
)
ÄÄm n
;
ÄÄn o
var
ÅÅ 
	rptviewer
ÅÅ 
=
ÅÅ 
new
ÅÅ 
ReportViewer
ÅÅ  ,
(
ÅÅ, -
)
ÅÅ- .
{
ÅÅ/ 0
ProcessingMode
ÅÅ1 ?
=
ÅÅ@ A
ProcessingMode
ÅÅB P
.
ÅÅP Q
Local
ÅÅQ V
,
ÅÅV W!
SizeToReportContent
ÅÅX k
=
ÅÅl m
true
ÅÅn r
,
ÅÅr s
Width
ÅÅt y
=
ÅÅz {
UnitÅÅ| Ä
.ÅÅÄ Å

PercentageÅÅÅ ã
(ÅÅã å
$numÅÅå è
)ÅÅè ê
,ÅÅê ë
HeightÅÅí ò
=ÅÅô ö
UnitÅÅõ ü
.ÅÅü †

PercentageÅÅ† ™
(ÅÅ™ ´
$numÅÅ´ Æ
)ÅÅÆ Ø
}ÅÅ∞ ±
;ÅÅ± ≤
	rptviewer
ÇÇ 
.
ÇÇ 
LocalReport
ÇÇ !
.
ÇÇ! "

ReportPath
ÇÇ" ,
=
ÇÇ- .
fromRequest
ÇÇ/ :
?
ÇÇ; <
Request
ÇÇ= D
.
ÇÇD E
MapPath
ÇÇE L
(
ÇÇL M
Request
ÇÇM T
.
ÇÇT U
ApplicationPath
ÇÇU d
)
ÇÇd e
+
ÇÇf g
path
ÇÇh l
:
ÇÇm n!
HostingEnvironmentÇÇo Å
.ÇÇÅ Ç
MapPathÇÇÇ â
(ÇÇâ ä
pathÇÇä é
)ÇÇé è
;ÇÇè ê
	rptviewer
ÉÉ 
.
ÉÉ 
LocalReport
ÉÉ !
.
ÉÉ! "
SetParameters
ÉÉ" /
(
ÉÉ/ 0
new
ÉÉ0 3
ReportParameter
ÉÉ4 C
[
ÉÉC D
]
ÉÉD E
{
ÉÉF G

nombreSede
ÉÉH R
,
ÉÉR S"
nombreCentroAtencion
ÉÉT h
}
ÉÉi j
)
ÉÉj k
;
ÉÉk l
	rptviewer
ÑÑ 
.
ÑÑ 
LocalReport
ÑÑ !
.
ÑÑ! "
DataSources
ÑÑ" -
.
ÑÑ- .
Add
ÑÑ. 1
(
ÑÑ1 2
rptdatasource
ÑÑ2 ?
)
ÑÑ? @
;
ÑÑ@ A
return
ÖÖ 
	rptviewer
ÖÖ 
;
ÖÖ 
}
ÜÜ 	
public
àà 
ActionResult
àà "
ReporteExoneraciones
àà 0
(
àà0 1
int
àà1 4
	idCochera
àà5 >
,
àà> ?
string
àà@ F
nombreCochera
ààG T
)
ààT U
{
ââ 	
var
ää 
cochera
ää 
=
ää 
new
ää 
ItemGenerico
ää *
{
ää+ ,
Id
ää- /
=
ää0 1
	idCochera
ää2 ;
,
ää; <
Nombre
ää= C
=
ääD E
nombreCochera
ääF S
}
ääT U
;
ääU V
var
ãã 
	rptviewer
ãã 
=
ãã )
GenerarReporteExoneraciones
ãã 7
(
ãã7 8
cochera
ãã8 ?
,
ãã? @
true
ããA E
)
ããE F
;
ããF G
ViewBag
åå 
.
åå 
ReportViewer
åå  
=
åå! "
	rptviewer
åå# ,
;
åå, -
return
çç 
View
çç 
(
çç 
$str
çç -
)
çç- .
;
çç. /
}
éé 	
public
êê 
ReportViewer
êê )
GenerarReporteExoneraciones
êê 7
(
êê7 8
ItemGenerico
êê8 D
cochera
êêE L
,
êêL M
bool
êêN R
fromRequest
êêS ^
)
êê^ _
{
ëë 	
List
íí 
<
íí (
ExoneracionDeVehiculo_Flat
íí +
>
íí+ ,
ingresosYSalidas
íí- =
=
íí> ?(
ExoneracionDeVehiculo_Flat
íí@ Z
.
ííZ [
Convert
íí[ b
(
ííb c
cocheraLogica
ííc p
.
ííp q)
ObtenerVehiculosExoneradosííq ã
(ííã å
cocheraííå ì
.ííì î
Idííî ñ
)ííñ ó
)ííó ò
;ííò ô
ReportParameter
ìì 

nombreSede
ìì &
=
ìì' (
new
ìì) ,
ReportParameter
ìì- <
(
ìì< =
$str
ìì= I
,
ììI J
ObtenerSede
ììK V
(
ììV W
)
ììW X
.
ììX Y
Nombre
ììY _
)
ìì_ `
;
ìì` a
ReportParameter
îî "
nombreCentroAtencion
îî 0
=
îî1 2
new
îî3 6
ReportParameter
îî7 F
(
îîF G
$str
îîG ]
,
îî] ^
cochera
îî_ f
.
îîf g
Nombre
îîg m
)
îîm n
;
îîn o
string
ïï 
path
ïï 
=
ïï 
$str
ïï N
;
ïïN O
ReportDataSource
ññ 
rptdatasource
ññ *
=
ññ+ ,
new
ññ- 0
ReportDataSource
ññ1 A
(
ññA B
$str
ññB X
,
ññX Y
ingresosYSalidas
ññZ j
)
ññj k
;
ññk l
var
óó 
	rptviewer
óó 
=
óó 
new
óó 
ReportViewer
óó  ,
(
óó, -
)
óó- .
{
óó/ 0
ProcessingMode
óó1 ?
=
óó@ A
ProcessingMode
óóB P
.
óóP Q
Local
óóQ V
,
óóV W!
SizeToReportContent
óóX k
=
óól m
true
óón r
,
óór s
Width
óót y
=
óóz {
Unitóó| Ä
.óóÄ Å

PercentageóóÅ ã
(óóã å
$numóóå è
)óóè ê
,óóê ë
Heightóóí ò
=óóô ö
Unitóóõ ü
.óóü †

Percentageóó† ™
(óó™ ´
$numóó´ Æ
)óóÆ Ø
}óó∞ ±
;óó± ≤
	rptviewer
òò 
.
òò 
LocalReport
òò !
.
òò! "

ReportPath
òò" ,
=
òò- .
fromRequest
òò/ :
?
òò; <
Request
òò= D
.
òòD E
MapPath
òòE L
(
òòL M
Request
òòM T
.
òòT U
ApplicationPath
òòU d
)
òòd e
+
òòf g
path
òòh l
:
òòm n!
HostingEnvironmentòòo Å
.òòÅ Ç
MapPathòòÇ â
(òòâ ä
pathòòä é
)òòé è
;òòè ê
	rptviewer
ôô 
.
ôô 
LocalReport
ôô !
.
ôô! "
SetParameters
ôô" /
(
ôô/ 0
new
ôô0 3
ReportParameter
ôô4 C
[
ôôC D
]
ôôD E
{
ôôF G

nombreSede
ôôH R
,
ôôR S"
nombreCentroAtencion
ôôT h
}
ôôi j
)
ôôj k
;
ôôk l
	rptviewer
öö 
.
öö 
LocalReport
öö !
.
öö! "
DataSources
öö" -
.
öö- .
Add
öö. 1
(
öö1 2
rptdatasource
öö2 ?
)
öö? @
;
öö@ A
return
õõ 
	rptviewer
õõ 
;
õõ 
}
úú 	
public
üü 
ActionResult
üü 
Botones
üü #
(
üü# $
)
üü$ %
{
üü& '
return
†† 
View
†† 
(
†† 
)
†† 
;
†† 
}
¢¢ 	
public
§§ 
ActionResult
§§ 
BandejaResponsive
§§ -
(
§§- .
)
§§. /
{
•• 	
return
¶¶ 
View
¶¶ 
(
¶¶ 
)
¶¶ 
;
¶¶ 
}
®® 	
public
™™ 
ActionResult
™™ 
Prueba
™™ "
(
™™" #
)
™™# $
{
´´ 	
return
¨¨ 
View
¨¨ 
(
¨¨ 
)
¨¨ 
;
¨¨ 
}
ÆÆ 	
}
≤≤ 
}∑∑ ì
_D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\InsumosControladosController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class (
InsumosControladosController -
:. /
BaseController0 >
{ 
private 
readonly %
ILibrosElectronicosLogica 2%
_librosElectronicosLogica3 L
;L M
private 
readonly 
IActorNegocioLogica ,
_actorNegocioLogica- @
;@ A
private 
readonly 
IOperacionLogica )
_logicaOperacion* :
;: ;
public (
InsumosControladosController +
(+ ,
), -
{ 	%
_librosElectronicosLogica %
=& '
Dependencia( 3
.3 4
Resolve4 ;
<; <%
ILibrosElectronicosLogica< U
>U V
(V W
)W X
;X Y
_actorNegocioLogica 
=  !
Dependencia" -
.- .
Resolve. 5
<5 6
IActorNegocioLogica6 I
>I J
(J K
)K L
;L M
_logicaOperacion 
= 
Dependencia *
.* +
Resolve+ 2
<2 3
IOperacionLogica3 C
>C D
(D E
)E F
;F G
} 	
public## 
ActionResult## 
InsumoControlado## ,
(##, -
)##- .
{$$ 	
return%% 
View%% 
(%% 
)%% 
;%% 
}&& 	
}'' 
}(( ±
^D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\NotaCreditoDebitoController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{		 
public

 

class

 '
NotaCreditoDebitoController

 ,
:

- .
BaseController

/ =
{ 
public 

JsonResult  
GuardarNotaDeCredito .
(. /#
RegistroDeNotaViewModel/ F
registroDeNotaG U
)U V
{ 	
return 
null 
; 
} 	
} 
} ó‹
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\ReporteController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public   

class   
ReporteController   "
:  # $
BaseController  $ 2
{!! 
private"" 
new"" 
readonly"" 
IOperacionLogica"" -
operacionLogica"". =
;""= >
private## 
new## 
readonly## 
IConceptoLogica## ,
conceptoLogica##- ;
;##; <
private$$ 
new$$ 
readonly$$ %
ILibrosElectronicosLogica$$ 6$
librosElectronicosLogica$$7 O
;$$O P
private%% 
new%% 
readonly%% +
ILibrosElectronicosAdsoftLogica%% <*
librosElectronicosAdsoftLogica%%= [
;%%[ \
private&& 
new&& 
readonly&& ,
 ILibrosElectronicosFoxcontLogica&& =+
librosElectronicosFoxcontLogica&&> ]
;&&] ^
private'' 
new'' 
readonly''  
IConfiguracionLogica'' 1
configuracionLogica''2 E
;''E F
	protected(( 
readonly(( 
IActorNegocioLogica(( .
actorNegocioLogica((/ A
;((A B
	protected)) 
readonly)) 
IMaestroLogica)) )
maestroLogica))* 7
;))7 8/
#LibrosElectronicosGeneradorReportes** +
	generador**, 5
=**6 7
new**8 ;/
#LibrosElectronicosGeneradorReportes**< _
(**_ `
)**` a
;**a b
	protected++ 
readonly++ 
IMailer++ "
mailer++# )
;++) *
	protected,, 
readonly,, $
ICentroDeAtencion_Logica,, 3"
centroDeAtencionLogica,,4 J
;,,J K
	protected.. 
readonly.. 
ISede_Logica.. '

sedeLogica..( 2
;..2 3
	protected// 
readonly// &
IConsultaMasivaVentaLogica// 5%
consultaMasivaVentaLogica//6 O
;//O P
public33 
ReporteController33  
(33  !
)33! "
{44 	
operacionLogica55 
=55 
Dependencia55 )
.55) *
Resolve55* 1
<551 2
IOperacionLogica552 B
>55B C
(55C D
)55D E
;55E F
conceptoLogica66 
=66 
Dependencia66 (
.66( )
Resolve66) 0
<660 1
IConceptoLogica661 @
>66@ A
(66A B
)66B C
;66C D$
librosElectronicosLogica77 $
=77% &
Dependencia77' 2
.772 3
Resolve773 :
<77: ;%
ILibrosElectronicosLogica77; T
>77T U
(77U V
)77V W
;77W X*
librosElectronicosAdsoftLogica88 *
=88+ ,
Dependencia88- 8
.888 9
Resolve889 @
<88@ A+
ILibrosElectronicosAdsoftLogica88A `
>88` a
(88a b
)88b c
;88c d+
librosElectronicosFoxcontLogica99 +
=99, -
Dependencia99. 9
.999 :
Resolve99: A
<99A B,
 ILibrosElectronicosFoxcontLogica99B b
>99b c
(99c d
)99d e
;99e f
configuracionLogica:: 
=::  !
Dependencia::" -
.::- .
Resolve::. 5
<::5 6 
IConfiguracionLogica::6 J
>::J K
(::K L
)::L M
;::M N
actorNegocioLogica;; 
=;;  
Dependencia;;! ,
.;;, -
Resolve;;- 4
<;;4 5
IActorNegocioLogica;;5 H
>;;H I
(;;I J
);;J K
;;;K L
maestroLogica<< 
=<< 
Dependencia<< '
.<<' (
Resolve<<( /
<<</ 0
IMaestroLogica<<0 >
><<> ?
(<<? @
)<<@ A
;<<A B
mailer== 
=== 
Dependencia==  
.==  !
Resolve==! (
<==( )
IMailer==) 0
>==0 1
(==1 2
)==2 3
;==3 4"
centroDeAtencionLogica>> "
=>># $
Dependencia>>% 0
.>>0 1
Resolve>>1 8
<>>8 9$
ICentroDeAtencion_Logica>>9 Q
>>>Q R
(>>R S
)>>S T
;>>T U

sedeLogica?? 
=?? 
Dependencia?? $
.??$ %
Resolve??% ,
<??, -
ISede_Logica??- 9
>??9 :
(??: ;
)??; <
;??< =%
consultaMasivaVentaLogica@@ %
=@@& '
Dependencia@@( 3
.@@3 4
Resolve@@4 ;
<@@; <&
IConsultaMasivaVentaLogica@@< V
>@@V W
(@@W X
)@@X Y
;@@Y Z
}AA 	
publicDD 
voidDD 
DefinirReportViewerDD '
(DD' (
ReportViewerDD( 4
	rptviewerDD5 >
,DD> ?
ListDD@ D
<DDD E
ReportDataSourceDDE U
>DDU V
datasourcesDDW b
)DDb c
{EE 	
	rptviewerFF 
.FF 
ProcessingModeFF $
=FF% &
ProcessingModeFF' 5
.FF5 6
LocalFF6 ;
;FF; <
datasourcesGG 
.GG 
ForEachGG 
(GG  
dsGG  "
=>GG# %
	rptviewerGG& /
.GG/ 0
LocalReportGG0 ;
.GG; <
DataSourcesGG< G
.GGG H
AddGGH K
(GGK L
dsGGL N
)GGN O
)GGO P
;GGP Q
	rptviewerHH 
.HH 
SizeToReportContentHH )
=HH* +
trueHH, 0
;HH0 1
	rptviewerII 
.II 
WidthII 
=II 
UnitII "
.II" #

PercentageII# -
(II- .
$numII. 1
)II1 2
;II2 3
	rptviewerJJ 
.JJ 
HeightJJ 
=JJ 
UnitJJ #
.JJ# $

PercentageJJ$ .
(JJ. /
$numJJ/ 2
)JJ2 3
;JJ3 4
}KK 	
publicNN 
ActionResultNN ,
 ConsolidadoReportesAdministradorNN <
(NN< =
)NN= >
{OO 	
ListPP 
<PP 
DateTimePP 
>PP 
fechasPP !
=PP" #
operacionLogicaPP$ 3
.PP3 44
(ObtenerFechaIncioyFinBasadoEnFechaActualPP4 \
(PP\ ]
)PP] ^
;PP^ _
ViewBagQQ 
.QQ 
fechaHoraInicioQQ #
=QQ$ %
fechasQQ& ,
[QQ, -
$numQQ- .
]QQ. /
;QQ/ 0
ViewBagRR 
.RR 
fechaHoraFinRR  
=RR! "
fechasRR# )
[RR) *
$numRR* +
]RR+ ,
;RR, -
returnSS 
ViewSS 
(SS 
)SS 
;SS 
}TT 	
publicVV 
ActionResultVV '
GastosReportesAdministradorVV 7
(VV7 8
)VV8 9
{WW 	
ListXX 
<XX 
DateTimeXX 
>XX 
fechasXX !
=XX" #
operacionLogicaXX$ 3
.XX3 4=
1ObtenerFechaIncioyFinParaReporteVentaPuntoDeVentaXX4 e
(XXe f
)XXf g
;XXg h
ViewBagYY 
.YY 
fechaHoraInicioYY #
=YY$ %
fechasYY& ,
[YY, -
$numYY- .
]YY. /
;YY/ 0
ViewBagZZ 
.ZZ 
fechaHoraFinZZ  
=ZZ! "
fechasZZ# )
[ZZ) *
$numZZ* +
]ZZ+ ,
;ZZ, -
return[[ 
View[[ 
([[ 
)[[ 
;[[ 
}\\ 	
public^^ 
ActionResult^^ 8
,DeudasPorPagarYDeudasPorCobrarsAdministrador^^ H
(^^H I
)^^I J
{__ 	
List`` 
<`` 
DateTime`` 
>`` 
fechas`` !
=``" #
operacionLogica``$ 3
.``3 44
(ObtenerFechaIncioyFinBasadoEnFechaActual``4 \
(``\ ]
)``] ^
;``^ _
ViewBagaa 
.aa 
fechaHoraInicioaa #
=aa$ %
fechasaa& ,
[aa, -
$numaa- .
]aa. /
;aa/ 0
ViewBagbb 
.bb 
fechaHoraFinbb  
=bb! "
fechasbb# )
[bb) *
$numbb* +
]bb+ ,
;bb, -
returncc 
Viewcc 
(cc 
)cc 
;cc 
}dd 	
[ee 	
	Authorizeee	 
(ee 
Rolesee 
=ee 
$stree 9
)ee9 :
]ee: ;
publicff 
ActionResultff 
DeudasYPagosff (
(ff( )
)ff) *
{gg 	
Listii 
<ii 
DateTimeii 
>ii 
fechasii !
=ii" #
operacionLogicaii$ 3
.ii3 4=
1ObtenerFechaIncioyFinParaReporteVentaPuntoDeVentaii4 e
(iie f
)iif g
;iig h
ViewBagjj 
.jj 
fechaHoraIniciojj #
=jj$ %
fechasjj& ,
[jj, -
$numjj- .
]jj. /
;jj/ 0
ViewBagkk 
.kk 
fechaHoraFinkk  
=kk! "
fechaskk# )
[kk) *
$numkk* +
]kk+ ,
;kk, -
returnll 
Viewll 
(ll 
)ll 
;ll 
}mm 	
[nn 	
	Authorizenn	 
(nn 
Rolesnn 
=nn 
$strnn 9
)nn9 :
]nn: ;
publicoo 
ActionResultoo *
ReportesAdministradorDeComprasoo :
(oo: ;
)oo; <
{pp 	
Listqq 
<qq 
stringqq 
>qq 
fechasqq 
=qq  !
operacionLogicaqq" 1
.qq1 22
&ObtenerFechaIncioyFinParaReporteCompraqq2 X
(qqX Y
)qqY Z
;qqZ [
ViewBagrr 
.rr 
fechaHoraIniciorr #
=rr$ %
fechasrr& ,
[rr, -
$numrr- .
]rr. /
;rr/ 0
ViewBagss 
.ss 
fechaHoraFinss  
=ss! "
fechasss# )
[ss) *
$numss* +
]ss+ ,
;ss, -
returntt 
Viewtt 
(tt 
)tt 
;tt 
}uu 	
[vv 	
	Authorizevv	 
(vv 
Rolesvv 
=vv 
$strvv 9
)vv9 :
]vv: ;
publicww 
ActionResultww $
ReporteDeDeudaPorClienteww 4
(ww4 5
)ww5 6
{xx 	
Listyy 
<yy 
DateTimeyy 
>yy 
fechasyy !
=yy" #
operacionLogicayy$ 3
.yy3 44
(ObtenerFechaIncioyFinBasadoEnFechaActualyy4 \
(yy\ ]
)yy] ^
;yy^ _
ViewBagzz 
.zz 
fechaHoraIniciozz #
=zz$ %
fechaszz& ,
[zz, -
$numzz- .
]zz. /
;zz/ 0
ViewBag{{ 
.{{ 
fechaHoraFin{{  
={{! "
fechas{{# )
[{{) *
$num{{* +
]{{+ ,
;{{, -
return|| 
View|| 
(|| 
)|| 
;|| 
}}} 	
public~~ 
ActionResult~~ #
ReporteUtilidadDeVentas~~ 3
(~~3 4
)~~4 5
{ 	
List
ÄÄ 
<
ÄÄ 
DateTime
ÄÄ 
>
ÄÄ 
fechas
ÄÄ !
=
ÄÄ" #
operacionLogica
ÄÄ$ 3
.
ÄÄ3 46
(ObtenerFechaIncioyFinBasadoEnFechaActual
ÄÄ4 \
(
ÄÄ\ ]
)
ÄÄ] ^
;
ÄÄ^ _
ViewBag
ÅÅ 
.
ÅÅ 
fechaHoraInicio
ÅÅ #
=
ÅÅ$ %
fechas
ÅÅ& ,
[
ÅÅ, -
$num
ÅÅ- .
]
ÅÅ. /
;
ÅÅ/ 0
ViewBag
ÇÇ 
.
ÇÇ 
fechaHoraFin
ÇÇ  
=
ÇÇ! "
fechas
ÇÇ# )
[
ÇÇ) *
$num
ÇÇ* +
]
ÇÇ+ ,
;
ÇÇ, -
return
ÉÉ 
View
ÉÉ 
(
ÉÉ 
)
ÉÉ 
;
ÉÉ 
}
ÑÑ 	
public
ÜÜ 
ActionResult
ÜÜ 
ReporteFinanzas
ÜÜ +
(
ÜÜ+ ,
)
ÜÜ, -
{
áá 	
List
àà 
<
àà 
DateTime
àà 
>
àà 
fechas
àà !
=
àà" #
operacionLogica
àà$ 3
.
àà3 46
(ObtenerFechaIncioyFinBasadoEnFechaActual
àà4 \
(
àà\ ]
)
àà] ^
;
àà^ _
ViewBag
ââ 
.
ââ 
fechaHoraInicio
ââ #
=
ââ$ %
fechas
ââ& ,
[
ââ, -
$num
ââ- .
]
ââ. /
;
ââ/ 0
ViewBag
ää 
.
ää 
fechaHoraFin
ää  
=
ää! "
fechas
ää# )
[
ää) *
$num
ää* +
]
ää+ ,
;
ää, -
return
ãã 
View
ãã 
(
ãã 
)
ãã 
;
ãã 
}
åå 	
[
çç 	
	Authorize
çç	 
(
çç 
Roles
çç 
=
çç 
$str
çç 9
)
çç9 :
]
çç: ;
public
éé 
ActionResult
éé 
ReportePuntos
éé )
(
éé) *
)
éé* +
{
èè 	
List
êê 
<
êê 
DateTime
êê 
>
êê 
fechas
êê !
=
êê" #
operacionLogica
êê$ 3
.
êê3 46
(ObtenerFechaIncioyFinBasadoEnFechaActual
êê4 \
(
êê\ ]
)
êê] ^
;
êê^ _
ViewBag
ëë 
.
ëë 
fechaHoraInicio
ëë #
=
ëë$ %
fechas
ëë& ,
[
ëë, -
$num
ëë- .
]
ëë. /
;
ëë/ 0
ViewBag
íí 
.
íí 
fechaHoraFin
íí  
=
íí! "
fechas
íí# )
[
íí) *
$num
íí* +
]
íí+ ,
;
íí, -
return
ìì 
View
ìì 
(
ìì 
)
ìì 
;
ìì 
}
îî 	
public
õõ 
ActionResult
õõ 2
$ReporteIntervaloFechasPorComprobante
õõ @
(
õõ@ A
string
õõA G
fechaInicio
õõH S
,
õõS T
string
õõU [
fechaFin
õõ\ d
,
õõd e
int
õõf i
idSerie
õõj q
)
õõq r
{
úú 	
var
ùù 
sede
ùù 
=
ùù 
ObtenerSede
ùù "
(
ùù" #
)
ùù# $
;
ùù$ %
DateTime
ûû 

fechaDesde
ûû 
=
ûû  !
DateTimeUtil
ûû" .
.
ûû. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ûû/ Z
(
ûûZ [
fechaInicio
ûû[ f
)
ûûf g
;
ûûg h
DateTime
üü 

fechaHasta
üü 
=
üü  !
DateTimeUtil
üü" .
.
üü. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
üü/ Z
(
üüZ [
fechaFin
üü[ c
)
üüc d
;
üüd e
var
°° 
	rptviewer
°° 
=
°° 9
+GenerarReporteIntervaloFechasPorComprobante
°° G
(
°°G H
ProfileData
°°H S
(
°°S T
)
°°T U
.
°°U V0
"NombreCentroDeAtencionSeleccionado
°°V x
,
°°x y
sede
°°z ~
,
°°~ 

fechaDesde°°Ä ä
,°°ä ã

fechaHasta°°å ñ
,°°ñ ó
idSerie°°ò ü
,°°ü †
true°°° •
)°°• ¶
;°°¶ ß
ViewBag
¢¢ 
.
¢¢ 
ReportViewer
¢¢  
=
¢¢! "
	rptviewer
¢¢# ,
;
¢¢, -
return
££ 
View
££ 
(
££ 
$str
££ -
)
££- .
;
££. /
}
§§ 	
public
∞∞ 
ReportViewer
∞∞ 9
+GenerarReporteIntervaloFechasPorComprobante
∞∞ G
(
∞∞G H
string
∞∞H N$
nombreCentroDeAtencion
∞∞O e
,
∞∞e f7
(EstablecimientoComercialExtendidoConLogo∞∞g è
sede∞∞ê î
,∞∞î ï
DateTime∞∞ñ û

fechaDesde∞∞ü ©
,∞∞© ™
DateTime∞∞´ ≥

fechaHasta∞∞¥ æ
,∞∞æ ø
int∞∞¿ √
idSerie∞∞ƒ À
,∞∞À Ã
bool∞∞Õ —
fromRequest∞∞“ ›
)∞∞› ﬁ
{
±± 	'
CentroDeAtencionExtendido
≤≤ %%
centroAtencionDeLaSerie
≤≤& =
=
≤≤> ?$
centroDeAtencionLogica
≤≤@ V
.
≤≤V W;
,ObtenerCentroDeAtencionSegunSerieComprobante≤≤W É
(≤≤É Ñ
idSerie≤≤Ñ ã
)≤≤ã å
;≤≤å ç
string
≥≥ +
nombreCentroAtencionDeLaSerie
≥≥ 0
=
≥≥1 2%
centroAtencionDeLaSerie
≥≥3 J
.
≥≥J K
Nombre
≥≥K Q
;
≥≥Q R
List
¥¥ 
<
¥¥ '
ResumenDeTransaccionVenta
¥¥ *
>
¥¥* +
ordenes
¥¥, 3
=
¥¥4 5
operacionLogica
¥¥6 E
.
¥¥E F0
"ObtenerResumenDeOperacionesDeVenta
¥¥F h
(
¥¥h i

fechaDesde
¥¥i s
,
¥¥s t

fechaHasta
¥¥u 
,¥¥ Ä
idSerie¥¥Å à
)¥¥à â
;¥¥â ä
ReportParameter
∂∂ !
parametroFechaDesde
∂∂ /
=
∂∂0 1
new
∂∂2 5
ReportParameter
∂∂6 E
(
∂∂E F
$str
∂∂F R
,
∂∂R S

fechaDesde
∂∂T ^
.
∂∂^ _
ToString
∂∂_ g
(
∂∂g h
)
∂∂h i
)
∂∂i j
;
∂∂j k
ReportParameter
∑∑ !
parametroFechaHasta
∑∑ /
=
∑∑0 1
new
∑∑2 5
ReportParameter
∑∑6 E
(
∑∑E F
$str
∑∑F R
,
∑∑R S

fechaHasta
∑∑T ^
.
∑∑^ _
ToString
∑∑_ g
(
∑∑g h
)
∑∑h i
)
∑∑i j
;
∑∑j k
ReportParameter
∏∏ 
nombreEmpresa
∏∏ )
=
∏∏* +
new
∏∏, /
ReportParameter
∏∏0 ?
(
∏∏? @
$str
∏∏@ L
,
∏∏L M
sede
∏∏N R
.
∏∏R S
Nombre
∏∏S Y
)
∏∏Y Z
;
∏∏Z [
ReportParameter
ππ "
nombreCentroAtencion
ππ 0
=
ππ1 2
new
ππ3 6
ReportParameter
ππ7 F
(
ππF G
$str
ππG ]
,
ππ] ^$
nombreCentroDeAtencion
ππ_ u
)
ππu v
;
ππv w
ReportParameter
∫∫ 4
&parametroNombreCentroAtencionDeLaSerie
∫∫ B
=
∫∫C D
new
∫∫E H
ReportParameter
∫∫I X
(
∫∫X Y
$str
∫∫Y z
,
∫∫z {,
nombreCentroAtencionDeLaSerie∫∫| ô
)∫∫ô ö
;∫∫ö õ
string
ΩΩ 

logoString
ΩΩ 
=
ΩΩ 
Convert
ΩΩ  '
.
ΩΩ' (
ToBase64String
ΩΩ( 6
(
ΩΩ6 7
sede
ΩΩ7 ;
.
ΩΩ; <
Logo
ΩΩ< @
,
ΩΩ@ A
$num
ΩΩB C
,
ΩΩC D
sede
ΩΩE I
.
ΩΩI J
Logo
ΩΩJ N
.
ΩΩN O
Length
ΩΩO U
)
ΩΩU V
;
ΩΩV W
ReportParameter
ææ 
logoSede
ææ $
=
ææ% &
new
ææ' *
ReportParameter
ææ+ :
(
ææ: ;
$str
ææ; E
,
ææE F

logoString
ææG Q
)
ææQ R
;
ææR S
ReportParameter
øø 
empleadoSede
øø (
=
øø) *
new
øø+ .
ReportParameter
øø/ >
(
øø> ?
$str
øø? H
,
øøH I
fromRequest
øøJ U
?
øøV W
ProfileData
øøX c
(
øøc d
)
øød e
.
øøe f
Empleado
øøf n
.
øøn o 
NombresYApellidosøøo Ä
:øøÅ Ç
$strøøÉ Ü
)øøÜ á
;øøá à
DateTime
¿¿ 
fechaActual
¿¿  
=
¿¿! "
DateTimeUtil
¿¿" .
.
¿¿. /
FechaActual
¿¿/ :
(
¿¿: ;
)
¿¿; <
;
¿¿< =
ReportParameter
¡¡  
fechaActualSistema
¡¡ .
=
¡¡/ 0
new
¡¡1 4
ReportParameter
¡¡5 D
(
¡¡D E
$str
¡¡E R
,
¡¡R S
fechaActual
¡¡T _
.
¡¡_ `
ToString
¡¡` h
(
¡¡h i
)
¡¡i j
)
¡¡j k
;
¡¡k l
var
¬¬ 
	rptviewer
¬¬ 
=
¬¬ 
new
¬¬ 
ReportViewer
¬¬  ,
(
¬¬, -
)
¬¬- .
;
¬¬. /
string
√√ 
path
√√ 
=
√√ 
$str
√√ S
;
√√S T
	rptviewer
ƒƒ 
.
ƒƒ 
LocalReport
ƒƒ !
.
ƒƒ! "

ReportPath
ƒƒ" ,
=
ƒƒ- .
fromRequest
ƒƒ/ :
?
ƒƒ; <
Request
ƒƒ= D
.
ƒƒD E
MapPath
ƒƒE L
(
ƒƒL M
Request
ƒƒM T
.
ƒƒT U
ApplicationPath
ƒƒU d
)
ƒƒd e
+
ƒƒf g
path
ƒƒh l
:
ƒƒm n!
HostingEnvironmentƒƒo Å
.ƒƒÅ Ç
MapPathƒƒÇ â
(ƒƒâ ä
pathƒƒä é
)ƒƒé è
;ƒƒè ê
	rptviewer
≈≈ 
.
≈≈ 
LocalReport
≈≈ !
.
≈≈! "
SetParameters
≈≈" /
(
≈≈/ 0
new
≈≈0 3
ReportParameter
≈≈4 C
[
≈≈C D
]
≈≈D E
{
≈≈F G!
parametroFechaDesde
≈≈H [
,
≈≈[ \!
parametroFechaHasta
≈≈] p
,
≈≈p q
nombreEmpresa
≈≈r 
,≈≈ Ä6
&parametroNombreCentroAtencionDeLaSerie≈≈Å ß
,≈≈ß ®
logoSede≈≈© ±
,≈≈± ≤"
fechaActualSistema≈≈≥ ≈
,≈≈≈ ∆
empleadoSede≈≈« ”
,≈≈” ‘$
nombreCentroAtencion≈≈’ È
}≈≈Í Î
)≈≈Î Ï
;≈≈Ï Ì
ReportDataSource
«« "
rptdatasourceordenes
«« 1
=
««2 3
new
««4 7
ReportDataSource
««8 H
(
««H I
$str
««I Y
,
««Y Z
ordenes
««[ b
)
««b c
;
««c d
	rptviewer
»» 
.
»» 
LocalReport
»» !
.
»»! "
DataSources
»»" -
.
»»- .
Add
»». 1
(
»»1 2"
rptdatasourceordenes
»»2 F
)
»»F G
;
»»G H
	rptviewer
…… 
.
…… 
ProcessingMode
…… $
=
……% &
ProcessingMode
……' 5
.
……5 6
Local
……6 ;
;
……; <
	rptviewer
   
.
   !
SizeToReportContent
   )
=
  * +
true
  , 0
;
  0 1
	rptviewer
ÀÀ 
.
ÀÀ 
Width
ÀÀ 
=
ÀÀ 
Unit
ÀÀ "
.
ÀÀ" #

Percentage
ÀÀ# -
(
ÀÀ- .
$num
ÀÀ. 1
)
ÀÀ1 2
;
ÀÀ2 3
	rptviewer
ÃÃ 
.
ÃÃ 
Height
ÃÃ 
=
ÃÃ 
Unit
ÃÃ #
.
ÃÃ# $

Percentage
ÃÃ$ .
(
ÃÃ. /
$num
ÃÃ/ 2
)
ÃÃ2 3
;
ÃÃ3 4
return
ÕÕ 
	rptviewer
ÕÕ 
;
ÕÕ 
}
ŒŒ 	
public
—— 
ActionResult
—— /
!ReporteIntervaloFechasPorConcepto
—— =
(
——= >
string
——> D
fechaInicio
——E P
,
——P Q
string
——R X
fechaFin
——Y a
,
——a b
[
——c d
System
——d j
.
——j k
Web
——k n
.
——n o
Http
——o s
.
——s t
FromUri
——t {
]
——{ |
int——} Ä
[——Ä Å
]——Å Ç!
idsPuntosDeVentas——É î
)——î ï
{
““ 	
DateTime
”” 

fechaDesde
”” 
=
””  !
DateTimeUtil
””" .
.
””. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
””/ Z
(
””Z [
fechaInicio
””[ f
)
””f g
;
””g h
DateTime
‘‘ 

fechaHasta
‘‘ 
=
‘‘  !
DateTimeUtil
‘‘" .
.
‘‘. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
‘‘/ Z
(
‘‘Z [
fechaFin
‘‘[ c
)
‘‘c d
;
‘‘d e
List
ŸŸ 
<
ŸŸ M
?Resumen_Transaccion_Venta_PorConceptoBasico_Y_ConceptoDeNegocio
ŸŸ P
>
ŸŸP Q,
ventasConfirmadasYTransmididas
ŸŸR p
=
ŸŸq r
operacionLogicaŸŸs Ç
.ŸŸÇ ÉH
8ObtenerOrdenesDeVentaPorConceptoTransferidasYConfirmadasŸŸÉ ª
(ŸŸª º!
idsPuntosDeVentasŸŸº Õ
,ŸŸÕ Œ

fechaDesdeŸŸœ Ÿ
,ŸŸŸ ⁄

fechaHastaŸŸ€ Â
)ŸŸÂ Ê
;ŸŸÊ Á
List
⁄⁄ 
<
⁄⁄ M
?Resumen_Transaccion_Venta_PorConceptoBasico_Y_ConceptoDeNegocio
⁄⁄ P
>
⁄⁄P Q
ventasInvalidadas
⁄⁄R c
=
⁄⁄d e
operacionLogica
⁄⁄f u
.
⁄⁄u v:
+ObtenerOrdenesDeVentaPorConceptoInvalidadas⁄⁄v °
(⁄⁄° ¢!
idsPuntosDeVentas⁄⁄¢ ≥
,⁄⁄≥ ¥

fechaDesde⁄⁄µ ø
,⁄⁄ø ¿

fechaHasta⁄⁄¡ À
)⁄⁄À Ã
;⁄⁄Ã Õ
string
›› %
_nombresCentrosAtencion
›› *
=
››+ ,
$str
››- /
;
››/ 0
foreach
ﬂﬂ 
(
ﬂﬂ 
var
ﬂﬂ 
item
ﬂﬂ 
in
ﬂﬂ  
idsPuntosDeVentas
ﬂﬂ! 2
)
ﬂﬂ2 3
{
‡‡ 
string
·· #
_nombreCentroAtencion
·· ,
=
··- .$
centroDeAtencionLogica
··/ E
.
··E F-
ObtenerNombreDeCentroDeAtencion
··F e
(
··e f
item
··f j
)
··j k
;
··k l%
_nombresCentrosAtencion
‚‚ '
+=
‚‚( *
$str
‚‚+ 1
+
‚‚2 3#
_nombreCentroAtencion
‚‚4 I
;
‚‚I J
}
„„ 
var
ÂÂ 
	rptviewer
ÂÂ 
=
ÂÂ 
new
ÂÂ 
ReportViewer
ÂÂ  ,
(
ÂÂ, -
)
ÂÂ- .
;
ÂÂ. /
ReportParameter
ÊÊ !
parametroFechaDesde
ÊÊ /
=
ÊÊ0 1
new
ÊÊ2 5
ReportParameter
ÊÊ6 E
(
ÊÊE F
$str
ÊÊF R
,
ÊÊR S

fechaDesde
ÊÊT ^
.
ÊÊ^ _
ToString
ÊÊ_ g
(
ÊÊg h
)
ÊÊh i
)
ÊÊi j
;
ÊÊj k
ReportParameter
ÁÁ !
parametroFechaHasta
ÁÁ /
=
ÁÁ0 1
new
ÁÁ2 5
ReportParameter
ÁÁ6 E
(
ÁÁE F
$str
ÁÁF R
,
ÁÁR S

fechaHasta
ÁÁT ^
.
ÁÁ^ _
ToString
ÁÁ_ g
(
ÁÁg h
)
ÁÁh i
)
ÁÁi j
;
ÁÁj k
ReportParameter
ËË 
nombreDeSede
ËË (
=
ËË) *
new
ËË+ .
ReportParameter
ËË/ >
(
ËË> ?
$str
ËË? K
,
ËËK L
ObtenerSede
ËËM X
(
ËËX Y
)
ËËY Z
.
ËËZ [
Nombre
ËË[ a
)
ËËa b
;
ËËb c
ReportParameter
ÈÈ "
nombreCentroAtencion
ÈÈ 0
=
ÈÈ1 2
new
ÈÈ3 6
ReportParameter
ÈÈ7 F
(
ÈÈF G
$str
ÈÈG ]
,
ÈÈ] ^%
_nombresCentrosAtencion
ÈÈ_ v
)
ÈÈv w
;
ÈÈw x6
(EstablecimientoComercialExtendidoConLogo
ÎÎ 4
sede
ÎÎ5 9
=
ÎÎ: ;
ObtenerSede
ÎÎ< G
(
ÎÎG H
)
ÎÎH I
;
ÎÎI J
string
ÏÏ 

logoString
ÏÏ 
=
ÏÏ 
Convert
ÏÏ  '
.
ÏÏ' (
ToBase64String
ÏÏ( 6
(
ÏÏ6 7
sede
ÏÏ7 ;
.
ÏÏ; <
Logo
ÏÏ< @
,
ÏÏ@ A
$num
ÏÏB C
,
ÏÏC D
sede
ÏÏE I
.
ÏÏI J
Logo
ÏÏJ N
.
ÏÏN O
Length
ÏÏO U
)
ÏÏU V
;
ÏÏV W
ReportParameter
ÌÌ 
logoSede
ÌÌ $
=
ÌÌ% &
new
ÌÌ' *
ReportParameter
ÌÌ+ :
(
ÌÌ: ;
$str
ÌÌ; E
,
ÌÌE F

logoString
ÌÌG Q
)
ÌÌQ R
;
ÌÌR S
ReportParameter
ÔÔ 
empleadoSede
ÔÔ (
=
ÔÔ) *
new
ÔÔ+ .
ReportParameter
ÔÔ/ >
(
ÔÔ> ?
$str
ÔÔ? H
,
ÔÔH I
ProfileData
ÔÔJ U
(
ÔÔU V
)
ÔÔV W
.
ÔÔW X
Empleado
ÔÔX `
.
ÔÔ` a
NombresYApellidos
ÔÔa r
)
ÔÔr s
;
ÔÔs t
DateTime
ÒÒ 
fechaActual
ÒÒ  
=
ÒÒ! "
DateTimeUtil
ÒÒ" .
.
ÒÒ. /
FechaActual
ÒÒ/ :
(
ÒÒ: ;
)
ÒÒ; <
;
ÒÒ< =
ReportParameter
ÚÚ  
fechaActualSistema
ÚÚ .
=
ÚÚ/ 0
new
ÚÚ1 4
ReportParameter
ÚÚ5 D
(
ÚÚD E
$str
ÚÚE R
,
ÚÚR S
fechaActual
ÚÚT _
.
ÚÚ_ `
ToString
ÚÚ` h
(
ÚÚh i
)
ÚÚi j
)
ÚÚj k
;
ÚÚk l
	rptviewer
ÙÙ 
.
ÙÙ 
LocalReport
ÙÙ !
.
ÙÙ! "

ReportPath
ÙÙ" ,
=
ÙÙ- .
Request
ÙÙ/ 6
.
ÙÙ6 7
MapPath
ÙÙ7 >
(
ÙÙ> ?
Request
ÙÙ? F
.
ÙÙF G
ApplicationPath
ÙÙG V
)
ÙÙV W
+
ÙÙX Y
$strÙÙZ ê
;ÙÙê ë
	rptviewer
ıı 
.
ıı 
LocalReport
ıı !
.
ıı! "
SetParameters
ıı" /
(
ıı/ 0
new
ıı0 3
ReportParameter
ıı4 C
[
ııC D
]
ııD E
{
ııF G!
parametroFechaDesde
ııH [
,
ıı[ \!
parametroFechaHasta
ıı] p
,
ııp q
nombreDeSede
ıır ~
,
ıı~ $
nombreCentroAtencionııÄ î
,ııî ï
logoSedeııñ û
,ııû ü
empleadoSedeıı† ¨
,ıı¨ ≠"
fechaActualSistemaııÆ ¿
}ıı¡ ¬
)ıı¬ √
;ıı√ ƒ
ReportDataSource
˜˜ -
rptVentasConfirmadasTransmitida
˜˜ <
=
˜˜= >
new
˜˜? B
ReportDataSource
˜˜C S
(
˜˜S T
$str
˜˜T m
,
˜˜m n-
ventasConfirmadasYTransmididas˜˜o ç
)˜˜ç é
;˜˜é è
ReportDataSource
¯¯ "
rptVentasInvalidadas
¯¯ 1
=
¯¯2 3
new
¯¯4 7
ReportDataSource
¯¯8 H
(
¯¯H I
$str
¯¯I b
,
¯¯b c
ventasInvalidadas
¯¯d u
)
¯¯u v
;
¯¯v w
	rptviewer
˙˙ 
.
˙˙ 
ProcessingMode
˙˙ $
=
˙˙% &
ProcessingMode
˙˙' 5
.
˙˙5 6
Local
˙˙6 ;
;
˙˙; <
	rptviewer
˚˚ 
.
˚˚ 
LocalReport
˚˚ !
.
˚˚! "
DataSources
˚˚" -
.
˚˚- .
Add
˚˚. 1
(
˚˚1 2-
rptVentasConfirmadasTransmitida
˚˚2 Q
)
˚˚Q R
;
˚˚R S
	rptviewer
¸¸ 
.
¸¸ 
LocalReport
¸¸ !
.
¸¸! "
DataSources
¸¸" -
.
¸¸- .
Add
¸¸. 1
(
¸¸1 2"
rptVentasInvalidadas
¸¸2 F
)
¸¸F G
;
¸¸G H
	rptviewer
˝˝ 
.
˝˝ !
SizeToReportContent
˝˝ )
=
˝˝* +
true
˝˝, 0
;
˝˝0 1
	rptviewer
˛˛ 
.
˛˛ 
Width
˛˛ 
=
˛˛ 
Unit
˛˛ "
.
˛˛" #

Percentage
˛˛# -
(
˛˛- .
$num
˛˛. 1
)
˛˛1 2
;
˛˛2 3
	rptviewer
ˇˇ 
.
ˇˇ 
Height
ˇˇ 
=
ˇˇ 
Unit
ˇˇ #
.
ˇˇ# $

Percentage
ˇˇ$ .
(
ˇˇ. /
$num
ˇˇ/ 2
)
ˇˇ2 3
;
ˇˇ3 4
ViewBag
ÄÄ 
.
ÄÄ 
ReportViewer
ÄÄ  
=
ÄÄ! "
	rptviewer
ÄÄ# ,
;
ÄÄ, -
return
ÅÅ 
View
ÅÅ 
(
ÅÅ 
$str
ÅÅ -
)
ÅÅ- .
;
ÅÅ. /
}
ÇÇ 	
public
ââ 
ActionResult
ââ <
.ReporteDeVentaDeLosPuntosDeVentaPorComprobante
ââ J
(
ââJ K
string
ââK Q
fechaInicio
ââR ]
,
ââ] ^
string
ââ_ e
fechaFin
ââf n
,
âân o
[
ââp q
System
ââq w
.
ââw x
Web
ââx {
.
ââ{ |
Httpââ| Ä
.ââÄ Å
FromUriââÅ à
]ââà â
intââä ç
[ââç é
]ââé è!
idsPuntosDeVentasââê °
)ââ° ¢
{
ää 	6
(EstablecimientoComercialExtendidoConLogo
ãã 4
sede
ãã5 9
=
ãã: ;
ObtenerSede
ãã< G
(
ããG H
)
ããH I
;
ããI J
DateTime
åå 

fechaDesde
åå 
=
åå  !
DateTimeUtil
åå" .
.
åå. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
åå/ Z
(
ååZ [
fechaInicio
åå[ f
)
ååf g
;
ååg h
DateTime
çç 

fechaHasta
çç 
=
çç  !
DateTimeUtil
çç" .
.
çç. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
çç/ Z
(
ççZ [
fechaFin
çç[ c
)
ççc d
;
ççd e
var
èè 
	rptviewer
èè 
=
èè C
5GenerarReporteDeVentaDeLosPuntosDeVentaPorComprobante
èè Q
(
èèQ R
sede
èèR V
,
èèV W

fechaDesde
èèX b
,
èèb c

fechaHasta
èèd n
,
èèn o 
idsPuntosDeVentasèèp Å
,èèÅ Ç
trueèèÉ á
)èèá à
;èèà â
ViewBag
êê 
.
êê 
ReportViewer
êê  
=
êê! "
	rptviewer
êê# ,
;
êê, -
return
ëë 
View
ëë 
(
ëë 
$str
ëë -
)
ëë- .
;
ëë. /
}
íí 	
public
ùù 
ReportViewer
ùù C
5GenerarReporteDeVentaDeLosPuntosDeVentaPorComprobante
ùù Q
(
ùùQ R6
(EstablecimientoComercialExtendidoConLogo
ùùR z
sede
ùù{ 
,ùù Ä
DateTimeùùÅ â

fechaDesdeùùä î
,ùùî ï
DateTimeùùñ û

fechaHastaùùü ©
,ùù© ™
intùù´ Æ
[ùùÆ Ø
]ùùØ ∞!
idsPuntosDeVentasùù± ¬
,ùù¬ √
boolùùƒ »
fromRequestùù… ‘
)ùù‘ ’
{
ûû 	
List
üü 
<
üü ?
1TransaccionAgrupadoPorSerieConNumeracionInicioFin
üü B
>
üüB C
ventasConfirmada
üüD T
=
üüU V
operacionLogica
üüW f
.
üüf gS
DObtenerResumenDeComprobantesConfirmadosDeOperacionesDeVentasPorSerieüüg ´
(üü´ ¨!
idsPuntosDeVentasüü¨ Ω
,üüΩ æ

fechaDesdeüüø …
,üü…  

fechaHastaüüÀ ’
)üü’ ÷
;üü÷ ◊
List
†† 
<
†† A
3TransaccionAgrupadoPorSerieConNumeracionConcatenada
†† D
>
††D E
ventasInvalidada
††F V
=
††W X
operacionLogica
††Y h
.
††h iS
DObtenerResumenDeComprobantesInvalidadosDeOperacionesDeVentasPorSerie††i ≠
(††≠ Æ!
idsPuntosDeVentas††Æ ø
,††ø ¿

fechaDesde††¡ À
,††À Ã

fechaHasta††Õ ◊
)††◊ ÿ
;††ÿ Ÿ
string
¢¢ %
_nombresCentrosAtencion
¢¢ *
=
¢¢+ ,
$str
¢¢- /
;
¢¢/ 0
foreach
§§ 
(
§§ 
var
§§ 
item
§§ 
in
§§  
idsPuntosDeVentas
§§! 2
)
§§2 3
{
•• 
string
¶¶ #
_nombreCentroAtencion
¶¶ ,
=
¶¶- .$
centroDeAtencionLogica
¶¶/ E
.
¶¶E F-
ObtenerNombreDeCentroDeAtencion
¶¶F e
(
¶¶e f
item
¶¶f j
)
¶¶j k
;
¶¶k l%
_nombresCentrosAtencion
ßß '
+=
ßß( *
$str
ßß+ 1
+
ßß2 3#
_nombreCentroAtencion
ßß4 I
;
ßßI J
}
®® 
ReportParameter
™™ !
parametroFechaDesde
™™ /
=
™™0 1
new
™™2 5
ReportParameter
™™6 E
(
™™E F
$str
™™F R
,
™™R S

fechaDesde
™™T ^
.
™™^ _
ToString
™™_ g
(
™™g h
)
™™h i
)
™™i j
;
™™j k
ReportParameter
´´ !
parametroFechaHasta
´´ /
=
´´0 1
new
´´2 5
ReportParameter
´´6 E
(
´´E F
$str
´´F R
,
´´R S

fechaHasta
´´T ^
.
´´^ _
ToString
´´_ g
(
´´g h
)
´´h i
)
´´i j
;
´´j k
ReportParameter
¨¨ 
nombreEmpresa
¨¨ )
=
¨¨* +
new
¨¨, /
ReportParameter
¨¨0 ?
(
¨¨? @
$str
¨¨@ L
,
¨¨L M
sede
¨¨N R
.
¨¨R S
Nombre
¨¨S Y
)
¨¨Y Z
;
¨¨Z [
ReportParameter
≠≠ "
nombreCentroAtencion
≠≠ 0
=
≠≠1 2
new
≠≠3 6
ReportParameter
≠≠7 F
(
≠≠F G
$str
≠≠G ]
,
≠≠] ^%
_nombresCentrosAtencion
≠≠_ v
)
≠≠v w
;
≠≠w x
string
ØØ 

logoString
ØØ 
=
ØØ 
Convert
ØØ  '
.
ØØ' (
ToBase64String
ØØ( 6
(
ØØ6 7
sede
ØØ7 ;
.
ØØ; <
Logo
ØØ< @
,
ØØ@ A
$num
ØØB C
,
ØØC D
sede
ØØE I
.
ØØI J
Logo
ØØJ N
.
ØØN O
Length
ØØO U
)
ØØU V
;
ØØV W
ReportParameter
∞∞ 
logoSede
∞∞ $
=
∞∞% &
new
∞∞' *
ReportParameter
∞∞+ :
(
∞∞: ;
$str
∞∞; E
,
∞∞E F

logoString
∞∞G Q
)
∞∞Q R
;
∞∞R S
ReportParameter
≤≤ 
empleadoSede
≤≤ (
=
≤≤) *
new
≤≤+ .
ReportParameter
≤≤/ >
(
≤≤> ?
$str
≤≤? H
,
≤≤H I
fromRequest
≤≤J U
?
≤≤V W
ProfileData
≤≤X c
(
≤≤c d
)
≤≤d e
.
≤≤e f
Empleado
≤≤f n
.
≤≤n o 
NombresYApellidos≤≤o Ä
:≤≤Å Ç
$str≤≤É Ü
)≤≤Ü á
;≤≤á à
DateTime
¥¥ 
fechaActual
¥¥  
=
¥¥! "
DateTimeUtil
¥¥" .
.
¥¥. /
FechaActual
¥¥/ :
(
¥¥: ;
)
¥¥; <
;
¥¥< =
ReportParameter
µµ  
fechaActualSistema
µµ .
=
µµ/ 0
new
µµ1 4
ReportParameter
µµ5 D
(
µµD E
$str
µµE R
,
µµR S
fechaActual
µµT _
.
µµ_ `
ToString
µµ` h
(
µµh i
)
µµi j
)
µµj k
;
µµk l
var
∑∑ 
	rptviewer
∑∑ 
=
∑∑ 
new
∑∑ 
ReportViewer
∑∑  ,
(
∑∑, -
)
∑∑- .
;
∑∑. /
string
∏∏ 
path
∏∏ 
=
∏∏ 
$str
∏∏ ^
;
∏∏^ _
	rptviewer
ππ 
.
ππ 
LocalReport
ππ !
.
ππ! "

ReportPath
ππ" ,
=
ππ- .
fromRequest
ππ/ :
?
ππ; <
Request
ππ= D
.
ππD E
MapPath
ππE L
(
ππL M
Request
ππM T
.
ππT U
ApplicationPath
ππU d
)
ππd e
+
ππf g
path
ππh l
:
ππm n!
HostingEnvironmentππo Å
.ππÅ Ç
MapPathππÇ â
(ππâ ä
pathππä é
)ππé è
;ππè ê
	rptviewer
∫∫ 
.
∫∫ 
LocalReport
∫∫ !
.
∫∫! "
SetParameters
∫∫" /
(
∫∫/ 0
new
∫∫0 3
ReportParameter
∫∫4 C
[
∫∫C D
]
∫∫D E
{
∫∫F G
nombreEmpresa
∫∫H U
,
∫∫U V"
nombreCentroAtencion
∫∫W k
,
∫∫k l"
parametroFechaDesde∫∫m Ä
,∫∫Ä Å#
parametroFechaHasta∫∫Ç ï
,∫∫ï ñ
empleadoSede∫∫ó £
,∫∫£ §"
fechaActualSistema∫∫• ∑
,∫∫∑ ∏
logoSede∫∫π ¡
}∫∫¬ √
)∫∫√ ƒ
;∫∫ƒ ≈
ReportDataSource
ºº %
rptdatasourceConfirmada
ºº 4
=
ºº5 6
new
ºº7 :
ReportDataSource
ºº; K
(
ººK L
$str
ººL _
,
ºº_ `
ventasConfirmada
ººa q
)
ººq r
;
ººr s
ReportDataSource
ΩΩ %
rptdatasourceInvalidada
ΩΩ 4
=
ΩΩ5 6
new
ΩΩ7 :
ReportDataSource
ΩΩ; K
(
ΩΩK L
$str
ΩΩL _
,
ΩΩ_ `
ventasInvalidada
ΩΩa q
)
ΩΩq r
;
ΩΩr s
	rptviewer
øø 
.
øø 
LocalReport
øø !
.
øø! "
DataSources
øø" -
.
øø- .
Add
øø. 1
(
øø1 2%
rptdatasourceConfirmada
øø2 I
)
øøI J
;
øøJ K
	rptviewer
¿¿ 
.
¿¿ 
LocalReport
¿¿ !
.
¿¿! "
DataSources
¿¿" -
.
¿¿- .
Add
¿¿. 1
(
¿¿1 2%
rptdatasourceInvalidada
¿¿2 I
)
¿¿I J
;
¿¿J K
	rptviewer
¬¬ 
.
¬¬ 
ProcessingMode
¬¬ $
=
¬¬% &
ProcessingMode
¬¬' 5
.
¬¬5 6
Local
¬¬6 ;
;
¬¬; <
	rptviewer
√√ 
.
√√ !
SizeToReportContent
√√ )
=
√√* +
true
√√, 0
;
√√0 1
	rptviewer
ƒƒ 
.
ƒƒ 
Width
ƒƒ 
=
ƒƒ 
Unit
ƒƒ "
.
ƒƒ" #

Percentage
ƒƒ# -
(
ƒƒ- .
$num
ƒƒ. 1
)
ƒƒ1 2
;
ƒƒ2 3
	rptviewer
≈≈ 
.
≈≈ 
Height
≈≈ 
=
≈≈ 
Unit
≈≈ #
.
≈≈# $

Percentage
≈≈$ .
(
≈≈. /
$num
≈≈/ 2
)
≈≈2 3
;
≈≈3 4
return
∆∆ 
	rptviewer
∆∆ 
;
∆∆ 
}
«« 	
public
   
ActionResult
   3
%ReporteDeVentaDeVendedoresPorConcepto
   A
(
  A B
string
  B H
fechaInicio
  I T
,
  T U
string
  V \
fechaFin
  ] e
,
  e f
[
  g h
System
  h n
.
  n o
Web
  o r
.
  r s
Http
  s w
.
  w x
FromUri
  x 
]   Ä
int  Å Ñ
[  Ñ Ö
]  Ö Ü
idsVendedor  á í
)  í ì
{
ÀÀ 	
DateTime
ÃÃ 

fechaDesde
ÃÃ 
=
ÃÃ  !
DateTimeUtil
ÃÃ" .
.
ÃÃ. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ÃÃ/ Z
(
ÃÃZ [
fechaInicio
ÃÃ[ f
)
ÃÃf g
;
ÃÃg h
DateTime
ÕÕ 

fechaHasta
ÕÕ 
=
ÕÕ  !
DateTimeUtil
ÕÕ" .
.
ÕÕ. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
ÕÕ/ Z
(
ÕÕZ [
fechaFin
ÕÕ[ c
)
ÕÕc d
;
ÕÕd e
List
œœ 
<
œœ +
ResumenTransaccionPorVendedor
œœ .
>
œœ. /&
resumenVentasConfirmadas
œœ0 H
=
œœI J
operacionLogica
œœK Z
.
œœZ [;
,ObtenerResumenDeVentasPorVendedorConfirmadasœœ[ á
(œœá à
idsVendedorœœà ì
,œœì î

fechaDesdeœœï ü
,œœü †

fechaHastaœœ° ´
)œœ´ ¨
;œœ¨ ≠
List
–– 
<
–– +
ResumenTransaccionPorVendedor
–– .
>
––. /&
resumenVentasInvalidadas
––0 H
=
––I J
operacionLogica
––K Z
.
––Z [;
,ObtenerResumenDeVentasPorVendedorInvalidadas––[ á
(––á à
idsVendedor––à ì
,––ì î

fechaDesde––ï ü
,––ü †

fechaHasta––° ´
)––´ ¨
;––¨ ≠
List
““ 
<
““ +
DetalleTransaccionPorVendedor
““ .
>
““. /
detalleConfirmado
““0 A
=
““B C
operacionLogica
““D S
.
““S T;
,ObtenerDetalleDeVentasPorVendedorConfirmadas““T Ä
(““Ä Å
idsVendedor““Å å
,““å ç

fechaDesde““é ò
,““ò ô

fechaHasta““ö §
)““§ •
;““• ¶
List
”” 
<
”” +
DetalleTransaccionPorVendedor
”” .
>
””. /
detalleInvalidado
””0 A
=
””B C
operacionLogica
””D S
.
””S T;
,ObtenerDetallaDeVentasPorVendedorInvalidadas””T Ä
(””Ä Å
idsVendedor””Å å
,””å ç

fechaDesde””é ò
,””ò ô

fechaHasta””ö §
)””§ •
;””• ¶
var
÷÷ 
	rptviewer
÷÷ 
=
÷÷ 
new
÷÷ 
ReportViewer
÷÷  ,
(
÷÷, -
)
÷÷- .
;
÷÷. /
ReportParameter
ÿÿ !
parametroFechaDesde
ÿÿ /
=
ÿÿ0 1
new
ÿÿ2 5
ReportParameter
ÿÿ6 E
(
ÿÿE F
$str
ÿÿF R
,
ÿÿR S

fechaDesde
ÿÿT ^
.
ÿÿ^ _
ToString
ÿÿ_ g
(
ÿÿg h
)
ÿÿh i
)
ÿÿi j
;
ÿÿj k
ReportParameter
ŸŸ !
parametroFechaHasta
ŸŸ /
=
ŸŸ0 1
new
ŸŸ2 5
ReportParameter
ŸŸ6 E
(
ŸŸE F
$str
ŸŸF R
,
ŸŸR S

fechaHasta
ŸŸT ^
.
ŸŸ^ _
ToString
ŸŸ_ g
(
ŸŸg h
)
ŸŸh i
)
ŸŸi j
;
ŸŸj k
ReportParameter
⁄⁄ 

nombreSede
⁄⁄ &
=
⁄⁄' (
new
⁄⁄) ,
ReportParameter
⁄⁄- <
(
⁄⁄< =
$str
⁄⁄= I
,
⁄⁄I J
ObtenerSede
⁄⁄K V
(
⁄⁄V W
)
⁄⁄W X
.
⁄⁄X Y
Nombre
⁄⁄Y _
)
⁄⁄_ `
;
⁄⁄` a
ReportParameter
€€ "
nombreCentroAtencion
€€ 0
=
€€1 2
new
€€3 6
ReportParameter
€€7 F
(
€€F G
$str
€€G ]
,
€€] ^
ProfileData
€€_ j
(
€€j k
)
€€k l
.
€€l m1
"NombreCentroDeAtencionSeleccionado€€m è
)€€è ê
;€€ê ë6
(EstablecimientoComercialExtendidoConLogo
›› 4
sede
››5 9
=
››: ;
ObtenerSede
››< G
(
››G H
)
››H I
;
››I J
string
ﬁﬁ 

logoString
ﬁﬁ 
=
ﬁﬁ 
Convert
ﬁﬁ  '
.
ﬁﬁ' (
ToBase64String
ﬁﬁ( 6
(
ﬁﬁ6 7
sede
ﬁﬁ7 ;
.
ﬁﬁ; <
Logo
ﬁﬁ< @
,
ﬁﬁ@ A
$num
ﬁﬁB C
,
ﬁﬁC D
sede
ﬁﬁE I
.
ﬁﬁI J
Logo
ﬁﬁJ N
.
ﬁﬁN O
Length
ﬁﬁO U
)
ﬁﬁU V
;
ﬁﬁV W
ReportParameter
ﬂﬂ 
logoSede
ﬂﬂ $
=
ﬂﬂ% &
new
ﬂﬂ' *
ReportParameter
ﬂﬂ+ :
(
ﬂﬂ: ;
$str
ﬂﬂ; E
,
ﬂﬂE F

logoString
ﬂﬂG Q
)
ﬂﬂQ R
;
ﬂﬂR S
DateTime
·· 
fechaActual
··  
=
··! "
DateTimeUtil
··" .
.
··. /
FechaActual
··/ :
(
··: ;
)
··; <
;
··< =
ReportParameter
‚‚  
fechaActualSistema
‚‚ .
=
‚‚/ 0
new
‚‚1 4
ReportParameter
‚‚5 D
(
‚‚D E
$str
‚‚E R
,
‚‚R S
fechaActual
‚‚T _
.
‚‚_ `
ToString
‚‚` h
(
‚‚h i
)
‚‚i j
)
‚‚j k
;
‚‚k l
ReportParameter
‰‰ 
empleadoSede
‰‰ (
=
‰‰) *
new
‰‰+ .
ReportParameter
‰‰/ >
(
‰‰> ?
$str
‰‰? H
,
‰‰H I
ProfileData
‰‰J U
(
‰‰U V
)
‰‰V W
.
‰‰W X
Empleado
‰‰X `
.
‰‰` a
NombresYApellidos
‰‰a r
)
‰‰r s
;
‰‰s t
	rptviewer
ÊÊ 
.
ÊÊ 
LocalReport
ÊÊ !
.
ÊÊ! "

ReportPath
ÊÊ" ,
=
ÊÊ- .
Request
ÊÊ/ 6
.
ÊÊ6 7
MapPath
ÊÊ7 >
(
ÊÊ> ?
Request
ÊÊ? F
.
ÊÊF G
ApplicationPath
ÊÊG V
)
ÊÊV W
+
ÊÊX Y
$strÊÊZ ¶
;ÊÊ¶ ß
	rptviewer
ÁÁ 
.
ÁÁ 
LocalReport
ÁÁ !
.
ÁÁ! "
SetParameters
ÁÁ" /
(
ÁÁ/ 0
new
ÁÁ0 3
ReportParameter
ÁÁ4 C
[
ÁÁC D
]
ÁÁD E
{
ÁÁF G!
parametroFechaDesde
ÁÁH [
,
ÁÁ[ \!
parametroFechaHasta
ÁÁ] p
,
ÁÁp q

nombreSede
ÁÁr |
,
ÁÁ| }#
nombreCentroAtencionÁÁ~ í
,ÁÁí ì
logoSedeÁÁî ú
,ÁÁú ù"
fechaActualSistemaÁÁû ∞
,ÁÁ∞ ±
empleadoSedeÁÁ≤ æ
}ÁÁø ¿
)ÁÁ¿ ¡
;ÁÁ¡ ¬
ReportDataSource
ÈÈ 3
%rptdatasourceVentasResumenConfirmadas
ÈÈ B
=
ÈÈC D
new
ÈÈE H
ReportDataSource
ÈÈI Y
(
ÈÈY Z
$str
ÈÈZ u
,
ÈÈu v'
resumenVentasConfirmadasÈÈw è
)ÈÈè ê
;ÈÈê ë
ReportDataSource
ÍÍ 3
%rptdatasourceVentasResumenInvalidadas
ÍÍ B
=
ÍÍC D
new
ÍÍE H
ReportDataSource
ÍÍI Y
(
ÍÍY Z
$str
ÍÍZ u
,
ÍÍu v'
resumenVentasInvalidadasÍÍw è
)ÍÍè ê
;ÍÍê ë
ReportDataSource
ÌÌ 3
%rptdatasourceVentasDetalleConfirmadas
ÌÌ B
=
ÌÌC D
new
ÌÌE H
ReportDataSource
ÌÌI Y
(
ÌÌY Z
$str
ÌÌZ u
,
ÌÌu v 
detalleConfirmadoÌÌw à
)ÌÌà â
;ÌÌâ ä
ReportDataSource
ÓÓ 3
%rptdatasourceVentasDetalleInvalidadas
ÓÓ B
=
ÓÓC D
new
ÓÓE H
ReportDataSource
ÓÓI Y
(
ÓÓY Z
$str
ÓÓZ u
,
ÓÓu v 
detalleInvalidadoÓÓw à
)ÓÓà â
;ÓÓâ ä
	rptviewer
ÒÒ 
.
ÒÒ 
ProcessingMode
ÒÒ $
=
ÒÒ% &
ProcessingMode
ÒÒ' 5
.
ÒÒ5 6
Local
ÒÒ6 ;
;
ÒÒ; <
	rptviewer
ÚÚ 
.
ÚÚ 
LocalReport
ÚÚ !
.
ÚÚ! "
DataSources
ÚÚ" -
.
ÚÚ- .
Add
ÚÚ. 1
(
ÚÚ1 23
%rptdatasourceVentasResumenConfirmadas
ÚÚ2 W
)
ÚÚW X
;
ÚÚX Y
	rptviewer
ÛÛ 
.
ÛÛ 
LocalReport
ÛÛ !
.
ÛÛ! "
DataSources
ÛÛ" -
.
ÛÛ- .
Add
ÛÛ. 1
(
ÛÛ1 23
%rptdatasourceVentasResumenInvalidadas
ÛÛ2 W
)
ÛÛW X
;
ÛÛX Y
	rptviewer
ıı 
.
ıı 
LocalReport
ıı !
.
ıı! "
DataSources
ıı" -
.
ıı- .
Add
ıı. 1
(
ıı1 23
%rptdatasourceVentasDetalleConfirmadas
ıı2 W
)
ııW X
;
ııX Y
	rptviewer
ˆˆ 
.
ˆˆ 
LocalReport
ˆˆ !
.
ˆˆ! "
DataSources
ˆˆ" -
.
ˆˆ- .
Add
ˆˆ. 1
(
ˆˆ1 23
%rptdatasourceVentasDetalleInvalidadas
ˆˆ2 W
)
ˆˆW X
;
ˆˆX Y
	rptviewer
¯¯ 
.
¯¯ !
SizeToReportContent
¯¯ )
=
¯¯* +
true
¯¯, 0
;
¯¯0 1
	rptviewer
˘˘ 
.
˘˘ 
Width
˘˘ 
=
˘˘ 
Unit
˘˘ "
.
˘˘" #

Percentage
˘˘# -
(
˘˘- .
$num
˘˘. 1
)
˘˘1 2
;
˘˘2 3
	rptviewer
˙˙ 
.
˙˙ 
Height
˙˙ 
=
˙˙ 
Unit
˙˙ #
.
˙˙# $

Percentage
˙˙$ .
(
˙˙. /
$num
˙˙/ 2
)
˙˙2 3
;
˙˙3 4
ViewBag
¸¸ 
.
¸¸ 
ReportViewer
¸¸  
=
¸¸! "
	rptviewer
¸¸# ,
;
¸¸, -
return
˝˝ 
View
˝˝ 
(
˝˝ 
$str
˝˝ -
)
˝˝- .
;
˝˝. /
}
ˇˇ 	
public
ÇÇ 
ActionResult
ÇÇ K
=ReporteDeVentaDeLosPuntosDeVentaPorSerieDeComprobanteYFamilia
ÇÇ Y
(
ÇÇY Z
string
ÇÇZ `
fechaInicio
ÇÇa l
,
ÇÇl m
string
ÇÇn t
fechaFin
ÇÇu }
,
ÇÇ} ~
[ÇÇ Ä
SystemÇÇÄ Ü
.ÇÇÜ á
WebÇÇá ä
.ÇÇä ã
HttpÇÇã è
.ÇÇè ê
FromUriÇÇê ó
]ÇÇó ò
intÇÇô ú
[ÇÇú ù
]ÇÇù û!
idsPuntosDeVentasÇÇü ∞
)ÇÇ∞ ±
{
ÉÉ 	
DateTime
ÖÖ 

fechaDesde
ÖÖ 
=
ÖÖ  !
DateTimeUtil
ÖÖ" .
.
ÖÖ. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ÖÖ/ Z
(
ÖÖZ [
fechaInicio
ÖÖ[ f
)
ÖÖf g
;
ÖÖg h
DateTime
ÜÜ 

fechaHasta
ÜÜ 
=
ÜÜ  !
DateTimeUtil
ÜÜ" .
.
ÜÜ. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
ÜÜ/ Z
(
ÜÜZ [
fechaFin
ÜÜ[ c
)
ÜÜc d
;
ÜÜd e
List
àà 
<
àà =
/TransaccionPorSerieDeComprobanteYConceptoBasico
àà @
>
àà@ A
ventasConfirmada
ààB R
=
ààS T
operacionLogica
ààU d
.
ààd eG
8ObtenerComprobanteVentaPorSerieYConceptoBasicoConfirmadoààe ù
(ààù û!
idsPuntosDeVentasààû Ø
,ààØ ∞

fechaDesdeàà± ª
,ààª º

fechaHastaààΩ «
)àà« »
;àà» …
List
ââ 
<
ââ =
/TransaccionPorSerieDeComprobanteYConceptoBasico
ââ @
>
ââ@ A
ventasInvalidada
ââB R
=
ââS T
operacionLogica
ââU d
.
ââd eB
3ObtenerComprobantePorSerieYConceptoBasicoInvalidadoââe ò
(ââò ô!
idsPuntosDeVentasââô ™
,ââ™ ´

fechaDesdeââ¨ ∂
,ââ∂ ∑

fechaHastaââ∏ ¬
)ââ¬ √
;ââ√ ƒ
string
ãã %
_nombresCentrosAtencion
ãã *
=
ãã+ ,
$str
ãã- /
;
ãã/ 0
foreach
çç 
(
çç 
var
çç 
item
çç 
in
çç  
idsPuntosDeVentas
çç! 2
)
çç2 3
{
éé 
string
èè #
_nombreCentroAtencion
èè ,
=
èè- .$
centroDeAtencionLogica
èè/ E
.
èèE F-
ObtenerNombreDeCentroDeAtencion
èèF e
(
èèe f
item
èèf j
)
èèj k
;
èèk l%
_nombresCentrosAtencion
êê '
+=
êê( *
$str
êê+ 1
+
êê2 3#
_nombreCentroAtencion
êê4 I
;
êêI J
}
ëë 6
(EstablecimientoComercialExtendidoConLogo
íí 4
sede
íí5 9
=
íí: ;
ObtenerSede
íí< G
(
ííG H
)
ííH I
;
ííI J
ReportParameter
îî 
nombreEmpresa
îî )
=
îî* +
new
îî, /
ReportParameter
îî0 ?
(
îî? @
$str
îî@ L
,
îîL M
sede
îîN R
.
îîR S
Nombre
îîS Y
)
îîY Z
;
îîZ [
ReportParameter
ïï "
nombreCentroAtencion
ïï 0
=
ïï1 2
new
ïï3 6
ReportParameter
ïï7 F
(
ïïF G
$str
ïïG ]
,
ïï] ^%
_nombresCentrosAtencion
ïï_ v
)
ïïv w
;
ïïw x
ReportParameter
ññ 

FechaDesde
ññ &
=
ññ' (
new
ññ) ,
ReportParameter
ññ- <
(
ññ< =
$str
ññ= I
,
ññI J

fechaDesde
ññK U
.
ññU V
ToString
ññV ^
(
ññ^ _
)
ññ_ `
)
ññ` a
;
ñña b
ReportParameter
óó 

FechaHasta
óó &
=
óó' (
new
óó) ,
ReportParameter
óó- <
(
óó< =
$str
óó= I
,
óóI J

fechaHasta
óóK U
.
óóU V
ToString
óóV ^
(
óó^ _
)
óó_ `
)
óó` a
;
óóa b
string
ôô 

logoString
ôô 
=
ôô 
Convert
ôô  '
.
ôô' (
ToBase64String
ôô( 6
(
ôô6 7
sede
ôô7 ;
.
ôô; <
Logo
ôô< @
,
ôô@ A
$num
ôôB C
,
ôôC D
sede
ôôE I
.
ôôI J
Logo
ôôJ N
.
ôôN O
Length
ôôO U
)
ôôU V
;
ôôV W
ReportParameter
öö 
logoSede
öö $
=
öö% &
new
öö' *
ReportParameter
öö+ :
(
öö: ;
$str
öö; E
,
ööE F

logoString
ööG Q
)
ööQ R
;
ööR S
DateTime
úú 
fechaActual
úú  
=
úú! "
DateTimeUtil
úú" .
.
úú. /
FechaActual
úú/ :
(
úú: ;
)
úú; <
;
úú< =
ReportParameter
ùù  
fechaActualSistema
ùù .
=
ùù/ 0
new
ùù1 4
ReportParameter
ùù5 D
(
ùùD E
$str
ùùE R
,
ùùR S
fechaActual
ùùT _
.
ùù_ `
ToString
ùù` h
(
ùùh i
)
ùùi j
)
ùùj k
;
ùùk l
ReportParameter
üü 
empleadoSede
üü (
=
üü) *
new
üü+ .
ReportParameter
üü/ >
(
üü> ?
$str
üü? H
,
üüH I
ProfileData
üüJ U
(
üüU V
)
üüV W
.
üüW X
Empleado
üüX `
.
üü` a
NombresYApellidos
üüa r
)
üür s
;
üüs t
var
°° 
	rptviewer
°° 
=
°° 
new
°° 
ReportViewer
°°  ,
(
°°, -
)
°°- .
;
°°. /
	rptviewer
¢¢ 
.
¢¢ 
ProcessingMode
¢¢ $
=
¢¢% &
ProcessingMode
¢¢' 5
.
¢¢5 6
Local
¢¢6 ;
;
¢¢; <
	rptviewer
££ 
.
££ 
LocalReport
££ !
.
££! "

ReportPath
££" ,
=
££- .
Request
££/ 6
.
££6 7
MapPath
££7 >
(
££> ?
Request
££? F
.
££F G
ApplicationPath
££G V
)
££V W
+
££X Y
$str££Z ¢
;££¢ £
	rptviewer
§§ 
.
§§ 
LocalReport
§§ !
.
§§! "
SetParameters
§§" /
(
§§/ 0
new
§§0 3
ReportParameter
§§4 C
[
§§C D
]
§§D E
{
§§F G
nombreEmpresa
§§H U
,
§§U V"
nombreCentroAtencion
§§W k
,
§§k l

FechaDesde
§§m w
,
§§w x

FechaHasta§§y É
,§§É Ñ
logoSede§§Ö ç
,§§ç é
empleadoSede§§è õ
,§§õ ú"
fechaActualSistema§§ù Ø
}§§∞ ±
)§§± ≤
;§§≤ ≥
ReportDataSource
¶¶ %
rptdatasourceConfirmada
¶¶ 4
=
¶¶5 6
new
¶¶7 :
ReportDataSource
¶¶; K
(
¶¶K L
$str
¶¶L _
,
¶¶_ `
ventasConfirmada
¶¶a q
)
¶¶q r
;
¶¶r s
ReportDataSource
ßß %
rptdatasourceInvalidada
ßß 4
=
ßß5 6
new
ßß7 :
ReportDataSource
ßß; K
(
ßßK L
$str
ßßL _
,
ßß_ `
ventasInvalidada
ßßa q
)
ßßq r
;
ßßr s
	rptviewer
©© 
.
©© 
LocalReport
©© !
.
©©! "
DataSources
©©" -
.
©©- .
Add
©©. 1
(
©©1 2%
rptdatasourceConfirmada
©©2 I
)
©©I J
;
©©J K
	rptviewer
™™ 
.
™™ 
LocalReport
™™ !
.
™™! "
DataSources
™™" -
.
™™- .
Add
™™. 1
(
™™1 2%
rptdatasourceInvalidada
™™2 I
)
™™I J
;
™™J K
	rptviewer
¨¨ 
.
¨¨ !
SizeToReportContent
¨¨ )
=
¨¨* +
true
¨¨, 0
;
¨¨0 1
ViewBag
≠≠ 
.
≠≠ 
ReportViewer
≠≠  
=
≠≠! "
	rptviewer
≠≠# ,
;
≠≠, -
return
ÆÆ 
View
ÆÆ 
(
ÆÆ 
$str
ÆÆ -
)
ÆÆ- .
;
ÆÆ. /
}
ØØ 	
public
≤≤ 
ActionResult
≤≤ L
>ReporteDeVentaDeLosPuntosDeVentaPorSerieDeComprobanteYConcepto
≤≤ Z
(
≤≤Z [
string
≤≤[ a
fechaInicio
≤≤b m
,
≤≤m n
string
≤≤o u
fechaFin
≤≤v ~
,
≤≤~ 
[≤≤Ä Å
System≤≤Å á
.≤≤á à
Web≤≤à ã
.≤≤ã å
Http≤≤å ê
.≤≤ê ë
FromUri≤≤ë ò
]≤≤ò ô
int≤≤ö ù
idPuntoDeVenta≤≤û ¨
,≤≤¨ ≠
string≤≤Æ ¥"
nombrePuntoDeVenta≤≤µ «
)≤≤« »
{
≥≥ 	
DateTime
µµ 

fechaDesde
µµ 
=
µµ  !
DateTimeUtil
µµ" .
.
µµ. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
µµ/ Z
(
µµZ [
fechaInicio
µµ[ f
)
µµf g
;
µµg h
DateTime
∂∂ 

fechaHasta
∂∂ 
=
∂∂  !
DateTimeUtil
∂∂" .
.
∂∂. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
∂∂/ Z
(
∂∂Z [
fechaFin
∂∂[ c
)
∂∂c d
;
∂∂d e
List
ππ 
<
ππ >
0Resumen_Transaccion_Por_Serie_y_Concepto_Negocio
ππ A
>
ππA B<
.ResumenPorSerieYConceptoTransmitidoYConfirmado
ππC q
=
ππr s
operacionLogicaππt É
.ππÉ ÑF
6ObtenerResumenVentasConSerieYConceptoNegocioConfirmadaππÑ ∫
(ππ∫ ª
idPuntoDeVentaππª …
,ππ…  

fechaDesdeππÀ ’
,ππ’ ÷

fechaHastaππ◊ ·
)ππ· ‚
;ππ‚ „
List
∫∫ 
<
∫∫ <
.Resumen_Transaccion_Por_Serie_y_ConceptoBasico
∫∫ ?
>
∫∫? @A
3ResumenPorSerieYConeptoBasicoTransmitidoYConfirmado
∫∫A t
=
∫∫u v
operacionLogica∫∫w Ü
.∫∫Ü áQ
AObtenerResumenVentasConSerieYConceptoBasicoConfirmadaYTransmitida∫∫á »
(∫∫» …
idPuntoDeVenta∫∫… ◊
,∫∫◊ ÿ

fechaDesde∫∫Ÿ „
,∫∫„ ‰

fechaHasta∫∫Â Ô
)∫∫Ô 
;∫∫ Ò
List
ªª 
<
ªª >
0Resumen_Transaccion_Por_Serie_y_Concepto_Negocio
ªª A
>
ªªA B/
!ResumenPorSerieYConceptoInvalidos
ªªC d
=
ªªe f
operacionLogica
ªªg v
.
ªªv wF
7ObtenerResumenVentasConSerieYConceptoNegocioInvalidadasªªw Æ
(ªªÆ Ø
idPuntoDeVentaªªØ Ω
,ªªΩ æ

fechaDesdeªªø …
,ªª…  

fechaHastaªªÀ ’
)ªª’ ÷
;ªª÷ ◊
List
ºº 
<
ºº <
.Resumen_Transaccion_Por_Serie_y_ConceptoBasico
ºº ?
>
ºº? @4
&ResumenPorSerieYConeptoBasicoInvalidos
ººA g
=
ººh i
operacionLogica
ººj y
.
ººy zE
6ObtenerResumenVentasConSerieYConceptoBasicoInvalidadasººz ∞
(ºº∞ ±
idPuntoDeVentaºº± ø
,ººø ¿

fechaDesdeºº¡ À
,ººÀ Ã

fechaHastaººÕ ◊
)ºº◊ ÿ
;ººÿ Ÿ
List
ΩΩ 
<
ΩΩ >
0Resumen_Transaccion_Por_Serie_y_Concepto_Negocio
ΩΩ A
>
ΩΩA B.
 ResumenPorSerieYConceptoAnulados
ΩΩC c
=
ΩΩd e
operacionLogica
ΩΩf u
.
ΩΩu vC
4ObtenerResumenVentasConSerieYConceptoNegocioAnuladasΩΩv ™
(ΩΩ™ ´
idPuntoDeVentaΩΩ´ π
,ΩΩπ ∫

fechaDesdeΩΩª ≈
,ΩΩ≈ ∆

fechaHastaΩΩ« —
)ΩΩ— “
;ΩΩ“ ”
List
ææ 
<
ææ <
.Resumen_Transaccion_Por_Serie_y_ConceptoBasico
ææ ?
>
ææ? @3
%ResumenPorSerieYConeptoBasicoAnulados
ææA f
=
ææg h
operacionLogica
ææi x
.
ææx yB
3ObtenerResumenVentasConSerieYConceptoBasicoAnuladasææy ¨
(ææ¨ ≠
idPuntoDeVentaææ≠ ª
,ææª º

fechaDesdeææΩ «
,ææ« »

fechaHastaææ… ”
)ææ” ‘
;ææ‘ ’6
(EstablecimientoComercialExtendidoConLogo
¿¿ 4
sede
¿¿5 9
=
¿¿: ;
ObtenerSede
¿¿< G
(
¿¿G H
)
¿¿H I
;
¿¿I J
var
¡¡ 
	rptviewer
¡¡ 
=
¡¡ 
new
¡¡ 
ReportViewer
¡¡  ,
(
¡¡, -
)
¡¡- .
;
¡¡. /
ReportParameter
¬¬ !
parametroFechaDesde
¬¬ /
=
¬¬0 1
new
¬¬2 5
ReportParameter
¬¬6 E
(
¬¬E F
$str
¬¬F R
,
¬¬R S

fechaDesde
¬¬T ^
.
¬¬^ _
ToString
¬¬_ g
(
¬¬g h
)
¬¬h i
)
¬¬i j
;
¬¬j k
ReportParameter
√√ !
parametroFechaHasta
√√ /
=
√√0 1
new
√√2 5
ReportParameter
√√6 E
(
√√E F
$str
√√F R
,
√√R S

fechaHasta
√√T ^
.
√√^ _
ToString
√√_ g
(
√√g h
)
√√h i
)
√√i j
;
√√j k
ReportParameter
ƒƒ 
nombreEmpresa
ƒƒ )
=
ƒƒ* +
new
ƒƒ, /
ReportParameter
ƒƒ0 ?
(
ƒƒ? @
$str
ƒƒ@ L
,
ƒƒL M
sede
ƒƒN R
.
ƒƒR S
Nombre
ƒƒS Y
)
ƒƒY Z
;
ƒƒZ [
ReportParameter
≈≈ "
nombreCentroAtencion
≈≈ 0
=
≈≈1 2
new
≈≈3 6
ReportParameter
≈≈7 F
(
≈≈F G
$str
≈≈G ]
,
≈≈] ^ 
nombrePuntoDeVenta
≈≈_ q
)
≈≈q r
;
≈≈r s
string
«« 

logoString
«« 
=
«« 
Convert
««  '
.
««' (
ToBase64String
««( 6
(
««6 7
sede
««7 ;
.
««; <
Logo
««< @
,
««@ A
$num
««B C
,
««C D
sede
««E I
.
««I J
Logo
««J N
.
««N O
Length
««O U
)
««U V
;
««V W
ReportParameter
»» 
logoSede
»» $
=
»»% &
new
»»' *
ReportParameter
»»+ :
(
»»: ;
$str
»»; E
,
»»E F

logoString
»»G Q
)
»»Q R
;
»»R S
DateTime
   
fechaActual
    
=
  ! "
DateTimeUtil
  " .
.
  . /
FechaActual
  / :
(
  : ;
)
  ; <
;
  < =
ReportParameter
ÀÀ  
fechaActualSistema
ÀÀ .
=
ÀÀ/ 0
new
ÀÀ1 4
ReportParameter
ÀÀ5 D
(
ÀÀD E
$str
ÀÀE R
,
ÀÀR S
fechaActual
ÀÀT _
.
ÀÀ_ `
ToString
ÀÀ` h
(
ÀÀh i
)
ÀÀi j
)
ÀÀj k
;
ÀÀk l
ReportParameter
ÕÕ 
empleadoSede
ÕÕ (
=
ÕÕ) *
new
ÕÕ+ .
ReportParameter
ÕÕ/ >
(
ÕÕ> ?
$str
ÕÕ? H
,
ÕÕH I
ProfileData
ÕÕJ U
(
ÕÕU V
)
ÕÕV W
.
ÕÕW X
Empleado
ÕÕX `
.
ÕÕ` a
NombresYApellidos
ÕÕa r
)
ÕÕr s
;
ÕÕs t
	rptviewer
œœ 
.
œœ 
LocalReport
œœ !
.
œœ! "

ReportPath
œœ" ,
=
œœ- .
Request
œœ/ 6
.
œœ6 7
MapPath
œœ7 >
(
œœ> ?
Request
œœ? F
.
œœF G
ApplicationPath
œœG V
)
œœV W
+
œœX Y
$strœœZ ñ
;œœñ ó
	rptviewer
–– 
.
–– 
LocalReport
–– !
.
––! "
SetParameters
––" /
(
––/ 0
new
––0 3
ReportParameter
––4 C
[
––C D
]
––D E
{
––F G!
parametroFechaDesde
––H [
,
––[ \!
parametroFechaHasta
––] p
,
––p q
nombreEmpresa
––r 
,–– Ä$
nombreCentroAtencion––Å ï
,––ï ñ
empleadoSede––ó £
,––£ §"
fechaActualSistema––• ∑
,––∑ ∏
logoSede––π ¡
}––¬ √
)––√ ƒ
;––ƒ ≈
ReportDataSource
““ >
0rptdatasourceSerieConceptoTransmitidoYConfirmado
““ M
=
““N O
new
““P S
ReportDataSource
““T d
(
““d e
$str““e ú
,““ú ù>
.ResumenPorSerieYConceptoTransmitidoYConfirmado““û Ã
)““Ã Õ
;““Õ Œ
ReportDataSource
”” D
6rptdatasourceSerieConceptoBasicoTransmitidoYConfirmado
”” S
=
””T U
new
””V Y
ReportDataSource
””Z j
(
””j k
$str””k °
,””° ¢C
3ResumenPorSerieYConeptoBasicoTransmitidoYConfirmado””£ ÷
)””÷ ◊
;””◊ ÿ
ReportDataSource
‘‘ 2
$rptdatasourceSerieConceptoInvalidado
‘‘ A
=
‘‘B C
new
‘‘D G
ReportDataSource
‘‘H X
(
‘‘X Y
$str‘‘Y Ñ
,‘‘Ñ Ö1
!ResumenPorSerieYConceptoInvalidos‘‘Ü ß
)‘‘ß ®
;‘‘® ©
ReportDataSource
’’ 8
*rptdatasourceSerieConceptoBasicoInvalidado
’’ G
=
’’H I
new
’’J M
ReportDataSource
’’N ^
(
’’^ _
$str’’_ â
,’’â ä6
&ResumenPorSerieYConeptoBasicoInvalidos’’ã ±
)’’± ≤
;’’≤ ≥
ReportDataSource
÷÷ /
!rptdatasourceSerieConceptoAnulado
÷÷ >
=
÷÷? @
new
÷÷A D
ReportDataSource
÷÷E U
(
÷÷U V
$str
÷÷V ~
,
÷÷~ 0
 ResumenPorSerieYConceptoAnulados÷÷Ä †
)÷÷† °
;÷÷° ¢
ReportDataSource
◊◊ 5
'rptdatasourceSerieConceptoBasicoAnulado
◊◊ D
=
◊◊E F
new
◊◊G J
ReportDataSource
◊◊K [
(
◊◊[ \
$str◊◊\ É
,◊◊É Ñ5
%ResumenPorSerieYConeptoBasicoAnulados◊◊Ö ™
)◊◊™ ´
;◊◊´ ¨
	rptviewer
ŸŸ 
.
ŸŸ 
ProcessingMode
ŸŸ $
=
ŸŸ% &
ProcessingMode
ŸŸ' 5
.
ŸŸ5 6
Local
ŸŸ6 ;
;
ŸŸ; <
	rptviewer
€€ 
.
€€ 
LocalReport
€€ !
.
€€! "
DataSources
€€" -
.
€€- .
Add
€€. 1
(
€€1 2>
0rptdatasourceSerieConceptoTransmitidoYConfirmado
€€2 b
)
€€b c
;
€€c d
	rptviewer
‹‹ 
.
‹‹ 
LocalReport
‹‹ !
.
‹‹! "
DataSources
‹‹" -
.
‹‹- .
Add
‹‹. 1
(
‹‹1 2D
6rptdatasourceSerieConceptoBasicoTransmitidoYConfirmado
‹‹2 h
)
‹‹h i
;
‹‹i j
	rptviewer
›› 
.
›› 
LocalReport
›› !
.
››! "
DataSources
››" -
.
››- .
Add
››. 1
(
››1 22
$rptdatasourceSerieConceptoInvalidado
››2 V
)
››V W
;
››W X
	rptviewer
ﬁﬁ 
.
ﬁﬁ 
LocalReport
ﬁﬁ !
.
ﬁﬁ! "
DataSources
ﬁﬁ" -
.
ﬁﬁ- .
Add
ﬁﬁ. 1
(
ﬁﬁ1 28
*rptdatasourceSerieConceptoBasicoInvalidado
ﬁﬁ2 \
)
ﬁﬁ\ ]
;
ﬁﬁ] ^
	rptviewer
ﬂﬂ 
.
ﬂﬂ 
LocalReport
ﬂﬂ !
.
ﬂﬂ! "
DataSources
ﬂﬂ" -
.
ﬂﬂ- .
Add
ﬂﬂ. 1
(
ﬂﬂ1 2/
!rptdatasourceSerieConceptoAnulado
ﬂﬂ2 S
)
ﬂﬂS T
;
ﬂﬂT U
	rptviewer
‡‡ 
.
‡‡ 
LocalReport
‡‡ !
.
‡‡! "
DataSources
‡‡" -
.
‡‡- .
Add
‡‡. 1
(
‡‡1 25
'rptdatasourceSerieConceptoBasicoAnulado
‡‡2 Y
)
‡‡Y Z
;
‡‡Z [
	rptviewer
‚‚ 
.
‚‚ !
SizeToReportContent
‚‚ )
=
‚‚* +
true
‚‚, 0
;
‚‚0 1
	rptviewer
„„ 
.
„„ 
Width
„„ 
=
„„ 
Unit
„„ "
.
„„" #

Percentage
„„# -
(
„„- .
$num
„„. 1
)
„„1 2
;
„„2 3
	rptviewer
‰‰ 
.
‰‰ 
Height
‰‰ 
=
‰‰ 
Unit
‰‰ #
.
‰‰# $

Percentage
‰‰$ .
(
‰‰. /
$num
‰‰/ 2
)
‰‰2 3
;
‰‰3 4
ViewBag
ÂÂ 
.
ÂÂ 
ReportViewer
ÂÂ  
=
ÂÂ! "
	rptviewer
ÂÂ# ,
;
ÂÂ, -
return
ÊÊ 
View
ÊÊ 
(
ÊÊ 
$str
ÊÊ -
)
ÊÊ- .
;
ÊÊ. /
}
ÁÁ 	
public
ËË 
ActionResult
ËË M
?ReporteDeVentaDeLosPuntosDeVentaPorSerieDeComprobanteYCategoria
ËË [
(
ËË[ \
string
ËË\ b
fechaInicio
ËËc n
,
ËËn o
string
ËËp v
fechaFin
ËËw 
,ËË Ä
[ËËÅ Ç
SystemËËÇ à
.ËËà â
WebËËâ å
.ËËå ç
HttpËËç ë
.ËËë í
FromUriËËí ô
]ËËô ö
intËËõ û
[ËËû ü
]ËËü †!
idsPuntosDeVentasËË° ≤
)ËË≤ ≥
{
ÈÈ 	
DateTime
ÎÎ 

fechaDesde
ÎÎ 
=
ÎÎ  !
DateTimeUtil
ÎÎ" .
.
ÎÎ. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ÎÎ/ Z
(
ÎÎZ [
fechaInicio
ÎÎ[ f
)
ÎÎf g
;
ÎÎg h
DateTime
ÏÏ 

fechaHasta
ÏÏ 
=
ÏÏ  !
DateTimeUtil
ÏÏ" .
.
ÏÏ. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
ÏÏ/ Z
(
ÏÏZ [
fechaFin
ÏÏ[ c
)
ÏÏc d
;
ÏÏd e
List
ÓÓ 
<
ÓÓ 8
*TransaccionPorSerieDeComprobanteYCategoria
ÓÓ ;
>
ÓÓ; <
ventasConfirmada
ÓÓ= M
=
ÓÓN O'
consultaMasivaVentaLogica
ÓÓP i
.
ÓÓi jB
3ObtenerComprobanteVentaPorSerieYCategoriaConfirmadoÓÓj ù
(ÓÓù û!
idsPuntosDeVentasÓÓû Ø
,ÓÓØ ∞

fechaDesdeÓÓ± ª
,ÓÓª º

fechaHastaÓÓΩ «
)ÓÓ« »
;ÓÓ» …
List
ÔÔ 
<
ÔÔ 8
*TransaccionPorSerieDeComprobanteYCategoria
ÔÔ ;
>
ÔÔ; <
ventasInvalidada
ÔÔ= M
=
ÔÔN O'
consultaMasivaVentaLogica
ÔÔP i
.
ÔÔi jB
3ObtenerComprobanteVentaPorSerieYCategoriaInvalidadoÔÔj ù
(ÔÔù û!
idsPuntosDeVentasÔÔû Ø
,ÔÔØ ∞

fechaDesdeÔÔ± ª
,ÔÔª º

fechaHastaÔÔΩ «
)ÔÔ« »
;ÔÔ» …
string
ÒÒ %
_nombresCentrosAtencion
ÒÒ *
=
ÒÒ+ ,
$str
ÒÒ- /
;
ÒÒ/ 0
foreach
ÛÛ 
(
ÛÛ 
var
ÛÛ 
item
ÛÛ 
in
ÛÛ  
idsPuntosDeVentas
ÛÛ! 2
)
ÛÛ2 3
{
ÙÙ 
string
ıı #
_nombreCentroAtencion
ıı ,
=
ıı- .$
centroDeAtencionLogica
ıı/ E
.
ııE F-
ObtenerNombreDeCentroDeAtencion
ııF e
(
ııe f
item
ııf j
)
ııj k
;
ıık l%
_nombresCentrosAtencion
ˆˆ '
+=
ˆˆ( *
$str
ˆˆ+ 1
+
ˆˆ2 3#
_nombreCentroAtencion
ˆˆ4 I
;
ˆˆI J
}
˜˜ 6
(EstablecimientoComercialExtendidoConLogo
¯¯ 4
sede
¯¯5 9
=
¯¯: ;
ObtenerSede
¯¯< G
(
¯¯G H
)
¯¯H I
;
¯¯I J
ReportParameter
˙˙ 
nombreEmpresa
˙˙ )
=
˙˙* +
new
˙˙, /
ReportParameter
˙˙0 ?
(
˙˙? @
$str
˙˙@ L
,
˙˙L M
sede
˙˙N R
.
˙˙R S
Nombre
˙˙S Y
)
˙˙Y Z
;
˙˙Z [
ReportParameter
˚˚ "
nombreCentroAtencion
˚˚ 0
=
˚˚1 2
new
˚˚3 6
ReportParameter
˚˚7 F
(
˚˚F G
$str
˚˚G ]
,
˚˚] ^%
_nombresCentrosAtencion
˚˚_ v
)
˚˚v w
;
˚˚w x
ReportParameter
¸¸ 

FechaDesde
¸¸ &
=
¸¸' (
new
¸¸) ,
ReportParameter
¸¸- <
(
¸¸< =
$str
¸¸= I
,
¸¸I J

fechaDesde
¸¸K U
.
¸¸U V
ToString
¸¸V ^
(
¸¸^ _
)
¸¸_ `
)
¸¸` a
;
¸¸a b
ReportParameter
˝˝ 

FechaHasta
˝˝ &
=
˝˝' (
new
˝˝) ,
ReportParameter
˝˝- <
(
˝˝< =
$str
˝˝= I
,
˝˝I J

fechaHasta
˝˝K U
.
˝˝U V
ToString
˝˝V ^
(
˝˝^ _
)
˝˝_ `
)
˝˝` a
;
˝˝a b
string
ˇˇ 

logoString
ˇˇ 
=
ˇˇ 
Convert
ˇˇ  '
.
ˇˇ' (
ToBase64String
ˇˇ( 6
(
ˇˇ6 7
sede
ˇˇ7 ;
.
ˇˇ; <
Logo
ˇˇ< @
,
ˇˇ@ A
$num
ˇˇB C
,
ˇˇC D
sede
ˇˇE I
.
ˇˇI J
Logo
ˇˇJ N
.
ˇˇN O
Length
ˇˇO U
)
ˇˇU V
;
ˇˇV W
ReportParameter
ÄÄ 
logoSede
ÄÄ $
=
ÄÄ% &
new
ÄÄ' *
ReportParameter
ÄÄ+ :
(
ÄÄ: ;
$str
ÄÄ; E
,
ÄÄE F

logoString
ÄÄG Q
)
ÄÄQ R
;
ÄÄR S
DateTime
ÇÇ 
fechaActual
ÇÇ  
=
ÇÇ! "
DateTimeUtil
ÇÇ# /
.
ÇÇ/ 0
FechaActual
ÇÇ0 ;
(
ÇÇ; <
)
ÇÇ< =
;
ÇÇ= >
ReportParameter
ÉÉ  
fechaActualSistema
ÉÉ .
=
ÉÉ/ 0
new
ÉÉ1 4
ReportParameter
ÉÉ5 D
(
ÉÉD E
$str
ÉÉE R
,
ÉÉR S
fechaActual
ÉÉT _
.
ÉÉ_ `
ToString
ÉÉ` h
(
ÉÉh i
)
ÉÉi j
)
ÉÉj k
;
ÉÉk l
ReportParameter
ÖÖ 
empleadoSede
ÖÖ (
=
ÖÖ) *
new
ÖÖ+ .
ReportParameter
ÖÖ/ >
(
ÖÖ> ?
$str
ÖÖ? H
,
ÖÖH I
ProfileData
ÖÖJ U
(
ÖÖU V
)
ÖÖV W
.
ÖÖW X
Empleado
ÖÖX `
.
ÖÖ` a
NombresYApellidos
ÖÖa r
)
ÖÖr s
;
ÖÖs t
var
áá 
	rptviewer
áá 
=
áá 
new
áá 
ReportViewer
áá  ,
(
áá, -
)
áá- .
;
áá. /
	rptviewer
àà 
.
àà 
ProcessingMode
àà $
=
àà% &
ProcessingMode
àà' 5
.
àà5 6
Local
àà6 ;
;
àà; <
	rptviewer
ââ 
.
ââ 
LocalReport
ââ !
.
ââ! "

ReportPath
ââ" ,
=
ââ- .
Request
ââ/ 6
.
ââ6 7
MapPath
ââ7 >
(
ââ> ?
Request
ââ? F
.
ââF G
ApplicationPath
ââG V
)
ââV W
+
ââX Y
$strââZ §
;ââ§ •
	rptviewer
ää 
.
ää 
LocalReport
ää !
.
ää! "
SetParameters
ää" /
(
ää/ 0
new
ää0 3
ReportParameter
ää4 C
[
ääC D
]
ääD E
{
ääF G
nombreEmpresa
ääH U
,
ääU V"
nombreCentroAtencion
ääW k
,
ääk l

FechaDesde
ääm w
,
ääw x

FechaHastaääy É
,ääÉ Ñ
logoSedeääÖ ç
,ääç é
empleadoSedeääè õ
,ääõ ú"
fechaActualSistemaääù Ø
}ää∞ ±
)ää± ≤
;ää≤ ≥
ReportDataSource
åå %
rptdatasourceConfirmada
åå 4
=
åå5 6
new
åå7 :
ReportDataSource
åå; K
(
ååK L
$str
ååL _
,
åå_ `
ventasConfirmada
ååa q
)
ååq r
;
åår s
ReportDataSource
çç %
rptdatasourceInvalidada
çç 4
=
çç5 6
new
çç7 :
ReportDataSource
çç; K
(
ççK L
$str
ççL _
,
çç_ `
ventasInvalidada
çça q
)
ççq r
;
ççr s
	rptviewer
èè 
.
èè 
LocalReport
èè !
.
èè! "
DataSources
èè" -
.
èè- .
Add
èè. 1
(
èè1 2%
rptdatasourceConfirmada
èè2 I
)
èèI J
;
èèJ K
	rptviewer
êê 
.
êê 
LocalReport
êê !
.
êê! "
DataSources
êê" -
.
êê- .
Add
êê. 1
(
êê1 2%
rptdatasourceInvalidada
êê2 I
)
êêI J
;
êêJ K
	rptviewer
íí 
.
íí !
SizeToReportContent
íí )
=
íí* +
true
íí, 0
;
íí0 1
ViewBag
ìì 
.
ìì 
ReportViewer
ìì  
=
ìì! "
	rptviewer
ìì# ,
;
ìì, -
return
îî 
View
îî 
(
îî 
$str
îî -
)
îî- .
;
îî. /
}
ïï 	
public
ññ 
ActionResult
ññ :
,ReporteDeVentaPorSerieDeComprobanteYConcepto
ññ H
(
ññH I
string
ññI O
fechaInicio
ññP [
,
ññ[ \
string
ññ] c
fechaFin
ññd l
,
ññl m
[
ññn o
System
ñño u
.
ññu v
Web
ññv y
.
ññy z
Http
ññz ~
.
ññ~ 
FromUriññ Ü
]ññÜ á
intññà ã
[ññã å
]ññå ç
	idsSeriesññé ó
,ññó ò
stringññô ü
nombresSeriesññ† ≠
)ññ≠ Æ
{
óó 	
DateTime
ôô 

fechaDesde
ôô 
=
ôô  !
DateTimeUtil
ôô" .
.
ôô. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ôô/ Z
(
ôôZ [
fechaInicio
ôô[ f
)
ôôf g
;
ôôg h
DateTime
öö 

fechaHasta
öö 
=
öö  !
DateTimeUtil
öö" .
.
öö. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
öö/ Z
(
ööZ [
fechaFin
öö[ c
)
ööc d
;
ööd e
List
úú 
<
úú 7
)TransaccionPorSerieDeComprobanteYConcepto
úú :
>
úú: ;
ventasConfirmada
úú< L
=
úúM N'
consultaMasivaVentaLogica
úúO h
.
úúh iA
2ObtenerComprobanteVentaPorSerieYConceptoConfirmadoúúi õ
(úúõ ú
	idsSeriesúúú •
,úú• ¶

fechaDesdeúúß ±
,úú± ≤

fechaHastaúú≥ Ω
)úúΩ æ
;úúæ ø
List
ùù 
<
ùù 7
)TransaccionPorSerieDeComprobanteYConcepto
ùù :
>
ùù: ;
ventasInvalidada
ùù< L
=
ùùM N'
consultaMasivaVentaLogica
ùùO h
.
ùùh iA
2ObtenerComprobanteVentaPorSerieYConceptoInvalidadoùùi õ
(ùùõ ú
	idsSeriesùùú •
,ùù• ¶

fechaDesdeùùß ±
,ùù± ≤

fechaHastaùù≥ Ω
)ùùΩ æ
;ùùæ ø6
(EstablecimientoComercialExtendidoConLogo
†† 4
sede
††5 9
=
††: ;
ObtenerSede
††< G
(
††G H
)
††H I
;
††I J
ReportParameter
¢¢ 
nombreEmpresa
¢¢ )
=
¢¢* +
new
¢¢, /
ReportParameter
¢¢0 ?
(
¢¢? @
$str
¢¢@ L
,
¢¢L M
sede
¢¢N R
.
¢¢R S
Nombre
¢¢S Y
)
¢¢Y Z
;
¢¢Z [
ReportParameter
££ 

FechaDesde
££ &
=
££' (
new
££) ,
ReportParameter
££- <
(
££< =
$str
££= I
,
££I J

fechaDesde
££K U
.
££U V
ToString
££V ^
(
££^ _
)
££_ `
)
££` a
;
££a b
ReportParameter
§§ 

FechaHasta
§§ &
=
§§' (
new
§§) ,
ReportParameter
§§- <
(
§§< =
$str
§§= I
,
§§I J

fechaHasta
§§K U
.
§§U V
ToString
§§V ^
(
§§^ _
)
§§_ `
)
§§` a
;
§§a b
ReportParameter
•• 
nombreSeries
•• (
=
••) *
new
••+ .
ReportParameter
••/ >
(
••> ?
$str
••? M
,
••M N
nombresSeries
••O \
)
••\ ]
;
••] ^
string
ßß 

logoString
ßß 
=
ßß 
Convert
ßß  '
.
ßß' (
ToBase64String
ßß( 6
(
ßß6 7
sede
ßß7 ;
.
ßß; <
Logo
ßß< @
,
ßß@ A
$num
ßßB C
,
ßßC D
sede
ßßE I
.
ßßI J
Logo
ßßJ N
.
ßßN O
Length
ßßO U
)
ßßU V
;
ßßV W
ReportParameter
®® 
logoSede
®® $
=
®®% &
new
®®' *
ReportParameter
®®+ :
(
®®: ;
$str
®®; E
,
®®E F

logoString
®®G Q
)
®®Q R
;
®®R S
DateTime
™™ 
fechaActual
™™  
=
™™! "
DateTimeUtil
™™# /
.
™™/ 0
FechaActual
™™0 ;
(
™™; <
)
™™< =
;
™™= >
ReportParameter
´´  
fechaActualSistema
´´ .
=
´´/ 0
new
´´1 4
ReportParameter
´´5 D
(
´´D E
$str
´´E R
,
´´R S
fechaActual
´´T _
.
´´_ `
ToString
´´` h
(
´´h i
)
´´i j
)
´´j k
;
´´k l
ReportParameter
≠≠ 
empleadoSede
≠≠ (
=
≠≠) *
new
≠≠+ .
ReportParameter
≠≠/ >
(
≠≠> ?
$str
≠≠? H
,
≠≠H I
ProfileData
≠≠J U
(
≠≠U V
)
≠≠V W
.
≠≠W X
Empleado
≠≠X `
.
≠≠` a
NombresYApellidos
≠≠a r
)
≠≠r s
;
≠≠s t
var
ØØ 
	rptviewer
ØØ 
=
ØØ 
new
ØØ 
ReportViewer
ØØ  ,
(
ØØ, -
)
ØØ- .
;
ØØ. /
	rptviewer
∞∞ 
.
∞∞ 
ProcessingMode
∞∞ $
=
∞∞% &
ProcessingMode
∞∞' 5
.
∞∞5 6
Local
∞∞6 ;
;
∞∞; <
	rptviewer
±± 
.
±± 
LocalReport
±± !
.
±±! "

ReportPath
±±" ,
=
±±- .
Request
±±/ 6
.
±±6 7
MapPath
±±7 >
(
±±> ?
Request
±±? F
.
±±F G
ApplicationPath
±±G V
)
±±V W
+
±±X Y
$str±±Z ñ
;±±ñ ó
	rptviewer
≤≤ 
.
≤≤ 
LocalReport
≤≤ !
.
≤≤! "
SetParameters
≤≤" /
(
≤≤/ 0
new
≤≤0 3
ReportParameter
≤≤4 C
[
≤≤C D
]
≤≤D E
{
≤≤F G
nombreEmpresa
≤≤H U
,
≤≤U V

FechaDesde
≤≤W a
,
≤≤a b

FechaHasta
≤≤c m
,
≤≤m n
logoSede
≤≤o w
,
≤≤w x
empleadoSede≤≤y Ö
,≤≤Ö Ü"
fechaActualSistema≤≤á ô
,≤≤ô ö
nombreSeries≤≤õ ß
}≤≤® ©
)≤≤© ™
;≤≤™ ´
ReportDataSource
¥¥ %
rptdatasourceConfirmada
¥¥ 4
=
¥¥5 6
new
¥¥7 :
ReportDataSource
¥¥; K
(
¥¥K L
$str
¥¥L _
,
¥¥_ `
ventasConfirmada
¥¥a q
)
¥¥q r
;
¥¥r s
ReportDataSource
µµ %
rptdatasourceInvalidada
µµ 4
=
µµ5 6
new
µµ7 :
ReportDataSource
µµ; K
(
µµK L
$str
µµL _
,
µµ_ `
ventasInvalidada
µµa q
)
µµq r
;
µµr s
	rptviewer
∑∑ 
.
∑∑ 
LocalReport
∑∑ !
.
∑∑! "
DataSources
∑∑" -
.
∑∑- .
Add
∑∑. 1
(
∑∑1 2%
rptdatasourceConfirmada
∑∑2 I
)
∑∑I J
;
∑∑J K
	rptviewer
∏∏ 
.
∏∏ 
LocalReport
∏∏ !
.
∏∏! "
DataSources
∏∏" -
.
∏∏- .
Add
∏∏. 1
(
∏∏1 2%
rptdatasourceInvalidada
∏∏2 I
)
∏∏I J
;
∏∏J K
	rptviewer
∫∫ 
.
∫∫ !
SizeToReportContent
∫∫ )
=
∫∫* +
true
∫∫, 0
;
∫∫0 1
ViewBag
ªª 
.
ªª 
ReportViewer
ªª  
=
ªª! "
	rptviewer
ªª# ,
;
ªª, -
return
ºº 
View
ºº 
(
ºº 
$str
ºº -
)
ºº- .
;
ºº. /
}
ΩΩ 	
public
¿¿ 
ActionResult
¿¿ 6
(VentasPorModalidadConsolidadoPorConcepto
¿¿ D
(
¿¿D E
string
¿¿E K
fechaInicio
¿¿L W
,
¿¿W X
string
¿¿Y _
fechaFin
¿¿` h
,
¿¿h i
int
¿¿j m

idVendedor
¿¿n x
,
¿¿x y
string¿¿z Ä
nombreVendedor¿¿Å è
,¿¿è ê
[¿¿ë í
System¿¿í ò
.¿¿ò ô
Web¿¿ô ú
.¿¿ú ù
Http¿¿ù °
.¿¿° ¢
FromUri¿¿¢ ©
]¿¿© ™
string¿¿´ ±
[¿¿± ≤
]¿¿≤ ≥
modalidades¿¿¥ ø
)¿¿ø ¿
{
¡¡ 	
try
¬¬ 
{
√√ 
DateTime
∆∆ 

fechaDesde
∆∆ #
=
∆∆$ %
DateTimeUtil
∆∆& 2
.
∆∆2 39
+ObtenerFechaDesdeConPrecisionDeMilisegundos
∆∆3 ^
(
∆∆^ _
fechaInicio
∆∆_ j
)
∆∆j k
;
∆∆k l
DateTime
«« 

fechaHasta
«« #
=
««$ %
DateTimeUtil
««& 2
.
««2 39
+ObtenerFechaHastaConPrecisionDeMilisegundos
««3 ^
(
««^ _
fechaFin
««_ g
)
««g h
;
««h i
int
»» 

idEmpleado
»» 
=
»»  

idVendedor
»»! +
==
»», .
$num
»»/ 0
?
»»1 2
ProfileData
»»3 >
(
»»> ?
)
»»? @
.
»»@ A
Empleado
»»A I
.
»»I J
Id
»»J L
:
»»M N

idVendedor
»»O Y
;
»»Y Z
List
ÀÀ 
<
ÀÀ /
!Resumen_Transaccion_Por_Modalidad
ÀÀ 6
>
ÀÀ6 7&
resumenVentasConfirmadas
ÀÀ8 P
=
ÀÀQ R
operacionLogica
ÀÀS b
.
ÀÀb cJ
;ObtenerResumenesDeVentasPorModalidadYPorVendedorConfirmadasÀÀc û
(ÀÀû ü
modalidadesÀÀü ™
,ÀÀ™ ´

idEmpleadoÀÀ¨ ∂
,ÀÀ∂ ∑

fechaDesdeÀÀ∏ ¬
,ÀÀ¬ √

fechaHastaÀÀƒ Œ
)ÀÀŒ œ
;ÀÀœ –
List
ÃÃ 
<
ÃÃ /
!Resumen_Transaccion_Por_Modalidad
ÃÃ 6
>
ÃÃ6 7&
resumenVentasInvalidadas
ÃÃ8 P
=
ÃÃQ R
operacionLogica
ÃÃS b
.
ÃÃb cJ
;ObtenerResumenesDeVentasPorModalidadYPorVendedorInvalidadasÃÃc û
(ÃÃû ü
modalidadesÃÃü ™
,ÃÃ™ ´

idEmpleadoÃÃ¨ ∂
,ÃÃ∂ ∑

fechaDesdeÃÃ∏ ¬
,ÃÃ¬ √

fechaHastaÃÃƒ Œ
)ÃÃŒ œ
;ÃÃœ –
List
œœ 
<
œœ /
!Detalle_Transaccion_Por_Modalidad
œœ 6
>
œœ6 7&
detalleVentasConfirmadas
œœ8 P
=
œœQ R
operacionLogica
œœS b
.
œœb c]
NObtenerDetallesDeVentasPorModalidadPorVendedorAgrupadoPorMercaderiaConfirmadasœœc ±
(œœ± ≤
modalidadesœœ≤ Ω
,œœΩ æ

idEmpleadoœœø …
,œœ…  

fechaDesdeœœÀ ’
,œœ’ ÷

fechaHastaœœ◊ ·
)œœ· ‚
;œœ‚ „
List
–– 
<
–– /
!Detalle_Transaccion_Por_Modalidad
–– 6
>
––6 7&
detalleVentasInvalidadas
––8 P
=
––Q R
operacionLogica
––S b
.
––b c]
NObtenerDetallesDeVentasPorModalidadPorVendedorAgrupadoPorMercaderiaInvalidadas––c ±
(––± ≤
modalidades––≤ Ω
,––Ω æ

idEmpleado––ø …
,––…  

fechaDesde––À ’
,––’ ÷

fechaHasta––◊ ·
)––· ‚
;––‚ „6
(EstablecimientoComercialExtendidoConLogo
—— 8
sede
——9 =
=
——> ?
ObtenerSede
——@ K
(
——K L
)
——L M
;
——M N
ReportParameter
‘‘ 

nombreSede
‘‘  *
=
‘‘+ ,
new
‘‘- 0
ReportParameter
‘‘1 @
(
‘‘@ A
$str
‘‘A M
,
‘‘M N
sede
‘‘O S
.
‘‘S T
Nombre
‘‘T Z
)
‘‘Z [
;
‘‘[ \
ReportParameter
’’ "
nombreCentroAtencion
’’  4
=
’’5 6
new
’’7 :
ReportParameter
’’; J
(
’’J K
$str
’’K a
,
’’a b
ProfileData
’’c n
(
’’n o
)
’’o p
.
’’p q1
"NombreCentroDeAtencionSeleccionado’’q ì
)’’ì î
;’’î ï
ReportParameter
÷÷ !
parametroFechaDesde
÷÷  3
=
÷÷4 5
new
÷÷6 9
ReportParameter
÷÷: I
(
÷÷I J
$str
÷÷J V
,
÷÷V W

fechaDesde
÷÷X b
.
÷÷b c
ToString
÷÷c k
(
÷÷k l
)
÷÷l m
)
÷÷m n
;
÷÷n o
ReportParameter
◊◊ !
parametroFechaHasta
◊◊  3
=
◊◊4 5
new
◊◊6 9
ReportParameter
◊◊: I
(
◊◊I J
$str
◊◊J V
,
◊◊V W

fechaHasta
◊◊X b
.
◊◊b c
ToString
◊◊c k
(
◊◊k l
)
◊◊l m
)
◊◊m n
;
◊◊n o
ReportParameter
ÿÿ 
parametroEmpleado
ÿÿ  1
=
ÿÿ2 3
new
ÿÿ4 7
ReportParameter
ÿÿ8 G
(
ÿÿG H
$str
ÿÿH R
,
ÿÿR S

idVendedor
ÿÿT ^
==
ÿÿ_ a
$num
ÿÿb c
?
ÿÿd e
ProfileData
ÿÿf q
(
ÿÿq r
)
ÿÿr s
.
ÿÿs t
Empleado
ÿÿt |
.
ÿÿ| } 
NombresYApellidosÿÿ} é
.ÿÿé è
ToStringÿÿè ó
(ÿÿó ò
)ÿÿò ô
:ÿÿö õ
nombreVendedorÿÿú ™
)ÿÿ™ ´
;ÿÿ´ ¨
string
⁄⁄ 

logoString
⁄⁄ !
=
⁄⁄" #
Convert
⁄⁄$ +
.
⁄⁄+ ,
ToBase64String
⁄⁄, :
(
⁄⁄: ;
sede
⁄⁄; ?
.
⁄⁄? @
Logo
⁄⁄@ D
,
⁄⁄D E
$num
⁄⁄F G
,
⁄⁄G H
sede
⁄⁄I M
.
⁄⁄M N
Logo
⁄⁄N R
.
⁄⁄R S
Length
⁄⁄S Y
)
⁄⁄Y Z
;
⁄⁄Z [
ReportParameter
€€ 
logoSede
€€  (
=
€€) *
new
€€+ .
ReportParameter
€€/ >
(
€€> ?
$str
€€? I
,
€€I J

logoString
€€K U
)
€€U V
;
€€V W
DateTime
›› 
fechaActual
›› $
=
››% &
DateTimeUtil
››& 2
.
››2 3
FechaActual
››3 >
(
››> ?
)
››? @
;
››@ A
ReportParameter
ﬁﬁ  
fechaActualSistema
ﬁﬁ  2
=
ﬁﬁ3 4
new
ﬁﬁ5 8
ReportParameter
ﬁﬁ9 H
(
ﬁﬁH I
$str
ﬁﬁI V
,
ﬁﬁV W
fechaActual
ﬁﬁX c
.
ﬁﬁc d
ToString
ﬁﬁd l
(
ﬁﬁl m
)
ﬁﬁm n
)
ﬁﬁn o
;
ﬁﬁo p
ReportParameter
‡‡ 
empleadoSede
‡‡  ,
=
‡‡- .
new
‡‡/ 2
ReportParameter
‡‡3 B
(
‡‡B C
$str
‡‡C L
,
‡‡L M
ProfileData
‡‡N Y
(
‡‡Y Z
)
‡‡Z [
.
‡‡[ \
Empleado
‡‡\ d
.
‡‡d e
NombresYApellidos
‡‡e v
)
‡‡v w
;
‡‡w x
var
‚‚ 
	rptviewer
‚‚ 
=
‚‚ 
new
‚‚  #
ReportViewer
‚‚$ 0
(
‚‚0 1
)
‚‚1 2
;
‚‚2 3
	rptviewer
‰‰ 
.
‰‰ 
LocalReport
‰‰ %
.
‰‰% &

ReportPath
‰‰& 0
=
‰‰1 2
Request
‰‰3 :
.
‰‰: ;
MapPath
‰‰; B
(
‰‰B C
Request
‰‰C J
.
‰‰J K
ApplicationPath
‰‰K Z
)
‰‰Z [
+
‰‰\ ]
$str‰‰^ û
;‰‰û ü
	rptviewer
ÊÊ 
.
ÊÊ 
LocalReport
ÊÊ %
.
ÊÊ% &
SetParameters
ÊÊ& 3
(
ÊÊ3 4
new
ÊÊ4 7
ReportParameter
ÊÊ8 G
[
ÊÊG H
]
ÊÊH I
{
ÊÊJ K"
nombreCentroAtencion
ÊÊL `
,
ÊÊ` a

nombreSede
ÊÊb l
,
ÊÊl m"
parametroFechaDesdeÊÊn Å
,ÊÊÅ Ç#
parametroFechaHastaÊÊÉ ñ
,ÊÊñ ó!
parametroEmpleadoÊÊò ©
,ÊÊ© ™
logoSedeÊÊ´ ≥
,ÊÊ≥ ¥"
fechaActualSistemaÊÊµ «
,ÊÊ« »
empleadoSedeÊÊ… ’
}ÊÊ÷ ◊
)ÊÊ◊ ÿ
;ÊÊÿ Ÿ
ReportDataSource
ËË  3
%rptdatasourceResumenVentasConfirmadas
ËË! F
=
ËËG H
new
ËËI L
ReportDataSource
ËËM ]
(
ËË] ^
$str
ËË^ y
,
ËËy z'
resumenVentasConfirmadasËË{ ì
)ËËì î
;ËËî ï
ReportDataSource
ÈÈ  1
#rptdatasourceResumenVentasInvalidas
ÈÈ! D
=
ÈÈE F
new
ÈÈG J
ReportDataSource
ÈÈK [
(
ÈÈ[ \
$str
ÈÈ\ w
,
ÈÈw x'
resumenVentasInvalidadasÈÈy ë
)ÈÈë í
;ÈÈí ì
ReportDataSource
ÎÎ  3
%rptdatasourceDetalleVentasConfirmadas
ÎÎ! F
=
ÎÎG H
new
ÎÎI L
ReportDataSource
ÎÎM ]
(
ÎÎ] ^
$str
ÎÎ^ y
,
ÎÎy z'
detalleVentasConfirmadasÎÎ{ ì
)ÎÎì î
;ÎÎî ï
ReportDataSource
ÏÏ  3
%rptdatasourceDetalleVentasInvalidadas
ÏÏ! F
=
ÏÏG H
new
ÏÏI L
ReportDataSource
ÏÏM ]
(
ÏÏ] ^
$str
ÏÏ^ y
,
ÏÏy z'
detalleVentasInvalidadasÏÏ{ ì
)ÏÏì î
;ÏÏî ï
	rptviewer
ÔÔ 
.
ÔÔ 
ProcessingMode
ÔÔ (
=
ÔÔ) *
ProcessingMode
ÔÔ+ 9
.
ÔÔ9 :
Local
ÔÔ: ?
;
ÔÔ? @
	rptviewer
ÒÒ 
.
ÒÒ 
LocalReport
ÒÒ %
.
ÒÒ% &
DataSources
ÒÒ& 1
.
ÒÒ1 2
Add
ÒÒ2 5
(
ÒÒ5 63
%rptdatasourceResumenVentasConfirmadas
ÒÒ6 [
)
ÒÒ[ \
;
ÒÒ\ ]
	rptviewer
ÚÚ 
.
ÚÚ 
LocalReport
ÚÚ %
.
ÚÚ% &
DataSources
ÚÚ& 1
.
ÚÚ1 2
Add
ÚÚ2 5
(
ÚÚ5 61
#rptdatasourceResumenVentasInvalidas
ÚÚ6 Y
)
ÚÚY Z
;
ÚÚZ [
	rptviewer
ıı 
.
ıı 
LocalReport
ıı %
.
ıı% &
DataSources
ıı& 1
.
ıı1 2
Add
ıı2 5
(
ıı5 63
%rptdatasourceDetalleVentasConfirmadas
ıı6 [
)
ıı[ \
;
ıı\ ]
	rptviewer
ˆˆ 
.
ˆˆ 
LocalReport
ˆˆ %
.
ˆˆ% &
DataSources
ˆˆ& 1
.
ˆˆ1 2
Add
ˆˆ2 5
(
ˆˆ5 63
%rptdatasourceDetalleVentasInvalidadas
ˆˆ6 [
)
ˆˆ[ \
;
ˆˆ\ ]
	rptviewer
˘˘ 
.
˘˘ !
SizeToReportContent
˘˘ -
=
˘˘. /
true
˘˘0 4
;
˘˘4 5
	rptviewer
˙˙ 
.
˙˙ 
Width
˙˙ 
=
˙˙  !
Unit
˙˙" &
.
˙˙& '

Percentage
˙˙' 1
(
˙˙1 2
$num
˙˙2 5
)
˙˙5 6
;
˙˙6 7
	rptviewer
˚˚ 
.
˚˚ 
Height
˚˚  
=
˚˚! "
Unit
˚˚# '
.
˚˚' (

Percentage
˚˚( 2
(
˚˚2 3
$num
˚˚3 6
)
˚˚6 7
;
˚˚7 8
ViewBag
˝˝ 
.
˝˝ 
ReportViewer
˝˝ $
=
˝˝% &
	rptviewer
˝˝' 0
;
˝˝0 1
return
˛˛ 
View
˛˛ 
(
˛˛ 
$str
˛˛ 1
)
˛˛1 2
;
˛˛2 3
}
ˇˇ 
catch
ÄÄ 
(
ÄÄ 
	Exception
ÄÄ 
e
ÄÄ 
)
ÄÄ 
{
ÅÅ 
throw
ÇÇ 
new
ÇÇ !
ControllerException
ÇÇ -
(
ÇÇ- .
$str
ÇÇ. |
,
ÇÇ| }
e
ÇÇ~ 
)ÇÇ Ä
;ÇÇÄ Å
}
ÉÉ 
}
ÑÑ 	
public
áá 
ActionResult
áá <
.VentasPorModalidadConsolidadoPorPrecioUnitario
áá J
(
ááJ K
string
ááK Q
fechaInicio
ááR ]
,
áá] ^
string
áá_ e
fechaFin
ááf n
,
áán o
int
ááp s

idVendedor
áát ~
,
áá~ 
stringááÄ Ü
nombreVendedorááá ï
,ááï ñ
[ááó ò
Systemááò û
.ááû ü
Webááü ¢
.áá¢ £
Httpáá£ ß
.ááß ®
FromUriáá® Ø
]ááØ ∞
stringáá± ∑
[áá∑ ∏
]áá∏ π
modalidadesáá∫ ≈
)áá≈ ∆
{
àà 	
try
ââ 
{
ää 
DateTime
çç 

fechaDesde
çç #
=
çç$ %
DateTimeUtil
çç& 2
.
çç2 39
+ObtenerFechaDesdeConPrecisionDeMilisegundos
çç3 ^
(
çç^ _
fechaInicio
çç_ j
)
ççj k
;
ççk l
DateTime
éé 

fechaHasta
éé #
=
éé$ %
DateTimeUtil
éé& 2
.
éé2 39
+ObtenerFechaHastaConPrecisionDeMilisegundos
éé3 ^
(
éé^ _
fechaFin
éé_ g
)
éég h
;
ééh i
int
èè 

idEmpleado
èè 
=
èè  

idVendedor
èè! +
==
èè, .
$num
èè/ 0
?
èè1 2
ProfileData
èè3 >
(
èè> ?
)
èè? @
.
èè@ A
Empleado
èèA I
.
èèI J
Id
èèJ L
:
èèM N

idVendedor
èèO Y
;
èèY Z
List
íí 
<
íí /
!Resumen_Transaccion_Por_Modalidad
íí 6
>
íí6 7&
resumenVentasConfirmadas
íí8 P
=
ííQ R
operacionLogica
ííS b
.
ííb cJ
;ObtenerResumenesDeVentasPorModalidadYPorVendedorConfirmadasííc û
(ííû ü
modalidadesííü ™
,íí™ ´

idEmpleadoíí¨ ∂
,íí∂ ∑

fechaDesdeíí∏ ¬
,íí¬ √

fechaHastaííƒ Œ
)ííŒ œ
;ííœ –
List
ìì 
<
ìì /
!Resumen_Transaccion_Por_Modalidad
ìì 6
>
ìì6 7&
resumenVentasInvalidadas
ìì8 P
=
ììQ R
operacionLogica
ììS b
.
ììb cJ
;ObtenerResumenesDeVentasPorModalidadYPorVendedorInvalidadasììc û
(ììû ü
modalidadesììü ™
,ìì™ ´

idEmpleadoìì¨ ∂
,ìì∂ ∑

fechaDesdeìì∏ ¬
,ìì¬ √

fechaHastaììƒ Œ
)ììŒ œ
;ììœ –
List
ññ 
<
ññ /
!Detalle_Transaccion_Por_Modalidad
ññ 6
>
ññ6 7&
detalleVentasConfirmadas
ññ8 P
=
ññQ R
operacionLogica
ññS b
.
ññb cl
]ObtenerDetallesDeVentasPorModalidadPorVendedorAgrupadoPorMercaderiaYPrecioUnitarioConfirmadasññc ¿
(ññ¿ ¡
modalidadesññ¡ Ã
,ññÃ Õ

idEmpleadoññŒ ÿ
,ññÿ Ÿ

fechaDesdeññ⁄ ‰
,ññ‰ Â

fechaHastaññÊ 
)ññ Ò
;ññÒ Ú
List
óó 
<
óó /
!Detalle_Transaccion_Por_Modalidad
óó 6
>
óó6 7&
detalleVentasInvalidadas
óó8 P
=
óóQ R
operacionLogica
óóS b
.
óób cl
]ObtenerDetallesDeVentasPorModalidadPorVendedorAgrupadoPorMercaderiaYPrecioUnitarioInvalidadasóóc ¿
(óó¿ ¡
modalidadesóó¡ Ã
,óóÃ Õ

idEmpleadoóóŒ ÿ
,óóÿ Ÿ

fechaDesdeóó⁄ ‰
,óó‰ Â

fechaHastaóóÊ 
)óó Ò
;óóÒ Ú6
(EstablecimientoComercialExtendidoConLogo
òò 8
sede
òò9 =
=
òò> ?
ObtenerSede
òò@ K
(
òòK L
)
òòL M
;
òòM N
ReportParameter
õõ 
nombreDeSede
õõ  ,
=
õõ- .
new
õõ/ 2
ReportParameter
õõ3 B
(
õõB C
$str
õõC O
,
õõO P
sede
õõQ U
.
õõU V
Nombre
õõV \
)
õõ\ ]
;
õõ] ^
ReportParameter
úú "
nombreCentroAtencion
úú  4
=
úú5 6
new
úú7 :
ReportParameter
úú; J
(
úúJ K
$str
úúK a
,
úúa b
ProfileData
úúc n
(
úún o
)
úúo p
.
úúp q1
"NombreCentroDeAtencionSeleccionadoúúq ì
)úúì î
;úúî ï
ReportParameter
ùù !
parametroFechaDesde
ùù  3
=
ùù4 5
new
ùù6 9
ReportParameter
ùù: I
(
ùùI J
$str
ùùJ V
,
ùùV W

fechaDesde
ùùX b
.
ùùb c
ToString
ùùc k
(
ùùk l
)
ùùl m
)
ùùm n
;
ùùn o
ReportParameter
ûû !
parametroFechaHasta
ûû  3
=
ûû4 5
new
ûû6 9
ReportParameter
ûû: I
(
ûûI J
$str
ûûJ V
,
ûûV W

fechaHasta
ûûX b
.
ûûb c
ToString
ûûc k
(
ûûk l
)
ûûl m
)
ûûm n
;
ûûn o
ReportParameter
üü 
parametroEmpleado
üü  1
=
üü2 3
new
üü4 7
ReportParameter
üü8 G
(
üüG H
$str
üüH R
,
üüR S

idVendedor
üüT ^
==
üü_ a
$num
üüb c
?
üüd e
ProfileData
üüf q
(
üüq r
)
üür s
.
üüs t
Empleado
üüt |
.
üü| } 
NombresYApellidosüü} é
.üüé è
ToStringüüè ó
(üüó ò
)üüò ô
:üüö õ
nombreVendedorüüú ™
)üü™ ´
;üü´ ¨
string
°° 

logoString
°° !
=
°°" #
Convert
°°$ +
.
°°+ ,
ToBase64String
°°, :
(
°°: ;
sede
°°; ?
.
°°? @
Logo
°°@ D
,
°°D E
$num
°°F G
,
°°G H
sede
°°I M
.
°°M N
Logo
°°N R
.
°°R S
Length
°°S Y
)
°°Y Z
;
°°Z [
ReportParameter
¢¢ 
logoSede
¢¢  (
=
¢¢) *
new
¢¢+ .
ReportParameter
¢¢/ >
(
¢¢> ?
$str
¢¢? I
,
¢¢I J

logoString
¢¢K U
)
¢¢U V
;
¢¢V W
DateTime
§§ 
fechaActual
§§ $
=
§§% &
DateTimeUtil
§§& 2
.
§§2 3
FechaActual
§§3 >
(
§§> ?
)
§§? @
;
§§@ A
ReportParameter
••  
fechaActualSistema
••  2
=
••3 4
new
••5 8
ReportParameter
••9 H
(
••H I
$str
••I V
,
••V W
fechaActual
••X c
.
••c d
ToString
••d l
(
••l m
)
••m n
)
••n o
;
••o p
ReportParameter
ßß 
empleadoSede
ßß  ,
=
ßß- .
new
ßß/ 2
ReportParameter
ßß3 B
(
ßßB C
$str
ßßC L
,
ßßL M
ProfileData
ßßN Y
(
ßßY Z
)
ßßZ [
.
ßß[ \
Empleado
ßß\ d
.
ßßd e
NombresYApellidos
ßße v
)
ßßv w
;
ßßw x
var
©© 
	rptviewer
©© 
=
©© 
new
©©  #
ReportViewer
©©$ 0
(
©©0 1
)
©©1 2
;
©©2 3
	rptviewer
´´ 
.
´´ 
LocalReport
´´ %
.
´´% &

ReportPath
´´& 0
=
´´1 2
Request
´´3 :
.
´´: ;
MapPath
´´; B
(
´´B C
Request
´´C J
.
´´J K
ApplicationPath
´´K Z
)
´´Z [
+
´´\ ]
$str´´^ ¨
;´´¨ ≠
	rptviewer
≠≠ 
.
≠≠ 
LocalReport
≠≠ %
.
≠≠% &
SetParameters
≠≠& 3
(
≠≠3 4
new
≠≠4 7
ReportParameter
≠≠8 G
[
≠≠G H
]
≠≠H I
{
≠≠J K"
nombreCentroAtencion
≠≠L `
,
≠≠` a
nombreDeSede
≠≠b n
,
≠≠n o"
parametroFechaDesde≠≠p É
,≠≠É Ñ#
parametroFechaHasta≠≠Ö ò
,≠≠ò ô!
parametroEmpleado≠≠ö ´
,≠≠´ ¨
logoSede≠≠≠ µ
,≠≠µ ∂"
fechaActualSistema≠≠∑ …
,≠≠…  
empleadoSede≠≠À ◊
}≠≠ÿ Ÿ
)≠≠Ÿ ⁄
;≠≠⁄ €
ReportDataSource
ØØ  3
%rptdatasourceResumenVentasConfirmadas
ØØ! F
=
ØØG H
new
ØØI L
ReportDataSource
ØØM ]
(
ØØ] ^
$str
ØØ^ y
,
ØØy z'
resumenVentasConfirmadasØØ{ ì
)ØØì î
;ØØî ï
ReportDataSource
∞∞  1
#rptdatasourceResumenVentasInvalidas
∞∞! D
=
∞∞E F
new
∞∞G J
ReportDataSource
∞∞K [
(
∞∞[ \
$str
∞∞\ w
,
∞∞w x'
resumenVentasInvalidadas∞∞y ë
)∞∞ë í
;∞∞í ì
ReportDataSource
≤≤  3
%rptdatasourceDetalleVentasConfirmadas
≤≤! F
=
≤≤G H
new
≤≤I L
ReportDataSource
≤≤M ]
(
≤≤] ^
$str
≤≤^ y
,
≤≤y z'
detalleVentasConfirmadas≤≤{ ì
)≤≤ì î
;≤≤î ï
ReportDataSource
≥≥  3
%rptdatasourceDetalleVentasInvalidadas
≥≥! F
=
≥≥G H
new
≥≥I L
ReportDataSource
≥≥M ]
(
≥≥] ^
$str
≥≥^ y
,
≥≥y z'
detalleVentasInvalidadas≥≥{ ì
)≥≥ì î
;≥≥î ï
	rptviewer
∂∂ 
.
∂∂ 
ProcessingMode
∂∂ (
=
∂∂) *
ProcessingMode
∂∂+ 9
.
∂∂9 :
Local
∂∂: ?
;
∂∂? @
	rptviewer
∏∏ 
.
∏∏ 
LocalReport
∏∏ %
.
∏∏% &
DataSources
∏∏& 1
.
∏∏1 2
Add
∏∏2 5
(
∏∏5 63
%rptdatasourceResumenVentasConfirmadas
∏∏6 [
)
∏∏[ \
;
∏∏\ ]
	rptviewer
ππ 
.
ππ 
LocalReport
ππ %
.
ππ% &
DataSources
ππ& 1
.
ππ1 2
Add
ππ2 5
(
ππ5 61
#rptdatasourceResumenVentasInvalidas
ππ6 Y
)
ππY Z
;
ππZ [
	rptviewer
ºº 
.
ºº 
LocalReport
ºº %
.
ºº% &
DataSources
ºº& 1
.
ºº1 2
Add
ºº2 5
(
ºº5 63
%rptdatasourceDetalleVentasConfirmadas
ºº6 [
)
ºº[ \
;
ºº\ ]
	rptviewer
ΩΩ 
.
ΩΩ 
LocalReport
ΩΩ %
.
ΩΩ% &
DataSources
ΩΩ& 1
.
ΩΩ1 2
Add
ΩΩ2 5
(
ΩΩ5 63
%rptdatasourceDetalleVentasInvalidadas
ΩΩ6 [
)
ΩΩ[ \
;
ΩΩ\ ]
	rptviewer
¿¿ 
.
¿¿ !
SizeToReportContent
¿¿ -
=
¿¿. /
true
¿¿0 4
;
¿¿4 5
	rptviewer
¡¡ 
.
¡¡ 
Width
¡¡ 
=
¡¡  !
Unit
¡¡" &
.
¡¡& '

Percentage
¡¡' 1
(
¡¡1 2
$num
¡¡2 5
)
¡¡5 6
;
¡¡6 7
	rptviewer
¬¬ 
.
¬¬ 
Height
¬¬  
=
¬¬! "
Unit
¬¬# '
.
¬¬' (

Percentage
¬¬( 2
(
¬¬2 3
$num
¬¬3 6
)
¬¬6 7
;
¬¬7 8
ViewBag
ƒƒ 
.
ƒƒ 
ReportViewer
ƒƒ $
=
ƒƒ% &
	rptviewer
ƒƒ' 0
;
ƒƒ0 1
return
≈≈ 
View
≈≈ 
(
≈≈ 
$str
≈≈ 1
)
≈≈1 2
;
≈≈2 3
}
∆∆ 
catch
«« 
(
«« 
	Exception
«« 
e
«« 
)
«« 
{
»» 
throw
…… 
new
…… !
ControllerException
…… -
(
……- .
$str……. É
,……É Ñ
e……Ö Ü
)……Ü á
;……á à
}
   
}
ÀÀ 	
public
ŒŒ 
ActionResult
ŒŒ 4
&ReportePorNumeroDeComprobanteConIcbper
ŒŒ B
(
ŒŒB C
string
ŒŒC I
fechaInicio
ŒŒJ U
,
ŒŒU V
string
ŒŒW ]
fechaFin
ŒŒ^ f
,
ŒŒf g
[
ŒŒh i
System
ŒŒi o
.
ŒŒo p
Web
ŒŒp s
.
ŒŒs t
Http
ŒŒt x
.
ŒŒx y
FromUriŒŒy Ä
]ŒŒÄ Å
intŒŒÇ Ö
[ŒŒÖ Ü
]ŒŒÜ á!
idsPuntosDeVentasŒŒà ô
)ŒŒô ö
{
œœ 	6
(EstablecimientoComercialExtendidoConLogo
–– 4
sede
––5 9
=
––: ;
ObtenerSede
––< G
(
––G H
)
––H I
;
––I J
DateTime
—— 

fechaDesde
—— 
=
——  !
DateTimeUtil
——" .
.
——. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
——/ Z
(
——Z [
fechaInicio
——[ f
)
——f g
;
——g h
DateTime
““ 

fechaHasta
““ 
=
““  !
DateTimeUtil
““" .
.
““. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
““/ Z
(
““Z [
fechaFin
““[ c
)
““c d
;
““d e
var
‘‘ 
	rptviewer
‘‘ 
=
‘‘ ;
-GenerarReportePorNumeroDeComprobanteConIcbper
‘‘ I
(
‘‘I J
sede
‘‘J N
,
‘‘N O

fechaDesde
‘‘P Z
,
‘‘Z [

fechaHasta
‘‘\ f
,
‘‘f g
idsPuntosDeVentas
‘‘h y
,
‘‘y z
true
‘‘{ 
)‘‘ Ä
;‘‘Ä Å
ViewBag
÷÷ 
.
÷÷ 
ReportViewer
÷÷  
=
÷÷! "
	rptviewer
÷÷# ,
;
÷÷, -
return
◊◊ 
View
◊◊ 
(
◊◊ 
$str
◊◊ -
)
◊◊- .
;
◊◊. /
}
ÿÿ 	
public
⁄⁄ 
ReportViewer
⁄⁄ ;
-GenerarReportePorNumeroDeComprobanteConIcbper
⁄⁄ I
(
⁄⁄I J6
(EstablecimientoComercialExtendidoConLogo
⁄⁄J r
sede
⁄⁄s w
,
⁄⁄w x
DateTime⁄⁄y Å

fechaDesde⁄⁄Ç å
,⁄⁄å ç
DateTime⁄⁄é ñ

fechaHasta⁄⁄ó °
,⁄⁄° ¢
int⁄⁄£ ¶
[⁄⁄¶ ß
]⁄⁄ß ®!
idsPuntosDeVentas⁄⁄© ∫
,⁄⁄∫ ª
bool⁄⁄º ¿
fromRequest⁄⁄¡ Ã
)⁄⁄Ã Õ
{
€€ 	
try
‹‹ 
{
›› 
string
ﬁﬁ %
_nombresCentrosAtencion
ﬁﬁ .
=
ﬁﬁ/ 0
$str
ﬁﬁ1 3
;
ﬁﬁ3 4
foreach
‡‡ 
(
‡‡ 
var
‡‡ 
item
‡‡ !
in
‡‡" $
idsPuntosDeVentas
‡‡% 6
)
‡‡6 7
{
·· 
string
‚‚ #
_nombreCentroAtencion
‚‚ 0
=
‚‚1 2$
centroDeAtencionLogica
‚‚3 I
.
‚‚I J-
ObtenerNombreDeCentroDeAtencion
‚‚J i
(
‚‚i j
item
‚‚j n
)
‚‚n o
;
‚‚o p%
_nombresCentrosAtencion
„„ +
+=
„„, .
$str
„„/ 5
+
„„6 7#
_nombreCentroAtencion
„„8 M
;
„„M N
}
‰‰ 
List
ÁÁ 
<
ÁÁ 
Venta_Cliente
ÁÁ "
>
ÁÁ" #'
ventasClientesConfirmadas
ÁÁ$ =
=
ÁÁ> ?
operacionLogica
ÁÁ@ O
.
ÁÁO P7
)ObtenerVentasClientesConfirmadasConIcbper
ÁÁP y
(
ÁÁy z 
idsPuntosDeVentasÁÁz ã
,ÁÁã å

fechaDesdeÁÁç ó
,ÁÁó ò

fechaHastaÁÁô £
)ÁÁ£ §
;ÁÁ§ •
List
ËË 
<
ËË 
Venta_Cliente
ËË "
>
ËË" #'
ventasClientesInvalidadas
ËË$ =
=
ËË> ?
operacionLogica
ËË@ O
.
ËËO P7
)ObtenerVentasClientesInvalidadasConIcbper
ËËP y
(
ËËy z 
idsPuntosDeVentasËËz ã
,ËËã å

fechaDesdeËËç ó
,ËËó ò

fechaHastaËËô £
)ËË£ §
;ËË§ •
ReportParameter
ÎÎ 
nombreDeSede
ÎÎ  ,
=
ÎÎ- .
new
ÎÎ/ 2
ReportParameter
ÎÎ3 B
(
ÎÎB C
$str
ÎÎC O
,
ÎÎO P
sede
ÎÎQ U
.
ÎÎU V
Nombre
ÎÎV \
)
ÎÎ\ ]
;
ÎÎ] ^
ReportParameter
ÏÏ "
nombreCentroAtencion
ÏÏ  4
=
ÏÏ5 6
new
ÏÏ7 :
ReportParameter
ÏÏ; J
(
ÏÏJ K
$str
ÏÏK a
,
ÏÏa b%
_nombresCentrosAtencion
ÏÏc z
)
ÏÏz {
;
ÏÏ{ |
ReportParameter
ÌÌ !
parametroFechaDesde
ÌÌ  3
=
ÌÌ4 5
new
ÌÌ6 9
ReportParameter
ÌÌ: I
(
ÌÌI J
$str
ÌÌJ V
,
ÌÌV W

fechaDesde
ÌÌX b
.
ÌÌb c
ToString
ÌÌc k
(
ÌÌk l
)
ÌÌl m
)
ÌÌm n
;
ÌÌn o
ReportParameter
ÓÓ !
parametroFechaHasta
ÓÓ  3
=
ÓÓ4 5
new
ÓÓ6 9
ReportParameter
ÓÓ: I
(
ÓÓI J
$str
ÓÓJ V
,
ÓÓV W

fechaHasta
ÓÓX b
.
ÓÓb c
ToString
ÓÓc k
(
ÓÓk l
)
ÓÓl m
)
ÓÓm n
;
ÓÓn o
string
 

logoString
 !
=
" #
Convert
$ +
.
+ ,
ToBase64String
, :
(
: ;
sede
; ?
.
? @
Logo
@ D
,
D E
$num
F G
,
G H
sede
I M
.
M N
Logo
N R
.
R S
Length
S Y
)
Y Z
;
Z [
ReportParameter
ÒÒ 
logoSede
ÒÒ  (
=
ÒÒ) *
new
ÒÒ+ .
ReportParameter
ÒÒ/ >
(
ÒÒ> ?
$str
ÒÒ? I
,
ÒÒI J

logoString
ÒÒK U
)
ÒÒU V
;
ÒÒV W
DateTime
ÚÚ 
fechaActual
ÚÚ $
=
ÚÚ% &
DateTimeUtil
ÚÚ& 2
.
ÚÚ2 3
FechaActual
ÚÚ3 >
(
ÚÚ> ?
)
ÚÚ? @
;
ÚÚ@ A
ReportParameter
ÛÛ  
fechaActualSistema
ÛÛ  2
=
ÛÛ3 4
new
ÛÛ5 8
ReportParameter
ÛÛ9 H
(
ÛÛH I
$str
ÛÛI V
,
ÛÛV W
fechaActual
ÛÛX c
.
ÛÛc d
ToString
ÛÛd l
(
ÛÛl m
)
ÛÛm n
)
ÛÛn o
;
ÛÛo p
ReportParameter
ÙÙ 
empleadoSede
ÙÙ  ,
=
ÙÙ- .
new
ÙÙ/ 2
ReportParameter
ÙÙ3 B
(
ÙÙB C
$str
ÙÙC L
,
ÙÙL M
fromRequest
ÙÙN Y
?
ÙÙZ [
ProfileData
ÙÙ\ g
(
ÙÙg h
)
ÙÙh i
.
ÙÙi j
Empleado
ÙÙj r
.
ÙÙr s 
NombresYApellidosÙÙs Ñ
:ÙÙÖ Ü
$strÙÙá ä
)ÙÙä ã
;ÙÙã å
var
ˆˆ 
	rptviewer
ˆˆ 
=
ˆˆ 
new
ˆˆ  #
ReportViewer
ˆˆ$ 0
(
ˆˆ0 1
)
ˆˆ1 2
;
ˆˆ2 3
string
¯¯ 
path
¯¯ 
=
¯¯ 
$str
¯¯ ^
;
¯¯^ _
	rptviewer
˘˘ 
.
˘˘ 
LocalReport
˘˘ %
.
˘˘% &

ReportPath
˘˘& 0
=
˘˘1 2
fromRequest
˘˘3 >
?
˘˘? @
Request
˘˘A H
.
˘˘H I
MapPath
˘˘I P
(
˘˘P Q
Request
˘˘Q X
.
˘˘X Y
ApplicationPath
˘˘Y h
)
˘˘h i
+
˘˘j k
path
˘˘l p
:
˘˘q r!
HostingEnvironment˘˘s Ö
.˘˘Ö Ü
MapPath˘˘Ü ç
(˘˘ç é
path˘˘é í
)˘˘í ì
;˘˘ì î
	rptviewer
˚˚ 
.
˚˚ 
LocalReport
˚˚ %
.
˚˚% &
SetParameters
˚˚& 3
(
˚˚3 4
new
˚˚4 7
ReportParameter
˚˚8 G
[
˚˚G H
]
˚˚H I
{
˚˚J K"
nombreCentroAtencion
˚˚L `
,
˚˚` a
nombreDeSede
˚˚b n
,
˚˚n o"
parametroFechaDesde˚˚p É
,˚˚É Ñ#
parametroFechaHasta˚˚Ö ò
,˚˚ò ô
logoSede˚˚ö ¢
,˚˚¢ £"
fechaActualSistema˚˚§ ∂
,˚˚∂ ∑
empleadoSede˚˚∏ ƒ
}˚˚≈ ∆
)˚˚∆ «
;˚˚« »
ReportDataSource
˝˝  3
%rptdatasourceVentasClientesonfirmadas
˝˝! F
=
˝˝G H
new
˝˝I L
ReportDataSource
˝˝M ]
(
˝˝] ^
$str
˝˝^ r
,
˝˝r s(
ventasClientesConfirmadas˝˝t ç
)˝˝ç é
;˝˝é è
ReportDataSource
˛˛  2
$rptdatasourceVentasClientesInvalidas
˛˛! E
=
˛˛F G
new
˛˛H K
ReportDataSource
˛˛L \
(
˛˛\ ]
$str
˛˛] q
,
˛˛q r(
ventasClientesInvalidadas˛˛s å
)˛˛å ç
;˛˛ç é
	rptviewer
ÅÅ 
.
ÅÅ 
ProcessingMode
ÅÅ (
=
ÅÅ) *
ProcessingMode
ÅÅ+ 9
.
ÅÅ9 :
Local
ÅÅ: ?
;
ÅÅ? @
	rptviewer
ÉÉ 
.
ÉÉ 
LocalReport
ÉÉ %
.
ÉÉ% &
DataSources
ÉÉ& 1
.
ÉÉ1 2
Add
ÉÉ2 5
(
ÉÉ5 63
%rptdatasourceVentasClientesonfirmadas
ÉÉ6 [
)
ÉÉ[ \
;
ÉÉ\ ]
	rptviewer
ÑÑ 
.
ÑÑ 
LocalReport
ÑÑ %
.
ÑÑ% &
DataSources
ÑÑ& 1
.
ÑÑ1 2
Add
ÑÑ2 5
(
ÑÑ5 62
$rptdatasourceVentasClientesInvalidas
ÑÑ6 Z
)
ÑÑZ [
;
ÑÑ[ \
	rptviewer
áá 
.
áá !
SizeToReportContent
áá -
=
áá. /
true
áá0 4
;
áá4 5
	rptviewer
àà 
.
àà 
Width
àà 
=
àà  !
Unit
àà" &
.
àà& '

Percentage
àà' 1
(
àà1 2
$num
àà2 5
)
àà5 6
;
àà6 7
	rptviewer
ââ 
.
ââ 
Height
ââ  
=
ââ! "
Unit
ââ# '
.
ââ' (

Percentage
ââ( 2
(
ââ2 3
$num
ââ3 6
)
ââ6 7
;
ââ7 8
return
ãã 
	rptviewer
ãã  
;
ãã  !
}
åå 
catch
çç 
(
çç 
	Exception
çç 
e
çç 
)
çç 
{
éé 
throw
èè 
new
èè !
ControllerException
èè -
(
èè- .
$str
èè. m
,
èèm n
e
èèo p
)
èèp q
;
èèq r
}
êê 
}
ëë 	
public
òò 
ActionResult
òò 2
$ReporteDeVentaDelVendedorPorConcepto
òò @
(
òò@ A
string
òòA G
fechaInicio
òòH S
,
òòS T
string
òòU [
fechaFin
òò\ d
)
òòd e
{
ôô 	
try
öö 
{
õõ 
DateTime
ùù 

fechaDesde
ùù #
=
ùù$ %
DateTimeUtil
ùù& 2
.
ùù2 39
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ùù3 ^
(
ùù^ _
fechaInicio
ùù_ j
)
ùùj k
;
ùùk l
DateTime
ûû 

fechaHasta
ûû #
=
ûû$ %
DateTimeUtil
ûû& 2
.
ûû2 39
+ObtenerFechaHastaConPrecisionDeMilisegundos
ûû3 ^
(
ûû^ _
fechaFin
ûû_ g
)
ûûg h
;
ûûh i
List
°° 
<
°° +
ResumenTransaccionPorVendedor
°° 2
>
°°2 3&
resumenVentasConfirmadas
°°4 L
=
°°M N
operacionLogica
°°O ^
.
°°^ _;
,ObtenerResumenDeVentasPorVendedorConfirmadas°°_ ã
(°°ã å
new°°å è
int°°ê ì
[°°ì î
]°°î ï
{°°ñ ó
ProfileData°°ò £
(°°£ §
)°°§ •
.°°• ¶
Empleado°°¶ Æ
.°°Æ Ø
Id°°Ø ±
}°°≤ ≥
,°°≥ ¥

fechaDesde°°µ ø
,°°ø ¿

fechaHasta°°¡ À
)°°À Ã
;°°Ã Õ
List
¢¢ 
<
¢¢ +
ResumenTransaccionPorVendedor
¢¢ 2
>
¢¢2 3&
resumenVentasInvalidadas
¢¢4 L
=
¢¢M N
operacionLogica
¢¢O ^
.
¢¢^ _;
,ObtenerResumenDeVentasPorVendedorInvalidadas¢¢_ ã
(¢¢ã å
new¢¢å è
int¢¢ê ì
[¢¢ì î
]¢¢î ï
{¢¢ñ ó
ProfileData¢¢ò £
(¢¢£ §
)¢¢§ •
.¢¢• ¶
Empleado¢¢¶ Æ
.¢¢Æ Ø
Id¢¢Ø ±
}¢¢≤ ≥
,¢¢≥ ¥

fechaDesde¢¢µ ø
,¢¢ø ¿

fechaHasta¢¢¡ À
)¢¢À Ã
;¢¢Ã Õ
List
§§ 
<
§§ 3
%Resumen_transaccion_Venta_PorConcepto
§§ :
>
§§: ;&
detalleVentasConfirmadas
§§< T
=
§§U V
operacionLogica
§§W f
.
§§f g9
*ObtenerOrdenesDeVentaPorConceptConfirmadas§§g ë
(§§ë í
ProfileData§§í ù
(§§ù û
)§§û ü
.§§ü †
Empleado§§† ®
.§§® ©
Id§§© ´
,§§´ ¨

fechaDesde§§≠ ∑
,§§∑ ∏

fechaHasta§§π √
)§§√ ƒ
;§§ƒ ≈
List
•• 
<
•• 3
%Resumen_transaccion_Venta_PorConcepto
•• :
>
••: ;&
detalleVentasInvalidadas
••< T
=
••U V
operacionLogica
••W f
.
••f g:
+ObtenerOrdenesDeVentaPorConceptoInvalidadas••g í
(••í ì
ProfileData••ì û
(••û ü
)••ü †
.••† °
Empleado••° ©
.••© ™
Id••™ ¨
,••¨ ≠

fechaDesde••Æ ∏
,••∏ π

fechaHasta••∫ ƒ
)••ƒ ≈
;••≈ ∆6
(EstablecimientoComercialExtendidoConLogo
¶¶ 8
sede
¶¶9 =
=
¶¶> ?
ObtenerSede
¶¶@ K
(
¶¶K L
)
¶¶L M
;
¶¶M N
ReportParameter
©© 
nombreDeEmpresa
©©  /
=
©©0 1
new
©©2 5
ReportParameter
©©6 E
(
©©E F
$str
©©F R
,
©©R S
sede
©©T X
.
©©X Y
Nombre
©©Y _
)
©©_ `
;
©©` a
ReportParameter
´´ "
nombreCentroAtencion
´´  4
=
´´5 6
new
´´7 :
ReportParameter
´´; J
(
´´J K
$str
´´K a
,
´´a b
ProfileData
´´c n
(
´´n o
)
´´o p
.
´´p q1
"NombreCentroDeAtencionSeleccionado´´q ì
)´´ì î
;´´î ï
ReportParameter
¨¨ !
parametroFechaDesde
¨¨  3
=
¨¨4 5
new
¨¨6 9
ReportParameter
¨¨: I
(
¨¨I J
$str
¨¨J V
,
¨¨V W

fechaDesde
¨¨X b
.
¨¨b c
ToString
¨¨c k
(
¨¨k l
)
¨¨l m
)
¨¨m n
;
¨¨n o
ReportParameter
≠≠ !
parametroFechaHasta
≠≠  3
=
≠≠4 5
new
≠≠6 9
ReportParameter
≠≠: I
(
≠≠I J
$str
≠≠J V
,
≠≠V W

fechaHasta
≠≠X b
.
≠≠b c
ToString
≠≠c k
(
≠≠k l
)
≠≠l m
)
≠≠m n
;
≠≠n o
ReportParameter
ÆÆ 
parametroEmpleado
ÆÆ  1
=
ÆÆ2 3
new
ÆÆ4 7
ReportParameter
ÆÆ8 G
(
ÆÆG H
$str
ÆÆH R
,
ÆÆR S
ProfileData
ÆÆT _
(
ÆÆ_ `
)
ÆÆ` a
.
ÆÆa b
Empleado
ÆÆb j
.
ÆÆj k
NombresYApellidos
ÆÆk |
.
ÆÆ| }
ToStringÆÆ} Ö
(ÆÆÖ Ü
)ÆÆÜ á
)ÆÆá à
;ÆÆà â
string
∞∞ 

logoString
∞∞ !
=
∞∞" #
Convert
∞∞$ +
.
∞∞+ ,
ToBase64String
∞∞, :
(
∞∞: ;
sede
∞∞; ?
.
∞∞? @
Logo
∞∞@ D
,
∞∞D E
$num
∞∞F G
,
∞∞G H
sede
∞∞I M
.
∞∞M N
Logo
∞∞N R
.
∞∞R S
Length
∞∞S Y
)
∞∞Y Z
;
∞∞Z [
ReportParameter
±± 
logoSede
±±  (
=
±±) *
new
±±+ .
ReportParameter
±±/ >
(
±±> ?
$str
±±? I
,
±±I J

logoString
±±K U
)
±±U V
;
±±V W
DateTime
≥≥ 
fechaActual
≥≥ $
=
≥≥% &
DateTimeUtil
≥≥& 2
.
≥≥2 3
FechaActual
≥≥3 >
(
≥≥> ?
)
≥≥? @
;
≥≥@ A
ReportParameter
¥¥  
fechaActualSistema
¥¥  2
=
¥¥3 4
new
¥¥5 8
ReportParameter
¥¥9 H
(
¥¥H I
$str
¥¥I V
,
¥¥V W
fechaActual
¥¥X c
.
¥¥c d
ToString
¥¥d l
(
¥¥l m
)
¥¥m n
)
¥¥n o
;
¥¥o p
ReportParameter
∂∂ 
empleadoSede
∂∂  ,
=
∂∂- .
new
∂∂/ 2
ReportParameter
∂∂3 B
(
∂∂B C
$str
∂∂C L
,
∂∂L M
ProfileData
∂∂N Y
(
∂∂Y Z
)
∂∂Z [
.
∂∂[ \
Empleado
∂∂\ d
.
∂∂d e
NombresYApellidos
∂∂e v
)
∂∂v w
;
∂∂w x
var
∏∏ 
	rptviewer
∏∏ 
=
∏∏ 
new
∏∏  #
ReportViewer
∏∏$ 0
(
∏∏0 1
)
∏∏1 2
;
∏∏2 3
	rptviewer
∫∫ 
.
∫∫ 
LocalReport
∫∫ %
.
∫∫% &

ReportPath
∫∫& 0
=
∫∫1 2
Request
∫∫3 :
.
∫∫: ;
MapPath
∫∫; B
(
∫∫B C
Request
∫∫C J
.
∫∫J K
ApplicationPath
∫∫K Z
)
∫∫Z [
+
∫∫\ ]
$str∫∫^ ú
;∫∫ú ù
	rptviewer
ºº 
.
ºº 
LocalReport
ºº %
.
ºº% &
SetParameters
ºº& 3
(
ºº3 4
new
ºº4 7
ReportParameter
ºº8 G
[
ººG H
]
ººH I
{
ººJ K"
nombreCentroAtencion
ººL `
,
ºº` a
nombreDeEmpresa
ººb q
,
ººq r"
parametroFechaDesdeººs Ü
,ººÜ á#
parametroFechaHastaººà õ
,ººõ ú!
parametroEmpleadoººù Æ
,ººÆ Ø
logoSedeºº∞ ∏
,ºº∏ π
empleadoSedeºº∫ ∆
,ºº∆ «"
fechaActualSistemaºº» ⁄
}ºº€ ‹
)ºº‹ ›
;ºº› ﬁ
ReportDataSource
ææ  3
%rptdatasourceResumenVentasConfirmadas
ææ! F
=
ææG H
new
ææI L
ReportDataSource
ææM ]
(
ææ] ^
$str
ææ^ y
,
ææy z'
resumenVentasConfirmadasææ{ ì
)ææì î
;ææî ï
ReportDataSource
øø  1
#rptdatasourceResumenVentasInvalidas
øø! D
=
øøE F
new
øøG J
ReportDataSource
øøK [
(
øø[ \
$str
øø\ w
,
øøw x'
resumenVentasInvalidadasøøy ë
)øøë í
;øøí ì
ReportDataSource
¡¡  3
%rptdatasourceDetalleVentasConfirmadas
¡¡! F
=
¡¡G H
new
¡¡I L
ReportDataSource
¡¡M ]
(
¡¡] ^
$str
¡¡^ y
,
¡¡y z'
detalleVentasConfirmadas¡¡{ ì
)¡¡ì î
;¡¡î ï
ReportDataSource
¬¬  1
#rptdatasourceDetalleVentasInvalidas
¬¬! D
=
¬¬E F
new
¬¬G J
ReportDataSource
¬¬K [
(
¬¬[ \
$str
¬¬\ w
,
¬¬w x'
detalleVentasInvalidadas¬¬y ë
)¬¬ë í
;¬¬í ì
	rptviewer
≈≈ 
.
≈≈ 
ProcessingMode
≈≈ (
=
≈≈) *
ProcessingMode
≈≈+ 9
.
≈≈9 :
Local
≈≈: ?
;
≈≈? @
	rptviewer
«« 
.
«« 
LocalReport
«« %
.
««% &
DataSources
««& 1
.
««1 2
Add
««2 5
(
««5 63
%rptdatasourceResumenVentasConfirmadas
««6 [
)
««[ \
;
««\ ]
	rptviewer
»» 
.
»» 
LocalReport
»» %
.
»»% &
DataSources
»»& 1
.
»»1 2
Add
»»2 5
(
»»5 61
#rptdatasourceResumenVentasInvalidas
»»6 Y
)
»»Y Z
;
»»Z [
	rptviewer
ÀÀ 
.
ÀÀ 
LocalReport
ÀÀ %
.
ÀÀ% &
DataSources
ÀÀ& 1
.
ÀÀ1 2
Add
ÀÀ2 5
(
ÀÀ5 63
%rptdatasourceDetalleVentasConfirmadas
ÀÀ6 [
)
ÀÀ[ \
;
ÀÀ\ ]
	rptviewer
ÃÃ 
.
ÃÃ 
LocalReport
ÃÃ %
.
ÃÃ% &
DataSources
ÃÃ& 1
.
ÃÃ1 2
Add
ÃÃ2 5
(
ÃÃ5 61
#rptdatasourceDetalleVentasInvalidas
ÃÃ6 Y
)
ÃÃY Z
;
ÃÃZ [
	rptviewer
œœ 
.
œœ !
SizeToReportContent
œœ -
=
œœ. /
true
œœ0 4
;
œœ4 5
	rptviewer
–– 
.
–– 
Width
–– 
=
––  !
Unit
––" &
.
––& '

Percentage
––' 1
(
––1 2
$num
––2 5
)
––5 6
;
––6 7
	rptviewer
—— 
.
—— 
Height
——  
=
——! "
Unit
——# '
.
——' (

Percentage
——( 2
(
——2 3
$num
——3 6
)
——6 7
;
——7 8
ViewBag
”” 
.
”” 
ReportViewer
”” $
=
””% &
	rptviewer
””' 0
;
””0 1
return
‘‘ 
View
‘‘ 
(
‘‘ 
$str
‘‘ 1
)
‘‘1 2
;
‘‘2 3
}
’’ 
catch
÷÷ 
(
÷÷ 
	Exception
÷÷ 
e
÷÷ 
)
÷÷ 
{
◊◊ 
return
ÿÿ 
View
ÿÿ 
(
ÿÿ 
$str
ÿÿ <
)
ÿÿ< =
;
ÿÿ= >
}
ŸŸ 
}
⁄⁄ 	
public
ﬂﬂ 
ActionResult
ﬂﬂ $
ReporteDecompraPorTipo
ﬂﬂ 2
(
ﬂﬂ2 3
string
ﬂﬂ3 9
fechaInicio
ﬂﬂ: E
,
ﬂﬂE F
string
ﬂﬂG M
fechaFin
ﬂﬂN V
,
ﬂﬂV W
int
ﬂﬂX [
tipoComprobante
ﬂﬂ\ k
)
ﬂﬂk l
{
‡‡ 	
try
·· 
{
‚‚ 
DateTime
„„ 

fechaDesde
„„ #
=
„„$ %
DateTimeUtil
„„& 2
.
„„2 3E
7ObtenerFechaDesdeConPrecisionDeHorasMinutosMilisegundos
„„3 j
(
„„j k
fechaInicio
„„k v
)
„„v w
;
„„w x
DateTime
‰‰ 

fechaHasta
‰‰ #
=
‰‰$ %
DateTimeUtil
‰‰& 2
.
‰‰2 3E
7ObtenerFechaHastaConPrecisionDeHorasMinutosMilisegundos
‰‰3 j
(
‰‰j k
fechaFin
‰‰k s
)
‰‰s t
;
‰‰t u
List
ÊÊ 
<
ÊÊ 
Resumen_Compra
ÊÊ #
>
ÊÊ# $
comprasNoGravadas
ÊÊ% 6
=
ÊÊ7 8
operacionLogica
ÊÊ9 H
.
ÊÊH I4
&ObtenerResumenesCompraDeTipoNoGravadas
ÊÊI o
(
ÊÊo p
ProfileData
ÊÊp {
(
ÊÊ{ |
)
ÊÊ| }
.
ÊÊ} ~
EmpleadoÊÊ~ Ü
.ÊÊÜ á
IdÊÊá â
,ÊÊâ ä
ProfileDataÊÊã ñ
(ÊÊñ ó
)ÊÊó ò
.ÊÊò ô.
IdCentroDeAtencionSeleccionadoÊÊô ∑
,ÊÊ∑ ∏

fechaDesdeÊÊπ √
,ÊÊ√ ƒ

fechaHastaÊÊ≈ œ
,ÊÊœ –
tipoComprobanteÊÊ— ‡
)ÊÊ‡ ·
;ÊÊ· ‚
List
ÁÁ 
<
ÁÁ 
Resumen_Compra
ÁÁ #
>
ÁÁ# $6
(comprasGravadasDestinadasAVentasGravadas
ÁÁ% M
=
ÁÁN O
operacionLogica
ÁÁP _
.
ÁÁ_ `L
=ObtenerResumenesCompraDeTipoGravadasDestinadasAVentasGravadasÁÁ` ù
(ÁÁù û
ProfileDataÁÁû ©
(ÁÁ© ™
)ÁÁ™ ´
.ÁÁ´ ¨
EmpleadoÁÁ¨ ¥
.ÁÁ¥ µ
IdÁÁµ ∑
,ÁÁ∑ ∏
ProfileDataÁÁπ ƒ
(ÁÁƒ ≈
)ÁÁ≈ ∆
.ÁÁ∆ «.
IdCentroDeAtencionSeleccionadoÁÁ« Â
,ÁÁÂ Ê

fechaDesdeÁÁÁ Ò
,ÁÁÒ Ú

fechaHastaÁÁÛ ˝
,ÁÁ˝ ˛
tipoComprobanteÁÁˇ é
)ÁÁé è
;ÁÁè ê
List
ËË 
<
ËË 
Resumen_Compra
ËË #
>
ËË# $8
*comprasGravadasDestinadasAVentasNoGravadas
ËË% O
=
ËËP Q
operacionLogica
ËËR a
.
ËËa bN
?ObtenerResumenesCompraDeTipoGravadasDestinadasAVentasNoGravadasËËb °
(ËË° ¢
ProfileDataËË¢ ≠
(ËË≠ Æ
)ËËÆ Ø
.ËËØ ∞
EmpleadoËË∞ ∏
.ËË∏ π
IdËËπ ª
,ËËª º
ProfileDataËËΩ »
(ËË» …
)ËË…  
.ËË  À.
IdCentroDeAtencionSeleccionadoËËÀ È
,ËËÈ Í

fechaDesdeËËÎ ı
,ËËı ˆ

fechaHastaËË˜ Å
,ËËÅ Ç
tipoComprobanteËËÉ í
)ËËí ì
;ËËì î
List
ÈÈ 
<
ÈÈ 
Resumen_Compra
ÈÈ #
>
ÈÈ# $A
3comprasGravadasDestinadasAVentasGravadasYNoGravadas
ÈÈ% X
=
ÈÈY Z
operacionLogica
ÈÈ[ j
.
ÈÈj kW
HObtenerResumenesCompraDeTipoGravadasDestinadasAVentasGravadasYNoGravadasÈÈk ≥
(ÈÈ≥ ¥
ProfileDataÈÈ¥ ø
(ÈÈø ¿
)ÈÈ¿ ¡
.ÈÈ¡ ¬
EmpleadoÈÈ¬  
.ÈÈ  À
IdÈÈÀ Õ
,ÈÈÕ Œ
ProfileDataÈÈœ ⁄
(ÈÈ⁄ €
)ÈÈ€ ‹
.ÈÈ‹ ›.
IdCentroDeAtencionSeleccionadoÈÈ› ˚
,ÈÈ˚ ¸

fechaDesdeÈÈ˝ á
,ÈÈá à

fechaHastaÈÈâ ì
,ÈÈì î
tipoComprobanteÈÈï §
)ÈÈ§ •
;ÈÈ• ¶
List
ÎÎ 
<
ÎÎ !
ResumenDeTipoCompra
ÎÎ (
>
ÎÎ( )!
resumenesTipoCompra
ÎÎ* =
=
ÎÎ> ?!
ResumenDeTipoCompra
ÎÎ@ S
.
ÎÎS T
	Convertir
ÎÎT ]
(
ÎÎ] ^
comprasNoGravadas
ÎÎ^ o
,
ÎÎo p7
(comprasGravadasDestinadasAVentasGravadasÎÎq ô
,ÎÎô ö:
*comprasGravadasDestinadasAVentasNoGravadasÎÎõ ≈
,ÎÎ≈ ∆C
3comprasGravadasDestinadasAVentasGravadasYNoGravadasÎÎ« ˙
)ÎÎ˙ ˚
;ÎÎ˚ ¸
var
ÌÌ 
	rptviewer
ÌÌ 
=
ÌÌ 
new
ÌÌ  #
ReportViewer
ÌÌ$ 0
(
ÌÌ0 1
)
ÌÌ1 2
;
ÌÌ2 36
(EstablecimientoComercialExtendidoConLogo
ÓÓ 8
sede
ÓÓ9 =
=
ÓÓ> ?
ObtenerSede
ÓÓ@ K
(
ÓÓK L
)
ÓÓL M
;
ÓÓM N
DateTime
ÔÔ 
fechaActual
ÔÔ $
=
ÔÔ% &
DateTimeUtil
ÔÔ& 2
.
ÔÔ2 3
FechaActual
ÔÔ3 >
(
ÔÔ> ?
)
ÔÔ? @
;
ÔÔ@ A
ReportParameter
 !
parametroFechaDesde
  3
=
4 5
new
6 9
ReportParameter
: I
(
I J
$str
J V
,
V W

fechaDesde
X b
.
b c
ToString
c k
(
k l
)
l m
)
m n
;
n o
ReportParameter
ÒÒ !
parametroFechaHasta
ÒÒ  3
=
ÒÒ4 5
new
ÒÒ6 9
ReportParameter
ÒÒ: I
(
ÒÒI J
$str
ÒÒJ V
,
ÒÒV W

fechaHasta
ÒÒX b
.
ÒÒb c
ToString
ÒÒc k
(
ÒÒk l
)
ÒÒl m
)
ÒÒm n
;
ÒÒn o
ReportParameter
ÚÚ  
fechaActualSistema
ÚÚ  2
=
ÚÚ3 4
new
ÚÚ5 8
ReportParameter
ÚÚ9 H
(
ÚÚH I
$str
ÚÚI V
,
ÚÚV W
fechaActual
ÚÚX c
.
ÚÚc d
ToString
ÚÚd l
(
ÚÚl m
)
ÚÚm n
)
ÚÚn o
;
ÚÚo p
ReportParameter
ÛÛ 

nombreSede
ÛÛ  *
=
ÛÛ+ ,
new
ÛÛ- 0
ReportParameter
ÛÛ1 @
(
ÛÛ@ A
$str
ÛÛA P
,
ÛÛP Q
sede
ÛÛR V
.
ÛÛV W
Nombre
ÛÛW ]
.
ÛÛ] ^
ToString
ÛÛ^ f
(
ÛÛf g
)
ÛÛg h
)
ÛÛh i
;
ÛÛi j
string
ÙÙ 

logoString
ÙÙ !
=
ÙÙ" #
Convert
ÙÙ$ +
.
ÙÙ+ ,
ToBase64String
ÙÙ, :
(
ÙÙ: ;
sede
ÙÙ; ?
.
ÙÙ? @
Logo
ÙÙ@ D
,
ÙÙD E
$num
ÙÙF G
,
ÙÙG H
sede
ÙÙI M
.
ÙÙM N
Logo
ÙÙN R
.
ÙÙR S
Length
ÙÙS Y
)
ÙÙY Z
;
ÙÙZ [
ReportParameter
ıı 
logoSede
ıı  (
=
ıı) *
new
ıı+ .
ReportParameter
ıı/ >
(
ıı> ?
$str
ıı? I
,
ııI J

logoString
ııK U
)
ııU V
;
ııV W
ReportParameter
ˆˆ "
nombreCentroAtencion
ˆˆ  4
=
ˆˆ5 6
new
ˆˆ7 :
ReportParameter
ˆˆ; J
(
ˆˆJ K
$str
ˆˆK a
,
ˆˆa b
ProfileData
ˆˆc n
(
ˆˆn o
)
ˆˆo p
.
ˆˆp q1
"NombreCentroDeAtencionSeleccionadoˆˆq ì
.ˆˆì î
ToStringˆˆî ú
(ˆˆú ù
)ˆˆù û
)ˆˆû ü
;ˆˆü †
ReportParameter
˜˜ 
empleadoSede
˜˜  ,
=
˜˜- .
new
˜˜/ 2
ReportParameter
˜˜3 B
(
˜˜B C
$str
˜˜C L
,
˜˜L M
ProfileData
˜˜N Y
(
˜˜Y Z
)
˜˜Z [
.
˜˜[ \
Empleado
˜˜\ d
.
˜˜d e
NombresYApellidos
˜˜e v
.
˜˜v w
ToString
˜˜w 
(˜˜ Ä
)˜˜Ä Å
)˜˜Å Ç
;˜˜Ç É
	rptviewer
˘˘ 
.
˘˘ 
LocalReport
˘˘ %
.
˘˘% &

ReportPath
˘˘& 0
=
˘˘1 2
Request
˘˘3 :
.
˘˘: ;
MapPath
˘˘; B
(
˘˘B C
Request
˘˘C J
.
˘˘J K
ApplicationPath
˘˘K Z
)
˘˘Z [
+
˘˘\ ]
$str˘˘^ í
;˘˘í ì
	rptviewer
˙˙ 
.
˙˙ 
LocalReport
˙˙ %
.
˙˙% &
SetParameters
˙˙& 3
(
˙˙3 4
new
˙˙4 7
ReportParameter
˙˙8 G
[
˙˙G H
]
˙˙H I
{
˙˙J K!
parametroFechaDesde
˙˙L _
,
˙˙_ `!
parametroFechaHasta
˙˙a t
,
˙˙t u

nombreSede˙˙v Ä
,˙˙Ä Å
logoSede˙˙Ç ä
,˙˙ä ã"
fechaActualSistema˙˙å û
,˙˙û ü
empleadoSede˙˙† ¨
,˙˙¨ ≠$
nombreCentroAtencion˙˙Æ ¬
}˙˙√ ƒ
)˙˙ƒ ≈
;˙˙≈ ∆
ReportDataSource
¸¸  ,
rptdatasourceComprasNoGravadas
¸¸! ?
=
¸¸@ A
new
¸¸B E
ReportDataSource
¸¸F V
(
¸¸V W
$str
¸¸W q
,
¸¸q r 
comprasNoGravadas¸¸s Ñ
)¸¸Ñ Ö
;¸¸Ö Ü
ReportDataSource
˝˝  ;
-rptdatasourceComprasDestinadasAVentasGravadas
˝˝! N
=
˝˝O P
new
˝˝Q T
ReportDataSource
˝˝U e
(
˝˝e f
$str˝˝f ó
,˝˝ó ò8
(comprasGravadasDestinadasAVentasGravadas˝˝ô ¡
)˝˝¡ ¬
;˝˝¬ √
ReportDataSource
˛˛  =
/rptdatasourceComprasDestinadasAVentasNoGravadas
˛˛! P
=
˛˛Q R
new
˛˛S V
ReportDataSource
˛˛W g
(
˛˛g h
$str˛˛h õ
,˛˛õ ú:
*comprasGravadasDestinadasAVentasNoGravadas˛˛ù «
)˛˛« »
;˛˛» …
ReportDataSource
ˇˇ  F
8rptdatasourceComprasDestinadasAVentasGravadasYNoGravadas
ˇˇ! Y
=
ˇˇZ [
new
ˇˇ\ _
ReportDataSource
ˇˇ` p
(
ˇˇp q
$strˇˇq ≠
,ˇˇ≠ ÆC
3comprasGravadasDestinadasAVentasGravadasYNoGravadasˇˇØ ‚
)ˇˇ‚ „
;ˇˇ„ ‰
ReportDataSource
ÄÄ  .
 rptdatasourceResumenesTipoCompra
ÄÄ! A
=
ÄÄB C
new
ÄÄD G
ReportDataSource
ÄÄH X
(
ÄÄX Y
$str
ÄÄY u
,
ÄÄu v"
resumenesTipoCompraÄÄw ä
)ÄÄä ã
;ÄÄã å
	rptviewer
ÇÇ 
.
ÇÇ 
ProcessingMode
ÇÇ (
=
ÇÇ) *
ProcessingMode
ÇÇ+ 9
.
ÇÇ9 :
Local
ÇÇ: ?
;
ÇÇ? @
	rptviewer
ÉÉ 
.
ÉÉ 
LocalReport
ÉÉ %
.
ÉÉ% &
DataSources
ÉÉ& 1
.
ÉÉ1 2
Add
ÉÉ2 5
(
ÉÉ5 6,
rptdatasourceComprasNoGravadas
ÉÉ6 T
)
ÉÉT U
;
ÉÉU V
	rptviewer
ÑÑ 
.
ÑÑ 
LocalReport
ÑÑ %
.
ÑÑ% &
DataSources
ÑÑ& 1
.
ÑÑ1 2
Add
ÑÑ2 5
(
ÑÑ5 6;
-rptdatasourceComprasDestinadasAVentasGravadas
ÑÑ6 c
)
ÑÑc d
;
ÑÑd e
	rptviewer
ÖÖ 
.
ÖÖ 
LocalReport
ÖÖ %
.
ÖÖ% &
DataSources
ÖÖ& 1
.
ÖÖ1 2
Add
ÖÖ2 5
(
ÖÖ5 6=
/rptdatasourceComprasDestinadasAVentasNoGravadas
ÖÖ6 e
)
ÖÖe f
;
ÖÖf g
	rptviewer
ÜÜ 
.
ÜÜ 
LocalReport
ÜÜ %
.
ÜÜ% &
DataSources
ÜÜ& 1
.
ÜÜ1 2
Add
ÜÜ2 5
(
ÜÜ5 6F
8rptdatasourceComprasDestinadasAVentasGravadasYNoGravadas
ÜÜ6 n
)
ÜÜn o
;
ÜÜo p
	rptviewer
áá 
.
áá 
LocalReport
áá %
.
áá% &
DataSources
áá& 1
.
áá1 2
Add
áá2 5
(
áá5 6.
 rptdatasourceResumenesTipoCompra
áá6 V
)
ááV W
;
ááW X
	rptviewer
àà 
.
àà !
SizeToReportContent
àà -
=
àà. /
true
àà0 4
;
àà4 5
	rptviewer
ââ 
.
ââ 
Width
ââ 
=
ââ  !
Unit
ââ" &
.
ââ& '

Percentage
ââ' 1
(
ââ1 2
$num
ââ2 5
)
ââ5 6
;
ââ6 7
	rptviewer
ää 
.
ää 
Height
ää  
=
ää! "
Unit
ää# '
.
ää' (

Percentage
ää( 2
(
ää2 3
$num
ää3 6
)
ää6 7
;
ää7 8
ViewBag
åå 
.
åå 
ReportViewer
åå $
=
åå% &
	rptviewer
åå' 0
;
åå0 1
return
çç 
View
çç 
(
çç 
$str
çç 1
)
çç1 2
;
çç2 3
}
éé 
catch
èè 
(
èè 
	Exception
èè 
e
èè 
)
èè 
{
êê 
HttpContext
ëë 
.
ëë 
Response
ëë $
.
ëë$ %

StatusCode
ëë% /
=
ëë0 1
$num
ëë2 5
;
ëë5 6
return
íí 
View
íí 
(
íí 
$str
íí <
)
íí< =
;
íí= >
}
ìì 
}
îî 	
public
ïï 
ActionResult
ïï +
ReporteDecompraPorComprobante
ïï 9
(
ïï9 :
string
ïï: @
fechaInicio
ïïA L
,
ïïL M
string
ïïN T
fechaFin
ïïU ]
)
ïï] ^
{
ññ 	
try
óó 
{
òò 
DateTime
ôô 

fechaDesde
ôô #
=
ôô$ %
DateTimeUtil
ôô& 2
.
ôô2 3E
7ObtenerFechaDesdeConPrecisionDeHorasMinutosMilisegundos
ôô3 j
(
ôôj k
fechaInicio
ôôk v
)
ôôv w
;
ôôw x
DateTime
öö 

fechaHasta
öö #
=
öö$ %
DateTimeUtil
öö& 2
.
öö2 3E
7ObtenerFechaHastaConPrecisionDeHorasMinutosMilisegundos
öö3 j
(
ööj k
fechaFin
öök s
)
öös t
;
ööt u
List
úú 
<
úú 
OrdenDeCompra
úú "
>
úú" #
ordenesDeCompra
úú$ 3
=
úú4 5
operacionLogica
úú6 E
.
úúE F/
!ObtenerOrdenesDeCompraConfirmadas
úúF g
(
úúg h
ProfileData
úúh s
(
úús t
)
úút u
.
úúu v
Empleado
úúv ~
.
úú~ 
Idúú Å
,úúÅ Ç
ProfileDataúúÉ é
(úúé è
)úúè ê
.úúê ë.
IdCentroDeAtencionSeleccionadoúúë Ø
,úúØ ∞

fechaDesdeúú± ª
,úúª º

fechaHastaúúΩ «
)úú« »
;úú» …
List
ûû 
<
ûû &
ReporteCompraComprobante
ûû -
>
ûû- ..
 reporteCompraComproanteViewModel
ûû/ O
=
ûûP Q&
ReporteCompraComprobante
ûûR j
.
ûûj k
Convert
ûûk r
(
ûûr s
ordenesDeCompraûûs Ç
)ûûÇ É
;ûûÉ Ñ
var
†† 
	rptviewer
†† 
=
†† 
new
††  #
ReportViewer
††$ 0
(
††0 1
)
††1 2
;
††2 36
(EstablecimientoComercialExtendidoConLogo
°° 8
sede
°°9 =
=
°°> ?
ObtenerSede
°°@ K
(
°°K L
)
°°L M
;
°°M N
ReportParameter
££ !
parametroFechaDesde
££  3
=
££4 5
new
££6 9
ReportParameter
££: I
(
££I J
$str
££J V
,
££V W

fechaDesde
££X b
.
££b c
ToString
££c k
(
££k l
)
££l m
)
££m n
;
££n o
ReportParameter
§§ !
parametroFechaHasta
§§  3
=
§§4 5
new
§§6 9
ReportParameter
§§: I
(
§§I J
$str
§§J V
,
§§V W

fechaHasta
§§X b
.
§§b c
ToString
§§c k
(
§§k l
)
§§l m
)
§§m n
;
§§n o
ReportParameter
•• 
nombreEmpresa
••  -
=
••. /
new
••0 3
ReportParameter
••4 C
(
••C D
$str
••D S
,
••S T
sede
••U Y
.
••Y Z
Nombre
••Z `
)
••` a
;
••a b
ReportParameter
¶¶ "
nombreCentroAtencion
¶¶  4
=
¶¶5 6
new
¶¶7 :
ReportParameter
¶¶; J
(
¶¶J K
$str
¶¶K a
,
¶¶a b
ProfileData
¶¶c n
(
¶¶n o
)
¶¶o p
.
¶¶p q1
"NombreCentroDeAtencionSeleccionado¶¶q ì
)¶¶ì î
;¶¶î ï
string
®® 

logoString
®® !
=
®®" #
Convert
®®$ +
.
®®+ ,
ToBase64String
®®, :
(
®®: ;
sede
®®; ?
.
®®? @
Logo
®®@ D
,
®®D E
$num
®®F G
,
®®G H
sede
®®I M
.
®®M N
Logo
®®N R
.
®®R S
Length
®®S Y
)
®®Y Z
;
®®Z [
ReportParameter
©© 
logoSede
©©  (
=
©©) *
new
©©+ .
ReportParameter
©©/ >
(
©©> ?
$str
©©? I
,
©©I J

logoString
©©K U
)
©©U V
;
©©V W
DateTime
´´ 
fechaActual
´´ $
=
´´% &
DateTimeUtil
´´& 2
.
´´2 3
FechaActual
´´3 >
(
´´> ?
)
´´? @
;
´´@ A
ReportParameter
¨¨  
fechaActualSistema
¨¨  2
=
¨¨3 4
new
¨¨5 8
ReportParameter
¨¨9 H
(
¨¨H I
$str
¨¨I V
,
¨¨V W
fechaActual
¨¨X c
.
¨¨c d
ToString
¨¨d l
(
¨¨l m
)
¨¨m n
)
¨¨n o
;
¨¨o p
ReportParameter
ÆÆ 
empleadoSede
ÆÆ  ,
=
ÆÆ- .
new
ÆÆ/ 2
ReportParameter
ÆÆ3 B
(
ÆÆB C
$str
ÆÆC L
,
ÆÆL M
ProfileData
ÆÆN Y
(
ÆÆY Z
)
ÆÆZ [
.
ÆÆ[ \
Empleado
ÆÆ\ d
.
ÆÆd e
NombresYApellidos
ÆÆe v
)
ÆÆv w
;
ÆÆw x
	rptviewer
∞∞ 
.
∞∞ 
LocalReport
∞∞ %
.
∞∞% &

ReportPath
∞∞& 0
=
∞∞1 2
Request
∞∞3 :
.
∞∞: ;
MapPath
∞∞; B
(
∞∞B C
Request
∞∞C J
.
∞∞J K
ApplicationPath
∞∞K Z
)
∞∞Z [
+
∞∞\ ]
$str∞∞^ ò
;∞∞ò ô
	rptviewer
±± 
.
±± 
LocalReport
±± %
.
±±% &
SetParameters
±±& 3
(
±±3 4
new
±±4 7
ReportParameter
±±8 G
[
±±G H
]
±±H I
{
±±J K!
parametroFechaDesde
±±L _
,
±±_ `!
parametroFechaHasta
±±a t
,
±±t u
nombreEmpresa±±v É
,±±É Ñ$
nombreCentroAtencion±±Ö ô
,±±ô ö
logoSede±±õ £
,±±£ §"
fechaActualSistema±±• ∑
,±±∑ ∏
empleadoSede±±π ≈
}±±∆ «
)±±« »
;±±» …
ReportDataSource
≤≤  .
 rptdatasourceVentaPorComprobante
≤≤! A
=
≤≤B C
new
≤≤D G
ReportDataSource
≤≤H X
(
≤≤X Y
$str
≤≤Y v
,
≤≤v w/
 reporteCompraComproanteViewModel≤≤x ò
)≤≤ò ô
;≤≤ô ö
	rptviewer
¥¥ 
.
¥¥ 
ProcessingMode
¥¥ (
=
¥¥) *
ProcessingMode
¥¥+ 9
.
¥¥9 :
Local
¥¥: ?
;
¥¥? @
	rptviewer
µµ 
.
µµ 
LocalReport
µµ %
.
µµ% &
DataSources
µµ& 1
.
µµ1 2
Add
µµ2 5
(
µµ5 6.
 rptdatasourceVentaPorComprobante
µµ6 V
)
µµV W
;
µµW X
	rptviewer
∂∂ 
.
∂∂ !
SizeToReportContent
∂∂ -
=
∂∂. /
true
∂∂0 4
;
∂∂4 5
	rptviewer
∑∑ 
.
∑∑ 
Width
∑∑ 
=
∑∑  !
Unit
∑∑" &
.
∑∑& '

Percentage
∑∑' 1
(
∑∑1 2
$num
∑∑2 5
)
∑∑5 6
;
∑∑6 7
	rptviewer
∏∏ 
.
∏∏ 
Height
∏∏  
=
∏∏! "
Unit
∏∏# '
.
∏∏' (

Percentage
∏∏( 2
(
∏∏2 3
$num
∏∏3 6
)
∏∏6 7
;
∏∏7 8
ViewBag
∫∫ 
.
∫∫ 
ReportViewer
∫∫ $
=
∫∫% &
	rptviewer
∫∫' 0
;
∫∫0 1
return
ªª 
View
ªª 
(
ªª 
$str
ªª 1
)
ªª1 2
;
ªª2 3
}
ºº 
catch
ΩΩ 
(
ΩΩ 
	Exception
ΩΩ 
e
ΩΩ 
)
ΩΩ 
{
ææ 
HttpContext
øø 
.
øø 
Response
øø $
.
øø$ %

StatusCode
øø% /
=
øø0 1
$num
øø2 5
;
øø5 6
return
¿¿ 
View
¿¿ 
(
¿¿ 
$str
¿¿ <
)
¿¿< =
;
¿¿= >
}
¡¡ 
}
¬¬ 	
public
ƒƒ 
ActionResult
ƒƒ (
ReporteDeCompraPorConcepto
ƒƒ 6
(
ƒƒ6 7
string
ƒƒ7 =
fechaInicio
ƒƒ> I
,
ƒƒI J
string
ƒƒK Q
fechaFin
ƒƒR Z
)
ƒƒZ [
{
≈≈ 	
try
∆∆ 
{
«« 
DateTime
»» 

fechaDesde
»» #
=
»»$ %
DateTimeUtil
»»& 2
.
»»2 39
+ObtenerFechaDesdeConPrecisionDeMilisegundos
»»3 ^
(
»»^ _
fechaInicio
»»_ j
)
»»j k
;
»»k l
DateTime
…… 

fechaHasta
…… #
=
……$ %
DateTimeUtil
……& 2
.
……2 39
+ObtenerFechaHastaConPrecisionDeMilisegundos
……3 ^
(
……^ _
fechaFin
……_ g
)
……g h
;
……h i
List
ÀÀ 
<
ÀÀ 
OrdenDeCompra
ÀÀ "
>
ÀÀ" #(
detalleDeCompraPorConcepto
ÀÀ$ >
=
ÀÀ? @
operacionLogica
ÀÀA P
.
ÀÀP Q/
!ObtenerOrdenesDeCompraConfirmadas
ÀÀQ r
(
ÀÀr s
ProfileData
ÀÀs ~
(
ÀÀ~ 
)ÀÀ Ä
.ÀÀÄ Å
EmpleadoÀÀÅ â
.ÀÀâ ä
IdÀÀä å
,ÀÀå ç
ProfileDataÀÀé ô
(ÀÀô ö
)ÀÀö õ
.ÀÀõ ú.
IdCentroDeAtencionSeleccionadoÀÀú ∫
,ÀÀ∫ ª

fechaDesdeÀÀº ∆
,ÀÀ∆ «

fechaHastaÀÀ» “
)ÀÀ“ ”
;ÀÀ” ‘
List
ÃÃ 
<
ÃÃ ,
ReporteCompraConceptoViewModel
ÃÃ 3
>
ÃÃ3 4-
reporteDetalleDeCompraViewModel
ÃÃ5 T
=
ÃÃU V,
ReporteCompraConceptoViewModel
ÃÃW u
.
ÃÃu v
Convert
ÃÃv }
(
ÃÃ} ~)
detalleDeCompraPorConceptoÃÃ~ ò
)ÃÃò ô
;ÃÃô ö
var
ŒŒ 
	rptviewer
ŒŒ 
=
ŒŒ 
new
ŒŒ  #
ReportViewer
ŒŒ$ 0
(
ŒŒ0 1
)
ŒŒ1 2
;
ŒŒ2 36
(EstablecimientoComercialExtendidoConLogo
œœ 8
sede
œœ9 =
=
œœ> ?
ObtenerSede
œœ@ K
(
œœK L
)
œœL M
;
œœM N
ReportParameter
—— "
nombreCentroAtencion
——  4
=
——5 6
new
——7 :
ReportParameter
——; J
(
——J K
$str
——K a
,
——a b
ProfileData
——c n
(
——n o
)
——o p
.
——p q1
"NombreCentroDeAtencionSeleccionado——q ì
)——ì î
;——î ï
ReportParameter
““ 
nombreDeEmpresa
““  /
=
““0 1
new
““2 5
ReportParameter
““6 E
(
““E F
$str
““F U
,
““U V
sede
““W [
.
““[ \
Nombre
““\ b
)
““b c
;
““c d
ReportParameter
”” !
parametroFechaDesde
””  3
=
””4 5
new
””6 9
ReportParameter
””: I
(
””I J
$str
””J V
,
””V W

fechaDesde
””X b
.
””b c
ToString
””c k
(
””k l
)
””l m
)
””m n
;
””n o
ReportParameter
‘‘ !
parametroFechaHasta
‘‘  3
=
‘‘4 5
new
‘‘6 9
ReportParameter
‘‘: I
(
‘‘I J
$str
‘‘J V
,
‘‘V W

fechaHasta
‘‘X b
.
‘‘b c
ToString
‘‘c k
(
‘‘k l
)
‘‘l m
)
‘‘m n
;
‘‘n o
string
÷÷ 

logoString
÷÷ !
=
÷÷" #
Convert
÷÷$ +
.
÷÷+ ,
ToBase64String
÷÷, :
(
÷÷: ;
sede
÷÷; ?
.
÷÷? @
Logo
÷÷@ D
,
÷÷D E
$num
÷÷F G
,
÷÷G H
sede
÷÷I M
.
÷÷M N
Logo
÷÷N R
.
÷÷R S
Length
÷÷S Y
)
÷÷Y Z
;
÷÷Z [
ReportParameter
◊◊ 
logoSede
◊◊  (
=
◊◊) *
new
◊◊+ .
ReportParameter
◊◊/ >
(
◊◊> ?
$str
◊◊? I
,
◊◊I J

logoString
◊◊K U
)
◊◊U V
;
◊◊V W
DateTime
ŸŸ 
fechaActual
ŸŸ $
=
ŸŸ% &
DateTimeUtil
ŸŸ& 2
.
ŸŸ2 3
FechaActual
ŸŸ3 >
(
ŸŸ> ?
)
ŸŸ? @
;
ŸŸ@ A
ReportParameter
⁄⁄  
fechaActualSistema
⁄⁄  2
=
⁄⁄3 4
new
⁄⁄5 8
ReportParameter
⁄⁄9 H
(
⁄⁄H I
$str
⁄⁄I V
,
⁄⁄V W
fechaActual
⁄⁄X c
.
⁄⁄c d
ToString
⁄⁄d l
(
⁄⁄l m
)
⁄⁄m n
)
⁄⁄n o
;
⁄⁄o p
ReportParameter
‹‹ 
empleadoSede
‹‹  ,
=
‹‹- .
new
‹‹/ 2
ReportParameter
‹‹3 B
(
‹‹B C
$str
‹‹C L
,
‹‹L M
ProfileData
‹‹N Y
(
‹‹Y Z
)
‹‹Z [
.
‹‹[ \
Empleado
‹‹\ d
.
‹‹d e
NombresYApellidos
‹‹e v
)
‹‹v w
;
‹‹w x
	rptviewer
ﬁﬁ 
.
ﬁﬁ 
LocalReport
ﬁﬁ %
.
ﬁﬁ% &

ReportPath
ﬁﬁ& 0
=
ﬁﬁ1 2
Request
ﬁﬁ3 :
.
ﬁﬁ: ;
MapPath
ﬁﬁ; B
(
ﬁﬁB C
Request
ﬁﬁC J
.
ﬁﬁJ K
ApplicationPath
ﬁﬁK Z
)
ﬁﬁZ [
+
ﬁﬁ\ ]
$strﬁﬁ^ ï
;ﬁﬁï ñ
	rptviewer
‡‡ 
.
‡‡ 
LocalReport
‡‡ %
.
‡‡% &
SetParameters
‡‡& 3
(
‡‡3 4
new
‡‡4 7
ReportParameter
‡‡8 G
[
‡‡G H
]
‡‡H I
{
‡‡J K!
parametroFechaDesde
‡‡L _
,
‡‡_ `!
parametroFechaHasta
‡‡a t
,
‡‡t u
nombreDeEmpresa‡‡v Ö
,‡‡Ö Ü$
nombreCentroAtencion‡‡á õ
,‡‡õ ú
empleadoSede‡‡ù ©
,‡‡© ™"
fechaActualSistema‡‡´ Ω
,‡‡Ω æ
logoSede‡‡ø «
}‡‡» …
)‡‡…  
;‡‡  À
ReportDataSource
··  &
rptdatasourcePorConcepto
··! 9
=
··: ;
new
··< ?
ReportDataSource
··@ P
(
··P Q
$str
··Q i
,
··i j.
reporteDetalleDeCompraViewModel··k ä
)··ä ã
;··ã å
	rptviewer
„„ 
.
„„ 
ProcessingMode
„„ (
=
„„) *
ProcessingMode
„„+ 9
.
„„9 :
Local
„„: ?
;
„„? @
	rptviewer
‰‰ 
.
‰‰ 
LocalReport
‰‰ %
.
‰‰% &
DataSources
‰‰& 1
.
‰‰1 2
Add
‰‰2 5
(
‰‰5 6&
rptdatasourcePorConcepto
‰‰6 N
)
‰‰N O
;
‰‰O P
	rptviewer
ÂÂ 
.
ÂÂ !
SizeToReportContent
ÂÂ -
=
ÂÂ. /
true
ÂÂ0 4
;
ÂÂ4 5
	rptviewer
ÊÊ 
.
ÊÊ 
Width
ÊÊ 
=
ÊÊ  !
Unit
ÊÊ" &
.
ÊÊ& '

Percentage
ÊÊ' 1
(
ÊÊ1 2
$num
ÊÊ2 5
)
ÊÊ5 6
;
ÊÊ6 7
	rptviewer
ÁÁ 
.
ÁÁ 
Height
ÁÁ  
=
ÁÁ! "
Unit
ÁÁ# '
.
ÁÁ' (

Percentage
ÁÁ( 2
(
ÁÁ2 3
$num
ÁÁ3 6
)
ÁÁ6 7
;
ÁÁ7 8
ViewBag
ÈÈ 
.
ÈÈ 
ReportViewer
ÈÈ $
=
ÈÈ% &
	rptviewer
ÈÈ' 0
;
ÈÈ0 1
return
ÍÍ 
View
ÍÍ 
(
ÍÍ 
$str
ÍÍ 1
)
ÍÍ1 2
;
ÍÍ2 3
}
ÎÎ 
catch
ÏÏ 
(
ÏÏ 
	Exception
ÏÏ 
e
ÏÏ 
)
ÏÏ 
{
ÌÌ 
HttpContext
ÓÓ 
.
ÓÓ 
Response
ÓÓ $
.
ÓÓ$ %

StatusCode
ÓÓ% /
=
ÓÓ0 1
$num
ÓÓ2 5
;
ÓÓ5 6
return
ÔÔ 
View
ÔÔ 
(
ÔÔ 
$str
ÔÔ <
)
ÔÔ< =
;
ÔÔ= >
}
 
}
ÒÒ 	
public
ˆˆ 
ActionResult
ˆˆ (
ReporteDeGastosPorConcepto
ˆˆ 6
(
ˆˆ6 7
string
ˆˆ7 =
fechaInicio
ˆˆ> I
,
ˆˆI J
string
ˆˆK Q
fechaFin
ˆˆR Z
,
ˆˆZ [
bool
ˆˆ\ `
esReporteGlobal
ˆˆa p
,
ˆˆp q
string
ˆˆr x%
nombreCentroDeAtencionˆˆy è
,ˆˆè ê
[ˆˆë í
Systemˆˆí ò
.ˆˆò ô
Webˆˆô ú
.ˆˆú ù
Httpˆˆù °
.ˆˆ° ¢
FromUriˆˆ¢ ©
]ˆˆ© ™
intˆˆ´ Æ
[ˆˆÆ Ø
]ˆˆØ ∞"
idsCentrosAtencionˆˆ± √
)ˆˆ√ ƒ
{
˜˜ 	
DateTime
¯¯ 

fechaDesde
¯¯ 
=
¯¯  !
DateTimeUtil
¯¯" .
.
¯¯. /E
7ObtenerFechaDesdeConPrecisionDeHorasMinutosMilisegundos
¯¯/ f
(
¯¯f g
fechaInicio
¯¯g r
)
¯¯r s
;
¯¯s t
DateTime
˘˘ 

fechaHasta
˘˘ 
=
˘˘  !
DateTimeUtil
˘˘" .
.
˘˘. /E
7ObtenerFechaHastaConPrecisionDeHorasMinutosMilisegundos
˘˘/ f
(
˘˘f g
fechaFin
˘˘g o
)
˘˘o p
;
˘˘p q
List
˚˚ 
<
˚˚ 4
&Resumen_Transaccion_Gasto_Por_Concepto
˚˚ 7
>
˚˚7 8
reporteGastos
˚˚9 F
=
˚˚G H
operacionLogica
˚˚I X
.
˚˚X Y,
ObtenerReporteGastoPorConcepto
˚˚Y w
(
˚˚w x

fechaDesde˚˚x Ç
,˚˚Ç É

fechaHasta˚˚Ñ é
,˚˚é è
esReporteGlobal˚˚ê ü
,˚˚ü †"
idsCentrosAtencion˚˚° ≥
)˚˚≥ ¥
;˚˚¥ µ
List
¸¸ 
<
¸¸ 4
&Resumen_Transaccion_Gasto_Por_Concepto
¸¸ 7
>
¸¸7 8
resumenGastos
¸¸9 F
=
¸¸G H4
&Resumen_Transaccion_Gasto_Por_Concepto
¸¸I o
.
¸¸o p
Resumen
¸¸p w
(
¸¸w x
reporteGastos¸¸x Ö
)¸¸Ö Ü
;¸¸Ü á
var
ˇˇ 
	rptviewer
ˇˇ 
=
ˇˇ 
new
ˇˇ 
ReportViewer
ˇˇ  ,
(
ˇˇ, -
)
ˇˇ- .
;
ˇˇ. /
ReportParameter
ÅÅ !
parametroFechaDesde
ÅÅ /
=
ÅÅ0 1
new
ÅÅ2 5
ReportParameter
ÅÅ6 E
(
ÅÅE F
$str
ÅÅF R
,
ÅÅR S

fechaDesde
ÅÅT ^
.
ÅÅ^ _
ToString
ÅÅ_ g
(
ÅÅg h
)
ÅÅh i
)
ÅÅi j
;
ÅÅj k
ReportParameter
ÇÇ !
parametroFechaHasta
ÇÇ /
=
ÇÇ0 1
new
ÇÇ2 5
ReportParameter
ÇÇ6 E
(
ÇÇE F
$str
ÇÇF R
,
ÇÇR S

fechaHasta
ÇÇT ^
.
ÇÇ^ _
ToString
ÇÇ_ g
(
ÇÇg h
)
ÇÇh i
)
ÇÇi j
;
ÇÇj k
ReportParameter
ÉÉ 
nombreEmpresa
ÉÉ )
=
ÉÉ* +
new
ÉÉ, /
ReportParameter
ÉÉ0 ?
(
ÉÉ? @
$str
ÉÉ@ O
,
ÉÉO P
ObtenerSede
ÉÉQ \
(
ÉÉ\ ]
)
ÉÉ] ^
.
ÉÉ^ _
Nombre
ÉÉ_ e
)
ÉÉe f
;
ÉÉf g
ReportParameter
ÑÑ "
nombreCentroAtencion
ÑÑ 0
=
ÑÑ1 2
new
ÑÑ3 6
ReportParameter
ÑÑ7 F
(
ÑÑF G
$str
ÑÑG ]
,
ÑÑ] ^
esReporteGlobal
ÑÑ_ n
?
ÑÑo p
ObtenerSede
ÑÑq |
(
ÑÑ| }
)
ÑÑ} ~
.
ÑÑ~ 
NombreÑÑ Ö
:ÑÑÜ á&
nombreCentroDeAtencionÑÑà û
)ÑÑû ü
;ÑÑü †
var
ÜÜ 
sede
ÜÜ 
=
ÜÜ 
ObtenerSede
ÜÜ "
(
ÜÜ" #
)
ÜÜ# $
;
ÜÜ$ %
string
áá 

logoString
áá 
=
áá 
Convert
áá  '
.
áá' (
ToBase64String
áá( 6
(
áá6 7
sede
áá7 ;
.
áá; <
Logo
áá< @
,
áá@ A
$num
ááB C
,
ááC D
sede
ááE I
.
ááI J
Logo
ááJ N
.
ááN O
Length
ááO U
)
ááU V
;
ááV W
ReportParameter
àà 
logoSede
àà $
=
àà% &
new
àà' *
ReportParameter
àà+ :
(
àà: ;
$str
àà; E
,
ààE F

logoString
ààG Q
)
ààQ R
;
ààR S
ReportParameter
ää 
empleadoSede
ää (
=
ää) *
new
ää+ .
ReportParameter
ää/ >
(
ää> ?
$str
ää? H
,
ääH I
ProfileData
ääJ U
(
ääU V
)
ääV W
.
ääW X
Empleado
ääX `
.
ää` a
NombresYApellidos
ääa r
)
äär s
;
ääs t
DateTime
åå 
fechaActual
åå  
=
åå! "
DateTimeUtil
åå" .
.
åå. /
FechaActual
åå/ :
(
åå: ;
)
åå; <
;
åå< =
ReportParameter
çç  
fechaActualSistema
çç .
=
çç/ 0
new
çç1 4
ReportParameter
çç5 D
(
ççD E
$str
ççE R
,
ççR S
fechaActual
ççT _
.
çç_ `
ToString
çç` h
(
ççh i
)
ççi j
)
ççj k
;
ççk l
	rptviewer
èè 
.
èè 
LocalReport
èè !
.
èè! "

ReportPath
èè" ,
=
èè- .
Request
èè/ 6
.
èè6 7
MapPath
èè7 >
(
èè> ?
Request
èè? F
.
èèF G
ApplicationPath
èèG V
)
èèV W
+
èèX Y
$strèèZ é
;èèé è
	rptviewer
êê 
.
êê 
LocalReport
êê !
.
êê! "
SetParameters
êê" /
(
êê/ 0
new
êê0 3
ReportParameter
êê4 C
[
êêC D
]
êêD E
{
êêF G!
parametroFechaDesde
êêH [
,
êê[ \!
parametroFechaHasta
êê] p
,
êêp q
nombreEmpresa
êêr 
,êê Ä$
nombreCentroAtencionêêÅ ï
,êêï ñ"
fechaActualSistemaêêó ©
,êê© ™
logoSedeêê´ ≥
,êê≥ ¥
empleadoSedeêêµ ¡
}êê¬ √
)êê√ ƒ
;êêƒ ≈
ReportDataSource
íí (
rptdatasourceGastosResumen
íí 7
=
íí8 9
new
íí: =
ReportDataSource
íí> N
(
ííN O
$str
ííO _
,
íí_ `
resumenGastos
íía n
)
íín o
;
íío p
ReportDataSource
ìì (
rptdatasourceGastosDetalle
ìì 7
=
ìì8 9
new
ìì: =
ReportDataSource
ìì> N
(
ììN O
$str
ììO _
,
ìì_ `
reporteGastos
ììa n
)
ììn o
;
ììo p
	rptviewer
ïï 
.
ïï 
ProcessingMode
ïï $
=
ïï% &
ProcessingMode
ïï' 5
.
ïï5 6
Local
ïï6 ;
;
ïï; <
	rptviewer
ññ 
.
ññ 
LocalReport
ññ !
.
ññ! "
DataSources
ññ" -
.
ññ- .
Add
ññ. 1
(
ññ1 2(
rptdatasourceGastosDetalle
ññ2 L
)
ññL M
;
ññM N
	rptviewer
óó 
.
óó 
LocalReport
óó !
.
óó! "
DataSources
óó" -
.
óó- .
Add
óó. 1
(
óó1 2(
rptdatasourceGastosResumen
óó2 L
)
óóL M
;
óóM N
	rptviewer
ôô 
.
ôô !
SizeToReportContent
ôô )
=
ôô* +
true
ôô, 0
;
ôô0 1
	rptviewer
öö 
.
öö 
Width
öö 
=
öö 
Unit
öö "
.
öö" #

Percentage
öö# -
(
öö- .
$num
öö. 1
)
öö1 2
;
öö2 3
	rptviewer
õõ 
.
õõ 
Height
õõ 
=
õõ 
Unit
õõ #
.
õõ# $

Percentage
õõ$ .
(
õõ. /
$num
õõ/ 2
)
õõ2 3
;
õõ3 4
ViewBag
úú 
.
úú 
ReportViewer
úú  
=
úú! "
	rptviewer
úú# ,
;
úú, -
return
ûû 
View
ûû 
(
ûû 
$str
ûû -
)
ûû- .
;
ûû. /
}
†† 	
public
¶¶ 
ActionResult
¶¶  
ReporteConsolidado
¶¶ .
(
¶¶. /
string
¶¶/ 5
fechaInicio
¶¶6 A
,
¶¶A B
string
¶¶C I
fechaFin
¶¶J R
)
¶¶R S
{
ßß 	
DateTime
®® 

fechaDesde
®® 
=
®®  !
DateTimeUtil
®®" .
.
®®. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
®®/ Z
(
®®Z [
fechaInicio
®®[ f
)
®®f g
;
®®g h
DateTime
©© 

fechaHasta
©© 
=
©©  !
DateTimeUtil
©©" .
.
©©. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
©©/ Z
(
©©Z [
fechaFin
©©[ c
)
©©c d
;
©©d e
List
¨¨ 
<
¨¨ -
Resumen_Transaccion_Consolidado
¨¨ 0
>
¨¨0 1 
ResumenConsolidado
¨¨2 D
=
¨¨E F
operacionLogica
¨¨G V
.
¨¨V W8
)ObtenerReporteVentaCompraPagoCobroYGastos¨¨W Ä
(¨¨Ä Å

fechaDesde¨¨Å ã
,¨¨ã å

fechaHasta¨¨ç ó
)¨¨ó ò
;¨¨ò ô
List
≠≠ 
<
≠≠ "
ConsolidadoViewModel
≠≠ %
>
≠≠% &.
 reporteVentaConsolidadoViewModel
≠≠' G
=
≠≠H I"
ConsolidadoViewModel
≠≠J ^
.
≠≠^ _
Convert
≠≠_ f
(
≠≠f g 
ResumenConsolidado
≠≠g y
)
≠≠y z
;
≠≠z {
var
∞∞ 
	rptviewer
∞∞ 
=
∞∞ 
new
∞∞ 
ReportViewer
∞∞  ,
(
∞∞, -
)
∞∞- .
;
∞∞. /
ReportParameter
≤≤ !
parametroFechaDesde
≤≤ /
=
≤≤0 1
new
≤≤2 5
ReportParameter
≤≤6 E
(
≤≤E F
$str
≤≤F R
,
≤≤R S

fechaDesde
≤≤T ^
.
≤≤^ _
ToString
≤≤_ g
(
≤≤g h
)
≤≤h i
)
≤≤i j
;
≤≤j k
ReportParameter
≥≥ !
parametroFechaHasta
≥≥ /
=
≥≥0 1
new
≥≥2 5
ReportParameter
≥≥6 E
(
≥≥E F
$str
≥≥F R
,
≥≥R S

fechaHasta
≥≥T ^
.
≥≥^ _
ToString
≥≥_ g
(
≥≥g h
)
≥≥h i
)
≥≥i j
;
≥≥j k
ReportParameter
¥¥ 
nombreEmpresa
¥¥ )
=
¥¥* +
new
¥¥, /
ReportParameter
¥¥0 ?
(
¥¥? @
$str
¥¥@ O
,
¥¥O P
ObtenerSede
¥¥Q \
(
¥¥\ ]
)
¥¥] ^
.
¥¥^ _
Nombre
¥¥_ e
)
¥¥e f
;
¥¥f g
ReportParameter
µµ "
nombreCentroAtencion
µµ 0
=
µµ1 2
new
µµ3 6
ReportParameter
µµ7 F
(
µµF G
$str
µµG ]
,
µµ] ^
ProfileData
µµ_ j
(
µµj k
)
µµk l
.
µµl m1
"NombreCentroDeAtencionSeleccionadoµµm è
)µµè ê
;µµê ë
var
∑∑ 
sede
∑∑ 
=
∑∑ 
ObtenerSede
∑∑ "
(
∑∑" #
)
∑∑# $
;
∑∑$ %
string
∏∏ 

logoString
∏∏ 
=
∏∏ 
Convert
∏∏  '
.
∏∏' (
ToBase64String
∏∏( 6
(
∏∏6 7
sede
∏∏7 ;
.
∏∏; <
Logo
∏∏< @
,
∏∏@ A
$num
∏∏B C
,
∏∏C D
sede
∏∏E I
.
∏∏I J
Logo
∏∏J N
.
∏∏N O
Length
∏∏O U
)
∏∏U V
;
∏∏V W
ReportParameter
ππ 
logoSede
ππ $
=
ππ% &
new
ππ' *
ReportParameter
ππ+ :
(
ππ: ;
$str
ππ; E
,
ππE F

logoString
ππG Q
)
ππQ R
;
ππR S
DateTime
ªª 
fechaActual
ªª  
=
ªª! "
DateTimeUtil
ªª" .
.
ªª. /
FechaActual
ªª/ :
(
ªª: ;
)
ªª; <
;
ªª< =
ReportParameter
ºº  
fechaActualSistema
ºº .
=
ºº/ 0
new
ºº1 4
ReportParameter
ºº5 D
(
ººD E
$str
ººE R
,
ººR S
fechaActual
ººT _
.
ºº_ `
ToString
ºº` h
(
ººh i
)
ººi j
)
ººj k
;
ººk l
ReportParameter
ææ 
empleadoSede
ææ (
=
ææ) *
new
ææ+ .
ReportParameter
ææ/ >
(
ææ> ?
$str
ææ? H
,
ææH I
ProfileData
ææJ U
(
ææU V
)
ææV W
.
ææW X
Empleado
ææX `
.
ææ` a
NombresYApellidos
ææa r
)
æær s
;
ææs t
	rptviewer
¿¿ 
.
¿¿ 
LocalReport
¿¿ !
.
¿¿! "

ReportPath
¿¿" ,
=
¿¿- .
Request
¿¿/ 6
.
¿¿6 7
MapPath
¿¿7 >
(
¿¿> ?
Request
¿¿? F
.
¿¿F G
ApplicationPath
¿¿G V
)
¿¿V W
+
¿¿X Y
$str¿¿Z å
;¿¿å ç
	rptviewer
¡¡ 
.
¡¡ 
LocalReport
¡¡ !
.
¡¡! "
SetParameters
¡¡" /
(
¡¡/ 0
new
¡¡0 3
ReportParameter
¡¡4 C
[
¡¡C D
]
¡¡D E
{
¡¡F G!
parametroFechaDesde
¡¡H [
,
¡¡[ \!
parametroFechaHasta
¡¡] p
,
¡¡p q
nombreEmpresa
¡¡r 
,¡¡ Ä$
nombreCentroAtencion¡¡Å ï
,¡¡ï ñ
logoSede¡¡ó ü
,¡¡ü †
empleadoSede¡¡° ≠
,¡¡≠ Æ"
fechaActualSistema¡¡Ø ¡
}¡¡¬ √
)¡¡√ ƒ
;¡¡ƒ ≈
ReportDataSource
¬¬ .
 rptdatasourceSerieConceptoBasico
¬¬ =
=
¬¬> ?
new
¬¬@ C
ReportDataSource
¬¬D T
(
¬¬T U
$str
¬¬U i
,
¬¬i j/
 reporteVentaConsolidadoViewModel¬¬k ã
)¬¬ã å
;¬¬å ç
	rptviewer
ƒƒ 
.
ƒƒ 
ProcessingMode
ƒƒ $
=
ƒƒ% &
ProcessingMode
ƒƒ' 5
.
ƒƒ5 6
Local
ƒƒ6 ;
;
ƒƒ; <
	rptviewer
≈≈ 
.
≈≈ 
LocalReport
≈≈ !
.
≈≈! "
DataSources
≈≈" -
.
≈≈- .
Add
≈≈. 1
(
≈≈1 2.
 rptdatasourceSerieConceptoBasico
≈≈2 R
)
≈≈R S
;
≈≈S T
	rptviewer
∆∆ 
.
∆∆ !
SizeToReportContent
∆∆ )
=
∆∆* +
true
∆∆, 0
;
∆∆0 1
	rptviewer
«« 
.
«« 
Width
«« 
=
«« 
Unit
«« "
.
««" #

Percentage
««# -
(
««- .
$num
««. 1
)
««1 2
;
««2 3
	rptviewer
»» 
.
»» 
Height
»» 
=
»» 
Unit
»» #
.
»»# $

Percentage
»»$ .
(
»». /
$num
»»/ 2
)
»»2 3
;
»»3 4
ViewBag
…… 
.
…… 
ReportViewer
……  
=
……! "
	rptviewer
……# ,
;
……, -
return
ÀÀ 
View
ÀÀ 
(
ÀÀ 
$str
ÀÀ -
)
ÀÀ- .
;
ÀÀ. /
}
ÃÃ 	
public
’’ 
ActionResult
’’ 6
(ReporteDeEstadoDeCuentaClienteVentaCobro
’’ D
(
’’D E
string
’’E K
fechaInicio
’’L W
,
’’W X
string
’’Y _
fechaFin
’’` h
,
’’h i
[
’’j k
System
’’k q
.
’’q r
Web
’’r u
.
’’u v
Http
’’v z
.
’’z {
FromUri’’{ Ç
]’’Ç É
int’’Ñ á
	idCliente’’à ë
,’’ë í
string’’ì ô
nombreCliente’’ö ß
,’’ß ®
[’’© ™
System’’™ ∞
.’’∞ ±
Web’’± ¥
.’’¥ µ
Http’’µ π
.’’π ∫
FromUri’’∫ ¡
]’’¡ ¬
int’’√ ∆
idPuntoDeVenta’’« ’
,’’’ ÷
string’’◊ ›"
nombrePuntoDeVenta’’ﬁ 
)’’ Ò
{
÷÷ 	,
EstadoCuentaCliente_VentaCobro
◊◊ *+
estadoCuentaClienteVentaCobro
◊◊+ H
;
◊◊H I
DateTime
ŸŸ 

fechaDesde
ŸŸ 
=
ŸŸ  !
DateTimeUtil
ŸŸ" .
.
ŸŸ. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ŸŸ/ Z
(
ŸŸZ [
fechaInicio
ŸŸ[ f
)
ŸŸf g
;
ŸŸg h
DateTime
⁄⁄ 

fechaHasta
⁄⁄ 
=
⁄⁄  !
DateTimeUtil
⁄⁄" .
.
⁄⁄. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
⁄⁄/ Z
(
⁄⁄Z [
fechaFin
⁄⁄[ c
)
⁄⁄c d
;
⁄⁄d e+
estadoCuentaClienteVentaCobro
‹‹ )
=
‹‹* +
operacionLogica
‹‹, ;
.
‹‹; <5
'ObtenerDeudasMasivasDeCarteraDeClientes
‹‹< c
(
‹‹c d
idPuntoDeVenta
‹‹d r
,
‹‹r s
	idCliente
‹‹t }
,
‹‹} ~

fechaDesde‹‹ â
,‹‹â ä

fechaHasta‹‹ã ï
)‹‹ï ñ
;‹‹ñ ó+
estadoCuentaClienteVentaCobro
›› )
.
››) *
Cliente
››* 1
=
››2 3
nombreCliente
››4 A
;
››A B
var
ﬁﬁ 
htmlReporte
ﬁﬁ 
=
ﬁﬁ 
HtmlStringBuilder
ﬁﬁ .
.
ﬁﬁ. /%
RenderRazorViewToString
ﬁﬁ/ F
(
ﬁﬁF G
$str
ﬁﬁG w
,
ﬁﬁw x,
estadoCuentaClienteVentaCobroﬁﬁy ñ
,ﬁﬁñ ó
thisﬁﬁò ú
)ﬁﬁú ù
;ﬁﬁù û
var
‡‡ 
Renderer
‡‡ 
=
‡‡ 
new
‡‡ 
	SelectPdf
‡‡ (
.
‡‡( )
	HtmlToPdf
‡‡) 2
(
‡‡2 3
)
‡‡3 4
;
‡‡4 5
Renderer
·· 
.
·· 
Options
·· 
.
·· 
PdfPageSize
·· (
=
··) *
	SelectPdf
··+ 4
.
··4 5
PdfPageSize
··5 @
.
··@ A
A4
··A C
;
··C D
Renderer
‚‚ 
.
‚‚ 
Options
‚‚ 
.
‚‚ 
MarginBottom
‚‚ )
=
‚‚* +
$num
‚‚, -
;
‚‚- .
Renderer
„„ 
.
„„ 
Options
„„ 
.
„„ 
	MarginTop
„„ &
=
„„' (
$num
„„) *
;
„„* +
Renderer
‰‰ 
.
‰‰ 
Options
‰‰ 
.
‰‰ 

MarginLeft
‰‰ '
=
‰‰( )
$num
‰‰* +
;
‰‰+ ,
Renderer
ÂÂ 
.
ÂÂ 
Options
ÂÂ 
.
ÂÂ 
MarginRight
ÂÂ (
=
ÂÂ) *
$num
ÂÂ+ ,
;
ÂÂ, -
Renderer
ÊÊ 
.
ÊÊ 
Options
ÊÊ 
.
ÊÊ 
DisplayHeader
ÊÊ *
=
ÊÊ+ ,
false
ÊÊ- 2
;
ÊÊ2 3
Renderer
ÁÁ 
.
ÁÁ 
Options
ÁÁ 
.
ÁÁ $
JpegCompressionEnabled
ÁÁ 3
=
ÁÁ4 5
false
ÁÁ6 ;
;
ÁÁ; <
var
ËË 
documentoPdf
ËË 
=
ËË 
Renderer
ËË '
.
ËË' (
ConvertHtmlString
ËË( 9
(
ËË9 :
htmlReporte
ËË: E
)
ËËE F
;
ËËF G
byte
ÍÍ 
[
ÍÍ 
]
ÍÍ 
	fileBytes
ÍÍ 
=
ÍÍ 
documentoPdf
ÍÍ +
.
ÍÍ+ ,
Save
ÍÍ, 0
(
ÍÍ0 1
)
ÍÍ1 2
;
ÍÍ2 3
string
ÎÎ 
fileName
ÎÎ 
=
ÎÎ 
$str
ÎÎ L
;
ÎÎL M
return
ÏÏ 
File
ÏÏ 
(
ÏÏ 
	fileBytes
ÏÏ !
,
ÏÏ! "
$str
ÏÏ# 4
,
ÏÏ4 5
fileName
ÏÏ6 >
)
ÏÏ> ?
;
ÏÏ? @
}
ÒÒ 	
public
˙˙ 
ActionResult
˙˙ 0
"ReporteDeUtilidadDeVentaPorFamilia
˙˙ >
(
˙˙> ?
string
˙˙? E
fechaInicio
˙˙F Q
,
˙˙Q R
string
˙˙S Y
fechaFin
˙˙Z b
,
˙˙b c
bool
˙˙d h
esReporteGlobal
˙˙i x
,
˙˙x y
string˙˙z Ä&
nombreCentroDeAtencion˙˙Å ó
,˙˙ó ò
[˙˙ô ö
System˙˙ö †
.˙˙† °
Web˙˙° §
.˙˙§ •
Http˙˙• ©
.˙˙© ™
FromUri˙˙™ ±
]˙˙± ≤
int˙˙≥ ∂
[˙˙∂ ∑
]˙˙∑ ∏"
idsCentrosAtencion˙˙π À
)˙˙À Ã
{
˚˚ 	
DateTime
¸¸ 

fechaDesde
¸¸ 
=
¸¸  !
DateTimeUtil
¸¸" .
.
¸¸. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
¸¸/ Z
(
¸¸Z [
fechaInicio
¸¸[ f
)
¸¸f g
;
¸¸g h
DateTime
˝˝ 

fechaHasta
˝˝ 
=
˝˝  !
DateTimeUtil
˝˝" .
.
˝˝. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
˝˝/ Z
(
˝˝Z [
fechaFin
˝˝[ c
)
˝˝c d
;
˝˝d e
List
ˇˇ 
<
ˇˇ &
CostoUtilidadPorConcepto
ˇˇ )
>
ˇˇ) *'
reporteDeUtilidadDeVentas
ˇˇ+ D
=
ˇˇE F
operacionLogica
ˇˇG V
.
ˇˇV W9
*ObtenerReporteDeUtilidadDeVentasPorFamiliaˇˇW Å
(ˇˇÅ Ç

fechaDesdeˇˇÇ å
,ˇˇå ç

fechaHastaˇˇé ò
,ˇˇò ô
esReporteGlobalˇˇö ©
,ˇˇ© ™"
idsCentrosAtencionˇˇ´ Ω
)ˇˇΩ æ
;ˇˇæ ø
List
Ä	Ä	 
<
Ä	Ä	 &
CostoUtilidadPorConcepto
Ä	Ä	 )
>
Ä	Ä	) *#
mejorUtilidadDeVentas
Ä	Ä	+ @
=
Ä	Ä	A B'
reporteDeUtilidadDeVentas
Ä	Ä	C \
.
Ä	Ä	\ ]
OrderByDescending
Ä	Ä	] n
(
Ä	Ä	n o
r
Ä	Ä	o p
=>
Ä	Ä	q s
r
Ä	Ä	t u
.
Ä	Ä	u v
Utilidad
Ä	Ä	v ~
)
Ä	Ä	~ 
.Ä	Ä	 Ä
TakeÄ	Ä	Ä Ñ
(Ä	Ä	Ñ Ö
$numÄ	Ä	Ö á
)Ä	Ä	á à
.Ä	Ä	à â
ToListÄ	Ä	â è
(Ä	Ä	è ê
)Ä	Ä	ê ë
;Ä	Ä	ë í
List
Å	Å	 
<
Å	Å	 &
CostoUtilidadPorConcepto
Å	Å	 )
>
Å	Å	) *"
peorUtilidadDeVentas
Å	Å	+ ?
=
Å	Å	@ A'
reporteDeUtilidadDeVentas
Å	Å	B [
.
Å	Å	[ \
OrderBy
Å	Å	\ c
(
Å	Å	c d
r
Å	Å	d e
=>
Å	Å	f h
r
Å	Å	i j
.
Å	Å	j k
Utilidad
Å	Å	k s
)
Å	Å	s t
.
Å	Å	t u
Take
Å	Å	u y
(
Å	Å	y z
$num
Å	Å	z |
)
Å	Å	| }
.
Å	Å	} ~
ToListÅ	Å	~ Ñ
(Å	Å	Ñ Ö
)Å	Å	Ö Ü
;Å	Å	Ü á
var
É	É	 
	rptviewer
É	É	 
=
É	É	 
new
É	É	 
ReportViewer
É	É	  ,
(
É	É	, -
)
É	É	- .
;
É	É	. /
ReportParameter
Ö	Ö	 !
parametroFechaDesde
Ö	Ö	 /
=
Ö	Ö	0 1
new
Ö	Ö	2 5
ReportParameter
Ö	Ö	6 E
(
Ö	Ö	E F
$str
Ö	Ö	F R
,
Ö	Ö	R S

fechaDesde
Ö	Ö	T ^
.
Ö	Ö	^ _
ToString
Ö	Ö	_ g
(
Ö	Ö	g h
)
Ö	Ö	h i
)
Ö	Ö	i j
;
Ö	Ö	j k
ReportParameter
Ü	Ü	 !
parametroFechaHasta
Ü	Ü	 /
=
Ü	Ü	0 1
new
Ü	Ü	2 5
ReportParameter
Ü	Ü	6 E
(
Ü	Ü	E F
$str
Ü	Ü	F R
,
Ü	Ü	R S

fechaHasta
Ü	Ü	T ^
.
Ü	Ü	^ _
ToString
Ü	Ü	_ g
(
Ü	Ü	g h
)
Ü	Ü	h i
)
Ü	Ü	i j
;
Ü	Ü	j k
ReportParameter
á	á	 
nombreEmpresa
á	á	 )
=
á	á	* +
new
á	á	, /
ReportParameter
á	á	0 ?
(
á	á	? @
$str
á	á	@ O
,
á	á	O P
ObtenerSede
á	á	Q \
(
á	á	\ ]
)
á	á	] ^
.
á	á	^ _
Nombre
á	á	_ e
)
á	á	e f
;
á	á	f g
ReportParameter
à	à	 
nombreReporte
à	à	 )
=
à	à	* +
new
à	à	, /
ReportParameter
à	à	0 ?
(
à	à	? @
$str
à	à	@ O
,
à	à	O P
$str
à	à	Q r
)
à	à	r s
;
à	à	s t
ReportParameter
â	â	 "
nombreCentroAtencion
â	â	 0
=
â	â	1 2
new
â	â	3 6
ReportParameter
â	â	7 F
(
â	â	F G
$str
â	â	G ]
,
â	â	] ^
esReporteGlobal
â	â	_ n
?
â	â	o p
ObtenerSede
â	â	q |
(
â	â	| }
)
â	â	} ~
.
â	â	~ 
Nombreâ	â	 Ö
:â	â	Ü á&
nombreCentroDeAtencionâ	â	à û
)â	â	û ü
;â	â	ü †
var
ã	ã	 
sede
ã	ã	 
=
ã	ã	 
ObtenerSede
ã	ã	 "
(
ã	ã	" #
)
ã	ã	# $
;
ã	ã	$ %
string
å	å	 

logoString
å	å	 
=
å	å	 
Convert
å	å	  '
.
å	å	' (
ToBase64String
å	å	( 6
(
å	å	6 7
sede
å	å	7 ;
.
å	å	; <
Logo
å	å	< @
,
å	å	@ A
$num
å	å	B C
,
å	å	C D
sede
å	å	E I
.
å	å	I J
Logo
å	å	J N
.
å	å	N O
Length
å	å	O U
)
å	å	U V
;
å	å	V W
ReportParameter
ç	ç	 
logoSede
ç	ç	 $
=
ç	ç	% &
new
ç	ç	' *
ReportParameter
ç	ç	+ :
(
ç	ç	: ;
$str
ç	ç	; E
,
ç	ç	E F

logoString
ç	ç	G Q
)
ç	ç	Q R
;
ç	ç	R S
ReportParameter
é	é	 
empleadoSede
é	é	 (
=
é	é	) *
new
é	é	+ .
ReportParameter
é	é	/ >
(
é	é	> ?
$str
é	é	? H
,
é	é	H I
ProfileData
é	é	J U
(
é	é	U V
)
é	é	V W
.
é	é	W X
Empleado
é	é	X `
.
é	é	` a
NombresYApellidos
é	é	a r
)
é	é	r s
;
é	é	s t
DateTime
è	è	 
fechaActual
è	è	  
=
è	è	! "
DateTimeUtil
è	è	" .
.
è	è	. /
FechaActual
è	è	/ :
(
è	è	: ;
)
è	è	; <
;
è	è	< =
ReportParameter
ê	ê	  
fechaActualSistema
ê	ê	 .
=
ê	ê	/ 0
new
ê	ê	1 4
ReportParameter
ê	ê	5 D
(
ê	ê	D E
$str
ê	ê	E R
,
ê	ê	R S
fechaActual
ê	ê	T _
.
ê	ê	_ `
ToString
ê	ê	` h
(
ê	ê	h i
)
ê	ê	i j
)
ê	ê	j k
;
ê	ê	k l
	rptviewer
í	í	 
.
í	í	 
LocalReport
í	í	 !
.
í	í	! "

ReportPath
í	í	" ,
=
í	í	- .
Request
í	í	/ 6
.
í	í	6 7
MapPath
í	í	7 >
(
í	í	> ?
Request
í	í	? F
.
í	í	F G
ApplicationPath
í	í	G V
)
í	í	V W
+
í	í	X Y
$strí	í	Z ü
;í	í	ü †
	rptviewer
ì	ì	 
.
ì	ì	 
LocalReport
ì	ì	 !
.
ì	ì	! "
SetParameters
ì	ì	" /
(
ì	ì	/ 0
new
ì	ì	0 3
ReportParameter
ì	ì	4 C
[
ì	ì	C D
]
ì	ì	D E
{
ì	ì	F G!
parametroFechaDesde
ì	ì	H [
,
ì	ì	[ \!
parametroFechaHasta
ì	ì	] p
,
ì	ì	p q
nombreEmpresa
ì	ì	r 
,ì	ì	 Ä
nombreReporteì	ì	Å é
,ì	ì	é è$
nombreCentroAtencionì	ì	ê §
,ì	ì	§ •
empleadoSedeì	ì	¶ ≤
,ì	ì	≤ ≥
logoSedeì	ì	¥ º
,ì	ì	º Ω"
fechaActualSistemaì	ì	æ –
}ì	ì	— “
)ì	ì	“ ”
;ì	ì	” ‘
ReportDataSource
ï	ï	 *
rptdatasourceReporteUtilidad
ï	ï	 9
=
ï	ï	: ;
new
ï	ï	< ?
ReportDataSource
ï	ï	@ P
(
ï	ï	P Q
$str
ï	ï	Q i
,
ï	ï	i j(
reporteDeUtilidadDeVentasï	ï	k Ñ
)ï	ï	Ñ Ö
;ï	ï	Ö Ü
ReportDataSource
ñ	ñ	 (
rptdatasourceMejorUtilidad
ñ	ñ	 7
=
ñ	ñ	8 9
new
ñ	ñ	: =
ReportDataSource
ñ	ñ	> N
(
ñ	ñ	N O
$str
ñ	ñ	O e
,
ñ	ñ	e f#
mejorUtilidadDeVentas
ñ	ñ	g |
)
ñ	ñ	| }
;
ñ	ñ	} ~
ReportDataSource
ó	ó	 '
rptdatasourcePeorUtilidad
ó	ó	 6
=
ó	ó	7 8
new
ó	ó	9 <
ReportDataSource
ó	ó	= M
(
ó	ó	M N
$str
ó	ó	N c
,
ó	ó	c d"
peorUtilidadDeVentas
ó	ó	e y
)
ó	ó	y z
;
ó	ó	z {
	rptviewer
ô	ô	 
.
ô	ô	 
ProcessingMode
ô	ô	 $
=
ô	ô	% &
ProcessingMode
ô	ô	' 5
.
ô	ô	5 6
Local
ô	ô	6 ;
;
ô	ô	; <
	rptviewer
ö	ö	 
.
ö	ö	 
LocalReport
ö	ö	 !
.
ö	ö	! "
DataSources
ö	ö	" -
.
ö	ö	- .
Add
ö	ö	. 1
(
ö	ö	1 2*
rptdatasourceReporteUtilidad
ö	ö	2 N
)
ö	ö	N O
;
ö	ö	O P
	rptviewer
õ	õ	 
.
õ	õ	 
LocalReport
õ	õ	 !
.
õ	õ	! "
DataSources
õ	õ	" -
.
õ	õ	- .
Add
õ	õ	. 1
(
õ	õ	1 2(
rptdatasourceMejorUtilidad
õ	õ	2 L
)
õ	õ	L M
;
õ	õ	M N
	rptviewer
ú	ú	 
.
ú	ú	 
LocalReport
ú	ú	 !
.
ú	ú	! "
DataSources
ú	ú	" -
.
ú	ú	- .
Add
ú	ú	. 1
(
ú	ú	1 2'
rptdatasourcePeorUtilidad
ú	ú	2 K
)
ú	ú	K L
;
ú	ú	L M
	rptviewer
û	û	 
.
û	û	 !
SizeToReportContent
û	û	 )
=
û	û	* +
true
û	û	, 0
;
û	û	0 1
	rptviewer
ü	ü	 
.
ü	ü	 
Width
ü	ü	 
=
ü	ü	 
Unit
ü	ü	 "
.
ü	ü	" #

Percentage
ü	ü	# -
(
ü	ü	- .
$num
ü	ü	. 1
)
ü	ü	1 2
;
ü	ü	2 3
	rptviewer
†	†	 
.
†	†	 
Height
†	†	 
=
†	†	 
Unit
†	†	 #
.
†	†	# $

Percentage
†	†	$ .
(
†	†	. /
$num
†	†	/ 2
)
†	†	2 3
;
†	†	3 4
ViewBag
°	°	 
.
°	°	 
ReportViewer
°	°	  
=
°	°	! "
	rptviewer
°	°	# ,
;
°	°	, -
return
£	£	 
View
£	£	 
(
£	£	 
$str
£	£	 -
)
£	£	- .
;
£	£	. /
}
•	•	 	
public
ß	ß	 
ActionResult
ß	ß	 1
#ReporteDeUtilidadDeVentaPorConcepto
ß	ß	 ?
(
ß	ß	? @
string
ß	ß	@ F
fechaInicio
ß	ß	G R
,
ß	ß	R S
string
ß	ß	T Z
fechaFin
ß	ß	[ c
,
ß	ß	c d
bool
ß	ß	e i
esReporteGlobal
ß	ß	j y
,
ß	ß	y z
stringß	ß	{ Å&
nombreCentroDeAtencionß	ß	Ç ò
,ß	ß	ò ô
[ß	ß	ö õ
Systemß	ß	õ °
.ß	ß	° ¢
Webß	ß	¢ •
.ß	ß	• ¶
Httpß	ß	¶ ™
.ß	ß	™ ´
FromUriß	ß	´ ≤
]ß	ß	≤ ≥
intß	ß	¥ ∑
[ß	ß	∑ ∏
]ß	ß	∏ π"
idsCentrosAtencionß	ß	∫ Ã
,ß	ß	Ã Õ
[ß	ß	Œ œ
Systemß	ß	œ ’
.ß	ß	’ ÷
Webß	ß	÷ Ÿ
.ß	ß	Ÿ ⁄
Httpß	ß	⁄ ﬁ
.ß	ß	ﬁ ﬂ
FromUriß	ß	ﬂ Ê
]ß	ß	Ê Á
intß	ß	Ë Î
[ß	ß	Î Ï
]ß	ß	Ï Ì

idsFamiliaß	ß	Ó ¯
)ß	ß	¯ ˘
{
®	®	 	
DateTime
©	©	 

fechaDesde
©	©	 
=
©	©	  !
DateTimeUtil
©	©	" .
.
©	©	. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
©	©	/ Z
(
©	©	Z [
fechaInicio
©	©	[ f
)
©	©	f g
;
©	©	g h
DateTime
™	™	 

fechaHasta
™	™	 
=
™	™	  !
DateTimeUtil
™	™	" .
.
™	™	. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
™	™	/ Z
(
™	™	Z [
fechaFin
™	™	[ c
)
™	™	c d
;
™	™	d e
List
¨	¨	 
<
¨	¨	 &
CostoUtilidadPorConcepto
¨	¨	 )
>
¨	¨	) *'
reporteDeUtilidadDeVentas
¨	¨	+ D
=
¨	¨	E F
operacionLogica
¨	¨	G V
.
¨	¨	V W:
+ObtenerReporteDeUtilidadDeVentasPorConcepto¨	¨	W Ç
(¨	¨	Ç É

fechaDesde¨	¨	É ç
,¨	¨	ç é

fechaHasta¨	¨	è ô
,¨	¨	ô ö
esReporteGlobal¨	¨	õ ™
,¨	¨	™ ´"
idsCentrosAtencion¨	¨	¨ æ
,¨	¨	æ ø

idsFamilia¨	¨	¿  
)¨	¨	  À
;¨	¨	À Ã
var
Æ	Æ	 
	rptviewer
Æ	Æ	 
=
Æ	Æ	 
new
Æ	Æ	 
ReportViewer
Æ	Æ	  ,
(
Æ	Æ	, -
)
Æ	Æ	- .
;
Æ	Æ	. /
ReportParameter
∞	∞	 !
parametroFechaDesde
∞	∞	 /
=
∞	∞	0 1
new
∞	∞	2 5
ReportParameter
∞	∞	6 E
(
∞	∞	E F
$str
∞	∞	F R
,
∞	∞	R S

fechaDesde
∞	∞	T ^
.
∞	∞	^ _
ToString
∞	∞	_ g
(
∞	∞	g h
)
∞	∞	h i
)
∞	∞	i j
;
∞	∞	j k
ReportParameter
±	±	 !
parametroFechaHasta
±	±	 /
=
±	±	0 1
new
±	±	2 5
ReportParameter
±	±	6 E
(
±	±	E F
$str
±	±	F R
,
±	±	R S

fechaHasta
±	±	T ^
.
±	±	^ _
ToString
±	±	_ g
(
±	±	g h
)
±	±	h i
)
±	±	i j
;
±	±	j k
ReportParameter
≤	≤	 
nombreReporte
≤	≤	 )
=
≤	≤	* +
new
≤	≤	, /
ReportParameter
≤	≤	0 ?
(
≤	≤	? @
$str
≤	≤	@ O
,
≤	≤	O P
$str
≤	≤	Q s
)
≤	≤	s t
;
≤	≤	t u
ReportParameter
≥	≥	 
nombreEmpresa
≥	≥	 )
=
≥	≥	* +
new
≥	≥	, /
ReportParameter
≥	≥	0 ?
(
≥	≥	? @
$str
≥	≥	@ O
,
≥	≥	O P
ObtenerSede
≥	≥	Q \
(
≥	≥	\ ]
)
≥	≥	] ^
.
≥	≥	^ _
Nombre
≥	≥	_ e
)
≥	≥	e f
;
≥	≥	f g
ReportParameter
¥	¥	 "
nombreCentroAtencion
¥	¥	 0
=
¥	¥	1 2
new
¥	¥	3 6
ReportParameter
¥	¥	7 F
(
¥	¥	F G
$str
¥	¥	G ]
,
¥	¥	] ^
esReporteGlobal
¥	¥	_ n
?
¥	¥	o p
ObtenerSede
¥	¥	q |
(
¥	¥	| }
)
¥	¥	} ~
.
¥	¥	~ 
Nombre¥	¥	 Ö
:¥	¥	Ü á&
nombreCentroDeAtencion¥	¥	à û
)¥	¥	û ü
;¥	¥	ü †
var
∂	∂	 
sede
∂	∂	 
=
∂	∂	 
ObtenerSede
∂	∂	 "
(
∂	∂	" #
)
∂	∂	# $
;
∂	∂	$ %
string
∑	∑	 

logoString
∑	∑	 
=
∑	∑	 
Convert
∑	∑	  '
.
∑	∑	' (
ToBase64String
∑	∑	( 6
(
∑	∑	6 7
sede
∑	∑	7 ;
.
∑	∑	; <
Logo
∑	∑	< @
,
∑	∑	@ A
$num
∑	∑	B C
,
∑	∑	C D
sede
∑	∑	E I
.
∑	∑	I J
Logo
∑	∑	J N
.
∑	∑	N O
Length
∑	∑	O U
)
∑	∑	U V
;
∑	∑	V W
ReportParameter
∏	∏	 
logoSede
∏	∏	 $
=
∏	∏	% &
new
∏	∏	' *
ReportParameter
∏	∏	+ :
(
∏	∏	: ;
$str
∏	∏	; E
,
∏	∏	E F

logoString
∏	∏	G Q
)
∏	∏	Q R
;
∏	∏	R S
ReportParameter
π	π	 
empleadoSede
π	π	 (
=
π	π	) *
new
π	π	+ .
ReportParameter
π	π	/ >
(
π	π	> ?
$str
π	π	? H
,
π	π	H I
ProfileData
π	π	J U
(
π	π	U V
)
π	π	V W
.
π	π	W X
Empleado
π	π	X `
.
π	π	` a
NombresYApellidos
π	π	a r
)
π	π	r s
;
π	π	s t
DateTime
∫	∫	 
fechaActual
∫	∫	  
=
∫	∫	! "
DateTimeUtil
∫	∫	" .
.
∫	∫	. /
FechaActual
∫	∫	/ :
(
∫	∫	: ;
)
∫	∫	; <
;
∫	∫	< =
ReportParameter
ª	ª	  
fechaActualSistema
ª	ª	 .
=
ª	ª	/ 0
new
ª	ª	1 4
ReportParameter
ª	ª	5 D
(
ª	ª	D E
$str
ª	ª	E R
,
ª	ª	R S
fechaActual
ª	ª	T _
.
ª	ª	_ `
ToString
ª	ª	` h
(
ª	ª	h i
)
ª	ª	i j
)
ª	ª	j k
;
ª	ª	k l
	rptviewer
Ω	Ω	 
.
Ω	Ω	 
LocalReport
Ω	Ω	 !
.
Ω	Ω	! "

ReportPath
Ω	Ω	" ,
=
Ω	Ω	- .
Request
Ω	Ω	/ 6
.
Ω	Ω	6 7
MapPath
Ω	Ω	7 >
(
Ω	Ω	> ?
Request
Ω	Ω	? F
.
Ω	Ω	F G
ApplicationPath
Ω	Ω	G V
)
Ω	Ω	V W
+
Ω	Ω	X Y
$strΩ	Ω	Z †
;Ω	Ω	† °
	rptviewer
æ	æ	 
.
æ	æ	 
LocalReport
æ	æ	 !
.
æ	æ	! "
SetParameters
æ	æ	" /
(
æ	æ	/ 0
new
æ	æ	0 3
ReportParameter
æ	æ	4 C
[
æ	æ	C D
]
æ	æ	D E
{
æ	æ	F G!
parametroFechaDesde
æ	æ	H [
,
æ	æ	[ \!
parametroFechaHasta
æ	æ	] p
,
æ	æ	p q
nombreEmpresa
æ	æ	r 
,æ	æ	 Ä
nombreReporteæ	æ	Å é
,æ	æ	é è$
nombreCentroAtencionæ	æ	ê §
,æ	æ	§ •
empleadoSedeæ	æ	¶ ≤
,æ	æ	≤ ≥
logoSedeæ	æ	¥ º
,æ	æ	º Ω"
fechaActualSistemaæ	æ	æ –
}æ	æ	— “
)æ	æ	“ ”
;æ	æ	” ‘
ReportDataSource
¿	¿	 *
rptdatasourceReporteUtilidad
¿	¿	 9
=
¿	¿	: ;
new
¿	¿	< ?
ReportDataSource
¿	¿	@ P
(
¿	¿	P Q
$str
¿	¿	Q i
,
¿	¿	i j(
reporteDeUtilidadDeVentas¿	¿	k Ñ
)¿	¿	Ñ Ö
;¿	¿	Ö Ü
	rptviewer
¬	¬	 
.
¬	¬	 
ProcessingMode
¬	¬	 $
=
¬	¬	% &
ProcessingMode
¬	¬	' 5
.
¬	¬	5 6
Local
¬	¬	6 ;
;
¬	¬	; <
	rptviewer
√	√	 
.
√	√	 
LocalReport
√	√	 !
.
√	√	! "
DataSources
√	√	" -
.
√	√	- .
Add
√	√	. 1
(
√	√	1 2*
rptdatasourceReporteUtilidad
√	√	2 N
)
√	√	N O
;
√	√	O P
	rptviewer
≈	≈	 
.
≈	≈	 !
SizeToReportContent
≈	≈	 )
=
≈	≈	* +
true
≈	≈	, 0
;
≈	≈	0 1
	rptviewer
∆	∆	 
.
∆	∆	 
Width
∆	∆	 
=
∆	∆	 
Unit
∆	∆	 "
.
∆	∆	" #

Percentage
∆	∆	# -
(
∆	∆	- .
$num
∆	∆	. 1
)
∆	∆	1 2
;
∆	∆	2 3
	rptviewer
«	«	 
.
«	«	 
Height
«	«	 
=
«	«	 
Unit
«	«	 #
.
«	«	# $

Percentage
«	«	$ .
(
«	«	. /
$num
«	«	/ 2
)
«	«	2 3
;
«	«	3 4
ViewBag
»	»	 
.
»	»	 
ReportViewer
»	»	  
=
»	»	! "
	rptviewer
»	»	# ,
;
»	»	, -
return
 	 	 
View
 	 	 
(
 	 	 
$str
 	 	 -
)
 	 	- .
;
 	 	. /
}
Ã	Ã	 	
public
—	—	 
ActionResult
—	—	 
ReporteDeCaja
—	—	 )
(
—	—	) *
string
—	—	* 0
fechaInicio
—	—	1 <
,
—	—	< =
string
—	—	> D
fechaFin
—	—	E M
,
—	—	M N
bool
—	—	O S
esReporteGlobal
—	—	T c
,
—	—	c d
string
—	—	e k%
nombreCentroDeAtencion—	—	l Ç
,—	—	Ç É
[—	—	Ñ Ö
System—	—	Ö ã
.—	—	ã å
Web—	—	å è
.—	—	è ê
Http—	—	ê î
.—	—	î ï
FromUri—	—	ï ú
]—	—	ú ù
int—	—	û °
[—	—	° ¢
]—	—	¢ £"
idsCentrosAtencion—	—	§ ∂
)—	—	∂ ∑
{
“	“	 	
DateTime
”	”	 

fechaDesde
”	”	 
=
”	”	  !
DateTimeUtil
”	”	" .
.
”	”	. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
”	”	/ Z
(
”	”	Z [
fechaInicio
”	”	[ f
)
”	”	f g
;
”	”	g h
DateTime
‘	‘	 

fechaHasta
‘	‘	 
=
‘	‘	  !
DateTimeUtil
‘	‘	" .
.
‘	‘	. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
‘	‘	/ Z
(
‘	‘	Z [
fechaFin
‘	‘	[ c
)
‘	‘	c d
;
‘	‘	d e
List
÷	÷	 
<
÷	÷	 %
Resumen_Movimiento_Caja
÷	÷	 (
>
÷	÷	( )"
resumenReporteDeCaja
÷	÷	* >
=
÷	÷	? @
operacionLogica
÷	÷	A P
.
÷	÷	P Q$
ObtenerSaldosIniciales
÷	÷	Q g
(
÷	÷	g h

fechaDesde
÷	÷	h r
,
÷	÷	r s
esReporteGlobal÷	÷	t É
,÷	÷	É Ñ"
idsCentrosAtencion÷	÷	Ö ó
)÷	÷	ó ò
;÷	÷	ò ô
List
◊	◊	 
<
◊	◊	 
Movimiento_Caja
◊	◊	  
>
◊	◊	  !
movimientosDeCaja
◊	◊	" 3
=
◊	◊	4 5
operacionLogica
◊	◊	6 E
.
◊	◊	E F"
ObtenerReporteDeCaja
◊	◊	F Z
(
◊	◊	Z [

fechaDesde
◊	◊	[ e
,
◊	◊	e f

fechaHasta
◊	◊	g q
,
◊	◊	q r
esReporteGlobal◊	◊	s Ç
,◊	◊	Ç É"
idsCentrosAtencion◊	◊	Ñ ñ
)◊	◊	ñ ó
;◊	◊	ó ò
var
ÿ	ÿ	 
cajasVigentes
ÿ	ÿ	 
=
ÿ	ÿ	 $
centroDeAtencionLogica
ÿ	ÿ	  6
.
ÿ	ÿ	6 7"
ObtenerCajasVigentes
ÿ	ÿ	7 K
(
ÿ	ÿ	K L
)
ÿ	ÿ	L M
;
ÿ	ÿ	M N
List
Ÿ	Ÿ	 
<
Ÿ	Ÿ	 
Movimiento_Caja
Ÿ	Ÿ	  
>
Ÿ	Ÿ	  !
reporteDeCaja
Ÿ	Ÿ	" /
=
Ÿ	Ÿ	0 1
Movimiento_Caja
Ÿ	Ÿ	2 A
.
Ÿ	Ÿ	A B
Convert
Ÿ	Ÿ	B I
(
Ÿ	Ÿ	I J"
resumenReporteDeCaja
Ÿ	Ÿ	J ^
,
Ÿ	Ÿ	^ _
movimientosDeCaja
Ÿ	Ÿ	` q
,
Ÿ	Ÿ	q r
cajasVigentesŸ	Ÿ	s Ä
)Ÿ	Ÿ	Ä Å
;Ÿ	Ÿ	Å Ç
var
€	€	 
	rptviewer
€	€	 
=
€	€	 
new
€	€	 
ReportViewer
€	€	  ,
(
€	€	, -
)
€	€	- .
;
€	€	. /
ReportParameter
›	›	 !
parametroFechaDesde
›	›	 /
=
›	›	0 1
new
›	›	2 5
ReportParameter
›	›	6 E
(
›	›	E F
$str
›	›	F R
,
›	›	R S

fechaDesde
›	›	T ^
.
›	›	^ _
ToString
›	›	_ g
(
›	›	g h
)
›	›	h i
)
›	›	i j
;
›	›	j k
ReportParameter
ﬁ	ﬁ	 !
parametroFechaHasta
ﬁ	ﬁ	 /
=
ﬁ	ﬁ	0 1
new
ﬁ	ﬁ	2 5
ReportParameter
ﬁ	ﬁ	6 E
(
ﬁ	ﬁ	E F
$str
ﬁ	ﬁ	F R
,
ﬁ	ﬁ	R S

fechaHasta
ﬁ	ﬁ	T ^
.
ﬁ	ﬁ	^ _
ToString
ﬁ	ﬁ	_ g
(
ﬁ	ﬁ	g h
)
ﬁ	ﬁ	h i
)
ﬁ	ﬁ	i j
;
ﬁ	ﬁ	j k
ReportParameter
ﬂ	ﬂ	 
nombreEmpresa
ﬂ	ﬂ	 )
=
ﬂ	ﬂ	* +
new
ﬂ	ﬂ	, /
ReportParameter
ﬂ	ﬂ	0 ?
(
ﬂ	ﬂ	? @
$str
ﬂ	ﬂ	@ O
,
ﬂ	ﬂ	O P
ObtenerSede
ﬂ	ﬂ	Q \
(
ﬂ	ﬂ	\ ]
)
ﬂ	ﬂ	] ^
.
ﬂ	ﬂ	^ _
Nombre
ﬂ	ﬂ	_ e
)
ﬂ	ﬂ	e f
;
ﬂ	ﬂ	f g
ReportParameter
‡	‡	 "
nombreCentroAtencion
‡	‡	 0
=
‡	‡	1 2
new
‡	‡	3 6
ReportParameter
‡	‡	7 F
(
‡	‡	F G
$str
‡	‡	G ]
,
‡	‡	] ^
esReporteGlobal
‡	‡	_ n
?
‡	‡	o p
ObtenerSede
‡	‡	q |
(
‡	‡	| }
)
‡	‡	} ~
.
‡	‡	~ 
Nombre‡	‡	 Ö
:‡	‡	Ü á&
nombreCentroDeAtencion‡	‡	à û
)‡	‡	û ü
;‡	‡	ü †
var
‚	‚	 
sede
‚	‚	 
=
‚	‚	 
ObtenerSede
‚	‚	 "
(
‚	‚	" #
)
‚	‚	# $
;
‚	‚	$ %
string
„	„	 

logoString
„	„	 
=
„	„	 
Convert
„	„	  '
.
„	„	' (
ToBase64String
„	„	( 6
(
„	„	6 7
sede
„	„	7 ;
.
„	„	; <
Logo
„	„	< @
,
„	„	@ A
$num
„	„	B C
,
„	„	C D
sede
„	„	E I
.
„	„	I J
Logo
„	„	J N
.
„	„	N O
Length
„	„	O U
)
„	„	U V
;
„	„	V W
ReportParameter
‰	‰	 
logoSede
‰	‰	 $
=
‰	‰	% &
new
‰	‰	' *
ReportParameter
‰	‰	+ :
(
‰	‰	: ;
$str
‰	‰	; E
,
‰	‰	E F

logoString
‰	‰	G Q
)
‰	‰	Q R
;
‰	‰	R S
ReportParameter
Ê	Ê	 
empleadoSede
Ê	Ê	 (
=
Ê	Ê	) *
new
Ê	Ê	+ .
ReportParameter
Ê	Ê	/ >
(
Ê	Ê	> ?
$str
Ê	Ê	? H
,
Ê	Ê	H I
ProfileData
Ê	Ê	J U
(
Ê	Ê	U V
)
Ê	Ê	V W
.
Ê	Ê	W X
Empleado
Ê	Ê	X `
.
Ê	Ê	` a
NombresYApellidos
Ê	Ê	a r
)
Ê	Ê	r s
;
Ê	Ê	s t
DateTime
Ë	Ë	 
fechaActual
Ë	Ë	  
=
Ë	Ë	! "
DateTimeUtil
Ë	Ë	" .
.
Ë	Ë	. /
FechaActual
Ë	Ë	/ :
(
Ë	Ë	: ;
)
Ë	Ë	; <
;
Ë	Ë	< =
ReportParameter
È	È	  
fechaActualSistema
È	È	 .
=
È	È	/ 0
new
È	È	1 4
ReportParameter
È	È	5 D
(
È	È	D E
$str
È	È	E R
,
È	È	R S
fechaActual
È	È	T _
.
È	È	_ `
ToString
È	È	` h
(
È	È	h i
)
È	È	i j
)
È	È	j k
;
È	È	k l
	rptviewer
Î	Î	 
.
Î	Î	 
LocalReport
Î	Î	 !
.
Î	Î	! "

ReportPath
Î	Î	" ,
=
Î	Î	- .
Request
Î	Î	/ 6
.
Î	Î	6 7
MapPath
Î	Î	7 >
(
Î	Î	> ?
Request
Î	Î	? F
.
Î	Î	F G
ApplicationPath
Î	Î	G V
)
Î	Î	V W
+
Î	Î	X Y
$strÎ	Î	Z é
;Î	Î	é è
	rptviewer
Ï	Ï	 
.
Ï	Ï	 
LocalReport
Ï	Ï	 !
.
Ï	Ï	! "
SetParameters
Ï	Ï	" /
(
Ï	Ï	/ 0
new
Ï	Ï	0 3
ReportParameter
Ï	Ï	4 C
[
Ï	Ï	C D
]
Ï	Ï	D E
{
Ï	Ï	F G!
parametroFechaDesde
Ï	Ï	H [
,
Ï	Ï	[ \!
parametroFechaHasta
Ï	Ï	] p
,
Ï	Ï	p q
nombreEmpresa
Ï	Ï	r 
,Ï	Ï	 Ä$
nombreCentroAtencionÏ	Ï	Å ï
,Ï	Ï	ï ñ
empleadoSedeÏ	Ï	ó £
,Ï	Ï	£ §
logoSedeÏ	Ï	• ≠
,Ï	Ï	≠ Æ"
fechaActualSistemaÏ	Ï	Ø ¡
}Ï	Ï	¬ √
)Ï	Ï	√ ƒ
;Ï	Ï	ƒ ≈
ReportDataSource
Ó	Ó	 &
rptdatasourceReporteCaja
Ó	Ó	 5
=
Ó	Ó	6 7
new
Ó	Ó	8 ;
ReportDataSource
Ó	Ó	< L
(
Ó	Ó	L M
$str
Ó	Ó	M a
,
Ó	Ó	a b
reporteDeCaja
Ó	Ó	c p
)
Ó	Ó	p q
;
Ó	Ó	q r
ReportDataSource
Ô	Ô	 -
rptdatasourceResumenReporteCaja
Ô	Ô	 <
=
Ô	Ô	= >
new
Ô	Ô	? B
ReportDataSource
Ô	Ô	C S
(
Ô	Ô	S T
$str
Ô	Ô	T o
,
Ô	Ô	o p#
resumenReporteDeCajaÔ	Ô	q Ö
)Ô	Ô	Ö Ü
;Ô	Ô	Ü á
	rptviewer
Ò	Ò	 
.
Ò	Ò	 
ProcessingMode
Ò	Ò	 $
=
Ò	Ò	% &
ProcessingMode
Ò	Ò	' 5
.
Ò	Ò	5 6
Local
Ò	Ò	6 ;
;
Ò	Ò	; <
	rptviewer
Ú	Ú	 
.
Ú	Ú	 
LocalReport
Ú	Ú	 !
.
Ú	Ú	! "
DataSources
Ú	Ú	" -
.
Ú	Ú	- .
Add
Ú	Ú	. 1
(
Ú	Ú	1 2&
rptdatasourceReporteCaja
Ú	Ú	2 J
)
Ú	Ú	J K
;
Ú	Ú	K L
	rptviewer
Û	Û	 
.
Û	Û	 
LocalReport
Û	Û	 !
.
Û	Û	! "
DataSources
Û	Û	" -
.
Û	Û	- .
Add
Û	Û	. 1
(
Û	Û	1 2-
rptdatasourceResumenReporteCaja
Û	Û	2 Q
)
Û	Û	Q R
;
Û	Û	R S
	rptviewer
ı	ı	 
.
ı	ı	 !
SizeToReportContent
ı	ı	 )
=
ı	ı	* +
true
ı	ı	, 0
;
ı	ı	0 1
	rptviewer
ˆ	ˆ	 
.
ˆ	ˆ	 
Width
ˆ	ˆ	 
=
ˆ	ˆ	 
Unit
ˆ	ˆ	 "
.
ˆ	ˆ	" #

Percentage
ˆ	ˆ	# -
(
ˆ	ˆ	- .
$num
ˆ	ˆ	. 1
)
ˆ	ˆ	1 2
;
ˆ	ˆ	2 3
	rptviewer
˜	˜	 
.
˜	˜	 
Height
˜	˜	 
=
˜	˜	 
Unit
˜	˜	 #
.
˜	˜	# $

Percentage
˜	˜	$ .
(
˜	˜	. /
$num
˜	˜	/ 2
)
˜	˜	2 3
;
˜	˜	3 4
ViewBag
¯	¯	 
.
¯	¯	 
ReportViewer
¯	¯	  
=
¯	¯	! "
	rptviewer
¯	¯	# ,
;
¯	¯	, -
return
˙	˙	 
View
˙	˙	 
(
˙	˙	 
$str
˙	˙	 -
)
˙	˙	- .
;
˙	˙	. /
}
¸	¸	 	
public
Ä
Ä
 
ActionResult
Ä
Ä
 &
ReporteDePuntosCanjeados
Ä
Ä
 4
(
Ä
Ä
4 5
string
Ä
Ä
5 ;
fechaInicio
Ä
Ä
< G
,
Ä
Ä
G H
string
Ä
Ä
I O
fechaFin
Ä
Ä
P X
,
Ä
Ä
X Y
[
Ä
Ä
Z [
System
Ä
Ä
[ a
.
Ä
Ä
a b
Web
Ä
Ä
b e
.
Ä
Ä
e f
Http
Ä
Ä
f j
.
Ä
Ä
j k
FromUri
Ä
Ä
k r
]
Ä
Ä
r s
int
Ä
Ä
t w
[
Ä
Ä
w x
]
Ä
Ä
x y!
idsCentrosAtencionÄ
Ä
z å
)Ä
Ä
å ç
{
Å
Å
 	
DateTime
Ç
Ç
 

fechaDesde
Ç
Ç
 
=
Ç
Ç
  !
DateTimeUtil
Ç
Ç
" .
.
Ç
Ç
. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
Ç
Ç
/ Z
(
Ç
Ç
Z [
fechaInicio
Ç
Ç
[ f
)
Ç
Ç
f g
;
Ç
Ç
g h
DateTime
É
É
 

fechaHasta
É
É
 
=
É
É
  !
DateTimeUtil
É
É
" .
.
É
É
. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
É
É
/ Z
(
É
É
Z [
fechaFin
É
É
[ c
)
É
É
c d
;
É
É
d e
List
Ö
Ö
 
<
Ö
Ö
 &
Reporte_Puntos_Canjeados
Ö
Ö
 )
>
Ö
Ö
) *$
reportePuntosCanjeados
Ö
Ö
+ A
=
Ö
Ö
B C
operacionLogica
Ö
Ö
D S
.
Ö
Ö
S T-
ObtenerReporteDePuntosCanjeados
Ö
Ö
T s
(
Ö
Ö
s t

fechaDesde
Ö
Ö
t ~
,
Ö
Ö
~ 

fechaHastaÖ
Ö
Ä ä
,Ö
Ö
ä ã"
idsCentrosAtencionÖ
Ö
å û
)Ö
Ö
û ü
;Ö
Ö
ü †
List
Ü
Ü
 
<
Ü
Ü
 &
Reporte_Puntos_Canjeados
Ü
Ü
 )
>
Ü
Ü
) *+
reporteIngresoDineroConPuntos
Ü
Ü
+ H
=
Ü
Ü
I J$
reportePuntosCanjeados
Ü
Ü
K a
.
Ü
Ü
a b
Where
Ü
Ü
b g
(
Ü
Ü
g h
r
Ü
Ü
h i
=>
Ü
Ü
j l
r
Ü
Ü
m n
.
Ü
Ü
n o
	EsIngreso
Ü
Ü
o x
)
Ü
Ü
x y
.
Ü
Ü
y z
ToListÜ
Ü
z Ä
(Ü
Ü
Ä Å
)Ü
Ü
Å Ç
;Ü
Ü
Ç É
List
á
á
 
<
á
á
 &
Reporte_Puntos_Canjeados
á
á
 )
>
á
á
) **
reporteSalidaDineroConPuntos
á
á
+ G
=
á
á
H I$
reportePuntosCanjeados
á
á
J `
.
á
á
` a
Where
á
á
a f
(
á
á
f g
r
á
á
g h
=>
á
á
i k
!
á
á
l m
r
á
á
m n
.
á
á
n o
	EsIngreso
á
á
o x
)
á
á
x y
.
á
á
y z
ToListá
á
z Ä
(á
á
Ä Å
)á
á
Å Ç
;á
á
Ç É
List
à
à
 
<
à
à
 &
Resumen_Puntos_Canjeados
à
à
 )
>
à
à
) *$
resumenPuntosCanjeados
à
à
+ A
=
à
à
B C&
Resumen_Puntos_Canjeados
à
à
D \
.
à
à
\ ]
Convert
à
à
] d
(
à
à
d e$
reportePuntosCanjeados
à
à
e {
)
à
à
{ |
;
à
à
| }
var
ä
ä
 
	rptviewer
ä
ä
 
=
ä
ä
 
new
ä
ä
 
ReportViewer
ä
ä
  ,
(
ä
ä
, -
)
ä
ä
- .
;
ä
ä
. /
ReportParameter
å
å
 !
parametroFechaDesde
å
å
 /
=
å
å
0 1
new
å
å
2 5
ReportParameter
å
å
6 E
(
å
å
E F
$str
å
å
F R
,
å
å
R S

fechaDesde
å
å
T ^
.
å
å
^ _
ToString
å
å
_ g
(
å
å
g h
)
å
å
h i
)
å
å
i j
;
å
å
j k
ReportParameter
ç
ç
 !
parametroFechaHasta
ç
ç
 /
=
ç
ç
0 1
new
ç
ç
2 5
ReportParameter
ç
ç
6 E
(
ç
ç
E F
$str
ç
ç
F R
,
ç
ç
R S

fechaHasta
ç
ç
T ^
.
ç
ç
^ _
ToString
ç
ç
_ g
(
ç
ç
g h
)
ç
ç
h i
)
ç
ç
i j
;
ç
ç
j k
ReportParameter
é
é
 
nombreEmpresa
é
é
 )
=
é
é
* +
new
é
é
, /
ReportParameter
é
é
0 ?
(
é
é
? @
$str
é
é
@ L
,
é
é
L M
ObtenerSede
é
é
N Y
(
é
é
Y Z
)
é
é
Z [
.
é
é
[ \
Nombre
é
é
\ b
)
é
é
b c
;
é
é
c d
var
ê
ê
 
sede
ê
ê
 
=
ê
ê
 
ObtenerSede
ê
ê
 "
(
ê
ê
" #
)
ê
ê
# $
;
ê
ê
$ %
DateTime
ë
ë
 
fechaActual
ë
ë
  
=
ë
ë
! "
DateTimeUtil
ë
ë
" .
.
ë
ë
. /
FechaActual
ë
ë
/ :
(
ë
ë
: ;
)
ë
ë
; <
;
ë
ë
< =
string
í
í
 

logoString
í
í
 
=
í
í
 
Convert
í
í
  '
.
í
í
' (
ToBase64String
í
í
( 6
(
í
í
6 7
sede
í
í
7 ;
.
í
í
; <
Logo
í
í
< @
,
í
í
@ A
$num
í
í
B C
,
í
í
C D
sede
í
í
E I
.
í
í
I J
Logo
í
í
J N
.
í
í
N O
Length
í
í
O U
)
í
í
U V
;
í
í
V W
ReportParameter
ì
ì
 
logoSede
ì
ì
 $
=
ì
ì
% &
new
ì
ì
' *
ReportParameter
ì
ì
+ :
(
ì
ì
: ;
$str
ì
ì
; E
,
ì
ì
E F

logoString
ì
ì
G Q
)
ì
ì
Q R
;
ì
ì
R S
ReportParameter
î
î
 
empleadoSede
î
î
 (
=
î
î
) *
new
î
î
+ .
ReportParameter
î
î
/ >
(
î
î
> ?
$str
î
î
? H
,
î
î
H I
ProfileData
î
î
J U
(
î
î
U V
)
î
î
V W
.
î
î
W X
Empleado
î
î
X `
.
î
î
` a
NombresYApellidos
î
î
a r
)
î
î
r s
;
î
î
s t
ReportParameter
ï
ï
  
fechaActualSistema
ï
ï
 .
=
ï
ï
/ 0
new
ï
ï
1 4
ReportParameter
ï
ï
5 D
(
ï
ï
D E
$str
ï
ï
E R
,
ï
ï
R S
fechaActual
ï
ï
T _
.
ï
ï
_ `
ToString
ï
ï
` h
(
ï
ï
h i
)
ï
ï
i j
)
ï
ï
j k
;
ï
ï
k l
	rptviewer
ó
ó
 
.
ó
ó
 
LocalReport
ó
ó
 !
.
ó
ó
! "

ReportPath
ó
ó
" ,
=
ó
ó
- .
Request
ó
ó
/ 6
.
ó
ó
6 7
MapPath
ó
ó
7 >
(
ó
ó
> ?
Request
ó
ó
? F
.
ó
ó
F G
ApplicationPath
ó
ó
G V
)
ó
ó
V W
+
ó
ó
X Y
$stró
ó
Z ó
;ó
ó
ó ò
	rptviewer
ò
ò
 
.
ò
ò
 
LocalReport
ò
ò
 !
.
ò
ò
! "
SetParameters
ò
ò
" /
(
ò
ò
/ 0
new
ò
ò
0 3
ReportParameter
ò
ò
4 C
[
ò
ò
C D
]
ò
ò
D E
{
ò
ò
F G!
parametroFechaDesde
ò
ò
H [
,
ò
ò
[ \!
parametroFechaHasta
ò
ò
] p
,
ò
ò
p q
nombreEmpresa
ò
ò
r 
,ò
ò
 Ä
empleadoSedeò
ò
Å ç
,ò
ò
ç é
logoSedeò
ò
è ó
,ò
ò
ó ò"
fechaActualSistemaò
ò
ô ´
}ò
ò
¨ ≠
)ò
ò
≠ Æ
;ò
ò
Æ Ø
ReportDataSource
ö
ö
 1
#rptdatasourceResumenPuntosCanjeados
ö
ö
 @
=
ö
ö
A B
new
ö
ö
C F
ReportDataSource
ö
ö
G W
(
ö
ö
W X
$str
ö
ö
X w
,
ö
ö
w x%
resumenPuntosCanjeadosö
ö
y è
)ö
ö
è ê
;ö
ö
ê ë
ReportDataSource
õ
õ
 1
#rptdatasourceIngresoDineroConPuntos
õ
õ
 @
=
õ
õ
A B
new
õ
õ
C F
ReportDataSource
õ
õ
G W
(
õ
õ
W X
$str
õ
õ
X w
,
õ
õ
w x,
reporteIngresoDineroConPuntosõ
õ
y ñ
)õ
õ
ñ ó
;õ
õ
ó ò
ReportDataSource
ú
ú
 0
"rptdatasourceSalidaDineroConPuntos
ú
ú
 ?
=
ú
ú
@ A
new
ú
ú
B E
ReportDataSource
ú
ú
F V
(
ú
ú
V W
$str
ú
ú
W u
,
ú
ú
u v+
reporteSalidaDineroConPuntosú
ú
w ì
)ú
ú
ì î
;ú
ú
î ï
	rptviewer
û
û
 
.
û
û
 
ProcessingMode
û
û
 $
=
û
û
% &
ProcessingMode
û
û
' 5
.
û
û
5 6
Local
û
û
6 ;
;
û
û
; <
	rptviewer
ü
ü
 
.
ü
ü
 
LocalReport
ü
ü
 !
.
ü
ü
! "
DataSources
ü
ü
" -
.
ü
ü
- .
Add
ü
ü
. 1
(
ü
ü
1 21
#rptdatasourceResumenPuntosCanjeados
ü
ü
2 U
)
ü
ü
U V
;
ü
ü
V W
	rptviewer
†
†
 
.
†
†
 
LocalReport
†
†
 !
.
†
†
! "
DataSources
†
†
" -
.
†
†
- .
Add
†
†
. 1
(
†
†
1 21
#rptdatasourceIngresoDineroConPuntos
†
†
2 U
)
†
†
U V
;
†
†
V W
	rptviewer
°
°
 
.
°
°
 
LocalReport
°
°
 !
.
°
°
! "
DataSources
°
°
" -
.
°
°
- .
Add
°
°
. 1
(
°
°
1 20
"rptdatasourceSalidaDineroConPuntos
°
°
2 T
)
°
°
T U
;
°
°
U V
	rptviewer
£
£
 
.
£
£
 !
SizeToReportContent
£
£
 )
=
£
£
* +
true
£
£
, 0
;
£
£
0 1
	rptviewer
§
§
 
.
§
§
 
Width
§
§
 
=
§
§
 
Unit
§
§
 "
.
§
§
" #

Percentage
§
§
# -
(
§
§
- .
$num
§
§
. 1
)
§
§
1 2
;
§
§
2 3
	rptviewer
•
•
 
.
•
•
 
Height
•
•
 
=
•
•
 
Unit
•
•
 #
.
•
•
# $

Percentage
•
•
$ .
(
•
•
. /
$num
•
•
/ 2
)
•
•
2 3
;
•
•
3 4
ViewBag
¶
¶
 
.
¶
¶
 
ReportViewer
¶
¶
  
=
¶
¶
! "
	rptviewer
¶
¶
# ,
;
¶
¶
, -
return
®
®
 
View
®
®
 
(
®
®
 
$str
®
®
 -
)
®
®
- .
;
®
®
. /
}
™
™
 	
public
¨
¨
 
ActionResult
¨
¨
 '
ReporteDePuntosPendientes
¨
¨
 5
(
¨
¨
5 6
)
¨
¨
6 7
{
≠
≠
 	
List
Ø
Ø
 
<
Ø
Ø
 '
Reporte_Puntos_Pendientes
Ø
Ø
 *
>
Ø
Ø
* +%
reportePuntosPendientes
Ø
Ø
, C
=
Ø
Ø
D E
operacionLogica
Ø
Ø
F U
.
Ø
Ø
U V.
 ObtenerReporteDePuntosPendientes
Ø
Ø
V v
(
Ø
Ø
v w
)
Ø
Ø
w x
;
Ø
Ø
x y
var
±
±
 
	rptviewer
±
±
 
=
±
±
 
new
±
±
 
ReportViewer
±
±
  ,
(
±
±
, -
)
±
±
- .
;
±
±
. /
var
≤
≤
 
sede
≤
≤
 
=
≤
≤
 
ObtenerSede
≤
≤
 "
(
≤
≤
" #
)
≤
≤
# $
;
≤
≤
$ %
ReportParameter
¥
¥
 
nombreEmpresa
¥
¥
 )
=
¥
¥
* +
new
¥
¥
, /
ReportParameter
¥
¥
0 ?
(
¥
¥
? @
$str
¥
¥
@ L
,
¥
¥
L M
sede
¥
¥
N R
.
¥
¥
R S
Nombre
¥
¥
S Y
)
¥
¥
Y Z
;
¥
¥
Z [
DateTime
∂
∂
 
fechaActual
∂
∂
  
=
∂
∂
! "
DateTimeUtil
∂
∂
" .
.
∂
∂
. /
FechaActual
∂
∂
/ :
(
∂
∂
: ;
)
∂
∂
; <
;
∂
∂
< =
string
∑
∑
 

logoString
∑
∑
 
=
∑
∑
 
Convert
∑
∑
  '
.
∑
∑
' (
ToBase64String
∑
∑
( 6
(
∑
∑
6 7
sede
∑
∑
7 ;
.
∑
∑
; <
Logo
∑
∑
< @
,
∑
∑
@ A
$num
∑
∑
B C
,
∑
∑
C D
sede
∑
∑
E I
.
∑
∑
I J
Logo
∑
∑
J N
.
∑
∑
N O
Length
∑
∑
O U
)
∑
∑
U V
;
∑
∑
V W
ReportParameter
∏
∏
 
logoSede
∏
∏
 $
=
∏
∏
% &
new
∏
∏
' *
ReportParameter
∏
∏
+ :
(
∏
∏
: ;
$str
∏
∏
; E
,
∏
∏
E F

logoString
∏
∏
G Q
)
∏
∏
Q R
;
∏
∏
R S
ReportParameter
π
π
 
empleadoSede
π
π
 (
=
π
π
) *
new
π
π
+ .
ReportParameter
π
π
/ >
(
π
π
> ?
$str
π
π
? H
,
π
π
H I
ProfileData
π
π
J U
(
π
π
U V
)
π
π
V W
.
π
π
W X
Empleado
π
π
X `
.
π
π
` a
NombresYApellidos
π
π
a r
)
π
π
r s
;
π
π
s t
ReportParameter
∫
∫
  
fechaActualSistema
∫
∫
 .
=
∫
∫
/ 0
new
∫
∫
1 4
ReportParameter
∫
∫
5 D
(
∫
∫
D E
$str
∫
∫
E R
,
∫
∫
R S
fechaActual
∫
∫
T _
.
∫
∫
_ `
ToString
∫
∫
` h
(
∫
∫
h i
)
∫
∫
i j
)
∫
∫
j k
;
∫
∫
k l
	rptviewer
º
º
 
.
º
º
 
LocalReport
º
º
 !
.
º
º
! "

ReportPath
º
º
" ,
=
º
º
- .
Request
º
º
/ 6
.
º
º
6 7
MapPath
º
º
7 >
(
º
º
> ?
Request
º
º
? F
.
º
º
F G
ApplicationPath
º
º
G V
)
º
º
V W
+
º
º
X Y
$strº
º
Z ò
;º
º
ò ô
	rptviewer
Ω
Ω
 
.
Ω
Ω
 
LocalReport
Ω
Ω
 !
.
Ω
Ω
! "
SetParameters
Ω
Ω
" /
(
Ω
Ω
/ 0
new
Ω
Ω
0 3
ReportParameter
Ω
Ω
4 C
[
Ω
Ω
C D
]
Ω
Ω
D E
{
Ω
Ω
F G
nombreEmpresa
Ω
Ω
H U
,
Ω
Ω
U V
empleadoSede
Ω
Ω
W c
,
Ω
Ω
c d
logoSede
Ω
Ω
e m
,
Ω
Ω
m n!
fechaActualSistemaΩ
Ω
o Å
}Ω
Ω
Ç É
)Ω
Ω
É Ñ
;Ω
Ω
Ñ Ö
ReportDataSource
ø
ø
 2
$rptdatasourceReportePuntosPendientes
ø
ø
 A
=
ø
ø
B C
new
ø
ø
D G
ReportDataSource
ø
ø
H X
(
ø
ø
X Y
$str
ø
ø
Y y
,
ø
ø
y z&
reportePuntosPendientesø
ø
{ í
)ø
ø
í ì
;ø
ø
ì î
	rptviewer
¡
¡
 
.
¡
¡
 
ProcessingMode
¡
¡
 $
=
¡
¡
% &
ProcessingMode
¡
¡
' 5
.
¡
¡
5 6
Local
¡
¡
6 ;
;
¡
¡
; <
	rptviewer
¬
¬
 
.
¬
¬
 
LocalReport
¬
¬
 !
.
¬
¬
! "
DataSources
¬
¬
" -
.
¬
¬
- .
Add
¬
¬
. 1
(
¬
¬
1 22
$rptdatasourceReportePuntosPendientes
¬
¬
2 V
)
¬
¬
V W
;
¬
¬
W X
	rptviewer
ƒ
ƒ
 
.
ƒ
ƒ
 !
SizeToReportContent
ƒ
ƒ
 )
=
ƒ
ƒ
* +
true
ƒ
ƒ
, 0
;
ƒ
ƒ
0 1
	rptviewer
≈
≈
 
.
≈
≈
 
Width
≈
≈
 
=
≈
≈
 
Unit
≈
≈
 "
.
≈
≈
" #

Percentage
≈
≈
# -
(
≈
≈
- .
$num
≈
≈
. 1
)
≈
≈
1 2
;
≈
≈
2 3
	rptviewer
∆
∆
 
.
∆
∆
 
Height
∆
∆
 
=
∆
∆
 
Unit
∆
∆
 #
.
∆
∆
# $

Percentage
∆
∆
$ .
(
∆
∆
. /
$num
∆
∆
/ 2
)
∆
∆
2 3
;
∆
∆
3 4
ViewBag
«
«
 
.
«
«
 
ReportViewer
«
«
  
=
«
«
! "
	rptviewer
«
«
# ,
;
«
«
, -
return
…
…
 
View
…
…
 
(
…
…
 
$str
…
…
 -
)
…
…
- .
;
…
…
. /
}
 
 
 	
public
Õ
Õ
 
async
Õ
Õ
 
Task
Õ
Õ
 ?
1EnviarCorreoElectronicoConReportesAutomaticamente
Õ
Õ
 K
(
Õ
Õ
K L
)
Õ
Õ
L M
{
Œ
Œ
 	6
(EstablecimientoComercialExtendidoConLogo
œ
œ
 4
sede
œ
œ
5 9
=
œ
œ
: ;

sedeLogica
œ
œ
< F
.
œ
œ
F G 
ObtenerSedeConLogo
œ
œ
G Y
(
œ
œ
Y Z
)
œ
œ
Z [
;
œ
œ
[ \
try
—
—
 
{
“
“
 
Thread
”
”
 
.
”
”
 
CurrentThread
”
”
 $
.
”
”
$ %
CurrentCulture
”
”
% 3
=
”
”
4 5
CultureInfo
”
”
6 A
.
”
”
A B
GetCultureInfo
”
”
B P
(
”
”
P Q
$str
”
”
Q X
)
”
”
X Y
;
”
”
Y Z
var
‘
‘
 
ordenMascara
‘
‘
  
=
‘
‘
! " 
AplicacionSettings
‘
‘
# 5
.
‘
‘
5 6
Default
‘
‘
6 =
.
‘
‘
= >6
(MascaraDeReporteMensualDeEnvioAutomatico
‘
‘
> f
;
‘
‘
f g
var
’
’
 
mascaraList
’
’
 
=
’
’
  !
ordenMascara
’
’
" .
.
’
’
. /
ToCharArray
’
’
/ :
(
’
’
: ;
)
’
’
; <
;
’
’
< =
string
÷
÷
 
asunto
÷
÷
 
=
÷
÷
 
$str
÷
÷
  5
+
÷
÷
6 7
sede
÷
÷
8 <
.
÷
÷
< = 
DocumentoIdentidad
÷
÷
= O
+
÷
÷
P Q
$str
÷
÷
R X
+
÷
÷
Y Z
sede
÷
÷
[ _
.
÷
÷
_ `
Nombre
÷
÷
` f
+
÷
÷
g h
$str
÷
÷
i o
;
÷
÷
o p
string
◊
◊
 
cuerpo
◊
◊
 
=
◊
◊
 
$str
◊
⁄
  
;
⁄
⁄
 
for
€
€
 
(
€
€
 
int
€
€
 
i
€
€
 
=
€
€
 
$num
€
€
 
;
€
€
 
i
€
€
  !
<
€
€
" #
mascaraList
€
€
$ /
.
€
€
/ 0
Count
€
€
0 5
(
€
€
5 6
)
€
€
6 7
;
€
€
7 8
i
€
€
9 :
++
€
€
: <
)
€
€
< =
{
‹
‹
 
if
›
›
 
(
›
›
 
mascaraList
›
›
 #
[
›
›
# $
i
›
›
$ %
]
›
›
% &
==
›
›
' )
$char
›
›
* -
)
›
›
- .
{
ﬁ
ﬁ
 
cuerpo
ﬂ
ﬂ
 
+=
ﬂ
ﬂ
 !
$str
ﬂ
ﬂ
" +
+
ﬂ
ﬂ
, -
Diccionario
ﬂ
ﬂ
. 9
.
ﬂ
ﬂ
9 :;
-ValoresMascaraReporteMensualDeEnvioAutomatico
ﬂ
ﬂ
: g
.
ﬂ
ﬂ
g h
Single
ﬂ
ﬂ
h n
(
ﬂ
ﬂ
n o
v
ﬂ
ﬂ
o p
=>
ﬂ
ﬂ
q s
v
ﬂ
ﬂ
t u
.
ﬂ
ﬂ
u v
Key
ﬂ
ﬂ
v y
==
ﬂ
ﬂ
z |
(
ﬂ
ﬂ
} ~
i
ﬂ
ﬂ
~ 
+ﬂ
ﬂ
Ä Å
$numﬂ
ﬂ
Ç É
)ﬂ
ﬂ
É Ñ
)ﬂ
ﬂ
Ñ Ö
.ﬂ
ﬂ
Ö Ü
Valueﬂ
ﬂ
Ü ã
+ﬂ
ﬂ
å ç
$strﬂ
ﬂ
é ò
;ﬂ
ﬂ
ò ô
}
‡
‡
 
}
·
·
 
cuerpo
‚
‚
 
+=
‚
‚
 
$str
‚
Ê
 
;
Ê
Ê
 
List
Á
Á
 
<
Á
Á
 
string
Á
Á
 
>
Á
Á
 
correosDestino
Á
Á
 +
=
Á
Á
, - 
AplicacionSettings
Á
Á
. @
.
Á
Á
@ A
Default
Á
Á
A H
.
Á
Á
H I8
*CorreosDestinoDelEnvioAutomaticoDeReportes
Á
Á
I s
.
Á
Á
s t
Split
Á
Á
t y
(
Á
Á
y z
$char
Á
Á
z }
)
Á
Á
} ~
.
Á
Á
~ 
ToListÁ
Á
 Ö
(Á
Á
Ö Ü
)Á
Á
Ü á
;Á
Á
á à
List
Ë
Ë
 
<
Ë
Ë
 

Attachment
Ë
Ë
 
>
Ë
Ë
  
adjuntos
Ë
Ë
! )
=
Ë
Ë
* +
await
Ë
Ë
, 1%
GenerarReportesAdjuntos
Ë
Ë
2 I
(
Ë
Ë
I J
sede
Ë
Ë
J N
,
Ë
Ë
N O
mascaraList
Ë
Ë
P [
)
Ë
Ë
[ \
;
Ë
Ë
\ ]
mailer
Î
Î
 
.
Î
Î
 
Send
Î
Î
 
(
Î
Î
 
asunto
Î
Î
 "
,
Î
Î
" #
cuerpo
Î
Î
$ *
,
Î
Î
* +
correosDestino
Î
Î
, :
,
Î
Î
: ; 
AplicacionSettings
Î
Î
< N
.
Î
Î
N O
Default
Î
Î
O V
.
Î
Î
V W
ToMailDefault
Î
Î
W d
,
Î
Î
d e
adjuntos
Î
Î
f n
)
Î
Î
n o
;
Î
Î
o p
await
Ì
Ì
 
mailer
Ì
Ì
 
.
Ì
Ì
 
SendEmailAsync
Ì
Ì
 +
(
Ì
Ì
+ , 
AplicacionSettings
Ì
Ì
, >
.
Ì
Ì
> ?
Default
Ì
Ì
? F
.
Ì
Ì
F G4
&CorreoParaNotificacionHangfireReportes
Ì
Ì
G m
,
Ì
Ì
m n
$str
Ì
Ì
o }
+
Ì
Ì
~ 
sedeÌ
Ì
Ä Ñ
.Ì
Ì
Ñ Ö
NombreÌ
Ì
Ö ã
+Ì
Ì
å ç
$strÌ
Ì
é æ
,Ì
Ì
æ ø
cuerpoÌ
Ì
¿ ∆
)Ì
Ì
∆ «
;Ì
Ì
« »
}
Ó
Ó
 
catch
Ô
Ô
 
(
Ô
Ô
 
	Exception
Ô
Ô
 
e
Ô
Ô
 
)
Ô
Ô
 
{


 
await
Ò
Ò
 
mailer
Ò
Ò
 
.
Ò
Ò
 
SendEmailAsync
Ò
Ò
 +
(
Ò
Ò
+ , 
AplicacionSettings
Ò
Ò
, >
.
Ò
Ò
> ?
Default
Ò
Ò
? F
.
Ò
Ò
F G4
&CorreoParaNotificacionHangfireReportes
Ò
Ò
G m
,
Ò
Ò
m n
$strÒ
Ò
o ë
+Ò
Ò
í ì
sedeÒ
Ò
î ò
.Ò
Ò
ò ô
NombreÒ
Ò
ô ü
,Ò
Ò
ü †
$strÒ
Ò
° ª
+Ò
Ò
º Ω
sedeÒ
Ò
æ ¬
.Ò
Ò
¬ √
NombreÒ
Ò
√ …
+Ò
Ò
  À
$strÒ
Ò
Ã “
+Ò
Ò
” ‘
$strÒ
Ò
’ Ò
+Ò
Ò
Ú Û
eÒ
Ò
Ù ı
)Ò
Ò
ı ˆ
;Ò
Ò
ˆ ˜
}
Ú
Ú
 
}
Û
Û
 	
public
ı
ı
 
async
ı
ı
 
Task
ı
ı
 
<
ı
ı
 
List
ı
ı
 
<
ı
ı
 

Attachment
ı
ı
 )
>
ı
ı
) *
>
ı
ı
* +%
GenerarReportesAdjuntos
ı
ı
, C
(
ı
ı
C D6
(EstablecimientoComercialExtendidoConLogo
ı
ı
D l
sede
ı
ı
m q
,
ı
ı
q r
char
ı
ı
s w
[
ı
ı
w x
]
ı
ı
x y
mascaraListı
ı
z Ö
)ı
ı
Ö Ü
{
ˆ
ˆ
 	
try
˜
˜
 
{
¯
¯
 
List
˘
˘
 
<
˘
˘
 

Attachment
˘
˘
 
>
˘
˘
  
attachments
˘
˘
! ,
=
˘
˘
- .
new
˘
˘
/ 2
List
˘
˘
3 7
<
˘
˘
7 8

Attachment
˘
˘
8 B
>
˘
˘
B C
(
˘
˘
C D
)
˘
˘
D E
;
˘
˘
E F
DateTime
˙
˙
 
fechaActual
˙
˙
 $
=
˙
˙
% &
operacionLogica
˙
˙
' 6
.
˙
˙
6 7
FechaActual
˙
˙
7 B
(
˙
˙
B C
)
˙
˙
C D
.
˙
˙
D E
Date
˙
˙
E I
;
˙
˙
I J
DateTime
˚
˚
 
fechaDeReporte
˚
˚
 '
=
˚
˚
( )
fechaActual
˚
˚
* 5
.
˚
˚
5 6
	AddMonths
˚
˚
6 ?
(
˚
˚
? @
-
˚
˚
@ A
$num
˚
˚
A B
)
˚
˚
B C
;
˚
˚
C D
DateTime
¸
¸
 

fechaDesde
¸
¸
 #
=
¸
¸
$ %
new
¸
¸
& )
DateTime
¸
¸
* 2
(
¸
¸
2 3
fechaDeReporte
¸
¸
3 A
.
¸
¸
A B
Year
¸
¸
B F
,
¸
¸
F G
fechaDeReporte
¸
¸
H V
.
¸
¸
V W
Month
¸
¸
W \
,
¸
¸
\ ]
$num
¸
¸
^ _
)
¸
¸
_ `
;
¸
¸
` a
DateTime
˝
˝
 

fechaHasta
˝
˝
 #
=
˝
˝
$ %

fechaDesde
˝
˝
& 0
.
˝
˝
0 1
	AddMonths
˝
˝
1 :
(
˝
˝
: ;
$num
˝
˝
; <
)
˝
˝
< =
.
˝
˝
= >
AddMilliseconds
˝
˝
> M
(
˝
˝
M N
-
˝
˝
N O
$num
˝
˝
O P
)
˝
˝
P Q
;
˝
˝
Q R
string
˛
˛
 
nombreDePeriodo
˛
˛
 &
=
˛
˛
' (
fechaDeReporte
˛
˛
) 7
.
˛
˛
7 8
Year
˛
˛
8 <
.
˛
˛
< =
ToString
˛
˛
= E
(
˛
˛
E F
)
˛
˛
F G
+
˛
˛
H I
fechaDeReporte
˛
˛
J X
.
˛
˛
X Y
Month
˛
˛
Y ^
.
˛
˛
^ _
ToString
˛
˛
_ g
(
˛
˛
g h
$str
˛
˛
h l
)
˛
˛
l m
;
˛
˛
m n
Periodo
ˇ
ˇ
 
periodo
ˇ
ˇ
 
=
ˇ
ˇ
  !&
librosElectronicosLogica
ˇ
ˇ
" :
.
ˇ
ˇ
: ;
ObtenerPeriodo
ˇ
ˇ
; I
(
ˇ
ˇ
I J
nombreDePeriodo
ˇ
ˇ
J Y
)
ˇ
ˇ
Y Z
;
ˇ
ˇ
Z [
if
ÅÅ 
(
ÅÅ 
mascaraList
ÅÅ 
[
ÅÅ  
$num
ÅÅ  !
]
ÅÅ! "
==
ÅÅ# %
$char
ÅÅ& )
)
ÅÅ) *
{
ÇÇ 
List
ÑÑ 
<
ÑÑ '
CentroDeAtencionExtendido
ÑÑ 2
>
ÑÑ2 3"
listaDePuntosDeVenta
ÑÑ4 H
=
ÑÑI J$
centroDeAtencionLogica
ÑÑK a
.
ÑÑa b*
ObtenerPuntosDeVentaVigentes
ÑÑb ~
(
ÑÑ~ 
)ÑÑ Ä
;ÑÑÄ Å
int
ÖÖ 
[
ÖÖ 
]
ÖÖ 
idsPuntosDeVentas
ÖÖ +
=
ÖÖ, -"
listaDePuntosDeVenta
ÖÖ. B
.
ÖÖB C
Select
ÖÖC I
(
ÖÖI J
l
ÖÖJ K
=>
ÖÖL N
l
ÖÖO P
.
ÖÖP Q
Id
ÖÖQ S
)
ÖÖS T
.
ÖÖT U
ToArray
ÖÖU \
(
ÖÖ\ ]
)
ÖÖ] ^
;
ÖÖ^ _
var
ÜÜ 
	rptviewer
ÜÜ !
=
ÜÜ" #C
5GenerarReporteDeVentaDeLosPuntosDeVentaPorComprobante
ÜÜ$ Y
(
ÜÜY Z
sede
ÜÜZ ^
,
ÜÜ^ _

fechaDesde
ÜÜ` j
,
ÜÜj k

fechaHasta
ÜÜl v
,
ÜÜv w 
idsPuntosDeVentasÜÜx â
,ÜÜâ ä
falseÜÜã ê
)ÜÜê ë
;ÜÜë í
string
áá 
fileNameContent
áá *
=
áá+ ,
$str
áá- K
+
ááL M
sede
ááN R
.
ááR S 
DocumentoIdentidad
ááS e
;
ááe f
attachments
àà 
.
àà  
Add
àà  #
(
àà# $#
ComprimirAdjuntoExcel
àà$ 9
(
àà9 :
	rptviewer
àà: C
,
ààC D
fileNameContent
ààE T
)
ààT U
)
ààU V
;
ààV W
}
ââ 
if
ää 
(
ää 
mascaraList
ää 
[
ää  
$num
ää  !
]
ää! "
==
ää# %
$char
ää& )
)
ää) *
{
ãã 
List
åå 
<
åå #
ReportViewerComprimir
åå .
>
åå. / 
reportesAcomprimir
åå0 B
=
ååC D
new
ååE H
List
ååI M
<
ååM N#
ReportViewerComprimir
ååN c
>
ååc d
(
ååd e
)
ååe f
;
ååf g
List
éé 
<
éé 
int
éé 
>
éé 
idsComprobante
éé ,
=
éé- .
new
éé/ 2
List
éé3 7
<
éé7 8
int
éé8 ;
>
éé; <
{
éé= >
MaestroSettings
éé? N
.
ééN O
Default
ééO V
.
ééV W:
+IdDetalleMaestroComprobanteNotaVentaInternaééW Ç
,ééÇ É
MaestroSettingsééÑ ì
.ééì î
Defaultééî õ
.ééõ ú1
!IdDetalleMaestroComprobanteBoletaééú Ω
,ééΩ æ
MaestroSettingsééø Œ
.ééŒ œ
Defaultééœ ÷
.éé÷ ◊2
"IdDetalleMaestroComprobanteFacturaéé◊ ˘
,éé˘ ˙
MaestroSettingséé˚ ä
.ééä ã
Defaultééã í
.ééí ì6
&IdDetalleMaestroComprobanteNotaCreditoééì π
,ééπ ∫
MaestroSettingsééª  
.éé  À
DefaultééÀ “
.éé“ ”7
'IdDetalleMaestroComprobanteNotaDeDebitoéé” ˙
}éé˚ ¸
;éé¸ ˝
var
èè )
tiposDeComprobanteParaVenta
èè 3
=
èè4 5
await
èè6 ;!
configuracionLogica
èè< O
.
èèO P0
"ObtenerTiposDeComprobanteParaVenta
èèP r
(
èèr s
)
èès t
;
èèt u
List
êê 
<
êê '
SelectorTipoDeComprobante
êê 2
>
êê2 3
comprobantes
êê4 @
=
êêA B'
SelectorTipoDeComprobante
êêC \
.
êê\ ]
Convert
êê] d
(
êêd e*
tiposDeComprobanteParaVentaêêe Ä
)êêÄ Å
;êêÅ Ç
foreach
íí 
(
íí 
var
íí  
id
íí! #
in
íí$ &
idsComprobante
íí' 5
)
íí5 6
{
ìì 
var
îî 
comprobante
îî '
=
îî( )
comprobantes
îî* 6
.
îî6 7
SingleOrDefault
îî7 F
(
îîF G
c
îîG H
=>
îîI K
c
îîL M
.
îîM N
TipoComprobante
îîN ]
.
îî] ^
Id
îî^ `
==
îîa c
id
îîd f
)
îîf g
;
îîg h
if
ïï 
(
ïï 
comprobante
ïï '
!=
ïï( *
null
ïï+ /
)
ïï/ 0
{
ññ 
var
óó !
seriesDeComprobante
óó  3
=
óó4 5
comprobante
óó6 A
.
óóA B
Series
óóB H
;
óóH I
foreach
òò #
(
òò$ %
var
òò% (
serie
òò) .
in
òò/ 1!
seriesDeComprobante
òò2 E
)
òòE F
{
ôô  
reportesAcomprimir
öö  2
.
öö2 3
Add
öö3 6
(
öö6 7
new
öö7 :#
ReportViewerComprimir
öö; P
(
ööP Q9
+GenerarReporteIntervaloFechasPorComprobante
ööQ |
(
öö| }
sedeöö} Å
.ööÅ Ç
NombreööÇ à
,ööà â
sedeööä é
,ööé è

fechaDesdeööê ö
,ööö õ

fechaHastaööú ¶
,öö¶ ß
serieöö® ≠
.öö≠ Æ
IdööÆ ∞
,öö∞ ±
falseöö≤ ∑
)öö∑ ∏
,öö∏ π
$ströö∫ –
+öö— “
serieöö” ÿ
.ööÿ Ÿ
NombreööŸ ﬂ
+öö‡ ·
$ströö‚ Â
+ööÊ Á
sedeööË Ï
.ööÏ Ì"
DocumentoIdentidadööÌ ˇ
)ööˇ Ä
)ööÄ Å
;ööÅ Ç
}
õõ 
}
úú 
}
ùù 
attachments
ûû 
.
ûû  
Add
ûû  #
(
ûû# $$
ComprimirAdjuntosExcel
ûû$ :
(
ûû: ; 
reportesAcomprimir
ûû; M
,
ûûM N
$str
ûûO e
+
ûûf g
periodo
ûûh o
.
ûûo p
anio
ûûp t
+
ûûu v
$str
ûûw z
+
ûû{ |
periodoûû} Ñ
.ûûÑ Ö
mesûûÖ à
)ûûà â
)ûûâ ä
;ûûä ã
}
üü 
if
•• 
(
•• 
mascaraList
•• 
[
••  
$num
••  !
]
••! "
==
••# %
$char
••& )
)
••) *
{
¶¶ 
var
ßß  
librosElectronicos
ßß *
=
ßß+ ,
maestroLogica
ßß- :
.
ßß: ;3
%ObtenerDetalleMaestroLibroElectronico
ßß; `
(
ßß` a
)
ßßa b
;
ßßb c
var
®® 0
"idsLibrosElectronicosSeleccionados
®® :
=
®®; <
new
®®= @
List
®®A E
<
®®E F
int
®®F I
>
®®I J
{
®®K L
MaestroSettings
®®M \
.
®®\ ]
Default
®®] d
.
®®d e=
.IdDetalleMaestroLibroElectronicoVentasIngresos®®e ì
,®®ì î
MaestroSettings®®ï §
.®®§ •
Default®®• ¨
.®®¨ ≠7
'IdDetalleMaestroLibroElectronicoCompras®®≠ ‘
,®®‘ ’
MaestroSettings®®÷ Â
.®®Â Ê
Default®®Ê Ì
.®®Ì ÓE
5IdDetalleMaestroLibroElectronicoComprasNoDomiciliadas®®Ó £
}®®§ •
;®®• ¶
var
©© -
librosElectronicosSeleccionados
©© 7
=
©©8 9 
librosElectronicos
©©: L
.
©©L M
Where
©©M R
(
©©R S
le
©©S U
=>
©©V X0
"idsLibrosElectronicosSeleccionados
©©Y {
.
©©{ |
Contains©©| Ñ
(©©Ñ Ö
le©©Ö á
.©©á à
Id©©à ä
)©©ä ã
)©©ã å
.©©å ç
ToList©©ç ì
(©©ì î
)©©î ï
;©©ï ñ
string
™™ 
fileNameZip
™™ &
=
™™' (
sede
™™) -
.
™™- . 
DocumentoIdentidad
™™. @
+
™™A B
$str
™™C H
+
™™I J
periodo
™™K R
.
™™R S
nombre
™™S Y
+
™™Z [
$str
™™\ b
;
™™b c
var
¨¨ 
compressedBytes
¨¨ '
=
¨¨( )
	generador
¨¨* 3
.
¨¨3 44
&GenerarLibrosElectronicosCSVComprimido
¨¨4 Z
(
¨¨Z [
$num
¨¨[ \
,
¨¨\ ]
sede
¨¨^ b
,
¨¨b c
periodo
¨¨d k
,
¨¨k l.
librosElectronicosSeleccionados¨¨m å
)¨¨å ç
;¨¨ç é
attachments
≠≠ 
.
≠≠  
Add
≠≠  #
(
≠≠# $
new
≠≠$ '

Attachment
≠≠( 2
(
≠≠2 3
new
≠≠3 6
MemoryStream
≠≠7 C
(
≠≠C D
compressedBytes
≠≠D S
)
≠≠S T
,
≠≠T U
fileNameZip
≠≠V a
,
≠≠a b
$str
≠≠c t
)
≠≠t u
)
≠≠u v
;
≠≠v w
}
ÆÆ 
if
ØØ 
(
ØØ 
mascaraList
ØØ 
[
ØØ  
$num
ØØ  !
]
ØØ! "
==
ØØ# %
$char
ØØ& )
)
ØØ) *
{
∞∞ 
var
±±  
librosElectronicos
±± *
=
±±+ ,
maestroLogica
±±- :
.
±±: ;3
%ObtenerDetalleMaestroLibroElectronico
±±; `
(
±±` a
)
±±a b
;
±±b c
var
≤≤ 0
"idsLibrosElectronicosSeleccionados
≤≤ :
=
≤≤; <
new
≤≤= @
List
≤≤A E
<
≤≤E F
int
≤≤F I
>
≤≤I J
{
≤≤K L
MaestroSettings
≤≤M \
.
≤≤\ ]
Default
≤≤] d
.
≤≤d e=
.IdDetalleMaestroLibroElectronicoVentasIngresos≤≤e ì
,≤≤ì î
MaestroSettings≤≤ï §
.≤≤§ •
Default≤≤• ¨
.≤≤¨ ≠7
'IdDetalleMaestroLibroElectronicoCompras≤≤≠ ‘
,≤≤‘ ’
MaestroSettings≤≤÷ Â
.≤≤Â Ê
Default≤≤Ê Ì
.≤≤Ì ÓE
5IdDetalleMaestroLibroElectronicoComprasNoDomiciliadas≤≤Ó £
}≤≤§ •
;≤≤• ¶
var
≥≥ -
librosElectronicosSeleccionados
≥≥ 7
=
≥≥8 9 
librosElectronicos
≥≥: L
.
≥≥L M
Where
≥≥M R
(
≥≥R S
le
≥≥S U
=>
≥≥V X0
"idsLibrosElectronicosSeleccionados
≥≥Y {
.
≥≥{ |
Contains≥≥| Ñ
(≥≥Ñ Ö
le≥≥Ö á
.≥≥á à
Id≥≥à ä
)≥≥ä ã
)≥≥ã å
.≥≥å ç
ToList≥≥ç ì
(≥≥ì î
)≥≥î ï
;≥≥ï ñ
string
¥¥ 
fileNameZip
¥¥ &
=
¥¥' (
sede
¥¥) -
.
¥¥- . 
DocumentoIdentidad
¥¥. @
+
¥¥A B
$str
¥¥C H
+
¥¥I J
periodo
¥¥K R
.
¥¥R S
nombre
¥¥S Y
+
¥¥Z [
$str
¥¥\ b
;
¥¥b c
var
∂∂ 
compressedBytes
∂∂ '
=
∂∂( )
	generador
∂∂* 3
.
∂∂3 44
&GenerarLibrosElectronicosTXTComprimido
∂∂4 Z
(
∂∂Z [
$num
∂∂[ \
,
∂∂\ ]
sede
∂∂^ b
,
∂∂b c
periodo
∂∂d k
,
∂∂k l.
librosElectronicosSeleccionados∂∂m å
)∂∂å ç
;∂∂ç é
attachments
∑∑ 
.
∑∑  
Add
∑∑  #
(
∑∑# $
new
∑∑$ '

Attachment
∑∑( 2
(
∑∑2 3
new
∑∑3 6
MemoryStream
∑∑7 C
(
∑∑C D
compressedBytes
∑∑D S
)
∑∑S T
,
∑∑T U
fileNameZip
∑∑V a
,
∑∑a b
$str
∑∑c t
)
∑∑t u
)
∑∑u v
;
∑∑v w
}
∏∏ 
if
ππ 
(
ππ 
mascaraList
ππ 
[
ππ  
$num
ππ  !
]
ππ! "
==
ππ# %
$char
ππ& )
)
ππ) *
{
∫∫ 
var
ºº 
	rptviewer
ºº !
=
ºº" #
	generador
ºº$ -
.
ºº- .0
"GenerarReporteDeVentaFormatoAdsoft
ºº. P
(
ººP Q
$num
ººQ R
,
ººR S
sede
ººT X
,
ººX Y
periodo
ººZ a
,
ººa b
false
ººc h
,
ººh i-
librosElectronicosAdsoftLogicaººj à
,ººà â
$strººä å
)ººå ç
;ººç é
string
ΩΩ 
fileNameContent
ΩΩ *
=
ΩΩ+ ,
$str
ΩΩ- 6
+
ΩΩ7 8
sede
ΩΩ9 =
.
ΩΩ= > 
DocumentoIdentidad
ΩΩ> P
+
ΩΩQ R
$str
ΩΩS V
+
ΩΩW X
sede
ΩΩY ]
.
ΩΩ] ^
Nombre
ΩΩ^ d
+
ΩΩe f
$str
ΩΩg j
+
ΩΩk l
periodo
ΩΩm t
.
ΩΩt u
anio
ΩΩu y
+
ΩΩz {
$str
ΩΩ| 
+ΩΩÄ Å
periodoΩΩÇ â
.ΩΩâ ä
mesΩΩä ç
;ΩΩç é
attachments
ææ 
.
ææ  
Add
ææ  #
(
ææ# $#
ComprimirAdjuntoExcel
ææ$ 9
(
ææ9 :
	rptviewer
ææ: C
,
ææC D
fileNameContent
ææE T
)
ææT U
)
ææU V
;
ææV W
}
øø 
if
¿¿ 
(
¿¿ 
mascaraList
¿¿ 
[
¿¿  
$num
¿¿  !
]
¿¿! "
==
¿¿# %
$char
¿¿& )
)
¿¿) *
{
¡¡ 
List
¬¬ 
<
¬¬ #
ReportViewerComprimir
¬¬ .
>
¬¬. / 
reportesAcomprimir
¬¬0 B
=
¬¬C D
new
¬¬E H
List
¬¬I M
<
¬¬M N#
ReportViewerComprimir
¬¬N c
>
¬¬c d
(
¬¬d e
)
¬¬e f
;
¬¬f g 
reportesAcomprimir
ƒƒ &
.
ƒƒ& '
Add
ƒƒ' *
(
ƒƒ* +
new
ƒƒ+ .#
ReportViewerComprimir
ƒƒ/ D
(
ƒƒD E
	generador
ƒƒE N
.
ƒƒN OD
5GenerarReporteDeVentaFormatoFoxcontBoletaVentaFacturaƒƒO Ñ
(ƒƒÑ Ö
$numƒƒÖ Ü
,ƒƒÜ á
sedeƒƒà å
,ƒƒå ç
periodoƒƒé ï
,ƒƒï ñ
falseƒƒó ú
,ƒƒú ù/
librosElectronicosFoxcontLogicaƒƒû Ω
,ƒƒΩ æ
$strƒƒø ¡
)ƒƒ¡ ¬
,ƒƒ¬ √
periodoƒƒƒ À
.ƒƒÀ Ã
anioƒƒÃ –
+ƒƒ— “
$strƒƒ” ÷
+ƒƒ◊ ÿ
periodoƒƒŸ ‡
.ƒƒ‡ ·
mesƒƒ· ‰
)ƒƒ‰ Â
)ƒƒÂ Ê
;ƒƒÊ Á 
reportesAcomprimir
∆∆ &
.
∆∆& '
Add
∆∆' *
(
∆∆* +
new
∆∆+ .#
ReportViewerComprimir
∆∆/ D
(
∆∆D E
	generador
∆∆E N
.
∆∆N OC
4GenerarReporteDeVentaFormatoFoxcontNotaCreditoDebito∆∆O É
(∆∆É Ñ
$num∆∆Ñ Ö
,∆∆Ö Ü
sede∆∆á ã
,∆∆ã å
periodo∆∆ç î
,∆∆î ï
false∆∆ñ õ
,∆∆õ ú/
librosElectronicosFoxcontLogica∆∆ù º
,∆∆º Ω
$str∆∆æ ¿
)∆∆¿ ¡
,∆∆¡ ¬
periodo∆∆√  
.∆∆  À
anio∆∆À œ
+∆∆– —
$str∆∆“ ’
+∆∆÷ ◊
periodo∆∆ÿ ﬂ
.∆∆ﬂ ‡
mes∆∆‡ „
)∆∆„ ‰
)∆∆‰ Â
;∆∆Â Ê
attachments
«« 
.
««  
Add
««  #
(
««# $$
ComprimirAdjuntosExcel
««$ :
(
««: ; 
reportesAcomprimir
««; M
,
««M N
$str
««O a
+
««b c
periodo
««d k
.
««k l
anio
««l p
+
««q r
$str
««s v
+
««w x
periodo««y Ä
.««Ä Å
mes««Å Ñ
)««Ñ Ö
)««Ö Ü
;««Ü á
}
»» 
if
…… 
(
…… 
mascaraList
…… 
[
……  
$num
……  !
]
……! "
==
……# %
$char
……& )
)
……) *
{
   
List
ÃÃ 
<
ÃÃ '
CentroDeAtencionExtendido
ÃÃ 2
>
ÃÃ2 3"
listaDePuntosDeVenta
ÃÃ4 H
=
ÃÃI J$
centroDeAtencionLogica
ÃÃK a
.
ÃÃa b*
ObtenerPuntosDeVentaVigentes
ÃÃb ~
(
ÃÃ~ 
)ÃÃ Ä
;ÃÃÄ Å
int
ÕÕ 
[
ÕÕ 
]
ÕÕ 
idsPuntosDeVentas
ÕÕ +
=
ÕÕ, -"
listaDePuntosDeVenta
ÕÕ. B
.
ÕÕB C
Select
ÕÕC I
(
ÕÕI J
l
ÕÕJ K
=>
ÕÕL N
l
ÕÕO P
.
ÕÕP Q
Id
ÕÕQ S
)
ÕÕS T
.
ÕÕT U
ToArray
ÕÕU \
(
ÕÕ\ ]
)
ÕÕ] ^
;
ÕÕ^ _
var
ŒŒ 
	rptviewer
ŒŒ !
=
ŒŒ" #;
-GenerarReportePorNumeroDeComprobanteConIcbper
ŒŒ$ Q
(
ŒŒQ R
sede
ŒŒR V
,
ŒŒV W

fechaDesde
ŒŒX b
,
ŒŒb c

fechaHasta
ŒŒd n
,
ŒŒn o 
idsPuntosDeVentasŒŒp Å
,ŒŒÅ Ç
falseŒŒÉ à
)ŒŒà â
;ŒŒâ ä
string
œœ 
fileNameContent
œœ *
=
œœ+ ,
$str
œœ- T
+
œœU V
sede
œœW [
.
œœ[ \ 
DocumentoIdentidad
œœ\ n
;
œœn o
attachments
–– 
.
––  
Add
––  #
(
––# $#
ComprimirAdjuntoExcel
––$ 9
(
––9 :
	rptviewer
––: C
,
––C D
fileNameContent
––E T
)
––T U
)
––U V
;
––V W
}
—— 
if
““ 
(
““ 
mascaraList
““ 
[
““  
$num
““  !
]
““! "
==
““# %
$char
““& )
)
““) *
{
”” 
var
‘‘ 
	rptviewer
‘‘ !
=
‘‘" #
	generador
‘‘$ -
.
‘‘- .8
*GenerarReporteDeVentasEIngresosSinConcepto
‘‘. X
(
‘‘X Y
$num
‘‘Y Z
,
‘‘Z [
sede
‘‘\ `
,
‘‘` a
periodo
‘‘b i
,
‘‘i j
false
‘‘k p
,
‘‘p q
operacionLogica‘‘r Å
,‘‘Å Ç
$str‘‘É Ö
)‘‘Ö Ü
;‘‘Ü á
string
’’ 
fileNameContent
’’ *
=
’’+ ,
$str
’’- R
+
’’S T
sede
’’U Y
.
’’Y Z 
DocumentoIdentidad
’’Z l
;
’’l m
attachments
÷÷ 
.
÷÷  
Add
÷÷  #
(
÷÷# $#
ComprimirAdjuntoExcel
÷÷$ 9
(
÷÷9 :
	rptviewer
÷÷: C
,
÷÷C D
fileNameContent
÷÷E T
)
÷÷T U
)
÷÷U V
;
÷÷V W
}
◊◊ 
if
ÿÿ 
(
ÿÿ 
mascaraList
ÿÿ 
[
ÿÿ  
$num
ÿÿ  !
]
ÿÿ! "
==
ÿÿ# %
$char
ÿÿ& )
)
ÿÿ) *
{
ŸŸ 
var
⁄⁄ 
	rptviewer
⁄⁄ !
=
⁄⁄" #
	generador
⁄⁄$ -
.
⁄⁄- .-
GenerarReporteDeVentasEIngresos
⁄⁄. M
(
⁄⁄M N
$num
⁄⁄N O
,
⁄⁄O P
sede
⁄⁄Q U
,
⁄⁄U V
periodo
⁄⁄W ^
,
⁄⁄^ _
false
⁄⁄` e
,
⁄⁄e f
operacionLogica
⁄⁄g v
,
⁄⁄v w
$str
⁄⁄x z
)
⁄⁄z {
;
⁄⁄{ |
string
€€ 
fileNameContent
€€ *
=
€€+ ,
$str
€€- S
+
€€T U
sede
€€V Z
.
€€Z [ 
DocumentoIdentidad
€€[ m
;
€€m n
attachments
‹‹ 
.
‹‹  
Add
‹‹  #
(
‹‹# $#
ComprimirAdjuntoExcel
‹‹$ 9
(
‹‹9 :
	rptviewer
‹‹: C
,
‹‹C D
fileNameContent
‹‹E T
)
‹‹T U
)
‹‹U V
;
‹‹V W
}
›› 
if
ﬁﬁ 
(
ﬁﬁ 
mascaraList
ﬁﬁ 
[
ﬁﬁ  
$num
ﬁﬁ  !
]
ﬁﬁ! "
==
ﬁﬁ# %
$char
ﬁﬁ& )
)
ﬁﬁ) *
{
ﬂﬂ 
var
·· 
	rptviewer
·· !
=
··" #
	generador
··$ -
.
··- .*
GenerarReporteDeVentaEnExcel
··. J
(
··J K
$num
··K L
,
··L M
sede
··N R
,
··R S
periodo
··T [
,
··[ \
false
··] b
,
··b c
$str
··d f
)
··f g
;
··g h
string
‚‚ 
fileNameContent
‚‚ *
=
‚‚+ ,
$str
‚‚- @
+
‚‚A B
sede
‚‚C G
.
‚‚G H 
DocumentoIdentidad
‚‚H Z
+
‚‚[ \
$str
‚‚] `
+
‚‚a b
sede
‚‚c g
.
‚‚g h
Nombre
‚‚h n
+
‚‚o p
$str
‚‚q t
+
‚‚u v
periodo
‚‚w ~
.
‚‚~ 
anio‚‚ É
+‚‚Ñ Ö
$str‚‚Ü â
+‚‚ä ã
periodo‚‚å ì
.‚‚ì î
mes‚‚î ó
;‚‚ó ò
attachments
„„ 
.
„„  
Add
„„  #
(
„„# $#
ComprimirAdjuntoExcel
„„$ 9
(
„„9 :
	rptviewer
„„: C
,
„„C D
fileNameContent
„„E T
)
„„T U
)
„„U V
;
„„V W
}
‰‰ 
return
ÂÂ 
attachments
ÂÂ "
;
ÂÂ" #
}
ÊÊ 
catch
ÁÁ 
(
ÁÁ 
	Exception
ÁÁ 
e
ÁÁ 
)
ÁÁ 
{
ËË 
throw
ÈÈ 
new
ÈÈ !
ControllerException
ÈÈ -
(
ÈÈ- .
$str
ÈÈ. [
,
ÈÈ[ \
e
ÈÈ] ^
)
ÈÈ^ _
;
ÈÈ_ `
}
ÍÍ 
}
ÎÎ 	
public
ÌÌ 

Attachment
ÌÌ #
ComprimirAdjuntoExcel
ÌÌ /
(
ÌÌ/ 0
ReportViewer
ÌÌ0 <
	rptviewer
ÌÌ= F
,
ÌÌF G
string
ÌÌH N
fileNameContent
ÌÌO ^
)
ÌÌ^ _
{
ÓÓ 	
string
ÔÔ 
filenameExcel
ÔÔ  
=
ÔÔ! "
string
ÔÔ# )
.
ÔÔ) *
Format
ÔÔ* 0
(
ÔÔ0 1
$str
ÔÔ1 :
,
ÔÔ: ;
fileNameContent
ÔÔ< K
,
ÔÔK L
$str
ÔÔM R
)
ÔÔR S
.
ÔÔS T
Replace
ÔÔT [
(
ÔÔ[ \
$str
ÔÔ\ _
,
ÔÔ_ `
$str
ÔÔa c
)
ÔÔc d
;
ÔÔd e
byte
 
[
 
]
 
bytesReporte
 
=
  !
	rptviewer
" +
.
+ ,
LocalReport
, 7
.
7 8
Render
8 >
(
> ?
$str
? F
,
F G
null
H L
,
L M
out
N Q
string
R X
mimeType
Y a
,
a b
out
c f
string
g m
encoding
n v
,
v w
out
x {
string| Ç!
fileNameExtensionÉ î
,î ï
outñ ô
stringö †
[† °
]° ¢
	streamids£ ¨
,¨ ≠
outÆ ±
Warning≤ π
[π ∫
]∫ ª
warningsº ƒ
)ƒ ≈
;≈ ∆
byte
ÒÒ 
[
ÒÒ 
]
ÒÒ 
compressedBytes
ÒÒ "
;
ÒÒ" #
using
ÚÚ 
(
ÚÚ 
var
ÚÚ 
	outStream
ÚÚ  
=
ÚÚ! "
new
ÚÚ# &
MemoryStream
ÚÚ' 3
(
ÚÚ3 4
)
ÚÚ4 5
)
ÚÚ5 6
{
ÛÛ 
using
ÙÙ 
(
ÙÙ 
var
ÙÙ 
archive
ÙÙ "
=
ÙÙ# $
new
ÙÙ% (

ZipArchive
ÙÙ) 3
(
ÙÙ3 4
	outStream
ÙÙ4 =
,
ÙÙ= >
ZipArchiveMode
ÙÙ? M
.
ÙÙM N
Create
ÙÙN T
,
ÙÙT U
true
ÙÙV Z
)
ÙÙZ [
)
ÙÙ[ \
{
ıı 
var
ˆˆ 
fileInArchive
ˆˆ %
=
ˆˆ& '
archive
ˆˆ( /
.
ˆˆ/ 0
CreateEntry
ˆˆ0 ;
(
ˆˆ; <
filenameExcel
ˆˆ< I
,
ˆˆI J
CompressionLevel
ˆˆK [
.
ˆˆ[ \
Optimal
ˆˆ\ c
)
ˆˆc d
;
ˆˆd e
using
˜˜ 
(
˜˜ 
var
˜˜ 
entryStream
˜˜ *
=
˜˜+ ,
fileInArchive
˜˜- :
.
˜˜: ;
Open
˜˜; ?
(
˜˜? @
)
˜˜@ A
)
˜˜A B
using
¯¯ 
(
¯¯ 
var
¯¯ "
fileToCompressStream
¯¯ 3
=
¯¯4 5
new
¯¯6 9
MemoryStream
¯¯: F
(
¯¯F G
bytesReporte
¯¯G S
)
¯¯S T
)
¯¯T U
{
˘˘ "
fileToCompressStream
˙˙ ,
.
˙˙, -
CopyTo
˙˙- 3
(
˙˙3 4
entryStream
˙˙4 ?
)
˙˙? @
;
˙˙@ A"
fileToCompressStream
˚˚ ,
.
˚˚, -
Close
˚˚- 2
(
˚˚2 3
)
˚˚3 4
;
˚˚4 5
}
¸¸ 
}
˝˝ 
compressedBytes
˛˛ 
=
˛˛  !
	outStream
˛˛" +
.
˛˛+ ,
ToArray
˛˛, 3
(
˛˛3 4
)
˛˛4 5
;
˛˛5 6
}
ˇˇ 
string
ÄÄ 
fileNameZip
ÄÄ 
=
ÄÄ  
string
ÄÄ! '
.
ÄÄ' (
Format
ÄÄ( .
(
ÄÄ. /
$str
ÄÄ/ 8
,
ÄÄ8 9
fileNameContent
ÄÄ: I
,
ÄÄI J
$str
ÄÄK P
)
ÄÄP Q
.
ÄÄQ R
Replace
ÄÄR Y
(
ÄÄY Z
$str
ÄÄZ ]
,
ÄÄ] ^
$str
ÄÄ_ a
)
ÄÄa b
;
ÄÄb c
return
ÅÅ 
new
ÅÅ 

Attachment
ÅÅ !
(
ÅÅ! "
new
ÅÅ" %
MemoryStream
ÅÅ& 2
(
ÅÅ2 3
compressedBytes
ÅÅ3 B
)
ÅÅB C
,
ÅÅC D
fileNameZip
ÅÅE P
,
ÅÅP Q
$str
ÅÅR c
)
ÅÅc d
;
ÅÅd e
}
ÇÇ 	
public
ÑÑ 

Attachment
ÑÑ $
ComprimirAdjuntosExcel
ÑÑ 0
(
ÑÑ0 1
List
ÑÑ1 5
<
ÑÑ5 6#
ReportViewerComprimir
ÑÑ6 K
>
ÑÑK L
reportesViewers
ÑÑM \
,
ÑÑ\ ]
string
ÑÑ^ d
fileNameContent
ÑÑe t
)
ÑÑt u
{
ÖÖ 	
byte
ÜÜ 
[
ÜÜ 
]
ÜÜ 
compressedBytes
ÜÜ "
;
ÜÜ" #
using
áá 
(
áá 
var
áá 
	outStream
áá  
=
áá! "
new
áá# &
MemoryStream
áá' 3
(
áá3 4
)
áá4 5
)
áá5 6
{
àà 
using
ââ 
(
ââ 
var
ââ 
archive
ââ "
=
ââ# $
new
ââ% (

ZipArchive
ââ) 3
(
ââ3 4
	outStream
ââ4 =
,
ââ= >
ZipArchiveMode
ââ? M
.
ââM N
Create
ââN T
,
ââT U
true
ââV Z
)
ââZ [
)
ââ[ \
{
ää 
foreach
ãã 
(
ãã 
var
ãã  
	rptviewer
ãã! *
in
ãã+ -
reportesViewers
ãã. =
)
ãã= >
{
åå 
string
çç 
filenameExcel
çç ,
=
çç- .
string
çç/ 5
.
çç5 6
Format
çç6 <
(
çç< =
$str
çç= F
,
ççF G
	rptviewer
ççH Q
.
ççQ R
Nombre
ççR X
,
ççX Y
$str
ççZ _
)
çç_ `
.
çç` a
Replace
çça h
(
ççh i
$str
ççi l
,
ççl m
$str
ççn p
)
ççp q
;
ççq r
byte
éé 
[
éé 
]
éé 
bytesReporte
éé +
=
éé, -
	rptviewer
éé. 7
.
éé7 8
ReportViewer
éé8 D
.
ééD E
LocalReport
ééE P
.
ééP Q
Render
ééQ W
(
ééW X
$str
ééX _
,
éé_ `
null
ééa e
,
éée f
out
éég j
string
éék q
mimeType
éér z
,
ééz {
out
éé| 
stringééÄ Ü
encodingééá è
,ééè ê
outééë î
stringééï õ!
fileNameExtensionééú ≠
,éé≠ Æ
outééØ ≤
stringéé≥ π
[ééπ ∫
]éé∫ ª
	streamidsééº ≈
,éé≈ ∆
outéé«  
WarningééÀ “
[éé“ ”
]éé” ‘
warningséé’ ›
)éé› ﬁ
;ééﬁ ﬂ
var
èè 
fileInArchive
èè )
=
èè* +
archive
èè, 3
.
èè3 4
CreateEntry
èè4 ?
(
èè? @
filenameExcel
èè@ M
,
èèM N
CompressionLevel
èèO _
.
èè_ `
Optimal
èè` g
)
èèg h
;
èèh i
using
êê 
(
êê 
var
êê "
entryStream
êê# .
=
êê/ 0
fileInArchive
êê1 >
.
êê> ?
Open
êê? C
(
êêC D
)
êêD E
)
êêE F
using
ëë 
(
ëë 
var
ëë ""
fileToCompressStream
ëë# 7
=
ëë8 9
new
ëë: =
MemoryStream
ëë> J
(
ëëJ K
bytesReporte
ëëK W
)
ëëW X
)
ëëX Y
{
íí "
fileToCompressStream
ìì 0
.
ìì0 1
CopyTo
ìì1 7
(
ìì7 8
entryStream
ìì8 C
)
ììC D
;
ììD E"
fileToCompressStream
îî 0
.
îî0 1
Close
îî1 6
(
îî6 7
)
îî7 8
;
îî8 9
}
ïï 
}
ññ 
}
òò 
compressedBytes
ôô 
=
ôô  !
	outStream
ôô" +
.
ôô+ ,
ToArray
ôô, 3
(
ôô3 4
)
ôô4 5
;
ôô5 6
}
öö 
string
õõ 
fileNameZip
õõ 
=
õõ  
string
õõ! '
.
õõ' (
Format
õõ( .
(
õõ. /
$str
õõ/ 8
,
õõ8 9
fileNameContent
õõ: I
,
õõI J
$str
õõK P
)
õõP Q
.
õõQ R
Replace
õõR Y
(
õõY Z
$str
õõZ ]
,
õõ] ^
$str
õõ_ a
)
õõa b
;
õõb c
return
úú 
new
úú 

Attachment
úú !
(
úú! "
new
úú" %
MemoryStream
úú& 2
(
úú2 3
compressedBytes
úú3 B
)
úúB C
,
úúC D
fileNameZip
úúE P
,
úúP Q
$str
úúR c
)
úúc d
;
úúd e
}
ùù 	
public
°° 
ActionResult
°° 9
+ReporteDeVentasPorConceptoBasicoPorVendedor
°° G
(
°°G H
string
°°H N
fechaInicio
°°O Z
,
°°Z [
string
°°\ b
fechaFin
°°c k
,
°°k l
[
°°m n
System
°°n t
.
°°t u
Web
°°u x
.
°°x y
Http
°°y }
.
°°} ~
FromUri°°~ Ö
]°°Ö Ü
int°°á ä

idVendedor°°ã ï
,°°ï ñ
string°°ó ù
nombreVendedor°°û ¨
)°°¨ ≠
{
¢¢ 	
DateTime
§§ 

fechaDesde
§§ 
=
§§  !
DateTimeUtil
§§" .
.
§§. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
§§/ Z
(
§§Z [
fechaInicio
§§[ f
)
§§f g
;
§§g h
DateTime
•• 

fechaHasta
•• 
=
••  !
DateTimeUtil
••" .
.
••. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
••/ Z
(
••Z [
fechaFin
••[ c
)
••c d
;
••d e
List
ßß 
<
ßß 7
)Resumen_Detalles_Consolidado_Por_Vendedor
ßß :
>
ßß: ;C
5resumenPorConceptoNegocioPorPrecioUnitarioPorVendedor
ßß< q
=
ßßr s
operacionLogicaßßt É
.ßßÉ Ñ_
OObtenerResumenDetallesConsolidadoPorConceptoNegocioPorPrecioUnitarioPorVendedorßßÑ ”
(ßß” ‘

idVendedorßß‘ ﬁ
,ßßﬁ ﬂ

fechaDesdeßß‡ Í
,ßßÍ Î

fechaHastaßßÏ ˆ
)ßßˆ ˜
;ßß˜ ¯
List
®® 
<
®® 7
)Resumen_Detalles_Consolidado_Por_Vendedor
®® :
>
®®: ;2
$resumenPorConceptoNegocioPorVendedor
®®< `
=
®®a b
operacionLogica
®®c r
.
®®r sM
>ObtenerResumenDetallesConsolidadoPorConceptoNegocioPorVendedor®®s ±
(®®± ≤

idVendedor®®≤ º
,®®º Ω

fechaDesde®®æ »
,®®» …

fechaHasta®®  ‘
)®®‘ ’
;®®’ ÷
List
©© 
<
©© 7
)Resumen_Detalles_Consolidado_Por_Vendedor
©© :
>
©©: ;1
#resumenPorConceptoBasicoPorVendedor
©©< _
=
©©` a
operacionLogica
©©b q
.
©©q rL
=ObtenerResumenDetallesConsolidadoPorConceptoBasicoPorVendedor©©r Ø
(©©Ø ∞

idVendedor©©∞ ∫
,©©∫ ª

fechaDesde©©º ∆
,©©∆ «

fechaHasta©©» “
)©©“ ”
;©©” ‘
var
¨¨ 
	rptviewer
¨¨ 
=
¨¨ 
new
¨¨ 
ReportViewer
¨¨  ,
(
¨¨, -
)
¨¨- .
;
¨¨. /
ReportParameter
≠≠ !
parametroFechaDesde
≠≠ /
=
≠≠0 1
new
≠≠2 5
ReportParameter
≠≠6 E
(
≠≠E F
$str
≠≠F R
,
≠≠R S

fechaDesde
≠≠T ^
.
≠≠^ _
ToString
≠≠_ g
(
≠≠g h
)
≠≠h i
)
≠≠i j
;
≠≠j k
ReportParameter
ÆÆ !
parametroFechaHasta
ÆÆ /
=
ÆÆ0 1
new
ÆÆ2 5
ReportParameter
ÆÆ6 E
(
ÆÆE F
$str
ÆÆF R
,
ÆÆR S

fechaHasta
ÆÆT ^
.
ÆÆ^ _
ToString
ÆÆ_ g
(
ÆÆg h
)
ÆÆh i
)
ÆÆi j
;
ÆÆj k
ReportParameter
ØØ 
nombreEmpresa
ØØ )
=
ØØ* +
new
ØØ, /
ReportParameter
ØØ0 ?
(
ØØ? @
$str
ØØ@ L
,
ØØL M
ObtenerSede
ØØN Y
(
ØØY Z
)
ØØZ [
.
ØØ[ \
Nombre
ØØ\ b
)
ØØb c
;
ØØc d
ReportParameter
∞∞ 
nombreEmpleado
∞∞ *
=
∞∞+ ,
new
∞∞- 0
ReportParameter
∞∞1 @
(
∞∞@ A
$str
∞∞A Q
,
∞∞Q R
nombreVendedor
∞∞S a
)
∞∞a b
;
∞∞b c
var
≤≤ 
sede
≤≤ 
=
≤≤ 
ObtenerSede
≤≤ "
(
≤≤" #
)
≤≤# $
;
≤≤$ %
string
≥≥ 

logoString
≥≥ 
=
≥≥ 
Convert
≥≥  '
.
≥≥' (
ToBase64String
≥≥( 6
(
≥≥6 7
sede
≥≥7 ;
.
≥≥; <
Logo
≥≥< @
,
≥≥@ A
$num
≥≥B C
,
≥≥C D
sede
≥≥E I
.
≥≥I J
Logo
≥≥J N
.
≥≥N O
Length
≥≥O U
)
≥≥U V
;
≥≥V W
ReportParameter
¥¥ 
logoSede
¥¥ $
=
¥¥% &
new
¥¥' *
ReportParameter
¥¥+ :
(
¥¥: ;
$str
¥¥; E
,
¥¥E F

logoString
¥¥G Q
)
¥¥Q R
;
¥¥R S
ReportParameter
∂∂ "
nombreCentroAtencion
∂∂ 0
=
∂∂1 2
new
∂∂3 6
ReportParameter
∂∂7 F
(
∂∂F G
$str
∂∂G ]
,
∂∂] ^
ProfileData
∂∂_ j
(
∂∂j k
)
∂∂k l
.
∂∂l m1
"NombreCentroDeAtencionSeleccionado∂∂m è
)∂∂è ê
;∂∂ê ë
DateTime
∏∏ 
fechaActual
∏∏  
=
∏∏! "
DateTimeUtil
∏∏" .
.
∏∏. /
FechaActual
∏∏/ :
(
∏∏: ;
)
∏∏; <
;
∏∏< =
ReportParameter
ππ  
fechaActualSistema
ππ .
=
ππ/ 0
new
ππ1 4
ReportParameter
ππ5 D
(
ππD E
$str
ππE R
,
ππR S
fechaActual
ππT _
.
ππ_ `
ToString
ππ` h
(
ππh i
)
ππi j
)
ππj k
;
ππk l
ReportParameter
ªª 
empleadoSede
ªª (
=
ªª) *
new
ªª+ .
ReportParameter
ªª/ >
(
ªª> ?
$str
ªª? H
,
ªªH I
ProfileData
ªªJ U
(
ªªU V
)
ªªV W
.
ªªW X
Empleado
ªªX `
.
ªª` a
NombresYApellidos
ªªa r
)
ªªr s
;
ªªs t
	rptviewer
ΩΩ 
.
ΩΩ 
LocalReport
ΩΩ !
.
ΩΩ! "

ReportPath
ΩΩ" ,
=
ΩΩ- .
Request
ΩΩ/ 6
.
ΩΩ6 7
MapPath
ΩΩ7 >
(
ΩΩ> ?
Request
ΩΩ? F
.
ΩΩF G
ApplicationPath
ΩΩG V
)
ΩΩV W
+
ΩΩX Y
$strΩΩZ ë
;ΩΩë í
	rptviewer
ææ 
.
ææ 
LocalReport
ææ !
.
ææ! "
SetParameters
ææ" /
(
ææ/ 0
new
ææ0 3
ReportParameter
ææ4 C
[
ææC D
]
ææD E
{
ææF G!
parametroFechaDesde
ææH [
,
ææ[ \!
parametroFechaHasta
ææ] p
,
ææp q
nombreEmpresa
æær 
,ææ Ä
nombreEmpleadoææÅ è
,ææè ê
logoSedeææë ô
,ææô ö$
nombreCentroAtencionææõ Ø
,ææØ ∞"
fechaActualSistemaææ± √
,ææ√ ƒ
empleadoSedeææ≈ —
}ææ“ ”
)ææ” ‘
;ææ‘ ’
ReportDataSource
¿¿ F
8rptdatasourceConceptoNegocioPorPrecioUnitarioPorVendedor
¿¿ U
=
¿¿V W
new
¿¿X [
ReportDataSource
¿¿\ l
(
¿¿l m
$str¿¿m §
,¿¿§ •E
5resumenPorConceptoNegocioPorPrecioUnitarioPorVendedor¿¿¶ €
)¿¿€ ‹
;¿¿‹ ›
ReportDataSource
¡¡ 5
'rptdatasourceConceptoNegocioPorVendedor
¡¡ D
=
¡¡E F
new
¡¡G J
ReportDataSource
¡¡K [
(
¡¡[ \
$str¡¡\ Ç
,¡¡Ç É4
$resumenPorConceptoNegocioPorVendedor¡¡Ñ ®
)¡¡® ©
;¡¡© ™
ReportDataSource
¬¬ 4
&rptdatasourceConceptoBasicoPorVendedor
¬¬ C
=
¬¬D E
new
¬¬F I
ReportDataSource
¬¬J Z
(
¬¬Z [
$str¬¬[ Ä
,¬¬Ä Å3
#resumenPorConceptoBasicoPorVendedor¬¬Ç •
)¬¬• ¶
;¬¬¶ ß
	rptviewer
ƒƒ 
.
ƒƒ 
ProcessingMode
ƒƒ $
=
ƒƒ% &
ProcessingMode
ƒƒ' 5
.
ƒƒ5 6
Local
ƒƒ6 ;
;
ƒƒ; <
	rptviewer
∆∆ 
.
∆∆ 
LocalReport
∆∆ !
.
∆∆! "
DataSources
∆∆" -
.
∆∆- .
Add
∆∆. 1
(
∆∆1 2F
8rptdatasourceConceptoNegocioPorPrecioUnitarioPorVendedor
∆∆2 j
)
∆∆j k
;
∆∆k l
	rptviewer
«« 
.
«« 
LocalReport
«« !
.
««! "
DataSources
««" -
.
««- .
Add
««. 1
(
««1 25
'rptdatasourceConceptoNegocioPorVendedor
««2 Y
)
««Y Z
;
««Z [
	rptviewer
»» 
.
»» 
LocalReport
»» !
.
»»! "
DataSources
»»" -
.
»»- .
Add
»». 1
(
»»1 24
&rptdatasourceConceptoBasicoPorVendedor
»»2 X
)
»»X Y
;
»»Y Z
	rptviewer
   
.
   !
SizeToReportContent
   )
=
  * +
true
  , 0
;
  0 1
	rptviewer
ÀÀ 
.
ÀÀ 
Width
ÀÀ 
=
ÀÀ 
Unit
ÀÀ "
.
ÀÀ" #

Percentage
ÀÀ# -
(
ÀÀ- .
$num
ÀÀ. 1
)
ÀÀ1 2
;
ÀÀ2 3
	rptviewer
ÃÃ 
.
ÃÃ 
Height
ÃÃ 
=
ÃÃ 
Unit
ÃÃ #
.
ÃÃ# $

Percentage
ÃÃ$ .
(
ÃÃ. /
$num
ÃÃ/ 2
)
ÃÃ2 3
;
ÃÃ3 4
ViewBag
ÕÕ 
.
ÕÕ 
ReportViewer
ÕÕ  
=
ÕÕ! "
	rptviewer
ÕÕ# ,
;
ÕÕ, -
return
ŒŒ 
View
ŒŒ 
(
ŒŒ 
$str
ŒŒ -
)
ŒŒ- .
;
ŒŒ. /
}
œœ 	
public
““ 
ActionResult
““ F
8ReporteDeVentasConsolidadoPorConceptoBasicoPorVendedores
““ T
(
““T U
string
““U [
fechaInicio
““\ g
,
““g h
string
““i o
fechaFin
““p x
)
““x y
{
”” 	
DateTime
’’ 

fechaDesde
’’ 
=
’’  !
DateTimeUtil
’’" .
.
’’. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
’’/ Z
(
’’Z [
fechaInicio
’’[ f
)
’’f g
;
’’g h
DateTime
÷÷ 

fechaHasta
÷÷ 
=
÷÷  !
DateTimeUtil
÷÷" .
.
÷÷. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
÷÷/ Z
(
÷÷Z [
fechaFin
÷÷[ c
)
÷÷c d
;
÷÷d e
List
ÿÿ 
<
ÿÿ 7
)Resumen_Detalles_Consolidado_Por_Vendedor
ÿÿ :
>
ÿÿ: ;2
$resumenPorConceptoBasicoDeVendedores
ÿÿ< `
=
ÿÿa b
operacionLogica
ÿÿc r
.
ÿÿr s8
)ObtenerResumenDeVentasAgrupadasPorFamiliaÿÿs ú
(ÿÿú ù

fechaDesdeÿÿù ß
,ÿÿß ®

fechaHastaÿÿ© ≥
)ÿÿ≥ ¥
;ÿÿ¥ µ
List
ŸŸ 
<
ŸŸ 7
)Resumen_Detalles_Consolidado_Por_Vendedor
ŸŸ :
>
ŸŸ: ;3
%resumenPorConceptoBasicoPorVendedores
ŸŸ< a
=
ŸŸb c
operacionLogica
ŸŸd s
.
ŸŸs tA
2ObtenerResumenDeVentasAgrupadasPorFamiliaYVendedorŸŸt ¶
(ŸŸ¶ ß

fechaDesdeŸŸß ±
,ŸŸ± ≤

fechaHastaŸŸ≥ Ω
)ŸŸΩ æ
;ŸŸæ ø
var
‹‹ 
	rptviewer
‹‹ 
=
‹‹ 
new
‹‹ 
ReportViewer
‹‹  ,
(
‹‹, -
)
‹‹- .
;
‹‹. /
ReportParameter
›› !
parametroFechaDesde
›› /
=
››0 1
new
››2 5
ReportParameter
››6 E
(
››E F
$str
››F R
,
››R S

fechaDesde
››T ^
.
››^ _
ToString
››_ g
(
››g h
)
››h i
)
››i j
;
››j k
ReportParameter
ﬁﬁ !
parametroFechaHasta
ﬁﬁ /
=
ﬁﬁ0 1
new
ﬁﬁ2 5
ReportParameter
ﬁﬁ6 E
(
ﬁﬁE F
$str
ﬁﬁF R
,
ﬁﬁR S

fechaHasta
ﬁﬁT ^
.
ﬁﬁ^ _
ToString
ﬁﬁ_ g
(
ﬁﬁg h
)
ﬁﬁh i
)
ﬁﬁi j
;
ﬁﬁj k
ReportParameter
ﬂﬂ 

nombreSede
ﬂﬂ &
=
ﬂﬂ' (
new
ﬂﬂ) ,
ReportParameter
ﬂﬂ- <
(
ﬂﬂ< =
$str
ﬂﬂ= I
,
ﬂﬂI J
ObtenerSede
ﬂﬂK V
(
ﬂﬂV W
)
ﬂﬂW X
.
ﬂﬂX Y
Nombre
ﬂﬂY _
)
ﬂﬂ_ `
;
ﬂﬂ` a
var
‚‚ 
sede
‚‚ 
=
‚‚ 
ObtenerSede
‚‚ "
(
‚‚" #
)
‚‚# $
;
‚‚$ %
string
„„ 

logoString
„„ 
=
„„ 
Convert
„„  '
.
„„' (
ToBase64String
„„( 6
(
„„6 7
sede
„„7 ;
.
„„; <
Logo
„„< @
,
„„@ A
$num
„„B C
,
„„C D
sede
„„E I
.
„„I J
Logo
„„J N
.
„„N O
Length
„„O U
)
„„U V
;
„„V W
ReportParameter
‰‰ 
logoSede
‰‰ $
=
‰‰% &
new
‰‰' *
ReportParameter
‰‰+ :
(
‰‰: ;
$str
‰‰; E
,
‰‰E F

logoString
‰‰G Q
)
‰‰Q R
;
‰‰R S
ReportParameter
ÊÊ "
nombreCentroAtencion
ÊÊ 0
=
ÊÊ1 2
new
ÊÊ3 6
ReportParameter
ÊÊ7 F
(
ÊÊF G
$str
ÊÊG ]
,
ÊÊ] ^
ProfileData
ÊÊ_ j
(
ÊÊj k
)
ÊÊk l
.
ÊÊl m1
"NombreCentroDeAtencionSeleccionadoÊÊm è
)ÊÊè ê
;ÊÊê ë
DateTime
ËË 
fechaActual
ËË  
=
ËË! "
DateTimeUtil
ËË" .
.
ËË. /
FechaActual
ËË/ :
(
ËË: ;
)
ËË; <
;
ËË< =
ReportParameter
ÈÈ  
fechaActualSistema
ÈÈ .
=
ÈÈ/ 0
new
ÈÈ1 4
ReportParameter
ÈÈ5 D
(
ÈÈD E
$str
ÈÈE R
,
ÈÈR S
fechaActual
ÈÈT _
.
ÈÈ_ `
ToString
ÈÈ` h
(
ÈÈh i
)
ÈÈi j
)
ÈÈj k
;
ÈÈk l
ReportParameter
ÎÎ 
empleadoSede
ÎÎ (
=
ÎÎ) *
new
ÎÎ+ .
ReportParameter
ÎÎ/ >
(
ÎÎ> ?
$str
ÎÎ? H
,
ÎÎH I
ProfileData
ÎÎJ U
(
ÎÎU V
)
ÎÎV W
.
ÎÎW X
Empleado
ÎÎX `
.
ÎÎ` a
NombresYApellidos
ÎÎa r
)
ÎÎr s
;
ÎÎs t
	rptviewer
ÌÌ 
.
ÌÌ 
LocalReport
ÌÌ !
.
ÌÌ! "

ReportPath
ÌÌ" ,
=
ÌÌ- .
Request
ÌÌ/ 6
.
ÌÌ6 7
MapPath
ÌÌ7 >
(
ÌÌ> ?
Request
ÌÌ? F
.
ÌÌF G
ApplicationPath
ÌÌG V
)
ÌÌV W
+
ÌÌX Y
$strÌÌZ ö
;ÌÌö õ
	rptviewer
ÓÓ 
.
ÓÓ 
LocalReport
ÓÓ !
.
ÓÓ! "
SetParameters
ÓÓ" /
(
ÓÓ/ 0
new
ÓÓ0 3
ReportParameter
ÓÓ4 C
[
ÓÓC D
]
ÓÓD E
{
ÓÓF G!
parametroFechaDesde
ÓÓH [
,
ÓÓ[ \!
parametroFechaHasta
ÓÓ] p
,
ÓÓp q

nombreSede
ÓÓr |
,
ÓÓ| }
logoSedeÓÓ~ Ü
,ÓÓÜ á"
fechaActualSistemaÓÓà ö
,ÓÓö õ
empleadoSedeÓÓú ®
,ÓÓ® ©$
nombreCentroAtencionÓÓ™ æ
}ÓÓø ¿
)ÓÓ¿ ¡
;ÓÓ¡ ¬
ReportDataSource
 5
'rptdatasourceConceptoBasicoDeVendedores
 D
=
E F
new
G J
ReportDataSource
K [
(
[ \
$str\ Ç
,Ç É4
$resumenPorConceptoBasicoDeVendedoresÑ ®
)® ©
;© ™
ReportDataSource
ÒÒ 6
(rptdatasourceConceptoBasicoPorVendedores
ÒÒ E
=
ÒÒF G
new
ÒÒH K
ReportDataSource
ÒÒL \
(
ÒÒ\ ]
$strÒÒ] Ñ
,ÒÒÑ Ö5
%resumenPorConceptoBasicoPorVendedoresÒÒÜ ´
)ÒÒ´ ¨
;ÒÒ¨ ≠
	rptviewer
ÛÛ 
.
ÛÛ 
ProcessingMode
ÛÛ $
=
ÛÛ% &
ProcessingMode
ÛÛ' 5
.
ÛÛ5 6
Local
ÛÛ6 ;
;
ÛÛ; <
	rptviewer
ıı 
.
ıı 
LocalReport
ıı !
.
ıı! "
DataSources
ıı" -
.
ıı- .
Add
ıı. 1
(
ıı1 25
'rptdatasourceConceptoBasicoDeVendedores
ıı2 Y
)
ııY Z
;
ııZ [
	rptviewer
ˆˆ 
.
ˆˆ 
LocalReport
ˆˆ !
.
ˆˆ! "
DataSources
ˆˆ" -
.
ˆˆ- .
Add
ˆˆ. 1
(
ˆˆ1 26
(rptdatasourceConceptoBasicoPorVendedores
ˆˆ2 Z
)
ˆˆZ [
;
ˆˆ[ \
	rptviewer
¯¯ 
.
¯¯ !
SizeToReportContent
¯¯ )
=
¯¯* +
true
¯¯, 0
;
¯¯0 1
	rptviewer
˘˘ 
.
˘˘ 
Width
˘˘ 
=
˘˘ 
Unit
˘˘ "
.
˘˘" #

Percentage
˘˘# -
(
˘˘- .
$num
˘˘. 1
)
˘˘1 2
;
˘˘2 3
	rptviewer
˙˙ 
.
˙˙ 
Height
˙˙ 
=
˙˙ 
Unit
˙˙ #
.
˙˙# $

Percentage
˙˙$ .
(
˙˙. /
$num
˙˙/ 2
)
˙˙2 3
;
˙˙3 4
ViewBag
˚˚ 
.
˚˚ 
ReportViewer
˚˚  
=
˚˚! "
	rptviewer
˚˚# ,
;
˚˚, -
return
¸¸ 
View
¸¸ 
(
¸¸ 
$str
¸¸ -
)
¸¸- .
;
¸¸. /
}
˝˝ 	
public
ÄÄ 
ActionResult
ÄÄ G
9ReporteDeVentasConsolidadoAlContadoAlCreditoPorVendedores
ÄÄ U
(
ÄÄU V
string
ÄÄV \
fechaInicio
ÄÄ] h
,
ÄÄh i
string
ÄÄj p
fechaFin
ÄÄq y
)
ÄÄy z
{
ÅÅ 	
DateTime
ÇÇ 

fechaDesde
ÇÇ 
=
ÇÇ  !
DateTimeUtil
ÇÇ" .
.
ÇÇ. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ÇÇ/ Z
(
ÇÇZ [
fechaInicio
ÇÇ[ f
)
ÇÇf g
;
ÇÇg h
DateTime
ÉÉ 

fechaHasta
ÉÉ 
=
ÉÉ  !
DateTimeUtil
ÉÉ" .
.
ÉÉ. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
ÉÉ/ Z
(
ÉÉZ [
fechaFin
ÉÉ[ c
)
ÉÉc d
;
ÉÉd e
List
ÑÑ 
<
ÑÑ ?
1Resumen_Por_Concepto_Por_Vendedor_Contado_Credito
ÑÑ B
>
ÑÑB C9
+resumenPorConceptoPorVendedorContadoCredito
ÑÑD o
=
ÑÑp q
operacionLogicaÑÑr Å
.ÑÑÅ ÇH
8ObtenerResumenVentasPorConceptoPorVendedorContadoCreditoÑÑÇ ∫
(ÑÑ∫ ª

fechaDesdeÑÑª ≈
,ÑÑ≈ ∆

fechaHastaÑÑ« —
)ÑÑ— “
;ÑÑ“ ”
var
ÖÖ 
	rptviewer
ÖÖ 
=
ÖÖ 
new
ÖÖ 
ReportViewer
ÖÖ  ,
(
ÖÖ, -
)
ÖÖ- .
;
ÖÖ. /
ReportParameter
ÜÜ !
parametroFechaDesde
ÜÜ /
=
ÜÜ0 1
new
ÜÜ2 5
ReportParameter
ÜÜ6 E
(
ÜÜE F
$str
ÜÜF R
,
ÜÜR S

fechaDesde
ÜÜT ^
.
ÜÜ^ _
ToString
ÜÜ_ g
(
ÜÜg h
)
ÜÜh i
)
ÜÜi j
;
ÜÜj k
ReportParameter
áá !
parametroFechaHasta
áá /
=
áá0 1
new
áá2 5
ReportParameter
áá6 E
(
ááE F
$str
ááF R
,
ááR S

fechaHasta
ááT ^
.
áá^ _
ToString
áá_ g
(
áág h
)
ááh i
)
áái j
;
ááj k
ReportParameter
àà 
nombreEmpresa
àà )
=
àà* +
new
àà, /
ReportParameter
àà0 ?
(
àà? @
$str
àà@ L
,
ààL M
ObtenerSede
ààN Y
(
ààY Z
)
ààZ [
.
àà[ \
Nombre
àà\ b
)
ààb c
;
ààc d
var
ââ 
sede
ââ 
=
ââ 
ObtenerSede
ââ "
(
ââ" #
)
ââ# $
;
ââ$ %
string
ää 

logoString
ää 
=
ää 
Convert
ää  '
.
ää' (
ToBase64String
ää( 6
(
ää6 7
sede
ää7 ;
.
ää; <
Logo
ää< @
,
ää@ A
$num
ääB C
,
ääC D
sede
ääE I
.
ääI J
Logo
ääJ N
.
ääN O
Length
ääO U
)
ääU V
;
ääV W
ReportParameter
ãã 
logoSede
ãã $
=
ãã% &
new
ãã' *
ReportParameter
ãã+ :
(
ãã: ;
$str
ãã; E
,
ããE F

logoString
ããG Q
)
ããQ R
;
ããR S
DateTime
åå 
fechaActual
åå  
=
åå! "
DateTimeUtil
åå" .
.
åå. /
FechaActual
åå/ :
(
åå: ;
)
åå; <
;
åå< =
ReportParameter
çç  
fechaActualSistema
çç .
=
çç/ 0
new
çç1 4
ReportParameter
çç5 D
(
ççD E
$str
ççE R
,
ççR S
fechaActual
ççT _
.
çç_ `
ToString
çç` h
(
ççh i
)
ççi j
)
ççj k
;
ççk l
ReportParameter
éé 
empleadoSede
éé (
=
éé) *
new
éé+ .
ReportParameter
éé/ >
(
éé> ?
$str
éé? H
,
ééH I
ProfileData
ééJ U
(
ééU V
)
ééV W
.
ééW X
Empleado
ééX `
.
éé` a
NombresYApellidos
ééa r
)
éér s
;
éés t
	rptviewer
èè 
.
èè 
LocalReport
èè !
.
èè! "

ReportPath
èè" ,
=
èè- .
Request
èè/ 6
.
èè6 7
MapPath
èè7 >
(
èè> ?
Request
èè? F
.
èèF G
ApplicationPath
èèG V
)
èèV W
+
èèX Y
$strèèZ £
;èè£ §
	rptviewer
êê 
.
êê 
LocalReport
êê !
.
êê! "
SetParameters
êê" /
(
êê/ 0
new
êê0 3
ReportParameter
êê4 C
[
êêC D
]
êêD E
{
êêF G!
parametroFechaDesde
êêH [
,
êê[ \!
parametroFechaHasta
êê] p
,
êêp q
nombreEmpresa
êêr 
,êê Ä"
fechaActualSistemaêêÅ ì
,êêì î
logoSedeêêï ù
,êêù û
empleadoSedeêêü ´
}êê¨ ≠
)êê≠ Æ
;êêÆ Ø
ReportDataSource
ëë <
.rptdatasourceConceptoPorVendedorContadoCredito
ëë K
=
ëëL M
new
ëëN Q
ReportDataSource
ëëR b
(
ëëb c
$strëëc ê
,ëëê ë;
+resumenPorConceptoPorVendedorContadoCreditoëëí Ω
)ëëΩ æ
;ëëæ ø
	rptviewer
íí 
.
íí 
ProcessingMode
íí $
=
íí% &
ProcessingMode
íí' 5
.
íí5 6
Local
íí6 ;
;
íí; <
	rptviewer
ìì 
.
ìì 
LocalReport
ìì !
.
ìì! "
DataSources
ìì" -
.
ìì- .
Add
ìì. 1
(
ìì1 2<
.rptdatasourceConceptoPorVendedorContadoCredito
ìì2 `
)
ìì` a
;
ììa b
	rptviewer
îî 
.
îî !
SizeToReportContent
îî )
=
îî* +
true
îî, 0
;
îî0 1
	rptviewer
ïï 
.
ïï 
Width
ïï 
=
ïï 
Unit
ïï "
.
ïï" #

Percentage
ïï# -
(
ïï- .
$num
ïï. 1
)
ïï1 2
;
ïï2 3
	rptviewer
ññ 
.
ññ 
Height
ññ 
=
ññ 
Unit
ññ #
.
ññ# $

Percentage
ññ$ .
(
ññ. /
$num
ññ/ 2
)
ññ2 3
;
ññ3 4
ViewBag
óó 
.
óó 
ReportViewer
óó  
=
óó! "
	rptviewer
óó# ,
;
óó, -
return
òò 
View
òò 
(
òò 
$str
òò -
)
òò- .
;
òò. /
}
ôô 	
public
úú 
ActionResult
úú %
VentasPorCaracteristica
úú 3
(
úú3 4
string
úú4 :
fechaInicio
úú; F
,
úúF G
string
úúH N
fechaFin
úúO W
,
úúW X
[
úúY Z
System
úúZ `
.
úú` a
Web
úúa d
.
úúd e
Http
úúe i
.
úúi j
FromUri
úúj q
]
úúq r
int
úús v
[
úúv w
]
úúw x!
idsCentrosAtencionúúy ã
,úúã å
stringúúç ì&
nombresCentrosAtencionúúî ™
,úú™ ´
intúú¨ Ø 
idCaracteristicaúú∞ ¿
,úú¿ ¡
stringúú¬ »*
nombreCaracteristicaStringúú… „
)úú„ ‰
{
ùù 	
DateTime
ûû 

fechaDesde
ûû 
=
ûû  !
DateTimeUtil
ûû" .
.
ûû. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ûû/ Z
(
ûûZ [
fechaInicio
ûû[ f
)
ûûf g
;
ûûg h
DateTime
üü 

fechaHasta
üü 
=
üü  !
DateTimeUtil
üü" .
.
üü. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
üü/ Z
(
üüZ [
fechaFin
üü[ c
)
üüc d
;
üüd e
ReportParameter
†† !
parametroFechaDesde
†† /
=
††0 1
new
††2 5
ReportParameter
††6 E
(
††E F
$str
††F R
,
††R S

fechaDesde
††T ^
.
††^ _
ToString
††_ g
(
††g h
)
††h i
)
††i j
;
††j k
ReportParameter
°° !
parametroFechaHasta
°° /
=
°°0 1
new
°°2 5
ReportParameter
°°6 E
(
°°E F
$str
°°F R
,
°°R S

fechaHasta
°°T ^
.
°°^ _
ToString
°°_ g
(
°°g h
)
°°h i
)
°°i j
;
°°j k
ReportParameter
¢¢ "
nombreCentroAtencion
¢¢ 0
=
¢¢1 2
new
¢¢3 6
ReportParameter
¢¢7 F
(
¢¢F G
$str
¢¢G ]
,
¢¢] ^$
nombresCentrosAtencion
¢¢_ u
)
¢¢u v
;
¢¢v w
ReportParameter
££ "
nombreCaracteristica
££ 0
=
££1 2
new
££3 6
ReportParameter
££7 F
(
££F G
$str
££G ]
,
££] ^(
nombreCaracteristicaString
££_ y
)
££y z
;
££z {
var
§§ 
	rptviewer
§§ 
=
§§ 
new
§§ 
ReportViewer
§§  ,
(
§§, -
)
§§- .
;
§§. /
	rptviewer
•• 
.
•• 
LocalReport
•• !
.
••! "

ReportPath
••" ,
=
••- .
Request
••/ 6
.
••6 7
MapPath
••7 >
(
••> ?
Request
••? F
.
••F G
ApplicationPath
••G V
)
••V W
+
••X Y
$str••Z ñ
;••ñ ó
var
¶¶ 
parametrosBasicos
¶¶ !
=
¶¶" #&
ObtenerParametrosBasicos
¶¶$ <
(
¶¶< =
)
¶¶= >
;
¶¶> ?
	rptviewer
ßß 
.
ßß 
LocalReport
ßß !
.
ßß! "
SetParameters
ßß" /
(
ßß/ 0
new
ßß0 3
ReportParameter
ßß4 C
[
ßßC D
]
ßßD E
{
ßßF G!
parametroFechaDesde
ßßH [
,
ßß[ \!
parametroFechaHasta
ßß] p
,
ßßp q 
parametrosBasicosßßr É
.ßßÉ Ñ

NombreSedeßßÑ é
,ßßé è!
parametrosBasicosßßê °
.ßß° ¢"
FechaActualSistemaßß¢ ¥
,ßß¥ µ!
parametrosBasicosßß∂ «
.ßß« »
LogoSedeßß» –
,ßß– —!
parametrosBasicosßß“ „
.ßß„ ‰
Usuarioßß‰ Î
,ßßÎ Ï$
nombreCentroAtencionßßÌ Å
,ßßÅ Ç$
nombreCaracteristicaßßÉ ó
}ßßò ô
)ßßô ö
;ßßö õ
List
®® 
<
®® ,
ItemConGrupoOperacionComercial
®® /
>
®®/ 0
detalles
®®1 9
=
®®: ;
operacionLogica
®®< K
.
®®K L@
2ObtenerVentasConfirmadasPorCaracteristicaYConcepto
®®L ~
(
®®~ 

fechaDesde®® â
,®®â ä

fechaHasta®®ã ï
,®®ï ñ"
idsCentrosAtencion®®ó ©
,®®© ™ 
idCaracteristica®®´ ª
)®®ª º
.®®º Ω!
OrderByDescending®®Ω Œ
(®®Œ œ
d®®œ –
=>®®— ”
d®®‘ ’
.®®’ ÷
Importe®®÷ ›
)®®› ﬁ
.®®ﬁ ﬂ
ToList®®ﬂ Â
(®®Â Ê
)®®Ê Á
;®®Á Ë
List
©© 
<
©© $
ItemOperacionComercial
©© '
>
©©' (
resumen
©©) 0
=
©©1 2
detalles
©©3 ;
.
©©; <
GroupBy
©©< C
(
©©C D
d
©©D E
=>
©©F H
new
©©I L
{
©©M N
d
©©O P
.
©©P Q
IdGrupo
©©Q X
,
©©X Y
d
©©Z [
.
©©[ \
NombreGrupo
©©\ g
}
©©h i
)
©©i j
.
©©j k
Select
©©k q
(
©©q r
d
©©r s
=>
©©t v
new
©©w z%
ItemOperacionComercial©©{ ë
(©©ë í
)©©í ì
{©©î ï
IdItem©©ñ ú
=©©ù û
d©©ü †
.©©† °
Key©©° §
.©©§ •
IdGrupo©©• ¨
,©©¨ ≠

NombreItem©©Æ ∏
=©©π ∫
d©©ª º
.©©º Ω
Key©©Ω ¿
.©©¿ ¡
NombreGrupo©©¡ Ã
,©©Ã Õ
Cantidad©©Œ ÷
=©©◊ ÿ
d©©Ÿ ⁄
.©©⁄ €
Sum©©€ ﬁ
(©©ﬁ ﬂ
ds©©ﬂ ·
=>©©‚ ‰
ds©©Â Á
.©©Á Ë
Cantidad©©Ë 
)©© Ò
,©©Ò Ú
Importe©©Û ˙
=©©˚ ¸
d©©˝ ˛
.©©˛ ˇ
Sum©©ˇ Ç
(©©Ç É
ds©©É Ö
=>©©Ü à
ds©©â ã
.©©ã å
Importe©©å ì
)©©ì î
}©©ï ñ
)©©ñ ó
.©©ó ò!
OrderByDescending©©ò ©
(©©© ™
d©©™ ´
=>©©¨ Æ
d©©Ø ∞
.©©∞ ±
Importe©©± ∏
)©©∏ π
.©©π ∫
ToList©©∫ ¿
(©©¿ ¡
)©©¡ ¬
;©©¬ √
List
™™ 
<
™™ $
ItemOperacionComercial
™™ '
>
™™' (
top20
™™) .
=
™™/ 0
resumen
™™1 8
.
™™8 9
Take
™™9 =
(
™™= >
$num
™™> @
)
™™@ A
.
™™A B
ToList
™™B H
(
™™H I
)
™™I J
;
™™J K
ReportDataSource
´´ 
detallesDataSet
´´ ,
=
´´- .
new
´´/ 2
ReportDataSource
´´3 C
(
´´C D
$str
´´D U
,
´´U V
detalles
´´W _
)
´´_ `
;
´´` a
ReportDataSource
¨¨ 
resumenDataSet
¨¨ +
=
¨¨, -
new
¨¨. 1
ReportDataSource
¨¨2 B
(
¨¨B C
$str
¨¨C S
,
¨¨S T
resumen
¨¨U \
)
¨¨\ ]
;
¨¨] ^
ReportDataSource
≠≠ 
top20DataSet
≠≠ )
=
≠≠* +
new
≠≠, /
ReportDataSource
≠≠0 @
(
≠≠@ A
$str
≠≠A O
,
≠≠O P
top20
≠≠Q V
)
≠≠V W
;
≠≠W X!
DefinirReportViewer
ØØ 
(
ØØ  
	rptviewer
ØØ  )
,
ØØ) *
new
ØØ+ .
List
ØØ/ 3
<
ØØ3 4
ReportDataSource
ØØ4 D
>
ØØD E
{
ØØF G
detallesDataSet
ØØH W
,
ØØW X
resumenDataSet
ØØY g
,
ØØg h
top20DataSet
ØØi u
}
ØØv w
)
ØØw x
;
ØØx y
ViewBag
∞∞ 
.
∞∞ 
ReportViewer
∞∞  
=
∞∞! "
	rptviewer
∞∞# ,
;
∞∞, -
return
±± 
View
±± 
(
±± 
$str
±± -
)
±±- .
;
±±. /
}
≤≤ 	
public
µµ 
async
µµ 
Task
µµ 
<
µµ 
ActionResult
µµ &
>
µµ& 'A
3VentasDetalladasPorConceptoCaracteristicasFormaPago
µµ( [
(
µµ[ \
string
µµ\ b
fechaInicio
µµc n
,
µµn o
string
µµp v
fechaFin
µµw 
,µµ Ä
[µµÅ Ç
SystemµµÇ à
.µµà â
Webµµâ å
.µµå ç
Httpµµç ë
.µµë í
FromUriµµí ô
]µµô ö
intµµõ û
[µµû ü
]µµü †"
idsCaracteristicasµµ° ≥
,µµ≥ ¥
intµµµ ∏
idPuntoVentaµµπ ≈
,µµ≈ ∆
stringµµ« Õ 
nombrePuntoVentaµµŒ ﬁ
)µµﬁ ﬂ
{
∂∂ 	 
idsCaracteristicas
∑∑ 
=
∑∑   
idsCaracteristicas
∑∑! 3
.
∑∑3 4
Where
∑∑4 9
(
∑∑9 :
i
∑∑: ;
=>
∑∑< >
i
∑∑? @
!=
∑∑A C
$num
∑∑D E
)
∑∑E F
.
∑∑F G
ToArray
∑∑G N
(
∑∑N O
)
∑∑O P
;
∑∑P Q
DateTime
∏∏ 

fechaDesde
∏∏ 
=
∏∏  !
DateTimeUtil
∏∏" .
.
∏∏. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
∏∏/ Z
(
∏∏Z [
fechaInicio
∏∏[ f
)
∏∏f g
;
∏∏g h
DateTime
ππ 

fechaHasta
ππ 
=
ππ  !
DateTimeUtil
ππ" .
.
ππ. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
ππ/ Z
(
ππZ [
fechaFin
ππ[ c
)
ππc d
;
ππd e
ReportParameter
∫∫ !
parametroFechaDesde
∫∫ /
=
∫∫0 1
new
∫∫2 5
ReportParameter
∫∫6 E
(
∫∫E F
$str
∫∫F R
,
∫∫R S

fechaDesde
∫∫T ^
.
∫∫^ _
ToString
∫∫_ g
(
∫∫g h
)
∫∫h i
)
∫∫i j
;
∫∫j k
ReportParameter
ªª !
parametroFechaHasta
ªª /
=
ªª0 1
new
ªª2 5
ReportParameter
ªª6 E
(
ªªE F
$str
ªªF R
,
ªªR S

fechaHasta
ªªT ^
.
ªª^ _
ToString
ªª_ g
(
ªªg h
)
ªªh i
)
ªªi j
;
ªªj k
ReportParameter
ºº +
parametroNombreCentroAtencion
ºº 9
=
ºº: ;
new
ºº< ?
ReportParameter
ºº@ O
(
ººO P
$str
ººP f
,
ººf g
nombrePuntoVenta
ººh x
)
ººx y
;
ººy z
ReportParameter
ΩΩ .
 parametroCantidadCaracteristicas
ΩΩ <
=
ΩΩ= >
new
ΩΩ? B
ReportParameter
ΩΩC R
(
ΩΩR S
$str
ΩΩS l
,
ΩΩl m!
idsCaracteristicasΩΩn Ä
.ΩΩÄ Å
LengthΩΩÅ á
.ΩΩá à
ToStringΩΩà ê
(ΩΩê ë
)ΩΩë í
)ΩΩí ì
;ΩΩì î
var
ææ 
caracteristicas
ææ 
=
ææ  !
await
ææ" '
maestroLogica
ææ( 5
.
ææ5 6*
ObtenerDetallesMaestrosAsync
ææ6 R
(
ææR S
MaestroSettings
ææS b
.
ææb c
Default
ææc j
.
ææj k.
IdMaestroCaracteristicaConceptoææk ä
)ææä ã
;ææã å
string
øø 
[
øø 
]
øø 
nombres
øø 
=
øø 
{
øø  
$str
øø! #
,
øø# $
$str
øø% '
,
øø' (
$str
øø) +
,
øø+ ,
$str
øø- /
,
øø/ 0
$str
øø1 3
,
øø3 4
$str
øø5 7
}
øø8 9
;
øø9 :
for
¿¿ 
(
¿¿ 
int
¿¿ 
i
¿¿ 
=
¿¿ 
$num
¿¿ 
;
¿¿ 
i
¿¿ 
<
¿¿  
idsCaracteristicas
¿¿  2
.
¿¿2 3
Take
¿¿3 7
(
¿¿7 8
$num
¿¿8 9
)
¿¿9 :
.
¿¿: ;
ToArray
¿¿; B
(
¿¿B C
)
¿¿C D
.
¿¿D E
Length
¿¿E K
;
¿¿K L
i
¿¿M N
++
¿¿N P
)
¿¿P Q
{
¡¡ 
nombres
¬¬ 
[
¬¬ 
i
¬¬ 
]
¬¬ 
=
¬¬ 
caracteristicas
¬¬ ,
.
¬¬, -
Single
¬¬- 3
(
¬¬3 4
c
¬¬4 5
=>
¬¬6 8
c
¬¬9 :
.
¬¬: ;
id
¬¬; =
==
¬¬> @ 
idsCaracteristicas
¬¬A S
[
¬¬S T
i
¬¬T U
]
¬¬U V
)
¬¬V W
.
¬¬W X
nombre
¬¬X ^
;
¬¬^ _
}
ƒƒ 
ReportParameter
≈≈ -
parametroNombresCaracteristicas
≈≈ ;
=
≈≈< =
new
≈≈> A
ReportParameter
≈≈B Q
(
≈≈Q R
$str
≈≈R j
,
≈≈j k
nombres
≈≈l s
)
≈≈s t
;
≈≈t u
var
«« 
	rptviewer
«« 
=
«« 
new
«« 
ReportViewer
««  ,
(
««, -
)
««- .
;
««. /
	rptviewer
»» 
.
»» 
LocalReport
»» !
.
»»! "

ReportPath
»»" ,
=
»»- .
Request
»»/ 6
.
»»6 7
MapPath
»»7 >
(
»»> ?
Request
»»? F
.
»»F G
ApplicationPath
»»G V
)
»»V W
+
»»X Y
$str»»Z ±
;»»± ≤
var
…… 
parametrosBasicos
…… !
=
……" #&
ObtenerParametrosBasicos
……$ <
(
……< =
)
……= >
;
……> ?
	rptviewer
   
.
   
LocalReport
   !
.
  ! "
SetParameters
  " /
(
  / 0
new
  0 3
ReportParameter
  4 C
[
  C D
]
  D E
{
  F G!
parametroFechaDesde
  H [
,
  [ \!
parametroFechaHasta
  ] p
,
  p q 
parametrosBasicos  r É
.  É Ñ

NombreSede  Ñ é
,  é è!
parametrosBasicos  ê °
.  ° ¢"
FechaActualSistema  ¢ ¥
,  ¥ µ!
parametrosBasicos  ∂ «
.  « »
LogoSede  » –
,  – —!
parametrosBasicos  “ „
.  „ ‰
Usuario  ‰ Î
,  Î Ï-
parametroNombreCentroAtencion  Ì ä
,  ä ã0
 parametroCantidadCaracteristicas  å ¨
,  ¨ ≠/
parametroNombresCaracteristicas  Æ Õ
}  Œ œ
)  œ –
;  – —
List
ÃÃ 
<
ÃÃ -
ItemDetalladoOperacionComercial
ÃÃ 0
>
ÃÃ0 1
detalles
ÃÃ2 :
=
ÃÃ; <
operacionLogica
ÃÃ= L
.
ÃÃL MH
9ObtenerVentasDetalladasPorConceptoCaracteristicasModoPagoÃÃM Ü
(ÃÃÜ á

fechaDesdeÃÃá ë
,ÃÃë í

fechaHastaÃÃì ù
,ÃÃù û
idPuntoVentaÃÃü ´
,ÃÃ´ ¨"
idsCaracteristicasÃÃ≠ ø
)ÃÃø ¿
.ÃÃ¿ ¡
OrderByÃÃ¡ »
(ÃÃ» …
dÃÃ…  
=>ÃÃÀ Õ
dÃÃŒ œ
.ÃÃœ –
FechaÃÃ– ’
)ÃÃ’ ÷
.ÃÃ÷ ◊
ToListÃÃ◊ ›
(ÃÃ› ﬁ
)ÃÃﬁ ﬂ
;ÃÃﬂ ‡
ReportDataSource
ŒŒ 
detallesDataSet
ŒŒ ,
=
ŒŒ- .
new
ŒŒ/ 2
ReportDataSource
ŒŒ3 C
(
ŒŒC D
$str
ŒŒD U
,
ŒŒU V
detalles
ŒŒW _
)
ŒŒ_ `
;
ŒŒ` a!
DefinirReportViewer
–– 
(
––  
	rptviewer
––  )
,
––) *
new
––+ .
List
––/ 3
<
––3 4
ReportDataSource
––4 D
>
––D E
{
––F G
detallesDataSet
––H W
}
––X Y
)
––Y Z
;
––Z [
ViewBag
—— 
.
—— 
ReportViewer
——  
=
——! "
	rptviewer
——# ,
;
——, -
return
““ 
View
““ 
(
““ 
$str
““ -
)
““- .
;
““. /
}
”” 	
public
‘‘ 

JsonResult
‘‘ ,
VentasPorFamiliaCaracteristica
‘‘ 8
(
‘‘8 9
string
‘‘9 ?
fechaInicio
‘‘@ K
,
‘‘K L
string
‘‘M S
fechaFin
‘‘T \
,
‘‘\ ]
[
‘‘^ _
System
‘‘_ e
.
‘‘e f
Web
‘‘f i
.
‘‘i j
Http
‘‘j n
.
‘‘n o
FromUri
‘‘o v
]
‘‘v w
int
‘‘x {
[
‘‘{ |
]
‘‘| }!
idsCentrosAtencion‘‘~ ê
,‘‘ê ë
string‘‘í ò&
nombresCentrosAtencion‘‘ô Ø
,‘‘Ø ∞
int‘‘± ¥
	idFamilia‘‘µ æ
,‘‘æ ø
string‘‘¿ ∆
nombreFamilia‘‘« ‘
,‘‘‘ ’
int‘‘÷ Ÿ 
idCaracteristica‘‘⁄ Í
,‘‘Í Î
string‘‘Ï Ú$
nombreCaracteristica‘‘Û á
,‘‘á à
int‘‘â å%
idValorCaracteristica‘‘ç ¢
,‘‘¢ £
string‘‘§ ™)
nombreValorCaracteristica‘‘´ ƒ
)‘‘ƒ ≈
{
’’ 	
DateTime
÷÷ 

fechaDesde
÷÷ 
=
÷÷  !
DateTimeUtil
÷÷" .
.
÷÷. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
÷÷/ Z
(
÷÷Z [
fechaInicio
÷÷[ f
)
÷÷f g
;
÷÷g h
DateTime
◊◊ 

fechaHasta
◊◊ 
=
◊◊  !
DateTimeUtil
◊◊" .
.
◊◊. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
◊◊/ Z
(
◊◊Z [
fechaFin
◊◊[ c
)
◊◊c d
;
◊◊d e
ReportParameter
ÿÿ !
parametroFechaDesde
ÿÿ /
=
ÿÿ0 1
new
ÿÿ2 5
ReportParameter
ÿÿ6 E
(
ÿÿE F
$str
ÿÿF R
,
ÿÿR S

fechaDesde
ÿÿT ^
.
ÿÿ^ _
ToString
ÿÿ_ g
(
ÿÿg h
)
ÿÿh i
)
ÿÿi j
;
ÿÿj k
ReportParameter
ŸŸ !
parametroFechaHasta
ŸŸ /
=
ŸŸ0 1
new
ŸŸ2 5
ReportParameter
ŸŸ6 E
(
ŸŸE F
$str
ŸŸF R
,
ŸŸR S

fechaHasta
ŸŸT ^
.
ŸŸ^ _
ToString
ŸŸ_ g
(
ŸŸg h
)
ŸŸh i
)
ŸŸi j
;
ŸŸj k
ReportParameter
⁄⁄ "
nombreCentroAtencion
⁄⁄ 0
=
⁄⁄1 2
new
⁄⁄3 6
ReportParameter
⁄⁄7 F
(
⁄⁄F G
$str
⁄⁄G T
,
⁄⁄T U$
nombresCentrosAtencion
⁄⁄V l
)
⁄⁄l m
;
⁄⁄m n
ReportParameter
€€ $
parametroNombreFamilia
€€ 2
=
€€3 4
new
€€5 8
ReportParameter
€€9 H
(
€€H I
$str
€€I R
,
€€R S
nombreFamilia
€€T a
)
€€a b
;
€€b c
ReportParameter
‹‹ +
parametroNombreCaracteristica
‹‹ 9
=
‹‹: ;
new
‹‹< ?
ReportParameter
‹‹@ O
(
‹‹O P
$str
‹‹P `
,
‹‹` a"
nombreCaracteristica
‹‹b v
)
‹‹v w
;
‹‹w x
ReportParameter
›› 0
"parametroNombreValorCaracteristica
›› >
=
››? @
new
››A D
ReportParameter
››E T
(
››T U
$str
››U j
,
››j k(
nombreValorCaracteristica››l Ö
)››Ö Ü
;››Ü á
var
ﬁﬁ 
	rptviewer
ﬁﬁ 
=
ﬁﬁ 
new
ﬁﬁ 
ReportViewer
ﬁﬁ  ,
(
ﬁﬁ, -
)
ﬁﬁ- .
;
ﬁﬁ. /
	rptviewer
ﬂﬂ 
.
ﬂﬂ 
LocalReport
ﬂﬂ !
.
ﬂﬂ! "

ReportPath
ﬂﬂ" ,
=
ﬂﬂ- .
Request
ﬂﬂ/ 6
.
ﬂﬂ6 7
MapPath
ﬂﬂ7 >
(
ﬂﬂ> ?
Request
ﬂﬂ? F
.
ﬂﬂF G
ApplicationPath
ﬂﬂG V
)
ﬂﬂV W
+
ﬂﬂX Y
$strﬂﬂZ £
;ﬂﬂ£ §
	rptviewer
‡‡ 
.
‡‡ 
LocalReport
‡‡ !
.
‡‡! "
SetParameters
‡‡" /
(
‡‡/ 0
new
‡‡0 3
ReportParameter
‡‡4 C
[
‡‡C D
]
‡‡D E
{
‡‡F G!
parametroFechaDesde
‡‡H [
,
‡‡[ \!
parametroFechaHasta
‡‡] p
,
‡‡p q#
nombreCentroAtencion‡‡r Ü
,‡‡Ü á&
parametroNombreFamilia‡‡à û
,‡‡û ü-
parametroNombreCaracteristica‡‡† Ω
,‡‡Ω æ2
"parametroNombreValorCaracteristica‡‡ø ·
}‡‡‚ „
)‡‡„ ‰
;‡‡‰ Â
List
‚‚ 
<
‚‚ "
VentaConceptoCliente
‚‚ %
>
‚‚% &
detalles
‚‚' /
=
‚‚0 1
operacionLogica
‚‚2 A
.
‚‚A B3
%ObtenerVentasPorFamiliaCaracteristica
‚‚B g
(
‚‚g h

fechaDesde
‚‚h r
,
‚‚r s

fechaHasta
‚‚t ~
,
‚‚~ "
idsCentrosAtencion‚‚Ä í
,‚‚í ì
	idFamilia‚‚î ù
,‚‚ù û 
idCaracteristica‚‚ü Ø
,‚‚Ø ∞%
idValorCaracteristica‚‚± ∆
)‚‚∆ «
;‚‚« »
ReportDataSource
„„ 
detallesDataSet
„„ ,
=
„„- .
new
„„/ 2
ReportDataSource
„„3 C
(
„„C D
$str
„„D r
,
„„r s
detalles
„„t |
)
„„| }
;
„„} ~!
DefinirReportViewer
ÂÂ 
(
ÂÂ  
	rptviewer
ÂÂ  )
,
ÂÂ) *
new
ÂÂ+ .
List
ÂÂ/ 3
<
ÂÂ3 4
ReportDataSource
ÂÂ4 D
>
ÂÂD E
{
ÂÂF G
detallesDataSet
ÂÂH W
}
ÂÂX Y
)
ÂÂY Z
;
ÂÂZ [
return
ÊÊ  
DescargarDocumento
ÊÊ %
(
ÊÊ% &
	rptviewer
ÊÊ& /
,
ÊÊ/ 0
$str
ÊÊ1 Z
)
ÊÊZ [
;
ÊÊ[ \
}
ÁÁ 	
public
ËË 

JsonResult
ËË *
VentasPorValorCaracteristica
ËË 6
(
ËË6 7
string
ËË7 =
fechaInicio
ËË> I
,
ËËI J
string
ËËK Q
fechaFin
ËËR Z
,
ËËZ [
[
ËË\ ]
System
ËË] c
.
ËËc d
Web
ËËd g
.
ËËg h
Http
ËËh l
.
ËËl m
FromUri
ËËm t
]
ËËt u
int
ËËv y
[
ËËy z
]
ËËz {!
idsCentrosAtencionËË| é
,ËËé è
stringËËê ñ&
nombresCentrosAtencionËËó ≠
,ËË≠ Æ
intËËØ ≤ 
idCaracteristicaËË≥ √
,ËË√ ƒ
stringËË≈ À$
nombreCaracteristicaËËÃ ‡
,ËË‡ ·
intËË‚ Â%
idValorCaracteristicaËËÊ ˚
,ËË˚ ¸
stringËË˝ É)
nombreValorCaracteristicaËËÑ ù
)ËËù û
{
ÈÈ 	
DateTime
ÍÍ 

fechaDesde
ÍÍ 
=
ÍÍ  !
DateTimeUtil
ÍÍ" .
.
ÍÍ. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ÍÍ/ Z
(
ÍÍZ [
fechaInicio
ÍÍ[ f
)
ÍÍf g
;
ÍÍg h
DateTime
ÎÎ 

fechaHasta
ÎÎ 
=
ÎÎ  !
DateTimeUtil
ÎÎ" .
.
ÎÎ. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
ÎÎ/ Z
(
ÎÎZ [
fechaFin
ÎÎ[ c
)
ÎÎc d
;
ÎÎd e
ReportParameter
ÏÏ !
parametroFechaDesde
ÏÏ /
=
ÏÏ0 1
new
ÏÏ2 5
ReportParameter
ÏÏ6 E
(
ÏÏE F
$str
ÏÏF R
,
ÏÏR S

fechaDesde
ÏÏT ^
.
ÏÏ^ _
ToString
ÏÏ_ g
(
ÏÏg h
)
ÏÏh i
)
ÏÏi j
;
ÏÏj k
ReportParameter
ÌÌ !
parametroFechaHasta
ÌÌ /
=
ÌÌ0 1
new
ÌÌ2 5
ReportParameter
ÌÌ6 E
(
ÌÌE F
$str
ÌÌF R
,
ÌÌR S

fechaHasta
ÌÌT ^
.
ÌÌ^ _
ToString
ÌÌ_ g
(
ÌÌg h
)
ÌÌh i
)
ÌÌi j
;
ÌÌj k
ReportParameter
ÓÓ "
nombreCentroAtencion
ÓÓ 0
=
ÓÓ1 2
new
ÓÓ3 6
ReportParameter
ÓÓ7 F
(
ÓÓF G
$str
ÓÓG T
,
ÓÓT U$
nombresCentrosAtencion
ÓÓV l
)
ÓÓl m
;
ÓÓm n
ReportParameter
ÔÔ +
parametroNombreCaracteristica
ÔÔ 9
=
ÔÔ: ;
new
ÔÔ< ?
ReportParameter
ÔÔ@ O
(
ÔÔO P
$str
ÔÔP `
,
ÔÔ` a"
nombreCaracteristica
ÔÔb v
)
ÔÔv w
;
ÔÔw x
ReportParameter
 0
"parametroNombreValorCaracteristica
 >
=
? @
new
A D
ReportParameter
E T
(
T U
$str
U j
,
j k(
nombreValorCaracteristical Ö
)Ö Ü
;Ü á
var
ÒÒ 
	rptviewer
ÒÒ 
=
ÒÒ 
new
ÒÒ 
ReportViewer
ÒÒ  ,
(
ÒÒ, -
)
ÒÒ- .
;
ÒÒ. /
	rptviewer
ÚÚ 
.
ÚÚ 
LocalReport
ÚÚ !
.
ÚÚ! "

ReportPath
ÚÚ" ,
=
ÚÚ- .
Request
ÚÚ/ 6
.
ÚÚ6 7
MapPath
ÚÚ7 >
(
ÚÚ> ?
Request
ÚÚ? F
.
ÚÚF G
ApplicationPath
ÚÚG V
)
ÚÚV W
+
ÚÚX Y
$strÚÚZ ú
;ÚÚú ù
var
ÛÛ 
parametrosBasicos
ÛÛ !
=
ÛÛ" #&
ObtenerParametrosBasicos
ÛÛ$ <
(
ÛÛ< =
)
ÛÛ= >
;
ÛÛ> ?
	rptviewer
ÙÙ 
.
ÙÙ 
LocalReport
ÙÙ !
.
ÙÙ! "
SetParameters
ÙÙ" /
(
ÙÙ/ 0
new
ÙÙ0 3
ReportParameter
ÙÙ4 C
[
ÙÙC D
]
ÙÙD E
{
ÙÙF G!
parametroFechaDesde
ÙÙH [
,
ÙÙ[ \!
parametroFechaHasta
ÙÙ] p
,
ÙÙp q$
nombreCentroAtencionÙÙ˘ ç
,ÙÙç é-
parametroNombreCaracteristicaÙÙè ¨
,ÙÙ¨ ≠2
"parametroNombreValorCaracteristicaÙÙÆ –
}ÙÙ— “
)ÙÙ“ ”
;ÙÙ” ‘
List
ˆˆ 
<
ˆˆ "
VentaConceptoCliente
ˆˆ %
>
ˆˆ% &
detalles
ˆˆ' /
=
ˆˆ0 1
operacionLogica
ˆˆ2 A
.
ˆˆA B,
ObtenerVentasPorCaracteristica
ˆˆB `
(
ˆˆ` a

fechaDesde
ˆˆa k
,
ˆˆk l

fechaHasta
ˆˆm w
,
ˆˆw x!
idsCentrosAtencionˆˆy ã
,ˆˆã å 
idCaracteristicaˆˆç ù
,ˆˆù û%
idValorCaracteristicaˆˆü ¥
)ˆˆ¥ µ
;ˆˆµ ∂
ReportDataSource
˜˜ 
detallesDataSet
˜˜ ,
=
˜˜- .
new
˜˜/ 2
ReportDataSource
˜˜3 C
(
˜˜C D
$str
˜˜D k
,
˜˜k l
detalles
˜˜m u
)
˜˜u v
;
˜˜v w!
DefinirReportViewer
˘˘ 
(
˘˘  
	rptviewer
˘˘  )
,
˘˘) *
new
˘˘+ .
List
˘˘/ 3
<
˘˘3 4
ReportDataSource
˘˘4 D
>
˘˘D E
{
˘˘F G
detallesDataSet
˘˘H W
}
˘˘X Y
)
˘˘Y Z
;
˘˘Z [
return
˙˙  
DescargarDocumento
˙˙ %
(
˙˙% &
	rptviewer
˙˙& /
,
˙˙/ 0
$str
˙˙1 S
)
˙˙S T
;
˙˙T U
}
˚˚ 	
public
¸¸ 

JsonResult
¸¸ 
VentasPorConcepto
¸¸ +
(
¸¸+ ,
string
¸¸, 2
fechaInicio
¸¸3 >
,
¸¸> ?
string
¸¸@ F
fechaFin
¸¸G O
,
¸¸O P
[
¸¸Q R
System
¸¸R X
.
¸¸X Y
Web
¸¸Y \
.
¸¸\ ]
Http
¸¸] a
.
¸¸a b
FromUri
¸¸b i
]
¸¸i j
int
¸¸k n
[
¸¸n o
]
¸¸o p!
idsCentrosAtencion¸¸q É
,¸¸É Ñ
string¸¸Ö ã&
nombresCentrosAtencion¸¸å ¢
,¸¸¢ £
int¸¸§ ß

idConcepto¸¸® ≤
,¸¸≤ ≥
string¸¸¥ ∫
nombreConcepto¸¸ª …
)¸¸…  
{
˝˝ 	
DateTime
˛˛ 

fechaDesde
˛˛ 
=
˛˛  !
DateTimeUtil
˛˛" .
.
˛˛. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
˛˛/ Z
(
˛˛Z [
fechaInicio
˛˛[ f
)
˛˛f g
;
˛˛g h
DateTime
ˇˇ 

fechaHasta
ˇˇ 
=
ˇˇ  !
DateTimeUtil
ˇˇ" .
.
ˇˇ. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
ˇˇ/ Z
(
ˇˇZ [
fechaFin
ˇˇ[ c
)
ˇˇc d
;
ˇˇd e
ReportParameter
ÄÄ !
parametroFechaDesde
ÄÄ /
=
ÄÄ0 1
new
ÄÄ2 5
ReportParameter
ÄÄ6 E
(
ÄÄE F
$str
ÄÄF R
,
ÄÄR S

fechaDesde
ÄÄT ^
.
ÄÄ^ _
ToString
ÄÄ_ g
(
ÄÄg h
)
ÄÄh i
)
ÄÄi j
;
ÄÄj k
ReportParameter
ÅÅ !
parametroFechaHasta
ÅÅ /
=
ÅÅ0 1
new
ÅÅ2 5
ReportParameter
ÅÅ6 E
(
ÅÅE F
$str
ÅÅF R
,
ÅÅR S

fechaHasta
ÅÅT ^
.
ÅÅ^ _
ToString
ÅÅ_ g
(
ÅÅg h
)
ÅÅh i
)
ÅÅi j
;
ÅÅj k
ReportParameter
ÇÇ "
nombreCentroAtencion
ÇÇ 0
=
ÇÇ1 2
new
ÇÇ3 6
ReportParameter
ÇÇ7 F
(
ÇÇF G
$str
ÇÇG T
,
ÇÇT U$
nombresCentrosAtencion
ÇÇV l
)
ÇÇl m
;
ÇÇm n
ReportParameter
ÉÉ %
parametroNombreConcepto
ÉÉ 3
=
ÉÉ4 5
new
ÉÉ6 9
ReportParameter
ÉÉ: I
(
ÉÉI J
$str
ÉÉJ T
,
ÉÉT U
nombreConcepto
ÉÉV d
)
ÉÉd e
;
ÉÉe f
var
ÑÑ 
	rptviewer
ÑÑ 
=
ÑÑ 
new
ÑÑ 
ReportViewer
ÑÑ  ,
(
ÑÑ, -
)
ÑÑ- .
;
ÑÑ. /
	rptviewer
ÖÖ 
.
ÖÖ 
LocalReport
ÖÖ !
.
ÖÖ! "

ReportPath
ÖÖ" ,
=
ÖÖ- .
Request
ÖÖ/ 6
.
ÖÖ6 7
MapPath
ÖÖ7 >
(
ÖÖ> ?
Request
ÖÖ? F
.
ÖÖF G
ApplicationPath
ÖÖG V
)
ÖÖV W
+
ÖÖX Y
$strÖÖZ ñ
;ÖÖñ ó
var
ÜÜ 
parametrosBasicos
ÜÜ !
=
ÜÜ" #&
ObtenerParametrosBasicos
ÜÜ$ <
(
ÜÜ< =
)
ÜÜ= >
;
ÜÜ> ?
	rptviewer
áá 
.
áá 
LocalReport
áá !
.
áá! "
SetParameters
áá" /
(
áá/ 0
new
áá0 3
ReportParameter
áá4 C
[
ááC D
]
ááD E
{
ááF G!
parametroFechaDesde
ááH [
,
áá[ \!
parametroFechaHasta
áá] p
,
ááp q$
nombreCentroAtencionáá˘ ç
,ááç é'
parametroNombreConceptoááè ¶
}ááß ®
)áá® ©
;áá© ™
List
ââ 
<
ââ "
VentaConceptoCliente
ââ %
>
ââ% &
detalles
ââ' /
=
ââ0 1
operacionLogica
ââ2 A
.
ââA B&
ObtenerVentasPorConcepto
ââB Z
(
ââZ [

fechaDesde
ââ[ e
,
ââe f

fechaHasta
ââg q
,
ââq r!
idsCentrosAtencionââs Ö
,ââÖ Ü

idConceptoââá ë
)ââë í
;ââí ì
ReportDataSource
ää 
detallesDataSet
ää ,
=
ää- .
new
ää/ 2
ReportDataSource
ää3 C
(
ääC D
$str
ääD e
,
ääe f
detalles
ääg o
)
ääo p
;
ääp q!
DefinirReportViewer
åå 
(
åå  
	rptviewer
åå  )
,
åå) *
new
åå+ .
List
åå/ 3
<
åå3 4
ReportDataSource
åå4 D
>
ååD E
{
ååF G
detallesDataSet
ååH W
}
ååX Y
)
ååY Z
;
ååZ [
return
çç  
DescargarDocumento
çç %
(
çç% &
	rptviewer
çç& /
,
çç/ 0
$str
çç1 M
)
ççM N
;
ççN O
}
èè 	
public
ëë 
ActionResult
ëë )
InvalidacionesAdministrador
ëë 7
(
ëë7 8
string
ëë8 >
fechaInicio
ëë? J
,
ëëJ K
string
ëëL R
fechaFin
ëëS [
,
ëë[ \
int
ëë] `
idPuntoVenta
ëëb n
,
ëën o
string
ëëp v
nombrePuntoVentaëëw á
)ëëá à
{
íí 	
DateTime
ìì 

fechaDesde
ìì 
=
ìì  !
DateTimeUtil
ìì" .
.
ìì. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ìì/ Z
(
ììZ [
fechaInicio
ìì[ f
)
ììf g
;
ììg h
DateTime
îî 

fechaHasta
îî 
=
îî  !
DateTimeUtil
îî" .
.
îî. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
îî/ Z
(
îîZ [
fechaFin
îî[ c
)
îîc d
;
îîd e
ReportParameter
ïï !
parametroFechaDesde
ïï /
=
ïï0 1
new
ïï2 5
ReportParameter
ïï6 E
(
ïïE F
$str
ïïF R
,
ïïR S

fechaDesde
ïïT ^
.
ïï^ _
ToString
ïï_ g
(
ïïg h
)
ïïh i
)
ïïi j
;
ïïj k
ReportParameter
ññ !
parametroFechaHasta
ññ /
=
ññ0 1
new
ññ2 5
ReportParameter
ññ6 E
(
ññE F
$str
ññF R
,
ññR S

fechaHasta
ññT ^
.
ññ^ _
ToString
ññ_ g
(
ññg h
)
ññh i
)
ññi j
;
ññj k
ReportParameter
óó +
parametroNombreCentroAtencion
óó 9
=
óó: ;
new
óó< ?
ReportParameter
óó@ O
(
óóO P
$str
óóP f
,
óóf g
nombrePuntoVenta
óóh x
)
óóx y
;
óóy z
var
ôô 
	rptviewer
ôô 
=
ôô 
new
ôô 
ReportViewer
ôô  ,
(
ôô, -
)
ôô- .
;
ôô. /
	rptviewer
öö 
.
öö 
LocalReport
öö !
.
öö! "

ReportPath
öö" ,
=
öö- .
Request
öö/ 6
.
öö6 7
MapPath
öö7 >
(
öö> ?
Request
öö? F
.
ööF G
ApplicationPath
ööG V
)
ööV W
+
ööX Y
$strööZ ç
;ööç é
var
õõ 
parametrosBasicos
õõ !
=
õõ" #&
ObtenerParametrosBasicos
õõ$ <
(
õõ< =
)
õõ= >
;
õõ> ?
	rptviewer
úú 
.
úú 
LocalReport
úú !
.
úú! "
SetParameters
úú" /
(
úú/ 0
new
úú0 3
ReportParameter
úú4 C
[
úúC D
]
úúD E
{
úúF G!
parametroFechaDesde
úúH [
,
úú[ \!
parametroFechaHasta
úú] p
,
úúp q 
parametrosBasicosúúr É
.úúÉ Ñ

NombreSedeúúÑ é
,úúé è!
parametrosBasicosúúê °
.úú° ¢"
FechaActualSistemaúú¢ ¥
,úú¥ µ!
parametrosBasicosúú∂ «
.úú« »
LogoSedeúú» –
,úú– —!
parametrosBasicosúú“ „
.úú„ ‰
Usuarioúú‰ Î
,úúÎ Ï-
parametroNombreCentroAtencionúúÌ ä
}úúã å
)úúå ç
;úúç é
List
ûû 
<
ûû )
ResumenDeTransaccionGeneral
ûû ,
>
ûû, -
detalles
ûû. 6
=
ûû7 8
operacionLogica
ûû9 H
.
ûûH I7
)ObtenerInvalidacionesDeOperacionesDeVenta
ûûI r
(
ûûr s

fechaDesde
ûûs }
,
ûû} ~

fechaHastaûû â
,ûûâ ä
idPuntoVentaûûã ó
)ûûó ò
;ûûò ô
ReportDataSource
üü 
detallesDataSet
üü ,
=
üü- .
new
üü/ 2
ReportDataSource
üü3 C
(
üüC D
$str
üüD [
,
üü[ \
detalles
üü] e
)
üüe f
;
üüf g!
DefinirReportViewer
°° 
(
°°  
	rptviewer
°°  )
,
°°) *
new
°°+ .
List
°°/ 3
<
°°3 4
ReportDataSource
°°4 D
>
°°D E
{
°°F G
detallesDataSet
°°H W
}
°°X Y
)
°°Y Z
;
°°Z [
ViewBag
¢¢ 
.
¢¢ 
ReportViewer
¢¢  
=
¢¢! "
	rptviewer
¢¢# ,
;
¢¢, -
return
££ 
View
££ 
(
££ 
$str
££ -
)
££- .
;
££. /
}
•• 	
public
ßß 
ActionResult
ßß $
InvalidacionesVendedor
ßß 2
(
ßß2 3
string
ßß3 9
fechaInicio
ßß: E
,
ßßE F
string
ßßG M
fechaFin
ßßN V
)
ßßV W
{
®® 	
DateTime
©© 

fechaDesde
©© 
=
©©  !
DateTimeUtil
©©" .
.
©©. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
©©/ Z
(
©©Z [
fechaInicio
©©[ f
)
©©f g
;
©©g h
DateTime
™™ 

fechaHasta
™™ 
=
™™  !
DateTimeUtil
™™" .
.
™™. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
™™/ Z
(
™™Z [
fechaFin
™™[ c
)
™™c d
;
™™d e
ReportParameter
´´ !
parametroFechaDesde
´´ /
=
´´0 1
new
´´2 5
ReportParameter
´´6 E
(
´´E F
$str
´´F R
,
´´R S

fechaDesde
´´T ^
.
´´^ _
ToString
´´_ g
(
´´g h
)
´´h i
)
´´i j
;
´´j k
ReportParameter
¨¨ !
parametroFechaHasta
¨¨ /
=
¨¨0 1
new
¨¨2 5
ReportParameter
¨¨6 E
(
¨¨E F
$str
¨¨F R
,
¨¨R S

fechaHasta
¨¨T ^
.
¨¨^ _
ToString
¨¨_ g
(
¨¨g h
)
¨¨h i
)
¨¨i j
;
¨¨j k
ReportParameter
≠≠ +
parametroNombreCentroAtencion
≠≠ 9
=
≠≠: ;
new
≠≠< ?
ReportParameter
≠≠@ O
(
≠≠O P
$str
≠≠P f
,
≠≠f g
ProfileData
≠≠h s
(
≠≠s t
)
≠≠t u
.
≠≠u v1
"NombreCentroDeAtencionSeleccionado≠≠v ò
)≠≠ò ô
;≠≠ô ö
var
∞∞ 
	rptviewer
∞∞ 
=
∞∞ 
new
∞∞ 
ReportViewer
∞∞  ,
(
∞∞, -
)
∞∞- .
;
∞∞. /
	rptviewer
±± 
.
±± 
LocalReport
±± !
.
±±! "

ReportPath
±±" ,
=
±±- .
Request
±±/ 6
.
±±6 7
MapPath
±±7 >
(
±±> ?
Request
±±? F
.
±±F G
ApplicationPath
±±G V
)
±±V W
+
±±X Y
$str±±Z ç
;±±ç é
var
≤≤ 
parametrosBasicos
≤≤ !
=
≤≤" #&
ObtenerParametrosBasicos
≤≤$ <
(
≤≤< =
)
≤≤= >
;
≤≤> ?
	rptviewer
≥≥ 
.
≥≥ 
LocalReport
≥≥ !
.
≥≥! "
SetParameters
≥≥" /
(
≥≥/ 0
new
≥≥0 3
ReportParameter
≥≥4 C
[
≥≥C D
]
≥≥D E
{
≥≥F G!
parametroFechaDesde
≥≥H [
,
≥≥[ \!
parametroFechaHasta
≥≥] p
,
≥≥p q 
parametrosBasicos≥≥r É
.≥≥É Ñ

NombreSede≥≥Ñ é
,≥≥é è!
parametrosBasicos≥≥ê °
.≥≥° ¢"
FechaActualSistema≥≥¢ ¥
,≥≥¥ µ!
parametrosBasicos≥≥∂ «
.≥≥« »
LogoSede≥≥» –
,≥≥– —!
parametrosBasicos≥≥“ „
.≥≥„ ‰
Usuario≥≥‰ Î
,≥≥Î Ï-
parametroNombreCentroAtencion≥≥Ì ä
}≥≥ã å
)≥≥å ç
;≥≥ç é
List
µµ 
<
µµ )
ResumenDeTransaccionGeneral
µµ ,
>
µµ, -
detalles
µµ. 6
=
µµ7 8
operacionLogica
µµ9 H
.
µµH I7
)ObtenerInvalidacionesDeOperacionesDeVenta
µµI r
(
µµr s

fechaDesde
µµs }
,
µµ} ~

fechaHastaµµ â
,µµâ ä
ProfileDataµµã ñ
(µµñ ó
)µµó ò
.µµò ô.
IdCentroDeAtencionSeleccionadoµµô ∑
)µµ∑ ∏
;µµ∏ π
ReportDataSource
∂∂ 
detallesDataSet
∂∂ ,
=
∂∂- .
new
∂∂/ 2
ReportDataSource
∂∂3 C
(
∂∂C D
$str
∂∂D [
,
∂∂[ \
detalles
∂∂] e
)
∂∂e f
;
∂∂f g!
DefinirReportViewer
∏∏ 
(
∏∏  
	rptviewer
∏∏  )
,
∏∏) *
new
∏∏+ .
List
∏∏/ 3
<
∏∏3 4
ReportDataSource
∏∏4 D
>
∏∏D E
{
∏∏F G
detallesDataSet
∏∏H W
}
∏∏X Y
)
∏∏Y Z
;
∏∏Z [
ViewBag
ππ 
.
ππ 
ReportViewer
ππ  
=
ππ! "
	rptviewer
ππ# ,
;
ππ, -
return
∫∫ 
View
∫∫ 
(
∫∫ 
$str
∫∫ -
)
∫∫- .
;
∫∫. /
}
ªª 	
public
ææ 
ActionResult
ææ 
NotasCredito
ææ (
(
ææ( )
string
ææ) /
fechaInicio
ææ0 ;
,
ææ; <
string
ææ= C
fechaFin
ææD L
,
ææL M
int
ææN Q
idPuntoVenta
ææR ^
,
ææ^ _
string
ææ` f
nombrePuntoVenta
ææg w
)
ææw x
{
øø 	
DateTime
¿¿ 

fechaDesde
¿¿ 
=
¿¿  !
DateTimeUtil
¿¿" .
.
¿¿. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
¿¿/ Z
(
¿¿Z [
fechaInicio
¿¿[ f
)
¿¿f g
;
¿¿g h
DateTime
¡¡ 

fechaHasta
¡¡ 
=
¡¡  !
DateTimeUtil
¡¡" .
.
¡¡. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
¡¡/ Z
(
¡¡Z [
fechaFin
¡¡[ c
)
¡¡c d
;
¡¡d e
ReportParameter
¬¬ !
parametroFechaDesde
¬¬ /
=
¬¬0 1
new
¬¬2 5
ReportParameter
¬¬6 E
(
¬¬E F
$str
¬¬F R
,
¬¬R S

fechaDesde
¬¬T ^
.
¬¬^ _
ToString
¬¬_ g
(
¬¬g h
)
¬¬h i
)
¬¬i j
;
¬¬j k
ReportParameter
√√ !
parametroFechaHasta
√√ /
=
√√0 1
new
√√2 5
ReportParameter
√√6 E
(
√√E F
$str
√√F R
,
√√R S

fechaHasta
√√T ^
.
√√^ _
ToString
√√_ g
(
√√g h
)
√√h i
)
√√i j
;
√√j k
ReportParameter
ƒƒ +
parametroNombreCentroAtencion
ƒƒ 9
=
ƒƒ: ;
new
ƒƒ< ?
ReportParameter
ƒƒ@ O
(
ƒƒO P
$str
ƒƒP f
,
ƒƒf g
nombrePuntoVenta
ƒƒh x
)
ƒƒx y
;
ƒƒy z
var
∆∆ 
	rptviewer
∆∆ 
=
∆∆ 
new
∆∆ 
ReportViewer
∆∆  ,
(
∆∆, -
)
∆∆- .
;
∆∆. /
	rptviewer
«« 
.
«« 
LocalReport
«« !
.
««! "

ReportPath
««" ,
=
««- .
Request
««/ 6
.
««6 7
MapPath
««7 >
(
««> ?
Request
««? F
.
««F G
ApplicationPath
««G V
)
««V W
+
««X Y
$str««Z ã
;««ã å
var
»» 
parametrosBasicos
»» !
=
»»" #&
ObtenerParametrosBasicos
»»$ <
(
»»< =
)
»»= >
;
»»> ?
	rptviewer
…… 
.
…… 
LocalReport
…… !
.
……! "
SetParameters
……" /
(
……/ 0
new
……0 3
ReportParameter
……4 C
[
……C D
]
……D E
{
……F G!
parametroFechaDesde
……H [
,
……[ \!
parametroFechaHasta
……] p
,
……p q 
parametrosBasicos……r É
.……É Ñ

NombreSede……Ñ é
,……é è!
parametrosBasicos……ê °
.……° ¢"
FechaActualSistema……¢ ¥
,……¥ µ!
parametrosBasicos……∂ «
.……« »
LogoSede……» –
,……– —!
parametrosBasicos……“ „
.……„ ‰
Usuario……‰ Î
,……Î Ï-
parametroNombreCentroAtencion……Ì ä
}……ã å
)……å ç
;……ç é
List
ÀÀ 
<
ÀÀ )
ResumenDeTransaccionGeneral
ÀÀ ,
>
ÀÀ, -
detalles
ÀÀ. 6
=
ÀÀ7 8
operacionLogica
ÀÀ9 H
.
ÀÀH I5
'ObtenerNotasCreditoDeOperacionesDeVenta
ÀÀI p
(
ÀÀp q

fechaDesde
ÀÀq {
,
ÀÀ{ |

fechaHastaÀÀ} á
,ÀÀá à
idPuntoVentaÀÀâ ï
)ÀÀï ñ
;ÀÀñ ó
ReportDataSource
ÃÃ 
detallesDataSet
ÃÃ ,
=
ÃÃ- .
new
ÃÃ/ 2
ReportDataSource
ÃÃ3 C
(
ÃÃC D
$str
ÃÃD Y
,
ÃÃY Z
detalles
ÃÃ[ c
)
ÃÃc d
;
ÃÃd e!
DefinirReportViewer
ŒŒ 
(
ŒŒ  
	rptviewer
ŒŒ  )
,
ŒŒ) *
new
ŒŒ+ .
List
ŒŒ/ 3
<
ŒŒ3 4
ReportDataSource
ŒŒ4 D
>
ŒŒD E
{
ŒŒF G
detallesDataSet
ŒŒH W
}
ŒŒX Y
)
ŒŒY Z
;
ŒŒZ [
ViewBag
œœ 
.
œœ 
ReportViewer
œœ  
=
œœ! "
	rptviewer
œœ# ,
;
œœ, -
return
–– 
View
–– 
(
–– 
$str
–– -
)
––- .
;
––. /
}
““ 	
public
‘‘ 
ActionResult
‘‘ 
NotasDebito
‘‘ '
(
‘‘' (
string
‘‘( .
fechaInicio
‘‘/ :
,
‘‘: ;
string
‘‘< B
fechaFin
‘‘C K
,
‘‘K L
int
‘‘M P
idPuntoVenta
‘‘Q ]
,
‘‘] ^
string
‘‘_ e
nombrePuntoVenta
‘‘f v
)
‘‘v w
{
’’ 	
DateTime
÷÷ 

fechaDesde
÷÷ 
=
÷÷  !
DateTimeUtil
÷÷" .
.
÷÷. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
÷÷/ Z
(
÷÷Z [
fechaInicio
÷÷[ f
)
÷÷f g
;
÷÷g h
DateTime
◊◊ 

fechaHasta
◊◊ 
=
◊◊  !
DateTimeUtil
◊◊" .
.
◊◊. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
◊◊/ Z
(
◊◊Z [
fechaFin
◊◊[ c
)
◊◊c d
;
◊◊d e
ReportParameter
ÿÿ !
parametroFechaDesde
ÿÿ /
=
ÿÿ0 1
new
ÿÿ2 5
ReportParameter
ÿÿ6 E
(
ÿÿE F
$str
ÿÿF R
,
ÿÿR S

fechaDesde
ÿÿT ^
.
ÿÿ^ _
ToString
ÿÿ_ g
(
ÿÿg h
)
ÿÿh i
)
ÿÿi j
;
ÿÿj k
ReportParameter
ŸŸ !
parametroFechaHasta
ŸŸ /
=
ŸŸ0 1
new
ŸŸ2 5
ReportParameter
ŸŸ6 E
(
ŸŸE F
$str
ŸŸF R
,
ŸŸR S

fechaHasta
ŸŸT ^
.
ŸŸ^ _
ToString
ŸŸ_ g
(
ŸŸg h
)
ŸŸh i
)
ŸŸi j
;
ŸŸj k
ReportParameter
⁄⁄ +
parametroNombreCentroAtencion
⁄⁄ 9
=
⁄⁄: ;
new
⁄⁄< ?
ReportParameter
⁄⁄@ O
(
⁄⁄O P
$str
⁄⁄P f
,
⁄⁄f g
nombrePuntoVenta
⁄⁄h x
)
⁄⁄x y
;
⁄⁄y z
var
‹‹ 
	rptviewer
‹‹ 
=
‹‹ 
new
‹‹ 
ReportViewer
‹‹  ,
(
‹‹, -
)
‹‹- .
;
‹‹. /
	rptviewer
›› 
.
›› 
LocalReport
›› !
.
››! "

ReportPath
››" ,
=
››- .
Request
››/ 6
.
››6 7
MapPath
››7 >
(
››> ?
Request
››? F
.
››F G
ApplicationPath
››G V
)
››V W
+
››X Y
$str››Z ä
;››ä ã
var
ﬁﬁ 
parametrosBasicos
ﬁﬁ !
=
ﬁﬁ" #&
ObtenerParametrosBasicos
ﬁﬁ$ <
(
ﬁﬁ< =
)
ﬁﬁ= >
;
ﬁﬁ> ?
	rptviewer
ﬂﬂ 
.
ﬂﬂ 
LocalReport
ﬂﬂ !
.
ﬂﬂ! "
SetParameters
ﬂﬂ" /
(
ﬂﬂ/ 0
new
ﬂﬂ0 3
ReportParameter
ﬂﬂ4 C
[
ﬂﬂC D
]
ﬂﬂD E
{
ﬂﬂF G!
parametroFechaDesde
ﬂﬂH [
,
ﬂﬂ[ \!
parametroFechaHasta
ﬂﬂ] p
,
ﬂﬂp q 
parametrosBasicosﬂﬂr É
.ﬂﬂÉ Ñ

NombreSedeﬂﬂÑ é
,ﬂﬂé è!
parametrosBasicosﬂﬂê °
.ﬂﬂ° ¢"
FechaActualSistemaﬂﬂ¢ ¥
,ﬂﬂ¥ µ!
parametrosBasicosﬂﬂ∂ «
.ﬂﬂ« »
LogoSedeﬂﬂ» –
,ﬂﬂ– —!
parametrosBasicosﬂﬂ“ „
.ﬂﬂ„ ‰
Usuarioﬂﬂ‰ Î
,ﬂﬂÎ Ï-
parametroNombreCentroAtencionﬂﬂÌ ä
}ﬂﬂã å
)ﬂﬂå ç
;ﬂﬂç é
List
·· 
<
·· )
ResumenDeTransaccionGeneral
·· ,
>
··, -
detalles
··. 6
=
··7 8
operacionLogica
··9 H
.
··H I4
&ObtenerNotasDebitoDeOperacionesDeVenta
··I o
(
··o p

fechaDesde
··p z
,
··z {

fechaHasta··| Ü
,··Ü á
idPuntoVenta··à î
)··î ï
;··ï ñ
ReportDataSource
‚‚ 
detallesDataSet
‚‚ ,
=
‚‚- .
new
‚‚/ 2
ReportDataSource
‚‚3 C
(
‚‚C D
$str
‚‚D X
,
‚‚X Y
detalles
‚‚Z b
)
‚‚b c
;
‚‚c d!
DefinirReportViewer
‰‰ 
(
‰‰  
	rptviewer
‰‰  )
,
‰‰) *
new
‰‰+ .
List
‰‰/ 3
<
‰‰3 4
ReportDataSource
‰‰4 D
>
‰‰D E
{
‰‰F G
detallesDataSet
‰‰H W
}
‰‰X Y
)
‰‰Y Z
;
‰‰Z [
ViewBag
ÂÂ 
.
ÂÂ 
ReportViewer
ÂÂ  
=
ÂÂ! "
	rptviewer
ÂÂ# ,
;
ÂÂ, -
return
ÊÊ 
View
ÊÊ 
(
ÊÊ 
$str
ÊÊ -
)
ÊÊ- .
;
ÊÊ. /
}
ËË 	
public
ÍÍ 

JsonResult
ÍÍ  
DescargarDocumento
ÍÍ ,
(
ÍÍ, -
ReportViewer
ÍÍ- 9
reportViewer
ÍÍ: F
,
ÍÍF G
string
ÍÍH N
nombreReporte
ÍÍO \
)
ÍÍ\ ]
{
ÎÎ 	&
EstablecimientoComercial
ÏÏ $
sede
ÏÏ% )
=
ÏÏ* +
this
ÏÏ, 0
.
ÏÏ0 1
ObtenerSede
ÏÏ1 <
(
ÏÏ< =
)
ÏÏ= >
;
ÏÏ> ?
DateTime
ÌÌ 
fechaActual
ÌÌ  
=
ÌÌ! "
DateTimeUtil
ÌÌ# /
.
ÌÌ/ 0
FechaActual
ÌÌ0 ;
(
ÌÌ; <
)
ÌÌ< =
;
ÌÌ= >
string
ÓÓ 
filenameContent
ÓÓ "
=
ÓÓ# $
nombreReporte
ÓÓ% 2
+
ÓÓ3 4
$str
ÓÓ5 8
+
ÓÓ9 :
fechaActual
ÓÓ; F
.
ÓÓF G
ToString
ÓÓG O
(
ÓÓO P
$str
ÓÓP T
)
ÓÓT U
+
ÓÓV W
fechaActual
ÓÓX c
.
ÓÓc d
ToString
ÓÓd l
(
ÓÓl m
$str
ÓÓm q
)
ÓÓq r
+
ÓÓs t
fechaActualÓÓu Ä
.ÓÓÄ Å
ToStringÓÓÅ â
(ÓÓâ ä
$strÓÓä ê
)ÓÓê ë
;ÓÓë í
string
ÔÔ 
filename
ÔÔ 
=
ÔÔ 
string
ÔÔ $
.
ÔÔ$ %
Format
ÔÔ% +
(
ÔÔ+ ,
$str
ÔÔ, 5
,
ÔÔ5 6
filenameContent
ÔÔ7 F
,
ÔÔF G
$str
ÔÔH M
)
ÔÔM N
;
ÔÔN O
filename
 
=
 
filename
 
.
  
Replace
  '
(
' (
$str
( +
,
+ ,
$str
- /
)
/ 0
;
0 1
byte
ÚÚ 
[
ÚÚ 
]
ÚÚ 
bytes
ÚÚ 
=
ÚÚ 
reportViewer
ÚÚ '
.
ÚÚ' (
LocalReport
ÚÚ( 3
.
ÚÚ3 4
Render
ÚÚ4 :
(
ÚÚ: ;
$str
ÚÚ; B
,
ÚÚB C
null
ÚÚD H
,
ÚÚH I
out
ÚÚJ M
string
ÚÚN T
mimeType
ÚÚU ]
,
ÚÚ] ^
out
ÚÚ_ b
string
ÚÚc i
encoding
ÚÚj r
,
ÚÚr s
out
ÚÚt w
string
ÚÚx ~
	extensionÚÚ à
,ÚÚà â
outÚÚä ç
stringÚÚé î
[ÚÚî ï
]ÚÚï ñ
	streamidsÚÚó †
,ÚÚ† °
outÚÚ¢ •
WarningÚÚ¶ ≠
[ÚÚ≠ Æ
]ÚÚÆ Ø
warningsÚÚ∞ ∏
)ÚÚ∏ π
;ÚÚπ ∫
Response
ÙÙ 
.
ÙÙ 
ClearHeaders
ÙÙ !
(
ÙÙ! "
)
ÙÙ" #
;
ÙÙ# $
Response
ıı 
.
ıı 
Clear
ıı 
(
ıı 
)
ıı 
;
ıı 
Response
ˆˆ 
.
ˆˆ 
	AddHeader
ˆˆ 
(
ˆˆ 
$str
ˆˆ 4
,
ˆˆ4 5
$str
ˆˆ6 M
+
ˆˆN O
filename
ˆˆP X
)
ˆˆX Y
;
ˆˆY Z
Response
˜˜ 
.
˜˜ 
ContentType
˜˜  
=
˜˜! "
mimeType
˜˜# +
;
˜˜+ ,
Response
¯¯ 
.
¯¯ 
BinaryWrite
¯¯  
(
¯¯  !
bytes
¯¯! &
)
¯¯& '
;
¯¯' (
Response
˘˘ 
.
˘˘ 
Flush
˘˘ 
(
˘˘ 
)
˘˘ 
;
˘˘ 
Response
˙˙ 
.
˙˙ 
End
˙˙ 
(
˙˙ 
)
˙˙ 
;
˙˙ 
return
¸¸ 
Json
¸¸ 
(
¸¸ 
$str
¸¸ 7
)
¸¸7 8
;
¸¸8 9
}
˝˝ 	
}
˛˛ 
}ˇˇ ÛQ
^D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\TipoDeTransaccionController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class '
TipoDeTransaccionController ,
:- .
BaseController/ =
{ 
private 
readonly  
IConfiguracionLogica - 
_configuracionLogica. B
;B C
public '
TipoDeTransaccionController *
(* +
)+ ,
{ 	 
_configuracionLogica  
=! "
Dependencia# .
.. /
Resolve/ 6
<6 7 
IConfiguracionLogica7 K
>K L
(L M
)M N
;N O
} 	
public 
ActionResult 
TiposDeTransaccion .
(. /
)/ 0
{ 	
return 
View 
( 
) 
; 
} 	
public 

JsonResult -
!ObtenerTiposDeTransaccionGenerico ;
(; <
)< =
{ 	
try 
{   
var!! 

resultados!! 
=!!   
_configuracionLogica!!! 5
.!!5 6%
ObtenerTiposDeTransaccion!!6 O
(!!O P
)!!P Q
;!!Q R
List"" 
<"" "
ComboGenericoViewModel"" +
>""+ ,
tiposDeTransaccion""- ?
=""@ A
new""B E
List""F J
<""J K"
ComboGenericoViewModel""K a
>""a b
(""b c
)""c d
;""d e
tiposDeTransaccion## "
=### $"
ComboGenericoViewModel##% ;
.##; <
Convert##< C
(##C D

resultados##D N
)##N O
;##O P
return$$ 
Json$$ 
($$ 
tiposDeTransaccion$$ .
)$$. /
;$$/ 0
}%% 
catch&& 
(&& 
	Exception&& 
e&& 
)&& 
{'' 
return(( 
Json(( 
((( 
Util((  
.((  !
	ErrorJson((! *
(((* +
e((+ ,
)((, -
)((- .
;((. /
})) 
}** 	
public.. 

JsonResult.. ,
 ObtenerTiposDeTransaccionBandeja.. :
(..: ;
)..; <
{// 	
try00 
{11 
var22 

resultados22 
=22   
_configuracionLogica22! 5
.225 6%
ObtenerTiposDeTransaccion226 O
(22O P
)22P Q
;22Q R
List33 
<33 -
!BandejaTipoDeTransaccionViewModel33 6
>336 7%
bandejaTiposDeTransaccion338 Q
=33R S-
!BandejaTipoDeTransaccionViewModel33T u
.33u v
Convert33v }
(33} ~

resultados	33~ à
)
33à â
;
33â ä
return44 
Json44 
(44 %
bandejaTiposDeTransaccion44 5
)445 6
;446 7
}55 
catch66 
(66 
	Exception66 
e66 
)66 
{77 
return88 
Json88 
(88 
Util88  
.88  !
	ErrorJson88! *
(88* +
e88+ ,
)88, -
)88- .
;88. /
}99 
}:: 	
public;; 

JsonResult;; "
CrearTipoDeTransaccion;; 0
(;;0 1.
"RegistroTipoDeTransaccionViewModel;;1 S
tipoDeTransaccion;;T e
);;e f
{<< 	
try== 
{>> 
OperationResult?? 
	resultado??  )
;??) *
	resultado@@ 
=@@ 
null@@  
;@@  !
ifAA 
(AA 
tipoDeTransaccionAA %
.AA% &
IdAA& (
!=AA) +
$numAA, -
)AA- .
{BB 
	resultadoDD 
=DD  
_configuracionLogicaDD  4
.DD4 5'
ActualizarTipoDeTransaccionDD5 P
(DDP Q
tipoDeTransaccionDDQ b
.DDb c
IdDDc e
,DDe f
tipoDeTransaccionDDg x
.DDx y
NombreDDy 
,	DD Ä
tipoDeTransaccion
DDÅ í
.
DDí ì
Descripcion
DDì û
,
DDû ü
tipoDeTransaccion
DD† ±
.
DD± ≤ 
TransaccionMaestro
DD≤ ƒ
.
DDƒ ≈
Id
DD≈ «
,
DD« »8
*AccionDeNegocioPorTipoTransaccionViewModel
DD… Û
.
DDÛ Ù
Convert
DDÙ ˚
(
DD˚ ¸
tipoDeTransaccion
DD¸ ç
.
DDç é3
%AccionesDeNegocioPorTipoDeTransaccion
DDé ≥
)
DD≥ ¥
)
DD¥ µ
;
DDµ ∂
}EE 
elseFF 
{GG 
	resultadoHH 
=HH  
_configuracionLogicaHH  4
.HH4 5"
CrearTipoDeTransaccionHH5 K
(HHK L
tipoDeTransaccionHHL ]
.HH] ^
NombreHH^ d
,HHd e
tipoDeTransaccionHHf w
.HHw x
Descripcion	HHx É
,
HHÉ Ñ
tipoDeTransaccion
HHÖ ñ
.
HHñ ó 
TransaccionMaestro
HHó ©
.
HH© ™
Id
HH™ ¨
,
HH¨ ≠8
*AccionDeNegocioPorTipoTransaccionViewModel
HHÆ ÿ
.
HHÿ Ÿ
Convert
HHŸ ‡
(
HH‡ ·
tipoDeTransaccion
HH· Ú
.
HHÚ Û3
%AccionesDeNegocioPorTipoDeTransaccion
HHÛ ò
)
HHò ô
)
HHô ö
;
HHö õ
}II 
UtilKK 
.KK 
VerificarErrorKK #
(KK# $
	resultadoKK$ -
)KK- .
;KK. /
returnLL 
JsonLL 
(LL 
newLL 
{LL  !
code_resultLL" -
=LL. /
	resultadoLL0 9
.LL9 :
code_resultLL: E
,LLE F
dataLLG K
=LLL M
	resultadoLLN W
.LLW X
dataLLX \
,LL\ ]
result_descriptionLL^ p
=LLq r
	resultadoLLs |
.LL| }
title	LL} Ç
}
LLÉ Ñ
)
LLÑ Ö
;
LLÖ Ü
}MM 
catchNN 
(NN 
	ExceptionNN 
eNN 
)NN 
{OO 
HttpContextPP 
.PP 
ResponsePP $
.PP$ %

StatusCodePP% /
=PP0 1
$numPP2 5
;PP5 6
returnQQ 
JsonQQ 
(QQ 
UtilQQ  
.QQ  !
	ErrorJsonQQ! *
(QQ* +
eQQ+ ,
)QQ, -
)QQ- .
;QQ. /
}RR 
}SS 	
publicTT 

JsonResultTT $
ObtenerTipoDeTransaccionTT 2
(TT2 3
intTT3 6
idTipoDeTransaccionTT7 J
)TTJ K
{UU 	
tryVV 
{WW 
TipoDeTransaccionXX !
tipoDeTransaccionXX" 3
=XX4 5 
_configuracionLogicaXX6 J
.XXJ K$
ObtenerTipoDeTransaccionXXK c
(XXc d
idTipoDeTransaccionXXd w
)XXw x
;XXx y.
"RegistroTipoDeTransaccionViewModelYY 2&
tipoDeTransaccionViewModelYY3 M
=YYN O
newYYP S.
"RegistroTipoDeTransaccionViewModelYYT v
(YYv w
tipoDeTransaccion	YYw à
)
YYà â
;
YYâ ä
returnZZ 
JsonZZ 
(ZZ &
tipoDeTransaccionViewModelZZ 6
)ZZ6 7
;ZZ7 8
}[[ 
catch\\ 
(\\ 
	Exception\\ 
e\\ 
)\\ 
{]] 
return^^ 
Json^^ 
(^^ 
Util^^  
.^^  !
	ErrorJson^^! *
(^^* +
e^^+ ,
)^^, -
)^^- .
;^^. /
}__ 
}`` 	
publicdd 

JsonResultdd 8
,ObtenerAccionesDeNegocioPorTipoDeTransacciondd F
(ddF G
)ddG H
{ee 	
tryff 
{gg 
varhh 

resultadoshh 
=hh   
_configuracionLogicahh! 5
.hh5 6$
ObtenerAccionesDeNegociohh6 N
(hhN O
)hhO P
;hhP Q
Listii 
<ii 6
*AccionDeNegocioPorTipoTransaccionViewModelii ?
>ii? @1
%accionesDeNegocioPorTipoDeTransaccioniiA f
=iih i7
*AccionDeNegocioPorTipoTransaccionViewModel	iij î
.
iiî ï
Convert
iiï ú
(
iiú ù

resultados
iiù ß
)
iiß ®
;
ii® ©
returnjj 
Jsonjj 
(jj 1
%accionesDeNegocioPorTipoDeTransaccionjj A
)jjA B
;jjB C
}kk 
catchll 
(ll 
	Exceptionll 
ell 
)ll 
{mm 
returnnn 
Jsonnn 
(nn 
Utilnn  
.nn  !
	ErrorJsonnn! *
(nn* +
enn+ ,
)nn, -
)nn- .
;nn. /
}oo 
}pp 	
publicqq 

JsonResultqq >
2ObtenerAccionesDeNegocioPorTipoDeTransaccionEditarqq L
(qqL M
ListqqM Q
<qqQ R6
*AccionDeNegocioPorTipoTransaccionViewModelqqR |
>qq| }2
%accionesDeNegocioPorTipoDeTransaccion	qq~ £
)
qq£ §
{rr 	
tryss 
{tt 
varuu 

resultadosuu 
=uu   
_configuracionLogicauu! 5
.uu5 6$
ObtenerAccionesDeNegociouu6 N
(uuN O
)uuO P
;uuP Q
Listvv 
<vv 6
*AccionDeNegocioPorTipoTransaccionViewModelvv ?
>vv? @7
+accionesDeNegocioPorTipoDeTransaccionEditarvvA l
=vvm n7
*AccionDeNegocioPorTipoTransaccionViewModel	vvo ô
.
vvô öC
5SetearAccionesDeNegocioPorTipoDeTransaccionParaEditar
vvö œ
(
vvœ –

resultados
vv– ⁄
,
vv⁄ €3
%accionesDeNegocioPorTipoDeTransaccion
vv‹ Å
)
vvÅ Ç
;
vvÇ É
returnww 
Jsonww 
(ww 7
+accionesDeNegocioPorTipoDeTransaccionEditarww G
)wwG H
;wwH I
}xx 
catchyy 
(yy 
	Exceptionyy 
eyy 
)yy 
{zz 
return{{ 
Json{{ 
({{ 
Util{{  
.{{  !
	ErrorJson{{! *
({{* +
e{{+ ,
){{, -
){{- .
;{{. /
}|| 
}}} 	
} 
}ÄÄ ¡ 
PD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\RolController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
RolController 
:  
BaseController! /
{ 
private 
readonly  
IConfiguracionLogica - 
_configuracionLogica. B
;B C
public 
RolController 
( 
) 
{ 	 
_configuracionLogica  
=! "
Dependencia# .
.. /
Resolve/ 6
<6 7 
IConfiguracionLogica7 K
>K L
(L M
)M N
;N O
} 	
public 
ActionResult 
Roles !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
public$$ 

JsonResult$$ 
CrearRol$$ "
($$" # 
RegistroRolViewModel$$# 7
rol$$8 ;
)$$; <
{%% 	
try&& 
{'' 
OperationResult(( 
	resultado((  )
;(() *
if)) 
()) 
rol)) 
.)) 
Id)) 
!=)) 
$num)) 
)))  
{** 
	resultado++ 
=++ 
null++  $
;++$ %
}-- 
else.. 
{// 
	resultado00 
=00  
_configuracionLogica00  4
.004 5
CrearRol005 =
(00= >
rol00> A
.00A B
Nombre00B H
,00H I
rol00J M
.00M N
Descripcion00N Y
,00Y Z
rol00[ ^
.00^ _
RolPadre00_ g
.00g h
Id00h j
,00j k
rol00l o
.00o p
Aplica00p v
)00v w
;00w x
}11 
Util33 
.33 
VerificarError33 #
(33# $
	resultado33$ -
)33- .
;33. /
return44 
Json44 
(44 
new44 
{44  !
code_result44" -
=44. /
	resultado440 9
.449 :
code_result44: E
,44E F
data44G K
=44L M
	resultado44N W
.44W X
data44X \
,44\ ]
result_description44^ p
=44q r
	resultado44s |
.44| }
title	44} Ç
}
44É Ñ
)
44Ñ Ö
;
44Ö Ü
}55 
catch66 
(66 
	Exception66 
e66 
)66 
{77 
HttpContext88 
.88 
Response88 $
.88$ %

StatusCode88% /
=880 1
$num882 5
;885 6
return99 
Json99 
(99 
Util99  
.99  !
	ErrorJson99! *
(99* +
e99+ ,
)99, -
)99- .
;99. /
}:: 
};; 	
publicMM 

JsonResultMM )
ObtenerRolesDeNegocioGenericoMM 7
(MM7 8
)MM8 9
{NN 	
tryOO 
{PP 
varQQ 

resultadosQQ 
=QQ   
_configuracionLogicaQQ! 5
.QQ5 6!
ObtenerRolesDeNegocioQQ6 K
(QQK L
)QQL M
;QQM N
ListRR 
<RR "
ComboGenericoViewModelRR +
>RR+ ,
rolesRR- 2
=RR3 4"
ComboGenericoViewModelRR5 K
.RRK L
ConvertRRL S
(RRS T

resultadosRRT ^
)RR^ _
;RR_ `
returnSS 
JsonSS 
(SS 
rolesSS !
)SS! "
;SS" #
}TT 
catchUU 
(UU 
	ExceptionUU 
eUU 
)UU 
{VV 
returnWW 
JsonWW 
(WW 
UtilWW  
.WW  !
	ErrorJsonWW! *
(WW* +
eWW+ ,
)WW, -
)WW- .
;WW. /
}XX 
}YY 	
}\\ 
}]] ≠å
RD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\VentaController.cs
	namespace(( 	
Tsp((
 
.(( 
Sigescom(( 
.(( 
WebApplication(( %
.((% &
Controllers((& 1
{)) 
[** 
SessionState** 
(**  
SessionStateBehavior** &
.**& '
ReadOnly**' /
)**/ 0
]**0 1
public++ 

class++ 
VentaController++  
:++! "
BaseController++# 1
{,, 
public-- 
string-- 
RutaArchivo-- !
{--" #
get--$ '
;--' (
set--) ,
;--, -
}--. /
public.. 
string.. 
IdDocumento.. !
{.." #
get..$ '
;..' (
set..) ,
;.., -
}... /
private// 
readonly// 
IConceptoLogica// (
conceptoLogica//) 7
;//7 8
	protected00 
readonly00 
IActorNegocioLogica00 .
actorNegocioLogica00/ A
;00A B
	protected11 
readonly11 
IMaestroLogica11 )
maestroLogica11* 7
;117 8
	protected22 
readonly22 
IOperacionLogica22 +
operacionLogica22, ;
;22; <
	protected33 
readonly33  
IConfiguracionLogica33 /
configuracionLogica330 C
;33C D
	protected44 
readonly44 %
IGeneracionArchivosLogica44 4$
generacionArchivosLogica445 M
;44M N
	protected55 
readonly55 )
IFacturacionElectronicaLogica55 8(
facturacionElectronicaLogica559 U
;55U V
	protected66 
readonly66 
IMailer66 "
mailer66# )
;66) *
	protected77 
readonly77 
IBarCodeUtil77 '
barCodeUtil77( 3
;773 4
	protected88 
readonly88 
IPdfUtil88 #
pdfUtil88$ +
;88+ ,
	protected:: 
readonly:: "
IVentaUtilitarioLogica:: 1
	ventaUtil::2 ;
;::; <
private<< 
readonly<<  
IConceptoRepositorio<< -
conceptoDatos<</ <
;<<< =
private== 
readonly== )
ICentroDeAtencion_Repositorio== 6!
centroDeAtencionDatos==7 L
;==L M
private?? 
readonly?? 
ISede_Logica?? %

sedeLogica??& 0
;??0 1
	protected@@ 
readonly@@  
IOrdenAlmacen_Logica@@ /
ordenAlmacenLogica@@0 B
;@@B C
publicCC 
byteCC 
[CC 
]CC 
respuestaCDRCC "
;CC" #
publicFF 
VentaControllerFF 
(FF 
)FF  
:FF! "
baseFF# '
(FF' (
)FF( )
{GG 	
conceptoLogicaHH 
=HH 
DependenciaHH (
.HH( )
ResolveHH) 0
<HH0 1
IConceptoLogicaHH1 @
>HH@ A
(HHA B
)HHB C
;HHC D
conceptoDatosII 
=II 
DependenciaII '
.II' (
ResolveII( /
<II/ 0 
IConceptoRepositorioII0 D
>IID E
(IIE F
)IIF G
;IIG H
actorNegocioLogicaKK 
=KK  
DependenciaKK! ,
.KK, -
ResolveKK- 4
<KK4 5
IActorNegocioLogicaKK5 H
>KKH I
(KKI J
)KKJ K
;KKK L
maestroLogicaLL 
=LL 
DependenciaLL '
.LL' (
ResolveLL( /
<LL/ 0
IMaestroLogicaLL0 >
>LL> ?
(LL? @
)LL@ A
;LLA B
operacionLogicaMM 
=MM 
DependenciaMM )
.MM) *
ResolveMM* 1
<MM1 2
IOperacionLogicaMM2 B
>MMB C
(MMC D
)MMD E
;MME F
configuracionLogicaNN 
=NN  !
DependenciaNN" -
.NN- .
ResolveNN. 5
<NN5 6 
IConfiguracionLogicaNN6 J
>NNJ K
(NNK L
)NNL M
;NNM N
mailerOO 
=OO 
DependenciaOO  
.OO  !
ResolveOO! (
<OO( )
IMailerOO) 0
>OO0 1
(OO1 2
)OO2 3
;OO3 4
barCodeUtilPP 
=PP 
DependenciaPP %
.PP% &
ResolvePP& -
<PP- .
IBarCodeUtilPP. :
>PP: ;
(PP; <
)PP< =
;PP= >$
generacionArchivosLogicaQQ $
=QQ% &
DependenciaQQ' 2
.QQ2 3
ResolveQQ3 :
<QQ: ;%
IGeneracionArchivosLogicaQQ; T
>QQT U
(QQU V
)QQV W
;QQW X(
facturacionElectronicaLogicaRR (
=RR) *
DependenciaRR+ 6
.RR6 7
ResolveRR7 >
<RR> ?)
IFacturacionElectronicaLogicaRR? \
>RR\ ]
(RR] ^
)RR^ _
;RR_ `
	ventaUtilSS 
=SS 
DependenciaSS #
.SS# $
ResolveSS$ +
<SS+ ,"
IVentaUtilitarioLogicaSS, B
>SSB C
(SSC D
)SSD E
;SSE F
pdfUtilTT 
=TT 
DependenciaTT !
.TT! "
ResolveTT" )
<TT) *
IPdfUtilTT* 2
>TT2 3
(TT3 4
)TT4 5
;TT5 6!
centroDeAtencionDatosUU !
=UU! "
DependenciaUU" -
.UU- .
ResolveUU. 5
<UU5 6)
ICentroDeAtencion_RepositorioUU6 S
>UUS T
(UUT U
)UUU V
;UUV W

sedeLogicaWW 
=WW 
DependenciaWW $
.WW$ %
ResolveWW% ,
<WW, -
ISede_LogicaWW- 9
>WW9 :
(WW: ;
)WW; <
;WW< =
ordenAlmacenLogicaXX 
=XX  
DependenciaXX! ,
.XX, -
ResolveXX- 4
<XX4 5 
IOrdenAlmacen_LogicaXX5 I
>XXI J
(XXJ K
)XXK L
;XXL M
}ZZ 	
public[[ 
OrdenDeVenta[[ '
ObtenerOrdenDeVentaImprimir[[ 7
([[7 8
)[[8 9
{\\ 	
return]] 
(]] 
OrdenDeVenta]]  
)]]  !
System]]! '
.]]' (
Web]]( +
.]]+ ,
HttpContext]], 7
.]]7 8
Current]]8 ?
.]]? @
Application]]@ K
[]]K L
$str]]L \
]]]\ ]
;]]] ^
}^^ 	
public__ 

JsonResult__ $
ObtenerClientePorDefecto__ 2
(__2 3
)__3 4
{`` 	
tryaa 
{bb 
returncc 
Jsoncc 
(cc 
ProfileDatacc '
(cc' (
)cc( )
.cc) *
ClientePorDefectocc* ;
)cc; <
;cc< =
}dd 
catchee 
(ee 
	Exceptionee 
eee 
)ee 
{ff 
returngg 
newgg  
JsonHttpStatusResultgg /
(gg/ 0
Utilgg0 4
.gg4 5
	ErrorJsongg5 >
(gg> ?
egg? @
)gg@ A
,ggA B
HttpStatusCodeggC Q
.ggQ R
InternalServerErrorggR e
)gge f
;ggf g
}hh 
}ii 	
[ll 	
	Authorizell	 
(ll 
Rolesll 
=ll 
$strll 2
)ll2 3
]ll3 4
publicmm 
ActionResultmm 
Ventasmm "
(mm" #
)mm# $
{nn 	
varoo 
	modoVentaoo 
=oo 
(oo 
intoo  
)oo  !
	ModoVentaoo! *
.oo* +
VentaNormaloo+ 6
;oo6 7
ViewBagpp 
.pp 
AplicaLeyAmazoniapp %
=pp& '
TransaccionSettingspp( ;
.pp; <
Defaultpp< C
.ppC D
AplicaLeyAmazoniappD U
;ppU V
ViewBagqq 
.qq %
MostrarCodigoBarraBalanzaqq -
=qq. /
VentasSettingsqq0 >
.qq> ?
Defaultqq? F
.qqF G/
#ModoDeIngresoDeCodigoDeBarraEnVentaqqG j
==qqk m
(qqn o
intqqo r
)qqr s*
ModoIngresoCodigoBarraEnVenta	qqs ê
.
qqê ë"
CodigoBarraDeBalanza
qqë •
||
qq¶ ®
VentasSettings
qq© ∑
.
qq∑ ∏
Default
qq∏ ø
.
qqø ¿1
#ModoDeIngresoDeCodigoDeBarraEnVenta
qq¿ „
==
qq‰ Ê
(
qqÁ Ë
int
qqË Î
)
qqÎ Ï+
ModoIngresoCodigoBarraEnVenta
qqÏ â
.
qqâ ä
Ambos
qqä è
;
qqè ê
ViewBagrr 
.rr &
CursorInicialEnCodigoBarrarr .
=rr/ 0
VentasSettingsrr1 ?
.rr? @
Defaultrr@ G
.rrG H0
$CursorPorDefectoEnCodigoBarraEnVentarrH l
==rrm o
(rrp q
intrrq t
)rrt u,
CursorInicialCodigoBarraEnVenta	rru î
.
rrî ï#
CodigoBarraDeProducto
rrï ™
;
rr™ ´
ViewBagss 
.ss "
EsVentaPorContingenciass *
=ss+ ,
	modoVentass- 6
==ss7 9
(ss: ;
intss; >
)ss> ?
	ModoVentass? H
.ssH I 
VentaPorContingenciassI ]
;ss] ^
ViewBagtt 
.tt "
EsVentaModoCajaAlmacentt *
=tt+ ,
	modoVentatt- 6
==tt7 9
(tt: ;
inttt; >
)tt> ?
	ModoVentatt? H
.ttH I 
VentaModoCajaAlmacenttI ]
;tt] ^
ViewBaguu 
.uu G
;PermitirRegistroAlmacenEnVentaPorMostradorIntegradoModoCajauu O
=uuP Q
VentasSettingsuuR `
.uu` a
Defaultuua h
.uuh iH
;PermitirRegistroAlmacenEnVentaPorMostradorIntegradoModoCaja	uui §
;
uu§ •
ViewBagvv 
.vv -
!PermitirRegistroDeGuiasDeRemisionvv 5
=vv6 7
VentasSettingsvv8 F
.vvF G
DefaultvvG N
.vvN O>
1PermitirRegistroDeGuiasDeRemisionEnVentaIntegrada	vvO Ä
;
vvÄ Å
ViewBagww 
.ww ,
 PermitirRegistroConceptoServicioww 4
=ww5 6
VentasSettingsww7 E
.wwE F
DefaultwwF M
.wwM N,
 PermitirRegistroConceptoServiciowwN n
;wwn o
ViewBagxx 
.xx !
PermitirRegistroFletexx )
=xx* +
AplicacionSettingsxx, >
.xx> ?
Defaultxx? F
.xxF G(
PermitirRegistroFleteEnVentaxxG c
;xxc d
ViewBagyy 
.yy !
PermitirRegistroPlacayy )
=yy* +
VentasSettingsyy, :
.yy: ;
Defaultyy; B
.yyB C*
PermitirRegistroDePlacaEnVentayyC a
;yya b
ViewBagzz 
.zz 
IdClienteGenericozz %
=zz& '
ActorSettingszz( 5
.zz5 6
Defaultzz6 =
.zz= >
IdClienteGenericozz> O
;zzO P
ViewBag{{ 
.{{ !
IdMedioDePagoEfectivo{{ )
={{* +
MaestroSettings{{, ;
.{{; <
Default{{< C
.{{C D/
#IdDetalleMaestroMedioDepagoEfectivo{{D g
;{{g h
ViewBag|| 
.|| "
IdTipoDocumentoFactura|| *
=||+ ,
MaestroSettings||- <
.||< =
Default||= D
.||D E.
"IdDetalleMaestroComprobanteFactura||E g
;||g h
ViewBag}} 
.}} $
PermitirEnvioPorWhatsApp}} ,
=}}- .
VentasSettings}}/ =
.}}= >
Default}}> E
.}}E F$
PermitirEnvioPorWhatsApp}}F ^
;}}^ _
ViewBag~~ 
.~~ %
EnvioComprobantePostVenta~~ -
=~~. /
VentasSettings~~0 >
.~~> ?
Default~~? F
.~~F G%
EnvioComprobantePostVenta~~G `
;~~` a
ViewBag
ÄÄ 
.
ÄÄ "
EsPregeneracionVenta
ÄÄ (
=
ÄÄ) *
false
ÄÄ+ 0
;
ÄÄ0 1
ViewBag
ÅÅ 
.
ÅÅ  
IdOrdenAPregenerar
ÅÅ &
=
ÅÅ' (
$num
ÅÅ) *
;
ÅÅ* +
ViewBag
ÇÇ 
.
ÇÇ &
TipoOperacionAPregenerar
ÇÇ ,
=
ÇÇ- .
$num
ÇÇ/ 0
;
ÇÇ0 1
ViewBag
ÉÉ 
.
ÉÉ 
	WCPScript
ÉÉ 
=
ÉÉ 

Neodynamic
ÉÉ  *
.
ÉÉ* +
SDK
ÉÉ+ .
.
ÉÉ. /
Web
ÉÉ/ 2
.
ÉÉ2 3
WebClientPrint
ÉÉ3 A
.
ÉÉA B
CreateScript
ÉÉB N
(
ÉÉN O
Url
ÑÑ 
.
ÑÑ 
Action
ÑÑ 
(
ÑÑ 
$str
ÑÑ +
,
ÑÑ+ ,
$str
ÑÑ- @
,
ÑÑ@ A
null
ÑÑB F
,
ÑÑF G
HttpContext
ÑÑH S
.
ÑÑS T
Request
ÑÑT [
.
ÑÑ[ \
Url
ÑÑ\ _
.
ÑÑ_ `
Scheme
ÑÑ` f
)
ÑÑf g
,
ÑÑg h
Url
ÖÖ 
.
ÖÖ 
Action
ÖÖ 
(
ÖÖ 
$str
ÖÖ &
,
ÖÖ& '
$str
ÖÖ( /
,
ÖÖ/ 0
null
ÖÖ1 5
,
ÖÖ5 6
HttpContext
ÖÖ7 B
.
ÖÖB C
Request
ÖÖC J
.
ÖÖJ K
Url
ÖÖK N
.
ÖÖN O
Scheme
ÖÖO U
)
ÖÖU V
,
ÖÖV W
HttpContext
ÖÖX c
.
ÖÖc d
Session
ÖÖd k
.
ÖÖk l
	SessionID
ÖÖl u
)
ÖÖu v
;
ÖÖv w
return
ÜÜ 
View
ÜÜ 
(
ÜÜ 
)
ÜÜ 
;
ÜÜ 
}
áá 	
[
àà 	
	Authorize
àà	 
(
àà 
Roles
àà 
=
àà 
$str
àà %
)
àà% &
]
àà& '
[
ââ 	

ActionName
ââ	 
(
ââ 
$str
ââ (
)
ââ( )
]
ââ) *
public
ää 
ActionResult
ää 
Ventas
ää "
(
ää" #
long
ää# '
idOrden
ää( /
,
ää/ 0
int
ää1 4
tipoOperacion
ää5 B
)
ääB C
{
ãã 	
var
åå 
	modoVenta
åå 
=
åå 
(
åå 
int
åå  
)
åå  !
	ModoVenta
åå! *
.
åå* +
VentaNormal
åå+ 6
;
åå6 7
ViewBag
çç 
.
çç 
AplicaLeyAmazonia
çç %
=
çç& '!
TransaccionSettings
çç( ;
.
çç; <
Default
çç< C
.
ççC D
AplicaLeyAmazonia
ççD U
;
ççU V
ViewBag
éé 
.
éé '
MostrarCodigoBarraBalanza
éé -
=
éé. /
VentasSettings
éé0 >
.
éé> ?
Default
éé? F
.
ééF G1
#ModoDeIngresoDeCodigoDeBarraEnVenta
ééG j
==
éék m
(
één o
int
ééo r
)
éér s,
ModoIngresoCodigoBarraEnVentaéés ê
.ééê ë$
CodigoBarraDeBalanzaééë •
||éé¶ ®
VentasSettingséé© ∑
.éé∑ ∏
Defaultéé∏ ø
.ééø ¿3
#ModoDeIngresoDeCodigoDeBarraEnVentaéé¿ „
==éé‰ Ê
(ééÁ Ë
intééË Î
)ééÎ Ï-
ModoIngresoCodigoBarraEnVentaééÏ â
.ééâ ä
Ambosééä è
;ééè ê
ViewBag
èè 
.
èè (
CursorInicialEnCodigoBarra
èè .
=
èè/ 0
VentasSettings
èè1 ?
.
èè? @
Default
èè@ G
.
èèG H2
$CursorPorDefectoEnCodigoBarraEnVenta
èèH l
==
èèm o
(
èèp q
int
èèq t
)
èèt u.
CursorInicialCodigoBarraEnVentaèèu î
.èèî ï%
CodigoBarraDeProductoèèï ™
;èè™ ´
ViewBag
êê 
.
êê $
EsVentaPorContingencia
êê *
=
êê+ ,
	modoVenta
êê- 6
==
êê7 9
(
êê: ;
int
êê; >
)
êê> ?
	ModoVenta
êê? H
.
êêH I"
VentaPorContingencia
êêI ]
;
êê] ^
ViewBag
ëë 
.
ëë $
EsVentaModoCajaAlmacen
ëë *
=
ëë+ ,
	modoVenta
ëë- 6
==
ëë7 9
(
ëë: ;
int
ëë; >
)
ëë> ?
	ModoVenta
ëë? H
.
ëëH I"
VentaModoCajaAlmacen
ëëI ]
;
ëë] ^
ViewBag
íí 
.
íí I
;PermitirRegistroAlmacenEnVentaPorMostradorIntegradoModoCaja
íí O
=
ííP Q
VentasSettings
ííR `
.
íí` a
Default
íía h
.
ííh iJ
;PermitirRegistroAlmacenEnVentaPorMostradorIntegradoModoCajaííi §
;íí§ •
ViewBag
ìì 
.
ìì /
!PermitirRegistroDeGuiasDeRemision
ìì 5
=
ìì6 7
VentasSettings
ìì8 F
.
ììF G
Default
ììG N
.
ììN O@
1PermitirRegistroDeGuiasDeRemisionEnVentaIntegradaììO Ä
;ììÄ Å
ViewBag
îî 
.
îî .
 PermitirRegistroConceptoServicio
îî 4
=
îî5 6
VentasSettings
îî7 E
.
îîE F
Default
îîF M
.
îîM N.
 PermitirRegistroConceptoServicio
îîN n
;
îîn o
ViewBag
ïï 
.
ïï #
PermitirRegistroFlete
ïï )
=
ïï* + 
AplicacionSettings
ïï, >
.
ïï> ?
Default
ïï? F
.
ïïF G*
PermitirRegistroFleteEnVenta
ïïG c
;
ïïc d
ViewBag
ññ 
.
ññ #
PermitirRegistroPlaca
ññ )
=
ññ* +
VentasSettings
ññ, :
.
ññ: ;
Default
ññ; B
.
ññB C,
PermitirRegistroDePlacaEnVenta
ññC a
;
ñña b
ViewBag
óó 
.
óó 
IdClienteGenerico
óó %
=
óó& '
ActorSettings
óó( 5
.
óó5 6
Default
óó6 =
.
óó= >
IdClienteGenerico
óó> O
;
óóO P
ViewBag
òò 
.
òò #
IdMedioDePagoEfectivo
òò )
=
òò* +
MaestroSettings
òò, ;
.
òò; <
Default
òò< C
.
òòC D1
#IdDetalleMaestroMedioDepagoEfectivo
òòD g
;
òòg h
ViewBag
ôô 
.
ôô $
IdTipoDocumentoFactura
ôô *
=
ôô+ ,
MaestroSettings
ôô- <
.
ôô< =
Default
ôô= D
.
ôôD E0
"IdDetalleMaestroComprobanteFactura
ôôE g
;
ôôg h
ViewBag
öö 
.
öö &
PermitirEnvioPorWhatsApp
öö ,
=
öö- .
VentasSettings
öö/ =
.
öö= >
Default
öö> E
.
ööE F&
PermitirEnvioPorWhatsApp
ööF ^
;
öö^ _
ViewBag
õõ 
.
õõ '
EnvioComprobantePostVenta
õõ -
=
õõ. /
VentasSettings
õõ0 >
.
õõ> ?
Default
õõ? F
.
õõF G'
EnvioComprobantePostVenta
õõG `
;
õõ` a
ViewBag
ùù 
.
ùù "
esPregeneracionVenta
ùù (
=
ùù) *
true
ùù+ /
;
ùù/ 0
ViewBag
ûû 
.
ûû  
idOrdenAPregenerar
ûû &
=
ûû' (
idOrden
ûû) 0
;
ûû0 1
ViewBag
üü 
.
üü &
tipoOperacionAPregenerar
üü ,
=
üü- .
tipoOperacion
üü/ <
;
üü< =
ViewBag
†† 
.
†† 
	WCPScript
†† 
=
†† 

Neodynamic
††  *
.
††* +
SDK
††+ .
.
††. /
Web
††/ 2
.
††2 3
WebClientPrint
††3 A
.
††A B
CreateScript
††B N
(
††N O
Url
°° 
.
°° 
Action
°° 
(
°° 
$str
°° +
,
°°+ ,
$str
°°- @
,
°°@ A
null
°°B F
,
°°F G
HttpContext
°°H S
.
°°S T
Request
°°T [
.
°°[ \
Url
°°\ _
.
°°_ `
Scheme
°°` f
)
°°f g
,
°°g h
Url
¢¢ 
.
¢¢ 
Action
¢¢ 
(
¢¢ 
$str
¢¢ &
,
¢¢& '
$str
¢¢( /
,
¢¢/ 0
null
¢¢1 5
,
¢¢5 6
HttpContext
¢¢7 B
.
¢¢B C
Request
¢¢C J
.
¢¢J K
Url
¢¢K N
.
¢¢N O
Scheme
¢¢O U
)
¢¢U V
,
¢¢V W
HttpContext
¢¢X c
.
¢¢c d
Session
¢¢d k
.
¢¢k l
	SessionID
¢¢l u
)
¢¢u v
;
¢¢v w
return
££ 
View
££ 
(
££ 
$str
££  
)
££  !
;
££! "
}
§§ 	
[
¶¶ 	
	Authorize
¶¶	 
(
¶¶ 
Roles
¶¶ 
=
¶¶ 
$str
¶¶ %
)
¶¶% &
]
¶¶& '
public
ßß 
ActionResult
ßß #
VentasPorContingencia
ßß 1
(
ßß1 2
)
ßß2 3
{
®® 	
var
©© 
	modoVenta
©© 
=
©© 
(
©© 
int
©©  
)
©©  !
	ModoVenta
©©! *
.
©©* +"
VentaPorContingencia
©©+ ?
;
©©? @
ViewBag
™™ 
.
™™ 
AplicaLeyAmazonia
™™ %
=
™™& '!
TransaccionSettings
™™( ;
.
™™; <
Default
™™< C
.
™™C D
AplicaLeyAmazonia
™™D U
;
™™U V
ViewBag
´´ 
.
´´ '
MostrarCodigoBarraBalanza
´´ -
=
´´. /
VentasSettings
´´0 >
.
´´> ?
Default
´´? F
.
´´F G1
#ModoDeIngresoDeCodigoDeBarraEnVenta
´´G j
==
´´k m
(
´´n o
int
´´o r
)
´´r s,
ModoIngresoCodigoBarraEnVenta´´s ê
.´´ê ë$
CodigoBarraDeBalanza´´ë •
||´´¶ ®
VentasSettings´´© ∑
.´´∑ ∏
Default´´∏ ø
.´´ø ¿3
#ModoDeIngresoDeCodigoDeBarraEnVenta´´¿ „
==´´‰ Ê
(´´Á Ë
int´´Ë Î
)´´Î Ï-
ModoIngresoCodigoBarraEnVenta´´Ï â
.´´â ä
Ambos´´ä è
;´´è ê
ViewBag
¨¨ 
.
¨¨ (
CursorInicialEnCodigoBarra
¨¨ .
=
¨¨/ 0
VentasSettings
¨¨1 ?
.
¨¨? @
Default
¨¨@ G
.
¨¨G H2
$CursorPorDefectoEnCodigoBarraEnVenta
¨¨H l
==
¨¨m o
(
¨¨p q
int
¨¨q t
)
¨¨t u.
CursorInicialCodigoBarraEnVenta¨¨u î
.¨¨î ï%
CodigoBarraDeProducto¨¨ï ™
;¨¨™ ´
ViewBag
≠≠ 
.
≠≠ $
EsVentaPorContingencia
≠≠ *
=
≠≠+ ,
	modoVenta
≠≠- 6
==
≠≠7 9
(
≠≠: ;
int
≠≠; >
)
≠≠> ?
	ModoVenta
≠≠? H
.
≠≠H I"
VentaPorContingencia
≠≠I ]
;
≠≠] ^
ViewBag
ÆÆ 
.
ÆÆ $
EsVentaModoCajaAlmacen
ÆÆ *
=
ÆÆ+ ,
	modoVenta
ÆÆ- 6
==
ÆÆ7 9
(
ÆÆ: ;
int
ÆÆ; >
)
ÆÆ> ?
	ModoVenta
ÆÆ? H
.
ÆÆH I"
VentaModoCajaAlmacen
ÆÆI ]
;
ÆÆ] ^
ViewBag
ØØ 
.
ØØ I
;PermitirRegistroAlmacenEnVentaPorMostradorIntegradoModoCaja
ØØ O
=
ØØP Q
VentasSettings
ØØR `
.
ØØ` a
Default
ØØa h
.
ØØh iJ
;PermitirRegistroAlmacenEnVentaPorMostradorIntegradoModoCajaØØi §
;ØØ§ •
ViewBag
∞∞ 
.
∞∞ /
!PermitirRegistroDeGuiasDeRemision
∞∞ 5
=
∞∞6 7
VentasSettings
∞∞8 F
.
∞∞F G
Default
∞∞G N
.
∞∞N O@
1PermitirRegistroDeGuiasDeRemisionEnVentaIntegrada∞∞O Ä
;∞∞Ä Å
ViewBag
±± 
.
±± .
 PermitirRegistroConceptoServicio
±± 4
=
±±5 6
VentasSettings
±±7 E
.
±±E F
Default
±±F M
.
±±M N.
 PermitirRegistroConceptoServicio
±±N n
;
±±n o
ViewBag
≤≤ 
.
≤≤ #
PermitirRegistroFlete
≤≤ )
=
≤≤* + 
AplicacionSettings
≤≤, >
.
≤≤> ?
Default
≤≤? F
.
≤≤F G*
PermitirRegistroFleteEnVenta
≤≤G c
;
≤≤c d
ViewBag
≥≥ 
.
≥≥ #
PermitirRegistroPlaca
≥≥ )
=
≥≥* +
VentasSettings
≥≥, :
.
≥≥: ;
Default
≥≥; B
.
≥≥B C,
PermitirRegistroDePlacaEnVenta
≥≥C a
;
≥≥a b
ViewBag
¥¥ 
.
¥¥ 
IdClienteGenerico
¥¥ %
=
¥¥& '
ActorSettings
¥¥( 5
.
¥¥5 6
Default
¥¥6 =
.
¥¥= >
IdClienteGenerico
¥¥> O
;
¥¥O P
ViewBag
µµ 
.
µµ #
IdMedioDePagoEfectivo
µµ )
=
µµ* +
MaestroSettings
µµ, ;
.
µµ; <
Default
µµ< C
.
µµC D1
#IdDetalleMaestroMedioDepagoEfectivo
µµD g
;
µµg h
ViewBag
∂∂ 
.
∂∂ $
IdTipoDocumentoFactura
∂∂ *
=
∂∂+ ,
MaestroSettings
∂∂- <
.
∂∂< =
Default
∂∂= D
.
∂∂D E0
"IdDetalleMaestroComprobanteFactura
∂∂E g
;
∂∂g h
ViewBag
∑∑ 
.
∑∑ &
PermitirEnvioPorWhatsApp
∑∑ ,
=
∑∑- .
VentasSettings
∑∑/ =
.
∑∑= >
Default
∑∑> E
.
∑∑E F&
PermitirEnvioPorWhatsApp
∑∑F ^
;
∑∑^ _
ViewBag
∏∏ 
.
∏∏ '
EnvioComprobantePostVenta
∏∏ -
=
∏∏. /
VentasSettings
∏∏0 >
.
∏∏> ?
Default
∏∏? F
.
∏∏F G'
EnvioComprobantePostVenta
∏∏G `
;
∏∏` a
ViewBag
∫∫ 
.
∫∫ "
EsPregeneracionVenta
∫∫ (
=
∫∫) *
false
∫∫+ 0
;
∫∫0 1
ViewBag
ªª 
.
ªª  
IdOrdenAPregenerar
ªª &
=
ªª' (
$num
ªª) *
;
ªª* +
ViewBag
ºº 
.
ºº &
TipoOperacionAPregenerar
ºº ,
=
ºº- .
$num
ºº/ 0
;
ºº0 1
ViewBag
ΩΩ 
.
ΩΩ 
	WCPScript
ΩΩ 
=
ΩΩ 

Neodynamic
ΩΩ  *
.
ΩΩ* +
SDK
ΩΩ+ .
.
ΩΩ. /
Web
ΩΩ/ 2
.
ΩΩ2 3
WebClientPrint
ΩΩ3 A
.
ΩΩA B
CreateScript
ΩΩB N
(
ΩΩN O
Url
ææ 
.
ææ 
Action
ææ 
(
ææ 
$str
ææ +
,
ææ+ ,
$str
ææ- @
,
ææ@ A
null
ææB F
,
ææF G
HttpContext
ææH S
.
ææS T
Request
ææT [
.
ææ[ \
Url
ææ\ _
.
ææ_ `
Scheme
ææ` f
)
ææf g
,
ææg h
Url
øø 
.
øø 
Action
øø 
(
øø 
$str
øø &
,
øø& '
$str
øø( /
,
øø/ 0
null
øø1 5
,
øø5 6
HttpContext
øø7 B
.
øøB C
Request
øøC J
.
øøJ K
Url
øøK N
.
øøN O
Scheme
øøO U
)
øøU V
,
øøV W
HttpContext
øøX c
.
øøc d
Session
øød k
.
øøk l
	SessionID
øøl u
)
øøu v
;
øøv w
return
¿¿ 
View
¿¿ 
(
¿¿ 
$str
¿¿  
)
¿¿  !
;
¿¿! "
}
¡¡ 	
[
√√ 	
	Authorize
√√	 
(
√√ 
Roles
√√ 
=
√√ 
$str
√√ %
)
√√% &
]
√√& '
public
ƒƒ 
ActionResult
ƒƒ 0
"VentaPorMostradorIntegradoModoCaja
ƒƒ >
(
ƒƒ> ?
)
ƒƒ? @
{
≈≈ 	
var
∆∆ 
	modoVenta
∆∆ 
=
∆∆ 
(
∆∆ 
int
∆∆  
)
∆∆  !
	ModoVenta
∆∆! *
.
∆∆* +"
VentaModoCajaAlmacen
∆∆+ ?
;
∆∆? @
ViewBag
«« 
.
«« 
AplicaLeyAmazonia
«« %
=
««& '!
TransaccionSettings
««( ;
.
««; <
Default
««< C
.
««C D
AplicaLeyAmazonia
««D U
;
««U V
ViewBag
»» 
.
»» '
MostrarCodigoBarraBalanza
»» -
=
»». /
VentasSettings
»»0 >
.
»»> ?
Default
»»? F
.
»»F G1
#ModoDeIngresoDeCodigoDeBarraEnVenta
»»G j
==
»»k m
(
»»n o
int
»»o r
)
»»r s,
ModoIngresoCodigoBarraEnVenta»»s ê
.»»ê ë$
CodigoBarraDeBalanza»»ë •
||»»¶ ®
VentasSettings»»© ∑
.»»∑ ∏
Default»»∏ ø
.»»ø ¿3
#ModoDeIngresoDeCodigoDeBarraEnVenta»»¿ „
==»»‰ Ê
(»»Á Ë
int»»Ë Î
)»»Î Ï-
ModoIngresoCodigoBarraEnVenta»»Ï â
.»»â ä
Ambos»»ä è
;»»è ê
ViewBag
…… 
.
…… (
CursorInicialEnCodigoBarra
…… .
=
……/ 0
VentasSettings
……1 ?
.
……? @
Default
……@ G
.
……G H2
$CursorPorDefectoEnCodigoBarraEnVenta
……H l
==
……m o
(
……p q
int
……q t
)
……t u.
CursorInicialCodigoBarraEnVenta……u î
.……î ï%
CodigoBarraDeProducto……ï ™
;……™ ´
ViewBag
   
.
   $
EsVentaPorContingencia
   *
=
  + ,
	modoVenta
  - 6
==
  7 9
(
  : ;
int
  ; >
)
  > ?
	ModoVenta
  ? H
.
  H I"
VentaPorContingencia
  I ]
;
  ] ^
ViewBag
ÀÀ 
.
ÀÀ $
EsVentaModoCajaAlmacen
ÀÀ *
=
ÀÀ+ ,
	modoVenta
ÀÀ- 6
==
ÀÀ7 9
(
ÀÀ: ;
int
ÀÀ; >
)
ÀÀ> ?
	ModoVenta
ÀÀ? H
.
ÀÀH I"
VentaModoCajaAlmacen
ÀÀI ]
;
ÀÀ] ^
ViewBag
ÃÃ 
.
ÃÃ I
;PermitirRegistroAlmacenEnVentaPorMostradorIntegradoModoCaja
ÃÃ O
=
ÃÃP Q
VentasSettings
ÃÃR `
.
ÃÃ` a
Default
ÃÃa h
.
ÃÃh iJ
;PermitirRegistroAlmacenEnVentaPorMostradorIntegradoModoCajaÃÃi §
;ÃÃ§ •
ViewBag
ÕÕ 
.
ÕÕ /
!PermitirRegistroDeGuiasDeRemision
ÕÕ 5
=
ÕÕ6 7
VentasSettings
ÕÕ8 F
.
ÕÕF G
Default
ÕÕG N
.
ÕÕN O@
1PermitirRegistroDeGuiasDeRemisionEnVentaIntegradaÕÕO Ä
;ÕÕÄ Å
ViewBag
ŒŒ 
.
ŒŒ .
 PermitirRegistroConceptoServicio
ŒŒ 4
=
ŒŒ5 6
VentasSettings
ŒŒ7 E
.
ŒŒE F
Default
ŒŒF M
.
ŒŒM N.
 PermitirRegistroConceptoServicio
ŒŒN n
;
ŒŒn o
ViewBag
œœ 
.
œœ #
PermitirRegistroFlete
œœ )
=
œœ* + 
AplicacionSettings
œœ, >
.
œœ> ?
Default
œœ? F
.
œœF G*
PermitirRegistroFleteEnVenta
œœG c
;
œœc d
ViewBag
–– 
.
–– #
PermitirRegistroPlaca
–– )
=
––* +
VentasSettings
––, :
.
––: ;
Default
––; B
.
––B C,
PermitirRegistroDePlacaEnVenta
––C a
;
––a b
ViewBag
—— 
.
—— 
IdClienteGenerico
—— %
=
——& '
ActorSettings
——( 5
.
——5 6
Default
——6 =
.
——= >
IdClienteGenerico
——> O
;
——O P
ViewBag
““ 
.
““ #
IdMedioDePagoEfectivo
““ )
=
““* +
MaestroSettings
““, ;
.
““; <
Default
““< C
.
““C D1
#IdDetalleMaestroMedioDepagoEfectivo
““D g
;
““g h
ViewBag
”” 
.
”” $
IdTipoDocumentoFactura
”” *
=
””+ ,
MaestroSettings
””- <
.
””< =
Default
””= D
.
””D E0
"IdDetalleMaestroComprobanteFactura
””E g
;
””g h
ViewBag
‘‘ 
.
‘‘ &
PermitirEnvioPorWhatsApp
‘‘ ,
=
‘‘- .
VentasSettings
‘‘/ =
.
‘‘= >
Default
‘‘> E
.
‘‘E F&
PermitirEnvioPorWhatsApp
‘‘F ^
;
‘‘^ _
ViewBag
’’ 
.
’’ '
EnvioComprobantePostVenta
’’ -
=
’’. /
VentasSettings
’’0 >
.
’’> ?
Default
’’? F
.
’’F G'
EnvioComprobantePostVenta
’’G `
;
’’` a
ViewBag
◊◊ 
.
◊◊ "
EsPregeneracionVenta
◊◊ (
=
◊◊) *
false
◊◊+ 0
;
◊◊0 1
ViewBag
ÿÿ 
.
ÿÿ  
IdOrdenAPregenerar
ÿÿ &
=
ÿÿ' (
$num
ÿÿ) *
;
ÿÿ* +
ViewBag
ŸŸ 
.
ŸŸ &
TipoOperacionAPregenerar
ŸŸ ,
=
ŸŸ- .
$num
ŸŸ/ 0
;
ŸŸ0 1
ViewBag
⁄⁄ 
.
⁄⁄ 
	WCPScript
⁄⁄ 
=
⁄⁄ 

Neodynamic
⁄⁄  *
.
⁄⁄* +
SDK
⁄⁄+ .
.
⁄⁄. /
Web
⁄⁄/ 2
.
⁄⁄2 3
WebClientPrint
⁄⁄3 A
.
⁄⁄A B
CreateScript
⁄⁄B N
(
⁄⁄N O
Url
€€ 
.
€€ 
Action
€€ 
(
€€ 
$str
€€ +
,
€€+ ,
$str
€€- @
,
€€@ A
null
€€B F
,
€€F G
HttpContext
€€H S
.
€€S T
Request
€€T [
.
€€[ \
Url
€€\ _
.
€€_ `
Scheme
€€` f
)
€€f g
,
€€g h
Url
‹‹ 
.
‹‹ 
Action
‹‹ 
(
‹‹ 
$str
‹‹ &
,
‹‹& '
$str
‹‹( /
,
‹‹/ 0
null
‹‹1 5
,
‹‹5 6
HttpContext
‹‹7 B
.
‹‹B C
Request
‹‹C J
.
‹‹J K
Url
‹‹K N
.
‹‹N O
Scheme
‹‹O U
)
‹‹U V
,
‹‹V W
HttpContext
‹‹X c
.
‹‹c d
Session
‹‹d k
.
‹‹k l
	SessionID
‹‹l u
)
‹‹u v
;
‹‹v w
return
›› 
View
›› 
(
›› 
$str
››  
)
››  !
;
››! "
}
ﬁﬁ 	
[
ﬂﬂ 	
	Authorize
ﬂﬂ	 
(
ﬂﬂ 
Roles
ﬂﬂ 
=
ﬂﬂ 
$str
ﬂﬂ %
)
ﬂﬂ% &
]
ﬂﬂ& '
public
‡‡ 
ActionResult
‡‡ 
ConsultarVentas
‡‡ +
(
‡‡+ ,
)
‡‡, -
{
·· 	
List
‚‚ 
<
‚‚ 
DateTime
‚‚ 
>
‚‚ 
fechas
‚‚ !
=
‚‚" #
operacionLogica
‚‚$ 3
.
‚‚3 4?
1ObtenerFechaIncioyFinParaReporteVentaPuntoDeVenta
‚‚4 e
(
‚‚e f
)
‚‚f g
;
‚‚g h
ViewBag
„„ 
.
„„ 
tasaIGV
„„ 
=
„„ !
TransaccionSettings
„„ 1
.
„„1 2
Default
„„2 9
.
„„9 :
TasaIGV
„„: A
;
„„A B
ViewBag
ÂÂ 
.
ÂÂ 
aplicaLeyAmazonia
ÂÂ %
=
ÂÂ& '!
TransaccionSettings
ÂÂ( ;
.
ÂÂ; <
Default
ÂÂ< C
.
ÂÂC D
AplicaLeyAmazonia
ÂÂD U
;
ÂÂU V
ViewBag
ÊÊ 
.
ÊÊ #
idMedioDePagoEfectivo
ÊÊ )
=
ÊÊ* +
MaestroSettings
ÊÊ, ;
.
ÊÊ; <
Default
ÊÊ< C
.
ÊÊC D1
#IdDetalleMaestroMedioDepagoEfectivo
ÊÊD g
;
ÊÊg h
ViewBag
ÁÁ 
.
ÁÁ +
idTipoTransaccionOrdenDeVenta
ÁÁ 1
=
ÁÁ2 3!
TransaccionSettings
ÁÁ4 G
.
ÁÁG H
Default
ÁÁH O
.
ÁÁO P+
IdTipoTransaccionOrdenDeVenta
ÁÁP m
;
ÁÁm n
ViewBag
ËË 
.
ËË 4
&idTipoTransaccionAnulacionOrdenDeVenta
ËË :
=
ËË; <!
TransaccionSettings
ËË= P
.
ËËP Q
Default
ËËQ X
.
ËËX Y7
(IdTipoTransaccionOrdenDeAnulacionDeVentaËËY Å
;ËËÅ Ç
ViewBag
ÈÈ 
.
ÈÈ 9
+idTipoTransaccionDescuentoSobreOrdenDeVenta
ÈÈ ?
=
ÈÈ@ A!
TransaccionSettings
ÈÈB U
.
ÈÈU V
Default
ÈÈV ]
.
ÈÈ] ^:
+IdTipoTransaccionDescuentoSobreOrdenDeVentaÈÈ^ â
;ÈÈâ ä
ViewBag
ÍÍ 
.
ÍÍ 6
(idTipoTransaccionDebitoSobreOrdenDeVenta
ÍÍ <
=
ÍÍ= >!
TransaccionSettings
ÍÍ? R
.
ÍÍR S
Default
ÍÍS Z
.
ÍÍZ [1
#IdTipoTransaccionDebitoOrdenDeVenta
ÍÍ[ ~
;
ÍÍ~ 
ViewBag
ÎÎ 
.
ÎÎ (
idComprobanteNotaDeCredito
ÎÎ .
=
ÎÎ/ 0
MaestroSettings
ÎÎ1 @
.
ÎÎ@ A
Default
ÎÎA H
.
ÎÎH I4
&IdDetalleMaestroComprobanteNotaCredito
ÎÎI o
;
ÎÎo p
ViewBag
ÏÏ 
.
ÏÏ '
idComprobanteNotaDeDebito
ÏÏ -
=
ÏÏ. /
MaestroSettings
ÏÏ0 ?
.
ÏÏ? @
Default
ÏÏ@ G
.
ÏÏG H5
'IdDetalleMaestroComprobanteNotaDeDebito
ÏÏH o
;
ÏÏo p
ViewBag
ÌÌ 
.
ÌÌ 4
&idDetalleMaestroAnulacionDeLaOperacion
ÌÌ :
=
ÌÌ; <
MaestroSettings
ÌÌ= L
.
ÌÌL M
Default
ÌÌM T
.
ÌÌT UM
>IdDetalleMaestroNotaDeCreditoElectronicaAnulacionDeLaOperacionÌÌU ì
;ÌÌì î
ViewBag
ÓÓ 
.
ÓÓ 6
(idDetalleMaestroAnulacionPorErrorEnElRuc
ÓÓ <
=
ÓÓ= >
MaestroSettings
ÓÓ? N
.
ÓÓN O
Default
ÓÓO V
.
ÓÓV WO
@IdDetalleMaestroNotaDeCreditoElectronicaAnulacionPorErrorEnElRucÓÓW ó
;ÓÓó ò
ViewBag
ÔÔ 
.
ÔÔ ?
1idDetalleMaestroCorreccionPorErrorEnLaDescripcion
ÔÔ E
=
ÔÔF G
MaestroSettings
ÔÔH W
.
ÔÔW X
Default
ÔÔX _
.
ÔÔ_ `X
IIdDetalleMaestroNotaDeCreditoElectronicaCorreccionPorErrorEnLaDescripcionÔÔ` ©
;ÔÔ© ™
ViewBag
 
.
 -
idDetalleMaestroDescuentoGlobal
 3
=
4 5
MaestroSettings
6 E
.
E F
Default
F M
.
M NF
7IdDetalleMaestroNotaDeCreditoElectronicaDescuentoGlobalN Ö
;Ö Ü
ViewBag
ÒÒ 
.
ÒÒ .
 idDetalleMaestroDescuentoPorItem
ÒÒ 4
=
ÒÒ5 6
MaestroSettings
ÒÒ7 F
.
ÒÒF G
Default
ÒÒG N
.
ÒÒN OG
8IdDetalleMaestroNotaDeCreditoElectronicaDescuentoPorItemÒÒO á
;ÒÒá à
ViewBag
ÚÚ 
.
ÚÚ -
idDetalleMaestroDevolucionTotal
ÚÚ 3
=
ÚÚ4 5
MaestroSettings
ÚÚ6 E
.
ÚÚE F
Default
ÚÚF M
.
ÚÚM NF
7IdDetalleMaestroNotaDeCreditoElectronicaDevolucionTotalÚÚN Ö
;ÚÚÖ Ü
ViewBag
ÛÛ 
.
ÛÛ /
!idDetalleMaestroDevolucionPorItem
ÛÛ 5
=
ÛÛ6 7
MaestroSettings
ÛÛ8 G
.
ÛÛG H
Default
ÛÛH O
.
ÛÛO PH
9IdDetalleMaestroNotaDeCreditoElectronicaDevolucionPorItemÛÛP â
;ÛÛâ ä
ViewBag
ÙÙ 
.
ÙÙ *
idDetalleMaestroBonificacion
ÙÙ 0
=
ÙÙ1 2
MaestroSettings
ÙÙ3 B
.
ÙÙB C
Default
ÙÙC J
.
ÙÙJ KB
4IdDetalleMaestroNotaDeCreditoElectronicaBonificacion
ÙÙK 
;ÙÙ Ä
ViewBag
ıı 
.
ıı 2
$idDetalleMaestroDisminucionEnElValor
ıı 8
=
ıı9 :
MaestroSettings
ıı; J
.
ııJ K
Default
ııK R
.
ııR SK
<IdDetalleMaestroNotaDeCreditoElectronicaDisminucionEnElValorııS è
;ııè ê
ViewBag
ˆˆ 
.
ˆˆ ,
idDetalleMaestroOtrosConceptos
ˆˆ 2
=
ˆˆ3 4
MaestroSettings
ˆˆ5 D
.
ˆˆD E
Default
ˆˆE L
.
ˆˆL ME
6IdDetalleMaestroNotaDeCreditoElectronicaOtrosConceptosˆˆM É
;ˆˆÉ Ñ
ViewBag
˜˜ 
.
˜˜ .
 idDetalleMaestroInteresesPorMora
˜˜ 4
=
˜˜5 6
MaestroSettings
˜˜7 F
.
˜˜F G
Default
˜˜G N
.
˜˜N OF
7IdDetalleMaestroNotaDeDebitoElectronicaInteresesPorMora˜˜O Ü
;˜˜Ü á
ViewBag
¯¯ 
.
¯¯ .
 idDetalleMaestroAumentoEnElValor
¯¯ 4
=
¯¯5 6
MaestroSettings
¯¯7 F
.
¯¯F G
Default
¯¯G N
.
¯¯N OF
7IdDetalleMaestroNotaDeDebitoElectronicaAumentoEnElValor¯¯O Ü
;¯¯Ü á
ViewBag
˘˘ 
.
˘˘ 8
*idDetalleMaestroPenalidadesYOtrosConceptos
˘˘ >
=
˘˘? @
MaestroSettings
˘˘A P
.
˘˘P Q
Default
˘˘Q X
.
˘˘X YP
AIdDetalleMaestroNotaDeDebitoElectronicaPenalidadesYOtrosConceptos˘˘Y ö
;˘˘ö õ
ViewBag
˙˙ 
.
˙˙ 
fechaInicio
˙˙ 
=
˙˙  !
fechas
˙˙" (
[
˙˙( )
$num
˙˙) *
]
˙˙* +
;
˙˙+ ,
ViewBag
˚˚ 
.
˚˚ 
fechaFin
˚˚ 
=
˚˚ 
fechas
˚˚ %
[
˚˚% &
$num
˚˚& '
]
˚˚' (
;
˚˚( )
ViewBag
¸¸ 
.
¸¸ 0
"permitirCanjeDeComprobanteEnVentas
¸¸ 6
=
¸¸7 8
VentasSettings
¸¸9 G
.
¸¸G H
Default
¸¸H O
.
¸¸O P0
"PermitirCanjeDeComprobanteEnVentas
¸¸P r
;
¸¸r s
ViewBag
˝˝ 
.
˝˝ *
idTipoComprobanteNotaDeVenta
˝˝ 0
=
˝˝1 2
MaestroSettings
˝˝3 B
.
˝˝B C
Default
˝˝C J
.
˝˝J K9
+IdDetalleMaestroComprobanteNotaVentaInterna
˝˝K v
;
˝˝v w
ViewBag
˛˛ 
.
˛˛ &
idTipoComprobanteFactura
˛˛ ,
=
˛˛- .
MaestroSettings
˛˛/ >
.
˛˛> ?
Default
˛˛? F
.
˛˛F G0
"IdDetalleMaestroComprobanteFactura
˛˛G i
;
˛˛i j
ViewBag
ˇˇ 
.
ˇˇ )
idTipoDocumentoIdentidadRuc
ˇˇ /
=
ˇˇ0 1
ActorSettings
ˇˇ2 ?
.
ˇˇ? @
Default
ˇˇ@ G
.
ˇˇG H)
IdTipoDocumentoIdentidadRuc
ˇˇH c
;
ˇˇc d
ViewBag
ÄÄ 
.
ÄÄ '
numeroDecimalesEnCantidad
ÄÄ -
=
ÄÄ. / 
AplicacionSettings
ÄÄ0 B
.
ÄÄB C
Default
ÄÄC J
.
ÄÄJ K'
NumeroDecimalesEnCantidad
ÄÄK d
;
ÄÄd e
ViewBag
ÅÅ 
.
ÅÅ %
numeroDecimalesEnPrecio
ÅÅ +
=
ÅÅ, - 
AplicacionSettings
ÅÅ. @
.
ÅÅ@ A
Default
ÅÅA H
.
ÅÅH I%
NumeroDecimalesEnPrecio
ÅÅI `
;
ÅÅ` a
ViewBag
ÇÇ 
.
ÇÇ !
permitirClonarVenta
ÇÇ '
=
ÇÇ( )
VentasSettings
ÇÇ* 8
.
ÇÇ8 9
Default
ÇÇ9 @
.
ÇÇ@ A!
PermitirClonarVenta
ÇÇA T
;
ÇÇT U
ViewBag
ÉÉ 
.
ÉÉ 
idRolCliente
ÉÉ  
=
ÉÉ! "
ActorSettings
ÉÉ# 0
.
ÉÉ0 1
Default
ÉÉ1 8
.
ÉÉ8 9
IdRolCliente
ÉÉ9 E
;
ÉÉE F
ViewBag
ÑÑ 
.
ÑÑ *
tiempoEsperaBusquedaSelector
ÑÑ 0
=
ÑÑ1 2 
AplicacionSettings
ÑÑ3 E
.
ÑÑE F
Default
ÑÑF M
.
ÑÑM N>
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidad
ÑÑN ~
;
ÑÑ~ 
ViewBag
ÖÖ 
.
ÖÖ 2
$minimoCaracteresBuscarActorComercial
ÖÖ 8
=
ÖÖ9 :
ActorSettings
ÖÖ; H
.
ÖÖH I
Default
ÖÖI P
.
ÖÖP QC
4MinimoDeCaracteresParaBuscarEnSelectorActorComercialÖÖQ Ö
;ÖÖÖ Ü
ViewBag
ÜÜ 
.
ÜÜ /
!mostrarSelectorClienteEnVerVentas
ÜÜ 5
=
ÜÜ6 7
VentasSettings
ÜÜ8 F
.
ÜÜF G
Default
ÜÜG N
.
ÜÜN O/
!MostrarSelectorClienteEnVerVentas
ÜÜO p
;
ÜÜp q
ViewBag
áá 
.
áá 3
%mostrarBuscadorComprobanteEnVerVentas
áá 9
=
áá: ;
VentasSettings
áá< J
.
ááJ K
Default
ááK R
.
ááR S3
%MostrarBuscadorComprobanteEnVerVentas
ááS x
;
ááx y
ViewBag
àà 
.
àà $
permitirVentaAlCredito
àà *
=
àà+ , 
AplicacionSettings
àà- ?
.
àà? @
Default
àà@ G
.
ààG H$
PermitirVentaAlCredito
ààH ^
;
àà^ _
ViewBag
ââ 
.
ââ &
PermitirEnvioPorWhatsApp
ââ ,
=
ââ- .
VentasSettings
ââ/ =
.
ââ= >
Default
ââ> E
.
ââE F&
PermitirEnvioPorWhatsApp
ââF ^
;
ââ^ _
ViewBag
ää 
.
ää '
EnvioComprobantePostVenta
ää -
=
ää. /
VentasSettings
ää0 >
.
ää> ?
Default
ää? F
.
ääF G'
EnvioComprobantePostVenta
ääG `
;
ää` a
ViewBag
åå 
.
åå 
	WCPScript
åå 
=
åå 

Neodynamic
åå  *
.
åå* +
SDK
åå+ .
.
åå. /
Web
åå/ 2
.
åå2 3
WebClientPrint
åå3 A
.
ååA B
CreateScript
ååB N
(
ååN O
Url
çç 
.
çç 
Action
çç 
(
çç 
$str
çç +
,
çç+ ,
$str
çç- @
,
çç@ A
null
ççB F
,
ççF G
HttpContext
ççH S
.
ççS T
Request
ççT [
.
çç[ \
Url
çç\ _
.
çç_ `
Scheme
çç` f
)
ççf g
,
ççg h
Url
éé 
.
éé 
Action
éé 
(
éé 
$str
éé &
,
éé& '
$str
éé( /
,
éé/ 0
null
éé1 5
,
éé5 6
HttpContext
éé7 B
.
ééB C
Request
ééC J
.
ééJ K
Url
ééK N
.
ééN O
Scheme
ééO U
)
ééU V
,
ééV W
HttpContext
ééX c
.
ééc d
Session
ééd k
.
éék l
	SessionID
éél u
)
ééu v
;
éév w
return
èè 
View
èè 
(
èè 
)
èè 
;
èè 
}
êê 	
[
íí 	
	Authorize
íí	 
(
íí 
Roles
íí 
=
íí 
$str
íí %
)
íí% &
]
íí& '
public
ìì 
ActionResult
ìì  
VentasCorporativas
ìì .
(
ìì. /
)
ìì/ 0
{
îî 	
List
ïï 
<
ïï 
DateTime
ïï 
>
ïï 
fechas
ïï !
=
ïï" #
operacionLogica
ïï$ 3
.
ïï3 4?
1ObtenerFechaIncioyFinParaReporteVentaPuntoDeVenta
ïï4 e
(
ïïe f
)
ïïf g
;
ïïg h
ViewBag
ññ 
.
ññ '
idTipoActorPersonaNatural
ññ -
=
ññ. /
ActorSettings
ññ0 =
.
ññ= >
Default
ññ> E
.
ññE F'
IdTipoActorPersonaNatural
ññF _
;
ññ_ `
ViewBag
óó 
.
óó 
aplicaLeyAmazonia
óó %
=
óó& '!
TransaccionSettings
óó( ;
.
óó; <
Default
óó< C
.
óóC D
AplicaLeyAmazonia
óóD U
;
óóU V
ViewBag
òò 
.
òò 
tasaIGV
òò 
=
òò !
TransaccionSettings
òò 1
.
òò1 2
Default
òò2 9
.
òò9 :
TasaIGV
òò: A
;
òòA B
ViewBag
ôô 
.
ôô #
idMedioDePagoEfectivo
ôô )
=
ôô* +
MaestroSettings
ôô, ;
.
ôô; <
Default
ôô< C
.
ôôC D1
#IdDetalleMaestroMedioDepagoEfectivo
ôôD g
;
ôôg h
ViewBag
öö 
.
öö /
!ventasSujetasADisponibilidadStock
öö 5
=
öö6 7
!
öö8 9
ProfileData
öö9 D
(
ööD E
)
ööE F
.
ööF G4
&CentroAtencionQueTieneElStockIntegrada
ööG m
.
ööm n#
SalidaBienesSinStocköön Ç
;ööÇ É
ViewBag
õõ 
.
õõ (
idTipoActorPersonaJuridica
õõ .
=
õõ/ 0
ActorSettings
õõ1 >
.
õõ> ?
Default
õõ? F
.
õõF G(
IdTipoActorPersonaJuridica
õõG a
;
õõa b
ViewBag
úú 
.
úú 
precioContieneIgv
úú %
=
úú& '!
TransaccionSettings
úú( ;
.
úú; <
Default
úú< C
.
úúC D
PrecioContieneIGV
úúD U
;
úúU V
ViewBag
ùù 
.
ùù 
idClienteGenerico
ùù %
=
ùù& '
ActorSettings
ùù( 5
.
ùù5 6
Default
ùù6 =
.
ùù= >
IdClienteGenerico
ùù> O
;
ùùO P
ViewBag
ûû 
.
ûû 4
&idTipoDocumentoCuandoClienteEsGenerico
ûû :
=
ûû; <!
TransaccionSettings
ûû= P
.
ûûP Q
Default
ûûQ X
.
ûûX Y4
&IdTipoDocumentoCuandoClienteEsGenerico
ûûY 
;ûû Ä
ViewBag
üü 
.
üü 0
"idTipoDocumentoPorDefectoParaVenta
üü 6
=
üü7 8!
TransaccionSettings
üü9 L
.
üüL M
Default
üüM T
.
üüT U0
"IdTipoDocumentoPorDefectoParaVenta
üüU w
;
üüw x
ViewBag
†† 
.
†† +
mostrarAliasDeClienteGenerico
†† 1
=
††2 3!
TransaccionSettings
††4 G
.
††G H
Default
††H O
.
††O P+
MostrarAliasDeClienteGenerico
††P m
;
††m n
ViewBag
°° 
.
°° *
precioUnitarioCalculadoVenta
°° 0
=
°°1 2 
AplicacionSettings
°°3 E
.
°°E F
Default
°°F M
.
°°M N*
PrecioUnitarioCalculadoVenta
°°N j
;
°°j k
ViewBag
¢¢ 
.
¢¢ %
mostrarDetalleUnificado
¢¢ +
=
¢¢, - 
AplicacionSettings
¢¢. @
.
¢¢@ A
Default
¢¢A H
.
¢¢H I%
MostrarDetalleUnificado
¢¢I `
;
¢¢` a
ViewBag
££ 
.
££ %
checketDetalleUnificado
££ +
=
££, - 
AplicacionSettings
££. @
.
££@ A
Default
££A H
.
££H I%
ChecketDetalleUnificado
££I `
;
££` a
ViewBag
§§ 
.
§§ #
valorDetalleUnificado
§§ )
=
§§* + 
AplicacionSettings
§§, >
.
§§> ?
Default
§§? F
.
§§F G#
ValorDetalleUnificado
§§G \
;
§§\ ]
ViewBag
•• 
.
•• /
!aplicarCantidadPorDefectoEnVentas
•• 5
=
••6 7 
AplicacionSettings
••8 J
.
••J K
Default
••K R
.
••R S/
!AplicarCantidadPorDefectoEnVentas
••S t
;
••t u
ViewBag
¶¶ 
.
¶¶ (
cantidadPorDefectoEnVentas
¶¶ .
=
¶¶/ 0 
AplicacionSettings
¶¶1 C
.
¶¶C D
Default
¶¶D K
.
¶¶K L(
CantidadPorDefectoEnVentas
¶¶L f
;
¶¶f g
ViewBag
ßß 
.
ßß 
fechaHoraInicio
ßß #
=
ßß$ %
fechas
ßß& ,
[
ßß, -
$num
ßß- .
]
ßß. /
;
ßß/ 0
ViewBag
®® 
.
®® 
fechaHoraFin
®®  
=
®®! "
fechas
®®# )
[
®®) *
$num
®®* +
]
®®+ ,
;
®®, -
ViewBag
©© 
.
©© 1
#idTipoPersonaSeleccionadaPorDefecto
©© 7
=
©©8 9
ActorSettings
©©: G
.
©©G H
Default
©©H O
.
©©O P1
#IdTipoPersonaSeleccionadaPorDefecto
©©P s
;
©©s t
ViewBag
™™ 
.
™™ >
0idTipoDocumentoSeleccionadaConTipoPersonaNatural
™™ D
=
™™E F
ActorSettings
™™G T
.
™™T U
Default
™™U \
.
™™\ ]?
0IdTipoDocumentoSeleccionadaConTipoPersonaNatural™™] ç
;™™ç é
ViewBag
´´ 
.
´´ ?
1idTipoDocumentoSeleccionadaConTipoPersonaJuridica
´´ E
=
´´F G
ActorSettings
´´H U
.
´´U V
Default
´´V ]
.
´´] ^@
1IdTipoDocumentoSeleccionadaConTipoPersonaJuridica´´^ è
;´´è ê
ViewBag
¨¨ 
.
¨¨ *
precioUnitarioIngresadoVenta
¨¨ 0
=
¨¨1 2 
AplicacionSettings
¨¨3 E
.
¨¨E F
Default
¨¨F M
.
¨¨M N*
PrecioUnitarioIngresadoVenta
¨¨N j
;
¨¨j k
ViewBag
≠≠ 
.
≠≠ )
idTipoDocumentoIdentidadDni
≠≠ /
=
≠≠0 1
ActorSettings
≠≠2 ?
.
≠≠? @
Default
≠≠@ G
.
≠≠G H)
IdTipoDocumentoIdentidadDni
≠≠H c
;
≠≠c d
ViewBag
ÆÆ 
.
ÆÆ )
idTipoDocumentoIdentidadRuc
ÆÆ /
=
ÆÆ0 1
ActorSettings
ÆÆ2 ?
.
ÆÆ? @
Default
ÆÆ@ G
.
ÆÆG H)
IdTipoDocumentoIdentidadRuc
ÆÆH c
;
ÆÆc d
ViewBag
ØØ 
.
ØØ 5
'idDetalleMaestroCatalogoDocumentoBoleta
ØØ ;
=
ØØ< =
MaestroSettings
ØØ> M
.
ØØM N
Default
ØØN U
.
ØØU V/
!IdDetalleMaestroComprobanteBoleta
ØØV w
;
ØØw x
ViewBag
∞∞ 
.
∞∞ 6
(idDetalleMaestroCatalogoDocumentoFactura
∞∞ <
=
∞∞= >
MaestroSettings
∞∞? N
.
∞∞N O
Default
∞∞O V
.
∞∞V W0
"IdDetalleMaestroComprobanteFactura
∞∞W y
;
∞∞y z
ViewBag
±± 
.
±± ?
1montoMaximoAVenderCuandoClienteNoEstaIdenticicado
±± E
=
±±F G,
FacturacionElectronicaSettings
±±H f
.
±±f g
Default
±±g n
.
±±n o@
1MontoMaximoAVenderCuandoClienteNoEstaIdenticicado±±o †
;±±† °
ViewBag
≤≤ 
.
≤≤ $
permitirVentaAlCredito
≤≤ *
=
≤≤+ , 
AplicacionSettings
≤≤- ?
.
≤≤? @
Default
≤≤@ G
.
≤≤G H$
PermitirVentaAlCredito
≤≤H ^
;
≤≤^ _
ViewBag
≥≥ 
.
≥≥ )
permitirVentaConFechaPasada
≥≥ /
=
≥≥0 1 
AplicacionSettings
≥≥2 D
.
≥≥D E
Default
≥≥E L
.
≥≥L M)
PermitirVentaConFechaPasada
≥≥M h
;
≥≥h i
ViewBag
¥¥ 
.
¥¥ 
fechaActual
¥¥ 
=
¥¥  !
DateTimeUtil
¥¥" .
.
¥¥. /
FechaActual
¥¥/ :
(
¥¥: ;
)
¥¥; <
;
¥¥< =
ViewBag
µµ 
.
µµ #
permitirRegistroFlete
µµ )
=
µµ* + 
AplicacionSettings
µµ, >
.
µµ> ?
Default
µµ? F
.
µµF G*
PermitirRegistroFleteEnVenta
µµG c
;
µµc d
ViewBag
∂∂ 
.
∂∂ ,
idUbigeoSeleccionadoPorDefecto
∂∂ 2
=
∂∂3 4
ActorSettings
∂∂5 B
.
∂∂B C
Default
∂∂C J
.
∂∂J K,
IdUbigeoSeleccionadoPorDefecto
∂∂K i
;
∂∂i j
ViewBag
∑∑ 
.
∑∑ +
modoIngresoCodigoBarraEnVenta
∑∑ 1
=
∑∑2 3
VentasSettings
∑∑4 B
.
∑∑B C
Default
∑∑C J
.
∑∑J K1
#ModoDeIngresoDeCodigoDeBarraEnVenta
∑∑K n
;
∑∑n o
ViewBag
∏∏ 
.
∏∏ 0
"cursorPorDefectoCodigoBarraEnVenta
∏∏ 6
=
∏∏7 8
VentasSettings
∏∏9 G
.
∏∏G H
Default
∏∏H O
.
∏∏O P2
$CursorPorDefectoEnCodigoBarraEnVenta
∏∏P t
;
∏∏t u
ViewBag
ππ 
.
ππ 2
$idEstablecimientoComercialPorDefecto
ππ 8
=
ππ9 :
ProfileData
ππ; F
(
ππF G
)
ππG H
.
ππH I*
CentroDeAtencionSeleccionado
ππI e
.
ππe f&
EstablecimientoComercial
ππf ~
.
ππ~ 
Idππ Å
;ππÅ Ç
ViewBag
∫∫ 
.
∫∫ (
idCentroAtencionPorDefecto
∫∫ .
=
∫∫/ 0
ProfileData
∫∫1 <
(
∫∫< =
)
∫∫= >
.
∫∫> ?,
IdCentroDeAtencionSeleccionado
∫∫? ]
;
∫∫] ^
ViewBag
ªª 
.
ªª "
idEmpleadoPorDefecto
ªª (
=
ªª) *
ProfileData
ªª+ 6
(
ªª6 7
)
ªª7 8
.
ªª8 9
Empleado
ªª9 A
.
ªªA B
Id
ªªB D
;
ªªD E
ViewBag
ºº 
.
ºº 1
#idDetalleMaestroMedioDePagoEfectivo
ºº 7
=
ºº8 9
MaestroSettings
ºº: I
.
ººI J
Default
ººJ Q
.
ººQ R1
#IdDetalleMaestroMedioDepagoEfectivo
ººR u
;
ººu v
ViewBag
ΩΩ 
.
ΩΩ 4
&idDetalleMaestroEntidadBancariaNinguna
ΩΩ :
=
ΩΩ; <
MaestroSettings
ΩΩ= L
.
ΩΩL M
Default
ΩΩM T
.
ΩΩT U4
&IdDetalleMaestroEntidadBancariaNinguna
ΩΩU {
;
ΩΩ{ |
ViewBag
ææ 
.
ææ ,
idDocumentoNotaAlamacenInterna
ææ 2
=
ææ3 4
MaestroSettings
ææ5 D
.
ææD E
Default
ææE L
.
ææL M;
-IdDetalleMaestroComprobanteNotaAlmacenInterna
ææM z
;
ææz {
ViewBag
øø 
.
øø 
direccionSede
øø !
=
øø" #
(
øø$ %
ObtenerSede
øø% 0
(
øø0 1
)
øø1 2
.
øø2 3
DomicilioFiscal
øø3 B
!=
øøC E
null
øøF J
)
øøJ K
?
øøL M
ObtenerSede
øøN Y
(
øøY Z
)
øøZ [
.
øø[ \
DomicilioFiscal
øø\ k
.
øøk l
Detalle
øøl s
+
øøt u
$str
øøv {
+
øø| }
ObtenerSedeøø~ â
(øøâ ä
)øøä ã
.øøã å
DomicilioFiscaløøå õ
.øøõ ú
Ubigeoøøú ¢
.øø¢ £
Nombreøø£ ©
:øø™ ´
$strøø¨ Ø
;øøØ ∞
ViewBag
¿¿ 
.
¿¿ +
idModalidadTrasladoPorDefecto
¿¿ 1
=
¿¿2 3
MaestroSettings
¿¿4 C
.
¿¿C D
Default
¿¿D K
.
¿¿K LC
4IdDetalleMaestroModalidadDeTrasladoTransportePublico¿¿L Ä
;¿¿Ä Å
ViewBag
¡¡ 
.
¡¡ (
idMotivoTrasladoPorDefecto
¡¡ .
=
¡¡/ 0
MaestroSettings
¡¡1 @
.
¡¡@ A
Default
¡¡A H
.
¡¡H I7
)IdDetalleMaestroMotivoDeTrasladoPorCompra
¡¡I r
;
¡¡r s
ViewBag
¬¬ 
.
¬¬ ,
idUbigeoSeleccionadoPorDefecto
¬¬ 2
=
¬¬3 4
ActorSettings
¬¬5 B
.
¬¬B C
Default
¬¬C J
.
¬¬J K5
'idUbigeoSeleccionadoPorDefectoEnCliente
¬¬K r
;
¬¬r s
ViewBag
√√ 
.
√√ $
idUbigeoNoEspecificado
√√ *
=
√√+ ,
ActorSettings
√√- :
.
√√: ;
Default
√√; B
.
√√B C$
idUbigeoNoEspecificado
√√C Y
;
√√Y Z
ViewBag
ƒƒ 
.
ƒƒ +
idConceptoBasicoBolsaPlastica
ƒƒ 1
=
ƒƒ2 3
MaestroSettings
ƒƒ4 C
.
ƒƒC D
Default
ƒƒD K
.
ƒƒK L9
+IdDetalleMaestroConceptoBasicoBolsaPlastica
ƒƒL w
;
ƒƒw x
ViewBag
≈≈ 
.
≈≈ 3
%idComprobantePredeterminadoPorDefecto
≈≈ 9
=
≈≈: ;
MaestroSettings
≈≈< K
.
≈≈K L
Default
≈≈L S
.
≈≈S T9
+IdDetalleMaestroComprobanteNotaVentaInterna
≈≈T 
;≈≈ Ä
ViewBag
«« 
.
«« 
	WCPScript
«« 
=
«« 

Neodynamic
««  *
.
««* +
SDK
««+ .
.
««. /
Web
««/ 2
.
««2 3
WebClientPrint
««3 A
.
««A B
CreateScript
««B N
(
««N O
Url
»» 
.
»» 
Action
»» 
(
»» 
$str
»» +
,
»»+ ,
$str
»»- @
,
»»@ A
null
»»B F
,
»»F G
HttpContext
»»H S
.
»»S T
Request
»»T [
.
»»[ \
Url
»»\ _
.
»»_ `
Scheme
»»` f
)
»»f g
,
»»g h
Url
…… 
.
…… 
Action
…… 
(
…… 
$str
…… &
,
……& '
$str
……( /
,
……/ 0
null
……1 5
,
……5 6
HttpContext
……7 B
.
……B C
Request
……C J
.
……J K
Url
……K N
.
……N O
Scheme
……O U
)
……U V
,
……V W
HttpContext
……X c
.
……c d
Session
……d k
.
……k l
	SessionID
……l u
)
……u v
;
……v w
return
   
View
   
(
   
)
   
;
   
}
ÃÃ 	
[
ŒŒ 	
	Authorize
ŒŒ	 
(
ŒŒ 
Roles
ŒŒ 
=
ŒŒ 
$str
ŒŒ %
)
ŒŒ% &
]
ŒŒ& '
public
œœ 
ActionResult
œœ )
ConsultarVentasCorporativas
œœ 7
(
œœ7 8
)
œœ8 9
{
–– 	
List
—— 
<
—— 
DateTime
—— 
>
—— 
fechas
—— !
=
——" #
operacionLogica
——$ 3
.
——3 4?
1ObtenerFechaIncioyFinParaReporteVentaPuntoDeVenta
——4 e
(
——e f
)
——f g
;
——g h
ViewBag
““ 
.
““ 
aplicaLeyAmazonia
““ %
=
““& '!
TransaccionSettings
““( ;
.
““; <
Default
““< C
.
““C D
AplicaLeyAmazonia
““D U
;
““U V
ViewBag
”” 
.
”” 
tasaIGV
”” 
=
”” !
TransaccionSettings
”” 1
.
””1 2
Default
””2 9
.
””9 :
TasaIGV
””: A
;
””A B
ViewBag
‘‘ 
.
‘‘ #
idMedioDePagoEfectivo
‘‘ )
=
‘‘* +
MaestroSettings
‘‘, ;
.
‘‘; <
Default
‘‘< C
.
‘‘C D1
#IdDetalleMaestroMedioDepagoEfectivo
‘‘D g
;
‘‘g h
ViewBag
’’ 
.
’’ /
!ventasSujetasADisponibilidadStock
’’ 5
=
’’6 7
!
’’8 9
ProfileData
’’9 D
(
’’D E
)
’’E F
.
’’F G4
&CentroAtencionQueTieneElStockIntegrada
’’G m
.
’’m n#
SalidaBienesSinStock’’n Ç
;’’Ç É
ViewBag
÷÷ 
.
÷÷ (
idTipoActorPersonaJuridica
÷÷ .
=
÷÷/ 0
ActorSettings
÷÷1 >
.
÷÷> ?
Default
÷÷? F
.
÷÷F G(
IdTipoActorPersonaJuridica
÷÷G a
;
÷÷a b
ViewBag
◊◊ 
.
◊◊ 
precioContieneIgv
◊◊ %
=
◊◊& '!
TransaccionSettings
◊◊( ;
.
◊◊; <
Default
◊◊< C
.
◊◊C D
PrecioContieneIGV
◊◊D U
;
◊◊U V
ViewBag
ÿÿ 
.
ÿÿ 
idClienteGenerico
ÿÿ %
=
ÿÿ& '
ActorSettings
ÿÿ( 5
.
ÿÿ5 6
Default
ÿÿ6 =
.
ÿÿ= >
IdClienteGenerico
ÿÿ> O
;
ÿÿO P
ViewBag
ŸŸ 
.
ŸŸ 4
&idTipoDocumentoCuandoClienteEsGenerico
ŸŸ :
=
ŸŸ; <!
TransaccionSettings
ŸŸ= P
.
ŸŸP Q
Default
ŸŸQ X
.
ŸŸX Y4
&IdTipoDocumentoCuandoClienteEsGenerico
ŸŸY 
;ŸŸ Ä
ViewBag
⁄⁄ 
.
⁄⁄ 0
"idTipoDocumentoPorDefectoParaVenta
⁄⁄ 6
=
⁄⁄7 8!
TransaccionSettings
⁄⁄9 L
.
⁄⁄L M
Default
⁄⁄M T
.
⁄⁄T U0
"IdTipoDocumentoPorDefectoParaVenta
⁄⁄U w
;
⁄⁄w x
ViewBag
€€ 
.
€€ +
mostrarAliasDeClienteGenerico
€€ 1
=
€€2 3!
TransaccionSettings
€€4 G
.
€€G H
Default
€€H O
.
€€O P+
MostrarAliasDeClienteGenerico
€€P m
;
€€m n
ViewBag
‹‹ 
.
‹‹ *
precioUnitarioCalculadoVenta
‹‹ 0
=
‹‹1 2 
AplicacionSettings
‹‹3 E
.
‹‹E F
Default
‹‹F M
.
‹‹M N*
PrecioUnitarioCalculadoVenta
‹‹N j
;
‹‹j k
ViewBag
›› 
.
›› %
mostrarDetalleUnificado
›› +
=
››, - 
AplicacionSettings
››. @
.
››@ A
Default
››A H
.
››H I%
MostrarDetalleUnificado
››I `
;
››` a
ViewBag
ﬁﬁ 
.
ﬁﬁ %
checketDetalleUnificado
ﬁﬁ +
=
ﬁﬁ, - 
AplicacionSettings
ﬁﬁ. @
.
ﬁﬁ@ A
Default
ﬁﬁA H
.
ﬁﬁH I%
ChecketDetalleUnificado
ﬁﬁI `
;
ﬁﬁ` a
ViewBag
ﬂﬂ 
.
ﬂﬂ #
valorDetalleUnificado
ﬂﬂ )
=
ﬂﬂ* + 
AplicacionSettings
ﬂﬂ, >
.
ﬂﬂ> ?
Default
ﬂﬂ? F
.
ﬂﬂF G#
ValorDetalleUnificado
ﬂﬂG \
;
ﬂﬂ\ ]
ViewBag
‡‡ 
.
‡‡ /
!aplicarCantidadPorDefectoEnVentas
‡‡ 5
=
‡‡6 7 
AplicacionSettings
‡‡8 J
.
‡‡J K
Default
‡‡K R
.
‡‡R S/
!AplicarCantidadPorDefectoEnVentas
‡‡S t
;
‡‡t u
ViewBag
·· 
.
·· (
cantidadPorDefectoEnVentas
·· .
=
··/ 0 
AplicacionSettings
··1 C
.
··C D
Default
··D K
.
··K L(
CantidadPorDefectoEnVentas
··L f
;
··f g
ViewBag
‚‚ 
.
‚‚ 
fechaHoraInicio
‚‚ #
=
‚‚$ %
fechas
‚‚& ,
[
‚‚, -
$num
‚‚- .
]
‚‚. /
;
‚‚/ 0
ViewBag
„„ 
.
„„ 
fechaHoraFin
„„  
=
„„! "
fechas
„„# )
[
„„) *
$num
„„* +
]
„„+ ,
;
„„, -
ViewBag
‰‰ 
.
‰‰ 1
#idTipoPersonaSeleccionadaPorDefecto
‰‰ 7
=
‰‰8 9
ActorSettings
‰‰: G
.
‰‰G H
Default
‰‰H O
.
‰‰O P1
#IdTipoPersonaSeleccionadaPorDefecto
‰‰P s
;
‰‰s t
ViewBag
ÂÂ 
.
ÂÂ >
0idTipoDocumentoSeleccionadaConTipoPersonaNatural
ÂÂ D
=
ÂÂE F
ActorSettings
ÂÂG T
.
ÂÂT U
Default
ÂÂU \
.
ÂÂ\ ]?
0IdTipoDocumentoSeleccionadaConTipoPersonaNaturalÂÂ] ç
;ÂÂç é
ViewBag
ÊÊ 
.
ÊÊ ?
1idTipoDocumentoSeleccionadaConTipoPersonaJuridica
ÊÊ E
=
ÊÊF G
ActorSettings
ÊÊH U
.
ÊÊU V
Default
ÊÊV ]
.
ÊÊ] ^@
1IdTipoDocumentoSeleccionadaConTipoPersonaJuridicaÊÊ^ è
;ÊÊè ê
ViewBag
ÁÁ 
.
ÁÁ *
precioUnitarioIngresadoVenta
ÁÁ 0
=
ÁÁ1 2 
AplicacionSettings
ÁÁ3 E
.
ÁÁE F
Default
ÁÁF M
.
ÁÁM N*
PrecioUnitarioIngresadoVenta
ÁÁN j
;
ÁÁj k
ViewBag
ËË 
.
ËË )
idTipoDocumentoIdentidadDni
ËË /
=
ËË0 1
ActorSettings
ËË2 ?
.
ËË? @
Default
ËË@ G
.
ËËG H)
IdTipoDocumentoIdentidadDni
ËËH c
;
ËËc d
ViewBag
ÈÈ 
.
ÈÈ )
idTipoDocumentoIdentidadRuc
ÈÈ /
=
ÈÈ0 1
ActorSettings
ÈÈ2 ?
.
ÈÈ? @
Default
ÈÈ@ G
.
ÈÈG H)
IdTipoDocumentoIdentidadRuc
ÈÈH c
;
ÈÈc d
ViewBag
ÍÍ 
.
ÍÍ 5
'idDetalleMaestroCatalogoDocumentoBoleta
ÍÍ ;
=
ÍÍ< =
MaestroSettings
ÍÍ> M
.
ÍÍM N
Default
ÍÍN U
.
ÍÍU V/
!IdDetalleMaestroComprobanteBoleta
ÍÍV w
;
ÍÍw x
ViewBag
ÎÎ 
.
ÎÎ ?
1montoMaximoAVenderCuandoClienteNoEstaIdenticicado
ÎÎ E
=
ÎÎF G,
FacturacionElectronicaSettings
ÎÎH f
.
ÎÎf g
Default
ÎÎg n
.
ÎÎn o@
1MontoMaximoAVenderCuandoClienteNoEstaIdenticicadoÎÎo †
;ÎÎ† °
ViewBag
ÏÏ 
.
ÏÏ $
permitirVentaAlCredito
ÏÏ *
=
ÏÏ+ , 
AplicacionSettings
ÏÏ- ?
.
ÏÏ? @
Default
ÏÏ@ G
.
ÏÏG H$
PermitirVentaAlCredito
ÏÏH ^
;
ÏÏ^ _
ViewBag
ÌÌ 
.
ÌÌ )
permitirVentaConFechaPasada
ÌÌ /
=
ÌÌ0 1 
AplicacionSettings
ÌÌ2 D
.
ÌÌD E
Default
ÌÌE L
.
ÌÌL M)
PermitirVentaConFechaPasada
ÌÌM h
;
ÌÌh i
ViewBag
ÓÓ 
.
ÓÓ 
fechaActual
ÓÓ 
=
ÓÓ  !
DateTimeUtil
ÓÓ" .
.
ÓÓ. /
FechaActual
ÓÓ/ :
(
ÓÓ: ;
)
ÓÓ; <
;
ÓÓ< =
ViewBag
ÔÔ 
.
ÔÔ #
permitirRegistroFlete
ÔÔ )
=
ÔÔ* + 
AplicacionSettings
ÔÔ, >
.
ÔÔ> ?
Default
ÔÔ? F
.
ÔÔF G*
PermitirRegistroFleteEnVenta
ÔÔG c
;
ÔÔc d
ViewBag
 
.
 
fechaInicio
 
=
  !
DateTimeUtil
" .
.
. /
FechaActual
/ :
(
: ;
)
; <
.
< =
	AddMonths
= F
(
F G
-
G H
$num
H I
)
I J
.
J K
ToString
K S
(
S T
$str
T `
)
` a
;
a b
ViewBag
ÒÒ 
.
ÒÒ 
fechaFin
ÒÒ 
=
ÒÒ 
DateTimeUtil
ÒÒ +
.
ÒÒ+ ,
FechaActual
ÒÒ, 7
(
ÒÒ7 8
)
ÒÒ8 9
.
ÒÒ9 :
ToString
ÒÒ: B
(
ÒÒB C
$str
ÒÒC O
)
ÒÒO P
;
ÒÒP Q
ViewBag
ÚÚ 
.
ÚÚ ,
idUbigeoSeleccionadoPorDefecto
ÚÚ 2
=
ÚÚ3 4
ActorSettings
ÚÚ5 B
.
ÚÚB C
Default
ÚÚC J
.
ÚÚJ K5
'idUbigeoSeleccionadoPorDefectoEnCliente
ÚÚK r
;
ÚÚr s
ViewBag
ÛÛ 
.
ÛÛ $
idUbigeoNoEspecificado
ÛÛ *
=
ÛÛ+ ,
ActorSettings
ÛÛ- :
.
ÛÛ: ;
Default
ÛÛ; B
.
ÛÛB C$
idUbigeoNoEspecificado
ÛÛC Y
;
ÛÛY Z
ViewBag
ÙÙ 
.
ÙÙ 3
%idComprobantePredeterminadoPorDefecto
ÙÙ 9
=
ÙÙ: ;
MaestroSettings
ÙÙ< K
.
ÙÙK L
Default
ÙÙL S
.
ÙÙS T9
+IdDetalleMaestroComprobanteNotaVentaInterna
ÙÙT 
;ÙÙ Ä
ViewBag
ˆˆ 
.
ˆˆ 
	WCPScript
ˆˆ 
=
ˆˆ 

Neodynamic
ˆˆ  *
.
ˆˆ* +
SDK
ˆˆ+ .
.
ˆˆ. /
Web
ˆˆ/ 2
.
ˆˆ2 3
WebClientPrint
ˆˆ3 A
.
ˆˆA B
CreateScript
ˆˆB N
(
ˆˆN O
Url
˜˜ 
.
˜˜ 
Action
˜˜ 
(
˜˜ 
$str
˜˜ +
,
˜˜+ ,
$str
˜˜- @
,
˜˜@ A
null
˜˜B F
,
˜˜F G
HttpContext
˜˜H S
.
˜˜S T
Request
˜˜T [
.
˜˜[ \
Url
˜˜\ _
.
˜˜_ `
Scheme
˜˜` f
)
˜˜f g
,
˜˜g h
Url
¯¯ 
.
¯¯ 
Action
¯¯ 
(
¯¯ 
$str
¯¯ &
,
¯¯& '
$str
¯¯( /
,
¯¯/ 0
null
¯¯1 5
,
¯¯5 6
HttpContext
¯¯7 B
.
¯¯B C
Request
¯¯C J
.
¯¯J K
Url
¯¯K N
.
¯¯N O
Scheme
¯¯O U
)
¯¯U V
,
¯¯V W
HttpContext
¯¯X c
.
¯¯c d
Session
¯¯d k
.
¯¯k l
	SessionID
¯¯l u
)
¯¯u v
;
¯¯v w
return
˘˘ 
View
˘˘ 
(
˘˘ 
)
˘˘ 
;
˘˘ 
}
˙˙ 	
[
¸¸ 	
	Authorize
¸¸	 
(
¸¸ 
Roles
¸¸ 
=
¸¸ 
$str
¸¸ %
)
¸¸% &
]
¸¸& '
public
˝˝ 
ActionResult
˝˝ 
PuntoDeVenta
˝˝ (
(
˝˝( )
)
˝˝) *
{
˛˛ 	
List
ˇˇ 
<
ˇˇ 
DateTime
ˇˇ 
>
ˇˇ 
fechas
ˇˇ !
=
ˇˇ" #
operacionLogica
ˇˇ$ 3
.
ˇˇ3 4?
1ObtenerFechaIncioyFinParaReporteVentaPuntoDeVenta
ˇˇ4 e
(
ˇˇe f
)
ˇˇf g
;
ˇˇg h
ViewBag
ÄÄ 
.
ÄÄ 
aplicaLeyAmazonia
ÄÄ %
=
ÄÄ& '!
TransaccionSettings
ÄÄ( ;
.
ÄÄ; <
Default
ÄÄ< C
.
ÄÄC D
AplicaLeyAmazonia
ÄÄD U
;
ÄÄU V
ViewBag
ÅÅ 
.
ÅÅ 
tasaIGV
ÅÅ 
=
ÅÅ !
TransaccionSettings
ÅÅ 1
.
ÅÅ1 2
Default
ÅÅ2 9
.
ÅÅ9 :
TasaIGV
ÅÅ: A
;
ÅÅA B
ViewBag
ÇÇ 
.
ÇÇ #
idMedioDePagoEfectivo
ÇÇ )
=
ÇÇ* +
MaestroSettings
ÇÇ, ;
.
ÇÇ; <
Default
ÇÇ< C
.
ÇÇC D1
#IdDetalleMaestroMedioDepagoEfectivo
ÇÇD g
;
ÇÇg h
ViewBag
ÉÉ 
.
ÉÉ /
!ventasSujetasADisponibilidadStock
ÉÉ 5
=
ÉÉ6 7
!
ÉÉ8 9
ProfileData
ÉÉ9 D
(
ÉÉD E
)
ÉÉE F
.
ÉÉF G4
&CentroAtencionQueTieneElStockIntegrada
ÉÉG m
.
ÉÉm n#
SalidaBienesSinStockÉÉn Ç
;ÉÉÇ É
ViewBag
ÑÑ 
.
ÑÑ (
idTipoActorPersonaJuridica
ÑÑ .
=
ÑÑ/ 0
ActorSettings
ÑÑ1 >
.
ÑÑ> ?
Default
ÑÑ? F
.
ÑÑF G(
IdTipoActorPersonaJuridica
ÑÑG a
;
ÑÑa b
ViewBag
ÖÖ 
.
ÖÖ 
precioContieneIgv
ÖÖ %
=
ÖÖ& '!
TransaccionSettings
ÖÖ( ;
.
ÖÖ; <
Default
ÖÖ< C
.
ÖÖC D
PrecioContieneIGV
ÖÖD U
;
ÖÖU V
ViewBag
ÜÜ 
.
ÜÜ 
idClienteGenerico
ÜÜ %
=
ÜÜ& '
ActorSettings
ÜÜ( 5
.
ÜÜ5 6
Default
ÜÜ6 =
.
ÜÜ= >
IdClienteGenerico
ÜÜ> O
;
ÜÜO P
ViewBag
áá 
.
áá 4
&idTipoDocumentoCuandoClienteEsGenerico
áá :
=
áá; <!
TransaccionSettings
áá= P
.
ááP Q
Default
ááQ X
.
ááX Y4
&IdTipoDocumentoCuandoClienteEsGenerico
ááY 
;áá Ä
ViewBag
àà 
.
àà 0
"idTipoDocumentoPorDefectoParaVenta
àà 6
=
àà7 8!
TransaccionSettings
àà9 L
.
ààL M
Default
ààM T
.
ààT U0
"IdTipoDocumentoPorDefectoParaVenta
ààU w
;
ààw x
ViewBag
ââ 
.
ââ +
mostrarAliasDeClienteGenerico
ââ 1
=
ââ2 3!
TransaccionSettings
ââ4 G
.
ââG H
Default
ââH O
.
ââO P+
MostrarAliasDeClienteGenerico
ââP m
;
ââm n
ViewBag
ää 
.
ää *
precioUnitarioCalculadoVenta
ää 0
=
ää1 2 
AplicacionSettings
ää3 E
.
ääE F
Default
ääF M
.
ääM N*
PrecioUnitarioCalculadoVenta
ääN j
;
ääj k
ViewBag
ãã 
.
ãã %
mostrarDetalleUnificado
ãã +
=
ãã, - 
AplicacionSettings
ãã. @
.
ãã@ A
Default
ããA H
.
ããH I%
MostrarDetalleUnificado
ããI `
;
ãã` a
ViewBag
åå 
.
åå %
checketDetalleUnificado
åå +
=
åå, - 
AplicacionSettings
åå. @
.
åå@ A
Default
ååA H
.
ååH I%
ChecketDetalleUnificado
ååI `
;
åå` a
ViewBag
çç 
.
çç #
valorDetalleUnificado
çç )
=
çç* + 
AplicacionSettings
çç, >
.
çç> ?
Default
çç? F
.
ççF G#
ValorDetalleUnificado
ççG \
;
çç\ ]
ViewBag
éé 
.
éé /
!aplicarCantidadPorDefectoEnVentas
éé 5
=
éé6 7 
AplicacionSettings
éé8 J
.
ééJ K
Default
ééK R
.
ééR S/
!AplicarCantidadPorDefectoEnVentas
ééS t
;
éét u
ViewBag
èè 
.
èè (
cantidadPorDefectoEnVentas
èè .
=
èè/ 0 
AplicacionSettings
èè1 C
.
èèC D
Default
èèD K
.
èèK L(
CantidadPorDefectoEnVentas
èèL f
;
èèf g
ViewBag
êê 
.
êê 
fechaHoraInicio
êê #
=
êê$ %
fechas
êê& ,
[
êê, -
$num
êê- .
]
êê. /
;
êê/ 0
ViewBag
ëë 
.
ëë 
fechaHoraFin
ëë  
=
ëë! "
fechas
ëë# )
[
ëë) *
$num
ëë* +
]
ëë+ ,
;
ëë, -
ViewBag
íí 
.
íí 1
#idTipoPersonaSeleccionadaPorDefecto
íí 7
=
íí8 9
ActorSettings
íí: G
.
ííG H
Default
ííH O
.
ííO P1
#IdTipoPersonaSeleccionadaPorDefecto
ííP s
;
íís t
ViewBag
ìì 
.
ìì >
0idTipoDocumentoSeleccionadaConTipoPersonaNatural
ìì D
=
ììE F
ActorSettings
ììG T
.
ììT U
Default
ììU \
.
ìì\ ]?
0IdTipoDocumentoSeleccionadaConTipoPersonaNaturalìì] ç
;ììç é
ViewBag
îî 
.
îî ?
1idTipoDocumentoSeleccionadaConTipoPersonaJuridica
îî E
=
îîF G
ActorSettings
îîH U
.
îîU V
Default
îîV ]
.
îî] ^@
1IdTipoDocumentoSeleccionadaConTipoPersonaJuridicaîî^ è
;îîè ê
ViewBag
ïï 
.
ïï *
precioUnitarioIngresadoVenta
ïï 0
=
ïï1 2 
AplicacionSettings
ïï3 E
.
ïïE F
Default
ïïF M
.
ïïM N*
PrecioUnitarioIngresadoVenta
ïïN j
;
ïïj k
ViewBag
ññ 
.
ññ )
idTipoDocumentoIdentidadDni
ññ /
=
ññ0 1
ActorSettings
ññ2 ?
.
ññ? @
Default
ññ@ G
.
ññG H)
IdTipoDocumentoIdentidadDni
ññH c
;
ññc d
ViewBag
óó 
.
óó )
idTipoDocumentoIdentidadRuc
óó /
=
óó0 1
ActorSettings
óó2 ?
.
óó? @
Default
óó@ G
.
óóG H)
IdTipoDocumentoIdentidadRuc
óóH c
;
óóc d
ViewBag
òò 
.
òò 5
'idDetalleMaestroCatalogoDocumentoBoleta
òò ;
=
òò< =
MaestroSettings
òò> M
.
òòM N
Default
òòN U
.
òòU V/
!IdDetalleMaestroComprobanteBoleta
òòV w
;
òòw x
ViewBag
ôô 
.
ôô 6
(idDetalleMaestroCatalogoDocumentoFactura
ôô <
=
ôô= >
MaestroSettings
ôô? N
.
ôôN O
Default
ôôO V
.
ôôV W0
"IdDetalleMaestroComprobanteFactura
ôôW y
;
ôôy z
ViewBag
öö 
.
öö ?
1montoMaximoAVenderCuandoClienteNoEstaIdenticicado
öö E
=
ööF G,
FacturacionElectronicaSettings
ööH f
.
ööf g
Default
öög n
.
öön o@
1MontoMaximoAVenderCuandoClienteNoEstaIdenticicadoööo †
;öö† °
ViewBag
õõ 
.
õõ $
permitirVentaAlCredito
õõ *
=
õõ+ , 
AplicacionSettings
õõ- ?
.
õõ? @
Default
õõ@ G
.
õõG H$
PermitirVentaAlCredito
õõH ^
;
õõ^ _
ViewBag
úú 
.
úú )
permitirVentaConFechaPasada
úú /
=
úú0 1 
AplicacionSettings
úú2 D
.
úúD E
Default
úúE L
.
úúL M)
PermitirVentaConFechaPasada
úúM h
;
úúh i
ViewBag
ùù 
.
ùù 
fechaActual
ùù 
=
ùù  !
DateTimeUtil
ùù" .
.
ùù. /
FechaActual
ùù/ :
(
ùù: ;
)
ùù; <
;
ùù< =
ViewBag
ûû 
.
ûû #
permitirRegistroFlete
ûû )
=
ûû* + 
AplicacionSettings
ûû, >
.
ûû> ?
Default
ûû? F
.
ûûF G*
PermitirRegistroFleteEnVenta
ûûG c
;
ûûc d
ViewBag
üü 
.
üü !
VenderConBoletaCada
üü '
=
üü( )
VentasSettings
üü* 8
.
üü8 9
Default
üü9 @
.
üü@ A!
VenderConBoletaCada
üüA T
;
üüT U
ViewBag
†† 
.
†† ,
idUbigeoSeleccionadoPorDefecto
†† 2
=
††3 4
ActorSettings
††5 B
.
††B C
Default
††C J
.
††J K5
'idUbigeoSeleccionadoPorDefectoEnCliente
††K r
;
††r s
ViewBag
°° 
.
°° $
idUbigeoNoEspecificado
°° *
=
°°+ ,
ActorSettings
°°- :
.
°°: ;
Default
°°; B
.
°°B C$
idUbigeoNoEspecificado
°°C Y
;
°°Y Z
ViewBag
¢¢ 
.
¢¢ +
modoIngresoCodigoBarraEnVenta
¢¢ 1
=
¢¢2 3
VentasSettings
¢¢4 B
.
¢¢B C
Default
¢¢C J
.
¢¢J K1
#ModoDeIngresoDeCodigoDeBarraEnVenta
¢¢K n
;
¢¢n o
ViewBag
££ 
.
££ 0
"cursorPorDefectoCodigoBarraEnVenta
££ 6
=
££7 8
VentasSettings
££9 G
.
££G H
Default
££H O
.
££O P2
$CursorPorDefectoEnCodigoBarraEnVenta
££P t
;
££t u
ViewBag
§§ 
.
§§ 3
%idComprobantePredeterminadoPorDefecto
§§ 9
=
§§: ;
MaestroSettings
§§< K
.
§§K L
Default
§§L S
.
§§S T9
+IdDetalleMaestroComprobanteNotaVentaInterna
§§T 
;§§ Ä
ViewBag
¶¶ 
.
¶¶ 
	WCPScript
¶¶ 
=
¶¶ 

Neodynamic
¶¶  *
.
¶¶* +
SDK
¶¶+ .
.
¶¶. /
Web
¶¶/ 2
.
¶¶2 3
WebClientPrint
¶¶3 A
.
¶¶A B
CreateScript
¶¶B N
(
¶¶N O
Url
ßß 
.
ßß 
Action
ßß 
(
ßß 
$str
ßß +
,
ßß+ ,
$str
ßß- @
,
ßß@ A
null
ßßB F
,
ßßF G
HttpContext
ßßH S
.
ßßS T
Request
ßßT [
.
ßß[ \
Url
ßß\ _
.
ßß_ `
Scheme
ßß` f
)
ßßf g
,
ßßg h
Url
®® 
.
®® 
Action
®® 
(
®® 
$str
®® &
,
®®& '
$str
®®( /
,
®®/ 0
null
®®1 5
,
®®5 6
HttpContext
®®7 B
.
®®B C
Request
®®C J
.
®®J K
Url
®®K N
.
®®N O
Scheme
®®O U
)
®®U V
,
®®V W
HttpContext
®®X c
.
®®c d
Session
®®d k
.
®®k l
	SessionID
®®l u
)
®®u v
;
®®v w
return
©© 
View
©© 
(
©© 
)
©© 
;
©© 
}
™™ 	
[
¨¨ 	
	Authorize
¨¨	 
(
¨¨ 
Roles
¨¨ 
=
¨¨ 
$str
¨¨ #
)
¨¨# $
]
¨¨$ %
public
≠≠ 
ActionResult
≠≠ 
CajaDeVenta
≠≠ '
(
≠≠' (
)
≠≠( )
{
ÆÆ 	
ViewBag
ØØ 
.
ØØ 

fechaDesde
ØØ 
=
ØØ  
DateTime
ØØ! )
.
ØØ) *
Today
ØØ* /
.
ØØ/ 0
ToString
ØØ0 8
(
ØØ8 9
$str
ØØ9 E
)
ØØE F
;
ØØF G
ViewBag
∞∞ 
.
∞∞ 

fechaHasta
∞∞ 
=
∞∞  
DateTime
∞∞! )
.
∞∞) *
Today
∞∞* /
.
∞∞/ 0
ToString
∞∞0 8
(
∞∞8 9
$str
∞∞9 E
)
∞∞E F
;
∞∞F G
ViewBag
±± 
.
±± #
IdMedioDePagoEfectivo
±± )
=
±±* +
MaestroSettings
±±, ;
.
±±; <
Default
±±< C
.
±±C D1
#IdDetalleMaestroMedioDepagoEfectivo
±±D g
;
±±g h
return
≤≤ 
View
≤≤ 
(
≤≤ 
)
≤≤ 
;
≤≤ 
}
≥≥ 	
[
∑∑ 	
	Authorize
∑∑	 
(
∑∑ 
Roles
∑∑ 
=
∑∑ 
$str
∑∑ %
)
∑∑% &
]
∑∑& '
public
∏∏ 
ActionResult
∏∏ &
VentasYCobrosPorVendedor
∏∏ 4
(
∏∏4 5
)
∏∏5 6
{
ππ 	
string
∫∫ 
mascaraDeIngreso
∫∫ #
=
∫∫$ %
VentasSettings
∫∫& 4
.
∫∫4 5
Default
∫∫5 <
.
∫∫< =@
2MascaraDeCamposAIngresarEnVentasYCobrosPorVendedor
∫∫= o
;
∫∫o p
string
ªª 
mascaraDeCalculo
ªª #
=
ªª$ %
VentasSettings
ªª& 4
.
ªª4 5
Default
ªª5 <
.
ªª< =>
0MascaraFormasDeCalculoEnVentasYCobrosPorVendedor
ªª= m
;
ªªm n
ViewBag
ºº 
.
ºº 

idConcepto
ºº 
=
ºº  
ConceptoSettings
ºº! 1
.
ºº1 2
Default
ºº2 9
.
ºº9 :;
-IdConceptoEnRegistroUnificadosdeVentasyCobros
ºº: g
;
ººg h
ViewBag
ΩΩ 
.
ΩΩ 
fechaActual
ΩΩ 
=
ΩΩ  !
DateTimeUtil
ΩΩ" .
.
ΩΩ. /
FechaActual
ΩΩ/ :
(
ΩΩ: ;
)
ΩΩ; <
.
ΩΩ< =
Date
ΩΩ= A
;
ΩΩA B
ViewBag
ææ 
.
ææ &
permitirIngresarCantidad
ææ ,
=
ææ- .
	ventaUtil
ææ/ 8
.
ææ8 9,
ObtenerCamposEditablesEnVentas
ææ9 W
(
ææW X
mascaraDeIngreso
ææX h
,
ææh i,
ElementoDeCalculoEnVentasEnumææj á
.ææá à
Cantidadææà ê
)ææê ë
;ææë í
ViewBag
øø 
.
øø ,
permitirIngresarPrecioUnitario
øø 2
=
øø3 4
	ventaUtil
øø5 >
.
øø> ?,
ObtenerCamposEditablesEnVentas
øø? ]
(
øø] ^
mascaraDeIngreso
øø^ n
,
øøn o,
ElementoDeCalculoEnVentasEnumøøp ç
.øøç é
PrecioUnitarioøøé ú
)øøú ù
;øøù û
ViewBag
¿¿ 
.
¿¿ %
permitirIngresarImporte
¿¿ +
=
¿¿, -
	ventaUtil
¿¿. 7
.
¿¿7 8,
ObtenerCamposEditablesEnVentas
¿¿8 V
(
¿¿V W
mascaraDeIngreso
¿¿W g
,
¿¿g h,
ElementoDeCalculoEnVentasEnum¿¿i Ü
.¿¿Ü á
Importe¿¿á é
)¿¿é è
;¿¿è ê
ViewBag
¡¡ 
.
¡¡ 4
&ingresarCantidadCalcularPrecioUnitario
¡¡ :
=
¡¡; <
	ventaUtil
¡¡= F
.
¡¡F G-
ObtenerFormasDeCalculosEnVentas
¡¡G f
(
¡¡f g
mascaraDeCalculo
¡¡g w
,
¡¡w x,
ElementoDeCalculoEnVentasEnum¡¡y ñ
.¡¡ñ ó
Cantidad¡¡ó ü
,¡¡ü †-
ElementoDeCalculoEnVentasEnum¡¡° æ
.¡¡æ ø
PrecioUnitario¡¡ø Õ
)¡¡Õ Œ
;¡¡Œ œ
ViewBag
¬¬ 
.
¬¬ 3
%ingresarPrecioUnitarioCalcularImporte
¬¬ 9
=
¬¬: ;
	ventaUtil
¬¬< E
.
¬¬E F-
ObtenerFormasDeCalculosEnVentas
¬¬F e
(
¬¬e f
mascaraDeCalculo
¬¬f v
,
¬¬v w,
ElementoDeCalculoEnVentasEnum¬¬x ï
.¬¬ï ñ
PrecioUnitario¬¬ñ §
,¬¬§ •-
ElementoDeCalculoEnVentasEnum¬¬¶ √
.¬¬√ ƒ
Importe¬¬ƒ À
)¬¬À Ã
;¬¬Ã Õ
ViewBag
√√ 
.
√√ -
ingresarImporteCalcularCantidad
√√ 3
=
√√4 5
	ventaUtil
√√6 ?
.
√√? @-
ObtenerFormasDeCalculosEnVentas
√√@ _
(
√√_ `
mascaraDeCalculo
√√` p
,
√√p q,
ElementoDeCalculoEnVentasEnum√√r è
.√√è ê
Importe√√ê ó
,√√ó ò-
ElementoDeCalculoEnVentasEnum√√ô ∂
.√√∂ ∑
Cantidad√√∑ ø
)√√ø ¿
;√√¿ ¡
ViewBag
≈≈ 
.
≈≈ 
tieneRolCajero
≈≈ "
=
≈≈# $
this
≈≈% )
.
≈≈) *
User
≈≈* .
.
≈≈. /
IsInRole
≈≈/ 7
(
≈≈7 8
$str
≈≈8 @
)
≈≈@ A
;
≈≈A B
ViewBag
∆∆ 
.
∆∆ 

idEmpleado
∆∆ 
=
∆∆  
ProfileData
∆∆! ,
(
∆∆, -
)
∆∆- .
.
∆∆. /
Empleado
∆∆/ 7
.
∆∆7 8
Id
∆∆8 :
;
∆∆: ;
ViewBag
«« 
.
«« 
idCentroAtencion
«« $
=
««% &
ProfileData
««' 2
(
««2 3
)
««3 4
.
««4 5*
CentroDeAtencionSeleccionado
««5 Q
.
««Q R
Id
««R T
;
««T U
ViewBag
»» 
.
»» (
mascaraDeCalculoPorDefecto
»» .
=
»»/ 0
VentasSettings
»»1 ?
.
»»? @
Default
»»@ G
.
»»G H0
"MascaraDeCalculoPorDefectoEnVentas
»»H j
;
»»j k
ViewBag
…… 
.
…… 5
'mascaraDeCalculoPrecioUnitarioCalculado
…… ;
=
……< =
VentasSettings
……> L
.
……L M
Default
……M T
.
……T U5
'MascaraDeCalculoPrecioUnitarioCalculado
……U |
;
……| }
ViewBag
   
.
   '
numeroDecimalesEnCantidad
   -
=
  . / 
AplicacionSettings
  0 B
.
  B C
Default
  C J
.
  J K'
NumeroDecimalesEnCantidad
  K d
;
  d e
ViewBag
ÀÀ 
.
ÀÀ %
numeroDecimalesEnPrecio
ÀÀ +
=
ÀÀ, - 
AplicacionSettings
ÀÀ. @
.
ÀÀ@ A
Default
ÀÀA H
.
ÀÀH I%
NumeroDecimalesEnPrecio
ÀÀI `
;
ÀÀ` a
ViewBag
ÕÕ 
.
ÕÕ 
	WCPScript
ÕÕ 
=
ÕÕ 

Neodynamic
ÕÕ  *
.
ÕÕ* +
SDK
ÕÕ+ .
.
ÕÕ. /
Web
ÕÕ/ 2
.
ÕÕ2 3
WebClientPrint
ÕÕ3 A
.
ÕÕA B
CreateScript
ÕÕB N
(
ÕÕN O
Url
ŒŒ 
.
ŒŒ 
Action
ŒŒ 
(
ŒŒ 
$str
ŒŒ +
,
ŒŒ+ ,
$str
ŒŒ- @
,
ŒŒ@ A
null
ŒŒB F
,
ŒŒF G
HttpContext
ŒŒH S
.
ŒŒS T
Request
ŒŒT [
.
ŒŒ[ \
Url
ŒŒ\ _
.
ŒŒ_ `
Scheme
ŒŒ` f
)
ŒŒf g
,
ŒŒg h
Url
œœ 
.
œœ 
Action
œœ 
(
œœ 
$str
œœ >
,
œœ> ?
$str
œœ@ G
,
œœG H
null
œœI M
,
œœM N
HttpContext
œœO Z
.
œœZ [
Request
œœ[ b
.
œœb c
Url
œœc f
.
œœf g
Scheme
œœg m
)
œœm n
,
œœn o
HttpContext
œœp {
.
œœ{ |
Sessionœœ| É
.œœÉ Ñ
	SessionIDœœÑ ç
)œœç é
;œœé è
return
–– 
View
–– 
(
–– 
)
–– 
;
–– 
}
—— 	
[
”” 	
	Authorize
””	 
(
”” 
Roles
”” 
=
”” 
$str
”” %
)
””% &
]
””& '
public
‘‘ 
ActionResult
‘‘ .
 ConsultarVentasCobrosPorVendedor
‘‘ <
(
‘‘< =
)
‘‘= >
{
’’ 	
ViewBag
÷÷ 
.
÷÷ 
fechaInicio
÷÷ 
=
÷÷  !
DateTimeUtil
÷÷" .
.
÷÷. /
FechaActual
÷÷/ :
(
÷÷: ;
)
÷÷; <
.
÷÷< =
AddDays
÷÷= D
(
÷÷D E
-
÷÷E F
$num
÷÷F G
)
÷÷G H
.
÷÷H I
ToString
÷÷I Q
(
÷÷Q R
$str
÷÷R ^
)
÷÷^ _
;
÷÷_ `
ViewBag
◊◊ 
.
◊◊ 
fechaFin
◊◊ 
=
◊◊ 
DateTimeUtil
◊◊ +
.
◊◊+ ,
FechaActual
◊◊, 7
(
◊◊7 8
)
◊◊8 9
.
◊◊9 :
ToString
◊◊: B
(
◊◊B C
$str
◊◊C O
)
◊◊O P
;
◊◊P Q
ViewBag
ŸŸ 
.
ŸŸ 
	WCPScript
ŸŸ 
=
ŸŸ 

Neodynamic
ŸŸ  *
.
ŸŸ* +
SDK
ŸŸ+ .
.
ŸŸ. /
Web
ŸŸ/ 2
.
ŸŸ2 3
WebClientPrint
ŸŸ3 A
.
ŸŸA B
CreateScript
ŸŸB N
(
ŸŸN O
Url
⁄⁄ 
.
⁄⁄ 
Action
⁄⁄ 
(
⁄⁄ 
$str
⁄⁄ +
,
⁄⁄+ ,
$str
⁄⁄- @
,
⁄⁄@ A
null
⁄⁄B F
,
⁄⁄F G
HttpContext
⁄⁄H S
.
⁄⁄S T
Request
⁄⁄T [
.
⁄⁄[ \
Url
⁄⁄\ _
.
⁄⁄_ `
Scheme
⁄⁄` f
)
⁄⁄f g
,
⁄⁄g h
Url
€€ 
.
€€ 
Action
€€ 
(
€€ 
$str
€€ >
,
€€> ?
$str
€€@ G
,
€€G H
null
€€I M
,
€€M N
HttpContext
€€O Z
.
€€Z [
Request
€€[ b
.
€€b c
Url
€€c f
.
€€f g
Scheme
€€g m
)
€€m n
,
€€n o
HttpContext
€€p {
.
€€{ |
Session€€| É
.€€É Ñ
	SessionID€€Ñ ç
)€€ç é
;€€é è
return
‹‹ 
View
‹‹ 
(
‹‹ 
)
‹‹ 
;
‹‹ 
}
›› 	
[
ﬂﬂ 	
	Authorize
ﬂﬂ	 
(
ﬂﬂ 
Roles
ﬂﬂ 
=
ﬂﬂ 
$str
ﬂﬂ %
)
ﬂﬂ% &
]
ﬂﬂ& '
public
‡‡ 
ActionResult
‡‡ 
VentasMasivas
‡‡ )
(
‡‡) *
)
‡‡* +
{
·· 	
string
‚‚ 
mascaraDeIngreso
‚‚ #
=
‚‚$ %
VentasSettings
‚‚& 4
.
‚‚4 5
Default
‚‚5 <
.
‚‚< =5
'MascaraDeCamposAIngresarEnVentasMasivas
‚‚= d
;
‚‚d e
string
„„ 
mascaraDeCalculo
„„ #
=
„„$ %
VentasSettings
„„& 4
.
„„4 5
Default
„„5 <
.
„„< =3
%MascaraFormasDeCalculoEnVentasMasivas
„„= b
;
„„b c
ViewBag
‰‰ 
.
‰‰ 
fechaActual
‰‰ 
=
‰‰  !
DateTimeUtil
‰‰" .
.
‰‰. /
FechaActual
‰‰/ :
(
‰‰: ;
)
‰‰; <
.
‰‰< =
Date
‰‰= A
;
‰‰A B
ViewBag
ÂÂ 
.
ÂÂ %
idComprobantePorDefecto
ÂÂ +
=
ÂÂ, -
MaestroSettings
ÂÂ. =
.
ÂÂ= >
Default
ÂÂ> E
.
ÂÂE F/
!IdDetalleMaestroComprobanteBoleta
ÂÂF g
;
ÂÂg h
ViewBag
ÊÊ 
.
ÊÊ &
permitirIngresarCantidad
ÊÊ ,
=
ÊÊ- .
	ventaUtil
ÊÊ/ 8
.
ÊÊ8 9,
ObtenerCamposEditablesEnVentas
ÊÊ9 W
(
ÊÊW X
mascaraDeIngreso
ÊÊX h
,
ÊÊh i,
ElementoDeCalculoEnVentasEnumÊÊj á
.ÊÊá à
CantidadÊÊà ê
)ÊÊê ë
;ÊÊë í
ViewBag
ÁÁ 
.
ÁÁ ,
permitirIngresarPrecioUnitario
ÁÁ 2
=
ÁÁ3 4
	ventaUtil
ÁÁ5 >
.
ÁÁ> ?,
ObtenerCamposEditablesEnVentas
ÁÁ? ]
(
ÁÁ] ^
mascaraDeIngreso
ÁÁ^ n
,
ÁÁn o,
ElementoDeCalculoEnVentasEnumÁÁp ç
.ÁÁç é
PrecioUnitarioÁÁé ú
)ÁÁú ù
;ÁÁù û
ViewBag
ËË 
.
ËË %
permitirIngresarImporte
ËË +
=
ËË, -
	ventaUtil
ËË. 7
.
ËË7 8,
ObtenerCamposEditablesEnVentas
ËË8 V
(
ËËV W
mascaraDeIngreso
ËËW g
,
ËËg h,
ElementoDeCalculoEnVentasEnumËËi Ü
.ËËÜ á
ImporteËËá é
)ËËé è
;ËËè ê
ViewBag
ÈÈ 
.
ÈÈ 4
&ingresarCantidadCalcularPrecioUnitario
ÈÈ :
=
ÈÈ; <
	ventaUtil
ÈÈ= F
.
ÈÈF G-
ObtenerFormasDeCalculosEnVentas
ÈÈG f
(
ÈÈf g
mascaraDeCalculo
ÈÈg w
,
ÈÈw x,
ElementoDeCalculoEnVentasEnumÈÈy ñ
.ÈÈñ ó
CantidadÈÈó ü
,ÈÈü †-
ElementoDeCalculoEnVentasEnumÈÈ° æ
.ÈÈæ ø
PrecioUnitarioÈÈø Õ
)ÈÈÕ Œ
;ÈÈŒ œ
ViewBag
ÍÍ 
.
ÍÍ 3
%ingresarPrecioUnitarioCalcularImporte
ÍÍ 9
=
ÍÍ: ;
	ventaUtil
ÍÍ< E
.
ÍÍE F-
ObtenerFormasDeCalculosEnVentas
ÍÍF e
(
ÍÍe f
mascaraDeCalculo
ÍÍf v
,
ÍÍv w,
ElementoDeCalculoEnVentasEnumÍÍx ï
.ÍÍï ñ
PrecioUnitarioÍÍñ §
,ÍÍ§ •-
ElementoDeCalculoEnVentasEnumÍÍ¶ √
.ÍÍ√ ƒ
ImporteÍÍƒ À
)ÍÍÀ Ã
;ÍÍÃ Õ
ViewBag
ÎÎ 
.
ÎÎ -
ingresarImporteCalcularCantidad
ÎÎ 3
=
ÎÎ4 5
	ventaUtil
ÎÎ6 ?
.
ÎÎ? @-
ObtenerFormasDeCalculosEnVentas
ÎÎ@ _
(
ÎÎ_ `
mascaraDeCalculo
ÎÎ` p
,
ÎÎp q,
ElementoDeCalculoEnVentasEnumÎÎr è
.ÎÎè ê
ImporteÎÎê ó
,ÎÎó ò-
ElementoDeCalculoEnVentasEnumÎÎô ∂
.ÎÎ∂ ∑
CantidadÎÎ∑ ø
)ÎÎø ¿
;ÎÎ¿ ¡
ViewBag
ÏÏ 
.
ÏÏ (
mascaraDeCalculoPorDefecto
ÏÏ .
=
ÏÏ/ 0
VentasSettings
ÏÏ1 ?
.
ÏÏ? @
Default
ÏÏ@ G
.
ÏÏG H0
"MascaraDeCalculoPorDefectoEnVentas
ÏÏH j
;
ÏÏj k
ViewBag
ÌÌ 
.
ÌÌ '
numeroDecimalesEnCantidad
ÌÌ -
=
ÌÌ. / 
AplicacionSettings
ÌÌ0 B
.
ÌÌB C
Default
ÌÌC J
.
ÌÌJ K'
NumeroDecimalesEnCantidad
ÌÌK d
;
ÌÌd e
ViewBag
ÓÓ 
.
ÓÓ %
numeroDecimalesEnPrecio
ÓÓ +
=
ÓÓ, - 
AplicacionSettings
ÓÓ. @
.
ÓÓ@ A
Default
ÓÓA H
.
ÓÓH I%
NumeroDecimalesEnPrecio
ÓÓI `
;
ÓÓ` a
return
 
View
 
(
 
)
 
;
 
}
ÒÒ 	
public
¯¯ 

JsonResult
¯¯ 
ObtenerVentas
¯¯ '
(
¯¯' (
string
¯¯( .
desde
¯¯/ 4
,
¯¯4 5
string
¯¯6 <
hasta
¯¯= B
)
¯¯B C
{
˘˘ 	
try
˙˙ 
{
˚˚ 
DateTime
¸¸ 

fechaDesde
¸¸ #
=
¸¸$ %
DateTime
¸¸& .
.
¸¸. /
Parse
¸¸/ 4
(
¸¸4 5
desde
¸¸5 :
)
¸¸: ;
;
¸¸; <
DateTime
˝˝ 

fechaHasta
˝˝ #
=
˝˝$ %
DateTime
˝˝& .
.
˝˝. /
Parse
˝˝/ 4
(
˝˝4 5
hasta
˝˝5 :
)
˝˝: ;
;
˝˝; <
List
˛˛ 
<
˛˛ 
OperacionDeVenta
˛˛ %
>
˛˛% & 
operacionesDeVenta
˛˛' 9
=
˛˛: ;
operacionLogica
˛˛< K
.
˛˛K L'
ObtenerOperacionesDeVenta
˛˛L e
(
˛˛e f
ProfileData
˛˛f q
(
˛˛q r
)
˛˛r s
.
˛˛s t
Empleado
˛˛t |
.
˛˛| }
Id
˛˛} 
,˛˛ Ä
ProfileData˛˛Å å
(˛˛å ç
)˛˛ç é
.˛˛é è.
IdCentroDeAtencionSeleccionado˛˛è ≠
,˛˛≠ Æ

fechaDesde˛˛Ø π
,˛˛π ∫

fechaHasta˛˛ª ≈
)˛˛≈ ∆
;˛˛∆ «
List
ˇˇ 
<
ˇˇ #
BandejaVentaViewModel
ˇˇ *
>
ˇˇ* +
	respuesta
ˇˇ, 5
=
ˇˇ6 7#
BandejaVentaViewModel
ˇˇ8 M
.
ˇˇM N
Convert_
ˇˇN V
(
ˇˇV W 
operacionesDeVenta
ˇˇW i
)
ˇˇi j
;
ˇˇj k
var
ÄÄ 

jsonResult
ÄÄ 
=
ÄÄ  
Json
ÄÄ! %
(
ÄÄ% &
	respuesta
ÄÄ& /
,
ÄÄ/ 0!
JsonRequestBehavior
ÄÄ1 D
.
ÄÄD E
AllowGet
ÄÄE M
)
ÄÄM N
;
ÄÄN O

jsonResult
ÅÅ 
.
ÅÅ 
MaxJsonLength
ÅÅ (
=
ÅÅ) *
int
ÅÅ+ .
.
ÅÅ. /
MaxValue
ÅÅ/ 7
;
ÅÅ7 8
return
ÇÇ 

jsonResult
ÇÇ !
;
ÇÇ! "
}
ÉÉ 
catch
ÑÑ 
(
ÑÑ 
	Exception
ÑÑ 
e
ÑÑ 
)
ÑÑ 
{
ÖÖ 
return
ÜÜ 
new
ÜÜ "
JsonHttpStatusResult
ÜÜ /
(
ÜÜ/ 0
Util
ÜÜ0 4
.
ÜÜ4 5
	ErrorJson
ÜÜ5 >
(
ÜÜ> ?
new
ÜÜ? B
	Exception
ÜÜC L
(
ÜÜL M
$str
ÜÜM s
,
ÜÜs t
e
ÜÜu v
)
ÜÜv w
)
ÜÜw x
,
ÜÜx y
HttpStatusCodeÜÜz à
.ÜÜà â#
InternalServerErrorÜÜâ ú
)ÜÜú ù
;ÜÜù û
}
áá 
}
àà 	
public
ää 

JsonResult
ää %
ObtenerResumenesVentas_
ää 1
(
ää1 2
string
ää2 8
desde
ää9 >
,
ää> ?
string
ää@ F
hasta
ääG L
)
ääL M
{
ãã 	
try
åå 
{
çç 
DateTime
éé 

fechaDesde
éé #
=
éé$ %
DateTimeUtil
éé& 2
.
éé2 39
+ObtenerFechaDesdeConPrecisionDeMilisegundos
éé3 ^
(
éé^ _
desde
éé_ d
)
ééd e
;
éée f
DateTime
èè 

fechaHasta
èè #
=
èè$ %
DateTimeUtil
èè& 2
.
èè2 39
+ObtenerFechaHastaConPrecisionDeMilisegundos
èè3 ^
(
èè^ _
hasta
èè_ d
)
èèd e
;
èèe f
List
êê 
<
êê 
Resumen_Venta
êê "
>
êê" #
resumenesVentas
êê$ 3
=
êê4 5
operacionLogica
êê6 E
.
êêE F$
ObtenerResumenesVentas
êêF \
(
êê\ ]
ProfileData
êê] h
(
êêh i
)
êêi j
.
êêj k
Empleado
êêk s
.
êês t
Id
êêt v
,
êêv w
ProfileDataêêx É
(êêÉ Ñ
)êêÑ Ö
.êêÖ Ü.
IdCentroDeAtencionSeleccionadoêêÜ §
,êê§ •

fechaDesdeêê¶ ∞
,êê∞ ±

fechaHastaêê≤ º
,êêº Ω
$numêêæ ø
,êêø ¿
$strêê¡ √
)êê√ ƒ
;êêƒ ≈
List
ëë 
<
ëë #
BandejaVentaViewModel
ëë *
>
ëë* +
	resumenes
ëë, 5
=
ëë6 7#
BandejaVentaViewModel
ëë8 M
.
ëëM N
Convert_
ëëN V
(
ëëV W
resumenesVentas
ëëW f
)
ëëf g
;
ëëg h
var
íí 

jsonResult
íí 
=
íí  
Json
íí! %
(
íí% &
	resumenes
íí& /
,
íí/ 0!
JsonRequestBehavior
íí1 D
.
ííD E
AllowGet
ííE M
)
ííM N
;
ííN O

jsonResult
ìì 
.
ìì 
MaxJsonLength
ìì (
=
ìì) *
int
ìì+ .
.
ìì. /
MaxValue
ìì/ 7
;
ìì7 8
return
îî 

jsonResult
îî !
;
îî! "
}
ïï 
catch
ññ 
(
ññ 
	Exception
ññ 
e
ññ 
)
ññ 
{
óó 
return
òò 
new
òò "
JsonHttpStatusResult
òò /
(
òò/ 0
Util
òò0 4
.
òò4 5
	ErrorJson
òò5 >
(
òò> ?
new
òò? B
	Exception
òòC L
(
òòL M
$str
òòM |
,
òò| }
e
òò~ 
)òò Ä
)òòÄ Å
,òòÅ Ç
HttpStatusCodeòòÉ ë
.òòë í#
InternalServerErroròòí •
)òò• ¶
;òò¶ ß
}
ôô 
}
öö 	
public
úú 

JsonResult
úú $
ObtenerResumenesVentas
úú 0
(
úú0 1
string
úú1 7
desde
úú8 =
,
úú= >
string
úú? E
hasta
úúF K
,
úúK L
int
úúM P
?
úúP Q
	idCliente
úúR [
,
úú[ \
string
úú] c
comprobante
úúd o
)
úúo p
{
ùù 	
try
ûû 
{
üü 
DateTime
†† 

fechaDesde
†† #
=
††$ %
DateTimeUtil
††& 2
.
††2 39
+ObtenerFechaDesdeConPrecisionDeMilisegundos
††3 ^
(
††^ _
desde
††_ d
)
††d e
;
††e f
DateTime
°° 

fechaHasta
°° #
=
°°$ %
DateTimeUtil
°°& 2
.
°°2 39
+ObtenerFechaHastaConPrecisionDeMilisegundos
°°3 ^
(
°°^ _
hasta
°°_ d
)
°°d e
;
°°e f
List
¢¢ 
<
¢¢ 
Resumen_Venta
¢¢ "
>
¢¢" #
resumenesVentas
¢¢$ 3
=
¢¢4 5
operacionLogica
¢¢6 E
.
¢¢E F$
ObtenerResumenesVentas
¢¢F \
(
¢¢\ ]
ProfileData
¢¢] h
(
¢¢h i
)
¢¢i j
.
¢¢j k
Empleado
¢¢k s
.
¢¢s t
Id
¢¢t v
,
¢¢v w
ProfileData¢¢x É
(¢¢É Ñ
)¢¢Ñ Ö
.¢¢Ö Ü.
IdCentroDeAtencionSeleccionado¢¢Ü §
,¢¢§ •

fechaDesde¢¢¶ ∞
,¢¢∞ ±

fechaHasta¢¢≤ º
,¢¢º Ω
	idCliente¢¢æ «
,¢¢« »
comprobante¢¢… ‘
)¢¢‘ ’
;¢¢’ ÷
var
££ 

jsonResult
££ 
=
££  
Json
££! %
(
££% &
resumenesVentas
££& 5
,
££5 6!
JsonRequestBehavior
££7 J
.
££J K
AllowGet
££K S
)
££S T
;
££T U

jsonResult
§§ 
.
§§ 
MaxJsonLength
§§ (
=
§§) *
int
§§+ .
.
§§. /
MaxValue
§§/ 7
;
§§7 8
return
•• 

jsonResult
•• !
;
••! "
}
¶¶ 
catch
ßß 
(
ßß 
	Exception
ßß 
e
ßß 
)
ßß 
{
®® 
return
©© 
new
©© "
JsonHttpStatusResult
©© /
(
©©/ 0
Util
©©0 4
.
©©4 5
	ErrorJson
©©5 >
(
©©> ?
new
©©? B
	Exception
©©C L
(
©©L M
$str
©©M |
,
©©| }
e
©©~ 
)©© Ä
)©©Ä Å
,©©Å Ç
HttpStatusCode©©É ë
.©©ë í#
InternalServerError©©í •
)©©• ¶
;©©¶ ß
}
™™ 
}
´´ 	
public
≠≠ 
async
≠≠ 
Task
≠≠ 
<
≠≠ 

JsonResult
≠≠ $
>
≠≠$ %&
GuardarVentaPorMostrador
≠≠& >
(
≠≠> ?!
DatosVentaIntegrada
≠≠? R
venta
≠≠S X
)
≠≠X Y
{
ÆÆ 	
try
ØØ 
{
∞∞ 
OperationResult
±± 
result
±±  &
=
±±' (
operacionLogica
±±) 8
.
±±8 9%
ConfirmarVentaIntegrada
±±9 P
(
±±P Q
ModoOperacionEnum
±±Q b
.
±±b c
PorMostrador
±±c o
,
±±o p
ProfileData
±±q |
(
±±| }
)
±±} ~
,
±±~ 
venta±±Ä Ö
)±±Ö Ü
;±±Ü á
Util
≤≤ 
.
≤≤ (
ManageIfResultIsNotSuccess
≤≤ /
(
≤≤/ 0
result
≤≤0 6
,
≤≤6 7
$str
≤≤8 ]
)
≤≤] ^
;
≤≤^ _
var
¥¥ 

ordenVenta
¥¥ 
=
¥¥  )
ArmarOrdenVentaParaImprimir
¥¥! <
(
¥¥< =
(
¥¥= >
OrdenDeVenta
¥¥> J
)
¥¥J K
result
¥¥K Q
.
¥¥Q R
objeto
¥¥R X
,
¥¥X Y
venta
¥¥Z _
)
¥¥_ `
;
¥¥` a9
+GuardarOrdenDeVentaParaImprimirEnAplicacion
∂∂ ;
(
∂∂; <

ordenVenta
∂∂< F
)
∂∂F G
;
∂∂G H
var
∏∏ 

totalVenta
∏∏ 
=
∏∏  
venta
∏∏! &
.
∏∏& '
Orden
∏∏' ,
.
∏∏, -
Detalles
∏∏- 5
.
∏∏5 6
Sum
∏∏6 9
(
∏∏9 :
d
∏∏: ;
=>
∏∏< >
d
∏∏? @
.
∏∏@ A
Importe
∏∏A H
)
∏∏H I
;
∏∏I J
int
ππ 
[
ππ 
]
ππ ,
idsTiposComprobanteTributarios
ππ 4
=
ππ5 6
{
ππ7 8
MaestroSettings
ππ9 H
.
ππH I
Default
ππI P
.
ππP Q/
!IdDetalleMaestroComprobanteBoleta
ππQ r
,
ππr s
MaestroSettingsππt É
.ππÉ Ñ
DefaultππÑ ã
.ππã å2
"IdDetalleMaestroComprobanteFacturaππå Æ
}ππØ ∞
;ππ∞ ±
this
∫∫ 
.
∫∫ 
Session
∫∫ 
[
∫∫ 
$str
∫∫ -
]
∫∫- .
=
∫∫/ 0
(
∫∫1 2
int
∫∫2 5
)
∫∫5 6
(
∫∫6 7
(
∫∫7 8
this
∫∫8 <
.
∫∫< =
Session
∫∫= D
[
∫∫D E
$str
∫∫E U
]
∫∫U V
)
∫∫V W
??
∫∫X Z
$num
∫∫[ \
)
∫∫\ ]
+
∫∫^ _
$num
∫∫` a
;
∫∫a b
this
ªª 
.
ªª 
Session
ªª 
[
ªª 
$str
ªª -
]
ªª- .
=
ªª/ 0
(
ªª1 2
decimal
ªª2 9
)
ªª9 :
(
ªª: ;
(
ªª; <
this
ªª< @
.
ªª@ A
Session
ªªA H
[
ªªH I
$str
ªªI Y
]
ªªY Z
)
ªªZ [
??
ªª\ ^
$num
ªª_ a
)
ªªa b
+
ªªc d

totalVenta
ªªe o
;
ªªo p
this
ºº 
.
ºº 
Session
ºº 
[
ºº 
$str
ºº -
]
ºº- .
=
ºº/ 0
(
ºº1 2
decimal
ºº2 9
)
ºº9 :
(
ºº: ;
(
ºº; <
this
ºº< @
.
ºº@ A
Session
ººA H
[
ººH I
$str
ººI Y
]
ººY Z
)
ººZ [
??
ºº\ ^
$num
ºº_ a
)
ººa b
+
ººc d
(
ººe f-
idsTiposComprobanteTributariosººf Ñ
.ººÑ Ö
ContainsººÖ ç
(ººç é
ventaººé ì
.ººì î
Ordenººî ô
.ººô ö
Comprobanteººö •
.ºº• ¶
Tipoºº¶ ™
.ºº™ ´
Idºº´ ≠
)ºº≠ Æ
?ººØ ∞

totalVentaºº± ª
:ººº Ω
$numººæ ø
)ººø ¿
;ºº¿ ¡
var
ΩΩ !
porcentajeFacturado
ΩΩ '
=
ΩΩ( )
this
ΩΩ* .
.
ΩΩ. /
Session
ΩΩ/ 6
[
ΩΩ6 7
$str
ΩΩ7 G
]
ΩΩG H
!=
ΩΩI K
null
ΩΩL P
&&
ΩΩQ S
(
ΩΩT U
decimal
ΩΩU \
)
ΩΩ\ ]
(
ΩΩ] ^
(
ΩΩ^ _
this
ΩΩ_ c
.
ΩΩc d
Session
ΩΩd k
[
ΩΩk l
$str
ΩΩl |
]
ΩΩ| }
)
ΩΩ} ~
??ΩΩ Å
$numΩΩÇ É
)ΩΩÉ Ñ
>ΩΩÖ Ü
$numΩΩá à
?ΩΩâ ä
(ΩΩã å
(ΩΩå ç
decimalΩΩç î
)ΩΩî ï
(ΩΩï ñ
(ΩΩñ ó
thisΩΩó õ
.ΩΩõ ú
SessionΩΩú £
[ΩΩ£ §
$strΩΩ§ ¥
]ΩΩ¥ µ
)ΩΩµ ∂
??ΩΩ∑ π
$numΩΩ∫ ª
)ΩΩª º
/ΩΩΩ æ
(ΩΩø ¿
decimalΩΩ¿ «
)ΩΩ« »
(ΩΩ» …
(ΩΩ…  
thisΩΩ  Œ
.ΩΩŒ œ
SessionΩΩœ ÷
[ΩΩ÷ ◊
$strΩΩ◊ Á
]ΩΩÁ Ë
)ΩΩË È
??ΩΩÍ Ï
$numΩΩÌ Ó
)ΩΩÓ Ô
)ΩΩÔ 
*ΩΩÒ Ú
$numΩΩÛ ˆ
:ΩΩ˜ ¯
$numΩΩ˘ ˙
;ΩΩ˙ ˚
var
ææ 
venderConBoleta
ææ #
=
ææ$ %
(
ææ& '!
porcentajeFacturado
ææ' :
<
ææ; <
VentasSettings
ææ= K
.
ææK L
Default
ææL S
.
ææS T#
PorcentajeFacturacion
ææT i
)
ææi j
;
ææj k
if
øø 
(
øø 
venta
øø 
.
øø 
MovimientoAlmacen
øø +
.
øø+ ,0
"HayComprobanteDeSalidaDeMercaderia
øø, N
)
øøN O
{
¿¿ 
string
¡¡ 
path
¡¡ 
=
¡¡  ! 
HostingEnvironment
¡¡" 4
.
¡¡4 5%
ApplicationPhysicalPath
¡¡5 L
;
¡¡L M
await
¬¬ *
facturacionElectronicaLogica
¬¬ 6
.
¬¬6 7,
TransmitirEnviarGuiaDeRemision
¬¬7 U
(
¬¬U V
(
¬¬V W
(
¬¬W X
OrdenDeVenta
¬¬X d
)
¬¬d e
result
¬¬e k
.
¬¬k l
objeto
¬¬l r
)
¬¬r s
.
¬¬s t
Transaccion
¬¬t 
(¬¬ Ä
)¬¬Ä Å
.¬¬Å Ç
Transaccion11¬¬Ç è
.¬¬è ê
First¬¬ê ï
(¬¬ï ñ
)¬¬ñ ó
.¬¬ó ò
id¬¬ò ö
,¬¬ö õ
ProfileData¬¬ú ß
(¬¬ß ®
)¬¬® ©
.¬¬© ™
Sede¬¬™ Æ
,¬¬Æ Ø
ProfileData¬¬∞ ª
(¬¬ª º
)¬¬º Ω
.¬¬Ω æ
Empleado¬¬æ ∆
.¬¬∆ «
Id¬¬« …
,¬¬…  
path¬¬À œ
)¬¬œ –
;¬¬– —
}
√√ 
return
ƒƒ 
Json
ƒƒ 
(
ƒƒ 
new
ƒƒ 
{
ƒƒ  !
result
ƒƒ" (
.
ƒƒ( )
code_result
ƒƒ) 4
,
ƒƒ4 5
data
ƒƒ6 :
=
ƒƒ; <
result
ƒƒ= C
.
ƒƒC D
information
ƒƒD O
,
ƒƒO P 
result_description
ƒƒQ c
=
ƒƒd e
result
ƒƒf l
.
ƒƒl m
title
ƒƒm r
,
ƒƒr s
VenderConBoletaƒƒt É
=ƒƒÑ Ö
venderConBoletaƒƒÜ ï
,ƒƒï ñ
IdOrdenƒƒó û
=ƒƒü †
resultƒƒ° ß
.ƒƒß ®
informationƒƒ® ≥
,ƒƒ≥ ¥$
SerieNumeroDocumentoƒƒµ …
=ƒƒ  À

ordenVentaƒƒÃ ÷
.ƒƒ÷ ◊
Transaccionƒƒ◊ ‚
(ƒƒ‚ „
)ƒƒ„ ‰
.ƒƒ‰ Â
ComprobanteƒƒÂ 
.ƒƒ Ò
numero_serieƒƒÒ ˝
+ƒƒ˛ ˇ
$strƒƒÄ É
+ƒƒÑ Ö

ordenVentaƒƒÜ ê
.ƒƒê ë
Transaccionƒƒë ú
(ƒƒú ù
)ƒƒù û
.ƒƒû ü
Comprobanteƒƒü ™
.ƒƒ™ ´
numeroƒƒ´ ±
.ƒƒ± ≤
ToStringƒƒ≤ ∫
(ƒƒ∫ ª
)ƒƒª º
,ƒƒº Ω
IdEncriptadoƒƒæ  
=ƒƒÀ Ã
	EncriptarƒƒÕ ÷
(ƒƒ÷ ◊
(ƒƒ◊ ÿ
(ƒƒÿ Ÿ
longƒƒŸ ›
)ƒƒ› ﬁ
resultƒƒﬁ ‰
.ƒƒ‰ Â
informationƒƒÂ 
)ƒƒ Ò
.ƒƒÒ Ú
ToStringƒƒÚ ˙
(ƒƒ˙ ˚
)ƒƒ˚ ¸
)ƒƒ¸ ˝
}ƒƒ˛ ˇ
)ƒƒˇ Ä
;ƒƒÄ Å
}
≈≈ 
catch
∆∆ 
(
∆∆ 
LogicaException
∆∆ "
oe
∆∆# %
)
∆∆% &
{
«« 
return
»» 
new
»» "
JsonHttpStatusResult
»» /
(
»»/ 0
Util
»»0 4
.
»»4 5
	ErrorJson
»»5 >
(
»»> ?
oe
»»? A
)
»»A B
,
»»B C
HttpStatusCode
»»D R
.
»»R S!
InternalServerError
»»S f
)
»»f g
;
»»g h
}
…… 
catch
   
(
   
	Exception
   
e
   
)
   
{
ÀÀ 
return
ÃÃ 
new
ÃÃ "
JsonHttpStatusResult
ÃÃ /
(
ÃÃ/ 0
Util
ÃÃ0 4
.
ÃÃ4 5
	ErrorJson
ÃÃ5 >
(
ÃÃ> ?
new
ÃÃ? B
	Exception
ÃÃC L
(
ÃÃL M
$str
ÃÃM q
,
ÃÃq r
e
ÃÃs t
)
ÃÃt u
)
ÃÃu v
,
ÃÃv w
HttpStatusCodeÃÃx Ü
.ÃÃÜ á#
InternalServerErrorÃÃá ö
)ÃÃö õ
;ÃÃõ ú
}
ÕÕ 
}
ŒŒ 	
private
–– 
OrdenDeVenta
–– )
ArmarOrdenVentaParaImprimir
–– 8
(
––8 9
OrdenDeVenta
––9 E
ordenDeVenta
––F R
,
––R S!
DatosVentaIntegrada
––T g
venta
––h m
)
––m n
{
—— 	
ordenDeVenta
““ 
.
““ 
Transaccion
““ $
(
““$ %
)
““% &
.
““& '
Detalle_maestro1
““' 7
=
““8 9
ProfileData
““: E
(
““E F
)
““F G
.
““G H 
MaestrosFrecuentes
““H Z
.
““Z [
Moneda
““[ a
.
““a b
Convert
““b i
(
““i j
)
““j k
;
““k l
ordenDeVenta
”” 
.
”” 
Transaccion
”” $
(
””$ %
)
””% &
.
””& '
Comprobante
””' 2
.
””2 3
Detalle_maestro
””3 B
=
””C D
venta
””E J
.
””J K
Orden
””K P
.
””P Q
Comprobante
””Q \
.
””\ ]
Tipo
””] a
.
””a b
Convert
””b i
(
””i j
)
””j k
;
””k l
ordenDeVenta
‘‘ 
.
‘‘ 
Transaccion
‘‘ $
(
‘‘$ %
)
‘‘% &
.
‘‘& '
Actor_negocio
‘‘' 4
=
‘‘5 6
ProfileData
‘‘7 B
(
‘‘B C
)
‘‘C D
.
‘‘D E
Empleado
‘‘E M
.
‘‘M N
Convert
‘‘N U
(
‘‘U V
)
‘‘V W
;
‘‘W X
ordenDeVenta
’’ 
.
’’ 
Transaccion
’’ $
(
’’$ %
)
’’% &
.
’’& '
Actor_negocio1
’’' 5
=
’’6 7
venta
’’8 =
.
’’= >
Orden
’’> C
.
’’C D
Cliente
’’D K
.
’’K L
Convert
’’L S
(
’’S T
)
’’T U
;
’’U V
foreach
◊◊ 
(
◊◊ 
var
◊◊ 
item
◊◊ 
in
◊◊  
ordenDeVenta
◊◊! -
.
◊◊- .
Transaccion
◊◊. 9
(
◊◊9 :
)
◊◊: ;
.
◊◊; <!
Detalle_transaccion
◊◊< O
)
◊◊O P
{
ÿÿ 
item
ŸŸ 
.
ŸŸ 
registro
ŸŸ 
=
ŸŸ 
venta
ŸŸ  %
.
ŸŸ% &
Orden
ŸŸ& +
.
ŸŸ+ ,
Placa
ŸŸ, 1
;
ŸŸ1 2
item
⁄⁄ 
.
⁄⁄ 
Concepto_negocio
⁄⁄ %
=
⁄⁄& '
new
⁄⁄( +
Concepto_negocio
⁄⁄, <
(
⁄⁄< =
)
⁄⁄= >
{
€€ 
id
‹‹ 
=
‹‹ 
venta
‹‹ 
.
‹‹ 
Orden
‹‹ $
.
‹‹$ %
Detalles
‹‹% -
.
‹‹- .
FirstOrDefault
‹‹. <
(
‹‹< =
d
‹‹= >
=>
‹‹? A
d
‹‹B C
.
‹‹C D
Producto
‹‹D L
.
‹‹L M
Id
‹‹M O
==
‹‹P R
item
‹‹S W
.
‹‹W X!
id_concepto_negocio
‹‹X k
)
‹‹k l
.
‹‹l m
Producto
‹‹m u
.
‹‹u v
Id
‹‹v x
,
‹‹x y
codigo
›› 
=
›› 
venta
›› "
.
››" #
Orden
››# (
.
››( )
Detalles
››) 1
.
››1 2
FirstOrDefault
››2 @
(
››@ A
d
››A B
=>
››C E
d
››F G
.
››G H
Producto
››H P
.
››P Q
Id
››Q S
==
››T V
item
››W [
.
››[ \!
id_concepto_negocio
››\ o
)
››o p
.
››p q
Producto
››q y
.
››y z
Codigo››z Ä
,››Ä Å
nombre
ﬁﬁ 
=
ﬁﬁ 
venta
ﬁﬁ "
.
ﬁﬁ" #
Orden
ﬁﬁ# (
.
ﬁﬁ( )
Detalles
ﬁﬁ) 1
.
ﬁﬁ1 2
FirstOrDefault
ﬁﬁ2 @
(
ﬁﬁ@ A
d
ﬁﬁA B
=>
ﬁﬁC E
d
ﬁﬁF G
.
ﬁﬁG H
Producto
ﬁﬁH P
.
ﬁﬁP Q
Id
ﬁﬁQ S
==
ﬁﬁT V
item
ﬁﬁW [
.
ﬁﬁ[ \!
id_concepto_negocio
ﬁﬁ\ o
)
ﬁﬁo p
.
ﬁﬁp q
Producto
ﬁﬁq y
.
ﬁﬁy z
NombreConceptoﬁﬁz à
,ﬁﬁà â
Detalle_maestro4
ﬂﬂ $
=
ﬂﬂ% &
new
ﬂﬂ' *
Detalle_maestro
ﬂﬂ+ :
(
ﬂﬂ: ;
)
ﬂﬂ; <
{
ﬂﬂ= >
valor
ﬂﬂ? D
=
ﬂﬂE F
venta
ﬂﬂG L
.
ﬂﬂL M
Orden
ﬂﬂM R
.
ﬂﬂR S
Detalles
ﬂﬂS [
.
ﬂﬂ[ \
FirstOrDefault
ﬂﬂ\ j
(
ﬂﬂj k
d
ﬂﬂk l
=>
ﬂﬂm o
d
ﬂﬂp q
.
ﬂﬂq r
Producto
ﬂﬂr z
.
ﬂﬂz {
Id
ﬂﬂ{ }
==ﬂﬂ~ Ä
itemﬂﬂÅ Ö
.ﬂﬂÖ Ü#
id_concepto_negocioﬂﬂÜ ô
)ﬂﬂô ö
.ﬂﬂö õ
Productoﬂﬂõ £
.ﬂﬂ£ §
EsBienﬂﬂ§ ™
?ﬂﬂ´ ¨
$strﬂﬂ≠ ∞
:ﬂﬂ± ≤
$strﬂﬂ≥ ∂
}ﬂﬂ∑ ∏
}
‡‡ 
;
‡‡ 
}
·· 
return
‚‚ 
ordenDeVenta
‚‚ 
;
‚‚  
}
„„ 	
private
ÂÂ 
OrdenDeVenta
ÂÂ *
ArmarOrdenDeNotaParaImprimir
ÂÂ 9
(
ÂÂ9 :
OrdenDeVenta
ÂÂ: F
ordenDeNota
ÂÂG R
,
ÂÂR S%
RegistroDeNotaViewModel
ÂÂT k
nota
ÂÂl p
)
ÂÂp q
{
ÊÊ 	
ordenDeNota
ÁÁ 
.
ÁÁ 
Transaccion
ÁÁ #
(
ÁÁ# $
)
ÁÁ$ %
.
ÁÁ% &
Detalle_maestro1
ÁÁ& 6
=
ÁÁ7 8
ProfileData
ÁÁ9 D
(
ÁÁD E
)
ÁÁE F
.
ÁÁF G 
MaestrosFrecuentes
ÁÁG Y
.
ÁÁY Z
Moneda
ÁÁZ `
.
ÁÁ` a
Convert
ÁÁa h
(
ÁÁh i
)
ÁÁi j
;
ÁÁj k
ordenDeNota
ËË 
.
ËË 
Transaccion
ËË #
(
ËË# $
)
ËË$ %
.
ËË% &
Comprobante
ËË& 1
.
ËË1 2
Detalle_maestro
ËË2 A
=
ËËB C
nota
ËËD H
.
ËËH I
Comprobante
ËËI T
.
ËËT U
TipoComprobante
ËËU d
.
ËËd e
Convert
ËËe l
(
ËËl m
)
ËËm n
;
ËËn o
ordenDeNota
ÈÈ 
.
ÈÈ 
Transaccion
ÈÈ #
(
ÈÈ# $
)
ÈÈ$ %
.
ÈÈ% &
Actor_negocio
ÈÈ& 3
=
ÈÈ4 5
ProfileData
ÈÈ6 A
(
ÈÈA B
)
ÈÈB C
.
ÈÈC D
Empleado
ÈÈD L
.
ÈÈL M
Convert
ÈÈM T
(
ÈÈT U
)
ÈÈU V
;
ÈÈV W
ordenDeNota
ÍÍ 
.
ÍÍ 
Transaccion
ÍÍ #
(
ÍÍ# $
)
ÍÍ$ %
.
ÍÍ% &
Actor_negocio1
ÍÍ& 4
=
ÍÍ5 6 
actorNegocioLogica
ÍÍ7 I
.
ÍÍI J(
ObtenerActorComercialPorId
ÍÍJ d
(
ÍÍd e
ActorSettings
ÍÍe r
.
ÍÍr s
Default
ÍÍs z
.
ÍÍz {
IdRolClienteÍÍ{ á
,ÍÍá à
ordenDeNotaÍÍâ î
.ÍÍî ï
	IdClienteÍÍï û
)ÍÍû ü
.ÍÍü †
ConvertÍÍ† ß
(ÍÍß ®
)ÍÍ® ©
;ÍÍ© ™
var
ÏÏ 
detallesOrdenNota
ÏÏ !
=
ÏÏ! "
ordenDeNota
ÏÏ" -
.
ÏÏ- .
Transaccion
ÏÏ. 9
(
ÏÏ9 :
)
ÏÏ: ;
.
ÏÏ; <!
Detalle_transaccion
ÏÏ< O
.
ÏÏO P
ToList
ÏÏP V
(
ÏÏV W
)
ÏÏW X
;
ÏÏX Y
var
ÌÌ !
idsConceptosEnOrden
ÌÌ #
=
ÌÌ$ %
detallesOrdenNota
ÌÌ& 7
.
ÌÌ7 8
Select
ÌÌ8 >
(
ÌÌ> ?
d
ÌÌ? @
=>
ÌÌA C
d
ÌÌD E
.
ÌÌE F!
id_concepto_negocio
ÌÌF Y
)
ÌÌY Z
.
ÌÌZ [
ToArray
ÌÌ[ b
(
ÌÌb c
)
ÌÌc d
;
ÌÌd e
if
ÔÔ 
(
ÔÔ !
idsConceptosEnOrden
ÔÔ #
.
ÔÔ# $
Count
ÔÔ$ )
(
ÔÔ) *
)
ÔÔ* +
>
ÔÔ, -
$num
ÔÔ. /
)
ÔÔ/ 0
{
 
var
ÒÒ 
	conceptos
ÒÒ 
=
ÒÒ 
conceptoDatos
ÒÒ )
.
ÒÒ) *@
2ObtenerConceptosDeNegocioIncluyendoDetalleMaestro4
ÒÒ* \
(
ÒÒ\ ]!
idsConceptosEnOrden
ÒÒ] p
)
ÒÒp q
.
ÒÒq r
ToList
ÒÒr x
(
ÒÒx y
)
ÒÒy z
;
ÒÒz {
detallesOrdenNota
ÚÚ 
.
ÚÚ 
ForEach
ÚÚ %
(
ÚÚ% &
dt
ÚÚ& (
=>
ÚÚ) +
dt
ÚÚ, .
.
ÚÚ. /
Concepto_negocio
ÚÚ/ ?
=
ÚÚ@ A
	conceptos
ÚÚB K
.
ÚÚK L
Single
ÚÚL R
(
ÚÚR S
c
ÚÚS T
=>
ÚÚU W
c
ÚÚX Y
.
ÚÚY Z
id
ÚÚZ \
==
ÚÚ] _
dt
ÚÚ` b
.
ÚÚb c!
id_concepto_negocio
ÚÚc v
)
ÚÚv w
)
ÚÚw x
;
ÚÚx y
}
ÛÛ 
return
ıı 
ordenDeNota
ıı 
;
ıı 
}
ˆˆ 	
public
¸¸ 

JsonResult
¸¸ $
ObtenerOrdenesDeVentas
¸¸ 0
(
¸¸0 1
string
¸¸1 7
desde
¸¸8 =
,
¸¸= >
string
¸¸? E
hasta
¸¸F K
)
¸¸K L
{
˝˝ 	
DateTime
˛˛ 

fechaDesde
˛˛ 
=
˛˛  !
DateTime
˛˛" *
.
˛˛* +
Parse
˛˛+ 0
(
˛˛0 1
desde
˛˛1 6
)
˛˛6 7
;
˛˛7 8
DateTime
ˇˇ 

fechaHasta
ˇˇ 
=
ˇˇ  !
DateTime
ˇˇ" *
.
ˇˇ* +
Parse
ˇˇ+ 0
(
ˇˇ0 1
hasta
ˇˇ1 6
+
ˇˇ7 8
$str
ˇˇ9 D
)
ˇˇD E
;
ˇˇE F
try
ÄÄ 
{
ÅÅ 
List
ÇÇ 
<
ÇÇ 
OrdenDeVenta
ÇÇ !
>
ÇÇ! "
ordenesDeVenta
ÇÇ# 1
=
ÇÇ2 3
operacionLogica
ÇÇ4 C
.
ÇÇC D#
ObtenerOrdenesDeVenta
ÇÇD Y
(
ÇÇY Z
ProfileData
ÇÇZ e
(
ÇÇe f
)
ÇÇf g
.
ÇÇg h
Empleado
ÇÇh p
.
ÇÇp q
Id
ÇÇq s
,
ÇÇs t
ProfileDataÇÇu Ä
(ÇÇÄ Å
)ÇÇÅ Ç
.ÇÇÇ É.
IdCentroDeAtencionSeleccionadoÇÇÉ °
,ÇÇ° ¢

fechaDesdeÇÇ£ ≠
,ÇÇ≠ Æ

fechaHastaÇÇØ π
)ÇÇπ ∫
;ÇÇ∫ ª
List
ÉÉ 
<
ÉÉ .
 BandejaOrdenesCajaVentaViewModel
ÉÉ 5
>
ÉÉ5 6
	respuesta
ÉÉ7 @
=
ÉÉA B.
 BandejaOrdenesCajaVentaViewModel
ÉÉC c
.
ÉÉc d
Convert
ÉÉd k
(
ÉÉk l
ordenesDeVenta
ÉÉl z
)
ÉÉz {
;
ÉÉ{ |
return
ÑÑ 
Json
ÑÑ 
(
ÑÑ 
	respuesta
ÑÑ %
)
ÑÑ% &
;
ÑÑ& '
}
ÖÖ 
catch
ÜÜ 
(
ÜÜ 
	Exception
ÜÜ 
e
ÜÜ 
)
ÜÜ 
{
áá 
HttpContext
àà 
.
àà 
Response
àà $
.
àà$ %

StatusCode
àà% /
=
àà0 1
$num
àà2 5
;
àà5 6
return
ââ 
Json
ââ 
(
ââ 
Util
ââ  
.
ââ  !
	ErrorJson
ââ! *
(
ââ* +
e
ââ+ ,
)
ââ, -
)
ââ- .
;
ââ. /
}
ää 
}
ãã 	
public
çç 

JsonResult
çç 
ObtenerOrdenVenta
çç +
(
çç+ ,
long
çç, 0
idOrdenVenta
çç1 =
)
çç= >
{
éé 	
try
èè 
{
êê 
OrdenDeVenta
ëë 
ordenDeVenta
ëë )
=
ëë* +
operacionLogica
ëë, ;
.
ëë; <!
ObtenerOrdenDeVenta
ëë< O
(
ëëO P
ProfileData
ëëP [
(
ëë[ \
)
ëë\ ]
.
ëë] ^
Empleado
ëë^ f
.
ëëf g
Id
ëëg i
,
ëëi j
ProfileData
ëëk v
(
ëëv w
)
ëëw x
.
ëëx y-
IdCentroDeAtencionSeleccionadoëëy ó
,ëëó ò
idOrdenVentaëëô •
)ëë• ¶
;ëë¶ ß
var
íí 
	respuesta
íí 
=
íí 
new
íí  #'
OrdenVentaCompraViewModel
íí$ =
(
íí= >
ordenDeVenta
íí> J
)
ííJ K
;
ííK L
return
ìì 
Json
ìì 
(
ìì 
	respuesta
ìì %
)
ìì% &
;
ìì& '
}
îî 
catch
ïï 
(
ïï 
	Exception
ïï 
e
ïï 
)
ïï 
{
ññ 
return
óó 
new
óó "
JsonHttpStatusResult
óó /
(
óó/ 0
Util
óó0 4
.
óó4 5
	ErrorJson
óó5 >
(
óó> ?
new
óó? B
	Exception
óóC L
(
óóL M
$str
óóM z
,
óóz {
e
óó| }
)
óó} ~
)
óó~ 
,óó Ä
HttpStatusCodeóóÅ è
.óóè ê#
InternalServerErroróóê £
)óó£ §
;óó§ •
}
òò 
}
ôô 	
public
õõ 
async
õõ 
Task
õõ 
<
õõ 

JsonResult
õõ $
>
õõ$ %)
ObtenerOrdenVentaParaClonar
õõ& A
(
õõA B
long
õõB F
idOrden
õõG N
)
õõN O
{
úú 	
try
ùù 
{
ûû 
int
üü 0
"idCentroAtencionQueTieneLosPrecios
üü 6
=
üü7 8
ProfileData
üü9 D
(
üüD E
)
üüE F
.
üüF G0
"IdCentroAtencionQueTieneLosPrecios
üüG i
;
üüi j
int
†† 4
&idCentroAtencionQueTieneStockIntegrado
†† :
=
††; <
ProfileData
††= H
(
††H I
)
††I J
.
††J K6
(IdCentroAtencionQueTieneElStockIntegrada
††K s
;
††s t
long
°° +
idTransaccionInventarioFisico
°° 2
=
°°3 4
ProfileData
°°5 @
(
°°@ A
)
°°A B
.
°°B C'
ObtenerIdInventarioActual
°°C \
(
°°\ ]5
&idCentroAtencionQueTieneStockIntegrado°°] É
)°°É Ñ
;°°Ñ Ö
OrdenDeVenta
££ 
ordenDeVenta
££ )
=
££* +
operacionLogica
££, ;
.
££; <!
ObtenerOrdenDeVenta
££< O
(
££O P
ProfileData
££P [
(
££[ \
)
££\ ]
.
££] ^
Empleado
££^ f
.
££f g
Id
££g i
,
££i j
ProfileData
££k v
(
££v w
)
££w x
.
££x y-
IdCentroDeAtencionSeleccionado££y ó
,££ó ò
idOrden££ô †
)££† °
;££° ¢
List
§§ 
<
§§ '
SelectorTipoDeComprobante
§§ .
>
§§. /
comprobantes
§§0 <
=
§§= >
await
§§? D!
configuracionLogica
§§E X
.
§§X Y*
ObtenerSelectorDeComprobante
§§Y u
(
§§u v"
TipoComprobantePara§§v â
.§§â ä
Venta§§ä è
,§§è ê
ProfileData§§ë ú
(§§ú ù
)§§ù û
)§§û ü
;§§ü †
var
•• 
registro
•• 
=
•• 
new
•• "$
RegistroVentaViewModel
••# 9
(
••9 :
ordenDeVenta
••: F
,
••F G
comprobantes
••H T
)
••T U
;
••U V
foreach
¶¶ 
(
¶¶ 
var
¶¶ 
item
¶¶ !
in
¶¶" $
registro
¶¶% -
.
¶¶- .
Detalles
¶¶. 6
)
¶¶6 7
{
ßß 
item
®® 
.
®® 
ConceptoCompleto
®® )
=
®®* +
conceptoLogica
®®, :
.
®®: ;<
.ObtenerConceptoDeNegocioComercialPorIdConcepto
®®; i
(
®®i j
ProfileData
®®j u
(
®®u v
)
®®v w
,
®®w x
item
®®y }
.
®®} ~
Producto®®~ Ü
.®®Ü á
Id®®á â
,®®â ä
true®®ã è
,®®è ê
true®®ë ï
)®®ï ñ
;®®ñ ó
}
©© 
return
™™ 
Json
™™ 
(
™™ 
registro
™™ $
)
™™$ %
;
™™% &
}
´´ 
catch
¨¨ 
(
¨¨ 
	Exception
¨¨ 
e
¨¨ 
)
¨¨ 
{
≠≠ 
return
ÆÆ 
new
ÆÆ "
JsonHttpStatusResult
ÆÆ /
(
ÆÆ/ 0
Util
ÆÆ0 4
.
ÆÆ4 5
	ErrorJson
ÆÆ5 >
(
ÆÆ> ?
new
ÆÆ? B
	Exception
ÆÆC L
(
ÆÆL M
$str
ÆÆM z
,
ÆÆz {
e
ÆÆ| }
)
ÆÆ} ~
)
ÆÆ~ 
,ÆÆ Ä
HttpStatusCodeÆÆÅ è
.ÆÆè ê#
InternalServerErrorÆÆê £
)ÆÆ£ §
;ÆÆ§ •
}
ØØ 
}
∞∞ 	
public
∑∑ 
List
∑∑ 
<
∑∑ !
Detalle_transaccion
∑∑ '
>
∑∑' (2
$ConstruirDetalleMovimientoMercaderia
∑∑) M
(
∑∑M N2
$RegistroMovimientoDeAlmacenViewModel
∑∑N r
salidaMercaderia∑∑s É
)∑∑É Ñ
{
∏∏ 	
List
ππ 
<
ππ !
Detalle_transaccion
ππ $
>
ππ$ %!
detallesConstruidos
ππ& 9
=
ππ: ;
new
ππ< ?
List
ππ@ D
<
ππD E!
Detalle_transaccion
ππE X
>
ππX Y
(
ππY Z
)
ππZ [
;
ππ[ \
foreach
∫∫ 
(
∫∫ 
var
∫∫ 
item
∫∫ 
in
∫∫  
salidaMercaderia
∫∫! 1
.
∫∫1 2
Detalles
∫∫2 :
)
∫∫: ;
{
ªª !
detallesConstruidos
ºº #
.
ºº# $
Add
ºº$ '
(
ºº' (
new
ºº( +!
Detalle_transaccion
ºº, ?
(
ºº? @
item
ºº@ D
.
ººD E!
IngresoSalidaActual
ººE X
,
ººX Y
item
ººZ ^
.
ºº^ _

IdProducto
ºº_ i
,
ººi j
null
ººk o
,
ººo p
$num
ººq r
,
ººr s
$num
ººt u
,
ººu v
null
ººw {
,
ºº{ |
$num
ºº} ~
,
ºº~ 
nullººÄ Ñ
,ººÑ Ö
nullººÜ ä
,ººä ã
$numººå ç
,ººç é
$numººè ê
,ººê ë
$numººí ì
,ººì î
itemººï ô
.ººô ö
Loteººö û
,ººû ü
nullºº† §
,ºº§ •
nullºº¶ ™
)ºº™ ´
)ºº´ ¨
;ºº¨ ≠
}
ΩΩ 
return
ææ !
detallesConstruidos
ææ &
;
ææ& '
}
øø 	
public
¡¡ 

JsonResult
¡¡ %
GuardarVentaCorporativa
¡¡ 1
(
¡¡1 2$
RegistroVentaViewModel
¡¡2 H
venta
¡¡I N
)
¡¡N O
{
¬¬ 	
try
√√ 
{
ƒƒ 
OperationResult
≈≈ 
result
≈≈  &
;
≈≈& '
if
∆∆ 
(
∆∆ 
venta
∆∆ 
.
∆∆ 
IdVenta
∆∆ !
!=
∆∆" $
$num
∆∆% &
)
∆∆& '
{
«« 
result
»» 
=
»» 
EditarVenta
»» (
(
»»( )
venta
»») .
)
»». /
;
»»/ 0
}
…… 
else
   
{
ÀÀ 
result
ÃÃ 
=
ÃÃ 
RegistrarVenta
ÃÃ +
(
ÃÃ+ ,
venta
ÃÃ, 1
)
ÃÃ1 2
;
ÃÃ2 3
}
ÕÕ 
Util
ŒŒ 
.
ŒŒ (
ManageIfResultIsNotSuccess
ŒŒ /
(
ŒŒ/ 0
result
ŒŒ0 6
,
ŒŒ6 7
$str
ŒŒ8 U
)
ŒŒU V
;
ŒŒV W
return
œœ 
Json
œœ 
(
œœ 
new
œœ 
{
œœ  !
result
œœ" (
.
œœ( )
code_result
œœ) 4
,
œœ4 5
result
œœ6 <
.
œœ< =
data
œœ= A
,
œœA B 
result_description
œœC U
=
œœV W
result
œœX ^
.
œœ^ _
title
œœ_ d
}
œœe f
)
œœf g
;
œœg h
}
–– 
catch
—— 
(
—— 
LogicaException
—— "
oe
——# %
)
——% &
{
““ 
return
”” 
new
”” "
JsonHttpStatusResult
”” /
(
””/ 0
Util
””0 4
.
””4 5
	ErrorJson
””5 >
(
””> ?
oe
””? A
)
””A B
,
””B C
HttpStatusCode
””D R
.
””R S!
InternalServerError
””S f
)
””f g
;
””g h
}
‘‘ 
catch
’’ 
(
’’ 
	Exception
’’ 
e
’’ 
)
’’ 
{
÷÷ 
return
◊◊ 
new
◊◊ "
JsonHttpStatusResult
◊◊ /
(
◊◊/ 0
Util
◊◊0 4
.
◊◊4 5
	ErrorJson
◊◊5 >
(
◊◊> ?
new
◊◊? B
	Exception
◊◊C L
(
◊◊L M
$str
◊◊M s
,
◊◊s t
e
◊◊u v
)
◊◊v w
)
◊◊w x
,
◊◊x y
HttpStatusCode◊◊z à
.◊◊à â#
InternalServerError◊◊â ú
)◊◊ú ù
;◊◊ù û
}
ÿÿ 
}
ŸŸ 	
public
€€ 
OperationResult
€€ 
RegistrarVenta
€€ -
(
€€- .$
RegistroVentaViewModel
€€. D
venta
€€E J
)
€€J K
{
‹‹ 	
try
›› 
{
ﬁﬁ 
OperationResult
ﬂﬂ 
result
ﬂﬂ  &
=
ﬂﬂ' (
null
ﬂﬂ) -
;
ﬂﬂ- .
List
‡‡ 
<
‡‡  
DetalleDeOperacion
‡‡ '
>
‡‡' (
detalles
‡‡) 1
=
‡‡2 3+
RegistroDetalleVentaViewModel
‡‡4 Q
.
‡‡Q R
Convert
‡‡R Y
(
‡‡Y Z
venta
‡‡Z _
.
‡‡_ `
Detalles
‡‡` h
.
‡‡h i
ToList
‡‡i o
(
‡‡o p
)
‡‡p q
)
‡‡q r
;
‡‡r s
if
·· 
(
·· 
venta
·· 
.
·· 
EsVentaACredito
·· )
)
··) *
{
‚‚ 
if
„„ 
(
„„ 
venta
„„ 
.
„„ 
EsCreditoRapido
„„ -
)
„„- .
{
‰‰ 
result
ÂÂ 
=
ÂÂ  
null
ÂÂ! %
;
ÂÂ% &
}
ÈÈ 
else
ÍÍ 
{
ÎÎ 
result
ÌÌ 
=
ÌÌ  
null
ÌÌ! %
;
ÌÌ% &
}
ÒÒ 
}
ÚÚ 
else
ÛÛ 
{
ÙÙ 
result
ıı 
=
ıı 
null
ıı !
;
ıı! "
}
˘˘ 
return
˙˙ 
result
˙˙ 
;
˙˙ 
}
˚˚ 
catch
¸¸ 
(
¸¸ 
	Exception
¸¸ 
e
¸¸ 
)
¸¸ 
{
˝˝ 
throw
˛˛ 
e
˛˛ 
;
˛˛ 
}
ˇˇ 
}
ÄÄ 	
public
ÇÇ 
OperationResult
ÇÇ 
EditarVenta
ÇÇ *
(
ÇÇ* +$
RegistroVentaViewModel
ÇÇ+ A
venta
ÇÇB G
)
ÇÇG H
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 
OperationResult
ÜÜ 
result
ÜÜ  &
=
ÜÜ' (
null
ÜÜ) -
;
ÜÜ- .
List
áá 
<
áá  
DetalleDeOperacion
áá '
>
áá' (
detalles
áá) 1
=
áá2 3+
RegistroDetalleVentaViewModel
áá4 Q
.
ááQ R
Convert
ááR Y
(
ááY Z
venta
ááZ _
.
áá_ `
Detalles
áá` h
.
ááh i
ToList
áái o
(
ááo p
)
ááp q
)
ááq r
;
áár s
if
àà 
(
àà 
venta
àà 
.
àà 
EsVentaACredito
àà )
)
àà) *
{
ââ 
if
ää 
(
ää 
venta
ää 
.
ää 
EsCreditoRapido
ää -
)
ää- .
{
ãã 
result
åå 
=
åå  
null
åå! %
;
åå% &
}
êê 
else
ëë 
{
íí 
result
ìì 
=
ìì  
null
ìì! %
;
ìì% &
result
îî 
=
îî  
null
îî! %
;
îî% &
}
òò 
}
ôô 
else
öö 
{
õõ 
result
úú 
=
úú 
null
úú !
;
úú! "
}
†† 
return
°° 
result
°° 
;
°° 
}
¢¢ 
catch
££ 
(
££ 
	Exception
££ 
e
££ 
)
££ 
{
§§ 
throw
•• 
e
•• 
;
•• 
}
¶¶ 
}
ßß 	
public
©© 
List
©© 
<
©© 
Cuota
©© 
>
©© 
ConstruirCuotas
©© *
(
©©* +
List
©©+ /
<
©©/ 04
&RegistroDetalleFinanciamientoViewModel
©©0 V
>
©©V W
cuotas
©©X ^
)
©©^ _
{
™™ 	
List
´´ 
<
´´ 
Cuota
´´ 
>
´´ 
cuotasConstruidas
´´ )
=
´´* +
new
´´, /
List
´´0 4
<
´´4 5
Cuota
´´5 :
>
´´: ;
(
´´; <
)
´´< =
;
´´= >
foreach
¨¨ 
(
¨¨ 
var
¨¨ 
item
¨¨ 
in
¨¨  
cuotas
¨¨! '
)
¨¨' (
{
≠≠ 
cuotasConstruidas
ÆÆ !
.
ÆÆ! "
Add
ÆÆ" %
(
ÆÆ% &
new
ÆÆ& )
Cuota
ÆÆ* /
(
ÆÆ/ 0
)
ÆÆ0 1
{
ØØ 
codigo
∞∞ 
=
∞∞ 
$str
∞∞ 
,
∞∞  
fecha_emision
±± !
=
±±" #
item
±±$ (
.
±±( )
FechaVencimiento
±±) 9
,
±±9 :
fecha_vencimiento
≤≤ %
=
≤≤& '
item
≤≤( ,
.
≤≤, -
FechaVencimiento
≤≤- =
,
≤≤= >
capital
≥≥ 
=
≥≥ 
item
≥≥ "
.
≥≥" #
CapitalCuota
≥≥# /
,
≥≥/ 0
interes
¥¥ 
=
¥¥ 
item
¥¥ "
.
¥¥" #
InteresCuota
¥¥# /
,
¥¥/ 0
total
µµ 
=
µµ 
item
µµ  
.
µµ  !
ImporteCuota
µµ! -
,
µµ- .

por_cobrar
∂∂ 
=
∂∂  
false
∂∂! &
,
∂∂& '
cuota_inicial
∑∑ !
=
∑∑" #
item
∑∑$ (
.
∑∑( )
EsCuotaInicial
∑∑) 7
}
∏∏ 
)
∏∏ 
;
∏∏ 
}
ππ 
return
∫∫ 
cuotasConstruidas
∫∫ $
;
∫∫$ %
}
ªª 	
public
ΩΩ 
List
ΩΩ 
<
ΩΩ !
MovimientoDeAlmacen
ΩΩ '
>
ΩΩ' (*
ConstruirSalidasDeMercaderia
ΩΩ) E
(
ΩΩE F
List
ΩΩF J
<
ΩΩJ K2
$RegistroMovimientoDeAlmacenViewModel
ΩΩK o
>
ΩΩo p
	registros
ΩΩq z
)
ΩΩz {
{
ææ 	
List
øø 
<
øø !
MovimientoDeAlmacen
øø $
>
øø$ %!
salidasDeMercaderia
øø& 9
=
øø: ;
new
øø< ?
List
øø@ D
<
øøD E!
MovimientoDeAlmacen
øøE X
>
øøX Y
(
øøY Z
)
øøZ [
;
øø[ \
foreach
¿¿ 
(
¿¿ 
var
¿¿ 
registro
¿¿ !
in
¿¿" $
	registros
¿¿% .
)
¿¿. /
{
¡¡ !
salidasDeMercaderia
¬¬ #
.
¬¬# $
Add
¬¬$ '
(
¬¬' (
new
¬¬( +!
MovimientoDeAlmacen
¬¬, ?
(
¬¬? @
new
¬¬@ C
Transaccion
¬¬D O
(
¬¬O P
)
¬¬P Q
{
√√ !
Detalle_transaccion
ƒƒ '
=
ƒƒ( )2
$ConstruirDetalleMovimientoMercaderia
ƒƒ* N
(
ƒƒN O
registro
ƒƒO W
)
ƒƒW X
,
ƒƒX Y

comentario
≈≈ 
=
≈≈  
registro
≈≈! )
.
≈≈) *
Observacion
≈≈* 5
,
≈≈5 6
}
∆∆ 
)
∆∆ 
{
«« '
IdComprobanteSeleccionado
»» -
=
»». /
registro
»»0 8
.
»»8 9
TipoDeComprobante
»»9 J
.
»»J K
TipoComprobante
»»K Z
.
»»Z [
Id
»»[ ]
,
»»] ^!
IdSerieSeleccionada
…… '
=
……( )
registro
……* 2
.
……2 3
TipoDeComprobante
……3 D
.
……D E
SerieSeleccionada
……E V
,
……V W
EsPropio
   
=
   
registro
   '
.
  ' (
TipoDeComprobante
  ( 9
.
  9 :
EsPropio
  : B
,
  B C
SerieIngresada
ÀÀ "
=
ÀÀ# $
registro
ÀÀ% -
.
ÀÀ- .
TipoDeComprobante
ÀÀ. ?
.
ÀÀ? @
SerieIngresada
ÀÀ@ N
,
ÀÀN O
NumeroIngresado
ÃÃ #
=
ÃÃ$ %
registro
ÃÃ& .
.
ÃÃ. /
TipoDeComprobante
ÃÃ/ @
.
ÃÃ@ A
NumeroIngresado
ÃÃA P
,
ÃÃP Q!
FechaInicioTraslado
ÕÕ '
=
ÕÕ( )
registro
ÕÕ* 2
.
ÕÕ2 3!
FechaInicioTraslado
ÕÕ3 F
,
ÕÕF G
IdTransportista
ŒŒ #
=
ŒŒ$ %
registro
ŒŒ& .
.
ŒŒ. /
Transportista
ŒŒ/ <
.
ŒŒ< =
Transportista
ŒŒ= J
.
ŒŒJ K
Id
ŒŒK M
,
ŒŒM N
Placa
œœ 
=
œœ 
registro
œœ $
.
œœ$ %
Transportista
œœ% 2
.
œœ2 3
Placa
œœ3 8
,
œœ8 9
IdConductor
–– 
=
––  !
registro
––" *
.
––* +
	Conductor
––+ 4
.
––4 5
	Conductor
––5 >
.
––> ?
Id
––? A
,
––A B
NumeroLicencia
—— "
=
——# $
registro
——% -
.
——- .
	Conductor
——. 7
.
——7 8
NumeroLicencia
——8 F
,
——F G#
IdModalidadTransporte
““ )
=
““* +
registro
““, 4
.
““4 5!
ModalidadTransporte
““5 H
.
““H I
Id
““I K
,
““K L
IdMotivoTraslado
”” $
=
””% &
registro
””' /
.
””/ 0
MotivoTraslado
””0 >
.
””> ?
Id
””? A
,
””A B
PesoBrutoTotal
‘‘ "
=
‘‘# $
registro
‘‘% -
.
‘‘- .
PesoBrutoTotal
‘‘. <
,
‘‘< =
NumeroBultos
’’  
=
’’! "
registro
’’# +
.
’’+ ,
NumeroBultos
’’, 8
,
’’8 9
DireccionOrigen
÷÷ #
=
÷÷$ %
registro
÷÷& .
.
÷÷. /
DireccionOrigen
÷÷/ >
+
÷÷? @
$str
÷÷A F
+
÷÷G H
registro
÷÷I Q
.
÷÷Q R
UbigeoOrigen
÷÷R ^
.
÷÷^ _
Nombre
÷÷_ e
,
÷÷e f
DireccionDestino
◊◊ $
=
◊◊% &
registro
◊◊' /
.
◊◊/ 0
DireccionDestino
◊◊0 @
+
◊◊A B
$str
◊◊C H
+
◊◊I J
registro
◊◊K S
.
◊◊S T
UbigeoDestino
◊◊T a
.
◊◊a b
Nombre
◊◊b h
,
◊◊h i
IdUbigeoOrigen
ÿÿ "
=
ÿÿ# $
registro
ÿÿ% -
.
ÿÿ- .
UbigeoOrigen
ÿÿ. :
.
ÿÿ: ;
Id
ÿÿ; =
,
ÿÿ= >
IdUbigeoDestino
ŸŸ #
=
ŸŸ$ %
registro
ŸŸ& .
.
ŸŸ. /
UbigeoDestino
ŸŸ/ <
.
ŸŸ< =
Id
ŸŸ= ?
}
⁄⁄ 
)
⁄⁄ 
;
⁄⁄ 
}
€€ 
return
‹‹ !
salidasDeMercaderia
‹‹ &
;
‹‹& '
}
›› 	
public
·· 

JsonResult
·· *
ContabilizarVentaCorporativa
·· 6
(
··6 7
long
··7 ;
idOrdenVenta
··< H
)
··H I
{
‚‚ 	
try
„„ 
{
‰‰ 
return
ÊÊ 
null
ÊÊ 
;
ÊÊ 
}
ÁÁ 
catch
ËË 
(
ËË 
	Exception
ËË 
e
ËË 
)
ËË 
{
ÈÈ 
return
ÍÍ 
Json
ÍÍ 
(
ÍÍ 
Util
ÍÍ  
.
ÍÍ  !
	ErrorJson
ÍÍ! *
(
ÍÍ* +
e
ÍÍ+ ,
)
ÍÍ, -
)
ÍÍ- .
;
ÍÍ. /
}
ÎÎ 
}
ÏÏ 	
public
ÓÓ 

JsonResult
ÓÓ '
ConfirmarVentaCorporativa
ÓÓ 3
(
ÓÓ3 4
long
ÓÓ4 8
idVenta
ÓÓ9 @
,
ÓÓ@ A.
 RegistroCobroYPagoCuotaViewModel
ÓÓB b
trazaPagoInicial
ÓÓc s
)
ÓÓs t
{
ÔÔ 	
try
 
{
ÒÒ 
OperationResult
ÚÚ 
result
ÚÚ  &
=
ÚÚ' (
null
ÚÚ) -
;
ÚÚ- .
Util
ÙÙ 
.
ÙÙ (
ManageIfResultIsNotSuccess
ÙÙ /
(
ÙÙ/ 0
result
ÙÙ0 6
,
ÙÙ6 7
$str
ÙÙ8 V
)
ÙÙV W
;
ÙÙW X
return
ıı 
Json
ıı 
(
ıı 
new
ıı 
{
ıı  !
code_result
ıı" -
=
ıı. /
result
ıı0 6
.
ıı6 7
code_result
ıı7 B
,
ııB C
data
ııD H
=
ııI J
result
ııK Q
.
ııQ R
data
ııR V
,
ııV W 
result_description
ııX j
=
ıık l
result
ıım s
.
ııs t
title
ııt y
}
ıız {
)
ıı{ |
;
ıı| }
}
ˆˆ 
catch
˜˜ 
(
˜˜ 
	Exception
˜˜ 
e
˜˜ 
)
˜˜ 
{
¯¯ 
return
˘˘ 
Json
˘˘ 
(
˘˘ 
Util
˘˘  
.
˘˘  !
	ErrorJson
˘˘! *
(
˘˘* +
e
˘˘+ ,
)
˘˘, -
)
˘˘- .
;
˘˘. /
}
˙˙ 
}
˚˚ 	
public
˝˝ 

JsonResult
˝˝ 3
%RegistrarComprobanteCompraCorporativa
˝˝ ?
(
˝˝? @
long
˝˝@ D
idCompra
˝˝E M
,
˝˝M N'
SelectorTipoDeComprobante
˝˝O h
comprobante
˝˝i t
)
˝˝t u
{
˛˛ 	
try
ˇˇ 
{
ÄÄ 
OperationResult
ÅÅ 
result
ÅÅ  &
=
ÅÅ' (
null
ÅÅ) -
;
ÅÅ- .
Util
ÉÉ 
.
ÉÉ (
ManageIfResultIsNotSuccess
ÉÉ /
(
ÉÉ/ 0
result
ÉÉ0 6
,
ÉÉ6 7
$str
ÉÉ8 e
)
ÉÉe f
;
ÉÉf g
return
ÑÑ 
Json
ÑÑ 
(
ÑÑ 
new
ÑÑ 
{
ÑÑ  !
code_result
ÑÑ" -
=
ÑÑ. /
result
ÑÑ0 6
.
ÑÑ6 7
code_result
ÑÑ7 B
,
ÑÑB C
data
ÑÑD H
=
ÑÑI J
result
ÑÑK Q
.
ÑÑQ R
data
ÑÑR V
,
ÑÑV W 
result_description
ÑÑX j
=
ÑÑk l
result
ÑÑm s
.
ÑÑs t
title
ÑÑt y
}
ÑÑz {
)
ÑÑ{ |
;
ÑÑ| }
}
ÖÖ 
catch
ÜÜ 
(
ÜÜ 
	Exception
ÜÜ 
e
ÜÜ 
)
ÜÜ 
{
áá 
return
àà 
Json
àà 
(
àà 
Util
àà  
.
àà  !
	ErrorJson
àà! *
(
àà* +
e
àà+ ,
)
àà, -
)
àà- .
;
àà. /
}
ââ 
}
ää 	
public
íí 

JsonResult
íí -
GuardarVentasYCobrosPorVendedor
íí 9
(
íí9 :.
 RegistroDeVentasYCobrosViewModel
íí: Z&
ventasYCobrosPorVendedor
íí[ s
)
íís t
{
ìì 	
try
îî 
{
ïï 
VentaMasiva
ññ 
venta
ññ !
=
ññ" #.
 RegistroDeVentasYCobrosViewModel
ññ$ D
.
ññD E
ConvertVenta
ññE Q
(
ññQ R&
ventasYCobrosPorVendedor
ññR j
)
ññj k
;
ññk l
CobranzaMasiva
óó 
cobranza
óó '
=
óó( ).
 RegistroDeVentasYCobrosViewModel
óó* J
.
óóJ K
ConvertCobranza
óóK Z
(
óóZ [&
ventasYCobrosPorVendedor
óó[ s
)
óós t
;
óót u-
VentaYCobranzaCarteraDeClientes
òò /!
ventaCobranzaMasiva
òò0 C
=
òòD E
new
òòF I-
VentaYCobranzaCarteraDeClientes
òòJ i
(
òòi j'
ventasYCobrosPorVendedoròòj Ç
.òòÇ É
PuntoDeVentaòòÉ è
.òòè ê
Idòòê í
,òòí ì(
ventasYCobrosPorVendedoròòî ¨
.òò¨ ≠
PuntoDeVentaòò≠ π
.òòπ ∫
Nombreòò∫ ¿
,òò¿ ¡(
ventasYCobrosPorVendedoròò¬ ⁄
.òò⁄ €
Fechaòò€ ‡
,òò‡ ·
ventaòò‚ Á
,òòÁ Ë
cobranzaòòÈ Ò
)òòÒ Ú
;òòÚ Û
OperationResult
ôô 
result
ôô  &
=
ôô' (
operacionLogica
ôô) 8
.
ôô8 9>
0ConfirmarVentasAlCreditoYCobranzasCarteraCliente
ôô9 i
(
ôôi j
ProfileData
ôôj u
(
ôôu v
)
ôôv w
,
ôôw x"
ventaCobranzaMasivaôôy å
)ôôå ç
;ôôç é
Util
öö 
.
öö (
ManageIfResultIsNotSuccess
öö /
(
öö/ 0
result
öö0 6
,
öö6 7
$str
öö8 g
)
öög h
;
ööh i
return
õõ 
Json
õõ 
(
õõ 
new
õõ 
{
õõ  !
result
õõ" (
.
õõ( )
code_result
õõ) 4
,
õõ4 5
result
õõ6 <
.
õõ< =
data
õõ= A
,
õõA B 
result_description
õõC U
=
õõV W
result
õõX ^
.
õõ^ _
title
õõ_ d
}
õõe f
)
õõf g
;
õõg h
}
úú 
catch
ùù 
(
ùù 
LogicaException
ùù "
oe
ùù# %
)
ùù% &
{
ûû 
return
üü 
new
üü "
JsonHttpStatusResult
üü /
(
üü/ 0
Util
üü0 4
.
üü4 5
	ErrorJson
üü5 >
(
üü> ?
oe
üü? A
)
üüA B
,
üüB C
HttpStatusCode
üüD R
.
üüR S!
InternalServerError
üüS f
)
üüf g
;
üüg h
}
†† 
catch
°° 
(
°° 
	Exception
°° 
e
°° 
)
°° 
{
¢¢ 
return
££ 
new
££ "
JsonHttpStatusResult
££ /
(
££/ 0
Util
££0 4
.
££4 5
	ErrorJson
££5 >
(
££> ?
e
££? @
)
££@ A
,
££A B
HttpStatusCode
££C Q
.
££Q R!
InternalServerError
££R e
)
££e f
;
££f g
}
§§ 
}
•• 	
public
ßß 

JsonResult
ßß "
ObtenerDeudasMasivas
ßß .
(
ßß. /
int
ßß/ 2
idPuntoDeVenta
ßß3 A
,
ßßA B
DateTime
ßßC K
fecha
ßßL Q
)
ßßQ R
{
®® 	
try
©© 
{
™™ 
var
¨¨ 

resultados
¨¨ 
=
¨¨  
operacionLogica
¨¨! 0
.
¨¨0 15
'ObtenerDeudasMasivasDeCarteraDeClientes
¨¨1 X
(
¨¨X Y
idPuntoDeVenta
¨¨Y g
,
¨¨g h
fecha
¨¨i n
)
¨¨n o
;
¨¨o p
List
≠≠ 
<
≠≠ 1
#RegistroClienteVentaYCobroViewModel
≠≠ 8
>
≠≠8 9$
ventasYCobrosViewModel
≠≠: P
=
≠≠Q R1
#RegistroClienteVentaYCobroViewModel
≠≠S v
.
≠≠v w
Convert
≠≠w ~
(
≠≠~ 

resultados≠≠ â
)≠≠â ä
;≠≠ä ã$
ventasYCobrosViewModel
ÆÆ &
=
ÆÆ' ($
ventasYCobrosViewModel
ÆÆ) ?
.
ÆÆ? @
OrderBy
ÆÆ@ G
(
ÆÆG H
vcv
ÆÆH K
=>
ÆÆL N
vcv
ÆÆO R
.
ÆÆR S
Cliente
ÆÆS Z
.
ÆÆZ [
Nombre
ÆÆ[ a
)
ÆÆa b
.
ÆÆb c
ToList
ÆÆc i
(
ÆÆi j
)
ÆÆj k
;
ÆÆk l
return
ØØ 
Json
ØØ 
(
ØØ $
ventasYCobrosViewModel
ØØ 2
)
ØØ2 3
;
ØØ3 4
}
∞∞ 
catch
±± 
(
±± 
	Exception
±± 
e
±± 
)
±± 
{
≤≤ 
return
≥≥ 
new
≥≥ "
JsonHttpStatusResult
≥≥ /
(
≥≥/ 0
Util
≥≥0 4
.
≥≥4 5
	ErrorJson
≥≥5 >
(
≥≥> ?
e
≥≥? @
)
≥≥@ A
,
≥≥A B
HttpStatusCode
≥≥C Q
.
≥≥Q R!
InternalServerError
≥≥R e
)
≥≥e f
;
≥≥f g
}
¥¥ 
}
µµ 	
public
ΩΩ 

JsonResult
ΩΩ )
ObtenerVentasYCobrosMasivos
ΩΩ 5
(
ΩΩ5 6
string
ΩΩ6 <
desde
ΩΩ= B
,
ΩΩB C
string
ΩΩD J
hasta
ΩΩK P
)
ΩΩP Q
{
ææ 	
DateTime
øø 

fechaDesde
øø 
=
øø  !
DateTimeUtil
øø" .
.
øø. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
øø/ Z
(
øøZ [
desde
øø[ `
)
øø` a
;
øøa b
DateTime
¿¿ 

fechaHasta
¿¿ 
=
¿¿  !
DateTimeUtil
¿¿" .
.
¿¿. /E
7ObtenerFechaHastaConPrecisionDeHorasMinutosMilisegundos
¿¿/ f
(
¿¿f g
hasta
¿¿g l
)
¿¿l m
;
¿¿m n
try
¡¡ 
{
¬¬ 
List
√√ 
<
√√ 6
(BandejaVentasYCobrosPorVendedorViewModel
√√ =
>
√√= >
	respuesta
√√? H
=
√√I J6
(BandejaVentasYCobrosPorVendedorViewModel
√√K s
.
√√s t
Convert
√√t {
(
√√{ |
operacionLogica√√| ã
.√√ã å.
ObtenerVentasYCobranzasMasivas√√å ™
(√√™ ´

fechaDesde√√´ µ
,√√µ ∂

fechaHasta√√∑ ¡
)√√¡ ¬
)√√¬ √
;√√√ ƒ
return
ƒƒ 
Json
ƒƒ 
(
ƒƒ 
	respuesta
ƒƒ %
)
ƒƒ% &
;
ƒƒ& '
}
≈≈ 
catch
∆∆ 
(
∆∆ 
	Exception
∆∆ 
e
∆∆ 
)
∆∆ 
{
«« 
return
»» 
new
»» "
JsonHttpStatusResult
»» /
(
»»/ 0
Util
»»0 4
.
»»4 5
	ErrorJson
»»5 >
(
»»> ?
e
»»? @
)
»»@ A
,
»»A B
HttpStatusCode
»»C Q
.
»»Q R!
InternalServerError
»»R e
)
»»e f
;
»»f g
}
…… 
}
   	
public
ÃÃ 

JsonResult
ÃÃ (
ObtenerVentasYCobrosMasivo
ÃÃ 4
(
ÃÃ4 5
int
ÃÃ5 8 
idCentroDeAtencion
ÃÃ9 K
,
ÃÃK L
string
ÃÃM S
fecha
ÃÃT Y
,
ÃÃY Z
int
ÃÃ[ ^
idTransaccion
ÃÃ_ l
)
ÃÃl m
{
ÕÕ 	
DateTime
ŒŒ #
fechaDeVentaOCobranza
ŒŒ *
=
ŒŒ+ ,
DateTime
ŒŒ- 5
.
ŒŒ5 6
Parse
ŒŒ6 ;
(
ŒŒ; <
fecha
ŒŒ< A
)
ŒŒA B
;
ŒŒB C
try
œœ 
{
–– -
VentaYCobroPorVendedorViewModel
—— /
	respuesta
——0 9
=
——: ;
new
——< ?-
VentaYCobroPorVendedorViewModel
——@ _
(
——_ `
operacionLogica
——` o
.
——o p,
ObtenerVentasYCobranzasMasiva——p ç
(——ç é
idTransaccion——é õ
)——õ ú
,——ú ù
operacionLogica
““ #
.
““# $5
'ObtenerDeudasMasivasDeCarteraDeClientes
““$ K
(
““K L 
idCentroDeAtencion
““L ^
,
““^ _#
fechaDeVentaOCobranza
““` u
)
““u v
)
““v w
;
““w x
return
”” 
Json
”” 
(
”” 
	respuesta
”” %
)
””% &
;
””& '
}
‘‘ 
catch
’’ 
(
’’ 
	Exception
’’ 
e
’’ 
)
’’ 
{
÷÷ 
return
◊◊ 
new
◊◊ "
JsonHttpStatusResult
◊◊ /
(
◊◊/ 0
Util
◊◊0 4
.
◊◊4 5
	ErrorJson
◊◊5 >
(
◊◊> ?
e
◊◊? @
)
◊◊@ A
,
◊◊A B
HttpStatusCode
◊◊C Q
.
◊◊Q R!
InternalServerError
◊◊R e
)
◊◊e f
;
◊◊f g
}
ÿÿ 
}
ŸŸ 	
public
ﬂﬂ 

JsonResult
ﬂﬂ  
GuardarVentaMasiva
ﬂﬂ ,
(
ﬂﬂ, -*
RegistroVentaMasivaViewModel
ﬂﬂ- I
ventaMasiva
ﬂﬂJ U
)
ﬂﬂU V
{
‡‡ 	
try
·· 
{
‚‚ 
VentaMasiva
„„ 
venta
„„ !
=
„„" #*
RegistroVentaMasivaViewModel
„„$ @
.
„„@ A
ConvertVenta
„„A M
(
„„M N
ventaMasiva
„„N Y
)
„„Y Z
;
„„Z [
OperationResult
‰‰ 
result
‰‰  &
=
‰‰' (
operacionLogica
‰‰) 8
.
‰‰8 9"
ConfirmarVentaMasiva
‰‰9 M
(
‰‰M N
ProfileData
‰‰N Y
(
‰‰Y Z
)
‰‰Z [
,
‰‰[ \
venta
‰‰] b
)
‰‰b c
;
‰‰c d
Util
ÂÂ 
.
ÂÂ (
ManageIfResultIsNotSuccess
ÂÂ /
(
ÂÂ/ 0
result
ÂÂ0 6
,
ÂÂ6 7
$str
ÂÂ8 g
)
ÂÂg h
;
ÂÂh i
return
ÊÊ 
Json
ÊÊ 
(
ÊÊ 
new
ÊÊ 
{
ÊÊ  !
result
ÊÊ" (
.
ÊÊ( )
code_result
ÊÊ) 4
,
ÊÊ4 5
result
ÊÊ6 <
.
ÊÊ< =
data
ÊÊ= A
,
ÊÊA B 
result_description
ÊÊC U
=
ÊÊV W
result
ÊÊX ^
.
ÊÊ^ _
title
ÊÊ_ d
}
ÊÊe f
)
ÊÊf g
;
ÊÊg h
}
ÁÁ 
catch
ËË 
(
ËË 
LogicaException
ËË "
oe
ËË# %
)
ËË% &
{
ÈÈ 
return
ÍÍ 
new
ÍÍ "
JsonHttpStatusResult
ÍÍ /
(
ÍÍ/ 0
Util
ÍÍ0 4
.
ÍÍ4 5
	ErrorJson
ÍÍ5 >
(
ÍÍ> ?
oe
ÍÍ? A
)
ÍÍA B
,
ÍÍB C
HttpStatusCode
ÍÍD R
.
ÍÍR S!
InternalServerError
ÍÍS f
)
ÍÍf g
;
ÍÍg h
}
ÎÎ 
catch
ÏÏ 
(
ÏÏ 
	Exception
ÏÏ 
e
ÏÏ 
)
ÏÏ 
{
ÌÌ 
return
ÓÓ 
new
ÓÓ "
JsonHttpStatusResult
ÓÓ /
(
ÓÓ/ 0
Util
ÓÓ0 4
.
ÓÓ4 5
	ErrorJson
ÓÓ5 >
(
ÓÓ> ?
e
ÓÓ? @
)
ÓÓ@ A
,
ÓÓA B
HttpStatusCode
ÓÓC Q
.
ÓÓQ R!
InternalServerError
ÓÓR e
)
ÓÓe f
;
ÓÓf g
}
ÔÔ 
}
 	
[
ˆˆ 	
AllowAnonymous
ˆˆ	 
]
ˆˆ 
public
˜˜ 
ActionResult
˜˜ 
Imprimir
˜˜ $
(
˜˜$ %
)
˜˜% &
{
¯¯ 	
ViewBag
˘˘ 
.
˘˘ 
Message
˘˘ 
=
˘˘ 
$str
˘˘ B
;
˘˘B C
var
˙˙ 

imageArray
˙˙ 
=
˙˙ 
barCodeUtil
˙˙ (
.
˙˙( )
ObtenerCodigoQR
˙˙) 8
(
˙˙8 9
$str
˙˙9 L
)
˙˙L M
;
˙˙M N
var
ññ 
Renderer
ññ 
=
ññ 
new
ññ 
	SelectPdf
ññ (
.
ññ( )
	HtmlToPdf
ññ) 2
(
ññ2 3
)
ññ3 4
;
ññ4 5
Renderer
òò 
.
òò 
Options
òò 
.
òò 
PdfPageSize
òò (
=
òò) *
	SelectPdf
òò+ 4
.
òò4 5
PdfPageSize
òò5 @
.
òò@ A
A4
òòA C
;
òòC D
Renderer
ôô 
.
ôô 
Options
ôô 
.
ôô 
PdfPageCustomSize
ôô .
=
ôô/ 0
new
ôô1 4
SizeF
ôô5 :
(
ôô: ;
$num
ôô; >
,
ôô> ?
$num
ôô@ C
)
ôôC D
;
ôôD E
Renderer
ùù 
.
ùù 
Options
ùù 
.
ùù 
MarginBottom
ùù )
=
ùù* +
$num
ùù, -
;
ùù- .
Renderer
ûû 
.
ûû 
Options
ûû 
.
ûû 
	MarginTop
ûû &
=
ûû' (
$num
ûû) *
;
ûû* +
Renderer
†† 
.
†† 
Options
†† 
.
†† 
DisplayHeader
†† *
=
††+ ,
false
††- 2
;
††2 3
Renderer
°° 
.
°° 
Options
°° 
.
°° $
JpegCompressionEnabled
°° 3
=
°°4 5
false
°°6 ;
;
°°; <
var
§§ 
pdf
§§ 
=
§§ 
Renderer
§§ 
.
§§ 
ConvertHtmlString
§§ 0
(
§§0 1
HtmlStringBuilder
§§1 B
.
§§B C%
RenderRazorViewToString
§§C Z
(
§§Z [
$str
§§[ f
,
§§f g
null
§§h l
,
§§l m
this
§§n r
)
§§r s
)
§§s t
;
§§t u
return
¶¶ 
base
¶¶ 
.
¶¶ 
File
¶¶ 
(
¶¶ 
pdf
¶¶  
.
¶¶  !
Save
¶¶! %
(
¶¶% &
)
¶¶& '
,
¶¶' (
$str
¶¶) :
)
¶¶: ;
;
¶¶; <
}
ßß 	
public
©© 
void
©© 
PrintFileTmp
©©  
(
©©  !
long
©©! %
idVenta
©©& -
)
©©- .
{
™™ 	
OrdenDeVenta
´´ 
orden
´´ 
=
´´  
operacionLogica
´´! 0
.
´´0 1!
ObtenerOrdenDeVenta
´´1 D
(
´´D E
idVenta
´´E L
)
´´L M
;
´´M N6
(EstablecimientoComercialExtendidoConLogo
¨¨ 4
sede
¨¨5 9
=
¨¨: ;
ObtenerSede
¨¨< G
(
¨¨G H
)
¨¨H I
;
¨¨I J
string
≠≠ 
	QrContent
≠≠ 
=
≠≠ *
facturacionElectronicaLogica
≠≠ ;
.
≠≠; <
	ObtenerQR
≠≠< E
(
≠≠E F
orden
≠≠F K
,
≠≠K L
sede
≠≠M Q
)
≠≠Q R
;
≠≠R S
byte
ÆÆ 
[
ÆÆ 
]
ÆÆ 
QrBytes
ÆÆ 
=
ÆÆ 
barCodeUtil
ÆÆ (
.
ÆÆ( )
ObtenerCodigoQR
ÆÆ) 8
(
ÆÆ8 9
	QrContent
ÆÆ9 B
)
ÆÆB C
;
ÆÆC D
var
ØØ 
PDFventa
ØØ 
=
ØØ 
ObtenerPdfVenta
ØØ *
(
ØØ* +
orden
ØØ+ 0
,
ØØ0 1
sede
ØØ2 6
,
ØØ6 7
QrBytes
ØØ8 ?
,
ØØ? @
FormatoImpresion
ØØA Q
.
ØØQ R
_80mm
ØØR W
)
ØØW X
;
ØØX Y
PrintFilePDF
∞∞ 
file
∞∞ 
=
∞∞ 
null
∞∞  $
;
∞∞$ %
file
±± 
=
±± 
new
±± 
PrintFilePDF
±± #
(
±±# $
PDFventa
±±$ ,
.
±±, -
Save
±±- 1
(
±±1 2
)
±±2 3
,
±±3 4
idVenta
±±5 <
+
±±= >
$str
±±? E
)
±±E F
;
±±F G
file
≤≤ 
.
≤≤ 
PrintRotation
≤≤ 
=
≤≤  
PrintRotation
≤≤! .
.
≤≤. /
None
≤≤/ 3
;
≤≤3 4
ClientPrintJob
≥≥ 
cpj
≥≥ 
=
≥≥  
new
≥≥! $
ClientPrintJob
≥≥% 3
(
≥≥3 4
)
≥≥4 5
;
≥≥5 6
cpj
¥¥ 
.
¥¥ 
	PrintFile
¥¥ 
=
¥¥ 
file
¥¥  
;
¥¥  !
cpj
µµ 
.
µµ 
	PrintFile
µµ 
.
µµ 
Copies
µµ  
=
µµ! " 
AplicacionSettings
µµ# 5
.
µµ5 6
Default
µµ6 =
.
µµ= >3
%NumeroCopiasAImprimirComprobanteVenta
µµ> c
;
µµc d
cpj
∂∂ 
.
∂∂ 
ClientPrinter
∂∂ 
=
∂∂ 
new
∂∂  #
DefaultPrinter
∂∂$ 2
(
∂∂2 3
)
∂∂3 4
;
∂∂4 5
System
∑∑ 
.
∑∑ 
Web
∑∑ 
.
∑∑ 
HttpContext
∑∑ "
.
∑∑" #
Current
∑∑# *
.
∑∑* +
Response
∑∑+ 3
.
∑∑3 4
ContentType
∑∑4 ?
=
∑∑@ A
$str
∑∑B \
;
∑∑\ ]
System
∏∏ 
.
∏∏ 
Web
∏∏ 
.
∏∏ 
HttpContext
∏∏ "
.
∏∏" #
Current
∏∏# *
.
∏∏* +
Response
∏∏+ 3
.
∏∏3 4
BinaryWrite
∏∏4 ?
(
∏∏? @
cpj
∏∏@ C
.
∏∏C D

GetContent
∏∏D N
(
∏∏N O
)
∏∏O P
)
∏∏P Q
;
∏∏Q R
System
ππ 
.
ππ 
Web
ππ 
.
ππ 
HttpContext
ππ "
.
ππ" #
Current
ππ# *
.
ππ* +
Response
ππ+ 3
.
ππ3 4
End
ππ4 7
(
ππ7 8
)
ππ8 9
;
ππ9 :
}
∫∫ 	
public
¿¿ 
void
¿¿ 
PrintFile__
¿¿ 
(
¿¿  
long
¿¿  $
idVenta
¿¿% ,
)
¿¿, -
{
¡¡ 	
OrdenDeVenta
¬¬ 
orden
¬¬ 
=
¬¬  
operacionLogica
¬¬! 0
.
¬¬0 1!
ObtenerOrdenDeVenta
¬¬1 D
(
¬¬D E
idVenta
¬¬E L
)
¬¬L M
;
¬¬M N

PrintFile_
√√ 
(
√√ 
orden
√√ 
)
√√ 
;
√√ 
}
ƒƒ 	
public
∆∆ 
void
∆∆ 
	PrintFile
∆∆ 
(
∆∆ 
long
∆∆ "
idVenta
∆∆# *
)
∆∆* +
{
«« 	
OrdenDeVenta
»» 
orden
»» 
=
»»  
operacionLogica
»»! 0
.
»»0 1-
ObtenerOrdenDeVentaParaImprimir
»»1 P
(
»»P Q9
+ObtenerOrdenDeVentaParaImprimirEnAplicacion
»»Q |
(
»»| }
idVenta»»} Ñ
)»»Ñ Ö
)»»Ö Ü
;»»Ü á:
,EliminarOrdenDeVentaParaImprimirEnAplicacion
…… 8
(
……8 9
idVenta
……9 @
)
……@ A
;
……A B

PrintFile_
   
(
   
orden
   
)
   
;
   
}
ÀÀ 	
public
ÕÕ 
void
ÕÕ 

PrintFile_
ÕÕ 
(
ÕÕ 
OrdenDeVenta
ÕÕ +
orden
ÕÕ, 1
)
ÕÕ1 2
{
ŒŒ 	6
(EstablecimientoComercialExtendidoConLogo
–– 4
sede
––5 9
=
––: ;
ObtenerSede
––< G
(
––G H
)
––H I
;
––I J
string
—— 
	QrContent
—— 
=
—— *
facturacionElectronicaLogica
—— ;
.
——; <
	ObtenerQR
——< E
(
——E F
orden
——F K
,
——K L
sede
——M Q
)
——Q R
;
——R S
byte
““ 
[
““ 
]
““ 
QrBytes
““ 
=
““ 
barCodeUtil
““ (
.
““( )
ObtenerCodigoQR
““) 8
(
““8 9
	QrContent
““9 B
)
““B C
;
““C D
var
”” 
PDFventa
”” 
=
”” 
ObtenerPdfVenta
”” *
(
””* +
orden
””+ 0
,
””0 1
sede
””2 6
,
””6 7
QrBytes
””8 ?
,
””? @
(
””A B
FormatoImpresion
””B R
)
””R S
VentasSettings
””S a
.
””a b
Default
””b i
.
””i j)
formatoImpresionPorDefecto””j Ñ
)””Ñ Ö
;””Ö Ü
if
÷÷ 
(
÷÷ 
orden
÷÷ 
.
÷÷ !
TieneGuiaDeRemision
÷÷ )
(
÷÷) *
)
÷÷* +
)
÷÷+ ,
{
◊◊ 
var
ÿÿ 
proveedores
ÿÿ 
=
ÿÿ  ! 
actorNegocioLogica
ÿÿ" 4
.
ÿÿ4 5(
ObtenerProveedoresVigentes
ÿÿ5 O
(
ÿÿO P
)
ÿÿP Q
;
ÿÿQ R
var
ŸŸ %
modalidadesDeTransporte
ŸŸ +
=
ŸŸ, -
maestroLogica
ŸŸ. ;
.
ŸŸ; <(
ObtenerModalidadesTraslado
ŸŸ< V
(
ŸŸV W
)
ŸŸW X
;
ŸŸX Y
var
⁄⁄ !
motivosDeTransporte
⁄⁄ '
=
⁄⁄( )
maestroLogica
⁄⁄* 7
.
⁄⁄7 8$
ObtenerMotivosTraslado
⁄⁄8 N
(
⁄⁄N O
)
⁄⁄O P
;
⁄⁄P Q
var
€€  
salidaDeMercaderia
€€ &
=
€€' (
operacionLogica
€€) 8
.
€€8 9.
 ObtenerSalidaDeMercaderiaDeVenta
€€9 Y
(
€€Y Z
orden
€€Z _
.
€€_ `
IdVenta
€€` g
)
€€g h
;
€€h i
foreach
‹‹ 
(
‹‹ 
var
‹‹ 
salida
‹‹ #
in
‹‹$ & 
salidaDeMercaderia
‹‹' 9
)
‹‹9 :
{
›› 
int
ﬁﬁ 
[
ﬁﬁ 
]
ﬁﬁ 

idsUbigeos
ﬁﬁ $
=
ﬁﬁ% &
{
ﬁﬁ' (
Convert
ﬁﬁ) 0
.
ﬁﬁ0 1
ToInt32
ﬁﬁ1 8
(
ﬁﬁ8 9
salida
ﬁﬁ9 ?
.
ﬁﬁ? @&
IdUbigeoOrigenDeTraslado
ﬁﬁ@ X
(
ﬁﬁX Y
)
ﬁﬁY Z
)
ﬁﬁZ [
,
ﬁﬁ[ \
Convert
ﬁﬁ] d
.
ﬁﬁd e
ToInt32
ﬁﬁe l
(
ﬁﬁl m
salida
ﬁﬁm s
.
ﬁﬁs t(
IdUbigeoDestinoDeTrasladoﬁﬁt ç
(ﬁﬁç é
)ﬁﬁé è
)ﬁﬁè ê
}ﬁﬁë í
;ﬁﬁí ì
var
ﬂﬂ 
ubigeos
ﬂﬂ 
=
ﬂﬂ  !
maestroLogica
ﬂﬂ" /
.
ﬂﬂ/ 0
obtenerUbigeo
ﬂﬂ0 =
(
ﬂﬂ= >

idsUbigeos
ﬂﬂ> H
)
ﬂﬂH I
;
ﬂﬂI J
salida
‡‡ 
.
‡‡ 
UbigeoOrigen
‡‡ '
=
‡‡( )
ubigeos
‡‡* 1
.
‡‡1 2
Single
‡‡2 8
(
‡‡8 9
u
‡‡9 :
=>
‡‡; =
u
‡‡> ?
.
‡‡? @
id
‡‡@ B
==
‡‡C E
Convert
‡‡F M
.
‡‡M N
ToInt32
‡‡N U
(
‡‡U V
salida
‡‡V \
.
‡‡\ ]&
IdUbigeoOrigenDeTraslado
‡‡] u
(
‡‡u v
)
‡‡v w
)
‡‡w x
)
‡‡x y
.
‡‡y z 
descripcion_corta‡‡z ã
;‡‡ã å
salida
·· 
.
·· 
UbigeoDestino
·· (
=
··) *
ubigeos
··+ 2
.
··2 3
Single
··3 9
(
··9 :
u
··: ;
=>
··< >
u
··? @
.
··@ A
id
··A C
==
··D F
Convert
··G N
.
··N O
ToInt32
··O V
(
··V W
salida
··W ]
.
··] ^'
IdUbigeoDestinoDeTraslado
··^ w
(
··w x
)
··x y
)
··y z
)
··z {
.
··{ | 
descripcion_corta··| ç
;··ç é
byte
‚‚ 
[
‚‚ 
]
‚‚ 
byteQr
‚‚ !
=
‚‚" #
barCodeUtil
‚‚$ /
.
‚‚/ 0
ObtenerCodigoQR
‚‚0 ?
(
‚‚? @
salida
‚‚@ F
.
‚‚F G
UrlDocumentoSunat
‚‚G X
)
‚‚X Y
;
‚‚Y Z
PDFventa
„„ 
.
„„ 
Append
„„ #
(
„„# $

PdfBuilder
„„$ .
.
„„. /.
 ObtenerPdfMovimientoDeMercaderia
„„/ O
(
„„O P
salida
„„P V
,
„„V W
sede
„„X \
,
„„\ ]
byteQr
„„^ d
,
„„d e
(
„„f g
FormatoImpresion
„„g w
)
„„w x
VentasSettings„„x Ü
.„„Ü á
Default„„á é
.„„é è*
formatoImpresionPorDefecto„„è ©
,„„© ™
proveedores„„´ ∂
,„„∂ ∑'
modalidadesDeTransporte„„∏ œ
,„„œ –#
motivosDeTransporte„„— ‰
,„„‰ Â
this„„Ê Í
)„„Í Î
)„„Î Ï
;„„Ï Ì
}
‰‰ 
}
ÂÂ 
PrintFilePDF
ÊÊ 
file
ÊÊ 
=
ÊÊ 
null
ÊÊ  $
;
ÊÊ$ %
file
ÁÁ 
=
ÁÁ 
new
ÁÁ 
PrintFilePDF
ÁÁ #
(
ÁÁ# $
PDFventa
ÁÁ$ ,
.
ÁÁ, -
Save
ÁÁ- 1
(
ÁÁ1 2
)
ÁÁ2 3
,
ÁÁ3 4
orden
ÁÁ5 :
.
ÁÁ: ;
Id
ÁÁ; =
+
ÁÁ> ?
$str
ÁÁ@ F
)
ÁÁF G
;
ÁÁG H
file
ËË 
.
ËË 
PrintRotation
ËË 
=
ËË  
PrintRotation
ËË! .
.
ËË. /
None
ËË/ 3
;
ËË3 4
ClientPrintJob
ÍÍ 
cpj
ÍÍ 
=
ÍÍ  
new
ÍÍ! $
ClientPrintJob
ÍÍ% 3
(
ÍÍ3 4
)
ÍÍ4 5
;
ÍÍ5 6
cpj
ÎÎ 
.
ÎÎ 
	PrintFile
ÎÎ 
=
ÎÎ 
file
ÎÎ  
;
ÎÎ  !
cpj
ÏÏ 
.
ÏÏ 
	PrintFile
ÏÏ 
.
ÏÏ 
Copies
ÏÏ  
=
ÏÏ! " 
AplicacionSettings
ÏÏ# 5
.
ÏÏ5 6
Default
ÏÏ6 =
.
ÏÏ= >3
%NumeroCopiasAImprimirComprobanteVenta
ÏÏ> c
;
ÏÏc d
cpj
ÌÌ 
.
ÌÌ 
ClientPrinter
ÌÌ 
=
ÌÌ 
new
ÌÌ  #
DefaultPrinter
ÌÌ$ 2
(
ÌÌ2 3
)
ÌÌ3 4
;
ÌÌ4 5
System
ÔÔ 
.
ÔÔ 
Web
ÔÔ 
.
ÔÔ 
HttpContext
ÔÔ "
.
ÔÔ" #
Current
ÔÔ# *
.
ÔÔ* +
Response
ÔÔ+ 3
.
ÔÔ3 4
ContentType
ÔÔ4 ?
=
ÔÔ@ A
$str
ÔÔB \
;
ÔÔ\ ]
System
 
.
 
Web
 
.
 
HttpContext
 "
.
" #
Current
# *
.
* +
Response
+ 3
.
3 4
BinaryWrite
4 ?
(
? @
cpj
@ C
.
C D

GetContent
D N
(
N O
)
O P
)
P Q
;
Q R
System
ÒÒ 
.
ÒÒ 
Web
ÒÒ 
.
ÒÒ 
HttpContext
ÒÒ "
.
ÒÒ" #
Current
ÒÒ# *
.
ÒÒ* +
Response
ÒÒ+ 3
.
ÒÒ3 4
End
ÒÒ4 7
(
ÒÒ7 8
)
ÒÒ8 9
;
ÒÒ9 :
}
ÛÛ 	
public
ıı 
void
ıı /
!ImprimirComprobantesVentasMasivas
ıı 5
(
ıı5 6
DateTime
ıı6 >
fecha
ıı? D
)
ııD E
{
ˆˆ 	
List
¯¯ 
<
¯¯ 
OrdenDeVenta
¯¯ 
>
¯¯ 
ordenes
¯¯ &
=
¯¯' (
operacionLogica
¯¯) 8
.
¯¯8 9*
ObtenerVentasMasivasPorFecha
¯¯9 U
(
¯¯U V
fecha
¯¯V [
)
¯¯[ \
;
¯¯\ ]6
(EstablecimientoComercialExtendidoConLogo
˘˘ 4
sede
˘˘5 9
=
˘˘: ;
ObtenerSede
˘˘< G
(
˘˘G H
)
˘˘H I
;
˘˘I J
	SelectPdf
˙˙ 
.
˙˙ 
PdfDocument
˙˙ !

pdfGeneral
˙˙" ,
=
˙˙- .
new
˙˙/ 2
	SelectPdf
˙˙3 <
.
˙˙< =
PdfDocument
˙˙= H
(
˙˙H I
)
˙˙I J
;
˙˙J K
foreach
˚˚ 
(
˚˚ 
var
˚˚ 
orden
˚˚ 
in
˚˚ !
ordenes
˚˚" )
)
˚˚) *
{
¸¸ 
string
˝˝ 
	QrContent
˝˝  
=
˝˝! "*
facturacionElectronicaLogica
˝˝# ?
.
˝˝? @
	ObtenerQR
˝˝@ I
(
˝˝I J
orden
˝˝J O
,
˝˝O P
sede
˝˝Q U
)
˝˝U V
;
˝˝V W
byte
˛˛ 
[
˛˛ 
]
˛˛ 
QrBytes
˛˛ 
=
˛˛  
barCodeUtil
˛˛! ,
.
˛˛, -
ObtenerCodigoQR
˛˛- <
(
˛˛< =
	QrContent
˛˛= F
)
˛˛F G
;
˛˛G H
var
ˇˇ 
PDFventa
ˇˇ 
=
ˇˇ 
ObtenerPdfVenta
ˇˇ .
(
ˇˇ. /
orden
ˇˇ/ 4
,
ˇˇ4 5
sede
ˇˇ6 :
,
ˇˇ: ;
QrBytes
ˇˇ< C
,
ˇˇC D
FormatoImpresion
ˇˇE U
.
ˇˇU V
_80mm
ˇˇV [
)
ˇˇ[ \
;
ˇˇ\ ]

pdfGeneral
Ä	Ä	 
.
Ä	Ä	 
Append
Ä	Ä	 !
(
Ä	Ä	! "
PDFventa
Ä	Ä	" *
)
Ä	Ä	* +
;
Ä	Ä	+ ,
}
Å	Å	 
PrintFilePDF
É	É	 
file
É	É	 
=
É	É	 
null
É	É	  $
;
É	É	$ %
file
Ñ	Ñ	 
=
Ñ	Ñ	 
new
Ñ	Ñ	 
PrintFilePDF
Ñ	Ñ	 #
(
Ñ	Ñ	# $

pdfGeneral
Ñ	Ñ	$ .
.
Ñ	Ñ	. /
Save
Ñ	Ñ	/ 3
(
Ñ	Ñ	3 4
)
Ñ	Ñ	4 5
,
Ñ	Ñ	5 6
$str
Ñ	Ñ	7 =
)
Ñ	Ñ	= >
;
Ñ	Ñ	> ?
file
Ö	Ö	 
.
Ö	Ö	 
PrintRotation
Ö	Ö	 
=
Ö	Ö	  
PrintRotation
Ö	Ö	! .
.
Ö	Ö	. /
None
Ö	Ö	/ 3
;
Ö	Ö	3 4
ClientPrintJob
Ü	Ü	 
cpj
Ü	Ü	 
=
Ü	Ü	  
new
Ü	Ü	! $
ClientPrintJob
Ü	Ü	% 3
(
Ü	Ü	3 4
)
Ü	Ü	4 5
;
Ü	Ü	5 6
cpj
á	á	 
.
á	á	 
	PrintFile
á	á	 
=
á	á	 
file
á	á	  
;
á	á	  !
cpj
à	à	 
.
à	à	 
ClientPrinter
à	à	 
=
à	à	 
new
à	à	  #
DefaultPrinter
à	à	$ 2
(
à	à	2 3
)
à	à	3 4
;
à	à	4 5
System
â	â	 
.
â	â	 
Web
â	â	 
.
â	â	 
HttpContext
â	â	 "
.
â	â	" #
Current
â	â	# *
.
â	â	* +
Response
â	â	+ 3
.
â	â	3 4
ContentType
â	â	4 ?
=
â	â	@ A
$str
â	â	B \
;
â	â	\ ]
System
ä	ä	 
.
ä	ä	 
Web
ä	ä	 
.
ä	ä	 
HttpContext
ä	ä	 "
.
ä	ä	" #
Current
ä	ä	# *
.
ä	ä	* +
Response
ä	ä	+ 3
.
ä	ä	3 4
BinaryWrite
ä	ä	4 ?
(
ä	ä	? @
cpj
ä	ä	@ C
.
ä	ä	C D

GetContent
ä	ä	D N
(
ä	ä	N O
)
ä	ä	O P
)
ä	ä	P Q
;
ä	ä	Q R
System
ã	ã	 
.
ã	ã	 
Web
ã	ã	 
.
ã	ã	 
HttpContext
ã	ã	 "
.
ã	ã	" #
Current
ã	ã	# *
.
ã	ã	* +
Response
ã	ã	+ 3
.
ã	ã	3 4
End
ã	ã	4 7
(
ã	ã	7 8
)
ã	ã	8 9
;
ã	ã	9 :
}
å	å	 	
public
é	é	 
System
é	é	 
.
é	é	 
Drawing
é	é	 
.
é	é	 
Image
é	é	 #
ObtenerImageVenta
é	é	$ 5
(
é	é	5 6
OrdenDeVenta
é	é	6 B
ordenDeVenta
é	é	C O
,
é	é	O P6
(EstablecimientoComercialExtendidoConLogo
é	é	Q y
sede
é	é	z ~
,
é	é	~ 
byteé	é	Ä Ñ
[é	é	Ñ Ö
]é	é	Ö Ü
qrBytesé	é	á é
,é	é	é è 
FormatoImpresioné	é	ê †
formatoé	é	° ®
)é	é	® ©
{
è	è	 	
string
ë	ë	 
result
ë	ë	 
=
ë	ë	 #
CoreHtmlStringBuilder
ë	ë	 1
.
ë	ë	1 2
ObtenerHtmlString
ë	ë	2 C
(
ë	ë	C D
ordenDeVenta
ë	ë	D P
,
ë	ë	P Q
formato
ë	ë	R Y
,
ë	ë	Y Z
qrBytes
ë	ë	[ b
,
ë	ë	b c
sede
ë	ë	d h
,
ë	ë	h i
this
ë	ë	j n
,
ë	ë	n o
maestroLogica
ë	ë	p }
)
ë	ë	} ~
;
ë	ë	~ 
HtmlToImage
ì	ì	 
imgConverter
ì	ì	 $
=
ì	ì	% &
new
ì	ì	' *
HtmlToImage
ì	ì	+ 6
(
ì	ì	6 7
)
ì	ì	7 8
;
ì	ì	8 9
imgConverter
î	î	 
.
î	î	 
WebPageFixedSize
î	î	 )
=
î	î	* +
false
î	î	, 1
;
î	î	1 2
if
ñ	ñ	 
(
ñ	ñ	 
formato
ñ	ñ	 
==
ñ	ñ	 
FormatoImpresion
ñ	ñ	 +
.
ñ	ñ	+ ,
_80mm
ñ	ñ	, 1
)
ñ	ñ	1 2
{
ó	ó	 
imgConverter
ò	ò	 
.
ò	ò	 
WebPageFixedSize
ò	ò	 -
=
ò	ò	. /
false
ò	ò	0 5
;
ò	ò	5 6
imgConverter
ô	ô	 
.
ô	ô	 
WebPageWidth
ô	ô	 )
=
ô	ô	* +
$num
ô	ô	, /
;
ô	ô	/ 0
}
ú	ú	 
else
ù	ù	 
if
ù	ù	 
(
ù	ù	 
formato
ù	ù	 
==
ù	ù	 
FormatoImpresion
ù	ù	  0
.
ù	ù	0 1
A4
ù	ù	1 3
)
ù	ù	3 4
{
û	û	 
imgConverter
ü	ü	 
.
ü	ü	 
WebPageWidth
ü	ü	 )
=
ü	ü	* +
$num
ü	ü	, 0
;
ü	ü	0 1
}
£	£	 
else
§	§	 
if
§	§	 
(
§	§	 
formato
§	§	 
==
§	§	 
FormatoImpresion
§	§	  0
.
§	§	0 1
_56mm
§	§	1 6
)
§	§	6 7
{
•	•	 
imgConverter
¶	¶	 
.
¶	¶	 
WebPageFixedSize
¶	¶	 -
=
¶	¶	. /
true
¶	¶	0 4
;
¶	¶	4 5
imgConverter
ß	ß	 
.
ß	ß	 
WebPageWidth
ß	ß	 )
=
ß	ß	* +
$num
ß	ß	, /
;
ß	ß	/ 0
}
™	™	 
System
¨	¨	 
.
¨	¨	 
Drawing
¨	¨	 
.
¨	¨	 
Image
¨	¨	  
image
¨	¨	! &
=
¨	¨	' (
imgConverter
¨	¨	) 5
.
¨	¨	5 6
ConvertHtmlString
¨	¨	6 G
(
¨	¨	G H
result
¨	¨	H N
)
¨	¨	N O
;
¨	¨	O P
return
Ø	Ø	 
image
Ø	Ø	 
;
Ø	Ø	 
}
∞	∞	 	
public
≤	≤	 
string
≤	≤	 
CabeceraVoucher
≤	≤	 %
(
≤	≤	% &
string
≤	≤	& ,
idDocumento
≤	≤	- 8
)
≤	≤	8 9
{
≥	≥	 	
string
µ	µ	 
cabecera
µ	µ	 
=
µ	µ	 
$str
µ	µ	  
;
µ	µ	  !
cabecera
∑	∑	 
+=
∑	∑	 
$str
∑	∑	 
+
∑	∑	 
idDocumento
∑	∑	  +
;
∑	∑	+ ,
return
ª	ª	 
cabecera
ª	ª	 
;
ª	ª	 
}
º	º	 	
public
√	√	 
ActionResult
√	√	 -
ObtenerComprobanteOrdenVentaPDF
√	√	 ;
(
√	√	; <
long
√	√	< @
idOrdenVenta
√	√	A M
)
√	√	M N
{
ƒ	ƒ	 	
OrdenDeVenta
≈	≈	 
orden
≈	≈	 
=
≈	≈	  
operacionLogica
≈	≈	! 0
.
≈	≈	0 1!
ObtenerOrdenDeVenta
≈	≈	1 D
(
≈	≈	D E
idOrdenVenta
≈	≈	E Q
)
≈	≈	Q R
;
≈	≈	R S6
(EstablecimientoComercialExtendidoConLogo
∆	∆	 4
sede
∆	∆	5 9
=
∆	∆	: ;
ObtenerSede
∆	∆	< G
(
∆	∆	G H
)
∆	∆	H I
;
∆	∆	I J
string
»	»	 
	QrContent
»	»	 
=
»	»	 *
facturacionElectronicaLogica
»	»	 ;
.
»	»	; <
	ObtenerQR
»	»	< E
(
»	»	E F
orden
»	»	F K
,
»	»	K L
sede
»	»	M Q
)
»	»	Q R
;
»	»	R S
byte
…	…	 
[
…	…	 
]
…	…	 
QrBytes
…	…	 
=
…	…	 
barCodeUtil
…	…	 (
.
…	…	( )
ObtenerCodigoQR
…	…	) 8
(
…	…	8 9
	QrContent
…	…	9 B
)
…	…	B C
;
…	…	C D
var
 	 	 
pdf
 	 	 
=
 	 	 
ObtenerPdfVenta
 	 	 %
(
 	 	% &
orden
 	 	& +
,
 	 	+ ,
sede
 	 	- 1
,
 	 	1 2
QrBytes
 	 	3 :
,
 	 	: ;
FormatoImpresion
 	 	< L
.
 	 	L M
_80mm
 	 	M R
)
 	 	R S
;
 	 	S T
pdf
À	À	 
.
À	À	 
ViewerPreferences
À	À	 !
.
À	À	! "
	FitWindow
À	À	" +
=
À	À	, -
false
À	À	. 3
;
À	À	3 4
return
Õ	Õ	 
base
Õ	Õ	 
.
Õ	Õ	 
File
Õ	Õ	 
(
Õ	Õ	 
pdf
Õ	Õ	  
.
Õ	Õ	  !
Save
Õ	Õ	! %
(
Õ	Õ	% &
)
Õ	Õ	& '
,
Õ	Õ	' (
$str
Õ	Õ	) :
)
Õ	Õ	: ;
;
Õ	Õ	; <
}
œ	œ	 	
public
—	—	 
ActionResult
—	—	 )
ObtenerComprobanteVentaHtml
—	—	 7
(
—	—	7 8
long
—	—	8 <
idVenta
—	—	= D
,
—	—	D E
FormatoImpresion
—	—	F V
formato
—	—	W ^
)
—	—	^ _
{
“	“	 	
OrdenDeVenta
”	”	 
orden
”	”	 
=
”	”	  
operacionLogica
”	”	! 0
.
”	”	0 1!
ObtenerOrdenDeVenta
”	”	1 D
(
”	”	D E
operacionLogica
”	”	E T
.
”	”	T U#
obtenerIdOrdenDeVenta
”	”	U j
(
”	”	j k
idVenta
”	”	k r
)
”	”	r s
)
”	”	s t
;
”	”	t u
var
’	’	 
sede
’	’	 
=
’	’	 
ObtenerSede
’	’	 "
(
’	’	" #
)
’	’	# $
;
’	’	$ %
string
◊	◊	 
	QrContent
◊	◊	 
=
◊	◊	 *
facturacionElectronicaLogica
◊	◊	 ;
.
◊	◊	; <
	ObtenerQR
◊	◊	< E
(
◊	◊	E F
orden
◊	◊	F K
,
◊	◊	K L
sede
◊	◊	M Q
)
◊	◊	Q R
;
◊	◊	R S
byte
ÿ	ÿ	 
[
ÿ	ÿ	 
]
ÿ	ÿ	 
QrBytes
ÿ	ÿ	 
=
ÿ	ÿ	 
barCodeUtil
ÿ	ÿ	 (
.
ÿ	ÿ	( )
ObtenerCodigoQR
ÿ	ÿ	) 8
(
ÿ	ÿ	8 9
	QrContent
ÿ	ÿ	9 B
)
ÿ	ÿ	B C
;
ÿ	ÿ	C D
return
⁄	⁄	 
null
⁄	⁄	 
;
⁄	⁄	 
}
‹	‹	 	
public
ﬁ	ﬁ	 
ActionResult
ﬁ	ﬁ	 (
ObtenerComprobanteVentaPDF
ﬁ	ﬁ	 6
(
ﬁ	ﬁ	6 7
long
ﬁ	ﬁ	7 ;
idVenta
ﬁ	ﬁ	< C
)
ﬁ	ﬁ	C D
{
ﬂ	ﬂ	 	
OrdenDeVenta
‡	‡	 
orden
‡	‡	 
=
‡	‡	  
operacionLogica
‡	‡	! 0
.
‡	‡	0 1!
ObtenerOrdenDeVenta
‡	‡	1 D
(
‡	‡	D E
operacionLogica
‡	‡	E T
.
‡	‡	T U#
obtenerIdOrdenDeVenta
‡	‡	U j
(
‡	‡	j k
idVenta
‡	‡	k r
)
‡	‡	r s
)
‡	‡	s t
;
‡	‡	t u6
(EstablecimientoComercialExtendidoConLogo
·	·	 4
sede
·	·	5 9
=
·	·	: ;
ObtenerSede
·	·	< G
(
·	·	G H
)
·	·	H I
;
·	·	I J
string
‚	‚	 
	QrContent
‚	‚	 
=
‚	‚	 *
facturacionElectronicaLogica
‚	‚	 ;
.
‚	‚	; <
	ObtenerQR
‚	‚	< E
(
‚	‚	E F
orden
‚	‚	F K
,
‚	‚	K L
sede
‚	‚	M Q
)
‚	‚	Q R
;
‚	‚	R S
byte
„	„	 
[
„	„	 
]
„	„	 
QrBytes
„	„	 
=
„	„	 
barCodeUtil
„	„	 (
.
„	„	( )
ObtenerCodigoQR
„	„	) 8
(
„	„	8 9
	QrContent
„	„	9 B
)
„	„	B C
;
„	„	C D
var
‰	‰	 
PDFventa
‰	‰	 
=
‰	‰	 
ObtenerPdfVenta
‰	‰	 *
(
‰	‰	* +
orden
‰	‰	+ 0
,
‰	‰	0 1
sede
‰	‰	2 6
,
‰	‰	6 7
QrBytes
‰	‰	8 ?
,
‰	‰	? @
FormatoImpresion
‰	‰	A Q
.
‰	‰	Q R
_80mm
‰	‰	R W
)
‰	‰	W X
;
‰	‰	X Y
PDFventa
Ê	Ê	 
.
Ê	Ê	 
ViewerPreferences
Ê	Ê	 &
.
Ê	Ê	& '
	FitWindow
Ê	Ê	' 0
=
Ê	Ê	1 2
false
Ê	Ê	3 8
;
Ê	Ê	8 9
return
Ë	Ë	 
base
Ë	Ë	 
.
Ë	Ë	 
File
Ë	Ë	 
(
Ë	Ë	 
PDFventa
Ë	Ë	 %
.
Ë	Ë	% &
Save
Ë	Ë	& *
(
Ë	Ë	* +
)
Ë	Ë	+ ,
,
Ë	Ë	, -
$str
Ë	Ë	. ?
)
Ë	Ë	? @
;
Ë	Ë	@ A
}
È	È	 	
public
Ô	Ô	 

JsonResult
Ô	Ô	 
InvalidarVenta
Ô	Ô	 (
(
Ô	Ô	( )
InvalidarVenta
Ô	Ô	) 7
invalidarVenta
Ô	Ô	8 F
)
Ô	Ô	F G
{
		 	
try
Ò	Ò	 
{
Ú	Ú	 
OperationResult
Û	Û	 
result
Û	Û	  &
=
Û	Û	' (
operacionLogica
Û	Û	) 8
.
Û	Û	8 9
InvalidarVenta
Û	Û	9 G
(
Û	Û	G H
invalidarVenta
Û	Û	H V
,
Û	Û	V W
ProfileData
Û	Û	X c
(
Û	Û	c d
)
Û	Û	d e
)
Û	Û	e f
;
Û	Û	f g
Util
Ù	Ù	 
.
Ù	Ù	 
VerificarError
Ù	Ù	 #
(
Ù	Ù	# $
result
Ù	Ù	$ *
)
Ù	Ù	* +
;
Ù	Ù	+ ,
return
ı	ı	 
Json
ı	ı	 
(
ı	ı	 
new
ı	ı	 
{
ı	ı	  !
result
ı	ı	" (
.
ı	ı	( )
code_result
ı	ı	) 4
,
ı	ı	4 5
result
ı	ı	6 <
.
ı	ı	< =
data
ı	ı	= A
,
ı	ı	A B 
result_description
ı	ı	C U
=
ı	ı	V W
result
ı	ı	X ^
.
ı	ı	^ _
title
ı	ı	_ d
}
ı	ı	e f
)
ı	ı	f g
;
ı	ı	g h
}
ˆ	ˆ	 
catch
˜	˜	 
(
˜	˜	 
LogicaException
˜	˜	 "
oe
˜	˜	# %
)
˜	˜	% &
{
¯	¯	 
return
˘	˘	 
new
˘	˘	 "
JsonHttpStatusResult
˘	˘	 /
(
˘	˘	/ 0
Util
˘	˘	0 4
.
˘	˘	4 5
	ErrorJson
˘	˘	5 >
(
˘	˘	> ?
oe
˘	˘	? A
)
˘	˘	A B
,
˘	˘	B C
HttpStatusCode
˘	˘	D R
.
˘	˘	R S!
InternalServerError
˘	˘	S f
)
˘	˘	f g
;
˘	˘	g h
}
˙	˙	 
catch
˚	˚	 
(
˚	˚	 
	Exception
˚	˚	 
e
˚	˚	 
)
˚	˚	 
{
¸	¸	 
return
˝	˝	 
new
˝	˝	 "
JsonHttpStatusResult
˝	˝	 /
(
˝	˝	/ 0
Util
˝	˝	0 4
.
˝	˝	4 5
	ErrorJson
˝	˝	5 >
(
˝	˝	> ?
e
˝	˝	? @
)
˝	˝	@ A
,
˝	˝	A B
HttpStatusCode
˝	˝	C Q
.
˝	˝	Q R!
InternalServerError
˝	˝	R e
)
˝	˝	e f
;
˝	˝	f g
}
˛	˛	 
}
ˇ	ˇ	 	
public
Å
Å
 

JsonResult
Å
Å
 
AnularVenta
Å
Å
 %
(
Å
Å
% &-
RegistroAnulacionVentaViewModel
Å
Å
& E
	anulacion
Å
Å
F O
)
Å
Å
O P
{
Ç
Ç
 	
try
É
É
 
{
Ñ
Ñ
 
if
Ö
Ö
 
(
Ö
Ö
 
	anulacion
Ö
Ö
 
.
Ö
Ö
 
TipoDeComprobante
Ö
Ö
 /
.
Ö
Ö
/ 0
Series
Ö
Ö
0 6
==
Ö
Ö
7 9
null
Ö
Ö
: >
||
Ö
Ö
? A
	anulacion
Ö
Ö
B K
.
Ö
Ö
K L
TipoDeComprobante
Ö
Ö
L ]
.
Ö
Ö
] ^
Series
Ö
Ö
^ d
.
Ö
Ö
d e
Count
Ö
Ö
e j
<
Ö
Ö
k l
$num
Ö
Ö
m n
)
Ö
Ö
n o
{
Ü
Ü
 
throw
á
á
 
new
á
á
 
LogicaException
á
á
 -
(
á
á
- .
$strá
á
. Ñ
)á
á
Ñ Ö
;á
á
Ö Ü
}
à
à
 
OperationResult
ä
ä
 
result
ä
ä
  &
=
ä
ä
' (
operacionLogica
ä
ä
) 8
.
ä
ä
8 9
AnularVenta
ä
ä
9 D
(
ä
ä
D E
	anulacion
ä
ä
E N
.
ä
ä
N O
Id
ä
ä
O Q
,
ä
ä
Q R
ProfileData
ä
ä
S ^
(
ä
ä
^ _
)
ä
ä
_ `
.
ä
ä
` a
Empleado
ä
ä
a i
.
ä
ä
i j
Id
ä
ä
j l
,
ä
ä
l m
ProfileData
ã
ã
 #
(
ã
ã
# $
)
ã
ã
$ %
.
ã
ã
% &,
IdCentroDeAtencionSeleccionado
ã
ã
& D
,
ã
ã
D E
	anulacion
ã
ã
F O
.
ã
ã
O P
TipoDeComprobante
ã
ã
P a
.
ã
ã
a b
SerieSeleccionada
ã
ã
b s
==
ã
ã
t v
$num
ã
ã
w x
?
ã
ã
y z
	anulacionã
ã
{ Ñ
.ã
ã
Ñ Ö!
TipoDeComprobanteã
ã
Ö ñ
.ã
ã
ñ ó
Seriesã
ã
ó ù
.ã
ã
ù û
Firstã
ã
û £
(ã
ã
£ §
)ã
ã
§ •
.ã
ã
• ¶
Idã
ã
¶ ®
:ã
ã
© ™
	anulacionã
ã
´ ¥
.ã
ã
¥ µ!
TipoDeComprobanteã
ã
µ ∆
.ã
ã
∆ «!
SerieSeleccionadaã
ã
« ÿ
,ã
ã
ÿ Ÿ
	anulacion
å
å
 !
.
å
å
! "
Observacion
å
å
" -
)
å
å
- .
;
å
å
. /
Util
ç
ç
 
.
ç
ç
 (
ManageIfResultIsNotSuccess
ç
ç
 /
(
ç
ç
/ 0
result
ç
ç
0 6
,
ç
ç
6 7
$str
ç
ç
8 X
)
ç
ç
X Y
;
ç
ç
Y Z
return
é
é
 
Json
é
é
 
(
é
é
 
new
é
é
 
{
é
é
  !
code_result
é
é
" -
=
é
é
. /
result
é
é
0 6
.
é
é
6 7
code_result
é
é
7 B
,
é
é
B C
data
é
é
D H
=
é
é
I J
result
é
é
K Q
.
é
é
Q R
data
é
é
R V
,
é
é
V W 
result_description
é
é
X j
=
é
é
k l
result
é
é
m s
.
é
é
s t
title
é
é
t y
}
é
é
z {
)
é
é
{ |
;
é
é
| }
}
è
è
 
catch
ê
ê
 
(
ê
ê
 
LogicaException
ê
ê
 "
oe
ê
ê
# %
)
ê
ê
% &
{
ë
ë
 
return
í
í
 
new
í
í
 "
JsonHttpStatusResult
í
í
 /
(
í
í
/ 0
Util
í
í
0 4
.
í
í
4 5
	ErrorJson
í
í
5 >
(
í
í
> ?
oe
í
í
? A
)
í
í
A B
,
í
í
B C
HttpStatusCode
í
í
D R
.
í
í
R S!
InternalServerError
í
í
S f
)
í
í
f g
;
í
í
g h
}
ì
ì
 
catch
î
î
 
(
î
î
 
	Exception
î
î
 
e
î
î
 
)
î
î
 
{
ï
ï
 
return
ñ
ñ
 
new
ñ
ñ
 "
JsonHttpStatusResult
ñ
ñ
 /
(
ñ
ñ
/ 0
Util
ñ
ñ
0 4
.
ñ
ñ
4 5
	ErrorJson
ñ
ñ
5 >
(
ñ
ñ
> ?
e
ñ
ñ
? @
)
ñ
ñ
@ A
,
ñ
ñ
A B
HttpStatusCode
ñ
ñ
C Q
.
ñ
ñ
Q R!
InternalServerError
ñ
ñ
R e
)
ñ
ñ
e f
;
ñ
ñ
f g
}
ó
ó
 
}
ò
ò
 	
public
ö
ö
 

JsonResult
ö
ö
 '
InvalidarAnulacionDeVenta
ö
ö
 3
(
ö
ö
3 4
long
ö
ö
4 8
idOrden
ö
ö
9 @
,
ö
ö
@ A
string
ö
ö
B H
observacion
ö
ö
I T
)
ö
ö
T U
{
õ
õ
 	
try
ú
ú
 
{
ù
ù
 
OperationResult
û
û
 
result
û
û
  &
=
û
û
' (
operacionLogica
û
û
) 8
.
û
û
8 9'
InvalidarAnulacionDeVenta
û
û
9 R
(
û
û
R S
idOrden
û
û
S Z
,
û
û
Z [
ProfileData
û
û
\ g
(
û
û
g h
)
û
û
h i
.
û
û
i j
Empleado
û
û
j r
.
û
û
r s
Id
û
û
s u
,
û
û
u v
ProfileDataû
û
w Ç
(û
û
Ç É
)û
û
É Ñ
.û
û
Ñ Ö.
IdCentroDeAtencionSeleccionadoû
û
Ö £
,û
û
£ §
observacionû
û
• ∞
)û
û
∞ ±
;û
û
± ≤
Util
†
†
 
.
†
†
 
VerificarError
†
†
 #
(
†
†
# $
result
†
†
$ *
)
†
†
* +
;
†
†
+ ,
return
°
°
 
Json
°
°
 
(
°
°
 
new
°
°
 
{
°
°
  !
code_result
°
°
" -
=
°
°
. /
result
°
°
0 6
.
°
°
6 7
code_result
°
°
7 B
,
°
°
B C
data
°
°
D H
=
°
°
I J
result
°
°
K Q
.
°
°
Q R
data
°
°
R V
,
°
°
V W 
result_description
°
°
X j
=
°
°
k l
result
°
°
m s
.
°
°
s t
title
°
°
t y
}
°
°
z {
)
°
°
{ |
;
°
°
| }
}
¢
¢
 
catch
£
£
 
(
£
£
 
LogicaException
£
£
 "
oe
£
£
# %
)
£
£
% &
{
§
§
 
return
•
•
 
new
•
•
 "
JsonHttpStatusResult
•
•
 /
(
•
•
/ 0
Util
•
•
0 4
.
•
•
4 5
	ErrorJson
•
•
5 >
(
•
•
> ?
oe
•
•
? A
)
•
•
A B
,
•
•
B C
HttpStatusCode
•
•
D R
.
•
•
R S!
InternalServerError
•
•
S f
)
•
•
f g
;
•
•
g h
}
¶
¶
 
catch
ß
ß
 
(
ß
ß
 
	Exception
ß
ß
 
e
ß
ß
 
)
ß
ß
 
{
®
®
 
return
©
©
 
new
©
©
 "
JsonHttpStatusResult
©
©
 /
(
©
©
/ 0
Util
©
©
0 4
.
©
©
4 5
	ErrorJson
©
©
5 >
(
©
©
> ?
e
©
©
? @
)
©
©
@ A
,
©
©
A B
HttpStatusCode
©
©
C Q
.
©
©
Q R!
InternalServerError
©
©
R e
)
©
©
e f
;
©
©
f g
}
™
™
 
}
´
´
 	
public
≠
≠
 
async
≠
≠
 
Task
≠
≠
 
<
≠
≠
 

JsonResult
≠
≠
 $
>
≠
≠
$ %9
+ObtenerTiposDeComprobanteParaAnulacionVenta
≠
≠
& Q
(
≠
≠
Q R
string
≠
≠
R X#
serieComprobanteVenta
≠
≠
Y n
)
≠
≠
n o
{
Æ
Æ
 	
try
Ø
Ø
 
{
∞
∞
 
var
±
±
 

resultados
±
±
 
=
±
±
  
await
±
±
! &!
configuracionLogica
±
±
' :
.
±
±
: ;9
+ObtenerTiposDeComprobanteParaAnulacionVenta
±
±
; f
(
±
±
f g
ProfileData
±
±
g r
(
±
±
r s
)
±
±
s t
.
±
±
t u
Empleado
±
±
u }
.
±
±
} ~
Id±
±
~ Ä
,±
±
Ä Å
ProfileData±
±
Ç ç
(±
±
ç é
)±
±
é è
.±
±
è ê.
IdCentroDeAtencionSeleccionado±
±
ê Æ
)±
±
Æ Ø
;±
±
Ø ∞
List
≤
≤
 
<
≤
≤
 '
SelectorTipoDeComprobante
≤
≤
 .
>
≤
≤
. /
comprobantes
≤
≤
0 <
=
≤
≤
= >'
SelectorTipoDeComprobante
≤
≤
? X
.
≤
≤
X Y
Convert
≤
≤
Y `
(
≤
≤
` a

resultados
≤
≤
a k
,
≤
≤
k l
ProfileData
≤
≤
m x
(
≤
≤
x y
)
≤
≤
y z
.
≤
≤
z {-
IdCentroDeAtencionSeleccionado≤
≤
{ ô
,≤
≤
ô ö%
serieComprobanteVenta≤
≤
õ ∞
.≤
≤
∞ ±
	Substring≤
≤
± ∫
(≤
≤
∫ ª
$num≤
≤
ª º
,≤
≤
º Ω
$num≤
≤
æ ø
)≤
≤
ø ¿
)≤
≤
¿ ¡
;≤
≤
¡ ¬
return
¥
¥
 
Json
¥
¥
 
(
¥
¥
 
comprobantes
¥
¥
 (
)
¥
¥
( )
;
¥
¥
) *
}
µ
µ
 
catch
∂
∂
 
(
∂
∂
 
	Exception
∂
∂
 
e
∂
∂
 
)
∂
∂
 
{
∑
∑
 
return
∏
∏
 
new
∏
∏
 "
JsonHttpStatusResult
∏
∏
 /
(
∏
∏
/ 0
Util
∏
∏
0 4
.
∏
∏
4 5
	ErrorJson
∏
∏
5 >
(
∏
∏
> ?
e
∏
∏
? @
)
∏
∏
@ A
,
∏
∏
A B
HttpStatusCode
∏
∏
C Q
.
∏
∏
Q R!
InternalServerError
∏
∏
R e
)
∏
∏
e f
;
∏
∏
f g
}
π
π
 
}
∫
∫
 	
public
º
º
 

JsonResult
º
º
 <
.ObtenerOrdenVentaYDetallesParaAnulacionDeVenta
º
º
 H
(
º
º
H I
long
º
º
I M
idOrdenVenta
º
º
N Z
)
º
º
Z [
{
Ω
Ω
 	
try
æ
æ
 
{
ø
ø
 
OrdenDeVenta
¿
¿
 
	resultado
¿
¿
 &
=
¿
¿
' (
operacionLogica
¿
¿
) 8
.
¿
¿
8 9+
ObtenerOrdenDeVentaConIdOrden
¿
¿
9 V
(
¿
¿
V W
idOrdenVenta
¿
¿
W c
)
¿
¿
c d
;
¿
¿
d e
return
¡
¡
 
Json
¡
¡
 
(
¡
¡
 
new
¡
¡
 -
RegistroAnulacionVentaViewModel
¡
¡
  ?
(
¡
¡
? @
	resultado
¡
¡
@ I
)
¡
¡
I J
)
¡
¡
J K
;
¡
¡
K L
}
¬
¬
 
catch
√
√
 
(
√
√
 
	Exception
√
√
 
e
√
√
 
)
√
√
 
{
ƒ
ƒ
 
return
≈
≈
 
Json
≈
≈
 
(
≈
≈
 
Util
≈
≈
  
.
≈
≈
  !
	ErrorJson
≈
≈
! *
(
≈
≈
* +
e
≈
≈
+ ,
)
≈
≈
, -
)
≈
≈
- .
;
≈
≈
. /
}
∆
∆
 
}
«
«
 	
[
Ã
Ã
 	
	Authorize
Ã
Ã
	 
(
Ã
Ã
 
Roles
Ã
Ã
 
=
Ã
Ã
 
$str
Ã
Ã
 %
)
Ã
Ã
% &
]
Ã
Ã
& '
public
Õ
Õ
 
ActionResult
Õ
Õ
 
ReportesVendedor
Õ
Õ
 ,
(
Õ
Õ
, -
)
Õ
Õ
- .
{
Œ
Œ
 	
List
–
–
 
<
–
–
 
DateTime
–
–
 
>
–
–
 
fechas
–
–
 !
=
–
–
" #
operacionLogica
–
–
$ 3
.
–
–
3 4?
1ObtenerFechaIncioyFinParaReporteVentaPuntoDeVenta
–
–
4 e
(
–
–
e f
)
–
–
f g
;
–
–
g h
ViewBag
—
—
 
.
—
—
 
fechaHoraInicio
—
—
 #
=
—
—
$ %
fechas
—
—
& ,
[
—
—
, -
$num
—
—
- .
]
—
—
. /
;
—
—
/ 0
ViewBag
“
“
 
.
“
“
 
fechaHoraFin
“
“
  
=
“
“
! "
fechas
“
“
# )
[
“
“
) *
$num
“
“
* +
]
“
“
+ ,
;
“
“
, -
ViewBag
”
”
 
.
”
”
 "
diasAntesDisponibles
”
”
 (
=
”
”
) *
BaseController
”
”
+ 9
.
”
”
9 :?
1FormatearParametroDiasAntesDisponiblesParaReporte
”
”
: k
(
”
”
k l
ReporteSettings
”
”
l {
.
”
”
{ |
Default”
”
| É
.”
”
É Ñ3
#DiasAntesDisponiblesReporteVendedor”
”
Ñ ß
)”
”
ß ®
;”
”
® ©
ViewBag
‘
‘
 
.
‘
‘
 (
parametrosReportesVendedor
‘
‘
 .
=
‘
‘
/ 0+
ConfiguracionReportesVendedor
‘
‘
1 N
.
‘
‘
N O
Default
‘
‘
O V
;
‘
‘
V W
return
◊
◊
 
View
◊
◊
 
(
◊
◊
 
)
◊
◊
 
;
◊
◊
 
}
ÿ
ÿ
 	
[
Ÿ
Ÿ
 	
	Authorize
Ÿ
Ÿ
	 
(
Ÿ
Ÿ
 
Roles
Ÿ
Ÿ
 
=
Ÿ
Ÿ
 
$str
Ÿ
Ÿ
 B
)
Ÿ
Ÿ
B C
]
Ÿ
Ÿ
C D
public
⁄
⁄
 
ActionResult
⁄
⁄
 #
ReportesAdministrador
⁄
⁄
 1
(
⁄
⁄
1 2
)
⁄
⁄
2 3
{
€
€
 	
List
‹
‹
 
<
‹
‹
 
DateTime
‹
‹
 
>
‹
‹
 
fechas
‹
‹
 !
=
‹
‹
" #
operacionLogica
‹
‹
$ 3
.
‹
‹
3 4?
1ObtenerFechaIncioyFinParaReporteVentaPuntoDeVenta
‹
‹
4 e
(
‹
‹
e f
)
‹
‹
f g
;
‹
‹
g h
ViewBag
ﬁ
ﬁ
 
.
ﬁ
ﬁ
 
fechaHoraInicio
ﬁ
ﬁ
 #
=
ﬁ
ﬁ
$ %
fechas
ﬁ
ﬁ
& ,
[
ﬁ
ﬁ
, -
$num
ﬁ
ﬁ
- .
]
ﬁ
ﬁ
. /
;
ﬁ
ﬁ
/ 0
ViewBag
ﬂ
ﬂ
 
.
ﬂ
ﬂ
 
fechaHoraFin
ﬂ
ﬂ
  
=
ﬂ
ﬂ
! "
fechas
ﬂ
ﬂ
# )
[
ﬂ
ﬂ
) *
$num
ﬂ
ﬂ
* +
]
ﬂ
ﬂ
+ ,
;
ﬂ
ﬂ
, -
ViewBag
‡
‡
 
.
‡
‡
 -
parametrosReportesAdministrador
‡
‡
 3
=
‡
‡
4 50
"ConfiguracionReportesAdministrador
‡
‡
6 X
.
‡
‡
X Y
Default
‡
‡
Y `
;
‡
‡
` a
return
·
·
 
View
·
·
 
(
·
·
 
)
·
·
 
;
·
·
 
}
‚
‚
 	
public
‰
‰
 
ActionResult
‰
‰
 
ReportesCajero
‰
‰
 *
(
‰
‰
* +
)
‰
‰
+ ,
{
Â
Â
 	
List
Ê
Ê
 
<
Ê
Ê
 
DateTime
Ê
Ê
 
>
Ê
Ê
 
fechas
Ê
Ê
 !
=
Ê
Ê
" #
operacionLogica
Ê
Ê
$ 3
.
Ê
Ê
3 4?
1ObtenerFechaIncioyFinParaReporteVentaPuntoDeVenta
Ê
Ê
4 e
(
Ê
Ê
e f
)
Ê
Ê
f g
;
Ê
Ê
g h
ViewBag
Á
Á
 
.
Á
Á
 
fechaHoraInicio
Á
Á
 #
=
Á
Á
$ %
fechas
Á
Á
& ,
[
Á
Á
, -
$num
Á
Á
- .
]
Á
Á
. /
;
Á
Á
/ 0
ViewBag
Ë
Ë
 
.
Ë
Ë
 
fechaHoraFin
Ë
Ë
  
=
Ë
Ë
! "
fechas
Ë
Ë
# )
[
Ë
Ë
) *
$num
Ë
Ë
* +
]
Ë
Ë
+ ,
;
Ë
Ë
, -
ViewBag
È
È
 
.
È
È
 "
diasAntesDisponibles
È
È
 (
=
È
È
) *
BaseController
È
È
+ 9
.
È
È
9 :?
1FormatearParametroDiasAntesDisponiblesParaReporte
È
È
: k
(
È
È
k l
ReporteSettings
È
È
l {
.
È
È
{ |
DefaultÈ
È
| É
.È
È
É Ñ3
#DiasAntesDisponiblesReporteVendedorÈ
È
Ñ ß
)È
È
ß ®
;È
È
® ©
return
Í
Í
 
View
Í
Í
 
(
Í
Í
 
)
Í
Í
 
;
Í
Í
 
}
Î
Î
 	
public
Ú
Ú
 

JsonResult
Ú
Ú
 ,
ObtenerParametrosDeFacturacion
Ú
Ú
 8
(
Ú
Ú
8 9
)
Ú
Ú
9 :
{
Û
Û
 	
try
Ù
Ù
 
{
ı
ı
 
var
ˆ
ˆ
 
data
ˆ
ˆ
 
=
ˆ
ˆ
 
new
ˆ
ˆ
  
ConfiguracionVenta
ˆ
ˆ
 1
{
˜
˜
 
FechaActual
¯
¯
 
=
¯
¯
  !
DateTimeUtil
¯
¯
" .
.
¯
¯
. /
FechaActual
¯
¯
/ :
(
¯
¯
: ;
)
¯
¯
; <
.
¯
¯
< =
ToString
¯
¯
= E
(
¯
¯
E F
$str
¯
¯
F R
)
¯
¯
R S
}
˘
˘
 
;
˘
˘
 
return
˙
˙
 
Json
˙
˙
 
(
˙
˙
 
new
˙
˙
 
{
˙
˙
  !
data
˙
˙
" &
}
˙
˙
' (
)
˙
˙
( )
;
˙
˙
) *
}
˚
˚
 
catch
¸
¸
 
(
¸
¸
 
	Exception
¸
¸
 
e
¸
¸
 
)
¸
¸
 
{
˝
˝
 
return
˛
˛
 
new
˛
˛
 "
JsonHttpStatusResult
˛
˛
 /
(
˛
˛
/ 0
Util
˛
˛
0 4
.
˛
˛
4 5
	ErrorJson
˛
˛
5 >
(
˛
˛
> ?
e
˛
˛
? @
)
˛
˛
@ A
,
˛
˛
A B
HttpStatusCode
˛
˛
C Q
.
˛
˛
Q R!
InternalServerError
˛
˛
R e
)
˛
˛
e f
;
˛
˛
f g
}
ˇ
ˇ
 
}
ÄÄ 	
public
ÉÉ 

JsonResult
ÉÉ '
ObtenerParametrosParaPago
ÉÉ 3
(
ÉÉ3 4
)
ÉÉ4 5
{
ÑÑ 	
try
ÖÖ 
{
ÜÜ 
var
áá 
data
áá 
=
áá 
new
áá 
ConfiguracionPago
áá 0
{
àà 
FechaActual
ââ 
=
ââ  !
DateTimeUtil
ââ" .
.
ââ. /
FechaActual
ââ/ :
(
ââ: ;
)
ââ; <
.
ââ< =
ToString
ââ= E
(
ââE F
$str
ââF [
)
ââ[ \
}
ää 
;
ää 
return
ãã 
Json
ãã 
(
ãã 
new
ãã 
{
ãã  !
data
ãã" &
}
ãã' (
)
ãã( )
;
ãã) *
}
åå 
catch
çç 
(
çç 
	Exception
çç 
e
çç 
)
çç 
{
éé 
return
èè 
new
èè "
JsonHttpStatusResult
èè /
(
èè/ 0
Util
èè0 4
.
èè4 5
	ErrorJson
èè5 >
(
èè> ?
e
èè? @
)
èè@ A
,
èèA B
HttpStatusCode
èèC Q
.
èèQ R!
InternalServerError
èèR e
)
èèe f
;
èèf g
}
êê 
}
ëë 	
public
îî 

JsonResult
îî .
 ObtenerParametrosParaTrazaDePago
îî :
(
îî: ;
)
îî; <
{
ïï 	
try
ññ 
{
óó 
var
òò 
data
òò 
=
òò &
ConfiguracionTrazaDePago
òò 3
.
òò3 4
Default
òò4 ;
;
òò; <
return
ôô 
Json
ôô 
(
ôô 
new
ôô 
{
ôô  !
data
ôô" &
}
ôô' (
)
ôô( )
;
ôô) *
}
öö 
catch
õõ 
(
õõ 
	Exception
õõ 
e
õõ 
)
õõ 
{
úú 
return
ùù 
new
ùù "
JsonHttpStatusResult
ùù /
(
ùù/ 0
Util
ùù0 4
.
ùù4 5
	ErrorJson
ùù5 >
(
ùù> ?
e
ùù? @
)
ùù@ A
,
ùùA B
HttpStatusCode
ùùC Q
.
ùùQ R!
InternalServerError
ùùR e
)
ùùe f
;
ùùf g
}
ûû 
}
üü 	
public
°° 

JsonResult
°° '
ObtenerParametrosParaNota
°° 3
(
°°3 4
)
°°4 5
{
¢¢ 	
try
££ 
{
§§ 
var
•• 
data
•• 
=
•• 
new
•• 
ConfiguracionNota
•• 0
(
••0 1
)
••1 2
;
••2 3
return
¶¶ 
Json
¶¶ 
(
¶¶ 
new
¶¶ 
{
¶¶  !
data
¶¶" &
}
¶¶' (
)
¶¶( )
;
¶¶) *
}
ßß 
catch
®® 
(
®® 
	Exception
®® 
e
®® 
)
®® 
{
©© 
return
™™ 
new
™™ "
JsonHttpStatusResult
™™ /
(
™™/ 0
Util
™™0 4
.
™™4 5
	ErrorJson
™™5 >
(
™™> ?
e
™™? @
)
™™@ A
,
™™A B
HttpStatusCode
™™C Q
.
™™Q R!
InternalServerError
™™R e
)
™™e f
;
™™f g
}
´´ 
}
¨¨ 	
public
ØØ 

JsonResult
ØØ 3
%ObtenerParametrosParaRegistroDetalles
ØØ ?
(
ØØ? @
)
ØØ@ A
{
∞∞ 	
try
±± 
{
≤≤ 
string
≥≥ 
mascaraDeIngreso
≥≥ '
=
≥≥( )
VentasSettings
≥≥* 8
.
≥≥8 9
Default
≥≥9 @
.
≥≥@ A.
 MascaraDeCamposAIngresarEnVentas
≥≥A a
;
≥≥a b
string
¥¥ 
mascaraDeCalculo
¥¥ '
=
¥¥( )
VentasSettings
¥¥* 8
.
¥¥8 9
Default
¥¥9 @
.
¥¥@ A,
MascaraFormasDeCalculoEnVentas
¥¥A _
;
¥¥_ `
var
µµ 
data
µµ 
=
µµ 
new
µµ *
ConfiguracionRegistroDetalle
µµ ;
{
∂∂ 5
'SalidaBienesSujetasADisponibilidadStock
∑∑ ;
=
∑∑< =
!
∑∑> ?
ProfileData
∑∑? J
(
∑∑J K
)
∑∑K L
.
∑∑L M4
&CentroAtencionQueTieneElStockIntegrada
∑∑M s
.
∑∑s t#
SalidaBienesSinStock∑∑t à
,∑∑à â&
PermitirIngresarCantidad
∏∏ ,
=
∏∏- .
	ventaUtil
∏∏/ 8
.
∏∏8 9,
ObtenerCamposEditablesEnVentas
∏∏9 W
(
∏∏W X
mascaraDeIngreso
∏∏X h
,
∏∏h i,
ElementoDeCalculoEnVentasEnum∏∏j á
.∏∏á à
Cantidad∏∏à ê
)∏∏ê ë
,∏∏ë í,
PermitirIngresarPrecioUnitario
ππ 2
=
ππ3 4
	ventaUtil
ππ5 >
.
ππ> ?,
ObtenerCamposEditablesEnVentas
ππ? ]
(
ππ] ^
mascaraDeIngreso
ππ^ n
,
ππn o,
ElementoDeCalculoEnVentasEnumππp ç
.ππç é
PrecioUnitarioππé ú
)ππú ù
,ππù û%
PermitirIngresarImporte
∫∫ +
=
∫∫, -
	ventaUtil
∫∫. 7
.
∫∫7 8,
ObtenerCamposEditablesEnVentas
∫∫8 V
(
∫∫V W
mascaraDeIngreso
∫∫W g
,
∫∫g h,
ElementoDeCalculoEnVentasEnum∫∫i Ü
.∫∫Ü á
Importe∫∫á é
)∫∫é è
,∫∫è ê4
&IngresarCantidadCalcularPrecioUnitario
ªª :
=
ªª; <
	ventaUtil
ªª= F
.
ªªF G-
ObtenerFormasDeCalculosEnVentas
ªªG f
(
ªªf g
mascaraDeCalculo
ªªg w
,
ªªw x,
ElementoDeCalculoEnVentasEnumªªy ñ
.ªªñ ó
Cantidadªªó ü
,ªªü †-
ElementoDeCalculoEnVentasEnumªª° æ
.ªªæ ø
PrecioUnitarioªªø Õ
)ªªÕ Œ
,ªªŒ œ3
%IngresarPrecioUnitarioCalcularImporte
ºº 9
=
ºº: ;
	ventaUtil
ºº< E
.
ººE F-
ObtenerFormasDeCalculosEnVentas
ººF e
(
ººe f
mascaraDeCalculo
ººf v
,
ººv w,
ElementoDeCalculoEnVentasEnumººx ï
.ººï ñ
PrecioUnitarioººñ §
,ºº§ •-
ElementoDeCalculoEnVentasEnumºº¶ √
.ºº√ ƒ
Importeººƒ À
)ººÀ Ã
,ººÃ Õ-
IngresarImporteCalcularCantidad
ΩΩ 3
=
ΩΩ4 5
	ventaUtil
ΩΩ6 ?
.
ΩΩ? @-
ObtenerFormasDeCalculosEnVentas
ΩΩ@ _
(
ΩΩ_ `
mascaraDeCalculo
ΩΩ` p
,
ΩΩp q,
ElementoDeCalculoEnVentasEnumΩΩr è
.ΩΩè ê
ImporteΩΩê ó
,ΩΩó ò-
ElementoDeCalculoEnVentasEnumΩΩô ∂
.ΩΩ∂ ∑
CantidadΩΩ∑ ø
)ΩΩø ¿
,ΩΩ¿ ¡$
CostoUnitarioDelIcbper
ææ *
=
ææ+ ,
ProfileData
ææ- 8
(
ææ8 9
)
ææ9 :
.
ææ: ;$
CostoUnitarioDelIcbper
ææ; Q
}
øø 
;
øø 
return
¿¿ 
Json
¿¿ 
(
¿¿ 
new
¿¿ 
{
¿¿  !
data
¿¿" &
}
¿¿' (
)
¿¿( )
;
¿¿) *
}
¡¡ 
catch
¬¬ 
(
¬¬ 
	Exception
¬¬ 
e
¬¬ 
)
¬¬ 
{
√√ 
return
ƒƒ 
new
ƒƒ "
JsonHttpStatusResult
ƒƒ /
(
ƒƒ/ 0
Util
ƒƒ0 4
.
ƒƒ4 5
	ErrorJson
ƒƒ5 >
(
ƒƒ> ?
e
ƒƒ? @
)
ƒƒ@ A
,
ƒƒA B
HttpStatusCode
ƒƒC Q
.
ƒƒQ R!
InternalServerError
ƒƒR e
)
ƒƒe f
;
ƒƒf g
}
≈≈ 
}
∆∆ 	
public
   

JsonResult
   "
CancelarOrdenDeVenta
   .
(
  . /$
RegistroVentaViewModel
  / E
facturacion
  F Q
)
  Q R
{
ÀÀ 	
try
ÃÃ 
{
ÕÕ 
OperationResult
ŒŒ 
result
ŒŒ  &
=
ŒŒ' (
operacionLogica
ŒŒ) 8
.
ŒŒ8 9"
cancelarOrdenDeVenta
ŒŒ9 M
(
ŒŒM N
facturacion
ŒŒN Y
.
ŒŒY Z
IdVenta
ŒŒZ a
,
ŒŒa b
ProfileData
ŒŒc n
(
ŒŒn o
)
ŒŒo p
.
ŒŒp q
Empleado
ŒŒq y
.
ŒŒy z
Id
ŒŒz |
,
ŒŒ| }
ProfileDataŒŒ~ â
(ŒŒâ ä
)ŒŒä ã
.ŒŒã å.
IdCentroDeAtencionSeleccionadoŒŒå ™
)ŒŒ™ ´
;ŒŒ´ ¨
Util
œœ 
.
œœ 
VerificarError
œœ #
(
œœ# $
result
œœ$ *
)
œœ* +
;
œœ+ ,
return
–– 
Json
–– 
(
–– 
new
–– 
{
––  !
code_result
––" -
=
––. /
result
––0 6
.
––6 7
code_result
––7 B
,
––B C
data
––D H
=
––I J
result
––K Q
.
––Q R
data
––R V
,
––V W 
result_description
––X j
=
––k l
result
––m s
.
––s t
title
––t y
}
––z {
)
––{ |
;
––| }
}
—— 
catch
““ 
(
““ 
	Exception
““ 
e
““ 
)
““ 
{
”” 
HttpContext
‘‘ 
.
‘‘ 
Response
‘‘ $
.
‘‘$ %

StatusCode
‘‘% /
=
‘‘0 1
$num
‘‘2 5
;
‘‘5 6
return
’’ 
Json
’’ 
(
’’ 
Util
’’  
.
’’  !
	ErrorJson
’’! *
(
’’* +
e
’’+ ,
)
’’, -
)
’’- .
;
’’. /
}
÷÷ 
}
◊◊ 	
public
ŸŸ 

JsonResult
ŸŸ &
CargarOperacionesDeVenta
ŸŸ 2
(
ŸŸ2 3
long
ŸŸ3 7
[
ŸŸ7 8
]
ŸŸ8 9
ids
ŸŸ: =
)
ŸŸ= >
{
⁄⁄ 	
try
€€ 
{
‹‹ 
List
›› 
<
›› 
OrdenDeVenta
›› !
>
››! "
ordenesDeVentas
››# 2
=
››3 4
operacionLogica
››5 D
.
››D E#
ObtenerOrdenesDeVenta
››E Z
(
››Z [
ids
››[ ^
)
››^ _
;
››_ `
List
ﬁﬁ 
<
ﬁﬁ '
OrdenVentaCompraViewModel
ﬁﬁ .
>
ﬁﬁ. /

documentos
ﬁﬁ0 :
=
ﬁﬁ; <'
OrdenVentaCompraViewModel
ﬁﬁ= V
.
ﬁﬁV W
convert
ﬁﬁW ^
(
ﬁﬁ^ _
ordenesDeVentas
ﬁﬁ_ n
)
ﬁﬁn o
;
ﬁﬁo p
return
ﬂﬂ 
Json
ﬂﬂ 
(
ﬂﬂ 

documentos
ﬂﬂ &
)
ﬂﬂ& '
;
ﬂﬂ' (
}
‡‡ 
catch
·· 
(
·· 
	Exception
·· 
e
·· 
)
·· 
{
‚‚ 
HttpContext
„„ 
.
„„ 
Response
„„ $
.
„„$ %

StatusCode
„„% /
=
„„0 1
$num
„„2 5
;
„„5 6
return
‰‰ 
Json
‰‰ 
(
‰‰ 
Util
‰‰  
.
‰‰  !
	ErrorJson
‰‰! *
(
‰‰* +
e
‰‰+ ,
)
‰‰, -
)
‰‰- .
;
‰‰. /
}
ÂÂ 
}
ÊÊ 	
public
ËË 
async
ËË 
Task
ËË 
<
ËË 

JsonResult
ËË $
>
ËË$ %6
(ObtenerSeriesConTipoComprobanteParaVenta
ËË& N
(
ËËN O
)
ËËO P
{
ÈÈ 	
try
ÍÍ 
{
ÎÎ 
var
ÏÏ &
seriesConTipoComprobante
ÏÏ ,
=
ÏÏ- .
await
ÏÏ/ 4!
configuracionLogica
ÏÏ5 H
.
ÏÏH I-
ObtenerSeriesConTipoComprobante
ÏÏI h
(
ÏÏh i!
TipoComprobantePara
ÏÏi |
.
ÏÏ| }
VentasYSusNotasÏÏ} å
,ÏÏå ç
ProfileDataÏÏé ô
(ÏÏô ö
)ÏÏö õ
)ÏÏõ ú
;ÏÏú ù
return
ÌÌ 
Json
ÌÌ 
(
ÌÌ &
seriesConTipoComprobante
ÌÌ 4
)
ÌÌ4 5
;
ÌÌ5 6
}
ÓÓ 
catch
ÔÔ 
(
ÔÔ 
	Exception
ÔÔ 
e
ÔÔ 
)
ÔÔ 
{
 
return
ÒÒ 
Json
ÒÒ 
(
ÒÒ 
Util
ÒÒ  
.
ÒÒ  !
	ErrorJson
ÒÒ! *
(
ÒÒ* +
e
ÒÒ+ ,
)
ÒÒ, -
)
ÒÒ- .
;
ÒÒ. /
}
ÚÚ 
}
ÛÛ 	
public
ıı 
async
ıı 
Task
ıı 
<
ıı 

JsonResult
ıı $
>
ıı$ %0
"ObtenerTiposDeComprobanteParaVenta
ıı& H
(
ııH I
)
ııI J
{
ˆˆ 	
try
˜˜ 
{
¯¯ 
var
˘˘ 
comprobantes
˘˘  
=
˘˘! "
await
˘˘# (!
configuracionLogica
˘˘) <
.
˘˘< =*
ObtenerSelectorDeComprobante
˘˘= Y
(
˘˘Y Z!
TipoComprobantePara
˘˘Z m
.
˘˘m n
Venta
˘˘n s
,
˘˘s t
ProfileData˘˘u Ä
(˘˘Ä Å
)˘˘Å Ç
)˘˘Ç É
;˘˘É Ñ
return
˙˙ 
Json
˙˙ 
(
˙˙ 
comprobantes
˙˙ (
)
˙˙( )
;
˙˙) *
}
˚˚ 
catch
¸¸ 
(
¸¸ 
	Exception
¸¸ 
e
¸¸ 
)
¸¸ 
{
˝˝ 
return
˛˛ 
Json
˛˛ 
(
˛˛ 
Util
˛˛  
.
˛˛  !
	ErrorJson
˛˛! *
(
˛˛* +
e
˛˛+ ,
)
˛˛, -
)
˛˛- .
;
˛˛. /
}
ˇˇ 
}
ÄÄ 	
public
ÇÇ 
async
ÇÇ 
Task
ÇÇ 
<
ÇÇ 

JsonResult
ÇÇ $
>
ÇÇ$ %F
8ObtenerTiposDeComprobanteConSeriesAutonumericasParaVenta
ÇÇ& ^
(
ÇÇ^ _
)
ÇÇ_ `
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 
var
ÜÜ 
comprobantes
ÜÜ  
=
ÜÜ! "
await
ÜÜ# (!
configuracionLogica
ÜÜ) <
.
ÜÜ< =*
ObtenerSelectorDeComprobante
ÜÜ= Y
(
ÜÜY Z!
TipoComprobantePara
ÜÜZ m
.
ÜÜm n+
SeriesAutonumericasParaVentaÜÜn ä
,ÜÜä ã
ProfileDataÜÜå ó
(ÜÜó ò
)ÜÜò ô
)ÜÜô ö
;ÜÜö õ
return
áá 
Json
áá 
(
áá 
comprobantes
áá (
)
áá( )
;
áá) *
}
àà 
catch
ââ 
(
ââ 
	Exception
ââ 
e
ââ 
)
ââ 
{
ää 
return
ãã 
Json
ãã 
(
ãã 
Util
ãã  
.
ãã  !
	ErrorJson
ãã! *
(
ãã* +
e
ãã+ ,
)
ãã, -
)
ãã- .
;
ãã. /
}
åå 
}
çç 	
public
èè 
async
èè 
Task
èè 
<
èè 

JsonResult
èè $
>
èè$ %U
GObtenerTiposDeComprobanteConSeriesAutonumericasParaVentaExcluidoFactura
èè& m
(
èèm n
)
èèn o
{
êê 	
try
ëë 
{
íí 
var
ìì 
comprobantes
ìì  
=
ìì! "
await
ìì# (!
configuracionLogica
ìì) <
.
ìì< =*
ObtenerSelectorDeComprobante
ìì= Y
(
ììY Z!
TipoComprobantePara
ììZ m
.
ììm n:
+SeriesAutonumericasParaVentaExcluidoFacturaììn ô
,ììô ö
ProfileDataììõ ¶
(ìì¶ ß
)ììß ®
)ìì® ©
;ìì© ™
return
îî 
Json
îî 
(
îî 
comprobantes
îî (
)
îî( )
;
îî) *
}
ïï 
catch
ññ 
(
ññ 
	Exception
ññ 
e
ññ 
)
ññ 
{
ññ  !
return
ññ" (
Json
ññ) -
(
ññ- .
Util
ññ. 2
.
ññ2 3
	ErrorJson
ññ3 <
(
ññ< =
e
ññ= >
)
ññ> ?
)
ññ? @
;
ññ@ A
}
ññB C
}
óó 	
public
ôô 
async
ôô 
Task
ôô 
<
ôô 

JsonResult
ôô $
>
ôô$ %@
2ObtenerTiposDeComprobanteParaVentasPorContingencia
ôô& X
(
ôôX Y
)
ôôY Z
{
öö 	
try
õõ 
{
úú 
var
ùù 
comprobantes
ùù  
=
ùù! "
await
ùù# (!
configuracionLogica
ùù) <
.
ùù< =*
ObtenerSelectorDeComprobante
ùù= Y
(
ùùY Z!
TipoComprobantePara
ùùZ m
.
ùùm n$
VentasPorContingenciaùùn É
,ùùÉ Ñ
ProfileDataùùÖ ê
(ùùê ë
)ùùë í
)ùùí ì
;ùùì î
return
ûû 
Json
ûû 
(
ûû 
comprobantes
ûû (
)
ûû( )
;
ûû) *
}
üü 
catch
†† 
(
†† 
	Exception
†† 
e
†† 
)
†† 
{
††  !
return
††" (
Json
††) -
(
††- .
Util
††. 2
.
††2 3
	ErrorJson
††3 <
(
††< =
e
††= >
)
††> ?
)
††? @
;
††@ A
}
††B C
}
°° 	
public
££ 
async
££ 
Task
££ 
<
££ 

JsonResult
££ $
>
££$ %9
+ObtenerTiposDeComprobanteParaReporteDeVenta
££& Q
(
££Q R
)
££R S
{
§§ 	
try
•• 
{
¶¶ 
var
ßß 
comprobantes
ßß  
=
ßß! "
await
ßß# (!
configuracionLogica
ßß) <
.
ßß< =*
ObtenerSelectorDeComprobante
ßß= Y
(
ßßY Z!
TipoComprobantePara
ßßZ m
.
ßßm n
ReporteDeVenta
ßßn |
,
ßß| }
ProfileDataßß~ â
(ßßâ ä
)ßßä ã
)ßßã å
;ßßå ç
return
®® 
Json
®® 
(
®® 
comprobantes
®® (
)
®®( )
;
®®) *
}
©© 
catch
™™ 
(
™™ 
	Exception
™™ 
e
™™ 
)
™™ 
{
™™  !
return
™™" (
Json
™™) -
(
™™- .
Util
™™. 2
.
™™2 3
	ErrorJson
™™3 <
(
™™< =
e
™™= >
)
™™> ?
)
™™? @
;
™™@ A
}
™™B C
}
´´ 	
public
≠≠ 
async
≠≠ 
Task
≠≠ 
<
≠≠ 

JsonResult
≠≠ $
>
≠≠$ %:
,ObtenerTiposDeComprobanteParaVentasYSusNotas
≠≠& R
(
≠≠R S
)
≠≠S T
{
ÆÆ 	
try
ØØ 
{
∞∞ 
var
±± 
comprobantes
±±  
=
±±! "
await
±±# (!
configuracionLogica
±±) <
.
±±< =*
ObtenerSelectorDeComprobante
±±= Y
(
±±Y Z!
TipoComprobantePara
±±Z m
.
±±m n
VentasYSusNotas
±±n }
,
±±} ~
ProfileData±± ä
(±±ä ã
)±±ã å
)±±å ç
;±±ç é
return
≤≤ 
Json
≤≤ 
(
≤≤ 
comprobantes
≤≤ (
)
≤≤( )
;
≤≤) *
}
≥≥ 
catch
¥¥ 
(
¥¥ 
	Exception
¥¥ 
e
¥¥ 
)
¥¥ 
{
¥¥  !
return
¥¥" (
Json
¥¥) -
(
¥¥- .
Util
¥¥. 2
.
¥¥2 3
	ErrorJson
¥¥3 <
(
¥¥< =
e
¥¥= >
)
¥¥> ?
)
¥¥? @
;
¥¥@ A
}
¥¥B C
}
µµ 	
public
ππ 
async
ππ 
Task
ππ 
<
ππ 

JsonResult
ππ $
>
ππ$ %3
%ObtenerTiposDeComprobanteParaClientes
ππ& K
(
ππK L
)
ππL M
{
∫∫ 	
try
ªª 
{
ºº 
var
ΩΩ 

resultados
ΩΩ 
=
ΩΩ  
await
ΩΩ! &!
configuracionLogica
ΩΩ' :
.
ΩΩ: ;0
"ObtenerTiposDeComprobanteParaVenta
ΩΩ; ]
(
ΩΩ] ^
)
ΩΩ^ _
;
ΩΩ_ `
List
ææ 
<
ææ $
ComboGenericoViewModel
ææ +
>
ææ+ ,
comprobantes
ææ- 9
=
ææ: ;$
ComboGenericoViewModel
ææ< R
.
ææR S
Convert
ææS Z
(
ææZ [

resultados
ææ[ e
)
ææe f
;
ææf g
return
øø 
Json
øø 
(
øø 
comprobantes
øø (
)
øø( )
;
øø) *
}
¿¿ 
catch
¡¡ 
(
¡¡ 
	Exception
¡¡ 
e
¡¡ 
)
¡¡ 
{
¬¬ 
return
√√ 
Json
√√ 
(
√√ 
Util
√√  
.
√√  !
	ErrorJson
√√! *
(
√√* +
e
√√+ ,
)
√√, -
)
√√- .
;
√√. /
}
ƒƒ 
}
≈≈ 	
public
«« 
async
«« 
Task
«« 
<
«« 

JsonResult
«« $
>
««$ %6
(ObtenerTiposDeComprobanteParaAnularVenta
««& N
(
««N O
)
««O P
{
»» 	
try
…… 
{
   
var
ÀÀ 

resultados
ÀÀ 
=
ÀÀ  
await
ÀÀ! &!
configuracionLogica
ÀÀ' :
.
ÀÀ: ;6
(ObtenerTiposDeComprobanteParaAnularVenta
ÀÀ; c
(
ÀÀc d
)
ÀÀd e
;
ÀÀe f
List
ÃÃ 
<
ÃÃ &
TipoComprobanteViewModel
ÃÃ -
>
ÃÃ- .
comprobantes
ÃÃ/ ;
=
ÃÃ< =&
TipoComprobanteViewModel
ÃÃ> V
.
ÃÃV W
Convert
ÃÃW ^
(
ÃÃ^ _

resultados
ÃÃ_ i
)
ÃÃi j
;
ÃÃj k
return
ÕÕ 
Json
ÕÕ 
(
ÕÕ 
comprobantes
ÕÕ (
)
ÕÕ( )
;
ÕÕ) *
}
ŒŒ 
catch
œœ 
(
œœ 
	Exception
œœ 
e
œœ 
)
œœ 
{
–– 
return
—— 
Json
—— 
(
—— 
Util
——  
.
——  !
	ErrorJson
——! *
(
——* +
e
——+ ,
)
——, -
)
——- .
;
——. /
}
““ 
}
”” 	
public
’’ 
async
’’ 
Task
’’ 
<
’’ 

JsonResult
’’ $
>
’’$ %>
0ObtenerTiposDeComprobanteParaDescuentoSobreVenta
’’& V
(
’’V W
)
’’W X
{
÷÷ 	
try
◊◊ 
{
ÿÿ 
var
ŸŸ 

resultados
ŸŸ 
=
ŸŸ  
await
ŸŸ! &!
configuracionLogica
ŸŸ' :
.
ŸŸ: ;>
0ObtenerTiposDeComprobanteParaDescuentoSobreVenta
ŸŸ; k
(
ŸŸk l
)
ŸŸl m
;
ŸŸm n
List
⁄⁄ 
<
⁄⁄ &
TipoComprobanteViewModel
⁄⁄ -
>
⁄⁄- .
comprobantes
⁄⁄/ ;
=
⁄⁄< =&
TipoComprobanteViewModel
⁄⁄> V
.
⁄⁄V W
Convert
⁄⁄W ^
(
⁄⁄^ _

resultados
⁄⁄_ i
)
⁄⁄i j
;
⁄⁄j k
return
‹‹ 
Json
‹‹ 
(
‹‹ 
comprobantes
‹‹ (
)
‹‹( )
;
‹‹) *
}
›› 
catch
ﬁﬁ 
(
ﬁﬁ 
	Exception
ﬁﬁ 
e
ﬁﬁ 
)
ﬁﬁ 
{
ﬂﬂ 
return
‡‡ 
Json
‡‡ 
(
‡‡ 
Util
‡‡  
.
‡‡  !
	ErrorJson
‡‡! *
(
‡‡* +
e
‡‡+ ,
)
‡‡, -
)
‡‡- .
;
‡‡. /
}
·· 
}
‚‚ 	
public
‰‰ 
async
‰‰ 
Task
‰‰ 
<
‰‰ 

JsonResult
‰‰ $
>
‰‰$ %<
.ObtenerTiposDeComprobanteParaRecargoSobreVenta
‰‰& T
(
‰‰T U
)
‰‰U V
{
ÂÂ 	
try
ÊÊ 
{
ÁÁ 
var
ËË 

resultados
ËË 
=
ËË  
await
ËË! &!
configuracionLogica
ËË' :
.
ËË: ;<
.ObtenerTiposDeComprobanteParaRecargoSobreVenta
ËË; i
(
ËËi j
)
ËËj k
;
ËËk l
List
ÈÈ 
<
ÈÈ &
TipoComprobanteViewModel
ÈÈ -
>
ÈÈ- .
comprobantes
ÈÈ/ ;
=
ÈÈ< =&
TipoComprobanteViewModel
ÈÈ> V
.
ÈÈV W
Convert
ÈÈW ^
(
ÈÈ^ _

resultados
ÈÈ_ i
)
ÈÈi j
;
ÈÈj k
return
ÍÍ 
Json
ÍÍ 
(
ÍÍ 
comprobantes
ÍÍ (
)
ÍÍ( )
;
ÍÍ) *
}
ÎÎ 
catch
ÏÏ 
(
ÏÏ 
	Exception
ÏÏ 
e
ÏÏ 
)
ÏÏ 
{
ÌÌ 
return
ÓÓ 
Json
ÓÓ 
(
ÓÓ 
Util
ÓÓ  
.
ÓÓ  !
	ErrorJson
ÓÓ! *
(
ÓÓ* +
e
ÓÓ+ ,
)
ÓÓ, -
)
ÓÓ- .
;
ÓÓ. /
}
ÔÔ 
}
 	
public
ÚÚ 
async
ÚÚ 
Task
ÚÚ 
<
ÚÚ 

JsonResult
ÚÚ $
>
ÚÚ$ %&
ObtenerMediosDePagoVenta
ÚÚ& >
(
ÚÚ> ?
)
ÚÚ? @
{
ÛÛ 	
try
ÙÙ 
{
ıı 
var
˜˜ 

resultados
˜˜ 
=
˜˜  
await
˜˜! &
operacionLogica
˜˜' 6
.
˜˜6 7&
ObtenerMediosDePagoVenta
˜˜7 O
(
˜˜O P
)
˜˜P Q
;
˜˜Q R
List
¯¯ 
<
¯¯ $
ComboGenericoViewModel
¯¯ +
>
¯¯+ ,
mediosDePago
¯¯- 9
=
¯¯: ;
new
¯¯< ?
List
¯¯@ D
<
¯¯D E$
ComboGenericoViewModel
¯¯E [
>
¯¯[ \
(
¯¯\ ]
)
¯¯] ^
;
¯¯^ _
foreach
˘˘ 
(
˘˘ 
var
˘˘ 
item
˘˘ !
in
˘˘" $

resultados
˘˘% /
)
˘˘/ 0
{
˙˙ 
if
˚˚ 
(
˚˚ 
item
˚˚ 
.
˚˚ 
id
˚˚ 
==
˚˚ !
MaestroSettings
˚˚" 1
.
˚˚1 2
Default
˚˚2 9
.
˚˚9 :/
!IdDetalleMaestroMedioDepagoPuntos
˚˚: [
)
˚˚[ \
{
¸¸ 
if
˝˝ 
(
˝˝ 
VentasSettings
˝˝ )
.
˝˝) *
Default
˝˝* 1
.
˝˝1 2'
UsarPuntosComoMedioDePago
˝˝2 K
)
˝˝K L
mediosDePago
˛˛ (
.
˛˛( )
Add
˛˛) ,
(
˛˛, -
new
˛˛- 0$
ComboGenericoViewModel
˛˛1 G
(
˛˛G H
item
˛˛H L
.
˛˛L M
id
˛˛M O
,
˛˛O P
item
˛˛Q U
.
˛˛U V
valor
˛˛V [
)
˛˛[ \
)
˛˛\ ]
;
˛˛] ^
}
ˇˇ 
else
ÄÄ 
{
ÅÅ 
mediosDePago
ÇÇ $
.
ÇÇ$ %
Add
ÇÇ% (
(
ÇÇ( )
new
ÇÇ) ,$
ComboGenericoViewModel
ÇÇ- C
(
ÇÇC D
item
ÇÇD H
.
ÇÇH I
id
ÇÇI K
,
ÇÇK L
item
ÇÇM Q
.
ÇÇQ R
valor
ÇÇR W
)
ÇÇW X
)
ÇÇX Y
;
ÇÇY Z
}
ÉÉ 
}
ÑÑ 
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
mediosDePago
ÖÖ (
)
ÖÖ( )
;
ÖÖ) *
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
e
áá 
)
áá 
{
àà 
return
ââ 
new
ââ "
JsonHttpStatusResult
ââ /
(
ââ/ 0
Util
ââ0 4
.
ââ4 5
	ErrorJson
ââ5 >
(
ââ> ?
e
ââ? @
)
ââ@ A
,
ââA B
HttpStatusCode
ââC Q
.
ââQ R!
InternalServerError
ââR e
)
ââe f
;
ââf g
}
ää 
}
ãã 	
public
çç 

JsonResult
çç #
ObtenerProductosVenta
çç /
(
çç/ 0
)
çç0 1
{
éé 	
try
èè 
{
êê 
List
ëë 
<
ëë 
ConceptoDeNegocio
ëë &
>
ëë& '

resultados
ëë( 2
=
ëë3 4
conceptoLogica
ëë5 C
.
ëëC DH
:ObtenerMercaderiasPorCentroAtencionIncluyendoStockYPrecios
ëëD ~
(
ëë~ 
ProfileDataëë ä
(ëëä ã
)ëëã å
.ëëå ç2
"IdCentroAtencionQueTieneLosPreciosëëç Ø
)ëëØ ∞
;ëë∞ ±
List
íí 
<
íí (
ProductoParaVentaViewModel
íí /
>
íí/ 0
	productos
íí1 :
=
íí; <
new
íí= @
List
ííA E
<
ííE F(
ProductoParaVentaViewModel
ííF `
>
íí` a
(
íía b
)
ííb c
;
ííc d
foreach
ìì 
(
ìì 
var
ìì 
item
ìì !
in
ìì" $

resultados
ìì% /
)
ìì/ 0
{
îî 
	productos
ïï 
.
ïï 
Add
ïï !
(
ïï! "
new
ïï" %(
ProductoParaVentaViewModel
ïï& @
(
ïï@ A
item
ïïA E
,
ïïE F
ProfileData
ïïG R
(
ïïR S
)
ïïS T
.
ïïT U,
IdCentroDeAtencionSeleccionado
ïïU s
,
ïïs t
ProfileDataïïu Ä
(ïïÄ Å
)ïïÅ Ç
.ïïÇ É.
IdCentroDeAtencionSeleccionadoïïÉ °
)ïï° ¢
)ïï¢ £
;ïï£ §
}
ññ 
return
óó 
Json
óó 
(
óó 
	productos
óó %
)
óó% &
;
óó& '
}
òò 
catch
ôô 
(
ôô 
	Exception
ôô 
e
ôô 
)
ôô 
{
öö 
return
õõ 
Json
õõ 
(
õõ 
Util
õõ  
.
õõ  !
	ErrorJson
õõ! *
(
õõ* +
e
õõ+ ,
)
õõ, -
)
õõ- .
;
õõ. /
}
úú 
}
ùù 	
[
üü 	
Obsolete
üü	 
(
üü 
$str
üü ?
)
üü? @
]
üü@ A
public
†† 

JsonResult
†† -
ObtenerMercaderiaPorCodigoBarra
†† 9
(
††9 :
string
††: @
codigoBarra
††A L
)
††L M
{
°° 	
try
¢¢ 
{
££ 
int
§§ 0
"idCentroAtencionQueTieneLosPrecios
§§ 6
=
§§7 8
ProfileData
§§9 D
(
§§D E
)
§§E F
.
§§F G0
"IdCentroAtencionQueTieneLosPrecios
§§G i
;
§§i j
int
•• 2
$idCentroAtencionQueTieneLaExistencia
•• 8
=
••9 :
ProfileData
••; F
(
••F G
)
••G H
.
••H I6
(IdCentroAtencionQueTieneElStockIntegrada
••I q
;
••q r
ConceptoDeNegocio
¶¶ !
	resultado
¶¶" +
=
¶¶, -
conceptoLogica
¶¶. <
.
¶¶< =Z
KObtenerMercaderiaPorCodigoBarraIncluyendoStockYPreciosConUnPrecioComoMinimo¶¶= à
(¶¶à â
ProfileData¶¶â î
(¶¶î ï
)¶¶ï ñ
.¶¶ñ ó2
"IdCentroAtencionQueTieneLosPrecios¶¶ó π
,¶¶π ∫
codigoBarra¶¶ª ∆
)¶¶∆ «
;¶¶« »
if
ßß 
(
ßß 
	resultado
ßß 
!=
ßß  
null
ßß! %
)
ßß% &
{
®® (
ProductoParaVentaViewModel
©© .
producto
©©/ 7
=
©©8 9
new
©©: =(
ProductoParaVentaViewModel
©©> X
(
©©X Y
	resultado
©©Y b
,
©©b c1
"idCentroAtencionQueTieneLosPrecios©©d Ü
,©©Ü á4
$idCentroAtencionQueTieneLaExistencia©©à ¨
)©©¨ ≠
;©©≠ Æ
return
™™ 
Json
™™ 
(
™™  
producto
™™  (
)
™™( )
;
™™) *
}
´´ 
else
¨¨ 
{
≠≠ 
throw
ÆÆ 
new
ÆÆ "
AdvertenciaException
ÆÆ 2
(
ÆÆ2 3
$str
ÆÆ3 ]
)
ÆÆ] ^
;
ÆÆ^ _
}
ØØ 
}
∞∞ 
catch
±± 
(
±± "
AdvertenciaException
±± '
e
±±( )
)
±±) *
{
≤≤ 
return
≥≥ 
new
≥≥ "
JsonHttpStatusResult
≥≥ /
(
≥≥/ 0
new
≥≥0 3
{
≥≥4 5
error
≥≥6 ;
=
≥≥< =
e
≥≥> ?
.
≥≥? @
Message
≥≥@ G
,
≥≥G H
warning
≥≥I P
=
≥≥Q R
true
≥≥S W
}
≥≥X Y
,
≥≥Y Z
HttpStatusCode
≥≥[ i
.
≥≥i j!
InternalServerError
≥≥j }
)
≥≥} ~
;
≥≥~ 
}
¥¥ 
catch
µµ 
(
µµ 
	Exception
µµ 
e
µµ 
)
µµ 
{
∂∂ 
return
∑∑ 
new
∑∑ "
JsonHttpStatusResult
∑∑ /
(
∑∑/ 0
Util
∑∑0 4
.
∑∑4 5
	ErrorJson
∑∑5 >
(
∑∑> ?
e
∑∑? @
)
∑∑@ A
,
∑∑A B
HttpStatusCode
∑∑C Q
.
∑∑Q R!
InternalServerError
∑∑R e
)
∑∑e f
;
∑∑f g
}
∏∏ 
}
ππ 	
[
∫∫ 	
Obsolete
∫∫	 
(
∫∫ 
$str
∫∫ ?
)
∫∫? @
]
∫∫@ A
public
ªª 

JsonResult
ªª /
!ObtenerProductosVentaPorConceptos
ªª ;
(
ªª; <
int
ªª< ?
idConceptoBasico
ªª@ P
)
ªªP Q
{
ºº 	
try
ΩΩ 
{
ææ 
int
øø 0
"idCentroAtencionQueTieneLosPrecios
øø 6
=
øø7 8
ProfileDataøøõ ¶
(øø¶ ß
)øøß ®
.øø® ©2
"IdCentroAtencionQueTieneLosPreciosøø© À
;øøÀ Ã
int
¡¡ 2
$idCentroAtencionQueTieneLaExistencia
¡¡ 8
=
¡¡9 :
ProfileData¡¡ô §
(¡¡§ •
)¡¡• ¶
.¡¡¶ ß8
(IdCentroAtencionQueTieneElStockIntegrada¡¡ß œ
;¡¡œ –
List
√√ 
<
√√ 
ConceptoDeNegocio
√√ &
>
√√& '

resultados
√√( 2
=
√√3 4
conceptoLogica
√√5 C
.
√√C D7
)ObtenerMercaderiasIncluyendoStockYPrecios
√√D m
(
√√m n
idConceptoBasico
√√n ~
,
√√~ 
ProfileData√√Ä ã
(√√ã å
)√√å ç
.√√ç é2
"IdCentroAtencionQueTieneLosPrecios√√é ∞
)√√∞ ±
;√√± ≤
List
≈≈ 
<
≈≈ (
ProductoParaVentaViewModel
≈≈ /
>
≈≈/ 0
	productos
≈≈1 :
=
≈≈; <
new
≈≈= @
List
≈≈A E
<
≈≈E F(
ProductoParaVentaViewModel
≈≈F `
>
≈≈` a
(
≈≈a b
)
≈≈b c
;
≈≈c d
foreach
∆∆ 
(
∆∆ 
var
∆∆ 
item
∆∆ !
in
∆∆" $

resultados
∆∆% /
)
∆∆/ 0
{
«« 
	productos
»» 
.
»» 
Add
»» !
(
»»! "
new
»»" %(
ProductoParaVentaViewModel
»»& @
(
»»@ A
item
»»A E
,
»»E F0
"idCentroAtencionQueTieneLosPrecios
»»G i
,
»»i j3
$idCentroAtencionQueTieneLaExistencia»»k è
)»»è ê
)»»ê ë
;»»ë í
}
…… 
return
   
Json
   
(
   
	productos
   %
)
  % &
;
  & '
}
ÀÀ 
catch
ÃÃ 
(
ÃÃ 
	Exception
ÃÃ 
e
ÃÃ 
)
ÃÃ 
{
ÕÕ 
return
ŒŒ 
new
ŒŒ "
JsonHttpStatusResult
ŒŒ /
(
ŒŒ/ 0
Util
ŒŒ0 4
.
ŒŒ4 5
	ErrorJson
ŒŒ5 >
(
ŒŒ> ?
e
ŒŒ? @
)
ŒŒ@ A
,
ŒŒA B
HttpStatusCode
ŒŒC Q
.
ŒŒQ R!
InternalServerError
ŒŒR e
)
ŒŒe f
;
ŒŒf g
}
œœ 
}
–– 	
public
““ 

JsonResult
““ (
ObtenerModalidadesGenerico
““ 4
(
““4 5
)
““5 6
{
”” 	
try
‘‘ 
{
’’ 
List
÷÷ 
<
÷÷ $
ComboGenericoViewModel
÷÷ +
>
÷÷+ ,"
modalidadesViewModel
÷÷- A
=
÷÷B C
new
÷÷D G
List
÷÷H L
<
÷÷L M$
ComboGenericoViewModel
÷÷M c
>
÷÷c d
(
÷÷d e
)
÷÷e f
;
÷÷f g
foreach
ÿÿ 
(
ÿÿ 
ModoOperacionEnum
ÿÿ *
	operacion
ÿÿ+ 4
in
ÿÿ5 7
Enum
ÿÿ8 <
.
ÿÿ< =
	GetValues
ÿÿ= F
(
ÿÿF G
typeof
ÿÿG M
(
ÿÿM N
ModoOperacionEnum
ÿÿN _
)
ÿÿ_ `
)
ÿÿ` a
)
ÿÿa b
{
ŸŸ "
modalidadesViewModel
⁄⁄ (
.
⁄⁄( )
Add
⁄⁄) ,
(
⁄⁄, -
new
⁄⁄- 0$
ComboGenericoViewModel
⁄⁄1 G
(
⁄⁄G H
(
⁄⁄H I
int
⁄⁄I L
)
⁄⁄L M
	operacion
⁄⁄M V
,
⁄⁄V W
	Enumerado
⁄⁄X a
.
⁄⁄a b
GetDescription
⁄⁄b p
(
⁄⁄p q
(
⁄⁄q r
	operacion
⁄⁄r {
)
⁄⁄{ |
)
⁄⁄| }
)
⁄⁄} ~
)
⁄⁄~ 
;⁄⁄ Ä
}
€€ 
return
‹‹ 
Json
‹‹ 
(
‹‹ "
modalidadesViewModel
‹‹ 0
)
‹‹0 1
;
‹‹1 2
}
›› 
catch
ﬁﬁ 
(
ﬁﬁ 
	Exception
ﬁﬁ 
e
ﬁﬁ 
)
ﬁﬁ 
{
ﬂﬂ 
throw
‡‡ 
new
‡‡ !
ControllerException
‡‡ -
(
‡‡- .
$str
‡‡. Y
,
‡‡Y Z
e
‡‡[ \
)
‡‡\ ]
;
‡‡] ^
}
·· 
}
‚‚ 	
public
ËË 
PdfDocument
ËË 
ObtenerPdfCobro
ËË *
(
ËË* +!
MovimientoEconomico
ËË+ >
cobro
ËË? D
,
ËËD E6
(EstablecimientoComercialExtendidoConLogo
ËËF n
sede
ËËo s
,
ËËs t
FormatoImpresionËËu Ö
formatoËËÜ ç
)ËËç é
{
ÈÈ 	
string
ÍÍ 
result
ÍÍ 
=
ÍÍ #
CoreHtmlStringBuilder
ÍÍ 1
.
ÍÍ1 2
ObtenerHtmlString
ÍÍ2 C
(
ÍÍC D
cobro
ÍÍD I
,
ÍÍI J
formato
ÍÍK R
,
ÍÍR S
sede
ÍÍT X
,
ÍÍX Y
this
ÍÍZ ^
)
ÍÍ^ _
;
ÍÍ_ `
var
ÎÎ 
Renderer
ÎÎ 
=
ÎÎ 
new
ÎÎ 
	SelectPdf
ÎÎ (
.
ÎÎ( )
	HtmlToPdf
ÎÎ) 2
(
ÎÎ2 3
)
ÎÎ3 4
;
ÎÎ4 5
if
ÏÏ 
(
ÏÏ 
formato
ÏÏ 
==
ÏÏ 
FormatoImpresion
ÏÏ +
.
ÏÏ+ ,
_80mm
ÏÏ, 1
)
ÏÏ1 2
{
ÌÌ 
Renderer
ÓÓ 
.
ÓÓ 
Options
ÓÓ  
.
ÓÓ  !
PdfPageSize
ÓÓ! ,
=
ÓÓ- .
	SelectPdf
ÓÓ/ 8
.
ÓÓ8 9
PdfPageSize
ÓÓ9 D
.
ÓÓD E
Custom
ÓÓE K
;
ÓÓK L
Renderer
ÔÔ 
.
ÔÔ 
Options
ÔÔ  
.
ÔÔ  !
PdfPageCustomSize
ÔÔ! 2
=
ÔÔ3 4
new
ÔÔ5 8
SizeF
ÔÔ9 >
(
ÔÔ> ?
$num
ÔÔ? A
,
ÔÔA B
$num
ÔÔC F
)
ÔÔF G
;
ÔÔG H
}
 
else
ÒÒ 
{
ÚÚ 
Renderer
ÛÛ 
.
ÛÛ 
Options
ÛÛ  
.
ÛÛ  !
PdfPageSize
ÛÛ! ,
=
ÛÛ- .
	SelectPdf
ÛÛ/ 8
.
ÛÛ8 9
PdfPageSize
ÛÛ9 D
.
ÛÛD E
A4
ÛÛE G
;
ÛÛG H
}
ÙÙ 
Renderer
ˆˆ 
.
ˆˆ 
Options
ˆˆ 
.
ˆˆ 
MarginBottom
ˆˆ )
=
ˆˆ* +
$num
ˆˆ, -
;
ˆˆ- .
Renderer
˜˜ 
.
˜˜ 
Options
˜˜ 
.
˜˜ 
	MarginTop
˜˜ &
=
˜˜' (
$num
˜˜) *
;
˜˜* +
Renderer
¯¯ 
.
¯¯ 
Options
¯¯ 
.
¯¯ 
DisplayHeader
¯¯ *
=
¯¯+ ,
false
¯¯- 2
;
¯¯2 3
Renderer
˘˘ 
.
˘˘ 
Options
˘˘ 
.
˘˘ $
JpegCompressionEnabled
˘˘ 3
=
˘˘4 5
false
˘˘6 ;
;
˘˘; <
return
˙˙ 
Renderer
˙˙ 
.
˙˙ 
ConvertHtmlString
˙˙ -
(
˙˙- .
result
˙˙. 4
)
˙˙4 5
;
˙˙5 6
}
˚˚ 	
public
˝˝ 
void
˝˝ 2
$ImprimirComprobrobantesCobrosMasivos
˝˝ 8
(
˝˝8 9
DateTime
˝˝9 A
fecha
˝˝B G
)
˝˝G H
{
˛˛ 	
List
ÄÄ 
<
ÄÄ !
MovimientoEconomico
ÄÄ $
>
ÄÄ$ %
cobros
ÄÄ& ,
=
ÄÄ- .
operacionLogica
ÄÄ/ >
.
ÄÄ> ?*
ObtenerCobrosMasivosPorFecha
ÄÄ? [
(
ÄÄ[ \
fecha
ÄÄ\ a
)
ÄÄa b
;
ÄÄb c6
(EstablecimientoComercialExtendidoConLogo
ÅÅ 4
sede
ÅÅ5 9
=
ÅÅ: ;
ObtenerSede
ÅÅ< G
(
ÅÅG H
)
ÅÅH I
;
ÅÅI J
	SelectPdf
ÇÇ 
.
ÇÇ 
PdfDocument
ÇÇ !

pdfGeneral
ÇÇ" ,
=
ÇÇ- .
new
ÇÇ/ 2
	SelectPdf
ÇÇ3 <
.
ÇÇ< =
PdfDocument
ÇÇ= H
(
ÇÇH I
)
ÇÇI J
;
ÇÇJ K
foreach
ÉÉ 
(
ÉÉ 
var
ÉÉ 
cobro
ÉÉ 
in
ÉÉ !
cobros
ÉÉ" (
)
ÉÉ( )
{
ÑÑ 
var
ÖÖ 
PDFcobro
ÖÖ 
=
ÖÖ 
ObtenerPdfCobro
ÖÖ .
(
ÖÖ. /
cobro
ÖÖ/ 4
,
ÖÖ4 5
sede
ÖÖ6 :
,
ÖÖ: ;
FormatoImpresion
ÖÖ< L
.
ÖÖL M
_80mm
ÖÖM R
)
ÖÖR S
;
ÖÖS T

pdfGeneral
ÜÜ 
.
ÜÜ 
Append
ÜÜ !
(
ÜÜ! "
PDFcobro
ÜÜ" *
)
ÜÜ* +
;
ÜÜ+ ,
}
áá 
PrintFilePDF
àà 
file
àà 
=
àà 
null
àà  $
;
àà$ %
file
ââ 
=
ââ 
new
ââ 
PrintFilePDF
ââ #
(
ââ# $

pdfGeneral
ââ$ .
.
ââ. /
Save
ââ/ 3
(
ââ3 4
)
ââ4 5
,
ââ5 6
$str
ââ7 =
)
ââ= >
;
ââ> ?
file
ää 
.
ää 
PrintRotation
ää 
=
ää  
PrintRotation
ää! .
.
ää. /
None
ää/ 3
;
ää3 4
ClientPrintJob
ãã 
cpj
ãã 
=
ãã  
new
ãã! $
ClientPrintJob
ãã% 3
(
ãã3 4
)
ãã4 5
;
ãã5 6
cpj
åå 
.
åå 
	PrintFile
åå 
=
åå 
file
åå  
;
åå  !
cpj
çç 
.
çç 
ClientPrinter
çç 
=
çç 
new
çç  #
DefaultPrinter
çç$ 2
(
çç2 3
)
çç3 4
;
çç4 5
System
éé 
.
éé 
Web
éé 
.
éé 
HttpContext
éé "
.
éé" #
Current
éé# *
.
éé* +
Response
éé+ 3
.
éé3 4
ContentType
éé4 ?
=
éé@ A
$str
ééB \
;
éé\ ]
System
èè 
.
èè 
Web
èè 
.
èè 
HttpContext
èè "
.
èè" #
Current
èè# *
.
èè* +
Response
èè+ 3
.
èè3 4
BinaryWrite
èè4 ?
(
èè? @
cpj
èè@ C
.
èèC D

GetContent
èèD N
(
èèN O
)
èèO P
)
èèP Q
;
èèQ R
System
êê 
.
êê 
Web
êê 
.
êê 
HttpContext
êê "
.
êê" #
Current
êê# *
.
êê* +
Response
êê+ 3
.
êê3 4
End
êê4 7
(
êê7 8
)
êê8 9
;
êê9 :
}
ëë 	
public
óó 

JsonResult
óó 4
&ObtenerDocumentoParaOperacionesEnVenta
óó @
(
óó@ A
long
óóA E
idOrdenDeVenta
óóF T
)
óóT U
{
òò 	
try
ôô 
{
öö +
DocumentoDeOperacionViewModel
õõ -
	respuesta
õõ. 7
=
õõ8 9
new
õõ: =+
DocumentoDeOperacionViewModel
õõ> [
(
õõ[ \
)
õõ\ ]
;
õõ] ^
OrdenDeVenta
úú 
ordenDeVenta
úú )
=
úú* +
operacionLogica
úú, ;
.
úú; <!
ObtenerOrdenDeVenta
úú< O
(
úúO P
idOrdenDeVenta
úúP ^
)
úú^ _
;
úú_ `6
(EstablecimientoComercialExtendidoConLogo
ùù 8
sede
ùù9 =
=
ùù> ?
ObtenerSede
ùù@ K
(
ùùK L
)
ùùL M
;
ùùM N
string
ûû 
	QrContent
ûû  
=
ûû! "*
facturacionElectronicaLogica
ûû# ?
.
ûû? @
	ObtenerQR
ûû@ I
(
ûûI J
ordenDeVenta
ûûJ V
,
ûûV W
sede
ûûX \
)
ûû\ ]
;
ûû] ^
byte
üü 
[
üü 
]
üü 
QrBytes
üü 
=
üü  
barCodeUtil
üü! ,
.
üü, -
ObtenerCodigoQR
üü- <
(
üü< =
	QrContent
üü= F
)
üüF G
;
üüG H
var
†† 
htmlString80
††  
=
††! "#
CoreHtmlStringBuilder
††# 8
.
††8 9
ObtenerHtmlString
††9 J
(
††J K
ordenDeVenta
††K W
,
††W X
FormatoImpresion
††Y i
.
††i j
_80mm
††j o
,
††o p
QrBytes
††q x
,
††x y
sede
††z ~
,
††~ 
this††Ä Ñ
,††Ñ Ö
maestroLogica††Ü ì
)††ì î
;††î ï
var
°° 
htmlStringA4
°°  
=
°°! "#
CoreHtmlStringBuilder
°°# 8
.
°°8 9
ObtenerHtmlString
°°9 J
(
°°J K
ordenDeVenta
°°K W
,
°°W X
FormatoImpresion
°°Y i
.
°°i j
A4
°°j l
,
°°l m
QrBytes
°°n u
,
°°u v
sede
°°w {
,
°°{ |
this°°} Å
,°°Å Ç
maestroLogica°°É ê
)°°ê ë
;°°ë í
if
¢¢ 
(
¢¢ 
ordenDeVenta
¢¢  
.
¢¢  !!
TieneGuiaDeRemision
¢¢! 4
(
¢¢4 5
)
¢¢5 6
)
¢¢6 7
{
££ 
List
§§ 
<
§§ 
string
§§ 
>
§§  +
cadenasHtmlDeGuiaDeRemision80
§§! >
=
§§? @
new
§§A D
List
§§E I
<
§§I J
string
§§J P
>
§§P Q
(
§§Q R
)
§§R S
;
§§S T
List
•• 
<
•• 
string
•• 
>
••  +
cadenasHtmlDeGuiaDeRemisionA4
••! >
=
••? @
new
••A D
List
••E I
<
••I J
string
••J P
>
••P Q
(
••Q R
)
••R S
;
••S T
var
¶¶ 
proveedores
¶¶ #
=
¶¶$ % 
actorNegocioLogica
¶¶& 8
.
¶¶8 9(
ObtenerProveedoresVigentes
¶¶9 S
(
¶¶S T
)
¶¶T U
;
¶¶U V
var
ßß %
modalidadesDeTransporte
ßß /
=
ßß0 1
maestroLogica
ßß2 ?
.
ßß? @(
ObtenerModalidadesTraslado
ßß@ Z
(
ßßZ [
)
ßß[ \
;
ßß\ ]
var
®® !
motivosDeTransporte
®® +
=
®®, -
maestroLogica
®®. ;
.
®®; <$
ObtenerMotivosTraslado
®®< R
(
®®R S
)
®®S T
;
®®T U
var
©©  
salidaDeMercaderia
©© *
=
©©+ ,
operacionLogica
©©- <
.
©©< =.
 ObtenerSalidaDeMercaderiaDeVenta
©©= ]
(
©©] ^
ordenDeVenta
©©^ j
.
©©j k
IdVenta
©©k r
)
©©r s
;
©©s t
foreach
™™ 
(
™™ 
var
™™  
salida
™™! '
in
™™( * 
salidaDeMercaderia
™™+ =
)
™™= >
{
´´ 
byte
¨¨ 
[
¨¨ 
]
¨¨ 
byteQr
¨¨ %
=
¨¨& '
barCodeUtil
¨¨( 3
.
¨¨3 4
ObtenerCodigoQR
¨¨4 C
(
¨¨C D
salida
¨¨D J
.
¨¨J K
UrlDocumentoSunat
¨¨K \
)
¨¨\ ]
;
¨¨] ^+
cadenasHtmlDeGuiaDeRemision80
≠≠ 5
.
≠≠5 6
Add
≠≠6 9
(
≠≠9 :#
CoreHtmlStringBuilder
≠≠: O
.
≠≠O P
ObtenerHtmlString
≠≠P a
(
≠≠a b
salida
≠≠b h
,
≠≠h i
FormatoImpresion
≠≠j z
.
≠≠z {
_80mm≠≠{ Ä
,≠≠Ä Å
byteQr≠≠Ç à
,≠≠à â
sede≠≠ä é
,≠≠é è
proveedores≠≠ê õ
,≠≠õ ú'
modalidadesDeTransporte≠≠ù ¥
,≠≠¥ µ#
motivosDeTransporte≠≠∂ …
,≠≠…  
this≠≠À œ
)≠≠œ –
)≠≠– —
;≠≠— “+
cadenasHtmlDeGuiaDeRemisionA4
ÆÆ 5
.
ÆÆ5 6
Add
ÆÆ6 9
(
ÆÆ9 :#
CoreHtmlStringBuilder
ÆÆ: O
.
ÆÆO P
ObtenerHtmlString
ÆÆP a
(
ÆÆa b
salida
ÆÆb h
,
ÆÆh i
FormatoImpresion
ÆÆj z
.
ÆÆz {
A4
ÆÆ{ }
,
ÆÆ} ~
byteQrÆÆ Ö
,ÆÆÖ Ü
sedeÆÆá ã
,ÆÆã å
proveedoresÆÆç ò
,ÆÆò ô'
modalidadesDeTransporteÆÆö ±
,ÆÆ± ≤#
motivosDeTransporteÆÆ≥ ∆
,ÆÆ∆ «
thisÆÆ» Ã
)ÆÆÃ Õ
)ÆÆÕ Œ
;ÆÆŒ œ
}
ØØ 
	respuesta
∞∞ 
=
∞∞ 
new
∞∞  #+
DocumentoDeOperacionViewModel
∞∞$ A
(
∞∞A B
ordenDeVenta
∞∞B N
,
∞∞N O
htmlString80
∞∞P \
,
∞∞\ ]
htmlStringA4
∞∞^ j
,
∞∞j k
ordenDeVenta
∞∞l x
.
∞∞x y"
TieneGuiaDeRemision∞∞y å
(∞∞å ç
)∞∞ç é
,∞∞é è-
cadenasHtmlDeGuiaDeRemision80∞∞ê ≠
,∞∞≠ Æ-
cadenasHtmlDeGuiaDeRemisionA4∞∞Ø Ã
,∞∞Ã Õ
	Encriptar∞∞Œ ◊
(∞∞◊ ÿ
ordenDeVenta∞∞ÿ ‰
.∞∞‰ Â
Id∞∞Â Á
.∞∞Á Ë
ToString∞∞Ë 
(∞∞ Ò
)∞∞Ò Ú
)∞∞Ú Û
)∞∞Û Ù
;∞∞Ù ı
}
±± 
else
≤≤ 
{
≥≥ 
	respuesta
¥¥ 
=
¥¥ 
new
¥¥  #+
DocumentoDeOperacionViewModel
¥¥$ A
(
¥¥A B
ordenDeVenta
¥¥B N
,
¥¥N O
htmlString80
¥¥P \
,
¥¥\ ]
htmlStringA4
¥¥^ j
,
¥¥j k
false
¥¥l q
,
¥¥q r
null
¥¥s w
,
¥¥w x
null
¥¥y }
,
¥¥} ~
	Encriptar¥¥ à
(¥¥à â
ordenDeVenta¥¥â ï
.¥¥ï ñ
Id¥¥ñ ò
.¥¥ò ô
ToString¥¥ô °
(¥¥° ¢
)¥¥¢ £
)¥¥£ §
)¥¥§ •
;¥¥• ¶
}
µµ 
return
∂∂ 
Json
∂∂ 
(
∂∂ 
	respuesta
∂∂ %
)
∂∂% &
;
∂∂& '
}
∑∑ 
catch
∏∏ 
(
∏∏ 
	Exception
∏∏ 
e
∏∏ 
)
∏∏ 
{
ππ 
HttpContext
∫∫ 
.
∫∫ 
Response
∫∫ $
.
∫∫$ %

StatusCode
∫∫% /
=
∫∫0 1
$num
∫∫2 5
;
∫∫5 6
return
ªª 
Json
ªª 
(
ªª 
Util
ªª  
.
ªª  !
	ErrorJson
ªª! *
(
ªª* +
e
ªª+ ,
)
ªª, -
)
ªª- .
;
ªª. /
}
ºº 
}
ΩΩ 	
public
øø 

JsonResult
øø (
ObtenerFormatosDeImpresion
øø 4
(
øø4 5
)
øø5 6
{
¿¿ 	
var
¡¡ 
valoresEnum
¡¡ 
=
¡¡ 
Enum
¡¡ "
.
¡¡" #
	GetValues
¡¡# ,
(
¡¡, -
typeof
¡¡- 3
(
¡¡3 4
FormatoImpresion
¡¡4 D
)
¡¡D E
)
¡¡E F
;
¡¡F G
List
¬¬ 
<
¬¬ $
ComboGenericoViewModel
¬¬ '
>
¬¬' (
formatos
¬¬) 1
=
¬¬2 3
new
¬¬4 7
List
¬¬8 <
<
¬¬< =$
ComboGenericoViewModel
¬¬= S
>
¬¬S T
(
¬¬T U
)
¬¬U V
;
¬¬V W
foreach
√√ 
(
√√ 
var
√√ 
item
√√ 
in
√√  
valoresEnum
√√! ,
)
√√, -
{
ƒƒ 
if
≈≈ 
(
≈≈ 
(
≈≈ 
int
≈≈ 
)
≈≈ 
item
≈≈ 
!=
≈≈  
(
≈≈! "
int
≈≈" %
)
≈≈% &
FormatoImpresion
≈≈& 6
.
≈≈6 7
_56mm
≈≈7 <
)
≈≈< =
formatos
∆∆ 
.
∆∆ 
Add
∆∆  
(
∆∆  !
new
∆∆! $$
ComboGenericoViewModel
∆∆% ;
(
∆∆; <
(
∆∆< =
int
∆∆= @
)
∆∆@ A
item
∆∆A E
,
∆∆E F
(
∆∆G H
(
∆∆H I
FormatoImpresion
∆∆I Y
)
∆∆Y Z
Convert
∆∆Z a
.
∆∆a b
ToInt32
∆∆b i
(
∆∆i j
item
∆∆j n
)
∆∆n o
)
∆∆o p
.
∆∆p q
ToString
∆∆q y
(
∆∆y z
)
∆∆z {
)
∆∆{ |
)
∆∆| }
;
∆∆} ~
}
«« 
return
»» 
Json
»» 
(
»» 
formatos
»»  
)
»»  !
;
»»! "
}
…… 	
public
ÀÀ 

JsonResult
ÀÀ 0
"ObtenerFormatosDeImpresionSolo80mm
ÀÀ <
(
ÀÀ< =
)
ÀÀ= >
{
ÃÃ 	
var
ÕÕ 
valoresEnum
ÕÕ 
=
ÕÕ 
Enum
ÕÕ "
.
ÕÕ" #
	GetValues
ÕÕ# ,
(
ÕÕ, -
typeof
ÕÕ- 3
(
ÕÕ3 4
FormatoImpresion
ÕÕ4 D
)
ÕÕD E
)
ÕÕE F
;
ÕÕF G
List
ŒŒ 
<
ŒŒ $
ComboGenericoViewModel
ŒŒ '
>
ŒŒ' (
formatos
ŒŒ) 1
=
ŒŒ2 3
new
ŒŒ4 7
List
ŒŒ8 <
<
ŒŒ< =$
ComboGenericoViewModel
ŒŒ= S
>
ŒŒS T
(
ŒŒT U
)
ŒŒU V
;
ŒŒV W
foreach
œœ 
(
œœ 
var
œœ 
item
œœ 
in
œœ  
valoresEnum
œœ! ,
)
œœ, -
{
–– 
if
—— 
(
—— 
(
—— 
int
—— 
)
—— 
item
—— 
==
——  
(
——! "
int
——" %
)
——% &
FormatoImpresion
——& 6
.
——6 7
_80mm
——7 <
)
——< =
formatos
““ 
.
““ 
Add
““  
(
““  !
new
““! $$
ComboGenericoViewModel
““% ;
(
““; <
(
““< =
int
““= @
)
““@ A
item
““A E
,
““E F
(
““G H
(
““H I
FormatoImpresion
““I Y
)
““Y Z
Convert
““Z a
.
““a b
ToInt32
““b i
(
““i j
item
““j n
)
““n o
)
““o p
.
““p q
ToString
““q y
(
““y z
)
““z {
)
““{ |
)
““| }
;
““} ~
}
”” 
return
‘‘ 
Json
‘‘ 
(
‘‘ 
formatos
‘‘  
)
‘‘  !
;
‘‘! "
}
’’ 	
public
÷÷ 

JsonResult
÷÷ 
ObtenerHtmlVenta
÷÷ *
(
÷÷* +
long
÷÷+ /
idOrdenDeVenta
÷÷0 >
,
÷÷> ?
int
÷÷@ C
formato
÷÷D K
)
÷÷K L
{
◊◊ 	
OrdenDeVenta
ÿÿ 
ordenDeVenta
ÿÿ %
=
ÿÿ& '
operacionLogica
ÿÿ( 7
.
ÿÿ7 8!
ObtenerOrdenDeVenta
ÿÿ8 K
(
ÿÿK L
idOrdenDeVenta
ÿÿL Z
)
ÿÿZ [
;
ÿÿ[ \6
(EstablecimientoComercialExtendidoConLogo
ŸŸ 4
sede
ŸŸ5 9
=
ŸŸ: ;
ObtenerSede
ŸŸ< G
(
ŸŸG H
)
ŸŸH I
;
ŸŸI J
string
⁄⁄ 
	QrContent
⁄⁄ 
=
⁄⁄ *
facturacionElectronicaLogica
⁄⁄ ;
.
⁄⁄; <
	ObtenerQR
⁄⁄< E
(
⁄⁄E F
ordenDeVenta
⁄⁄F R
,
⁄⁄R S
sede
⁄⁄T X
)
⁄⁄X Y
;
⁄⁄Y Z
byte
€€ 
[
€€ 
]
€€ 
QrBytes
€€ 
=
€€ 
barCodeUtil
€€ (
.
€€( )
ObtenerCodigoQR
€€) 8
(
€€8 9
	QrContent
€€9 B
)
€€B C
;
€€C D
var
‹‹ 

htmlString
‹‹ 
=
‹‹ #
CoreHtmlStringBuilder
‹‹ 2
.
‹‹2 3
ObtenerHtmlString
‹‹3 D
(
‹‹D E
ordenDeVenta
‹‹E Q
,
‹‹Q R
(
‹‹S T
FormatoImpresion
‹‹T d
)
‹‹d e
formato
‹‹e l
,
‹‹l m
QrBytes
‹‹n u
,
‹‹u v
sede
‹‹w {
,
‹‹{ |
this‹‹} Å
,‹‹Å Ç
maestroLogica‹‹É ê
)‹‹ê ë
;‹‹ë í
return
›› 
Json
›› 
(
›› 

htmlString
›› "
)
››" #
;
››# $
}
ﬁﬁ 	
public
‡‡ 

JsonResult
‡‡ -
ObtenerHtmlVentaYGuiaDeRemision
‡‡ 9
(
‡‡9 :
long
‡‡: >
idOrdenDeVenta
‡‡? M
,
‡‡M N
int
‡‡O R
formato
‡‡S Z
)
‡‡Z [
{
·· 	#
CadenasHtmlVentaYGuia
‚‚ !
	respuesta
‚‚" +
=
‚‚, -
new
‚‚. 1#
CadenasHtmlVentaYGuia
‚‚2 G
(
‚‚G H
)
‚‚H I
;
‚‚I J
OrdenDeVenta
‰‰ 
ordenDeVenta
‰‰ %
=
‰‰& '
operacionLogica
‰‰( 7
.
‰‰7 8!
ObtenerOrdenDeVenta
‰‰8 K
(
‰‰K L
idOrdenDeVenta
‰‰L Z
)
‰‰Z [
;
‰‰[ \6
(EstablecimientoComercialExtendidoConLogo
ÂÂ 4
sede
ÂÂ5 9
=
ÂÂ: ;
ObtenerSede
ÂÂ< G
(
ÂÂG H
)
ÂÂH I
;
ÂÂI J
string
ÊÊ 
	QrContent
ÊÊ 
=
ÊÊ *
facturacionElectronicaLogica
ÊÊ ;
.
ÊÊ; <
	ObtenerQR
ÊÊ< E
(
ÊÊE F
ordenDeVenta
ÊÊF R
,
ÊÊR S
sede
ÊÊT X
)
ÊÊX Y
;
ÊÊY Z
byte
ÁÁ 
[
ÁÁ 
]
ÁÁ 
QrBytes
ÁÁ 
=
ÁÁ 
barCodeUtil
ÁÁ (
.
ÁÁ( )
ObtenerCodigoQR
ÁÁ) 8
(
ÁÁ8 9
	QrContent
ÁÁ9 B
)
ÁÁB C
;
ÁÁC D
var
ËË 
cadenaHtmlVenta
ËË 
=
ËË  !#
CoreHtmlStringBuilder
ËË" 7
.
ËË7 8
ObtenerHtmlString
ËË8 I
(
ËËI J
ordenDeVenta
ËËJ V
,
ËËV W
(
ËËX Y
FormatoImpresion
ËËY i
)
ËËi j
formato
ËËj q
,
ËËq r
QrBytes
ËËs z
,
ËËz {
sedeËË| Ä
,ËËÄ Å
thisËËÇ Ü
,ËËÜ á
maestroLogicaËËà ï
)ËËï ñ
;ËËñ ó
List
ÍÍ 
<
ÍÍ 
string
ÍÍ 
>
ÍÍ )
cadenasHtmlDeGuiaDeRemision
ÍÍ 4
=
ÍÍ5 6
new
ÍÍ7 :
List
ÍÍ; ?
<
ÍÍ? @
string
ÍÍ@ F
>
ÍÍF G
(
ÍÍG H
)
ÍÍH I
;
ÍÍI J
var
ÎÎ 
proveedores
ÎÎ 
=
ÎÎ  
actorNegocioLogica
ÎÎ 0
.
ÎÎ0 1(
ObtenerProveedoresVigentes
ÎÎ1 K
(
ÎÎK L
)
ÎÎL M
;
ÎÎM N
var
ÏÏ %
modalidadesDeTransporte
ÏÏ '
=
ÏÏ( )
maestroLogica
ÏÏ* 7
.
ÏÏ7 8(
ObtenerModalidadesTraslado
ÏÏ8 R
(
ÏÏR S
)
ÏÏS T
;
ÏÏT U
var
ÌÌ !
motivosDeTransporte
ÌÌ #
=
ÌÌ$ %
maestroLogica
ÌÌ& 3
.
ÌÌ3 4$
ObtenerMotivosTraslado
ÌÌ4 J
(
ÌÌJ K
)
ÌÌK L
;
ÌÌL M
var
ÓÓ  
salidaDeMercaderia
ÓÓ "
=
ÓÓ# $
operacionLogica
ÓÓ% 4
.
ÓÓ4 5.
 ObtenerSalidaDeMercaderiaDeVenta
ÓÓ5 U
(
ÓÓU V
ordenDeVenta
ÓÓV b
.
ÓÓb c
IdVenta
ÓÓc j
)
ÓÓj k
;
ÓÓk l
foreach
ÔÔ 
(
ÔÔ 
var
ÔÔ 
salida
ÔÔ 
in
ÔÔ  " 
salidaDeMercaderia
ÔÔ# 5
)
ÔÔ5 6
{
 
byte
ÒÒ 
[
ÒÒ 
]
ÒÒ 
byteQr
ÒÒ 
=
ÒÒ 
barCodeUtil
ÒÒ  +
.
ÒÒ+ ,
ObtenerCodigoQR
ÒÒ, ;
(
ÒÒ; <
salida
ÒÒ< B
.
ÒÒB C
Informacion
ÒÒC N
)
ÒÒN O
;
ÒÒO P)
cadenasHtmlDeGuiaDeRemision
ÚÚ +
.
ÚÚ+ ,
Add
ÚÚ, /
(
ÚÚ/ 0#
CoreHtmlStringBuilder
ÚÚ0 E
.
ÚÚE F
ObtenerHtmlString
ÚÚF W
(
ÚÚW X
salida
ÚÚX ^
,
ÚÚ^ _
(
ÚÚ` a
FormatoImpresion
ÚÚa q
)
ÚÚq r
formato
ÚÚr y
,
ÚÚy z
byteQrÚÚ{ Å
,ÚÚÅ Ç
sedeÚÚÉ á
,ÚÚá à
proveedoresÚÚâ î
,ÚÚî ï'
modalidadesDeTransporteÚÚñ ≠
,ÚÚ≠ Æ#
motivosDeTransporteÚÚØ ¬
,ÚÚ¬ √
thisÚÚƒ »
)ÚÚ» …
)ÚÚ…  
;ÚÚ  À
}
ÛÛ 
	respuesta
ÙÙ 
=
ÙÙ 
new
ÙÙ #
CadenasHtmlVentaYGuia
ÙÙ 1
(
ÙÙ1 2
cadenaHtmlVenta
ÙÙ2 A
,
ÙÙA B)
cadenasHtmlDeGuiaDeRemision
ÙÙC ^
)
ÙÙ^ _
;
ÙÙ_ `
return
ˆˆ 
Json
ˆˆ 
(
ˆˆ 
	respuesta
ˆˆ !
)
ˆˆ! "
;
ˆˆ" #
}
˜˜ 	
public
˘˘ 

JsonResult
˘˘ 1
#EnviarCorreoElectronicoConDocumento
˘˘ =
(
˘˘= >
long
˘˘> B
idOrdenDeVenta
˘˘C Q
,
˘˘Q R
int
˘˘S V
formato
˘˘W ^
,
˘˘^ _
List
˘˘` d
<
˘˘d e
string
˘˘e k
>
˘˘k l"
correosElectronicos˘˘m Ä
)˘˘Ä Å
{
˙˙ 	
try
˚˚ 
{
¸¸ 6
(EstablecimientoComercialExtendidoConLogo
˝˝ 8
sede
˝˝9 =
=
˝˝> ?
ObtenerSede
˝˝@ K
(
˝˝K L
)
˝˝L M
;
˝˝M N
OrdenDeVenta
˛˛ 
ordenDeVenta
˛˛ )
=
˛˛* +
operacionLogica
˛˛, ;
.
˛˛; <!
ObtenerOrdenDeVenta
˛˛< O
(
˛˛O P
idOrdenDeVenta
˛˛P ^
)
˛˛^ _
;
˛˛_ `
string
ˇˇ 
	QrContent
ˇˇ  
=
ˇˇ! "*
facturacionElectronicaLogica
ˇˇ# ?
.
ˇˇ? @
	ObtenerQR
ˇˇ@ I
(
ˇˇI J
ordenDeVenta
ˇˇJ V
,
ˇˇV W
sede
ˇˇX \
)
ˇˇ\ ]
;
ˇˇ] ^
byte
ÄÄ 
[
ÄÄ 
]
ÄÄ 
QrBytes
ÄÄ 
=
ÄÄ  
barCodeUtil
ÄÄ! ,
.
ÄÄ, -
ObtenerCodigoQR
ÄÄ- <
(
ÄÄ< =
	QrContent
ÄÄ= F
)
ÄÄF G
;
ÄÄG H
List
ÅÅ 
<
ÅÅ 
LinkedResource
ÅÅ #
>
ÅÅ# $
	resources
ÅÅ% .
=
ÅÅ/ 0
new
ÅÅ1 4
List
ÅÅ5 9
<
ÅÅ9 :
LinkedResource
ÅÅ: H
>
ÅÅH I
(
ÅÅI J
)
ÅÅJ K
;
ÅÅK L
PdfDocument
ÇÇ 
pdfVenta
ÇÇ $
=
ÇÇ% &
ObtenerPdfVenta
ÇÇ' 6
(
ÇÇ6 7
ordenDeVenta
ÇÇ7 C
,
ÇÇC D
sede
ÇÇE I
,
ÇÇI J
QrBytes
ÇÇK R
,
ÇÇR S
(
ÇÇT U
FormatoImpresion
ÇÇU e
)
ÇÇe f
formato
ÇÇf m
)
ÇÇm n
;
ÇÇn o
string
ÑÑ 
asunto
ÑÑ 
=
ÑÑ 
operacionLogica
ÑÑ  /
.
ÑÑ/ 0.
 ObtenerAsuntoDeCorreoElectronico
ÑÑ0 P
(
ÑÑP Q
sede
ÑÑQ U
,
ÑÑU V
ordenDeVenta
ÑÑW c
)
ÑÑc d
;
ÑÑd e
string
ÜÜ 
cuerpo
ÜÜ 
=
ÜÜ 
operacionLogica
ÜÜ  /
.
ÜÜ/ 0.
 ObtenerCuerpoDeCorreoElectronico
ÜÜ0 P
(
ÜÜP Q
sede
ÜÜQ U
,
ÜÜU V
ordenDeVenta
ÜÜW c
,
ÜÜc d
Request
ÜÜe l
.
ÜÜl m
MapPath
ÜÜm t
(
ÜÜt u
Request
ÜÜu |
.
ÜÜ| }
ApplicationPathÜÜ} å
)ÜÜå ç
,ÜÜç é
	resourcesÜÜè ò
)ÜÜò ô
;ÜÜô ö
var
áá  
documentosAdjuntos
áá &
=
áá' (
new
áá) ,
List
áá- 1
<
áá1 2

Attachment
áá2 <
>
áá< =
(
áá= >
)
áá> ?
{
áá@ A
new
ááB E

Attachment
ááF P
(
ááP Q
new
ááQ T
MemoryStream
ááU a
(
ááa b
pdfVenta
ááb j
.
ááj k
Save
áák o
(
ááo p
)
ááp q
)
ááq r
,
áár s
ordenDeVentaáát Ä
.ááÄ Å
ComprobanteááÅ å
(ááå ç
)ááç é
.ááé è
NumeroDeSerieááè ú
+ááù û
$strááü §
+áá• ¶
ordenDeVentaááß ≥
.áá≥ ¥
Comprobanteáá¥ ø
(ááø ¿
)áá¿ ¡
.áá¡ ¬#
NumeroDeComprobanteáá¬ ’
+áá÷ ◊
$strááÿ ›
+ááﬁ ﬂ
ordenDeVentaáá‡ Ï
.ááÏ Ì
ClienteááÌ Ù
(ááÙ ı
)ááı ˆ
.ááˆ ˜
RazonSocialáá˜ Ç
+ááÉ Ñ
$strááÖ ã
,ááã å
$strááç û
)ááû ü
}áá† °
;áá° ¢
if
àà 
(
àà 
ordenDeVenta
àà  
.
àà  !
IdTipoComprobante
àà! 2
!=
àà3 5
MaestroSettings
àà6 E
.
ààE F
Default
ààF M
.
ààM N9
+IdDetalleMaestroComprobanteNotaVentaInterna
ààN y
)
àày z
{
ââ 
DocumentoXml
ää  
documentoXml
ää! -
=
ää. /

XmlBuilder
ää0 :
.
ää: ;#
ObtenerXmlComprobante
ää; P
(
ääP Q
ordenDeVenta
ääQ ]
,
ää] ^
sede
ää_ c
,
ääc d
maestroLogica
ääe r
,
äär s'
generacionArchivosLogicaäät å
,ääå ç,
facturacionElectronicaLogicaääé ™
)ää™ ´
;ää´ ¨ 
documentosAdjuntos
ãã &
.
ãã& '
Add
ãã' *
(
ãã* +
new
ãã+ .

Attachment
ãã/ 9
(
ãã9 :
new
ãã: =
MemoryStream
ãã> J
(
ããJ K
documentoXml
ããK W
.
ããW X
	Documento
ããX a
)
ããa b
,
ããb c
documentoXml
ããd p
.
ããp q
NombreDocumentoããq Ä
+ããÅ Ç
$strããÉ â
,ããâ ä
$strããã ú
)ããú ù
)ããù û
;ããû ü
}
åå 
OperationResult
çç 
result
çç  &
=
çç' (
mailer
çç) /
.
çç/ 0
Send
çç0 4
(
çç4 5
asunto
çç5 ;
,
çç; <
cuerpo
çç= C
,
ççC D!
correosElectronicos
ççE X
,
ççX Y 
AplicacionSettings
ççZ l
.
ççl m
Default
ççm t
.
ççt u
ToMailDefaultççu Ç
,ççÇ É"
documentosAdjuntosççÑ ñ
,ççñ ó
	resourcesççò °
)çç° ¢
;çç¢ £
return
éé 
Json
éé 
(
éé 
new
éé 
{
éé  !
result
éé" (
.
éé( )
code_result
éé) 4
,
éé4 5
data
éé6 :
=
éé; <
result
éé= C
.
ééC D
information
ééD O
,
ééO P 
result_description
ééQ c
=
ééd e
result
ééf l
.
éél m
title
éém r
}
éés t
)
éét u
;
ééu v
}
èè 
catch
êê 
(
êê 
	Exception
êê 
e
êê 
)
êê 
{
ëë 
return
íí 
new
íí "
JsonHttpStatusResult
íí /
(
íí/ 0
Util
íí0 4
.
íí4 5
	ErrorJson
íí5 >
(
íí> ?
e
íí? @
)
íí@ A
,
ííA B
HttpStatusCode
ííC Q
.
ííQ R!
InternalServerError
ííR e
)
ííe f
;
ííf g
}
ìì 
}
ïï 	
public
óó 
ActionResult
óó  
DescargarDocumento
óó .
(
óó. /
long
óó/ 3
idOrdenDeVenta
óó4 B
,
óóB C
int
óóD G
formato
óóH O
)
óóO P
{
òò 	
try
ôô 
{
öö 
OrdenDeVenta
úú 
ordenDeVenta
úú )
=
úú* +
operacionLogica
úú, ;
.
úú; <!
ObtenerOrdenDeVenta
úú< O
(
úúO P
idOrdenDeVenta
úúP ^
)
úú^ _
;
úú_ `
return
ùù 
ObtenerDocumento
ùù '
(
ùù' (
ordenDeVenta
ùù( 4
,
ùù4 5
(
ùù6 7
int
ùù7 :
)
ùù: ;
formato
ùù; B
,
ùùB C
ObtenerSede
ùùD O
(
ùùO P
)
ùùP Q
)
ùùQ R
;
ùùR S
}
ûû 
catch
üü 
(
üü 
	Exception
üü 
e
üü 
)
üü 
{
†† 
return
°° 
new
°° "
JsonHttpStatusResult
°° /
(
°°/ 0
Util
°°0 4
.
°°4 5
	ErrorJson
°°5 >
(
°°> ?
new
°°? B
	Exception
°°C L
(
°°L M
$str
°°M w
,
°°w x
e
°°y z
)
°°z {
)
°°{ |
,
°°| }
HttpStatusCode°°~ å
.°°å ç#
InternalServerError°°ç †
)°°† °
;°°° ¢
}
¢¢ 
}
££ 	
public
¶¶ 
ActionResult
¶¶ 3
%DescargarDocumentoConsultaComprobante
¶¶ A
(
¶¶A B
string
¶¶B H
Comprobante
¶¶I T
,
¶¶T U
string
¶¶V \
Serie
¶¶] b
,
¶¶b c
string
¶¶d j
Numero
¶¶k q
,
¶¶q r
DateTime
¶¶s {
FechaEmision¶¶| à
,¶¶à â
decimal¶¶ä ë
Importe¶¶í ô
)¶¶ô ö
{
ßß 	
try
®® 
{
©© *
ConsultaComprobanteParameter
™™ ,!
consultaComprobante
™™- @
=
™™A B
new
™™C F*
ConsultaComprobanteParameter
™™G c
{
™™d e
Comprobante
´´ 
=
´´ 
Comprobante
´´ (
,
´´( )
FechaEmision
¨¨ 
=
¨¨ 
FechaEmision
¨¨ *
,
¨¨* +
Importe
≠≠ 
=
≠≠ 
Importe
≠≠  
,
≠≠  !
Numero
ÆÆ 
=
ÆÆ 
Numero
ÆÆ 
,
ÆÆ 
Serie
ØØ 
=
ØØ 
Serie
ØØ 
,
ØØ 
}
∞∞ 
;
∞∞ 
var
±± 
formato
±± 
=
±± 
FormatoImpresion
±± .
.
±±. /
A4
±±/ 1
;
±±1 2
OrdenDeVenta
≤≤ 
ordenDeVenta
≤≤ )
=
≤≤* +
operacionLogica
≤≤, ;
.
≤≤; <4
&ObtenerOrdenDeVentaConsultaComprobante
≤≤< b
(
≤≤b c!
consultaComprobante
≤≤c v
)
≤≤v w
;
≤≤w x6
(EstablecimientoComercialExtendidoConLogo
≥≥ 8
sede
≥≥9 =
=
≥≥> ?

sedeLogica
≥≥@ J
.
≥≥J K 
ObtenerSedeConLogo
≥≥K ]
(
≥≥] ^
)
≥≥^ _
;
≥≥_ `
return
¥¥ 
ObtenerDocumento
¥¥ '
(
¥¥' (
ordenDeVenta
¥¥( 4
,
¥¥4 5
(
¥¥6 7
int
¥¥7 :
)
¥¥: ;
formato
¥¥; B
,
¥¥B C
sede
¥¥D H
)
¥¥H I
;
¥¥I J
}
µµ 
catch
∂∂ 
(
∂∂ 
	Exception
∂∂ 
e
∂∂ 
)
∂∂ 
{
∑∑ 
return
∏∏ 
new
∏∏ "
JsonHttpStatusResult
∏∏ /
(
∏∏/ 0
Util
∏∏0 4
.
∏∏4 5
	ErrorJson
∏∏5 >
(
∏∏> ?
new
∏∏? B
	Exception
∏∏C L
(
∏∏L M
$str
∏∏M w
,
∏∏w x
e
∏∏y z
)
∏∏z {
)
∏∏{ |
,
∏∏| }
HttpStatusCode∏∏~ å
.∏∏å ç#
InternalServerError∏∏ç †
)∏∏† °
;∏∏° ¢
}
ππ 
}
ºº 	
public
øø 
ActionResult
øø 
ObtenerDocumento
øø ,
(
øø, -
OrdenDeVenta
øø- 9
ordenDeVenta
øø: F
,
øøF G
int
øøH K
formato
øøL S
,
øøS T6
(EstablecimientoComercialExtendidoConLogo
øøU }
sedeøø~ Ç
)øøÇ É
{
¿¿ 	
try
¡¡ 
{
¬¬ 
string
√√ 
qrString
√√ 
=
√√  !*
facturacionElectronicaLogica
√√" >
.
√√> ?
	ObtenerQR
√√? H
(
√√H I
ordenDeVenta
√√I U
,
√√U V
sede
√√W [
)
√√[ \
;
√√\ ]
byte
ƒƒ 
[
ƒƒ 
]
ƒƒ 
qrBytes
ƒƒ 
=
ƒƒ  
barCodeUtil
ƒƒ! ,
.
ƒƒ, -
ObtenerCodigoQR
ƒƒ- <
(
ƒƒ< =
qrString
ƒƒ= E
)
ƒƒE F
;
ƒƒF G
var
≈≈ 
pdfVenta
≈≈ 
=
≈≈ 
ObtenerPdfVenta
≈≈ .
(
≈≈. /
ordenDeVenta
≈≈/ ;
,
≈≈; <
sede
≈≈= A
,
≈≈A B
qrBytes
≈≈C J
,
≈≈J K
(
≈≈L M
FormatoImpresion
≈≈M ]
)
≈≈] ^
formato
≈≈^ e
)
≈≈e f
;
≈≈f g
string
«« 
fileNameZip
«« "
=
««# $
ordenDeVenta
««% 1
.
««1 2
Comprobante
««2 =
(
««= >
)
««> ?
.
««? @
NumeroDeSerie
««@ M
+
««N O
$str
««P U
+
««V W
ordenDeVenta
««X d
.
««d e
Comprobante
««e p
(
««p q
)
««q r
.
««r s"
NumeroDeComprobante««s Ü
+««á à
$str««â é
+««è ê
ordenDeVenta««ë ù
.««ù û
Cliente««û •
(««• ¶
)««¶ ß
.««ß ®
RazonSocial««® ≥
+««¥ µ
$str««∂ º
;««º Ω
byte
»» 
[
»» 
]
»» 
	fileBytes
»»  
=
»»! "
null
»»# '
;
»»' (
byte
…… 
[
…… 
]
…… 
compressedBytes
…… &
;
……& '
using
   
(
   
var
   
	outStream
   $
=
  % &
new
  ' *
MemoryStream
  + 7
(
  7 8
)
  8 9
)
  9 :
{
ÀÀ 
using
ÃÃ 
(
ÃÃ 
var
ÃÃ 
archive
ÃÃ &
=
ÃÃ' (
new
ÃÃ) ,

ZipArchive
ÃÃ- 7
(
ÃÃ7 8
	outStream
ÃÃ8 A
,
ÃÃA B
ZipArchiveMode
ÃÃC Q
.
ÃÃQ R
Create
ÃÃR X
,
ÃÃX Y
true
ÃÃZ ^
)
ÃÃ^ _
)
ÃÃ_ `
{
ÕÕ 
ZipArchiveEntry
ŒŒ '
fileInArchive
ŒŒ( 5
=
ŒŒ6 7
null
ŒŒ8 <
;
ŒŒ< =
fileInArchive
œœ %
=
œœ& '
archive
œœ( /
.
œœ/ 0
CreateEntry
œœ0 ;
(
œœ; <
ordenDeVenta
œœ< H
.
œœH I
Comprobante
œœI T
(
œœT U
)
œœU V
.
œœV W
NumeroDeSerie
œœW d
+
œœe f
$str
œœg l
+
œœm n
ordenDeVenta
œœo {
.
œœ{ |
Comprobanteœœ| á
(œœá à
)œœà â
.œœâ ä#
NumeroDeComprobanteœœä ù
+œœû ü
$strœœ† •
+œœ¶ ß
ordenDeVentaœœ® ¥
.œœ¥ µ
Clienteœœµ º
(œœº Ω
)œœΩ æ
.œœæ ø
RazonSocialœœø  
+œœÀ Ã
$strœœÕ ”
,œœ” ‘ 
CompressionLevelœœ’ Â
.œœÂ Ê
OptimalœœÊ Ì
)œœÌ Ó
;œœÓ Ô
	fileBytes
–– !
=
––" #
pdfVenta
––$ ,
.
––, -
Save
––- 1
(
––1 2
)
––2 3
;
––3 4
using
—— 
(
—— 
var
—— "
entryStream
——# .
=
——/ 0
fileInArchive
——1 >
.
——> ?
Open
——? C
(
——C D
)
——D E
)
——E F
using
““ 
(
““ 
var
““ ""
fileToCompressStream
““# 7
=
““8 9
new
““: =
MemoryStream
““> J
(
““J K
	fileBytes
““K T
)
““T U
)
““U V
{
”” "
fileToCompressStream
‘‘ 0
.
‘‘0 1
CopyTo
‘‘1 7
(
‘‘7 8
entryStream
‘‘8 C
)
‘‘C D
;
‘‘D E"
fileToCompressStream
’’ 0
.
’’0 1
Close
’’1 6
(
’’6 7
)
’’7 8
;
’’8 9
}
÷÷ 
if
◊◊ 
(
◊◊ 
ordenDeVenta
◊◊ (
.
◊◊( )
IdTipoComprobante
◊◊) :
!=
◊◊; =
MaestroSettings
◊◊> M
.
◊◊M N
Default
◊◊N U
.
◊◊U V:
+IdDetalleMaestroComprobanteNotaVentaInterna◊◊V Å
)◊◊Å Ç
{
ÿÿ 
fileInArchive
ŸŸ )
=
ŸŸ* +
archive
ŸŸ, 3
.
ŸŸ3 4
CreateEntry
ŸŸ4 ?
(
ŸŸ? @
ordenDeVenta
ŸŸ@ L
.
ŸŸL M
Comprobante
ŸŸM X
(
ŸŸX Y
)
ŸŸY Z
.
ŸŸZ [
NumeroDeSerie
ŸŸ[ h
+
ŸŸi j
$str
ŸŸk p
+
ŸŸq r
ordenDeVenta
ŸŸs 
.ŸŸ Ä
ComprobanteŸŸÄ ã
(ŸŸã å
)ŸŸå ç
.ŸŸç é#
NumeroDeComprobanteŸŸé °
+ŸŸ¢ £
$strŸŸ§ ©
+ŸŸ™ ´
ordenDeVentaŸŸ¨ ∏
.ŸŸ∏ π
ClienteŸŸπ ¿
(ŸŸ¿ ¡
)ŸŸ¡ ¬
.ŸŸ¬ √
RazonSocialŸŸ√ Œ
+ŸŸœ –
$strŸŸ— ◊
,ŸŸ◊ ÿ 
CompressionLevelŸŸŸ È
.ŸŸÈ Í
OptimalŸŸÍ Ò
)ŸŸÒ Ú
;ŸŸÚ Û
	fileBytes
⁄⁄ %
=
⁄⁄& '

XmlBuilder
⁄⁄( 2
.
⁄⁄2 3#
ObtenerXmlComprobante
⁄⁄3 H
(
⁄⁄H I
ordenDeVenta
⁄⁄I U
,
⁄⁄U V
sede
⁄⁄W [
,
⁄⁄[ \
maestroLogica
⁄⁄] j
,
⁄⁄j k'
generacionArchivosLogica⁄⁄l Ñ
,⁄⁄Ñ Ö,
facturacionElectronicaLogica⁄⁄Ü ¢
)⁄⁄¢ £
.⁄⁄£ §
	Documento⁄⁄§ ≠
;⁄⁄≠ Æ
using
€€ !
(
€€" #
var
€€# &
entryStream
€€' 2
=
€€3 4
fileInArchive
€€5 B
.
€€B C
Open
€€C G
(
€€G H
)
€€H I
)
€€I J
using
‹‹ !
(
‹‹" #
var
‹‹# &"
fileToCompressStream
‹‹' ;
=
‹‹< =
new
‹‹> A
MemoryStream
‹‹B N
(
‹‹N O
	fileBytes
‹‹O X
)
‹‹X Y
)
‹‹Y Z
{
›› "
fileToCompressStream
ﬁﬁ  4
.
ﬁﬁ4 5
CopyTo
ﬁﬁ5 ;
(
ﬁﬁ; <
entryStream
ﬁﬁ< G
)
ﬁﬁG H
;
ﬁﬁH I"
fileToCompressStream
ﬂﬂ  4
.
ﬂﬂ4 5
Close
ﬂﬂ5 :
(
ﬂﬂ: ;
)
ﬂﬂ; <
;
ﬂﬂ< =
}
‡‡ 
}
·· 
}
‚‚ 
compressedBytes
„„ #
=
„„$ %
	outStream
„„& /
.
„„/ 0
ToArray
„„0 7
(
„„7 8
)
„„8 9
;
„„9 :
}
‰‰ 
return
ÂÂ 
File
ÂÂ 
(
ÂÂ 
compressedBytes
ÂÂ +
,
ÂÂ+ ,
$str
ÂÂ- >
,
ÂÂ> ?
fileNameZip
ÂÂ@ K
)
ÂÂK L
;
ÂÂL M
}
ÊÊ 
catch
ÁÁ 
(
ÁÁ 
LogicaException
ÁÁ "
oe
ÁÁ# %
)
ÁÁ% &
{
ËË 
return
ÈÈ 
new
ÈÈ "
JsonHttpStatusResult
ÈÈ /
(
ÈÈ/ 0
Util
ÈÈ0 4
.
ÈÈ4 5
	ErrorJson
ÈÈ5 >
(
ÈÈ> ?
oe
ÈÈ? A
)
ÈÈA B
,
ÈÈB C
HttpStatusCode
ÈÈD R
.
ÈÈR S!
InternalServerError
ÈÈS f
)
ÈÈf g
;
ÈÈg h
}
ÍÍ 
catch
ÎÎ 
(
ÎÎ 
	Exception
ÎÎ 
e
ÎÎ 
)
ÎÎ 
{
ÏÏ 
return
ÌÌ 
new
ÌÌ "
JsonHttpStatusResult
ÌÌ /
(
ÌÌ/ 0
Util
ÌÌ0 4
.
ÌÌ4 5
	ErrorJson
ÌÌ5 >
(
ÌÌ> ?
new
ÌÌ? B
	Exception
ÌÌC L
(
ÌÌL M
$str
ÌÌM w
,
ÌÌw x
e
ÌÌy z
)
ÌÌz {
)
ÌÌ{ |
,
ÌÌ| }
HttpStatusCodeÌÌ~ å
.ÌÌå ç#
InternalServerErrorÌÌç †
)ÌÌ† °
;ÌÌ° ¢
}
ÓÓ 
}
ÔÔ 	
public
 
ActionResult
 #
DescargarDocumentoPdf
 1
(
1 2
long
2 6
idOrdenDeVenta
7 E
,
E F
int
G J
formato
K R
)
R S
{
ÒÒ 	
try
ÚÚ 
{
ÛÛ 6
(EstablecimientoComercialExtendidoConLogo
ÙÙ 8
sede
ÙÙ9 =
=
ÙÙ> ?
ObtenerSede
ÙÙ@ K
(
ÙÙK L
)
ÙÙL M
;
ÙÙM N
OrdenDeVenta
ıı 
ordenDeVenta
ıı )
=
ıı* +
operacionLogica
ıı, ;
.
ıı; <!
ObtenerOrdenDeVenta
ıı< O
(
ııO P
idOrdenDeVenta
ııP ^
)
ıı^ _
;
ıı_ `
string
ˆˆ 
	QrContent
ˆˆ  
=
ˆˆ! "*
facturacionElectronicaLogica
ˆˆ# ?
.
ˆˆ? @
	ObtenerQR
ˆˆ@ I
(
ˆˆI J
ordenDeVenta
ˆˆJ V
,
ˆˆV W
sede
ˆˆX \
)
ˆˆ\ ]
;
ˆˆ] ^
byte
˜˜ 
[
˜˜ 
]
˜˜ 
QrBytes
˜˜ 
=
˜˜  
barCodeUtil
˜˜! ,
.
˜˜, -
ObtenerCodigoQR
˜˜- <
(
˜˜< =
	QrContent
˜˜= F
)
˜˜F G
;
˜˜G H
PdfDocument
¯¯ 
pdfVenta
¯¯ $
=
¯¯% &
ObtenerPdfVenta
¯¯' 6
(
¯¯6 7
ordenDeVenta
¯¯7 C
,
¯¯C D
sede
¯¯E I
,
¯¯I J
QrBytes
¯¯K R
,
¯¯R S
(
¯¯T U
FormatoImpresion
¯¯U e
)
¯¯e f
formato
¯¯f m
)
¯¯m n
;
¯¯n o
byte
˘˘ 
[
˘˘ 
]
˘˘ 
	fileBytes
˘˘  
=
˘˘! "
pdfVenta
˘˘# +
.
˘˘+ ,
Save
˘˘, 0
(
˘˘0 1
)
˘˘1 2
;
˘˘2 3
string
˙˙ 
fileName
˙˙ 
=
˙˙  !
ordenDeVenta
˙˙" .
.
˙˙. /
Comprobante
˙˙/ :
(
˙˙: ;
)
˙˙; <
.
˙˙< =
NumeroDeSerie
˙˙= J
+
˙˙K L
$str
˙˙M R
+
˙˙S T
ordenDeVenta
˙˙U a
.
˙˙a b
Comprobante
˙˙b m
(
˙˙m n
)
˙˙n o
.
˙˙o p"
NumeroDeComprobante˙˙p É
+˙˙Ñ Ö
$str˙˙Ü ã
+˙˙å ç
ordenDeVenta˙˙é ö
.˙˙ö õ
Cliente˙˙õ ¢
(˙˙¢ £
)˙˙£ §
.˙˙§ •
RazonSocial˙˙• ∞
+˙˙± ≤
$str˙˙≥ π
;˙˙π ∫
return
˚˚ 
File
˚˚ 
(
˚˚ 
	fileBytes
˚˚ %
,
˚˚% &
$str
˚˚' 8
,
˚˚8 9
fileName
˚˚: B
)
˚˚B C
;
˚˚C D
}
¸¸ 
catch
˝˝ 
(
˝˝ 
LogicaException
˝˝ "
oe
˝˝# %
)
˝˝% &
{
˛˛ 
return
ˇˇ 
new
ˇˇ "
JsonHttpStatusResult
ˇˇ /
(
ˇˇ/ 0
Util
ˇˇ0 4
.
ˇˇ4 5
	ErrorJson
ˇˇ5 >
(
ˇˇ> ?
oe
ˇˇ? A
)
ˇˇA B
,
ˇˇB C
HttpStatusCode
ˇˇD R
.
ˇˇR S!
InternalServerError
ˇˇS f
)
ˇˇf g
;
ˇˇg h
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ 
	Exception
ÅÅ 
e
ÅÅ 
)
ÅÅ 
{
ÇÇ 
return
ÉÉ 
new
ÉÉ "
JsonHttpStatusResult
ÉÉ /
(
ÉÉ/ 0
Util
ÉÉ0 4
.
ÉÉ4 5
	ErrorJson
ÉÉ5 >
(
ÉÉ> ?
new
ÉÉ? B
	Exception
ÉÉC L
(
ÉÉL M
$str
ÉÉM {
,
ÉÉ{ |
e
ÉÉ} ~
)
ÉÉ~ 
)ÉÉ Ä
,ÉÉÄ Å
HttpStatusCodeÉÉÇ ê
.ÉÉê ë#
InternalServerErrorÉÉë §
)ÉÉ§ •
;ÉÉ• ¶
}
ÑÑ 
}
ÖÖ 	
public
áá 
ActionResult
áá #
DescargarDocumentoXml
áá 1
(
áá1 2
long
áá2 6
idOrdenDeVenta
áá7 E
)
ááE F
{
àà 	
try
ââ 
{
ää 6
(EstablecimientoComercialExtendidoConLogo
ãã 8
sede
ãã9 =
=
ãã> ?
ObtenerSede
ãã@ K
(
ããK L
)
ããL M
;
ããM N
OrdenDeVenta
åå 
ordenDeVenta
åå )
=
åå* +
operacionLogica
åå, ;
.
åå; <!
ObtenerOrdenDeVenta
åå< O
(
ååO P
idOrdenDeVenta
ååP ^
)
åå^ _
;
åå_ `
byte
çç 
[
çç 
]
çç 
	fileBytes
çç  
=
çç! "

XmlBuilder
çç# -
.
çç- .#
ObtenerXmlComprobante
çç. C
(
ççC D
ordenDeVenta
ççD P
,
ççP Q
sede
ççR V
,
ççV W
maestroLogica
ççX e
,
ççe f&
generacionArchivosLogica
ççg 
,çç Ä,
facturacionElectronicaLogicaççÅ ù
)ççù û
.ççû ü
	Documentoççü ®
;çç® ©
string
éé 
fileName
éé 
=
éé  !
ordenDeVenta
éé" .
.
éé. /
Comprobante
éé/ :
(
éé: ;
)
éé; <
.
éé< =
NumeroDeSerie
éé= J
+
ééK L
$str
ééM R
+
ééS T
ordenDeVenta
ééU a
.
ééa b
Comprobante
ééb m
(
éém n
)
één o
.
ééo p"
NumeroDeComprobanteéép É
+ééÑ Ö
$strééÜ ã
+ééå ç
ordenDeVentaééé ö
.ééö õ
Clienteééõ ¢
(éé¢ £
)éé£ §
.éé§ •
RazonSocialéé• ∞
+éé± ≤
$stréé≥ π
;ééπ ∫
return
èè 
File
èè 
(
èè 
	fileBytes
èè %
,
èè% &
$str
èè' 8
,
èè8 9
fileName
èè: B
)
èèB C
;
èèC D
}
êê 
catch
ëë 
(
ëë 
LogicaException
ëë "
oe
ëë# %
)
ëë% &
{
íí 
return
ìì 
new
ìì "
JsonHttpStatusResult
ìì /
(
ìì/ 0
Util
ìì0 4
.
ìì4 5
	ErrorJson
ìì5 >
(
ìì> ?
oe
ìì? A
)
ììA B
,
ììB C
HttpStatusCode
ììD R
.
ììR S!
InternalServerError
ììS f
)
ììf g
;
ììg h
}
îî 
catch
ïï 
(
ïï 
	Exception
ïï 
e
ïï 
)
ïï 
{
ññ 
return
óó 
new
óó "
JsonHttpStatusResult
óó /
(
óó/ 0
Util
óó0 4
.
óó4 5
	ErrorJson
óó5 >
(
óó> ?
new
óó? B
	Exception
óóC L
(
óóL M
$str
óóM {
,
óó{ |
e
óó} ~
)
óó~ 
)óó Ä
,óóÄ Å
HttpStatusCodeóóÇ ê
.óóê ë#
InternalServerErroróóë §
)óó§ •
;óó• ¶
}
òò 
}
ôô 	
public
ûû 

JsonResult
ûû 1
#ObtenerDetalleParaNotaDebitoCredito
ûû =
(
ûû= >
int
ûû> A
idOrdenVenta
ûûB N
)
ûûN O
{
üü 	
try
†† 
{
°° 
var
¢¢ 
ordenAlmacen
¢¢  
=
¢¢! " 
ordenAlmacenLogica
¢¢# 5
.
¢¢5 6!
ObtenerOrdenAlmacen
¢¢6 I
(
¢¢I J
idOrdenVenta
¢¢J V
)
¢¢V W
;
¢¢W X
List
££ 
<
££ 
DetalleCuotaPago
££ %
>
££% &
detallesCuotas
££' 5
=
££6 7
operacionLogica
££8 G
.
££G H/
!ObtenerDetallesCuotaPagoOperacion
££H i
(
££i j
idOrdenVenta
££j v
)
££v w
;
££w x
return
§§ 
Json
§§ 
(
§§ 
new
§§ 
{
§§  !"
detallesOrdenAlmacen
§§" 6
=
§§7 8
ordenAlmacen
§§9 E
.
§§E F
Detalles
§§F N
,
§§N O
detallesTesoreria
§§P a
=
§§b c
detallesCuotas
§§d r
}
§§s t
)
§§t u
;
§§u v
}
•• 
catch
¶¶ 
(
¶¶ 
	Exception
¶¶ 
e
¶¶ 
)
¶¶ 
{
ßß 
return
®® 
Json
®® 
(
®® 
Util
®®  
.
®®  !
	ErrorJson
®®! *
(
®®* +
e
®®+ ,
)
®®, -
)
®®- .
;
®®. /
}
©© 
}
™™ 	
public
¨¨ 

JsonResult
¨¨ E
7ObtenerTiposDeComprobanteParaNotaDeDebitoCreditoDeVenta
¨¨ Q
(
¨¨Q R
bool
¨¨R V 
esParaNotaDeDebito
¨¨W i
,
¨¨i j
string
¨¨k q$
serieComprobanteVenta¨¨r á
)¨¨á à
{
≠≠ 	
try
ÆÆ 
{
ØØ 
var
∞∞ 

resultados
∞∞ 
=
∞∞   
esParaNotaDeDebito
∞∞! 3
?
∞∞4 5
operacionLogica
∞∞6 E
.
∞∞E F7
)ObtenerTiposDeComprobanteParaNotaDeDebito
∞∞F o
(
∞∞o p
ProfileData
∞∞p {
(
∞∞{ |
)
∞∞| }
.
∞∞} ~
Empleado∞∞~ Ü
.∞∞Ü á
Id∞∞á â
,∞∞â ä
ProfileData∞∞ã ñ
(∞∞ñ ó
)∞∞ó ò
.∞∞ò ô.
IdCentroDeAtencionSeleccionado∞∞ô ∑
)∞∞∑ ∏
:∞∞π ∫
operacionLogica
±± #
.
±±# $8
*ObtenerTiposDeComprobanteParaNotaDeCredito
±±$ N
(
±±N O
ProfileData
±±O Z
(
±±Z [
)
±±[ \
.
±±\ ]
Empleado
±±] e
.
±±e f
Id
±±f h
,
±±h i
ProfileData
±±j u
(
±±u v
)
±±v w
.
±±w x-
IdCentroDeAtencionSeleccionado±±x ñ
)±±ñ ó
;±±ó ò
List
≤≤ 
<
≤≤ '
SelectorTipoDeComprobante
≤≤ .
>
≤≤. /
comprobantes
≤≤0 <
=
≤≤= >'
SelectorTipoDeComprobante
≤≤? X
.
≤≤X Y
ConvertirPropios
≤≤Y i
(
≤≤i j

resultados
≤≤j t
,
≤≤t u
ProfileData≤≤v Å
(≤≤Å Ç
)≤≤Ç É
.≤≤É Ñ.
IdCentroDeAtencionSeleccionado≤≤Ñ ¢
,≤≤¢ £%
serieComprobanteVenta≤≤§ π
.≤≤π ∫
	Substring≤≤∫ √
(≤≤√ ƒ
$num≤≤ƒ ≈
,≤≤≈ ∆
$num≤≤« »
)≤≤» …
)≤≤…  
;≤≤  À
return
≥≥ 
Json
≥≥ 
(
≥≥ 
comprobantes
≥≥ (
)
≥≥( )
;
≥≥) *
}
¥¥ 
catch
µµ 
(
µµ 
	Exception
µµ 
e
µµ 
)
µµ 
{
∂∂ 
return
∑∑ 
Json
∑∑ 
(
∑∑ 
Util
∑∑  
.
∑∑  !
	ErrorJson
∑∑! *
(
∑∑* +
e
∑∑+ ,
)
∑∑, -
)
∑∑- .
;
∑∑. /
}
∏∏ 
}
ππ 	
public
ªª 

JsonResult
ªª /
!GuardarNotaDeDebitoCreditoDeVenta
ªª ;
(
ªª; <%
RegistroDeNotaViewModel
ªª< S
registroDeNota
ªªT b
)
ªªb c
{
ºº 	
try
ΩΩ 
{
ææ 
List
øø 
<
øø  
DetalleOrdenDeNota
øø '
>
øø' (
detalles
øø) 1
=
øø2 38
*ConstruirDetalleTransaccionParaNotaDeVenta
øø4 ^
(
øø^ _
registroDeNota
øø_ m
)
øøm n
;
øøn o
OperationResult
¿¿ 
	resultado
¿¿  )
=
¿¿* +
operacionLogica
¿¿, ;
.
¿¿; <
GuardarNotaVenta
¿¿< L
(
¿¿L M
registroDeNota
¿¿M [
.
¿¿[ \ 
IdOrdenDeOperacion
¿¿\ n
,
¿¿n o
registroDeNota
¿¿p ~
.
¿¿~ 
TipoNota¿¿ á
.¿¿á à
Id¿¿à ä
,¿¿ä ã
registroDeNota¿¿ç õ
.¿¿õ ú
Comprobante¿¿ú ß
.¿¿ß ®
EsPropio¿¿® ∞
?¿¿∞ ±
$num¿¿≤ ≥
:¿¿¥ µ
registroDeNota¿¿∂ ƒ
.¿¿ƒ ≈
Comprobante¿¿≈ –
.¿¿– —
TipoComprobante¿¿— ‡
.¿¿‡ ·
Id¿¿· „
,¿¿„ ‰
registroDeNota¿¿Â Û
.¿¿Û Ù
Comprobante¿¿Ù ˇ
.¿¿ˇ Ä!
SerieSeleccionada¿¿Ä ë
,¿¿ë í
registroDeNota¿¿ì °
.¿¿° ¢
Comprobante¿¿¢ ≠
.¿¿≠ Æ
EsPropio¿¿Æ ∂
,¿¿∂ ∑
registroDeNota¿¿∏ ∆
.¿¿∆ «
Comprobante¿¿« “
.¿¿“ ”
SerieIngresada¿¿” ·
,¿¿· ‚
registroDeNota¿¿„ Ò
.¿¿Ò Ú
Comprobante¿¿Ú ˝
.¿¿˝ ˛
NumeroIngresado¿¿˛ ç
,¿¿ç é
registroDeNota¿¿è ù
.¿¿ù û
	MontoNota¿¿û ß
,¿¿ß ®
$num¿¿© ™
,¿¿™ ´
detalles¿¿¨ ¥
,¿¿¥ µ
registroDeNota¿¿∂ ƒ
.¿¿ƒ ≈
EsDebito¿¿≈ Õ
,¿¿Õ Œ
registroDeNota¿¿œ ›
.¿¿› ﬁ

EsDiferida¿¿ﬁ Ë
,¿¿Ë È
registroDeNota¿¿Í ¯
.¿¿¯ ˘
Observacion¿¿˘ Ñ
,¿¿Ñ Ö
registroDeNota¿¿Ü î
.¿¿î ï
Pago¿¿ï ô
,¿¿ô ö
ProfileData¿¿õ ¶
(¿¿¶ ß
)¿¿ß ®
)¿¿® ©
;¿¿© ™
Util
¡¡ 
.
¡¡ (
ManageIfResultIsNotSuccess
¡¡ /
(
¡¡/ 0
	resultado
¡¡0 9
,
¡¡9 :
$str
¡¡; W
)
¡¡W X
;
¡¡X Y
var
√√ 

ordenVenta
√√ 
=
√√  *
ArmarOrdenDeNotaParaImprimir
√√! =
(
√√= >
(
√√> ?
OrdenDeVenta
√√? K
)
√√K L
	resultado
√√L U
.
√√U V
objeto
√√V \
,
√√\ ]
registroDeNota
√√^ l
)
√√l m
;
√√m n9
+GuardarOrdenDeVentaParaImprimirEnAplicacion
≈≈ ;
(
≈≈; <

ordenVenta
≈≈< F
)
≈≈F G
;
≈≈G H
return
∆∆ 
Json
∆∆ 
(
∆∆ 
new
∆∆ 
{
∆∆  !
	resultado
∆∆" +
.
∆∆+ ,
code_result
∆∆, 7
,
∆∆7 8
data
∆∆9 =
=
∆∆> ?
	resultado
∆∆@ I
.
∆∆I J
information
∆∆J U
,
∆∆U V 
result_description
∆∆W i
=
∆∆j k
	resultado
∆∆l u
.
∆∆u v
title
∆∆v {
}
∆∆| }
)
∆∆} ~
;
∆∆~ 
}
«« 
catch
»» 
(
»» 
LogicaException
»» "
oe
»»# %
)
»»% &
{
…… 
return
   
new
   "
JsonHttpStatusResult
   /
(
  / 0
Util
  0 4
.
  4 5
	ErrorJson
  5 >
(
  > ?
oe
  ? A
)
  A B
,
  B C
HttpStatusCode
  D R
.
  R S!
InternalServerError
  S f
)
  f g
;
  g h
}
ÀÀ 
catch
ÃÃ 
(
ÃÃ 
	Exception
ÃÃ 
e
ÃÃ 
)
ÃÃ 
{
ÕÕ 
return
ŒŒ 
new
ŒŒ "
JsonHttpStatusResult
ŒŒ /
(
ŒŒ/ 0
Util
ŒŒ0 4
.
ŒŒ4 5
	ErrorJson
ŒŒ5 >
(
ŒŒ> ?
new
ŒŒ? B
	Exception
ŒŒC L
(
ŒŒL M
$str
ŒŒM i
,
ŒŒi j
e
ŒŒk l
)
ŒŒl m
)
ŒŒm n
,
ŒŒn o
HttpStatusCode
ŒŒp ~
.
ŒŒ~ "
InternalServerErrorŒŒ í
)ŒŒí ì
;ŒŒì î
}
œœ 
}
–– 	
public
““ 
List
““ 
<
““  
DetalleOrdenDeNota
““ &
>
““& '8
*ConstruirDetalleTransaccionParaNotaDeVenta
““( R
(
““R S%
RegistroDeNotaViewModel
““S j
registroDeNota
““k y
)
““y z
{
”” 	
List
‘‘ 
<
‘‘  
DetalleOrdenDeNota
‘‘ #
>
‘‘# $!
detallesConstruidos
‘‘% 8
=
‘‘9 :
new
‘‘; >
List
‘‘? C
<
‘‘C D 
DetalleOrdenDeNota
‘‘D V
>
‘‘V W
(
‘‘W X
)
‘‘X Y
;
‘‘Y Z
foreach
’’ 
(
’’ 
var
’’ 
item
’’ 
in
’’  
registroDeNota
’’! /
.
’’/ 0
Detalles
’’0 8
)
’’8 9
{
÷÷ !
detallesConstruidos
◊◊ #
.
◊◊# $
Add
◊◊$ '
(
◊◊' (
new
◊◊( + 
DetalleOrdenDeNota
◊◊, >
(
◊◊> ?
)
◊◊? @
{
ÿÿ 
Cantidad
ŸŸ 
=
ŸŸ 
item
ŸŸ #
.
ŸŸ# $
Cantidad
ŸŸ$ ,
,
ŸŸ, -
Producto
⁄⁄ 
=
⁄⁄ 
new
⁄⁄ "(
Concepto_Negocio_Comercial
⁄⁄# =
(
⁄⁄= >
)
⁄⁄> ?
{
€€ 
Id
‹‹ 
=
‹‹ 
item
‹‹ !
.
‹‹! "

IdConcepto
‹‹" ,
,
‹‹, -
}
›› 
,
›› 
Detalle
ﬁﬁ 
=
ﬁﬁ 
item
ﬁﬁ "
.
ﬁﬁ" #
Observacion
ﬁﬁ# .
,
ﬁﬁ. /
PrecioUnitario
ﬂﬂ "
=
ﬂﬂ# $
item
ﬂﬂ% )
.
ﬂﬂ) *
Precio
ﬂﬂ* 0
,
ﬂﬂ0 1
Importe
‡‡ 
=
‡‡ 
item
‡‡ "
.
‡‡" #
Importe
‡‡# *
,
‡‡* +
	Descuento
·· 
=
·· 
item
··  $
.
··$ %
	Descuento
··% .
,
··. /
MontoDetalle
‚‚  
=
‚‚! "
item
‚‚# '
.
‚‚' (
MontoDetalle
‚‚( 4
,
‚‚4 5
MontoRevocado
„„ !
=
„„" #
item
„„$ (
.
„„( )
MontoRevocado
„„) 6
,
„„6 7
MontoDevuelto
‰‰ !
=
‰‰" #
item
‰‰$ (
.
‰‰( )
MontoDevuelto
‰‰) 6
,
‰‰6 7
}
ÂÂ 
)
ÂÂ 
;
ÂÂ 
}
ÊÊ 
return
ÁÁ !
detallesConstruidos
ÁÁ &
;
ÁÁ& '
}
ËË 	
public
ÔÔ 
ActionResult
ÔÔ G
9ReporteDeVentaPorComprobanteDetalladoDeUnSoloPuntoDeVenta
ÔÔ U
(
ÔÔU V
string
ÔÔV \
fechaInicio
ÔÔ] h
,
ÔÔh i
string
ÔÔj p
fechaFin
ÔÔq y
)
ÔÔy z
{
 	
DateTime
ÒÒ 

fechaDesde
ÒÒ 
=
ÒÒ  !
DateTimeUtil
ÒÒ" .
.
ÒÒ. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ÒÒ/ Z
(
ÒÒZ [
fechaInicio
ÒÒ[ f
)
ÒÒf g
;
ÒÒg h
DateTime
ÚÚ 

fechaHasta
ÚÚ 
=
ÚÚ  !
DateTimeUtil
ÚÚ" .
.
ÚÚ. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
ÚÚ/ Z
(
ÚÚZ [
fechaFin
ÚÚ[ c
)
ÚÚc d
;
ÚÚd e
List
ıı 
<
ıı 
OrdenDeVenta
ıı 
>
ıı 
Confirmadas
ıı *
=
ıı+ ,
operacionLogica
ıı- <
.
ıı< =;
-ObtenerOrdenesDeVentaConfirmadasYTransmitidas
ıı= j
(
ııj k
ProfileData
ıık v
(
ııv w
)
ııw x
.
ııx y-
IdCentroDeAtencionSeleccionadoııy ó
,ııó ò

fechaDesdeııô £
,ıı£ §

fechaHastaıı• Ø
)ııØ ∞
;ıı∞ ±
List
ˆˆ 
<
ˆˆ 
OrdenDeVenta
ˆˆ 
>
ˆˆ 
Invalidadas
ˆˆ *
=
ˆˆ+ ,
operacionLogica
ˆˆ- <
.
ˆˆ< =.
 ObtenerOrdenesDeVentaInvalidadas
ˆˆ= ]
(
ˆˆ] ^
ProfileData
ˆˆ^ i
(
ˆˆi j
)
ˆˆj k
.
ˆˆk l-
IdCentroDeAtencionSeleccionadoˆˆl ä
,ˆˆä ã

fechaDesdeˆˆå ñ
,ˆˆñ ó

fechaHastaˆˆò ¢
)ˆˆ¢ £
;ˆˆ£ §
List
˘˘ 
<
˘˘ '
ResumenDeTransaccionVenta
˘˘ *
>
˘˘* +1
#rptVentaViewModelDetallesConfirmada
˘˘, O
=
˘˘P Q'
ResumenDeTransaccionVenta
˘˘R k
.
˘˘k l
Convert
˘˘l s
(
˘˘s t
Confirmadas
˘˘t 
)˘˘ Ä
;˘˘Ä Å
List
˙˙ 
<
˙˙ '
ResumenDeTransaccionVenta
˙˙ *
>
˙˙* +1
#rptVentaViewModelDetallesInvalidada
˙˙, O
=
˙˙P Q'
ResumenDeTransaccionVenta
˙˙R k
.
˙˙k l
Convert
˙˙l s
(
˙˙s t
Invalidadas
˙˙t 
)˙˙ Ä
;˙˙Ä Å
List
¸¸ 
<
¸¸ '
ResumenDeTransaccionVenta
¸¸ *
>
¸¸* +*
reporteVentaViewModelResumen
¸¸, H
=
¸¸I J'
ResumenDeTransaccionVenta
¸¸K d
.
¸¸d e
Resumen
¸¸e l
(
¸¸l m2
#rptVentaViewModelDetallesConfirmada¸¸m ê
)¸¸ê ë
;¸¸ë í
ReportParameter
˛˛ !
parametroFechaDesde
˛˛ /
=
˛˛0 1
new
˛˛2 5
ReportParameter
˛˛6 E
(
˛˛E F
$str
˛˛F R
,
˛˛R S

fechaDesde
˛˛T ^
.
˛˛^ _
ToString
˛˛_ g
(
˛˛g h
)
˛˛h i
)
˛˛i j
;
˛˛j k
ReportParameter
ˇˇ !
parametroFechaHasta
ˇˇ /
=
ˇˇ0 1
new
ˇˇ2 5
ReportParameter
ˇˇ6 E
(
ˇˇE F
$str
ˇˇF R
,
ˇˇR S

fechaHasta
ˇˇT ^
.
ˇˇ^ _
ToString
ˇˇ_ g
(
ˇˇg h
)
ˇˇh i
)
ˇˇi j
;
ˇˇj k
ReportParameter
ÄÄ 
nombreEmpresa
ÄÄ )
=
ÄÄ* +
new
ÄÄ, /
ReportParameter
ÄÄ0 ?
(
ÄÄ? @
$str
ÄÄ@ L
,
ÄÄL M
ObtenerSede
ÄÄN Y
(
ÄÄY Z
)
ÄÄZ [
.
ÄÄ[ \
Nombre
ÄÄ\ b
)
ÄÄb c
;
ÄÄc d
ReportParameter
ÅÅ "
nombreCentroAtencion
ÅÅ 0
=
ÅÅ1 2
new
ÅÅ3 6
ReportParameter
ÅÅ7 F
(
ÅÅF G
$str
ÅÅG ]
,
ÅÅ] ^
ProfileData
ÅÅ_ j
(
ÅÅj k
)
ÅÅk l
.
ÅÅl m1
"NombreCentroDeAtencionSeleccionadoÅÅm è
)ÅÅè ê
;ÅÅê ë6
(EstablecimientoComercialExtendidoConLogo
ÉÉ 4
sede
ÉÉ5 9
=
ÉÉ: ;
ObtenerSede
ÉÉ< G
(
ÉÉG H
)
ÉÉH I
;
ÉÉI J
string
ÑÑ 

logoString
ÑÑ 
=
ÑÑ 
Convert
ÑÑ  '
.
ÑÑ' (
ToBase64String
ÑÑ( 6
(
ÑÑ6 7
sede
ÑÑ7 ;
.
ÑÑ; <
Logo
ÑÑ< @
,
ÑÑ@ A
$num
ÑÑB C
,
ÑÑC D
sede
ÑÑE I
.
ÑÑI J
Logo
ÑÑJ N
.
ÑÑN O
Length
ÑÑO U
)
ÑÑU V
;
ÑÑV W
ReportParameter
ÖÖ 
logoSede
ÖÖ $
=
ÖÖ% &
new
ÖÖ' *
ReportParameter
ÖÖ+ :
(
ÖÖ: ;
$str
ÖÖ; E
,
ÖÖE F

logoString
ÖÖG Q
)
ÖÖQ R
;
ÖÖR S
ReportParameter
áá 
empleadoSede
áá (
=
áá) *
new
áá+ .
ReportParameter
áá/ >
(
áá> ?
$str
áá? H
,
ááH I
ProfileData
ááJ U
(
ááU V
)
ááV W
.
ááW X
Empleado
ááX `
.
áá` a
NombresYApellidos
ááa r
)
áár s
;
áás t
DateTime
ââ 
fechaActual
ââ  
=
ââ! "
DateTimeUtil
ââ# /
.
ââ/ 0
FechaActual
ââ0 ;
(
ââ; <
)
ââ< =
;
ââ= >
ReportParameter
ää  
fechaActualSistema
ää .
=
ää/ 0
new
ää1 4
ReportParameter
ää5 D
(
ääD E
$str
ääE R
,
ääR S
fechaActual
ääT _
.
ää_ `
ToString
ää` h
(
ääh i
)
ääi j
)
ääj k
;
ääk l
var
åå 
	rptviewer
åå 
=
åå 
new
åå 
ReportViewer
åå  ,
(
åå, -
)
åå- .
;
åå. /
	rptviewer
çç 
.
çç 
ProcessingMode
çç $
=
çç% &
ProcessingMode
çç' 5
.
çç5 6
Local
çç6 ;
;
çç; <
	rptviewer
éé 
.
éé 
LocalReport
éé !
.
éé! "

ReportPath
éé" ,
=
éé- .
Request
éé/ 6
.
éé6 7
MapPath
éé7 >
(
éé> ?
Request
éé? F
.
ééF G
ApplicationPath
ééG V
)
ééV W
+
ééX Y
$strééZ †
;éé† °
	rptviewer
èè 
.
èè 
LocalReport
èè !
.
èè! "
SetParameters
èè" /
(
èè/ 0
new
èè0 3
ReportParameter
èè4 C
[
èèC D
]
èèD E
{
èèF G!
parametroFechaDesde
èèH [
,
èè[ \!
parametroFechaHasta
èè] p
,
èèp q
nombreEmpresa
èèr 
,èè Ä$
nombreCentroAtencionèèÅ ï
,èèï ñ
logoSedeèèó ü
,èèü †
empleadoSedeèè° ≠
,èè≠ Æ"
fechaActualSistemaèèØ ¡
}èè¬ √
)èè√ ƒ
;èèƒ ≈
ReportDataSource
ëë "
rptdatasourceResumen
ëë 1
=
ëë2 3
new
ëë4 7
ReportDataSource
ëë8 H
(
ëëH I
$str
ëëI Y
,
ëëY Z*
reporteVentaViewModelResumen
ëë[ w
)
ëëw x
;
ëëx y
ReportDataSource
ìì ,
rptdatasourceDetalleConfirmada
ìì ;
=
ìì< =
new
ìì> A
ReportDataSource
ììB R
(
ììR S
$str
ììS d
,
ììd e2
#rptVentaViewModelDetallesConfirmadaììf â
)ììâ ä
;ììä ã
ReportDataSource
îî ,
rptdatasourceDetalleInvalidada
îî ;
=
îî< =
new
îî> A
ReportDataSource
îîB R
(
îîR S
$str
îîS n
,
îîn o2
#rptVentaViewModelDetallesInvalidadaîîp ì
)îîì î
;îîî ï
	rptviewer
óó 
.
óó 
LocalReport
óó !
.
óó! "
DataSources
óó" -
.
óó- .
Add
óó. 1
(
óó1 2"
rptdatasourceResumen
óó2 F
)
óóF G
;
óóG H
	rptviewer
ôô 
.
ôô 
LocalReport
ôô !
.
ôô! "
DataSources
ôô" -
.
ôô- .
Add
ôô. 1
(
ôô1 2,
rptdatasourceDetalleConfirmada
ôô2 P
)
ôôP Q
;
ôôQ R
	rptviewer
öö 
.
öö 
LocalReport
öö !
.
öö! "
DataSources
öö" -
.
öö- .
Add
öö. 1
(
öö1 2,
rptdatasourceDetalleInvalidada
öö2 P
)
ööP Q
;
ööQ R
	rptviewer
ùù 
.
ùù !
SizeToReportContent
ùù )
=
ùù* +
true
ùù, 0
;
ùù0 1
ViewBag
ûû 
.
ûû 
ReportViewer
ûû  
=
ûû! "
	rptviewer
ûû# ,
;
ûû, -
return
üü 
View
üü 
(
üü 
$str
üü -
)
üü- .
;
üü. /
}
†† 	
public
££ 
ActionResult
££ ;
-ReporteDeVentaPorConceptoDeUnSoloPuntoDeVenta
££ I
(
££I J
string
££J P
fechaInicio
££Q \
,
££\ ]
string
££^ d
fechaFin
££e m
)
££m n
{
§§ 	
try
•• 
{
¶¶ 
DateTime
©© 

fechaDesde
©© 
=
©©  !
DateTimeUtil
©©" .
.
©©. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
©©/ Z
(
©©Z [
fechaInicio
©©[ f
)
©©f g
;
©©g h
DateTime
™™ 

fechaHasta
™™ 
=
™™  !
DateTimeUtil
™™" .
.
™™. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
™™/ Z
(
™™Z [
fechaFin
™™[ c
)
™™c d
;
™™d e
List
ÆÆ 
<
ÆÆ M
?Resumen_Transaccion_Venta_PorConceptoBasico_Y_ConceptoDeNegocio
ÆÆ P
>
ÆÆP Q,
ventasConfirmadasYTransmididas
ÆÆR p
=
ÆÆq r
operacionLogicaÆÆs Ç
.ÆÆÇ ÉX
HObtenerOrdenesDeVentaConfirmadasYTransmitidasPorConceptoBasicoYDeNegocioÆÆÉ À
(ÆÆÀ Ã
ProfileDataÆÆÃ ◊
(ÆÆ◊ ÿ
)ÆÆÿ Ÿ
.ÆÆŸ ⁄.
IdCentroDeAtencionSeleccionadoÆÆ⁄ ¯
,ÆÆ¯ ˘

fechaDesdeÆÆ˙ Ñ
,ÆÆÑ Ö

fechaHastaÆÆÜ ê
)ÆÆê ë
;ÆÆë í
List
ØØ 
<
ØØ M
?Resumen_Transaccion_Venta_PorConceptoBasico_Y_ConceptoDeNegocio
ØØ P
>
ØØP Q
ventasInvalidadas
ØØR c
=
ØØd e
operacionLogica
ØØf u
.
ØØu vJ
;ObtenerOrdenesDeVentaInvalidadasPorConceptoBasicoYDeNegocioØØv ±
(ØØ± ≤
ProfileDataØØ≤ Ω
(ØØΩ æ
)ØØæ ø
.ØØø ¿.
IdCentroDeAtencionSeleccionadoØØ¿ ﬁ
,ØØﬁ ﬂ

fechaDesdeØØ‡ Í
,ØØÍ Î

fechaHastaØØÏ ˆ
)ØØˆ ˜
;ØØ˜ ¯6
(EstablecimientoComercialExtendidoConLogo
±± 8
sede
±±9 =
=
±±> ?
ObtenerSede
±±@ K
(
±±K L
)
±±L M
;
±±M N
var
≥≥ 
	rptviewer
≥≥ 
=
≥≥ 
new
≥≥  #
ReportViewer
≥≥$ 0
(
≥≥0 1
)
≥≥1 2
;
≥≥2 3
ReportParameter
¥¥ !
parametroFechaDesde
¥¥ /
=
¥¥0 1
new
¥¥2 5
ReportParameter
¥¥6 E
(
¥¥E F
$str
¥¥F R
,
¥¥R S

fechaDesde
¥¥T ^
.
¥¥^ _
ToString
¥¥_ g
(
¥¥g h
)
¥¥h i
)
¥¥i j
;
¥¥j k
ReportParameter
µµ !
parametroFechaHasta
µµ /
=
µµ0 1
new
µµ2 5
ReportParameter
µµ6 E
(
µµE F
$str
µµF R
,
µµR S

fechaHasta
µµT ^
.
µµ^ _
ToString
µµ_ g
(
µµg h
)
µµh i
)
µµi j
;
µµj k
ReportParameter
∂∂ 
nombreDeSede
∂∂ (
=
∂∂) *
new
∂∂+ .
ReportParameter
∂∂/ >
(
∂∂> ?
$str
∂∂? K
,
∂∂K L
sede
∂∂M Q
.
∂∂Q R
Nombre
∂∂R X
)
∂∂X Y
;
∂∂Y Z
ReportParameter
∑∑ "
nombreCentroAtencion
∑∑ 0
=
∑∑1 2
new
∑∑3 6
ReportParameter
∑∑7 F
(
∑∑F G
$str
∑∑G ]
,
∑∑] ^
ProfileData
∑∑_ j
(
∑∑j k
)
∑∑k l
.
∑∑l m1
"NombreCentroDeAtencionSeleccionado∑∑m è
)∑∑è ê
;∑∑ê ë
string
ππ 

logoString
ππ 
=
ππ 
Convert
ππ  '
.
ππ' (
ToBase64String
ππ( 6
(
ππ6 7
sede
ππ7 ;
.
ππ; <
Logo
ππ< @
,
ππ@ A
$num
ππB C
,
ππC D
sede
ππE I
.
ππI J
Logo
ππJ N
.
ππN O
Length
ππO U
)
ππU V
;
ππV W
ReportParameter
∫∫ 
logoSede
∫∫ $
=
∫∫% &
new
∫∫' *
ReportParameter
∫∫+ :
(
∫∫: ;
$str
∫∫; E
,
∫∫E F

logoString
∫∫G Q
)
∫∫Q R
;
∫∫R S
ReportParameter
ºº 
empleadoSede
ºº (
=
ºº) *
new
ºº+ .
ReportParameter
ºº/ >
(
ºº> ?
$str
ºº? H
,
ººH I
ProfileData
ººJ U
(
ººU V
)
ººV W
.
ººW X
Empleado
ººX `
.
ºº` a
NombresYApellidos
ººa r
)
ººr s
;
ººs t
DateTime
ææ 
fechaActual
ææ  
=
ææ! "
DateTimeUtil
ææ# /
.
ææ/ 0
FechaActual
ææ0 ;
(
ææ; <
)
ææ< =
;
ææ= >
ReportParameter
øø  
fechaActualSistema
øø .
=
øø/ 0
new
øø1 4
ReportParameter
øø5 D
(
øøD E
$str
øøE R
,
øøR S
fechaActual
øøT _
.
øø_ `
ToString
øø` h
(
øøh i
)
øøi j
)
øøj k
;
øøk l
	rptviewer
¡¡ 
.
¡¡ 
LocalReport
¡¡ !
.
¡¡! "

ReportPath
¡¡" ,
=
¡¡- .
Request
¡¡/ 6
.
¡¡6 7
MapPath
¡¡7 >
(
¡¡> ?
Request
¡¡? F
.
¡¡F G
ApplicationPath
¡¡G V
)
¡¡V W
+
¡¡X Y
$str¡¡Z ê
;¡¡ê ë
	rptviewer
¬¬ 
.
¬¬ 
LocalReport
¬¬ !
.
¬¬! "
SetParameters
¬¬" /
(
¬¬/ 0
new
¬¬0 3
ReportParameter
¬¬4 C
[
¬¬C D
]
¬¬D E
{
¬¬F G!
parametroFechaDesde
¬¬H [
,
¬¬[ \!
parametroFechaHasta
¬¬] p
,
¬¬p q
nombreDeSede
¬¬r ~
,
¬¬~ $
nombreCentroAtencion¬¬Ä î
,¬¬î ï
logoSede¬¬ñ û
,¬¬û ü
empleadoSede¬¬† ¨
,¬¬¨ ≠"
fechaActualSistema¬¬Æ ¿
}¬¬¡ ¬
)¬¬¬ √
;¬¬√ ƒ
ReportDataSource
ƒƒ -
rptVentasConfirmadasTransmitida
ƒƒ <
=
ƒƒ= >
new
ƒƒ? B
ReportDataSource
ƒƒC S
(
ƒƒS T
$str
ƒƒT m
,
ƒƒm n-
ventasConfirmadasYTransmididasƒƒo ç
)ƒƒç é
;ƒƒé è
ReportDataSource
≈≈ "
rptVentasInvalidadas
≈≈ 1
=
≈≈2 3
new
≈≈4 7
ReportDataSource
≈≈8 H
(
≈≈H I
$str
≈≈I b
,
≈≈b c
ventasInvalidadas
≈≈d u
)
≈≈u v
;
≈≈v w
	rptviewer
»» 
.
»» 
ProcessingMode
»» $
=
»»% &
ProcessingMode
»»' 5
.
»»5 6
Local
»»6 ;
;
»»; <
	rptviewer
   
.
   
LocalReport
   !
.
  ! "
DataSources
  " -
.
  - .
Add
  . 1
(
  1 2-
rptVentasConfirmadasTransmitida
  2 Q
)
  Q R
;
  R S
	rptviewer
ÀÀ 
.
ÀÀ 
LocalReport
ÀÀ !
.
ÀÀ! "
DataSources
ÀÀ" -
.
ÀÀ- .
Add
ÀÀ. 1
(
ÀÀ1 2"
rptVentasInvalidadas
ÀÀ2 F
)
ÀÀF G
;
ÀÀG H
	rptviewer
ŒŒ 
.
ŒŒ !
SizeToReportContent
ŒŒ )
=
ŒŒ* +
true
ŒŒ, 0
;
ŒŒ0 1
	rptviewer
œœ 
.
œœ 
Width
œœ 
=
œœ 
Unit
œœ "
.
œœ" #

Percentage
œœ# -
(
œœ- .
$num
œœ. 1
)
œœ1 2
;
œœ2 3
	rptviewer
–– 
.
–– 
Height
–– 
=
–– 
Unit
–– #
.
––# $

Percentage
––$ .
(
––. /
$num
––/ 2
)
––2 3
;
––3 4
ViewBag
—— 
.
—— 
ReportViewer
——  
=
——! "
	rptviewer
——# ,
;
——, -
return
““ 
View
““ 
(
““ 
$str
““ -
)
““- .
;
““. /
}
”” 
catch
‘‘ 
(
‘‘ 
	Exception
‘‘ 
e
‘‘ 
)
‘‘ 
{
’’ 
throw
◊◊ 
e
◊◊ 
;
◊◊ 
}
ÿÿ 
}
ŸŸ 	
public
‹‹ 
ActionResult
‹‹ O
AReporteDeVentaPorSerieYConceptoBasicoResumidoDeUnSoloPuntoDeVenta
‹‹ ]
(
‹‹] ^
string
‹‹^ d
fechaInicio
‹‹e p
,
‹‹p q
string
‹‹r x
fechaFin‹‹y Å
)‹‹Å Ç
{
›› 	
DateTime
ﬁﬁ 

fechaDesde
ﬁﬁ 
=
ﬁﬁ  !
DateTimeUtil
ﬁﬁ" .
.
ﬁﬁ. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ﬁﬁ/ Z
(
ﬁﬁZ [
fechaInicio
ﬁﬁ[ f
)
ﬁﬁf g
;
ﬁﬁg h
DateTime
ﬂﬂ 

fechaHasta
ﬂﬂ 
=
ﬂﬂ  !
DateTimeUtil
ﬂﬂ" .
.
ﬂﬂ. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
ﬂﬂ/ Z
(
ﬂﬂZ [
fechaFin
ﬂﬂ[ c
)
ﬂﬂc d
;
ﬂﬂd e
List
·· 
<
·· <
.Resumen_Transaccion_Por_Serie_y_ConceptoBasico
·· ?
>
··? @C
5ResumenPorSerieYConeptoBasicoTransmitidasYConfirmadas
··A v
=
··w x
operacionLogica··y à
.··à âS
CObtenerReporteVentasConSerieYConceptoBasicoConfirmadasYTransmitidas··â Ã
(··Ã Õ
ProfileData··Õ ÿ
(··ÿ Ÿ
)··Ÿ ⁄
.··⁄ €.
IdCentroDeAtencionSeleccionado··€ ˘
,··˘ ˙

fechaDesde··˚ Ö
,··Ö Ü

fechaHasta··á ë
)··ë í
;··í ì
List
‚‚ 
<
‚‚ <
.Resumen_Transaccion_Por_Serie_y_ConceptoBasico
‚‚ ?
>
‚‚? @6
(ResumenPorSerieYConeptoBasicoInvalidadas
‚‚A i
=
‚‚j k
operacionLogica
‚‚l {
.
‚‚{ |E
6ObtenerReporteVentasConSerieYConceptoBasicoInvalidadas‚‚| ≤
(‚‚≤ ≥
ProfileData‚‚≥ æ
(‚‚æ ø
)‚‚ø ¿
.‚‚¿ ¡.
IdCentroDeAtencionSeleccionado‚‚¡ ﬂ
,‚‚ﬂ ‡

fechaDesde‚‚· Î
,‚‚Î Ï

fechaHasta‚‚Ì ˜
)‚‚˜ ¯
;‚‚¯ ˘
List
„„ 
<
„„ <
.Resumen_Transaccion_Por_Serie_y_ConceptoBasico
„„ ?
>
„„? @3
%ResumenPorSerieYConeptoBasicoAnuladas
„„A f
=
„„g h
operacionLogica
„„i x
.
„„x yB
3ObtenerReporteVentasConSerieYConceptoBasicoAnuladas„„y ¨
(„„¨ ≠
ProfileData„„≠ ∏
(„„∏ π
)„„π ∫
.„„∫ ª.
IdCentroDeAtencionSeleccionado„„ª Ÿ
,„„Ÿ ⁄

fechaDesde„„€ Â
,„„Â Ê

fechaHasta„„Á Ò
)„„Ò Ú
;„„Ú Û
var
ÂÂ 
	rptviewer
ÂÂ 
=
ÂÂ 
new
ÂÂ 
ReportViewer
ÂÂ  ,
(
ÂÂ, -
)
ÂÂ- .
;
ÂÂ. /
ReportParameter
ÊÊ !
parametroFechaDesde
ÊÊ /
=
ÊÊ0 1
new
ÊÊ2 5
ReportParameter
ÊÊ6 E
(
ÊÊE F
$str
ÊÊF R
,
ÊÊR S

fechaDesde
ÊÊT ^
.
ÊÊ^ _
ToString
ÊÊ_ g
(
ÊÊg h
)
ÊÊh i
)
ÊÊi j
;
ÊÊj k
ReportParameter
ÁÁ !
parametroFechaHasta
ÁÁ /
=
ÁÁ0 1
new
ÁÁ2 5
ReportParameter
ÁÁ6 E
(
ÁÁE F
$str
ÁÁF R
,
ÁÁR S

fechaHasta
ÁÁT ^
.
ÁÁ^ _
ToString
ÁÁ_ g
(
ÁÁg h
)
ÁÁh i
)
ÁÁi j
;
ÁÁj k
ReportParameter
ËË 
nombreEmpresa
ËË )
=
ËË* +
new
ËË, /
ReportParameter
ËË0 ?
(
ËË? @
$str
ËË@ L
,
ËËL M
ObtenerSede
ËËN Y
(
ËËY Z
)
ËËZ [
.
ËË[ \
Nombre
ËË\ b
)
ËËb c
;
ËËc d
ReportParameter
ÈÈ "
nombreCentroAtencion
ÈÈ 0
=
ÈÈ1 2
new
ÈÈ3 6
ReportParameter
ÈÈ7 F
(
ÈÈF G
$str
ÈÈG ]
,
ÈÈ] ^
ProfileData
ÈÈ_ j
(
ÈÈj k
)
ÈÈk l
.
ÈÈl m1
"NombreCentroDeAtencionSeleccionadoÈÈm è
)ÈÈè ê
;ÈÈê ë6
(EstablecimientoComercialExtendidoConLogo
ÎÎ 4
sede
ÎÎ5 9
=
ÎÎ: ;
ObtenerSede
ÎÎ< G
(
ÎÎG H
)
ÎÎH I
;
ÎÎI J
string
ÏÏ 

logoString
ÏÏ 
=
ÏÏ 
Convert
ÏÏ  '
.
ÏÏ' (
ToBase64String
ÏÏ( 6
(
ÏÏ6 7
sede
ÏÏ7 ;
.
ÏÏ; <
Logo
ÏÏ< @
,
ÏÏ@ A
$num
ÏÏB C
,
ÏÏC D
sede
ÏÏE I
.
ÏÏI J
Logo
ÏÏJ N
.
ÏÏN O
Length
ÏÏO U
)
ÏÏU V
;
ÏÏV W
ReportParameter
ÌÌ 
logoSede
ÌÌ $
=
ÌÌ% &
new
ÌÌ' *
ReportParameter
ÌÌ+ :
(
ÌÌ: ;
$str
ÌÌ; E
,
ÌÌE F

logoString
ÌÌG Q
)
ÌÌQ R
;
ÌÌR S
ReportParameter
ÔÔ 
empleadoSede
ÔÔ (
=
ÔÔ) *
new
ÔÔ+ .
ReportParameter
ÔÔ/ >
(
ÔÔ> ?
$str
ÔÔ? H
,
ÔÔH I
ProfileData
ÔÔJ U
(
ÔÔU V
)
ÔÔV W
.
ÔÔW X
Empleado
ÔÔX `
.
ÔÔ` a
NombresYApellidos
ÔÔa r
)
ÔÔr s
;
ÔÔs t
DateTime
ÒÒ 
fechaActual
ÒÒ  
=
ÒÒ! "
DateTimeUtil
ÒÒ# /
.
ÒÒ/ 0
FechaActual
ÒÒ0 ;
(
ÒÒ; <
)
ÒÒ< =
;
ÒÒ= >
ReportParameter
ÚÚ  
fechaActualSistema
ÚÚ .
=
ÚÚ/ 0
new
ÚÚ1 4
ReportParameter
ÚÚ5 D
(
ÚÚD E
$str
ÚÚE R
,
ÚÚR S
fechaActual
ÚÚT _
.
ÚÚ_ `
ToString
ÚÚ` h
(
ÚÚh i
)
ÚÚi j
)
ÚÚj k
;
ÚÚk l
	rptviewer
ıı 
.
ıı 
LocalReport
ıı !
.
ıı! "

ReportPath
ıı" ,
=
ıı- .
Request
ıı/ 6
.
ıı6 7
MapPath
ıı7 >
(
ıı> ?
Request
ıı? F
.
ııF G
ApplicationPath
ııG V
)
ııV W
+
ııX Y
$strııZ ñ
;ııñ ó
	rptviewer
ˆˆ 
.
ˆˆ 
LocalReport
ˆˆ !
.
ˆˆ! "
SetParameters
ˆˆ" /
(
ˆˆ/ 0
new
ˆˆ0 3
ReportParameter
ˆˆ4 C
[
ˆˆC D
]
ˆˆD E
{
ˆˆF G!
parametroFechaDesde
ˆˆH [
,
ˆˆ[ \!
parametroFechaHasta
ˆˆ] p
,
ˆˆp q
nombreEmpresa
ˆˆr 
,ˆˆ Ä$
nombreCentroAtencionˆˆÅ ï
,ˆˆï ñ
logoSedeˆˆó ü
,ˆˆü †
empleadoSedeˆˆ° ≠
,ˆˆ≠ Æ"
fechaActualSistemaˆˆØ ¡
}ˆˆ¬ √
)ˆˆ√ ƒ
;ˆˆƒ ≈
ReportDataSource
¯¯ 3
%rptdatasourceTransmitidasYConfirmadas
¯¯ B
=
¯¯C D
new
¯¯E H
ReportDataSource
¯¯I Y
(
¯¯Y Z
$str
¯¯Z {
,
¯¯{ |D
5ResumenPorSerieYConeptoBasicoTransmitidasYConfirmadas¯¯} ≤
)¯¯≤ ≥
;¯¯≥ ¥
ReportDataSource
˘˘ &
rptdatasourceInvalidadas
˘˘ 5
=
˘˘6 7
new
˘˘8 ;
ReportDataSource
˘˘< L
(
˘˘L M
$str
˘˘M a
,
˘˘a b7
(ResumenPorSerieYConeptoBasicoInvalidadas˘˘c ã
)˘˘ã å
;˘˘å ç
	rptviewer
¸¸ 
.
¸¸ 
ProcessingMode
¸¸ $
=
¸¸% &
ProcessingMode
¸¸' 5
.
¸¸5 6
Local
¸¸6 ;
;
¸¸; <
	rptviewer
˝˝ 
.
˝˝ 
LocalReport
˝˝ !
.
˝˝! "
DataSources
˝˝" -
.
˝˝- .
Add
˝˝. 1
(
˝˝1 23
%rptdatasourceTransmitidasYConfirmadas
˝˝2 W
)
˝˝W X
;
˝˝X Y
	rptviewer
˛˛ 
.
˛˛ 
LocalReport
˛˛ !
.
˛˛! "
DataSources
˛˛" -
.
˛˛- .
Add
˛˛. 1
(
˛˛1 2&
rptdatasourceInvalidadas
˛˛2 J
)
˛˛J K
;
˛˛K L
	rptviewer
ÄÄ 
.
ÄÄ !
SizeToReportContent
ÄÄ )
=
ÄÄ* +
true
ÄÄ, 0
;
ÄÄ0 1
	rptviewer
ÅÅ 
.
ÅÅ 
Width
ÅÅ 
=
ÅÅ 
Unit
ÅÅ "
.
ÅÅ" #

Percentage
ÅÅ# -
(
ÅÅ- .
$num
ÅÅ. 1
)
ÅÅ1 2
;
ÅÅ2 3
	rptviewer
ÇÇ 
.
ÇÇ 
Height
ÇÇ 
=
ÇÇ 
Unit
ÇÇ #
.
ÇÇ# $

Percentage
ÇÇ$ .
(
ÇÇ. /
$num
ÇÇ/ 2
)
ÇÇ2 3
;
ÇÇ3 4
ViewBag
ÉÉ 
.
ÉÉ 
ReportViewer
ÉÉ  
=
ÉÉ! "
	rptviewer
ÉÉ# ,
;
ÉÉ, -
return
ÑÑ 
View
ÑÑ 
(
ÑÑ 
$str
ÑÑ -
)
ÑÑ- .
;
ÑÑ. /
}
ÖÖ 	
public
àà 
ActionResult
àà :
,ReportePorSerieYConceptoDeUnSoloPuntoDeVenta
àà H
(
ààH I
string
ààI O
fechaInicio
ààP [
,
àà[ \
string
àà] c
fechaFin
ààd l
)
ààl m
{
ââ 	
DateTime
ää 

fechaDesde
ää 
=
ää  !
DateTimeUtil
ää" .
.
ää. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ää/ Z
(
ääZ [
fechaInicio
ää[ f
)
ääf g
;
ääg h
DateTime
ãã 

fechaHasta
ãã 
=
ãã  !
DateTimeUtil
ãã" .
.
ãã. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
ãã/ Z
(
ããZ [
fechaFin
ãã[ c
)
ããc d
;
ããd e
List
èè 
<
èè >
0Resumen_Transaccion_Por_Serie_y_Concepto_Negocio
èè A
>
èèA B<
.ResumenPorSerieYConceptoTransmitidoYConfirmado
èèC q
=
èèr s
operacionLogicaèèt É
.èèÉ ÑF
6ObtenerResumenVentasConSerieYConceptoNegocioConfirmadaèèÑ ∫
(èè∫ ª
ProfileDataèèª ∆
(èè∆ «
)èè« »
.èè» ….
IdCentroDeAtencionSeleccionadoèè… Á
,èèÁ Ë

fechaDesdeèèÈ Û
,èèÛ Ù

fechaHastaèèı ˇ
)èèˇ Ä
;èèÄ Å
List
êê 
<
êê <
.Resumen_Transaccion_Por_Serie_y_ConceptoBasico
êê ?
>
êê? @A
3ResumenPorSerieYConeptoBasicoTransmitidoYConfirmado
êêA t
=
êêu v
operacionLogicaêêw Ü
.êêÜ áQ
AObtenerResumenVentasConSerieYConceptoBasicoConfirmadaYTransmitidaêêá »
(êê» …
ProfileDataêê… ‘
(êê‘ ’
)êê’ ÷
.êê÷ ◊.
IdCentroDeAtencionSeleccionadoêê◊ ı
,êêı ˆ

fechaDesdeêê˜ Å
,êêÅ Ç

fechaHastaêêÉ ç
)êêç é
;êêé è
List
ëë 
<
ëë >
0Resumen_Transaccion_Por_Serie_y_Concepto_Negocio
ëë A
>
ëëA B/
!ResumenPorSerieYConceptoInvalidos
ëëC d
=
ëëe f
operacionLogica
ëëg v
.
ëëv wF
7ObtenerResumenVentasConSerieYConceptoNegocioInvalidadasëëw Æ
(ëëÆ Ø
ProfileDataëëØ ∫
(ëë∫ ª
)ëëª º
.ëëº Ω.
IdCentroDeAtencionSeleccionadoëëΩ €
,ëë€ ‹

fechaDesdeëë› Á
,ëëÁ Ë

fechaHastaëëÈ Û
)ëëÛ Ù
;ëëÙ ı
List
íí 
<
íí <
.Resumen_Transaccion_Por_Serie_y_ConceptoBasico
íí ?
>
íí? @4
&ResumenPorSerieYConeptoBasicoInvalidos
ííA g
=
ííh i
operacionLogica
ííj y
.
ííy zE
6ObtenerResumenVentasConSerieYConceptoBasicoInvalidadasííz ∞
(íí∞ ±
ProfileDataíí± º
(ííº Ω
)ííΩ æ
.ííæ ø.
IdCentroDeAtencionSeleccionadoííø ›
,íí› ﬁ

fechaDesdeííﬂ È
,ííÈ Í

fechaHastaííÎ ı
)ííı ˆ
;ííˆ ˜
var
ïï 
	rptviewer
ïï 
=
ïï 
new
ïï 
ReportViewer
ïï  ,
(
ïï, -
)
ïï- .
;
ïï. /
ReportParameter
ññ !
parametroFechaDesde
ññ /
=
ññ0 1
new
ññ2 5
ReportParameter
ññ6 E
(
ññE F
$str
ññF R
,
ññR S

fechaDesde
ññT ^
.
ññ^ _
ToString
ññ_ g
(
ññg h
)
ññh i
)
ññi j
;
ññj k
ReportParameter
óó !
parametroFechaHasta
óó /
=
óó0 1
new
óó2 5
ReportParameter
óó6 E
(
óóE F
$str
óóF R
,
óóR S

fechaHasta
óóT ^
.
óó^ _
ToString
óó_ g
(
óóg h
)
óóh i
)
óói j
;
óój k
ReportParameter
òò 
nombreEmpresa
òò )
=
òò* +
new
òò, /
ReportParameter
òò0 ?
(
òò? @
$str
òò@ L
,
òòL M
ObtenerSede
òòN Y
(
òòY Z
)
òòZ [
.
òò[ \
Nombre
òò\ b
)
òòb c
;
òòc d
ReportParameter
ôô "
nombreCentroAtencion
ôô 0
=
ôô1 2
new
ôô3 6
ReportParameter
ôô7 F
(
ôôF G
$str
ôôG ]
,
ôô] ^
ProfileData
ôô_ j
(
ôôj k
)
ôôk l
.
ôôl m1
"NombreCentroDeAtencionSeleccionadoôôm è
)ôôè ê
;ôôê ë6
(EstablecimientoComercialExtendidoConLogo
õõ 4
sede
õõ5 9
=
õõ: ;
ObtenerSede
õõ< G
(
õõG H
)
õõH I
;
õõI J
string
úú 

logoString
úú 
=
úú 
Convert
úú  '
.
úú' (
ToBase64String
úú( 6
(
úú6 7
sede
úú7 ;
.
úú; <
Logo
úú< @
,
úú@ A
$num
úúB C
,
úúC D
sede
úúE I
.
úúI J
Logo
úúJ N
.
úúN O
Length
úúO U
)
úúU V
;
úúV W
ReportParameter
ùù 
logoSede
ùù $
=
ùù% &
new
ùù' *
ReportParameter
ùù+ :
(
ùù: ;
$str
ùù; E
,
ùùE F

logoString
ùùG Q
)
ùùQ R
;
ùùR S
ReportParameter
üü 
empleadoSede
üü (
=
üü) *
new
üü+ .
ReportParameter
üü/ >
(
üü> ?
$str
üü? H
,
üüH I
ProfileData
üüJ U
(
üüU V
)
üüV W
.
üüW X
Empleado
üüX `
.
üü` a
NombresYApellidos
üüa r
)
üür s
;
üüs t
DateTime
°° 
fechaActual
°°  
=
°°! "
DateTimeUtil
°°# /
.
°°/ 0
FechaActual
°°0 ;
(
°°; <
)
°°< =
;
°°= >
ReportParameter
¢¢  
fechaActualSistema
¢¢ .
=
¢¢/ 0
new
¢¢1 4
ReportParameter
¢¢5 D
(
¢¢D E
$str
¢¢E R
,
¢¢R S
fechaActual
¢¢T _
.
¢¢_ `
ToString
¢¢` h
(
¢¢h i
)
¢¢i j
)
¢¢j k
;
¢¢k l
	rptviewer
§§ 
.
§§ 
LocalReport
§§ !
.
§§! "

ReportPath
§§" ,
=
§§- .
Request
§§/ 6
.
§§6 7
MapPath
§§7 >
(
§§> ?
Request
§§? F
.
§§F G
ApplicationPath
§§G V
)
§§V W
+
§§X Y
$str§§Z ñ
;§§ñ ó
	rptviewer
•• 
.
•• 
LocalReport
•• !
.
••! "
SetParameters
••" /
(
••/ 0
new
••0 3
ReportParameter
••4 C
[
••C D
]
••D E
{
••F G!
parametroFechaDesde
••H [
,
••[ \!
parametroFechaHasta
••] p
,
••p q
nombreEmpresa
••r 
,•• Ä$
nombreCentroAtencion••Å ï
,••ï ñ
logoSede••ó ü
,••ü †
empleadoSede••° ≠
,••≠ Æ"
fechaActualSistema••Ø ¡
}••¬ √
)••√ ƒ
;••ƒ ≈
ReportDataSource
ßß >
0rptdatasourceSerieConceptoTransmitidoYConfirmado
ßß M
=
ßßN O
new
ßßP S
ReportDataSource
ßßT d
(
ßßd e
$strßße ú
,ßßú ù>
.ResumenPorSerieYConceptoTransmitidoYConfirmadoßßû Ã
)ßßÃ Õ
;ßßÕ Œ
ReportDataSource
®® D
6rptdatasourceSerieConceptoBasicoTransmitidoYConfirmado
®® S
=
®®T U
new
®®V Y
ReportDataSource
®®Z j
(
®®j k
$str®®k °
,®®° ¢C
3ResumenPorSerieYConeptoBasicoTransmitidoYConfirmado®®£ ÷
)®®÷ ◊
;®®◊ ÿ
ReportDataSource
©© 2
$rptdatasourceSerieConceptoInvalidado
©© A
=
©©B C
new
©©D G
ReportDataSource
©©H X
(
©©X Y
$str©©Y Ñ
,©©Ñ Ö1
!ResumenPorSerieYConceptoInvalidos©©Ü ß
)©©ß ®
;©©® ©
ReportDataSource
™™ 8
*rptdatasourceSerieConceptoBasicoInvalidado
™™ G
=
™™H I
new
™™J M
ReportDataSource
™™N ^
(
™™^ _
$str™™_ â
,™™â ä6
&ResumenPorSerieYConeptoBasicoInvalidos™™ã ±
)™™± ≤
;™™≤ ≥
	rptviewer
≠≠ 
.
≠≠ 
ProcessingMode
≠≠ $
=
≠≠% &
ProcessingMode
≠≠' 5
.
≠≠5 6
Local
≠≠6 ;
;
≠≠; <
	rptviewer
ØØ 
.
ØØ 
LocalReport
ØØ !
.
ØØ! "
DataSources
ØØ" -
.
ØØ- .
Add
ØØ. 1
(
ØØ1 2>
0rptdatasourceSerieConceptoTransmitidoYConfirmado
ØØ2 b
)
ØØb c
;
ØØc d
	rptviewer
∞∞ 
.
∞∞ 
LocalReport
∞∞ !
.
∞∞! "
DataSources
∞∞" -
.
∞∞- .
Add
∞∞. 1
(
∞∞1 2D
6rptdatasourceSerieConceptoBasicoTransmitidoYConfirmado
∞∞2 h
)
∞∞h i
;
∞∞i j
	rptviewer
±± 
.
±± 
LocalReport
±± !
.
±±! "
DataSources
±±" -
.
±±- .
Add
±±. 1
(
±±1 22
$rptdatasourceSerieConceptoInvalidado
±±2 V
)
±±V W
;
±±W X
	rptviewer
≤≤ 
.
≤≤ 
LocalReport
≤≤ !
.
≤≤! "
DataSources
≤≤" -
.
≤≤- .
Add
≤≤. 1
(
≤≤1 28
*rptdatasourceSerieConceptoBasicoInvalidado
≤≤2 \
)
≤≤\ ]
;
≤≤] ^
	rptviewer
µµ 
.
µµ !
SizeToReportContent
µµ )
=
µµ* +
true
µµ, 0
;
µµ0 1
	rptviewer
∂∂ 
.
∂∂ 
Width
∂∂ 
=
∂∂ 
Unit
∂∂ "
.
∂∂" #

Percentage
∂∂# -
(
∂∂- .
$num
∂∂. 1
)
∂∂1 2
;
∂∂2 3
	rptviewer
∑∑ 
.
∑∑ 
Height
∑∑ 
=
∑∑ 
Unit
∑∑ #
.
∑∑# $

Percentage
∑∑$ .
(
∑∑. /
$num
∑∑/ 2
)
∑∑2 3
;
∑∑3 4
ViewBag
∏∏ 
.
∏∏ 
ReportViewer
∏∏  
=
∏∏! "
	rptviewer
∏∏# ,
;
∏∏, -
return
ππ 
View
ππ 
(
ππ 
$str
ππ -
)
ππ- .
;
ππ. /
}
∫∫ 	
public
øø 
ActionResult
øø @
2ReporteDeVentaDeLosPuntosDeVentaPorIntervaloDiario
øø N
(
øøN O
string
øøO U
fechaInicio
øøV a
,
øøa b
string
øøc i
fechaFin
øøj r
,
øør s
[
øøt u
System
øøu {
.
øø{ |
Web
øø| 
.øø Ä
HttpøøÄ Ñ
.øøÑ Ö
FromUriøøÖ å
]øøå ç
intøøé ë
[øøë í
]øøí ì!
idsPuntosDeVentasøøî •
)øø• ¶
{
¿¿ 	
DateTime
¬¬ 

fechaDesde
¬¬ 
=
¬¬  !
DateTimeUtil
¬¬" .
.
¬¬. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
¬¬/ Z
(
¬¬Z [
fechaInicio
¬¬[ f
)
¬¬f g
;
¬¬g h
DateTime
√√ 

fechaHasta
√√ 
=
√√  !
DateTimeUtil
√√" .
.
√√. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
√√/ Z
(
√√Z [
fechaFin
√√[ c
)
√√c d
;
√√d e
List
∆∆ 
<
∆∆ ?
1TransaccionAgrupadoPorSerieConNumeracionInicioFin
∆∆ B
>
∆∆B C
ventasConfirmada
∆∆D T
=
∆∆U V
operacionLogica
∆∆W f
.
∆∆f ge
VObtenerResumenDeComprobantesConfirmadosDeOperacionesDeVentasPorSeriePorIntervaloDiario∆∆g Ω
(∆∆Ω æ!
idsPuntosDeVentas∆∆æ œ
,∆∆œ –

fechaDesde∆∆— €
,∆∆€ ‹

fechaHasta∆∆› Á
)∆∆Á Ë
;∆∆Ë È
List
«« 
<
«« A
3TransaccionAgrupadoPorSerieConNumeracionConcatenada
«« D
>
««D E
ventasInvalidada
««F V
=
««W X
operacionLogica
««Y h
.
««h ie
VObtenerResumenDeComprobantesInvalidadosDeOperacionesDeVentasPorSeriePorIntervaloDiario««i ø
(««ø ¿!
idsPuntosDeVentas««¿ —
,««— “

fechaDesde««” ›
,««› ﬁ

fechaHasta««ﬂ È
)««È Í
;««Í Î
string
…… %
_nombresCentrosAtencion
…… *
=
……+ ,
$str
……- /
;
……/ 0
foreach
ÀÀ 
(
ÀÀ 
var
ÀÀ 
idPuntoDeVenta
ÀÀ '
in
ÀÀ( *
idsPuntosDeVentas
ÀÀ+ <
)
ÀÀ< =
{
ÃÃ 
string
ÕÕ #
_nombreCentroAtencion
ÕÕ ,
=
ÕÕ- .#
centroDeAtencionDatos
ÕÕ/ D
.
ÕÕD E-
ObtenerNombreDeCentroDeAtencion
ÕÕE d
(
ÕÕd e
idPuntoDeVenta
ÕÕe s
)
ÕÕs t
;
ÕÕt u%
_nombresCentrosAtencion
ŒŒ '
+=
ŒŒ( *
$str
ŒŒ+ 1
+
ŒŒ2 3#
_nombreCentroAtencion
ŒŒ4 I
;
ŒŒI J
}
œœ 
ReportParameter
—— !
parametroFechaDesde
—— /
=
——0 1
new
——2 5
ReportParameter
——6 E
(
——E F
$str
——F R
,
——R S

fechaDesde
——T ^
.
——^ _
ToString
——_ g
(
——g h
)
——h i
)
——i j
;
——j k
ReportParameter
““ !
parametroFechaHasta
““ /
=
““0 1
new
““2 5
ReportParameter
““6 E
(
““E F
$str
““F R
,
““R S

fechaHasta
““T ^
.
““^ _
ToString
““_ g
(
““g h
)
““h i
)
““i j
;
““j k
ReportParameter
”” 
nombreEmpresa
”” )
=
””* +
new
””, /
ReportParameter
””0 ?
(
””? @
$str
””@ L
,
””L M
ObtenerSede
””N Y
(
””Y Z
)
””Z [
.
””[ \
Nombre
””\ b
)
””b c
;
””c d
ReportParameter
‘‘ "
nombreCentroAtencion
‘‘ 0
=
‘‘1 2
new
‘‘3 6
ReportParameter
‘‘7 F
(
‘‘F G
$str
‘‘G ]
,
‘‘] ^%
_nombresCentrosAtencion
‘‘_ v
)
‘‘v w
;
‘‘w x6
(EstablecimientoComercialExtendidoConLogo
÷÷ 4
sede
÷÷5 9
=
÷÷: ;
ObtenerSede
÷÷< G
(
÷÷G H
)
÷÷H I
;
÷÷I J
string
◊◊ 

logoString
◊◊ 
=
◊◊ 
Convert
◊◊  '
.
◊◊' (
ToBase64String
◊◊( 6
(
◊◊6 7
sede
◊◊7 ;
.
◊◊; <
Logo
◊◊< @
,
◊◊@ A
$num
◊◊B C
,
◊◊C D
sede
◊◊E I
.
◊◊I J
Logo
◊◊J N
.
◊◊N O
Length
◊◊O U
)
◊◊U V
;
◊◊V W
ReportParameter
ÿÿ 
logoSede
ÿÿ $
=
ÿÿ% &
new
ÿÿ' *
ReportParameter
ÿÿ+ :
(
ÿÿ: ;
$str
ÿÿ; E
,
ÿÿE F

logoString
ÿÿG Q
)
ÿÿQ R
;
ÿÿR S
ReportParameter
⁄⁄ 
empleadoSede
⁄⁄ (
=
⁄⁄) *
new
⁄⁄+ .
ReportParameter
⁄⁄/ >
(
⁄⁄> ?
$str
⁄⁄? H
,
⁄⁄H I
ProfileData
⁄⁄J U
(
⁄⁄U V
)
⁄⁄V W
.
⁄⁄W X
Empleado
⁄⁄X `
.
⁄⁄` a
NombresYApellidos
⁄⁄a r
)
⁄⁄r s
;
⁄⁄s t
DateTime
‹‹ 
fechaActual
‹‹  
=
‹‹! "
DateTimeUtil
‹‹# /
.
‹‹/ 0
FechaActual
‹‹0 ;
(
‹‹; <
)
‹‹< =
;
‹‹= >
ReportParameter
››  
fechaActualSistema
›› .
=
››/ 0
new
››1 4
ReportParameter
››5 D
(
››D E
$str
››E R
,
››R S
fechaActual
››T _
.
››_ `
ToString
››` h
(
››h i
)
››i j
)
››j k
;
››k l
var
ﬂﬂ 
	rptviewer
ﬂﬂ 
=
ﬂﬂ 
new
ﬂﬂ 
ReportViewer
ﬂﬂ  ,
(
ﬂﬂ, -
)
ﬂﬂ- .
;
ﬂﬂ. /
	rptviewer
‡‡ 
.
‡‡ 
LocalReport
‡‡ !
.
‡‡! "

ReportPath
‡‡" ,
=
‡‡- .
Request
‡‡/ 6
.
‡‡6 7
MapPath
‡‡7 >
(
‡‡> ?
Request
‡‡? F
.
‡‡F G
ApplicationPath
‡‡G V
)
‡‡V W
+
‡‡X Y
$str‡‡Z ô
;‡‡ô ö
	rptviewer
·· 
.
·· 
LocalReport
·· !
.
··! "
SetParameters
··" /
(
··/ 0
new
··0 3
ReportParameter
··4 C
[
··C D
]
··D E
{
··F G
nombreEmpresa
··H U
,
··U V"
nombreCentroAtencion
··W k
,
··k l"
parametroFechaDesde··m Ä
,··Ä Å#
parametroFechaHasta··Ç ï
,··ï ñ
logoSede··ó ü
,··ü †"
fechaActualSistema··° ≥
,··≥ ¥
empleadoSede··µ ¡
}··¬ √
)··√ ƒ
;··ƒ ≈
ReportDataSource
„„ %
rptdatasourceConfirmada
„„ 4
=
„„5 6
new
„„7 :
ReportDataSource
„„; K
(
„„K L
$str
„„L _
,
„„_ `
ventasConfirmada
„„a q
)
„„q r
;
„„r s
ReportDataSource
‰‰ %
rptdatasourceInvalidada
‰‰ 4
=
‰‰5 6
new
‰‰7 :
ReportDataSource
‰‰; K
(
‰‰K L
$str
‰‰L _
,
‰‰_ `
ventasInvalidada
‰‰a q
)
‰‰q r
;
‰‰r s
	rptviewer
ÊÊ 
.
ÊÊ 
LocalReport
ÊÊ !
.
ÊÊ! "
DataSources
ÊÊ" -
.
ÊÊ- .
Add
ÊÊ. 1
(
ÊÊ1 2%
rptdatasourceConfirmada
ÊÊ2 I
)
ÊÊI J
;
ÊÊJ K
	rptviewer
ÁÁ 
.
ÁÁ 
LocalReport
ÁÁ !
.
ÁÁ! "
DataSources
ÁÁ" -
.
ÁÁ- .
Add
ÁÁ. 1
(
ÁÁ1 2%
rptdatasourceInvalidada
ÁÁ2 I
)
ÁÁI J
;
ÁÁJ K
	rptviewer
ÈÈ 
.
ÈÈ 
ProcessingMode
ÈÈ $
=
ÈÈ% &
ProcessingMode
ÈÈ' 5
.
ÈÈ5 6
Local
ÈÈ6 ;
;
ÈÈ; <
	rptviewer
ÍÍ 
.
ÍÍ !
SizeToReportContent
ÍÍ )
=
ÍÍ* +
true
ÍÍ, 0
;
ÍÍ0 1
ViewBag
ÏÏ 
.
ÏÏ 
ReportViewer
ÏÏ  
=
ÏÏ! "
	rptviewer
ÏÏ# ,
;
ÏÏ, -
return
ÌÌ 
View
ÌÌ 
(
ÌÌ 
$str
ÌÌ -
)
ÌÌ- .
;
ÌÌ. /
}
ÓÓ 	
public
¯¯ 

JsonResult
¯¯ )
RegistrarCanjeDeComprobante
¯¯ 5
(
¯¯5 6
List
¯¯6 :
<
¯¯: ;
long
¯¯; ?
>
¯¯? @

idsOrdenes
¯¯A K
,
¯¯K L'
SelectorTipoDeComprobante
¯¯M f
tipoDeComprobante
¯¯g x
)
¯¯x y
{
˘˘ 	
try
˙˙ 
{
˚˚ 
OperationResult
¸¸ 
result
¸¸  &
=
¸¸' (
operacionLogica
¸¸) 8
.
¸¸8 9)
RegistrarCanjeDeComprobante
¸¸9 T
(
¸¸T U
ProfileData
¸¸U `
(
¸¸` a
)
¸¸a b
.
¸¸b c
Empleado
¸¸c k
.
¸¸k l
Id
¸¸l n
,
¸¸n o
ProfileData
¸¸p {
(
¸¸{ |
)
¸¸| }
.
¸¸} ~-
IdCentroDeAtencionSeleccionado¸¸~ ú
,¸¸ú ù

idsOrdenes¸¸û ®
,¸¸® ©!
tipoDeComprobante¸¸™ ª
.¸¸ª º
TipoComprobante¸¸º À
.¸¸À Ã
Id¸¸Ã Œ
,¸¸Œ œ!
tipoDeComprobante¸¸– ·
.¸¸· ‚!
SerieSeleccionada¸¸‚ Û
,¸¸Û Ù!
tipoDeComprobante¸¸ı Ü
.¸¸Ü á
NumeroIngresado¸¸á ñ
)¸¸ñ ó
;¸¸ó ò
Util
˝˝ 
.
˝˝ (
ManageIfResultIsNotSuccess
˝˝ /
(
˝˝/ 0
result
˝˝0 6
,
˝˝6 7
$str
˝˝8 ]
)
˝˝] ^
;
˝˝^ _
return
ˇˇ 
Json
ˇˇ 
(
ˇˇ 
new
ˇˇ 
{
ˇˇ  !
result
ˇˇ" (
.
ˇˇ( )
code_result
ˇˇ) 4
,
ˇˇ4 5
data
ˇˇ6 :
=
ˇˇ; <
result
ˇˇ= C
.
ˇˇC D
information
ˇˇD O
,
ˇˇO P 
result_description
ˇˇQ c
=
ˇˇd e
result
ˇˇf l
.
ˇˇl m
title
ˇˇm r
}
ˇˇs t
)
ˇˇt u
;
ˇˇu v
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ 
LogicaException
ÅÅ "
oe
ÅÅ# %
)
ÅÅ% &
{
ÇÇ 
return
ÉÉ 
new
ÉÉ "
JsonHttpStatusResult
ÉÉ /
(
ÉÉ/ 0
Util
ÉÉ0 4
.
ÉÉ4 5
	ErrorJson
ÉÉ5 >
(
ÉÉ> ?
oe
ÉÉ? A
)
ÉÉA B
,
ÉÉB C
HttpStatusCode
ÉÉD R
.
ÉÉR S!
InternalServerError
ÉÉS f
)
ÉÉf g
;
ÉÉg h
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ 
	Exception
ÖÖ 
e
ÖÖ 
)
ÖÖ 
{
ÜÜ 
return
áá 
new
áá "
JsonHttpStatusResult
áá /
(
áá/ 0
Util
áá0 4
.
áá4 5
	ErrorJson
áá5 >
(
áá> ?
new
áá? B
	Exception
ááC L
(
ááL M
$str
ááM q
,
ááq r
e
áás t
)
áát u
)
ááu v
,
ááv w
HttpStatusCodeááx Ü
.ááÜ á#
InternalServerErrorááá ö
)ááö õ
;ááõ ú
}
àà 
}
ââ 	
public
çç 
void
çç 9
+GuardarOrdenDeVentaParaImprimirEnAplicacion
çç ?
(
çç? @
OrdenDeVenta
çç@ L
ordenDeVenta
ççM Y
)
ççY Z
{
éé 	
List
íí 
<
íí 
OrdenDeVenta
íí 
>
íí 
ordenesDeVenta
íí -
=
íí. /
(
íí0 1
List
íí1 5
<
íí5 6
OrdenDeVenta
íí6 B
>
ííB C
)
ííC D
System
ííD J
.
ííJ K
Web
ííK N
.
ííN O
HttpContext
ííO Z
.
ííZ [
Current
íí[ b
.
ííb c
Application
ííc n
[
íín o
$stríío Ä
]ííÄ Å
??ííÇ Ñ
newííÖ à
Listííâ ç
<ííç é
OrdenDeVentaííé ö
>ííö õ
(ííõ ú
)ííú ù
;ííù û
ordenesDeVenta
îî 
.
îî 
Add
îî 
(
îî 
ordenDeVenta
îî +
)
îî+ ,
;
îî, -
System
ññ 
.
ññ 
Web
ññ 
.
ññ 
HttpContext
ññ "
.
ññ" #
Current
ññ# *
.
ññ* +
Application
ññ+ 6
.
ññ6 7
Lock
ññ7 ;
(
ññ; <
)
ññ< =
;
ññ= >
System
óó 
.
óó 
Web
óó 
.
óó 
HttpContext
óó "
.
óó" #
Current
óó# *
.
óó* +
Application
óó+ 6
[
óó6 7
$str
óó7 H
]
óóH I
=
óóJ K
ordenesDeVenta
óóL Z
;
óóZ [
System
òò 
.
òò 
Web
òò 
.
òò 
HttpContext
òò "
.
òò" #
Current
òò# *
.
òò* +
Application
òò+ 6
.
òò6 7
UnLock
òò7 =
(
òò= >
)
òò> ?
;
òò? @
}
ôô 	
public
õõ 
OrdenDeVenta
õõ 9
+ObtenerOrdenDeVentaParaImprimirEnAplicacion
õõ G
(
õõG H
long
õõH L
idOrdenDeVenta
õõM [
)
õõ[ \
{
úú 	
List
ûû 
<
ûû 
OrdenDeVenta
ûû 
>
ûû 
ordenesDeVenta
ûû -
=
ûû. /
(
ûû0 1
List
ûû1 5
<
ûû5 6
OrdenDeVenta
ûû6 B
>
ûûB C
)
ûûC D
System
ûûD J
.
ûûJ K
Web
ûûK N
.
ûûN O
HttpContext
ûûO Z
.
ûûZ [
Current
ûû[ b
.
ûûb c
Application
ûûc n
[
ûûn o
$strûûo Ä
]ûûÄ Å
;ûûÅ Ç
OrdenDeVenta
†† 
ordenDeVenta
†† %
=
††& '
ordenesDeVenta
††( 6
.
††6 7
Single
††7 =
(
††= >
ov
††> @
=>
††A C
ov
††D F
.
††F G
Id
††G I
==
††J L
idOrdenDeVenta
††M [
)
††[ \
;
††\ ]
return
¢¢ 
ordenDeVenta
¢¢ 
;
¢¢  
}
££ 	
public
•• 
void
•• :
,EliminarOrdenDeVentaParaImprimirEnAplicacion
•• @
(
••@ A
long
••A E
idOrdenDeVenta
••F T
)
••T U
{
¶¶ 	
List
®® 
<
®® 
OrdenDeVenta
®® 
>
®® 
ordenesDeVenta
®® -
=
®®. /
(
®®0 1
List
®®1 5
<
®®5 6
OrdenDeVenta
®®6 B
>
®®B C
)
®®C D
System
®®D J
.
®®J K
Web
®®K N
.
®®N O
HttpContext
®®O Z
.
®®Z [
Current
®®[ b
.
®®b c
Application
®®c n
[
®®n o
$str®®o Ä
]®®Ä Å
;®®Å Ç
ordenesDeVenta
™™ 
.
™™ 
Remove
™™ !
(
™™! "
ordenesDeVenta
™™" 0
.
™™0 1
Single
™™1 7
(
™™7 8
ov
™™8 :
=>
™™; =
ov
™™> @
.
™™@ A
Id
™™A C
==
™™D F
idOrdenDeVenta
™™G U
)
™™U V
)
™™V W
;
™™W X
System
¨¨ 
.
¨¨ 
Web
¨¨ 
.
¨¨ 
HttpContext
¨¨ "
.
¨¨" #
Current
¨¨# *
.
¨¨* +
Application
¨¨+ 6
.
¨¨6 7
Lock
¨¨7 ;
(
¨¨; <
)
¨¨< =
;
¨¨= >
System
≠≠ 
.
≠≠ 
Web
≠≠ 
.
≠≠ 
HttpContext
≠≠ "
.
≠≠" #
Current
≠≠# *
.
≠≠* +
Application
≠≠+ 6
[
≠≠6 7
$str
≠≠7 H
]
≠≠H I
=
≠≠J K
ordenesDeVenta
≠≠L Z
;
≠≠Z [
System
ÆÆ 
.
ÆÆ 
Web
ÆÆ 
.
ÆÆ 
HttpContext
ÆÆ "
.
ÆÆ" #
Current
ÆÆ# *
.
ÆÆ* +
Application
ÆÆ+ 6
.
ÆÆ6 7
UnLock
ÆÆ7 =
(
ÆÆ= >
)
ÆÆ> ?
;
ÆÆ? @
}
ØØ 	
public
≤≤ 
ActionResult
≤≤ $
ObtenerPuntosDeCliente
≤≤ 2
(
≤≤2 3
int
≤≤3 6
	idCliente
≤≤7 @
)
≤≤@ A
{
≥≥ 	
try
¥¥ 
{
µµ 
PuntosDeCliente
∂∂ 
	resultado
∂∂  )
=
∂∂* +
operacionLogica
∂∂, ;
.
∂∂; <$
ObtenerPuntosDeCliente
∂∂< R
(
∂∂R S
	idCliente
∂∂S \
)
∂∂\ ]
;
∂∂] ^
return
∑∑ 
Json
∑∑ 
(
∑∑ 
	resultado
∑∑ %
)
∑∑% &
;
∑∑& '
}
∏∏ 
catch
ππ 
(
ππ 
	Exception
ππ 
e
ππ 
)
ππ 
{
∫∫ 
return
ªª 
new
ªª "
JsonHttpStatusResult
ªª /
(
ªª/ 0
Util
ªª0 4
.
ªª4 5
	ErrorJson
ªª5 >
(
ªª> ?
new
ªª? B
	Exception
ªªC L
(
ªªL M
$str
ªªM z
,
ªªz {
e
ªª| }
)
ªª} ~
)
ªª~ 
,ªª Ä
HttpStatusCodeªªÅ è
.ªªè ê#
InternalServerErrorªªê £
)ªª£ §
;ªª§ •
}
ºº 
}
ΩΩ 	
public
¿¿ 
PdfDocument
¿¿ 
ObtenerPdfVenta
¿¿ *
(
¿¿* +
OrdenDeVenta
¿¿+ 7
ordenDeVenta
¿¿8 D
,
¿¿D E6
(EstablecimientoComercialExtendidoConLogo
¿¿F n
sede
¿¿o s
,
¿¿s t
byte
¿¿u y
[
¿¿y z
]
¿¿z {
qrBytes¿¿| É
,¿¿É Ñ 
FormatoImpresion¿¿Ö ï
formato¿¿ñ ù
)¿¿ù û
{
¡¡ 	
string
¬¬ 

htmlString
¬¬ 
=
¬¬ #
CoreHtmlStringBuilder
¬¬  5
.
¬¬5 6
ObtenerHtmlString
¬¬6 G
(
¬¬G H
ordenDeVenta
¬¬H T
,
¬¬T U
formato
¬¬V ]
,
¬¬] ^
qrBytes
¬¬_ f
,
¬¬f g
sede
¬¬h l
,
¬¬l m
this
¬¬n r
,
¬¬r s
maestroLogica¬¬t Å
)¬¬Å Ç
;¬¬Ç É
return
√√ 
pdfUtil
√√ 
.
√√ !
ObtenerPdfDocumento
√√ .
(
√√. /

htmlString
√√/ 9
,
√√9 :
formato
√√; B
)
√√B C
;
√√C D
}
ƒƒ 	
}
≈≈ 
}∆∆ Œ€
XD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\ComprobanteController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class !
ComprobanteController &
:' (
BaseController) 7
{ 
private 
readonly 
IMaestroLogica '
maestroLogica( 5
;5 6
private 
readonly 
IConceptoLogica (
conceptoLogica) 7
;7 8
private   
readonly   
IOperacionLogica   )
operacionLogica  * 9
;  9 :
private!! 
readonly!! 
IActorNegocioLogica!! ,
actorNegocioLogica!!- ?
;!!? @
private"" 
readonly""  
IConfiguracionLogica"" -
configuracionLogica"". A
;""A B
private## 
readonly## %
IGeneracionArchivosLogica## 2$
generacionArchivosLogica##3 K
;##K L
private$$ 
readonly$$ )
IFacturacionElectronicaLogica$$ 6(
facturacionElectronicaLogica$$7 S
;$$S T
private%% 
readonly%% 
IBarCodeUtil%% %
barCodeUtil%%& 1
;%%1 2
private&& 
readonly&& 
IPdfUtil&& !
pdfUtil&&" )
;&&) *
private'' 
readonly'' 
IMailer''  
mailer''! '
;''' (
private(( 
readonly(( 
ISede_Logica(( %

sedeLogica((& 0
;((0 1
public** !
ComprobanteController** $
(**$ %
)**% &
{++ 	
maestroLogica,, 
=,, 
Dependencia,, '
.,,' (
Resolve,,( /
<,,/ 0
IMaestroLogica,,0 >
>,,> ?
(,,? @
),,@ A
;,,A B
conceptoLogica-- 
=-- 
Dependencia-- (
.--( )
Resolve--) 0
<--0 1
IConceptoLogica--1 @
>--@ A
(--A B
)--B C
;--C D
operacionLogica.. 
=.. 
Dependencia.. )
...) *
Resolve..* 1
<..1 2
IOperacionLogica..2 B
>..B C
(..C D
)..D E
;..E F
actorNegocioLogica// 
=//  
Dependencia//! ,
.//, -
Resolve//- 4
<//4 5
IActorNegocioLogica//5 H
>//H I
(//I J
)//J K
;//K L
configuracionLogica00 
=00  !
Dependencia00" -
.00- .
Resolve00. 5
<005 6 
IConfiguracionLogica006 J
>00J K
(00K L
)00L M
;00M N$
generacionArchivosLogica11 $
=11% &
Dependencia11' 2
.112 3
Resolve113 :
<11: ;%
IGeneracionArchivosLogica11; T
>11T U
(11U V
)11V W
;11W X(
facturacionElectronicaLogica22 (
=22) *
Dependencia22+ 6
.226 7
Resolve227 >
<22> ?)
IFacturacionElectronicaLogica22? \
>22\ ]
(22] ^
)22^ _
;22_ `
barCodeUtil33 
=33 
Dependencia33 %
.33% &
Resolve33& -
<33- .
IBarCodeUtil33. :
>33: ;
(33; <
)33< =
;33= >
pdfUtil44 
=44 
Dependencia44 !
.44! "
Resolve44" )
<44) *
IPdfUtil44* 2
>442 3
(443 4
)444 5
;445 6
mailer55 
=55 
Dependencia55  
.55  !
Resolve55! (
<55( )
IMailer55) 0
>550 1
(551 2
)552 3
;553 4

sedeLogica66 
=66 
Dependencia66 $
.66$ %
Resolve66% ,
<66, -
ISede_Logica66- 9
>669 :
(66: ;
)66; <
;66< =
}77 	
public:: 
ActionResult:: 
TiposDeComprobante:: .
(::. /
)::/ 0
{;; 	
return<< 
View<< 
(<< 
)<< 
;<< 
}== 	
public?? 
ActionResult?? 
SeriesDeComprobante?? /
(??/ 0
)??0 1
{@@ 	
returnAA 
ViewAA 
(AA 
)AA 
;AA 
}BB 	
publicDD 
asyncDD 
TaskDD 
<DD 

JsonResultDD $
>DD$ %/
#ObtenerSelectoresTiposDeComprobanteDD& I
(DDI J
intDDJ M
comprobanteParaDDN ]
)DD] ^
{EE 	
tryFF 
{GG 
varHH 
comprobantesHH  
=HH! "
awaitHH# (
configuracionLogicaHH) <
.HH< =(
ObtenerSelectorDeComprobanteHH= Y
(HHY Z
(HHZ [
TipoComprobanteParaHH[ n
)HHn o
comprobanteParaHHo ~
,HH~ 
ProfileData
HHÄ ã
(
HHã å
)
HHå ç
)
HHç é
;
HHé è
returnII 
JsonII 
(II 
comprobantesII (
)II( )
;II) *
}JJ 
catchKK 
(KK 
	ExceptionKK 
eKK 
)KK 
{LL 
returnMM 
JsonMM 
(MM 
UtilMM  
.MM  !
	ErrorJsonMM! *
(MM* +
eMM+ ,
)MM, -
)MM- .
;MM. /
}NN 
}OO 	
publicSS 

JsonResultSS -
!ObtenerTiposDeComprobanteGenericoSS ;
(SS; <
)SS< =
{TT 	
tryUU 
{VV 
varWW 

resultadosWW 
=WW  
configuracionLogicaWW! 4
.WW4 5%
ObtenerTiposDeComprobanteWW5 N
(WWN O
)WWO P
;WWP Q
ListXX 
<XX "
ComboGenericoViewModelXX +
>XX+ ,
tiposDeComprobanteXX- ?
=XX@ A
newXXB E
ListXXF J
<XXJ K"
ComboGenericoViewModelXXK a
>XXa b
(XXb c
)XXc d
;XXd e
tiposDeComprobanteYY "
=YY# $"
ComboGenericoViewModelYY% ;
.YY; <
ConvertYY< C
(YYC D

resultadosYYD N
)YYN O
;YYO P
returnZZ 
JsonZZ 
(ZZ 
tiposDeComprobanteZZ .
)ZZ. /
;ZZ/ 0
}[[ 
catch\\ 
(\\ 
	Exception\\ 
e\\ 
)\\ 
{]] 
return^^ 
Json^^ 
(^^ 
Util^^  
.^^  !
	ErrorJson^^! *
(^^* +
e^^+ ,
)^^, -
)^^- .
;^^. /
}__ 
}`` 	
publicdd 

JsonResultdd "
CrearTipoDeComprobantedd 0
(dd0 1,
 RegistroTipoComprobanteViewModeldd1 Q
tipoDeComprobanteddR c
)ddc d
{ee 	
tryff 
{gg 
OperationResulthh 
	resultadohh  )
;hh) *
ifll 
(ll 
tipoDeComprobantell %
.ll% &
Idll& (
!=ll) +
$numll, -
)ll- .
{mm 
Listnn 
<nn ,
 TipoDeComprobanteParaTransaccionnn 9
>nn9 :
tpnn; =
=nn> ?7
+TipoDeTransaccionTipoDeComprobanteViewModelnn@ k
.nnk l4
'ConvertTipoDeComprobanteParaTransaccion	nnl ì
(
nnì î9
+TipoDeTransaccionTipoDeComprobanteViewModel
nnî ø
.
nnø ¿#
MatchTiposTransaccion
nn¿ ’
(
nn’ ÷
tipoDeComprobante
nn÷ Á
.
nnÁ Ë0
"TiposDeTransaccionConEmisionPropia
nnË ä
,
nnä ã
tipoDeComprobante
nnå ù
.
nnù û4
&IdDeTiposDeTransaccionConEmisionPropia
nnû ƒ
)
nnƒ ≈
)
nn≈ ∆
;
nn∆ «
Listoo 
<oo ,
 TipoDeComprobanteParaTransaccionoo 9
>oo9 :
tp1oo; >
=oo? @7
+TipoDeTransaccionTipoDeComprobanteViewModelooA l
.ool m4
'ConvertTipoDeComprobanteParaTransaccion	oom î
(
ooî ï9
+TipoDeTransaccionTipoDeComprobanteViewModel
ooï ¿
.
oo¿ ¡#
MatchTiposTransaccion
oo¡ ÷
(
oo÷ ◊
tipoDeComprobante
oo◊ Ë
.
ooË È2
$TiposDeTransaccionConEmisionTerceros
ooÈ ç
,
ooç é
tipoDeComprobante
ooè †
.
oo† °6
(IdDeTiposDeTransaccionConEmisionTerceros
oo° …
)
oo…  
)
oo  À
;
ooÀ Ã
	resultadoqq 
=qq 
configuracionLogicaqq  3
.qq3 4%
ActualizarTipoComprobanteqq4 M
(qqM N
tipoDeComprobanteqqN _
.qq_ `
Idqq` b
,qqb c
tipoDeComprobanteqqd u
.qqu v
Nombreqqv |
,qq| }
tipoDeComprobante	qq~ è
.
qqè ê
NombreCorto
qqê õ
,
qqõ ú
tipoDeComprobante
qqù Æ
.
qqÆ Ø
CodigoSunat
qqØ ∫
,
qq∫ ª
tp
qqº æ
,
qqæ ø
tp1
qq¿ √
)
qq√ ƒ
;
qqƒ ≈
}rr 
elsess 
{tt 
	resultadouu 
=uu 
configuracionLogicauu  3
.uu3 4"
CrearTipoDeComprobanteuu4 J
(uuJ K
tipoDeComprobanteuuK \
.uu\ ]
Nombreuu] c
,uuc d
tipoDeComprobanteuue v
.uuv w
NombreCorto	uuw Ç
,
uuÇ É
tipoDeComprobante
uuÑ ï
.
uuï ñ
CodigoSunat
uuñ °
,
uu° ¢
tipoDeComprobante
uu£ ¥
.
uu¥ µ4
&IdDeTiposDeTransaccionConEmisionPropia
uuµ €
.
uu€ ‹
ToArray
uu‹ „
(
uu„ ‰
)
uu‰ Â
,
uuÂ Ê
tipoDeComprobante
uuÁ ¯
.
uu¯ ˘6
(IdDeTiposDeTransaccionConEmisionTerceros
uu˘ °
.
uu° ¢
ToArray
uu¢ ©
(
uu© ™
)
uu™ ´
)
uu´ ¨
;
uu¨ ≠
}vv 
Utilww 
.ww 
VerificarErrorww #
(ww# $
	resultadoww$ -
)ww- .
;ww. /
returnxx 
Jsonxx 
(xx 
newxx 
{xx  !
code_resultxx" -
=xx. /
	resultadoxx0 9
.xx9 :
code_resultxx: E
,xxE F
dataxxG K
=xxL M
	resultadoxxN W
.xxW X
dataxxX \
,xx\ ]
result_descriptionxx^ p
=xxq r
	resultadoxxs |
.xx| }
title	xx} Ç
}
xxÉ Ñ
)
xxÑ Ö
;
xxÖ Ü
}yy 
catchzz 
(zz 
	Exceptionzz 
ezz 
)zz 
{{{ 
HttpContext|| 
.|| 
Response|| $
.||$ %

StatusCode||% /
=||0 1
$num||2 5
;||5 6
return}} 
Json}} 
(}} 
Util}}  
.}}  !
	ErrorJson}}! *
(}}* +
e}}+ ,
)}}, -
)}}- .
;}}. /
}~~ 
} 	
public
ÄÄ 

JsonResult
ÄÄ &
ObtenerTipoDeComprobante
ÄÄ 2
(
ÄÄ2 3
int
ÄÄ3 6!
idTipoDeComprobante
ÄÄ7 J
)
ÄÄJ K
{
ÅÅ 	
try
ÇÇ 
{
ÉÉ 
TipoDeComprobante
ÑÑ !
tipoDeComprobante
ÑÑ" 3
=
ÑÑ4 5!
configuracionLogica
ÑÑ6 I
.
ÑÑI J&
ObtenerTipoDeComprobante
ÑÑJ b
(
ÑÑb c!
idTipoDeComprobante
ÑÑc v
)
ÑÑv w
;
ÑÑw x.
 RegistroTipoComprobanteViewModel
ÖÖ 0(
tipoDeComprobanteViewModel
ÖÖ1 K
=
ÖÖL M
new
ÖÖN Q.
 RegistroTipoComprobanteViewModel
ÖÖR r
(
ÖÖr s 
tipoDeComprobanteÖÖs Ñ
)ÖÖÑ Ö
;ÖÖÖ Ü
return
ÜÜ 
Json
ÜÜ 
(
ÜÜ (
tipoDeComprobanteViewModel
ÜÜ 6
)
ÜÜ6 7
;
ÜÜ7 8
}
áá 
catch
àà 
(
àà 
	Exception
àà 
e
àà 
)
àà 
{
ââ 
return
ää 
Json
ää 
(
ää 
Util
ää  
.
ää  !
	ErrorJson
ää! *
(
ää* +
e
ää+ ,
)
ää, -
)
ää- .
;
ää. /
}
ãã 
}
åå 	
public
çç 

JsonResult
çç .
 ObtenerTiposDeComprobanteBandeja
çç :
(
çç: ;
)
çç; <
{
éé 	
try
èè 
{
êê 
var
ëë 

resultados
ëë 
=
ëë  !
configuracionLogica
ëë! 4
.
ëë4 5'
ObtenerTiposDeComprobante
ëë5 N
(
ëëN O
)
ëëO P
;
ëëP Q
List
íí 
<
íí -
BandejaTipoComprobanteViewModel
íí 4
>
íí4 5 
tiposDeComprobante
íí6 H
=
ííI J-
BandejaTipoComprobanteViewModel
ííK j
.
ííj k
Convert
íík r
(
íír s

resultados
íís }
)
íí} ~
;
íí~ 
return
ìì 
Json
ìì 
(
ìì  
tiposDeComprobante
ìì .
)
ìì. /
;
ìì/ 0
}
îî 
catch
ïï 
(
ïï 
	Exception
ïï 
e
ïï 
)
ïï 
{
ññ 
return
óó 
Json
óó 
(
óó 
Util
óó  
.
óó  !
	ErrorJson
óó! *
(
óó* +
e
óó+ ,
)
óó, -
)
óó- .
;
óó. /
}
òò 
}
ôô 	
public
ùù 

JsonResult
ùù %
CrearSerieDeComprobante
ùù 1
(
ùù1 21
#RegistroSerieDeComprobanteViewModel
ùù2 U 
serieDeComprobante
ùùV h
)
ùùh i
{
ûû 	
try
üü 
{
†† 
OperationResult
°° 
	resultado
°°  )
;
°°) *E
7CompobrobarSiExiteNumeroDeSerieSegunElTipoDeComprobante
££ G
(
££G H 
serieDeComprobante
££H Z
.
££Z [
Id
££[ ]
,
££] ^ 
serieDeComprobante
££_ q
.
££q r 
TipoDeComprobante££r É
.££É Ñ
Id££Ñ Ü
,££Ü á"
serieDeComprobante££à ö
.££ö õ
NumeroDeSerie££õ ®
)££® ©
;££© ™
if
¶¶ 
(
¶¶  
serieDeComprobante
¶¶ &
.
¶¶& '
Id
¶¶' )
!=
¶¶* ,
$num
¶¶- .
)
¶¶. /
{
ßß 
	resultado
®® 
=
®® 
null
®®  $
;
®®$ %
	resultado
©© 
=
©© !
configuracionLogica
©©  3
.
©©3 4*
ActualizarSerieDeComprobante
©©4 P
(
©©P Q 
serieDeComprobante
©©Q c
.
©©c d
Id
©©d f
,
©©f g 
serieDeComprobante
©©h z
.
©©z {
CentroDeAtencion©©{ ã
.©©ã å
Id©©å é
,©©é è"
serieDeComprobante©©ê ¢
.©©¢ £!
TipoDeComprobante©©£ ¥
.©©¥ µ
Id©©µ ∑
,©©∑ ∏ 
serieDeComprobante
™™P b
.
™™b c
NumeroDeSerie
™™c p
,
™™p q!
serieDeComprobante™™r Ñ
.™™Ñ Ö,
NumeroDeComprobanteSiguiente™™Ö °
,™™° ¢ 
serieDeComprobante
´´P b
.
´´b c
Autonumerica
´´c o
,
´´o p!
serieDeComprobante´´q É
.´´É Ñ
Vigente´´Ñ ã
)´´ã å
;´´å ç
}
¨¨ 
else
≠≠ 
{
ÆÆ 
	resultado
ØØ 
=
ØØ !
configuracionLogica
ØØ  3
.
ØØ3 4%
CrearSerieDeComprobante
ØØ4 K
(
ØØK L 
serieDeComprobante
ØØL ^
.
ØØ^ _
CentroDeAtencion
ØØ_ o
.
ØØo p
Id
ØØp r
,
ØØr s!
serieDeComprobanteØØt Ü
.ØØÜ á!
TipoDeComprobanteØØá ò
.ØØò ô
IdØØô õ
,ØØõ ú 
serieDeComprobante
∞∞P b
.
∞∞b c
NumeroDeSerie
∞∞c p
,
∞∞p q!
serieDeComprobante∞∞r Ñ
.∞∞Ñ Ö,
NumeroDeComprobanteSiguiente∞∞Ö °
,∞∞° ¢ 
serieDeComprobante
±±P b
.
±±b c
Autonumerica
±±c o
,
±±o p!
serieDeComprobante±±q É
.±±É Ñ
Vigente±±Ñ ã
)±±ã å
;±±å ç
}
≤≤ 
Util
≥≥ 
.
≥≥ 
VerificarError
≥≥ #
(
≥≥# $
	resultado
≥≥$ -
)
≥≥- .
;
≥≥. /
return
¥¥ 
Json
¥¥ 
(
¥¥ 
new
¥¥ 
{
¥¥  !
code_result
¥¥" -
=
¥¥. /
	resultado
¥¥0 9
.
¥¥9 :
code_result
¥¥: E
,
¥¥E F
data
¥¥G K
=
¥¥L M
	resultado
¥¥N W
.
¥¥W X
data
¥¥X \
,
¥¥\ ] 
result_description
¥¥^ p
=
¥¥q r
	resultado
¥¥s |
.
¥¥| }
title¥¥} Ç
}¥¥É Ñ
)¥¥Ñ Ö
;¥¥Ö Ü
}
µµ 
catch
∂∂ 
(
∂∂ 
	Exception
∂∂ 
e
∂∂ 
)
∂∂ 
{
∑∑ 
HttpContext
∏∏ 
.
∏∏ 
Response
∏∏ $
.
∏∏$ %

StatusCode
∏∏% /
=
∏∏0 1
$num
∏∏2 5
;
∏∏5 6
return
ππ 
Json
ππ 
(
ππ 
Util
ππ  
.
ππ  !
	ErrorJson
ππ! *
(
ππ* +
e
ππ+ ,
)
ππ, -
)
ππ- .
;
ππ. /
}
∫∫ 
}
ªª 	
public
ºº 

JsonResult
ºº '
ObtenerSerieDeComprobante
ºº 3
(
ºº3 4
int
ºº4 7"
idSerieDeComprobante
ºº8 L
)
ººL M
{
ΩΩ 	
try
ææ 
{
øø  
SerieDeComprobante
¿¿ " 
serieDeComprobante
¿¿# 5
=
¿¿6 7!
configuracionLogica
¿¿8 K
.
¿¿K L'
ObtenerSerieDeComprobante
¿¿L e
(
¿¿e f"
idSerieDeComprobante
¿¿f z
)
¿¿z {
;
¿¿{ |1
#RegistroSerieDeComprobanteViewModel
¡¡ 3)
serieDeComprobanteViewModel
¡¡4 O
=
¡¡P Q
new
¡¡R U1
#RegistroSerieDeComprobanteViewModel
¡¡V y
(
¡¡y z!
serieDeComprobante¡¡z å
)¡¡å ç
;¡¡ç é
return
¬¬ 
Json
¬¬ 
(
¬¬ )
serieDeComprobanteViewModel
¬¬ 7
)
¬¬7 8
;
¬¬8 9
}
√√ 
catch
ƒƒ 
(
ƒƒ 
	Exception
ƒƒ 
e
ƒƒ 
)
ƒƒ 
{
≈≈ 
return
∆∆ 
Json
∆∆ 
(
∆∆ 
Util
∆∆  
.
∆∆  !
	ErrorJson
∆∆! *
(
∆∆* +
e
∆∆+ ,
)
∆∆, -
)
∆∆- .
;
∆∆. /
}
«« 
}
»» 	
public
…… 

JsonResult
…… /
!ObtenerSeriesDeComprobanteBandeja
…… ;
(
……; <
)
……< =
{
   	
try
ÀÀ 
{
ÃÃ 
var
ÕÕ 

resultados
ÕÕ 
=
ÕÕ  !
configuracionLogica
ÕÕ! 4
.
ÕÕ4 5(
ObtenerSeriesDeComprobante
ÕÕ5 O
(
ÕÕO P
)
ÕÕP Q
;
ÕÕQ R
List
ŒŒ 
<
ŒŒ 0
"BandejaSerieDeComprobanteViewModel
ŒŒ 7
>
ŒŒ7 8!
seriesDeComprobante
ŒŒ9 L
=
ŒŒM N0
"BandejaSerieDeComprobanteViewModel
ŒŒO q
.
ŒŒq r
Convert
ŒŒr y
(
ŒŒy z

resultadosŒŒz Ñ
)ŒŒÑ Ö
;ŒŒÖ Ü
return
œœ 
Json
œœ 
(
œœ !
seriesDeComprobante
œœ /
)
œœ/ 0
;
œœ0 1
}
–– 
catch
—— 
(
—— 
	Exception
—— 
e
—— 
)
—— 
{
““ 
return
”” 
Json
”” 
(
”” 
Util
””  
.
””  !
	ErrorJson
””! *
(
””* +
e
””+ ,
)
””, -
)
””- .
;
””. /
}
‘‘ 
}
’’ 	
public
÷÷ 
void
÷÷ E
7CompobrobarSiExiteNumeroDeSerieSegunElTipoDeComprobante
÷÷ K
(
÷÷K L
int
÷÷L O 
idSerieComprobante
÷÷P b
,
÷÷b c
int
÷÷d g!
idTipoDeComprobante
÷÷h {
,
÷÷{ |
string÷÷} É
numeroSerie÷÷Ñ è
)÷÷è ê
{
◊◊ 	
if
ÿÿ 
(
ÿÿ  
idSerieComprobante
ÿÿ "
>
ÿÿ# $
$num
ÿÿ% &
)
ÿÿ& '
{
ŸŸ 
var
⁄⁄ 
result
⁄⁄ 
=
⁄⁄ !
configuracionLogica
⁄⁄ 0
.
⁄⁄0 1'
ObtenerSerieDeComprobante
⁄⁄1 J
(
⁄⁄J K 
idSerieComprobante
⁄⁄K ]
)
⁄⁄] ^
;
⁄⁄^ _
if
€€ 
(
€€ 
numeroSerie
€€ 
!=
€€  "
result
€€# )
.
€€) *
Numero
€€* 0
)
€€0 1
{
‹‹ 
bool
››  
existeNumeoDeSerie
›› +
=
››, -!
configuracionLogica
››. A
.
››A BD
6ExisteNumeroDeSerieDeComprobanteSegunTipoDeComprobante
››B x
(
››x y"
idTipoDeComprobante››y å
,››å ç
numeroSerie››é ô
)››ô ö
;››ö õ
if
ﬁﬁ 
(
ﬁﬁ  
existeNumeoDeSerie
ﬁﬁ *
)
ﬁﬁ* +
{
ﬂﬂ 
throw
‡‡ 
new
‡‡ !!
ControllerException
‡‡" 5
(
‡‡5 6
$str
‡‡6 [
)
‡‡[ \
;
‡‡\ ]
}
·· 
}
‚‚ 
}
„„ 
else
‰‰ 
{
ÂÂ 
bool
ÊÊ  
existeNumeoDeSerie
ÊÊ '
=
ÊÊ( )!
configuracionLogica
ÊÊ* =
.
ÊÊ= >D
6ExisteNumeroDeSerieDeComprobanteSegunTipoDeComprobante
ÊÊ> t
(
ÊÊt u"
idTipoDeComprobanteÊÊu à
,ÊÊà â
numeroSerieÊÊä ï
)ÊÊï ñ
;ÊÊñ ó
if
ÁÁ 
(
ÁÁ  
existeNumeoDeSerie
ÁÁ &
)
ÁÁ& '
{
ËË 
throw
ÈÈ 
new
ÈÈ !
ControllerException
ÈÈ 1
(
ÈÈ1 2
$str
ÈÈ2 W
)
ÈÈW X
;
ÈÈX Y
}
ÍÍ 
}
ÎÎ 
}
ÏÏ 	
public
 
async
 
Task
 
<
 
ActionResult
 &
>
& '#
DescargarDocumentoPdf
( =
(
= >
long
> B
idOperacion
C N
,
N O
int
P S
formato
T [
)
[ \
{
ÒÒ 	
try
ÚÚ 
{
ÛÛ 
var
ÙÙ 
sede
ÙÙ 
=
ÙÙ 
ObtenerSede
ÙÙ &
(
ÙÙ& '
)
ÙÙ' (
;
ÙÙ( )
var
ıı 
	operacion
ıı 
=
ıı !
configuracionLogica
ıı  3
.
ıı3 4<
.ObtenerTipoTransaccionTipoComprobanteOperacion
ıı4 b
(
ııb c
idOperacion
ııc n
)
ıın o
;
ııo p
var
ˆˆ 

htmlString
ˆˆ 
=
ˆˆ  
await
ˆˆ! &(
GenerarHtmlStringOperacion
ˆˆ' A
(
ˆˆA B
sede
ˆˆB F
,
ˆˆF G
	operacion
ˆˆH Q
,
ˆˆQ R
formato
ˆˆS Z
)
ˆˆZ [
;
ˆˆ[ \
var
˜˜ 
pdfDocumento
˜˜  
=
˜˜! "
pdfUtil
˜˜# *
.
˜˜* +!
ObtenerPdfDocumento
˜˜+ >
(
˜˜> ?

htmlString
˜˜? I
,
˜˜I J
(
˜˜K L
FormatoImpresion
˜˜L \
)
˜˜\ ]
formato
˜˜] d
)
˜˜d e
;
˜˜e f
byte
¯¯ 
[
¯¯ 
]
¯¯ 
	fileBytes
¯¯  
=
¯¯! "
pdfDocumento
¯¯# /
.
¯¯/ 0
Save
¯¯0 4
(
¯¯4 5
)
¯¯5 6
;
¯¯6 7
string
˘˘ 
fileName
˘˘ 
=
˘˘  !
	operacion
˘˘" +
.
˘˘+ ,
Comprobante
˘˘, 7
+
˘˘8 9
$str
˘˘: ?
+
˘˘@ A
	operacion
˘˘B K
.
˘˘K L
Tercero
˘˘L S
+
˘˘T U
$str
˘˘V \
;
˘˘\ ]
return
˙˙ 
File
˙˙ 
(
˙˙ 
	fileBytes
˙˙ %
,
˙˙% &
$str
˙˙' 8
,
˙˙8 9
fileName
˙˙: B
)
˙˙B C
;
˙˙C D
}
˚˚ 
catch
¸¸ 
(
¸¸ 
	Exception
¸¸ 
e
¸¸ 
)
¸¸ 
{
˝˝ 
return
˛˛ 
new
˛˛ "
JsonHttpStatusResult
˛˛ /
(
˛˛/ 0
Util
˛˛0 4
.
˛˛4 5
	ErrorJson
˛˛5 >
(
˛˛> ?
new
˛˛? B
	Exception
˛˛C L
(
˛˛L M
$str
˛˛M {
,
˛˛{ |
e
˛˛} ~
)
˛˛~ 
)˛˛ Ä
,˛˛Ä Å
HttpStatusCode˛˛Ç ê
.˛˛ê ë#
InternalServerError˛˛ë §
)˛˛§ •
;˛˛• ¶
}
ˇˇ 
}
ÄÄ 	
public
ÇÇ 
async
ÇÇ 
Task
ÇÇ 
<
ÇÇ 
ActionResult
ÇÇ &
>
ÇÇ& '%
DescargarDocumentoPdfA4
ÇÇ( ?
(
ÇÇ? @
long
ÇÇ@ D
idOperacion
ÇÇE P
)
ÇÇP Q
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 
var
ÜÜ 
sede
ÜÜ 
=
ÜÜ 
ObtenerSede
ÜÜ &
(
ÜÜ& '
)
ÜÜ' (
;
ÜÜ( )
var
áá 
	operacion
áá 
=
áá !
configuracionLogica
áá  3
.
áá3 4<
.ObtenerTipoTransaccionTipoComprobanteOperacion
áá4 b
(
ááb c
idOperacion
áác n
)
áán o
;
ááo p
var
àà 

htmlString
àà 
=
àà  
await
àà! &(
GenerarHtmlStringOperacion
àà' A
(
ààA B
sede
ààB F
,
ààF G
	operacion
ààH Q
,
ààQ R
(
ààS T
int
ààT W
)
ààW X
FormatoImpresion
ààX h
.
ààh i
A4
àài k
)
ààk l
;
ààl m
var
ââ 
pdfDocumento
ââ  
=
ââ! "
pdfUtil
ââ# *
.
ââ* +!
ObtenerPdfDocumento
ââ+ >
(
ââ> ?

htmlString
ââ? I
,
ââI J
FormatoImpresion
ââK [
.
ââ[ \
A4
ââ\ ^
)
ââ^ _
;
ââ_ `
byte
ää 
[
ää 
]
ää 
	fileBytes
ää  
=
ää! "
pdfDocumento
ää# /
.
ää/ 0
Save
ää0 4
(
ää4 5
)
ää5 6
;
ää6 7
string
ãã 
fileName
ãã 
=
ãã  !
	operacion
ãã" +
.
ãã+ ,
Comprobante
ãã, 7
+
ãã8 9
$str
ãã: ?
+
ãã@ A
	operacion
ããB K
.
ããK L
Tercero
ããL S
+
ããT U
$str
ããV \
;
ãã\ ]
return
åå 
File
åå 
(
åå 
	fileBytes
åå %
,
åå% &
$str
åå' 8
,
åå8 9
fileName
åå: B
)
ååB C
;
ååC D
}
çç 
catch
éé 
(
éé 
	Exception
éé 
e
éé 
)
éé 
{
èè 
return
êê 
new
êê "
JsonHttpStatusResult
êê /
(
êê/ 0
Util
êê0 4
.
êê4 5
	ErrorJson
êê5 >
(
êê> ?
new
êê? B
	Exception
êêC L
(
êêL M
$str
êêM {
,
êê{ |
e
êê} ~
)
êê~ 
)êê Ä
,êêÄ Å
HttpStatusCodeêêÇ ê
.êêê ë#
InternalServerErrorêêë §
)êê§ •
;êê• ¶
}
ëë 
}
íí 	
public
îî 
async
îî 
Task
îî 
<
îî 
ActionResult
îî &
>
îî& '"
DescargarComprobante
îî( <
(
îî< =
string
îî= C
id
îîD F
)
îîF G
{
ïï 	
try
ññ 
{
óó 
var
òò 
idOperacion
òò 
=
òò  !
Convert
òò" )
.
òò) *
ToInt64
òò* 1
(
òò1 2
DesEncriptar
òò2 >
(
òò> ?
id
òò? A
)
òòA B
)
òòB C
;
òòC D6
(EstablecimientoComercialExtendidoConLogo
ôô 8
sede
ôô9 =
=
ôô> ?

sedeLogica
ôô@ J
.
ôôJ K 
ObtenerSedeConLogo
ôôK ]
(
ôô] ^
)
ôô^ _
;
ôô_ `
var
öö 
	operacion
öö 
=
öö !
configuracionLogica
öö  3
.
öö3 4<
.ObtenerTipoTransaccionTipoComprobanteOperacion
öö4 b
(
ööb c
idOperacion
ööc n
)
öön o
;
ööo p
var
õõ 

htmlString
õõ 
=
õõ  
await
õõ! &(
GenerarHtmlStringOperacion
õõ' A
(
õõA B
sede
õõB F
,
õõF G
	operacion
õõH Q
,
õõQ R
(
õõS T
int
õõT W
)
õõW X
FormatoImpresion
õõX h
.
õõh i
A4
õõi k
)
õõk l
;
õõl m
var
úú 
pdfDocumento
úú  
=
úú! "
pdfUtil
úú# *
.
úú* +!
ObtenerPdfDocumento
úú+ >
(
úú> ?

htmlString
úú? I
,
úúI J
FormatoImpresion
úúK [
.
úú[ \
A4
úú\ ^
)
úú^ _
;
úú_ `
byte
ùù 
[
ùù 
]
ùù 
	fileBytes
ùù  
=
ùù! "
pdfDocumento
ùù# /
.
ùù/ 0
Save
ùù0 4
(
ùù4 5
)
ùù5 6
;
ùù6 7
MemoryStream
ûû 
memoryStream
ûû )
=
ûû* +
new
ûû, /
MemoryStream
ûû0 <
(
ûû< =
	fileBytes
ûû= F
)
ûûF G
;
ûûG H
return
üü 
new
üü 
FileStreamResult
üü +
(
üü+ ,
memoryStream
üü, 8
,
üü8 9
$str
üü: K
)
üüK L
;
üüL M
}
†† 
catch
°° 
(
°° 
	Exception
°° 
e
°° 
)
°° 
{
¢¢ 
return
££ 
new
££ "
JsonHttpStatusResult
££ /
(
££/ 0
Util
££0 4
.
££4 5
	ErrorJson
££5 >
(
££> ?
new
££? B
	Exception
££C L
(
££L M
$str
££M {
,
££{ |
e
££} ~
)
££~ 
)££ Ä
,££Ä Å
HttpStatusCode££Ç ê
.££ê ë#
InternalServerError££ë §
)££§ •
;££• ¶
}
§§ 
}
•• 	
public
®® 
async
®® 
Task
®® 
<
®® 
ActionResult
®® &
>
®®& '#
DescargarDocumentoXml
®®( =
(
®®= >
long
®®> B
idOperacion
®®C N
)
®®N O
{
©© 	
try
™™ 
{
´´ 
var
¨¨ 
sede
¨¨ 
=
¨¨ 
ObtenerSede
¨¨ &
(
¨¨& '
)
¨¨' (
;
¨¨( )
var
≠≠ 
	operacion
≠≠ 
=
≠≠ !
configuracionLogica
≠≠  3
.
≠≠3 4<
.ObtenerTipoTransaccionTipoComprobanteOperacion
≠≠4 b
(
≠≠b c
idOperacion
≠≠c n
)
≠≠n o
;
≠≠o p
byte
ÆÆ 
[
ÆÆ 
]
ÆÆ 
	fileBytes
ÆÆ  
=
ÆÆ! "
await
ÆÆ# (!
GenerarDocumentoXml
ÆÆ) <
(
ÆÆ< =
sede
ÆÆ= A
,
ÆÆA B
	operacion
ÆÆC L
)
ÆÆL M
;
ÆÆM N
string
ØØ 
fileName
ØØ 
=
ØØ  !
	operacion
ØØ" +
.
ØØ+ ,
Comprobante
ØØ, 7
+
ØØ8 9
$str
ØØ: ?
+
ØØ@ A
	operacion
ØØB K
.
ØØK L
Tercero
ØØL S
+
ØØT U
$str
ØØV \
;
ØØ\ ]
return
∞∞ 
File
∞∞ 
(
∞∞ 
	fileBytes
∞∞ %
,
∞∞% &
$str
∞∞' 8
,
∞∞8 9
fileName
∞∞: B
)
∞∞B C
;
∞∞C D
}
±± 
catch
≤≤ 
(
≤≤ 
	Exception
≤≤ 
e
≤≤ 
)
≤≤ 
{
≥≥ 
return
¥¥ 
new
¥¥ "
JsonHttpStatusResult
¥¥ /
(
¥¥/ 0
Util
¥¥0 4
.
¥¥4 5
	ErrorJson
¥¥5 >
(
¥¥> ?
new
¥¥? B
	Exception
¥¥C L
(
¥¥L M
$str
¥¥M {
,
¥¥{ |
e
¥¥} ~
)
¥¥~ 
)¥¥ Ä
,¥¥Ä Å
HttpStatusCode¥¥Ç ê
.¥¥ê ë#
InternalServerError¥¥ë §
)¥¥§ •
;¥¥• ¶
}
µµ 
}
∂∂ 	
public
∏∏ 
async
∏∏ 
Task
∏∏ 
<
∏∏ 
byte
∏∏ 
[
∏∏ 
]
∏∏  
>
∏∏  !!
GenerarDocumentoXml
∏∏" 5
(
∏∏5 66
(EstablecimientoComercialExtendidoConLogo
∏∏6 ^
sede
∏∏_ c
,
∏∏c d6
'OperacionTipoTransaccionTipoComprobante∏∏e å
	operacion∏∏ç ñ
)∏∏ñ ó
{
ππ 	
try
∫∫ 
{
ªª 
byte
ºº 
[
ºº 
]
ºº 
	fileBytes
ºº  
=
ºº! "
null
ºº# '
;
ºº' (
if
ΩΩ 
(
ΩΩ 
Diccionario
ΩΩ 
.
ΩΩ  +
TiposDeComprobanteTributables
ΩΩ  =
.
ΩΩ= >
Contains
ΩΩ> F
(
ΩΩF G
	operacion
ΩΩG P
.
ΩΩP Q
IdTipoComprobante
ΩΩQ b
)
ΩΩb c
)
ΩΩc d
{
ææ 
var
øø 
ordenDeVenta
øø $
=
øø% &
operacionLogica
øø' 6
.
øø6 7!
ObtenerOrdenDeVenta
øø7 J
(
øøJ K
	operacion
øøK T
.
øøT U
IdOperacion
øøU `
)
øø` a
;
øøa b
	fileBytes
¿¿ 
=
¿¿ 

XmlBuilder
¿¿  *
.
¿¿* +#
ObtenerXmlComprobante
¿¿+ @
(
¿¿@ A
ordenDeVenta
¿¿A M
,
¿¿M N
sede
¿¿O S
,
¿¿S T
maestroLogica
¿¿U b
,
¿¿b c&
generacionArchivosLogica
¿¿d |
,
¿¿| }+
facturacionElectronicaLogica¿¿~ ö
)¿¿ö õ
.¿¿õ ú
	Documento¿¿ú •
;¿¿• ¶
}
¡¡ 
else
¬¬ 
if
¬¬ 
(
¬¬ 
	operacion
¬¬ "
.
¬¬" #
IdTipoComprobante
¬¬# 4
==
¬¬5 7
MaestroSettings
¬¬8 G
.
¬¬G H
Default
¬¬H O
.
¬¬O PA
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitente¬¬P Ç
)¬¬Ç É
{
√√ 
var
ƒƒ 
guiaRemision
ƒƒ $
=
ƒƒ% &
operacionLogica
ƒƒ' 6
.
ƒƒ6 7!
ObtenerGuiaRemision
ƒƒ7 J
(
ƒƒJ K
	operacion
ƒƒK T
.
ƒƒT U
IdOperacion
ƒƒU `
)
ƒƒ` a
;
ƒƒa b
int
≈≈ 
[
≈≈ 
]
≈≈ 

idsUbigeos
≈≈ $
=
≈≈% &
{
≈≈' (
Convert
≈≈) 0
.
≈≈0 1
ToInt32
≈≈1 8
(
≈≈8 9
guiaRemision
≈≈9 E
.
≈≈E F&
IdUbigeoOrigenDeTraslado
≈≈F ^
(
≈≈^ _
)
≈≈_ `
)
≈≈` a
,
≈≈a b
Convert
≈≈c j
.
≈≈j k
ToInt32
≈≈k r
(
≈≈r s
guiaRemision
≈≈s 
.≈≈ Ä)
IdUbigeoDestinoDeTraslado≈≈Ä ô
(≈≈ô ö
)≈≈ö õ
)≈≈õ ú
}≈≈ù û
;≈≈û ü
var
∆∆ 
ubigeos
∆∆ 
=
∆∆  !
maestroLogica
∆∆" /
.
∆∆/ 0
obtenerUbigeo
∆∆0 =
(
∆∆= >

idsUbigeos
∆∆> H
)
∆∆H I
;
∆∆I J
guiaRemision
««  
.
««  !
UbigeoOrigen
««! -
=
««. /
ubigeos
««0 7
.
««7 8
Single
««8 >
(
««> ?
u
««? @
=>
««A C
u
««D E
.
««E F
id
««F H
==
««I K
Convert
««L S
.
««S T
ToInt32
««T [
(
««[ \
guiaRemision
««\ h
.
««h i'
IdUbigeoOrigenDeTraslado««i Å
(««Å Ç
)««Ç É
)««É Ñ
)««Ñ Ö
.««Ö Ü!
descripcion_corta««Ü ó
;««ó ò
guiaRemision
»»  
.
»»  !
UbigeoDestino
»»! .
=
»»/ 0
ubigeos
»»1 8
.
»»8 9
Single
»»9 ?
(
»»? @
u
»»@ A
=>
»»B D
u
»»E F
.
»»F G
id
»»G I
==
»»J L
Convert
»»M T
.
»»T U
ToInt32
»»U \
(
»»\ ]
guiaRemision
»»] i
.
»»i j(
IdUbigeoDestinoDeTraslado»»j É
(»»É Ñ
)»»Ñ Ö
)»»Ö Ü
)»»Ü á
.»»á à!
descripcion_corta»»à ô
;»»ô ö
var
…… 
proveedores
…… #
=
……$ % 
actorNegocioLogica
……& 8
.
……8 9(
ObtenerProveedoresVigentes
……9 S
(
……S T
)
……T U
;
……U V
var
   #
modalidadesDeTraslado
   -
=
  . /
await
  0 5
maestroLogica
  6 C
.
  C D-
ObtenerModalidadesTrasladoAsync
  D c
(
  c d
)
  d e
;
  e f
var
ÀÀ 
motivosDeTraslado
ÀÀ )
=
ÀÀ* +
await
ÀÀ, 1
maestroLogica
ÀÀ2 ?
.
ÀÀ? @)
ObtenerMotivosTrasladoAsync
ÀÀ@ [
(
ÀÀ[ \
)
ÀÀ\ ]
;
ÀÀ] ^
	fileBytes
ÃÃ 
=
ÃÃ 

XmlBuilder
ÃÃ  *
.
ÃÃ* +#
ObtenerXmlComprobante
ÃÃ+ @
(
ÃÃ@ A
guiaRemision
ÃÃA M
,
ÃÃM N
sede
ÃÃO S
,
ÃÃS T
proveedores
ÃÃU `
,
ÃÃ` a#
modalidadesDeTraslado
ÃÃb w
,
ÃÃw x 
motivosDeTrasladoÃÃy ä
,ÃÃä ã(
generacionArchivosLogicaÃÃå §
,ÃÃ§ •,
facturacionElectronicaLogicaÃÃ¶ ¬
)ÃÃ¬ √
.ÃÃ√ ƒ
	DocumentoÃÃƒ Õ
;ÃÃÕ Œ
}
ÕÕ 
return
ŒŒ 
	fileBytes
ŒŒ  
;
ŒŒ  !
}
œœ 
catch
–– 
(
–– 
	Exception
–– 
e
–– 
)
–– 
{
—— 
throw
““ 
new
““ !
ControllerException
““ -
(
““- .
$str
““. a
,
““a b
e
““c d
)
““d e
;
““e f
}
”” 
}
‘‘ 	
public
÷÷ 
async
÷÷ 
Task
÷÷ 
<
÷÷ 
ActionResult
÷÷ &
>
÷÷& '#
DescargarDocumentoZip
÷÷( =
(
÷÷= >
long
÷÷> B
idOperacion
÷÷C N
,
÷÷N O
int
÷÷P S
formato
÷÷T [
)
÷÷[ \
{
◊◊ 	
try
ÿÿ 
{
ŸŸ 
var
⁄⁄ 
sede
⁄⁄ 
=
⁄⁄ 
ObtenerSede
⁄⁄ &
(
⁄⁄& '
)
⁄⁄' (
;
⁄⁄( )
var
€€ 
	operacion
€€ 
=
€€ !
configuracionLogica
€€  3
.
€€3 4<
.ObtenerTipoTransaccionTipoComprobanteOperacion
€€4 b
(
€€b c
idOperacion
€€c n
)
€€n o
;
€€o p
var
‹‹ 

htmlString
‹‹ 
=
‹‹  
await
‹‹! &(
GenerarHtmlStringOperacion
‹‹' A
(
‹‹A B
sede
‹‹B F
,
‹‹F G
	operacion
‹‹H Q
,
‹‹Q R
formato
‹‹S Z
)
‹‹Z [
;
‹‹[ \
var
›› 
pdfDocumento
››  
=
››! "
pdfUtil
››# *
.
››* +!
ObtenerPdfDocumento
››+ >
(
››> ?

htmlString
››? I
,
››I J
(
››K L
FormatoImpresion
››L \
)
››\ ]
formato
››] d
)
››d e
;
››e f
string
ﬂﬂ 
fileNameZip
ﬂﬂ "
=
ﬂﬂ# $
	operacion
ﬂﬂ% .
.
ﬂﬂ. /
Comprobante
ﬂﬂ/ :
+
ﬂﬂ; <
$str
ﬂﬂ= B
+
ﬂﬂC D
	operacion
ﬂﬂE N
.
ﬂﬂN O
Tercero
ﬂﬂO V
+
ﬂﬂW X
$str
ﬂﬂY _
;
ﬂﬂ_ `
byte
‡‡ 
[
‡‡ 
]
‡‡ 
	fileBytes
‡‡  
=
‡‡! "
null
‡‡# '
;
‡‡' (
byte
·· 
[
·· 
]
·· 
compressedBytes
·· &
;
··& '
using
‚‚ 
(
‚‚ 
var
‚‚ 
	outStream
‚‚ $
=
‚‚% &
new
‚‚' *
MemoryStream
‚‚+ 7
(
‚‚7 8
)
‚‚8 9
)
‚‚9 :
{
„„ 
using
‰‰ 
(
‰‰ 
var
‰‰ 
archive
‰‰ &
=
‰‰' (
new
‰‰) ,

ZipArchive
‰‰- 7
(
‰‰7 8
	outStream
‰‰8 A
,
‰‰A B
ZipArchiveMode
‰‰C Q
.
‰‰Q R
Create
‰‰R X
,
‰‰X Y
true
‰‰Z ^
)
‰‰^ _
)
‰‰_ `
{
ÂÂ 
ZipArchiveEntry
ÊÊ '
fileInArchive
ÊÊ( 5
=
ÊÊ6 7
null
ÊÊ8 <
;
ÊÊ< =
fileInArchive
ÁÁ %
=
ÁÁ& '
archive
ÁÁ( /
.
ÁÁ/ 0
CreateEntry
ÁÁ0 ;
(
ÁÁ; <
	operacion
ÁÁ< E
.
ÁÁE F
Comprobante
ÁÁF Q
+
ÁÁR S
$str
ÁÁT Y
+
ÁÁZ [
	operacion
ÁÁ\ e
.
ÁÁe f
Tercero
ÁÁf m
+
ÁÁn o
$str
ÁÁp v
,
ÁÁv w
CompressionLevelÁÁx à
.ÁÁà â
OptimalÁÁâ ê
)ÁÁê ë
;ÁÁë í
	fileBytes
ËË !
=
ËË" #
pdfDocumento
ËË$ 0
.
ËË0 1
Save
ËË1 5
(
ËË5 6
)
ËË6 7
;
ËË7 8
using
ÈÈ 
(
ÈÈ 
var
ÈÈ "
entryStream
ÈÈ# .
=
ÈÈ/ 0
fileInArchive
ÈÈ1 >
.
ÈÈ> ?
Open
ÈÈ? C
(
ÈÈC D
)
ÈÈD E
)
ÈÈE F
using
ÍÍ 
(
ÍÍ 
var
ÍÍ ""
fileToCompressStream
ÍÍ# 7
=
ÍÍ8 9
new
ÍÍ: =
MemoryStream
ÍÍ> J
(
ÍÍJ K
	fileBytes
ÍÍK T
)
ÍÍT U
)
ÍÍU V
{
ÎÎ "
fileToCompressStream
ÏÏ 0
.
ÏÏ0 1
CopyTo
ÏÏ1 7
(
ÏÏ7 8
entryStream
ÏÏ8 C
)
ÏÏC D
;
ÏÏD E"
fileToCompressStream
ÌÌ 0
.
ÌÌ0 1
Close
ÌÌ1 6
(
ÌÌ6 7
)
ÌÌ7 8
;
ÌÌ8 9
}
ÓÓ 
if
ÔÔ 
(
ÔÔ 
Diccionario
ÔÔ '
.
ÔÔ' (:
,TiposDeComprobanteTributablesMasGuiaRemision
ÔÔ( T
.
ÔÔT U
Contains
ÔÔU ]
(
ÔÔ] ^
	operacion
ÔÔ^ g
.
ÔÔg h
IdTipoComprobante
ÔÔh y
)
ÔÔy z
)
ÔÔz {
{
 
fileInArchive
ÒÒ )
=
ÒÒ* +
archive
ÒÒ, 3
.
ÒÒ3 4
CreateEntry
ÒÒ4 ?
(
ÒÒ? @
	operacion
ÒÒ@ I
.
ÒÒI J
Comprobante
ÒÒJ U
+
ÒÒV W
$str
ÒÒX ]
+
ÒÒ^ _
	operacion
ÒÒ` i
.
ÒÒi j
Tercero
ÒÒj q
+
ÒÒr s
$str
ÒÒt z
,
ÒÒz {
CompressionLevelÒÒ| å
.ÒÒå ç
OptimalÒÒç î
)ÒÒî ï
;ÒÒï ñ
	fileBytes
ÚÚ %
=
ÚÚ& '
await
ÚÚ( -!
GenerarDocumentoXml
ÚÚ. A
(
ÚÚA B
sede
ÚÚB F
,
ÚÚF G
	operacion
ÚÚH Q
)
ÚÚQ R
;
ÚÚR S
using
ÛÛ !
(
ÛÛ" #
var
ÛÛ# &
entryStream
ÛÛ' 2
=
ÛÛ3 4
fileInArchive
ÛÛ5 B
.
ÛÛB C
Open
ÛÛC G
(
ÛÛG H
)
ÛÛH I
)
ÛÛI J
using
ÙÙ !
(
ÙÙ" #
var
ÙÙ# &"
fileToCompressStream
ÙÙ' ;
=
ÙÙ< =
new
ÙÙ> A
MemoryStream
ÙÙB N
(
ÙÙN O
	fileBytes
ÙÙO X
)
ÙÙX Y
)
ÙÙY Z
{
ıı "
fileToCompressStream
ˆˆ  4
.
ˆˆ4 5
CopyTo
ˆˆ5 ;
(
ˆˆ; <
entryStream
ˆˆ< G
)
ˆˆG H
;
ˆˆH I"
fileToCompressStream
˜˜  4
.
˜˜4 5
Close
˜˜5 :
(
˜˜: ;
)
˜˜; <
;
˜˜< =
}
¯¯ 
}
˘˘ 
}
˙˙ 
compressedBytes
˚˚ #
=
˚˚$ %
	outStream
˚˚& /
.
˚˚/ 0
ToArray
˚˚0 7
(
˚˚7 8
)
˚˚8 9
;
˚˚9 :
}
¸¸ 
return
˝˝ 
File
˝˝ 
(
˝˝ 
compressedBytes
˝˝ +
,
˝˝+ ,
$str
˝˝- >
,
˝˝> ?
fileNameZip
˝˝@ K
)
˝˝K L
;
˝˝L M
}
˛˛ 
catch
ˇˇ 
(
ˇˇ 
	Exception
ˇˇ 
e
ˇˇ 
)
ˇˇ 
{
ÄÄ 
return
ÅÅ 
new
ÅÅ "
JsonHttpStatusResult
ÅÅ /
(
ÅÅ/ 0
Util
ÅÅ0 4
.
ÅÅ4 5
	ErrorJson
ÅÅ5 >
(
ÅÅ> ?
new
ÅÅ? B
	Exception
ÅÅC L
(
ÅÅL M
$str
ÅÅM {
,
ÅÅ{ |
e
ÅÅ} ~
)
ÅÅ~ 
)ÅÅ Ä
,ÅÅÄ Å
HttpStatusCodeÅÅÇ ê
.ÅÅê ë#
InternalServerErrorÅÅë §
)ÅÅ§ •
;ÅÅ• ¶
}
ÇÇ 
}
ÉÉ 	
public
ÖÖ 
async
ÖÖ 
Task
ÖÖ 
<
ÖÖ 
string
ÖÖ  
>
ÖÖ  !(
GenerarHtmlStringOperacion
ÖÖ" <
(
ÖÖ< =6
(EstablecimientoComercialExtendidoConLogo
ÖÖ= e
sede
ÖÖf j
,
ÖÖj k6
'OperacionTipoTransaccionTipoComprobanteÖÖl ì
	operacionÖÖî ù
,ÖÖù û
intÖÖü ¢
formatoÖÖ£ ™
)ÖÖ™ ´
{
ÜÜ 	
try
áá 
{
àà 
string
ââ !
htmlStringOperacion
ââ *
=
ââ+ ,
$str
ââ- /
;
ââ/ 0
if
ää 
(
ää 
Diccionario
ää 
.
ää  <
.TiposDeTransaccionOrdenesDeOperacionesDeVentas
ää  N
.
ääN O
Contains
ääO W
(
ääW X
	operacion
ääX a
.
ääa b
IdTipoTransaccion
ääb s
)
ääs t
||
ääu w
(
ääx y
Diccionarioääy Ñ
.ääÑ Ö;
+TiposDeTransaccionMovimientoDeBienes_VentasääÖ ∞
.ää∞ ±
Containsää± π
(ääπ ∫
	operacionää∫ √
.ää√ ƒ!
IdTipoTransaccionääƒ ’
)ää’ ÷
&&ää◊ Ÿ
	operacionää⁄ „
.ää„ ‰!
IdTipoComprobanteää‰ ı
!=ääˆ ¯
MaestroSettingsää˘ à
.ääà â
Defaultääâ ê
.ääê ëB
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitenteääë √
&&ääƒ ∆
Diccionarioää« “
.ää“ ”;
+TiposDeTransaccionMovimientoDeBienes_Ventasää” ˛
.ää˛ ˇ
Containsääˇ á
(ääá à
	operacionääà ë
.ääë í!
IdTipoTransaccionääí £
)ää£ §
&&ää• ß
	operacionää® ±
.ää± ≤!
IdTipoComprobanteää≤ √
!=ääƒ ∆
MaestroSettingsää« ÷
.ää÷ ◊
Defaultää◊ ﬁ
.ääﬁ ﬂ=
-IdDetalleMaestroComprobanteNotaAlmacenInternaääﬂ å
)ääå ç
)ääç é
{
ãã 
var
åå 
ordenDeVenta
åå $
=
åå% &
operacionLogica
åå' 6
.
åå6 7!
ObtenerOrdenDeVenta
åå7 J
(
ååJ K
	operacion
ååK T
.
ååT U
IdOperacion
ååU `
)
åå` a
;
ååa b
var
çç 
QrContentOrden
çç &
=
çç' (*
facturacionElectronicaLogica
çç) E
.
ççE F
	ObtenerQR
ççF O
(
ççO P
ordenDeVenta
ççP \
,
çç\ ]
sede
çç^ b
)
ççb c
;
ççc d
var
éé 
QrBytesOrden
éé $
=
éé% &
barCodeUtil
éé' 2
.
éé2 3
ObtenerCodigoQR
éé3 B
(
ééB C
QrContentOrden
ééC Q
)
ééQ R
;
ééR S!
htmlStringOperacion
èè '
=
èè( )#
CoreHtmlStringBuilder
èè* ?
.
èè? @
ObtenerHtmlString
èè@ Q
(
èèQ R
ordenDeVenta
èèR ^
,
èè^ _
(
èè` a
FormatoImpresion
èèa q
)
èèq r
formato
èèr y
,
èèy z
QrBytesOrdenèè{ á
,èèá à
sedeèèâ ç
,èèç é
thisèèè ì
,èèì î
maestroLogicaèèï ¢
)èè¢ £
;èè£ §
}
êê 
else
ëë 
if
ëë 
(
ëë 
Diccionario
ëë $
.
ëë$ %=
/TiposDeTransaccionOrdenesDeOperacionesDeCompras
ëë% T
.
ëëT U
Contains
ëëU ]
(
ëë] ^
	operacion
ëë^ g
.
ëëg h
IdTipoTransaccion
ëëh y
)
ëëy z
||
ëë{ }
Diccionarioëë~ â
.ëëâ ä<
,TiposDeTransaccionMovimientoDeBienes_Comprasëëä ∂
.ëë∂ ∑
Containsëë∑ ø
(ëëø ¿
	operacionëë¿ …
.ëë…  !
IdTipoTransaccionëë  €
)ëë€ ‹
)ëë‹ ›
{
íí 
var
ìì 
ordenDecompra
ìì %
=
ìì& '
operacionLogica
ìì( 7
.
ìì7 8"
ObtenerOrdenDeCompra
ìì8 L
(
ììL M
	operacion
ììM V
.
ììV W
IdOperacion
ììW b
)
ììb c
;
ììc d!
htmlStringOperacion
îî '
=
îî( )#
CoreHtmlStringBuilder
îî* ?
.
îî? @
ObtenerHtmlString
îî@ Q
(
îîQ R
ordenDecompra
îîR _
,
îî_ `
(
îîa b
FormatoImpresion
îîb r
)
îîr s
formato
îîs z
,
îîz {
nullîî| Ä
,îîÄ Å
sedeîîÇ Ü
,îîÜ á
thisîîà å
,îîå ç
maestroLogicaîîé õ
)îîõ ú
;îîú ù
}
ïï 
else
ññ 
if
ññ 
(
ññ 
	operacion
ññ "
.
ññ" #
IdTipoComprobante
ññ# 4
==
ññ5 7
MaestroSettings
ññ8 G
.
ññG H
Default
ññH O
.
ññO PA
2IdDetalleMaestroComprobanteGuiaDeRemisionRemitenteññP Ç
)ññÇ É
{
óó 
var
òò !
movimientoDeAlmacen
òò +
=
òò, -
operacionLogica
òò. =
.
òò= >+
ObtenerMovimientoDeMercaderia
òò> [
(
òò[ \
	operacion
òò\ e
.
òòe f
IdOperacion
òòf q
)
òòq r
;
òòr s
var
ôô 
proveedores
ôô #
=
ôô$ % 
actorNegocioLogica
ôô& 8
.
ôô8 9(
ObtenerProveedoresVigentes
ôô9 S
(
ôôS T
)
ôôT U
;
ôôU V
var
öö #
modalidadesDeTraslado
öö -
=
öö. /
await
öö0 5
maestroLogica
öö6 C
.
ööC D-
ObtenerModalidadesTrasladoAsync
ööD c
(
ööc d
)
ööd e
;
ööe f
var
õõ 
motivosDeTraslado
õõ )
=
õõ* +
await
õõ, 1
maestroLogica
õõ2 ?
.
õõ? @)
ObtenerMotivosTrasladoAsync
õõ@ [
(
õõ[ \
)
õõ\ ]
;
õõ] ^
var
úú 
QrBytes
úú 
=
úú  !
barCodeUtil
úú" -
.
úú- .
ObtenerCodigoQR
úú. =
(
úú= >!
movimientoDeAlmacen
úú> Q
.
úúQ R
Informacion
úúR ]
)
úú] ^
;
úú^ _!
htmlStringOperacion
ùù '
=
ùù( )#
CoreHtmlStringBuilder
ùù* ?
.
ùù? @
ObtenerHtmlString
ùù@ Q
(
ùùQ R!
movimientoDeAlmacen
ùùR e
,
ùùe f
(
ùùg h
FormatoImpresion
ùùh x
)
ùùx y
formatoùùy Ä
,ùùÄ Å
QrBytesùùÇ â
,ùùâ ä
sedeùùã è
,ùùè ê
proveedoresùùë ú
,ùùú ù%
modalidadesDeTrasladoùùû ≥
,ùù≥ ¥!
motivosDeTrasladoùùµ ∆
,ùù∆ «
thisùù» Ã
)ùùÃ Õ
;ùùÕ Œ
}
ûû 
else
üü 
if
üü 
(
üü 
	operacion
üü "
.
üü" #
IdTipoComprobante
üü# 4
==
üü5 7
MaestroSettings
üü8 G
.
üüG H
Default
üüH O
.
üüO P;
-IdDetalleMaestroComprobanteNotaAlmacenInterna
üüP }
)
üü} ~
{
†† 
var
°° !
movimientoDeAlmacen
°° +
=
°°, -
operacionLogica
°°. =
.
°°= >+
ObtenerMovimientoDeMercaderia
°°> [
(
°°[ \
	operacion
°°\ e
.
°°e f
IdOperacion
°°f q
)
°°q r
;
°°r s
var
¢¢ 
	QrContent
¢¢ !
=
¢¢" #*
facturacionElectronicaLogica
¢¢$ @
.
¢¢@ A
	ObtenerQR
¢¢A J
(
¢¢J K!
movimientoDeAlmacen
¢¢K ^
,
¢¢^ _
sede
¢¢` d
)
¢¢d e
;
¢¢e f
var
££ 
QrBytes
££ 
=
££  !
barCodeUtil
££" -
.
££- .
ObtenerCodigoQR
££. =
(
££= >
	QrContent
££> G
)
££G H
;
££H I!
htmlStringOperacion
§§ '
=
§§( )#
CoreHtmlStringBuilder
§§* ?
.
§§? @
ObtenerHtmlString
§§@ Q
(
§§Q R!
movimientoDeAlmacen
§§R e
,
§§e f
(
§§g h
FormatoImpresion
§§h x
)
§§x y
formato§§y Ä
,§§Ä Å
QrBytes§§Ç â
,§§â ä
sede§§ã è
,§§è ê
null§§ë ï
,§§ï ñ
null§§ó õ
,§§õ ú
null§§ù °
,§§° ¢
this§§£ ß
)§§ß ®
;§§® ©
}
•• 
return
¶¶ !
htmlStringOperacion
¶¶ *
;
¶¶* +
}
ßß 
catch
®® 
(
®® 
	Exception
®® 
e
®® 
)
®® 
{
©© 
throw
™™ 
new
™™ !
ControllerException
™™ -
(
™™- .
$str
™™. \
,
™™\ ]
e
™™^ _
)
™™_ `
;
™™` a
}
´´ 
}
¨¨ 	
public
∞∞ 
async
∞∞ 
Task
∞∞ 
<
∞∞ 

JsonResult
∞∞ $
>
∞∞$ %1
#EnviarCorreoElectronicoConDocumento
∞∞& I
(
∞∞I J
long
∞∞J N
idOperacion
∞∞O Z
,
∞∞Z [
int
∞∞\ _
formato
∞∞` g
,
∞∞g h
List
∞∞i m
<
∞∞m n
string
∞∞n t
>
∞∞t u"
correosElectronicos∞∞v â
)∞∞â ä
{
±± 	
try
≤≤ 
{
≥≥ 
var
¥¥ 
sede
¥¥ 
=
¥¥ 
ObtenerSede
¥¥ &
(
¥¥& '
)
¥¥' (
;
¥¥( )
var
µµ 
	operacion
µµ 
=
µµ !
configuracionLogica
µµ  3
.
µµ3 4<
.ObtenerTipoTransaccionTipoComprobanteOperacion
µµ4 b
(
µµb c
idOperacion
µµc n
)
µµn o
;
µµo p
var
∂∂ 

htmlString
∂∂ 
=
∂∂  
await
∂∂! &(
GenerarHtmlStringOperacion
∂∂' A
(
∂∂A B
sede
∂∂B F
,
∂∂F G
	operacion
∂∂H Q
,
∂∂Q R
formato
∂∂S Z
)
∂∂Z [
;
∂∂[ \
var
∑∑ 
pdfDocumento
∑∑  
=
∑∑! "
pdfUtil
∑∑# *
.
∑∑* +!
ObtenerPdfDocumento
∑∑+ >
(
∑∑> ?

htmlString
∑∑? I
,
∑∑I J
(
∑∑K L
FormatoImpresion
∑∑L \
)
∑∑\ ]
formato
∑∑] d
)
∑∑d e
;
∑∑e f
List
∏∏ 
<
∏∏ 
LinkedResource
∏∏ #
>
∏∏# $
	resources
∏∏% .
=
∏∏/ 0
new
∏∏1 4
List
∏∏5 9
<
∏∏9 :
LinkedResource
∏∏: H
>
∏∏H I
(
∏∏I J
)
∏∏J K
;
∏∏K L
string
∫∫ 
asunto
∫∫ 
=
∫∫ 
operacionLogica
∫∫  /
.
∫∫/ 0.
 ObtenerAsuntoDeCorreoElectronico
∫∫0 P
(
∫∫P Q
sede
∫∫Q U
,
∫∫U V
	operacion
∫∫W `
)
∫∫` a
;
∫∫a b
string
ªª 
cuerpo
ªª 
=
ªª 
operacionLogica
ªª  /
.
ªª/ 0.
 ObtenerCuerpoDeCorreoElectronico
ªª0 P
(
ªªP Q
sede
ªªQ U
,
ªªU V
	operacion
ªªW `
,
ªª` a
Request
ªªb i
.
ªªi j
MapPath
ªªj q
(
ªªq r
Request
ªªr y
.
ªªy z
ApplicationPathªªz â
)ªªâ ä
,ªªä ã
	resourcesªªå ï
)ªªï ñ
;ªªñ ó
var
ºº  
documentosAdjuntos
ºº &
=
ºº' (
new
ºº) ,
List
ºº- 1
<
ºº1 2

Attachment
ºº2 <
>
ºº< =
(
ºº= >
)
ºº> ?
{
ºº@ A
new
ººB E

Attachment
ººF P
(
ººP Q
new
ººQ T
MemoryStream
ººU a
(
ººa b
pdfDocumento
ººb n
.
ººn o
Save
ººo s
(
ººs t
)
ººt u
)
ººu v
,
ººv w
	operacionººx Å
.ººÅ Ç
ComprobanteººÇ ç
+ººé è
$strººê ï
+ººñ ó
	operacionººò °
.ºº° ¢
Terceroºº¢ ©
+ºº™ ´
$strºº¨ ≤
,ºº≤ ≥
$strºº¥ ≈
)ºº≈ ∆
}ºº« »
;ºº» …
if
ΩΩ 
(
ΩΩ 
Diccionario
ΩΩ 
.
ΩΩ  :
,TiposDeComprobanteTributablesMasGuiaRemision
ΩΩ  L
.
ΩΩL M
Contains
ΩΩM U
(
ΩΩU V
	operacion
ΩΩV _
.
ΩΩ_ `
IdTipoComprobante
ΩΩ` q
)
ΩΩq r
)
ΩΩr s
{
ææ 
byte
øø 
[
øø 
]
øø 
	fileBytes
øø $
=
øø% &
await
øø' ,!
GenerarDocumentoXml
øø- @
(
øø@ A
sede
øøA E
,
øøE F
	operacion
øøG P
)
øøP Q
;
øøQ R 
documentosAdjuntos
¿¿ &
.
¿¿& '
Add
¿¿' *
(
¿¿* +
new
¿¿+ .

Attachment
¿¿/ 9
(
¿¿9 :
new
¿¿: =
MemoryStream
¿¿> J
(
¿¿J K
	fileBytes
¿¿K T
)
¿¿T U
,
¿¿U V
	operacion
¿¿W `
.
¿¿` a
Comprobante
¿¿a l
+
¿¿m n
$str
¿¿o t
+
¿¿u v
	operacion¿¿w Ä
.¿¿Ä Å
Tercero¿¿Å à
+¿¿â ä
$str¿¿ã ë
,¿¿ë í
$str¿¿ì §
)¿¿§ •
)¿¿• ¶
;¿¿¶ ß
}
¡¡ 
OperationResult
¬¬ 
result
¬¬  &
=
¬¬' (
mailer
¬¬) /
.
¬¬/ 0
Send
¬¬0 4
(
¬¬4 5
asunto
¬¬5 ;
,
¬¬; <
cuerpo
¬¬= C
,
¬¬C D!
correosElectronicos
¬¬E X
,
¬¬X Y 
AplicacionSettings
¬¬Z l
.
¬¬l m
Default
¬¬m t
.
¬¬t u
ToMailDefault¬¬u Ç
,¬¬Ç É"
documentosAdjuntos¬¬Ñ ñ
,¬¬ñ ó
	resources¬¬ò °
)¬¬° ¢
;¬¬¢ £
return
√√ 
Json
√√ 
(
√√ 
new
√√ 
{
√√  !
result
√√" (
.
√√( )
code_result
√√) 4
,
√√4 5
data
√√6 :
=
√√; <
result
√√= C
.
√√C D
information
√√D O
,
√√O P 
result_description
√√Q c
=
√√d e
result
√√f l
.
√√l m
title
√√m r
}
√√s t
)
√√t u
;
√√u v
}
ƒƒ 
catch
≈≈ 
(
≈≈ 
	Exception
≈≈ 
e
≈≈ 
)
≈≈ 
{
∆∆ 
return
«« 
new
«« "
JsonHttpStatusResult
«« /
(
««/ 0
Util
««0 4
.
««4 5
	ErrorJson
««5 >
(
««> ?
e
««? @
)
««@ A
,
««A B
HttpStatusCode
««C Q
.
««Q R!
InternalServerError
««R e
)
««e f
;
««f g
}
»» 
}
…… 	
}
ÀÀ 
}ÃÃ îc
ZD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\ConfiguracionController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class #
ConfiguracionController (
:) *

Controller+ 5
{ 
private 
readonly  
IConfiguracionLogica - 
_logicaConfiguracion. B
;B C
public #
ConfiguracionController &
(& '
)' (
{ 	 
_logicaConfiguracion  
=! "
Dependencia# .
.. /
Resolve/ 6
<6 7 
IConfiguracionLogica7 K
>K L
(L M
)M N
;N O
} 	
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
public 

JsonResult  
GuardarConfiguracion .
(. /"
ConfiguracionViewModel/ E
configuracionF S
)S T
{ 	
try   
{!! 
OperationResult"" 
	resultado""  )
;"") *
if## 
(## 
configuracion## !
.##! "
Id##" $
!=##% '
$num##( )
)##) *
{$$ 
	resultado%% 
=%%  
_logicaConfiguracion%%  4
.%%4 5#
actualizarConfiguracion%%5 L
(%%L M
configuracion%%M Z
.%%Z [
Id%%[ ]
,%%] ^
configuracion%%_ l
.%%l m
Nombre%%m s
,%%s t
configuracion	%%u Ç
.
%%Ç É
Descripcion
%%É é
)
%%é è
;
%%è ê
}&& 
else'' 
{(( 
	resultado)) 
=))  
_logicaConfiguracion))  4
.))4 5 
guardarConfiguracion))5 I
())I J
configuracion))J W
.))W X
Nombre))X ^
,))^ _
configuracion))` m
.))m n
Descripcion))n y
)))y z
;))z {
}** 
Util,, 
.,, 
VerificarError,, #
(,,# $
	resultado,,$ -
),,- .
;,,. /
return-- 
Json-- 
(-- 
new-- 
{--  !
code_result--" -
=--. /
	resultado--0 9
.--9 :
code_result--: E
,--E F
data--G K
=--L M
	resultado--N W
.--W X
data--X \
,--\ ]
result_description--^ p
=--q r
	resultado--s |
.--| }
title	--} Ç
}
--É Ñ
)
--Ñ Ö
;
--Ö Ü
}.. 
catch// 
(// 
	Exception// 
e// 
)// 
{00 
HttpContext11 
.11 
Response11 $
.11$ %

StatusCode11% /
=110 1
$num112 5
;115 6
return22 
Json22 
(22 
Util22  
.22  !
	ErrorJson22! *
(22* +
e22+ ,
)22, -
)22- .
;22. /
}33 
}44 	
public55 

JsonResult55 )
GuardarParametroConfiguracion55 7
(557 8+
ParametroConfiguracionViewModel558 W
	parametro55X a
)55a b
{66 	
try77 
{88 
OperationResult99 
	resultado99  )
;99) *
if:: 
(:: 
	parametro:: 
.:: 
Id::  
!=::! #
$num::$ %
)::% &
{;; 
	resultado<< 
=<<  
_logicaConfiguracion<<  4
.<<4 5,
 actualizarParametroConfiguracion<<5 U
(<<U V
	parametro<<V _
.<<_ `
Id<<` b
,<<b c
	parametro<<d m
.<<m n
IdConfiguracion<<n }
,<<} ~
	parametro	<< à
.
<<à â
Nombre
<<â è
,
<<è ê
	parametro
<<ë ö
.
<<ö õ
Tipo
<<õ ü
,
<<ü †
	parametro
<<° ™
.
<<™ ´
Descripcion
<<´ ∂
,
<<∂ ∑
	parametro
<<∏ ¡
.
<<¡ ¬
Valor
<<¬ «
)
<<« »
;
<<» …
switch== 
(== 
	parametro== $
.==$ %
IdConfiguracion==% 4
)==4 5
{>> 
case?? 
$num?? 
:?? 
TransaccionSettings??  3
.??3 4
Reset??4 9
(??9 :
)??: ;
;??; <
break??< A
;??A B
case@@ 
$num@@ 
:@@ #
OperationResultSettings@@  7
.@@7 8
Reset@@8 =
(@@= >
)@@> ?
;@@? @
break@@@ E
;@@E F
caseAA 
$numAA 
:AA 
MaestroSettingsAA  /
.AA/ 0
ResetAA0 5
(AA5 6
)AA6 7
;AA7 8
breakAA8 =
;AA= >
caseBB 
$numBB 
:BB *
FacturacionElectronicaSettingsBB  >
.BB> ?
ResetBB? D
(BBD E
)BBE F
;BBF G
breakBBH M
;BBM N
caseCC 
$numCC 
:CC  
ContabilidadSettingsCC  4
.CC4 5
ResetCC5 :
(CC: ;
)CC; <
;CC< =
breakCC> C
;CCC D
caseDD 
$numDD 
:DD 
ConceptoSettingsDD  0
.DD0 1
ResetDD1 6
(DD6 7
)DD7 8
;DD8 9
breakDD: ?
;DD? @
caseEE 
$numEE 
:EE 
AplicacionSettingsEE  2
.EE2 3
ResetEE3 8
(EE8 9
)EE9 :
;EE: ;
breakEE< A
;EEA B
caseFF 
$numFF 
:FF 
ActorSettingsFF  -
.FF- .
ResetFF. 3
(FF3 4
)FF4 5
;FF5 6
breakFF7 <
;FF< =
caseGG 
$numGG 
:GG 
ReporteSettingsGG  /
.GG/ 0
ResetGG0 5
(GG5 6
)GG6 7
;GG7 8
breakGG9 >
;GG> ?
caseHH 
$numHH 
:HH  &
LibrosElectronicosSettingsHH! ;
.HH; <
ResetHH< A
(HHA B
)HHB C
;HHC D
breakHHE J
;HHJ K
caseII 
$numII 
:II  
HotelSettingsII! .
.II. /
ResetII/ 4
(II4 5
)II5 6
;II6 7
breakII8 =
;II= >
caseJJ 
$numJJ 
:JJ  
VentasSettingsJJ! /
.JJ/ 0
ResetJJ0 5
(JJ5 6
)JJ6 7
;JJ7 8
breakJJ9 >
;JJ> ?
caseKK 
$numKK 
:KK  
RestauranteSettingsKK! 4
.KK4 5
ResetKK5 :
(KK: ;
)KK; <
;KK< =
breakKK> C
;KKC D
caseLL 
$numLL 
:LL  
CocheraSettingsLL! 0
.LL0 1
ResetLL1 6
(LL6 7
)LL7 8
;LL8 9
breakLL: ?
;LL? @
caseMM 
$numMM 
:MM  
CotizacionSettingsMM! 3
.MM3 4
ResetMM4 9
(MM9 :
)MM: ;
;MM; <
breakMM= B
;MMB C
caseNN 
$numNN 
:NN  !
CodigoFESunatSettingsNN! 6
.NN6 7
ResetNN7 <
(NN< =
)NN= >
;NN> ?
breakNN@ E
;NNE F
caseOO 
$numOO 
:OO  
ConcarSettingsOO! /
.OO/ 0
ResetOO0 5
(OO5 6
)OO6 7
;OO7 8
breakOO9 >
;OO> ?
}PP 
}QQ 
elseRR 
{SS 
	resultadoTT 
=TT  
_logicaConfiguracionTT  4
.TT4 5)
guardarParametroConfiguracionTT5 R
(TTR S
	parametroTTS \
.TT\ ]
IdConfiguracionTT] l
,TTl m
	parametroTTn w
.TTw x
NombreTTx ~
,TT~ 
	parametro
TTÄ â
.
TTâ ä
Tipo
TTä é
,
TTé è
	parametro
TTê ô
.
TTô ö
Descripcion
TTö •
,
TT• ¶
	parametro
TTß ∞
.
TT∞ ±
Valor
TT± ∂
)
TT∂ ∑
;
TT∑ ∏
}UU 
UtilWW 
.WW 
VerificarErrorWW #
(WW# $
	resultadoWW$ -
)WW- .
;WW. /
returnXX 
JsonXX 
(XX 
newXX 
{XX  !
code_resultXX" -
=XX. /
	resultadoXX0 9
.XX9 :
code_resultXX: E
,XXE F
dataXXG K
=XXL M
	resultadoXXN W
.XXW X
dataXXX \
,XX\ ]
result_descriptionXX^ p
=XXq r
	resultadoXXs |
.XX| }
title	XX} Ç
}
XXÉ Ñ
)
XXÑ Ö
;
XXÖ Ü
}YY 
catchZZ 
(ZZ 
	ExceptionZZ 
eZZ 
)ZZ 
{[[ 
HttpContext\\ 
.\\ 
Response\\ $
.\\$ %

StatusCode\\% /
=\\0 1
$num\\2 5
;\\5 6
return]] 
Json]] 
(]] 
Util]]  
.]]  !
	ErrorJson]]! *
(]]* +
e]]+ ,
)]], -
)]]- .
;]]. /
}^^ 
}aa 	
publicbb 

JsonResultbb !
ListarConfiguracionesbb /
(bb/ 0
)bb0 1
{cc 	
trydd 
{ee 
varff 

resultadosff 
=ff   
_logicaConfiguracionff! 5
.ff5 6"
obtenerConfiguracionesff6 L
(ffL M
)ffM N
;ffN O
Listgg 
<gg "
ConfiguracionViewModelgg +
>gg+ ,
configuracionesgg- <
=gg= >
newgg? B
ListggC G
<ggG H"
ConfiguracionViewModelggH ^
>gg^ _
(gg_ `
)gg` a
;gga b
foreachhh 
(hh 
varhh 
itemhh !
inhh" $

resultadoshh% /
)hh/ 0
{ii 
configuracionesjj #
.jj# $
Addjj$ '
(jj' (
newjj( +"
ConfiguracionViewModeljj, B
(jjB C
itemjjC G
)jjG H
)jjH I
;jjI J
}kk 
returnll 
Jsonll 
(ll 
configuracionesll +
)ll+ ,
;ll, -
}mm 
catchnn 
(nn 
	Exceptionnn 
enn 
)nn 
{oo 
returnpp 
Jsonpp 
(pp 
Utilpp  
.pp  !
	ErrorJsonpp! *
(pp* +
epp+ ,
)pp, -
)pp- .
;pp. /
}qq 
}rr 	
publicss 

JsonResultss )
ListarParametrosConfiguracionss 7
(ss7 8
intss8 ;
idConfiguracionss< K
)ssK L
{tt 	
tryuu 
{vv 
Listww 
<ww &
Parametro_de_configuracionww /
>ww/ 0

resultadosww1 ;
=ww< = 
_logicaConfiguracionww> R
.wwR S*
obtenerParametrosConfiguracionwwS q
(wwq r
idConfiguracion	wwr Å
)
wwÅ Ç
;
wwÇ É
Listxx 
<xx +
ParametroConfiguracionViewModelxx 4
>xx4 5

parametrosxx6 @
=xxA B
newxxC F
ListxxG K
<xxK L+
ParametroConfiguracionViewModelxxL k
>xxk l
(xxl m
)xxm n
;xxn o
foreachyy 
(yy 
varyy 
itemyy !
inyy" $

resultadosyy% /
)yy/ 0
{zz 

parametros{{ 
.{{ 
Add{{ "
({{" #
new{{# &+
ParametroConfiguracionViewModel{{' F
({{F G
item{{G K
){{K L
){{L M
;{{M N
}|| 
return}} 
Json}} 
(}} 

parametros}} &
)}}& '
;}}' (
}~~ 
catch 
( 
	Exception 
e 
) 
{
ÄÄ 
return
ÅÅ 
Json
ÅÅ 
(
ÅÅ 
Util
ÅÅ  
.
ÅÅ  !
	ErrorJson
ÅÅ! *
(
ÅÅ* +
e
ÅÅ+ ,
)
ÅÅ, -
)
ÅÅ- .
;
ÅÅ. /
}
ÇÇ 
}
ÉÉ 	
}
ÑÑ 
}ÖÖ ‰
bD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\HttpStatus\JsonHttpStatusResult.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{		 
public

 

class

  
JsonHttpStatusResult

 %
:

% &

JsonResult

' 1
{ 
private 
readonly 
HttpStatusCode '
_httpStatus( 3
;3 4
public  
JsonHttpStatusResult #
(# $
object$ *
data+ /
,/ 0
HttpStatusCode1 ?

httpStatus@ J
)J K
{ 	
Data 
= 
data 
; 
_httpStatus 
= 

httpStatus $
;$ %
} 	
public 
override 
void 
ExecuteResult *
(* +
ControllerContext+ <
context= D
)D E
{ 	
context 
. 
RequestContext "
." #
HttpContext# .
.. /
Response/ 7
.7 8

StatusCode8 B
=C D
(E F
intF I
)I J
_httpStatusJ U
;U V
base 
. 
ExecuteResult 
( 
context &
)& '
;' (
} 	
} 
} √§
_D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\LibrosElectronicosController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class (
LibrosElectronicosController -
:. /
BaseController0 >
{ /
#LibrosElectronicosGeneradorReportes +
	generador, 5
=6 7
new8 ;/
#LibrosElectronicosGeneradorReportes< _
(_ `
)` a
;a b
private 
readonly %
ILibrosElectronicosLogica 2%
_librosElectronicosLogica3 L
;L M
private 
readonly 
IActorNegocioLogica ,
_actorNegocioLogica- @
;@ A
private 
readonly 
IOperacionLogica )
_logicaOperacion* :
;: ;
	protected 
readonly 
IMaestroLogica )
maestroLogica* 7
;7 8
public (
LibrosElectronicosController +
(+ ,
), -
{ 	%
_librosElectronicosLogica %
=& '
Dependencia( 3
.3 4
Resolve4 ;
<; <%
ILibrosElectronicosLogica< U
>U V
(V W
)W X
;X Y
_actorNegocioLogica 
=  !
Dependencia" -
.- .
Resolve. 5
<5 6
IActorNegocioLogica6 I
>I J
(J K
)K L
;L M
_logicaOperacion   
=   
Dependencia   *
.  * +
Resolve  + 2
<  2 3
IOperacionLogica  3 C
>  C D
(  D E
)  E F
;  F G
maestroLogica!! 
=!! 
Dependencia!! '
.!!' (
Resolve!!( /
<!!/ 0
IMaestroLogica!!0 >
>!!> ?
(!!? @
)!!@ A
;!!A B
}"" 	
public$$ 
ActionResult$$ 
ObtenerReportesPLE$$ .
($$. /
int$$/ 2
	idPeriodo$$3 <
)$$< =
{%% 	
try&& 
{'' 
var(( 
sede(( 
=(( 
ObtenerSede(( &
(((& '
)((' (
;((( )
var)) 
periodo)) 
=)) %
_librosElectronicosLogica)) 7
.))7 8
ObtenerPeriodo))8 F
())F G
	idPeriodo))G P
)))P Q
;))Q R
var** 
librosElectronicos** &
=**' (
maestroLogica**) 6
.**6 71
%ObtenerDetalleMaestroLibroElectronico**7 \
(**\ ]
)**] ^
;**^ _
var++ .
"idsLibrosElectronicosSeleccionados++ 6
=++7 8
new++9 <
List++= A
<++A B
int++B E
>++E F
{++G H
MaestroSettings++I X
.++X Y
Default++Y `
.++` a;
.IdDetalleMaestroLibroElectronicoVentasIngresos	++a è
,
++è ê
MaestroSettings
++ë †
.
++† °
Default
++° ®
.
++® ©5
'IdDetalleMaestroLibroElectronicoCompras
++© –
,
++– —
MaestroSettings
++“ ·
.
++· ‚
Default
++‚ È
.
++È ÍC
5IdDetalleMaestroLibroElectronicoComprasNoDomiciliadas
++Í ü
}
++† °
;
++° ¢
var,, +
librosElectronicosSeleccionados,, 3
=,,4 5
librosElectronicos,,6 H
.,,H I
Where,,I N
(,,N O
le,,O Q
=>,,R T.
"idsLibrosElectronicosSeleccionados,,U w
.,,w x
Contains	,,x Ä
(
,,Ä Å
le
,,Å É
.
,,É Ñ
Id
,,Ñ Ü
)
,,Ü á
)
,,á à
.
,,à â
ToList
,,â è
(
,,è ê
)
,,ê ë
;
,,ë í
string-- 
fileNameZip-- "
=--# $
sede--% )
.--) *
DocumentoIdentidad--* <
+--= >
$str--? D
+--E F
periodo--G N
.--N O
nombre--O U
+--V W
$str--X ^
;--^ _
var// 
compressedBytes// #
=//$ %
	generador//& /
./// 02
&GenerarLibrosElectronicosTXTComprimido//0 V
(//V W
ProfileData//W b
(//b c
)//c d
.//d e
Empleado//e m
.//m n
Id//n p
,//p q
sede//r v
,//v w
periodo//x 
,	// Ä-
librosElectronicosSeleccionados
//Å †
)
//† °
;
//° ¢
return00 
File00 
(00 
compressedBytes00 +
,00+ ,
$str00- >
,00> ?
fileNameZip00@ K
)00K L
;00L M
}11 
catch22 
(22 
LogicaException22 "
oe22# %
)22% &
{33 
return44 
new44  
JsonHttpStatusResult44 /
(44/ 0
Util440 4
.444 5
	ErrorJson445 >
(44> ?
oe44? A
)44A B
,44B C
HttpStatusCode44D R
.44R S
InternalServerError44S f
)44f g
;44g h
}55 
catch66 
(66 
	Exception66 
e66 
)66 
{77 
return88 
new88  
JsonHttpStatusResult88 /
(88/ 0
Util880 4
.884 5
	ErrorJson885 >
(88> ?
new88? B
	Exception88C L
(88L M
$str	88M Å
,
88Å Ç
e
88É Ñ
)
88Ñ Ö
)
88Ö Ü
,
88Ü á
HttpStatusCode
88à ñ
.
88ñ ó!
InternalServerError
88ó ™
)
88™ ´
;
88´ ¨
}99 
}:: 	
public<< 
ActionResult<< #
ObtenerReportesExcelPLE<< 3
(<<3 4
int<<4 7
	idPeriodo<<8 A
)<<A B
{== 	
try>> 
{?? 
var@@ 
sede@@ 
=@@ 
ObtenerSede@@ &
(@@& '
)@@' (
;@@( )
varAA 
periodoAA 
=AA %
_librosElectronicosLogicaAA 7
.AA7 8
ObtenerPeriodoAA8 F
(AAF G
	idPeriodoAAG P
)AAP Q
;AAQ R
varBB 
librosElectronicosBB &
=BB' (
maestroLogicaBB) 6
.BB6 71
%ObtenerDetalleMaestroLibroElectronicoBB7 \
(BB\ ]
)BB] ^
;BB^ _
varCC .
"idsLibrosElectronicosSeleccionadosCC 6
=CC7 8
newCC9 <
ListCC= A
<CCA B
intCCB E
>CCE F
{CCG H
MaestroSettingsCCI X
.CCX Y
DefaultCCY `
.CC` a;
.IdDetalleMaestroLibroElectronicoVentasIngresos	CCa è
,
CCè ê
MaestroSettings
CCë †
.
CC† °
Default
CC° ®
.
CC® ©5
'IdDetalleMaestroLibroElectronicoCompras
CC© –
,
CC– —
MaestroSettings
CC“ ·
.
CC· ‚
Default
CC‚ È
.
CCÈ ÍC
5IdDetalleMaestroLibroElectronicoComprasNoDomiciliadas
CCÍ ü
}
CC† °
;
CC° ¢
varDD +
librosElectronicosSeleccionadosDD 3
=DD4 5
librosElectronicosDD6 H
.DDH I
WhereDDI N
(DDN O
leDDO Q
=>DDR T.
"idsLibrosElectronicosSeleccionadosDDU w
.DDw x
Contains	DDx Ä
(
DDÄ Å
le
DDÅ É
.
DDÉ Ñ
Id
DDÑ Ü
)
DDÜ á
)
DDá à
.
DDà â
ToList
DDâ è
(
DDè ê
)
DDê ë
;
DDë í
stringEE 
fileNameZipEE "
=EE# $
sedeEE% )
.EE) *
DocumentoIdentidadEE* <
+EE= >
$strEE? D
+EEE F
periodoEEG N
.EEN O
nombreEEO U
+EEV W
$strEEX ^
;EE^ _
varGG 
compressedBytesGG #
=GG$ %
	generadorGG& /
.GG/ 02
&GenerarLibrosElectronicosCSVComprimidoGG0 V
(GGV W
ProfileDataGGW b
(GGb c
)GGc d
.GGd e
EmpleadoGGe m
.GGm n
IdGGn p
,GGp q
sedeGGr v
,GGv w
periodoGGx 
,	GG Ä-
librosElectronicosSeleccionados
GGÅ †
)
GG† °
;
GG° ¢
returnHH 
FileHH 
(HH 
compressedBytesHH +
,HH+ ,
$strHH- >
,HH> ?
fileNameZipHH@ K
)HHK L
;HHL M
}II 
catchJJ 
(JJ 
LogicaExceptionJJ "
oeJJ# %
)JJ% &
{KK 
returnLL 
newLL  
JsonHttpStatusResultLL /
(LL/ 0
UtilLL0 4
.LL4 5
	ErrorJsonLL5 >
(LL> ?
oeLL? A
)LLA B
,LLB C
HttpStatusCodeLLD R
.LLR S
InternalServerErrorLLS f
)LLf g
;LLg h
}MM 
catchNN 
(NN 
	ExceptionNN 
eNN 
)NN 
{OO 
returnPP 
newPP  
JsonHttpStatusResultPP /
(PP/ 0
UtilPP0 4
.PP4 5
	ErrorJsonPP5 >
(PP> ?
newPP? B
	ExceptionPPC L
(PPL M
$str	PPM Å
,
PPÅ Ç
e
PPÉ Ñ
)
PPÑ Ö
)
PPÖ Ü
,
PPÜ á
HttpStatusCode
PPà ñ
.
PPñ ó!
InternalServerError
PPó ™
)
PP™ ´
;
PP´ ¨
}QQ 
}RR 	
publicTT 

JsonResultTT %
ObtenerReporteVentasExcelTT 3
(TT3 4
intTT4 7
	idPeriodoTT8 A
)TTA B
{UU 	
tryVV 
{WW 
varXX 
sedeXX 
=XX 
ObtenerSedeXX &
(XX& '
)XX' (
;XX( )
varYY 
periodoYY 
=YY %
_librosElectronicosLogicaYY 7
.YY7 8
ObtenerPeriodoYY8 F
(YYF G
	idPeriodoYYG P
)YYP Q
;YYQ R
varZZ 
	rptviewerZZ 
=ZZ 
	generadorZZ  )
.ZZ) *(
GenerarReporteDeVentaEnExcelZZ* F
(ZZF G
ProfileDataZZG R
(ZZR S
)ZZS T
.ZZT U
EmpleadoZZU ]
.ZZ] ^
IdZZ^ `
,ZZ` a
sedeZZb f
,ZZf g
periodoZZh o
,ZZo p
trueZZq u
,ZZu v
RequestZZw ~
.ZZ~ 
MapPath	ZZ Ü
(
ZZÜ á
Request
ZZá é
.
ZZé è
ApplicationPath
ZZè û
)
ZZû ü
)
ZZü †
;
ZZ† °
string\\ 
filenameContent\\ &
=\\' (
this\\) -
.\\- .
ObtenerSede\\. 9
(\\9 :
)\\: ;
.\\; <
DocumentoIdentidad\\< N
+\\O P
$str\\Q T
+\\U V
this\\W [
.\\[ \
ObtenerSede\\\ g
(\\g h
)\\h i
.\\i j
Nombre\\j p
+\\q r
$str\\s v
+\\w x
periodo	\\y Ä
.
\\Ä Å
anio
\\Å Ö
+
\\Ü á
$str
\\à ã
+
\\å ç
periodo
\\é ï
.
\\ï ñ
mes
\\ñ ô
;
\\ô ö
string]] 
filename]] 
=]]  !
string]]" (
.]]( )
Format]]) /
(]]/ 0
$str]]0 9
,]]9 :
filenameContent]]; J
,]]J K
$str]]L Q
)]]Q R
;]]R S
filename^^ 
=^^ 
filename^^ #
.^^# $
Replace^^$ +
(^^+ ,
$str^^, /
,^^/ 0
$str^^1 3
)^^3 4
;^^4 5
byte`` 
[`` 
]`` 
bytes`` 
=`` 
	rptviewer`` (
.``( )
LocalReport``) 4
.``4 5
Render``5 ;
(``; <
$str``< C
,``C D
null``E I
,``I J
out``K N
string``O U
mimeType``V ^
,``^ _
out``` c
string``d j
encoding``k s
,``s t
out``u x
string``y 
	extension
``Ä â
,
``â ä
out
``ã é
string
``è ï
[
``ï ñ
]
``ñ ó
	streamids
``ò °
,
``° ¢
out
``£ ¶
Warning
``ß Æ
[
``Æ Ø
]
``Ø ∞
warnings
``± π
)
``π ∫
;
``∫ ª
Responsebb 
.bb 
ClearHeadersbb %
(bb% &
)bb& '
;bb' (
Responsecc 
.cc 
Clearcc 
(cc 
)cc  
;cc  !
Responsedd 
.dd 
	AddHeaderdd "
(dd" #
$strdd# 8
,dd8 9
$strdd: Q
+ddR S
filenameddT \
)dd\ ]
;dd] ^
Responseee 
.ee 
ContentTypeee $
=ee% &
mimeTypeee' /
;ee/ 0
Responseff 
.ff 
BinaryWriteff $
(ff$ %
bytesff% *
)ff* +
;ff+ ,
Responsegg 
.gg 
Flushgg 
(gg 
)gg  
;gg  !
Responsehh 
.hh 
Endhh 
(hh 
)hh 
;hh 
returnjj 
Jsonjj 
(jj 
$strjj ;
)jj; <
;jj< =
}kk 
catchmm 
(mm 
	Exceptionmm 
emm 
)mm 
{nn 
throwoo 
newoo 
ControllerExceptionoo -
(oo- .
$stroo. `
,oo` a
eoob c
)ooc d
;ood e
}pp 
}qq 	
publicrr 
ActionResultrr $
ReporteDeVentasEIngresosrr 4
(rr4 5
intrr5 8
	idPeriodorr9 B
)rrB C
{ss 	
trytt 
{uu 
varvv 
periodovv 
=vv %
_librosElectronicosLogicavv 7
.vv7 8
ObtenerPeriodovv8 F
(vvF G
	idPeriodovvG P
)vvP Q
;vvQ R
varww 
sedeww 
=ww 
ObtenerSedeww &
(ww& '
)ww' (
;ww( )
varyy 
	rptvieweryy 
=yy 
	generadoryy  )
.yy) *+
GenerarReporteDeVentasEIngresosyy* I
(yyI J
ProfileDatayyJ U
(yyU V
)yyV W
.yyW X
EmpleadoyyX `
.yy` a
Idyya c
,yyc d
sedeyye i
,yyi j
periodoyyk r
,yyr s
trueyyt x
,yyx y
_logicaOperacion	yyz ä
,
yyä ã
Request
yyå ì
.
yyì î
MapPath
yyî õ
(
yyõ ú
Request
yyú £
.
yy£ §
ApplicationPath
yy§ ≥
)
yy≥ ¥
)
yy¥ µ
;
yyµ ∂
ViewBag{{ 
.{{ 
ReportViewer{{ $
={{% &
	rptviewer{{' 0
;{{0 1
return|| 
View|| 
(|| 
$str|| 1
)||1 2
;||2 3
}}} 
catch~~ 
(~~ 
LogicaException~~ "
oe~~# %
)~~% &
{ 
return
ÄÄ 
new
ÄÄ "
JsonHttpStatusResult
ÄÄ /
(
ÄÄ/ 0
Util
ÄÄ0 4
.
ÄÄ4 5
	ErrorJson
ÄÄ5 >
(
ÄÄ> ?
oe
ÄÄ? A
)
ÄÄA B
,
ÄÄB C
HttpStatusCode
ÄÄD R
.
ÄÄR S!
InternalServerError
ÄÄS f
)
ÄÄf g
;
ÄÄg h
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
e
ÇÇ 
)
ÇÇ 
{
ÉÉ 
return
ÑÑ 
new
ÑÑ "
JsonHttpStatusResult
ÑÑ /
(
ÑÑ/ 0
Util
ÑÑ0 4
.
ÑÑ4 5
	ErrorJson
ÑÑ5 >
(
ÑÑ> ?
new
ÑÑ? B
	Exception
ÑÑC L
(
ÑÑL M
$strÑÑM Ü
,ÑÑÜ á
eÑÑà â
)ÑÑâ ä
)ÑÑä ã
,ÑÑã å
HttpStatusCodeÑÑç õ
.ÑÑõ ú#
InternalServerErrorÑÑú Ø
)ÑÑØ ∞
;ÑÑ∞ ±
}
ÖÖ 
}
ÜÜ 	
public
àà 
ActionResult
àà 1
#ReporteDeVentasEIngresosSinConcepto
àà ?
(
àà? @
int
àà@ C
	idPeriodo
ààD M
)
ààM N
{
ââ 	
try
ää 
{
ãã 
var
åå 
periodo
åå 
=
åå '
_librosElectronicosLogica
åå 7
.
åå7 8
ObtenerPeriodo
åå8 F
(
ååF G
	idPeriodo
ååG P
)
ååP Q
;
ååQ R
var
çç 
sede
çç 
=
çç 
ObtenerSede
çç &
(
çç& '
)
çç' (
;
çç( )
var
èè 
	rptviewer
èè 
=
èè 
	generador
èè  )
.
èè) *8
*GenerarReporteDeVentasEIngresosSinConcepto
èè* T
(
èèT U
ProfileData
èèU `
(
èè` a
)
èèa b
.
èèb c
Empleado
èèc k
.
èèk l
Id
èèl n
,
èèn o
sede
èèp t
,
èèt u
periodo
èèv }
,
èè} ~
trueèè É
,èèÉ Ñ 
_logicaOperacionèèÖ ï
,èèï ñ
Requestèèó û
.èèû ü
MapPathèèü ¶
(èè¶ ß
Requestèèß Æ
.èèÆ Ø
ApplicationPathèèØ æ
)èèæ ø
)èèø ¿
;èè¿ ¡
ViewBag
ëë 
.
ëë 
ReportViewer
ëë $
=
ëë% &
	rptviewer
ëë' 0
;
ëë0 1
return
íí 
View
íí 
(
íí 
$str
íí 1
)
íí1 2
;
íí2 3
}
ìì 
catch
îî 
(
îî 
LogicaException
îî "
oe
îî# %
)
îî% &
{
ïï 
return
ññ 
new
ññ "
JsonHttpStatusResult
ññ /
(
ññ/ 0
Util
ññ0 4
.
ññ4 5
	ErrorJson
ññ5 >
(
ññ> ?
oe
ññ? A
)
ññA B
,
ññB C
HttpStatusCode
ññD R
.
ññR S!
InternalServerError
ññS f
)
ññf g
;
ññg h
}
óó 
catch
òò 
(
òò 
	Exception
òò 
e
òò 
)
òò 
{
ôô 
return
öö 
new
öö "
JsonHttpStatusResult
öö /
(
öö/ 0
Util
öö0 4
.
öö4 5
	ErrorJson
öö5 >
(
öö> ?
new
öö? B
	Exception
ööC L
(
ööL M
$strööM Ü
,ööÜ á
eööà â
)ööâ ä
)ööä ã
,ööã å
HttpStatusCodeööç õ
.ööõ ú#
InternalServerErrorööú Ø
)ööØ ∞
;öö∞ ±
}
õõ 
}
úú 	
public
ûû 
ActionResult
ûû 
LibroElectronico
ûû ,
(
ûû, -
)
ûû- .
{
üü 	
return
†† 
View
†† 
(
†† 
)
†† 
;
†† 
}
°° 	
public
££ 

JsonResult
££ 1
#ObtenerPeriodosDeLibrosElectronicos
££ =
(
££= >
)
££> ?
{
§§ 	
try
•• 
{
¶¶ 
List
ßß 
<
ßß 
Periodo
ßß 
>
ßß 
	resultado
ßß '
=
ßß( )'
_librosElectronicosLogica
ßß* C
.
ßßC D
ObtenerPeriodos
ßßD S
(
ßßS T
)
ßßT U
;
ßßU V
List
®® 
<
®® $
ComboGenericoViewModel
®® +
>
®®+ ,#
comboGenericoPeriodos
®®- B
=
®®C D
new
®®E H
List
®®I M
<
®®M N$
ComboGenericoViewModel
®®N d
>
®®d e
(
®®e f
)
®®f g
;
®®g h
foreach
©© 
(
©© 
var
©© 
item
©© !
in
©©" $
	resultado
©©% .
)
©©. /
{
™™ #
comboGenericoPeriodos
´´ )
.
´´) *
Add
´´* -
(
´´- .
new
´´. 1$
ComboGenericoViewModel
´´2 H
(
´´H I
item
´´I M
.
´´M N
id
´´N P
,
´´P Q
item
´´R V
.
´´V W
nombre
´´W ]
)
´´] ^
)
´´^ _
;
´´_ `
}
¨¨ 
return
≠≠ 
Json
≠≠ 
(
≠≠ #
comboGenericoPeriodos
≠≠ 1
)
≠≠1 2
;
≠≠2 3
}
ÆÆ 
catch
ØØ 
(
ØØ 
	Exception
ØØ 
e
ØØ 
)
ØØ 
{
∞∞ 
return
±± 
Json
±± 
(
±± 
Util
±±  
.
±±  !
	ErrorJson
±±! *
(
±±* +
e
±±+ ,
)
±±, -
)
±±- .
;
±±. /
}
≤≤ 
}
≥≥ 	
}
¥¥ 
}µµ ÎH
YD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\ContabilidadController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class "
ContabilidadController '
:( )

Controller* 4
{ 
private 
readonly 
IContabilidadLogica ,
_logicaContabilidad- @
;@ A
private 
readonly 
IActorNegocioLogica ,
_logicaActorNegocio- @
;@ A
private 
readonly (
IEstablecimiento_Repositorio 5!
_establecimientoDatos6 K
;K L
public "
ContabilidadController %
(% &
)& '
{ 	
_logicaContabilidad 
=  !
Dependencia" -
.- .
Resolve. 5
<5 6
IContabilidadLogica6 I
>I J
(J K
)K L
;L M
_logicaActorNegocio 
=  !
Dependencia" -
.- .
Resolve. 5
<5 6
IActorNegocioLogica6 I
>I J
(J K
)K L
;L M!
_establecimientoDatos   !
=  " #
Dependencia  $ /
.  / 0
Resolve  0 7
<  7 8(
IEstablecimiento_Repositorio  8 T
>  T U
(  U V
)  V W
;  W X
}"" 	
public## 
ActionResult## 
Series## "
(##" #
)### $
{$$ 	
return%% 
View%% 
(%% 
)%% 
;%% 
}&& 	
public'' 

JsonResult'' 
ObtenerSeries'' '
(''' (
)''( )
{(( 	
List** 
<** 
SerieDeComprobante** #
>**# $
series**% +
=**, -
_logicaContabilidad**. A
.**A B&
obtenerSeriesDeComprobante**B \
(**\ ]
)**] ^
;**^ _
List++ 
<++ 
SerieViewModel++ 
>++  
lista++! &
=++' (
new++) ,
List++- 1
<++1 2
SerieViewModel++2 @
>++@ A
(++A B
)++B C
;++C D
lista,, 
=,, 
SerieViewModel,, "
.,," #
Convert,,# *
(,,* +
series,,+ 1
),,1 2
;,,2 3
return-- 
Json-- 
(-- 
lista-- 
)-- 
;-- 
}.. 	
public// 

JsonResult// 
Guardar// !
(//! "
SerieViewModel//" 0
serieViewModel//1 ?
)//? @
{00 	
try11 
{22 
OperationResult33 
result33  &
=33' (
null33) -
;33- .
if44 
(44 
serieViewModel44 "
.44" #
Id44# %
>44& '
$num44( )
)44) *
{55 
result66 
=66 
_logicaContabilidad66 0
.660 1(
actualizarSerieDeComprobante661 M
(66M N
serieViewModel66N \
.66\ ]
Id66] _
,66_ `
Convert66a h
.66h i
ToInt3266i p
(66p q
serieViewModel66q 
.	66 Ä!
IdTipoDeComprobante
66Ä ì
)
66ì î
,
66î ï
serieViewModel
66ñ §
.
66§ •
NumeroSerie
66• ∞
,
66∞ ±
Convert
66≤ π
.
66π ∫
ToInt32
66∫ ¡
(
66¡ ¬
serieViewModel
66¬ –
.
66– —
IdSede
66— ◊
)
66◊ ÿ
,
66ÿ Ÿ
serieViewModel
66⁄ Ë
.
66Ë È
Autonumerico
66È ı
,
66ı ˆ
serieViewModel
66˜ Ö
.
66Ö Ü
NumeroSiguiente
66Ü ï
,
66ï ñ
serieViewModel
66ó •
.
66• ¶
Vigente
66¶ ≠
)
66≠ Æ
;
66Æ Ø
}77 
else88 
{99 
result:: 
=:: 
_logicaContabilidad:: 0
.::0 1%
guardarSerieDeComprobante::1 J
(::J K
Convert::K R
.::R S
ToInt32::S Z
(::Z [
serieViewModel::[ i
.::i j
IdTipoDeComprobante::j }
)::} ~
,::~ 
serieViewModel
::Ä é
.
::é è
NumeroSerie
::è ö
,
::ö õ
Convert
::ú £
.
::£ §
ToInt32
::§ ´
(
::´ ¨
serieViewModel
::¨ ∫
.
::∫ ª
IdSede
::ª ¡
)
::¡ ¬
,
::¬ √
serieViewModel
::ƒ “
.
::“ ”
Autonumerico
::” ﬂ
,
::ﬂ ‡
serieViewModel
::· Ô
.
::Ô 
NumeroSiguiente
:: ˇ
,
::ˇ Ä
serieViewModel
::Å è
.
::è ê
Vigente
::ê ó
)
::ó ò
;
::ò ô
};; 
Util<< 
.<< 
VerificarError<< #
(<<# $
result<<$ *
)<<* +
;<<+ ,
return== 
Json== 
(== 
new== 
{==  !
code_result==" -
===. /
result==0 6
.==6 7
code_result==7 B
,==B C
data==D H
===I J
result==K Q
.==Q R
data==R V
,==V W
result_description==X j
===k l
result==m s
.==s t
title==t y
}==z {
)=={ |
;==| }
}>> 
catch?? 
(?? 
	Exception?? 
e?? 
)?? 
{@@ 
HttpContextAA 
.AA 
ResponseAA $
.AA$ %

StatusCodeAA% /
=AA0 1
$numAA2 5
;AA5 6
returnBB 
JsonBB 
(BB 
UtilBB  
.BB  !
	ErrorJsonBB! *
(BB* +
eBB+ ,
)BB, -
)BB- .
;BB. /
}CC 
}DD 	
publicEE 

JsonResultEE $
ListarTiposDeComprobanteEE 2
(EE2 3
)EE3 4
{FF 	
ListGG 
<GG 
Detalle_maestroGG  
>GG  !
listaGG" '
=GG( )
_logicaContabilidadGG* =
.GG= >
obtenerComprobantesGG> Q
(GGQ R
)GGR S
;GGS T
ListII 
<II 
ComboGenericoII 
>II 
	respuestaII  )
=II* +
newII, /
ListII0 4
<II4 5
ComboGenericoII5 B
>IIB C
(IIC D
)IID E
;IIE F
forJJ 
(JJ 
intJJ 
iJJ 
=JJ 
$numJJ 
;JJ 
iJJ 
<JJ 
listaJJ  %
.JJ% &
CountJJ& +
;JJ+ ,
iJJ- .
++JJ. 0
)JJ0 1
{KK 
Detalle_maestroLL 
tLL  !
=LL" #
listaLL$ )
[LL) *
iLL* +
]LL+ ,
;LL, -
ComboGenericoMM 
cMM 
=MM  !
newMM" %
ComboGenericoMM& 3
(MM3 4
tMM4 5
.MM5 6
idMM6 8
,MM8 9
tMM: ;
.MM; <
nombreMM< B
)MMB C
;MMC D
	respuestaNN 
.NN 
AddNN 
(NN 
cNN 
)NN  
;NN  !
}OO 
returnPP 
JsonPP 
(PP 
	respuestaPP !
)PP! "
;PP" #
}QQ 	
publicRR 

JsonResultRR 
ListarSedesRR %
(RR% &
)RR& '
{SS 	
ListTT 
<TT $
EstablecimientoComercialTT )
>TT) *
listaTT+ 0
=TT1 2!
_establecimientoDatosTT3 H
.TTH I6
*ObtenerEstablecimientosComercialesVigentesTTI s
(TTs t
)TTt u
.TTu v
ToListTTv |
(TT| }
)TT} ~
;TT~ 
ListUU 
<UU 
ComboGenericoUU 
>UU 
	respuestaUU  )
=UU* +
newUU, /
ListUU0 4
<UU4 5
ComboGenericoUU5 B
>UUB C
(UUC D
)UUD E
;UUE F
forVV 
(VV 
intVV 
iVV 
=VV 
$numVV 
;VV 
iVV 
<VV 
listaVV  %
.VV% &
CountVV& +
;VV+ ,
iVV- .
++VV. 0
)VV0 1
{WW $
EstablecimientoComercialXX (
tXX) *
=XX+ ,
listaXX- 2
[XX2 3
iXX3 4
]XX4 5
;XX5 6
ComboGenericoYY 
cYY 
=YY  !
newYY" %
ComboGenericoYY& 3
(YY3 4
tYY4 5
.YY5 6
IdYY6 8
,YY8 9
tYY: ;
.YY; <
NombreYY< B
,YYB C
tYYD E
.YYE F
DocumentoIdentidadYYF X
)YYX Y
;YYY Z
	respuesta[[ 
.[[ 
Add[[ 
([[ 
c[[ 
)[[  
;[[  !
}\\ 
return]] 
Json]] 
(]] 
	respuesta]] !
)]]! "
;]]" #
}^^ 	
}bb 
}cc ¸É
cD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\FacturacionElectronicaController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class ,
 FacturacionElectronicaController 1
:2 3
BaseController4 B
{ 
readonly 
ActorComercial 
emisor  &
;& '
	protected!! 
readonly!! )
IFacturacionElectronicaLogica!! 8(
facturacionElectronicaLogica!!9 U
;!!U V
	protected"" 
readonly"" 
IMailer"" "
mailer""# )
;"") *
	protected## 
readonly## 
IActorNegocioLogica## .
actorNegocioLogica##/ A
;##A B
	protected$$ 
readonly$$ 
IMaestroLogica$$ )
maestroLogica$$* 7
;$$7 8
	protected%% 
readonly%% 
IOperacionLogica%% +
operacionLogica%%, ;
;%%; <
	protected&& 
readonly&& %
IGeneracionArchivosLogica&& 4$
generacionArchivosLogica&&5 M
;&&M N
	protected'' 
readonly'' 
ISede_Logica'' '

sedeLogica''( 2
;''2 3
public** ,
 FacturacionElectronicaController** /
(**/ 0
)**0 1
:**2 3
base**4 8
(**8 9
)**9 :
{++ 	(
facturacionElectronicaLogica,, (
=,,) *
Dependencia,,+ 6
.,,6 7
Resolve,,7 >
<,,> ?)
IFacturacionElectronicaLogica,,? \
>,,\ ]
(,,] ^
),,^ _
;,,_ `
emisor.. 
=.. (
facturacionElectronicaLogica.. 1
...1 2
ObtenerEmisor..2 ?
(..? @
ActorSettings..@ M
...M N
Default..N U
...U V
IdActorNegocioSede..V h
)..h i
;..i j
mailer// 
=// 
Dependencia//  
.//  !
Resolve//! (
<//( )
IMailer//) 0
>//0 1
(//1 2
)//2 3
;//3 4
actorNegocioLogica00 
=00  
Dependencia00! ,
.00, -
Resolve00- 4
<004 5
IActorNegocioLogica005 H
>00H I
(00I J
)00J K
;00K L
maestroLogica11 
=11 
Dependencia11 '
.11' (
Resolve11( /
<11/ 0
IMaestroLogica110 >
>11> ?
(11? @
)11@ A
;11A B
operacionLogica22 
=22 
Dependencia22 )
.22) *
Resolve22* 1
<221 2
IOperacionLogica222 B
>22B C
(22C D
)22D E
;22E F$
generacionArchivosLogica33 $
=33% &
Dependencia33' 2
.332 3
Resolve333 :
<33: ;%
IGeneracionArchivosLogica33; T
>33T U
(33U V
)33V W
;33W X

sedeLogica44 
=44 
Dependencia44 $
.44$ %
Resolve44% ,
<44, -
ISede_Logica44- 9
>449 :
(44: ;
)44; <
;44< =
}66 	
[88 	
	Authorize88	 
(88 
Roles88 
=88 
$str88 %
)88% &
]88& '
public99 
ActionResult99 
Configuracion99 )
(99) *
)99* +
{:: 	
return;; 
View;; 
(;; 
);; 
;;; 
}<< 	
[>> 	
	Authorize>>	 
(>> 
Roles>> 
=>> 
$str>> %
)>>% &
]>>& '
public?? 
ActionResult?? 
EmisionComprobantes?? /
(??/ 0
)??0 1
{@@ 	
ViewBagAA 
.AA 

fechaDesdeAA 
=AA  
DateTimeAA! )
.AA) *
TodayAA* /
.AA/ 0
AddDaysAA0 7
(AA7 8
-AA8 9*
FacturacionElectronicaSettingsAA9 W
.AAW X
DefaultAAX _
.AA_ `2
%UltimosNDiasAMostarDocumentosEmitidos	AA` Ö
)
AAÖ Ü
.
AAÜ á
ToString
AAá è
(
AAè ê
$str
AAê ú
)
AAú ù
;
AAù û
ViewBagBB 
.BB 

fechaHastaBB 
=BB  
DateTimeBB! )
.BB) *
TodayBB* /
.BB/ 0
ToStringBB0 8
(BB8 9
$strBB9 E
)BBE F
;BBF G
returnCC 
ViewCC 
(CC 
)CC 
;CC 
}DD 	
[FF 	
	AuthorizeFF	 
(FF 
RolesFF 
=FF 
$strFF %
)FF% &
]FF& '
publicGG 
ActionResultGG 
EnvioComprobantesGG -
(GG- .
)GG. /
{HH 	
ViewBagII 
.II 
fechaEnvioDesdeII #
=II$ %
DateTimeII& .
.II. /
TodayII/ 4
.II4 5
AddDaysII5 <
(II< =
-II= >*
FacturacionElectronicaSettingsII> \
.II\ ]
DefaultII] d
.IId e2
%UltimosNDiasAMostarDocumentosEnviados	IIe ä
)
IIä ã
.
IIã å
ToString
IIå î
(
IIî ï
$str
IIï °
)
II° ¢
;
II¢ £
ViewBagJJ 
.JJ 
fechaEnvioHastaJJ #
=JJ$ %
DateTimeJJ& .
.JJ. /
TodayJJ/ 4
.JJ4 5
ToStringJJ5 =
(JJ= >
$strJJ> J
)JJJ K
;JJK L
returnKK 
ViewKK 
(KK 
)KK 
;KK 
}LL 	
[NN 	
	AuthorizeNN	 
(NN 
RolesNN 
=NN 
$strNN &
)NN& '
]NN' (
publicOO 
ActionResultOO 
InvalidarRechazadasOO /
(OO/ 0
)OO0 1
{PP 	
ViewBagQQ 
.QQ 
fechaInicioQQ 
=QQ  !
DateTimeQQ" *
.QQ* +
TodayQQ+ 0
.QQ0 1
AddDaysQQ1 8
(QQ8 9
-QQ9 :*
FacturacionElectronicaSettingsQQ: X
.QQX Y
DefaultQQY `
.QQ` a2
%UltimosNDiasAMostarDocumentosEnviados	QQa Ü
)
QQÜ á
.
QQá à
ToString
QQà ê
(
QQê ë
$str
QQë ù
)
QQù û
;
QQû ü
ViewBagRR 
.RR 
fechaFinRR 
=RR 
DateTimeRR '
.RR' (
TodayRR( -
.RR- .
ToStringRR. 6
(RR6 7
$strRR7 C
)RRC D
;RRD E
returnSS 
ViewSS 
(SS 
)SS 
;SS 
}TT 	
[VV 	
	AuthorizeVV	 
(VV 
RolesVV 
=VV 
$strVV %
)VV% &
]VV& '
publicWW 

JsonResultWW '
ListarDocumentosEntreFechasWW 5
(WW5 6
stringWW6 <
desdeWW= B
,WWB C
stringWWD J
hastaWWK P
)WWP Q
{XX 	
DateTimeYY 

fechaDesdeYY 
=YY  !
DateTimeYY" *
.YY* +
ParseYY+ 0
(YY0 1
desdeYY1 6
)YY6 7
;YY7 8
DateTimeZZ 

fechaHastaZZ 
=ZZ  !
DateTimeZZ" *
.ZZ* +
ParseZZ+ 0
(ZZ0 1
hastaZZ1 6
+ZZ7 8
$strZZ9 D
)ZZD E
;ZZE F
try[[ 
{\\ 
var]] 

resultados]] 
=]]  (
facturacionElectronicaLogica]]! =
.]]= >(
ObtenerDocumentosEntreFechas]]> Z
(]]Z [

fechaDesde]][ e
,]]e f

fechaHasta]]g q
)]]q r
;]]r s
List^^ 
<^^ 
DocumentoViewModel^^ '
>^^' (

documentos^^) 3
=^^4 5
new^^6 9
List^^: >
<^^> ?
DocumentoViewModel^^? Q
>^^Q R
(^^R S
)^^S T
;^^T U
foreach__ 
(__ 
var__ 
item__ !
in__" $

resultados__% /
)__/ 0
{`` 

documentosaa 
.aa 
Addaa "
(aa" #
newaa# &
DocumentoViewModelaa' 9
(aa9 :
itemaa: >
)aa> ?
)aa? @
;aa@ A
}bb 
varcc 

jsonResultcc 
=cc  
Jsoncc! %
(cc% &

documentoscc& 0
,cc0 1
JsonRequestBehaviorcc2 E
.ccE F
DenyGetccF M
)ccM N
;ccN O

jsonResultdd 
.dd 
MaxJsonLengthdd (
=dd) *
intdd+ .
.dd. /
MaxValuedd/ 7
;dd7 8
returnee 

jsonResultee !
;ee! "
}ff 
catchgg 
(gg 
	Exceptiongg 
egg 
)gg 
{hh 
returnii 
Jsonii 
(ii 
Utilii  
.ii  !
	ErrorJsonii! *
(ii* +
eii+ ,
)ii, -
)ii- .
;ii. /
}jj 
}kk 	
[mm 	
	Authorizemm	 
(mm 
Rolesmm 
=mm 
$strmm %
)mm% &
]mm& '
publicnn 

JsonResultnn #
ListarEnviosEntreFechasnn 1
(nn1 2
stringnn2 8
desdenn9 >
,nn> ?
stringnn@ F
hastannG L
)nnL M
{oo 	
DateTimepp 
fechaEnvioDesdepp $
=pp% &
DateTimepp' /
.pp/ 0
Parsepp0 5
(pp5 6
desdepp6 ;
)pp; <
;pp< =
DateTimeqq 
fechaEnvioHastaqq $
=qq% &
DateTimeqq' /
.qq/ 0
Parseqq0 5
(qq5 6
hastaqq6 ;
+qq< =
$strqq> I
)qqI J
;qqJ K
tryrr 
{ss 
vartt 

resultadostt 
=tt  (
facturacionElectronicaLogicatt! =
.tt= >$
ObtenerEnviosEntreFechastt> V
(ttV W
fechaEnvioDesdettW f
,ttf g
fechaEnvioHastatth w
)ttw x
;ttx y
Listuu 
<uu 
EnvioViewModeluu #
>uu# $
enviosuu% +
=uu, -
EnvioViewModeluu. <
.uu< =
Convertuu= D
(uuD E

resultadosuuE O
)uuO P
;uuP Q
returnvv 
Jsonvv 
(vv 
enviosvv "
)vv" #
;vv# $
}ww 
catchxx 
(xx 
	Exceptionxx 
exx 
)xx 
{yy 
returnzz 
Jsonzz 
(zz 
Utilzz  
.zz  !
	ErrorJsonzz! *
(zz* +
ezz+ ,
)zz, -
)zz- .
;zz. /
}{{ 
}|| 	
[
ÄÄ 	
	Authorize
ÄÄ	 
(
ÄÄ 
Roles
ÄÄ 
=
ÄÄ 
$str
ÄÄ %
)
ÄÄ% &
]
ÄÄ& '
public
ÅÅ 
async
ÅÅ 
Task
ÅÅ 
<
ÅÅ 

JsonResult
ÅÅ $
>
ÅÅ$ %5
'TransmitirAFacturacionElectronicaManual
ÅÅ& M
(
ÅÅM N
)
ÅÅN O
{
ÇÇ 	
if
ÉÉ 
(
ÉÉ 
!
ÉÉ 
Flags
ÉÉ 
.
ÉÉ "
FacturacionEnProceso
ÉÉ +
)
ÉÉ+ ,
{
ÑÑ 
Flags
ÖÖ 
.
ÖÖ "
FacturacionEnProceso
ÖÖ *
=
ÖÖ+ ,
true
ÖÖ- 1
;
ÖÖ1 2/
!EstablecimientoComercialExtendido
ÜÜ 1
sede
ÜÜ2 6
=
ÜÜ7 8
ObtenerSede
ÜÜ9 D
(
ÜÜD E
)
ÜÜE F
;
ÜÜF G
try
áá 
{
àà 
await
ââ *
facturacionElectronicaLogica
ââ 6
.
ââ6 7/
!TransmitirAFacturacionElectronica
ââ7 X
(
ââX Y
ProfileData
ââY d
(
ââd e
)
ââe f
.
ââf g
Empleado
ââg o
.
ââo p
Id
ââp r
,
ââr s
sede
âât x
)
ââx y
;
âây z
return
ää 
new
ää "
JsonHttpStatusResult
ää 3
(
ää3 4
new
ää4 7
{
ää8 9
code_result
ää: E
=
ääF G
$str
ääH c
,
ääc d
data
ääe i
=
ääj k
$str
ääl p
,
ääp q!
result_descriptionäär Ñ
=ääÖ Ü
$strääá º
}ääΩ æ
,ääæ ø
HttpStatusCodeää¿ Œ
.ääŒ œ
OKääœ —
)ää— “
;ää“ ”
}
ãã 
catch
åå 
(
åå 
LogicaException
åå &
e
åå' (
)
åå( )
{
çç 
mailer
éé 
.
éé 
	SendEmail
éé $
(
éé$ % 
AplicacionSettings
éé% 7
.
éé7 8
Default
éé8 ?
.
éé? @3
%CorreoParaNotificacionDeErrorHangfire
éé@ e
,
éée f
$str
éég 
+ééÄ Å+
ObtenerAsuntoCorreoEFacturaééÇ ù
(ééù û
sedeééû ¢
)éé¢ £
,éé£ §
	Enumeradoéé• Æ
.ééÆ Ø
GetDescriptionééØ Ω
(ééΩ æ'
ProcesoEnvioFacturacionééæ ’
.éé’ ÷&
InterfazGraficaUsuarioéé÷ Ï
)ééÏ Ì
+ééÓ Ô
$stréé ˘
+éé˙ ˚
Utiléé¸ Ä
.ééÄ Å
SoloErrorStringééÅ ê
(ééê ë
eééë í
)ééí ì
)ééì î
;ééî ï
return
èè 
new
èè "
JsonHttpStatusResult
èè 3
(
èè3 4
Util
èè4 8
.
èè8 9
	ErrorJson
èè9 B
(
èèB C
e
èèC D
)
èèD E
,
èèE F
HttpStatusCode
èèG U
.
èèU V!
InternalServerError
èèV i
)
èèi j
;
èèj k
}
êê 
finally
ëë 
{
íí 
Flags
ìì 
.
ìì "
FacturacionEnProceso
ìì .
=
ìì/ 0
false
ìì1 6
;
ìì6 7
}
îî 
}
ïï 
else
ññ 
{
óó 
throw
òò 
new
òò !
ControllerException
òò -
(
òò- .
$str
òò. h
)
òòh i
;
òòi j
}
ôô 
}
öö 	
public
ûû 
async
ûû 
Task
ûû 
<
ûû 

JsonResult
ûû $
>
ûû$ %
EnviarDocumentos
ûû& 6
(
ûû6 7
)
ûû7 8
{
üü 	
if
†† 
(
†† 
!
†† 
Flags
†† 
.
†† "
FacturacionEnProceso
†† +
)
††+ ,
{
°° 
Flags
¢¢ 
.
¢¢ "
FacturacionEnProceso
¢¢ *
=
¢¢+ ,
true
¢¢- 1
;
¢¢1 2
try
££ 
{
§§ ,
LogEnvioFacturacionElectronica
•• 2
logEnvio
••3 ;
=
••< =
new
••> A,
LogEnvioFacturacionElectronica
••B `
(
••` a
)
••a b
;
••b c
var
¶¶ 
	resultado
¶¶ !
=
¶¶" #
await
¶¶$ )!
EnvioDeComprobantes
¶¶* =
(
¶¶= >
ObtenerSede
¶¶> I
(
¶¶I J
)
¶¶J K
,
¶¶K L%
ProcesoEnvioFacturacion
¶¶M d
.
¶¶d e$
InterfazGraficaUsuario
¶¶e {
,
¶¶{ |
logEnvio¶¶} Ö
)¶¶Ö Ü
;¶¶Ü á
return
ßß 
(
ßß 
	resultado
ßß %
.
ßß% &
code_result
ßß& 1
==
ßß2 4!
OperationResultEnum
ßß5 H
.
ßßH I
Success
ßßI P
)
ßßP Q
?
ßßR S
new
®® "
JsonHttpStatusResult
®® 0
(
®®0 1
new
®®1 4
{
®®5 6
code_result
®®7 B
=
®®C D!
OperationResultEnum
®®E X
.
®®X Y
Success
®®Y `
,
®®` a
data
®®b f
=
®®g h
$str
®®i m
,
®®m n!
result_description®®o Å
=®®Ç É
	resultado®®Ñ ç
.®®ç é
title®®é ì
.®®ì î
Replace®®î õ
(®®õ ú
$str®®ú £
,®®£ §
Environment®®• ∞
.®®∞ ±
NewLine®®± ∏
)®®∏ π
}®®∫ ª
,®®ª º
HttpStatusCode®®Ω À
.®®À Ã
OK®®Ã Œ
)®®Œ œ
:®®– —
new
©© "
JsonHttpStatusResult
©© 0
(
©©0 1
new
©©1 4
{
©©5 6
error
©©7 <
=
©©= >
$str
©©? l
,
©©l m

stackTrace
©©n x
=
©©y z
	resultado©©{ Ñ
.©©Ñ Ö
title©©Ö ä
.©©ä ã
Replace©©ã í
(©©í ì
$str©©ì ö
,©©ö õ
Environment©©ú ß
.©©ß ®
NewLine©©® Ø
)©©Ø ∞
}©©± ≤
,©©≤ ≥
HttpStatusCode©©¥ ¬
.©©¬ √#
InternalServerError©©√ ÷
)©©÷ ◊
;©©◊ ÿ
}
™™ 
catch
´´ 
(
´´ 
	Exception
´´  
e
´´! "
)
´´" #
{
¨¨ 
await
≠≠ 
mailer
≠≠  
.
≠≠  !
SendEmailAsync
≠≠! /
(
≠≠/ 0 
AplicacionSettings
≠≠0 B
.
≠≠B C
Default
≠≠C J
.
≠≠J K3
%CorreoParaNotificacionDeErrorHangfire
≠≠K p
,
≠≠p q*
ObtenerAsuntoCorreoEFactura≠≠r ç
(≠≠ç é
ObtenerSede≠≠é ô
(≠≠ô ö
)≠≠ö õ
)≠≠õ ú
,≠≠ú ù
$str≠≠û ¬
+≠≠√ ƒ
$str≠≠≈ Œ
+≠≠œ –1
!ObtenerPresentacionCorreoEFactura≠≠— Ú
(≠≠Ú Û
ObtenerSede≠≠Û ˛
(≠≠˛ ˇ
)≠≠ˇ Ä
)≠≠Ä Å
+≠≠Ç É
$str≠≠Ñ ç
+≠≠é è
$str≠≠ê ´
+≠≠¨ ≠
	Enumerado≠≠Æ ∑
.≠≠∑ ∏
GetDescription≠≠∏ ∆
(≠≠∆ «'
ProcesoEnvioFacturacion≠≠« ﬁ
.≠≠ﬁ ﬂ&
InterfazGraficaUsuario≠≠ﬂ ı
)≠≠ı ˆ
+≠≠˜ ¯
$str≠≠˘ Ç
)≠≠Ç É
;≠≠É Ñ
return
ÆÆ 
new
ÆÆ "
JsonHttpStatusResult
ÆÆ 3
(
ÆÆ3 4
Util
ÆÆ4 8
.
ÆÆ8 9
	ErrorJson
ÆÆ9 B
(
ÆÆB C
new
ÆÆC F
	Exception
ÆÆG P
(
ÆÆP Q
$str
ÆÆQ z
,
ÆÆz {
e
ÆÆ| }
)
ÆÆ} ~
)
ÆÆ~ 
,ÆÆ Ä
HttpStatusCodeÆÆÅ è
.ÆÆè ê#
InternalServerErrorÆÆê £
)ÆÆ£ §
;ÆÆ§ •
}
ØØ 
finally
∞∞ 
{
±± 
Flags
≤≤ 
.
≤≤ "
FacturacionEnProceso
≤≤ .
=
≤≤/ 0
false
≤≤1 6
;
≤≤6 7
}
≥≥ 
}
¥¥ 
else
µµ 
{
∂∂ 
throw
∑∑ 
new
∑∑ !
ControllerException
∑∑ -
(
∑∑- .
$str
∑∑. h
)
∑∑h i
;
∑∑i j
}
∏∏ 
}
ππ 	
public
ªª 
async
ªª 
Task
ªª 
<
ªª 
OperationResult
ªª )
>
ªª) *!
EnvioDeComprobantes
ªª+ >
(
ªª> ?&
EstablecimientoComercial
ªª? W
sede
ªªX \
,
ªª\ ]%
ProcesoEnvioFacturacion
ªª^ u
procesoEnvioªªv Ç
,ªªÇ É.
LogEnvioFacturacionElectronicaªªÑ ¢#
logEnvioFacturacionªª£ ∂
)ªª∂ ∑
{
ºº 	+
IFacturacionElectronicaLogica
ΩΩ )
facturacionLogica
ΩΩ* ;
=
ΩΩ< =
Dependencia
ΩΩ> I
.
ΩΩI J
Resolve
ΩΩJ Q
<
ΩΩQ R+
IFacturacionElectronicaLogica
ΩΩR o
>
ΩΩo p
(
ΩΩp q
)
ΩΩq r
;
ΩΩr s
try
ææ 
{
øø 
facturacionLogica
¿¿ !
.
¿¿! "
ConsultarTickets
¿¿" 2
(
¿¿2 3
)
¿¿3 4
;
¿¿4 5
}
¡¡ 
catch
¬¬ 
(
¬¬ 
	Exception
¬¬ 
)
¬¬ 
{
¬¬ 
}
¬¬  !
facturacionLogica
ƒƒ 
.
ƒƒ 
EnvioBoletas
ƒƒ *
(
ƒƒ* +!
logEnvioFacturacion
ƒƒ+ >
.
ƒƒ> ?
BoletasVenta
ƒƒ? K
)
ƒƒK L
;
ƒƒL M
facturacionLogica
∆∆ 
.
∆∆ 
EnvioFacturas
∆∆ +
(
∆∆+ ,!
logEnvioFacturacion
∆∆, ?
.
∆∆? @
Factura
∆∆@ G
)
∆∆G H
;
∆∆H I
facturacionLogica
»» 
.
»» 
EnvioNotasCredito
»» /
(
»»/ 0!
logEnvioFacturacion
»»0 C
.
»»C D
NotaCredito
»»D O
)
»»O P
;
»»P Q
facturacionLogica
   
.
   
EnvioNotasDebito
   .
(
  . /!
logEnvioFacturacion
  / B
.
  B C

NotaDebito
  C M
)
  M N
;
  N O
facturacionLogica
ÃÃ 
.
ÃÃ %
EnvioComunicacionesBaja
ÃÃ 5
(
ÃÃ5 6!
logEnvioFacturacion
ÃÃ6 I
.
ÃÃI J
Factura
ÃÃJ Q
)
ÃÃQ R
;
ÃÃR S
string
ŒŒ '
mensajeDocumentosEnviados
ŒŒ ,
=
ŒŒ- .
$str
ŒŒ/ U
+
ŒŒV W'
MensajeDocumentosEnviados
ŒŒX q
(
ŒŒq r"
logEnvioFacturacionŒŒr Ö
)ŒŒÖ Ü
;ŒŒÜ á
await
œœ 
mailer
œœ 
.
œœ 
SendEmailAsync
œœ '
(
œœ' ( 
AplicacionSettings
œœ( :
.
œœ: ;
Default
œœ; B
.
œœB C3
%CorreoParaNotificacionDeErrorHangfire
œœC h
,
œœh i!
logEnvioFacturacion
œœj }
.
œœ} ~ 
CodigoEstadoEnvioœœ~ è
(œœè ê
)œœê ë
+œœí ì
$strœœî ô
+œœö õ+
ObtenerAsuntoCorreoEFacturaœœú ∑
(œœ∑ ∏
sedeœœ∏ º
)œœº Ω
,œœΩ æ
$strœœø ‹
+œœ› ﬁ
$strœœﬂ Ë
+œœÈ Í1
!ObtenerPresentacionCorreoEFacturaœœÎ å
(œœå ç
sedeœœç ë
)œœë í
+œœì î
$strœœï û
+œœü †
$strœœ° º
+œœΩ æ
	Enumeradoœœø »
.œœ» …
GetDescriptionœœ… ◊
(œœ◊ ÿ
procesoEnvioœœÿ ‰
)œœ‰ Â
+œœÊ Á
$strœœË Ò
+œœÚ Û)
mensajeDocumentosEnviadosœœÙ ç
)œœç é
;œœé è
return
—— !
logEnvioFacturacion
—— &
.
——& '
CodigoEstadoEnvio
——' 8
(
——8 9
)
——9 :
.
——: ;
Contains
——; C
(
——C D
(
——D E
(
——E F
int
——F I
)
——I J
EstadoLogEnvio
——J X
.
——X Y
Error
——Y ^
)
——^ _
.
——_ `
ToString
——` h
(
——h i
)
——i j
)
——j k
||
——l n"
logEnvioFacturacion——o Ç
.——Ç É!
CodigoEstadoEnvio——É î
(——î ï
)——ï ñ
.——ñ ó
Contains——ó ü
(——ü †
(——† °
(——° ¢
int——¢ •
)——• ¶
EstadoLogEnvio——¶ ¥
.——¥ µ
Ambos——µ ∫
)——∫ ª
.——ª º
ToString——º ƒ
(——ƒ ≈
)——≈ ∆
)——∆ «
?——» …
new——  Õ
OperationResult——Œ ›
(——› ﬁ#
OperationResultEnum——ﬁ Ò
.——Ò Ú
Warning——Ú ˘
,——˘ ˙)
mensajeDocumentosEnviados——˚ î
)——î ï
:——ñ ó
new——ò õ
OperationResult——ú ´
(——´ ¨#
OperationResultEnum——¨ ø
.——ø ¿
Success——¿ «
,——« »)
mensajeDocumentosEnviados——… ‚
)——‚ „
;——„ ‰
}
““ 	
private
‘‘ 
string
‘‘ '
MensajeDocumentosEnviados
‘‘ 0
(
‘‘0 1,
LogEnvioFacturacionElectronica
‘‘1 O!
logEnvioFacturacion
‘‘P c
)
‘‘c d
{
’’ 	
string
÷÷ 
mensaje
÷÷ 
=
÷÷ 
$str
÷÷ 
;
÷÷  
mensaje
◊◊ 
+=
◊◊ #
MensajeLogEnvioString
◊◊ ,
(
◊◊, -
$str
◊◊- 7
,
◊◊7 8!
logEnvioFacturacion
◊◊9 L
.
◊◊L M
Factura
◊◊M T
)
◊◊T U
;
◊◊U V
mensaje
ÿÿ 
+=
ÿÿ #
MensajeLogEnvioString
ÿÿ ,
(
ÿÿ, -
$str
ÿÿ- ?
,
ÿÿ? @!
logEnvioFacturacion
ÿÿA T
.
ÿÿT U
BoletasVenta
ÿÿU a
)
ÿÿa b
;
ÿÿb c
mensaje
ŸŸ 
+=
ŸŸ #
MensajeLogEnvioString
ŸŸ ,
(
ŸŸ, -
$str
ŸŸ- ?
,
ŸŸ? @!
logEnvioFacturacion
ŸŸA T
.
ŸŸT U
NotaCredito
ŸŸU `
)
ŸŸ` a
;
ŸŸa b
mensaje
⁄⁄ 
+=
⁄⁄ #
MensajeLogEnvioString
⁄⁄ ,
(
⁄⁄, -
$str
⁄⁄- >
,
⁄⁄> ?!
logEnvioFacturacion
⁄⁄@ S
.
⁄⁄S T

NotaDebito
⁄⁄T ^
)
⁄⁄^ _
;
⁄⁄_ `
mensaje
€€ 
+=
€€ #
MensajeLogEnvioString
€€ ,
(
€€, -
$str
€€- @
,
€€@ A!
logEnvioFacturacion
€€B U
.
€€U V
GuiaRemision
€€V b
)
€€b c
;
€€c d
mensaje
‹‹ 
+=
‹‹ 
LogErroresString
‹‹ '
(
‹‹' (!
logEnvioFacturacion
‹‹( ;
)
‹‹; <
;
‹‹< =
return
›› 
mensaje
›› 
;
›› 
}
ﬁﬁ 	
private
‡‡ 
string
‡‡ #
MensajeLogEnvioString
‡‡ ,
(
‡‡, -
string
‡‡- 3
tipoComprobante
‡‡4 C
,
‡‡C D
LogEnvio
‡‡E M
logEnvio
‡‡N V
)
‡‡V W
{
·· 	
string
‚‚ 
mensaje
‚‚ 
=
‚‚ 
tipoComprobante
‚‚ ,
+
‚‚- .
$str
‚‚/ 3
+
‚‚4 5
$str
‚‚6 ?
+
‚‚@ A
(
„„ 
logEnvio
„„ 
.
„„ 
NoHayDocumentos
„„ )
?
„„* +
logEnvio
„„, 4
.
„„4 5$
MensajeNoHayDocumentos
„„5 K
+
„„L M
$str
„„N W
:
„„X Y
(
„„Z [
(
„„[ \
logEnvio
„„\ d
.
„„d e
Exito
„„e j
.
„„j k
Where
„„k p
(
„„p q
e
„„q r
=>
„„s u
e
„„v w
.
„„w x
	ModoEnvio„„x Å
==„„Ç Ñ
	ModoEnvio„„Ö é
.„„é è
Adicion„„è ñ
)„„ñ ó
.„„ó ò
Count„„ò ù
(„„ù û
)„„û ü
>„„† °
$num„„¢ £
)„„£ §
?„„• ¶
(
‰‰ 
$str
‰‰ 
+
‰‰  !
string
‰‰" (
.
‰‰( )
Join
‰‰) -
(
‰‰- .
$str
‰‰. 2
,
‰‰2 3
logEnvio
‰‰4 <
.
‰‰< =
Exito
‰‰= B
.
‰‰B C
Where
‰‰C H
(
‰‰H I
e
‰‰I J
=>
‰‰K M
e
‰‰N O
.
‰‰O P
	ModoEnvio
‰‰P Y
==
‰‰Z \
	ModoEnvio
‰‰] f
.
‰‰f g
Adicion
‰‰g n
)
‰‰n o
.
‰‰o p
Select
‰‰p v
(
‰‰v w
e
‰‰w x
=>
‰‰y {
e
‰‰| }
.
‰‰} ~
Mensaje‰‰~ Ö
)‰‰Ö Ü
)‰‰Ü á
)‰‰á à
+‰‰â ä
$str‰‰ã î
:‰‰ï ñ
$str‰‰ó ô
)‰‰ô ö
+‰‰õ ú
(‰‰ù û
(‰‰û ü
logEnvio‰‰ü ß
.‰‰ß ®
Exito‰‰® ≠
.‰‰≠ Æ
Where‰‰Æ ≥
(‰‰≥ ¥
e‰‰¥ µ
=>‰‰∂ ∏
e‰‰π ∫
.‰‰∫ ª
	ModoEnvio‰‰ª ƒ
==‰‰≈ «
	ModoEnvio‰‰» —
.‰‰— “
	Anulacion‰‰“ €
)‰‰€ ‹
.‰‰‹ ›
Count‰‰› ‚
(‰‰‚ „
)‰‰„ ‰
>‰‰Â Ê
$num‰‰Á Ë
)‰‰Ë È
?‰‰Í Î
(
ÂÂ 
$str
ÂÂ 
+
ÂÂ 
string
ÂÂ %
.
ÂÂ% &
Join
ÂÂ& *
(
ÂÂ* +
$str
ÂÂ+ /
,
ÂÂ/ 0
logEnvio
ÂÂ1 9
.
ÂÂ9 :
Exito
ÂÂ: ?
.
ÂÂ? @
Where
ÂÂ@ E
(
ÂÂE F
e
ÂÂF G
=>
ÂÂH J
e
ÂÂK L
.
ÂÂL M
	ModoEnvio
ÂÂM V
==
ÂÂW Y
	ModoEnvio
ÂÂZ c
.
ÂÂc d
	Anulacion
ÂÂd m
)
ÂÂm n
.
ÂÂn o
Select
ÂÂo u
(
ÂÂu v
e
ÂÂv w
=>
ÂÂx z
e
ÂÂ{ |
.
ÂÂ| }
MensajeÂÂ} Ñ
)ÂÂÑ Ö
)ÂÂÖ Ü
+ÂÂá à
$strÂÂâ í
)ÂÂí ì
:ÂÂî ï
$strÂÂñ ò
)ÂÂò ô
)ÂÂô ö
;ÂÂö õ
mensaje
ÊÊ 
+=
ÊÊ 
(
ÊÊ 
logEnvio
ÊÊ  
.
ÊÊ  !
Error
ÊÊ! &
.
ÊÊ& '
Count
ÊÊ' ,
(
ÊÊ, -
)
ÊÊ- .
>
ÊÊ/ 0
$num
ÊÊ1 2
)
ÊÊ2 3
?
ÊÊ4 5
string
ÊÊ6 <
.
ÊÊ< =
Join
ÊÊ= A
(
ÊÊA B
$str
ÊÊB L
,
ÊÊL M
logEnvio
ÊÊN V
.
ÊÊV W
Error
ÊÊW \
)
ÊÊ\ ]
+
ÊÊ^ _
$str
ÊÊ` i
:
ÊÊj k
$str
ÊÊl n
;
ÊÊn o
return
ÁÁ 
mensaje
ÁÁ 
;
ÁÁ 
}
ËË 	
private
ÍÍ 
string
ÍÍ 
LogErroresString
ÍÍ '
(
ÍÍ' (,
LogEnvioFacturacionElectronica
ÍÍ( F!
logEnvioFacturacion
ÍÍG Z
)
ÍÍZ [
{
ÎÎ 	
string
ÏÏ 
mensaje
ÏÏ 
=
ÏÏ 
$str
ÏÏ 
;
ÏÏ  
mensaje
ÌÌ 
+=
ÌÌ 
(
ÌÌ !
logEnvioFacturacion
ÌÌ +
.
ÌÌ+ ,
Factura
ÌÌ, 3
.
ÌÌ3 4
LogError
ÌÌ4 <
.
ÌÌ< =
Count
ÌÌ= B
>
ÌÌC D
$num
ÌÌE F
)
ÌÌF G
?
ÌÌH I
$str
ÌÌJ U
+
ÌÌV W
$str
ÌÌX a
+
ÌÌb c
string
ÌÌd j
.
ÌÌj k
Join
ÌÌk o
(
ÌÌo p
$str
ÌÌp t
,
ÌÌt u"
logEnvioFacturacionÌÌv â
.ÌÌâ ä
FacturaÌÌä ë
.ÌÌë í
LogErrorÌÌí ö
)ÌÌö õ
+ÌÌú ù
$strÌÌû ß
:ÌÌ® ©
$strÌÌ™ ¨
;ÌÌ¨ ≠
mensaje
ÓÓ 
+=
ÓÓ 
(
ÓÓ !
logEnvioFacturacion
ÓÓ +
.
ÓÓ+ ,
BoletasVenta
ÓÓ, 8
.
ÓÓ8 9
LogError
ÓÓ9 A
.
ÓÓA B
Count
ÓÓB G
>
ÓÓH I
$num
ÓÓJ K
)
ÓÓK L
?
ÓÓM N
$str
ÓÓO b
+
ÓÓc d
$str
ÓÓe n
+
ÓÓo p
string
ÓÓq w
.
ÓÓw x
Join
ÓÓx |
(
ÓÓ| }
$strÓÓ} Å
,ÓÓÅ Ç#
logEnvioFacturacionÓÓÉ ñ
.ÓÓñ ó
BoletasVentaÓÓó £
.ÓÓ£ §
LogErrorÓÓ§ ¨
)ÓÓ¨ ≠
+ÓÓÆ Ø
$strÓÓ∞ π
:ÓÓ∫ ª
$strÓÓº æ
;ÓÓæ ø
mensaje
ÔÔ 
+=
ÔÔ 
(
ÔÔ !
logEnvioFacturacion
ÔÔ +
.
ÔÔ+ ,
NotaCredito
ÔÔ, 7
.
ÔÔ7 8
LogError
ÔÔ8 @
.
ÔÔ@ A
Count
ÔÔA F
>
ÔÔG H
$num
ÔÔI J
)
ÔÔJ K
?
ÔÔL M
$str
ÔÔN a
+
ÔÔb c
$str
ÔÔd m
+
ÔÔn o
string
ÔÔp v
.
ÔÔv w
Join
ÔÔw {
(
ÔÔ{ |
$strÔÔ| Ä
,ÔÔÄ Å#
logEnvioFacturacionÔÔÇ ï
.ÔÔï ñ
NotaCreditoÔÔñ °
.ÔÔ° ¢
LogErrorÔÔ¢ ™
)ÔÔ™ ´
+ÔÔ¨ ≠
$strÔÔÆ ∑
:ÔÔ∏ π
$strÔÔ∫ º
;ÔÔº Ω
mensaje
 
+=
 
(
 !
logEnvioFacturacion
 +
.
+ ,

NotaDebito
, 6
.
6 7
LogError
7 ?
.
? @
Count
@ E
>
F G
$num
H I
)
I J
?
K L
$str
M _
+
` a
$str
b k
+
l m
string
n t
.
t u
Join
u y
(
y z
$str
z ~
,
~ #
logEnvioFacturacionÄ ì
.ì î

NotaDebitoî û
.û ü
LogErrorü ß
)ß ®
+© ™
$str´ ¥
:µ ∂
$str∑ π
;π ∫
mensaje
ÒÒ 
+=
ÒÒ 
(
ÒÒ !
logEnvioFacturacion
ÒÒ +
.
ÒÒ+ ,
GuiaRemision
ÒÒ, 8
.
ÒÒ8 9
LogError
ÒÒ9 A
.
ÒÒA B
Count
ÒÒB G
>
ÒÒH I
$num
ÒÒJ K
)
ÒÒK L
?
ÒÒM N
$str
ÒÒO c
+
ÒÒd e
$str
ÒÒf o
+
ÒÒp q
string
ÒÒr x
.
ÒÒx y
Join
ÒÒy }
(
ÒÒ} ~
$strÒÒ~ Ç
,ÒÒÇ É#
logEnvioFacturacionÒÒÑ ó
.ÒÒó ò
GuiaRemisionÒÒò §
.ÒÒ§ •
LogErrorÒÒ• ≠
)ÒÒ≠ Æ
+ÒÒØ ∞
$strÒÒ± ∫
:ÒÒª º
$strÒÒΩ ø
;ÒÒø ¿
mensaje
ÚÚ 
=
ÚÚ 
mensaje
ÚÚ 
==
ÚÚ  
$str
ÚÚ! #
?
ÚÚ$ %
$str
ÚÚ& (
:
ÚÚ) *
$str
ÚÚ+ 4
+
ÚÚ5 6
mensaje
ÚÚ7 >
.
ÚÚ> ?
Replace
ÚÚ? F
(
ÚÚF G
Environment
ÚÚG R
.
ÚÚR S
NewLine
ÚÚS Z
,
ÚÚZ [
$str
ÚÚ\ e
)
ÚÚe f
;
ÚÚf g
mensaje
ÛÛ 
+=
ÛÛ 
mensaje
ÛÛ 
==
ÛÛ !
$str
ÛÛ" $
?
ÛÛ% &
$str
ÛÛ' )
:
ÛÛ* +
(
ÛÛ, -
$str
ÛÛ- :
+
ÛÛ; <
System
ÛÛ= C
.
ÛÛC D
Web
ÛÛD G
.
ÛÛG H
HttpContext
ÛÛH S
.
ÛÛS T
Current
ÛÛT [
.
ÛÛ[ \
Request
ÛÛ\ c
.
ÛÛc d
Headers
ÛÛd k
[
ÛÛk l
$str
ÛÛl r
]
ÛÛr s
)
ÛÛs t
;
ÛÛt u
return
ÙÙ 
mensaje
ÙÙ 
;
ÙÙ 
}
ıı 	
[
˚˚ 	
	Authorize
˚˚	 
(
˚˚ 
Roles
˚˚ 
=
˚˚ 
$str
˚˚ %
)
˚˚% &
]
˚˚& '
public
¸¸ 

JsonResult
¸¸ 
ConsultarTickets
¸¸ *
(
¸¸* +
)
¸¸+ ,
{
˝˝ 	
try
˛˛ 
{
ˇˇ *
facturacionElectronicaLogica
ÄÄ ,
.
ÄÄ, -
ConsultarTickets
ÄÄ- =
(
ÄÄ= >
)
ÄÄ> ?
;
ÄÄ? @
return
ÅÅ 
new
ÅÅ "
JsonHttpStatusResult
ÅÅ /
(
ÅÅ/ 0
new
ÅÅ0 3
{
ÅÅ4 5
code_result
ÅÅ6 A
=
ÅÅB C!
OperationResultEnum
ÅÅD W
.
ÅÅW X
Success
ÅÅX _
,
ÅÅ_ `
data
ÅÅa e
=
ÅÅf g
$str
ÅÅh l
,
ÅÅl m!
result_descriptionÅÅn Ä
=ÅÅÅ Ç
$strÅÅÉ û
}ÅÅü †
,ÅÅ† °
HttpStatusCodeÅÅ¢ ∞
.ÅÅ∞ ±
OKÅÅ± ≥
)ÅÅ≥ ¥
;ÅÅ¥ µ
}
ÇÇ 
catch
ÉÉ 
(
ÉÉ 
LogicaException
ÉÉ "
e
ÉÉ# $
)
ÉÉ$ %
{
ÑÑ 
mailer
ÖÖ 
.
ÖÖ 
	SendEmail
ÖÖ  
(
ÖÖ  ! 
AplicacionSettings
ÖÖ! 3
.
ÖÖ3 4
Default
ÖÖ4 ;
.
ÖÖ; <3
%CorreoParaNotificacionDeErrorHangfire
ÖÖ< a
,
ÖÖa b
$str
ÖÖc z
+
ÖÖ{ |*
ObtenerAsuntoCorreoEFacturaÖÖ} ò
(ÖÖò ô
ObtenerSedeÖÖô §
(ÖÖ§ •
)ÖÖ• ¶
)ÖÖ¶ ß
,ÖÖß ®
	EnumeradoÖÖ© ≤
.ÖÖ≤ ≥
GetDescriptionÖÖ≥ ¡
(ÖÖ¡ ¬'
ProcesoEnvioFacturacionÖÖ¬ Ÿ
.ÖÖŸ ⁄&
InterfazGraficaUsuarioÖÖ⁄ 
)ÖÖ Ò
+ÖÖÚ Û
$strÖÖÙ ˝
+ÖÖ˛ ˇ
UtilÖÖÄ Ñ
.ÖÖÑ Ö
SoloErrorStringÖÖÖ î
(ÖÖî ï
eÖÖï ñ
)ÖÖñ ó
.ÖÖó ò
ReplaceÖÖò ü
(ÖÖü †
EnvironmentÖÖ† ´
.ÖÖ´ ¨
NewLineÖÖ¨ ≥
,ÖÖ≥ ¥
$strÖÖµ æ
)ÖÖæ ø
)ÖÖø ¿
;ÖÖ¿ ¡
return
ÜÜ 
new
ÜÜ "
JsonHttpStatusResult
ÜÜ /
(
ÜÜ/ 0
Util
ÜÜ0 4
.
ÜÜ4 5
	ErrorJson
ÜÜ5 >
(
ÜÜ> ?
e
ÜÜ? @
)
ÜÜ@ A
,
ÜÜA B
HttpStatusCode
ÜÜC Q
.
ÜÜQ R!
InternalServerError
ÜÜR e
)
ÜÜe f
;
ÜÜf g
}
áá 
catch
àà 
(
àà 
	Exception
àà 
e
àà 
)
àà 
{
ââ 
return
ää 
new
ää "
JsonHttpStatusResult
ää /
(
ää/ 0
Util
ää0 4
.
ää4 5
	ErrorJson
ää5 >
(
ää> ?
new
ää? B
	Exception
ääC L
(
ääL M
$strääM É
,ääÉ Ñ
eääÖ Ü
)ääÜ á
)ääá à
,ääà â
HttpStatusCodeäää ò
.ääò ô#
InternalServerErrorääô ¨
)ää¨ ≠
;ää≠ Æ
}
ãã 
}
åå 	
[
ëë 	
	Authorize
ëë	 
(
ëë 
Roles
ëë 
=
ëë 
$str
ëë %
)
ëë% &
]
ëë& '
public
íí 

JsonResult
íí (
ResolverEnviosConExcepcion
íí 4
(
íí4 5
)
íí5 6
{
ìì 	
try
îî 
{
ïï *
facturacionElectronicaLogica
ññ ,
.
ññ, -(
ResolverEnviosConExcepcion
ññ- G
(
ññG H
)
ññH I
;
ññI J
return
óó 
new
óó "
JsonHttpStatusResult
óó /
(
óó/ 0
new
óó0 3
{
óó4 5
code_result
óó6 A
=
óóB C!
OperationResultEnum
óóD W
.
óóW X
Success
óóX _
,
óó_ `
data
óóa e
=
óóf g
$str
óóh l
,
óól m!
result_descriptionóón Ä
=óóÅ Ç
$stróóÉ û
}óóü †
,óó† °
HttpStatusCodeóó¢ ∞
.óó∞ ±
OKóó± ≥
)óó≥ ¥
;óó¥ µ
}
òò 
catch
ôô 
(
ôô 
LogicaException
ôô "
e
ôô# $
)
ôô$ %
{
öö 
mailer
õõ 
.
õõ 
	SendEmail
õõ  
(
õõ  ! 
AplicacionSettings
õõ! 3
.
õõ3 4
Default
õõ4 ;
.
õõ; <3
%CorreoParaNotificacionDeErrorHangfire
õõ< a
,
õõa b
$strõõc ê
+õõë í+
ObtenerAsuntoCorreoEFacturaõõì Æ
(õõÆ Ø
ObtenerSedeõõØ ∫
(õõ∫ ª
)õõª º
)õõº Ω
,õõΩ æ
	Enumeradoõõø »
.õõ» …
GetDescriptionõõ… ◊
(õõ◊ ÿ'
ProcesoEnvioFacturacionõõÿ Ô
.õõÔ &
InterfazGraficaUsuarioõõ Ü
)õõÜ á
+õõà â
$strõõä ì
+õõî ï
Utilõõñ ö
.õõö õ
SoloErrorStringõõõ ™
(õõ™ ´
eõõ´ ¨
)õõ¨ ≠
.õõ≠ Æ
ReplaceõõÆ µ
(õõµ ∂
Environmentõõ∂ ¡
.õõ¡ ¬
NewLineõõ¬ …
,õõ…  
$strõõÀ ‘
)õõ‘ ’
)õõ’ ÷
;õõ÷ ◊
return
úú 
new
úú "
JsonHttpStatusResult
úú /
(
úú/ 0
Util
úú0 4
.
úú4 5
	ErrorJson
úú5 >
(
úú> ?
e
úú? @
)
úú@ A
,
úúA B
HttpStatusCode
úúC Q
.
úúQ R!
InternalServerError
úúR e
)
úúe f
;
úúf g
}
ùù 
catch
ûû 
(
ûû 
	Exception
ûû 
e
ûû 
)
ûû 
{
üü 
return
†† 
new
†† "
JsonHttpStatusResult
†† /
(
††/ 0
Util
††0 4
.
††4 5
	ErrorJson
††5 >
(
††> ?
new
††? B
	Exception
††C L
(
††L M
$str††M Ç
,††Ç É
e††Ñ Ö
)††Ö Ü
)††Ü á
,††á à
HttpStatusCode††â ó
.††ó ò#
InternalServerError††ò ´
)††´ ¨
;††¨ ≠
}
°° 
}
¢¢ 	
[
®® 	
	Authorize
®®	 
(
®® 
Roles
®® 
=
®® 
$str
®® ,
)
®®, -
]
®®- .
public
©© 

JsonResult
©© $
ResolverEnvioRechazado
©© 0
(
©©0 1
int
©©1 4
idEnvio
©©5 <
)
©©< =
{
™™ 	
try
´´ 
{
¨¨ *
facturacionElectronicaLogica
≠≠ ,
.
≠≠, -$
ResolverEnvioRechazado
≠≠- C
(
≠≠C D
idEnvio
≠≠D K
)
≠≠K L
;
≠≠L M
return
ÆÆ 
new
ÆÆ "
JsonHttpStatusResult
ÆÆ /
(
ÆÆ/ 0
new
ÆÆ0 3
{
ÆÆ4 5
code_result
ÆÆ6 A
=
ÆÆB C!
OperationResultEnum
ÆÆD W
.
ÆÆW X
Success
ÆÆX _
,
ÆÆ_ `
data
ÆÆa e
=
ÆÆf g
$str
ÆÆh l
,
ÆÆl m!
result_descriptionÆÆn Ä
=ÆÆÅ Ç
$strÆÆÉ û
}ÆÆü †
,ÆÆ† °
HttpStatusCodeÆÆ¢ ∞
.ÆÆ∞ ±
OKÆÆ± ≥
)ÆÆ≥ ¥
;ÆÆ¥ µ
}
ØØ 
catch
∞∞ 
(
∞∞ 
LogicaException
∞∞ "
e
∞∞# $
)
∞∞$ %
{
±± 
mailer
≤≤ 
.
≤≤ 
	SendEmail
≤≤  
(
≤≤  ! 
AplicacionSettings
≤≤! 3
.
≤≤3 4
Default
≤≤4 ;
.
≤≤; <3
%CorreoParaNotificacionDeErrorHangfire
≤≤< a
,
≤≤a b
$str≤≤c ç
+≤≤é è+
ObtenerAsuntoCorreoEFactura≤≤ê ´
(≤≤´ ¨
ObtenerSede≤≤¨ ∑
(≤≤∑ ∏
)≤≤∏ π
)≤≤π ∫
,≤≤∫ ª
	Enumerado≤≤º ≈
.≤≤≈ ∆
GetDescription≤≤∆ ‘
(≤≤‘ ’'
ProcesoEnvioFacturacion≤≤’ Ï
.≤≤Ï Ì&
InterfazGraficaUsuario≤≤Ì É
)≤≤É Ñ
+≤≤Ö Ü
$str≤≤á ê
+≤≤ë í
Util≤≤ì ó
.≤≤ó ò
SoloErrorString≤≤ò ß
(≤≤ß ®
e≤≤® ©
)≤≤© ™
.≤≤™ ´
Replace≤≤´ ≤
(≤≤≤ ≥
Environment≤≤≥ æ
.≤≤æ ø
NewLine≤≤ø ∆
,≤≤∆ «
$str≤≤» —
)≤≤— “
)≤≤“ ”
;≤≤” ‘
return
≥≥ 
new
≥≥ "
JsonHttpStatusResult
≥≥ /
(
≥≥/ 0
Util
≥≥0 4
.
≥≥4 5
	ErrorJson
≥≥5 >
(
≥≥> ?
e
≥≥? @
)
≥≥@ A
,
≥≥A B
HttpStatusCode
≥≥C Q
.
≥≥Q R!
InternalServerError
≥≥R e
)
≥≥e f
;
≥≥f g
}
¥¥ 
catch
µµ 
(
µµ 
	Exception
µµ 
e
µµ 
)
µµ 
{
∂∂ 
return
∑∑ 
new
∑∑ "
JsonHttpStatusResult
∑∑ /
(
∑∑/ 0
Util
∑∑0 4
.
∑∑4 5
	ErrorJson
∑∑5 >
(
∑∑> ?
new
∑∑? B
	Exception
∑∑C L
(
∑∑L M
$str
∑∑M 
,∑∑ Ä
e∑∑Å Ç
)∑∑Ç É
)∑∑É Ñ
,∑∑Ñ Ö
HttpStatusCode∑∑Ü î
.∑∑î ï#
InternalServerError∑∑ï ®
)∑∑® ©
;∑∑© ™
}
∏∏ 
}
ππ 	
[
øø 	
	Authorize
øø	 
(
øø 
Roles
øø 
=
øø 
$str
øø ,
)
øø, -
]
øø- .
public
¿¿ 

JsonResult
¿¿ $
ResolverEnvioPendiente
¿¿ 0
(
¿¿0 1
int
¿¿1 4
idEnvio
¿¿5 <
)
¿¿< =
{
¡¡ 	
try
¬¬ 
{
√√ *
facturacionElectronicaLogica
ƒƒ ,
.
ƒƒ, -$
ResolverEnvioPendiente
ƒƒ- C
(
ƒƒC D
idEnvio
ƒƒD K
)
ƒƒK L
;
ƒƒL M
return
≈≈ 
new
≈≈ "
JsonHttpStatusResult
≈≈ /
(
≈≈/ 0
new
≈≈0 3
{
≈≈4 5
code_result
≈≈6 A
=
≈≈B C!
OperationResultEnum
≈≈D W
.
≈≈W X
Success
≈≈X _
,
≈≈_ `
data
≈≈a e
=
≈≈f g
$str
≈≈h l
,
≈≈l m!
result_description≈≈n Ä
=≈≈Å Ç
$str≈≈É û
}≈≈ü †
,≈≈† °
HttpStatusCode≈≈¢ ∞
.≈≈∞ ±
OK≈≈± ≥
)≈≈≥ ¥
;≈≈¥ µ
}
∆∆ 
catch
«« 
(
«« 
LogicaException
«« "
e
««# $
)
««$ %
{
»» 
mailer
…… 
.
…… 
	SendEmail
……  
(
……  ! 
AplicacionSettings
……! 3
.
……3 4
Default
……4 ;
.
……; <3
%CorreoParaNotificacionDeErrorHangfire
……< a
,
……a b
$str……c ã
+……å ç+
ObtenerAsuntoCorreoEFactura……é ©
(……© ™
ObtenerSede……™ µ
(……µ ∂
)……∂ ∑
)……∑ ∏
,……∏ π
	Enumerado……∫ √
.……√ ƒ
GetDescription……ƒ “
(……“ ”'
ProcesoEnvioFacturacion……” Í
.……Í Î&
InterfazGraficaUsuario……Î Å
)……Å Ç
+……É Ñ
$str……Ö é
+……è ê
Util……ë ï
.……ï ñ
SoloErrorString……ñ •
(……• ¶
e……¶ ß
)……ß ®
.……® ©
Replace……© ∞
(……∞ ±
Environment……± º
.……º Ω
NewLine……Ω ƒ
,……ƒ ≈
$str……∆ œ
)……œ –
)……– —
;……— “
return
   
new
   "
JsonHttpStatusResult
   /
(
  / 0
Util
  0 4
.
  4 5
	ErrorJson
  5 >
(
  > ?
e
  ? @
)
  @ A
,
  A B
HttpStatusCode
  C Q
.
  Q R!
InternalServerError
  R e
)
  e f
;
  f g
}
ÀÀ 
catch
ÃÃ 
(
ÃÃ 
	Exception
ÃÃ 
e
ÃÃ 
)
ÃÃ 
{
ÕÕ 
return
ŒŒ 
new
ŒŒ "
JsonHttpStatusResult
ŒŒ /
(
ŒŒ/ 0
Util
ŒŒ0 4
.
ŒŒ4 5
	ErrorJson
ŒŒ5 >
(
ŒŒ> ?
new
ŒŒ? B
	Exception
ŒŒC L
(
ŒŒL M
$str
ŒŒM y
,
ŒŒy z
e
ŒŒ{ |
)
ŒŒ| }
)
ŒŒ} ~
,
ŒŒ~ 
HttpStatusCodeŒŒÄ é
.ŒŒé è#
InternalServerErrorŒŒè ¢
)ŒŒ¢ £
;ŒŒ£ §
}
œœ 
}
–– 	
[
÷÷ 	
	Authorize
÷÷	 
(
÷÷ 
Roles
÷÷ 
=
÷÷ 
$str
÷÷ %
)
÷÷% &
]
÷÷& '
public
◊◊ 
async
◊◊ 
Task
◊◊ 
<
◊◊ 

JsonResult
◊◊ $
>
◊◊$ %$
RegenerarJsonDocumento
◊◊& <
(
◊◊< =
long
◊◊= A
idDocumento
◊◊B M
)
◊◊M N
{
ÿÿ 	
try
ŸŸ 
{
⁄⁄ 
await
€€ *
facturacionElectronicaLogica
€€ 2
.
€€2 3$
RegenerarJsonDocumento
€€3 I
(
€€I J
idDocumento
€€J U
)
€€U V
;
€€V W
return
‹‹ 
new
‹‹ "
JsonHttpStatusResult
‹‹ /
(
‹‹/ 0
new
‹‹0 3
{
‹‹4 5
code_result
‹‹6 A
=
‹‹B C!
OperationResultEnum
‹‹D W
.
‹‹W X
Success
‹‹X _
,
‹‹_ `
data
‹‹a e
=
‹‹f g
$str
‹‹h l
,
‹‹l m!
result_description‹‹n Ä
=‹‹Å Ç
$str‹‹É û
}‹‹ü †
,‹‹† °
HttpStatusCode‹‹¢ ∞
.‹‹∞ ±
OK‹‹± ≥
)‹‹≥ ¥
;‹‹¥ µ
}
›› 
catch
ﬁﬁ 
(
ﬁﬁ 
LogicaException
ﬁﬁ "
e
ﬁﬁ# $
)
ﬁﬁ$ %
{
ﬂﬂ 
return
‡‡ 
new
‡‡ "
JsonHttpStatusResult
‡‡ /
(
‡‡/ 0
Util
‡‡0 4
.
‡‡4 5
	ErrorJson
‡‡5 >
(
‡‡> ?
e
‡‡? @
)
‡‡@ A
,
‡‡A B
HttpStatusCode
‡‡C Q
.
‡‡Q R!
InternalServerError
‡‡R e
)
‡‡e f
;
‡‡f g
}
·· 
catch
‚‚ 
(
‚‚ 
	Exception
‚‚ 
e
‚‚ 
)
‚‚ 
{
„„ 
return
‰‰ 
new
‰‰ "
JsonHttpStatusResult
‰‰ /
(
‰‰/ 0
Util
‰‰0 4
.
‰‰4 5
	ErrorJson
‰‰5 >
(
‰‰> ?
new
‰‰? B
	Exception
‰‰C L
(
‰‰L M
$str
‰‰M {
,
‰‰{ |
e
‰‰} ~
)
‰‰~ 
)‰‰ Ä
,‰‰Ä Å
HttpStatusCode‰‰Ç ê
.‰‰ê ë#
InternalServerError‰‰ë §
)‰‰§ •
;‰‰• ¶
}
ÂÂ 
}
ÊÊ 	
[
ÏÏ 	
	Authorize
ÏÏ	 
(
ÏÏ 
Roles
ÏÏ 
=
ÏÏ 
$str
ÏÏ %
)
ÏÏ% &
]
ÏÏ& '
public
ÌÌ 
ActionResult
ÌÌ %
ObtenerArchivoDocumento
ÌÌ 3
(
ÌÌ3 4
int
ÌÌ4 7
idDocumento
ÌÌ8 C
,
ÌÌC D
string
ÌÌE K
nombreArchivo
ÌÌL Y
)
ÌÌY Z
{
ÓÓ 	
var
ÔÔ  
contenidoDocumento
ÔÔ "
=
ÔÔ# $
Encoding
ÔÔ% -
.
ÔÔ- .
UTF8
ÔÔ. 2
.
ÔÔ2 3
	GetString
ÔÔ3 <
(
ÔÔ< =*
facturacionElectronicaLogica
ÔÔ= Y
.
ÔÔY Z
ObtenerArchivo
ÔÔZ h
(
ÔÔh i
idDocumento
ÔÔi t
)
ÔÔt u
)
ÔÔu v
;
ÔÔv w
byte
ÒÒ 
[
ÒÒ 
]
ÒÒ 
	fileBytes
ÒÒ 
=
ÒÒ 
Encoding
ÒÒ '
.
ÒÒ' (
UTF8
ÒÒ( ,
.
ÒÒ, -
GetBytes
ÒÒ- 5
(
ÒÒ5 6 
contenidoDocumento
ÒÒ6 H
)
ÒÒH I
;
ÒÒI J
string
ÚÚ 
fileName
ÚÚ 
=
ÚÚ 
nombreArchivo
ÚÚ +
+
ÚÚ, -
$str
ÚÚ. 4
;
ÚÚ4 5
return
ÛÛ 
File
ÛÛ 
(
ÛÛ 
	fileBytes
ÛÛ !
,
ÛÛ! "
$str
ÛÛ# 4
,
ÛÛ4 5
fileName
ÛÛ6 >
)
ÛÛ> ?
;
ÛÛ? @
}
ÙÙ 	
[
ˆˆ 	
	Authorize
ˆˆ	 
(
ˆˆ 
Roles
ˆˆ 
=
ˆˆ 
$str
ˆˆ %
)
ˆˆ% &
]
ˆˆ& '
public
˜˜ 
ActionResult
˜˜ !
ObtenerArchivoEnvio
˜˜ /
(
˜˜/ 0
int
˜˜0 3
idEnvio
˜˜4 ;
,
˜˜; <
string
˜˜= C
nombreArchivo
˜˜D Q
)
˜˜Q R
{
¯¯ 	
FirmadoResponse
˘˘ 
firmadoResponse
˘˘ +
=
˘˘, -
JsonConvert
˘˘. 9
.
˘˘9 :
DeserializeObject
˘˘: K
<
˘˘K L
FirmadoResponse
˘˘L [
>
˘˘[ \
(
˘˘\ ]
Encoding
˘˘] e
.
˘˘e f
UTF8
˘˘f j
.
˘˘j k
	GetString
˘˘k t
(
˘˘t u+
facturacionElectronicaLogica˘˘u ë
.˘˘ë í
ObtenerArchivo˘˘í †
(˘˘† °
idEnvio˘˘° ®
)˘˘® ©
)˘˘© ™
)˘˘™ ´
;˘˘´ ¨
nombreArchivo
˚˚ 
=
˚˚ 
nombreArchivo
˚˚ )
.
˚˚) *
Replace
˚˚* 1
(
˚˚1 2
$str
˚˚2 5
,
˚˚5 6
$str
˚˚7 9
)
˚˚9 :
;
˚˚: ;
byte
¸¸ 
[
¸¸ 
]
¸¸ 
	fileBytes
¸¸ 
=
¸¸ 
null
¸¸ #
;
¸¸# $
byte
˝˝ 
[
˝˝ 
]
˝˝ 
compressedBytes
˝˝ "
;
˝˝" #
string
˛˛ 
fileNameZip
˛˛ 
=
˛˛  
nombreArchivo
˛˛! .
+
˛˛/ 0
$str
˛˛1 7
;
˛˛7 8
using
ÄÄ 
(
ÄÄ 
var
ÄÄ 
	outStream
ÄÄ  
=
ÄÄ! "
new
ÄÄ# &
MemoryStream
ÄÄ' 3
(
ÄÄ3 4
)
ÄÄ4 5
)
ÄÄ5 6
{
ÅÅ 
using
ÇÇ 
(
ÇÇ 
var
ÇÇ 
archive
ÇÇ "
=
ÇÇ# $
new
ÇÇ% (

ZipArchive
ÇÇ) 3
(
ÇÇ3 4
	outStream
ÇÇ4 =
,
ÇÇ= >
ZipArchiveMode
ÇÇ? M
.
ÇÇM N
Create
ÇÇN T
,
ÇÇT U
true
ÇÇV Z
)
ÇÇZ [
)
ÇÇ[ \
{
ÉÉ 
var
ÑÑ 
fileInArchive
ÑÑ %
=
ÑÑ& '
archive
ÑÑ( /
.
ÑÑ/ 0
CreateEntry
ÑÑ0 ;
(
ÑÑ; <
nombreArchivo
ÑÑ< I
+
ÑÑJ K
$str
ÑÑL R
,
ÑÑR S
CompressionLevel
ÑÑT d
.
ÑÑd e
Optimal
ÑÑe l
)
ÑÑl m
;
ÑÑm n
	fileBytes
ÖÖ 
=
ÖÖ 
Convert
ÖÖ  '
.
ÖÖ' (
FromBase64String
ÖÖ( 8
(
ÖÖ8 9
firmadoResponse
ÖÖ9 H
.
ÖÖH I
TramaXmlFirmado
ÖÖI X
)
ÖÖX Y
;
ÖÖY Z
using
ÜÜ 
(
ÜÜ 
var
ÜÜ 
entryStream
ÜÜ *
=
ÜÜ+ ,
fileInArchive
ÜÜ- :
.
ÜÜ: ;
Open
ÜÜ; ?
(
ÜÜ? @
)
ÜÜ@ A
)
ÜÜA B
using
áá 
(
áá 
var
áá "
fileToCompressStream
áá 3
=
áá4 5
new
áá6 9
MemoryStream
áá: F
(
ááF G
	fileBytes
ááG P
)
ááP Q
)
ááQ R
{
àà "
fileToCompressStream
ââ ,
.
ââ, -
CopyTo
ââ- 3
(
ââ3 4
entryStream
ââ4 ?
)
ââ? @
;
ââ@ A"
fileToCompressStream
ää ,
.
ää, -
Close
ää- 2
(
ää2 3
)
ää3 4
;
ää4 5
}
ãã 
}
åå 
compressedBytes
çç 
=
çç  !
	outStream
çç" +
.
çç+ ,
ToArray
çç, 3
(
çç3 4
)
çç4 5
;
çç5 6
}
éé 
return
èè 
File
èè 
(
èè 
compressedBytes
èè '
,
èè' (
$str
èè) :
,
èè: ;
fileNameZip
èè< G
)
èèG H
;
èèH I
}
êê 	
[
íí 	
	Authorize
íí	 
(
íí 
Roles
íí 
=
íí 
$str
íí %
)
íí% &
]
íí& '
public
ìì 
ActionResult
ìì %
ObtenerArchivoRespuesta
ìì 3
(
ìì3 4
int
ìì4 7
idRespuesta
ìì8 C
,
ììC D
string
ììE K
nombreArchivo
ììL Y
)
ììY Z
{
îî 	%
EnviarDocumentoResponse
ïï #%
enviarDocumentoResponse
ïï$ ;
=
ïï< =
JsonConvert
ïï> I
.
ïïI J
DeserializeObject
ïïJ [
<
ïï[ \%
EnviarDocumentoResponse
ïï\ s
>
ïïs t
(
ïït u
Encoding
ïïu }
.
ïï} ~
UTF8ïï~ Ç
.ïïÇ É
	GetStringïïÉ å
(ïïå ç,
facturacionElectronicaLogicaïïç ©
.ïï© ™
ObtenerArchivoïï™ ∏
(ïï∏ π
idRespuestaïïπ ƒ
)ïïƒ ≈
)ïï≈ ∆
)ïï∆ «
;ïï« »
if
ññ 
(
ññ 
!
ññ %
enviarDocumentoResponse
ññ (
.
ññ( )
Exito
ññ) .
)
ññ. /
{
óó 
throw
òò 
new
òò 
LogicaException
òò )
(
òò) *%
enviarDocumentoResponse
òò* A
.
òòA B
MensajeError
òòB N
)
òòN O
;
òòO P
}
ôô 
nombreArchivo
öö 
=
öö 
nombreArchivo
öö )
.
öö) *
Replace
öö* 1
(
öö1 2
$str
öö2 5
,
öö5 6
$str
öö7 9
)
öö9 :
;
öö: ;
byte
õõ 
[
õõ 
]
õõ 
compressedBytes
õõ "
=
õõ# $
Convert
õõ% ,
.
õõ, -
FromBase64String
õõ- =
(
õõ= >%
enviarDocumentoResponse
õõ> U
.
õõU V
TramaZipCdr
õõV a
)
õõa b
;
õõb c
string
úú 
fileNameZip
úú 
=
úú  
nombreArchivo
úú! .
+
úú/ 0
$str
úú1 7
;
úú7 8
return
ûû 
File
ûû 
(
ûû 
compressedBytes
ûû '
,
ûû' (
$str
ûû) :
,
ûû: ;
fileNameZip
ûû< G
)
ûûG H
;
ûûH I
}
üü 	
[
•• 	
	Authorize
••	 
(
•• 
Roles
•• 
=
•• 
$str
•• %
)
••% &
]
••& '
public
¶¶ 
ActionResult
¶¶ %
DescargarXMLComprobante
¶¶ 3
(
¶¶3 4
long
¶¶4 8
idOrden
¶¶9 @
)
¶¶@ A
{
ßß 	
try
®® 
{
©© /
!EstablecimientoComercialExtendido
™™ 1
sede
™™2 6
=
™™7 8
ObtenerSede
™™9 D
(
™™D E
)
™™E F
;
™™F G
OrdenDeVenta
´´ 
ordenDeVenta
´´ )
=
´´* +
operacionLogica
´´, ;
.
´´; <!
ObtenerOrdenDeVenta
´´< O
(
´´O P
idOrden
´´P W
)
´´W X
;
´´X Y
string
≠≠ 
fileNameZip
≠≠ "
=
≠≠# $
ordenDeVenta
≠≠% 1
.
≠≠1 2
Comprobante
≠≠2 =
(
≠≠= >
)
≠≠> ?
.
≠≠? @

CodigoTipo
≠≠@ J
+
≠≠K L
$str
≠≠M R
+
≠≠S T
ordenDeVenta
≠≠U a
.
≠≠a b
Comprobante
≠≠b m
(
≠≠m n
)
≠≠n o
.
≠≠o p
NumeroDeSerie
≠≠p }
+
≠≠~ 
$str≠≠Ä Ö
+≠≠Ü á
ordenDeVenta≠≠à î
.≠≠î ï
Comprobante≠≠ï †
(≠≠† °
)≠≠° ¢
.≠≠¢ £#
NumeroDeComprobante≠≠£ ∂
+≠≠∑ ∏
$str≠≠π æ
+≠≠ø ¿
ordenDeVenta≠≠¡ Õ
.≠≠Õ Œ
Cliente≠≠Œ ’
(≠≠’ ÷
)≠≠÷ ◊
.≠≠◊ ÿ
RazonSocial≠≠ÿ „
+≠≠‰ Â
$str≠≠Ê Ï
;≠≠Ï Ì
byte
ÆÆ 
[
ÆÆ 
]
ÆÆ 
	fileBytes
ÆÆ  
=
ÆÆ! "
null
ÆÆ# '
;
ÆÆ' (
byte
ØØ 
[
ØØ 
]
ØØ 
compressedBytes
ØØ &
;
ØØ& '
using
∞∞ 
(
∞∞ 
var
∞∞ 
	outStream
∞∞ $
=
∞∞% &
new
∞∞' *
MemoryStream
∞∞+ 7
(
∞∞7 8
)
∞∞8 9
)
∞∞9 :
{
±± 
using
≤≤ 
(
≤≤ 
var
≤≤ 
archive
≤≤ &
=
≤≤' (
new
≤≤) ,

ZipArchive
≤≤- 7
(
≤≤7 8
	outStream
≤≤8 A
,
≤≤A B
ZipArchiveMode
≤≤C Q
.
≤≤Q R
Create
≤≤R X
,
≤≤X Y
true
≤≤Z ^
)
≤≤^ _
)
≤≤_ `
{
≥≥ 
ZipArchiveEntry
¥¥ '
fileInArchive
¥¥( 5
=
¥¥6 7
null
¥¥8 <
;
¥¥< =
fileInArchive
∂∂ )
=
∂∂* +
archive
∂∂, 3
.
∂∂3 4
CreateEntry
∂∂4 ?
(
∂∂? @
ordenDeVenta
∂∂@ L
.
∂∂L M
Comprobante
∂∂M X
(
∂∂X Y
)
∂∂Y Z
.
∂∂Z [
NumeroDeSerie
∂∂[ h
+
∂∂i j
$str
∂∂k p
+
∂∂q r
ordenDeVenta
∂∂s 
.∂∂ Ä
Comprobante∂∂Ä ã
(∂∂ã å
)∂∂å ç
.∂∂ç é#
NumeroDeComprobante∂∂é °
+∂∂¢ £
$str∂∂§ ©
+∂∂™ ´
ordenDeVenta∂∂¨ ∏
.∂∂∏ π
Cliente∂∂π ¿
(∂∂¿ ¡
)∂∂¡ ¬
.∂∂¬ √
RazonSocial∂∂√ Œ
+∂∂œ –
$str∂∂— ◊
,∂∂◊ ÿ 
CompressionLevel∂∂Ÿ È
.∂∂È Í
Optimal∂∂Í Ò
)∂∂Ò Ú
;∂∂Ú Û
	fileBytes
∑∑ %
=
∑∑& '

XmlBuilder
∑∑( 2
.
∑∑2 3#
ObtenerXmlComprobante
∑∑3 H
(
∑∑H I
ordenDeVenta
∑∑I U
,
∑∑U V
sede
∑∑W [
,
∑∑[ \
maestroLogica
∑∑] j
,
∑∑j k'
generacionArchivosLogica∑∑l Ñ
,∑∑Ñ Ö,
facturacionElectronicaLogica∑∑Ü ¢
)∑∑¢ £
.∑∑£ §
	Documento∑∑§ ≠
;∑∑≠ Æ
using
∏∏ !
(
∏∏" #
var
∏∏# &
entryStream
∏∏' 2
=
∏∏3 4
fileInArchive
∏∏5 B
.
∏∏B C
Open
∏∏C G
(
∏∏G H
)
∏∏H I
)
∏∏I J
using
ππ !
(
ππ" #
var
ππ# &"
fileToCompressStream
ππ' ;
=
ππ< =
new
ππ> A
MemoryStream
ππB N
(
ππN O
	fileBytes
ππO X
)
ππX Y
)
ππY Z
{
∫∫ "
fileToCompressStream
ªª  4
.
ªª4 5
CopyTo
ªª5 ;
(
ªª; <
entryStream
ªª< G
)
ªªG H
;
ªªH I"
fileToCompressStream
ºº  4
.
ºº4 5
Close
ºº5 :
(
ºº: ;
)
ºº; <
;
ºº< =
}
ΩΩ 
}
ææ 
compressedBytes
øø #
=
øø$ %
	outStream
øø& /
.
øø/ 0
ToArray
øø0 7
(
øø7 8
)
øø8 9
;
øø9 :
}
¿¿ 
return
¡¡ 
File
¡¡ 
(
¡¡ 
compressedBytes
¡¡ +
,
¡¡+ ,
$str
¡¡- >
,
¡¡> ?
fileNameZip
¡¡@ K
)
¡¡K L
;
¡¡L M
}
¬¬ 
catch
√√ 
(
√√ 
	Exception
√√ 
ex
√√ 
)
√√  
{
ƒƒ 
throw
≈≈ 
new
≈≈ !
ControllerException
≈≈ -
(
≈≈- .
$str
≈≈. Y
,
≈≈Y Z
ex
≈≈[ ]
)
≈≈] ^
;
≈≈^ _
}
∆∆ 
}
«« 	
public
ÃÃ 
string
ÃÃ /
!ObtenerPresentacionCorreoEFactura
ÃÃ 7
(
ÃÃ7 8&
EstablecimientoComercial
ÃÃ8 P
sede
ÃÃQ U
)
ÃÃU V
{
ÕÕ 	
return
ŒŒ 
$str
ŒŒ 
+
ŒŒ 
sede
ŒŒ !
.
ŒŒ! " 
DocumentoIdentidad
ŒŒ" 4
+
ŒŒ5 6
$str
ŒŒ7 @
+
ŒŒA B
$str
ŒŒC S
+
ŒŒT U
sede
ŒŒV Z
.
ŒŒZ [
Nombre
ŒŒ[ a
+
ŒŒb c
$str
ŒŒd m
+
ŒŒn o
$strŒŒp Ñ
+ŒŒÖ Ü
sedeŒŒá ã
.ŒŒã å
NombreComercialŒŒå õ
;ŒŒõ ú
}
œœ 	
public
—— 
string
—— )
ObtenerAsuntoCorreoEFactura
—— 1
(
——1 2&
EstablecimientoComercial
——2 J
sede
——K O
)
——O P
{
““ 	
return
”” 
sede
”” 
.
”” 
NombreComercial
”” '
+
””( )
$str
””* 4
+
””5 6
sede
””7 ;
.
””; < 
DocumentoIdentidad
””< N
+
””O P
$str
””Q V
+
””W X
sede
””Y ]
.
””] ^
Nombre
””^ d
;
””d e
}
‘‘ 	
[
÷÷ 	
AutomaticRetry
÷÷	 
(
÷÷ 
Attempts
÷÷  
=
÷÷! "
$num
÷÷# $
)
÷÷$ %
]
÷÷% &
public
◊◊ 
async
◊◊ 
Task
◊◊ $
TransmitirComprobantes
◊◊ 0
(
◊◊0 1/
!EstablecimientoComercialExtendido
◊◊1 R
sede
◊◊S W
)
◊◊W X
{
ÿÿ 	
try
ŸŸ 
{
⁄⁄ +
IFacturacionElectronicaLogica
€€ -
facturacionLogica
€€. ?
=
€€@ A
Dependencia
€€B M
.
€€M N
Resolve
€€N U
<
€€U V+
IFacturacionElectronicaLogica
€€V s
>
€€s t
(
€€t u
)
€€u v
;
€€v w
await
‹‹ 
facturacionLogica
‹‹ '
.
‹‹' (/
!TransmitirAFacturacionElectronica
‹‹( I
(
‹‹I J
ActorSettings
‹‹J W
.
‹‹W X
Default
‹‹X _
.
‹‹_ `/
 IdActorNegocioEmpleadoPorDefecto‹‹` Ä
,‹‹Ä Å
sede‹‹Ç Ü
)‹‹Ü á
;‹‹á à
}
›› 
catch
ﬁﬁ 
(
ﬁﬁ 
	Exception
ﬁﬁ 
e
ﬁﬁ 
)
ﬁﬁ 
{
ﬂﬂ 
await
‡‡ 
mailer
‡‡ 
.
‡‡ 
SendEmailAsync
‡‡ +
(
‡‡+ , 
AplicacionSettings
‡‡, >
.
‡‡> ?
Default
‡‡? F
.
‡‡F G3
%CorreoParaNotificacionDeErrorHangfire
‡‡G l
,
‡‡l m
$str‡‡n Ü
+‡‡á à+
ObtenerAsuntoCorreoEFactura‡‡â §
(‡‡§ •
sede‡‡• ©
)‡‡© ™
,‡‡™ ´
$str‡‡¨ À
+‡‡Ã Õ
$str‡‡Œ ◊
+‡‡ÿ Ÿ1
!ObtenerPresentacionCorreoEFactura‡‡⁄ ˚
(‡‡˚ ¸
sede‡‡¸ Ä
)‡‡Ä Å
+‡‡Ç É
$str‡‡Ñ ç
+‡‡é è
$str‡‡ê ´
+‡‡¨ ≠
	Enumerado‡‡Æ ∑
.‡‡∑ ∏
GetDescription‡‡∏ ∆
(‡‡∆ «'
ProcesoEnvioFacturacion‡‡« ﬁ
.‡‡ﬁ ﬂ
Hangfire‡‡ﬂ Á
)‡‡Á Ë
+‡‡È Í
$str‡‡Î Ù
+‡‡ı ˆ
$str‡‡˜ ì
+‡‡î ï
$str‡‡ñ ü
+‡‡† °
Util‡‡¢ ¶
.‡‡¶ ß
SoloErrorString‡‡ß ∂
(‡‡∂ ∑
e‡‡∑ ∏
)‡‡∏ π
.‡‡π ∫
Replace‡‡∫ ¡
(‡‡¡ ¬
Environment‡‡¬ Õ
.‡‡Õ Œ
NewLine‡‡Œ ’
,‡‡’ ÷
$str‡‡◊ ‡
)‡‡‡ ·
)‡‡· ‚
;‡‡‚ „
}
·· 
}
‚‚ 	
[
‰‰ 	
AutomaticRetry
‰‰	 
(
‰‰ 
Attempts
‰‰  
=
‰‰! "
$num
‰‰# $
)
‰‰$ %
]
‰‰% &
public
ÂÂ 
async
ÂÂ 
Task
ÂÂ !
EnvioDeComprobantes
ÂÂ -
(
ÂÂ- .&
EstablecimientoComercial
ÂÂ. F
sede
ÂÂG K
)
ÂÂK L
{
ÊÊ 	,
LogEnvioFacturacionElectronica
ÁÁ *!
logEnvioFacturacion
ÁÁ+ >
=
ÁÁ? @
new
ÁÁA D,
LogEnvioFacturacionElectronica
ÁÁE c
(
ÁÁc d
)
ÁÁd e
;
ÁÁe f
await
ËË !
EnvioDeComprobantes
ËË %
(
ËË% &
sede
ËË& *
,
ËË* +%
ProcesoEnvioFacturacion
ËË, C
.
ËËC D
Hangfire
ËËD L
,
ËËL M!
logEnvioFacturacion
ËËN a
)
ËËa b
;
ËËb c
}
ÈÈ 	
[
ÎÎ 	
AutomaticRetry
ÎÎ	 
(
ÎÎ 
Attempts
ÎÎ  
=
ÎÎ! "
$num
ÎÎ# $
)
ÎÎ$ %
]
ÎÎ% &
public
ÏÏ 
async
ÏÏ 
Task
ÏÏ ,
ConsultarYReenviarComprobantes
ÏÏ 8
(
ÏÏ8 9&
EstablecimientoComercial
ÏÏ9 Q
sede
ÏÏR V
)
ÏÏV W
{
ÌÌ 	+
IFacturacionElectronicaLogica
ÓÓ )
facturacionLogica
ÓÓ* ;
=
ÓÓ< =
Dependencia
ÓÓ> I
.
ÓÓI J
Resolve
ÓÓJ Q
<
ÓÓQ R+
IFacturacionElectronicaLogica
ÓÓR o
>
ÓÓo p
(
ÓÓp q
)
ÓÓq r
;
ÓÓr s
try
ÔÔ 
{
 
facturacionLogica
ÒÒ !
.
ÒÒ! "
ConsultarTickets
ÒÒ" 2
(
ÒÒ2 3
)
ÒÒ3 4
;
ÒÒ4 5
}
ÚÚ 
catch
ÛÛ 
(
ÛÛ 
	Exception
ÛÛ 
e
ÛÛ 
)
ÛÛ 
{
ÙÙ 
await
ıı 
mailer
ıı 
.
ıı 
SendEmailAsync
ıı +
(
ıı+ , 
AplicacionSettings
ıı, >
.
ıı> ?
Default
ıı? F
.
ııF G3
%CorreoParaNotificacionDeErrorHangfire
ııG l
,
ııl m
$strıın Ö
+ııÜ á+
ObtenerAsuntoCorreoEFacturaııà £
(ıı£ §
sedeıı§ ®
)ıı® ©
,ıı© ™
$strıı´ —
+ıı“ ”
$strıı‘ ›
+ııﬁ ﬂ1
!ObtenerPresentacionCorreoEFacturaıı‡ Å
(ııÅ Ç
sedeııÇ Ü
)ııÜ á
+ııà â
$strııä ì
+ııî ï
$strııñ ±
+ıı≤ ≥
	Enumeradoıı¥ Ω
.ııΩ æ
GetDescriptionııæ Ã
(ııÃ Õ'
ProcesoEnvioFacturacionııÕ ‰
.ıı‰ Â
HangfireııÂ Ì
)ııÌ Ó
+ııÔ 
$strııÒ ˙
+ıı˚ ¸
$strıı˝ ô
+ııö õ
$strııú •
+ıı¶ ß
Utilıı® ¨
.ıı¨ ≠
SoloErrorStringıı≠ º
(ııº Ω
eııΩ æ
)ııæ ø
.ııø ¿
Replaceıı¿ «
(ıı« »
Environmentıı» ”
.ıı” ‘
NewLineıı‘ €
,ıı€ ‹
$strıı› Ê
)ııÊ Á
)ııÁ Ë
;ııË È
}
ˆˆ 
try
˜˜ 
{
¯¯ 
await
˘˘ 
facturacionLogica
˘˘ '
.
˘˘' ((
ResolverEnviosConExcepcion
˘˘( B
(
˘˘B C
)
˘˘C D
;
˘˘D E
}
˙˙ 
catch
˚˚ 
(
˚˚ 
	Exception
˚˚ 
e
˚˚ 
)
˚˚ 
{
¸¸ 
await
˝˝ 
mailer
˝˝ 
.
˝˝ 
SendEmailAsync
˝˝ +
(
˝˝+ , 
AplicacionSettings
˝˝, >
.
˝˝> ?
Default
˝˝? F
.
˝˝F G3
%CorreoParaNotificacionDeErrorHangfire
˝˝G l
,
˝˝l m
$str˝˝n ã
+˝˝å ç+
ObtenerAsuntoCorreoEFactura˝˝é ©
(˝˝© ™
sede˝˝™ Æ
)˝˝Æ Ø
,˝˝Ø ∞
$str˝˝± „
+˝˝‰ Â
$str˝˝Ê Ô
+˝˝ Ò1
!ObtenerPresentacionCorreoEFactura˝˝Ú ì
(˝˝ì î
sede˝˝î ò
)˝˝ò ô
+˝˝ö õ
$str˝˝ú •
+˝˝¶ ß
$str˝˝® √
+˝˝ƒ ≈
	Enumerado˝˝∆ œ
.˝˝œ –
GetDescription˝˝– ﬁ
(˝˝ﬁ ﬂ'
ProcesoEnvioFacturacion˝˝ﬂ ˆ
.˝˝ˆ ˜
Hangfire˝˝˜ ˇ
)˝˝ˇ Ä
+˝˝Å Ç
$str˝˝É å
+˝˝ç é
$str˝˝è ´
+˝˝¨ ≠
$str˝˝Æ ∑
+˝˝∏ π
Util˝˝∫ æ
.˝˝æ ø
SoloErrorString˝˝ø Œ
(˝˝Œ œ
e˝˝œ –
)˝˝– —
.˝˝— “
Replace˝˝“ Ÿ
(˝˝Ÿ ⁄
Environment˝˝⁄ Â
.˝˝Â Ê
NewLine˝˝Ê Ì
,˝˝Ì Ó
$str˝˝Ô ¯
)˝˝¯ ˘
)˝˝˘ ˙
;˝˝˙ ˚
}
˛˛ 
try
ˇˇ 
{
ÄÄ 
facturacionLogica
ÅÅ !
.
ÅÅ! "&
ResolverEnviosPendientes
ÅÅ" :
(
ÅÅ: ;
)
ÅÅ; <
;
ÅÅ< =
}
ÇÇ 
catch
ÉÉ 
(
ÉÉ 
	Exception
ÉÉ 
e
ÉÉ 
)
ÉÉ 
{
ÑÑ 
await
ÖÖ 
mailer
ÖÖ 
.
ÖÖ 
SendEmailAsync
ÖÖ +
(
ÖÖ+ , 
AplicacionSettings
ÖÖ, >
.
ÖÖ> ?
Default
ÖÖ? F
.
ÖÖF G3
%CorreoParaNotificacionDeErrorHangfire
ÖÖG l
,
ÖÖl m
$strÖÖn ã
+ÖÖå ç+
ObtenerAsuntoCorreoEFacturaÖÖé ©
(ÖÖ© ™
sedeÖÖ™ Æ
)ÖÖÆ Ø
,ÖÖØ ∞
$strÖÖ± ‡
+ÖÖ· ‚
$strÖÖ„ Ï
+ÖÖÌ Ó1
!ObtenerPresentacionCorreoEFacturaÖÖÔ ê
(ÖÖê ë
sedeÖÖë ï
)ÖÖï ñ
+ÖÖó ò
$strÖÖô ¢
+ÖÖ£ §
$strÖÖ• ¿
+ÖÖ¡ ¬
	EnumeradoÖÖ√ Ã
.ÖÖÃ Õ
GetDescriptionÖÖÕ €
(ÖÖ€ ‹'
ProcesoEnvioFacturacionÖÖ‹ Û
.ÖÖÛ Ù
HangfireÖÖÙ ¸
)ÖÖ¸ ˝
+ÖÖ˛ ˇ
$strÖÖÄ â
+ÖÖä ã
$strÖÖå ®
+ÖÖ© ™
$strÖÖ´ ¥
+ÖÖµ ∂
UtilÖÖ∑ ª
.ÖÖª º
SoloErrorStringÖÖº À
(ÖÖÀ Ã
eÖÖÃ Õ
)ÖÖÕ Œ
.ÖÖŒ œ
ReplaceÖÖœ ÷
(ÖÖ÷ ◊
EnvironmentÖÖ◊ ‚
.ÖÖ‚ „
NewLineÖÖ„ Í
,ÖÖÍ Î
$strÖÖÏ ı
)ÖÖı ˆ
)ÖÖˆ ˜
;ÖÖ˜ ¯
}
ÜÜ 
}
áá 	
public
ââ 
async
ââ 
Task
ââ <
.TransmitirEnviarConsultarYReenviarComprobantes
ââ H
(
ââH I
)
ââI J
{
ää 	
if
ãã 
(
ãã 
!
ãã 
Flags
ãã 
.
ãã "
FacturacionEnProceso
ãã +
)
ãã+ ,
{
åå 
Flags
çç 
.
çç "
FacturacionEnProceso
çç *
=
çç+ ,
true
çç- 1
;
çç1 2
try
éé 
{
èè /
!EstablecimientoComercialExtendido
êê 5
sede
êê6 :
=
êê; <

sedeLogica
êê= G
.
êêG H"
ObtenerSedeExtendida
êêH \
(
êê\ ]
)
êê] ^
;
êê^ _
try
ëë 
{
íí 
Thread
ìì 
.
ìì 
CurrentThread
ìì ,
.
ìì, -
CurrentCulture
ìì- ;
=
ìì< =
CultureInfo
ìì> I
.
ììI J
GetCultureInfo
ììJ X
(
ììX Y
$str
ììY `
)
ìì` a
;
ììa b
await
îî $
TransmitirComprobantes
îî 4
(
îî4 5
sede
îî5 9
)
îî9 :
;
îî: ;
}
ïï 
catch
ññ 
(
ññ 
	Exception
ññ $
e
ññ% &
)
ññ& '
{
óó 
await
òò 
mailer
òò $
.
òò$ %
SendEmailAsync
òò% 3
(
òò3 4 
AplicacionSettings
òò4 F
.
òòF G
Default
òòG N
.
òòN O3
%CorreoParaNotificacionDeErrorHangfire
òòO t
,
òòt u
$stròòv é
+òòè ê+
ObtenerAsuntoCorreoEFacturaòòë ¨
(òò¨ ≠
sedeòò≠ ±
)òò± ≤
,òò≤ ≥
$stròò¥ ”
+òò‘ ’
$stròò÷ ﬂ
+òò‡ ·1
!ObtenerPresentacionCorreoEFacturaòò‚ É
(òòÉ Ñ
sedeòòÑ à
)òòà â
+òòä ã
$stròòå ï
+òòñ ó
$stròòò ≥
+òò¥ µ
	Enumeradoòò∂ ø
.òòø ¿
GetDescriptionòò¿ Œ
(òòŒ œ'
ProcesoEnvioFacturacionòòœ Ê
.òòÊ Á
HangfireòòÁ Ô
)òòÔ 
+òòÒ Ú
$stròòÛ ¸
+òò˝ ˛
$stròòˇ õ
+òòú ù
$stròòû ß
+òò® ©
Utilòò™ Æ
.òòÆ Ø
SoloErrorStringòòØ æ
(òòæ ø
eòòø ¿
)òò¿ ¡
.òò¡ ¬
Replaceòò¬ …
(òò…  
Environmentòò  ’
.òò’ ÷
NewLineòò÷ ›
,òò› ﬁ
$stròòﬂ Ë
)òòË È
)òòÈ Í
;òòÍ Î
}
ôô 
try
öö 
{
õõ 
await
úú !
EnvioDeComprobantes
úú 1
(
úú1 2
sede
úú2 6
)
úú6 7
;
úú7 8
}
ùù 
catch
ûû 
(
ûû 
	Exception
ûû $
e
ûû% &
)
ûû& '
{
üü 
await
†† 
mailer
†† $
.
††$ %
SendEmailAsync
††% 3
(
††3 4 
AplicacionSettings
††4 F
.
††F G
Default
††G N
.
††N O3
%CorreoParaNotificacionDeErrorHangfire
††O t
,
††t u
$str††v ó
+††ò ô+
ObtenerAsuntoCorreoEFactura††ö µ
(††µ ∂
sede††∂ ∫
)††∫ ª
,††ª º
$str††Ω Â
+††Ê Á
$str††Ë Ò
+††Ú Û1
!ObtenerPresentacionCorreoEFactura††Ù ï
(††ï ñ
sede††ñ ö
)††ö õ
+††ú ù
$str††û ß
+††® ©
$str††™ ≈
+††∆ «
	Enumerado††» —
.††— “
GetDescription††“ ‡
(††‡ ·'
ProcesoEnvioFacturacion††· ¯
.††¯ ˘
Hangfire††˘ Å
)††Å Ç
+††É Ñ
$str††Ö é
+††è ê
$str††ë ≠
+††Æ Ø
$str††∞ π
+††∫ ª
Util††º ¿
.††¿ ¡
SoloErrorString††¡ –
(††– —
e††— “
)††“ ”
.††” ‘
Replace††‘ €
(††€ ‹
Environment††‹ Á
.††Á Ë
NewLine††Ë Ô
,††Ô 
$str††Ò ˙
)††˙ ˚
)††˚ ¸
;††¸ ˝
}
°° 
try
¢¢ 
{
££ 
await
§§ ,
ConsultarYReenviarComprobantes
§§ <
(
§§< =
sede
§§= A
)
§§A B
;
§§B C
}
•• 
catch
¶¶ 
(
¶¶ 
	Exception
¶¶ $
e
¶¶% &
)
¶¶& '
{
ßß 
await
®® 
mailer
®® $
.
®®$ %
SendEmailAsync
®®% 3
(
®®3 4 
AplicacionSettings
®®4 F
.
®®F G
Default
®®G N
.
®®N O3
%CorreoParaNotificacionDeErrorHangfire
®®O t
,
®®t u
$str®®v •
+®®¶ ß+
ObtenerAsuntoCorreoEFactura®®® √
(®®√ ƒ
sede®®ƒ »
)®®» …
,®®…  
$str®®À Å
+®®Ç É
$str®®Ñ ç
+®®é è1
!ObtenerPresentacionCorreoEFactura®®ê ±
(®®± ≤
sede®®≤ ∂
)®®∂ ∑
+®®∏ π
$str®®∫ √
+®®ƒ ≈
$str®®∆ ·
+®®‚ „
	Enumerado®®‰ Ì
.®®Ì Ó
GetDescription®®Ó ¸
(®®¸ ˝'
ProcesoEnvioFacturacion®®˝ î
.®®î ï
Hangfire®®ï ù
)®®ù û
+®®ü †
$str®®° ™
+®®´ ¨
$str®®≠ …
+®®  À
$str®®Ã ’
+®®÷ ◊
Util®®ÿ ‹
.®®‹ ›
SoloErrorString®®› Ï
(®®Ï Ì
e®®Ì Ó
)®®Ó Ô
.®®Ô 
Replace®® ˜
(®®˜ ¯
Environment®®¯ É
.®®É Ñ
NewLine®®Ñ ã
,®®ã å
$str®®ç ñ
)®®ñ ó
)®®ó ò
;®®ò ô
}
©© 
finally
™™ 
{
´´ 
Flags
¨¨ 
.
¨¨ "
FacturacionEnProceso
¨¨ 2
=
¨¨3 4
false
¨¨5 :
;
¨¨: ;
}
≠≠ 
}
ÆÆ 
catch
ØØ 
(
ØØ 
	Exception
ØØ  
e
ØØ! "
)
ØØ" #
{
∞∞ 
await
±± 
mailer
±±  
.
±±  !
SendEmailAsync
±±! /
(
±±/ 0 
AplicacionSettings
±±0 B
.
±±B C
Default
±±C J
.
±±J K3
%CorreoParaNotificacionDeErrorHangfire
±±K p
,
±±p q
$str±±r Ñ
,±±Ñ Ö
$str±±Ü º
+±±Ω æ
$str±±ø »
+±±…  
$str±±À ‘
+±±’ ÷
$str±±◊ Ú
+±±Û Ù
	Enumerado±±ı ˛
.±±˛ ˇ
GetDescription±±ˇ ç
(±±ç é'
ProcesoEnvioFacturacion±±é •
.±±• ¶
Hangfire±±¶ Æ
)±±Æ Ø
+±±∞ ±
$str±±≤ ª
+±±º Ω
$str±±æ ⁄
+±±€ ‹
$str±±› Ê
+±±Á Ë
Util±±È Ì
.±±Ì Ó
SoloErrorString±±Ó ˝
(±±˝ ˛
e±±˛ ˇ
)±±ˇ Ä
.±±Ä Å
Replace±±Å à
(±±à â
Environment±±â î
.±±î ï
NewLine±±ï ú
,±±ú ù
$str±±û ß
)±±ß ®
)±±® ©
;±±© ™
}
≤≤ 
}
≥≥ 
else
¥¥ 
{
µµ 
throw
∂∂ 
new
∂∂ !
ControllerException
∂∂ -
(
∂∂- .
$str
∂∂. h
)
∂∂h i
;
∂∂i j
}
∑∑ 
}
∏∏ 	
}
ªª 
}ºº ¬æ
cD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\Core\Concepto\ConceptoController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
ConceptoController #
:$ %
BaseController& 4
{ 
private 
readonly 
IMaestroLogica '
_logicaMaestro( 6
;6 7
private 
readonly 
IConceptoLogica (
_logicaConcepto) 8
;8 9
private 
readonly 
IActorNegocioLogica ,
_actorNegocioLogica- @
;@ A
	protected 
readonly $
ICentroDeAtencion_Logica 3#
centroDeAtencion_Logica4 K
;K L
public 
ConceptoController !
(! "
)" #
{ 	
_logicaMaestro 
= 
Dependencia (
.( )
Resolve) 0
<0 1
IMaestroLogica1 ?
>? @
(@ A
)A B
;B C
_logicaConcepto   
=   
Dependencia   )
.  ) *
Resolve  * 1
<  1 2
IConceptoLogica  2 A
>  A B
(  B C
)  C D
;  D E
_actorNegocioLogica!! 
=!!  !
Dependencia!!" -
.!!- .
Resolve!!. 5
<!!5 6
IActorNegocioLogica!!6 I
>!!I J
(!!J K
)!!K L
;!!L M#
centroDeAtencion_Logica"" #
=""$ %
Dependencia""& 1
.""1 2
Resolve""2 9
<""9 :$
ICentroDeAtencion_Logica"": R
>""R S
(""S T
)""T U
;""U V
}%% 	
[** 	
	Authorize**	 
(** 
Roles** 
=** 
$str** &
)**& '
]**' (
public++ 
ActionResult++ 
Concepto++ $
(++$ %
)++% &
{,, 	
ViewBag-- 
.-- 8
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardar-- @
=--A B
AplicacionSettings--C U
.--U V
Default--V ]
.--] ^9
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardar	--^ ä
;
--ä ã
ViewBag.. 
... %
IdUnidadDeMedidaSubUnidad.. -
=... /
MaestroSettings..0 ?
...? @
Default..@ G
...G H3
'IdDetalleMaestroUnidadDeMedidaSubUnidad..H o
;..o p
ViewBag// 
.// $
IdPresentacionPorDefecto// ,
=//- .
ConceptoSettings/// ?
.//? @
Default//@ G
.//G H$
idPresentacionPorDefecto//H `
;//` a
ViewBag00 
.00 $
IdUnidadMedidaPorDefecto00 ,
=00- .
ConceptoSettings00/ ?
.00? @
Default00@ G
.00G H$
idUnidadMedidaPorDefecto00H `
;00` a
ViewBag11 
.11 9
-IdPresentacionAOcultarEnNombreConceptoNegocio11 A
=11B C
ConceptoSettings11D T
.11T U
Default11U \
.11\ ]:
-IdPresentacionAOcultarEnNombreConceptoNegocio	11] ä
;
11ä ã
ViewBag22 
.22 D
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocio22 L
=22M N
ConceptoSettings22O _
.22_ `
Default22` g
.22g hE
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocio	22h †
;
22† °
ViewBag33 
.33 %
numeroDecimalesEnCantidad33 -
=33. /
AplicacionSettings330 B
.33B C
Default33C J
.33J K%
NumeroDecimalesEnCantidad33K d
;33d e
ViewBag44 
.44 #
numeroDecimalesEnPrecio44 +
=44, -
AplicacionSettings44. @
.44@ A
Default44A H
.44H I#
NumeroDecimalesEnPrecio44I `
;44` a
ViewBag55 
.55 7
+modoDeSeleccionTipoFamiliaEnRegistroFamilia55 ?
=55@ A
ConceptoSettings55B R
.55R S
Default55S Z
.55Z [8
+ModoDeSeleccionTipoFamiliaEnRegistroFamilia	55[ Ü
;
55Ü á
ViewBag66 
.66 1
%mostrarCampoCodigoAlRegistrarConcepto66 9
=66: ;
ConceptoSettings66< L
.66L M
Default66M T
.66T U1
%MostrarCampoCodigoAlRegistrarConcepto66U z
;66z {
ViewBag77 
.77 8
,mostrarCampoCodigoDigemidAlRegistrarConcepto77 @
=77A B
ConceptoSettings77C S
.77S T
Default77T [
.77[ \=
0PermitirRegistroCodigoDigemidEnConceptoComercial	77\ å
;
77å ç
ViewBag88 
.88 
modulosAdicionales88 &
=88' ($
MascaraArrayItemGenerico88) A
.88A B.
"ConvertirMascaraModulosAdicionales88B d
(88d e
AplicacionSettings88e w
.88w x
Default88x 
.	88 Ä2
$MascaraModulosAdicionalesHabilitados
88Ä §
)
88§ •
;
88• ¶
return99 
View99 
(99 
)99 
;99 
};; 	
[== 	
	Authorize==	 
(== 
Roles== 
=== 
$str== &
)==& '
]==' (
public>> 
ActionResult>> 
	Conceptos>> %
(>>% &
)>>& '
{?? 	
ViewBag@@ 
.@@ '
idEstablecimientoPorDefecto@@ /
=@@0 1
ProfileData@@2 =
(@@= >
)@@> ?
.@@? @(
CentroDeAtencionSeleccionado@@@ \
.@@\ ]$
EstablecimientoComercial@@] u
.@@u v
Id@@v x
;@@x y
ViewBagAA 
.AA (
idCentroDeAtencionPorDefectoAA 0
=AA1 2
ProfileDataAA3 >
(AA> ?
)AA? @
.AA@ A(
CentroDeAtencionSeleccionadoAAA ]
.AA] ^
IdAA^ `
;AA` a
ViewBagBB 
.BB $
IdPresentacionPorDefectoBB ,
=BB- .
ConceptoSettingsBB/ ?
.BB? @
DefaultBB@ G
.BBG H$
idPresentacionPorDefectoBBH `
;BB` a
ViewBagCC 
.CC $
IdUnidadMedidaPorDefectoCC ,
=CC- .
ConceptoSettingsCC/ ?
.CC? @
DefaultCC@ G
.CCG H$
idUnidadMedidaPorDefectoCCH `
;CC` a
ViewBagDD 
.DD 8
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardarDD @
=DDA B
AplicacionSettingsDDC U
.DDU V
DefaultDDV ]
.DD] ^9
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardar	DD^ ä
;
DDä ã
ViewBagEE 
.EE %
IdUnidadDeMedidaSubUnidadEE -
=EE. /
MaestroSettingsEE0 ?
.EE? @
DefaultEE@ G
.EEG H3
'IdDetalleMaestroUnidadDeMedidaSubUnidadEEH o
;EEo p
ViewBagFF 
.FF 9
-IdPresentacionAOcultarEnNombreConceptoNegocioFF A
=FFB C
ConceptoSettingsFFD T
.FFT U
DefaultFFU \
.FF\ ]:
-IdPresentacionAOcultarEnNombreConceptoNegocio	FF] ä
;
FFä ã
ViewBagGG 
.GG D
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocioGG L
=GGM N
ConceptoSettingsGGO _
.GG_ `
DefaultGG` g
.GGg hE
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocio	GGh †
;
GG† °
ViewBagHH 
.HH %
numeroDecimalesEnCantidadHH -
=HH. /
AplicacionSettingsHH0 B
.HHB C
DefaultHHC J
.HHJ K%
NumeroDecimalesEnCantidadHHK d
;HHd e
ViewBagII 
.II #
numeroDecimalesEnPrecioII +
=II, -
AplicacionSettingsII. @
.II@ A
DefaultIIA H
.IIH I#
NumeroDecimalesEnPrecioIII `
;II` a
ViewBagJJ 
.JJ 7
+modoDeSeleccionTipoFamiliaEnRegistroFamiliaJJ ?
=JJ@ A
ConceptoSettingsJJB R
.JJR S
DefaultJJS Z
.JJZ [8
+ModoDeSeleccionTipoFamiliaEnRegistroFamilia	JJ[ Ü
;
JJÜ á
ViewBagKK 
.KK 1
%mostrarCampoCodigoAlRegistrarConceptoKK 9
=KK: ;
ConceptoSettingsKK< L
.KKL M
DefaultKKM T
.KKT U1
%MostrarCampoCodigoAlRegistrarConceptoKKU z
;KKz {
ViewBagLL 
.LL 8
,mostrarCampoCodigoDigemidAlRegistrarConceptoLL @
=LLA B
ConceptoSettingsLLC S
.LLS T
DefaultLLT [
.LL[ \=
0PermitirRegistroCodigoDigemidEnConceptoComercial	LL\ å
;
LLå ç
ViewBagMM 
.MM 
modulosAdicionalesMM &
=MM' ($
MascaraArrayItemGenericoMM) A
.MMA B.
"ConvertirMascaraModulosAdicionalesMMB d
(MMd e
AplicacionSettingsMMe w
.MMw x
DefaultMMx 
.	MM Ä2
$MascaraModulosAdicionalesHabilitados
MMÄ §
)
MM§ •
;
MM• ¶
returnNN 
ViewNN 
(NN 
)NN 
;NN 
}OO 	
[QQ 	
	AuthorizeQQ	 
(QQ 
RolesQQ 
=QQ 
$strQQ &
)QQ& '
]QQ' (
publicRR 
ActionResultRR 
ConsultarConceptosRR .
(RR. /
)RR/ 0
{SS 	
ViewBagTT 
.TT 8
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardarTT @
=TTA B
AplicacionSettingsTTC U
.TTU V
DefaultTTV ]
.TT] ^9
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardar	TT^ ä
;
TTä ã
ViewBagUU 
.UU %
IdUnidadDeMedidaSubUnidadUU -
=UU. /
MaestroSettingsUU0 ?
.UU? @
DefaultUU@ G
.UUG H3
'IdDetalleMaestroUnidadDeMedidaSubUnidadUUH o
;UUo p
ViewBagVV 
.VV $
IdPresentacionPorDefectoVV ,
=VV- .
ConceptoSettingsVV/ ?
.VV? @
DefaultVV@ G
.VVG H$
idPresentacionPorDefectoVVH `
;VV` a
ViewBagWW 
.WW $
IdUnidadMedidaPorDefectoWW ,
=WW- .
ConceptoSettingsWW/ ?
.WW? @
DefaultWW@ G
.WWG H$
idUnidadMedidaPorDefectoWWH `
;WW` a
ViewBagXX 
.XX 9
-IdPresentacionAOcultarEnNombreConceptoNegocioXX A
=XXB C
ConceptoSettingsXXD T
.XXT U
DefaultXXU \
.XX\ ]:
-IdPresentacionAOcultarEnNombreConceptoNegocio	XX] ä
;
XXä ã
ViewBagYY 
.YY D
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocioYY L
=YYM N
ConceptoSettingsYYO _
.YY_ `
DefaultYY` g
.YYg hE
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocio	YYh †
;
YY† °
ViewBagZZ 
.ZZ %
numeroDecimalesEnCantidadZZ -
=ZZ. /
AplicacionSettingsZZ0 B
.ZZB C
DefaultZZC J
.ZZJ K%
NumeroDecimalesEnCantidadZZK d
;ZZd e
ViewBag[[ 
.[[ #
numeroDecimalesEnPrecio[[ +
=[[, -
AplicacionSettings[[. @
.[[@ A
Default[[A H
.[[H I#
NumeroDecimalesEnPrecio[[I `
;[[` a
ViewBag\\ 
.\\ 7
+modoDeSeleccionTipoFamiliaEnRegistroFamilia\\ ?
=\\@ A
ConceptoSettings\\B R
.\\R S
Default\\S Z
.\\Z [8
+ModoDeSeleccionTipoFamiliaEnRegistroFamilia	\\[ Ü
;
\\Ü á
ViewBag]] 
.]] 1
%mostrarCampoCodigoAlRegistrarConcepto]] 9
=]]: ;
ConceptoSettings]]< L
.]]L M
Default]]M T
.]]T U1
%MostrarCampoCodigoAlRegistrarConcepto]]U z
;]]z {
ViewBag^^ 
.^^ 8
,mostrarCampoCodigoDigemidAlRegistrarConcepto^^ @
=^^A B
ConceptoSettings^^C S
.^^S T
Default^^T [
.^^[ \=
0PermitirRegistroCodigoDigemidEnConceptoComercial	^^\ å
;
^^å ç
ViewBag__ 
.__ 
modulosAdicionales__ &
=__' ($
MascaraArrayItemGenerico__) A
.__A B.
"ConvertirMascaraModulosAdicionales__B d
(__d e
AplicacionSettings__e w
.__w x
Default__x 
.	__ Ä2
$MascaraModulosAdicionalesHabilitados
__Ä §
)
__§ •
;
__• ¶
return`` 
View`` 
(`` 
)`` 
;`` 
}aa 	
[cc 	
	Authorizecc	 
(cc 
Rolescc 
=cc 
$strcc 1
)cc1 2
]cc2 3
publicdd 
ActionResultdd 
ConceptoBasicodd *
(dd* +
)dd+ ,
{ee 	
ViewBagff 
.ff 7
+modoDeSeleccionTipoFamiliaEnRegistroFamiliaff ?
=ff@ A
ConceptoSettingsffB R
.ffR S
DefaultffS Z
.ffZ [8
+ModoDeSeleccionTipoFamiliaEnRegistroFamilia	ff[ Ü
;
ffÜ á
returngg 
Viewgg 
(gg 
)gg 
;gg 
}hh 	
[jj 	
	Authorizejj	 
(jj 
Rolesjj 
=jj 
$strjj 1
)jj1 2
]jj2 3
publickk 
ActionResultkk %
ConsultarConceptosBasicoskk 5
(kk5 6
)kk6 7
{ll 	
ViewBagmm 
.mm 7
+modoDeSeleccionTipoFamiliaEnRegistroFamiliamm ?
=mm@ A
ConceptoSettingsmmB R
.mmR S
DefaultmmS Z
.mmZ [8
+ModoDeSeleccionTipoFamiliaEnRegistroFamilia	mm[ Ü
;
mmÜ á
returnnn 
Viewnn 
(nn 
)nn 
;nn 
}oo 	
[qq 	
	Authorizeqq	 
(qq 
Rolesqq 
=qq 
$strqq 1
)qq1 2
]qq2 3
publicrr 
ActionResultrr 
Caracteristicasrr +
(rr+ ,
)rr, -
{ss 	
returntt 
Viewtt 
(tt 
)tt 
;tt 
}uu 	
[ww 	
	Authorizeww	 
(ww 
Rolesww 
=ww 
$strww 1
)ww1 2
]ww2 3
publicxx 
ActionResultxx 
Caracteristica_xx +
(xx+ ,
intxx, /
cxx0 1
)xx1 2
{yy 	
Detalle_maestrozz 
caracteristicazz *
=zz+ ,
_logicaConceptozz- <
.zz< =!
ObtenerCaracteristicazz= R
(zzR S
czzS T
)zzT U
;zzU V
ViewBag{{ 
.{{ 
id{{ 
={{ 
caracteristica{{ '
.{{' (
id{{( *
;{{* +
ViewBag|| 
.|| 
nombre|| 
=|| 
caracteristica|| +
.||+ ,
nombre||, 2
;||2 3
return~~ 
View~~ 
(~~ 
)~~ 
;~~ 
} 	
[
ÅÅ 	
	Authorize
ÅÅ	 
(
ÅÅ 
Roles
ÅÅ 
=
ÅÅ 
$str
ÅÅ 1
)
ÅÅ1 2
]
ÅÅ2 3
public
ÇÇ 
ActionResult
ÇÇ 

Categorias
ÇÇ &
(
ÇÇ& '
)
ÇÇ' (
{
ÉÉ 	
ViewBag
ÑÑ 
.
ÑÑ 
IdCategoriaNula
ÑÑ #
=
ÑÑ$ %
ConceptoSettings
ÑÑ& 6
.
ÑÑ6 7
Default
ÑÑ7 >
.
ÑÑ> ?
IdCategoriaNula
ÑÑ? N
;
ÑÑN O
return
ÖÖ 
View
ÖÖ 
(
ÖÖ 
)
ÖÖ 
;
ÖÖ 
}
ÜÜ 	
public
àà 
ActionResult
àà 
Transformacion
àà *
(
àà* +
)
àà+ ,
{
ââ 	
return
ãã 
View
ãã 
(
ãã 
)
ãã 
;
ãã 
}
åå 	
[
çç 	
	Authorize
çç	 
(
çç 
Roles
çç 
=
çç 
$str
çç 9
)
çç9 :
]
çç: ;
public
éé 
ActionResult
éé #
ReportesAdministrador
éé 1
(
éé1 2
)
éé2 3
{
èè 	
return
êê 
View
êê 
(
êê 
)
êê 
;
êê 
}
ëë 	
[
íí 	
	Authorize
íí	 
(
íí 
Roles
íí 
=
íí 
$str
íí ;
)
íí; <
]
íí< =
public
ìì 
ActionResult
ìì 
ReporteDigemid
ìì *
(
ìì* +
)
ìì+ ,
{
îî 	
return
ïï 
View
ïï 
(
ïï 
)
ïï 
;
ïï 
}
ññ 	
[
óó 	
	Authorize
óó	 
(
óó 
Roles
óó 
=
óó 
$str
óó D
)
óóD E
]
óóE F
public
òò 
ActionResult
òò  
ReportesAlmacenero
òò .
(
òò. /
)
òò/ 0
{
ôô 	
return
öö 
View
öö 
(
öö 
)
öö 
;
öö 
}
õõ 	
[
úú 	
	Authorize
úú	 
(
úú 
Roles
úú 
=
úú 
$str
úú ;
)
úú; <
]
úú< =
public
ùù 
ActionResult
ùù 
Precio
ùù "
(
ùù" #
)
ùù# $
{
ûû 	
ViewBag
üü 
.
üü %
numeroDecimalesEnPrecio
üü +
=
üü, - 
AplicacionSettings
üü. @
.
üü@ A
Default
üüA H
.
üüH I%
NumeroDecimalesEnPrecio
üüI `
;
üü` a
ViewBag
†† 
.
†† (
mostrarBuscadorCodigoBarra
†† .
=
††/ 0 
AplicacionSettings
††1 C
.
††C D
Default
††D K
.
††K L4
&MostrarBuscadorCodigoBarraEnCotizacion
††L r
;
††r s
ViewBag
°° 
.
°° '
modoDeSeleccionDeConcepto
°° -
=
°°. / 
AplicacionSettings
°°0 B
.
°°B C
Default
°°C J
.
°°J K<
.ModoDeSeleccionDeConceptoDeNegocioEnCotizacion
°°K y
;
°°y z
ViewBag
¢¢ 
.
¢¢ &
modoSeleccionTipoFamilia
¢¢ ,
=
¢¢- . 
AplicacionSettings
¢¢/ A
.
¢¢A B
Default
¢¢B I
.
¢¢I J6
(ModoDeSeleccionTipoDeFamiliaEnCotizacion
¢¢J r
;
¢¢r s
ViewBag
££ 
.
££ ,
minimoCaracteresBuscarConcepto
££ 2
=
££3 4 
AplicacionSettings
££5 G
.
££G H
Default
££H O
.
££O P<
.MinimoDeCaracteresParaBuscarEnSelectorConcepto
££P ~
;
££~ 
ViewBag
§§ 
.
§§ *
tiempoEsperaBusquedaSelector
§§ 0
=
§§1 2 
AplicacionSettings
§§3 E
.
§§E F
Default
§§F M
.
§§M N>
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidad
§§N ~
;
§§~ 
ViewBag
•• 
.
•• )
informacionSelectorConcepto
•• /
=
••0 1
(
••2 3
int
••3 6
)
••6 7)
InformacionSelectorConcepto
••7 R
.
••R S
Nombre
••S Y
;
••Y Z
ViewBag
¶¶ 
.
¶¶  
idTarifaPorDefecto
¶¶ &
=
¶¶' (
MaestroSettings
¶¶) 8
.
¶¶8 9
Default
¶¶9 @
.
¶¶@ A*
IdDetalleMaestroTarifaNormal
¶¶A ]
;
¶¶] ^
ViewBag
ßß 
.
ßß ,
etiquetaSeleccionadaPorDefecto
ßß 2
=
ßß3 4
ConceptoSettings
ßß5 E
.
ßßE F
Default
ßßF M
.
ßßM NA
2EtiquetaSeleccionadaPorDefectoEnImpresionEtiquetasßßN Ä
;ßßÄ Å
ViewBag
®® 
.
®® 
altoEtiqueta3
®® !
=
®®" #
ConceptoSettings
®®$ 4
.
®®4 5
Default
®®5 <
.
®®< =2
$ParametrosEtiquetaImpresionEtiqueta3
®®= a
.
®®a b
Split
®®b g
(
®®g h
$char
®®h k
)
®®k l
[
®®l m
$num
®®m n
]
®®n o
;
®®o p
ViewBag
©© 
.
©© 
anchoEtiqueta3
©© "
=
©©# $
ConceptoSettings
©©% 5
.
©©5 6
Default
©©6 =
.
©©= >2
$ParametrosEtiquetaImpresionEtiqueta3
©©> b
.
©©b c
Split
©©c h
(
©©h i
$char
©©i l
)
©©l m
[
©©m n
$num
©©n o
]
©©o p
;
©©p q
ViewBag
™™ 
.
™™ 
filasEtiqueta3
™™ "
=
™™# $
ConceptoSettings
™™% 5
.
™™5 6
Default
™™6 =
.
™™= >2
$ParametrosEtiquetaImpresionEtiqueta3
™™> b
.
™™b c
Split
™™c h
(
™™h i
$char
™™i l
)
™™l m
[
™™m n
$num
™™n o
]
™™o p
;
™™p q
ViewBag
´´ 
.
´´ 
columnasEtiqueta3
´´ %
=
´´& '
ConceptoSettings
´´( 8
.
´´8 9
Default
´´9 @
.
´´@ A2
$ParametrosEtiquetaImpresionEtiqueta3
´´A e
.
´´e f
Split
´´f k
(
´´k l
$char
´´l o
)
´´o p
[
´´p q
$num
´´q r
]
´´r s
;
´´s t
ViewBag
¨¨ 
.
¨¨ 
fuenteEtiqueta3
¨¨ #
=
¨¨$ %
ConceptoSettings
¨¨& 6
.
¨¨6 7
Default
¨¨7 >
.
¨¨> ?2
$ParametrosEtiquetaImpresionEtiqueta3
¨¨? c
.
¨¨c d
Split
¨¨d i
(
¨¨i j
$char
¨¨j m
)
¨¨m n
[
¨¨n o
$num
¨¨o p
]
¨¨p q
;
¨¨q r
ViewBag
≠≠ 
.
≠≠ 
altoEtiqueta4
≠≠ !
=
≠≠" #
ConceptoSettings
≠≠$ 4
.
≠≠4 5
Default
≠≠5 <
.
≠≠< =2
$ParametrosEtiquetaImpresionEtiqueta4
≠≠= a
.
≠≠a b
Split
≠≠b g
(
≠≠g h
$char
≠≠h k
)
≠≠k l
[
≠≠l m
$num
≠≠m n
]
≠≠n o
;
≠≠o p
ViewBag
ÆÆ 
.
ÆÆ 
anchoEtiqueta4
ÆÆ "
=
ÆÆ# $
ConceptoSettings
ÆÆ% 5
.
ÆÆ5 6
Default
ÆÆ6 =
.
ÆÆ= >2
$ParametrosEtiquetaImpresionEtiqueta4
ÆÆ> b
.
ÆÆb c
Split
ÆÆc h
(
ÆÆh i
$char
ÆÆi l
)
ÆÆl m
[
ÆÆm n
$num
ÆÆn o
]
ÆÆo p
;
ÆÆp q
ViewBag
ØØ 
.
ØØ 
filasEtiqueta4
ØØ "
=
ØØ# $
ConceptoSettings
ØØ% 5
.
ØØ5 6
Default
ØØ6 =
.
ØØ= >2
$ParametrosEtiquetaImpresionEtiqueta4
ØØ> b
.
ØØb c
Split
ØØc h
(
ØØh i
$char
ØØi l
)
ØØl m
[
ØØm n
$num
ØØn o
]
ØØo p
;
ØØp q
ViewBag
∞∞ 
.
∞∞ 
columnasEtiqueta4
∞∞ %
=
∞∞& '
ConceptoSettings
∞∞( 8
.
∞∞8 9
Default
∞∞9 @
.
∞∞@ A2
$ParametrosEtiquetaImpresionEtiqueta4
∞∞A e
.
∞∞e f
Split
∞∞f k
(
∞∞k l
$char
∞∞l o
)
∞∞o p
[
∞∞p q
$num
∞∞q r
]
∞∞r s
;
∞∞s t
ViewBag
±± 
.
±± 
fuenteEtiqueta4
±± #
=
±±$ %
ConceptoSettings
±±& 6
.
±±6 7
Default
±±7 >
.
±±> ?2
$ParametrosEtiquetaImpresionEtiqueta4
±±? c
.
±±c d
Split
±±d i
(
±±i j
$char
±±j m
)
±±m n
[
±±n o
$num
±±o p
]
±±p q
;
±±q r
return
≤≤ 
View
≤≤ 
(
≤≤ 
)
≤≤ 
;
≤≤ 
}
≥≥ 	
public
—— 

JsonResult
—— 
GuardarProducto
—— )
(
——) *
ProductoViewModel
——* ;
producto
——< D
)
——D E
{
““ 	
try
”” 
{
‘‘ 
OperationResult
’’ 
	resultado
’’  )
;
’’) *3
%ComprobarSiYaExisteNombreDeUnProducto
◊◊ 5
(
◊◊5 6
producto
◊◊6 >
.
◊◊> ?
Id
◊◊? A
,
◊◊A B
producto
◊◊C K
.
◊◊K L
Nombre
◊◊L R
)
◊◊R S
;
◊◊S T
if
ŸŸ 
(
ŸŸ 
producto
ŸŸ 
.
ŸŸ 
Id
ŸŸ 
>
ŸŸ  !
$num
ŸŸ" #
)
ŸŸ# $
{
⁄⁄ 
	resultado
€€ 
=
€€ 
_logicaConcepto
€€  /
.
€€/ 0 
ActualizarProducto
€€0 B
(
€€B C
producto
€€C K
.
€€K L
Id
€€L N
,
€€N O
producto
€€P X
.
€€X Y
CodigoBarra
€€Y d
,
€€d e
producto
€€f n
.
€€n o
Nombre
€€o u
,
€€u v
producto
€€w 
.€€ Ä
Codigo€€Ä Ü
,€€Ü á
producto€€à ê
.€€ê ë
CodigoDigemid€€ë û
,€€û ü
producto€€† ®
.€€® ©
Sufijo€€© Ø
,€€Ø ∞
producto€€± π
.€€π ∫
Concepto€€∫ ¬
.€€¬ √
Id€€√ ≈
,€€≈ ∆
producto€€« œ
.€€œ –
Concepto€€– ÿ
.€€ÿ Ÿ
EsBien€€Ÿ ﬂ
,€€ﬂ ‡
producto€€· È
.€€È Í!
UnidadDeMedidaCom€€Í ˚
.€€˚ ¸
Id€€¸ ˛
,€€˛ ˇ
producto€€Ä à
.€€à â!
UnidadDeMedidaRef€€â ö
.€€ö õ
Id€€õ ù
,€€ù û
producto€€ü ß
.€€ß ®"
IdsCaracteristicas€€® ∫
?€€∫ ª
.€€ª º
ToArray€€º √
(€€√ ƒ
)€€ƒ ≈
,€€≈ ∆
producto€€« œ
.€€œ –"
ModulosAdicionales€€– ‚
?€€‚ „
.€€„ ‰
ToArray€€‰ Î
(€€Î Ï
)€€Ï Ì
,€€Ì Ó
producto€€Ô ˜
.€€˜ ¯
Presentacion€€¯ Ñ
.€€Ñ Ö
Id€€Ö á
,€€á à
producto€€â ë
.€€ë í$
CantidadPresentacion€€í ¶
,€€¶ ß
producto€€® ∞
.€€∞ ±"
UnidadDeMedidaPres€€± √
.€€√ ƒ
Id€€ƒ ∆
,€€∆ «
producto€€» –
.€€– —(
PresentacionSubContenido€€— È
!=€€Í Ï
null€€Ì Ò
?€€Ú Û
producto€€Ù ¸
.€€¸ ˝(
PresentacionSubContenido€€˝ ï
.€€ï ñ
Id€€ñ ò
:€€ô ö
(€€õ ú
int€€ú ü
?€€ü †
)€€† °
null€€° •
,€€• ¶
producto€€ß Ø
.€€Ø ∞
Foto€€∞ ¥
.€€¥ µ
HayFoto€€µ º
?€€Ω æ
Convert€€ø ∆
.€€∆ « 
FromBase64String€€« ◊
(€€◊ ÿ
producto€€ÿ ‡
.€€‡ ·
Foto€€· Â
.€€Â Ê
Foto€€Ê Í
)€€Í Î
:€€Ï Ì
null€€Ó Ú
,€€Ú Û
producto€€Ù ¸
.€€¸ ˝
Foto€€˝ Å
.€€Å Ç
HayFoto€€Ç â
,€€â ä'
RegistroPrecioViewModel€€ã ¢
.€€¢ £
Convert€€£ ™
(€€™ ´
producto€€´ ≥
.€€≥ ¥
PreciosVenta€€¥ ¿
)€€¿ ¡
,€€¡ ¬
producto€€√ À
.€€À Ã
StockMinimo€€Ã ◊
,€€◊ ÿ
ProfileData€€Ÿ ‰
(€€‰ Â
)€€Â Ê
.€€Ê Á
Empleado€€Á Ô
.€€Ô 
Id€€ Ú
,€€Ú Û
ProfileData€€æ …
(€€…  
)€€  À
.€€À Ã2
"IdCentroAtencionQueTieneLosPrecios€€Ã Ó
)€€Ó Ô
;€€Ô 
}
‹‹ 
else
›› 
{
ﬁﬁ 
	resultado
ﬂﬂ 
=
ﬂﬂ 
_logicaConcepto
ﬂﬂ  /
.
ﬂﬂ/ 0
GuardarProducto
ﬂﬂ0 ?
(
ﬂﬂ? @
producto
‡‡  
.
‡‡  !
CodigoBarra
‡‡! ,
,
‡‡, -
producto
‡‡. 6
.
‡‡6 7
Nombre
‡‡7 =
,
‡‡= >
producto
‡‡? G
.
‡‡G H
Codigo
‡‡H N
,
‡‡N O
producto
‡‡P X
.
‡‡X Y
CodigoDigemid
‡‡Y f
,
‡‡f g
producto
‡‡h p
.
‡‡p q
Sufijo
‡‡q w
,
‡‡w x
producto‡‡y Å
.‡‡Å Ç
Concepto‡‡Ç ä
.‡‡ä ã
Id‡‡ã ç
,‡‡ç é
producto‡‡è ó
.‡‡ó ò
Concepto‡‡ò †
.‡‡† °
EsBien‡‡° ß
,‡‡ß ®
producto‡‡© ±
.‡‡± ≤!
UnidadDeMedidaCom‡‡≤ √
.‡‡√ ƒ
Id‡‡ƒ ∆
,‡‡∆ «
producto‡‡» –
.‡‡– —!
UnidadDeMedidaRef‡‡— ‚
.‡‡‚ „
Id‡‡„ Â
,‡‡Â Ê
producto‡‡Á Ô
.‡‡Ô "
IdsCaracteristicas‡‡ Ç
?‡‡Ç É
.‡‡É Ñ
ToArray‡‡Ñ ã
(‡‡ã å
)‡‡å ç
,‡‡ç é
producto‡‡è ó
.‡‡ó ò"
ModulosAdicionales‡‡ò ™
?‡‡™ ´
.‡‡´ ¨
ToArray‡‡¨ ≥
(‡‡≥ ¥
)‡‡¥ µ
,‡‡µ ∂
producto‡‡∑ ø
.‡‡ø ¿
Presentacion‡‡¿ Ã
.‡‡Ã Õ
Id‡‡Õ œ
,‡‡œ –
producto‡‡— Ÿ
.‡‡Ÿ ⁄$
CantidadPresentacion‡‡⁄ Ó
,‡‡Ó Ô
producto‡‡ ¯
.‡‡¯ ˘"
UnidadDeMedidaPres‡‡˘ ã
.‡‡ã å
Id‡‡å é
,‡‡é è
producto‡‡ê ò
.‡‡ò ô(
PresentacionSubContenido‡‡ô ±
!=‡‡≤ ¥
null‡‡µ π
?‡‡∫ ª
producto‡‡º ƒ
.‡‡ƒ ≈(
PresentacionSubContenido‡‡≈ ›
.‡‡› ﬁ
Id‡‡ﬁ ‡
:‡‡· ‚
(‡‡„ ‰
int‡‡‰ Á
?‡‡Á Ë
)‡‡Ë È
null‡‡È Ì
,‡‡Ì Ó
producto‡‡Ô ˜
.‡‡˜ ¯
Foto‡‡¯ ¸
.‡‡¸ ˝
HayFoto‡‡˝ Ñ
?‡‡Ö Ü
Convert‡‡á é
.‡‡é è 
FromBase64String‡‡è ü
(‡‡ü †
producto‡‡† ®
.‡‡® ©
Foto‡‡© ≠
.‡‡≠ Æ
Foto‡‡Æ ≤
)‡‡≤ ≥
:‡‡¥ µ
null‡‡∂ ∫
,‡‡∫ ª
producto‡‡º ƒ
.‡‡ƒ ≈
Foto‡‡≈ …
.‡‡…  
HayFoto‡‡  —
,‡‡— “'
RegistroPrecioViewModel‡‡” Í
.‡‡Í Î
Convert‡‡Î Ú
(‡‡Ú Û
producto‡‡Û ˚
.‡‡˚ ¸
PreciosVenta‡‡¸ à
)‡‡à â
,‡‡â ä
producto‡‡ã ì
.‡‡ì î
StockMinimo‡‡î ü
,‡‡ü †
ProfileData‡‡° ¨
(‡‡¨ ≠
)‡‡≠ Æ
.‡‡Æ Ø
Empleado‡‡Ø ∑
.‡‡∑ ∏
Id‡‡∏ ∫
,‡‡∫ ª
ProfileData‡‡Ü ë
(‡‡ë í
)‡‡í ì
.‡‡ì î2
"IdCentroAtencionQueTieneLosPrecios‡‡î ∂
)‡‡∂ ∑
;‡‡∑ ∏
}
·· 
Util
‚‚ 
.
‚‚ (
ManageIfResultIsNotSuccess
‚‚ /
(
‚‚/ 0
	resultado
‚‚0 9
,
‚‚9 :
$str
‚‚; [
)
‚‚[ \
;
‚‚\ ]
return
„„ 
Json
„„ 
(
„„ 
new
„„ 
{
„„  !
	resultado
„„" +
.
„„+ ,
code_result
„„, 7
,
„„7 8
	resultado
„„9 B
.
„„B C
data
„„C G
,
„„G H 
result_description
„„I [
=
„„\ ]
	resultado
„„^ g
.
„„g h
title
„„h m
}
„„n o
)
„„o p
;
„„p q
}
‰‰ 
catch
ÂÂ 
(
ÂÂ "
AdvertenciaException
ÂÂ '
e
ÂÂ( )
)
ÂÂ) *
{
ÊÊ 
return
ÁÁ 
new
ÁÁ "
JsonHttpStatusResult
ÁÁ /
(
ÁÁ/ 0
new
ÁÁ0 3
{
ÁÁ4 5
error
ÁÁ6 ;
=
ÁÁ< =
e
ÁÁ> ?
.
ÁÁ? @
Message
ÁÁ@ G
,
ÁÁG H
warning
ÁÁI P
=
ÁÁQ R
true
ÁÁS W
}
ÁÁX Y
,
ÁÁY Z
HttpStatusCode
ÁÁ[ i
.
ÁÁi j!
InternalServerError
ÁÁj }
)
ÁÁ} ~
;
ÁÁ~ 
}
ËË 
catch
ÈÈ 
(
ÈÈ 
	Exception
ÈÈ 
e
ÈÈ 
)
ÈÈ 
{
ÍÍ 
return
ÎÎ 
new
ÎÎ "
JsonHttpStatusResult
ÎÎ /
(
ÎÎ/ 0
Util
ÎÎ0 4
.
ÎÎ4 5
	ErrorJson
ÎÎ5 >
(
ÎÎ> ?
e
ÎÎ? @
)
ÎÎ@ A
,
ÎÎA B
HttpStatusCode
ÎÎC Q
.
ÎÎQ R!
InternalServerError
ÎÎR e
)
ÎÎe f
;
ÎÎf g
}
ÏÏ 
}
ÌÌ 	
public
ÔÔ 

JsonResult
ÔÔ  
EliminarMercaderia
ÔÔ ,
(
ÔÔ, -
int
ÔÔ- 0
IdMercaderia
ÔÔ1 =
)
ÔÔ= >
{
 	
try
ÒÒ 
{
ÚÚ 
OperationResult
ÛÛ 
result
ÛÛ  &
=
ÛÛ' (
_logicaConcepto
ÛÛ) 8
.
ÛÛ8 9!
DarDeBajaMercaderia
ÛÛ9 L
(
ÛÛL M
IdMercaderia
ÛÛM Y
)
ÛÛY Z
;
ÛÛZ [
Util
ÙÙ 
.
ÙÙ 
VerificarError
ÙÙ #
(
ÙÙ# $
result
ÙÙ$ *
)
ÙÙ* +
;
ÙÙ+ ,
return
ıı 
Json
ıı 
(
ıı 
new
ıı 
{
ıı  !
code_result
ıı" -
=
ıı. /
result
ıı0 6
.
ıı6 7
code_result
ıı7 B
,
ııB C
data
ııD H
=
ııI J
result
ııK Q
.
ııQ R
data
ııR V
,
ııV W 
result_description
ııX j
=
ıık l
result
ıım s
.
ııs t
title
ııt y
}
ıız {
)
ıı{ |
;
ıı| }
}
ˆˆ 
catch
˜˜ 
(
˜˜ 
	Exception
˜˜ 
e
˜˜ 
)
˜˜ 
{
¯¯ 
HttpContext
˘˘ 
.
˘˘ 
Response
˘˘ $
.
˘˘$ %

StatusCode
˘˘% /
=
˘˘0 1
$num
˘˘2 5
;
˘˘5 6
return
˙˙ 
Json
˙˙ 
(
˙˙ 
Util
˙˙  
.
˙˙  !
	ErrorJson
˙˙! *
(
˙˙* +
e
˙˙+ ,
)
˙˙, -
)
˙˙- .
;
˙˙. /
}
˚˚ 
}
¸¸ 	
public
˛˛ 

JsonResult
˛˛ 
ObtenerProducto
˛˛ )
(
˛˛) *
int
˛˛* -
idMercaderia
˛˛. :
)
˛˛: ;
{
ˇˇ 	
try
ÄÄ 
{
ÅÅ 
List
ÇÇ 
<
ÇÇ $
ComboGenericoViewModel
ÇÇ +
>
ÇÇ+ ,
puntosDePrecio
ÇÇ- ;
=
ÇÇ< =$
ComboGenericoViewModel
ÇÇ> T
.
ÇÇT U
Convert
ÇÇU \
(
ÇÇ\ ]%
centroDeAtencion_Logica
ÇÇ] t
.
ÇÇt u$
ObtenerPuntosDePrecioÇÇu ä
(ÇÇä ã
)ÇÇã å
)ÇÇå ç
;ÇÇç é
var
ÉÉ 
tarifasDePrecio
ÉÉ #
=
ÉÉ$ %$
ComboGenericoViewModel
ÉÉ& <
.
ÉÉ< =
Convert
ÉÉ= D
(
ÉÉD E
_logicaMaestro
ÉÉE S
.
ÉÉS T
obtenerTarifas
ÉÉT b
(
ÉÉb c
)
ÉÉc d
)
ÉÉd e
;
ÉÉe f
var
ÑÑ  
preciosCompraVenta
ÑÑ &
=
ÑÑ' (
_logicaConcepto
ÑÑ) 8
.
ÑÑ8 98
*ObtenerPreciosCompraVentaDeConceptoNegocio
ÑÑ9 c
(
ÑÑc d
idMercaderia
ÑÑd p
)
ÑÑp q
;
ÑÑq r
ProductoViewModel
ÖÖ !
	respuesta
ÖÖ" +
=
ÖÖ, -
new
ÖÖ. 1
ProductoViewModel
ÖÖ2 C
(
ÖÖC D
_logicaConcepto
ÖÖD S
.
ÖÖS T
obtenerProducto
ÖÖT c
(
ÖÖc d
idMercaderia
ÖÖd p
)
ÖÖp q
,
ÖÖq r!
preciosCompraVentaÖÖs Ö
,ÖÖÖ Ü
puntosDePrecioÖÖá ï
,ÖÖï ñ
tarifasDePrecioÖÖó ¶
,ÖÖ¶ ß
DateTimeUtilÖÖß ≥
.ÖÖ≥ ¥
FechaActualÖÖ¥ ø
(ÖÖø ¿
)ÖÖ¿ ¡
)ÖÖ¡ ¬
;ÖÖ¬ √
return
ÜÜ 
Json
ÜÜ 
(
ÜÜ 
	respuesta
ÜÜ %
)
ÜÜ% &
;
ÜÜ& '
}
áá 
catch
àà 
(
àà 
	Exception
àà 
e
àà 
)
àà 
{
ââ 
return
ää 
new
ää "
JsonHttpStatusResult
ää /
(
ää/ 0
Util
ää0 4
.
ää4 5
	ErrorJson
ää5 >
(
ää> ?
new
ää? B
	Exception
ääC L
(
ääL M
$str
ääM h
,
ääh i
e
ääj k
)
ääk l
)
ääl m
,
ääm n
HttpStatusCode
ääo }
.
ää} ~"
InternalServerErrorää~ ë
)ääë í
;ääí ì
}
ãã 
}
åå 	
public
éé 

JsonResult
éé  
ObtenerMercaderias
éé ,
(
éé, -
)
éé- .
{
èè 	
try
êê 
{
ëë 
List
íí 
<
íí &
BandejaProductoViewModel
íí -
>
íí- .
	respuesta
íí/ 8
=
íí9 :&
BandejaProductoViewModel
íí; S
.
ííS T
Convert_
ííT \
(
íí\ ]
_logicaConcepto
íí] l
.
ííl mI
:ObtenerMercaderiasPorConceptoBasicoIncluyendoStockYPreciosíím ß
(ííß ®
ProfileDataíí® ≥
(íí≥ ¥
)íí¥ µ
.ííµ ∂.
IdCentroDeAtencionSeleccionadoíí∂ ‘
)íí‘ ’
,íí’ ÷
ProfileDataíí◊ ‚
(íí‚ „
)íí„ ‰
.íí‰ Â2
"IdCentroAtencionQueTieneLosPreciosííÂ á
)ííá à
;ííà â
return
ìì 
Json
ìì 
(
ìì 
	respuesta
ìì %
)
ìì% &
;
ìì& '
}
îî 
catch
ïï 
(
ïï 
	Exception
ïï 
e
ïï 
)
ïï 
{
ññ 
HttpContext
óó 
.
óó 
Response
óó $
.
óó$ %

StatusCode
óó% /
=
óó0 1
$num
óó2 5
;
óó5 6
return
òò 
Json
òò 
(
òò 
Util
òò  
.
òò  !
	ErrorJson
òò! *
(
òò* +
e
òò+ ,
)
òò, -
)
òò- .
;
òò. /
}
ôô 
}
öö 	
public
úú 

JsonResult
úú 9
+ObtenerMercaderiasPorConceptoBasicoGenerico
úú E
(
úúE F
int
úúF I
idConceptoBasico
úúJ Z
)
úúZ [
{
ùù 	
try
ûû 
{
üü 
List
†† 
<
†† $
ComboGenericoViewModel
†† +
>
††+ ,
	respuesta
††- 6
=
††7 8$
ComboGenericoViewModel
††9 O
.
††O P
Convert
††P W
(
††W X
_logicaConcepto
††X g
.
††g h2
#ObtenerMercaderiasPorConceptoBasico††h ã
(††ã å 
idConceptoBasico††å ú
)††ú ù
)††ù û
;††û ü
return
°° 
Json
°° 
(
°° 
	respuesta
°° %
)
°°% &
;
°°& '
}
¢¢ 
catch
££ 
(
££ 
	Exception
££ 
e
££ 
)
££ 
{
§§ 
HttpContext
•• 
.
•• 
Response
•• $
.
••$ %

StatusCode
••% /
=
••0 1
$num
••2 5
;
••5 6
return
¶¶ 
Json
¶¶ 
(
¶¶ 
Util
¶¶  
.
¶¶  !
	ErrorJson
¶¶! *
(
¶¶* +
e
¶¶+ ,
)
¶¶, -
)
¶¶- .
;
¶¶. /
}
ßß 
}
®® 	
public
™™ 

JsonResult
™™ H
:ObtenerMercaderiasPorConceptoBasicoIncluyendoStockYPrecios
™™ T
(
™™T U
int
™™U X
idConceptoBasico
™™Y i
)
™™i j
{
´´ 	
try
¨¨ 
{
≠≠ 
List
ØØ 
<
ØØ 
ConceptoDeNegocio
ØØ &
>
ØØ& '

resultados
ØØ( 2
=
ØØ3 4
_logicaConcepto
ØØ5 D
.
ØØD EH
:ObtenerMercaderiasPorConceptoBasicoIncluyendoStockYPrecios
ØØE 
(ØØ Ä 
idConceptoBasicoØØÄ ê
)ØØê ë
;ØØë í
List
∞∞ 
<
∞∞ )
ProductoParaCompraViewModel
∞∞ 0
>
∞∞0 1
	productos
∞∞2 ;
=
∞∞< =)
ProductoParaCompraViewModel
∞∞> Y
.
∞∞Y Z'
ConvertProductoParaCompra
∞∞Z s
(
∞∞s t

resultados
∞∞t ~
,
∞∞~ 
ProfileData∞∞Ä ã
(∞∞ã å
)∞∞å ç
.∞∞ç é.
IdCentroDeAtencionSeleccionado∞∞é ¨
)∞∞¨ ≠
;∞∞≠ Æ
return
±± 
Json
±± 
(
±± 
	productos
±± %
)
±±% &
;
±±& '
}
≤≤ 
catch
≥≥ 
(
≥≥ 
	Exception
≥≥ 
e
≥≥ 
)
≥≥ 
{
¥¥ 
return
µµ 
new
µµ "
JsonHttpStatusResult
µµ /
(
µµ/ 0
Util
µµ0 4
.
µµ4 5
	ErrorJson
µµ5 >
(
µµ> ?
new
µµ? B
	Exception
µµC L
(
µµL M
$str
µµM i
,
µµi j
e
µµk l
)
µµl m
)
µµm n
,
µµn o
HttpStatusCode
µµp ~
.
µµ~ "
InternalServerErrorµµ í
)µµí ì
;µµì î
}
∂∂ 
}
∑∑ 	
public
ππ 

JsonResult
ππ D
6ObtenerMercaderiaPorCodigoBarraIncluyendoStockYPrecios
ππ P
(
ππP Q
string
ππQ W
codigoBarra
ππX c
)
ππc d
{
∫∫ 	
try
ªª 
{
ºº 
ConceptoDeNegocio
ΩΩ !
	resultado
ΩΩ" +
=
ΩΩ, -
_logicaConcepto
ΩΩ. =
.
ΩΩ= >D
6ObtenerMercaderiaPorCodigoBarraIncluyendoStockYPrecios
ΩΩ> t
(
ΩΩt u
codigoBarraΩΩu Ä
)ΩΩÄ Å
;ΩΩÅ Ç
if
ææ 
(
ææ 
	resultado
ææ 
!=
ææ  
null
ææ! %
)
ææ% &
{
øø )
ProductoParaCompraViewModel
¿¿ /
producto
¿¿0 8
=
¿¿9 :
new
¿¿; >)
ProductoParaCompraViewModel
¿¿? Z
(
¿¿Z [
	resultado
¿¿[ d
,
¿¿d e
ProfileData
¿¿f q
(
¿¿q r
)
¿¿r s
.
¿¿s t-
IdCentroDeAtencionSeleccionado¿¿t í
)¿¿í ì
;¿¿ì î
return
¡¡ 
Json
¡¡ 
(
¡¡  
producto
¡¡  (
)
¡¡( )
;
¡¡) *
}
¬¬ 
else
√√ 
{
ƒƒ 
throw
≈≈ 
new
≈≈ "
AdvertenciaException
≈≈ 2
(
≈≈2 3
$str
≈≈3 ]
)
≈≈] ^
;
≈≈^ _
}
∆∆ 
}
«« 
catch
»» 
(
»» "
AdvertenciaException
»» '
e
»»( )
)
»») *
{
…… 
return
   
new
   "
JsonHttpStatusResult
   /
(
  / 0
new
  0 3
{
  4 5
error
  6 ;
=
  < =
e
  > ?
.
  ? @
Message
  @ G
,
  G H
warning
  I P
=
  Q R
true
  S W
}
  X Y
,
  Y Z
HttpStatusCode
  [ i
.
  i j!
InternalServerError
  j }
)
  } ~
;
  ~ 
}
ÀÀ 
catch
ÃÃ 
(
ÃÃ 
	Exception
ÃÃ 
e
ÃÃ 
)
ÃÃ 
{
ÕÕ 
return
ŒŒ 
new
ŒŒ "
JsonHttpStatusResult
ŒŒ /
(
ŒŒ/ 0
Util
ŒŒ0 4
.
ŒŒ4 5
	ErrorJson
ŒŒ5 >
(
ŒŒ> ?
new
ŒŒ? B
	Exception
ŒŒC L
(
ŒŒL M
$str
ŒŒM h
,
ŒŒh i
e
ŒŒj k
)
ŒŒk l
)
ŒŒl m
,
ŒŒm n
HttpStatusCode
ŒŒo }
.
ŒŒ} ~"
InternalServerErrorŒŒ~ ë
)ŒŒë í
;ŒŒí ì
}
œœ 
}
–– 	
public
““ 

JsonResult
““ P
BObtenerMercaderiasPorConceptoBasicoIncluyendoStockYPreciosVigentes
““ \
(
““\ ]
int
““] `
idConceptoBasico
““a q
)
““q r
{
”” 	
try
‘‘ 
{
’’ 
int
÷÷ 0
"idCentroAtencionQueTieneLosPrecios
÷÷ 6
=
÷÷7 8
ProfileData
÷÷9 D
(
÷÷D E
)
÷÷E F
.
÷÷F G0
"IdCentroAtencionQueTieneLosPrecios
÷÷G i
;
÷÷i j
int
◊◊ 2
$idCentroAtencionQueTieneLaExistencia
◊◊ 8
=
◊◊9 :
ProfileData
◊◊; F
(
◊◊F G
)
◊◊G H
.
◊◊H I6
(IdCentroAtencionQueTieneElStockIntegrada
◊◊I q
;
◊◊q r
List
ÿÿ 
<
ÿÿ 
ConceptoDeNegocio
ÿÿ &
>
ÿÿ& '

resultados
ÿÿ( 2
=
ÿÿ3 4
_logicaConcepto
ÿÿ5 D
.
ÿÿD E7
)ObtenerMercaderiasIncluyendoStockYPrecios
ÿÿE n
(
ŸŸ 
idConceptoBasico
ŸŸ %
,
ŸŸ% &0
"idCentroAtencionQueTieneLosPrecios
ŸŸ' I
)
ŸŸI J
;
ŸŸJ K
List
⁄⁄ 
<
⁄⁄ (
ProductoParaVentaViewModel
⁄⁄ /
>
⁄⁄/ 0
	productos
⁄⁄1 :
=
⁄⁄; <(
ProductoParaVentaViewModel
⁄⁄= W
.
⁄⁄W X/
!ConvertProductoParaVentaViewModel
⁄⁄X y
(
⁄⁄y z

resultados⁄⁄z Ñ
,⁄⁄Ñ Ö2
"idCentroAtencionQueTieneLosPrecios⁄⁄Ü ®
,⁄⁄® ©4
$idCentroAtencionQueTieneLaExistencia⁄⁄™ Œ
)⁄⁄Œ œ
;⁄⁄œ –
return
€€ 
Json
€€ 
(
€€ 
	productos
€€ %
)
€€% &
;
€€& '
}
‹‹ 
catch
›› 
(
›› 
	Exception
›› 
e
›› 
)
›› 
{
ﬁﬁ 
return
ﬂﬂ 
new
ﬂﬂ "
JsonHttpStatusResult
ﬂﬂ /
(
ﬂﬂ/ 0
Util
ﬂﬂ0 4
.
ﬂﬂ4 5
	ErrorJson
ﬂﬂ5 >
(
ﬂﬂ> ?
e
ﬂﬂ? @
)
ﬂﬂ@ A
,
ﬂﬂA B
HttpStatusCode
ﬂﬂC Q
.
ﬂﬂQ R!
InternalServerError
ﬂﬂR e
)
ﬂﬂe f
;
ﬂﬂf g
}
‡‡ 
}
·· 	
public
„„ 

JsonResult
„„ )
ObtenerMercaderiasFiltradas
„„ 5
(
„„5 6
int
„„6 9
idConceptoBasico
„„: J
)
„„J K
{
‰‰ 	
try
ÂÂ 
{
ÊÊ 
List
ÁÁ 
<
ÁÁ &
BandejaProductoViewModel
ÁÁ -
>
ÁÁ- .
	respuesta
ÁÁ/ 8
=
ÁÁ9 :&
BandejaProductoViewModel
ÁÁ; S
.
ÁÁS T
Convert_
ÁÁT \
(
ÁÁ\ ]
_logicaConcepto
ÁÁ] l
.
ÁÁl mX
IObtenerMercaderiasPorConceptoBasicoIncluyendoStockPreciosYCaracteristicasÁÁm ∂
(ÁÁ∂ ∑ 
idConceptoBasicoÁÁ∑ «
)ÁÁ« »
,ÁÁ» …
ProfileDataÁÁî ü
(ÁÁü †
)ÁÁ† °
.ÁÁ° ¢2
"IdCentroAtencionQueTieneLosPreciosÁÁ¢ ƒ
)ÁÁƒ ≈
;ÁÁ≈ ∆
return
ËË 
Json
ËË 
(
ËË 
	respuesta
ËË %
)
ËË% &
;
ËË& '
}
ÈÈ 
catch
ÍÍ 
(
ÍÍ 
	Exception
ÍÍ 
e
ÍÍ 
)
ÍÍ 
{
ÎÎ 
HttpContext
ÏÏ 
.
ÏÏ 
Response
ÏÏ $
.
ÏÏ$ %

StatusCode
ÏÏ% /
=
ÏÏ0 1
$num
ÏÏ2 5
;
ÏÏ5 6
return
ÌÌ 
Json
ÌÌ 
(
ÌÌ 
Util
ÌÌ  
.
ÌÌ  !
	ErrorJson
ÌÌ! *
(
ÌÌ* +
e
ÌÌ+ ,
)
ÌÌ, -
)
ÌÌ- .
;
ÌÌ. /
}
ÓÓ 
}
ÔÔ 	
public
ÒÒ 

JsonResult
ÒÒ J
<ObtenerMercaderiasFiltradasPorConceptoBasicoYCaracteristicas
ÒÒ V
(
ÒÒV W
int
ÒÒW Z
?
ÒÒZ [
idConceptoBasico
ÒÒ\ l
,
ÒÒl m
int
ÒÒn q
[
ÒÒq r
]
ÒÒr s'
idValoresCaracteristicasÒÒt å
)ÒÒå ç
{
ÚÚ 	
try
ÙÙ 
{
ıı 
if
ˆˆ 
(
ˆˆ &
idValoresCaracteristicas
ˆˆ ,
!=
ˆˆ- /
null
ˆˆ0 4
)
ˆˆ4 5
{
˜˜ &
idValoresCaracteristicas
¯¯ ,
=
¯¯- .&
idValoresCaracteristicas
¯¯/ G
.
¯¯G H
Where
¯¯H M
(
¯¯M N
id
¯¯N P
=>
¯¯Q S
id
¯¯T V
>
¯¯W X
$num
¯¯Y Z
)
¯¯Z [
.
¯¯[ \
ToArray
¯¯\ c
(
¯¯c d
)
¯¯d e
;
¯¯e f
}
˘˘ 
List
˚˚ 
<
˚˚ &
BandejaProductoViewModel
˚˚ -
>
˚˚- .
	respuesta
˚˚/ 8
=
˚˚9 :
new
˚˚; >
List
˚˚? C
<
˚˚C D&
BandejaProductoViewModel
˚˚D \
>
˚˚\ ]
(
˚˚] ^
)
˚˚^ _
;
˚˚_ `
if
¸¸ 
(
¸¸ 
idConceptoBasico
¸¸ $
!=
¸¸% '
null
¸¸( ,
&&
¸¸- /&
idValoresCaracteristicas
¸¸0 H
!=
¸¸I K
null
¸¸L P
&&
¸¸Q S&
idValoresCaracteristicas
¸¸T l
.
¸¸l m
Length
¸¸m s
>
¸¸t u
$num
¸¸v w
)
¸¸w x
{
˝˝ 
	respuesta
˛˛ 
=
˛˛ &
BandejaProductoViewModel
˛˛  8
.
˛˛8 9
Convert_
˛˛9 A
(
˛˛A B
_logicaConcepto
˛˛B Q
.
˛˛Q Rh
YObtenerMercaderiasPorConceptoBasicoYCaracteristicasIncluyendoStockPreciosYCaracteristicas˛˛R ´
(˛˛´ ¨
(˛˛¨ ≠
int˛˛≠ ∞
)˛˛∞ ± 
idConceptoBasico˛˛± ¡
,˛˛¡ ¬(
idValoresCaracteristicas˛˛√ €
)˛˛€ ‹
,˛˛‹ ›
ProfileData˛˛® ≥
(˛˛≥ ¥
)˛˛¥ µ
.˛˛µ ∂2
"IdCentroAtencionQueTieneLosPrecios˛˛∂ ÿ
)˛˛ÿ Ÿ
;˛˛Ÿ ⁄
}
ˇˇ 
else
ÄÄ 
if
ÄÄ 
(
ÄÄ 
idConceptoBasico
ÄÄ )
==
ÄÄ* ,
null
ÄÄ- 1
&&
ÄÄ2 4&
idValoresCaracteristicas
ÄÄ5 M
!=
ÄÄN P
null
ÄÄQ U
&&
ÄÄV X&
idValoresCaracteristicas
ÄÄY q
.
ÄÄq r
Length
ÄÄr x
>
ÄÄy z
$num
ÄÄ{ |
)
ÄÄ| }
{
ÅÅ 
	respuesta
ÇÇ 
=
ÇÇ &
BandejaProductoViewModel
ÇÇ  8
.
ÇÇ8 9
Convert_
ÇÇ9 A
(
ÇÇA B
_logicaConcepto
ÇÇB Q
.
ÇÇQ RY
JObtenerMercaderiasPorCaracteristicasIncluyendoStockPreciosYCaracteristicasÇÇR ú
(ÇÇú ù(
idValoresCaracteristicasÇÇù µ
)ÇÇµ ∂
,ÇÇ∂ ∑
ProfileDataÇÇÇ ç
(ÇÇç é
)ÇÇé è
.ÇÇè ê2
"IdCentroAtencionQueTieneLosPreciosÇÇê ≤
)ÇÇ≤ ≥
;ÇÇ≥ ¥
}
ÉÉ 
else
ÑÑ 
if
ÑÑ 
(
ÑÑ 
idConceptoBasico
ÑÑ )
!=
ÑÑ* ,
null
ÑÑ- 1
&&
ÑÑ2 4
(
ÑÑ5 6&
idValoresCaracteristicas
ÑÑ6 N
==
ÑÑO Q
null
ÑÑR V
||
ÑÑW Y&
idValoresCaracteristicas
ÑÑZ r
.
ÑÑr s
Length
ÑÑs y
<=
ÑÑz |
$num
ÑÑ} ~
)
ÑÑ~ 
)ÑÑ Ä
{
ÖÖ 
	respuesta
ÜÜ 
=
ÜÜ &
BandejaProductoViewModel
ÜÜ  8
.
ÜÜ8 9
Convert_
ÜÜ9 A
(
ÜÜA B
_logicaConcepto
ÜÜB Q
.
ÜÜQ RX
IObtenerMercaderiasPorConceptoBasicoIncluyendoStockPreciosYCaracteristicasÜÜR õ
(ÜÜõ ú
(ÜÜú ù
intÜÜù †
)ÜÜ† ° 
idConceptoBasicoÜÜ° ±
)ÜÜ± ≤
,ÜÜ≤ ≥
ProfileDataÜÜ˛ â
(ÜÜâ ä
)ÜÜä ã
.ÜÜã å2
"IdCentroAtencionQueTieneLosPreciosÜÜå Æ
)ÜÜÆ Ø
;ÜÜØ ∞
}
áá 
return
ââ 
Json
ââ 
(
ââ 
	respuesta
ââ %
)
ââ% &
;
ââ& '
}
ää 
catch
ãã 
(
ãã 
	Exception
ãã 
e
ãã 
)
ãã 
{
åå 
return
çç 
new
çç "
JsonHttpStatusResult
çç /
(
çç/ 0
Util
çç0 4
.
çç4 5
	ErrorJson
çç5 >
(
çç> ?
new
çç? B
	Exception
ççC L
(
ççL M
$str
ççM i
,
ççi j
e
ççk l
)
ççl m
)
ççm n
,
ççn o
HttpStatusCode
ççp ~
.
çç~ "
InternalServerErrorçç í
)ççí ì
;ççì î
}
éé 
}
èè 	
public
ëë 

JsonResult
ëë U
GObtenerPrecioVentaNormalDelConceptoParaVentasMasivasSegunElPuntoDeVenta
ëë a
(
ëëa b
int
ëëb e
idPuntoDeVenta
ëëf t
)
ëët u
{
íí 	
try
ìì 
{
îî 
var
ïï '
productoParaVentasYCobros
ïï -
=
ïï. /
_logicaConcepto
ïï0 ?
.
ïï? @
obtenerProducto
ïï@ O
(
ïïO P
ConceptoSettings
ïïP `
.
ïï` a
Default
ïïa h
.
ïïh i<
-IdConceptoEnRegistroUnificadosdeVentasyCobrosïïi ñ
)ïïñ ó
;ïïó ò
int
ññ .
 idCentroAtencionQueTieneElPrecio
ññ 4
=
ññ5 6
idPuntoDeVenta
ññ7 E
;
ññE F
var
óó 
conceptoConPrecio
óó %
=
óó& '
new
óó( +
{
óó, -
Nombre
óó. 4
=
óó5 6'
productoParaVentasYCobros
óó7 P
.
óóP Q
Nombre
óóQ W
,
óóW X
PrecioConcepto
óóY g
=
óóh i(
productoParaVentasYCobrosóój É
.óóÉ Ñ!
PrecioVentaNormalóóÑ ï
(óóï ñ0
 idCentroAtencionQueTieneElPrecioóóñ ∂
)óó∂ ∑
}óó∏ π
;óóπ ∫
return
ôô 
Json
ôô 
(
ôô 
conceptoConPrecio
ôô -
)
ôô- .
;
ôô. /
}
öö 
catch
õõ 
(
õõ 
	Exception
õõ 
e
õõ 
)
õõ 
{
úú 
return
ùù 
new
ùù "
JsonHttpStatusResult
ùù /
(
ùù/ 0
Util
ùù0 4
.
ùù4 5
	ErrorJson
ùù5 >
(
ùù> ?
new
ùù? B
	Exception
ùùC L
(
ùùL M
$str
ùùM f
,
ùùf g
e
ùùh i
)
ùùi j
)
ùùj k
,
ùùk l
HttpStatusCode
ùùm {
.
ùù{ |"
InternalServerErrorùù| è
)ùùè ê
;ùùê ë
}
ûû 
}
†† 	
public
¢¢ 
void
¢¢ 3
%ComprobarSiYaExisteNombreDeUnProducto
¢¢ 9
(
¢¢9 :
int
¢¢: =

idProducto
¢¢> H
,
¢¢H I
string
¢¢J P
nombreProducto
¢¢Q _
)
¢¢_ `
{
££ 	
try
§§ 
{
•• 
if
¶¶ 
(
¶¶ 
!
¶¶ 
ConceptoSettings
¶¶ %
.
¶¶% &
Default
¶¶& -
.
¶¶- .0
"PermitirConceptosConNombreRepetido
¶¶. P
)
¶¶P Q
{
ßß 
if
®® 
(
®® 

idProducto
®® "
>
®®# $
$num
®®% &
)
®®& '
{
©© 
var
™™ 
result
™™ "
=
™™# $
_logicaConcepto
™™% 4
.
™™4 5
obtenerProducto
™™5 D
(
™™D E

idProducto
™™E O
)
™™O P
;
™™P Q
if
¨¨ 
(
¨¨ 
nombreProducto
¨¨ *
!=
¨¨+ -
result
¨¨. 4
.
¨¨4 5
Nombre
¨¨5 ;
)
¨¨; <
{
≠≠ 
bool
ØØ  "
existeNombreProducto
ØØ! 5
=
ØØ6 7
_logicaConcepto
ØØ8 G
.
ØØG H+
ExisteNombreConceptoComercial
ØØH e
(
ØØe f
nombreProducto
ØØf t
)
ØØt u
;
ØØu v
if
±± 
(
±±  "
existeNombreProducto
±±  4
)
±±4 5
{
≤≤ 
throw
≥≥  %
new
≥≥& )!
ControllerException
≥≥* =
(
≥≥= >
$str
≥≥> u
)
≥≥u v
;
≥≥v w
}
¥¥ 
}
µµ 
}
∂∂ 
else
∑∑ 
{
∏∏ 
bool
ππ "
existeNombreProducto
ππ 1
=
ππ2 3
_logicaConcepto
ππ4 C
.
ππC D+
ExisteNombreConceptoComercial
ππD a
(
ππa b
nombreProducto
ππb p
)
ππp q
;
ππq r
if
∫∫ 
(
∫∫ "
existeNombreProducto
∫∫ 0
)
∫∫0 1
{
ªª 
throw
ºº !
new
ºº" %!
ControllerException
ºº& 9
(
ºº9 :
$str
ºº: q
)
ººq r
;
ººr s
}
ΩΩ 
}
ææ 
}
øø 
}
¿¿ 
catch
¡¡ 
(
¡¡ 
	Exception
¡¡ 
e
¡¡ 
)
¡¡ 
{
¬¬ 
throw
√√ 
new
√√ !
ControllerException
√√ -
(
√√- .
$str
√√. f
,
√√f g
e
√√h i
)
√√i j
;
√√j k
}
ƒƒ 
}
≈≈ 	
public
ÀÀ 

JsonResult
ÀÀ 1
#ObtenerConceptosNegociosComerciales
ÀÀ =
(
ÀÀ= >
int
ÀÀ> A
?
ÀÀA B
idConceptoBasico
ÀÀC S
,
ÀÀS T
int
ÀÀU X
?
ÀÀX Y
idCategoria
ÀÀZ e
,
ÀÀe f
int
ÀÀg j
[
ÀÀj k
]
ÀÀk l'
idValoresCaracteristicasÀÀm Ö
)ÀÀÖ Ü
{
ÃÃ 	
try
ÕÕ 
{
ŒŒ 
var
œœ 
	respuesta
œœ 
=
œœ 
_logicaConcepto
œœ  /
.
œœ/ 01
#ObtenerConceptosNegociosComerciales
œœ0 S
(
œœS T
idConceptoBasico
œœT d
,
œœd e
idCategoria
œœf q
,
œœq r'
idValoresCaracteristicasœœs ã
)œœã å
;œœå ç
var
–– 

jsonResult
–– 
=
––  
Json
––! %
(
––% &
	respuesta
––& /
,
––/ 0!
JsonRequestBehavior
––1 D
.
––D E
AllowGet
––E M
)
––M N
;
––N O

jsonResult
—— 
.
—— 
MaxJsonLength
—— (
=
——) *
int
——+ .
.
——. /
MaxValue
——/ 7
;
——7 8
return
““ 

jsonResult
““ !
;
““! "
}
”” 
catch
‘‘ 
(
‘‘ 
	Exception
‘‘ 
e
‘‘ 
)
‘‘ 
{
’’ 
return
÷÷ 
new
÷÷ "
JsonHttpStatusResult
÷÷ /
(
÷÷/ 0
Util
÷÷0 4
.
÷÷4 5
	ErrorJson
÷÷5 >
(
÷÷> ?
new
÷÷? B
	Exception
÷÷C L
(
÷÷L M
$str÷÷M Å
,÷÷Å Ç
e÷÷É Ñ
)÷÷Ñ Ö
)÷÷Ö Ü
,÷÷Ü á
HttpStatusCode÷÷à ñ
.÷÷ñ ó#
InternalServerError÷÷ó ™
)÷÷™ ´
;÷÷´ ¨
}
◊◊ 
}
ÿÿ 	
public
⁄⁄ 

JsonResult
⁄⁄ H
:ObtenerConceptosNegociosComercialesIncluyendoStockYPrecios
⁄⁄ T
(
⁄⁄T U
int
⁄⁄U X
	idAlmacen
⁄⁄Y b
,
⁄⁄b c
int
⁄⁄d g
?
⁄⁄g h
idConceptoBasico
⁄⁄i y
,
⁄⁄y z
int
⁄⁄{ ~
?
⁄⁄~ 
idCategoria⁄⁄Ä ã
,⁄⁄ã å
int⁄⁄ç ê
[⁄⁄ê ë
]⁄⁄ë í(
idValoresCaracteristicas⁄⁄ì ´
)⁄⁄´ ¨
{
€€ 	
try
‹‹ 
{
›› 
long
ﬁﬁ +
idTransaccionInventarioFisico
ﬁﬁ 2
=
ﬁﬁ3 4
ProfileData
ﬁﬁ5 @
(
ﬁﬁ@ A
)
ﬁﬁA B
.
ﬁﬁB C'
ObtenerIdInventarioActual
ﬁﬁC \
(
ﬁﬁ\ ]
	idAlmacen
ﬁﬁ] f
)
ﬁﬁf g
;
ﬁﬁg h
int
ﬂﬂ 0
"idCentroAtencionQueTieneLosPrecios
ﬂﬂ 6
=
ﬂﬂ7 8
ProfileData
ﬂﬂ9 D
(
ﬂﬂD E
)
ﬂﬂE F
.
ﬂﬂF G0
"IdCentroAtencionQueTieneLosPrecios
ﬂﬂG i
;
ﬂﬂi j
var
·· 
	respuesta
·· 
=
·· 
_logicaConcepto
··  /
.
··/ 0A
3ObtenerConceptosNegociosComercialesConStockYPrecios
··0 c
(
··c d,
idTransaccionInventarioFisico··d Å
,··Å Ç2
"idCentroAtencionQueTieneLosPrecios··É •
,··• ¶ 
idConceptoBasico··ß ∑
,··∑ ∏
idCategoria··π ƒ
,··ƒ ≈(
idValoresCaracteristicas··∆ ﬁ
)··ﬁ ﬂ
;··ﬂ ‡
var
‚‚ 

jsonResult
‚‚ 
=
‚‚  
Json
‚‚! %
(
‚‚% &
	respuesta
‚‚& /
,
‚‚/ 0!
JsonRequestBehavior
‚‚1 D
.
‚‚D E
AllowGet
‚‚E M
)
‚‚M N
;
‚‚N O

jsonResult
„„ 
.
„„ 
MaxJsonLength
„„ (
=
„„) *
int
„„+ .
.
„„. /
MaxValue
„„/ 7
;
„„7 8
return
‰‰ 

jsonResult
‰‰ !
;
‰‰! "
}
ÂÂ 
catch
ÊÊ 
(
ÊÊ 
	Exception
ÊÊ 
e
ÊÊ 
)
ÊÊ 
{
ÁÁ 
return
ËË 
new
ËË "
JsonHttpStatusResult
ËË /
(
ËË/ 0
Util
ËË0 4
.
ËË4 5
	ErrorJson
ËË5 >
(
ËË> ?
new
ËË? B
	Exception
ËËC L
(
ËËL M
$strËËM Å
,ËËÅ Ç
eËËÉ Ñ
)ËËÑ Ö
)ËËÖ Ü
,ËËÜ á
HttpStatusCodeËËà ñ
.ËËñ ó#
InternalServerErrorËËó ™
)ËË™ ´
;ËË´ ¨
}
ÈÈ 
}
ÍÍ 	
public
ÔÔ 

JsonResult
ÔÔ 3
%ObtenerConceptosDeNegociosComerciales
ÔÔ ?
(
ÔÔ? @
int
ÔÔ@ C&
modoSeleccionTipoFamilia
ÔÔD \
,
ÔÔ\ ]
int
ÔÔ^ a)
informacionSelectorConcepto
ÔÔb }
)
ÔÔ} ~
{
 	
try
ÒÒ 
{
ÚÚ 
List
ÛÛ 
<
ÛÛ 1
#Selector_Concepto_Negocio_Comercial
ÛÛ 8
>
ÛÛ8 9*
conceptosNegociosComerciales
ÛÛ: V
=
ÛÛW X
_logicaConcepto
ÛÛY h
.
ÛÛh i4
%ObtenerConceptosDeNegociosComercialesÛÛi é
(ÛÛé è(
modoSeleccionTipoFamiliaÛÛè ß
,ÛÛß ®+
informacionSelectorConceptoÛÛ© ƒ
,ÛÛƒ ≈
ProfileDataÛÛ∆ —
(ÛÛ— “
)ÛÛ“ ”
)ÛÛ” ‘
;ÛÛ‘ ’
var
ÙÙ 

jsonResult
ÙÙ 
=
ÙÙ  
Json
ÙÙ! %
(
ÙÙ% &*
conceptosNegociosComerciales
ÙÙ& B
,
ÙÙB C!
JsonRequestBehavior
ÙÙD W
.
ÙÙW X
AllowGet
ÙÙX `
)
ÙÙ` a
;
ÙÙa b

jsonResult
ıı 
.
ıı 
MaxJsonLength
ıı (
=
ıı) *
int
ıı+ .
.
ıı. /
MaxValue
ıı/ 7
;
ıı7 8
return
ˆˆ 

jsonResult
ˆˆ !
;
ˆˆ! "
}
˜˜ 
catch
¯¯ 
(
¯¯ 
	Exception
¯¯ 
e
¯¯ 
)
¯¯ 
{
˘˘ 
return
˙˙ 
new
˙˙ "
JsonHttpStatusResult
˙˙ /
(
˙˙/ 0
Util
˙˙0 4
.
˙˙4 5
	ErrorJson
˙˙5 >
(
˙˙> ?
new
˙˙? B
	Exception
˙˙C L
(
˙˙L M
$str˙˙M Ñ
,˙˙Ñ Ö
e˙˙Ü á
)˙˙á à
)˙˙à â
,˙˙â ä
HttpStatusCode˙˙ã ô
.˙˙ô ö#
InternalServerError˙˙ö ≠
)˙˙≠ Æ
;˙˙Æ Ø
}
˚˚ 
}
¸¸ 	
public
˝˝ 

JsonResult
˝˝ F
8ObtenerConceptosDeNegociosComercialesPorBusquedaConcepto
˝˝ R
(
˝˝R S
string
˝˝S Y
cadenaBusqueda
˝˝Z h
,
˝˝h i
int
˝˝j m'
modoSeleccionTipoFamilia˝˝n Ü
,˝˝Ü á
int˝˝à ã+
informacionSelectorConcepto˝˝å ß
)˝˝ß ®
{
˛˛ 	
try
ˇˇ 
{
ÄÄ 
List
ÅÅ 
<
ÅÅ 1
#Selector_Concepto_Negocio_Comercial
ÅÅ 8
>
ÅÅ8 9*
conceptosNegociosComerciales
ÅÅ: V
=
ÅÅW X
_logicaConcepto
ÅÅY h
.
ÅÅh iG
8ObtenerConceptosDeNegociosComercialesPorBusquedaConceptoÅÅi °
(ÅÅ° ¢
cadenaBusquedaÅÅ¢ ∞
,ÅÅ∞ ±(
modoSeleccionTipoFamiliaÅÅ≤  
,ÅÅ  À+
informacionSelectorConceptoÅÅÃ Á
,ÅÅÁ Ë
ProfileDataÅÅÈ Ù
(ÅÅÙ ı
)ÅÅı ˆ
)ÅÅˆ ˜
;ÅÅ˜ ¯
var
ÇÇ 

jsonResult
ÇÇ 
=
ÇÇ  
Json
ÇÇ! %
(
ÇÇ% &*
conceptosNegociosComerciales
ÇÇ& B
,
ÇÇB C!
JsonRequestBehavior
ÇÇD W
.
ÇÇW X
AllowGet
ÇÇX `
)
ÇÇ` a
;
ÇÇa b

jsonResult
ÉÉ 
.
ÉÉ 
MaxJsonLength
ÉÉ (
=
ÉÉ) *
int
ÉÉ+ .
.
ÉÉ. /
MaxValue
ÉÉ/ 7
;
ÉÉ7 8
return
ÑÑ 

jsonResult
ÑÑ !
;
ÑÑ! "
}
ÖÖ 
catch
ÜÜ 
(
ÜÜ 
	Exception
ÜÜ 
e
ÜÜ 
)
ÜÜ 
{
áá 
return
àà 
new
àà "
JsonHttpStatusResult
àà /
(
àà/ 0
Util
àà0 4
.
àà4 5
	ErrorJson
àà5 >
(
àà> ?
new
àà? B
	Exception
ààC L
(
ààL M
$strààM Ñ
,ààÑ Ö
eààÜ á
)ààá à
)ààà â
,ààâ ä
HttpStatusCodeààã ô
.ààô ö#
InternalServerErrorààö ≠
)àà≠ Æ
;ààÆ Ø
}
ââ 
}
ää 	
public
ãã 

JsonResult
ãã =
/ObtenerConceptosDeNegociosComercialesPorFamilia
ãã I
(
ããI J
int
ããJ M
	idFamilia
ããN W
,
ããW X
int
ããY \)
informacionSelectorConcepto
ãã] x
)
ããx y
{
åå 	
try
çç 
{
éé 
List
èè 
<
èè 1
#Selector_Concepto_Negocio_Comercial
èè 8
>
èè8 9*
conceptosNegociosComerciales
èè: V
=
èèW X
_logicaConcepto
èèY h
.
èèh i>
/ObtenerConceptosDeNegociosComercialesPorFamiliaèèi ò
(èèò ô
	idFamiliaèèô ¢
,èè¢ £+
informacionSelectorConceptoèè§ ø
,èèø ¿
ProfileDataèè¡ Ã
(èèÃ Õ
)èèÕ Œ
)èèŒ œ
;èèœ –
var
êê 

jsonResult
êê 
=
êê  
Json
êê! %
(
êê% &*
conceptosNegociosComerciales
êê& B
,
êêB C!
JsonRequestBehavior
êêD W
.
êêW X
AllowGet
êêX `
)
êê` a
;
êêa b

jsonResult
ëë 
.
ëë 
MaxJsonLength
ëë (
=
ëë) *
int
ëë+ .
.
ëë. /
MaxValue
ëë/ 7
;
ëë7 8
return
íí 

jsonResult
íí !
;
íí! "
}
ìì 
catch
îî 
(
îî 
	Exception
îî 
e
îî 
)
îî 
{
ïï 
return
ññ 
new
ññ "
JsonHttpStatusResult
ññ /
(
ññ/ 0
Util
ññ0 4
.
ññ4 5
	ErrorJson
ññ5 >
(
ññ> ?
new
ññ? B
	Exception
ññC L
(
ññL M
$strññM Ñ
,ññÑ Ö
eññÜ á
)ññá à
)ññà â
,ññâ ä
HttpStatusCodeññã ô
.ññô ö#
InternalServerErrorññö ≠
)ññ≠ Æ
;ññÆ Ø
}
óó 
}
òò 	
public
ôô 

JsonResult
ôô =
/ObtenerConceptoDeNegocioComercialPorCodigoBarra
ôô I
(
ôôI J
string
ôôJ P
codigoBarra
ôôQ \
,
ôô\ ]
bool
ôô^ b
complementoStock
ôôc s
,
ôôs t
bool
ôôu y 
complementoPrecioôôz ã
,ôôã å
intôôç ê(
modoSeleccionTipoFamiliaôôë ©
)ôô© ™
{
öö 	
try
õõ 
{
úú )
Concepto_Negocio_Comercial_
ùù +&
conceptoNegocioComercial
ùù, D
=
ùùE F
_logicaConcepto
ùùG V
.
ùùV W>
/ObtenerConceptoDeNegocioComercialPorCodigoBarraùùW Ü
(ùùÜ á
ProfileDataùùá í
(ùùí ì
)ùùì î
,ùùî ï
codigoBarraùùñ °
,ùù° ¢ 
complementoStockùù£ ≥
,ùù≥ ¥!
complementoPrecioùùµ ∆
,ùù∆ «(
modoSeleccionTipoFamiliaùù» ‡
)ùù‡ ·
;ùù· ‚
return
ûû 
Json
ûû 
(
ûû &
conceptoNegocioComercial
ûû 4
)
ûû4 5
;
ûû5 6
}
üü 
catch
†† 
(
†† "
AdvertenciaException
†† '
e
††( )
)
††) *
{
°° 
return
¢¢ 
new
¢¢ "
JsonHttpStatusResult
¢¢ /
(
¢¢/ 0
new
¢¢0 3
{
¢¢4 5
error
¢¢6 ;
=
¢¢< =
e
¢¢> ?
.
¢¢? @
Message
¢¢@ G
,
¢¢G H
warning
¢¢I P
=
¢¢Q R
true
¢¢S W
}
¢¢X Y
,
¢¢Y Z
HttpStatusCode
¢¢[ i
.
¢¢i j!
InternalServerError
¢¢j }
)
¢¢} ~
;
¢¢~ 
}
££ 
catch
§§ 
(
§§ 
	Exception
§§ 
e
§§ 
)
§§ 
{
•• 
return
¶¶ 
new
¶¶ "
JsonHttpStatusResult
¶¶ /
(
¶¶/ 0
Util
¶¶0 4
.
¶¶4 5
	ErrorJson
¶¶5 >
(
¶¶> ?
e
¶¶? @
)
¶¶@ A
,
¶¶A B
HttpStatusCode
¶¶C Q
.
¶¶Q R!
InternalServerError
¶¶R e
)
¶¶e f
;
¶¶f g
}
ßß 
}
®® 	
public
©© 

JsonResult
©© <
.ObtenerConceptoDeNegocioComercialPorIdConcepto
©© H
(
©©H I
int
©©I L
idConceptoNegocio
©©M ^
,
©©^ _
bool
©©` d
complementoStock
©©e u
,
©©u v
bool
©©w { 
complementoPrecio©©| ç
)©©ç é
{
™™ 	
try
´´ 
{
¨¨ )
Concepto_Negocio_Comercial_
≠≠ +&
conceptoNegocioComercial
≠≠, D
=
≠≠E F
_logicaConcepto
≠≠G V
.
≠≠V W=
.ObtenerConceptoDeNegocioComercialPorIdConcepto≠≠W Ö
(≠≠Ö Ü
ProfileData≠≠Ü ë
(≠≠ë í
)≠≠í ì
,≠≠ì î!
idConceptoNegocio≠≠ï ¶
,≠≠¶ ß 
complementoStock≠≠® ∏
,≠≠∏ π!
complementoPrecio≠≠∫ À
)≠≠À Ã
;≠≠Ã Õ
return
ÆÆ 
Json
ÆÆ 
(
ÆÆ &
conceptoNegocioComercial
ÆÆ 4
)
ÆÆ4 5
;
ÆÆ5 6
}
ØØ 
catch
∞∞ 
(
∞∞ "
AdvertenciaException
∞∞ '
e
∞∞( )
)
∞∞) *
{
±± 
return
≤≤ 
new
≤≤ "
JsonHttpStatusResult
≤≤ /
(
≤≤/ 0
new
≤≤0 3
{
≤≤4 5
error
≤≤6 ;
=
≤≤< =
e
≤≤> ?
.
≤≤? @
Message
≤≤@ G
,
≤≤G H
warning
≤≤I P
=
≤≤Q R
true
≤≤S W
}
≤≤X Y
,
≤≤Y Z
HttpStatusCode
≤≤[ i
.
≤≤i j!
InternalServerError
≤≤j }
)
≤≤} ~
;
≤≤~ 
}
≥≥ 
catch
¥¥ 
(
¥¥ 
	Exception
¥¥ 
e
¥¥ 
)
¥¥ 
{
µµ 
return
∂∂ 
new
∂∂ "
JsonHttpStatusResult
∂∂ /
(
∂∂/ 0
Util
∂∂0 4
.
∂∂4 5
	ErrorJson
∂∂5 >
(
∂∂> ?
e
∂∂? @
)
∂∂@ A
,
∂∂A B
HttpStatusCode
∂∂C Q
.
∂∂Q R!
InternalServerError
∂∂R e
)
∂∂e f
;
∂∂f g
}
∑∑ 
}
∏∏ 	
public
ππ 

JsonResult
ππ E
7ObtenerConceptosDeNegociosComercialesParaVentaPorNombre
ππ Q
(
ππQ R
string
ππR X
nombre
ππY _
)
ππ_ `
{
∫∫ 	
try
ªª 
{
ºº 
int
ΩΩ 0
"idCentroAtencionQueTieneLosPrecios
ΩΩ 6
=
ΩΩ7 8
ProfileData
ΩΩ9 D
(
ΩΩD E
)
ΩΩE F
.
ΩΩF G0
"IdCentroAtencionQueTieneLosPrecios
ΩΩG i
;
ΩΩi j
List
ææ 
<
ææ (
Concepto_Negocio_Comercial
ææ /
>
ææ/ 0*
conceptosNegociosComerciales
ææ1 M
=
ææN O
_logicaConcepto
ææP _
.
ææ_ `D
5ObtenerConceptosDeNegociosComercialParaVentaPorNombreææ` ï
(ææï ñ2
"idCentroAtencionQueTieneLosPreciosææñ ∏
,ææ∏ π
nombreææ∫ ¿
)ææ¿ ¡
;ææ¡ ¬
var
øø 4
&conceptosNegociosComercialesConFiltros
øø :
=
øø; <2
$ProductoParaVentaConFiltrosViewModel
øø= a
.
øøa b
Convert
øøb i
(
øøi j+
conceptosNegociosComercialesøøj Ü
)øøÜ á
;øøá à
return
¿¿ 4
&conceptosNegociosComercialesConFiltros
¿¿ =
.
¿¿= >*
ConceptosNegociosComerciales
¿¿> Z
.
¿¿Z [
Count
¿¿[ `
>
¿¿a b
$num
¿¿c d
?
¿¿e f
Json
¿¿g k
(
¿¿k l5
&conceptosNegociosComercialesConFiltros¿¿l í
)¿¿í ì
:¿¿î ï
Json¿¿ñ ö
(¿¿ö õ
new¿¿õ û
{¿¿ü †
data¿¿° •
=¿¿¶ ß
$num¿¿® ©
,¿¿© ™ 
data_description¿¿´ ª
=¿¿º Ω
$str¿¿æ ˘
}¿¿˙ ˚
)¿¿˚ ¸
;¿¿¸ ˝
}
¬¬ 
catch
√√ 
(
√√ 
	Exception
√√ 
e
√√ 
)
√√ 
{
ƒƒ 
return
≈≈ 
new
≈≈ "
JsonHttpStatusResult
≈≈ /
(
≈≈/ 0
Util
≈≈0 4
.
≈≈4 5
	ErrorJson
≈≈5 >
(
≈≈> ?
new
≈≈? B
	Exception
≈≈C L
(
≈≈L M
$str
≈≈M t
,
≈≈t u
e
≈≈v w
)
≈≈w x
)
≈≈x y
,
≈≈y z
HttpStatusCode≈≈{ â
.≈≈â ä#
InternalServerError≈≈ä ù
)≈≈ù û
;≈≈û ü
}
∆∆ 
}
«« 	
public
ÃÃ 

JsonResult
ÃÃ 
ObtenerConcepto
ÃÃ )
(
ÃÃ) *
int
ÃÃ* -

idConcepto
ÃÃ. 8
)
ÃÃ8 9
{
ÕÕ 	
try
ŒŒ 
{
œœ '
RegistroConceptoViewModel
—— )
concepto
——* 2
=
——3 4
new
——5 8'
RegistroConceptoViewModel
——9 R
(
——R S
_logicaConcepto
——S b
.
——b c*
ObtenerConceptoBasicoVigente
——c 
(—— Ä

idConcepto——Ä ä
)——ä ã
)——ã å
;——å ç
return
”” 
Json
”” 
(
”” 
concepto
”” $
)
””$ %
;
””% &
}
‘‘ 
catch
’’ 
(
’’ 
	Exception
’’ 
e
’’ 
)
’’ 
{
÷÷ 
return
◊◊ 
Json
◊◊ 
(
◊◊ 
Util
◊◊  
.
◊◊  !
	ErrorJson
◊◊! *
(
◊◊* +
e
◊◊+ ,
)
◊◊, -
)
◊◊- .
;
◊◊. /
}
ÿÿ 
}
ŸŸ 	
public
€€ 

JsonResult
€€ 
ObtenerConceptos
€€ *
(
€€* +
)
€€+ ,
{
‹‹ 	
try
›› 
{
ﬁﬁ 
List
ﬂﬂ 
<
ﬂﬂ 
Detalle_maestro
ﬂﬂ $
>
ﬂﬂ$ %

resultados
ﬂﬂ& 0
=
ﬂﬂ1 2
_logicaConcepto
ﬂﬂ3 B
.
ﬂﬂB CH
:ObtenerConceptosBasicosVigentesIncluyendoCategoriaConcepto
ﬂﬂC }
(
ﬂﬂ} ~
)
ﬂﬂ~ 
;ﬂﬂ Ä
List
‡‡ 
<
‡‡ &
BandejaConceptoViewModel
‡‡ -
>
‡‡- .
	conceptos
‡‡/ 8
=
‡‡9 :
new
‡‡; >
List
‡‡? C
<
‡‡C D&
BandejaConceptoViewModel
‡‡D \
>
‡‡\ ]
(
‡‡] ^
)
‡‡^ _
;
‡‡_ `
foreach
·· 
(
·· 
var
·· 
item
·· !
in
··" $

resultados
··% /
)
··/ 0
{
‚‚ 
	conceptos
„„ 
.
„„ 
Add
„„ !
(
„„! "
new
„„" %&
BandejaConceptoViewModel
„„& >
(
„„> ?
item
„„? C
)
„„C D
)
„„D E
;
„„E F
}
‰‰ 
return
ÂÂ 
Json
ÂÂ 
(
ÂÂ 
	conceptos
ÂÂ %
)
ÂÂ% &
;
ÂÂ& '
}
ÊÊ 
catch
ÁÁ 
(
ÁÁ 
	Exception
ÁÁ 
e
ÁÁ 
)
ÁÁ 
{
ËË 
return
ÈÈ 
Json
ÈÈ 
(
ÈÈ 
Util
ÈÈ  
.
ÈÈ  !
	ErrorJson
ÈÈ! *
(
ÈÈ* +
e
ÈÈ+ ,
)
ÈÈ, -
)
ÈÈ- .
;
ÈÈ. /
}
ÍÍ 
}
ÎÎ 	
public
ÏÏ 

JsonResult
ÏÏ 
ObtenerFamilias
ÏÏ )
(
ÏÏ) *
)
ÏÏ* +
{
ÌÌ 	
try
ÓÓ 
{
ÔÔ 
List
 
<
 
Detalle_maestro
 $
>
$ %

resultados
& 0
=
1 2
_logicaConcepto
3 B
.
B C$
ObtenerTodosLasFamilia
C Y
(
Y Z
)
Z [
;
[ \
List
ÒÒ 
<
ÒÒ &
BandejaConceptoViewModel
ÒÒ -
>
ÒÒ- .
	conceptos
ÒÒ/ 8
=
ÒÒ9 :
new
ÒÒ; >
List
ÒÒ? C
<
ÒÒC D&
BandejaConceptoViewModel
ÒÒD \
>
ÒÒ\ ]
(
ÒÒ] ^
)
ÒÒ^ _
;
ÒÒ_ `
foreach
ÚÚ 
(
ÚÚ 
var
ÚÚ 
item
ÚÚ !
in
ÚÚ" $

resultados
ÚÚ% /
)
ÚÚ/ 0
{
ÛÛ 
	conceptos
ÙÙ 
.
ÙÙ 
Add
ÙÙ !
(
ÙÙ! "
new
ÙÙ" %&
BandejaConceptoViewModel
ÙÙ& >
(
ÙÙ> ?
item
ÙÙ? C
)
ÙÙC D
)
ÙÙD E
;
ÙÙE F
}
ıı 
return
ˆˆ 
Json
ˆˆ 
(
ˆˆ 
	conceptos
ˆˆ %
)
ˆˆ% &
;
ˆˆ& '
}
˜˜ 
catch
¯¯ 
(
¯¯ 
	Exception
¯¯ 
e
¯¯ 
)
¯¯ 
{
˘˘ 
return
˙˙ 
Json
˙˙ 
(
˙˙ 
Util
˙˙  
.
˙˙  !
	ErrorJson
˙˙! *
(
˙˙* +
e
˙˙+ ,
)
˙˙, -
)
˙˙- .
;
˙˙. /
}
˚˚ 
}
¸¸ 	
public
˛˛ 

JsonResult
˛˛ >
0ObtenerConceptosBasicosIncluyendoCaracteristicas
˛˛ J
(
˛˛J K
)
˛˛K L
{
ˇˇ 	
try
ÄÄ 
{
ÅÅ 
List
ÇÇ 
<
ÇÇ 
Concepto_Basico
ÇÇ $
>
ÇÇ$ %

resultados
ÇÇ& 0
=
ÇÇ1 2
_logicaConcepto
ÇÇ3 B
.
ÇÇB CG
9ObtenerConceptosaBasicosVigentesIncluyendoCaracteristicas
ÇÇC |
(
ÇÇ| }
)
ÇÇ} ~
;
ÇÇ~ 
return
ÉÉ 
Json
ÉÉ 
(
ÉÉ 

resultados
ÉÉ &
)
ÉÉ& '
;
ÉÉ' (
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ 
	Exception
ÖÖ 
e
ÖÖ 
)
ÖÖ 
{
ÜÜ 
return
áá 
Json
áá 
(
áá 
Util
áá  
.
áá  !
	ErrorJson
áá! *
(
áá* +
e
áá+ ,
)
áá, -
)
áá- .
;
áá. /
}
àà 
}
ââ 	
public
ãã 

JsonResult
ãã 
GuardarConcepto
ãã )
(
ãã) *'
RegistroConceptoViewModel
ãã* C
concepto
ããD L
)
ããL M
{
åå 	
try
çç 
{
éé 
OperationResult
êê 
	resultado
êê  )
;
êê) *
int
ëë 
[
ëë 
]
ëë 
idsCategorias
ëë #
=
ëë$ %
concepto
ëë& .
.
ëë. /

Categorias
ëë/ 9
!=
ëë: <
null
ëë= A
?
ëëB C
concepto
ëëD L
.
ëëL M

Categorias
ëëM W
.
ëëW X
Select
ëëX ^
(
ëë^ _
c
ëë_ `
=>
ëëa c
c
ëëd e
.
ëëe f
Id
ëëf h
)
ëëh i
.
ëëi j
ToArray
ëëj q
(
ëëq r
)
ëër s
:
ëët u
new
ëëv y
int
ëëz }
[
ëë} ~
]
ëë~ 
{ëëÄ Å
}ëëÇ É
;ëëÉ Ñ
int
íí 
[
íí 
]
íí  
idsCaracteristicas
íí (
=
íí) *
concepto
íí+ 3
.
íí3 4
Caracteristicas
íí4 C
!=
ííD F
null
ííG K
?
ííL M
concepto
ííN V
.
ííV W
Caracteristicas
ííW f
.
ííf g
Select
ííg m
(
íím n
c
íín o
=>
ííp r
c
íís t
.
íít u
Id
ííu w
)
ííw x
.
ííx y
ToArrayííy Ä
(ííÄ Å
)ííÅ Ç
:ííÉ Ñ
newííÖ à
intííâ å
[ííå ç
]ííç é
{ííè ê
}ííë í
;ííí ì
if
îî 
(
îî 
concepto
îî 
.
îî 

IdConcepto
îî '
!=
îî( *
$num
îî+ ,
)
îî, -
{
ïï 
	resultado
ññ 
=
ññ 
_logicaConcepto
ññ  /
.
ññ/ 0
ActualizarFamilia
ññ0 A
(
ññA B
concepto
ññB J
.
ññJ K

IdConcepto
ññK U
,
ññU V
concepto
ññW _
.
ññ_ `
Nombre
ññ` f
,
ññf g
concepto
ññh p
.
ññp q
Valor
ññq v
,
ññv w
idsCategoriasññx Ö
,ññÖ Ü"
idsCaracteristicasññá ô
)ññô ö
;ññö õ
}
óó 
else
òò 
{
ôô 
	resultado
öö 
=
öö 
_logicaConcepto
öö  /
.
öö/ 0#
GuardarConceptoBasico
öö0 E
(
ööE F
concepto
ööF N
.
ööN O
Nombre
ööO U
,
ööU V
concepto
ööW _
.
öö_ `
Valor
öö` e
,
ööe f
idsCategorias
öög t
,
ööt u!
idsCaracteristicasööv à
)ööà â
;ööâ ä
}
õõ 
Util
úú 
.
úú (
ManageIfResultIsNotSuccess
úú /
(
úú/ 0
	resultado
úú0 9
,
úú9 :
$str
úú; =
)
úú= >
;
úú> ?
return
ùù 
Json
ùù 
(
ùù 
new
ùù 
{
ùù  !
	resultado
ùù" +
.
ùù+ ,
code_result
ùù, 7
,
ùù7 8
	resultado
ùù9 B
.
ùùB C
data
ùùC G
,
ùùG H 
result_description
ùùI [
=
ùù\ ]
	resultado
ùù^ g
.
ùùg h
title
ùùh m
}
ùùn o
)
ùùo p
;
ùùp q
}
ûû 
catch
üü 
(
üü 
	Exception
üü 
e
üü 
)
üü 
{
†† 
HttpContext
°° 
.
°° 
Response
°° $
.
°°$ %

StatusCode
°°% /
=
°°0 1
$num
°°2 5
;
°°5 6
return
¢¢ 
Json
¢¢ 
(
¢¢ 
Util
¢¢  
.
¢¢  !
	ErrorJson
¢¢! *
(
¢¢* +
e
¢¢+ ,
)
¢¢, -
)
¢¢- .
;
¢¢. /
}
££ 
}
§§ 	
public
¶¶ 

JsonResult
¶¶ $
CambioEsVigenteFamilia
¶¶ 0
(
¶¶0 1
int
¶¶1 4

idConcepto
¶¶5 ?
,
¶¶? @
bool
¶¶A E
	esVigente
¶¶F O
)
¶¶O P
{
ßß 	
try
®® 
{
©© 
OperationResult
™™ 
result
™™  &
=
™™' (
_logicaConcepto
™™) 8
.
™™8 9%
CambiarEsVigenteFamilia
™™9 P
(
™™P Q

idConcepto
™™Q [
,
™™[ \
	esVigente
™™] f
)
™™f g
;
™™g h
Util
´´ 
.
´´ 
VerificarError
´´ #
(
´´# $
result
´´$ *
)
´´* +
;
´´+ ,
return
¨¨ 
Json
¨¨ 
(
¨¨ 
new
¨¨ 
{
¨¨  !
code_result
¨¨" -
=
¨¨. /
result
¨¨0 6
.
¨¨6 7
code_result
¨¨7 B
,
¨¨B C
data
¨¨D H
=
¨¨I J
result
¨¨K Q
.
¨¨Q R
data
¨¨R V
,
¨¨V W 
result_description
¨¨X j
=
¨¨k l
result
¨¨m s
.
¨¨s t
title
¨¨t y
}
¨¨z {
)
¨¨{ |
;
¨¨| }
}
≠≠ 
catch
ÆÆ 
(
ÆÆ 
	Exception
ÆÆ 
e
ÆÆ 
)
ÆÆ 
{
ØØ 
HttpContext
∞∞ 
.
∞∞ 
Response
∞∞ $
.
∞∞$ %

StatusCode
∞∞% /
=
∞∞0 1
$num
∞∞2 5
;
∞∞5 6
return
±± 
Json
±± 
(
±± 
Util
±±  
.
±±  !
	ErrorJson
±±! *
(
±±* +
e
±±+ ,
)
±±, -
)
±±- .
;
±±. /
}
≤≤ 
}
≥≥ 	
public
∫∫ 

JsonResult
∫∫ 
GuardarCategoria
∫∫ *
(
∫∫* +%
DetalleMaestroViewModel
∫∫+ B
	categoria
∫∫C L
)
∫∫L M
{
ªª 	
try
ºº 
{
ΩΩ 
OperationResult
ææ 
	resultado
ææ  )
;
ææ) *
if
øø 
(
øø 
	categoria
øø 
.
øø 
Id
øø  
!=
øø! #
$num
øø$ %
)
øø% &
{
¿¿ 
	resultado
¡¡ 
=
¡¡ 
_logicaMaestro
¡¡  .
.
¡¡. /-
ActualizarDetalleDetalleMaestro
¡¡/ N
(
¡¡N O
	categoria
¡¡O X
.
¡¡X Y
Id
¡¡Y [
,
¡¡[ \
MaestroSettings
¡¡] l
.
¡¡l m
Default
¡¡m t
.
¡¡t u)
IdMaestroCategoriaConcepto¡¡u è
,¡¡è ê
	categoria¡¡ë ö
.¡¡ö õ
Nombre¡¡õ °
,¡¡° ¢
	categoria¡¡£ ¨
.¡¡¨ ≠
Nombre¡¡≠ ≥
,¡¡≥ ¥
	categoria¡¡µ æ
.¡¡æ ø
Valor¡¡ø ƒ
,¡¡ƒ ≈
	categoria¡¡∆ œ
.¡¡œ –#
DetalleMaestroPadre¡¡– „
.¡¡„ ‰
Id¡¡‰ Ê
)¡¡Ê Á
;¡¡Á Ë
}
¬¬ 
else
√√ 
{
ƒƒ 
	resultado
≈≈ 
=
≈≈ 
_logicaMaestro
≈≈  .
.
≈≈. /*
GuardarDetalleDetalleMaestro
≈≈/ K
(
≈≈K L
MaestroSettings
≈≈L [
.
≈≈[ \
Default
≈≈\ c
.
≈≈c d(
IdMaestroCategoriaConcepto
≈≈d ~
,
≈≈~ 
	categoria≈≈Ä â
.≈≈â ä
Nombre≈≈ä ê
,≈≈ê ë
	categoria≈≈í õ
.≈≈õ ú
Nombre≈≈ú ¢
,≈≈¢ £
	categoria≈≈§ ≠
.≈≈≠ Æ
Valor≈≈Æ ≥
,≈≈≥ ¥
	categoria≈≈µ æ
.≈≈æ ø#
DetalleMaestroPadre≈≈ø “
.≈≈“ ”
Id≈≈” ’
)≈≈’ ÷
;≈≈÷ ◊
}
∆∆ 
Util
«« 
.
«« 
VerificarError
«« #
(
««# $
	resultado
««$ -
)
««- .
;
««. /
return
»» 
Json
»» 
(
»» 
new
»» 
{
»»  !
code_result
»»" -
=
»». /
	resultado
»»0 9
.
»»9 :
code_result
»»: E
,
»»E F
data
»»G K
=
»»L M
	resultado
»»N W
.
»»W X
data
»»X \
,
»»\ ] 
result_description
»»^ p
=
»»q r
	resultado
»»s |
.
»»| }
title»»} Ç
}»»É Ñ
)»»Ñ Ö
;»»Ö Ü
}
…… 
catch
   
(
   
	Exception
   
e
   
)
   
{
ÀÀ 
HttpContext
ÃÃ 
.
ÃÃ 
Response
ÃÃ $
.
ÃÃ$ %

StatusCode
ÃÃ% /
=
ÃÃ0 1
$num
ÃÃ2 5
;
ÃÃ5 6
return
ÕÕ 
Json
ÕÕ 
(
ÕÕ 
Util
ÕÕ  
.
ÕÕ  !
	ErrorJson
ÕÕ! *
(
ÕÕ* +
e
ÕÕ+ ,
)
ÕÕ, -
)
ÕÕ- .
;
ÕÕ. /
}
ŒŒ 
}
œœ 	
public
—— 
async
—— 
Task
—— 
<
—— 

JsonResult
—— $
>
——$ %
ObtenerCategorias
——& 7
(
——7 8
)
——8 9
{
““ 	
try
”” 
{
‘‘ 
List
’’ 
<
’’ 
Detalle_maestro
’’ $
>
’’$ %
detalles
’’& .
=
’’/ 0
await
’’1 6
_logicaMaestro
’’7 E
.
’’E F
ObtenerCategorias
’’F W
(
’’W X
)
’’X Y
;
’’Y Z
List
÷÷ 
<
÷÷ %
DetalleMaestroViewModel
÷÷ ,
>
÷÷, -

categorias
÷÷. 8
=
÷÷9 :%
DetalleMaestroViewModel
÷÷; R
.
÷÷R S6
(ConvertirCategoriasDetalleDetalleMaestro
÷÷S {
(
÷÷{ |
detalles÷÷| Ñ
)÷÷Ñ Ö
;÷÷Ö Ü
return
◊◊ 
Json
◊◊ 
(
◊◊ 

categorias
◊◊ &
)
◊◊& '
;
◊◊' (
}
ÿÿ 
catch
ŸŸ 
(
ŸŸ 
	Exception
ŸŸ 
e
ŸŸ 
)
ŸŸ 
{
⁄⁄ 
return
€€ 
Json
€€ 
(
€€ 
Util
€€  
.
€€  !
	ErrorJson
€€! *
(
€€* +
e
€€+ ,
)
€€, -
)
€€- .
;
€€. /
}
‹‹ 
}
›› 	
public
„„ 

JsonResult
„„ #
GuardarCaracteristica
„„ /
(
„„/ 0-
CaracteristicaConceptoViewModel
„„0 O
caracteristica
„„P ^
)
„„^ _
{
‰‰ 	
try
ÂÂ 
{
ÊÊ 
OperationResult
ÁÁ 
	resultado
ÁÁ  )
;
ÁÁ) *
int
ËË %
idMaestroCaracteristica
ËË +
=
ËË, -
caracteristica
ËË. <
.
ËË< =
EsComun
ËË= D
?
ËËE F
MaestroSettings
ËËG V
.
ËËV W
Default
ËËW ^
.
ËË^ _-
IdMaestroCaracteristicaConcepto
ËË_ ~
:ËË Ä
MaestroSettingsËËÅ ê
.ËËê ë
DefaultËËë ò
.ËËò ô5
%IdMaestroCaracteristicaPropiaConceptoËËô æ
;ËËæ ø
_logicaMaestro
ÍÍ 
.
ÍÍ 7
)ComprobarSiYaExisteNombreDeDetalleMaestro
ÍÍ H
(
ÍÍH I%
idMaestroCaracteristica
ÍÍI `
,
ÍÍ` a
caracteristica
ÍÍb p
.
ÍÍp q
Id
ÍÍq s
,
ÍÍs t
caracteristicaÍÍu É
.ÍÍÉ Ñ
NombreÍÍÑ ä
)ÍÍä ã
;ÍÍã å
List
ÎÎ 
<
ÎÎ "
Valor_caracteristica
ÎÎ )
>
ÎÎ) *
valores
ÎÎ+ 2
=
ÎÎ3 4
new
ÎÎ5 8
List
ÎÎ9 =
<
ÎÎ= >"
Valor_caracteristica
ÎÎ> R
>
ÎÎR S
(
ÎÎS T
)
ÎÎT U
;
ÎÎU V
if
ÏÏ 
(
ÏÏ 
caracteristica
ÏÏ "
.
ÏÏ" #
Valores
ÏÏ# *
!=
ÏÏ+ -
null
ÏÏ. 2
&&
ÏÏ3 5
caracteristica
ÏÏ6 D
.
ÏÏD E
EsComun
ÏÏE L
)
ÏÏL M
{
ÌÌ 
foreach
ÓÓ 
(
ÓÓ 
var
ÓÓ  
item
ÓÓ! %
in
ÓÓ& (
caracteristica
ÓÓ) 7
.
ÓÓ7 8
Valores
ÓÓ8 ?
)
ÓÓ? @
{
ÔÔ 
if
 
(
 
item
  
.
  !
Id
! #
!=
$ &
$num
' (
)
( )
{
ÒÒ 
valores
ÚÚ #
.
ÚÚ# $
Add
ÚÚ$ '
(
ÚÚ' (
new
ÚÚ( +"
Valor_caracteristica
ÚÚ, @
(
ÚÚ@ A
)
ÚÚA B
{
ÚÚC D
id
ÚÚE G
=
ÚÚH I
item
ÚÚJ N
.
ÚÚN O
Id
ÚÚO Q
,
ÚÚQ R
id_caracteristica
ÚÚS d
=
ÚÚe f
caracteristica
ÚÚg u
.
ÚÚu v
Id
ÚÚv x
,
ÚÚx y
valor
ÚÚz 
=ÚÚÄ Å
itemÚÚÇ Ü
.ÚÚÜ á
NombreÚÚá ç
}ÚÚé è
)ÚÚè ê
;ÚÚê ë
}
ÛÛ 
else
ÙÙ 
{
ıı 
valores
ˆˆ #
.
ˆˆ# $
Add
ˆˆ$ '
(
ˆˆ' (
new
ˆˆ( +"
Valor_caracteristica
ˆˆ, @
(
ˆˆ@ A
)
ˆˆA B
{
ˆˆC D
id_caracteristica
ˆˆE V
=
ˆˆW X
caracteristica
ˆˆY g
.
ˆˆg h
Id
ˆˆh j
,
ˆˆj k
valor
ˆˆl q
=
ˆˆr s
item
ˆˆt x
.
ˆˆx y
Nombre
ˆˆy 
}ˆˆÄ Å
)ˆˆÅ Ç
;ˆˆÇ É
}
˜˜ 
}
¯¯ 
}
˘˘ 
if
˙˙ 
(
˙˙ 
caracteristica
˙˙ "
.
˙˙" #
Id
˙˙# %
!=
˙˙& (
$num
˙˙) *
)
˙˙* +
{
˚˚ 
	resultado
¸¸ 
=
¸¸ 
_logicaConcepto
¸¸  /
.
¸¸/ 0&
ActualizarCaracteristica
¸¸0 H
(
¸¸H I
caracteristica
¸¸I W
.
¸¸W X
Id
¸¸X Z
,
¸¸Z [%
idMaestroCaracteristica
¸¸\ s
,
¸¸s t
caracteristica¸¸u É
.¸¸É Ñ
Nombre¸¸Ñ ä
,¸¸ä ã
caracteristica¸¸å ö
.¸¸ö õ
Nombre¸¸õ °
,¸¸° ¢
caracteristica¸¸£ ±
.¸¸± ≤
Descripcion¸¸≤ Ω
,¸¸Ω æ
valores¸¸ø ∆
,¸¸∆ «
caracteristica¸¸» ÷
.¸¸÷ ◊
	EsVigente¸¸◊ ‡
)¸¸‡ ·
;¸¸· ‚
}
˝˝ 
else
˛˛ 
{
ˇˇ 
	resultado
ÄÄ 
=
ÄÄ 
_logicaConcepto
ÄÄ  /
.
ÄÄ/ 0#
GuardarCarcateristica
ÄÄ0 E
(
ÄÄE F%
idMaestroCaracteristica
ÄÄF ]
,
ÄÄ] ^
caracteristica
ÄÄ_ m
.
ÄÄm n
Nombre
ÄÄn t
,
ÄÄt u
caracteristicaÄÄv Ñ
.ÄÄÑ Ö
NombreÄÄÖ ã
,ÄÄã å
caracteristicaÄÄç õ
.ÄÄõ ú
DescripcionÄÄú ß
,ÄÄß ®
valoresÄÄ© ∞
)ÄÄ∞ ±
;ÄÄ± ≤
}
ÅÅ 
Util
ÇÇ 
.
ÇÇ 
VerificarError
ÇÇ #
(
ÇÇ# $
	resultado
ÇÇ$ -
)
ÇÇ- .
;
ÇÇ. /
return
ÉÉ 
Json
ÉÉ 
(
ÉÉ 
new
ÉÉ 
{
ÉÉ  !
code_result
ÉÉ" -
=
ÉÉ. /
	resultado
ÉÉ0 9
.
ÉÉ9 :
code_result
ÉÉ: E
,
ÉÉE F
data
ÉÉG K
=
ÉÉL M
	resultado
ÉÉN W
.
ÉÉW X
data
ÉÉX \
,
ÉÉ\ ] 
result_description
ÉÉ^ p
=
ÉÉq r
	resultado
ÉÉs |
.
ÉÉ| }
titleÉÉ} Ç
}ÉÉÉ Ñ
)ÉÉÑ Ö
;ÉÉÖ Ü
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ 
	Exception
ÖÖ 
e
ÖÖ 
)
ÖÖ 
{
ÜÜ 
HttpContext
áá 
.
áá 
Response
áá $
.
áá$ %

StatusCode
áá% /
=
áá0 1
$num
áá2 5
;
áá5 6
return
àà 
Json
àà 
(
àà 
Util
àà  
.
àà  !
	ErrorJson
àà! *
(
àà* +
e
àà+ ,
)
àà, -
)
àà- .
;
àà. /
}
ââ 
}
ää 	
public
åå 

JsonResult
åå +
CambioEsVigenteCaracteristica
åå 7
(
åå7 8-
CaracteristicaConceptoViewModel
åå8 W
caracteristica
ååX f
)
ååf g
{
çç 	
try
éé 
{
èè 
OperationResult
êê 
	resultado
êê  )
;
êê) *
int
ëë %
idMaestroCaracteristica
ëë +
=
ëë, -
caracteristica
ëë. <
.
ëë< =
EsComun
ëë= D
?
ëëE F
MaestroSettings
ëëG V
.
ëëV W
Default
ëëW ^
.
ëë^ _-
IdMaestroCaracteristicaConcepto
ëë_ ~
:ëë Ä
MaestroSettingsëëÅ ê
.ëëê ë
Defaultëëë ò
.ëëò ô5
%IdMaestroCaracteristicaPropiaConceptoëëô æ
;ëëæ ø
List
íí 
<
íí "
Valor_caracteristica
íí )
>
íí) *
valores
íí+ 2
=
íí3 4
new
íí5 8
List
íí9 =
<
íí= >"
Valor_caracteristica
íí> R
>
ííR S
(
ííS T
)
ííT U
;
ííU V
if
ìì 
(
ìì 
caracteristica
ìì "
.
ìì" #
Valores
ìì# *
!=
ìì+ -
null
ìì. 2
&&
ìì3 5
caracteristica
ìì6 D
.
ììD E
EsComun
ììE L
)
ììL M
{
îî 
foreach
ïï 
(
ïï 
var
ïï  
item
ïï! %
in
ïï& (
caracteristica
ïï) 7
.
ïï7 8
Valores
ïï8 ?
)
ïï? @
{
ññ 
if
óó 
(
óó 
item
óó  
.
óó  !
Id
óó! #
!=
óó$ &
$num
óó' (
)
óó( )
{
òò 
valores
ôô #
.
ôô# $
Add
ôô$ '
(
ôô' (
new
ôô( +"
Valor_caracteristica
ôô, @
(
ôô@ A
)
ôôA B
{
ôôC D
id
ôôE G
=
ôôH I
item
ôôJ N
.
ôôN O
Id
ôôO Q
,
ôôQ R
id_caracteristica
ôôS d
=
ôôe f
caracteristica
ôôg u
.
ôôu v
Id
ôôv x
,
ôôx y
valor
ôôz 
=ôôÄ Å
itemôôÇ Ü
.ôôÜ á
Nombreôôá ç
}ôôé è
)ôôè ê
;ôôê ë
}
öö 
else
õõ 
{
úú 
valores
ùù #
.
ùù# $
Add
ùù$ '
(
ùù' (
new
ùù( +"
Valor_caracteristica
ùù, @
(
ùù@ A
)
ùùA B
{
ùùC D
id_caracteristica
ùùE V
=
ùùW X
caracteristica
ùùY g
.
ùùg h
Id
ùùh j
,
ùùj k
valor
ùùl q
=
ùùr s
item
ùùt x
.
ùùx y
Nombre
ùùy 
}ùùÄ Å
)ùùÅ Ç
;ùùÇ É
}
ûû 
}
üü 
}
†† 
caracteristica
°° 
.
°° 
	EsVigente
°° (
=
°°) *
!
°°+ ,
caracteristica
°°, :
.
°°: ;
	EsVigente
°°; D
;
°°D E
if
¢¢ 
(
¢¢ 
!
¢¢ 
caracteristica
¢¢ #
.
¢¢# $
	EsVigente
¢¢$ -
)
¢¢- .
{
££ 
if
§§ 
(
§§ 
_logicaConcepto
§§ '
.
§§' (5
'ExisteCaracteristicaEnConceptosVigentes
§§( O
(
§§O P
caracteristica
§§P ^
.
§§^ _
Id
§§_ a
)
§§a b
)
§§b c
{
•• 
throw
¶¶ 
new
¶¶ !!
ControllerException
¶¶" 5
(
¶¶5 6
$str¶¶6 ß
)¶¶ß ®
;¶¶® ©
}
ßß 
if
®® 
(
®® 
_logicaConcepto
®® '
.
®®' (4
&ExisteCaracteristicaEnFamiliasVigentes
®®( N
(
®®N O
caracteristica
®®O ]
.
®®] ^
Id
®®^ `
)
®®` a
)
®®a b
{
©© 
throw
™™ 
new
™™ !!
ControllerException
™™" 5
(
™™5 6
$str™™6 õ
)™™õ ú
;™™ú ù
}
´´ 
}
¨¨ 
	resultado
≠≠ 
=
≠≠ 
_logicaConcepto
≠≠ +
.
≠≠+ ,&
ActualizarCaracteristica
≠≠, D
(
≠≠D E
caracteristica
≠≠E S
.
≠≠S T
Id
≠≠T V
,
≠≠V W%
idMaestroCaracteristica
≠≠X o
,
≠≠o p
caracteristica
≠≠q 
.≠≠ Ä
Nombre≠≠Ä Ü
,≠≠Ü á
caracteristica≠≠à ñ
.≠≠ñ ó
Nombre≠≠ó ù
,≠≠ù û
caracteristica≠≠ü ≠
.≠≠≠ Æ
Descripcion≠≠Æ π
,≠≠π ∫
valores≠≠ª ¬
,≠≠¬ √
caracteristica≠≠ƒ “
.≠≠“ ”
	EsVigente≠≠” ‹
)≠≠‹ ›
;≠≠› ﬁ
Util
ÆÆ 
.
ÆÆ 
VerificarError
ÆÆ #
(
ÆÆ# $
	resultado
ÆÆ$ -
)
ÆÆ- .
;
ÆÆ. /
return
ØØ 
Json
ØØ 
(
ØØ 
new
ØØ 
{
ØØ  !
	resultado
ØØ" +
.
ØØ+ ,
code_result
ØØ, 7
,
ØØ7 8
	resultado
ØØ9 B
.
ØØB C
data
ØØC G
,
ØØG H 
result_description
ØØI [
=
ØØ\ ]
	resultado
ØØ^ g
.
ØØg h
title
ØØh m
}
ØØn o
)
ØØo p
;
ØØp q
}
∞∞ 
catch
±± 
(
±± 
	Exception
±± 
e
±± 
)
±± 
{
≤≤ 
return
≥≥ 
new
≥≥ "
JsonHttpStatusResult
≥≥ /
(
≥≥/ 0
Util
≥≥0 4
.
≥≥4 5
	ErrorJson
≥≥5 >
(
≥≥> ?
e
≥≥? @
)
≥≥@ A
,
≥≥A B
HttpStatusCode
≥≥C Q
.
≥≥Q R!
InternalServerError
≥≥R e
)
≥≥e f
;
≥≥f g
}
¥¥ 
}
µµ 	
public
∂∂ 

JsonResult
∂∂ +
ObtenerBandejaCaracteristicas
∂∂ 7
(
∂∂7 8
)
∂∂8 9
{
∑∑ 	
try
∏∏ 
{
ππ 
List
∫∫ 
<
∫∫ 
Detalle_maestro
∫∫ $
>
∫∫$ %
detalles
∫∫& .
=
∫∫/ 0
_logicaConcepto
∫∫1 @
.
∫∫@ A5
'ObtenerCaracteristicasIncluyendoValores
∫∫A h
(
∫∫h i
)
∫∫i j
;
∫∫j k
List
ªª 
<
ªª -
CaracteristicaConceptoViewModel
ªª 4
>
ªª4 5
caracteristicas
ªª6 E
=
ªªF G-
CaracteristicaConceptoViewModel
ªªH g
.
ªªg h
Convert
ªªh o
(
ªªo p
detalles
ªªp x
)
ªªx y
;
ªªy z
return
ºº 
Json
ºº 
(
ºº 
caracteristicas
ºº +
)
ºº+ ,
;
ºº, -
}
ΩΩ 
catch
ææ 
(
ææ 
	Exception
ææ 
e
ææ 
)
ææ 
{
øø 
return
¿¿ 
Json
¿¿ 
(
¿¿ 
Util
¿¿  
.
¿¿  !
	ErrorJson
¿¿! *
(
¿¿* +
e
¿¿+ ,
)
¿¿, -
)
¿¿- .
;
¿¿. /
}
¡¡ 
}
¬¬ 	
public
ƒƒ 

JsonResult
ƒƒ $
ObtenerCaracteristicas
ƒƒ 0
(
ƒƒ0 1
)
ƒƒ1 2
{
≈≈ 	
try
∆∆ 
{
«« 
List
»» 
<
»» 
Detalle_maestro
»» $
>
»»$ %
detalles
»»& .
=
»»/ 0
_logicaConcepto
»»1 @
.
»»@ A=
/ObtenerCaracteristicasVigentesIncluyendoValores
»»A p
(
»»p q
)
»»q r
;
»»r s
List
…… 
<
…… -
CaracteristicaConceptoViewModel
…… 4
>
……4 5
caracteristicas
……6 E
=
……F G-
CaracteristicaConceptoViewModel
……H g
.
……g h
Convert
……h o
(
……o p
detalles
……p x
)
……x y
;
……y z
return
   
Json
   
(
   
caracteristicas
   +
)
  + ,
;
  , -
}
ÀÀ 
catch
ÃÃ 
(
ÃÃ 
	Exception
ÃÃ 
e
ÃÃ 
)
ÃÃ 
{
ÕÕ 
return
ŒŒ 
Json
ŒŒ 
(
ŒŒ 
Util
ŒŒ  
.
ŒŒ  !
	ErrorJson
ŒŒ! *
(
ŒŒ* +
e
ŒŒ+ ,
)
ŒŒ, -
)
ŒŒ- .
;
ŒŒ. /
}
œœ 
}
–– 	
public
““ 

JsonResult
““ .
 ObtenerCaracteristicasPorFamilia
““ :
(
““: ;
int
““; >
	idFamilia
““? H
)
““H I
{
”” 	
try
‘‘ 
{
’’ 
var
÷÷ 
caracteristicas
÷÷ #
=
÷÷$ %
_logicaConcepto
÷÷& 5
.
÷÷5 66
(ObtenerCaracteristicasVigentesPorFamilia
÷÷6 ^
(
÷÷^ _
	idFamilia
÷÷_ h
)
÷÷h i
;
÷÷i j
return
◊◊ 
Json
◊◊ 
(
◊◊ 
caracteristicas
◊◊ +
)
◊◊+ ,
;
◊◊, -
}
ÿÿ 
catch
ŸŸ 
(
ŸŸ 
	Exception
ŸŸ 
e
ŸŸ 
)
ŸŸ 
{
⁄⁄ 
return
€€ 
Json
€€ 
(
€€ 
Util
€€  
.
€€  !
	ErrorJson
€€! *
(
€€* +
e
€€+ ,
)
€€, -
)
€€- .
;
€€. /
}
‹‹ 
}
›› 	
public
ﬂﬂ 

JsonResult
ﬂﬂ 3
%ObtenerCaracteristicasComunesConcepto
ﬂﬂ ?
(
ﬂﬂ? @
)
ﬂﬂ@ A
{
‡‡ 	
try
·· 
{
‚‚ 
var
„„ 
caracteristicas
„„ #
=
„„$ %
_logicaConcepto
„„& 5
.
„„5 6+
ObtenerCaracteristicasComunes
„„6 S
(
„„S T
)
„„T U
;
„„U V
return
ÂÂ 
Json
ÂÂ 
(
ÂÂ 
caracteristicas
ÂÂ +
)
ÂÂ+ ,
;
ÂÂ, -
}
ÊÊ 
catch
ÁÁ 
(
ÁÁ 
	Exception
ÁÁ 
e
ÁÁ 
)
ÁÁ 
{
ËË 
return
ÈÈ 
Json
ÈÈ 
(
ÈÈ 
Util
ÈÈ  
.
ÈÈ  !
	ErrorJson
ÈÈ! *
(
ÈÈ* +
e
ÈÈ+ ,
)
ÈÈ, -
)
ÈÈ- .
;
ÈÈ. /
}
ÍÍ 
}
ÎÎ 	
public
ÒÒ 

JsonResult
ÒÒ (
GuardarValorCaracteristica
ÒÒ 4
(
ÒÒ4 5#
ModeloBasicoViewModel
ÒÒ5 J!
valorCaracteristica
ÒÒK ^
,
ÒÒ^ _
int
ÒÒ` c
idCaracteristica
ÒÒd t
)
ÒÒt u
{
ÚÚ 	
try
ÛÛ 
{
ÙÙ 
OperationResult
ıı 
	resultado
ıı  )
;
ıı) *<
.ComprobarSiYaExisteNombreDeValorCaracteristica
˜˜ >
(
˜˜> ?!
valorCaracteristica
˜˜? R
.
˜˜R S
Id
˜˜S U
,
˜˜U V
idCaracteristica
˜˜W g
,
˜˜g h!
valorCaracteristica
˜˜i |
.
˜˜| }
Nombre˜˜} É
)˜˜É Ñ
;˜˜Ñ Ö
if
˘˘ 
(
˘˘ !
valorCaracteristica
˘˘ '
.
˘˘' (
Id
˘˘( *
!=
˘˘+ -
$num
˘˘. /
)
˘˘/ 0
{
˙˙ 
	resultado
¸¸ 
=
¸¸ 
_logicaConcepto
¸¸  /
.
¸¸/ 0+
ActualizarValorCaracteristica
¸¸0 M
(
¸¸M N!
valorCaracteristica
¸¸N a
.
¸¸a b
Id
¸¸b d
,
¸¸d e
idCaracteristica
¸¸f v
,
¸¸v w"
valorCaracteristica¸¸x ã
.¸¸ã å
Nombre¸¸å í
)¸¸í ì
;¸¸ì î
}
˝˝ 
else
˛˛ 
{
ˇˇ 
	resultado
ÄÄ 
=
ÄÄ 
_logicaConcepto
ÄÄ  /
.
ÄÄ/ 0(
GuardarValorCarcateristica
ÄÄ0 J
(
ÄÄJ K
idCaracteristica
ÄÄK [
,
ÄÄ[ \!
valorCaracteristica
ÄÄ] p
.
ÄÄp q
Nombre
ÄÄq w
)
ÄÄw x
;
ÄÄx y
}
ÅÅ 
Util
ÉÉ 
.
ÉÉ 
VerificarError
ÉÉ #
(
ÉÉ# $
	resultado
ÉÉ$ -
)
ÉÉ- .
;
ÉÉ. /
return
ÑÑ 
Json
ÑÑ 
(
ÑÑ 
new
ÑÑ 
{
ÑÑ  !
code_result
ÑÑ" -
=
ÑÑ. /
	resultado
ÑÑ0 9
.
ÑÑ9 :
code_result
ÑÑ: E
,
ÑÑE F
data
ÑÑG K
=
ÑÑL M
	resultado
ÑÑN W
.
ÑÑW X
data
ÑÑX \
,
ÑÑ\ ] 
result_description
ÑÑ^ p
=
ÑÑq r
	resultado
ÑÑs |
.
ÑÑ| }
titleÑÑ} Ç
}ÑÑÉ Ñ
)ÑÑÑ Ö
;ÑÑÖ Ü
}
ÖÖ 
catch
ÜÜ 
(
ÜÜ 
	Exception
ÜÜ 
e
ÜÜ 
)
ÜÜ 
{
áá 
HttpContext
àà 
.
àà 
Response
àà $
.
àà$ %

StatusCode
àà% /
=
àà0 1
$num
àà2 5
;
àà5 6
return
ââ 
Json
ââ 
(
ââ 
Util
ââ  
.
ââ  !
	ErrorJson
ââ! *
(
ââ* +
e
ââ+ ,
)
ââ, -
)
ââ- .
;
ââ. /
}
ää 
}
ãã 	
public
çç 
void
çç <
.ComprobarSiYaExisteNombreDeValorCaracteristica
çç B
(
ççB C
int
ççC F#
idValorCaracteristica
ççG \
,
çç\ ]
int
çç^ a
idCaracteristica
ççb r
,
ççr s
string
ççt z(
nombreValorCaracteristicaçç{ î
)ççî ï
{
éé 	
try
èè 
{
êê 
if
ëë 
(
ëë #
idValorCaracteristica
ëë )
>
ëë* +
$num
ëë, -
)
ëë- .
{
íí "
Valor_caracteristica
ìì (
result
ìì) /
=
ìì0 1
_logicaConcepto
ìì2 A
.
ììA B(
ObtenerValorCaracteristica
ììB \
(
ìì\ ]#
idValorCaracteristica
ìì] r
)
ììr s
;
ììs t
if
ññ 
(
ññ '
nombreValorCaracteristica
ññ 1
!=
ññ2 4
result
ññ5 ;
.
ññ; <
valor
ññ< A
)
ññA B
{
óó 
bool
ôô -
existeNombreValorCaracteristica
ôô <
=
ôô= >
_logicaConcepto
ôô? N
.
ôôN O/
!ExisteNombreDeValorCaracteristica
ôôO p
(
ôôp q
idCaracteristicaôôq Å
,ôôÅ Ç)
nombreValorCaracteristicaôôÉ ú
)ôôú ù
;ôôù û
if
úú 
(
úú -
existeNombreValorCaracteristica
úú ;
)
úú; <
{
ùù 
throw
ûû !
new
ûû" %!
ControllerException
ûû& 9
(
ûû9 :
$str
ûû: f
)
ûûf g
;
ûûg h
}
üü 
}
†† 
}
°° 
else
¢¢ 
{
££ 
bool
§§ -
existeNombreValorCaracteristica
§§ 8
=
§§9 :
_logicaConcepto
§§; J
.
§§J K/
!ExisteNombreDeValorCaracteristica
§§K l
(
§§l m
idCaracteristica
§§m }
,
§§} ~(
nombreValorCaracteristica§§ ò
)§§ò ô
;§§ô ö
if
¶¶ 
(
¶¶ -
existeNombreValorCaracteristica
¶¶ 7
)
¶¶7 8
{
ßß 
throw
®® 
new
®® !!
ControllerException
®®" 5
(
®®5 6
$str
®®6 b
)
®®b c
;
®®c d
}
©© 
}
™™ 
}
´´ 
catch
¨¨ 
(
¨¨ 
	Exception
¨¨ 
e
¨¨ 
)
¨¨ 
{
≠≠ 
throw
ØØ 
new
ØØ !
ControllerException
ØØ -
(
ØØ- .
$str
ØØ. l
,
ØØl m
e
ØØn o
)
ØØo p
;
ØØp q
}
∞∞ 
}
≤≤ 	
public
¥¥ 

JsonResult
¥¥ *
ObtenerValoresCaracteristica
¥¥ 6
(
¥¥6 7
int
¥¥7 :
idCaracteristica
¥¥; K
)
¥¥K L
{
µµ 	
try
∂∂ 
{
∑∑ 
List
∏∏ 
<
∏∏ "
Valor_caracteristica
∏∏ )
>
∏∏) *

resultados
∏∏+ 5
=
∏∏6 7
_logicaConcepto
∏∏8 G
.
∏∏G H,
ObtenerValoresDeCaracteristica
∏∏H f
(
∏∏f g
idCaracteristica
∏∏g w
)
∏∏w x
;
∏∏x y
List
ππ 
<
ππ #
ModeloBasicoViewModel
ππ *
>
ππ* +
valores
ππ, 3
=
ππ4 5
new
ππ6 9
List
ππ: >
<
ππ> ?#
ModeloBasicoViewModel
ππ? T
>
ππT U
(
ππU V
)
ππV W
;
ππW X
foreach
∫∫ 
(
∫∫ 
var
∫∫ 
item
∫∫ !
in
∫∫" $

resultados
∫∫% /
)
∫∫/ 0
{
ªª 
valores
ºº 
.
ºº 
Add
ºº 
(
ºº  
new
ºº  ##
ModeloBasicoViewModel
ºº$ 9
(
ºº9 :
item
ºº: >
.
ºº> ?
id
ºº? A
,
ººA B
item
ººC G
.
ººG H
valor
ººH M
)
ººM N
)
ººN O
;
ººO P
}
ΩΩ 
return
ææ 
Json
ææ 
(
ææ 
valores
ææ #
)
ææ# $
;
ææ$ %
}
øø 
catch
¿¿ 
(
¿¿ 
	Exception
¿¿ 
e
¿¿ 
)
¿¿ 
{
¡¡ 
return
¬¬ 
Json
¬¬ 
(
¬¬ 
Util
¬¬  
.
¬¬  !
	ErrorJson
¬¬! *
(
¬¬* +
e
¬¬+ ,
)
¬¬, -
)
¬¬- .
;
¬¬. /
}
√√ 
}
ƒƒ 	
public
…… 

JsonResult
…… "
ObtenerConceptoGasto
…… .
(
……. /
int
……/ 2
id
……3 5
)
……5 6
{
   	
try
ÀÀ 
{
ÃÃ 
var
ÕÕ 
	resultado
ÕÕ 
=
ÕÕ 
_logicaConcepto
ÕÕ  /
.
ÕÕ/ 0
obtenerProducto
ÕÕ0 ?
(
ÕÕ? @
id
ÕÕ@ B
)
ÕÕB C
;
ÕÕC D
return
ŒŒ 
Json
ŒŒ 
(
ŒŒ 
	resultado
ŒŒ %
)
ŒŒ% &
;
ŒŒ& '
}
œœ 
catch
–– 
(
–– 
	Exception
–– 
e
–– 
)
–– 
{
—— 
HttpContext
““ 
.
““ 
Response
““ $
.
““$ %

StatusCode
““% /
=
““0 1
$num
““2 5
;
““5 6
return
”” 
Json
”” 
(
”” 
Util
””  
.
””  !
	ErrorJson
””! *
(
””* +
e
””+ ,
)
””, -
)
””- .
;
””. /
}
‘‘ 
}
’’ 	
public
◊◊ 

JsonResult
◊◊ $
ObtenerConceptosGastos
◊◊ 0
(
◊◊0 1
)
◊◊1 2
{
ÿÿ 	
try
ŸŸ 
{
⁄⁄ 
List
€€ 
<
€€ 
DetalleGenerico
€€ $
>
€€$ %

resultados
€€& 0
=
€€1 2
_logicaConcepto
€€3 B
.
€€B C+
ObtenerConceptosVigentesGasto
€€C `
(
€€` a
)
€€a b
;
€€b c
List
‹‹ 
<
‹‹ $
ComboGenericoViewModel
‹‹ +
>
‹‹+ ,
	conceptos
‹‹- 6
=
‹‹7 8$
ComboGenericoViewModel
‹‹9 O
.
‹‹O P
Convert
‹‹P W
(
‹‹W X

resultados
‹‹X b
)
‹‹b c
;
‹‹c d
return
›› 
Json
›› 
(
›› 
	conceptos
›› %
)
››% &
;
››& '
}
ﬁﬁ 
catch
ﬂﬂ 
(
ﬂﬂ 
	Exception
ﬂﬂ 
e
ﬂﬂ 
)
ﬂﬂ 
{
‡‡ 
HttpContext
·· 
.
·· 
Response
·· $
.
··$ %

StatusCode
··% /
=
··0 1
$num
··2 5
;
··5 6
return
‚‚ 
Json
‚‚ 
(
‚‚ 
Util
‚‚  
.
‚‚  !
	ErrorJson
‚‚! *
(
‚‚* +
e
‚‚+ ,
)
‚‚, -
)
‚‚- .
;
‚‚. /
}
„„ 
}
‰‰ 	
public
ÊÊ 

JsonResult
ÊÊ "
GuardarConceptoGasto
ÊÊ .
(
ÊÊ. /,
RegistroConceptoGastoViewModel
ÊÊ/ M
concepto
ÊÊN V
)
ÊÊV W
{
ÁÁ 	
try
ËË 
{
ÈÈ 
OperationResult
ÍÍ 
	resultado
ÍÍ  )
;
ÍÍ) *
if
ÎÎ 
(
ÎÎ 
!
ÎÎ 
concepto
ÎÎ 
.
ÎÎ (
ConceptoBasicoSeleccionado
ÎÎ 8
)
ÎÎ8 9
{
ÏÏ 
var
ÌÌ %
resultadoConceptoBasico
ÌÌ /
=
ÌÌ0 1
_logicaConcepto
ÌÌ2 A
.
ÌÌA B#
GuardarConceptoBasico
ÌÌB W
(
ÌÌW X
concepto
ÌÌX `
.
ÌÌ` a"
NombreConceptoBasico
ÌÌa u
,
ÌÌu v
concepto
ÌÌw 
.ÌÌ Ä
ValorÌÌÄ Ö
,ÌÌÖ Ü
nullÌÌá ã
,ÌÌã å
nullÌÌç ë
)ÌÌë í
;ÌÌí ì
Util
ÓÓ 
.
ÓÓ (
ManageIfResultIsNotSuccess
ÓÓ 3
(
ÓÓ3 4%
resultadoConceptoBasico
ÓÓ4 K
,
ÓÓK L
$str
ÓÓM }
)
ÓÓ} ~
;
ÓÓ~ 
concepto
ÔÔ 
.
ÔÔ 
ConceptoBasico
ÔÔ +
=
ÔÔ, -
new
ÔÔ. 1$
ComboGenericoViewModel
ÔÔ2 H
(
ÔÔH I
(
ÔÔI J
int
ÔÔJ M
)
ÔÔM N%
resultadoConceptoBasico
ÔÔN e
.
ÔÔe f
data
ÔÔf j
,
ÔÔj k
concepto
ÔÔl t
.
ÔÔt u#
NombreConceptoBasicoÔÔu â
)ÔÔâ ä
;ÔÔä ã
}
 
if
ÒÒ 
(
ÒÒ 
concepto
ÒÒ 
.
ÒÒ 
Id
ÒÒ 
>
ÒÒ  !
$num
ÒÒ" #
)
ÒÒ# $
{
ÚÚ 
	resultado
ÛÛ 
=
ÛÛ 
_logicaConcepto
ÛÛ  /
.
ÛÛ/ 0%
ActualizarConceptoGasto
ÛÛ0 G
(
ÛÛG H
concepto
ÛÛH P
.
ÛÛP Q
Id
ÛÛQ S
,
ÛÛS T
concepto
ÛÛU ]
.
ÛÛ] ^
ConceptoBasico
ÛÛ^ l
.
ÛÛl m
Nombre
ÛÛm s
+
ÛÛt u
$str
ÛÛv y
+
ÛÛz {
conceptoÛÛ| Ñ
.ÛÛÑ Ö
SufijoÛÛÖ ã
,ÛÛã å
conceptoÛÛç ï
.ÛÛï ñ
ConceptoBasicoÛÛñ §
.ÛÛ§ •
IdÛÛ• ß
,ÛÛß ®
conceptoÛÛ© ±
.ÛÛ± ≤
SufijoÛÛ≤ ∏
,ÛÛ∏ π
ProfileDataÛÛ∫ ≈
(ÛÛ≈ ∆
)ÛÛ∆ «
.ÛÛ« »
EmpleadoÛÛ» –
.ÛÛ– —
IdÛÛ— ”
,ÛÛ” ‘
ProfileDataÛÛ’ ‡
(ÛÛ‡ ·
)ÛÛ· ‚
.ÛÛ‚ „2
"IdCentroAtencionQueTieneLosPreciosÛÛ„ Ö
)ÛÛÖ Ü
;ÛÛÜ á
}
ÙÙ 
else
ıı 
{
ˆˆ 
	resultado
˜˜ 
=
˜˜ 
_logicaConcepto
˜˜  /
.
˜˜/ 0"
GuardarConceptoGasto
˜˜0 D
(
˜˜D E
concepto
˜˜E M
.
˜˜M N
ConceptoBasico
˜˜N \
.
˜˜\ ]
Nombre
˜˜] c
+
˜˜d e
$str
˜˜f i
+
˜˜j k
concepto
˜˜l t
.
˜˜t u
Sufijo
˜˜u {
,
˜˜{ |
concepto˜˜} Ö
.˜˜Ö Ü
ConceptoBasico˜˜Ü î
.˜˜î ï
Id˜˜ï ó
,˜˜ó ò
concepto˜˜ô °
.˜˜° ¢
Sufijo˜˜¢ ®
,˜˜® ©
ProfileData˜˜™ µ
(˜˜µ ∂
)˜˜∂ ∑
.˜˜∑ ∏
Empleado˜˜∏ ¿
.˜˜¿ ¡
Id˜˜¡ √
,˜˜√ ƒ
ProfileData˜˜≈ –
(˜˜– —
)˜˜— “
.˜˜“ ”2
"IdCentroAtencionQueTieneLosPrecios˜˜” ı
)˜˜ı ˆ
;˜˜ˆ ˜
}
¯¯ 
Util
˘˘ 
.
˘˘ (
ManageIfResultIsNotSuccess
˘˘ /
(
˘˘/ 0
	resultado
˘˘0 9
,
˘˘9 :
$str
˘˘; c
)
˘˘c d
;
˘˘d e
return
˙˙ 
Json
˙˙ 
(
˙˙ 
new
˙˙ 
{
˙˙  !
	resultado
˙˙" +
.
˙˙+ ,
code_result
˙˙, 7
,
˙˙7 8
	resultado
˙˙9 B
.
˙˙B C
data
˙˙C G
,
˙˙G H 
result_description
˙˙I [
=
˙˙\ ]
	resultado
˙˙^ g
.
˙˙g h
title
˙˙h m
}
˙˙n o
)
˙˙o p
;
˙˙p q
}
˚˚ 
catch
¸¸ 
(
¸¸ 
	Exception
¸¸ 
e
¸¸ 
)
¸¸ 
{
˝˝ 
HttpContext
˛˛ 
.
˛˛ 
Response
˛˛ $
.
˛˛$ %

StatusCode
˛˛% /
=
˛˛0 1
$num
˛˛2 5
;
˛˛5 6
return
ˇˇ 
Json
ˇˇ 
(
ˇˇ 
Util
ˇˇ  
.
ˇˇ  !
	ErrorJson
ˇˇ! *
(
ˇˇ* +
e
ˇˇ+ ,
)
ˇˇ, -
)
ˇˇ- .
;
ˇˇ. /
}
ÄÄ 
}
ÅÅ 	
public
ÉÉ 

JsonResult
ÉÉ (
ObtenerRolesConceptosGasto
ÉÉ 4
(
ÉÉ4 5
)
ÉÉ5 6
{
ÑÑ 	
try
ÖÖ 
{
ÜÜ 
var
áá 

resultados
áá 
=
áá  
_logicaConcepto
áá! 0
.
áá0 1Q
CObtenerRolesQueAplicaAConceptosDeNegocioExceptoMercaderiaYServicios
áá1 t
(
áát u
)
ááu v
;
ááv w
List
àà 
<
àà $
ComboGenericoViewModel
àà +
>
àà+ ,
rolesDeNegocio
àà- ;
=
àà< =
new
àà> A
List
ààB F
<
ààF G$
ComboGenericoViewModel
ààG ]
>
àà] ^
(
àà^ _
)
àà_ `
;
àà` a
rolesDeNegocio
ââ 
=
ââ  $
ComboGenericoViewModel
ââ! 7
.
ââ7 8
Convert
ââ8 ?
(
ââ? @

resultados
ââ@ J
)
ââJ K
;
ââK L
return
ää 
Json
ää 
(
ää 
rolesDeNegocio
ää *
)
ää* +
;
ää+ ,
}
ãã 
catch
åå 
(
åå 
	Exception
åå 
e
åå 
)
åå 
{
çç 
return
éé 
Json
éé 
(
éé 
Util
éé  
.
éé  !
	ErrorJson
éé! *
(
éé* +
e
éé+ ,
)
éé, -
)
éé- .
;
éé. /
}
èè 
}
êê 	
public
îî 
ActionResult
îî /
!ReporteDeProductoConCodigoDeBarra
îî =
(
îî= >
)
îî> ?
{
ïï 	
List
óó 
<
óó 
ConceptoDeNegocio
óó "
>
óó" #
	resultado
óó$ -
=
óó. /
_logicaConcepto
óó0 ?
.
óó? @ 
obtenerMercaderias
óó@ R
(
óóR S
)
óóS T
;
óóT U
List
òò 
<
òò &
ReporteProductoViewModel
òò )
>
òò) *&
reporteProductoViewModel
òò+ C
=
òòD E&
ReporteProductoViewModel
òòF ^
.
òò^ _
Convert
òò_ f
(
òòf g
	resultado
òòg p
)
òòp q
;
òòq r
ReportParameter
öö 
entidadInterna
öö *
=
öö+ ,
new
öö- 0
ReportParameter
öö1 @
(
öö@ A
$str
ööA W
,
ööW X
ProfileData
ööY d
(
ööd e
)
ööe f
.
ööf g1
"NombreCentroDeAtencionSeleccionadoöög â
)ööâ ä
;ööä ã
ReportParameter
õõ 
fecha
õõ !
=
õõ" #
new
õõ$ '
ReportParameter
õõ( 7
(
õõ7 8
$str
õõ8 E
,
õõE F
DateTimeUtil
õõF R
.
õõR S
FechaActual
õõS ^
(
õõ^ _
)
õõ_ `
.
õõ` a
ToString
õõa i
(
õõi j
)
õõj k
)
õõk l
;
õõl m
ReportParameter
úú 
nombreEmpresa
úú )
=
úú* +
new
úú, /
ReportParameter
úú0 ?
(
úú? @
$str
úú@ O
,
úúO P
ObtenerSede
úúQ \
(
úú\ ]
)
úú] ^
.
úú^ _
Nombre
úú_ e
)
úúe f
;
úúf g
var
ûû 
sede
ûû 
=
ûû 
ObtenerSede
ûû "
(
ûû" #
)
ûû# $
;
ûû$ %
string
üü 

logoString
üü 
=
üü 
Convert
üü  '
.
üü' (
ToBase64String
üü( 6
(
üü6 7
sede
üü7 ;
.
üü; <
Logo
üü< @
,
üü@ A
$num
üüB C
,
üüC D
sede
üüE I
.
üüI J
Logo
üüJ N
.
üüN O
Length
üüO U
)
üüU V
;
üüV W
ReportParameter
†† 
logoSede
†† $
=
††% &
new
††' *
ReportParameter
††+ :
(
††: ;
$str
††; E
,
††E F

logoString
††G Q
)
††Q R
;
††R S
ReportParameter
¢¢ 
empleadoSede
¢¢ (
=
¢¢) *
new
¢¢+ .
ReportParameter
¢¢/ >
(
¢¢> ?
$str
¢¢? H
,
¢¢H I
ProfileData
¢¢J U
(
¢¢U V
)
¢¢V W
.
¢¢W X
Empleado
¢¢X `
.
¢¢` a
NombresYApellidos
¢¢a r
)
¢¢r s
;
¢¢s t
DateTime
§§ 
fechaActual
§§  
=
§§! "
DateTimeUtil
§§" .
.
§§. /
FechaActual
§§/ :
(
§§: ;
)
§§; <
;
§§< =
ReportParameter
••  
fechaActualSistema
•• .
=
••/ 0
new
••1 4
ReportParameter
••5 D
(
••D E
$str
••E Y
,
••Y Z
fechaActual
••[ f
.
••f g
ToString
••g o
(
••o p
)
••p q
)
••q r
;
••r s
var
ßß 
	rptviewer
ßß 
=
ßß 
new
ßß 
ReportViewer
ßß  ,
(
ßß, -
)
ßß- .
;
ßß. /
	rptviewer
®® 
.
®® 
ProcessingMode
®® $
=
®®% &
ProcessingMode
®®' 5
.
®®5 6
Local
®®6 ;
;
®®; <
	rptviewer
™™ 
.
™™ 
LocalReport
™™ !
.
™™! "

ReportPath
™™" ,
=
™™- .
Request
™™/ 6
.
™™6 7
MapPath
™™7 >
(
™™> ?
Request
™™? F
.
™™F G
ApplicationPath
™™G V
)
™™V W
+
™™X Y
$str™™Z ã
;™™ã å
	rptviewer
´´ 
.
´´ 
LocalReport
´´ !
.
´´! "
SetParameters
´´" /
(
´´/ 0
new
´´0 3
ReportParameter
´´4 C
[
´´C D
]
´´D E
{
´´F G
entidadInterna
´´H V
,
´´V W
nombreEmpresa
´´X e
,
´´e f
fecha
´´g l
,
´´l m
logoSede
´´n v
,
´´v w
empleadoSede´´x Ñ
,´´Ñ Ö"
fechaActualSistema´´Ü ò
}´´ô ö
)´´ö õ
;´´õ ú
ReportDataSource
≠≠  
rptdatasourceStock
≠≠ /
=
≠≠0 1
new
≠≠2 5
ReportDataSource
≠≠6 F
(
≠≠F G
$str
≠≠G a
,
≠≠a b&
reporteProductoViewModel
≠≠c {
)
≠≠{ |
;
≠≠| }
	rptviewer
ØØ 
.
ØØ 
LocalReport
ØØ !
.
ØØ! "
DataSources
ØØ" -
.
ØØ- .
Add
ØØ. 1
(
ØØ1 2 
rptdatasourceStock
ØØ2 D
)
ØØD E
;
ØØE F
	rptviewer
∞∞ 
.
∞∞ !
SizeToReportContent
∞∞ )
=
∞∞* +
true
∞∞, 0
;
∞∞0 1
ViewBag
±± 
.
±± 
ReportViewer
±±  
=
±±! "
	rptviewer
±±# ,
;
±±, -
return
≥≥ 
View
≥≥ 
(
≥≥ 
$str
≥≥ -
)
≥≥- .
;
≥≥. /
}
µµ 	
public
∂∂ 

JsonResult
∂∂ %
GuardarConceptoServicio
∂∂ 1
(
∂∂1 2/
!RegistroConceptoServicioViewModel
∂∂2 S
conceptoServicio
∂∂T d
)
∂∂d e
{
∑∑ 	
try
∏∏ 
{
ππ 
OperationResult
∫∫ 
	resultado
∫∫  )
;
∫∫) *
if
ªª 
(
ªª 
!
ªª 
conceptoServicio
ªª %
.
ªª% &(
ConceptoBasicoSeleccionado
ªª& @
)
ªª@ A
{
ºº 
var
ΩΩ %
resultadoConceptoBasico
ΩΩ /
=
ΩΩ0 1
_logicaConcepto
ΩΩ2 A
.
ΩΩA B#
GuardarConceptoBasico
ΩΩB W
(
ΩΩW X
conceptoServicio
ΩΩX h
.
ΩΩh i"
NombreConceptoBasico
ΩΩi }
,
ΩΩ} ~
conceptoServicioΩΩ è
.ΩΩè ê
ValorΩΩê ï
,ΩΩï ñ
nullΩΩó õ
,ΩΩõ ú
nullΩΩù °
)ΩΩ° ¢
;ΩΩ¢ £
Util
ææ 
.
ææ (
ManageIfResultIsNotSuccess
ææ 3
(
ææ3 4%
resultadoConceptoBasico
ææ4 K
,
ææK L
$str
ææM }
)
ææ} ~
;
ææ~ 
conceptoServicio
øø $
.
øø$ %
ConceptoBasico
øø% 3
=
øø4 5
new
øø6 9$
ComboGenericoViewModel
øø: P
(
øøP Q
(
øøQ R
int
øøR U
)
øøU V%
resultadoConceptoBasico
øøV m
.
øøm n
data
øøn r
,
øør s
conceptoServicioøøt Ñ
.øøÑ Ö$
NombreConceptoBasicoøøÖ ô
)øøô ö
;øøö õ
}
¿¿ 
	resultado
¡¡ 
=
¡¡ 
_logicaConcepto
¡¡ +
.
¡¡+ ,%
GuardarConceptoServicio
¡¡, C
(
¡¡C D
conceptoServicio
¡¡D T
.
¡¡T U
NombreCompleto
¡¡U c
,
¡¡c d
conceptoServicio
¡¡e u
.
¡¡u v
ConceptoBasico¡¡v Ñ
.¡¡Ñ Ö
Id¡¡Ö á
,¡¡á à 
conceptoServicio¡¡â ô
.¡¡ô ö
Sufijo¡¡ö †
,¡¡† °
ProfileData¡¡¢ ≠
(¡¡≠ Æ
)¡¡Æ Ø
.¡¡Ø ∞
Empleado¡¡∞ ∏
.¡¡∏ π
Id¡¡π ª
,¡¡ª º
ProfileData¡¡Ω »
(¡¡» …
)¡¡…  
.¡¡  À2
"IdCentroAtencionQueTieneLosPrecios¡¡À Ì
)¡¡Ì Ó
;¡¡Ó Ô
Util
¬¬ 
.
¬¬ (
ManageIfResultIsNotSuccess
¬¬ /
(
¬¬/ 0
	resultado
¬¬0 9
,
¬¬9 :
$str
¬¬; g
)
¬¬g h
;
¬¬h i
return
√√ 
Json
√√ 
(
√√ 
new
√√ 
{
√√  !
	resultado
√√" +
.
√√+ ,
code_result
√√, 7
,
√√7 8
	resultado
√√9 B
.
√√B C
data
√√C G
,
√√G H
basico_data
√√I T
=
√√U V
conceptoServicio
√√W g
.
√√g h
ConceptoBasico
√√h v
.
√√v w
Id
√√w y
,
√√y z!
result_description√√{ ç
=√√é è
	resultado√√ê ô
.√√ô ö
title√√ö ü
}√√† °
)√√° ¢
;√√¢ £
}
ƒƒ 
catch
≈≈ 
(
≈≈ 
	Exception
≈≈ 
e
≈≈ 
)
≈≈ 
{
∆∆ 
HttpContext
«« 
.
«« 
Response
«« $
.
««$ %

StatusCode
««% /
=
««0 1
$num
««2 5
;
««5 6
return
»» 
Json
»» 
(
»» 
Util
»»  
.
»»  !
	ErrorJson
»»! *
(
»»* +
e
»»+ ,
)
»», -
)
»»- .
;
»». /
}
…… 
}
   	
public
ÃÃ 

JsonResult
ÃÃ %
DescargarReporteDigemid
ÃÃ 1
(
ÃÃ1 2
)
ÃÃ2 3
{
ÕÕ 	
try
ŒŒ 
{
œœ 
var
–– 
sede
–– 
=
–– 
ObtenerSede
–– &
(
––& '
)
––' (
;
––( )
List
““ 
<
““ 
ReporteDigemid
““ #
>
““# $%
reporteConceptosDigemid
““% <
=
““= >
_logicaConcepto
““? N
.
““N O,
ObtenerReporteConceptosDigemid
““O m
(
““m n
ProfileData
““n y
(
““y z
)
““z {
)
““{ |
;
““| }
var
‘‘ 
	rptviewer
‘‘ 
=
‘‘ 
new
‘‘  #
ReportViewer
‘‘$ 0
(
‘‘0 1
)
‘‘1 2
;
‘‘2 3
string
÷÷ 
path
÷÷ 
=
÷÷ 
$str
÷÷ ]
;
÷÷] ^
	rptviewer
◊◊ 
.
◊◊ 
LocalReport
◊◊ %
.
◊◊% &

ReportPath
◊◊& 0
=
◊◊1 2
Request
◊◊3 :
.
◊◊: ;
MapPath
◊◊; B
(
◊◊B C
Request
◊◊C J
.
◊◊J K
ApplicationPath
◊◊K Z
)
◊◊Z [
+
◊◊\ ]
path
◊◊^ b
;
◊◊b c
ReportDataSource
ÿÿ  '
rptdatasourcereporteVenta
ÿÿ! :
=
ÿÿ; <
new
ÿÿ= @
ReportDataSource
ÿÿA Q
(
ÿÿQ R
$str
ÿÿR i
,
ÿÿi j&
reporteConceptosDigemidÿÿk Ç
)ÿÿÇ É
;ÿÿÉ Ñ
	rptviewer
⁄⁄ 
.
⁄⁄ 
ProcessingMode
⁄⁄ (
=
⁄⁄) *
ProcessingMode
⁄⁄+ 9
.
⁄⁄9 :
Local
⁄⁄: ?
;
⁄⁄? @
	rptviewer
€€ 
.
€€ 
LocalReport
€€ %
.
€€% &
DataSources
€€& 1
.
€€1 2
Add
€€2 5
(
€€5 6'
rptdatasourcereporteVenta
€€6 O
)
€€O P
;
€€P Q
	rptviewer
‹‹ 
.
‹‹ !
SizeToReportContent
‹‹ -
=
‹‹. /
true
‹‹0 4
;
‹‹4 5
	rptviewer
›› 
.
›› 
Width
›› 
=
››  !
Unit
››" &
.
››& '

Percentage
››' 1
(
››1 2
$num
››2 5
)
››5 6
;
››6 7
	rptviewer
ﬁﬁ 
.
ﬁﬁ 
Height
ﬁﬁ  
=
ﬁﬁ! "
Unit
ﬁﬁ# '
.
ﬁﬁ' (

Percentage
ﬁﬁ( 2
(
ﬁﬁ2 3
$num
ﬁﬁ3 6
)
ﬁﬁ6 7
;
ﬁﬁ7 8
string
·· 
filenameContent
·· &
=
··' (
sede
··) -
.
··- . 
DocumentoIdentidad
··. @
+
··A B
$str
··C F
+
··G H
sede
··I M
.
··M N
Nombre
··N T
+
··U V
$str
··W b
+
··c d
DateTimeUtil
··d p
.
··p q
FechaActual
··q |
(
··| }
)
··} ~
.
··~ 
ToString·· á
(··á à
$str··à î
)··î ï
;··ï ñ
string
‚‚ 
filename
‚‚ 
=
‚‚  !
string
‚‚" (
.
‚‚( )
Format
‚‚) /
(
‚‚/ 0
$str
‚‚0 9
,
‚‚9 :
filenameContent
‚‚; J
,
‚‚J K
$str
‚‚L Q
)
‚‚Q R
;
‚‚R S
filename
„„ 
=
„„ 
filename
„„ #
.
„„# $
Replace
„„$ +
(
„„+ ,
$str
„„, /
,
„„/ 0
$str
„„1 3
)
„„3 4
;
„„4 5
byte
ÂÂ 
[
ÂÂ 
]
ÂÂ 
bytes
ÂÂ 
=
ÂÂ 
	rptviewer
ÂÂ (
.
ÂÂ( )
LocalReport
ÂÂ) 4
.
ÂÂ4 5
Render
ÂÂ5 ;
(
ÂÂ; <
$str
ÂÂ< C
,
ÂÂC D
null
ÂÂE I
,
ÂÂI J
out
ÂÂK N
string
ÂÂO U
mimeType
ÂÂV ^
,
ÂÂ^ _
out
ÂÂ` c
string
ÂÂd j
encoding
ÂÂk s
,
ÂÂs t
out
ÂÂu x
string
ÂÂy 
	extensionÂÂÄ â
,ÂÂâ ä
outÂÂã é
stringÂÂè ï
[ÂÂï ñ
]ÂÂñ ó
	streamidsÂÂò °
,ÂÂ° ¢
outÂÂ£ ¶
WarningÂÂß Æ
[ÂÂÆ Ø
]ÂÂØ ∞
warningsÂÂ± π
)ÂÂπ ∫
;ÂÂ∫ ª
Response
ÁÁ 
.
ÁÁ 
ClearHeaders
ÁÁ %
(
ÁÁ% &
)
ÁÁ& '
;
ÁÁ' (
Response
ËË 
.
ËË 
Clear
ËË 
(
ËË 
)
ËË  
;
ËË  !
Response
ÈÈ 
.
ÈÈ 
	AddHeader
ÈÈ "
(
ÈÈ" #
$str
ÈÈ# 8
,
ÈÈ8 9
$str
ÈÈ: Q
+
ÈÈR S
filename
ÈÈT \
)
ÈÈ\ ]
;
ÈÈ] ^
Response
ÍÍ 
.
ÍÍ 
ContentType
ÍÍ $
=
ÍÍ% &
mimeType
ÍÍ' /
;
ÍÍ/ 0
Response
ÎÎ 
.
ÎÎ 
BinaryWrite
ÎÎ $
(
ÎÎ$ %
bytes
ÎÎ% *
)
ÎÎ* +
;
ÎÎ+ ,
Response
ÏÏ 
.
ÏÏ 
Flush
ÏÏ 
(
ÏÏ 
)
ÏÏ  
;
ÏÏ  !
Response
ÌÌ 
.
ÌÌ 
End
ÌÌ 
(
ÌÌ 
)
ÌÌ 
;
ÌÌ 
return
ÔÔ 
Json
ÔÔ 
(
ÔÔ 
$str
ÔÔ ;
)
ÔÔ; <
;
ÔÔ< =
}
 
catch
ÚÚ 
(
ÚÚ 
	Exception
ÚÚ 
e
ÚÚ 
)
ÚÚ 
{
ÛÛ 
throw
ÙÙ 
new
ÙÙ !
ControllerException
ÙÙ -
(
ÙÙ- .
$str
ÙÙ. U
,
ÙÙU V
e
ÙÙW X
)
ÙÙX Y
;
ÙÙY Z
}
ıı 
}
ˆˆ 	
}
˘˘ 
}˙˙ ∑™
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\FinanzaController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
FinanzaController "
:# $
BaseController% 3
{ 
private 
readonly 
IOperacionLogica )
operacionLogica* 9
;9 :
private 
readonly 
IContabilidadLogica ,
contabilidadLogica- ?
;? @
private 
readonly )
IFacturacionElectronicaLogica 6(
facturacionElectronicaLogica7 S
;S T
private 
readonly 
IMaestroLogica '
maestroLogica( 5
;5 6
private 
readonly 
IBarCodeUtil %
barCodeUtil& 1
;1 2
private   
readonly   
IMailer    
mailer  ! '
;  ' (
public"" 
FinanzaController""  
(""  !
)""! "
{## 	
operacionLogica$$ 
=$$ 
Dependencia$$ )
.$$) *
Resolve$$* 1
<$$1 2
IOperacionLogica$$2 B
>$$B C
($$C D
)$$D E
;$$E F
contabilidadLogica%% 
=%%  
Dependencia%%! ,
.%%, -
Resolve%%- 4
<%%4 5
IContabilidadLogica%%5 H
>%%H I
(%%I J
)%%J K
;%%K L(
facturacionElectronicaLogica&& (
=&&) *
Dependencia&&+ 6
.&&6 7
Resolve&&7 >
<&&> ?)
IFacturacionElectronicaLogica&&? \
>&&\ ]
(&&] ^
)&&^ _
;&&_ `
maestroLogica'' 
='' 
Dependencia'' '
.''' (
Resolve''( /
<''/ 0
IMaestroLogica''0 >
>''> ?
(''? @
)''@ A
;''A B
barCodeUtil(( 
=(( 
Dependencia(( %
.((% &
Resolve((& -
<((- .
IBarCodeUtil((. :
>((: ;
(((; <
)((< =
;((= >
mailer)) 
=)) 
Dependencia))  
.))  !
Resolve))! (
<))( )
IMailer))) 0
>))0 1
())1 2
)))2 3
;))3 4
}** 	
public.. 
ActionResult.. 
CobrarYPagar.. (
(..( )
)..) *
{// 	
ViewBag00 
.00 /
#idDetalleMaestroMedioDePagoEfectivo00 7
=008 9
MaestroSettings00: I
.00I J
Default00J Q
.00Q R/
#IdDetalleMaestroMedioDepagoEfectivo00R u
;00u v
ViewBag11 
.11 2
&idDetalleMaestroEntidadBancariaNinguna11 :
=11; <
MaestroSettings11= L
.11L M
Default11M T
.11T U2
&IdDetalleMaestroEntidadBancariaNinguna11U {
;11{ |
ViewBag22 
.22 5
)idDetalleMaestroMedioDePagoDepositoCuenta22 =
=22> ?
MaestroSettings22@ O
.22O P
Default22P W
.22W X8
+IdDetalleMaestroMedioDepagoDepositoEnCuenta	22X É
;
22É Ñ
ViewBag33 
.33 <
0idDetalleMaestroMedioDePagoTransferenciaDeFondos33 D
=33E F
MaestroSettings33G V
.33V W
Default33W ^
.33^ _=
0IdDetalleMaestroMedioDepagoTransferenciaDeFondos	33_ è
;
33è ê
List44 
<44 
string44 
>44 
fechas44 
=44  !
operacionLogica44" 1
.441 23
'ObtenerFechaIncioyFinParaReporteAlmacen442 Y
(44Y Z
)44Z [
;44[ \
ViewBag55 
.55 
fechaInicio55 
=55  !
fechas55" (
[55( )
$num55) *
]55* +
;55+ ,
ViewBag66 
.66 
fechaFin66 
=66 
fechas66 %
[66% &
$num66& '
]66' (
;66( )
ViewBag77 
.77 1
%permitirGruposEnCuentasPorCobrarPagar77 9
=77: ;
AplicacionSettings77< N
.77N O
Default77O V
.77V W1
%PermitirGruposEnCuentasPorCobrarPagar77W |
;77| }
ViewBag88 
.88 
nombreCajero88  
=88! "
ProfileData88# .
(88. /
)88/ 0
.880 1
Empleado881 9
.889 :
NombresYApellidos88: K
;88K L
ViewBag99 
.99 
	WCPScript99 
=99 

Neodynamic99  *
.99* +
SDK99+ .
.99. /
Web99/ 2
.992 3
WebClientPrint993 A
.99A B
CreateScript99B N
(99N O
Url:: 
.:: 
Action:: 
(:: 
$str:: *
,::* +
$str::, ?
,::? @
null::A E
,::E F
HttpContext::G R
.::R S
Request::S Z
.::Z [
Url::[ ^
.::^ _
Scheme::_ e
)::e f
,::f g
Url;; 
.;; 
Action;; 
(;; 
$str;; %
,;;% &
$str;;' 0
,;;0 1
null;;2 6
,;;6 7
HttpContext;;8 C
.;;C D
Request;;D K
.;;K L
Url;;L O
.;;O P
Scheme;;P V
);;V W
,;;W X
HttpContext;;Y d
.;;d e
Session;;e l
.;;l m
	SessionID;;m v
);;v w
;;;w x
return<< 
View<< 
(<< 
)<< 
;<< 
}== 	
public?? 
ActionResult?? 
CobrosYPagos?? (
(??( )
)??) *
{@@ 	
ViewBagBB 
.BB 
fechaInicioBB 
=BB  !
DateTimeBB" *
.BB* +
NowBB+ .
.BB. /
AddDaysBB/ 6
(BB6 7
-BB7 8
$numBB8 9
)BB9 :
.BB: ;
ToStringBB; C
(BBC D
$strBBD P
)BBP Q
;BBQ R
ViewBagCC 
.CC 
fechaFinCC 
=CC 
DateTimeCC '
.CC' (
NowCC( +
.CC+ ,
ToStringCC, 4
(CC4 5
$strCC5 A
)CCA B
;CCB C
ViewBagDD 
.DD 
nombreCajeroDD  
=DD! "
ProfileDataDD# .
(DD. /
)DD/ 0
.DD0 1
EmpleadoDD1 9
.DD9 :
NombresYApellidosDD: K
;DDK L
ViewBagEE 
.EE 
idClienteGenericoEE %
=EE& '
ActorSettingsEE( 5
.EE5 6
DefaultEE6 =
.EE= >
IdClienteGenericoEE> O
;EEO P
ViewBagFF 
.FF &
idTipoActorPersonaJuridicaFF .
=FF/ 0
ActorSettingsFF1 >
.FF> ?
DefaultFF? F
.FFF G&
IdTipoActorPersonaJuridicaFFG a
;FFa b
ViewBagGG 
.GG 
idClienteGenericoGG %
=GG& '
ActorSettingsGG( 5
.GG5 6
DefaultGG6 =
.GG= >
IdClienteGenericoGG> O
;GGO P
ViewBagHH 
.HH /
#idTipoPersonaSeleccionadaPorDefectoHH 7
=HH8 9
ActorSettingsHH: G
.HHG H
DefaultHHH O
.HHO P/
#IdTipoPersonaSeleccionadaPorDefectoHHP s
;HHs t
ViewBagII 
.II *
idUbigeoSeleccionadoPorDefectoII 2
=II3 4
ActorSettingsII5 B
.IIB C
DefaultIIC J
.IIJ K*
IdUbigeoSeleccionadoPorDefectoIIK i
;IIi j
ViewBagJJ 
.JJ <
0idTipoDocumentoSeleccionadaConTipoPersonaNaturalJJ D
=JJE F
ActorSettingsJJG T
.JJT U
DefaultJJU \
.JJ\ ]=
0IdTipoDocumentoSeleccionadaConTipoPersonaNatural	JJ] ç
;
JJç é
ViewBagKK 
.KK =
1idTipoDocumentoSeleccionadaConTipoPersonaJuridicaKK E
=KKF G
ActorSettingsKKH U
.KKU V
DefaultKKV ]
.KK] ^>
1IdTipoDocumentoSeleccionadaConTipoPersonaJuridica	KK^ è
;
KKè ê
ViewBagLL 
.LL '
idTipoDocumentoIdentidadDniLL /
=LL0 1
ActorSettingsLL2 ?
.LL? @
DefaultLL@ G
.LLG H'
IdTipoDocumentoIdentidadDniLLH c
;LLc d
ViewBagMM 
.MM '
idTipoDocumentoIdentidadRucMM /
=MM0 1
ActorSettingsMM2 ?
.MM? @
DefaultMM@ G
.MMG H'
IdTipoDocumentoIdentidadRucMMH c
;MMc d
ViewBagNN 
.NN 
idProveedorGenericoNN '
=NN( )
ActorSettingsNN* 7
.NN7 8
DefaultNN8 ?
.NN? @
idProveedorGenericoNN@ S
;NNS T
ViewBagOO 
.OO %
IdTipoActorPersonaNaturalOO -
=OO. /
ActorSettingsOO0 =
.OO= >
DefaultOO> E
.OOE F%
IdTipoActorPersonaNaturalOOF _
;OO_ `
ViewBagPP 
.PP 1
%idComprobantePredeterminadoPorDefectoPP 9
=PP: ;
MaestroSettingsPP< K
.PPK L
DefaultPPL S
.PPS T7
+IdDetalleMaestroComprobanteNotaVentaInternaPPT 
;	PP Ä
ViewBagQQ 
.QQ 
idRolClienteQQ  
=QQ! "
ActorSettingsQQ# 0
.QQ0 1
DefaultQQ1 8
.QQ8 9
IdRolClienteQQ9 E
;QQE F
ViewBagRR 
.RR 
idRolProveedorRR "
=RR# $
ActorSettingsRR% 2
.RR2 3
DefaultRR3 :
.RR: ;
IdRolProveedorRR; I
;RRI J
ViewBagSS 
.SS 
idRolEmpleadoSS !
=SS" #
ActorSettingsSS$ 1
.SS1 2
DefaultSS2 9
.SS9 :
IdRolEmpleadoSS: G
;SSG H
ViewBagTT 
.TT (
tiempoEsperaBusquedaSelectorTT 0
=TT1 2
AplicacionSettingsTT3 E
.TTE F
DefaultTTF M
.TTM N<
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidadTTN ~
;TT~ 
ViewBagUU 
.UU 0
$minimoCaracteresBuscarActorComercialUU 8
=UU9 :
ActorSettingsUU; H
.UUH I
DefaultUUI P
.UUP QA
4MinimoDeCaracteresParaBuscarEnSelectorActorComercial	UUQ Ö
;
UUÖ Ü
ViewBagVV 
.VV ;
/mascaraDeVisualizacionValidacionRegistroClienteVV C
=VVD E
ActorSettingsVVF S
.VVS T
DefaultVVT [
.VV[ \<
/MascaraDeVisualizacionValidacionRegistroCliente	VV\ ã
;
VVã å
ViewBagWW 
.WW =
1mascaraDeVisualizacionValidacionRegistroProveedorWW E
=WWF G
ActorSettingsWWH U
.WWU V
DefaultWWV ]
.WW] ^>
1MascaraDeVisualizacionValidacionRegistroProveedor	WW^ è
;
WWè ê
ViewBagXX 
.XX <
0mascaraDeVisualizacionValidacionRegistroEmpleadoXX D
=XXE F
ActorSettingsXXG T
.XXT U
DefaultXXU \
.XX\ ]=
0MascaraDeVisualizacionValidacionRegistroEmpleado	XX] ç
;
XXç é
returnYY 
ViewYY 
(YY 
)YY 
;YY 
}ZZ 	
public]] 
ActionResult]]  
ReporteCuentasCobrar]] 0
(]]0 1
)]]1 2
{^^ 	
return__ 
View__ 
(__ 
)__ 
;__ 
}`` 	
publicbb 
ActionResultbb 
ReporteCuentasPagarbb /
(bb/ 0
)bb0 1
{cc 	
returndd 
Viewdd 
(dd 
)dd 
;dd 
}ee 	
[ff 	
	Authorizeff	 
(ff 
Rolesff 
=ff 
$strff 4
)ff4 5
]ff5 6
publicgg 
ActionResultgg 
InicializarCajagg +
(gg+ ,
)gg, -
{hh 	
returnii 
Viewii 
(ii 
)ii 
;ii 
}jj 	
publicpp 

JsonResultpp )
ObtenerCuentasPorCobrarOPagarpp 7
(pp7 8
boolpp8 <
	porCobrarpp= F
)ppF G
{qq 	
tryrr 
{ss 
Listtt 
<tt 
Cuenta_Cobrar_Pagartt (
>tt( )
	resultadott* 3
=tt4 5
	porCobrartt6 ?
?tt@ A
operacionLogicattB Q
.ttQ R#
ObtenerCuentasPorCobrarttR i
(tti j
)ttj k
:ttl m
operacionLogicattn }
.tt} ~#
ObtenerCuentasPorPagar	tt~ î
(
ttî ï
)
ttï ñ
;
ttñ ó
varuu 

jsonResultuu 
=uu  
Jsonuu! %
(uu% &
	resultadouu& /
,uu/ 0
JsonRequestBehavioruu1 D
.uuD E
AllowGetuuE M
)uuM N
;uuN O

jsonResultvv 
.vv 
MaxJsonLengthvv (
=vv) *
intvv+ .
.vv. /
MaxValuevv/ 7
;vv7 8
returnww 

jsonResultww !
;ww! "
}xx 
catchyy 
(yy 
	Exceptionyy 
eyy 
)yy 
{zz 
return{{ 
Json{{ 
({{ 
Util{{  
.{{  !
	ErrorJson{{! *
({{* +
e{{+ ,
){{, -
){{- .
;{{. /
}|| 
}}} 	
public~~ 

JsonResult~~ 2
&ObtenerCuentasPorCobrarOPagarPorGrupos~~ @
(~~@ A
bool~~A E
	porCobrar~~F O
,~~O P
bool~~Q U
todosLosGrupos~~V d
,~~d e
int~~f i
?~~i j
[~~j k
]~~k l
	idsGrupos~~m v
)~~v w
{ 	
try
ÄÄ 
{
ÅÅ 
List
ÇÇ 
<
ÇÇ !
Cuenta_Cobrar_Pagar
ÇÇ (
>
ÇÇ( )
	resultado
ÇÇ* 3
=
ÇÇ4 5
	porCobrar
ÇÇ6 ?
?
ÇÇ@ A
operacionLogica
ÇÇB Q
.
ÇÇQ R.
 ObtenerCuentasPorCobrarPorGrupos
ÇÇR r
(
ÇÇr s
todosLosGruposÇÇs Å
,ÇÇÅ Ç
	idsGruposÇÇÉ å
)ÇÇå ç
:ÇÇé è
operacionLogicaÇÇê ü
.ÇÇü †/
ObtenerCuentasPorPagarPorGruposÇÇ† ø
(ÇÇø ¿
todosLosGruposÇÇ¿ Œ
,ÇÇŒ œ
	idsGruposÇÇ– Ÿ
)ÇÇŸ ⁄
;ÇÇ⁄ €
var
ÉÉ 

jsonResult
ÉÉ 
=
ÉÉ  
Json
ÉÉ! %
(
ÉÉ% &
	resultado
ÉÉ& /
,
ÉÉ/ 0!
JsonRequestBehavior
ÉÉ1 D
.
ÉÉD E
AllowGet
ÉÉE M
)
ÉÉM N
;
ÉÉN O

jsonResult
ÑÑ 
.
ÑÑ 
MaxJsonLength
ÑÑ (
=
ÑÑ) *
int
ÑÑ+ .
.
ÑÑ. /
MaxValue
ÑÑ/ 7
;
ÑÑ7 8
return
ÖÖ 

jsonResult
ÖÖ !
;
ÖÖ! "
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
e
áá 
)
áá 
{
àà 
return
ââ 
Json
ââ 
(
ââ 
Util
ââ  
.
ââ  !
	ErrorJson
ââ! *
(
ââ* +
e
ââ+ ,
)
ââ, -
)
ââ- .
;
ââ. /
}
ää 
}
ãã 	
public
åå 

JsonResult
åå 
CobrarPagarCuota
åå *
(
åå* +"
MovimientoEconomico_
åå+ ?

movimiento
åå@ J
)
ååJ K
{
çç 	
try
éé 
{
èè 
OperationResult
êê 
result
êê  &
=
êê' (
operacionLogica
êê) 8
.
êê8 9(
GuardarMovimientoEconomico
êê9 S
(
êêS T

movimiento
êêT ^
,
êê^ _
ProfileData
êê_ j
(
êêj k
)
êêk l
)
êêl m
;
êêm n
Util
ëë 
.
ëë (
ManageIfResultIsNotSuccess
ëë /
(
ëë/ 0
result
ëë0 6
,
ëë6 7
$str
ëë8 ^
)
ëë^ _
;
ëë_ `
return
íí 
Json
íí 
(
íí 
new
íí 
{
íí  !
result
íí" (
.
íí( )
code_result
íí) 4
,
íí4 5
result
íí6 <
.
íí< =
data
íí= A
,
ííA B 
result_description
ííC U
=
ííV W
result
ííX ^
.
íí^ _
title
íí_ d
}
ííe f
)
ííf g
;
ííg h
}
ìì 
catch
îî 
(
îî 
	Exception
îî 
e
îî 
)
îî 
{
ïï 
return
ññ 
new
ññ "
JsonHttpStatusResult
ññ /
(
ññ/ 0
Util
ññ0 4
.
ññ4 5
	ErrorJson
ññ5 >
(
ññ> ?
new
ññ? B
	Exception
ññC L
(
ññL M
$str
ññM s
,
ññs t
e
ññu v
)
ññv w
)
ññw x
,
ññx y
HttpStatusCodeññz à
.ññà â#
InternalServerErrorññâ ú
)ññú ù
;ññù û
}
óó 
}
òò 	
public
öö 
async
öö 
Task
öö 
<
öö 

JsonResult
öö $
>
öö$ %6
(ObtenerTiposDeComprobanteParaCobrarPagar
öö& N
(
ööN O
bool
ööO S
	porCobrar
ööT ]
,
öö] ^
int
öö_ b
idTipoTransaccion
ööc t
)
ööt u
{
õõ 	
try
úú 
{
ùù 
var
ûû 

resultados
ûû 
=
ûû  
	porCobrar
ûû! *
?
ûû+ ,
await
ûû- 2
operacionLogica
ûû3 B
.
ûûB C1
#ObtenerTiposDeComprobanteParaCobrar
ûûC f
(
ûûf g
idTipoTransaccion
ûûg x
,
ûûx y
ProfileDataûûz Ö
(ûûÖ Ü
)ûûÜ á
.ûûá à.
IdCentroDeAtencionSeleccionadoûûà ¶
)ûû¶ ß
:ûû® ©
awaitûû™ Ø
operacionLogicaûû∞ ø
.ûûø ¿2
"ObtenerTiposDeComprobanteParaPagarûû¿ ‚
(ûû‚ „!
idTipoTransaccionûû„ Ù
,ûûÙ ı
ProfileDataûûˆ Å
(ûûÅ Ç
)ûûÇ É
.ûûÉ Ñ.
IdCentroDeAtencionSeleccionadoûûÑ ¢
)ûû¢ £
;ûû£ §
List
üü 
<
üü '
SelectorTipoDeComprobante
üü .
>
üü. /
comprobantes
üü0 <
=
üü= >'
SelectorTipoDeComprobante
üü? X
.
üüX Y
Convert
üüY `
(
üü` a

resultados
üüa k
)
üük l
;
üül m
return
†† 
Json
†† 
(
†† 
comprobantes
†† (
)
††( )
;
††) *
}
°° 
catch
¢¢ 
(
¢¢ 
	Exception
¢¢ 
e
¢¢ 
)
¢¢ 
{
££ 
return
§§ 
Json
§§ 
(
§§ 
Util
§§  
.
§§  !
	ErrorJson
§§! *
(
§§* +
e
§§+ ,
)
§§, -
)
§§- .
;
§§. /
}
•• 
}
¶¶ 	
public
®® 

JsonResult
®® *
ObtenerCuotaOperacionDetalle
®® 7
(
®®7 8
long
®®8 <
idCuota
®®= D
)
®®D E
{
©© 	
try
™™ 
{
´´ "
CuentaPorCobrarPagar
¨¨ $
cuenta
¨¨% +
=
¨¨, -
operacionLogica
¨¨. =
.
¨¨= >,
ObtenerCuentaIncluidoOperacion
¨¨> \
(
¨¨\ ]
idCuota
¨¨] d
)
¨¨d e
;
¨¨e f
OrdenDeVenta
≠≠ 
ordenDeVenta
≠≠ )
=
≠≠* +
operacionLogica
≠≠, ;
.
≠≠; <!
ObtenerOrdenDeVenta
≠≠< O
(
≠≠O P
cuenta
≠≠P V
.
≠≠V W
IdOperacionBase
≠≠W f
)
≠≠f g
;
≠≠g h
var
ÆÆ 
sede
ÆÆ 
=
ÆÆ 
ObtenerSede
ÆÆ &
(
ÆÆ& '
)
ÆÆ' (
;
ÆÆ( )
string
ØØ 
	QrContent
ØØ  
=
ØØ! "*
facturacionElectronicaLogica
ØØ# ?
.
ØØ? @
	ObtenerQR
ØØ@ I
(
ØØI J
ordenDeVenta
ØØJ V
,
ØØV W
sede
ØØX \
)
ØØ\ ]
;
ØØ] ^
byte
∞∞ 
[
∞∞ 
]
∞∞ 
QrBytes
∞∞ 
=
∞∞  
barCodeUtil
∞∞! ,
.
∞∞, -
ObtenerCodigoQR
∞∞- <
(
∞∞< =
	QrContent
∞∞= F
)
∞∞F G
;
∞∞G H
string
±± 
htmlStringA4
±± #
=
±±$ %#
CoreHtmlStringBuilder
±±& ;
.
±±; <
ObtenerHtmlString
±±< M
(
±±M N
ordenDeVenta
±±N Z
,
±±Z [
FormatoImpresion
±±\ l
.
±±l m
A4
±±m o
,
±±o p
QrBytes
±±q x
,
±±x y
sede
±±z ~
,
±±~ 
this±±Ä Ñ
,±±Ñ Ö
maestroLogica±±Ü ì
)±±ì î
;±±î ï
if
≤≤ 
(
≤≤ 
string
≤≤ 
.
≤≤ 
IsNullOrEmpty
≤≤ (
(
≤≤( )
htmlStringA4
≤≤) 5
)
≤≤5 6
)
≤≤6 7
{
≥≥ !
MovimientoEconomico
¥¥ '

movimiento
¥¥( 2
=
¥¥3 4
operacionLogica
¥¥5 D
.
¥¥D E(
ObtenerMovimientoEconomico
¥¥E _
(
¥¥_ `
cuenta
¥¥` f
.
¥¥f g
IdOperacionBase
¥¥g v
+
¥¥w x
$num
¥¥y z
)
¥¥z {
;
¥¥{ |
htmlStringA4
µµ  
=
µµ! "#
CoreHtmlStringBuilder
µµ# 8
.
µµ8 9
ObtenerHtmlString
µµ9 J
(
µµJ K

movimiento
µµK U
,
µµU V
FormatoImpresion
µµW g
.
µµg h
A4
µµh j
,
µµj k
sede
µµl p
,
µµp q
this
µµr v
)
µµv w
;
µµw x
}
∂∂ 
return
∑∑ 
Json
∑∑ 
(
∑∑ 
new
∑∑ ,
DetalleCuotaOperacionViewModel
∑∑  >
(
∑∑> ?
cuenta
∑∑? E
,
∑∑E F
htmlStringA4
∑∑G S
)
∑∑S T
)
∑∑T U
;
∑∑U V
}
∏∏ 
catch
ππ 
(
ππ 
	Exception
ππ 
e
ππ 
)
ππ 
{
∫∫ 
return
ªª 
new
ªª "
JsonHttpStatusResult
ªª /
(
ªª/ 0
Util
ªª0 4
.
ªª4 5
	ErrorJson
ªª5 >
(
ªª> ?
new
ªª? B
	Exception
ªªC L
(
ªªL M
$str
ªªM n
,
ªªn o
e
ªªp q
)
ªªq r
)
ªªr s
,
ªªs t
HttpStatusCodeªªu É
.ªªÉ Ñ#
InternalServerErrorªªÑ ó
)ªªó ò
;ªªò ô
}
ºº 
}
ΩΩ 	
public
ææ 
void
ææ 
	PrintFile
ææ 
(
ææ 
long
ææ "
idOperacion
ææ# .
)
ææ. /
{
øø 	!
MovimientoEconomico
¿¿ 

movimiento
¿¿  *
=
¿¿+ ,
operacionLogica
¿¿- <
.
¿¿< =(
ObtenerMovimientoEconomico
¿¿= W
(
¿¿W X
idOperacion
¿¿X c
)
¿¿c d
;
¿¿d e
var
¡¡ 
sede
¡¡ 
=
¡¡ 
ObtenerSede
¡¡ "
(
¡¡" #
)
¡¡# $
;
¡¡$ %
var
¬¬ 
PDFventa
¬¬ 
=
¬¬ "
ObtenerPdfMovimiento
¬¬ /
(
¬¬/ 0

movimiento
¬¬0 :
,
¬¬: ;
sede
¬¬< @
,
¬¬@ A
(
¬¬B C
FormatoImpresion
¬¬C S
)
¬¬S T
VentasSettings
¬¬T b
.
¬¬b c
Default
¬¬c j
.
¬¬j k)
formatoImpresionPorDefecto¬¬k Ö
)¬¬Ö Ü
;¬¬Ü á
PrintFilePDF
√√ 
file
√√ 
=
√√ 
null
√√  $
;
√√$ %
file
ƒƒ 
=
ƒƒ 
new
ƒƒ 
PrintFilePDF
ƒƒ #
(
ƒƒ# $
PDFventa
ƒƒ$ ,
.
ƒƒ, -
Save
ƒƒ- 1
(
ƒƒ1 2
)
ƒƒ2 3
,
ƒƒ3 4

movimiento
ƒƒ5 ?
.
ƒƒ? @
Id
ƒƒ@ B
+
ƒƒC D
$str
ƒƒE K
)
ƒƒK L
;
ƒƒL M
file
≈≈ 
.
≈≈ 
PrintRotation
≈≈ 
=
≈≈  
PrintRotation
≈≈! .
.
≈≈. /
None
≈≈/ 3
;
≈≈3 4
ClientPrintJob
∆∆ 
cpj
∆∆ 
=
∆∆  
new
∆∆! $
ClientPrintJob
∆∆% 3
(
∆∆3 4
)
∆∆4 5
;
∆∆5 6
cpj
«« 
.
«« 
	PrintFile
«« 
=
«« 
file
««  
;
««  !
cpj
»» 
.
»» 
	PrintFile
»» 
.
»» 
Copies
»»  
=
»»! "
$num
»»# $
;
»»$ %
cpj
…… 
.
…… 
ClientPrinter
…… 
=
…… 
new
……  #
DefaultPrinter
……$ 2
(
……2 3
)
……3 4
;
……4 5
System
   
.
   
Web
   
.
   
HttpContext
   "
.
  " #
Current
  # *
.
  * +
Response
  + 3
.
  3 4
ContentType
  4 ?
=
  @ A
$str
  B \
;
  \ ]
System
ÀÀ 
.
ÀÀ 
Web
ÀÀ 
.
ÀÀ 
HttpContext
ÀÀ "
.
ÀÀ" #
Current
ÀÀ# *
.
ÀÀ* +
Response
ÀÀ+ 3
.
ÀÀ3 4
BinaryWrite
ÀÀ4 ?
(
ÀÀ? @
cpj
ÀÀ@ C
.
ÀÀC D

GetContent
ÀÀD N
(
ÀÀN O
)
ÀÀO P
)
ÀÀP Q
;
ÀÀQ R
System
ÃÃ 
.
ÃÃ 
Web
ÃÃ 
.
ÃÃ 
HttpContext
ÃÃ "
.
ÃÃ" #
Current
ÃÃ# *
.
ÃÃ* +
Response
ÃÃ+ 3
.
ÃÃ3 4
End
ÃÃ4 7
(
ÃÃ7 8
)
ÃÃ8 9
;
ÃÃ9 :
}
ÕÕ 	
public
ŒŒ 
PdfDocument
ŒŒ "
ObtenerPdfMovimiento
ŒŒ /
(
ŒŒ/ 0!
MovimientoEconomico
ŒŒ0 C!
movimientoEconomico
ŒŒD W
,
ŒŒW X7
(EstablecimientoComercialExtendidoConLogoŒŒY Å
sedeŒŒÇ Ü
,ŒŒÜ á 
FormatoImpresionŒŒà ò
formatoŒŒô †
)ŒŒ† °
{
œœ 	
string
–– 
result
–– 
=
–– #
CoreHtmlStringBuilder
–– 1
.
––1 2
ObtenerHtmlString
––2 C
(
––C D!
movimientoEconomico
––D W
,
––W X
formato
––Y `
,
––` a
sede
––b f
,
––f g
this
––h l
)
––l m
;
––m n
var
—— 
Renderer
—— 
=
—— 
new
—— 
	SelectPdf
—— (
.
——( )
	HtmlToPdf
——) 2
(
——2 3
)
——3 4
;
——4 5
if
”” 
(
”” 
formato
”” 
==
”” 
FormatoImpresion
”” +
.
””+ ,
_80mm
””, 1
)
””1 2
{
‘‘ 
Renderer
’’ 
.
’’ 
Options
’’  
.
’’  !
AutoFitWidth
’’! -
=
’’. /"
HtmlToPdfPageFitMode
’’0 D
.
’’D E
NoAdjustment
’’E Q
;
’’Q R
Renderer
÷÷ 
.
÷÷ 
Options
÷÷  
.
÷÷  !
AutoFitHeight
÷÷! .
=
÷÷/ 0"
HtmlToPdfPageFitMode
÷÷1 E
.
÷÷E F
NoAdjustment
÷÷F R
;
÷÷R S
Renderer
◊◊ 
.
◊◊ 
Options
◊◊  
.
◊◊  !
WebPageWidth
◊◊! -
=
◊◊. /
$num
◊◊0 4
;
◊◊4 5
Renderer
ÿÿ 
.
ÿÿ 
Options
ÿÿ  
.
ÿÿ  !
WebPageHeight
ÿÿ! .
=
ÿÿ/ 0
$num
ÿÿ1 2
;
ÿÿ2 3
Renderer
ŸŸ 
.
ŸŸ 
Options
ŸŸ  
.
ŸŸ  !
WebPageFixedSize
ŸŸ! 1
=
ŸŸ2 3
false
ŸŸ4 9
;
ŸŸ9 :
Renderer
⁄⁄ 
.
⁄⁄ 
Options
⁄⁄  
.
⁄⁄  !
PdfPageSize
⁄⁄! ,
=
⁄⁄- .
PdfPageSize
⁄⁄/ :
.
⁄⁄: ;
Custom
⁄⁄; A
;
⁄⁄A B
Renderer
€€ 
.
€€ 
Options
€€  
.
€€  !
PdfPageCustomSize
€€! 2
=
€€3 4
new
€€5 8
SizeF
€€9 >
(
€€> ?
$num
€€? B
,
€€B C
$num
€€D G
)
€€G H
;
€€H I
}
‹‹ 
else
›› 
if
›› 
(
›› 
formato
›› 
==
›› 
FormatoImpresion
››  0
.
››0 1
A4
››1 3
)
››3 4
{
ﬁﬁ 
Renderer
ﬂﬂ 
.
ﬂﬂ 
Options
ﬂﬂ  
.
ﬂﬂ  !
PdfPageSize
ﬂﬂ! ,
=
ﬂﬂ- .
PdfPageSize
ﬂﬂ/ :
.
ﬂﬂ: ;
A4
ﬂﬂ; =
;
ﬂﬂ= >
}
‡‡ 
else
·· 
if
·· 
(
·· 
formato
·· 
==
·· 
FormatoImpresion
··  0
.
··0 1
_56mm
··1 6
)
··6 7
{
‚‚ 
Renderer
„„ 
.
„„ 
Options
„„  
.
„„  !
AutoFitWidth
„„! -
=
„„. /"
HtmlToPdfPageFitMode
„„0 D
.
„„D E
NoAdjustment
„„E Q
;
„„Q R
Renderer
‰‰ 
.
‰‰ 
Options
‰‰  
.
‰‰  !
AutoFitHeight
‰‰! .
=
‰‰/ 0"
HtmlToPdfPageFitMode
‰‰1 E
.
‰‰E F
AutoFit
‰‰F M
;
‰‰M N
Renderer
ÂÂ 
.
ÂÂ 
Options
ÂÂ  
.
ÂÂ  !
WebPageWidth
ÂÂ! -
=
ÂÂ. /
$num
ÂÂ0 3
;
ÂÂ3 4
Renderer
ÊÊ 
.
ÊÊ 
Options
ÊÊ  
.
ÊÊ  !
WebPageHeight
ÊÊ! .
=
ÊÊ/ 0
$num
ÊÊ1 2
;
ÊÊ2 3
Renderer
ÁÁ 
.
ÁÁ 
Options
ÁÁ  
.
ÁÁ  !
WebPageFixedSize
ÁÁ! 1
=
ÁÁ2 3
false
ÁÁ4 9
;
ÁÁ9 :
Renderer
ËË 
.
ËË 
Options
ËË  
.
ËË  !
PdfPageSize
ËË! ,
=
ËË- .
PdfPageSize
ËË/ :
.
ËË: ;
Custom
ËË; A
;
ËËA B
Renderer
ÈÈ 
.
ÈÈ 
Options
ÈÈ  
.
ÈÈ  !
PdfPageCustomSize
ÈÈ! 2
=
ÈÈ3 4
new
ÈÈ5 8
SizeF
ÈÈ9 >
(
ÈÈ> ?
$num
ÈÈ? B
,
ÈÈB C
$num
ÈÈD G
)
ÈÈG H
;
ÈÈH I
}
ÍÍ 
Renderer
ÎÎ 
.
ÎÎ 
Options
ÎÎ 
.
ÎÎ 
MarginBottom
ÎÎ )
=
ÎÎ* +
$num
ÎÎ, -
;
ÎÎ- .
Renderer
ÏÏ 
.
ÏÏ 
Options
ÏÏ 
.
ÏÏ 
	MarginTop
ÏÏ &
=
ÏÏ' (
$num
ÏÏ) *
;
ÏÏ* +
Renderer
ÌÌ 
.
ÌÌ 
Options
ÌÌ 
.
ÌÌ 

MarginLeft
ÌÌ '
=
ÌÌ( )
$num
ÌÌ* +
;
ÌÌ+ ,
Renderer
ÓÓ 
.
ÓÓ 
Options
ÓÓ 
.
ÓÓ 
MarginRight
ÓÓ (
=
ÓÓ) *
$num
ÓÓ+ ,
;
ÓÓ, -
Renderer
ÔÔ 
.
ÔÔ 
Options
ÔÔ 
.
ÔÔ 
DisplayHeader
ÔÔ *
=
ÔÔ+ ,
false
ÔÔ- 2
;
ÔÔ2 3
Renderer
 
.
 
Options
 
.
 $
JpegCompressionEnabled
 3
=
4 5
false
6 ;
;
; <
return
ÒÒ 
Renderer
ÒÒ 
.
ÒÒ 
ConvertHtmlString
ÒÒ -
(
ÒÒ- .
result
ÒÒ. 4
)
ÒÒ4 5
;
ÒÒ5 6
}
ÚÚ 	
public
˜˜ 

JsonResult
˜˜  
ObtenerCobrosPagos
˜˜ ,
(
˜˜, -
bool
˜˜- 1
esCobro
˜˜2 9
,
˜˜9 :
string
˜˜; A
desde
˜˜B G
,
˜˜G H
string
˜˜I O
hasta
˜˜P U
)
˜˜U V
{
¯¯ 	
DateTime
˘˘ 

fechaDesde
˘˘ 
=
˘˘  !
DateTimeUtil
˘˘" .
.
˘˘. /E
7ObtenerFechaDesdeConPrecisionDeHorasMinutosMilisegundos
˘˘/ f
(
˘˘f g
desde
˘˘g l
)
˘˘l m
;
˘˘m n
DateTime
˙˙ 

fechaHasta
˙˙ 
=
˙˙  !
DateTimeUtil
˙˙" .
.
˙˙. /E
7ObtenerFechaHastaConPrecisionDeHorasMinutosMilisegundos
˙˙/ f
(
˙˙f g
hasta
˙˙g l
)
˙˙l m
;
˙˙m n
try
˚˚ 
{
¸¸ 
List
˝˝ 
<
˝˝ 

Cobro_Pago
˝˝ 
>
˝˝  
	resultado
˝˝! *
=
˝˝+ ,
esCobro
˝˝- 4
?
˝˝5 6
operacionLogica
˝˝7 F
.
˝˝F G
ObtenerCobros
˝˝G T
(
˝˝T U

fechaDesde
˝˝U _
,
˝˝_ `

fechaHasta
˝˝a k
)
˝˝k l
:
˛˛5 6
operacionLogica
˛˛7 F
.
˛˛F G
ObtenerPagos
˛˛G S
(
˛˛S T

fechaDesde
˛˛T ^
,
˛˛^ _

fechaHasta
˛˛` j
)
˛˛j k
;
˛˛k l
return
ˇˇ 
Json
ˇˇ 
(
ˇˇ 
	resultado
ˇˇ %
)
ˇˇ% &
;
ˇˇ& '
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ 
	Exception
ÅÅ 
e
ÅÅ 
)
ÅÅ 
{
ÇÇ 
return
ÉÉ 
Json
ÉÉ 
(
ÉÉ 
Util
ÉÉ  
.
ÉÉ  !
	ErrorJson
ÉÉ! *
(
ÉÉ* +
e
ÉÉ+ ,
)
ÉÉ, -
)
ÉÉ- .
;
ÉÉ. /
}
ÑÑ 
}
ÖÖ 	
public
áá 

JsonResult
áá +
ObtenerDocumentoIngresoEgreso
áá 7
(
áá7 8
long
áá8 <
idOperacion
áá= H
)
ááH I
{
àà 	
try
ââ 
{
ää !
MovimientoEconomico
ãã #

movimiento
ãã$ .
=
ãã/ 0
operacionLogica
ãã1 @
.
ãã@ A(
ObtenerMovimientoEconomico
ããA [
(
ãã[ \
idOperacion
ãã\ g
)
ããg h
;
ããh i
var
åå 
sede
åå 
=
åå 
ObtenerSede
åå &
(
åå& '
)
åå' (
;
åå( )
var
çç 

htmlString
çç 
=
çç  #
CoreHtmlStringBuilder
çç! 6
.
çç6 7
ObtenerHtmlString
çç7 H
(
ççH I

movimiento
ççI S
,
ççS T
FormatoImpresion
ççU e
.
ççe f
_80mm
ççf k
,
ççk l
sede
ççm q
,
ççq r
this
ççs w
)
ççw x
;
ççx y
return
éé 
Json
éé 
(
éé 
new
éé 
{
éé  !

htmlString
éé" ,
,
éé, -
accionInvalidar
éé. =
=
éé> ?

movimiento
éé@ J
.
ééJ K
IdEstadoActual
ééK Y
==
ééZ \
MaestroSettings
éé] l
.
éél m
Default
éém t
.
éét u/
 IdDetalleMaestroEstadoConfirmadoééu ï
}ééñ ó
)ééó ò
;ééò ô
}
èè 
catch
êê 
(
êê 
	Exception
êê 
e
êê 
)
êê 
{
ëë 
return
íí 
Json
íí 
(
íí 
Util
íí  
.
íí  !
	ErrorJson
íí! *
(
íí* +
e
íí+ ,
)
íí, -
)
íí- .
;
íí. /
}
ìì 
}
îî 	
public
ññ 

JsonResult
ññ &
ObtenerHtmlIngresoEgreso
ññ 2
(
ññ2 3
long
ññ3 7
idOperacion
ññ8 C
,
ññC D
int
ññE H
formato
ññI P
)
ññP Q
{
óó 	!
MovimientoEconomico
òò 

movimiento
òò  *
=
òò+ ,
operacionLogica
òò- <
.
òò< =(
ObtenerMovimientoEconomico
òò= W
(
òòW X
idOperacion
òòX c
)
òòc d
;
òòd e
var
ôô 
sede
ôô 
=
ôô 
ObtenerSede
ôô "
(
ôô" #
)
ôô# $
;
ôô$ %
var
öö 

htmlString
öö 
=
öö #
CoreHtmlStringBuilder
öö 2
.
öö2 3
ObtenerHtmlString
öö3 D
(
ööD E

movimiento
ööE O
,
ööO P
(
ööQ R
FormatoImpresion
ööR b
)
ööb c
formato
ööc j
,
ööj k
sede
ööl p
,
ööp q
this
öör v
)
ööv w
;
ööw x
return
õõ 
Json
õõ 
(
õõ 

htmlString
õõ "
)
õõ" #
;
õõ# $
}
úú 	
public
ûû 

JsonResult
ûû >
0EnviarCorreoElectronicoConDocumentoIngresoEgreso
ûû J
(
ûûJ K
long
ûûK O
idOperacion
ûûP [
,
ûû[ \
int
ûû] `
formato
ûûa h
,
ûûh i
List
ûûj n
<
ûûn o
string
ûûo u
>
ûûu v"
correosElectronicosûûw ä
)ûûä ã
{
üü 	
try
†† 
{
°° !
MovimientoEconomico
¢¢ #

movimiento
¢¢$ .
=
¢¢/ 0
operacionLogica
¢¢1 @
.
¢¢@ A(
ObtenerMovimientoEconomico
¢¢A [
(
¢¢[ \
idOperacion
¢¢\ g
)
¢¢g h
;
¢¢h i
var
££ 
sede
££ 
=
££ 
ObtenerSede
££ &
(
££& '
)
££' (
;
££( )
PdfDocument
§§ 
pdfVenta
§§ $
=
§§% &%
ObtenerPdfIngresoEgreso
§§' >
(
§§> ?

movimiento
§§? I
,
§§I J
sede
§§K O
,
§§O P
(
§§Q R
FormatoImpresion
§§R b
)
§§b c
formato
§§c j
)
§§j k
;
§§k l
string
¶¶ 
asunto
¶¶ 
=
¶¶ 
operacionLogica
¶¶  /
.
¶¶/ 0.
 ObtenerAsuntoDeCorreoElectronico
¶¶0 P
(
¶¶P Q
sede
¶¶Q U
,
¶¶U V

movimiento
¶¶W a
)
¶¶a b
;
¶¶b c
string
ßß 
cuerpo
ßß 
=
ßß 
operacionLogica
ßß  /
.
ßß/ 0.
 ObtenerCuerpoDeCorreoElectronico
ßß0 P
(
ßßP Q
sede
ßßQ U
,
ßßU V

movimiento
ßßW a
)
ßßa b
;
ßßb c
OperationResult
®® 
result
®®  &
=
®®' (
mailer
®®) /
.
®®/ 0
Send
®®0 4
(
®®4 5
asunto
®®5 ;
,
®®; <
cuerpo
®®= C
,
®®C D!
correosElectronicos
®®E X
,
®®X Y 
AplicacionSettings
®®Z l
.
®®l m
Default
®®m t
.
®®t u
ToMailDefault®®u Ç
,®®Ç É
new®®Ñ á
List®®à å
<®®å ç

Attachment®®ç ó
>®®ó ò
(®®ò ô
)®®ô ö
{®®õ ú
new®®ù †

Attachment®®° ´
(®®´ ¨
new®®¨ Ø
MemoryStream®®∞ º
(®®º Ω
pdfVenta®®Ω ≈
.®®≈ ∆
Save®®∆  
(®®  À
)®®À Ã
)®®Ã Õ
,®®Õ Œ

movimiento®®œ Ÿ
.®®Ÿ ⁄
Comprobante®®⁄ Â
(®®Â Ê
)®®Ê Á
.®®Á Ë
NumeroDeSerie®®Ë ı
+®®ˆ ˜
$str®®¯ ˝
+®®˛ ˇ

movimiento®®Ä ä
.®®ä ã
Comprobante®®ã ñ
(®®ñ ó
)®®ó ò
.®®ò ô#
NumeroDeComprobante®®ô ¨
+®®≠ Æ
$str®®Ø ¥
+®®µ ∂

movimiento®®∑ ¡
.®®¡ ¬
Tercero®®¬ …
(®®…  
)®®  À
.®®À Ã
RazonSocial®®Ã ◊
+®®ÿ Ÿ
$str®®⁄ ‡
,®®‡ ·
$str®®‚ Û
)®®Û Ù
}®®ı ˆ
)®®ˆ ˜
;®®˜ ¯
return
©© 
Json
©© 
(
©© 
new
©© 
{
©©  !
result
©©" (
.
©©( )
code_result
©©) 4
,
©©4 5
data
©©6 :
=
©©; <
result
©©= C
.
©©C D
information
©©D O
,
©©O P 
result_description
©©Q c
=
©©d e
result
©©f l
.
©©l m
title
©©m r
}
©©s t
)
©©t u
;
©©u v
}
™™ 
catch
´´ 
(
´´ 
	Exception
´´ 
e
´´ 
)
´´ 
{
¨¨ 
return
≠≠ 
new
≠≠ "
JsonHttpStatusResult
≠≠ /
(
≠≠/ 0
Util
≠≠0 4
.
≠≠4 5
	ErrorJson
≠≠5 >
(
≠≠> ?
e
≠≠? @
)
≠≠@ A
,
≠≠A B
HttpStatusCode
≠≠C Q
.
≠≠Q R!
InternalServerError
≠≠R e
)
≠≠e f
;
≠≠f g
}
ÆÆ 
}
∞∞ 	
public
≤≤ 
ActionResult
≤≤ -
DescargarDocumentoIngresoEgreso
≤≤ ;
(
≤≤; <
long
≤≤< @
idOperacion
≤≤A L
,
≤≤L M
int
≤≤N Q
formato
≤≤R Y
)
≤≤Y Z
{
≥≥ 	
try
¥¥ 
{
µµ !
MovimientoEconomico
∂∂ #

movimiento
∂∂$ .
=
∂∂/ 0
operacionLogica
∂∂1 @
.
∂∂@ A(
ObtenerMovimientoEconomico
∂∂A [
(
∂∂[ \
idOperacion
∂∂\ g
)
∂∂g h
;
∂∂h i
var
∑∑ 
sede
∑∑ 
=
∑∑ 
ObtenerSede
∑∑ &
(
∑∑& '
)
∑∑' (
;
∑∑( )
PdfDocument
∏∏ 
pdfVenta
∏∏ $
=
∏∏% &%
ObtenerPdfIngresoEgreso
∏∏' >
(
∏∏> ?

movimiento
∏∏? I
,
∏∏I J
sede
∏∏K O
,
∏∏O P
(
∏∏Q R
FormatoImpresion
∏∏R b
)
∏∏b c
formato
∏∏c j
)
∏∏j k
;
∏∏k l
byte
∫∫ 
[
∫∫ 
]
∫∫ 
	fileBytes
∫∫  
=
∫∫! "
pdfVenta
∫∫# +
.
∫∫+ ,
Save
∫∫, 0
(
∫∫0 1
)
∫∫1 2
;
∫∫2 3
string
ªª 
fileName
ªª 
=
ªª  !

movimiento
ªª" ,
.
ªª, -
Comprobante
ªª- 8
(
ªª8 9
)
ªª9 :
.
ªª: ;
NumeroDeSerie
ªª; H
+
ªªI J
$str
ªªK P
+
ªªQ R

movimiento
ªªS ]
.
ªª] ^
Comprobante
ªª^ i
(
ªªi j
)
ªªj k
.
ªªk l!
NumeroDeComprobante
ªªl 
+ªªÄ Å
$strªªÇ á
+ªªà â

movimientoªªä î
.ªªî ï
Terceroªªï ú
(ªªú ù
)ªªù û
.ªªû ü
RazonSocialªªü ™
+ªª´ ¨
$strªª≠ ≥
;ªª≥ ¥
return
ºº 
File
ºº 
(
ºº 
	fileBytes
ºº %
,
ºº% &
$str
ºº' 8
,
ºº8 9
fileName
ºº: B
)
ººB C
;
ººC D
}
ΩΩ 
catch
ææ 
(
ææ 
	Exception
ææ 
e
ææ 
)
ææ 
{
øø 
return
¿¿ 
new
¿¿ "
JsonHttpStatusResult
¿¿ /
(
¿¿/ 0
Util
¿¿0 4
.
¿¿4 5
	ErrorJson
¿¿5 >
(
¿¿> ?
new
¿¿? B
	Exception
¿¿C L
(
¿¿L M
$str¿¿M è
,¿¿è ê
e¿¿ë í
)¿¿í ì
)¿¿ì î
,¿¿î ï
HttpStatusCode¿¿ñ §
.¿¿§ •#
InternalServerError¿¿• ∏
)¿¿∏ π
;¿¿π ∫
}
¡¡ 
}
¬¬ 	
public
ƒƒ 
PdfDocument
ƒƒ %
ObtenerPdfIngresoEgreso
ƒƒ 2
(
ƒƒ2 3!
MovimientoEconomico
ƒƒ3 F

movimiento
ƒƒG Q
,
ƒƒQ R6
(EstablecimientoComercialExtendidoConLogo
ƒƒS {
sedeƒƒ| Ä
,ƒƒÄ Å 
FormatoImpresionƒƒÇ í
formatoƒƒì ö
)ƒƒö õ
{
≈≈ 	
string
∆∆ 
result
∆∆ 
=
∆∆ #
CoreHtmlStringBuilder
∆∆ 1
.
∆∆1 2
ObtenerHtmlString
∆∆2 C
(
∆∆C D

movimiento
∆∆D N
,
∆∆N O
formato
∆∆P W
,
∆∆W X
sede
∆∆Y ]
,
∆∆] ^
this
∆∆_ c
)
∆∆c d
;
∆∆d e
var
«« 
Renderer
«« 
=
«« 
new
«« 
	SelectPdf
«« (
.
««( )
	HtmlToPdf
««) 2
(
««2 3
)
««3 4
;
««4 5
if
ÀÀ 
(
ÀÀ 
formato
ÀÀ 
==
ÀÀ 
FormatoImpresion
ÀÀ +
.
ÀÀ+ ,
_80mm
ÀÀ, 1
)
ÀÀ1 2
{
ÃÃ 
Renderer
ÕÕ 
.
ÕÕ 
Options
ÕÕ  
.
ÕÕ  !
AutoFitWidth
ÕÕ! -
=
ÕÕ. /"
HtmlToPdfPageFitMode
ÕÕ0 D
.
ÕÕD E
NoAdjustment
ÕÕE Q
;
ÕÕQ R
Renderer
ŒŒ 
.
ŒŒ 
Options
ŒŒ  
.
ŒŒ  !
AutoFitHeight
ŒŒ! .
=
ŒŒ/ 0"
HtmlToPdfPageFitMode
ŒŒ1 E
.
ŒŒE F
NoAdjustment
ŒŒF R
;
ŒŒR S
Renderer
œœ 
.
œœ 
Options
œœ  
.
œœ  !
WebPageWidth
œœ! -
=
œœ. /
$num
œœ0 4
;
œœ4 5
Renderer
–– 
.
–– 
Options
––  
.
––  !
WebPageHeight
––! .
=
––/ 0
$num
––1 2
;
––2 3
Renderer
—— 
.
—— 
Options
——  
.
——  !
WebPageFixedSize
——! 1
=
——2 3
false
——4 9
;
——9 :
Renderer
““ 
.
““ 
Options
““  
.
““  !
PdfPageSize
““! ,
=
““- .
PdfPageSize
““/ :
.
““: ;
Custom
““; A
;
““A B
Renderer
”” 
.
”” 
Options
””  
.
””  !
PdfPageCustomSize
””! 2
=
””3 4
new
””5 8
SizeF
””9 >
(
””> ?
$num
””? B
,
””B C
$num
””D G
)
””G H
;
””H I
}
’’ 
else
÷÷ 
if
÷÷ 
(
÷÷ 
formato
÷÷ 
==
÷÷ 
FormatoImpresion
÷÷  0
.
÷÷0 1
A4
÷÷1 3
)
÷÷3 4
{
◊◊ 
Renderer
ÿÿ 
.
ÿÿ 
Options
ÿÿ  
.
ÿÿ  !
PdfPageSize
ÿÿ! ,
=
ÿÿ- .
PdfPageSize
ÿÿ/ :
.
ÿÿ: ;
A4
ÿÿ; =
;
ÿÿ= >
}
ŸŸ 
else
⁄⁄ 
if
⁄⁄ 
(
⁄⁄ 
formato
⁄⁄ 
==
⁄⁄ 
FormatoImpresion
⁄⁄  0
.
⁄⁄0 1
_56mm
⁄⁄1 6
)
⁄⁄6 7
{
€€ 
Renderer
‹‹ 
.
‹‹ 
Options
‹‹  
.
‹‹  !
AutoFitWidth
‹‹! -
=
‹‹. /"
HtmlToPdfPageFitMode
‹‹0 D
.
‹‹D E
NoAdjustment
‹‹E Q
;
‹‹Q R
Renderer
›› 
.
›› 
Options
››  
.
››  !
AutoFitHeight
››! .
=
››/ 0"
HtmlToPdfPageFitMode
››1 E
.
››E F
AutoFit
››F M
;
››M N
Renderer
ﬁﬁ 
.
ﬁﬁ 
Options
ﬁﬁ  
.
ﬁﬁ  !
WebPageWidth
ﬁﬁ! -
=
ﬁﬁ. /
$num
ﬁﬁ0 3
;
ﬁﬁ3 4
Renderer
ﬂﬂ 
.
ﬂﬂ 
Options
ﬂﬂ  
.
ﬂﬂ  !
WebPageHeight
ﬂﬂ! .
=
ﬂﬂ/ 0
$num
ﬂﬂ1 2
;
ﬂﬂ2 3
Renderer
‡‡ 
.
‡‡ 
Options
‡‡  
.
‡‡  !
WebPageFixedSize
‡‡! 1
=
‡‡2 3
false
‡‡4 9
;
‡‡9 :
Renderer
·· 
.
·· 
Options
··  
.
··  !
PdfPageSize
··! ,
=
··- .
PdfPageSize
··/ :
.
··: ;
Custom
··; A
;
··A B
Renderer
‚‚ 
.
‚‚ 
Options
‚‚  
.
‚‚  !
PdfPageCustomSize
‚‚! 2
=
‚‚3 4
new
‚‚5 8
SizeF
‚‚9 >
(
‚‚> ?
$num
‚‚? B
,
‚‚B C
$num
‚‚D G
)
‚‚G H
;
‚‚H I
}
„„ 
Renderer
ÂÂ 
.
ÂÂ 
Options
ÂÂ 
.
ÂÂ 
MarginBottom
ÂÂ )
=
ÂÂ* +
$num
ÂÂ, -
;
ÂÂ- .
Renderer
ÊÊ 
.
ÊÊ 
Options
ÊÊ 
.
ÊÊ 
	MarginTop
ÊÊ &
=
ÊÊ' (
$num
ÊÊ) *
;
ÊÊ* +
Renderer
ÁÁ 
.
ÁÁ 
Options
ÁÁ 
.
ÁÁ 

MarginLeft
ÁÁ '
=
ÁÁ( )
$num
ÁÁ* +
;
ÁÁ+ ,
Renderer
ËË 
.
ËË 
Options
ËË 
.
ËË 
MarginRight
ËË (
=
ËË) *
$num
ËË+ ,
;
ËË, -
Renderer
ÈÈ 
.
ÈÈ 
Options
ÈÈ 
.
ÈÈ 
DisplayHeader
ÈÈ *
=
ÈÈ+ ,
false
ÈÈ- 2
;
ÈÈ2 3
Renderer
ÍÍ 
.
ÍÍ 
Options
ÍÍ 
.
ÍÍ $
JpegCompressionEnabled
ÍÍ 3
=
ÍÍ4 5
false
ÍÍ6 ;
;
ÍÍ; <
return
ÎÎ 
Renderer
ÎÎ 
.
ÎÎ 
ConvertHtmlString
ÎÎ -
(
ÎÎ- .
result
ÎÎ. 4
)
ÎÎ4 5
;
ÎÎ5 6
}
ÏÏ 	
public
ÓÓ 

JsonResult
ÓÓ *
InvalidarMovimientoEconomico
ÓÓ 6
(
ÓÓ6 7
long
ÓÓ7 ;
idOperacion
ÓÓ< G
,
ÓÓG H
string
ÓÓI O
observacion
ÓÓP [
)
ÓÓ[ \
{
ÔÔ 	
try
 
{
ÒÒ 
OperationResult
ÚÚ 
result
ÚÚ  &
;
ÚÚ& '
result
ÛÛ 
=
ÛÛ 
operacionLogica
ÛÛ (
.
ÛÛ( )*
InvalidarMovimientoEconomico
ÛÛ) E
(
ÛÛE F
idOperacion
ÛÛF Q
,
ÛÛQ R
observacion
ÛÛS ^
,
ÛÛ^ _
ProfileData
ÛÛ` k
(
ÛÛk l
)
ÛÛl m
)
ÛÛm n
;
ÛÛn o
Util
ÙÙ 
.
ÙÙ (
ManageIfResultIsNotSuccess
ÙÙ /
(
ÙÙ/ 0
result
ÙÙ0 6
,
ÙÙ6 7
$str
ÙÙ8 d
)
ÙÙd e
;
ÙÙe f
return
ıı 
Json
ıı 
(
ıı 
new
ıı 
{
ıı  !
result
ıı" (
.
ıı( )
code_result
ıı) 4
,
ıı4 5 
result_description
ıı6 H
=
ııI J
result
ııK Q
.
ııQ R
title
ııR W
}
ııX Y
)
ııY Z
;
ııZ [
}
ˆˆ 
catch
˜˜ 
(
˜˜ 
	Exception
˜˜ 
ex
˜˜ 
)
˜˜  
{
¯¯ 
return
˘˘ 
new
˘˘ "
JsonHttpStatusResult
˘˘ /
(
˘˘/ 0
Util
˘˘0 4
.
˘˘4 5
	ErrorJson
˘˘5 >
(
˘˘> ?
ex
˘˘? A
)
˘˘A B
,
˘˘B C
HttpStatusCode
˘˘D R
.
˘˘R S!
InternalServerError
˘˘S f
)
˘˘f g
;
˘˘g h
}
˙˙ 
}
˚˚ 	
public
ÅÅ 

JsonResult
ÅÅ (
GuardarIngresoEgresoVarios
ÅÅ 4
(
ÅÅ4 5
bool
ÅÅ5 9
	esIngreso
ÅÅ: C
,
ÅÅC D3
%RegistroIngresoYEgresoVariosViewModel
ÅÅE j
modelo
ÅÅk q
)
ÅÅq r
{
ÇÇ 	
try
ÉÉ 
{
ÑÑ 
OperationResult
ÖÖ 
result
ÖÖ  &
=
ÖÖ' (
null
ÖÖ) -
;
ÖÖ- .
if
ÜÜ 
(
ÜÜ 
	esIngreso
ÜÜ 
)
ÜÜ 
{
áá 
result
àà 
=
àà 
operacionLogica
àà ,
.
àà, -"
GuardarIngresoVarios
àà- A
(
ààA B
ProfileData
ààB M
(
ààM N
)
ààN O
.
ààO P
Empleado
ààP X
.
ààX Y
Id
ààY [
,
àà[ \
ProfileData
àà] h
(
ààh i
)
àài j
.
ààj k-
IdCentroDeAtencionSeleccionadoààk â
,ààâ ä
modeloààã ë
.ààë í
Importeààí ô
,ààô ö
modeloààõ °
.àà° ¢
Emisoràà¢ ®
.àà® ©
Idàà© ´
,àà´ ¨
modeloàà≠ ≥
.àà≥ ¥#
PagadorBeneficiarioàà¥ «
.àà« »
Idàà»  
,àà  À
modeloààÃ “
.àà“ ”!
TipoDeComprobanteàà” ‰
.àà‰ Â!
SerieSeleccionadaààÂ ˆ
,ààˆ ˜
modeloàà¯ ˛
.àà˛ ˇ
Observacionààˇ ä
)ààä ã
;ààã å
}
ââ 
else
ää 
{
ãã 
result
åå 
=
åå 
operacionLogica
åå ,
.
åå, -!
GuardarEgresoVarios
åå- @
(
åå@ A
ProfileData
ååA L
(
ååL M
)
ååM N
.
ååN O
Empleado
ååO W
.
ååW X
Id
ååX Z
,
ååZ [
ProfileData
åå\ g
(
ååg h
)
ååh i
.
ååi j-
IdCentroDeAtencionSeleccionadoååj à
,ååà â
modeloååä ê
.ååê ë
Importeååë ò
,ååò ô
modeloååö †
.åå† °
Emisoråå° ß
.ååß ®
Idåå® ™
,åå™ ´
modeloåå¨ ≤
.åå≤ ≥#
PagadorBeneficiarioåå≥ ∆
.åå∆ «
Idåå« …
,åå…  
modeloååÀ —
.åå— “!
TipoDeComprobanteåå“ „
.åå„ ‰!
SerieSeleccionadaåå‰ ı
,ååı ˆ
modeloåå˜ ˝
.åå˝ ˛
Observacionåå˛ â
)ååâ ä
;ååä ã
}
çç 
Util
éé 
.
éé (
ManageIfResultIsNotSuccess
éé /
(
éé/ 0
result
éé0 6
,
éé6 7
$str
éé8 e
)
éée f
;
ééf g
return
èè 
Json
èè 
(
èè 
new
èè 
{
èè  !
codigo
èè" (
=
èè) *
result
èè+ 1
.
èè1 2
code_result
èè2 =
,
èè= > 
result_description
èè? Q
=
èèR S
result
èèT Z
.
èèZ [
title
èè[ `
}
èèa b
)
èèb c
;
èèc d
}
ëë 
catch
íí 
(
íí 
	Exception
íí 
e
íí 
)
íí 
{
ìì 
HttpContext
îî 
.
îî 
Response
îî $
.
îî$ %

StatusCode
îî% /
=
îî0 1
$num
îî2 5
;
îî5 6
return
ïï 
new
ïï "
JsonHttpStatusResult
ïï /
(
ïï/ 0
Util
ïï0 4
.
ïï4 5
	ErrorJson
ïï5 >
(
ïï> ?
e
ïï? @
)
ïï@ A
,
ïïA B
HttpStatusCode
ïïC Q
.
ïïQ R!
InternalServerError
ïïR e
)
ïïe f
;
ïïf g
}
ññ 
}
óó 	
public
ôô 
async
ôô 
Task
ôô 
<
ôô 

JsonResult
ôô $
>
ôô$ %>
0ObtenerTiposDeComprobanteParaIngresoEgresoVarios
ôô& V
(
ôôV W
bool
ôôW [
	esIngreso
ôô\ e
)
ôôe f
{
öö 	
try
õõ 
{
úú 
var
ùù 

resultados
ùù 
=
ùù  
new
ùù! $
List
ùù% )
<
ùù) *.
 TipoDeComprobanteParaTransaccion
ùù* J
>
ùùJ K
(
ùùK L
)
ùùL M
;
ùùM N
if
ûû 
(
ûû 
	esIngreso
ûû 
)
ûû 
{
üü 

resultados
†† 
=
††  
ProfileData
°° 
(
°° 
)
°°  
.
°°  !,
IdCentroDeAtencionSeleccionado
°°! ?
==
°°@ B
ObtenerSede
°°C N
(
°°N O
)
°°O P
.
°°P Q
Id
°°Q S
?
°°T U
await
¢¢ 
operacionLogica
¢¢ (
.
¢¢( )8
*ObtenerTiposDeComprobanteParaIngresoVarios
¢¢) S
(
¢¢S T
)
¢¢T U
:
¢¢V W
await
££ 
operacionLogica
££ (
.
££( )8
*ObtenerTiposDeComprobanteParaIngresoVarios
££) S
(
££S T
ProfileData
££T _
(
££_ `
)
££` a
.
££a b-
IdCentroDeAtencionSeleccionado££b Ä
)££Ä Å
;££Å Ç
}
§§ 
else
•• 
{
¶¶ 

resultados
ßß 
=
ßß  
ProfileData
®® 
(
®® 
)
®®  
.
®®  !,
IdCentroDeAtencionSeleccionado
®®! ?
==
®®@ B
ObtenerSede
®®C N
(
®®N O
)
®®O P
.
®®P Q
Id
®®Q S
?
®®T U
await
©© 
operacionLogica
©© (
.
©©( )7
)ObtenerTiposDeComprobanteParaEgresoVarios
©©) R
(
©©R S
)
©©S T
:
©©U V
await
™™ 
operacionLogica
™™ (
.
™™) *7
)ObtenerTiposDeComprobanteParaEgresoVarios
™™* S
(
™™S T
ProfileData
™™T _
(
™™_ `
)
™™` a
.
™™a b-
IdCentroDeAtencionSeleccionado™™b Ä
)™™Ä Å
;™™Å Ç
}
´´ 
List
ØØ 
<
ØØ '
SelectorTipoDeComprobante
ØØ .
>
ØØ. /
comprobantes
ØØ0 <
=
ØØ= >'
SelectorTipoDeComprobante
ØØ? X
.
ØØX Y
Convert
ØØY `
(
ØØ` a

resultados
ØØa k
)
ØØk l
;
ØØl m
return
∞∞ 
Json
∞∞ 
(
∞∞ 
comprobantes
∞∞ (
)
∞∞( )
;
∞∞) *
}
±± 
catch
≤≤ 
(
≤≤ 
	Exception
≤≤ 
e
≤≤ 
)
≤≤ 
{
≥≥ 
return
¥¥ 
new
¥¥ "
JsonHttpStatusResult
¥¥ /
(
¥¥/ 0
Util
¥¥0 4
.
¥¥4 5
	ErrorJson
¥¥5 >
(
¥¥> ?
e
¥¥? @
)
¥¥@ A
,
¥¥A B
HttpStatusCode
¥¥C Q
.
¥¥Q R!
InternalServerError
¥¥R e
)
¥¥e f
;
¥¥f g
}
µµ 
}
∂∂ 	
public
ªª 
ActionResult
ªª 
CuentasBancarias
ªª ,
(
ªª, -
)
ªª- .
{
ºº 	
ViewBag
ΩΩ 
.
ΩΩ &
idEntidadBancariaNinguna
ΩΩ ,
=
ΩΩ- .
MaestroSettings
ΩΩ/ >
.
ΩΩ> ?
Default
ΩΩ? F
.
ΩΩF G4
&IdDetalleMaestroEntidadBancariaNinguna
ΩΩG m
;
ΩΩm n
return
ææ 
View
ææ 
(
ææ 
)
ææ 
;
ææ 
}
øø 	
public
¡¡ 

JsonResult
¡¡ #
GuardarCuentaBancaria
¡¡ /
(
¡¡/ 0
CuentaBancaria
¡¡0 >
cuentaBancaria
¡¡? M
)
¡¡M N
{
¬¬ 	
try
√√ 
{
ƒƒ 
OperationResult
≈≈ 
	resultado
≈≈  )
;
≈≈) *
if
∆∆ 
(
∆∆ 
cuentaBancaria
∆∆ "
.
∆∆" #
Id
∆∆# %
!=
∆∆& (
$num
∆∆) *
)
∆∆* +
{
«« 
	resultado
»» 
=
»» 
operacionLogica
»»  /
.
»»/ 0&
ActualizarCuentaBancaria
»»0 H
(
»»H I
cuentaBancaria
»»I W
)
»»W X
;
»»X Y
}
…… 
else
   
{
ÀÀ 
	resultado
ÃÃ 
=
ÃÃ 
operacionLogica
ÃÃ  /
.
ÃÃ/ 0!
CrearCuentaBancaria
ÃÃ0 C
(
ÃÃC D
cuentaBancaria
ÃÃD R
)
ÃÃR S
;
ÃÃS T
}
ÕÕ 
Util
ŒŒ 
.
ŒŒ (
ManageIfResultIsNotSuccess
ŒŒ /
(
ŒŒ/ 0
	resultado
ŒŒ0 9
,
ŒŒ9 :
$str
ŒŒ; i
)
ŒŒi j
;
ŒŒj k
return
œœ 
Json
œœ 
(
œœ 
new
œœ 
{
œœ  !
	resultado
œœ" +
.
œœ+ ,
code_result
œœ, 7
,
œœ7 8
	resultado
œœ9 B
.
œœB C
data
œœC G
,
œœG H 
result_description
œœI [
=
œœ\ ]
	resultado
œœ^ g
.
œœg h
title
œœh m
}
œœn o
)
œœo p
;
œœp q
}
–– 
catch
—— 
(
—— 
	Exception
—— 
e
—— 
)
—— 
{
““ 
return
”” 
new
”” "
JsonHttpStatusResult
”” /
(
””/ 0
Util
””0 4
.
””4 5
	ErrorJson
””5 >
(
””> ?
e
””? @
)
””@ A
,
””A B
HttpStatusCode
””C Q
.
””Q R!
InternalServerError
””R e
)
””e f
;
””f g
}
÷÷ 
}
◊◊ 	
public
ŸŸ 

JsonResult
ŸŸ %
ObtenerCuentasBancarias
ŸŸ 1
(
ŸŸ1 2
)
ŸŸ2 3
{
⁄⁄ 	
try
€€ 
{
‹‹ 
var
›› 
cuentasBancarias
›› $
=
››% &
operacionLogica
››' 6
.
››6 7%
ObtenerCuentasBancarias
››7 N
(
››N O
)
››O P
;
››P Q
return
ﬁﬁ 
Json
ﬁﬁ 
(
ﬁﬁ 
cuentasBancarias
ﬁﬁ ,
)
ﬁﬁ, -
;
ﬁﬁ- .
}
ﬂﬂ 
catch
‡‡ 
(
‡‡ 
	Exception
‡‡ 
e
‡‡ 
)
‡‡ 
{
·· 
return
‚‚ 
new
‚‚ "
JsonHttpStatusResult
‚‚ /
(
‚‚/ 0
Util
‚‚0 4
.
‚‚4 5
	ErrorJson
‚‚5 >
(
‚‚> ?
e
‚‚? @
)
‚‚@ A
,
‚‚A B
HttpStatusCode
‚‚C Q
.
‚‚Q R!
InternalServerError
‚‚R e
)
‚‚e f
;
‚‚f g
}
„„ 
}
‰‰ 	
public
ÊÊ 

JsonResult
ÊÊ 9
+ObtenerCuentasBancariasPorEntidadFinanciera
ÊÊ E
(
ÊÊE F
int
ÊÊF I!
idEntidadFinanciera
ÊÊJ ]
)
ÊÊ] ^
{
ÁÁ 	
try
ËË 
{
ÈÈ 
var
ÍÍ 
cuentasBancarias
ÍÍ $
=
ÍÍ% &
operacionLogica
ÍÍ' 6
.
ÍÍ6 79
+ObtenerCuentasBancariasPorEntidadFinanciera
ÍÍ7 b
(
ÍÍb c!
idEntidadFinanciera
ÍÍc v
)
ÍÍv w
;
ÍÍw x
List
ÎÎ 
<
ÎÎ $
ComboGenericoViewModel
ÎÎ +
>
ÎÎ+ ,#
comboCuentasBancarias
ÎÎ- B
=
ÎÎC D$
ComboGenericoViewModel
ÎÎE [
.
ÎÎ[ \
Convert
ÎÎ\ c
(
ÎÎc d
cuentasBancarias
ÎÎd t
)
ÎÎt u
;
ÎÎu v
return
ÏÏ 
Json
ÏÏ 
(
ÏÏ #
comboCuentasBancarias
ÏÏ 1
)
ÏÏ1 2
;
ÏÏ2 3
}
ÌÌ 
catch
ÓÓ 
(
ÓÓ 
	Exception
ÓÓ 
e
ÓÓ 
)
ÓÓ 
{
ÔÔ 
return
 
new
 "
JsonHttpStatusResult
 /
(
/ 0
Util
0 4
.
4 5
	ErrorJson
5 >
(
> ?
e
? @
)
@ A
,
A B
HttpStatusCode
C Q
.
Q R!
InternalServerError
R e
)
e f
;
f g
}
ÒÒ 
}
ÚÚ 	
public
ÙÙ 

JsonResult
ÙÙ B
4ObtenerCuentasBancariasConEntidadFinancieraConMoneda
ÙÙ N
(
ÙÙN O
)
ÙÙO P
{
ıı 	
try
ˆˆ 
{
˜˜ 
var
¯¯ 
cuentasBancarias
¯¯ $
=
¯¯% &
operacionLogica
¯¯' 6
.
¯¯6 7B
4ObtenerCuentasBancariasConEntidadFinancieraConMoneda
¯¯7 k
(
¯¯k l
)
¯¯l m
;
¯¯m n
return
˘˘ 
Json
˘˘ 
(
˘˘ 
cuentasBancarias
˘˘ ,
)
˘˘, -
;
˘˘- .
}
˙˙ 
catch
˚˚ 
(
˚˚ 
	Exception
˚˚ 
e
˚˚ 
)
˚˚ 
{
¸¸ 
return
˝˝ 
new
˝˝ "
JsonHttpStatusResult
˝˝ /
(
˝˝/ 0
Util
˝˝0 4
.
˝˝4 5
	ErrorJson
˝˝5 >
(
˝˝> ?
e
˝˝? @
)
˝˝@ A
,
˝˝A B
HttpStatusCode
˝˝C Q
.
˝˝Q R!
InternalServerError
˝˝R e
)
˝˝e f
;
˝˝f g
}
˛˛ 
}
ˇˇ 	
public
ÖÖ 

JsonResult
ÖÖ $
ObtenerInicializarCaja
ÖÖ 0
(
ÖÖ0 1
)
ÖÖ1 2
{
ÜÜ 	
try
áá 
{
àà 
var
ââ 
cajasAInicializar
ââ %
=
ââ& '
operacionLogica
ââ( 7
.
ââ7 8$
ObtenerInicializarCaja
ââ8 N
(
ââN O
)
ââO P
;
ââP Q
return
ää 
Json
ää 
(
ää 
cajasAInicializar
ää -
)
ää- .
;
ää. /
}
ãã 
catch
åå 
(
åå 
	Exception
åå 
e
åå 
)
åå 
{
çç 
return
éé 
new
éé "
JsonHttpStatusResult
éé /
(
éé/ 0
Util
éé0 4
.
éé4 5
	ErrorJson
éé5 >
(
éé> ?
e
éé? @
)
éé@ A
,
ééA B
HttpStatusCode
ééC Q
.
ééQ R!
InternalServerError
ééR e
)
éée f
;
ééf g
}
èè 
}
êê 	
public
íí 

JsonResult
íí $
GuardarInicializarCaja
íí 0
(
íí0 1
List
íí1 5
<
íí5 6
CajaInicializar
íí6 E
>
ííE F
cajasAInicializar
ííG X
)
ííX Y
{
ìì 	
try
îî 
{
ïï 
var
ññ 
	resultado
ññ 
=
ññ 
operacionLogica
ññ  /
.
ññ/ 0$
GuardarInicializarCaja
ññ0 F
(
ññF G
ProfileData
ññG R
(
ññR S
)
ññS T
.
ññT U
Empleado
ññU ]
.
ññ] ^
Id
ññ^ `
,
ññ` a
cajasAInicializar
ññb s
)
ññs t
;
ññt u
Util
óó 
.
óó (
ManageIfResultIsNotSuccess
óó /
(
óó/ 0
	resultado
óó0 9
,
óó9 :
$str
óó; d
)
óód e
;
óóe f
return
òò 
Json
òò 
(
òò 
new
òò 
{
òò  !
	resultado
òò" +
.
òò+ ,
code_result
òò, 7
,
òò7 8
	resultado
òò9 B
.
òòB C
data
òòC G
,
òòG H 
result_description
òòI [
=
òò\ ]
	resultado
òò^ g
.
òòg h
title
òòh m
}
òòn o
)
òòo p
;
òòp q
}
ôô 
catch
öö 
(
öö 
	Exception
öö 
e
öö 
)
öö 
{
õõ 
return
úú 
new
úú "
JsonHttpStatusResult
úú /
(
úú/ 0
Util
úú0 4
.
úú4 5
	ErrorJson
úú5 >
(
úú> ?
e
úú? @
)
úú@ A
,
úúA B
HttpStatusCode
úúC Q
.
úúQ R!
InternalServerError
úúR e
)
úúe f
;
úúf g
}
ùù 
}
ûû 	
public
¶¶ 

JsonResult
¶¶ !
GenerarArqueoDeCaja
¶¶ -
(
¶¶- .
)
¶¶. /
{
ßß 	
try
®® 
{
©© 
var
™™ 
	resultado
™™ 
=
™™ 
operacionLogica
™™  /
.
™™/ 0!
GenerarArqueoDeCaja
™™0 C
(
™™C D
ProfileData
™™D O
(
™™O P
)
™™P Q
.
™™Q R
Empleado
™™R Z
.
™™Z [
Id
™™[ ]
)
™™] ^
;
™™^ _
Util
´´ 
.
´´ (
ManageIfResultIsNotSuccess
´´ /
(
´´/ 0
	resultado
´´0 9
,
´´9 :
$str
´´; _
)
´´_ `
;
´´` a
return
¨¨ 
new
¨¨ "
JsonHttpStatusResult
¨¨ /
(
¨¨/ 0
new
¨¨0 3
{
¨¨4 5
	resultado
¨¨6 ?
.
¨¨? @
code_result
¨¨@ K
,
¨¨K L
	resultado
¨¨M V
.
¨¨V W
data
¨¨W [
,
¨¨[ \ 
result_description
¨¨] o
=
¨¨p q
	resultado
¨¨r {
.
¨¨{ |
title¨¨| Å
}¨¨Ç É
,¨¨É Ñ
HttpStatusCode¨¨Ö ì
.¨¨ì î
OK¨¨î ñ
)¨¨ñ ó
;¨¨ó ò
}
≠≠ 
catch
ÆÆ 
(
ÆÆ 
	Exception
ÆÆ 
e
ÆÆ 
)
ÆÆ 
{
ØØ 
return
∞∞ 
new
∞∞ "
JsonHttpStatusResult
∞∞ /
(
∞∞/ 0
Util
∞∞0 4
.
∞∞4 5
	ErrorJson
∞∞5 >
(
∞∞> ?
e
∞∞? @
)
∞∞@ A
,
∞∞A B
HttpStatusCode
∞∞C Q
.
∞∞Q R!
InternalServerError
∞∞R e
)
∞∞e f
;
∞∞f g
}
±± 
}
≤≤ 	
public
¥¥ 

JsonResult
¥¥ .
 GenerarArqueoCajaAutomaticamente
¥¥ :
(
¥¥: ;
)
¥¥; <
{
µµ 	
try
∂∂ 
{
∑∑ 
var
∏∏ 
	resultado
∏∏ 
=
∏∏ 
operacionLogica
∏∏  /
.
∏∏/ 0!
GenerarArqueoDeCaja
∏∏0 C
(
∏∏C D
$num
∏∏D E
)
∏∏E F
;
∏∏F G
Util
ππ 
.
ππ (
ManageIfResultIsNotSuccess
ππ /
(
ππ/ 0
	resultado
ππ0 9
,
ππ9 :
$str
ππ; _
)
ππ_ `
;
ππ` a
return
∫∫ 
new
∫∫ "
JsonHttpStatusResult
∫∫ /
(
∫∫/ 0
new
∫∫0 3
{
∫∫4 5
	resultado
∫∫6 ?
.
∫∫? @
code_result
∫∫@ K
,
∫∫K L
	resultado
∫∫M V
.
∫∫V W
data
∫∫W [
,
∫∫[ \ 
result_description
∫∫] o
=
∫∫p q
	resultado
∫∫r {
.
∫∫{ |
title∫∫| Å
}∫∫Ç É
,∫∫É Ñ
HttpStatusCode∫∫Ö ì
.∫∫ì î
OK∫∫î ñ
)∫∫ñ ó
;∫∫ó ò
}
ªª 
catch
ΩΩ 
(
ΩΩ 
	Exception
ΩΩ 
e
ΩΩ 
)
ΩΩ 
{
ææ 
return
øø 
new
øø "
JsonHttpStatusResult
øø /
(
øø/ 0
Util
øø0 4
.
øø4 5
	ErrorJson
øø5 >
(
øø> ?
new
øø? B
	Exception
øøC L
(
øøL M
$str
øøM q
,
øøq r
e
øøs t
)
øøt u
)
øøu v
,
øøv w
HttpStatusCodeøøx Ü
.øøÜ á#
InternalServerErrorøøá ö
)øøö õ
;øøõ ú
}
¿¿ 
}
¡¡ 	
}
∆∆ 
}«« ƒ†
RD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\GastoController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
GastoController  
:! "
BaseController# 1
{ 
private 
readonly 
IOperacionLogica )
operacionLogica* 9
;9 :
private 
readonly 
IConceptoLogica (
conceptoLogica) 7
;7 8
public 
GastoController 
( 
)  
{ 	
operacionLogica 
= 
Dependencia )
.) *
Resolve* 1
<1 2
IOperacionLogica2 B
>B C
(C D
)D E
;E F
conceptoLogica 
= 
Dependencia (
.( )
Resolve) 0
<0 1
IConceptoLogica1 @
>@ A
(A B
)B C
;C D
} 	
public 
ActionResult 
Index !
(! "
)" #
{ 	
ViewBag 
. 
fechaInicio 
=  !
DateTime" *
.* +
Now+ .
.. /
	AddMonths/ 8
(8 9
-9 :
$num: ;
); <
.< =
ToString= E
(E F
$strF R
)R S
;S T
ViewBag   
.   
fechaFin   
=   
DateTime   '
.  ' (
Now  ( +
.  + ,
ToString  , 4
(  4 5
$str  5 A
)  A B
;  B C
ViewBag!! 
.!! 
fechaActual!! 
=!!  !
DateTimeUtil!!! -
.!!- .
FechaActual!!. 9
(!!9 :
)!!: ;
.!!; <
Date!!< @
;!!@ A
ViewBag"" 
."" 
tasaIGV"" 
="" 
TransaccionSettings"" 1
.""1 2
Default""2 9
.""9 :
TasaIGV"": A
;""A B
ViewBag## 
.## 
aplicaLeyAmazonia## %
=##& '
TransaccionSettings##( ;
.##; <
Default##< C
.##C D
AplicaLeyAmazonia##D U
;##U V
ViewBag$$ 
.$$ %
idTipoActorPersonaNatural$$ -
=$$. /
ActorSettings$$0 =
.$$= >
Default$$> E
.$$E F%
IdTipoActorPersonaNatural$$F _
;$$_ `
ViewBag%% 
.%% &
idTipoActorPersonaJuridica%% .
=%%/ 0
ActorSettings%%1 >
.%%> ?
Default%%? F
.%%F G&
IdTipoActorPersonaJuridica%%G a
;%%a b
ViewBag&& 
.&& 
idProveedorGenerico&& '
=&&( )
ActorSettings&&* 7
.&&7 8
Default&&8 ?
.&&? @
idProveedorGenerico&&@ S
;&&S T
ViewBag'' 
.'' /
#idTipoPersonaSeleccionadaPorDefecto'' 7
=''8 9
ActorSettings'': G
.''G H
Default''H O
.''O P/
#IdTipoPersonaSeleccionadaPorDefecto''P s
;''s t
ViewBag(( 
.(( <
0idTipoDocumentoSeleccionadaConTipoPersonaNatural(( D
=((E F
ActorSettings((G T
.((T U
Default((U \
.((\ ]=
0IdTipoDocumentoSeleccionadaConTipoPersonaNatural	((] ç
;
((ç é
ViewBag)) 
.)) =
1idTipoDocumentoSeleccionadaConTipoPersonaJuridica)) E
=))F G
ActorSettings))H U
.))U V
Default))V ]
.))] ^>
1IdTipoDocumentoSeleccionadaConTipoPersonaJuridica	))^ è
;
))è ê
ViewBag** 
.** '
idTipoDocumentoIdentidadDni** /
=**0 1
ActorSettings**2 ?
.**? @
Default**@ G
.**G H'
IdTipoDocumentoIdentidadDni**H c
;**c d
ViewBag++ 
.++ '
idTipoDocumentoIdentidadRuc++ /
=++0 1
ActorSettings++2 ?
.++? @
Default++@ G
.++G H'
IdTipoDocumentoIdentidadRuc++H c
;++c d
ViewBag,, 
.,, *
idUbigeoSeleccionadoPorDefecto,, 2
=,,3 4
ActorSettings,,5 B
.,,B C
Default,,C J
.,,J K5
)idUbigeoSeleccionadoPorDefectoEnProveedor,,K t
;,,t u
ViewBag-- 
.-- "
idUbigeoNoEspecificado-- *
=--+ ,
ActorSettings--- :
.--: ;
Default--; B
.--B C"
idUbigeoNoEspecificado--C Y
;--Y Z
ViewBag.. 
... 4
(idDetalleMaestroCatalogoDocumentoFactura.. <
=..< =
MaestroSettings..> M
...M N
Default..N U
...U V.
"IdDetalleMaestroComprobanteFactura..V x
;..x y
ViewBag// 
.// 
idRolProveedor// "
=//# $
ActorSettings//% 2
.//2 3
Default//3 :
.//: ;
IdRolProveedor//; I
;//I J
ViewBag00 
.00 (
tiempoEsperaBusquedaSelector00 0
=001 2
AplicacionSettings003 E
.00E F
Default00F M
.00M N<
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidad00N ~
;00~ 
ViewBag11 
.11 0
$minimoCaracteresBuscarActorComercial11 8
=119 :
ActorSettings11; H
.11H I
Default11I P
.11P QA
4MinimoDeCaracteresParaBuscarEnSelectorActorComercial	11Q Ö
;
11Ö Ü
ViewBag22 
.22 =
1mascaraDeVisualizacionValidacionRegistroProveedor22 E
=22F G
ActorSettings22H U
.22U V
Default22V ]
.22] ^>
1MascaraDeVisualizacionValidacionRegistroProveedor	22^ è
;
22è ê
ViewBag33 
.33 -
!permitirSeleccionarGrupoProveedor33 5
=336 7
Diccionario338 C
.33C D2
&MapeoOperacionesGruposVsPermitirGrupos33D j
.33j k
Single33k q
(33q r
m33r s
=>33t v
m33w x
.33x y
Key33y |
==33} 
(
33Ä Å
int
33Å Ñ
)
33Ñ Ö1
#OperacionesGruposActoresComerciales
33Ö ®
.
33® ©
Compra
33© Ø
)
33Ø ∞
.
33∞ ±
Value
33± ∂
;
33∂ ∑
return44 
View44 
(44 
)44 
;44 
}55 	
public77 
ActionResult77 
Concepto77 $
(77$ %
)77% &
{88 	
return99 
View99 
(99 
)99 
;99 
}:: 	
public<< 
async<< 
Task<< 
<<< 

JsonResult<< $
><<$ %.
"ObtenerTiposDeComprobanteParaGasto<<& H
(<<H I
)<<I J
{== 	
try>> 
{?? 
var@@ 

resultados@@ 
=@@  
await@@! &
operacionLogica@@' 6
.@@6 7.
"ObtenerTiposDeComprobanteParaGasto@@7 Y
(@@Y Z
ProfileData@@Z e
(@@e f
)@@f g
.@@g h
Empleado@@h p
.@@p q
Id@@q s
,@@s t
ProfileData	@@u Ä
(
@@Ä Å
)
@@Å Ç
.
@@Ç É,
IdCentroDeAtencionSeleccionado
@@É °
)
@@° ¢
;
@@¢ £
ListAA 
<AA %
SelectorTipoDeComprobanteAA .
>AA. /
comprobantesAA0 <
=AA= >%
SelectorTipoDeComprobanteAA? X
.AAX Y
ConvertAAY `
(AA` a

resultadosAAa k
)AAk l
;AAl m
returnBB 
JsonBB 
(BB 
comprobantesBB (
)BB( )
;BB) *
}CC 
catchDD 
(DD 
	ExceptionDD 
eDD 
)DD 
{EE 
returnFF 
JsonFF 
(FF 
UtilFF  
.FF  !
	ErrorJsonFF! *
(FF* +
eFF+ ,
)FF, -
)FF- .
;FF. /
}GG 
}HH 	
publicJJ 

JsonResultJJ 
ObtenerGastosJJ '
(JJ' (
stringJJ( .
desdeJJ/ 4
,JJ4 5
stringJJ6 <
hastaJJ= B
)JJB C
{KK 	
DateTimeLL 

fechaDesdeLL 
=LL  !
DateTimeUtilLL" .
.LL. /C
7ObtenerFechaDesdeConPrecisionDeHorasMinutosMilisegundosLL/ f
(LLf g
desdeLLg l
)LLl m
;LLm n
DateTimeMM 

fechaHastaMM 
=MM  !
DateTimeUtilMM" .
.MM. /C
7ObtenerFechaHastaConPrecisionDeHorasMinutosMilisegundosMM/ f
(MMf g
hastaMMg l
)MMl m
;MMm n
tryOO 
{PP 
ListQQ 
<QQ 
OrdenDeGastoQQ !
>QQ! "
ordenDeGastosQQ# 0
=QQ1 2
operacionLogicaQQ3 B
.QQB C!
ObtenerOrdenesDeGastoQQC X
(QQX Y
ProfileDataQQY d
(QQd e
)QQe f
.QQf g
EmpleadoQQg o
.QQo p
IdQQp r
,QQr s

fechaDesdeQQt ~
,QQ~ 

fechaHasta
QQÄ ä
)
QQä ã
;
QQã å
ListRR 
<RR !
BandejaGastoViewModelRR *
>RR* +
	respuestaRR, 5
=RR6 7!
BandejaGastoViewModelRR8 M
.RRM N
ConvertRRN U
(RRU V
ordenDeGastosRRV c
)RRc d
;RRd e
returnSS 
JsonSS 
(SS 
	respuestaSS %
)SS% &
;SS& '
}TT 
catchUU 
(UU 
	ExceptionUU 
eUU 
)UU 
{VV 
HttpContextWW 
.WW 
ResponseWW $
.WW$ %

StatusCodeWW% /
=WW0 1
$numWW2 5
;WW5 6
returnXX 
JsonXX 
(XX 
UtilXX  
.XX  !
	ErrorJsonXX! *
(XX* +
eXX+ ,
)XX, -
)XX- .
;XX. /
}YY 
}ZZ 	
public\\ 

JsonResult\\ 
ObtenerGasto\\ &
(\\& '
long\\' +
idOrdenGasto\\, 8
)\\8 9
{]] 	
try^^ 
{__ 
OrdenDeGasto`` 
	resultado`` &
=``' (
operacionLogica``) 8
.``8 9
ObtenerGasto``9 E
(``E F
idOrdenGasto``F R
)``R S
;``S T
returnaa 
Jsonaa 
(aa 
newaa %
GastoConDetallesViewModelaa  9
(aa9 :
	resultadoaa: C
)aaC D
)aaD E
;aaE F
}bb 
catchcc 
(cc 
	Exceptioncc 
ecc 
)cc 
{dd 
returnee 
Jsonee 
(ee 
Utilee  
.ee  !
	ErrorJsonee! *
(ee* +
eee+ ,
)ee, -
)ee- .
;ee. /
}ff 
}gg 	
publichh 

JsonResulthh 
GuardarGastohh &
(hh& '#
RegistroGastoViewModel_hh' >
gastohh? D
)hhD E
{ii 	
tryjj 
{kk 
OperationResultll 
resultll  &
=ll' (
operacionLogicall) 8
.ll8 9
GuardarGastoll9 E
(llE F
ProfileDatallF Q
(llQ R
)llR S
.llS T
EmpleadollT \
.ll\ ]
Idll] _
,ll_ `
ProfileDatalla l
(lll m
)llm n
.lln o+
IdCentroDeAtencionSeleccionado	llo ç
,
llç é
gasto
llè î
.
llî ï
	Proveedor
llï û
.
llû ü
Id
llü °
,
ll° ¢
gasto
ll£ ®
.
ll® ©
TipoDeComprobante
ll© ∫
.
ll∫ ª
EsPropio
llª √
==
llƒ ∆
true
ll« À
?
llÃ Õ
$num
llŒ œ
:
ll– —
gasto
ll“ ◊
.
ll◊ ÿ
TipoDeComprobante
llÿ È
.
llÈ Í
TipoComprobante
llÍ ˘
.
ll˘ ˙
Id
ll˙ ¸
,
ll¸ ˝
gasto
ll˛ É
.
llÉ Ñ
TipoDeComprobante
llÑ ï
.
llï ñ
EsPropio
llñ û
==
llü °
true
ll¢ ¶
&&
llß ©
gasto
ll™ Ø
.
llØ ∞
TipoDeComprobante
ll∞ ¡
.
ll¡ ¬
SerieSeleccionada
ll¬ ”
==
ll‘ ÷
$num
ll◊ ÿ
?
llŸ ⁄
gasto
ll€ ‡
.
ll‡ ·
TipoDeComprobante
ll· Ú
.
llÚ Û
Series
llÛ ˘
.
ll˘ ˙
First
ll˙ ˇ
(
llˇ Ä
)
llÄ Å
.
llÅ Ç
Id
llÇ Ñ
:
llÖ Ü
gasto
llá å
.
llå ç
TipoDeComprobante
llç û
.
llû ü
SerieSeleccionada
llü ∞
,
ll∞ ±
gasto
ll≤ ∑
.
ll∑ ∏
TipoDeComprobante
ll∏ …
.
ll…  
EsPropio
ll  “
,
ll“ ”
gasto
ll‘ Ÿ
.
llŸ ⁄
TipoDeComprobante
ll⁄ Î
.
llÎ Ï
SerieIngresada
llÏ ˙
,
ll˙ ˚
gasto
ll¸ Å
.
llÅ Ç
TipoDeComprobante
llÇ ì
.
llì î
NumeroIngresado
llî £
,
ll£ §
gasto
ll• ™
.
ll™ ´
Concepto
ll´ ≥
.
ll≥ ¥
Id
ll¥ ∂
,
ll∂ ∑
gasto
ll∏ Ω
.
llΩ æ
Concepto
llæ ∆
.
ll∆ «
Nombre
ll« Õ
,
llÕ Œ
gasto
llœ ‘
.
ll‘ ’
Detalle
ll’ ‹
,
ll‹ ›
gasto
llﬁ „
.
ll„ ‰
Observacion
ll‰ Ô
,
llÔ 
gasto
llÒ ˆ
.
llˆ ˜
FechaEmision
ll˜ É
,
llÉ Ñ
gasto
llÖ ä
.
llä ã
Igv
llã é
,
llé è
gasto
llê ï
.
llï ñ
Total
llñ õ
,
llõ ú
!
llù û
gasto
llû £
.
ll£ §
EsGastoACredito
ll§ ≥
,
ll≥ ¥
gasto
llµ ∫
.
ll∫ ª
EsCreditoRapido
llª  
,
ll  À
gasto
llÃ —
.
ll— “
Cuotas
ll“ ÿ
!=
llŸ €
null
ll‹ ‡
?
ll· ‚
ConstruirCuotas
ll„ Ú
(
llÚ Û
gasto
llÛ ¯
.
ll¯ ˘
Cuotas
ll˘ ˇ
.
llˇ Ä
ToList
llÄ Ü
(
llÜ á
)
llá à
)
llà â
:
llä ã
null
llå ê
)
llê ë
;
llë í
Utilmm 
.mm &
ManageIfResultIsNotSuccessmm /
(mm/ 0
resultmm0 6
,mm6 7
$strmm8 S
)mmS T
;mmT U
returnnn 
Jsonnn 
(nn 
newnn 
{nn  !
resultnn" (
.nn( )
code_resultnn) 4
,nn4 5
resultnn6 <
.nn< =
datann= A
,nnA B
result_descriptionnnC U
=nnV W
resultnnX ^
.nn^ _
titlenn_ d
}nne f
)nnf g
;nng h
}oo 
catchpp 
(pp 
LogicaExceptionpp "
oepp# %
)pp% &
{qq 
returnrr 
newrr  
JsonHttpStatusResultrr /
(rr/ 0
Utilrr0 4
.rr4 5
	ErrorJsonrr5 >
(rr> ?
oerr? A
)rrA B
,rrB C
HttpStatusCoderrD R
.rrR S
InternalServerErrorrrS f
)rrf g
;rrg h
}ss 
catchtt 
(tt 
	Exceptiontt 
ett 
)tt 
{uu 
returnvv 
newvv  
JsonHttpStatusResultvv /
(vv/ 0
Utilvv0 4
.vv4 5
	ErrorJsonvv5 >
(vv> ?
newvv? B
	ExceptionvvC L
(vvL M
$strvvM q
,vvq r
evvs t
)vvt u
)vvu v
,vvv w
HttpStatusCode	vvx Ü
.
vvÜ á!
InternalServerError
vvá ö
)
vvö õ
;
vvõ ú
}ww 
}xx 	
publiczz 
Listzz 
<zz 
Cuotazz 
>zz 
ConstruirCuotaszz *
(zz* +
Listzz+ /
<zz/ 02
&RegistroDetalleFinanciamientoViewModelzz0 V
>zzV W
cuotaszzX ^
)zz^ _
{{{ 	
List|| 
<|| 
Cuota|| 
>|| 
cuotasConstruidas|| )
=||* +
new||, /
List||0 4
<||4 5
Cuota||5 :
>||: ;
(||; <
)||< =
;||= >
foreach}} 
(}} 
var}} 
item}} 
in}}  
cuotas}}! '
)}}' (
{~~ 
cuotasConstruidas !
.! "
Add" %
(% &
new& )
Cuota* /
(/ 0
)0 1
{
ÄÄ 
codigo
ÅÅ 
=
ÅÅ 
$str
ÅÅ 
,
ÅÅ  
fecha_emision
ÇÇ !
=
ÇÇ" #
item
ÇÇ$ (
.
ÇÇ( )
FechaVencimiento
ÇÇ) 9
,
ÇÇ9 :
fecha_vencimiento
ÉÉ %
=
ÉÉ& '
item
ÉÉ( ,
.
ÉÉ, -
FechaVencimiento
ÉÉ- =
,
ÉÉ= >
capital
ÑÑ 
=
ÑÑ 
item
ÑÑ "
.
ÑÑ" #
CapitalCuota
ÑÑ# /
,
ÑÑ/ 0
interes
ÖÖ 
=
ÖÖ 
item
ÖÖ "
.
ÖÖ" #
InteresCuota
ÖÖ# /
,
ÖÖ/ 0
total
ÜÜ 
=
ÜÜ 
item
ÜÜ  
.
ÜÜ  !
ImporteCuota
ÜÜ! -
,
ÜÜ- .

por_cobrar
áá 
=
áá  
false
áá! &
,
áá& '
cuota_inicial
àà !
=
àà" #
item
àà$ (
.
àà( )
EsCuotaInicial
àà) 7
}
ââ 
)
ââ 
;
ââ 
}
ää 
return
ãã 
cuotasConstruidas
ãã $
;
ãã$ %
}
åå 	
public
éé 

JsonResult
éé 
InvalidarGasto
éé (
(
éé( )
long
éé) -
idOrden
éé. 5
,
éé5 6
string
éé7 =
observacion
éé> I
)
ééI J
{
èè 	
try
êê 
{
ëë 
OperationResult
íí 
result
íí  &
=
íí' (
operacionLogica
íí) 8
.
íí8 9
InvalidarGasto
íí9 G
(
ííG H
idOrden
ííH O
,
ííO P
ProfileData
ííQ \
(
íí\ ]
)
íí] ^
.
íí^ _
Empleado
íí_ g
.
ííg h
Id
ííh j
,
ííj k
ProfileData
ííl w
(
ííw x
)
ííx y
.
ííy z-
IdCentroDeAtencionSeleccionadoííz ò
,ííò ô
observacionííö •
)íí• ¶
;íí¶ ß
Util
ìì 
.
ìì (
ManageIfResultIsNotSuccess
ìì /
(
ìì/ 0
result
ìì0 6
,
ìì6 7
$str
ìì8 ^
)
ìì^ _
;
ìì_ `
return
îî 
Json
îî 
(
îî 
new
îî 
{
îî  !
result
îî" (
.
îî( )
code_result
îî) 4
,
îî4 5
result
îî6 <
.
îî< =
data
îî= A
,
îîA B 
result_description
îîC U
=
îîV W
result
îîX ^
.
îî^ _
title
îî_ d
}
îîe f
)
îîf g
;
îîg h
}
ïï 
catch
ññ 
(
ññ 
LogicaException
ññ "
oe
ññ# %
)
ññ% &
{
óó 
return
òò 
new
òò "
JsonHttpStatusResult
òò /
(
òò/ 0
Util
òò0 4
.
òò4 5
	ErrorJson
òò5 >
(
òò> ?
oe
òò? A
)
òòA B
,
òòB C
HttpStatusCode
òòD R
.
òòR S!
InternalServerError
òòS f
)
òòf g
;
òòg h
}
ôô 
catch
öö 
(
öö 
	Exception
öö 
e
öö 
)
öö 
{
õõ 
return
úú 
new
úú "
JsonHttpStatusResult
úú /
(
úú/ 0
Util
úú0 4
.
úú4 5
	ErrorJson
úú5 >
(
úú> ?
e
úú? @
)
úú@ A
,
úúA B
HttpStatusCode
úúC Q
.
úúQ R!
InternalServerError
úúR e
)
úúe f
;
úúf g
}
ùù 
}
ûû 	
}
†† 
}°° Úd
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\PermisoController.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Controllers

& 1
{ 
public 

class 
PermisoController "
:# $

Controller% /
{ 
private 
readonly 
IPermisos_Logica )
_logica* 1
;1 2
public 
PermisoController  
(  !
)! "
{ 	
_logica 
= 
Dependencia !
.! "
Resolve" )
<) *
IPermisos_Logica* :
>: ;
(; <
)< =
;= >
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str ,
), -
]- .
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
public 
ActionResult 
ChangeConfig (
(( )
)) *
{ 	
return 
View 
( 
) 
; 
}   	
public## 

JsonResult## 
ObtenerEstadoAccion## -
(##- .
int##. 1
idTT##2 6
,##6 7
int##8 ;
idEA##< @
)##@ A
{$$ 	
try%% 
{&& 
List'' 
<'' 
Accion_por_estado'' &
>''& '
lista''( -
=''. /
_logica''0 7
.''7 8B
6ObtenerAccionesPosiblesPorTipoTransaccionYEstadoActual''8 n
(''n o
idTT''o s
,''s t
idEA''u y
)''y z
;''z {
List(( 
<(( 
PermisoViewModel(( %
>((% &
	respuesta((' 0
=((1 2
new((3 6
List((7 ;
<((; <
PermisoViewModel((< L
>((L M
(((M N
)((N O
;((O P
foreach)) 
()) 
var)) 
item)) !
in))" $
lista))% *
)))* +
{** 
	respuesta++ 
.++ 
Add++ !
(++! "
new++" %
PermisoViewModel++& 6
(++6 7
item++7 ;
.++; <
id++< >
,++> ?
item++@ D
.++D E
id_tipo_transaccion++E X
,++X Y
item++Y ]
.++] ^
TipoTransaccion++^ m
,++m n
item++o s
.++s t
id_estado_actual	++t Ñ
,
++Ñ Ö
item
++Ö â
.
++â ä
Estado
++ä ê
,
++ê ë
item
++í ñ
.
++ñ ó
id_accion_posible
++ó ®
,
++® ©
item
++© ≠
.
++≠ Æ
Accion
++Æ ¥
)
++¥ µ
)
++µ ∂
;
++∂ ∑
},, 
return-- 
Json-- 
(-- 
	respuesta-- %
)--% &
;--& '
}.. 
catch// 
(// 
	Exception// 
e// 
)// 
{00 
HttpContext11 
.11 
Response11 $
.11$ %

StatusCode11% /
=110 1
$num112 5
;115 6
return22 
Json22 
(22 
Util22  
.22  !
	ErrorJson22! *
(22* +
e22+ ,
)22, -
)22- .
;22. /
}33 
}55 	
public77 

JsonResult77 
ObtenerRolAccion77 *
(77* +
int77+ .
idTT77/ 3
,773 4
int775 8
idR779 <
)77< =
{88 	
try99 
{:: 
List;; 
<;; 
Accion_por_rol;; #
>;;# $
lista;;% *
=;;+ ,
_logica;;- 4
.;;4 5A
5ObtenerAccionesPosiblesPorTipoTransaccionYRolPersonal;;5 j
(;;j k
idTT;;k o
,;;o p
idR;;q t
);;t u
;;;u v
List<< 
<<< 
PermisoViewModel<< %
><<% &
	respuesta<<' 0
=<<1 2
new<<3 6
List<<7 ;
<<<; <
PermisoViewModel<<< L
><<L M
(<<M N
)<<N O
;<<O P
foreach== 
(== 
var== 
item== !
in==" $
lista==% *
)==* +
{>> 
	respuesta?? 
.?? 
Add?? !
(??! "
new??" %
PermisoViewModel??& 6
(??6 7
item??7 ;
.??; <
id??< >
,??> ?
item??@ D
.??D E
id_tipo_transaccion??E X
,??X Y
item??Z ^
.??^ _
TipoTransaccion??_ n
,??n o
item??p t
.??t u
id_rol??u {
,??{ |
item	??} Å
.
??Å Ç
RolPersonal
??Ç ç
,
??ç é
item
??è ì
.
??ì î
id_accion_posible
??î •
,
??• ¶
item@@ 
.@@ 
Accion@@ #
,@@# $
item@@% )
.@@) *
id_unidad_negocio@@* ;
,@@; <
item@@= A
.@@A B
UnidadNegocio@@B O
)@@O P
)@@P Q
;@@Q R
}AA 
returnBB 
JsonBB 
(BB 
	respuestaBB %
)BB% &
;BB& '
}CC 
catchDD 
(DD 
	ExceptionDD 
eDD 
)DD 
{EE 
HttpContextFF 
.FF 
ResponseFF $
.FF$ %

StatusCodeFF% /
=FF0 1
$numFF2 5
;FF5 6
returnGG 
JsonGG 
(GG 
UtilGG  
.GG  !
	ErrorJsonGG! *
(GG* +
eGG+ ,
)GG, -
)GG- .
;GG. /
}HH 
}II 	
publicJJ 

JsonResultJJ 
GuardarAccionesJJ )
(JJ) *
ListJJ* .
<JJ. /
PermisoViewModelJJ/ ?
>JJ? @
rolAccionesJJA L
,JJL M
ListJJN R
<JJR S
PermisoViewModelJJS c
>JJc d
estadoAccionesJJe s
,JJs t
intJJu x
idTTJJy }
,JJ} ~
int	JJ Ç
?
JJÇ É
idR
JJÑ á
,
JJá à
int
JJâ å
?
JJå ç
idEA
JJé í
)
JJí ì
{KK 	
tryLL 
{MM 
ListNN 
<NN 
Accion_por_rolNN #
>NN# $
listaRolAccionesNN% 5
=NN6 7
nullNN8 <
;NN< =
ListOO 
<OO 
Accion_por_estadoOO &
>OO& '
listaEstadoAccionesOO( ;
=OO< =
nullOO> B
;OOB C
ifPP 
(PP 
rolAccionesPP 
!=PP  "
nullPP# '
&&PP( *
idRPP+ .
!=PP/ 1
nullPP2 6
)PP6 7
{QQ 
listaRolAccionesRR $
=RR% &
newRR' *
ListRR+ /
<RR/ 0
Accion_por_rolRR0 >
>RR> ?
(RR? @
)RR@ A
;RRA B
foreachSS 
(SS 
varSS  
avSS! #
inSS$ &
rolAccionesSS' 2
)SS2 3
{TT 
ifUU 
(UU 
avUU 
.UU 
IdUU !
==UU" $
$numUU% &
)UU& '
{VV 
listaRolAccionesWW ,
.WW, -
AddWW- 0
(WW0 1
newWW1 4
Accion_por_rolWW5 C
(WWC D
avWWD F
.WWF G
TipoTransaccionWWG V
.WWV W
IdWWW Y
,WWY Z
avWW[ ]
.WW] ^
RolPersonalWW^ i
.WWi j
IdWWj l
,WWl m
avWWn p
.WWp q
AccionWWq w
.WWw x
IdWWx z
,WWz {
avWW| ~
.WW~ 
UnidadNegocio	WW å
.
WWå ç
Id
WWç è
)
WWè ê
)
WWê ë
;
WWë í
}XX 
elseYY 
{ZZ 
listaRolAcciones[[ ,
.[[, -
Add[[- 0
([[0 1
new[[1 4
Accion_por_rol[[5 C
([[C D
av[[D F
.[[F G
Id[[G I
,[[I J
av[[K M
.[[M N
TipoTransaccion[[N ]
.[[] ^
Id[[^ `
,[[` a
av[[b d
.[[d e
RolPersonal[[e p
.[[p q
Id[[q s
,[[s t
av[[u w
.[[w x
Accion[[x ~
.[[~ 
Id	[[ Å
,
[[Å Ç
av
[[É Ö
.
[[Ö Ü
UnidadNegocio
[[Ü ì
.
[[ì î
Id
[[î ñ
)
[[ñ ó
)
[[ó ò
;
[[ò ô
}\\ 
}]] 
}^^ 
if__ 
(__ 
estadoAcciones__ "
!=__# %
null__& *
&&__+ -
idEA__. 2
!=__3 5
null__6 :
)__: ;
{`` 
listaEstadoAccionesaa '
=aa( )
newaa* -
Listaa. 2
<aa2 3
Accion_por_estadoaa3 D
>aaD E
(aaE F
)aaF G
;aaG H
foreachbb 
(bb 
varbb  
avbb! #
inbb$ &
estadoAccionesbb' 5
)bb5 6
{cc 
ifdd 
(dd 
avdd 
.dd 
Iddd !
==dd" $
$numdd% &
)dd& '
{ee 
listaEstadoAccionesff /
.ff/ 0
Addff0 3
(ff3 4
newff4 7
Accion_por_estadoff8 I
(ffI J
avffJ L
.ffL M
TipoTransaccionffM \
.ff\ ]
Idff] _
,ff_ `
avffa c
.ffc d
Estadoffd j
.ffj k
Idffk m
,ffm n
avffo q
.ffq r
Accionffr x
.ffx y
Idffy {
)ff{ |
)ff| }
;ff} ~
}gg 
elsehh 
{ii 
listaEstadoAccionesjj /
.jj/ 0
Addjj0 3
(jj3 4
newjj4 7
Accion_por_estadojj8 I
(jjI J
avjjJ L
.jjL M
IdjjM O
,jjO P
avjjQ S
.jjS T
TipoTransaccionjjT c
.jjc d
Idjjd f
,jjf g
avjjh j
.jjj k
Estadojjk q
.jjq r
Idjjr t
,jjt u
avjjv x
.jjx y
Accionjjy 
.	jj Ä
Id
jjÄ Ç
)
jjÇ É
)
jjÉ Ñ
;
jjÑ Ö
}kk 
}ll 
}mm 
OperationResultoo 
opoo  "
=oo# $
_logicaoo% ,
.oo, -+
ActualizarPermisosPorRolYEstadooo- L
(ooL M
listaRolAccionesooM ]
,oo] ^
listaEstadoAccionesoo_ r
,oor s
idTToot x
,oox y
Convert	ooz Å
.
ooÅ Ç
ToInt32
ooÇ â
(
ooâ ä
idR
ooä ç
)
ooç é
,
ooé è
Convert
ooê ó
.
ooó ò
ToInt32
ooò ü
(
ooü †
idEA
oo† §
)
oo§ •
)
oo• ¶
;
oo¶ ß
Listqq 
<qq 
stringqq 
>qq 
excepcionesqq (
=qq) *
newqq+ .
Listqq/ 3
<qq3 4
stringqq4 :
>qq: ;
(qq; <
)qq< =
;qq= >
forrr 
(rr 
intrr 
irr 
=rr 
$numrr 
;rr 
irr  !
<rr" #
oprr$ &
.rr& '

exceptionsrr' 1
.rr1 2
Countrr2 7
;rr7 8
irr9 :
++rr: <
)rr< =
{ss 
excepcionestt 
.tt  
Addtt  #
(tt# $
optt$ &
.tt& '

exceptionstt' 1
[tt1 2
itt2 3
]tt3 4
.tt4 5
Messagett5 <
)tt< =
;tt= >
}uu 
returnvv 
Jsonvv 
(vv 
newvv 
{vv  !
codigovv" (
=vv) *
opvv+ -
.vv- .
code_resultvv. 9
,vv9 :
descripcionvv; F
=vvG H
opvvI K
.vvK L
titlevvL Q
,vvQ R
excepcionesvvS ^
=vv_ `
excepcionesvva l
}vvm n
)vvn o
;vvo p
}ww 
catchxx 
(xx 
	Exceptionxx 
exx 
)xx 
{yy 
HttpContextzz 
.zz 
Responsezz $
.zz$ %

StatusCodezz% /
=zz0 1
$numzz2 5
;zz5 6
return{{ 
Json{{ 
({{ 
Util{{  
.{{  !
	ErrorJson{{! *
({{* +
e{{+ ,
){{, -
){{- .
;{{. /
}|| 
}}} 	
}~~ 
} Ì
VD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\PropiedadController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public		 

class		 
PropiedadController		 $
:		% &

Controller		' 1
{

 
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
} 
} ·µ
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\ClienteController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
Areas 
. 
Administracion +
.+ ,
Controllers, 7
{ 
public 

class 
ClienteController "
:# $
ActorBaseController% 8
{ 
private 
readonly 
IActorNegocioLogica ,
_actorNegocioLogica- @
;@ A
private 
readonly *
IValidacionActorNegocio_Logica 7)
_validacionActorNegocioLogica8 U
;U V
private 
readonly !
IGrupoClientes_Logica .!
_grupoClientes_Logica/ D
;D E
public 
ClienteController  
(  !
)! "
{   	
_actorNegocioLogica!! 
=!!  !
Dependencia!!" -
.!!- .
Resolve!!. 5
<!!5 6
IActorNegocioLogica!!6 I
>!!I J
(!!J K
)!!K L
;!!L M)
_validacionActorNegocioLogica"" )
=""* +
Dependencia"", 7
.""7 8
Resolve""8 ?
<""? @*
IValidacionActorNegocio_Logica""@ ^
>""^ _
(""_ `
)""` a
;""a b!
_grupoClientes_Logica## !
=##" #
Dependencia##$ /
.##/ 0
Resolve##0 7
<##7 8!
IGrupoClientes_Logica##8 M
>##M N
(##N O
)##O P
;##P Q
}$$ 	
public&& 

JsonResult&& 
ListarClientes&& (
(&&( )
)&&) *
{'' 	
try(( 
{)) 
List** 
<** 
ResumenCliente** #
>**# $
	respuesta**% .
=**/ 0
_actorNegocioLogica**1 D
.**D E#
ObtenerClientesVigentes**E \
(**\ ]
)**] ^
;**^ _
return++ 
Json++ 
(++ 
	respuesta++ %
)++% &
;++& '
},, 
catch-- 
(-- 
	Exception-- 
e-- 
)-- 
{.. 
return// 
Json// 
(// 
Util//  
.//  !
	ErrorJson//! *
(//* +
e//+ ,
)//, -
)//- .
;//. /
}00 
}22 	
public44 

JsonResult44 
ListarClientes_44 )
(44) *
)44* +
{55 	
try66 
{77 
List88 
<88 #
BandejaClienteViewModel88 ,
>88, -
	respuesta88. 7
=888 9#
BandejaClienteViewModel88: Q
.88Q R
Convert88R Y
(88Y Z
_actorNegocioLogica88Z m
.88m n-
 ObtenerClientesConCuotasVigentes	88n é
(
88é è
)
88è ê
)
88ê ë
;
88ë í
return99 
Json99 
(99 
	respuesta99 %
)99% &
;99& '
}:: 
catch;; 
(;; 
	Exception;; 
e;; 
);; 
{<< 
return== 
Json== 
(== 
Util==  
.==  !
	ErrorJson==! *
(==* +
e==+ ,
)==, -
)==- .
;==. /
}>> 
}@@ 	
publicBB 

JsonResultBB 
ObtenerClientesBB )
(BB) *
)BB* +
{CC 	
tryDD 
{EE 
varFF 

resultadosFF 
=FF  
_actorNegocioLogicaFF! 4
.FF4 5,
 ObtenerClientesVigentesParaVentaFF5 U
(FFU V
)FFV W
;FFW X
ListGG 
<GG (
ComboActorComercialViewModelGG 1
>GG1 2
clientesGG3 ;
=GG< =(
ComboActorComercialViewModelGG> Z
.GGZ [
ConvertGG[ b
(GGb c

resultadosGGc m
)GGm n
;GGn o
returnHH 
JsonHH 
(HH 
clientesHH $
)HH$ %
;HH% &
}II 
catchJJ 
(JJ 
	ExceptionJJ 
eJJ 
)JJ 
{KK 
returnLL 
JsonLL 
(LL 
UtilLL  
.LL  !
	ErrorJsonLL! *
(LL* +
eLL+ ,
)LL, -
)LL- .
;LL. /
}MM 
}NN 	
publicPP 

JsonResultPP 
GuardarClientePP (
(PP( )
ClienteViewModelPP) 9
clientePP: A
)PPA B
{QQ 	
tryRR 
{SS 
ListTT 
<TT 
	DireccionTT 
>TT 
direccionesTT  +
=TT, -
newTT. 1
ListTT2 6
<TT6 7
	DireccionTT7 @
>TT@ A
(TTA B
)TTB C
;TTC D
OperationResultUU 
resultUU  &
;UU& '
ifVV 
(VV 
clienteVV 
.VV 
IdVV 
>VV  
$numVV! "
)VV" #
{WW 
ifXX 
(XX 
clienteXX 
.XX  
DireccionesXX  +
!=XX, .
nullXX/ 3
)XX3 4
{YY 
foreachZZ 
(ZZ  !
varZZ! $
itemZZ% )
inZZ* ,
clienteZZ- 4
.ZZ4 5
DireccionesZZ5 @
)ZZ@ A
{[[ 
if\\ 
(\\  
item\\  $
.\\$ %
Id\\% '
>\\( )
$num\\* +
)\\+ ,
{]] 
direcciones^^  +
.^^+ ,
Add^^, /
(^^/ 0
new^^0 3
	Direccion^^4 =
(^^= >
item^^> B
.^^B C
Id^^C E
,^^E F
cliente^^G N
.^^N O
IdActor^^O V
,^^V W
item^^X \
.^^\ ]
Tipo^^] a
.^^a b
Id^^b d
,^^d e
item^^f j
.^^j k
Nacion^^k q
.^^q r
Id^^r t
,^^t u
item^^v z
.^^z {
Ubigeo	^^{ Å
.
^^Å Ç
Id
^^Ç Ñ
,
^^Ñ Ö
item
^^Ü ä
.
^^ä ã
Detalle
^^ã í
,
^^í ì
null__$ (
,__( )
null__* .
,__. /
item__0 4
.__4 5
EsPrincipal__5 @
,__@ A
item__B F
.__F G
	EsVigente__G P
)__P Q
)__Q R
;__R S
}`` 
elseaa  
{bb 
direccionescc  +
.cc+ ,
Addcc, /
(cc/ 0
newcc0 3
	Direccioncc4 =
(cc= >
clientecc> E
.ccE F
IdActorccF M
,ccM N
itemccO S
.ccS T
TipoccT X
.ccX Y
IdccY [
,cc[ \
MaestroSettingscc] l
.ccl m
Defaultccm t
.cct u'
IdDetalleMaestroNacionPeru	ccu è
,
ccè ê
item
ccë ï
.
ccï ñ
Ubigeo
ccñ ú
.
ccú ù
Id
ccù ü
,
ccü †
itemdd$ (
.dd( )
Detalledd) 0
,dd0 1
nulldd2 6
,dd6 7
nulldd8 <
,dd< =
itemdd> B
.ddB C
EsPrincipalddC N
,ddN O
itemddP T
.ddT U
	EsVigenteddU ^
)dd^ _
)dd_ `
;dd` a
}ee 
}ff 
}gg 
resulthh 
=hh 
_actorNegocioLogicahh 0
.hh0 1
ActualizarClientehh1 B
(hhB C
clientehhC J
.hhJ K
IdhhK M
,hhM N
clientehhO V
.hhV W
IdActorhhW ^
,hh^ _
clientehh` g
.hhg h
Codigohhh n
,hhn o
clientehhp w
.hhw x
TipoPersona	hhx É
.
hhÉ Ñ
Id
hhÑ Ü
,
hhÜ á
cliente
hhà è
.
hhè ê
RazonSocial
hhê õ
,
hhõ ú
cliente
hhù §
.
hh§ •
ApellidoPaterno
hh• ¥
,
hh¥ µ
cliente
hh∂ Ω
.
hhΩ æ
ApellidoMaterno
hhæ Õ
,
hhÕ Œ
cliente
hhœ ÷
.
hh÷ ◊
Nombres
hh◊ ﬁ
,
hhﬁ ﬂ
clienteii  
.ii  !
NombreComercialii! 0
,ii0 1
clienteii2 9
.ii9 :
NombreCortoii: E
,iiE F
clienteiiG N
.iiN O"
TipoDocumentoIdentidadiiO e
.iie f
Idiif h
,iih i
clienteiij q
.iiq r%
NumeroDocumentoIdentidad	iir ä
,
iiä ã
clientejj  
.jj  !

ClaseActorjj! +
!=jj, .
nulljj/ 3
?jj4 5
clientejj6 =
.jj= >

ClaseActorjj> H
.jjH I
IdjjI K
:jjL M
(jjN O
intjjO R
?jjR S
)jjS T
nulljjT X
,jjX Y
clientejjZ a
.jja b
EstadoLegalActorjjb r
!=jjs u
nulljjv z
?jj{ |
cliente	jj} Ñ
.
jjÑ Ö
EstadoLegalActor
jjÖ ï
.
jjï ñ
Id
jjñ ò
:
jjô ö
(
jjõ ú
int
jjú ü
?
jjü †
)
jj† °
null
jj° •
,
jj• ¶
clientekk  
.kk  !
Correokk! '
,kk' (
clientekk) 0
.kk0 1
Telefonokk1 9
,kk9 :
direccioneskk; F
,kkF G
clientekkH O
.kkO P'
IdComprobantePredeterminadokkP k
)kkk l
;kkl m
}ll 
elsemm 
{nn 
ifoo 
(oo 
clienteoo 
.oo  
IdActoroo  '
>oo( )
$numoo* +
)oo+ ,
{pp 
ifqq 
(qq 
clienteqq #
.qq# $
Direccionesqq$ /
!=qq0 2
nullqq3 7
)qq7 8
{rr 
foreachss #
(ss$ %
varss% (
itemss) -
inss. 0
clientess1 8
.ss8 9
Direccionesss9 D
)ssD E
{tt 
ifuu  "
(uu# $
itemuu$ (
.uu( )
Iduu) +
>uu, -
$numuu. /
)uu/ 0
{vv  !
direccionesww$ /
.ww/ 0
Addww0 3
(ww3 4
newww4 7
	Direccionww8 A
(wwA B
itemwwB F
.wwF G
IdwwG I
,wwI J
clientewwK R
.wwR S
IdActorwwS Z
,wwZ [
itemww\ `
.ww` a
Tipowwa e
.wwe f
Idwwf h
,wwh i
itemwwj n
.wwn o
Nacionwwo u
.wwu v
Idwwv x
,wwx y
itemwwz ~
.ww~ 
Ubigeo	ww Ö
.
wwÖ Ü
Id
wwÜ à
,
wwà â
item
wwä é
.
wwé è
Detalle
wwè ñ
,
wwñ ó
nullxx( ,
,xx, -
nullxx. 2
,xx2 3
itemxx4 8
.xx8 9
EsPrincipalxx9 D
,xxD E
itemxxF J
.xxJ K
	EsVigentexxK T
)xxT U
)xxU V
;xxV W
}yy  !
elsezz  $
{{{  !
direcciones||$ /
.||/ 0
Add||0 3
(||3 4
new||4 7
	Direccion||8 A
(||A B
cliente||B I
.||I J
IdActor||J Q
,||Q R
item||S W
.||W X
Tipo||X \
.||\ ]
Id||] _
,||_ `
MaestroSettings||a p
.||p q
Default||q x
.||x y'
IdDetalleMaestroNacionPeru	||y ì
,
||ì î
item}}( ,
.}}, -
Ubigeo}}- 3
.}}3 4
Id}}4 6
,}}6 7
item}}8 <
.}}< =
Detalle}}= D
,}}D E
null}}F J
,}}J K
null}}L P
,}}P Q
item}}R V
.}}V W
EsPrincipal}}W b
,}}b c
item}}d h
.}}h i
	EsVigente}}i r
)}}r s
)}}s t
;}}t u
}~~  !
} 
}
ÄÄ 
result
ÅÅ 
=
ÅÅ  !
_actorNegocioLogica
ÅÅ! 4
.
ÅÅ4 5+
CrearClienteActualizandoActor
ÅÅ5 R
(
ÅÅR S
cliente
ÅÅS Z
.
ÅÅZ [
IdActor
ÅÅ[ b
,
ÅÅb c
cliente
ÅÅd k
.
ÅÅk l
TipoPersona
ÅÅl w
.
ÅÅw x
Id
ÅÅx z
,
ÅÅz {
clienteÅÅ| É
.ÅÅÉ Ñ
RazonSocialÅÅÑ è
,ÅÅè ê
clienteÅÅë ò
.ÅÅò ô
ApellidoPaternoÅÅô ®
,ÅÅ® ©
clienteÅÅ™ ±
.ÅÅ± ≤
ApellidoMaternoÅÅ≤ ¡
,ÅÅ¡ ¬
clienteÅÅ√  
.ÅÅ  À
NombresÅÅÀ “
,ÅÅ“ ”
clienteÅÅ‘ €
.ÅÅ€ ‹
NombreComercialÅÅ‹ Î
,ÅÅÎ Ï
cliente
ÇÇ #
.
ÇÇ# $
NombreCorto
ÇÇ$ /
,
ÇÇ/ 0
cliente
ÇÇ1 8
.
ÇÇ8 9$
TipoDocumentoIdentidad
ÇÇ9 O
.
ÇÇO P
Id
ÇÇP R
,
ÇÇR S
cliente
ÇÇT [
.
ÇÇ[ \&
NumeroDocumentoIdentidad
ÇÇ\ t
,
ÇÇt u
cliente
ÇÇv }
.
ÇÇ} ~

ClaseActorÇÇ~ à
!=ÇÇâ ã
nullÇÇå ê
?ÇÇë í
clienteÇÇì ö
.ÇÇö õ

ClaseActorÇÇõ •
.ÇÇ• ¶
IdÇÇ¶ ®
:ÇÇ© ™
(ÇÇ´ ¨
intÇÇ¨ Ø
?ÇÇØ ∞
)ÇÇ∞ ±
nullÇÇ± µ
,ÇÇµ ∂
cliente
ÉÉ #
.
ÉÉ# $
EstadoLegalActor
ÉÉ$ 4
!=
ÉÉ5 7
null
ÉÉ8 <
?
ÉÉ= >
cliente
ÉÉ? F
.
ÉÉF G
EstadoLegalActor
ÉÉG W
.
ÉÉW X
Id
ÉÉX Z
:
ÉÉ[ \
(
ÉÉ] ^
int
ÉÉ^ a
?
ÉÉa b
)
ÉÉb c
null
ÉÉc g
,
ÉÉg h
cliente
ÉÉi p
.
ÉÉp q
Correo
ÉÉq w
,
ÉÉw x
clienteÉÉy Ä
.ÉÉÄ Å
TelefonoÉÉÅ â
,ÉÉâ ä
direccionesÉÉã ñ
,ÉÉñ ó
clienteÉÉò ü
.ÉÉü †+
IdComprobantePredeterminadoÉÉ† ª
)ÉÉª º
;ÉÉº Ω
}
ÑÑ 
else
ÖÖ 
{
ÜÜ 
if
áá 
(
áá 
cliente
áá #
.
áá# $
Direcciones
áá$ /
!=
áá0 2
null
áá3 7
)
áá7 8
{
àà 
foreach
ââ #
(
ââ$ %
var
ââ% (
item
ââ) -
in
ââ. 0
cliente
ââ1 8
.
ââ8 9
Direcciones
ââ9 D
)
ââD E
{
ää 
direcciones
ãã  +
.
ãã+ ,
Add
ãã, /
(
ãã/ 0
new
ãã0 3
	Direccion
ãã4 =
(
ãã= >
item
ãã> B
.
ããB C
Tipo
ããC G
.
ããG H
Id
ããH J
,
ããJ K
MaestroSettings
ããL [
.
ãã[ \
Default
ãã\ c
.
ããc d(
IdDetalleMaestroNacionPeru
ããd ~
,
ãã~ 
itemããÄ Ñ
.ããÑ Ö
UbigeoããÖ ã
.ããã å
Idããå é
,ããé è
itemããê î
.ããî ï
Detalleããï ú
,ããú ù
null
åå$ (
,
åå( )
null
åå* .
,
åå. /
item
åå0 4
.
åå4 5
EsPrincipal
åå5 @
,
åå@ A
item
ååB F
.
ååF G
	EsVigente
ååG P
)
ååP Q
)
ååQ R
;
ååR S
}
çç 
}
éé 
result
êê 
=
êê  !
_actorNegocioLogica
êê! 4
.
êê4 5
CrearCliente
êê5 A
(
êêA B
cliente
êêB I
.
êêI J
TipoPersona
êêJ U
.
êêU V
Id
êêV X
,
êêX Y
cliente
êêZ a
.
êêa b
RazonSocial
êêb m
,
êêm n
cliente
êêo v
.
êêv w
ApellidoPaternoêêw Ü
,êêÜ á
clienteêêà è
.êêè ê
ApellidoMaternoêêê ü
,êêü †
clienteêê° ®
.êê® ©
Nombresêê© ∞
,êê∞ ±
clienteêê≤ π
.êêπ ∫
NombreComercialêê∫ …
,êê…  
clienteêêÀ “
.êê“ ”
NombreCortoêê” ﬁ
,êêﬁ ﬂ
cliente
ëë0 7
.
ëë7 8$
TipoDocumentoIdentidad
ëë8 N
.
ëëN O
Id
ëëO Q
,
ëëQ R
cliente
ëëS Z
.
ëëZ [&
NumeroDocumentoIdentidad
ëë[ s
,
ëës t
cliente
ëëu |
.
ëë| }

ClaseActorëë} á
!=ëëà ä
nullëëã è
?ëëê ë
clienteëëí ô
.ëëô ö

ClaseActorëëö §
.ëë§ •
Idëë• ß
:ëë® ©
(ëë™ ´
intëë´ Æ
?ëëÆ Ø
)ëëØ ∞
nullëë∞ ¥
,ëë¥ µ
cliente
íí0 7
.
íí7 8
EstadoLegalActor
íí8 H
!=
ííI K
null
ííL P
?
ííQ R
cliente
ííS Z
.
ííZ [
EstadoLegalActor
íí[ k
.
íík l
Id
ííl n
:
íío p
(
ííq r
int
íír u
?
ííu v
)
íív w
null
ííw {
,
íí{ |
clienteíí} Ñ
.ííÑ Ö
CorreoííÖ ã
,ííã å
clienteííç î
.ííî ï
Telefonoííï ù
,ííù û
direccionesííü ™
,íí™ ´
clienteíí¨ ≥
.íí≥ ¥+
IdComprobantePredeterminadoíí¥ œ
)ííœ –
;íí– —
}
ìì 
}
îî 
Util
ïï 
.
ïï 
VerificarError
ïï #
(
ïï# $
result
ïï$ *
)
ïï* +
;
ïï+ ,
return
ññ 
Json
ññ 
(
ññ 
new
ññ 
{
ññ  !
result
ññ" (
.
ññ( )
code_result
ññ) 4
,
ññ4 5
data
ññ6 :
=
ññ; <
result
ññ= C
.
ññC D
data
ññD H
,
ññH I 
result_description
ññJ \
=
ññ] ^
result
ññ_ e
.
ññe f
title
ññf k
}
ññl m
)
ññm n
;
ññn o
}
óó 
catch
òò 
(
òò 
	Exception
òò 
e
òò 
)
òò 
{
ôô 
return
öö 
new
öö "
JsonHttpStatusResult
öö /
(
öö/ 0
Util
öö0 4
.
öö4 5
	ErrorJson
öö5 >
(
öö> ?
e
öö? @
)
öö@ A
,
ööA B
HttpStatusCode
ööC Q
.
ööQ R!
InternalServerError
ööR e
)
ööe f
;
ööf g
}
õõ 
}
úú 	
public
ùù 

JsonResult
ùù 
Validar
ùù !
(
ùù! "
int
ùù" %
idTipoDocumento
ùù& 5
,
ùù5 6
string
ùù7 =
numeroDocumento
ùù> M
)
ùùM N
{
ûû 	
ClienteViewModel
üü 
actor
üü "
=
üü# $
null
üü% )
;
üü) *
ClienteViewModel
†† 
cliente
†† $
=
††% &
null
††' +
;
††+ ,
try
°° 
{
¢¢ 
if
££ 
(
££ 
idTipoDocumento
££ #
==
££$ &
ActorSettings
££' 4
.
££4 5
Default
££5 <
.
££< =)
IdTipoDocumentoIdentidadRuc
££= X
)
££X Y
{
§§ 
if
•• 
(
•• 
!
•• +
_validacionActorNegocioLogica
•• 6
.
••6 7

ValidarRUC
••7 A
(
••A B
numeroDocumento
••B Q
)
••Q R
)
••R S
return
¶¶ 
Json
¶¶ #
(
¶¶# $
new
¶¶$ '
{
¶¶( )
	respuesta
¶¶* 3
=
¶¶4 5'
RespuestaVerificacionEnum
¶¶6 O
.
¶¶O P
RucNoValido
¶¶P [
,
¶¶[ \
actor
¶¶] b
,
¶¶b c
cliente
¶¶d k
,
¶¶k l
mensaje
¶¶m t
=
¶¶u v
$str¶¶w ê
}¶¶ë í
)¶¶í ì
;¶¶ì î
}
ßß /
!RespuestaVerificacionActorNegocio
©© 1
result
©©2 8
=
©©9 :!
_actorNegocioLogica
©©; N
.
©©N O
VerificarActor
©©O ]
(
©©] ^
idTipoDocumento
©©^ m
,
©©m n
numeroDocumento
©©o ~
,
©©~ 
ActorSettings©©Ä ç
.©©ç é
Default©©é ï
.©©ï ñ
IdRolCliente©©ñ ¢
)©©¢ £
;©©£ §
if
™™ 
(
™™ 
result
™™ 
.
™™ 
	respuesta
™™ $
==
™™% ''
RespuestaVerificacionEnum
™™( A
.
™™A B
ExisteSoloActor
™™B Q
)
™™Q R
{
´´ 
actor
¨¨ 
=
¨¨ 
new
¨¨ 
ClienteViewModel
¨¨  0
(
¨¨0 1
result
¨¨1 7
.
¨¨7 8
actor
¨¨8 =
)
¨¨= >
;
¨¨> ?
}
≠≠ 
if
ÆÆ 
(
ÆÆ 
result
ÆÆ 
.
ÆÆ 
	respuesta
ÆÆ $
==
ÆÆ% ''
RespuestaVerificacionEnum
ÆÆ( A
.
ÆÆA B 
ExisteActorNegocio
ÆÆB T
)
ÆÆT U
{
ØØ 
Cliente
∞∞ 
c
∞∞ 
=
∞∞ 
new
∞∞  #
Cliente
∞∞$ +
(
∞∞+ ,
result
∞∞, 2
.
∞∞2 3
actorNegocio
∞∞3 ?
)
∞∞? @
;
∞∞@ A
cliente
±± 
=
±± 
new
±± !
ClienteViewModel
±±" 2
(
±±2 3
c
±±3 4
)
±±4 5
;
±±5 6
}
≤≤ 
if
≥≥ 
(
≥≥ 
result
≥≥ 
.
≥≥ 
	respuesta
≥≥ $
==
≥≥% ''
RespuestaVerificacionEnum
≥≥( A
.
≥≥A B
NoExisteActor
≥≥B O
)
≥≥O P
{
¥¥ 
if
µµ 
(
µµ 
idTipoDocumento
µµ '
==
µµ( *
ActorSettings
µµ+ 8
.
µµ8 9
Default
µµ9 @
.
µµ@ A)
IdTipoDocumentoIdentidadRuc
µµA \
)
µµ\ ]
{
∂∂ 
var
∑∑ 
datos
∑∑ !
=
∑∑" # 
ObtenerActorRucApi
∑∑$ 6
(
∑∑6 7
numeroDocumento
∑∑7 F
)
∑∑F G
;
∑∑G H
return
∏∏ 
Json
∏∏ #
(
∏∏# $
new
∏∏$ '
{
∏∏( )
result
∏∏* 0
.
∏∏0 1
	respuesta
∏∏1 :
,
∏∏: ;
dataApi
∏∏< C
=
∏∏D E
datos
∏∏F K
}
∏∏L M
)
∏∏M N
;
∏∏N O
}
ππ 
if
∫∫ 
(
∫∫ 
idTipoDocumento
∫∫ '
==
∫∫( *
ActorSettings
∫∫+ 8
.
∫∫8 9
Default
∫∫9 @
.
∫∫@ A)
IdTipoDocumentoIdentidadDni
∫∫A \
)
∫∫\ ]
{
ªª 
var
ºº 
datos
ºº !
=
ºº" # 
ObtenerActorDniApi
ºº$ 6
(
ºº6 7
numeroDocumento
ºº7 F
)
ººF G
;
ººG H
return
ΩΩ 
Json
ΩΩ #
(
ΩΩ# $
new
ΩΩ$ '
{
ΩΩ( )
result
ΩΩ* 0
.
ΩΩ0 1
	respuesta
ΩΩ1 :
,
ΩΩ: ;
dataApi
ΩΩ< C
=
ΩΩD E
datos
ΩΩF K
}
ΩΩL M
)
ΩΩM N
;
ΩΩN O
}
ææ 
}
øø 
return
¿¿ 
Json
¿¿ 
(
¿¿ 
new
¿¿ 
{
¿¿  !
result
¿¿" (
.
¿¿( )
	respuesta
¿¿) 2
,
¿¿2 3
actor
¿¿4 9
,
¿¿9 :
cliente
¿¿; B
}
¿¿C D
)
¿¿D E
;
¿¿E F
}
¡¡ 
catch
¬¬ 
(
¬¬ 
	Exception
¬¬ 
e
¬¬ 
)
¬¬ 
{
√√ 
HttpContext
ƒƒ 
.
ƒƒ 
Response
ƒƒ $
.
ƒƒ$ %

StatusCode
ƒƒ% /
=
ƒƒ0 1
$num
ƒƒ2 5
;
ƒƒ5 6
return
≈≈ 
Json
≈≈ 
(
≈≈ 
new
≈≈ 
{
≈≈  !
	respuesta
≈≈" +
=
≈≈, -'
RespuestaVerificacionEnum
≈≈. G
.
≈≈G H
NoSePudoVerificar
≈≈H Y
,
≈≈Y Z
actor
≈≈[ `
,
≈≈` a
cliente
≈≈b i
,
≈≈i j
mensaje
≈≈k r
=
≈≈s t
e
≈≈u v
.
≈≈v w
Message
≈≈w ~
}≈≈ Ä
)≈≈Ä Å
;≈≈Å Ç
}
∆∆ 
}
«« 	
public
œœ 

JsonResult
œœ #
ResolverClientePorDni
œœ /
(
œœ/ 0
string
œœ0 6
dni
œœ7 :
)
œœ: ;
{
–– 	
try
—— 
{
““ 
OperationResult
”” 
	resultado
””  )
=
””* +
new
””, /
OperationResult
””0 ?
(
””? @!
OperationResultEnum
””@ S
.
””S T
Success
””T [
)
””[ \
;
””\ ]
var
‘‘ 
cliente
‘‘ 
=
‘‘ !
_actorNegocioLogica
‘‘ 1
.
‘‘1 2"
ObtenerClientePorDni
‘‘2 F
(
‘‘F G
dni
‘‘G J
)
‘‘J K
;
‘‘K L
if
’’ 
(
’’ 
cliente
’’ 
==
’’ 
null
’’ #
)
’’# $
{
÷÷ 
var
◊◊ 
persona
◊◊ 
=
◊◊  ! 
ObtenerActorDniApi
◊◊" 4
(
◊◊4 5
dni
◊◊5 8
)
◊◊8 9
;
◊◊9 :
	resultado
ÿÿ 
=
ÿÿ !
_actorNegocioLogica
ÿÿ  3
.
ÿÿ3 4
CrearCliente
ÿÿ4 @
(
ÿÿ@ A
persona
ÿÿA H
.
ÿÿH I
ConvertirConDni
ÿÿI X
(
ÿÿX Y
dni
ÿÿY \
)
ÿÿ\ ]
)
ÿÿ] ^
;
ÿÿ^ _
cliente
ŸŸ 
=
ŸŸ 
(
ŸŸ 
ActorComercial_
ŸŸ .
)
ŸŸ. /
	resultado
ŸŸ/ 8
.
ŸŸ8 9
information
ŸŸ9 D
;
ŸŸD E
Util
⁄⁄ 
.
⁄⁄ (
ManageIfResultIsNotSuccess
⁄⁄ 3
(
⁄⁄3 4
	resultado
⁄⁄4 =
,
⁄⁄= >
$str⁄⁄? û
)⁄⁄û ü
;⁄⁄ü †
}
€€ 
return
‹‹ 
new
‹‹ "
JsonHttpStatusResult
‹‹ /
(
‹‹/ 0
new
‹‹0 3
{
‹‹4 5
	resultado
‹‹6 ?
.
‹‹? @
code_result
‹‹@ K
,
‹‹K L
	resultado
‹‹M V
.
‹‹V W
data
‹‹W [
,
‹‹[ \ 
result_description
‹‹] o
=
‹‹p q
	resultado
‹‹r {
.
‹‹{ |
title‹‹| Å
,‹‹Å Ç
information‹‹É é
=‹‹è ê
cliente‹‹ë ò
}‹‹ô ö
,‹‹ö õ
HttpStatusCode‹‹ú ™
.‹‹™ ´
OK‹‹´ ≠
)‹‹≠ Æ
;‹‹Æ Ø
}
›› 
catch
ﬁﬁ 
(
ﬁﬁ 
	Exception
ﬁﬁ 
e
ﬁﬁ 
)
ﬁﬁ 
{
ﬂﬂ 
return
‡‡ 
new
‡‡ "
JsonHttpStatusResult
‡‡ /
(
‡‡/ 0
Util
‡‡0 4
.
‡‡4 5
	ErrorJson
‡‡5 >
(
‡‡> ?
e
‡‡? @
)
‡‡@ A
,
‡‡A B
HttpStatusCode
‡‡C Q
.
‡‡Q R!
InternalServerError
‡‡R e
)
‡‡e f
;
‡‡f g
}
·· 
}
‚‚ 	
public
„„ 

JsonResult
„„  
ValidarClienteYRuc
„„ ,
(
„„, -
int
„„- 0
	idCliente
„„1 :
,
„„: ;
int
„„< ?
idTipoDocumento
„„@ O
)
„„O P
{
‰‰ 	
try
ÂÂ 
{
ÊÊ 
if
ÁÁ 
(
ÁÁ 
idTipoDocumento
ÁÁ #
==
ÁÁ$ &
MaestroSettings
ÁÁ' 6
.
ÁÁ6 7
Default
ÁÁ7 >
.
ÁÁ> ?0
"IdDetalleMaestroComprobanteFactura
ÁÁ? a
)
ÁÁa b
{
ËË 
if
ÈÈ 
(
ÈÈ +
_validacionActorNegocioLogica
ÈÈ 5
.
ÈÈ5 6 
ValidarClienteYRUC
ÈÈ6 H
(
ÈÈH I
	idCliente
ÈÈI R
)
ÈÈR S
)
ÈÈS T
{
ÍÍ 
return
ÎÎ 
Json
ÎÎ #
(
ÎÎ# $
new
ÎÎ$ '
{
ÎÎ( )
	respuesta
ÎÎ* 3
=
ÎÎ4 5!
OperationResultEnum
ÎÎ6 I
.
ÎÎI J
Success
ÎÎJ Q
,
ÎÎQ R
mensaje
ÎÎS Z
=
ÎÎ[ \
$strÎÎ] Ç
}ÎÎÉ Ñ
)ÎÎÑ Ö
;ÎÎÖ Ü
}
ÏÏ 
else
ÌÌ 
{
ÓÓ 
return
ÔÔ 
Json
ÔÔ #
(
ÔÔ# $
new
ÔÔ$ '
{
ÔÔ( )
	respuesta
ÔÔ* 3
=
ÔÔ4 5!
OperationResultEnum
ÔÔ6 I
.
ÔÔI J
Warning
ÔÔJ Q
,
ÔÔQ R
mensaje
ÔÔS Z
=
ÔÔ[ \
$strÔÔ] Ç
}ÔÔÉ Ñ
)ÔÔÑ Ö
;ÔÔÖ Ü
}
 
}
ÒÒ 
else
ÚÚ 
{
ÛÛ 
return
ÙÙ 
Json
ÙÙ 
(
ÙÙ  
new
ÙÙ  #
{
ÙÙ$ %
	respuesta
ÙÙ& /
=
ÙÙ0 1!
OperationResultEnum
ÙÙ2 E
.
ÙÙE F
Success
ÙÙF M
,
ÙÙM N
mensaje
ÙÙO V
=
ÙÙW X
$str
ÙÙY ~
}ÙÙ Ä
)ÙÙÄ Å
;ÙÙÅ Ç
}
ıı 
}
ˆˆ 
catch
˜˜ 
(
˜˜ 
	Exception
˜˜ 
e
˜˜ 
)
˜˜ 
{
¯¯ 
return
˘˘ 
Json
˘˘ 
(
˘˘ 
new
˘˘ 
{
˘˘  !
	respuesta
˘˘" +
=
˘˘, -!
OperationResultEnum
˘˘. A
.
˘˘A B
Error
˘˘B G
,
˘˘G H
mensaje
˘˘I P
=
˘˘Q R
e
˘˘S T
.
˘˘T U
Message
˘˘U \
}
˘˘] ^
)
˘˘^ _
;
˘˘_ `
}
˙˙ 
}
˚˚ 	
public
˝˝ 

JsonResult
˝˝ 
EliminarCliente
˝˝ )
(
˝˝) *
int
˝˝* -
	IdCliente
˝˝. 7
)
˝˝7 8
{
˛˛ 	
try
ˇˇ 
{
ÄÄ 
OperationResult
ÅÅ 
result
ÅÅ  &
=
ÅÅ' (!
_actorNegocioLogica
ÅÅ) <
.
ÅÅ< =
DarDeBajaCliente
ÅÅ= M
(
ÅÅM N
	IdCliente
ÅÅN W
)
ÅÅW X
;
ÅÅX Y
Util
ÇÇ 
.
ÇÇ 
VerificarError
ÇÇ #
(
ÇÇ# $
result
ÇÇ$ *
)
ÇÇ* +
;
ÇÇ+ ,
return
ÉÉ 
Json
ÉÉ 
(
ÉÉ 
new
ÉÉ 
{
ÉÉ  !
code_result
ÉÉ" -
=
ÉÉ. /
result
ÉÉ0 6
.
ÉÉ6 7
code_result
ÉÉ7 B
,
ÉÉB C
data
ÉÉD H
=
ÉÉI J
result
ÉÉK Q
.
ÉÉQ R
data
ÉÉR V
,
ÉÉV W 
result_description
ÉÉX j
=
ÉÉk l
result
ÉÉm s
.
ÉÉs t
title
ÉÉt y
}
ÉÉz {
)
ÉÉ{ |
;
ÉÉ| }
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ 
	Exception
ÖÖ 
e
ÖÖ 
)
ÖÖ 
{
ÜÜ 
HttpContext
áá 
.
áá 
Response
áá $
.
áá$ %

StatusCode
áá% /
=
áá0 1
$num
áá2 5
;
áá5 6
return
àà 
Json
àà 
(
àà 
Util
àà  
.
àà  !
	ErrorJson
àà! *
(
àà* +
e
àà+ ,
)
àà, -
)
àà- .
;
àà. /
}
ââ 
}
ää 	
public
ãã 

JsonResult
ãã 
CargarCliente
ãã '
(
ãã' (
int
ãã( +
	idCliente
ãã, 5
)
ãã5 6
{
åå 	
try
çç 
{
éé 
Cliente
èè 
cliente
èè 
=
èè  !!
_actorNegocioLogica
èè" 5
.
èè5 6
ObtenerCliente
èè6 D
(
èèD E
	idCliente
èèE N
)
èèN O
;
èèO P
ClienteViewModel
êê  
clienteViewModel
êê! 1
=
êê2 3
new
êê4 7
ClienteViewModel
êê8 H
(
êêH I
cliente
êêI P
)
êêP Q
;
êêQ R
return
ëë 
Json
ëë 
(
ëë 
clienteViewModel
ëë ,
)
ëë, -
;
ëë- .
}
íí 
catch
ìì 
(
ìì 
	Exception
ìì 
e
ìì 
)
ìì 
{
îî 
return
ïï 
Json
ïï 
(
ïï 
Util
ïï  
.
ïï  !
	ErrorJson
ïï! *
(
ïï* +
e
ïï+ ,
)
ïï, -
)
ïï- .
;
ïï. /
}
ññ 
}
óó 	
public
ôô 
async
ôô 
Task
ôô 
<
ôô 

JsonResult
ôô $
>
ôô$ %%
ObtenerClientesGenerico
ôô& =
(
ôô= >
)
ôô> ?
{
öö 	
try
õõ 
{
úú 
var
ùù 
clientesVigentes
ùù $
=
ùù% &
await
ùù' ,!
_actorNegocioLogica
ùù- @
.
ùù@ A7
)ObtenerClientesVigentesComoItemsGenericos
ùùA j
(
ùùj k
)
ùùk l
;
ùùl m
return
ûû 
Json
ûû 
(
ûû 
clientesVigentes
ûû ,
)
ûû, -
;
ûû- .
}
üü 
catch
†† 
(
†† 
	Exception
†† 
e
†† 
)
†† 
{
°° 
return
¢¢ 
Json
¢¢ 
(
¢¢ 
Util
¢¢  
.
¢¢  !
	ErrorJson
¢¢! *
(
¢¢* +
e
¢¢+ ,
)
¢¢, -
)
¢¢- .
;
¢¢. /
}
££ 
}
§§ 	
public
•• 
async
•• 
Task
•• 
<
•• 

JsonResult
•• $
>
••$ %1
#ObtenerClientesGenericoSinParentRol
••& I
(
••I J
)
••J K
{
¶¶ 	
try
ßß 
{
®® 
var
©© 
clientesVigentes
©© $
=
©©% &
await
©©' ,!
_actorNegocioLogica
©©- @
.
©©@ A?
1ObtenerClientesVigentesComoItemsGenericosPorIdRol
©©A r
(
©©r s
)
©©s t
;
©©t u
return
™™ 
Json
™™ 
(
™™ 
clientesVigentes
™™ ,
)
™™, -
;
™™- .
}
´´ 
catch
¨¨ 
(
¨¨ 
	Exception
¨¨ 
e
¨¨ 
)
¨¨ 
{
≠≠ 
return
ÆÆ 
Json
ÆÆ 
(
ÆÆ 
Util
ÆÆ  
.
ÆÆ  !
	ErrorJson
ÆÆ! *
(
ÆÆ* +
e
ÆÆ+ ,
)
ÆÆ, -
)
ÆÆ- .
;
ÆÆ. /
}
ØØ 
}
∞∞ 	
public
≥≥ 
ActionResult
≥≥ 
CarteraDeClientes
≥≥ -
(
≥≥- .
)
≥≥. /
{
¥¥ 	
return
µµ 
View
µµ 
(
µµ 
)
µµ 
;
µµ 
}
∂∂ 	
public
∏∏ 

JsonResult
∏∏ &
GuardarCarteraDeClientes
∏∏ 2
(
∏∏2 30
"RegistroCarteraDeClientesViewModel
∏∏3 U
cartera
∏∏V ]
)
∏∏] ^
{
ππ 	
try
∫∫ 
{
ªª 
OperationResult
ºº 
	resultado
ºº  )
;
ºº) *
if
ΩΩ 
(
ΩΩ 
cartera
ΩΩ 
.
ΩΩ 
Detalles
ΩΩ $
!=
ΩΩ% '
null
ΩΩ( ,
)
ΩΩ, -
{
ææ 
List
øø 
<
øø 
int
øø 
>
øø 

idClientes
øø (
=
øø) *
new
øø+ .
List
øø/ 3
<
øø3 4
int
øø4 7
>
øø7 8
(
øø8 9
)
øø9 :
;
øø: ;

idClientes
¿¿ 
=
¿¿  
cartera
¿¿! (
.
¿¿( )
Detalles
¿¿) 1
.
¿¿1 2
Select
¿¿2 8
(
¿¿8 9
c
¿¿9 :
=>
¿¿; =
c
¿¿> ?
.
¿¿? @
Id
¿¿@ B
)
¿¿B C
.
¿¿C D
ToList
¿¿D J
(
¿¿J K
)
¿¿K L
;
¿¿L M
if
¡¡ 
(
¡¡ 
cartera
¡¡ 
.
¡¡  
Id
¡¡  "
!=
¡¡# %
$num
¡¡& '
)
¡¡' (
{
¬¬ 
	resultado
√√ !
=
√√" #
null
√√$ (
;
√√( )
	resultado
ƒƒ !
=
ƒƒ" #!
_actorNegocioLogica
ƒƒ$ 7
.
ƒƒ7 8)
ActualizarCarteraDeClientes
ƒƒ8 S
(
ƒƒS T
cartera
ƒƒT [
.
ƒƒ[ \
CentroDeAtencion
ƒƒ\ l
.
ƒƒl m
Id
ƒƒm o
,
ƒƒo p

idClientes
ƒƒq {
)
ƒƒ{ |
;
ƒƒ| }
}
≈≈ 
else
∆∆ 
{
«« 
	resultado
»» !
=
»»" #!
_actorNegocioLogica
»»$ 7
.
»»7 8$
CrearCarteraDeClientes
»»8 N
(
»»N O
cartera
»»O V
.
»»V W
CentroDeAtencion
»»W g
.
»»g h
Id
»»h j
,
»»j k

idClientes
»»l v
)
»»v w
;
»»w x
}
…… 
Util
   
.
   (
ManageIfResultIsNotSuccess
   3
(
  3 4
	resultado
  4 =
,
  = >
$str
  ? h
)
  h i
;
  i j
return
ÀÀ 
new
ÀÀ "
JsonHttpStatusResult
ÀÀ 3
(
ÀÀ3 4
new
ÀÀ4 7
{
ÀÀ8 9
	resultado
ÀÀ: C
.
ÀÀC D
code_result
ÀÀD O
,
ÀÀO P
	resultado
ÀÀQ Z
.
ÀÀZ [
data
ÀÀ[ _
,
ÀÀ_ ` 
result_description
ÀÀa s
=
ÀÀt u
	resultado
ÀÀv 
.ÀÀ Ä
titleÀÀÄ Ö
}ÀÀÜ á
,ÀÀá à
HttpStatusCodeÀÀâ ó
.ÀÀó ò
OKÀÀò ö
)ÀÀö õ
;ÀÀõ ú
}
ÃÃ 
throw
ÕÕ 
new
ÕÕ 
LogicaException
ÕÕ )
(
ÕÕ) *
$str
ÕÕ* B
)
ÕÕB C
;
ÕÕC D
}
ŒŒ 
catch
œœ 
(
œœ 
LogicaException
œœ "
oe
œœ# %
)
œœ% &
{
–– 
return
—— 
new
—— "
JsonHttpStatusResult
—— /
(
——/ 0
Util
——0 4
.
——4 5
	ErrorJson
——5 >
(
——> ?
oe
——? A
)
——A B
,
——B C
HttpStatusCode
——D R
.
——R S!
InternalServerError
——S f
)
——f g
;
——g h
}
““ 
catch
”” 
(
”” 
	Exception
”” 
e
”” 
)
”” 
{
‘‘ 
return
’’ 
new
’’ "
JsonHttpStatusResult
’’ /
(
’’/ 0
Util
’’0 4
.
’’4 5
	ErrorJson
’’5 >
(
’’> ?
new
’’? B
	Exception
’’C L
(
’’L M
$str
’’M 
,’’ Ä
e’’Å Ç
)’’Ç É
)’’É Ñ
,’’Ñ Ö
HttpStatusCode’’Ü î
.’’î ï#
InternalServerError’’ï ®
)’’® ©
;’’© ™
}
÷÷ 
}
◊◊ 	
public
ŸŸ 

JsonResult
ŸŸ '
ObtenerCarterasDeClientes
ŸŸ 3
(
ŸŸ3 4
)
ŸŸ4 5
{
⁄⁄ 	
try
€€ 
{
‹‹ 
List
›› 
<
›› /
!BandejaCarteraDeClientesViewModel
›› 6
>
››6 7
	respuesta
››8 A
=
››B C/
!BandejaCarteraDeClientesViewModel
››D e
.
››e f
Convert
››f m
(
››m n"
_actorNegocioLogica››n Å
.››Å Ç)
ObtenerCarterasDeClientes››Ç õ
(››õ ú
)››ú ù
)››ù û
;››û ü
return
ﬁﬁ 
Json
ﬁﬁ 
(
ﬁﬁ 
	respuesta
ﬁﬁ %
)
ﬁﬁ% &
;
ﬁﬁ& '
}
ﬂﬂ 
catch
‡‡ 
(
‡‡ 
	Exception
‡‡ 
e
‡‡ 
)
‡‡ 
{
·· 
return
‚‚ 
new
‚‚ "
JsonHttpStatusResult
‚‚ /
(
‚‚/ 0
Util
‚‚0 4
.
‚‚4 5
	ErrorJson
‚‚5 >
(
‚‚> ?
e
‚‚? @
)
‚‚@ A
,
‚‚A B
HttpStatusCode
‚‚C Q
.
‚‚Q R!
InternalServerError
‚‚R e
)
‚‚e f
;
‚‚f g
}
„„ 
}
‰‰ 	
public
ÊÊ 

JsonResult
ÊÊ &
ObtenerCarteraDeClientes
ÊÊ 2
(
ÊÊ2 3
int
ÊÊ3 6 
idCarteraDeCliente
ÊÊ7 I
)
ÊÊI J
{
ÁÁ 	
try
ËË 
{
ÈÈ /
!DetalleCarteraDeClientesViewModel
ÍÍ 1
	respuesta
ÍÍ2 ;
=
ÍÍ< =
new
ÍÍ> A/
!DetalleCarteraDeClientesViewModel
ÍÍB c
(
ÍÍc d!
_actorNegocioLogica
ÍÍd w
.
ÍÍw x<
-ObtenerCarteraDeClientesSegunCentroDeAtencionÍÍx •
(ÍÍ• ¶"
idCarteraDeClienteÍÍ¶ ∏
)ÍÍ∏ π
)ÍÍπ ∫
;ÍÍ∫ ª
return
ÎÎ 
Json
ÎÎ 
(
ÎÎ 
	respuesta
ÎÎ %
)
ÎÎ% &
;
ÎÎ& '
}
ÏÏ 
catch
ÌÌ 
(
ÌÌ 
	Exception
ÌÌ 
e
ÌÌ 
)
ÌÌ 
{
ÓÓ 
return
ÔÔ 
Json
ÔÔ 
(
ÔÔ 
Util
ÔÔ  
.
ÔÔ  !
	ErrorJson
ÔÔ! *
(
ÔÔ* +
e
ÔÔ+ ,
)
ÔÔ, -
)
ÔÔ- .
;
ÔÔ. /
}
 
}
ÒÒ 	
public
ÛÛ 

JsonResult
ÛÛ -
ObtenerCarteraDeClientesAEditar
ÛÛ 9
(
ÛÛ9 :
int
ÛÛ: = 
idCarteraDeCliente
ÛÛ> P
)
ÛÛP Q
{
ÙÙ 	
try
ıı 
{
ˆˆ 0
"RegistroCarteraDeClientesViewModel
˜˜ 2
registro
˜˜3 ;
=
˜˜< =
new
˜˜> A0
"RegistroCarteraDeClientesViewModel
˜˜B d
(
˜˜d e!
_actorNegocioLogica
˜˜e x
.
˜˜x y<
-ObtenerCarteraDeClientesSegunCentroDeAtencion˜˜y ¶
(˜˜¶ ß"
idCarteraDeCliente˜˜ß π
)˜˜π ∫
)˜˜∫ ª
;˜˜ª º
return
¯¯ 
Json
¯¯ 
(
¯¯ 
registro
¯¯ $
)
¯¯$ %
;
¯¯% &
}
˘˘ 
catch
˙˙ 
(
˙˙ 
	Exception
˙˙ 
e
˙˙ 
)
˙˙ 
{
˚˚ 
return
¸¸ 
Json
¸¸ 
(
¸¸ 
Util
¸¸  
.
¸¸  !
	ErrorJson
¸¸! *
(
¸¸* +
e
¸¸+ ,
)
¸¸, -
)
¸¸- .
;
¸¸. /
}
˝˝ 
}
˛˛ 	
public
ÄÄ 

JsonResult
ÄÄ &
ObtenerClientesDeCartera
ÄÄ 2
(
ÄÄ2 3
int
ÄÄ3 6 
idCarteraDeCliente
ÄÄ7 I
)
ÄÄI J
{
ÅÅ 	
try
ÇÇ 
{
ÉÉ 
var
ÑÑ 
	respuesta
ÑÑ 
=
ÑÑ !
_actorNegocioLogica
ÑÑ  3
.
ÑÑ3 4;
-ObtenerCarteraDeClientesSegunCentroDeAtencion
ÑÑ4 a
(
ÑÑa b 
idCarteraDeCliente
ÑÑb t
)
ÑÑt u
;
ÑÑu v
List
ÖÖ 
<
ÖÖ $
ComboGenericoViewModel
ÖÖ +
>
ÖÖ+ ,
clientesViewModel
ÖÖ- >
=
ÖÖ? @$
ComboGenericoViewModel
ÖÖA W
.
ÖÖW X
Convert
ÖÖX _
(
ÖÖ_ `
	respuesta
ÖÖ` i
.
ÖÖi j
clientes
ÖÖj r
)
ÖÖr s
;
ÖÖs t
return
ÜÜ 
Json
ÜÜ 
(
ÜÜ 
clientesViewModel
ÜÜ -
)
ÜÜ- .
;
ÜÜ. /
}
áá 
catch
àà 
(
àà 
	Exception
àà 
e
àà 
)
àà 
{
ââ 
return
ää 
Json
ää 
(
ää 
Util
ää  
.
ää  !
	ErrorJson
ää! *
(
ää* +
e
ää+ ,
)
ää, -
)
ää- .
;
ää. /
}
ãã 
}
åå 	
public
ëë 

JsonResult
ëë %
ObtenerDireccionCliente
ëë 1
(
ëë1 2
int
ëë2 5
	idCliente
ëë6 ?
)
ëë? @
{
íí 	
try
ìì 
{
îî 
return
ïï 
Json
ïï 
(
ïï !
_actorNegocioLogica
ïï /
.
ïï/ 0,
ObtenerDireccionActorComercial
ïï0 N
(
ïïN O
	idCliente
ïïO X
)
ïïX Y
)
ïïY Z
;
ïïZ [
}
ññ 
catch
óó 
(
óó 
	Exception
óó 
e
óó 
)
óó 
{
òò 
return
ôô 
Json
ôô 
(
ôô 
Util
ôô  
.
ôô  !
	ErrorJson
ôô! *
(
ôô* +
e
ôô+ ,
)
ôô, -
)
ôô- .
;
ôô. /
}
öö 
}
õõ 	
public
ùù 

JsonResult
ùù +
ObtenerUbigeoDireccionCliente
ùù 7
(
ùù7 8
int
ùù8 ;
	idCliente
ùù< E
)
ùùE F
{
ûû 	
try
üü 
{
†† 
return
°° 
Json
°° 
(
°° !
_actorNegocioLogica
°° /
.
°°/ 04
&ObtenerIdUbigeoDireccionActorComercial
°°0 V
(
°°V W
	idCliente
°°W `
)
°°` a
)
°°a b
;
°°b c
}
¢¢ 
catch
££ 
(
££ 
	Exception
££ 
e
££ 
)
££ 
{
§§ 
return
•• 
Json
•• 
(
•• 
Util
••  
.
••  !
	ErrorJson
••! *
(
••* +
e
••+ ,
)
••, -
)
••- .
;
••. /
}
¶¶ 
}
ßß 	
public
©© 

JsonResult
©© ,
ObtenerDetalleDireccionCliente
©© 8
(
©©8 9
int
©©9 <
	idCliente
©©= F
)
©©F G
{
™™ 	
try
´´ 
{
¨¨ 
return
≠≠ 
Json
≠≠ 
(
≠≠ !
_actorNegocioLogica
≠≠ /
.
≠≠/ 03
%ObtenerDetalleDireccionActorComercial
≠≠0 U
(
≠≠U V
	idCliente
≠≠V _
)
≠≠_ `
)
≠≠` a
;
≠≠a b
}
ÆÆ 
catch
ØØ 
(
ØØ 
	Exception
ØØ 
e
ØØ 
)
ØØ 
{
∞∞ 
return
±± 
Json
±± 
(
±± 
Util
±±  
.
±±  !
	ErrorJson
±±! *
(
±±* +
e
±±+ ,
)
±±, -
)
±±- .
;
±±. /
}
≤≤ 
}
≥≥ 	
public
µµ 

JsonResult
µµ +
ObtenerUbigeoDireccionTercero
µµ 7
(
µµ7 8
int
µµ8 ;
	idTercero
µµ< E
)
µµE F
{
∂∂ 	
try
∑∑ 
{
∏∏ 
return
ππ 
Json
ππ 
(
ππ !
_actorNegocioLogica
ππ /
.
ππ/ 04
&ObtenerIdUbigeoDireccionActorComercial
ππ0 V
(
ππV W
	idTercero
ππW `
)
ππ` a
)
ππa b
;
ππb c
}
∫∫ 
catch
ªª 
(
ªª 
	Exception
ªª 
e
ªª 
)
ªª 
{
ºº 
return
ΩΩ 
Json
ΩΩ 
(
ΩΩ 
Util
ΩΩ  
.
ΩΩ  !
	ErrorJson
ΩΩ! *
(
ΩΩ* +
e
ΩΩ+ ,
)
ΩΩ, -
)
ΩΩ- .
;
ΩΩ. /
}
ææ 
}
øø 	
public
¡¡ 

JsonResult
¡¡ ,
ObtenerDetalleDireccionTercero
¡¡ 8
(
¡¡8 9
int
¡¡9 <
	idTercero
¡¡= F
)
¡¡F G
{
¬¬ 	
try
√√ 
{
ƒƒ 
return
≈≈ 
Json
≈≈ 
(
≈≈ !
_actorNegocioLogica
≈≈ /
.
≈≈/ 03
%ObtenerDetalleDireccionActorComercial
≈≈0 U
(
≈≈U V
	idTercero
≈≈V _
)
≈≈_ `
)
≈≈` a
;
≈≈a b
}
∆∆ 
catch
«« 
(
«« 
	Exception
«« 
e
«« 
)
«« 
{
»» 
return
…… 
Json
…… 
(
…… 
Util
……  
.
……  !
	ErrorJson
……! *
(
……* +
e
……+ ,
)
……, -
)
……- .
;
……. /
}
   
}
ÀÀ 	
public
ÕÕ 

JsonResult
ÕÕ )
ObtenerUltimaPlacaDeCliente
ÕÕ 5
(
ÕÕ5 6
int
ÕÕ6 9
	idCliente
ÕÕ: C
)
ÕÕC D
{
ŒŒ 	
try
œœ 
{
–– 
var
—— 
placaCliente
——  
=
——! "!
_actorNegocioLogica
——# 6
.
——6 7)
ObtenerUltimaPlacaDeCliente
——7 R
(
——R S
	idCliente
——S \
)
——\ ]
;
——] ^
return
““ 
Json
““ 
(
““ 
placaCliente
““ (
)
““( )
;
““) *
}
”” 
catch
‘‘ 
(
‘‘ 
	Exception
‘‘ 
e
‘‘ 
)
‘‘ 
{
’’ 
return
÷÷ 
Json
÷÷ 
(
÷÷ 
Util
÷÷  
.
÷÷  !
	ErrorJson
÷÷! *
(
÷÷* +
e
÷÷+ ,
)
÷÷, -
)
÷÷- .
;
÷÷. /
}
◊◊ 
}
ÿÿ 	
public
€€ 
ActionResult
€€ 
GrupoClientes
€€ )
(
€€) *
)
€€* +
{
‹‹ 	
ViewBag
›› 
.
›› 
idClienteGenerico
›› %
=
››& '
ActorSettings
››( 5
.
››5 6
Default
››6 =
.
››= >
IdClienteGenerico
››> O
;
››O P
ViewBag
ﬁﬁ 
.
ﬁﬁ 
idRolCliente
ﬁﬁ  
=
ﬁﬁ! "
ActorSettings
ﬁﬁ# 0
.
ﬁﬁ0 1
Default
ﬁﬁ1 8
.
ﬁﬁ8 9
IdRolCliente
ﬁﬁ9 E
;
ﬁﬁE F
ViewBag
ﬂﬂ 
.
ﬂﬂ *
tiempoEsperaBusquedaSelector
ﬂﬂ 0
=
ﬂﬂ1 2 
AplicacionSettings
ﬂﬂ3 E
.
ﬂﬂE F
Default
ﬂﬂF M
.
ﬂﬂM N>
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidad
ﬂﬂN ~
;
ﬂﬂ~ 
ViewBag
‡‡ 
.
‡‡ 2
$minimoCaracteresBuscarActorComercial
‡‡ 8
=
‡‡9 :
ActorSettings
‡‡; H
.
‡‡H I
Default
‡‡I P
.
‡‡P QC
4MinimoDeCaracteresParaBuscarEnSelectorActorComercial‡‡Q Ö
;‡‡Ö Ü
ViewBag
·· 
.
·· =
/mascaraDeVisualizacionValidacionRegistroCliente
·· C
=
··D E
ActorSettings
··F S
.
··S T
Default
··T [
.
··[ \>
/MascaraDeVisualizacionValidacionRegistroCliente··\ ã
;··ã å
return
‚‚ 
View
‚‚ 
(
‚‚ 
)
‚‚ 
;
‚‚ 
}
„„ 	
public
ÂÂ 

JsonResult
ÂÂ "
GuardarGrupoClientes
ÂÂ .
(
ÂÂ. /
GrupoClientes
ÂÂ/ <
grupoClientes
ÂÂ= J
)
ÂÂJ K
{
ÊÊ 	
try
ÁÁ 
{
ËË 
OperationResult
ÈÈ 
	resultado
ÈÈ  )
;
ÈÈ) *
if
ÍÍ 
(
ÍÍ 
grupoClientes
ÍÍ !
.
ÍÍ! "
Id
ÍÍ" $
!=
ÍÍ% '
$num
ÍÍ( )
)
ÍÍ) *
{
ÎÎ 
	resultado
ÏÏ 
=
ÏÏ #
_grupoClientes_Logica
ÏÏ  5
.
ÏÏ5 6%
ActualizarGrupoClientes
ÏÏ6 M
(
ÏÏM N
grupoClientes
ÏÏN [
)
ÏÏ[ \
;
ÏÏ\ ]
}
ÌÌ 
else
ÓÓ 
{
ÔÔ 
	resultado
 
=
 #
_grupoClientes_Logica
  5
.
5 6 
CrearGrupoClientes
6 H
(
H I
grupoClientes
I V
)
V W
;
W X
}
ÒÒ 
Util
ÚÚ 
.
ÚÚ (
ManageIfResultIsNotSuccess
ÚÚ /
(
ÚÚ/ 0
	resultado
ÚÚ0 9
,
ÚÚ9 :
$str
ÚÚ; b
)
ÚÚb c
;
ÚÚc d
return
ÛÛ 
new
ÛÛ "
JsonHttpStatusResult
ÛÛ /
(
ÛÛ/ 0
new
ÛÛ0 3
{
ÛÛ4 5
	resultado
ÛÛ6 ?
.
ÛÛ? @
code_result
ÛÛ@ K
,
ÛÛK L
	resultado
ÛÛM V
.
ÛÛV W
data
ÛÛW [
,
ÛÛ[ \ 
result_description
ÛÛ] o
=
ÛÛp q
	resultado
ÛÛr {
.
ÛÛ{ |
titleÛÛ| Å
}ÛÛÇ É
,ÛÛÉ Ñ
HttpStatusCodeÛÛÖ ì
.ÛÛì î
OKÛÛî ñ
)ÛÛñ ó
;ÛÛó ò
}
ÙÙ 
catch
ıı 
(
ıı 
	Exception
ıı 
e
ıı 
)
ıı 
{
ˆˆ 
return
˜˜ 
new
˜˜ "
JsonHttpStatusResult
˜˜ /
(
˜˜/ 0
Util
˜˜0 4
.
˜˜4 5
	ErrorJson
˜˜5 >
(
˜˜> ?
new
˜˜? B
	Exception
˜˜C L
(
˜˜L M
$str
˜˜M }
,
˜˜} ~
e˜˜ Ä
)˜˜Ä Å
)˜˜Å Ç
,˜˜Ç É
HttpStatusCode˜˜Ñ í
.˜˜í ì#
InternalServerError˜˜ì ¶
)˜˜¶ ß
;˜˜ß ®
}
¯¯ 
}
˘˘ 	
public
˚˚ 

JsonResult
˚˚ #
ObtenerGruposClientes
˚˚ /
(
˚˚/ 0
)
˚˚0 1
{
¸¸ 	
try
˝˝ 
{
˛˛ 
var
ˇˇ 
	resultado
ˇˇ 
=
ˇˇ #
_grupoClientes_Logica
ˇˇ  5
.
ˇˇ5 6#
ObtenerGruposClientes
ˇˇ6 K
(
ˇˇK L
)
ˇˇL M
;
ˇˇM N
return
ÄÄ 
Json
ÄÄ 
(
ÄÄ 
	resultado
ÄÄ %
)
ÄÄ% &
;
ÄÄ& '
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
e
ÇÇ 
)
ÇÇ 
{
ÉÉ 
return
ÑÑ 
new
ÑÑ "
JsonHttpStatusResult
ÑÑ /
(
ÑÑ/ 0
Util
ÑÑ0 4
.
ÑÑ4 5
	ErrorJson
ÑÑ5 >
(
ÑÑ> ?
e
ÑÑ? @
)
ÑÑ@ A
,
ÑÑA B
HttpStatusCode
ÑÑC Q
.
ÑÑQ R!
InternalServerError
ÑÑR e
)
ÑÑe f
;
ÑÑf g
}
ÖÖ 
}
ÜÜ 	
public
àà 

JsonResult
àà "
ObtenerGrupoClientes
àà .
(
àà. /
int
àà/ 2
idGrupoCliente
àà3 A
)
ààA B
{
ââ 	
try
ää 
{
ãã 
var
åå 
	resultado
åå 
=
åå #
_grupoClientes_Logica
åå  5
.
åå5 6"
ObtenerGrupoClientes
åå6 J
(
ååJ K
idGrupoCliente
ååK Y
)
ååY Z
;
ååZ [
return
çç 
Json
çç 
(
çç 
	resultado
çç %
)
çç% &
;
çç& '
}
éé 
catch
èè 
(
èè 
	Exception
èè 
e
èè 
)
èè 
{
êê 
return
ëë 
Json
ëë 
(
ëë 
Util
ëë  
.
ëë  !
	ErrorJson
ëë! *
(
ëë* +
e
ëë+ ,
)
ëë, -
)
ëë- .
;
ëë. /
}
íí 
}
ìì 	
public
ïï 

JsonResult
ïï "
DarBajaGrupoClientes
ïï .
(
ïï. /
int
ïï/ 2
idGrupoCliente
ïï3 A
)
ïïA B
{
ññ 	
try
óó 
{
òò 
var
ôô 
	respuesta
ôô 
=
ôô #
_grupoClientes_Logica
ôô  5
.
ôô5 6"
DarBajaGrupoClientes
ôô6 J
(
ôôJ K
idGrupoCliente
ôôK Y
)
ôôY Z
;
ôôZ [
return
öö 
Json
öö 
(
öö 
	respuesta
öö %
)
öö% &
;
öö& '
}
õõ 
catch
úú 
(
úú 
	Exception
úú 
e
úú 
)
úú 
{
ùù 
return
ûû 
new
ûû "
JsonHttpStatusResult
ûû /
(
ûû/ 0
Util
ûû0 4
.
ûû4 5
	ErrorJson
ûû5 >
(
ûû> ?
new
ûû? B
	Exception
ûûC L
(
ûûL M
$strûûM É
,ûûÉ Ñ
eûûÖ Ü
)ûûÜ á
)ûûá à
,ûûà â
HttpStatusCodeûûä ò
.ûûò ô#
InternalServerErrorûûô ¨
)ûû¨ ≠
;ûû≠ Æ
}
üü 
}
†† 	
}
•• 
}¶¶ Òä
SD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\CompraController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
CompraController !
:" #
BaseController$ 2
{ 
private 
readonly 
IOperacionLogica )
_logicaOperacion* :
;: ;
private 
readonly 
IConceptoLogica (
_logicaConcepto) 8
;8 9
private 
readonly 
IMaestroLogica '
_logicaMaestro( 6
;6 7
public 
CompraController 
(  
)  !
{ 	
_logicaOperacion 
= 
Dependencia *
.* +
Resolve+ 2
<2 3
IOperacionLogica3 C
>C D
(D E
)E F
;F G
_logicaConcepto 
= 
Dependencia )
.) *
Resolve* 1
<1 2
IConceptoLogica2 A
>A B
(B C
)C D
;D E
_logicaMaestro 
= 
Dependencia (
.( )
Resolve) 0
<0 1
IMaestroLogica1 ?
>? @
(@ A
)A B
;B C
} 	
[!! 	
	Authorize!!	 
(!! 
Roles!! 
=!! 
$str!! &
)!!& '
]!!' (
public"" 
ActionResult"" 
ConsultarCompras"" ,
("", -
)""- .
{## 	
ViewBag$$ 
.$$ %
idTipoActorPersonaNatural$$ -
=$$. /
ActorSettings$$0 =
.$$= >
Default$$> E
.$$E F%
IdTipoActorPersonaNatural$$F _
;$$_ `
ViewBag%% 
.%% 
fechaInicio%% 
=%%  !
DateTimeUtil%%! -
.%%- .
FechaActual%%. 9
(%%9 :
)%%: ;
.%%; <
AddDays%%< C
(%%C D
-%%D E
$num%%E F
)%%F G
.%%G H
ToString%%H P
(%%P Q
$str%%Q ]
)%%] ^
;%%^ _
ViewBag&& 
.&& 
fechaFin&& 
=&& 
DateTimeUtil&& *
.&&* +
FechaActual&&+ 6
(&&6 7
)&&7 8
.&&8 9
ToString&&9 A
(&&A B
$str&&B N
)&&N O
;&&O P
ViewBag'' 
.'' 
tasaIGV'' 
='' 
TransaccionSettings'' 1
.''1 2
Default''2 9
.''9 :
TasaIGV'': A
;''A B
ViewBag(( 
.(( 
aplicaLeyAmazonia(( %
=((& '
TransaccionSettings((( ;
.((; <
Default((< C
.((C D
AplicaLeyAmazonia((D U
;((U V
ViewBag)) 
.)) (
comprasDestinadasAPorDefecto)) 0
=))1 2
TransaccionSettings))3 F
.))F G
Default))G N
.))N O(
ComprasDestinadasAPorDefecto))O k
;))k l
ViewBag** 
.** &
idTipoActorPersonaJuridica** .
=**/ 0
ActorSettings**1 >
.**> ?
Default**? F
.**F G&
IdTipoActorPersonaJuridica**G a
;**a b
ViewBag++ 
.++ "
realizaCompraAlCredito++ *
=+++ ,
TransaccionSettings++- @
.++@ A
Default++A H
.++H I"
RealizaCompraAlCredito++I _
;++_ `
ViewBag,, 
.,, )
permitirLoteEnDetalleDeCompra,, 1
=,,2 3
AplicacionSettings,,4 F
.,,F G
Default,,G N
.,,N O)
PermitirLoteEnDetalleDeCompra,,O l
;,,l m
ViewBag-- 
.-- -
!permitirRegistroEnDetalleDeCompra-- 5
=--6 7
AplicacionSettings--8 J
.--J K
Default--K R
.--R S-
!PermitirRegistroEnDetalleDeCompra--S t
;--t u
ViewBag.. 
... 0
$permitirVencimientoEnDetalleDeCompra.. 8
=..9 :
AplicacionSettings..; M
...M N
Default..N U
...U V0
$PermitirVencimientoEnDetalleDeCompra..V z
;..z {
ViewBag// 
.// 
idProveedorGenerico// '
=//( )
ActorSettings//* 7
.//7 8
Default//8 ?
.//? @
idProveedorGenerico//@ S
;//S T
ViewBag00 
.00 /
#idTipoPersonaSeleccionadaPorDefecto00 7
=008 9
ActorSettings00: G
.00G H
Default00H O
.00O P/
#IdTipoPersonaSeleccionadaPorDefecto00P s
;00s t
ViewBag11 
.11 <
0idTipoDocumentoSeleccionadaConTipoPersonaNatural11 D
=11E F
ActorSettings11G T
.11T U
Default11U \
.11\ ]=
0IdTipoDocumentoSeleccionadaConTipoPersonaNatural	11] ç
;
11ç é
ViewBag22 
.22 =
1idTipoDocumentoSeleccionadaConTipoPersonaJuridica22 E
=22F G
ActorSettings22H U
.22U V
Default22V ]
.22] ^>
1IdTipoDocumentoSeleccionadaConTipoPersonaJuridica	22^ è
;
22è ê
ViewBag33 
.33 '
idTipoDocumentoIdentidadDni33 /
=330 1
ActorSettings332 ?
.33? @
Default33@ G
.33G H'
IdTipoDocumentoIdentidadDni33H c
;33c d
ViewBag44 
.44 '
idTipoDocumentoIdentidadRuc44 /
=440 1
ActorSettings442 ?
.44? @
Default44@ G
.44G H'
IdTipoDocumentoIdentidadRuc44H c
;44c d
ViewBag55 
.55 
fechaActual55 
=55  !
DateTimeUtil55! -
.55- .
FechaActual55. 9
(559 :
)55: ;
.55; <
Date55< @
;55@ A
ViewBag66 
.66 !
permitirRegistroFlete66 )
=66* +
AplicacionSettings66, >
.66> ?
Default66? F
.66F G)
PermitirRegistroFleteEnCompra66G d
;66d e
ViewBag77 
.77 *
idDocumentoNotaAlamacenInterna77 2
=773 4
MaestroSettings775 D
.77D E
Default77E L
.77L M9
-IdDetalleMaestroComprobanteNotaAlmacenInterna77M z
;77z {
ViewBag88 
.88 *
idUbigeoSeleccionadoPorDefecto88 2
=883 4
ActorSettings885 B
.88B C
Default88C J
.88J K5
)idUbigeoSeleccionadoPorDefectoEnProveedor88K t
;88t u
ViewBag99 
.99 "
idUbigeoNoEspecificado99 *
=99+ ,
ActorSettings99- :
.99: ;
Default99; B
.99B C"
idUbigeoNoEspecificado99C Y
;99Y Z
ViewBag:: 
.:: 2
&permitirMultipleIngresoDelMismoDetalle:: :
=::; <
AplicacionSettings::= O
.::O P
Default::P W
.::W X;
.PermitirMultipleIngresoDelMismoDetalleEnCompra	::X Ü
;
::Ü á
ViewBag;; 
.;; 2
&idDetalleMaestroAnulacionDeLaOperacion;; :
=;;; <
MaestroSettings;;= L
.;;L M
Default;;M T
.;;T UK
>IdDetalleMaestroNotaDeCreditoElectronicaAnulacionDeLaOperacion	;;U ì
;
;;ì î
ViewBag<< 
.<< 4
(idDetalleMaestroAnulacionPorErrorEnElRuc<< <
=<<= >
MaestroSettings<<? N
.<<N O
Default<<O V
.<<V WM
@IdDetalleMaestroNotaDeCreditoElectronicaAnulacionPorErrorEnElRuc	<<W ó
;
<<ó ò
ViewBag== 
.== =
1idDetalleMaestroCorreccionPorErrorEnLaDescripcion== E
===F G
MaestroSettings==H W
.==W X
Default==X _
.==_ `V
IIdDetalleMaestroNotaDeCreditoElectronicaCorreccionPorErrorEnLaDescripcion	==` ©
;
==© ™
ViewBag>> 
.>> +
idDetalleMaestroDescuentoGlobal>> 3
=>>4 5
MaestroSettings>>6 E
.>>E F
Default>>F M
.>>M ND
7IdDetalleMaestroNotaDeCreditoElectronicaDescuentoGlobal	>>N Ö
;
>>Ö Ü
ViewBag?? 
.?? ,
 idDetalleMaestroDescuentoPorItem?? 4
=??5 6
MaestroSettings??7 F
.??F G
Default??G N
.??N OE
8IdDetalleMaestroNotaDeCreditoElectronicaDescuentoPorItem	??O á
;
??á à
ViewBag@@ 
.@@ +
idDetalleMaestroDevolucionTotal@@ 3
=@@4 5
MaestroSettings@@6 E
.@@E F
Default@@F M
.@@M ND
7IdDetalleMaestroNotaDeCreditoElectronicaDevolucionTotal	@@N Ö
;
@@Ö Ü
ViewBagAA 
.AA -
!idDetalleMaestroDevolucionPorItemAA 5
=AA6 7
MaestroSettingsAA8 G
.AAG H
DefaultAAH O
.AAO PF
9IdDetalleMaestroNotaDeCreditoElectronicaDevolucionPorItem	AAP â
;
AAâ ä
ViewBagBB 
.BB (
idDetalleMaestroBonificacionBB 0
=BB1 2
MaestroSettingsBB3 B
.BBB C
DefaultBBC J
.BBJ K@
4IdDetalleMaestroNotaDeCreditoElectronicaBonificacionBBK 
;	BB Ä
ViewBagCC 
.CC 0
$idDetalleMaestroDisminucionEnElValorCC 8
=CC9 :
MaestroSettingsCC; J
.CCJ K
DefaultCCK R
.CCR SI
<IdDetalleMaestroNotaDeCreditoElectronicaDisminucionEnElValor	CCS è
;
CCè ê
ViewBagDD 
.DD *
idDetalleMaestroOtrosConceptosDD 2
=DD3 4
MaestroSettingsDD5 D
.DDD E
DefaultDDE L
.DDL MC
6IdDetalleMaestroNotaDeCreditoElectronicaOtrosConceptos	DDM É
;
DDÉ Ñ
ViewBagEE 
.EE ,
 idDetalleMaestroInteresesPorMoraEE 4
=EE5 6
MaestroSettingsEE7 F
.EEF G
DefaultEEG N
.EEN OD
7IdDetalleMaestroNotaDeDebitoElectronicaInteresesPorMora	EEO Ü
;
EEÜ á
ViewBagFF 
.FF ,
 idDetalleMaestroAumentoEnElValorFF 4
=FF5 6
MaestroSettingsFF7 F
.FFF G
DefaultFFG N
.FFN OD
7IdDetalleMaestroNotaDeDebitoElectronicaAumentoEnElValor	FFO Ü
;
FFÜ á
ViewBagGG 
.GG 6
*idDetalleMaestroPenalidadesYOtrosConceptosGG >
=GG? @
MaestroSettingsGGA P
.GGP Q
DefaultGGQ X
.GGX YN
AIdDetalleMaestroNotaDeDebitoElectronicaPenalidadesYOtrosConceptos	GGY ö
;
GGö õ
ViewBagHH 
.HH 8
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardarHH @
=HHA B
AplicacionSettingsHHC U
.HHU V
DefaultHHV ]
.HH] ^9
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardar	HH^ ä
;
HHä ã
ViewBagII 
.II '
idEstablecimientoPorDefectoII /
=II0 1
ProfileDataII2 =
(II= >
)II> ?
.II? @(
CentroDeAtencionSeleccionadoII@ \
.II\ ]$
EstablecimientoComercialII] u
.IIu v
IdIIv x
;IIx y
ViewBagJJ 
.JJ (
idCentroDeAtencionPorDefectoJJ 0
=JJ1 2
ProfileDataJJ3 >
(JJ> ?
)JJ? @
.JJ@ A(
CentroDeAtencionSeleccionadoJJA ]
.JJ] ^
IdJJ^ `
;JJ` a
ViewBagKK 
.KK $
IdPresentacionPorDefectoKK ,
=KK- .
ConceptoSettingsKK/ ?
.KK? @
DefaultKK@ G
.KKG H$
idPresentacionPorDefectoKKH `
;KK` a
ViewBagLL 
.LL $
IdUnidadMedidaPorDefectoLL ,
=LL- .
ConceptoSettingsLL/ ?
.LL? @
DefaultLL@ G
.LLG H$
idUnidadMedidaPorDefectoLLH `
;LL` a
ViewBagMM 
.MM 9
-IdPresentacionAOcultarEnNombreConceptoNegocioMM A
=MMB C
ConceptoSettingsMMD T
.MMT U
DefaultMMU \
.MM\ ]:
-IdPresentacionAOcultarEnNombreConceptoNegocio	MM] ä
;
MMä ã
ViewBagNN 
.NN D
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocioNN L
=NNM N
ConceptoSettingsNNO _
.NN_ `
DefaultNN` g
.NNg hE
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocio	NNh †
;
NN† °
ViewBagOO 
.OO %
numeroDecimalesEnCantidadOO -
=OO. /
AplicacionSettingsOO0 B
.OOB C
DefaultOOC J
.OOJ K%
NumeroDecimalesEnCantidadOOK d
;OOd e
ViewBagPP 
.PP #
numeroDecimalesEnPrecioPP +
=PP, -
AplicacionSettingsPP. @
.PP@ A
DefaultPPA H
.PPH I#
NumeroDecimalesEnPrecioPPI `
;PP` a
ViewBagQQ 
.QQ &
mostrarBuscadorCodigoBarraQQ .
=QQ/ 0
AplicacionSettingsQQ1 C
.QQC D
DefaultQQD K
.QQK L2
&MostrarBuscadorCodigoBarraEnCotizacionQQL r
;QQr s
ViewBagRR 
.RR %
modoDeSeleccionDeConceptoRR -
=RR. /
AplicacionSettingsRR0 B
.RRB C
DefaultRRC J
.RRJ K7
+ModoDeSeleccionDeConceptoDeNegocioEnComprasRRK v
;RRv w
ViewBagSS 
.SS $
modoSeleccionTipoFamiliaSS ,
=SS- .
AplicacionSettingsSS/ A
.SSA B
DefaultSSB I
.SSI J1
%ModoDeSeleccionTipoDeFamiliaEnComprasSSJ o
;SSo p
ViewBagTT 
.TT  
permitirCambioPrecioTT (
=TT) *
AplicacionSettingsTT+ =
.TT= >
DefaultTT> E
.TTE F)
PermitirCambioPrecioEnComprasTTF c
;TTc d
ViewBagUU 
.UU *
minimoCaracteresBuscarConceptoUU 2
=UU3 4
AplicacionSettingsUU5 G
.UUG H
DefaultUUH O
.UUO P:
.MinimoDeCaracteresParaBuscarEnSelectorConceptoUUP ~
;UU~ 
ViewBagVV 
.VV 7
+modoDeSeleccionTipoFamiliaEnRegistroFamiliaVV ?
=VV@ A
ConceptoSettingsVVB R
.VVR S
DefaultVVS Z
.VVZ [8
+ModoDeSeleccionTipoFamiliaEnRegistroFamilia	VV[ Ü
;
VVÜ á
ViewBagWW 
.WW 1
%mostrarCampoCodigoAlRegistrarConceptoWW 9
=WW: ;
ConceptoSettingsWW< L
.WWL M
DefaultWWM T
.WWT U1
%MostrarCampoCodigoAlRegistrarConceptoWWU z
;WWz {
ViewBagXX 
.XX 8
,mostrarCampoCodigoDigemidAlRegistrarConceptoXX @
=XXA B
ConceptoSettingsXXC S
.XXS T
DefaultXXT [
.XX[ \=
0PermitirRegistroCodigoDigemidEnConceptoComercial	XX\ å
;
XXå ç
ViewBagYY 
.YY 
modulosAdicionalesYY &
=YY' ($
MascaraArrayItemGenericoYY) A
.YYA B.
"ConvertirMascaraModulosAdicionalesYYB d
(YYd e
AplicacionSettingsYYe w
.YYw x
DefaultYYx 
.	YY Ä2
$MascaraModulosAdicionalesHabilitados
YYÄ §
)
YY§ •
;
YY• ¶
ViewBagZZ 
.ZZ 
idRolProveedorZZ "
=ZZ# $
ActorSettingsZZ% 2
.ZZ2 3
DefaultZZ3 :
.ZZ: ;
IdRolProveedorZZ; I
;ZZI J
ViewBag[[ 
.[[ (
tiempoEsperaBusquedaSelector[[ 0
=[[1 2
AplicacionSettings[[3 E
.[[E F
Default[[F M
.[[M N<
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidad[[N ~
;[[~ 
ViewBag\\ 
.\\ 0
$minimoCaracteresBuscarActorComercial\\ 8
=\\9 :
ActorSettings\\; H
.\\H I
Default\\I P
.\\P QA
4MinimoDeCaracteresParaBuscarEnSelectorActorComercial	\\Q Ö
;
\\Ö Ü
ViewBag]] 
.]] 4
(idDetalleMaestroCatalogoDocumentoFactura]] <
=]]= >
MaestroSettings]]? N
.]]N O
Default]]O V
.]]V W.
"IdDetalleMaestroComprobanteFactura]]W y
;]]y z
ViewBag^^ 
.^^ =
1mascaraDeVisualizacionValidacionRegistroProveedor^^ E
=^^F G
ActorSettings^^H U
.^^U V
Default^^V ]
.^^] ^>
1MascaraDeVisualizacionValidacionRegistroProveedor	^^^ è
;
^^è ê
ViewBag__ 
.__ '
informacionSelectorConcepto__ /
=__0 1
(__2 3
int__3 6
)__6 7'
InformacionSelectorConcepto__7 R
.__R S
Nombre__S Y
;__Y Z
ViewBag`` 
.`` -
!permitirSeleccionarGrupoProveedor`` 5
=``6 7
Diccionario``8 C
.``C D2
&MapeoOperacionesGruposVsPermitirGrupos``D j
.``j k
Single``k q
(``q r
m``r s
=>``t v
m``w x
.``x y
Key``y |
==``} 
(
``Ä Å
int
``Å Ñ
)
``Ñ Ö1
#OperacionesGruposActoresComerciales
``Ö ®
.
``® ©
Compra
``© Ø
)
``Ø ∞
.
``∞ ±
Value
``± ∂
;
``∂ ∑
returnaa 
Viewaa 
(aa 
)aa 
;aa 
}cc 	
[dd 	
	Authorizedd	 
(dd 
Rolesdd 
=dd 
$strdd &
)dd& '
]dd' (
publicee 
ActionResultee 
Comprasee #
(ee# $
)ee$ %
{ff 	
ViewBaggg 
.gg %
idTipoActorPersonaNaturalgg -
=gg. /
ActorSettingsgg0 =
.gg= >
Defaultgg> E
.ggE F%
IdTipoActorPersonaNaturalggF _
;gg_ `
ViewBaghh 
.hh 
tasaIGVhh 
=hh 
TransaccionSettingshh 1
.hh1 2
Defaulthh2 9
.hh9 :
TasaIGVhh: A
;hhA B
ViewBagii 
.ii 
aplicaLeyAmazoniaii %
=ii& '
TransaccionSettingsii( ;
.ii; <
Defaultii< C
.iiC D
AplicaLeyAmazoniaiiD U
;iiU V
ViewBagjj 
.jj (
comprasDestinadasAPorDefectojj 0
=jj1 2
TransaccionSettingsjj3 F
.jjF G
DefaultjjG N
.jjN O(
ComprasDestinadasAPorDefectojjO k
;jjk l
ViewBagkk 
.kk &
idTipoActorPersonaJuridicakk .
=kk/ 0
ActorSettingskk1 >
.kk> ?
Defaultkk? F
.kkF G&
IdTipoActorPersonaJuridicakkG a
;kka b
ViewBagll 
.ll "
realizaCompraAlCreditoll *
=ll+ ,
TransaccionSettingsll- @
.ll@ A
DefaultllA H
.llH I"
RealizaCompraAlCreditollI _
;ll_ `
ViewBagmm 
.mm )
permitirLoteEnDetalleDeCompramm 1
=mm2 3
AplicacionSettingsmm4 F
.mmF G
DefaultmmG N
.mmN O)
PermitirLoteEnDetalleDeComprammO l
;mml m
ViewBagnn 
.nn -
!permitirRegistroEnDetalleDeComprann 5
=nn6 7
AplicacionSettingsnn8 J
.nnJ K
DefaultnnK R
.nnR S-
!PermitirRegistroEnDetalleDeComprannS t
;nnt u
ViewBagoo 
.oo 0
$permitirVencimientoEnDetalleDeCompraoo 8
=oo9 :
AplicacionSettingsoo; M
.ooM N
DefaultooN U
.ooU V0
$PermitirVencimientoEnDetalleDeCompraooV z
;ooz {
ViewBagpp 
.pp 
idProveedorGenericopp '
=pp( )
ActorSettingspp* 7
.pp7 8
Defaultpp8 ?
.pp? @
idProveedorGenericopp@ S
;ppS T
ViewBagqq 
.qq /
#idTipoPersonaSeleccionadaPorDefectoqq 7
=qq8 9
ActorSettingsqq: G
.qqG H
DefaultqqH O
.qqO P/
#IdTipoPersonaSeleccionadaPorDefectoqqP s
;qqs t
ViewBagrr 
.rr <
0idTipoDocumentoSeleccionadaConTipoPersonaNaturalrr D
=rrE F
ActorSettingsrrG T
.rrT U
DefaultrrU \
.rr\ ]=
0IdTipoDocumentoSeleccionadaConTipoPersonaNatural	rr] ç
;
rrç é
ViewBagss 
.ss =
1idTipoDocumentoSeleccionadaConTipoPersonaJuridicass E
=ssF G
ActorSettingsssH U
.ssU V
DefaultssV ]
.ss] ^>
1IdTipoDocumentoSeleccionadaConTipoPersonaJuridica	ss^ è
;
ssè ê
ViewBagtt 
.tt '
idTipoDocumentoIdentidadDnitt /
=tt0 1
ActorSettingstt2 ?
.tt? @
Defaulttt@ G
.ttG H'
IdTipoDocumentoIdentidadDnittH c
;ttc d
ViewBaguu 
.uu '
idTipoDocumentoIdentidadRucuu /
=uu0 1
ActorSettingsuu2 ?
.uu? @
Defaultuu@ G
.uuG H'
IdTipoDocumentoIdentidadRucuuH c
;uuc d
ViewBagvv 
.vv 
fechaActualvv 
=vv  !
DateTimeUtilvv! -
.vv- .
FechaActualvv. 9
(vv9 :
)vv: ;
;vv; <
ViewBagww 
.ww !
permitirRegistroFleteww )
=ww* +
AplicacionSettingsww, >
.ww> ?
Defaultww? F
.wwF G)
PermitirRegistroFleteEnComprawwG d
;wwd e
ViewBagxx 
.xx *
idUbigeoSeleccionadoPorDefectoxx 2
=xx3 4
ActorSettingsxx5 B
.xxB C
DefaultxxC J
.xxJ K5
)idUbigeoSeleccionadoPorDefectoEnProveedorxxK t
;xxt u
ViewBagyy 
.yy "
idUbigeoNoEspecificadoyy *
=yy+ ,
ActorSettingsyy- :
.yy: ;
Defaultyy; B
.yyB C"
idUbigeoNoEspecificadoyyC Y
;yyY Z
ViewBagzz 
.zz 2
&permitirMultipleIngresoDelMismoDetallezz :
=zz; <
AplicacionSettingszz= O
.zzO P
DefaultzzP W
.zzW X;
.PermitirMultipleIngresoDelMismoDetalleEnCompra	zzX Ü
;
zzÜ á
ViewBag{{ 
.{{ 8
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardar{{ @
={{A B
AplicacionSettings{{C U
.{{U V
Default{{V ]
.{{] ^9
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardar	{{^ ä
;
{{ä ã
ViewBag|| 
.|| '
idEstablecimientoPorDefecto|| /
=||0 1
ProfileData||2 =
(||= >
)||> ?
.||? @(
CentroDeAtencionSeleccionado||@ \
.||\ ]$
EstablecimientoComercial||] u
.||u v
Id||v x
;||x y
ViewBag}} 
.}} (
idCentroDeAtencionPorDefecto}} 0
=}}1 2
ProfileData}}3 >
(}}> ?
)}}? @
.}}@ A(
CentroDeAtencionSeleccionado}}A ]
.}}] ^
Id}}^ `
;}}` a
ViewBag~~ 
.~~ $
IdPresentacionPorDefecto~~ ,
=~~- .
ConceptoSettings~~/ ?
.~~? @
Default~~@ G
.~~G H$
idPresentacionPorDefecto~~H `
;~~` a
ViewBag 
. $
IdUnidadMedidaPorDefecto ,
=- .
ConceptoSettings/ ?
.? @
Default@ G
.G H$
idUnidadMedidaPorDefectoH `
;` a
ViewBag
ÄÄ 
.
ÄÄ ;
-IdPresentacionAOcultarEnNombreConceptoNegocio
ÄÄ A
=
ÄÄB C
ConceptoSettings
ÄÄD T
.
ÄÄT U
Default
ÄÄU \
.
ÄÄ\ ]<
-IdPresentacionAOcultarEnNombreConceptoNegocioÄÄ] ä
;ÄÄä ã
ViewBag
ÅÅ 
.
ÅÅ F
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocio
ÅÅ L
=
ÅÅM N
ConceptoSettings
ÅÅO _
.
ÅÅ_ `
Default
ÅÅ` g
.
ÅÅg hG
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocioÅÅh †
;ÅÅ† °
ViewBag
ÇÇ 
.
ÇÇ '
numeroDecimalesEnCantidad
ÇÇ -
=
ÇÇ. / 
AplicacionSettings
ÇÇ0 B
.
ÇÇB C
Default
ÇÇC J
.
ÇÇJ K'
NumeroDecimalesEnCantidad
ÇÇK d
;
ÇÇd e
ViewBag
ÉÉ 
.
ÉÉ %
numeroDecimalesEnPrecio
ÉÉ +
=
ÉÉ, - 
AplicacionSettings
ÉÉ. @
.
ÉÉ@ A
Default
ÉÉA H
.
ÉÉH I%
NumeroDecimalesEnPrecio
ÉÉI `
;
ÉÉ` a
ViewBag
ÑÑ 
.
ÑÑ (
mostrarBuscadorCodigoBarra
ÑÑ .
=
ÑÑ/ 0 
AplicacionSettings
ÑÑ1 C
.
ÑÑC D
Default
ÑÑD K
.
ÑÑK L4
&MostrarBuscadorCodigoBarraEnCotizacion
ÑÑL r
;
ÑÑr s
ViewBag
ÖÖ 
.
ÖÖ '
modoDeSeleccionDeConcepto
ÖÖ -
=
ÖÖ. / 
AplicacionSettings
ÖÖ0 B
.
ÖÖB C
Default
ÖÖC J
.
ÖÖJ K9
+ModoDeSeleccionDeConceptoDeNegocioEnCompras
ÖÖK v
;
ÖÖv w
ViewBag
ÜÜ 
.
ÜÜ &
modoSeleccionTipoFamilia
ÜÜ ,
=
ÜÜ- . 
AplicacionSettings
ÜÜ/ A
.
ÜÜA B
Default
ÜÜB I
.
ÜÜI J3
%ModoDeSeleccionTipoDeFamiliaEnCompras
ÜÜJ o
;
ÜÜo p
ViewBag
áá 
.
áá "
permitirCambioPrecio
áá (
=
áá) * 
AplicacionSettings
áá+ =
.
áá= >
Default
áá> E
.
ááE F+
PermitirCambioPrecioEnCompras
ááF c
;
áác d
ViewBag
àà 
.
àà ,
minimoCaracteresBuscarConcepto
àà 2
=
àà3 4 
AplicacionSettings
àà5 G
.
ààG H
Default
ààH O
.
ààO P<
.MinimoDeCaracteresParaBuscarEnSelectorConcepto
ààP ~
;
àà~ 
ViewBag
ââ 
.
ââ 9
+modoDeSeleccionTipoFamiliaEnRegistroFamilia
ââ ?
=
ââ@ A
ConceptoSettings
ââB R
.
ââR S
Default
ââS Z
.
ââZ [:
+ModoDeSeleccionTipoFamiliaEnRegistroFamiliaââ[ Ü
;ââÜ á
ViewBag
ää 
.
ää 3
%mostrarCampoCodigoAlRegistrarConcepto
ää 9
=
ää: ;
ConceptoSettings
ää< L
.
ääL M
Default
ääM T
.
ääT U3
%MostrarCampoCodigoAlRegistrarConcepto
ääU z
;
ääz {
ViewBag
ãã 
.
ãã :
,mostrarCampoCodigoDigemidAlRegistrarConcepto
ãã @
=
ããA B
ConceptoSettings
ããC S
.
ããS T
Default
ããT [
.
ãã[ \?
0PermitirRegistroCodigoDigemidEnConceptoComercialãã\ å
;ããå ç
ViewBag
åå 
.
åå  
modulosAdicionales
åå &
=
åå' (&
MascaraArrayItemGenerico
åå) A
.
ååA B0
"ConvertirMascaraModulosAdicionales
ååB d
(
ååd e 
AplicacionSettings
ååe w
.
ååw x
Default
ååx 
.åå Ä4
$MascaraModulosAdicionalesHabilitadosååÄ §
)åå§ •
;åå• ¶
ViewBag
çç 
.
çç 
idRolProveedor
çç "
=
çç# $
ActorSettings
çç% 2
.
çç2 3
Default
çç3 :
.
çç: ;
IdRolProveedor
çç; I
;
ççI J
ViewBag
éé 
.
éé *
tiempoEsperaBusquedaSelector
éé 0
=
éé1 2 
AplicacionSettings
éé3 E
.
ééE F
Default
ééF M
.
ééM N>
0TiempoDeEsperaEnBusquedaSelectoresDeGranCantidad
ééN ~
;
éé~ 
ViewBag
èè 
.
èè 2
$minimoCaracteresBuscarActorComercial
èè 8
=
èè9 :
ActorSettings
èè; H
.
èèH I
Default
èèI P
.
èèP QC
4MinimoDeCaracteresParaBuscarEnSelectorActorComercialèèQ Ö
;èèÖ Ü
ViewBag
êê 
.
êê 6
(idDetalleMaestroCatalogoDocumentoFactura
êê <
=
êê= >
MaestroSettings
êê? N
.
êêN O
Default
êêO V
.
êêV W0
"IdDetalleMaestroComprobanteFactura
êêW y
;
êêy z
ViewBag
ëë 
.
ëë ?
1mascaraDeVisualizacionValidacionRegistroProveedor
ëë E
=
ëëF G
ActorSettings
ëëH U
.
ëëU V
Default
ëëV ]
.
ëë] ^@
1MascaraDeVisualizacionValidacionRegistroProveedorëë^ è
;ëëè ê
ViewBag
íí 
.
íí )
informacionSelectorConcepto
íí /
=
íí0 1
(
íí2 3
int
íí3 6
)
íí6 7)
InformacionSelectorConcepto
íí7 R
.
ííR S
Nombre
ííS Y
;
ííY Z
ViewBag
ìì 
.
ìì /
!permitirSeleccionarGrupoProveedor
ìì 5
=
ìì6 7
Diccionario
ìì8 C
.
ììC D4
&MapeoOperacionesGruposVsPermitirGrupos
ììD j
.
ììj k
Single
ììk q
(
ììq r
m
ììr s
=>
ììt v
m
ììw x
.
ììx y
Key
ììy |
==
ìì} 
(ììÄ Å
intììÅ Ñ
)ììÑ Ö3
#OperacionesGruposActoresComercialesììÖ ®
.ìì® ©
Compraìì© Ø
)ììØ ∞
.ìì∞ ±
Valueìì± ∂
;ìì∂ ∑
return
îî 
View
îî 
(
îî 
)
îî 
;
îî 
}
ïï 	
[
ññ 	
	Authorize
ññ	 
(
ññ 
Roles
ññ 
=
ññ 
$str
ññ &
)
ññ& '
]
ññ' (
public
óó 
ActionResult
óó !
ComprasCorporativas
óó /
(
óó/ 0
)
óó0 1
{
òò 	
ViewBag
ôô 
.
ôô '
idTipoActorPersonaNatural
ôô -
=
ôô. /
ActorSettings
ôô0 =
.
ôô= >
Default
ôô> E
.
ôôE F'
IdTipoActorPersonaNatural
ôôF _
;
ôô_ `
ViewBag
öö 
.
öö 
fechaInicio
öö 
=
öö  !
DateTimeUtil
öö! -
.
öö- .
FechaActual
öö. 9
(
öö9 :
)
öö: ;
.
öö; <
AddDays
öö< C
(
ööC D
-
ööD E
$num
ööE F
)
ööF G
.
ööG H
ToString
ööH P
(
ööP Q
$str
ööQ ]
)
öö] ^
;
öö^ _
ViewBag
õõ 
.
õõ 
fechaFin
õõ 
=
õõ 
DateTimeUtil
õõ *
.
õõ* +
FechaActual
õõ+ 6
(
õõ6 7
)
õõ7 8
.
õõ8 9
ToString
õõ9 A
(
õõA B
$str
õõB N
)
õõN O
;
õõO P
ViewBag
úú 
.
úú 
tasaIGV
úú 
=
úú !
TransaccionSettings
úú 1
.
úú1 2
Default
úú2 9
.
úú9 :
TasaIGV
úú: A
;
úúA B
ViewBag
ùù 
.
ùù 
aplicaLeyAmazonia
ùù %
=
ùù& '!
TransaccionSettings
ùù( ;
.
ùù; <
Default
ùù< C
.
ùùC D
AplicaLeyAmazonia
ùùD U
;
ùùU V
ViewBag
ûû 
.
ûû *
comprasDestinadasAPorDefecto
ûû 0
=
ûû1 2!
TransaccionSettings
ûû3 F
.
ûûF G
Default
ûûG N
.
ûûN O*
ComprasDestinadasAPorDefecto
ûûO k
;
ûûk l
ViewBag
üü 
.
üü (
idTipoActorPersonaJuridica
üü .
=
üü/ 0
ActorSettings
üü1 >
.
üü> ?
Default
üü? F
.
üüF G(
IdTipoActorPersonaJuridica
üüG a
;
üüa b
ViewBag
†† 
.
†† $
realizaCompraAlCredito
†† *
=
††+ ,!
TransaccionSettings
††- @
.
††@ A
Default
††A H
.
††H I$
RealizaCompraAlCredito
††I _
;
††_ `
ViewBag
°° 
.
°° +
permitirLoteEnDetalleDeCompra
°° 1
=
°°2 3 
AplicacionSettings
°°4 F
.
°°F G
Default
°°G N
.
°°N O+
PermitirLoteEnDetalleDeCompra
°°O l
;
°°l m
ViewBag
¢¢ 
.
¢¢ /
!permitirRegistroEnDetalleDeCompra
¢¢ 5
=
¢¢6 7 
AplicacionSettings
¢¢8 J
.
¢¢J K
Default
¢¢K R
.
¢¢R S/
!PermitirRegistroEnDetalleDeCompra
¢¢S t
;
¢¢t u
ViewBag
££ 
.
££ 2
$permitirVencimientoEnDetalleDeCompra
££ 8
=
££9 : 
AplicacionSettings
££; M
.
££M N
Default
££N U
.
££U V2
$PermitirVencimientoEnDetalleDeCompra
££V z
;
££z {
ViewBag
§§ 
.
§§ !
idProveedorGenerico
§§ '
=
§§( )
ActorSettings
§§* 7
.
§§7 8
Default
§§8 ?
.
§§? @!
idProveedorGenerico
§§@ S
;
§§S T
ViewBag
•• 
.
•• 1
#idTipoPersonaSeleccionadaPorDefecto
•• 7
=
••8 9
ActorSettings
••: G
.
••G H
Default
••H O
.
••O P1
#IdTipoPersonaSeleccionadaPorDefecto
••P s
;
••s t
ViewBag
¶¶ 
.
¶¶ >
0idTipoDocumentoSeleccionadaConTipoPersonaNatural
¶¶ D
=
¶¶E F
ActorSettings
¶¶G T
.
¶¶T U
Default
¶¶U \
.
¶¶\ ]?
0IdTipoDocumentoSeleccionadaConTipoPersonaNatural¶¶] ç
;¶¶ç é
ViewBag
ßß 
.
ßß ?
1idTipoDocumentoSeleccionadaConTipoPersonaJuridica
ßß E
=
ßßF G
ActorSettings
ßßH U
.
ßßU V
Default
ßßV ]
.
ßß] ^@
1IdTipoDocumentoSeleccionadaConTipoPersonaJuridicaßß^ è
;ßßè ê
ViewBag
®® 
.
®® )
idTipoDocumentoIdentidadDni
®® /
=
®®0 1
ActorSettings
®®2 ?
.
®®? @
Default
®®@ G
.
®®G H)
IdTipoDocumentoIdentidadDni
®®H c
;
®®c d
ViewBag
©© 
.
©© )
idTipoDocumentoIdentidadRuc
©© /
=
©©0 1
ActorSettings
©©2 ?
.
©©? @
Default
©©@ G
.
©©G H)
IdTipoDocumentoIdentidadRuc
©©H c
;
©©c d
ViewBag
™™ 
.
™™ 
fechaActual
™™ 
=
™™  !
DateTimeUtil
™™! -
.
™™- .
FechaActual
™™. 9
(
™™9 :
)
™™: ;
;
™™; <
ViewBag
´´ 
.
´´ #
permitirRegistroFlete
´´ )
=
´´* + 
AplicacionSettings
´´, >
.
´´> ?
Default
´´? F
.
´´F G+
PermitirRegistroFleteEnCompra
´´G d
;
´´d e
ViewBag
¨¨ 
.
¨¨ ,
idDocumentoNotaAlamacenInterna
¨¨ 2
=
¨¨3 4
MaestroSettings
¨¨5 D
.
¨¨D E
Default
¨¨E L
.
¨¨L M;
-IdDetalleMaestroComprobanteNotaAlmacenInterna
¨¨M z
;
¨¨z {
ViewBag
≠≠ 
.
≠≠ 
direccionSede
≠≠ !
=
≠≠" #
(
≠≠$ %
ObtenerSede
≠≠% 0
(
≠≠0 1
)
≠≠1 2
.
≠≠2 3
DomicilioFiscal
≠≠3 B
!=
≠≠C E
null
≠≠F J
)
≠≠J K
?
≠≠L M
ObtenerSede
≠≠N Y
(
≠≠Y Z
)
≠≠Z [
.
≠≠[ \
DomicilioFiscal
≠≠\ k
.
≠≠k l
Detalle
≠≠l s
:
≠≠t u
$str
≠≠v y
;
≠≠y z
ViewBag
ÆÆ 
.
ÆÆ 
idUbigeoSede
ÆÆ  
=
ÆÆ! "
(
ÆÆ# $
ObtenerSede
ÆÆ$ /
(
ÆÆ/ 0
)
ÆÆ0 1
.
ÆÆ1 2
DomicilioFiscal
ÆÆ2 A
!=
ÆÆB D
null
ÆÆE I
)
ÆÆI J
?
ÆÆK L
ObtenerSede
ÆÆM X
(
ÆÆX Y
)
ÆÆY Z
.
ÆÆZ [
DomicilioFiscal
ÆÆ[ j
.
ÆÆj k
Ubigeo
ÆÆk q
.
ÆÆq r
Id
ÆÆr t
:
ÆÆu v
$num
ÆÆw x
;
ÆÆx y
ViewBag
ØØ 
.
ØØ +
idModalidadTrasladoPorDefecto
ØØ 1
=
ØØ2 3
MaestroSettings
ØØ4 C
.
ØØC D
Default
ØØD K
.
ØØK LC
4IdDetalleMaestroModalidadDeTrasladoTransportePublicoØØL Ä
;ØØÄ Å
ViewBag
∞∞ 
.
∞∞ (
idMotivoTrasladoPorDefecto
∞∞ .
=
∞∞/ 0
MaestroSettings
∞∞1 @
.
∞∞@ A
Default
∞∞A H
.
∞∞H I7
)IdDetalleMaestroMotivoDeTrasladoPorCompra
∞∞I r
;
∞∞r s
ViewBag
±± 
.
±± ,
idUbigeoSeleccionadoPorDefecto
±± 2
=
±±3 4
ActorSettings
±±5 B
.
±±B C
Default
±±C J
.
±±J K7
)idUbigeoSeleccionadoPorDefectoEnProveedor
±±K t
;
±±t u
ViewBag
≤≤ 
.
≤≤ $
idUbigeoNoEspecificado
≤≤ *
=
≤≤+ ,
ActorSettings
≤≤- :
.
≤≤: ;
Default
≤≤; B
.
≤≤B C$
idUbigeoNoEspecificado
≤≤C Y
;
≤≤Y Z
ViewBag
≥≥ 
.
≥≥ 4
&permitirMultipleIngresoDelMismoDetalle
≥≥ :
=
≥≥; < 
AplicacionSettings
≥≥= O
.
≥≥O P
Default
≥≥P W
.
≥≥W X=
.PermitirMultipleIngresoDelMismoDetalleEnCompra≥≥X Ü
;≥≥Ü á
ViewBag
¥¥ 
.
¥¥ 1
#idDetalleMaestroMedioDePagoEfectivo
¥¥ 7
=
¥¥8 9
MaestroSettings
¥¥: I
.
¥¥I J
Default
¥¥J Q
.
¥¥Q R1
#IdDetalleMaestroMedioDepagoEfectivo
¥¥R u
;
¥¥u v
ViewBag
µµ 
.
µµ 4
&idDetalleMaestroEntidadBancariaNinguna
µµ :
=
µµ; <
MaestroSettings
µµ= L
.
µµL M
Default
µµM T
.
µµT U4
&IdDetalleMaestroEntidadBancariaNinguna
µµU {
;
µµ{ |
ViewBag
∂∂ 
.
∂∂ :
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardar
∂∂ @
=
∂∂A B 
AplicacionSettings
∂∂C U
.
∂∂U V
Default
∂∂V ]
.
∂∂] ^;
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardar∂∂^ ä
;∂∂ä ã
ViewBag
∑∑ 
.
∑∑ )
idEstablecimientoPorDefecto
∑∑ /
=
∑∑0 1
ProfileData
∑∑2 =
(
∑∑= >
)
∑∑> ?
.
∑∑? @*
CentroDeAtencionSeleccionado
∑∑@ \
.
∑∑\ ]&
EstablecimientoComercial
∑∑] u
.
∑∑u v
Id
∑∑v x
;
∑∑x y
ViewBag
∏∏ 
.
∏∏ *
idCentroDeAtencionPorDefecto
∏∏ 0
=
∏∏1 2
ProfileData
∏∏3 >
(
∏∏> ?
)
∏∏? @
.
∏∏@ A*
CentroDeAtencionSeleccionado
∏∏A ]
.
∏∏] ^
Id
∏∏^ `
;
∏∏` a
ViewBag
ππ 
.
ππ &
IdPresentacionPorDefecto
ππ ,
=
ππ- .
ConceptoSettings
ππ/ ?
.
ππ? @
Default
ππ@ G
.
ππG H&
idPresentacionPorDefecto
ππH `
;
ππ` a
ViewBag
∫∫ 
.
∫∫ &
IdUnidadMedidaPorDefecto
∫∫ ,
=
∫∫- .
ConceptoSettings
∫∫/ ?
.
∫∫? @
Default
∫∫@ G
.
∫∫G H&
idUnidadMedidaPorDefecto
∫∫H `
;
∫∫` a
ViewBag
ªª 
.
ªª ;
-IdPresentacionAOcultarEnNombreConceptoNegocio
ªª A
=
ªªB C
ConceptoSettings
ªªD T
.
ªªT U
Default
ªªU \
.
ªª\ ]<
-IdPresentacionAOcultarEnNombreConceptoNegocioªª] ä
;ªªä ã
ViewBag
ºº 
.
ºº F
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocio
ºº L
=
ººM N
ConceptoSettings
ººO _
.
ºº_ `
Default
ºº` g
.
ººg hG
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocioººh †
;ºº† °
ViewBag
ΩΩ 
.
ΩΩ '
numeroDecimalesEnCantidad
ΩΩ -
=
ΩΩ. / 
AplicacionSettings
ΩΩ0 B
.
ΩΩB C
Default
ΩΩC J
.
ΩΩJ K'
NumeroDecimalesEnCantidad
ΩΩK d
;
ΩΩd e
ViewBag
ææ 
.
ææ %
numeroDecimalesEnPrecio
ææ +
=
ææ, - 
AplicacionSettings
ææ. @
.
ææ@ A
Default
ææA H
.
ææH I%
NumeroDecimalesEnPrecio
ææI `
;
ææ` a
return
øø 
View
øø 
(
øø 
)
øø 
;
øø 
}
¿¿ 	
[
¡¡ 	
	Authorize
¡¡	 
(
¡¡ 
Roles
¡¡ 
=
¡¡ 
$str
¡¡ &
)
¡¡& '
]
¡¡' (
public
¬¬ 
ActionResult
¬¬ *
ConsultarComprasCorporativas
¬¬ 8
(
¬¬8 9
)
¬¬9 :
{
√√ 	
ViewBag
ƒƒ 
.
ƒƒ '
idTipoActorPersonaNatural
ƒƒ -
=
ƒƒ. /
ActorSettings
ƒƒ0 =
.
ƒƒ= >
Default
ƒƒ> E
.
ƒƒE F'
IdTipoActorPersonaNatural
ƒƒF _
;
ƒƒ_ `
ViewBag
≈≈ 
.
≈≈ 
fechaInicio
≈≈ 
=
≈≈  !
DateTimeUtil
≈≈! -
.
≈≈- .
FechaActual
≈≈. 9
(
≈≈9 :
)
≈≈: ;
.
≈≈; <
AddDays
≈≈< C
(
≈≈C D
-
≈≈D E
$num
≈≈E F
)
≈≈F G
.
≈≈G H
ToString
≈≈H P
(
≈≈P Q
$str
≈≈Q ]
)
≈≈] ^
;
≈≈^ _
ViewBag
∆∆ 
.
∆∆ 
fechaFin
∆∆ 
=
∆∆ 
DateTimeUtil
∆∆ *
.
∆∆* +
FechaActual
∆∆+ 6
(
∆∆6 7
)
∆∆7 8
.
∆∆8 9
ToString
∆∆9 A
(
∆∆A B
$str
∆∆B N
)
∆∆N O
;
∆∆O P
ViewBag
«« 
.
«« 
tasaIGV
«« 
=
«« !
TransaccionSettings
«« 1
.
««1 2
Default
««2 9
.
««9 :
TasaIGV
««: A
;
««A B
ViewBag
»» 
.
»» 
aplicaLeyAmazonia
»» %
=
»»& '!
TransaccionSettings
»»( ;
.
»»; <
Default
»»< C
.
»»C D
AplicaLeyAmazonia
»»D U
;
»»U V
ViewBag
…… 
.
…… *
comprasDestinadasAPorDefecto
…… 0
=
……1 2!
TransaccionSettings
……3 F
.
……F G
Default
……G N
.
……N O*
ComprasDestinadasAPorDefecto
……O k
;
……k l
ViewBag
   
.
   (
idTipoActorPersonaJuridica
   .
=
  / 0
ActorSettings
  1 >
.
  > ?
Default
  ? F
.
  F G(
IdTipoActorPersonaJuridica
  G a
;
  a b
ViewBag
ÀÀ 
.
ÀÀ $
realizaCompraAlCredito
ÀÀ *
=
ÀÀ+ ,!
TransaccionSettings
ÀÀ- @
.
ÀÀ@ A
Default
ÀÀA H
.
ÀÀH I$
RealizaCompraAlCredito
ÀÀI _
;
ÀÀ_ `
ViewBag
ÃÃ 
.
ÃÃ +
permitirLoteEnDetalleDeCompra
ÃÃ 1
=
ÃÃ2 3 
AplicacionSettings
ÃÃ4 F
.
ÃÃF G
Default
ÃÃG N
.
ÃÃN O+
PermitirLoteEnDetalleDeCompra
ÃÃO l
;
ÃÃl m
ViewBag
ÕÕ 
.
ÕÕ /
!permitirRegistroEnDetalleDeCompra
ÕÕ 5
=
ÕÕ6 7 
AplicacionSettings
ÕÕ8 J
.
ÕÕJ K
Default
ÕÕK R
.
ÕÕR S/
!PermitirRegistroEnDetalleDeCompra
ÕÕS t
;
ÕÕt u
ViewBag
ŒŒ 
.
ŒŒ 2
$permitirVencimientoEnDetalleDeCompra
ŒŒ 8
=
ŒŒ9 : 
AplicacionSettings
ŒŒ; M
.
ŒŒM N
Default
ŒŒN U
.
ŒŒU V2
$PermitirVencimientoEnDetalleDeCompra
ŒŒV z
;
ŒŒz {
ViewBag
œœ 
.
œœ !
idProveedorGenerico
œœ '
=
œœ( )
ActorSettings
œœ* 7
.
œœ7 8
Default
œœ8 ?
.
œœ? @!
idProveedorGenerico
œœ@ S
;
œœS T
ViewBag
–– 
.
–– 1
#idTipoPersonaSeleccionadaPorDefecto
–– 7
=
––8 9
ActorSettings
––: G
.
––G H
Default
––H O
.
––O P1
#IdTipoPersonaSeleccionadaPorDefecto
––P s
;
––s t
ViewBag
—— 
.
—— >
0idTipoDocumentoSeleccionadaConTipoPersonaNatural
—— D
=
——E F
ActorSettings
——G T
.
——T U
Default
——U \
.
——\ ]?
0IdTipoDocumentoSeleccionadaConTipoPersonaNatural——] ç
;——ç é
ViewBag
““ 
.
““ ?
1idTipoDocumentoSeleccionadaConTipoPersonaJuridica
““ E
=
““F G
ActorSettings
““H U
.
““U V
Default
““V ]
.
““] ^@
1IdTipoDocumentoSeleccionadaConTipoPersonaJuridica““^ è
;““è ê
ViewBag
”” 
.
”” )
idTipoDocumentoIdentidadDni
”” /
=
””0 1
ActorSettings
””2 ?
.
””? @
Default
””@ G
.
””G H)
IdTipoDocumentoIdentidadDni
””H c
;
””c d
ViewBag
‘‘ 
.
‘‘ )
idTipoDocumentoIdentidadRuc
‘‘ /
=
‘‘0 1
ActorSettings
‘‘2 ?
.
‘‘? @
Default
‘‘@ G
.
‘‘G H)
IdTipoDocumentoIdentidadRuc
‘‘H c
;
‘‘c d
ViewBag
’’ 
.
’’ 
fechaActual
’’ 
=
’’  !
DateTimeUtil
’’! -
.
’’- .
FechaActual
’’. 9
(
’’9 :
)
’’: ;
.
’’; <
Date
’’< @
;
’’@ A
ViewBag
÷÷ 
.
÷÷ #
permitirRegistroFlete
÷÷ )
=
÷÷* + 
AplicacionSettings
÷÷, >
.
÷÷> ?
Default
÷÷? F
.
÷÷F G+
PermitirRegistroFleteEnCompra
÷÷G d
;
÷÷d e
ViewBag
◊◊ 
.
◊◊ ,
idDocumentoNotaAlamacenInterna
◊◊ 2
=
◊◊3 4
MaestroSettings
◊◊5 D
.
◊◊D E
Default
◊◊E L
.
◊◊L M;
-IdDetalleMaestroComprobanteNotaAlmacenInterna
◊◊M z
;
◊◊z {
ViewBag
ÿÿ 
.
ÿÿ 
direccionSede
ÿÿ !
=
ÿÿ" #
(
ÿÿ$ %
ObtenerSede
ÿÿ% 0
(
ÿÿ0 1
)
ÿÿ1 2
.
ÿÿ2 3
DomicilioFiscal
ÿÿ3 B
!=
ÿÿC E
null
ÿÿF J
)
ÿÿJ K
?
ÿÿL M
ObtenerSede
ÿÿN Y
(
ÿÿY Z
)
ÿÿZ [
.
ÿÿ[ \
DomicilioFiscal
ÿÿ\ k
.
ÿÿk l
Detalle
ÿÿl s
:
ÿÿt u
$str
ÿÿv y
;
ÿÿy z
ViewBag
ŸŸ 
.
ŸŸ 
idUbigeoSede
ŸŸ  
=
ŸŸ! "
(
ŸŸ# $
ObtenerSede
ŸŸ$ /
(
ŸŸ/ 0
)
ŸŸ0 1
.
ŸŸ1 2
DomicilioFiscal
ŸŸ2 A
!=
ŸŸB D
null
ŸŸE I
)
ŸŸI J
?
ŸŸK L
ObtenerSede
ŸŸM X
(
ŸŸX Y
)
ŸŸY Z
.
ŸŸZ [
DomicilioFiscal
ŸŸ[ j
.
ŸŸj k
Ubigeo
ŸŸk q
.
ŸŸq r
Id
ŸŸr t
:
ŸŸu v
$num
ŸŸw x
;
ŸŸx y
ViewBag
⁄⁄ 
.
⁄⁄ +
idModalidadTrasladoPorDefecto
⁄⁄ 1
=
⁄⁄2 3
MaestroSettings
⁄⁄4 C
.
⁄⁄C D
Default
⁄⁄D K
.
⁄⁄K LC
4IdDetalleMaestroModalidadDeTrasladoTransportePublico⁄⁄L Ä
;⁄⁄Ä Å
ViewBag
€€ 
.
€€ (
idMotivoTrasladoPorDefecto
€€ .
=
€€/ 0
MaestroSettings
€€1 @
.
€€@ A
Default
€€A H
.
€€H I7
)IdDetalleMaestroMotivoDeTrasladoPorCompra
€€I r
;
€€r s
ViewBag
‹‹ 
.
‹‹ ,
idUbigeoSeleccionadoPorDefecto
‹‹ 2
=
‹‹3 4
ActorSettings
‹‹5 B
.
‹‹B C
Default
‹‹C J
.
‹‹J K7
)idUbigeoSeleccionadoPorDefectoEnProveedor
‹‹K t
;
‹‹t u
ViewBag
›› 
.
›› $
idUbigeoNoEspecificado
›› *
=
››+ ,
ActorSettings
››- :
.
››: ;
Default
››; B
.
››B C$
idUbigeoNoEspecificado
››C Y
;
››Y Z
ViewBag
ﬁﬁ 
.
ﬁﬁ 4
&permitirMultipleIngresoDelMismoDetalle
ﬁﬁ :
=
ﬁﬁ; < 
AplicacionSettings
ﬁﬁ= O
.
ﬁﬁO P
Default
ﬁﬁP W
.
ﬁﬁW X=
.PermitirMultipleIngresoDelMismoDetalleEnCompraﬁﬁX Ü
;ﬁﬁÜ á
ViewBag
ﬂﬂ 
.
ﬂﬂ 1
#idDetalleMaestroMedioDePagoEfectivo
ﬂﬂ 7
=
ﬂﬂ8 9
MaestroSettings
ﬂﬂ: I
.
ﬂﬂI J
Default
ﬂﬂJ Q
.
ﬂﬂQ R1
#IdDetalleMaestroMedioDepagoEfectivo
ﬂﬂR u
;
ﬂﬂu v
ViewBag
‡‡ 
.
‡‡ 4
&idDetalleMaestroEntidadBancariaNinguna
‡‡ :
=
‡‡; <
MaestroSettings
‡‡= L
.
‡‡L M
Default
‡‡M T
.
‡‡T U4
&IdDetalleMaestroEntidadBancariaNinguna
‡‡U {
;
‡‡{ |
ViewBag
·· 
.
·· :
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardar
·· @
=
··A B 
AplicacionSettings
··C U
.
··U V
Default
··V ]
.
··] ^;
,ValorPrecioVentaPorDefectoQueNoSeDebeGuardar··^ ä
;··ä ã
ViewBag
‚‚ 
.
‚‚ )
idEstablecimientoPorDefecto
‚‚ /
=
‚‚0 1
ProfileData
‚‚2 =
(
‚‚= >
)
‚‚> ?
.
‚‚? @*
CentroDeAtencionSeleccionado
‚‚@ \
.
‚‚\ ]&
EstablecimientoComercial
‚‚] u
.
‚‚u v
Id
‚‚v x
;
‚‚x y
ViewBag
„„ 
.
„„ *
idCentroDeAtencionPorDefecto
„„ 0
=
„„1 2
ProfileData
„„3 >
(
„„> ?
)
„„? @
.
„„@ A*
CentroDeAtencionSeleccionado
„„A ]
.
„„] ^
Id
„„^ `
;
„„` a
ViewBag
‰‰ 
.
‰‰ &
IdPresentacionPorDefecto
‰‰ ,
=
‰‰- .
ConceptoSettings
‰‰/ ?
.
‰‰? @
Default
‰‰@ G
.
‰‰G H&
idPresentacionPorDefecto
‰‰H `
;
‰‰` a
ViewBag
ÂÂ 
.
ÂÂ &
IdUnidadMedidaPorDefecto
ÂÂ ,
=
ÂÂ- .
ConceptoSettings
ÂÂ/ ?
.
ÂÂ? @
Default
ÂÂ@ G
.
ÂÂG H&
idUnidadMedidaPorDefecto
ÂÂH `
;
ÂÂ` a
ViewBag
ÊÊ 
.
ÊÊ ;
-IdPresentacionAOcultarEnNombreConceptoNegocio
ÊÊ A
=
ÊÊB C
ConceptoSettings
ÊÊD T
.
ÊÊT U
Default
ÊÊU \
.
ÊÊ\ ]<
-IdPresentacionAOcultarEnNombreConceptoNegocioÊÊ] ä
;ÊÊä ã
ViewBag
ÁÁ 
.
ÁÁ F
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocio
ÁÁ L
=
ÁÁM N
ConceptoSettings
ÁÁO _
.
ÁÁ_ `
Default
ÁÁ` g
.
ÁÁg hG
8IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocioÁÁh †
;ÁÁ† °
ViewBag
ËË 
.
ËË '
numeroDecimalesEnCantidad
ËË -
=
ËË. / 
AplicacionSettings
ËË0 B
.
ËËB C
Default
ËËC J
.
ËËJ K'
NumeroDecimalesEnCantidad
ËËK d
;
ËËd e
ViewBag
ÈÈ 
.
ÈÈ %
numeroDecimalesEnPrecio
ÈÈ +
=
ÈÈ, - 
AplicacionSettings
ÈÈ. @
.
ÈÈ@ A
Default
ÈÈA H
.
ÈÈH I%
NumeroDecimalesEnPrecio
ÈÈI `
;
ÈÈ` a
return
ÍÍ 
View
ÍÍ 
(
ÍÍ 
)
ÍÍ 
;
ÍÍ 
}
ÎÎ 	
public
ÓÓ 

JsonResult
ÓÓ 
ObtenerCompras
ÓÓ (
(
ÓÓ( )
string
ÓÓ) /
desde
ÓÓ0 5
,
ÓÓ5 6
string
ÓÓ7 =
hasta
ÓÓ> C
)
ÓÓC D
{
ÔÔ 	
DateTime
ÒÒ 

fechaDesde
ÒÒ 
=
ÒÒ  !
DateTimeUtil
ÒÒ" .
.
ÒÒ. /9
+ObtenerFechaDesdeConPrecisionDeMilisegundos
ÒÒ/ Z
(
ÒÒZ [
desde
ÒÒ[ `
)
ÒÒ` a
;
ÒÒa b
DateTime
ÚÚ 

fechaHasta
ÚÚ 
=
ÚÚ  !
DateTimeUtil
ÚÚ" .
.
ÚÚ. /9
+ObtenerFechaHastaConPrecisionDeMilisegundos
ÚÚ/ Z
(
ÚÚZ [
hasta
ÚÚ[ `
+
ÚÚa b
$str
ÚÚc n
)
ÚÚn o
;
ÚÚo p
try
ÙÙ 
{
ıı 
List
ˆˆ 
<
ˆˆ 
OperacionDeCompra
ˆˆ &
>
ˆˆ& '!
operacionesDeCompra
ˆˆ( ;
=
ˆˆ< =
_logicaOperacion
ˆˆ> N
.
ˆˆN O(
ObtenerOperacionesDeCompra
ˆˆO i
(
ˆˆi j
ProfileData
ˆˆj u
(
ˆˆu v
)
ˆˆv w
.
ˆˆw x
Empleadoˆˆx Ä
.ˆˆÄ Å
IdˆˆÅ É
,ˆˆÉ Ñ

fechaDesdeˆˆÖ è
,ˆˆè ê

fechaHastaˆˆë õ
)ˆˆõ ú
;ˆˆú ù
List
˜˜ 
<
˜˜ $
BandejaCompraViewModel
˜˜ +
>
˜˜+ ,
	respuesta
˜˜- 6
=
˜˜7 8$
BandejaCompraViewModel
˜˜9 O
.
˜˜O P
Convert_
˜˜P X
(
˜˜X Y!
operacionesDeCompra
˜˜Y l
)
˜˜l m
;
˜˜m n
return
¯¯ 
Json
¯¯ 
(
¯¯ 
	respuesta
¯¯ %
)
¯¯% &
;
¯¯& '
}
˘˘ 
catch
˙˙ 
(
˙˙ 
	Exception
˙˙ 
e
˙˙ 
)
˙˙ 
{
˚˚ 
return
¸¸ 
new
¸¸ "
JsonHttpStatusResult
¸¸ /
(
¸¸/ 0
Util
¸¸0 4
.
¸¸4 5
	ErrorJson
¸¸5 >
(
¸¸> ?
e
¸¸? @
)
¸¸@ A
,
¸¸A B
HttpStatusCode
¸¸C Q
.
¸¸Q R!
InternalServerError
¸¸R e
)
¸¸e f
;
¸¸f g
}
˝˝ 
}
˛˛ 	
public
ÄÄ 

JsonResult
ÄÄ /
!ObtenerCompraYDetallesOrdenCompra
ÄÄ ;
(
ÄÄ; <
long
ÄÄ< @
idCompra
ÄÄA I
)
ÄÄI J
{
ÅÅ 	
try
ÇÇ 
{
ÉÉ 
Compra
ÑÑ 
	resultado
ÑÑ  
=
ÑÑ! "
_logicaOperacion
ÑÑ# 3
.
ÑÑ3 4
ObtenerCompra
ÑÑ4 A
(
ÑÑA B
idCompra
ÑÑB J
)
ÑÑJ K
;
ÑÑK L
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
new
ÖÖ (
CompraConDetallesViewModel
ÖÖ  :
(
ÖÖ: ;
	resultado
ÖÖ; D
.
ÖÖD E
OrdenDeCompra
ÖÖE R
(
ÖÖR S
)
ÖÖS T
)
ÖÖT U
)
ÖÖU V
;
ÖÖV W
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
e
áá 
)
áá 
{
àà 
return
ââ 
Json
ââ 
(
ââ 
Util
ââ  
.
ââ  !
	ErrorJson
ââ! *
(
ââ* +
e
ââ+ ,
)
ââ, -
)
ââ- .
;
ââ. /
}
ää 
}
ãã 	
public
çç 

JsonResult
çç .
 ObtenerOrdenCompraYDetallesOrden
çç :
(
çç: ;
long
çç; ?
idOrdenCompra
çç@ M
)
ççM N
{
éé 	
try
èè 
{
êê 
OrdenDeCompra
ëë 
	resultado
ëë '
=
ëë( )
_logicaOperacion
ëë* :
.
ëë: ;"
ObtenerOrdenDeCompra
ëë; O
(
ëëO P
idOrdenCompra
ëëP ]
)
ëë] ^
;
ëë^ _
return
íí 
Json
íí 
(
íí 
new
íí (
CompraConDetallesViewModel
íí  :
(
íí: ;
	resultado
íí; D
)
ííD E
)
ííE F
;
ííF G
}
ìì 
catch
îî 
(
îî 
	Exception
îî 
e
îî 
)
îî 
{
ïï 
return
ññ 
Json
ññ 
(
ññ 
Util
ññ  
.
ññ  !
	ErrorJson
ññ! *
(
ññ* +
e
ññ+ ,
)
ññ, -
)
ññ- .
;
ññ. /
}
óó 
}
òò 	
public
öö 
async
öö 
Task
öö 
<
öö 

JsonResult
öö $
>
öö$ %1
#ObtenerTiposDeComprobanteParaCompra
öö& I
(
ööI J
)
ööJ K
{
õõ 	
try
úú 
{
ùù 
var
ûû 

resultados
ûû 
=
ûû  
await
ûû! &
_logicaOperacion
ûû' 7
.
ûû7 81
#ObtenerTiposDeComprobanteParaCompra
ûû8 [
(
ûû[ \
ProfileData
ûû\ g
(
ûûg h
)
ûûh i
.
ûûi j
Empleado
ûûj r
.
ûûr s
Id
ûûs u
,
ûûu v
ProfileDataûûw Ç
(ûûÇ É
)ûûÉ Ñ
.ûûÑ Ö.
IdCentroDeAtencionSeleccionadoûûÖ £
)ûû£ §
;ûû§ •
List
üü 
<
üü '
SelectorTipoDeComprobante
üü .
>
üü. /
comprobantes
üü0 <
=
üü= >'
SelectorTipoDeComprobante
üü? X
.
üüX Y
Convert
üüY `
(
üü` a

resultados
üüa k
)
üük l
;
üül m
return
°° 
Json
°° 
(
°° 
comprobantes
°° (
)
°°( )
;
°°) *
}
¢¢ 
catch
££ 
(
££ 
	Exception
££ 
e
££ 
)
££ 
{
§§ 
return
•• 
Json
•• 
(
•• 
Util
••  
.
••  !
	ErrorJson
••! *
(
••* +
e
••+ ,
)
••, -
)
••- .
;
••. /
}
¶¶ 
}
ßß 	
public
©© 

JsonResult
©© '
NumeroComprobanteEsValido
©© 3
(
©©3 4
int
©©4 7
idProveedor
©©8 C
,
©©C D
int
©©E H
idTipoComprobante
©©I Z
,
©©Z [
string
©©\ b
numeroDeSerie
©©c p
,
©©p q
int
©©r u 
numeroComprobante©©v á
)©©á à
{
™™ 	
try
´´ 
{
¨¨ 
bool
≠≠ 
valido
≠≠ 
=
≠≠ 
_logicaOperacion
≠≠ .
.
≠≠. /'
ExisteNumeroDeComprobante
≠≠/ H
(
≠≠H I
idProveedor
≠≠I T
,
≠≠T U
idTipoComprobante
≠≠V g
,
≠≠g h
numeroDeSerie
≠≠i v
,
≠≠v w 
numeroComprobante≠≠x â
,≠≠â ä
MaestroSettings≠≠ã ö
.≠≠ö õ
Default≠≠õ ¢
.≠≠¢ £0
 IdDetalleMaestroEstadoConfirmado≠≠£ √
)≠≠√ ƒ
;≠≠ƒ ≈
return
ÆÆ 
Json
ÆÆ 
(
ÆÆ 
new
ÆÆ 
{
ÆÆ  !
valido
ÆÆ" (
}
ÆÆ) *
)
ÆÆ* +
;
ÆÆ+ ,
}
ØØ 
catch
∞∞ 
(
∞∞ 
	Exception
∞∞ 
e
∞∞ 
)
∞∞ 
{
±± 
return
≤≤ 
Json
≤≤ 
(
≤≤ 
Util
≤≤  
.
≤≤  !
	ErrorJson
≤≤! *
(
≤≤* +
e
≤≤+ ,
)
≤≤, -
)
≤≤- .
;
≤≤. /
}
≥≥ 
}
¥¥ 	
public
∂∂ 

JsonResult
∂∂ 
ConfirmarCompra
∂∂ )
(
∂∂) *%
RegistroCompraViewModel
∂∂* A
compra
∂∂B H
)
∂∂H I
{
∑∑ 	
try
∏∏ 
{
ππ 
OperationResult
∫∫ 
result
∫∫  &
=
∫∫' (
null
∫∫) -
;
∫∫- .
List
ªª 
<
ªª  
DetalleDeOperacion
ªª '
>
ªª' (
detalles
ªª) 1
=
ªª2 3,
RegistroDetalleCompraViewModel
ªª4 R
.
ªªR S
Convert
ªªS Z
(
ªªZ [
compra
ªª[ a
.
ªªa b
Detalles
ªªb j
.
ªªj k
ToList
ªªk q
(
ªªq r
)
ªªr s
)
ªªs t
;
ªªt u
if
ΩΩ 
(
ΩΩ 
compra
ΩΩ 
.
ΩΩ 
EsCompraACredito
ΩΩ +
)
ΩΩ+ ,
{
ææ 
if
øø 
(
øø 
compra
øø 
.
øø 
EsCreditoRapido
øø .
)
øø. /
{
¿¿ 
result
¡¡ 
=
¡¡  
_logicaOperacion
¡¡! 1
.
¡¡1 2,
ConfirmarCompraAlCreditoRapido
¡¡2 P
(
¡¡P Q
ProfileData
¡¡Q \
(
¡¡\ ]
)
¡¡] ^
.
¡¡^ _
Empleado
¡¡_ g
.
¡¡g h
Id
¡¡h j
,
¡¡j k
ProfileData
¡¡l w
(
¡¡w x
)
¡¡x y
.
¡¡y z-
IdCentroDeAtencionSeleccionado¡¡z ò
,¡¡ò ô
ProfileData¡¡ö •
(¡¡• ¶
)¡¡¶ ß
.¡¡ß ®
Empleado¡¡® ∞
.¡¡∞ ±
Id¡¡± ≥
,¡¡≥ ¥
ProfileData¡¡µ ¿
(¡¡¿ ¡
)¡¡¡ ¬
.¡¡¬ √.
IdCentroDeAtencionSeleccionado¡¡√ ·
,¡¡· ‚
compra¡¡„ È
.¡¡È Í
	Proveedor¡¡Í Û
.¡¡Û Ù
Id¡¡Ù ˆ
,¡¡ˆ ˜
compra¡¡¯ ˛
.¡¡˛ ˇ

TipoCompra¡¡ˇ â
,¡¡â ä
compra¡¡ã ë
.¡¡ë í!
TipoDeComprobante¡¡í £
.¡¡£ §
EsPropio¡¡§ ¨
==¡¡≠ Ø
true¡¡∞ ¥
?¡¡µ ∂
$num¡¡∑ ∏
:¡¡π ∫
compra¡¡ª ¡
.¡¡¡ ¬!
TipoDeComprobante¡¡¬ ”
.¡¡” ‘
TipoComprobante¡¡‘ „
.¡¡„ ‰
Id¡¡‰ Ê
,¡¡Ê Á
compra¡¡Ë Ó
.¡¡Ó Ô!
TipoDeComprobante¡¡Ô Ä
.¡¡Ä Å
EsPropio¡¡Å â
==¡¡ä å
true¡¡ç ë
&&¡¡í î
compra¡¡ï õ
.¡¡õ ú!
TipoDeComprobante¡¡ú ≠
.¡¡≠ Æ!
SerieSeleccionada¡¡Æ ø
==¡¡¿ ¬
$num¡¡√ ƒ
?¡¡≈ ∆
compra¡¡« Õ
.¡¡Õ Œ!
TipoDeComprobante¡¡Œ ﬂ
.¡¡ﬂ ‡
Series¡¡‡ Ê
.¡¡Ê Á
First¡¡Á Ï
(¡¡Ï Ì
)¡¡Ì Ó
.¡¡Ó Ô
Id¡¡Ô Ò
:¡¡Ú Û
compra¡¡Ù ˙
.¡¡˙ ˚!
TipoDeComprobante¡¡˚ å
.¡¡å ç!
SerieSeleccionada¡¡ç û
,¡¡û ü
compra¡¡† ¶
.¡¡¶ ß!
TipoDeComprobante¡¡ß ∏
.¡¡∏ π
EsPropio¡¡π ¡
,¡¡¡ ¬
compra¡¡√ …
.¡¡…  !
TipoDeComprobante¡¡  €
.¡¡€ ‹
SerieIngresada¡¡‹ Í
,¡¡Í Î
compra¡¡Ï Ú
.¡¡Ú Û!
TipoDeComprobante¡¡Û Ñ
.¡¡Ñ Ö
NumeroIngresado¡¡Ö î
,¡¡î ï
compra¡¡ñ ú
.¡¡ú ù
Observacion¡¡ù ®
,¡¡® ©
compra¡¡™ ∞
.¡¡∞ ±
FechaRegistro¡¡± æ
,¡¡æ ø
detalles¡¡¿ »
,¡¡» …
compra¡¡  –
.¡¡– —
Flete¡¡— ÷
,¡¡÷ ◊
ProfileData¡¡ÿ „
(¡¡„ ‰
)¡¡‰ Â
)¡¡Â Ê
;¡¡Ê Á
}
¬¬ 
else
√√ 
{
ƒƒ 
result
≈≈ 
=
≈≈  
_logicaOperacion
≈≈! 1
.
≈≈1 2&
ConfirmarCompraAlCredito
≈≈2 J
(
≈≈J K
ProfileData
≈≈K V
(
≈≈V W
)
≈≈W X
.
≈≈X Y
Empleado
≈≈Y a
.
≈≈a b
Id
≈≈b d
,
≈≈d e
ProfileData
≈≈f q
(
≈≈q r
)
≈≈r s
.
≈≈s t-
IdCentroDeAtencionSeleccionado≈≈t í
,≈≈í ì
ProfileData≈≈î ü
(≈≈ü †
)≈≈† °
.≈≈° ¢
Empleado≈≈¢ ™
.≈≈™ ´
Id≈≈´ ≠
,≈≈≠ Æ
ProfileData≈≈Ø ∫
(≈≈∫ ª
)≈≈ª º
.≈≈º Ω.
IdCentroDeAtencionSeleccionado≈≈Ω €
,≈≈€ ‹
ProfileData≈≈› Ë
(≈≈Ë È
)≈≈È Í
.≈≈Í Î
Empleado≈≈Î Û
.≈≈Û Ù
Id≈≈Ù ˆ
,≈≈ˆ ˜
ProfileData≈≈¯ É
(≈≈É Ñ
)≈≈Ñ Ö
.≈≈Ö Ü.
IdCentroDeAtencionSeleccionado≈≈Ü §
,≈≈§ •
compra≈≈¶ ¨
.≈≈¨ ≠
	Proveedor≈≈≠ ∂
.≈≈∂ ∑
Id≈≈∑ π
,≈≈π ∫
compra≈≈ª ¡
.≈≈¡ ¬

TipoCompra≈≈¬ Ã
,≈≈Ã Õ
compra≈≈Œ ‘
.≈≈‘ ’!
TipoDeComprobante≈≈’ Ê
.≈≈Ê Á
EsPropio≈≈Á Ô
==≈≈ Ú
true≈≈Û ˜
?≈≈¯ ˘
$num≈≈˙ ˚
:≈≈¸ ˝
compra≈≈˛ Ñ
.≈≈Ñ Ö!
TipoDeComprobante≈≈Ö ñ
.≈≈ñ ó
TipoComprobante≈≈ó ¶
.≈≈¶ ß
Id≈≈ß ©
,≈≈© ™
compra≈≈´ ±
.≈≈± ≤!
TipoDeComprobante≈≈≤ √
.≈≈√ ƒ
EsPropio≈≈ƒ Ã
==≈≈Õ œ
true≈≈– ‘
&&≈≈’ ◊
compra≈≈ÿ ﬁ
.≈≈ﬁ ﬂ!
TipoDeComprobante≈≈ﬂ 
.≈≈ Ò!
SerieSeleccionada≈≈Ò Ç
==≈≈É Ö
$num≈≈Ü á
?≈≈à â
compra≈≈ä ê
.≈≈ê ë!
TipoDeComprobante≈≈ë ¢
.≈≈¢ £
Series≈≈£ ©
.≈≈© ™
First≈≈™ Ø
(≈≈Ø ∞
)≈≈∞ ±
.≈≈± ≤
Id≈≈≤ ¥
:≈≈µ ∂
compra≈≈∑ Ω
.≈≈Ω æ!
TipoDeComprobante≈≈æ œ
.≈≈œ –!
SerieSeleccionada≈≈– ·
,≈≈· ‚
compra≈≈„ È
.≈≈È Í!
TipoDeComprobante≈≈Í ˚
.≈≈˚ ¸
EsPropio≈≈¸ Ñ
,≈≈Ñ Ö
compra≈≈Ü å
.≈≈å ç!
TipoDeComprobante≈≈ç û
.≈≈û ü
SerieIngresada≈≈ü ≠
,≈≈≠ Æ
compra≈≈Ø µ
.≈≈µ ∂!
TipoDeComprobante≈≈∂ «
.≈≈« »
NumeroIngresado≈≈» ◊
,≈≈◊ ÿ
compra≈≈Ÿ ﬂ
.≈≈ﬂ ‡
Observacion≈≈‡ Î
,≈≈Î Ï
compra≈≈Ì Û
.≈≈Û Ù
FechaRegistro≈≈Ù Å
,≈≈Å Ç
detalles≈≈É ã
,≈≈ã å
compra≈≈ç ì
.≈≈ì î
Flete≈≈î ô
,≈≈ô ö
ConstruirCuotas≈≈õ ™
(≈≈™ ´
compra≈≈´ ±
.≈≈± ≤
Cuotas≈≈≤ ∏
.≈≈∏ π
ToList≈≈π ø
(≈≈ø ¿
)≈≈¿ ¡
)≈≈¡ ¬
,≈≈¬ √
ProfileData≈≈ƒ œ
(≈≈œ –
)≈≈– —
)≈≈— “
;≈≈“ ”
}
∆∆ 
}
«« 
else
»» 
{
…… 
result
   
=
   
_logicaOperacion
   -
.
  - .
ConfirmarCompra
  . =
(
  = >
ProfileData
  > I
(
  I J
)
  J K
.
  K L
Empleado
  L T
.
  T U
Id
  U W
,
  W X
ProfileData
  Y d
(
  d e
)
  e f
.
  f g-
IdCentroDeAtencionSeleccionado  g Ö
,  Ö Ü
ProfileData  á í
(  í ì
)  ì î
.  î ï
Empleado  ï ù
.  ù û
Id  û †
,  † °
ProfileData  ¢ ≠
(  ≠ Æ
)  Æ Ø
.  Ø ∞.
IdCentroDeAtencionSeleccionado  ∞ Œ
,  Œ œ
ProfileData  – €
(  € ‹
)  ‹ ›
.  › ﬁ
Empleado  ﬁ Ê
.  Ê Á
Id  Á È
,  È Í
ProfileData  Î ˆ
(  ˆ ˜
)  ˜ ¯
.  ¯ ˘.
IdCentroDeAtencionSeleccionado  ˘ ó
,  ó ò
compra  ô ü
.  ü †
	Proveedor  † ©
.  © ™
Id  ™ ¨
,  ¨ ≠
compra  Æ ¥
.  ¥ µ

TipoCompra  µ ø
,  ø ¿
compra  ¡ «
.  « »!
TipoDeComprobante  » Ÿ
.  Ÿ ⁄
EsPropio  ⁄ ‚
==  „ Â
true  Ê Í
?  Î Ï
$num  Ì Ó
:  Ô 
compra  Ò ˜
.  ˜ ¯!
TipoDeComprobante  ¯ â
.  â ä
TipoComprobante  ä ô
.  ô ö
Id  ö ú
,  ú ù
compra  û §
.  § •!
TipoDeComprobante  • ∂
.  ∂ ∑
EsPropio  ∑ ø
==  ¿ ¬
true  √ «
&&  »  
compra  À —
.  — “!
TipoDeComprobante  “ „
.  „ ‰!
SerieSeleccionada  ‰ ı
==  ˆ ¯
$num  ˘ ˙
?  ˚ ¸
compra  ˝ É
.  É Ñ!
TipoDeComprobante  Ñ ï
.  ï ñ
Series  ñ ú
.  ú ù
First  ù ¢
(  ¢ £
)  £ §
.  § •
Id  • ß
:  ® ©
compra  ™ ∞
.  ∞ ±!
TipoDeComprobante  ± ¬
.  ¬ √!
SerieSeleccionada  √ ‘
,  ‘ ’
compra  ÷ ‹
.  ‹ ›!
TipoDeComprobante  › Ó
.  Ó Ô
EsPropio  Ô ˜
,  ˜ ¯
compra  ˘ ˇ
.  ˇ Ä!
TipoDeComprobante  Ä ë
.  ë í
SerieIngresada  í †
,  † °
compra  ¢ ®
.  ® ©!
TipoDeComprobante  © ∫
.  ∫ ª
NumeroIngresado  ª  
,    À
compra  Ã “
.  “ ”
Observacion  ” ﬁ
,  ﬁ ﬂ
compra  ‡ Ê
.  Ê Á
FechaRegistro  Á Ù
,  Ù ı
detalles  ˆ ˛
,  ˛ ˇ
compra  Ä Ü
.  Ü á
Flete  á å
,  å ç
ProfileData  é ô
(  ô ö
)  ö õ
)  õ ú
;  ú ù
}
ÀÀ 
Util
ÕÕ 
.
ÕÕ (
ManageIfResultIsNotSuccess
ÕÕ /
(
ÕÕ/ 0
result
ÕÕ0 6
,
ÕÕ6 7
$str
ÕÕ8 V
)
ÕÕV W
;
ÕÕW X
return
ŒŒ 
Json
ŒŒ 
(
ŒŒ 
new
ŒŒ 
{
ŒŒ  !
result
ŒŒ" (
.
ŒŒ( )
code_result
ŒŒ) 4
,
ŒŒ4 5
result
ŒŒ6 <
.
ŒŒ< =
data
ŒŒ= A
,
ŒŒA B 
result_description
ŒŒC U
=
ŒŒV W
result
ŒŒX ^
.
ŒŒ^ _
title
ŒŒ_ d
}
ŒŒe f
)
ŒŒf g
;
ŒŒg h
}
œœ 
catch
–– 
(
–– 
	Exception
–– 
e
–– 
)
–– 
{
—— 
return
““ 
new
““ "
JsonHttpStatusResult
““ /
(
““/ 0
Util
““0 4
.
““4 5
	ErrorJson
““5 >
(
““> ?
e
““? @
)
““@ A
,
““A B
HttpStatusCode
““C Q
.
““Q R!
InternalServerError
““R e
)
““e f
;
““f g
}
‘‘ 
}
’’ 	
public
ŸŸ 

JsonResult
ŸŸ 
InvalidarCompra
ŸŸ )
(
ŸŸ) *
long
ŸŸ* .
idOrden
ŸŸ/ 6
,
ŸŸ6 7
string
ŸŸ8 >
observacion
ŸŸ? J
)
ŸŸJ K
{
⁄⁄ 	
try
€€ 
{
‹‹ 
OperationResult
›› 
result
››  &
=
››' (
_logicaOperacion
››) 9
.
››9 :
InvalidarCompra
››: I
(
››I J
idOrden
››J Q
,
››Q R
ProfileData
››S ^
(
››^ _
)
››_ `
.
››` a
Empleado
››a i
.
››i j
Id
››j l
,
››l m
ProfileData
››n y
(
››y z
)
››z {
.
››{ |-
IdCentroDeAtencionSeleccionado››| ö
,››ö õ
observacion››ú ß
,››ß ®
ProfileData››© ¥
(››¥ µ
)››µ ∂
)››∂ ∑
;››∑ ∏
Util
ﬂﬂ 
.
ﬂﬂ (
ManageIfResultIsNotSuccess
ﬂﬂ /
(
ﬂﬂ/ 0
result
ﬂﬂ0 6
,
ﬂﬂ6 7
$str
ﬂﬂ8 V
)
ﬂﬂV W
;
ﬂﬂW X
return
‡‡ 
Json
‡‡ 
(
‡‡ 
new
‡‡ 
{
‡‡  !
result
‡‡" (
.
‡‡( )
code_result
‡‡) 4
,
‡‡4 5
result
‡‡6 <
.
‡‡< =
data
‡‡= A
,
‡‡A B 
result_description
‡‡C U
=
‡‡V W
result
‡‡X ^
.
‡‡^ _
title
‡‡_ d
}
‡‡e f
)
‡‡f g
;
‡‡g h
}
·· 
catch
‚‚ 
(
‚‚ 
LogicaException
‚‚ "
oe
‚‚# %
)
‚‚% &
{
„„ 
return
‰‰ 
new
‰‰ "
JsonHttpStatusResult
‰‰ /
(
‰‰/ 0
Util
‰‰0 4
.
‰‰4 5
	ErrorJson
‰‰5 >
(
‰‰> ?
oe
‰‰? A
)
‰‰A B
,
‰‰B C
HttpStatusCode
‰‰D R
.
‰‰R S!
InternalServerError
‰‰S f
)
‰‰f g
;
‰‰g h
}
ÂÂ 
catch
ÊÊ 
(
ÊÊ 
	Exception
ÊÊ 
e
ÊÊ 
)
ÊÊ 
{
ÁÁ 
return
ËË 
new
ËË "
JsonHttpStatusResult
ËË /
(
ËË/ 0
Util
ËË0 4
.
ËË4 5
	ErrorJson
ËË5 >
(
ËË> ?
e
ËË? @
)
ËË@ A
,
ËËA B
HttpStatusCode
ËËC Q
.
ËËQ R!
InternalServerError
ËËR e
)
ËËe f
;
ËËf g
}
ÈÈ 
}
ÍÍ 	
public
ÏÏ 

JsonResult
ÏÏ >
0ObtenerOrdenCompraYDetallesParaAnulacionDeCompra
ÏÏ J
(
ÏÏJ K
long
ÏÏK O
idOrdenCompra
ÏÏP ]
)
ÏÏ] ^
{
ÌÌ 	
try
ÓÓ 
{
ÔÔ 
OrdenDeCompra
 
	resultado
 '
=
( )
_logicaOperacion
* :
.
: ;"
ObtenerOrdenDeCompra
; O
(
O P
idOrdenCompra
P ]
)
] ^
;
^ _
return
ÒÒ 
Json
ÒÒ 
(
ÒÒ 
new
ÒÒ .
 RegistroAnulacionCompraViewModel
ÒÒ  @
(
ÒÒ@ A
	resultado
ÒÒA J
)
ÒÒJ K
)
ÒÒK L
;
ÒÒL M
}
ÚÚ 
catch
ÛÛ 
(
ÛÛ 
	Exception
ÛÛ 
e
ÛÛ 
)
ÛÛ 
{
ÙÙ 
return
ıı 
Json
ıı 
(
ıı 
Util
ıı  
.
ıı  !
	ErrorJson
ıı! *
(
ıı* +
e
ıı+ ,
)
ıı, -
)
ıı- .
;
ıı. /
}
ˆˆ 
}
˜˜ 	
public
˚˚ 

JsonResult
˚˚ 3
%RegistrarComprobanteCompraCorporativa
˚˚ ?
(
˚˚? @
long
˚˚@ D
idCompra
˚˚E M
,
˚˚M N'
SelectorTipoDeComprobante
˚˚O h
comprobante
˚˚i t
)
˚˚t u
{
¸¸ 	
try
˝˝ 
{
˛˛ 
OperationResult
ˇˇ 
result
ˇˇ  &
;
ˇˇ& '
result
ÄÄ 
=
ÄÄ 
_logicaOperacion
ÄÄ )
.
ÄÄ) *3
%RegistrarComprobanteCompraCorporativa
ÄÄ* O
(
ÄÄO P
ProfileData
ÄÄP [
(
ÄÄ[ \
)
ÄÄ\ ]
.
ÄÄ] ^
Empleado
ÄÄ^ f
.
ÄÄf g
Id
ÄÄg i
,
ÄÄi j
ProfileData
ÄÄk v
(
ÄÄv w
)
ÄÄw x
.
ÄÄx y-
IdCentroDeAtencionSeleccionadoÄÄy ó
,ÄÄó ò
idCompraÄÄô °
,ÄÄ° ¢
comprobanteÄÄ£ Æ
.ÄÄÆ Ø
TipoComprobanteÄÄØ æ
.ÄÄæ ø
IdÄÄø ¡
,ÄÄ¡ ¬
comprobanteÄÄ√ Œ
.ÄÄŒ œ!
SerieSeleccionadaÄÄœ ‡
,ÄÄ‡ ·
comprobanteÄÄ‚ Ì
.ÄÄÌ Ó
EsPropioÄÄÓ ˆ
,ÄÄˆ ˜
comprobanteÄÄ¯ É
.ÄÄÉ Ñ
SerieIngresadaÄÄÑ í
,ÄÄí ì
comprobanteÄÄî ü
.ÄÄü †
NumeroIngresadoÄÄ† Ø
)ÄÄØ ∞
;ÄÄ∞ ±
Util
ÅÅ 
.
ÅÅ (
ManageIfResultIsNotSuccess
ÅÅ /
(
ÅÅ/ 0
result
ÅÅ0 6
,
ÅÅ6 7
$str
ÅÅ8 e
)
ÅÅe f
;
ÅÅf g
return
ÇÇ 
Json
ÇÇ 
(
ÇÇ 
new
ÇÇ 
{
ÇÇ  !
code_result
ÇÇ" -
=
ÇÇ. /
result
ÇÇ0 6
.
ÇÇ6 7
code_result
ÇÇ7 B
,
ÇÇB C
data
ÇÇD H
=
ÇÇI J
result
ÇÇK Q
.
ÇÇQ R
data
ÇÇR V
,
ÇÇV W 
result_description
ÇÇX j
=
ÇÇk l
result
ÇÇm s
.
ÇÇs t
title
ÇÇt y
}
ÇÇz {
)
ÇÇ{ |
;
ÇÇ| }
}
ÉÉ 
catch
ÑÑ 
(
ÑÑ 
	Exception
ÑÑ 
e
ÑÑ 
)
ÑÑ 
{
ÖÖ 
return
ÜÜ 
Json
ÜÜ 
(
ÜÜ 
Util
ÜÜ  
.
ÜÜ  !
	ErrorJson
ÜÜ! *
(
ÜÜ* +
e
ÜÜ+ ,
)
ÜÜ, -
)
ÜÜ- .
;
ÜÜ. /
}
áá 
}
àà 	
public
ää 
async
ää 
Task
ää 
<
ää 

JsonResult
ää $
>
ää$ %5
'CargarCompraCorporativaYDetallesAEditar
ää& M
(
ääM N
long
ääN R
idOrdenCompra
ääS `
)
ää` a
{
ãã 	
try
åå 
{
çç 
OrdenDeCompra
éé 
	resultado
éé '
=
éé( )
_logicaOperacion
éé* :
.
éé: ;"
ObtenerOrdenDeCompra
éé; O
(
ééO P
idOrdenCompra
ééP ]
)
éé] ^
;
éé^ _
return
èè 
Json
èè 
(
èè 
new
èè %
RegistroCompraViewModel
èè  7
(
èè7 8
	resultado
èè8 A
,
èèA B'
SelectorTipoDeComprobante
èèC \
.
èè\ ]
Convert
èè] d
(
èèd e
await
èèe j
_logicaOperacion
èèk {
.
èè{ |2
#ObtenerTiposDeComprobanteParaCompraèè| ü
(èèü †
ProfileDataèè† ´
(èè´ ¨
)èè¨ ≠
.èè≠ Æ
EmpleadoèèÆ ∂
.èè∂ ∑
Idèè∑ π
,èèπ ∫
ProfileDataèèª ∆
(èè∆ «
)èè« »
.èè» ….
IdCentroDeAtencionSeleccionadoèè… Á
)èèÁ Ë
)èèË È
)èèÈ Í
)èèÍ Î
;èèÎ Ï
}
êê 
catch
ëë 
(
ëë 
	Exception
ëë 
e
ëë 
)
ëë 
{
íí 
return
ìì 
new
ìì "
JsonHttpStatusResult
ìì /
(
ìì/ 0
Util
ìì0 4
.
ìì4 5
	ErrorJson
ìì5 >
(
ìì> ?
e
ìì? @
)
ìì@ A
,
ììA B
HttpStatusCode
ììC Q
.
ììQ R!
InternalServerError
ììR e
)
ììe f
;
ììf g
}
îî 
}
ïï 	
public
óó 
List
óó 
<
óó 
Cuota
óó 
>
óó 
ConstruirCuotas
óó *
(
óó* +
List
óó+ /
<
óó/ 04
&RegistroDetalleFinanciamientoViewModel
óó0 V
>
óóV W
cuotas
óóX ^
)
óó^ _
{
òò 	
List
ôô 
<
ôô 
Cuota
ôô 
>
ôô 
cuotasConstruidas
ôô )
=
ôô* +
new
ôô, /
List
ôô0 4
<
ôô4 5
Cuota
ôô5 :
>
ôô: ;
(
ôô; <
)
ôô< =
;
ôô= >
foreach
öö 
(
öö 
var
öö 
item
öö 
in
öö  
cuotas
öö! '
)
öö' (
{
õõ 
cuotasConstruidas
úú !
.
úú! "
Add
úú" %
(
úú% &
new
úú& )
Cuota
úú* /
(
úú/ 0
)
úú0 1
{
ùù 
id
ûû 
=
ûû 
item
ûû 
.
ûû 
IdCuota
ûû %
,
ûû% &
codigo
üü 
=
üü 
$str
üü 
,
üü  
fecha_emision
†† !
=
††" #
item
††$ (
.
††( )
FechaVencimiento
††) 9
,
††9 :
fecha_vencimiento
°° %
=
°°& '
item
°°( ,
.
°°, -
FechaVencimiento
°°- =
,
°°= >
capital
¢¢ 
=
¢¢ 
item
¢¢ "
.
¢¢" #
CapitalCuota
¢¢# /
,
¢¢/ 0
interes
££ 
=
££ 
item
££ "
.
££" #
InteresCuota
££# /
,
££/ 0
total
§§ 
=
§§ 
item
§§  
.
§§  !
ImporteCuota
§§! -
,
§§- .

por_cobrar
•• 
=
••  
false
••! &
,
••& '
cuota_inicial
¶¶ !
=
¶¶" #
item
¶¶$ (
.
¶¶( )
EsCuotaInicial
¶¶) 7
}
ßß 
)
ßß 
;
ßß 
}
®® 
return
©© 
cuotasConstruidas
©© $
;
©©$ %
}
™™ 	
public
¨¨ 
List
¨¨ 
<
¨¨  
DetalleDeOperacion
¨¨ &
>
¨¨& '2
$ConstruirDetalleMovimientoMercaderia
¨¨( L
(
¨¨L M2
$RegistroMovimientoDeAlmacenViewModel
¨¨M q 
ingresoMercaderia¨¨r É
)¨¨É Ñ
{
≠≠ 	
List
ÆÆ 
<
ÆÆ  
DetalleDeOperacion
ÆÆ #
>
ÆÆ# $!
detallesConstruidos
ÆÆ% 8
=
ÆÆ9 :
new
ÆÆ; >
List
ÆÆ? C
<
ÆÆC D 
DetalleDeOperacion
ÆÆD V
>
ÆÆV W
(
ÆÆW X
)
ÆÆX Y
;
ÆÆY Z
foreach
ØØ 
(
ØØ 
var
ØØ 
item
ØØ 
in
ØØ  
ingresoMercaderia
ØØ! 2
.
ØØ2 3
Detalles
ØØ3 ;
)
ØØ; <
{
∞∞ !
detallesConstruidos
±± #
.
±±# $
Add
±±$ '
(
±±' (
new
±±( + 
DetalleDeOperacion
±±, >
(
±±> ?
item
±±? C
.
±±C D

IdProducto
±±D N
,
±±N O
item
±±P T
.
±±T U!
IngresoSalidaActual
±±U h
,
±±h i
$num
±±j k
,
±±k l
$num
±±m n
,
±±n o
$num
±±p q
,
±±q r
$num
±±s t
,
±±t u
$num
±±v w
,
±±w x
null
±±y }
,
±±} ~
item±± É
.±±É Ñ
Lote±±Ñ à
,±±à â
null±±ä é
,±±é è
null±±ê î
,±±î ï
item±±ñ ö
.±±ö õ
EsBien±±õ °
,±±° ¢
null±±¢ ¶
,±±¶ ß
null±±® ¨
)±±¨ ≠
)±±≠ Æ
;±±Æ Ø
}
≤≤ 
return
≥≥ !
detallesConstruidos
≥≥ &
;
≥≥& '
}
¥¥ 	
public
∂∂ 
List
∂∂ 
<
∂∂  
DetalleDeOperacion
∂∂ &
>
∂∂& ':
,ConstruirDetalleMovimientoMercaderiaDeBienes
∂∂( T
(
∂∂T U2
$RegistroMovimientoDeAlmacenViewModel
∂∂U y 
ingresoMercaderia∂∂z ã
)∂∂ã å
{
∑∑ 	
List
∏∏ 
<
∏∏  
DetalleDeOperacion
∏∏ #
>
∏∏# $!
detallesConstruidos
∏∏% 8
=
∏∏9 :
new
∏∏; >
List
∏∏? C
<
∏∏C D 
DetalleDeOperacion
∏∏D V
>
∏∏V W
(
∏∏W X
)
∏∏X Y
;
∏∏Y Z
foreach
ππ 
(
ππ 
var
ππ 
item
ππ 
in
ππ  
ingresoMercaderia
ππ! 2
.
ππ2 3
Detalles
ππ3 ;
)
ππ; <
{
∫∫ !
detallesConstruidos
ªª #
.
ªª# $
Add
ªª$ '
(
ªª' (
new
ªª( + 
DetalleDeOperacion
ªª, >
(
ªª> ?
item
ªª? C
.
ªªC D

IdProducto
ªªD N
,
ªªN O
item
ªªP T
.
ªªT U!
IngresoSalidaActual
ªªU h
,
ªªh i
$num
ªªj k
,
ªªk l
$num
ªªm n
,
ªªn o
$num
ªªp q
,
ªªq r
$num
ªªs t
,
ªªt u
$num
ªªv w
,
ªªw x
null
ªªy }
,
ªª} ~
itemªª É
.ªªÉ Ñ
LoteªªÑ à
,ªªà â
nullªªä é
,ªªé è
nullªªê î
,ªªî ï
itemªªñ ö
.ªªö õ
EsBienªªõ °
,ªª° ¢
nullªª£ ß
,ªªß ®
nullªª© ≠
)ªª≠ Æ
)ªªÆ Ø
;ªªØ ∞
}
ºº 
return
ΩΩ !
detallesConstruidos
ΩΩ &
;
ΩΩ& '
}
ææ 	
public
ƒƒ 

JsonResult
ƒƒ &
ObtenerDocumentoDeCompra
ƒƒ 2
(
ƒƒ2 3
long
ƒƒ3 7
idOrdenDeCompra
ƒƒ8 G
)
ƒƒG H
{
≈≈ 	
try
∆∆ 
{
«« +
DocumentoDeOperacionViewModel
»» -
	respuesta
»». 7
;
»»7 8
OrdenDeCompra
…… 
ordenDeCompra
…… +
=
……, -
_logicaOperacion
……. >
.
……> ?"
ObtenerOrdenDeCompra
……? S
(
……S T
idOrdenDeCompra
……T c
)
……c d
;
……d e
var
   
sede
   
=
   
ObtenerSede
   &
(
  & '
)
  ' (
;
  ( )
var
ÃÃ 

htmlString
ÃÃ 
=
ÃÃ  #
CoreHtmlStringBuilder
ÃÃ  5
.
ÃÃ5 6
ObtenerHtmlString
ÃÃ6 G
(
ÃÃG H
ordenDeCompra
ÃÃH U
,
ÃÃU V
FormatoImpresion
ÃÃW g
.
ÃÃg h
A4
ÃÃh j
,
ÃÃj k
new
ÃÃl o
byte
ÃÃp t
[
ÃÃt u
]
ÃÃu v
{
ÃÃw x
}
ÃÃy z
,
ÃÃz {
sedeÃÃ| Ä
,ÃÃÄ Å
thisÃÃÇ Ü
,ÃÃÜ á
_logicaMaestroÃÃà ñ
)ÃÃñ ó
;ÃÃó ò
	respuesta
ÕÕ 
=
ÕÕ 
new
ÕÕ +
DocumentoDeOperacionViewModel
ÕÕ  =
(
ÕÕ= >
ordenDeCompra
ÕÕ> K
,
ÕÕK L

htmlString
ÕÕM W
,
ÕÕW X
false
ÕÕY ^
,
ÕÕ^ _
null
ÕÕ` d
)
ÕÕd e
;
ÕÕe f
return
œœ 
Json
œœ 
(
œœ 
	respuesta
œœ %
)
œœ% &
;
œœ& '
}
–– 
catch
—— 
(
—— 
	Exception
—— 
e
—— 
)
—— 
{
““ 
HttpContext
”” 
.
”” 
Response
”” $
.
””$ %

StatusCode
””% /
=
””0 1
$num
””2 5
;
””5 6
return
‘‘ 
Json
‘‘ 
(
‘‘ 
Util
‘‘  
.
‘‘  !
	ErrorJson
‘‘! *
(
‘‘* +
e
‘‘+ ,
)
‘‘, -
)
‘‘- .
;
‘‘. /
}
’’ 
}
÷÷ 	
public
ÿÿ 

JsonResult
ÿÿ &
ObtenerCompraCorporativa
ÿÿ 2
(
ÿÿ2 3
long
ÿÿ3 7
idOrdenDeCompra
ÿÿ8 G
)
ÿÿG H
{
ŸŸ 	
try
⁄⁄ 
{
€€ (
CompraCorporativaViewModel
‹‹ *
	respuesta
‹‹+ 4
;
‹‹4 5
OrdenDeCompra
›› 
ordenDeCompra
›› +
=
››, -
_logicaOperacion
››. >
.
››> ?"
ObtenerOrdenDeCompra
››? S
(
››S T
idOrdenDeCompra
››T c
)
››c d
;
››d e
var
ﬁﬁ 
sede
ﬁﬁ 
=
ﬁﬁ 
ObtenerSede
ﬁﬁ &
(
ﬁﬁ& '
)
ﬁﬁ' (
;
ﬁﬁ( )
var
‡‡ 

htmlString
‡‡ 
=
‡‡  #
CoreHtmlStringBuilder
‡‡! 6
.
‡‡6 7
ObtenerHtmlString
‡‡7 H
(
‡‡H I
ordenDeCompra
‡‡I V
,
‡‡V W
FormatoImpresion
‡‡X h
.
‡‡h i
A4
‡‡i k
,
‡‡k l
new
‡‡m p
byte
‡‡q u
[
‡‡u v
]
‡‡v w
{
‡‡x y
}
‡‡z {
,
‡‡{ |
sede‡‡} Å
,‡‡Å Ç
this‡‡É á
,‡‡á à
_logicaMaestro‡‡â ó
)‡‡ó ò
;‡‡ò ô
	respuesta
·· 
=
·· 
new
·· (
CompraCorporativaViewModel
··  :
(
··: ;
ordenDeCompra
··; H
,
··H I

htmlString
··J T
)
··T U
;
··U V
return
„„ 
Json
„„ 
(
„„ 
	respuesta
„„ %
)
„„% &
;
„„& '
}
‰‰ 
catch
ÂÂ 
(
ÂÂ 
	Exception
ÂÂ 
e
ÂÂ 
)
ÂÂ 
{
ÊÊ 
HttpContext
ÁÁ 
.
ÁÁ 
Response
ÁÁ $
.
ÁÁ$ %

StatusCode
ÁÁ% /
=
ÁÁ0 1
$num
ÁÁ2 5
;
ÁÁ5 6
return
ËË 
new
ËË "
JsonHttpStatusResult
ËË /
(
ËË/ 0
Util
ËË0 4
.
ËË4 5
	ErrorJson
ËË5 >
(
ËË> ?
e
ËË? @
)
ËË@ A
,
ËËA B
HttpStatusCode
ËËC Q
.
ËËQ R!
InternalServerError
ËËR e
)
ËËe f
;
ËËf g
}
ÈÈ 
}
ÍÍ 	
public
ÓÓ 

JsonResult
ÓÓ F
8ObtenerTiposDeComprobanteParaNotaDeDebitoCreditoDeCompra
ÓÓ R
(
ÓÓR S
bool
ÓÓS W 
esParaNotaDeDebito
ÓÓX j
)
ÓÓj k
{
ÔÔ 	
try
 
{
ÒÒ 
var
ÚÚ 

resultados
ÚÚ 
=
ÚÚ   
esParaNotaDeDebito
ÚÚ! 3
?
ÚÚ4 5
_logicaOperacion
ÚÚ6 F
.
ÚÚF G7
)ObtenerTiposDeComprobanteParaNotaDeDebito
ÚÚG p
(
ÚÚp q
ProfileData
ÚÚq |
(
ÚÚ| }
)
ÚÚ} ~
.
ÚÚ~ 
EmpleadoÚÚ á
.ÚÚá à
IdÚÚà ä
,ÚÚä ã
ProfileDataÚÚå ó
(ÚÚó ò
)ÚÚò ô
.ÚÚô ö.
IdCentroDeAtencionSeleccionadoÚÚö ∏
)ÚÚ∏ π
:ÚÚ∫ ª
_logicaOperacion
ÛÛ $
.
ÛÛ$ %8
*ObtenerTiposDeComprobanteParaNotaDeCredito
ÛÛ% O
(
ÛÛO P
ProfileData
ÛÛP [
(
ÛÛ[ \
)
ÛÛ\ ]
.
ÛÛ] ^
Empleado
ÛÛ^ f
.
ÛÛf g
Id
ÛÛg i
,
ÛÛi j
ProfileData
ÛÛk v
(
ÛÛv w
)
ÛÛw x
.
ÛÛx y-
IdCentroDeAtencionSeleccionadoÛÛy ó
)ÛÛó ò
;ÛÛò ô
List
ÙÙ 
<
ÙÙ '
SelectorTipoDeComprobante
ÙÙ .
>
ÙÙ. /
comprobantes
ÙÙ0 <
=
ÙÙ= >'
SelectorTipoDeComprobante
ÙÙ? X
.
ÙÙX Y 
ConvertirNoPropios
ÙÙY k
(
ÙÙk l

resultados
ÙÙl v
)
ÙÙv w
;
ÙÙw x
return
ıı 
Json
ıı 
(
ıı 
comprobantes
ıı (
)
ıı( )
;
ıı) *
}
ˆˆ 
catch
˜˜ 
(
˜˜ 
	Exception
˜˜ 
e
˜˜ 
)
˜˜ 
{
¯¯ 
return
˘˘ 
Json
˘˘ 
(
˘˘ 
Util
˘˘  
.
˘˘  !
	ErrorJson
˘˘! *
(
˘˘* +
e
˘˘+ ,
)
˘˘, -
)
˘˘- .
;
˘˘. /
}
˙˙ 
}
˚˚ 	
public
˝˝ 

JsonResult
˝˝ 0
"GuardarNotaDeDebitoCreditoDeCompra
˝˝ <
(
˝˝< =%
RegistroDeNotaViewModel
˝˝= T
registroDeNota
˝˝U c
)
˝˝c d
{
˛˛ 	
try
ˇˇ 
{
ÄÄ 
List
ÅÅ 
<
ÅÅ  
DetalleOrdenDeNota
ÅÅ '
>
ÅÅ' (
detalles
ÅÅ) 1
=
ÅÅ2 39
+ConstruirDetalleTransaccionParaNotaDeCompra
ÅÅ4 _
(
ÅÅ_ `
registroDeNota
ÅÅ` n
)
ÅÅn o
;
ÅÅo p
OperationResult
ÇÇ 
	resultado
ÇÇ  )
=
ÇÇ* +
registroDeNota
ÇÇ, :
.
ÇÇ: ;
EsDebito
ÇÇ; C
?
ÇÇD E
_logicaOperacion
ÉÉ $
.
ÉÉ$ %)
GuardarNotaDeDebitoDeCompra
ÉÉ% @
(
ÉÉ@ A
registroDeNota
ÉÉA O
.
ÉÉO P 
IdOrdenDeOperacion
ÉÉP b
,
ÉÉb c
registroDeNota
ÉÉd r
.
ÉÉr s
TipoNota
ÉÉs {
.
ÉÉ{ |
Id
ÉÉ| ~
,
ÉÉ~ 
registroDeNotaÉÉÄ é
.ÉÉé è
ObservacionÉÉè ö
,ÉÉö õ
registroDeNotaÉÉú ™
.ÉÉ™ ´
ComprobanteÉÉ´ ∂
.ÉÉ∂ ∑
EsPropioÉÉ∑ ø
==ÉÉ¿ ¬
trueÉÉ√ «
?ÉÉ» …
$numÉÉ  À
:ÉÉÃ Õ
registroDeNotaÉÉŒ ‹
.ÉÉ‹ ›
ComprobanteÉÉ› Ë
.ÉÉË È
TipoComprobanteÉÉÈ ¯
.ÉÉ¯ ˘
IdÉÉ˘ ˚
,ÉÉ˚ ¸
registroDeNotaÉÉ˝ ã
.ÉÉã å
ComprobanteÉÉå ó
.ÉÉó ò!
SerieSeleccionadaÉÉò ©
,ÉÉ© ™
registroDeNotaÉÉ´ π
.ÉÉπ ∫
ComprobanteÉÉ∫ ≈
.ÉÉ≈ ∆
EsPropioÉÉ∆ Œ
,ÉÉŒ œ
registroDeNotaÉÉ– ﬁ
.ÉÉﬁ ﬂ
ComprobanteÉÉﬂ Í
.ÉÉÍ Î
SerieIngresadaÉÉÎ ˘
,ÉÉ˘ ˙
registroDeNotaÉÉ˚ â
.ÉÉâ ä
ComprobanteÉÉä ï
.ÉÉï ñ
NumeroIngresadoÉÉñ •
,ÉÉ• ¶
registroDeNotaÉÉß µ
.ÉÉµ ∂
	MontoNotaÉÉ∂ ø
.ÉÉø ¿
ToStringÉÉ¿ »
(ÉÉ» …
)ÉÉ…  
,ÉÉ  À
detallesÉÉÃ ‘
,ÉÉ‘ ’
ProfileDataÉÉ÷ ·
(ÉÉ· ‚
)ÉÉ‚ „
)ÉÉ„ ‰
:ÉÉÂ Ê
_logicaOperacion
ÑÑ $
.
ÑÑ$ %*
GuardarNotaDeCreditoDeCompra
ÑÑ% A
(
ÑÑA B
registroDeNota
ÑÑB P
.
ÑÑP Q 
IdOrdenDeOperacion
ÑÑQ c
,
ÑÑc d
registroDeNota
ÑÑe s
.
ÑÑs t
TipoNota
ÑÑt |
.
ÑÑ| }
Id
ÑÑ} 
,ÑÑ Ä
registroDeNotaÑÑÅ è
.ÑÑè ê
ObservacionÑÑê õ
,ÑÑõ ú
registroDeNotaÑÑù ´
.ÑÑ´ ¨
ComprobanteÑÑ¨ ∑
.ÑÑ∑ ∏
EsPropioÑÑ∏ ¿
==ÑÑ¡ √
trueÑÑƒ »
?ÑÑ…  
$numÑÑÀ Ã
:ÑÑÕ Œ
registroDeNotaÑÑœ ›
.ÑÑ› ﬁ
ComprobanteÑÑﬁ È
.ÑÑÈ Í
TipoComprobanteÑÑÍ ˘
.ÑÑ˘ ˙
IdÑÑ˙ ¸
,ÑÑ¸ ˝
registroDeNotaÑÑ˛ å
.ÑÑå ç
ComprobanteÑÑç ò
.ÑÑò ô!
SerieSeleccionadaÑÑô ™
,ÑÑ™ ´
registroDeNotaÑÑ¨ ∫
.ÑÑ∫ ª
ComprobanteÑÑª ∆
.ÑÑ∆ «
EsPropioÑÑ« œ
,ÑÑœ –
registroDeNotaÑÑ— ﬂ
.ÑÑﬂ ‡
ComprobanteÑÑ‡ Î
.ÑÑÎ Ï
SerieIngresadaÑÑÏ ˙
,ÑÑ˙ ˚
registroDeNotaÑÑ¸ ä
.ÑÑä ã
ComprobanteÑÑã ñ
.ÑÑñ ó
NumeroIngresadoÑÑó ¶
,ÑÑ¶ ß
registroDeNotaÑÑ® ∂
.ÑÑ∂ ∑
	MontoNotaÑÑ∑ ¿
.ÑÑ¿ ¡
ToStringÑÑ¡ …
(ÑÑ…  
)ÑÑ  À
,ÑÑÀ Ã
detallesÑÑÕ ’
,ÑÑ’ ÷
ProfileDataÑÑ◊ ‚
(ÑÑ‚ „
)ÑÑ„ ‰
)ÑÑ‰ Â
;ÑÑÂ Ê
Util
ÖÖ 
.
ÖÖ (
ManageIfResultIsNotSuccess
ÖÖ /
(
ÖÖ/ 0
	resultado
ÖÖ0 9
,
ÖÖ9 :
$str
ÖÖ; W
)
ÖÖW X
;
ÖÖX Y
return
ÜÜ 
Json
ÜÜ 
(
ÜÜ 
new
ÜÜ 
{
ÜÜ  !
	resultado
ÜÜ" +
.
ÜÜ+ ,
code_result
ÜÜ, 7
,
ÜÜ7 8
	resultado
ÜÜ9 B
.
ÜÜB C
data
ÜÜC G
,
ÜÜG H 
result_description
ÜÜI [
=
ÜÜ\ ]
	resultado
ÜÜ^ g
.
ÜÜg h
title
ÜÜh m
}
ÜÜn o
)
ÜÜo p
;
ÜÜp q
}
áá 
catch
àà 
(
àà 
LogicaException
àà "
oe
àà# %
)
àà% &
{
ââ 
return
ää 
new
ää "
JsonHttpStatusResult
ää /
(
ää/ 0
Util
ää0 4
.
ää4 5
	ErrorJson
ää5 >
(
ää> ?
oe
ää? A
)
ääA B
,
ääB C
HttpStatusCode
ääD R
.
ääR S!
InternalServerError
ääS f
)
ääf g
;
ääg h
}
ãã 
catch
åå 
(
åå 
	Exception
åå 
e
åå 
)
åå 
{
çç 
return
éé 
new
éé "
JsonHttpStatusResult
éé /
(
éé/ 0
Util
éé0 4
.
éé4 5
	ErrorJson
éé5 >
(
éé> ?
new
éé? B
	Exception
ééC L
(
ééL M
$str
ééM p
,
éép q
e
éér s
)
éés t
)
éét u
,
ééu v
HttpStatusCodeééw Ö
.ééÖ Ü#
InternalServerErrorééÜ ô
)ééô ö
;ééö õ
}
èè 
}
êê 	
public
íí 
List
íí 
<
íí  
DetalleOrdenDeNota
íí &
>
íí& '9
+ConstruirDetalleTransaccionParaNotaDeCompra
íí( S
(
ííS T%
RegistroDeNotaViewModel
ííT k
registroDeNota
ííl z
)
ííz {
{
ìì 	
List
îî 
<
îî  
DetalleOrdenDeNota
îî #
>
îî# $!
detallesConstruidos
îî% 8
=
îî9 :
new
îî; >
List
îî? C
<
îîC D 
DetalleOrdenDeNota
îîD V
>
îîV W
(
îîW X
)
îîX Y
;
îîY Z
foreach
ïï 
(
ïï 
var
ïï 
item
ïï 
in
ïï  
registroDeNota
ïï! /
.
ïï/ 0
Detalles
ïï0 8
)
ïï8 9
{
ññ !
detallesConstruidos
óó #
.
óó# $
Add
óó$ '
(
óó' (
new
óó( + 
DetalleOrdenDeNota
óó, >
(
óó> ?
)
óó? @
{
òò 
Cantidad
ôô 
=
ôô 
item
ôô #
.
ôô# $
Cantidad
ôô$ ,
,
ôô, -
Producto
öö 
=
öö 
new
öö "(
Concepto_Negocio_Comercial
öö# =
(
öö= >
)
öö> ?
{
õõ 
Id
úú 
=
úú 
item
úú !
.
úú! "

IdConcepto
úú" ,
,
úú, -
}
ùù 
,
ùù 
Detalle
ûû 
=
ûû 
item
ûû "
.
ûû" #
Observacion
ûû# .
,
ûû. /
PrecioUnitario
üü "
=
üü# $
item
üü% )
.
üü) *
Precio
üü* 0
,
üü0 1
Importe
†† 
=
†† 
item
†† "
.
††" #
Importe
††# *
,
††* +
	Descuento
°° 
=
°° 
item
°°  $
.
°°$ %
	Descuento
°°% .
,
°°. /
MontoDetalle
¢¢  
=
¢¢! "
item
¢¢# '
.
¢¢' (
MontoDetalle
¢¢( 4
}
££ 
)
££ 
;
££ 
}
§§ 
return
•• !
detallesConstruidos
•• &
;
••& '
}
¶¶ 	
}
ëë 
}íí Íñ
UD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\EmpleadoController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
EmpleadoController #
:$ %
AdminController& 5
{ 
private 
readonly 
IActorNegocioLogica ,
_logica- 4
;4 5
private "
ApplicationUserManager &
_userManager' 3
;3 4
public 
EmpleadoController !
(! "
)" #
{ 	
_logica 
= 
Dependencia !
.! "
Resolve" )
<) *
IActorNegocioLogica* =
>= >
(> ?
)? @
;@ A
} 	
public 

JsonResult 
ListarEmpleados )
() *
)* +
{ 	
try 
{   
var"" 
result"" 
="" 
UserManager"" (
.""( )
Users"") .
."". /
ToList""/ 5
(""5 6
)""6 7
;""7 8
List## 
<## $
BandejaEmpleadoViewModel## -
>##- .
	respuesta##/ 8
=##9 :$
BandejaEmpleadoViewModel##; S
.##S T
Convert##T [
(##[ \
_logica##\ c
.##c d$
ObtenerEmpleadosVigentes##d |
(##| }
)##} ~
,##~ 
result
##Ä Ü
)
##Ü á
;
##á à
return$$ 
Json$$ 
($$ 
	respuesta$$ %
)$$% &
;$$& '
}%% 
catch&& 
(&& 
	Exception&& 
e&& 
)&& 
{'' 
HttpContext(( 
.(( 
Response(( $
.(($ %

StatusCode((% /
=((0 1
$num((2 5
;((5 6
return)) 
Json)) 
()) 
Util))  
.))  !
	ErrorJson))! *
())* +
e))+ ,
))), -
)))- .
;)). /
}** 
}++ 	
public-- 

JsonResult-- $
ObtenerEmpleadosGenerico-- 2
(--2 3
)--3 4
{.. 	
try// 
{00 
List11 
<11 "
ComboGenericoViewModel11 +
>11+ ,
	respuesta11- 6
=117 8"
ComboGenericoViewModel119 O
.11O P
Convert11P W
(11W X
_logica11X _
.11_ `$
ObtenerEmpleadosVigentes11` x
(11x y
)11y z
)11z {
;11{ |
return22 
Json22 
(22 
	respuesta22 %
)22% &
;22& '
}33 
catch44 
(44 
	Exception44 
e44 
)44 
{55 
HttpContext66 
.66 
Response66 $
.66$ %

StatusCode66% /
=660 1
$num662 5
;665 6
return77 
Json77 
(77 
Util77  
.77  !
	ErrorJson77! *
(77* +
e77+ ,
)77, -
)77- .
;77. /
}88 
}99 	
internal:: 
void:: 
ResolverDirecciones:: )
(::) *
EmpleadoViewModel::* ;
empleado::< D
,::D E
List::F J
<::J K
	Direccion::K T
>::T U
direcciones::V a
)::a b
{;; 	
if<< 
(<< 
empleado<< 
.<< 
IdActor<<  
><<! "
$num<<# $
)<<$ %
{== 
foreach@@ 
(@@ 
var@@ 
item@@ !
in@@" $
empleado@@% -
.@@- .
Direcciones@@. 9
)@@9 :
{AA 
ifBB 
(BB 
itemBB 
.BB 
IdBB 
>BB  !
$numBB" #
)BB# $
{CC 
direccionesDD #
.DD# $
AddDD$ '
(DD' (
newDD( +
	DireccionDD, 5
(DD5 6
itemDD6 :
.DD: ;
IdDD; =
,DD= >
empleadoDD? G
.DDG H
IdActorDDH O
,DDO P
MaestroSettingsDDQ `
.DD` a
DefaultDDa h
.DDh i;
.IdDetalleMaestroTipoDireccionDomicilioPersonal	DDi ó
,
DDó ò
item
DDô ù
.
DDù û
Nacion
DDû §
.
DD§ •
Id
DD• ß
,
DDß ®
item
DD© ≠
.
DD≠ Æ
Ubigeo
DDÆ ¥
.
DD¥ µ
Id
DDµ ∑
,
DD∑ ∏
item
DDπ Ω
.
DDΩ æ
Detalle
DDæ ≈
,
DD≈ ∆
nullEE  
,EE  !
nullEE" &
,EE& '
itemEE( ,
.EE, -
EsPrincipalEE- 8
,EE8 9
itemEE: >
.EE> ?
	EsVigenteEE? H
)EEH I
)EEI J
;EEJ K
}FF 
elseGG 
{HH 
direccionesII #
.II# $
AddII$ '
(II' (
newII( +
	DireccionII, 5
(II5 6
empleadoII6 >
.II> ?
IdActorII? F
,IIF G
MaestroSettingsIIH W
.IIW X
DefaultIIX _
.II_ `;
.IdDetalleMaestroTipoDireccionDomicilioPersonal	II` é
,
IIé è
MaestroSettings
IIê ü
.
IIü †
Default
II† ß
.
IIß ®(
IdDetalleMaestroNacionPeru
II® ¬
,
II¬ √
item
IIƒ »
.
II» …
Ubigeo
II… œ
.
IIœ –
Id
II– “
,
II“ ”
itemJJ  
.JJ  !
DetalleJJ! (
,JJ( )
nullJJ* .
,JJ. /
nullJJ0 4
,JJ4 5
itemJJ6 :
.JJ: ;
EsPrincipalJJ; F
,JJF G
itemJJH L
.JJL M
	EsVigenteJJM V
)JJV W
)JJW X
;JJX Y
}KK 
}LL 
}MM 
elseNN 
{OO 
foreachPP 
(PP 
varPP 
itemPP !
inPP" $
empleadoPP% -
.PP- .
DireccionesPP. 9
)PP9 :
{QQ 
direccionesRR 
.RR  
AddRR  #
(RR# $
newRR$ '
	DireccionRR( 1
(RR1 2
MaestroSettingsRR2 A
.RRA B
DefaultRRB I
.RRI J:
.IdDetalleMaestroTipoDireccionDomicilioPersonalRRJ x
,RRx y
MaestroSettings	RRz â
.
RRâ ä
Default
RRä ë
.
RRë í(
IdDetalleMaestroNacionPeru
RRí ¨
,
RR¨ ≠
item
RRÆ ≤
.
RR≤ ≥
Ubigeo
RR≥ π
.
RRπ ∫
Id
RR∫ º
,
RRº Ω
item
RRæ ¬
.
RR¬ √
Detalle
RR√  
,
RR  À
nullSS 
,SS 
nullSS "
,SS" #
itemSS$ (
.SS( )
EsPrincipalSS) 4
,SS4 5
itemSS6 :
.SS: ;
	EsVigenteSS; D
)SSD E
)SSE F
;SSF G
}TT 
}UU 
}VV 	
publicXX 

JsonResultXX 
GuardarEmpleadoXX )
(XX) *
EmpleadoViewModelXX* ;
empleadoXX< D
,XXD E
ExpandedUserDTOXXF U
usuarioXXV ]
)XX] ^
{YY 	
tryZZ 
{[[ 
List\\ 
<\\ 
	Direccion\\ 
>\\ 
direcciones\\  +
=\\, -
new\\. 1
List\\2 6
<\\6 7
	Direccion\\7 @
>\\@ A
(\\A B
)\\B C
;\\C D
List]] 
<]] 
int]] 
>]] 
roles]] 
=]]  !
new]]" %
List]]& *
<]]* +
int]]+ .
>]]. /
(]]/ 0
)]]0 1
;]]1 2
roles^^ 
=^^ 
empleado^^  
.^^  !
Roles^^! &
.^^& '
Select^^' -
(^^- .
r^^. /
=>^^0 2
r^^3 4
.^^4 5
Id^^5 7
)^^7 8
.^^8 9
ToList^^9 ?
(^^? @
)^^@ A
;^^A B
if__ 
(__ 
empleado__ 
.__ 
Id__ 
>__  !
$num__" #
)__# $
{`` 
ResolverDireccionesbb '
(bb' (
empleadobb( 0
,bb0 1
direccionesbb2 =
)bb= >
;bb> ?
vardd 
resultdd 
=dd  
_logicadd! (
.dd( )
ActualizarEmpleadodd) ;
(dd; <
empleadodd< D
.ddD E
IdddE G
,ddG H
empleadoddI Q
.ddQ R
IdActorddR Y
,ddY Z
empleadodd[ c
.ddc d
Codigoddd j
,ddj k
empleadoddl t
.ddt u#
TipoDocumentoIdentidad	ddu ã
.
ddã å
Id
ddå é
,
ddé è
empleado
ddê ò
.
ddò ô&
NumeroDocumentoIdentidad
ddô ±
,
dd± ≤
empleado
dd≥ ª
.
ddª º
ApellidoPaterno
ddº À
,
ddÀ Ã
empleado
ddÕ ’
.
dd’ ÷
ApellidoMaterno
dd÷ Â
,
ddÂ Ê
empleado
ddÁ Ô
.
ddÔ 
Nombres
dd ˜
,
dd˜ ¯
empleado
dd˘ Å
.
ddÅ Ç
Correo
ddÇ à
,
ddà â
empleado
ddä í
.
ddí ì

ClaseActor
ddì ù
.
ddù û
Id
ddû †
,
dd† °
empleado
dd¢ ™
.
dd™ ´
EstadoLegalActor
dd´ ª
.
ddª º
Id
ddº æ
,
ddæ ø
empleado
dd¿ »
.
dd» …
FechaNacimiento
dd… ÿ
,
ddÿ Ÿ
empleado
dd⁄ ‚
.
dd‚ „
Telefono
dd„ Î
,
ddÎ Ï
roles
ddÌ Ú
,
ddÚ Û
direcciones
ddÙ ˇ
)
ddˇ Ä
;
ddÄ Å
Utilee 
.ee &
ManageIfResultIsNotSuccessee 3
(ee3 4
resultee4 :
,ee: ;
$stree< j
)eej k
;eek l
ifff 
(ff 
empleadoff  
.ff  !
GuardarUsuarioff! /
)ff/ 0
{gg 
ifhh 
(hh 
empleadohh $
.hh$ %
ExisteUsuariohh% 2
)hh2 3
{ii 
varjj "
resultadoEditarUsuariojj  6
=jj7 8
EditarUsuariojj9 F
(jjF G
usuariojjG N
)jjN O
;jjO P
Utilkk  
.kk  !&
ManageIfResultIsNotSuccesskk! ;
(kk; <"
resultadoEditarUsuariokk< R
,kkR S
$strkkT r
)kkr s
;kks t
returnll "
newll# & 
JsonHttpStatusResultll' ;
(ll; <
newll< ?
{ll@ A"
resultadoEditarUsuariollB X
.llX Y
code_resultllY d
,lld e"
resultadoEditarUsuariollf |
.ll| }
data	ll} Å
,
llÅ Ç 
result_description
llÉ ï
=
llñ ó
$str
llò ø
}
ll¿ ¡
,
ll¡ ¬
HttpStatusCode
ll√ —
.
ll— “
OK
ll“ ‘
)
ll‘ ’
;
ll’ ÷
}mm 
elsenn 
{oo 
varpp #
resultadoGuardarUsuariopp  7
=pp8 9
GuardarUsuario_pp: I
(ppI J
usuarioppJ Q
)ppQ R
;ppR S
Utilqq  
.qq  !&
ManageIfResultIsNotSuccessqq! ;
(qq; <#
resultadoGuardarUsuarioqq< S
,qqS T
$str	qqU í
)
qqí ì
;
qqì î
varrr &
resultadoEstablecerUsuariorr  :
=rr; <
_logicarr= D
.rrD E
EstablecerUsuariorrE V
(rrV W#
resultadoGuardarUsuariorrW n
.rrn o
idUserrro u
,rru v
(rrw x
intrrx {
)rr{ |
result	rr| Ç
.
rrÇ É
data
rrÉ á
)
rrá à
;
rrà â
Utilss  
.ss  !&
ManageIfResultIsNotSuccessss! ;
(ss; <&
resultadoEstablecerUsuarioss< V
,ssV W
$str	ssX ê
)
ssê ë
;
ssë í
returntt "
newtt# & 
JsonHttpStatusResulttt' ;
(tt; <
newtt< ?
{tt@ A
code_resultttB M
=ttN O&
resultadoEstablecerUsuariottP j
.ttj k
code_resultttk v
,ttv w
datattx |
=tt} ~'
resultadoEstablecerUsuario	tt ô
.
ttô ö
data
ttö û
,
ttû ü 
result_description
tt† ≤
=
tt≥ ¥
$str
ttµ ﬂ
}
tt‡ ·
,
tt· ‚
HttpStatusCode
tt„ Ò
.
ttÒ Ú
OK
ttÚ Ù
)
ttÙ ı
;
ttı ˆ
}uu 
}vv 
elseww 
{xx 
returnyy 
Jsonyy #
(yy# $
newyy$ '
{yy( )
resultyy* 0
.yy0 1
code_resultyy1 <
,yy< =
resultyy> D
.yyD E
datayyE I
,yyI J
result_descriptionyyK ]
=yy^ _
$stryy` z
}yy{ |
)yy| }
;yy} ~
}zz 
}{{ 
else|| 
{}} 
if~~ 
(~~ 
empleado~~  
.~~  !
IdActor~~! (
>~~) *
$num~~+ ,
)~~, -
{ !
ResolverDirecciones
ÅÅ +
(
ÅÅ+ ,
empleado
ÅÅ, 4
,
ÅÅ4 5
direcciones
ÅÅ6 A
)
ÅÅA B
;
ÅÅB C
var
ÉÉ $
resultadoCrearEmpleado
ÉÉ 2
=
ÉÉ3 4
_logica
ÉÉ5 <
.
ÉÉ< =,
CrearEmpleadoActualizandoActor
ÉÉ= [
(
ÉÉ[ \
empleado
ÉÉ\ d
.
ÉÉd e
IdActor
ÉÉe l
,
ÉÉl m
empleado
ÉÉn v
.
ÉÉv w
Codigo
ÉÉw }
,
ÉÉ} ~
empleadoÉÉ á
.ÉÉá à&
TipoDocumentoIdentidadÉÉà û
.ÉÉû ü
IdÉÉü °
,ÉÉ° ¢
empleadoÉÉ£ ´
.ÉÉ´ ¨(
NumeroDocumentoIdentidadÉÉ¨ ƒ
,ÉÉƒ ≈
empleadoÉÉ∆ Œ
.ÉÉŒ œ
ApellidoPaternoÉÉœ ﬁ
,ÉÉﬁ ﬂ
empleadoÉÉ‡ Ë
.ÉÉË È
ApellidoMaternoÉÉÈ ¯
,ÉÉ¯ ˘
empleadoÉÉ˙ Ç
.ÉÉÇ É
NombresÉÉÉ ä
,ÉÉä ã
empleadoÉÉå î
.ÉÉî ï
CorreoÉÉï õ
,ÉÉõ ú
empleadoÉÉù •
.ÉÉ• ¶

ClaseActorÉÉ¶ ∞
.ÉÉ∞ ±
IdÉÉ± ≥
,ÉÉ≥ ¥
empleadoÉÉµ Ω
.ÉÉΩ æ 
EstadoLegalActorÉÉæ Œ
.ÉÉŒ œ
IdÉÉœ —
,ÉÉ— “
empleadoÉÉ” €
.ÉÉ€ ‹
FechaNacimientoÉÉ‹ Î
,ÉÉÎ Ï
empleadoÉÉÌ ı
.ÉÉı ˆ
TelefonoÉÉˆ ˛
,ÉÉ˛ ˇ
rolesÉÉÄ Ö
,ÉÉÖ Ü
direccionesÉÉá í
)ÉÉí ì
;ÉÉì î
Util
ÑÑ 
.
ÑÑ (
ManageIfResultIsNotSuccess
ÑÑ 7
(
ÑÑ7 8$
resultadoCrearEmpleado
ÑÑ8 N
,
ÑÑN O
$str
ÑÑP n
)
ÑÑn o
;
ÑÑo p
if
ÖÖ 
(
ÖÖ 
empleado
ÖÖ $
.
ÖÖ$ %
GuardarUsuario
ÖÖ% 3
)
ÖÖ3 4
{
ÜÜ 
var
áá %
resultadoGuardarUsuario
áá  7
=
áá8 9
GuardarUsuario_
áá: I
(
ááI J
usuario
ááJ Q
)
ááQ R
;
ááR S
Util
àà  
.
àà  !(
ManageIfResultIsNotSuccess
àà! ;
(
àà; <%
resultadoGuardarUsuario
àà< S
,
ààS T
$str
ààU t
)
ààt u
;
ààu v
var
ââ (
resultadoEstablecerUsuario
ââ  :
=
ââ; <
_logica
ââ= D
.
ââD E
EstablecerUsuario
ââE V
(
ââV W%
resultadoGuardarUsuario
ââW n
.
âân o
idUser
ââo u
,
ââu v
(
ââw x
int
ââx {
)
ââ{ |%
resultadoCrearEmpleadoââ| í
.ââí ì
dataââì ó
)ââó ò
;ââò ô
Util
ää  
.
ää  !(
ManageIfResultIsNotSuccess
ää! ;
(
ää; <(
resultadoEstablecerUsuario
ää< V
,
ääV W
$strääX ê
)ääê ë
;ääë í
return
ãã "
new
ãã# &"
JsonHttpStatusResult
ãã' ;
(
ãã; <
new
ãã< ?
{
ãã@ A
code_result
ããB M
=
ããN O(
resultadoEstablecerUsuario
ããP j
.
ããj k
code_result
ããk v
,
ããv w
data
ããx |
=
ãã} ~)
resultadoEstablecerUsuarioãã ô
.ããô ö
dataããö û
,ããû ü"
result_descriptionãã† ≤
=ãã≥ ¥
$strããµ ﬂ
}ãã‡ ·
,ãã· ‚
HttpStatusCodeãã„ Ò
.ããÒ Ú
OKããÚ Ù
)ããÙ ı
;ããı ˆ
}
åå 
else
çç 
{
éé 
return
èè "
new
èè# &"
JsonHttpStatusResult
èè' ;
(
èè; <
new
èè< ?
{
èè@ A
code_result
èèB M
=
èèN O$
resultadoCrearEmpleado
èèP f
.
èèf g
code_result
èèg r
,
èèr s
data
èèt x
=
èèy z%
resultadoCrearEmpleadoèè{ ë
.èèë í
dataèèí ñ
,èèñ ó"
result_descriptionèèò ™
=èè´ ¨
$strèè≠ ¬
}èè√ ƒ
,èèƒ ≈
HttpStatusCodeèè∆ ‘
.èè‘ ’
OKèè’ ◊
)èè◊ ÿ
;èèÿ Ÿ
}
êê 
}
ëë 
else
íí 
{
ìì 
foreach
ïï 
(
ïï  !
var
ïï! $
item
ïï% )
in
ïï* ,
empleado
ïï- 5
.
ïï5 6
Direcciones
ïï6 A
)
ïïA B
{
ññ 
direcciones
óó '
.
óó' (
Add
óó( +
(
óó+ ,
new
óó, /
	Direccion
óó0 9
(
óó9 :
MaestroSettings
óó: I
.
óóI J
Default
óóJ Q
.
óóQ R=
.IdDetalleMaestroTipoDireccionDomicilioPersonalóóR Ä
,óóÄ Å
MaestroSettingsóóÇ ë
.óóë í
Defaultóóí ô
.óóô ö*
IdDetalleMaestroNacionPeruóóö ¥
,óó¥ µ
itemóó∂ ∫
.óó∫ ª
Ubigeoóóª ¡
.óó¡ ¬
Idóó¬ ƒ
,óóƒ ≈
itemóó∆  
.óó  À
DetalleóóÀ “
,óó“ ”
null
òò  $
,
òò$ %
null
òò& *
,
òò* +
item
òò, 0
.
òò0 1
EsPrincipal
òò1 <
,
òò< =
item
òò> B
.
òòB C
	EsVigente
òòC L
)
òòL M
)
òòM N
;
òòN O
}
ôô 
var
öö $
resultadoCrearEmpleado
öö 2
=
öö3 4
_logica
öö5 <
.
öö< =
CrearEmpleado
öö= J
(
ööJ K
empleado
ööK S
.
ööS T
Codigo
ööT Z
,
ööZ [
empleado
öö\ d
.
ööd e$
TipoDocumentoIdentidad
ööe {
.
öö{ |
Id
öö| ~
,
öö~ 
empleadoööÄ à
.ööà â(
NumeroDocumentoIdentidadööâ °
,öö° ¢
empleadoöö£ ´
.öö´ ¨
ApellidoPaternoöö¨ ª
,ööª º
empleadoööΩ ≈
.öö≈ ∆
ApellidoMaternoöö∆ ’
,öö’ ÷
empleadoöö◊ ﬂ
.ööﬂ ‡
Nombresöö‡ Á
,ööÁ Ë
empleadoööÈ Ò
.ööÒ Ú
CorreoööÚ ¯
,öö¯ ˘
empleadoöö˙ Ç
.ööÇ É

ClaseActorööÉ ç
.ööç é
Idööé ê
,ööê ë
empleadoööí ö
.ööö õ 
EstadoLegalActorööõ ´
.öö´ ¨
Idöö¨ Æ
,ööÆ Ø
empleadoöö∞ ∏
.öö∏ π
FechaNacimientoööπ »
,öö» …
empleadoöö  “
.öö“ ”
Telefonoöö” €
,öö€ ‹
rolesöö› ‚
,öö‚ „
direccionesöö‰ Ô
)ööÔ 
;öö Ò
Util
õõ 
.
õõ (
ManageIfResultIsNotSuccess
õõ 7
(
õõ7 8$
resultadoCrearEmpleado
õõ8 N
,
õõN O
$str
õõP n
)
õõn o
;
õõo p
if
úú 
(
úú 
empleado
úú $
.
úú$ %
GuardarUsuario
úú% 3
)
úú3 4
{
ùù 
var
ûû %
resultadoGuardarUsuario
ûû  7
=
ûû8 9
GuardarUsuario_
ûû: I
(
ûûI J
usuario
ûûJ Q
)
ûûQ R
;
ûûR S
Util
üü  
.
üü  !(
ManageIfResultIsNotSuccess
üü! ;
(
üü; <%
resultadoGuardarUsuario
üü< S
,
üüS T
$str
üüU t
)
üüt u
;
üüu v
var
†† (
resultadoEstablecerUsuario
††  :
=
††; <
_logica
††= D
.
††D E
EstablecerUsuario
††E V
(
††V W%
resultadoGuardarUsuario
††W n
.
††n o
idUser
††o u
,
††u v
(
††w x
int
††x {
)
††{ |%
resultadoCrearEmpleado††| í
.††í ì
data††ì ó
)††ó ò
;††ò ô
Util
°°  
.
°°  !(
ManageIfResultIsNotSuccess
°°! ;
(
°°; <(
resultadoEstablecerUsuario
°°< V
,
°°V W
$str°°X á
)°°á à
;°°à â
return
¢¢ "
new
¢¢# &"
JsonHttpStatusResult
¢¢' ;
(
¢¢; <
new
¢¢< ?
{
¢¢@ A
code_result
¢¢B M
=
¢¢N O(
resultadoEstablecerUsuario
¢¢P j
.
¢¢j k
code_result
¢¢k v
,
¢¢v w
data
¢¢x |
=
¢¢} ~)
resultadoEstablecerUsuario¢¢ ô
.¢¢ô ö
data¢¢ö û
,¢¢û ü"
result_description¢¢† ≤
=¢¢≥ ¥
$str¢¢µ ﬂ
}¢¢‡ ·
,¢¢· ‚
HttpStatusCode¢¢„ Ò
.¢¢Ò Ú
OK¢¢Ú Ù
)¢¢Ù ı
;¢¢ı ˆ
}
££ 
else
§§ 
{
•• 
return
¶¶ "
new
¶¶# &"
JsonHttpStatusResult
¶¶' ;
(
¶¶; <
new
¶¶< ?
{
¶¶@ A
code_result
¶¶B M
=
¶¶N O$
resultadoCrearEmpleado
¶¶P f
.
¶¶f g
code_result
¶¶g r
,
¶¶r s
data
¶¶t x
=
¶¶y z%
resultadoCrearEmpleado¶¶{ ë
.¶¶ë í
data¶¶í ñ
,¶¶ñ ó"
result_description¶¶ò ™
=¶¶´ ¨
$str¶¶≠ ¬
}¶¶√ ƒ
,¶¶ƒ ≈
HttpStatusCode¶¶∆ ‘
.¶¶‘ ’
OK¶¶’ ◊
)¶¶◊ ÿ
;¶¶ÿ Ÿ
}
ßß 
}
®® 
}
©© 
}
™™ 
catch
´´ 
(
´´ 
LogicaException
´´ "
oe
´´# %
)
´´% &
{
¨¨ 
return
≠≠ 
new
≠≠ "
JsonHttpStatusResult
≠≠ /
(
≠≠/ 0
Util
≠≠0 4
.
≠≠4 5
	ErrorJson
≠≠5 >
(
≠≠> ?
oe
≠≠? A
)
≠≠A B
,
≠≠B C
HttpStatusCode
≠≠D R
.
≠≠R S!
InternalServerError
≠≠S f
)
≠≠f g
;
≠≠g h
}
ÆÆ 
catch
ØØ 
(
ØØ 
	Exception
ØØ 
e
ØØ 
)
ØØ 
{
∞∞ 
return
±± 
new
±± "
JsonHttpStatusResult
±± /
(
±±/ 0
Util
±±0 4
.
±±4 5
	ErrorJson
±±5 >
(
±±> ?
e
±±? @
)
±±@ A
,
±±A B
HttpStatusCode
±±C Q
.
±±Q R!
InternalServerError
±±R e
)
±±e f
;
±±f g
}
≤≤ 
}
≥≥ 	
public
µµ 

JsonResult
µµ 
Validar
µµ !
(
µµ! "
int
µµ" %
idTipoDocumento
µµ& 5
,
µµ5 6
string
µµ7 =
numeroDocumento
µµ> M
)
µµM N
{
∂∂ 	
EmpleadoViewModel
∑∑ 
actor
∑∑ #
=
∑∑$ %
null
∑∑& *
;
∑∑* +
EmpleadoViewModel
∏∏ 
empleado
∏∏ &
=
∏∏' (
null
∏∏) -
;
∏∏- .
try
ππ 
{
∫∫ /
!RespuestaVerificacionActorNegocio
ªª 1
result
ªª2 8
=
ªª9 :
_logica
ªª; B
.
ªªB C
VerificarActor
ªªC Q
(
ªªQ R
idTipoDocumento
ªªR a
,
ªªa b
numeroDocumento
ªªc r
,
ªªr s
ActorSettingsªªt Å
.ªªÅ Ç
DefaultªªÇ â
.ªªâ ä
IdRolEmpleadoªªä ó
)ªªó ò
;ªªò ô
if
ΩΩ 
(
ΩΩ 
result
ΩΩ 
.
ΩΩ 
	respuesta
ΩΩ $
==
ΩΩ% ''
RespuestaVerificacionEnum
ΩΩ( A
.
ΩΩA B
ExisteSoloActor
ΩΩB Q
)
ΩΩQ R
{
ææ 
actor
øø 
=
øø 
new
øø 
EmpleadoViewModel
øø  1
(
øø1 2
result
øø2 8
.
øø8 9
actor
øø9 >
)
øø> ?
;
øø? @
}
¿¿ 
if
¡¡ 
(
¡¡ 
result
¡¡ 
.
¡¡ 
	respuesta
¡¡ $
==
¡¡% ''
RespuestaVerificacionEnum
¡¡( A
.
¡¡A B 
ExisteActorNegocio
¡¡B T
)
¡¡T U
{
¬¬ 
Empleado
√√ 
e
√√ 
=
√√  
new
√√! $
Empleado
√√% -
(
√√- .
result
√√. 4
.
√√4 5
actorNegocio
√√5 A
)
√√A B
;
√√B C
empleado
ƒƒ 
=
ƒƒ 
new
ƒƒ "
EmpleadoViewModel
ƒƒ# 4
(
ƒƒ4 5
e
ƒƒ5 6
)
ƒƒ6 7
;
ƒƒ7 8
}
≈≈ 
if
∆∆ 
(
∆∆ 
result
∆∆ 
.
∆∆ 
	respuesta
∆∆ $
==
∆∆% ''
RespuestaVerificacionEnum
∆∆( A
.
∆∆A B
NoExisteActor
∆∆B O
)
∆∆O P
{
«« 
if
»» 
(
»» 
idTipoDocumento
»» '
==
»»( *
ActorSettings
»»+ 8
.
»»8 9
Default
»»9 @
.
»»@ A)
IdTipoDocumentoIdentidadRuc
»»A \
)
»»\ ]
{
…… 
var
   
datos
   !
=
  " # 
ObtenerActorRucApi
  $ 6
(
  6 7
numeroDocumento
  7 F
)
  F G
;
  G H
return
ÀÀ 
Json
ÀÀ #
(
ÀÀ# $
new
ÀÀ$ '
{
ÀÀ( )
result
ÀÀ* 0
.
ÀÀ0 1
	respuesta
ÀÀ1 :
,
ÀÀ: ;
dataApi
ÀÀ< C
=
ÀÀD E
datos
ÀÀF K
}
ÀÀL M
)
ÀÀM N
;
ÀÀN O
}
ÃÃ 
if
ÕÕ 
(
ÕÕ 
idTipoDocumento
ÕÕ '
==
ÕÕ( *
ActorSettings
ÕÕ+ 8
.
ÕÕ8 9
Default
ÕÕ9 @
.
ÕÕ@ A)
IdTipoDocumentoIdentidadDni
ÕÕA \
)
ÕÕ\ ]
{
ŒŒ 
var
œœ 
datos
œœ !
=
œœ" # 
ObtenerActorDniApi
œœ$ 6
(
œœ6 7
numeroDocumento
œœ7 F
)
œœF G
;
œœG H
return
–– 
Json
–– #
(
––# $
new
––$ '
{
––( )
result
––* 0
.
––0 1
	respuesta
––1 :
,
––: ;
dataApi
––< C
=
––D E
datos
––F K
}
––L M
)
––M N
;
––N O
}
—— 
}
““ 
return
”” 
Json
”” 
(
”” 
new
”” 
{
””  !
result
””" (
.
””( )
	respuesta
””) 2
,
””2 3
actor
””4 9
,
””9 :
empleado
””; C
}
””D E
)
””E F
;
””F G
}
‘‘ 
catch
’’ 
(
’’ 
	Exception
’’ 
e
’’ 
)
’’ 
{
÷÷ 
HttpContext
◊◊ 
.
◊◊ 
Response
◊◊ $
.
◊◊$ %

StatusCode
◊◊% /
=
◊◊0 1
$num
◊◊2 5
;
◊◊5 6
return
ÿÿ 
Json
ÿÿ 
(
ÿÿ 
new
ÿÿ 
{
ÿÿ  !
	respuesta
ÿÿ" +
=
ÿÿ, -'
RespuestaVerificacionEnum
ÿÿ. G
.
ÿÿG H
NoSePudoVerificar
ÿÿH Y
,
ÿÿY Z
actor
ÿÿ[ `
,
ÿÿ` a
empleado
ÿÿb j
,
ÿÿj k
mensaje
ÿÿl s
=
ÿÿt u
e
ÿÿv w
.
ÿÿw x
Message
ÿÿx 
}ÿÿÄ Å
)ÿÿÅ Ç
;ÿÿÇ É
}
ŸŸ 
}
⁄⁄ 	
public
€€ 

JsonResult
€€ 
EliminarEmpleado
€€ *
(
€€* +
int
€€+ .

IdEmpleado
€€/ 9
)
€€9 :
{
‹‹ 	
try
›› 
{
ﬁﬁ 
OperationResult
‡‡ 
result
‡‡  &
=
‡‡' (
_logica
‡‡) 0
.
‡‡0 1
DarDeBajaEmpleado
‡‡1 B
(
‡‡B C

IdEmpleado
‡‡C M
)
‡‡M N
;
‡‡N O
Util
·· 
.
·· 
VerificarError
·· #
(
··# $
result
··$ *
)
··* +
;
··+ ,
return
‚‚ 
Json
‚‚ 
(
‚‚ 
new
‚‚ 
{
‚‚  !
code_result
‚‚" -
=
‚‚. /
result
‚‚0 6
.
‚‚6 7
code_result
‚‚7 B
,
‚‚B C
data
‚‚D H
=
‚‚I J
result
‚‚K Q
.
‚‚Q R
data
‚‚R V
,
‚‚V W 
result_description
‚‚X j
=
‚‚k l
result
‚‚m s
.
‚‚s t
title
‚‚t y
}
‚‚z {
)
‚‚{ |
;
‚‚| }
}
„„ 
catch
‰‰ 
(
‰‰ 
	Exception
‰‰ 
e
‰‰ 
)
‰‰ 
{
ÂÂ 
HttpContext
ÊÊ 
.
ÊÊ 
Response
ÊÊ $
.
ÊÊ$ %

StatusCode
ÊÊ% /
=
ÊÊ0 1
$num
ÊÊ2 5
;
ÊÊ5 6
return
ÁÁ 
Json
ÁÁ 
(
ÁÁ 
Util
ÁÁ  
.
ÁÁ  !
	ErrorJson
ÁÁ! *
(
ÁÁ* +
e
ÁÁ+ ,
)
ÁÁ, -
)
ÁÁ- .
;
ÁÁ. /
}
ËË 
}
ÈÈ 	
public
ÍÍ 

JsonResult
ÍÍ 
CargarEmpleado
ÍÍ (
(
ÍÍ( )
int
ÍÍ) ,

idEmpleado
ÍÍ- 7
)
ÍÍ7 8
{
ÎÎ 	
try
ÏÏ 
{
ÌÌ 
Empleado
ÓÓ 
e
ÓÓ 
=
ÓÓ 
_logica
ÓÓ $
.
ÓÓ$ %
ObtenerEmpleado
ÓÓ% 4
(
ÓÓ4 5

idEmpleado
ÓÓ5 ?
)
ÓÓ? @
;
ÓÓ@ A
EmpleadoViewModel
ÔÔ !
ev
ÔÔ" $
=
ÔÔ% &
new
ÔÔ' *
EmpleadoViewModel
ÔÔ+ <
(
ÔÔ< =
e
ÔÔ= >
)
ÔÔ> ?
;
ÔÔ? @
return
 
Json
 
(
 
ev
 
)
 
;
  
}
ÒÒ 
catch
ÚÚ 
(
ÚÚ 
	Exception
ÚÚ 
e
ÚÚ 
)
ÚÚ 
{
ÛÛ 
return
ÙÙ 
Json
ÙÙ 
(
ÙÙ 
Util
ÙÙ  
.
ÙÙ  !
	ErrorJson
ÙÙ! *
(
ÙÙ* +
e
ÙÙ+ ,
)
ÙÙ, -
)
ÙÙ- .
;
ÙÙ. /
}
ıı 
}
˜˜ 	
public
˘˘ 

JsonResult
˘˘ $
AsignarUsuarioEmpleado
˘˘ 0
(
˘˘0 1
string
˘˘1 7
	idUsuario
˘˘8 A
,
˘˘A B.
 RegistroUsuarioEmpleadoViewModel
˘˘C c
registro
˘˘d l
)
˘˘l m
{
˙˙ 	
try
˚˚ 
{
¸¸ 
foreach
ˇˇ 
(
ˇˇ 
var
ˇˇ 
item
ˇˇ !
in
ˇˇ" $
registro
ˇˇ% -
.
ˇˇ- .%
UsuariosEmpleadoInicial
ˇˇ. E
)
ˇˇE F
{
ÄÄ 
_logica
ÅÅ 
.
ÅÅ 
EstablecerUsuario
ÅÅ -
(
ÅÅ- .
null
ÅÅ. 2
,
ÅÅ2 3
item
ÅÅ4 8
.
ÅÅ8 9
Id
ÅÅ9 ;
)
ÅÅ; <
;
ÅÅ< =
}
ÇÇ 
foreach
ÑÑ 
(
ÑÑ 
var
ÑÑ 
item
ÑÑ !
in
ÑÑ" $
registro
ÑÑ% -
.
ÑÑ- .
UsuariosEmpleado
ÑÑ. >
)
ÑÑ> ?
{
ÖÖ 
_logica
ÜÜ 
.
ÜÜ 
EstablecerUsuario
ÜÜ -
(
ÜÜ- .
	idUsuario
ÜÜ. 7
,
ÜÜ7 8
item
ÜÜ9 =
.
ÜÜ= >
Id
ÜÜ> @
)
ÜÜ@ A
;
ÜÜA B
}
àà 
OperationResult
ää 
result
ää  &
=
ää' (
new
ää) ,
OperationResult
ää- <
(
ää< =
)
ää= >
;
ää> ?
Util
çç 
.
çç 
VerificarError
çç #
(
çç# $
result
çç$ *
)
çç* +
;
çç+ ,
return
éé 
Json
éé 
(
éé 
new
éé 
{
éé  !
code_result
éé" -
=
éé. /
result
éé0 6
.
éé6 7
code_result
éé7 B
,
ééB C
data
ééD H
=
ééI J
result
ééK Q
.
ééQ R
data
ééR V
,
ééV W 
result_description
ééX j
=
éék l
$stréém ù
}ééû ü
)ééü †
;éé† °
}
èè 
catch
êê 
(
êê 
	Exception
êê 
e
êê 
)
êê 
{
ëë 
HttpContext
íí 
.
íí 
Response
íí $
.
íí$ %

StatusCode
íí% /
=
íí0 1
$num
íí2 5
;
íí5 6
return
ìì 
Json
ìì 
(
ìì 
Util
ìì  
.
ìì  !
	ErrorJson
ìì! *
(
ìì* +
e
ìì+ ,
)
ìì, -
)
ìì- .
;
ìì. /
}
îî 
}
ïï 	
public
óó 

JsonResult
óó *
ObtenerEmpleadosConIdUsuario
óó 6
(
óó6 7
)
óó7 8
{
òò 	
try
ôô 
{
öö 
List
õõ 
<
õõ &
UsuarioEmpleadoViewModel
õõ -
>
õõ- .
	respuesta
õõ/ 8
=
õõ9 :&
UsuarioEmpleadoViewModel
õõ; S
.
õõS T
Convert
õõT [
(
õõ[ \
_logica
õõ\ c
.
õõc d&
ObtenerEmpleadosVigentes
õõd |
(
õõ| }
)
õõ} ~
)
õõ~ 
;õõ Ä
return
úú 
Json
úú 
(
úú 
	respuesta
úú %
)
úú% &
;
úú& '
}
ùù 
catch
ûû 
(
ûû 
	Exception
ûû 
e
ûû 
)
ûû 
{
üü 
HttpContext
†† 
.
†† 
Response
†† $
.
††$ %

StatusCode
††% /
=
††0 1
$num
††2 5
;
††5 6
return
°° 
Json
°° 
(
°° 
Util
°°  
.
°°  !
	ErrorJson
°°! *
(
°°* +
e
°°+ ,
)
°°, -
)
°°- .
;
°°. /
}
¢¢ 
}
££ 	
public
•• 

JsonResult
•• +
ObtenerVendedoresConIdUsuario
•• 7
(
••7 8
)
••8 9
{
¶¶ 	
try
ßß 
{
®® 
List
©© 
<
©© $
ComboGenericoViewModel
©© +
>
©©+ ,
	respuesta
©©- 6
=
©©7 8$
ComboGenericoViewModel
©©9 O
.
©©O P
Convert
©©P W
(
©©W X
_logica
©©X _
.
©©_ `'
ObtenerVendedoresVigentes
©©` y
(
©©y z
)
©©z {
)
©©{ |
;
©©| }
return
™™ 
Json
™™ 
(
™™ 
	respuesta
™™ %
)
™™% &
;
™™& '
}
´´ 
catch
¨¨ 
(
¨¨ 
	Exception
¨¨ 
e
¨¨ 
)
¨¨ 
{
≠≠ 
HttpContext
ÆÆ 
.
ÆÆ 
Response
ÆÆ $
.
ÆÆ$ %

StatusCode
ÆÆ% /
=
ÆÆ0 1
$num
ÆÆ2 5
;
ÆÆ5 6
return
ØØ 
Json
ØØ 
(
ØØ 
Util
ØØ  
.
ØØ  !
	ErrorJson
ØØ! *
(
ØØ* +
e
ØØ+ ,
)
ØØ, -
)
ØØ- .
;
ØØ. /
}
∞∞ 
}
±± 	
public
≥≥ 

JsonResult
≥≥ ,
ObtenerEmpleadosConRolVendedor
≥≥ 8
(
≥≥8 9
)
≥≥9 :
{
¥¥ 	
try
µµ 
{
∂∂ 
List
∑∑ 
<
∑∑ $
ComboGenericoViewModel
∑∑ +
>
∑∑+ ,4
&comboGenericoDeEmpleadosConRolVendedor
∑∑- S
=
∑∑T U$
ComboGenericoViewModel
∑∑V l
.
∑∑l m
Convert
∑∑m t
(
∑∑t u
_logica
∑∑u |
.
∑∑| }(
ObtenerVendedoresVigentes∑∑} ñ
(∑∑ñ ó
)∑∑ó ò
)∑∑ò ô
;∑∑ô ö
return
ππ 
Json
ππ 
(
ππ 4
&comboGenericoDeEmpleadosConRolVendedor
ππ B
)
ππB C
;
ππC D
}
ªª 
catch
ºº 
(
ºº 
	Exception
ºº 
e
ºº 
)
ºº 
{
ΩΩ 
throw
ææ 
new
ææ !
ControllerException
ææ -
(
ææ- .
$str
ææ. d
,
ææd e
e
ææf g
)
ææg h
;
ææh i
}
øø 
}
¿¿ 	
public
¬¬ 

JsonResult
¬¬ -
ObtenerEmpleadosConRolComprador
¬¬ 9
(
¬¬9 :
)
¬¬: ;
{
√√ 	
try
ƒƒ 
{
≈≈ 
List
∆∆ 
<
∆∆ $
ComboGenericoViewModel
∆∆ +
>
∆∆+ ,5
'comboGenericoDeEmpleadosConRolComprador
∆∆- T
=
∆∆U V$
ComboGenericoViewModel
∆∆W m
.
∆∆m n
Convert
∆∆n u
(
∆∆u v
_logica
∆∆v }
.
∆∆} ~)
ObtenerCompradoresVigentes∆∆~ ò
(∆∆ò ô
)∆∆ô ö
)∆∆ö õ
;∆∆õ ú
return
»» 
Json
»» 
(
»» 5
'comboGenericoDeEmpleadosConRolComprador
»» C
)
»»C D
;
»»D E
}
   
catch
ÀÀ 
(
ÀÀ 
	Exception
ÀÀ 
e
ÀÀ 
)
ÀÀ 
{
ÃÃ 
throw
ÕÕ 
new
ÕÕ !
ControllerException
ÕÕ -
(
ÕÕ- .
$str
ÕÕ. e
,
ÕÕe f
e
ÕÕg h
)
ÕÕh i
;
ÕÕi j
}
ŒŒ 
}
œœ 	
public
—— 

JsonResult
—— *
ObtenerEmpleadosConRolCajero
—— 6
(
——6 7
)
——7 8
{
““ 	
try
”” 
{
‘‘ 
List
’’ 
<
’’ $
ComboGenericoViewModel
’’ +
>
’’+ ,2
$comboGenericoDeEmpleadosConRolCajero
’’- Q
=
’’R S$
ComboGenericoViewModel
’’T j
.
’’j k
Convert
’’k r
(
’’r s
_logica
’’s z
.
’’z {%
ObtenerCajerosVigentes’’{ ë
(’’ë í
)’’í ì
)’’ì î
;’’î ï
return
◊◊ 
Json
◊◊ 
(
◊◊ 2
$comboGenericoDeEmpleadosConRolCajero
◊◊ @
)
◊◊@ A
;
◊◊A B
}
ŸŸ 
catch
⁄⁄ 
(
⁄⁄ 
	Exception
⁄⁄ 
e
⁄⁄ 
)
⁄⁄ 
{
€€ 
throw
‹‹ 
new
‹‹ !
ControllerException
‹‹ -
(
‹‹- .
$str
‹‹. b
,
‹‹b c
e
‹‹d e
)
‹‹e f
;
‹‹f g
}
›› 
}
ﬁﬁ 	
public
‡‡ 

JsonResult
‡‡ .
 ObtenerEmpleadosConRolAlmacenero
‡‡ :
(
‡‡: ;
)
‡‡; <
{
·· 	
try
‚‚ 
{
„„ 
List
‰‰ 
<
‰‰ $
ComboGenericoViewModel
‰‰ +
>
‰‰+ ,6
(comboGenericoDeEmpleadosConRolAlmacenero
‰‰- U
=
‰‰V W$
ComboGenericoViewModel
‰‰X n
.
‰‰n o
Convert
‰‰o v
(
‰‰v w
_logica
‰‰w ~
.
‰‰~ )
ObtenerAlmacenerosVigentes‰‰ ô
(‰‰ô ö
)‰‰ö õ
)‰‰õ ú
;‰‰ú ù
return
ÊÊ 
Json
ÊÊ 
(
ÊÊ 6
(comboGenericoDeEmpleadosConRolAlmacenero
ÊÊ D
)
ÊÊD E
;
ÊÊE F
}
ËË 
catch
ÈÈ 
(
ÈÈ 
	Exception
ÈÈ 
e
ÈÈ 
)
ÈÈ 
{
ÍÍ 
throw
ÎÎ 
new
ÎÎ !
ControllerException
ÎÎ -
(
ÎÎ- .
$str
ÎÎ. f
,
ÎÎf g
e
ÎÎh i
)
ÎÎi j
;
ÎÎj k
}
ÏÏ 
}
ÌÌ 	
public
ÔÔ 

JsonResult
ÔÔ 
ObtenerEmpleados
ÔÔ *
(
ÔÔ* +
)
ÔÔ+ ,
{
 	
try
ÒÒ 
{
ÚÚ 
var
ÛÛ 

resultados
ÛÛ 
=
ÛÛ  
_logica
ÛÛ! (
.
ÛÛ( )&
ObtenerEmpleadosVigentes
ÛÛ) A
(
ÛÛA B
)
ÛÛB C
;
ÛÛC D
List
ÙÙ 
<
ÙÙ *
ComboActorComercialViewModel
ÙÙ 1
>
ÙÙ1 2
	empleados
ÙÙ3 <
=
ÙÙ= >*
ComboActorComercialViewModel
ÙÙ? [
.
ÙÙ[ \
Convert
ÙÙ\ c
(
ÙÙc d

resultados
ÙÙd n
)
ÙÙn o
;
ÙÙo p
return
ıı 
Json
ıı 
(
ıı 
	empleados
ıı %
)
ıı% &
;
ıı& '
}
ˆˆ 
catch
˜˜ 
(
˜˜ 
	Exception
˜˜ 
e
˜˜ 
)
˜˜ 
{
¯¯ 
return
˘˘ 
Json
˘˘ 
(
˘˘ 
Util
˘˘  
.
˘˘  !
	ErrorJson
˘˘! *
(
˘˘* +
e
˘˘+ ,
)
˘˘, -
)
˘˘- .
;
˘˘. /
}
˙˙ 
}
¸¸ 	
public
˛˛ 

JsonResult
˛˛ =
/ObtenerEmpleadosConRolVendedorVigentesConCodigo
˛˛ I
(
˛˛I J
)
˛˛J K
{
ˇˇ 	
try
ÄÄ 
{
ÅÅ 
List
ÇÇ 
<
ÇÇ *
ComboCentroAtencionViewModel
ÇÇ 1
>
ÇÇ1 24
&comboGenericoDeEmpleadosConRolVendedor
ÇÇ3 Y
=
ÇÇZ [*
ComboCentroAtencionViewModel
ÇÇ\ x
.
ÇÇx y
ConvertÇÇy Ä
(ÇÇÄ Å
_logicaÇÇÅ à
.ÇÇà â)
ObtenerVendedoresVigentesÇÇâ ¢
(ÇÇ¢ £
)ÇÇ£ §
)ÇÇ§ •
;ÇÇ• ¶
return
ÑÑ 
Json
ÑÑ 
(
ÑÑ 4
&comboGenericoDeEmpleadosConRolVendedor
ÑÑ B
)
ÑÑB C
;
ÑÑC D
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
e
áá 
)
áá 
{
àà 
throw
ââ 
new
ââ !
ControllerException
ââ -
(
ââ- .
$str
ââ. d
,
ââd e
e
ââf g
)
ââg h
;
ââh i
}
ää 
}
ãã 	
public
çç 

JsonResult
çç >
0ObtenerEmpleadosConRolCompradorVigentesConCodigo
çç J
(
ççJ K
)
ççK L
{
éé 	
try
èè 
{
êê 
List
ëë 
<
ëë *
ComboCentroAtencionViewModel
ëë 1
>
ëë1 25
'comboGenericoDeEmpleadosConRolComprador
ëë3 Z
=
ëë[ \*
ComboCentroAtencionViewModel
ëë] y
.
ëëy z
Convertëëz Å
(ëëÅ Ç
_logicaëëÇ â
.ëëâ ä*
ObtenerCompradoresVigentesëëä §
(ëë§ •
)ëë• ¶
)ëë¶ ß
;ëëß ®
return
ìì 
Json
ìì 
(
ìì 5
'comboGenericoDeEmpleadosConRolComprador
ìì C
)
ììC D
;
ììD E
}
ïï 
catch
ññ 
(
ññ 
	Exception
ññ 
e
ññ 
)
ññ 
{
óó 
throw
òò 
new
òò !
ControllerException
òò -
(
òò- .
$str
òò. e
,
òòe f
e
òòg h
)
òòh i
;
òòi j
}
ôô 
}
öö 	
public
úú 

JsonResult
úú ;
-ObtenerEmpleadosConRolCajeroVigentesConCodigo
úú G
(
úúG H
)
úúH I
{
ùù 	
try
ûû 
{
üü 
List
†† 
<
†† *
ComboCentroAtencionViewModel
†† 1
>
††1 22
$comboGenericoDeEmpleadosConRolCajero
††3 W
=
††X Y*
ComboCentroAtencionViewModel
††Z v
.
††v w
Convert
††w ~
(
††~ 
_logica†† Ü
.††Ü á&
ObtenerCajerosVigentes††á ù
(††ù û
)††û ü
)††ü †
;††† °
return
¢¢ 
Json
¢¢ 
(
¢¢ 2
$comboGenericoDeEmpleadosConRolCajero
¢¢ @
)
¢¢@ A
;
¢¢A B
}
§§ 
catch
•• 
(
•• 
	Exception
•• 
e
•• 
)
•• 
{
¶¶ 
throw
ßß 
new
ßß !
ControllerException
ßß -
(
ßß- .
$str
ßß. b
,
ßßb c
e
ßßd e
)
ßße f
;
ßßf g
}
®® 
}
©© 	
public
´´ 

JsonResult
´´ ?
1ObtenerEmpleadosConRolAlmaceneroVigentesConCodigo
´´ K
(
´´K L
)
´´L M
{
¨¨ 	
try
≠≠ 
{
ÆÆ 
List
ØØ 
<
ØØ *
ComboCentroAtencionViewModel
ØØ 1
>
ØØ1 26
(comboGenericoDeEmpleadosConRolAlmacenero
ØØ3 [
=
ØØ\ ]*
ComboCentroAtencionViewModel
ØØ^ z
.
ØØz {
ConvertØØ{ Ç
(ØØÇ É
_logicaØØÉ ä
.ØØä ã*
ObtenerAlmacenerosVigentesØØã •
(ØØ• ¶
)ØØ¶ ß
)ØØß ®
;ØØ® ©
return
±± 
Json
±± 
(
±± 6
(comboGenericoDeEmpleadosConRolAlmacenero
±± D
)
±±D E
;
±±E F
}
≥≥ 
catch
¥¥ 
(
¥¥ 
	Exception
¥¥ 
e
¥¥ 
)
¥¥ 
{
µµ 
throw
∂∂ 
new
∂∂ !
ControllerException
∂∂ -
(
∂∂- .
$str
∂∂. f
,
∂∂f g
e
∂∂h i
)
∂∂i j
;
∂∂j k
}
∑∑ 
}
∏∏ 	
[
ªª 	
	Authorize
ªª	 
(
ªª 
Roles
ªª 
=
ªª 
$str
ªª A
)
ªªA B
]
ªªB C
public
ºº 
ActionResult
ºº 
Turnos
ºº "
(
ºº" #
)
ºº# $
{
ΩΩ 	
return
ææ 
View
ææ 
(
ææ 
)
ææ 
;
ææ 
}
øø 	
public
√√ 

JsonResult
√√ 
GuardarTurno
√√ &
(
√√& '$
RegistroTurnoViewModel
√√' =
turno
√√> C
)
√√C D
{
ƒƒ 	
try
≈≈ 
{
∆∆ 
OperationResult
«« 
	resultado
««  )
;
««) *
if
»» 
(
»» 
turno
»» 
.
»» 
Id
»» 
!=
»» 
$num
»»  !
)
»»! "
{
…… 
	resultado
   
=
   
_logica
    '
.
  ' (
ActualizarTurno
  ( 7
(
  7 8
turno
  8 =
.
  = >
Id
  > @
,
  @ A
turno
  B G
.
  G H
CentroDeAtencion
  H X
.
  X Y
Id
  Y [
,
  [ \
turno
  ] b
.
  b c
Empleado
  c k
.
  k l
Id
  l n
,
  n o
turno
  p u
.
  u v
Desde
  v {
,
  { |
turno  } Ç
.  Ç É
Hasta  É à
)  à â
;  â ä
}
ÀÀ 
else
ÃÃ 
{
ÕÕ 
	resultado
ŒŒ 
=
ŒŒ 
_logica
ŒŒ  '
.
ŒŒ' (

CrearTurno
ŒŒ( 2
(
ŒŒ2 3
turno
ŒŒ3 8
.
ŒŒ8 9
CentroDeAtencion
ŒŒ9 I
.
ŒŒI J
Id
ŒŒJ L
,
ŒŒL M
turno
ŒŒN S
.
ŒŒS T
Empleado
ŒŒT \
.
ŒŒ\ ]
Id
ŒŒ] _
,
ŒŒ_ `
turno
ŒŒa f
.
ŒŒf g
Desde
ŒŒg l
,
ŒŒl m
turno
ŒŒn s
.
ŒŒs t
Hasta
ŒŒt y
)
ŒŒy z
;
ŒŒz {
}
œœ 
Util
—— 
.
—— (
ManageIfResultIsNotSuccess
—— /
(
——/ 0
	resultado
——0 9
,
——9 :
$str
——; V
)
——V W
;
——W X
return
““ 
Json
““ 
(
““ 
new
““ 
{
““  !
	resultado
““" +
.
““+ ,
code_result
““, 7
,
““7 8
	resultado
““9 B
.
““B C
data
““C G
,
““G H 
result_description
““I [
=
““\ ]
	resultado
““^ g
.
““g h
title
““h m
}
““n o
)
““o p
;
““p q
}
”” 
catch
‘‘ 
(
‘‘ 
	Exception
‘‘ 
e
‘‘ 
)
‘‘ 
{
’’ 
return
÷÷ 
new
÷÷ "
JsonHttpStatusResult
÷÷ /
(
÷÷/ 0
Util
÷÷0 4
.
÷÷4 5
	ErrorJson
÷÷5 >
(
÷÷> ?
e
÷÷? @
)
÷÷@ A
,
÷÷A B
HttpStatusCode
÷÷C Q
.
÷÷Q R!
InternalServerError
÷÷R e
)
÷÷e f
;
÷÷f g
}
◊◊ 
}
ÿÿ 	
public
ŸŸ 

JsonResult
ŸŸ 
ObtenerTurno
ŸŸ &
(
ŸŸ& '
int
ŸŸ' *
idTurno
ŸŸ+ 2
)
ŸŸ2 3
{
⁄⁄ 	
try
€€ 
{
‹‹ 
TurnoDeEmpleado
›› 
turno
››  %
=
››& '
_logica
››( /
.
››/ 0
ObtenerTurno
››0 <
(
››< =
idTurno
››= D
)
››D E
;
››E F$
RegistroTurnoViewModel
ﬁﬁ &
turnoViewModel
ﬁﬁ' 5
=
ﬁﬁ6 7
new
ﬁﬁ8 ;$
RegistroTurnoViewModel
ﬁﬁ< R
(
ﬁﬁR S
turno
ﬁﬁS X
)
ﬁﬁX Y
;
ﬁﬁY Z
return
ﬂﬂ 
Json
ﬂﬂ 
(
ﬂﬂ 
turnoViewModel
ﬂﬂ *
)
ﬂﬂ* +
;
ﬂﬂ+ ,
}
‡‡ 
catch
·· 
(
·· 
	Exception
·· 
e
·· 
)
·· 
{
‚‚ 
return
„„ 
Json
„„ 
(
„„ 
Util
„„  
.
„„  !
	ErrorJson
„„! *
(
„„* +
e
„„+ ,
)
„„, -
)
„„- .
;
„„. /
}
‰‰ 
}
ÂÂ 	
public
ÊÊ 

JsonResult
ÊÊ "
ObtenerTurnosBandeja
ÊÊ .
(
ÊÊ. /
)
ÊÊ/ 0
{
ÁÁ 	
try
ËË 
{
ÈÈ 
var
ÍÍ 

resultados
ÍÍ 
=
ÍÍ  
_logica
ÍÍ! (
.
ÍÍ( )
ObtenerTurnos
ÍÍ) 6
(
ÍÍ6 7
)
ÍÍ7 8
;
ÍÍ8 9
List
ÎÎ 
<
ÎÎ #
BandejaTurnoViewModel
ÎÎ *
>
ÎÎ* +
turnos
ÎÎ, 2
=
ÎÎ3 4#
BandejaTurnoViewModel
ÎÎ5 J
.
ÎÎJ K
Convert
ÎÎK R
(
ÎÎR S

resultados
ÎÎS ]
)
ÎÎ] ^
;
ÎÎ^ _
return
ÏÏ 
Json
ÏÏ 
(
ÏÏ 
turnos
ÏÏ "
)
ÏÏ" #
;
ÏÏ# $
}
ÌÌ 
catch
ÓÓ 
(
ÓÓ 
	Exception
ÓÓ 
e
ÓÓ 
)
ÓÓ 
{
ÔÔ 
return
 
Json
 
(
 
Util
  
.
  !
	ErrorJson
! *
(
* +
e
+ ,
)
, -
)
- .
;
. /
}
ÒÒ 
}
ÚÚ 	
}
¯¯ 
}˘˘ Œ
WD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\EscritorioController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public		 

class		  
EscritorioController		 %
:		& '
BaseController		( 6
{

 
public 
ActionResult 
Estadistica '
(' (
)( )
{ 	
try 
{ 
return 
View 
( 
) 
; 
} 
catch 
( 
	Exception 
e 
) 
{ 
throw 
e 
; 
} 
} 	
} 
} Ú«
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\MaestroController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
MaestroController "
:# $
BaseController% 3
{ 
private 
readonly 
IMaestroLogica '
maestroLogica( 5
;5 6
private 
new 
readonly 
IActorNegocioLogica 0
actorNegocioLogica1 C
;C D
private 
readonly 
IConceptoLogica (
conceptoLogica) 7
;7 8
private 
readonly 
IPermisos_Logica )
permisoLogica* 7
;7 8
public 
MaestroController  
(  !
)! "
{ 	
maestroLogica 
= 
Dependencia '
.' (
Resolve( /
</ 0
IMaestroLogica0 >
>> ?
(? @
)@ A
;A B
actorNegocioLogica 
=  
Dependencia! ,
., -
Resolve- 4
<4 5
IActorNegocioLogica5 H
>H I
(I J
)J K
;K L
conceptoLogica 
= 
Dependencia (
.( )
Resolve) 0
<0 1
IConceptoLogica1 @
>@ A
(A B
)B C
;C D
permisoLogica 
= 
Dependencia '
.' (
Resolve( /
</ 0
IPermisos_Logica0 @
>@ A
(A B
)B C
;C D
}   	
["" 	
	Authorize""	 
("" 
Roles"" 
="" 
$str"" 1
)""1 2
]""2 3
public## 
ActionResult## 
Index## !
(##! "
)##" #
{$$ 	
return%% 
View%% 
(%% 
)%% 
;%% 
}&& 	
[(( 	
	Authorize((	 
((( 
Roles(( 
=(( 
$str(( 1
)((1 2
]((2 3
public)) 
ActionResult)) 
Presentaciones)) *
())* +
)))+ ,
{** 	
ViewBag++ 
.++ )
idMaestroPresentacionConcepto++ 1
=++2 3
MaestroSettings++4 C
.++C D
Default++D K
.++K L)
IdMaestroPresentacionConcepto++L i
;++i j
return,, 
View,, 
(,, 
),, 
;,, 
}-- 	
public11 

JsonResult11 
GuardarMaestro11 (
(11( )
MaestroViewModel11) 9
maestro11: A
)11A B
{22 	
try33 
{44 
OperationResult55 
	resultado55  )
;55) *
if66 
(66 
maestro66 
.66 
Id66 
!=66 !
$num66" #
)66# $
{77 
	resultado88 
=88 
maestroLogica88  -
.88- .
actualizarMaestro88. ?
(88? @
maestro88@ G
.88G H
Id88H J
,88J K
maestro88L S
.88S T
Codigo88T Z
,88Z [
maestro88\ c
.88c d
Nombre88d j
)88j k
;88k l
}99 
else:: 
{;; 
	resultado<< 
=<< 
maestroLogica<<  -
.<<- .
guardarMaestro<<. <
(<<< =
maestro<<= D
.<<D E
Codigo<<E K
,<<K L
maestro<<M T
.<<T U
Nombre<<U [
)<<[ \
;<<\ ]
}== 
Util?? 
.?? 
VerificarError?? #
(??# $
	resultado??$ -
)??- .
;??. /
return@@ 
Json@@ 
(@@ 
new@@ 
{@@  !
	resultado@@" +
.@@+ ,
code_result@@, 7
,@@7 8
	resultado@@9 B
.@@B C
data@@C G
,@@G H
result_description@@I [
=@@\ ]
	resultado@@^ g
.@@g h
title@@h m
}@@n o
)@@o p
;@@p q
}AA 
catchBB 
(BB 
	ExceptionBB 
eBB 
)BB 
{CC 
returnDD 
JsonDD 
(DD 
UtilDD  
.DD  !
	ErrorJsonDD! *
(DD* +
eDD+ ,
)DD, -
)DD- .
;DD. /
}EE 
}FF 	
publicGG 

JsonResultGG !
GuardarDetalleMaestroGG /
(GG/ 0#
DetalleMaestroViewModelGG0 G
detalleGGH O
)GGO P
{HH 	
tryII 
{JJ 
OperationResultKK 
	resultadoKK  )
;KK) *
ifLL 
(LL 
detalleLL 
.LL 
IdLL 
!=LL !
$numLL" #
)LL# $
{MM 
	resultadoNN 
=NN 
maestroLogicaNN  -
.NN- .$
actualizarDetalleMaestroNN. F
(NNF G
detalleNNG N
.NNN O
IdNNO Q
,NNQ R
detalleNNS Z
.NNZ [
	IdMaestroNN[ d
,NNd e
detalleNNf m
.NNm n
CodigoNNn t
,NNt u
detalleNNv }
.NN} ~
Nombre	NN~ Ñ
,
NNÑ Ö
detalle
NNÜ ç
.
NNç é
Valor
NNé ì
)
NNì î
;
NNî ï
}OO 
elsePP 
{QQ 
	resultadoRR 
=RR 
maestroLogicaRR  -
.RR- .!
guardarDetalleMaestroRR. C
(RRC D
detalleRRD K
.RRK L
	IdMaestroRRL U
,RRU V
detalleRRW ^
.RR^ _
CodigoRR_ e
,RRe f
detalleRRg n
.RRn o
NombreRRo u
,RRu v
detalleRRw ~
.RR~ 
Valor	RR Ñ
)
RRÑ Ö
;
RRÖ Ü
}SS 
UtilUU 
.UU 
VerificarErrorUU #
(UU# $
	resultadoUU$ -
)UU- .
;UU. /
returnVV 
JsonVV 
(VV 
newVV 
{VV  !
	resultadoVV" +
.VV+ ,
code_resultVV, 7
,VV7 8
	resultadoVV9 B
.VVB C
dataVVC G
,VVG H
result_descriptionVVI [
=VV\ ]
	resultadoVV^ g
.VVg h
titleVVh m
}VVn o
)VVo p
;VVp q
}WW 
catchXX 
(XX 
	ExceptionXX 
eXX 
)XX 
{YY 
returnZZ 
JsonZZ 
(ZZ 
UtilZZ  
.ZZ  !
	ErrorJsonZZ! *
(ZZ* +
eZZ+ ,
)ZZ, -
)ZZ- .
;ZZ. /
}[[ 
}\\ 	
public]] 

JsonResult]] 
ListarMaestros]] (
(]]( )
)]]) *
{^^ 	
try__ 
{`` 
varaa 

resultadosaa 
=aa  
maestroLogicaaa! .
.aa. /
obtenerMaestrosaa/ >
(aa> ?
)aa? @
;aa@ A
Listbb 
<bb 
MaestroViewModelbb %
>bb% &
maestrosbb' /
=bb0 1
newbb2 5
Listbb6 :
<bb: ;
MaestroViewModelbb; K
>bbK L
(bbL M
)bbM N
;bbN O
foreachcc 
(cc 
varcc 
itemcc !
incc" $

resultadoscc% /
)cc/ 0
{dd 
maestrosee 
.ee 
Addee  
(ee  !
newee! $
MaestroViewModelee% 5
(ee5 6
itemee6 :
)ee: ;
)ee; <
;ee< =
}ff 
returngg 
Jsongg 
(gg 
maestrosgg $
)gg$ %
;gg% &
}hh 
catchii 
(ii 
	Exceptionii 
eii 
)ii 
{jj 
returnkk 
Jsonkk 
(kk 
Utilkk  
.kk  !
	ErrorJsonkk! *
(kk* +
ekk+ ,
)kk, -
)kk- .
;kk. /
}ll 
}mm 	
publicnn 
asyncnn 
Tasknn 
<nn 

JsonResultnn $
>nn$ %!
ListarDetallesMaestronn& ;
(nn; <
intnn< ?
	idMaestronn@ I
)nnI J
{oo 	
trypp 
{qq 
Listrr 
<rr 
Detalle_maestrorr $
>rr$ %

resultadosrr& 0
=rr1 2
awaitrr3 8
maestroLogicarr9 F
.rrF G(
ObtenerDetallesMaestrosAsyncrrG c
(rrc d
	idMaestrorrd m
)rrm n
;rrn o
Listss 
<ss #
DetalleMaestroViewModelss ,
>ss, -
detallesss. 6
=ss7 8
newss9 <
Listss= A
<ssA B#
DetalleMaestroViewModelssB Y
>ssY Z
(ssZ [
)ss[ \
;ss\ ]
foreachtt 
(tt 
vartt 
itemtt !
intt" $

resultadostt% /
)tt/ 0
{uu 
detallesvv 
.vv 
Addvv  
(vv  !
newvv! $#
DetalleMaestroViewModelvv% <
(vv< =
itemvv= A
)vvA B
)vvB C
;vvC D
}ww 
returnxx 
Jsonxx 
(xx 
detallesxx $
)xx$ %
;xx% &
}yy 
catchzz 
(zz 
	Exceptionzz 
ezz 
)zz 
{{{ 
return|| 
Json|| 
(|| 
Util||  
.||  !
	ErrorJson||! *
(||* +
e||+ ,
)||, -
)||- .
;||. /
}}} 
}~~ 	
public
ÇÇ 
async
ÇÇ 
Task
ÇÇ 
<
ÇÇ 

JsonResult
ÇÇ $
>
ÇÇ$ %'
ObtenerCategoriasConcepto
ÇÇ& ?
(
ÇÇ? @
)
ÇÇ@ A
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 
List
ÜÜ 
<
ÜÜ 
Detalle_maestro
ÜÜ $
>
ÜÜ$ %

resultados
ÜÜ& 0
=
ÜÜ1 2
await
ÜÜ3 8
maestroLogica
ÜÜ9 F
.
ÜÜF G
ObtenerCategorias
ÜÜG X
(
ÜÜX Y
)
ÜÜY Z
;
ÜÜZ [
List
áá 
<
áá #
ModeloBasicoViewModel
áá *
>
áá* +

categorias
áá, 6
=
áá7 8
new
áá9 <
List
áá= A
<
ááA B#
ModeloBasicoViewModel
ááB W
>
ááW X
(
ááX Y
)
ááY Z
;
ááZ [
foreach
ââ 
(
ââ 
var
ââ 
item
ââ !
in
ââ" $

resultados
ââ% /
)
ââ/ 0
{
ää 

categorias
ãã 
.
ãã 
Add
ãã "
(
ãã" #
new
ãã# &#
ModeloBasicoViewModel
ãã' <
(
ãã< =
item
ãã= A
.
ããA B
id
ããB D
,
ããD E
item
ããF J
.
ããJ K
nombre
ããK Q
)
ããQ R
)
ããR S
;
ããS T
}
åå 
return
çç 
Json
çç 
(
çç 

categorias
çç &
)
çç& '
;
çç' (
}
éé 
catch
èè 
(
èè 
	Exception
èè 
e
èè 
)
èè 
{
êê 
return
ëë 
Json
ëë 
(
ëë 
Util
ëë  
.
ëë  !
	ErrorJson
ëë! *
(
ëë* +
e
ëë+ ,
)
ëë, -
)
ëë- .
;
ëë. /
}
íí 
}
ìì 	
public
ïï 

JsonResult
ïï ,
ObtenerCaracteristicasConcepto
ïï 8
(
ïï8 9
)
ïï9 :
{
ññ 	
try
óó 
{
òò 
List
ôô 
<
ôô 
Detalle_maestro
ôô $
>
ôô$ %
detalles
ôô& .
=
ôô/ 0
conceptoLogica
ôô1 ?
.
ôô? @$
ObtenerCaracteristicas
ôô@ V
(
ôôV W
)
ôôW X
;
ôôX Y
List
öö 
<
öö %
CaracteristicaViewModel
öö ,
>
öö, -
caracteristicas
öö. =
=
öö> ?%
CaracteristicaViewModel
öö@ W
.
ööW X
Convert
ööX _
(
öö_ `
detalles
öö` h
)
ööh i
;
ööi j
return
õõ 
Json
õõ 
(
õõ 
caracteristicas
õõ +
)
õõ+ ,
;
õõ, -
}
úú 
catch
ùù 
(
ùù 
	Exception
ùù 
e
ùù 
)
ùù 
{
ûû 
return
üü 
Json
üü 
(
üü 
Util
üü  
.
üü  !
	ErrorJson
üü! *
(
üü* +
e
üü+ ,
)
üü, -
)
üü- .
;
üü. /
}
†† 
}
°° 	
public
££ 

JsonResult
££ 0
"ObtenerCaracteristicasParaConcepto
££ <
(
££< =
int
££= @

idConcepto
££A K
)
££K L
{
§§ 	
try
•• 
{
¶¶ 
Detalle_maestro
ßß 
concepto
ßß  (
=
ßß) *
conceptoLogica
ßß+ 9
.
ßß9 :\
MObtenerConceptoBasicoVigenteIncluyendonCaracteristicasYValoresCaracteristicasßß: á
(ßßá à

idConceptoßßà í
)ßßí ì
;ßßì î
List
®® 
<
®® -
CaracteristicaConceptoViewModel
®® 4
>
®®4 5
caracteristicas
®®6 E
=
®®F G-
CaracteristicaConceptoViewModel
®®H g
.
®®g h
Convert
®®h o
(
®®o p
concepto
®®p x
)
®®x y
;
®®y z
return
©© 
Json
©© 
(
©© 
caracteristicas
©© +
)
©©+ ,
;
©©, -
}
™™ 
catch
´´ 
(
´´ 
	Exception
´´ 
e
´´ 
)
´´ 
{
¨¨ 
return
≠≠ 
Json
≠≠ 
(
≠≠ 
Util
≠≠  
.
≠≠  !
	ErrorJson
≠≠! *
(
≠≠* +
e
≠≠+ ,
)
≠≠, -
)
≠≠- .
;
≠≠. /
}
ÆÆ 
}
ØØ 	
public
±± 
async
±± 
Task
±± 
<
±± 

JsonResult
±± $
>
±±$ %!
ObtenerMediosDePago
±±& 9
(
±±9 :
)
±±: ;
{
≤≤ 	
try
≥≥ 
{
¥¥ 
var
µµ 

resultados
µµ 
=
µµ  
await
µµ! &
maestroLogica
µµ' 4
.
µµ4 5!
ObtenerMediosDePago
µµ5 H
(
µµH I
)
µµI J
;
µµJ K
List
∂∂ 
<
∂∂ $
ComboGenericoViewModel
∂∂ +
>
∂∂+ ,
mediosDePago
∂∂- 9
=
∂∂: ;
new
∂∂< ?
List
∂∂@ D
<
∂∂D E$
ComboGenericoViewModel
∂∂E [
>
∂∂[ \
(
∂∂\ ]
)
∂∂] ^
;
∂∂^ _
foreach
∑∑ 
(
∑∑ 
var
∑∑ 
item
∑∑ !
in
∑∑" $

resultados
∑∑% /
)
∑∑/ 0
{
∏∏ 
mediosDePago
ππ  
.
ππ  !
Add
ππ! $
(
ππ$ %
new
ππ% ($
ComboGenericoViewModel
ππ) ?
(
ππ? @
item
ππ@ D
.
ππD E
id
ππE G
,
ππG H
item
ππI M
.
ππM N
nombre
ππN T
)
ππT U
)
ππU V
;
ππV W
}
∫∫ 
return
ªª 
Json
ªª 
(
ªª 
mediosDePago
ªª (
)
ªª( )
;
ªª) *
}
ºº 
catch
ΩΩ 
(
ΩΩ 
	Exception
ΩΩ 
e
ΩΩ 
)
ΩΩ 
{
ææ 
return
øø 
Json
øø 
(
øø 
Util
øø  
.
øø  !
	ErrorJson
øø! *
(
øø* +
e
øø+ ,
)
øø, -
)
øø- .
;
øø. /
}
¿¿ 
}
¡¡ 	
public
√√ 
async
√√ 
Task
√√ 
<
√√ 

JsonResult
√√ $
>
√√$ %)
ObtenerEntidadesFinancieras
√√& A
(
√√A B
)
√√B C
{
ƒƒ 	
try
≈≈ 
{
∆∆ 
var
«« 

resultados
«« 
=
««  
await
««! &
maestroLogica
««' 4
.
««4 5)
ObtenerEntidadesFinancieras
««5 P
(
««P Q
)
««Q R
;
««R S
List
»» 
<
»» $
ComboGenericoViewModel
»» +
>
»»+ ,"
entidadesFinancieras
»»- A
=
»»B C
new
»»D G
List
»»H L
<
»»L M$
ComboGenericoViewModel
»»M c
>
»»c d
(
»»d e
)
»»e f
;
»»f g
foreach
…… 
(
…… 
var
…… 
item
…… !
in
……" $

resultados
……% /
)
……/ 0
{
   "
entidadesFinancieras
ÀÀ (
.
ÀÀ( )
Add
ÀÀ) ,
(
ÀÀ, -
new
ÀÀ- 0$
ComboGenericoViewModel
ÀÀ1 G
(
ÀÀG H
item
ÀÀH L
.
ÀÀL M
id
ÀÀM O
,
ÀÀO P
item
ÀÀQ U
.
ÀÀU V
nombre
ÀÀV \
)
ÀÀ\ ]
)
ÀÀ] ^
;
ÀÀ^ _
}
ÃÃ 
return
ÕÕ 
Json
ÕÕ 
(
ÕÕ "
entidadesFinancieras
ÕÕ 0
)
ÕÕ0 1
;
ÕÕ1 2
}
ŒŒ 
catch
œœ 
(
œœ 
	Exception
œœ 
e
œœ 
)
œœ 
{
–– 
return
—— 
Json
—— 
(
—— 
Util
——  
.
——  !
	ErrorJson
——! *
(
——* +
e
——+ ,
)
——, -
)
——- .
;
——. /
}
““ 
}
”” 	
public
’’ 
async
’’ 
Task
’’ 
<
’’ 

JsonResult
’’ $
>
’’$ %
ObtenerMonedas
’’& 4
(
’’4 5
)
’’5 6
{
÷÷ 	
try
◊◊ 
{
ÿÿ 
var
ŸŸ 

resultados
ŸŸ 
=
ŸŸ  
await
ŸŸ! &
maestroLogica
ŸŸ' 4
.
ŸŸ4 5
ObtenerMonedas
ŸŸ5 C
(
ŸŸC D
)
ŸŸD E
;
ŸŸE F
List
⁄⁄ 
<
⁄⁄ $
ComboGenericoViewModel
⁄⁄ +
>
⁄⁄+ ,
monedas
⁄⁄- 4
=
⁄⁄5 6
new
⁄⁄7 :
List
⁄⁄; ?
<
⁄⁄? @$
ComboGenericoViewModel
⁄⁄@ V
>
⁄⁄V W
(
⁄⁄W X
)
⁄⁄X Y
;
⁄⁄Y Z
foreach
€€ 
(
€€ 
var
€€ 
item
€€ !
in
€€" $

resultados
€€% /
)
€€/ 0
{
‹‹ 
monedas
›› 
.
›› 
Add
›› 
(
››  
new
››  #$
ComboGenericoViewModel
››$ :
(
››: ;
item
››; ?
.
››? @
id
››@ B
,
››B C
item
››D H
.
››H I
nombre
››I O
)
››O P
)
››P Q
;
››Q R
}
ﬁﬁ 
return
ﬂﬂ 
Json
ﬂﬂ 
(
ﬂﬂ 
monedas
ﬂﬂ #
)
ﬂﬂ# $
;
ﬂﬂ$ %
}
‡‡ 
catch
·· 
(
·· 
	Exception
·· 
e
·· 
)
·· 
{
‚‚ 
return
„„ 
Json
„„ 
(
„„ 
Util
„„  
.
„„  !
	ErrorJson
„„! *
(
„„* +
e
„„+ ,
)
„„, -
)
„„- .
;
„„. /
}
‰‰ 
}
ÂÂ 	
public
ÁÁ 
async
ÁÁ 
Task
ÁÁ 
<
ÁÁ 

JsonResult
ÁÁ %
>
ÁÁ% &(
ObtenerTiposCuentaBancaria
ÁÁ' A
(
ÁÁA B
)
ÁÁB C
{
ËË 	
try
ÈÈ 
{
ÍÍ 
var
ÎÎ 

resultados
ÎÎ 
=
ÎÎ  
await
ÎÎ  %
maestroLogica
ÎÎ& 3
.
ÎÎ3 4(
ObtenerTiposCuentaBancaria
ÎÎ4 N
(
ÎÎN O
)
ÎÎO P
;
ÎÎP Q
List
ÏÏ 
<
ÏÏ $
ComboGenericoViewModel
ÏÏ +
>
ÏÏ+ ,
tipos
ÏÏ- 2
=
ÏÏ3 4
new
ÏÏ5 8
List
ÏÏ9 =
<
ÏÏ= >$
ComboGenericoViewModel
ÏÏ> T
>
ÏÏT U
(
ÏÏU V
)
ÏÏV W
;
ÏÏW X
foreach
ÌÌ 
(
ÌÌ 
var
ÌÌ 
item
ÌÌ !
in
ÌÌ" $

resultados
ÌÌ% /
)
ÌÌ/ 0
{
ÓÓ 
tipos
ÔÔ 
.
ÔÔ 
Add
ÔÔ 
(
ÔÔ 
new
ÔÔ !$
ComboGenericoViewModel
ÔÔ" 8
(
ÔÔ8 9
item
ÔÔ9 =
.
ÔÔ= >
id
ÔÔ> @
,
ÔÔ@ A
item
ÔÔB F
.
ÔÔF G
nombre
ÔÔG M
)
ÔÔM N
)
ÔÔN O
;
ÔÔO P
}
 
return
ÒÒ 
Json
ÒÒ 
(
ÒÒ 
tipos
ÒÒ !
)
ÒÒ! "
;
ÒÒ" #
}
ÚÚ 
catch
ÛÛ 
(
ÛÛ 
	Exception
ÛÛ 
e
ÛÛ 
)
ÛÛ 
{
ÙÙ 
return
ıı 
Json
ıı 
(
ıı 
Util
ıı  
.
ıı  !
	ErrorJson
ıı! *
(
ıı* +
e
ıı+ ,
)
ıı, -
)
ıı- .
;
ıı. /
}
ˆˆ 
}
˜˜ 	
public
¯¯ 
async
¯¯ 
Task
¯¯ 
<
¯¯ 

JsonResult
¯¯ %
>
¯¯% &
ObtenerEntidades
¯¯' 7
(
¯¯7 8
int
¯¯8 ;
idMedioDePago
¯¯< I
)
¯¯I J
{
˘˘ 	
try
˙˙ 
{
˚˚ 
var
¸¸ 
bancos
¸¸ 
=
¸¸ 
await
¸¸ "
maestroLogica
¸¸# 0
.
¸¸1 2)
ObtenerEntidadesFinancieras
¸¸2 M
(
¸¸M N
)
¸¸N O
;
¸¸O P
var
˝˝ 
tarjetas
˝˝ 
=
˝˝ 
await
˝˝ $
maestroLogica
˝˝% 2
.
˝˝2 3(
ObtenerOperadoresDeTarjeta
˝˝3 M
(
˝˝M N
)
˝˝N O
;
˝˝O P
List
ˇˇ 
<
ˇˇ 
ItemGenerico
ˇˇ !
>
ˇˇ! "
	entidades
ˇˇ# ,
=
ˇˇ- .
new
ˇˇ/ 2
List
ˇˇ3 7
<
ˇˇ7 8
ItemGenerico
ˇˇ8 D
>
ˇˇD E
(
ˇˇE F
)
ˇˇF G
;
ˇˇG H
foreach
ÄÄ 
(
ÄÄ 
var
ÄÄ 
item
ÄÄ !
in
ÄÄ" $
bancos
ÄÄ% +
)
ÄÄ+ ,
{
ÅÅ 
	entidades
ÇÇ 
.
ÇÇ 
Add
ÇÇ !
(
ÇÇ! "
new
ÇÇ" %
ItemGenerico
ÇÇ& 2
(
ÇÇ2 3
item
ÇÇ3 7
.
ÇÇ7 8
id
ÇÇ8 :
,
ÇÇ: ;
item
ÇÇ< @
.
ÇÇ@ A
nombre
ÇÇA G
)
ÇÇG H
)
ÇÇH I
;
ÇÇI J
}
ÉÉ 
foreach
ÑÑ 
(
ÑÑ 
var
ÑÑ 
item
ÑÑ !
in
ÑÑ" $
tarjetas
ÑÑ% -
)
ÑÑ- .
{
ÖÖ 
	entidades
ÜÜ 
.
ÜÜ 
Add
ÜÜ !
(
ÜÜ! "
new
ÜÜ" %
ItemGenerico
ÜÜ& 2
(
ÜÜ2 3
item
ÜÜ3 7
.
ÜÜ7 8
id
ÜÜ8 :
,
ÜÜ: ;
item
ÜÜ< @
.
ÜÜ@ A
nombre
ÜÜA G
)
ÜÜG H
)
ÜÜH I
;
ÜÜI J
}
áá 
return
àà 
Json
àà 
(
àà 
	entidades
àà %
)
àà% &
;
àà& '
}
ââ 
catch
ää 
(
ää 
	Exception
ää 
e
ää 
)
ää 
{
ãã 
return
åå 
Json
åå 
(
åå 
Util
åå  
.
åå  !
	ErrorJson
åå! *
(
åå* +
e
åå+ ,
)
åå, -
)
åå- .
;
åå. /
}
çç 
}
éé 	
public
èè 
async
èè 
Task
èè 
<
èè 

JsonResult
èè $
>
èè$ %(
ObtenerOperadoresDeTarjeta
èè& @
(
èè@ A
)
èèA B
{
êê 	
try
ëë 
{
íí 
var
ìì 

resultados
ìì 
=
ìì  
await
ìì! &
maestroLogica
ìì' 4
.
ìì4 5(
ObtenerOperadoresDeTarjeta
ìì5 O
(
ììO P
)
ììP Q
;
ììQ R
List
îî 
<
îî 
ItemGenerico
îî !
>
îî! "

operadores
îî# -
=
îî. /
new
îî0 3
List
îî4 8
<
îî8 9
ItemGenerico
îî9 E
>
îîE F
(
îîF G
)
îîG H
;
îîH I
foreach
ïï 
(
ïï 
var
ïï 
item
ïï !
in
ïï" $

resultados
ïï% /
)
ïï/ 0
{
ññ 

operadores
óó 
.
óó 
Add
óó "
(
óó" #
new
óó# &
ItemGenerico
óó' 3
(
óó3 4
item
óó4 8
.
óó8 9
id
óó9 ;
,
óó; <
item
óó= A
.
óóA B
nombre
óóB H
)
óóH I
)
óóI J
;
óóJ K
}
òò 
return
ôô 
Json
ôô 
(
ôô 

operadores
ôô &
)
ôô& '
;
ôô' (
}
öö 
catch
õõ 
(
õõ 
	Exception
õõ 
e
õõ 
)
õõ 
{
úú 
return
ùù 
Json
ùù 
(
ùù 
Util
ùù  
.
ùù  !
	ErrorJson
ùù! *
(
ùù* +
e
ùù+ ,
)
ùù, -
)
ùù- .
;
ùù. /
}
ûû 
}
üü 	
public
°° 
async
°° 
Task
°° 
<
°° 

JsonResult
°° %
>
°°% &'
ObtenerTiposDeComprobante
°°' @
(
°°@ A
)
°°A B
{
¢¢ 	
try
££ 
{
§§ 
List
•• 
<
•• 
Detalle_maestro
•• $
>
••$ %
comprobantes
••& 2
=
••3 4
await
••5 :
maestroLogica
••; H
.
••H I'
ObtenerTiposDeComprobante
••I b
(
••b c
MaestroSettings
••c r
.
••r s
Default
••s z
.
••z {!
IdMaestroDocumento••{ ç
)••ç é
;••é è
List
¶¶ 
<
¶¶ $
ComboGenericoViewModel
¶¶ +
>
¶¶+ ,
listaComprobantes
¶¶- >
=
¶¶? @
new
¶¶A D
List
¶¶E I
<
¶¶I J$
ComboGenericoViewModel
¶¶J `
>
¶¶` a
(
¶¶a b
)
¶¶b c
;
¶¶c d
foreach
ßß 
(
ßß 
var
ßß 
item
ßß !
in
ßß" $
comprobantes
ßß% 1
)
ßß1 2
{
®® 
listaComprobantes
©© %
.
©©% &
Add
©©& )
(
©©) *
new
©©* -$
ComboGenericoViewModel
©©. D
(
©©D E
item
©©E I
.
©©I J
id
©©J L
,
©©L M
item
©©N R
.
©©R S
nombre
©©S Y
)
©©Y Z
)
©©Z [
;
©©[ \
}
™™ 
return
´´ 
Json
´´ 
(
´´ 
listaComprobantes
´´ -
)
´´- .
;
´´. /
}
¨¨ 
catch
≠≠ 
(
≠≠ 
	Exception
≠≠ 
e
≠≠ 
)
≠≠ 
{
ÆÆ 
HttpContext
ØØ 
.
ØØ 
Response
ØØ $
.
ØØ$ %

StatusCode
ØØ% /
=
ØØ0 1
$num
ØØ2 5
;
ØØ5 6
return
∞∞ 
Json
∞∞ 
(
∞∞ 
Util
∞∞  
.
∞∞  !
	ErrorJson
∞∞! *
(
∞∞* +
e
∞∞+ ,
)
∞∞, -
)
∞∞- .
;
∞∞. /
}
±± 
}
≤≤ 	
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 

JsonResult
≥≥ %
>
≥≥% &(
ObtenerModalidadesTraslado
≥≥' A
(
≥≥A B
)
≥≥B C
{
¥¥ 	
try
µµ 
{
∂∂ 
var
∑∑ 

resultados
∑∑ 
=
∑∑  
await
∑∑! &
maestroLogica
∑∑' 4
.
∑∑4 5-
ObtenerModalidadesTrasladoAsync
∑∑5 T
(
∑∑T U
)
∑∑U V
;
∑∑V W
List
∏∏ 
<
∏∏ $
ComboGenericoViewModel
∏∏ +
>
∏∏+ , 
entidadesBancarias
∏∏- ?
=
∏∏@ A
new
∏∏B E
List
∏∏F J
<
∏∏J K$
ComboGenericoViewModel
∏∏K a
>
∏∏a b
(
∏∏b c
)
∏∏c d
;
∏∏d e
foreach
ππ 
(
ππ 
var
ππ 
item
ππ !
in
ππ" $

resultados
ππ% /
)
ππ/ 0
{
∫∫  
entidadesBancarias
ªª &
.
ªª& '
Add
ªª' *
(
ªª* +
new
ªª+ .$
ComboGenericoViewModel
ªª/ E
(
ªªE F
item
ªªF J
.
ªªJ K
id
ªªK M
,
ªªM N
item
ªªO S
.
ªªS T
nombre
ªªT Z
)
ªªZ [
)
ªª[ \
;
ªª\ ]
}
ºº 
return
ΩΩ 
Json
ΩΩ 
(
ΩΩ  
entidadesBancarias
ΩΩ .
)
ΩΩ. /
;
ΩΩ/ 0
}
ææ 
catch
øø 
(
øø 
	Exception
øø 
e
øø 
)
øø 
{
¿¿ 
return
¡¡ 
Json
¡¡ 
(
¡¡ 
Util
¡¡  
.
¡¡  !
	ErrorJson
¡¡! *
(
¡¡* +
e
¡¡+ ,
)
¡¡, -
)
¡¡- .
;
¡¡. /
}
¬¬ 
}
√√ 	
public
ƒƒ 
async
ƒƒ 
Task
ƒƒ 
<
ƒƒ 

JsonResult
ƒƒ $
>
ƒƒ$ %$
ObtenerMotivosTraslado
ƒƒ& <
(
ƒƒ< =
)
ƒƒ= >
{
≈≈ 	
try
∆∆ 
{
«« 
var
»» 

resultados
»» 
=
»»  
await
»»! &
maestroLogica
»»' 4
.
»»4 51
#ObtenerMotivosTrasladoVigentesAsync
»»5 X
(
»»X Y
)
»»Y Z
;
»»Z [
List
…… 
<
…… $
ComboGenericoViewModel
…… +
>
……+ ,
motivos
……- 4
=
……5 6
new
……7 :
List
……; ?
<
……? @$
ComboGenericoViewModel
……@ V
>
……V W
(
……W X
)
……X Y
;
……Y Z
foreach
   
(
   
var
   
item
   !
in
  " $

resultados
  % /
)
  / 0
{
ÀÀ 
motivos
ÃÃ 
.
ÃÃ 
Add
ÃÃ 
(
ÃÃ  
new
ÃÃ  #$
ComboGenericoViewModel
ÃÃ$ :
(
ÃÃ: ;
item
ÃÃ; ?
.
ÃÃ? @
id
ÃÃ@ B
,
ÃÃB C
item
ÃÃD H
.
ÃÃH I
nombre
ÃÃI O
)
ÃÃO P
)
ÃÃP Q
;
ÃÃQ R
}
ÕÕ 
return
ŒŒ 
Json
ŒŒ 
(
ŒŒ 
motivos
ŒŒ #
)
ŒŒ# $
;
ŒŒ$ %
}
œœ 
catch
–– 
(
–– 
	Exception
–– 
e
–– 
)
–– 
{
—— 
return
““ 
Json
““ 
(
““ 
Util
““  
.
““  !
	ErrorJson
““! *
(
““* +
e
““+ ,
)
““, -
)
““- .
;
““. /
}
”” 
}
‘‘ 	
public
÷÷ 
async
÷÷ 
Task
÷÷ 
<
÷÷ 

JsonResult
÷÷ $
>
÷÷$ %#
ObtenerMotivosDeViaje
÷÷& ;
(
÷÷; <
)
÷÷< =
{
◊◊ 	
try
ÿÿ 
{
ŸŸ 
var
⁄⁄ 

resultados
⁄⁄ 
=
⁄⁄  
await
⁄⁄! &
maestroLogica
⁄⁄' 4
.
⁄⁄4 5(
ObtenerMotivosDeViajeAsync
⁄⁄5 O
(
⁄⁄O P
)
⁄⁄P Q
;
⁄⁄Q R
List
€€ 
<
€€ $
ComboGenericoViewModel
€€ +
>
€€+ ,
motivos
€€- 4
=
€€5 6
new
€€7 :
List
€€; ?
<
€€? @$
ComboGenericoViewModel
€€@ V
>
€€V W
(
€€W X
)
€€X Y
;
€€Y Z
foreach
‹‹ 
(
‹‹ 
var
‹‹ 
item
‹‹ !
in
‹‹" $

resultados
‹‹% /
)
‹‹/ 0
{
›› 
motivos
ﬁﬁ 
.
ﬁﬁ 
Add
ﬁﬁ 
(
ﬁﬁ  
new
ﬁﬁ  #$
ComboGenericoViewModel
ﬁﬁ$ :
(
ﬁﬁ: ;
item
ﬁﬁ; ?
.
ﬁﬁ? @
id
ﬁﬁ@ B
,
ﬁﬁB C
item
ﬁﬁD H
.
ﬁﬁH I
nombre
ﬁﬁI O
)
ﬁﬁO P
)
ﬁﬁP Q
;
ﬁﬁQ R
}
ﬂﬂ 
return
‡‡ 
Json
‡‡ 
(
‡‡ 
motivos
‡‡ #
)
‡‡# $
;
‡‡$ %
}
·· 
catch
‚‚ 
(
‚‚ 
	Exception
‚‚ 
e
‚‚ 
)
‚‚ 
{
„„ 
return
‰‰ 
Json
‰‰ 
(
‰‰ 
Util
‰‰  
.
‰‰  !
	ErrorJson
‰‰! *
(
‰‰* +
e
‰‰+ ,
)
‰‰, -
)
‰‰- .
;
‰‰. /
}
ÂÂ 
}
ÊÊ 	
public
ËË 
async
ËË 
Task
ËË 
<
ËË 

JsonResult
ËË $
>
ËË$ % 
ObtenerTiposDeNota
ËË& 8
(
ËË8 9
bool
ËË9 = 
esParaNotaDeDebito
ËË> P
)
ËËP Q
{
ÈÈ 	
try
ÍÍ 
{
ÎÎ 
var
ÏÏ 

resultados
ÏÏ 
=
ÏÏ   
esParaNotaDeDebito
ÏÏ! 3
?
ÏÏ4 5
await
ÏÏ6 ;
maestroLogica
ÏÏ< I
.
ÏÏI J(
ObtenerTiposDeNotaDeDebito
ÏÏJ d
(
ÏÏd e
)
ÏÏe f
:
ÏÏg h
await
ÏÏi n
maestroLogica
ÏÏo |
.
ÏÏ} ~*
ObtenerTiposDeNotaDeCreditoÏÏ~ ô
(ÏÏô ö
)ÏÏö õ
;ÏÏõ ú
List
ÌÌ 
<
ÌÌ $
ComboGenericoViewModel
ÌÌ +
>
ÌÌ+ ,
tiposDeNota
ÌÌ- 8
=
ÌÌ9 :$
ComboGenericoViewModel
ÌÌ; Q
.
ÌÌQ R
Convert
ÌÌR Y
(
ÌÌY Z

resultados
ÌÌZ d
)
ÌÌd e
;
ÌÌe f
return
ÓÓ 
Json
ÓÓ 
(
ÓÓ 
tiposDeNota
ÓÓ '
)
ÓÓ' (
;
ÓÓ( )
}
ÔÔ 
catch
 
(
 
	Exception
 
e
 
)
 
{
ÒÒ 
return
ÚÚ 
Json
ÚÚ 
(
ÚÚ 
Util
ÚÚ  
.
ÚÚ  !
	ErrorJson
ÚÚ! *
(
ÚÚ* +
e
ÚÚ+ ,
)
ÚÚ, -
)
ÚÚ- .
;
ÚÚ. /
}
ÛÛ 
}
ÙÙ 	
public
ˆˆ 

JsonResult
ˆˆ 
ListarEmpleados
ˆˆ )
(
ˆˆ) *
)
ˆˆ* +
{
˜˜ 	
try
¯¯ 
{
˘˘ 
var
˙˙ 

resultados
˙˙ 
=
˙˙   
actorNegocioLogica
˙˙! 3
.
˙˙3 4&
ObtenerEmpleadosVigentes
˙˙4 L
(
˙˙L M
)
˙˙M N
;
˙˙N O
List
˚˚ 
<
˚˚ $
ComboGenericoViewModel
˚˚ +
>
˚˚+ ,
	empleados
˚˚- 6
=
˚˚7 8
new
˚˚9 <
List
˚˚= A
<
˚˚A B$
ComboGenericoViewModel
˚˚B X
>
˚˚X Y
(
˚˚Y Z
)
˚˚Z [
;
˚˚[ \
foreach
¸¸ 
(
¸¸ 
var
¸¸ 
item
¸¸ !
in
¸¸" $

resultados
¸¸% /
)
¸¸/ 0
{
˝˝ 
	empleados
˛˛ 
.
˛˛ 
Add
˛˛ !
(
˛˛! "
new
˛˛" %$
ComboGenericoViewModel
˛˛& <
(
˛˛< =
item
˛˛= A
.
˛˛A B
Id
˛˛B D
,
˛˛D E
item
˛˛F J
.
˛˛J K 
DocumentoIdentidad
˛˛K ]
+
˛˛^ _
$str
˛˛` e
+
˛˛f g
item
˛˛h l
.
˛˛l m
Nombres
˛˛m t
+
˛˛u v
$str
˛˛w z
+
˛˛{ |
item˛˛} Å
.˛˛Å Ç
ApellidoPaterno˛˛Ç ë
+˛˛í ì
$str˛˛î ó
+˛˛ò ô
item˛˛ö û
.˛˛û ü
ApellidoMaterno˛˛ü Æ
)˛˛Æ Ø
)˛˛Ø ∞
;˛˛∞ ±
}
ÄÄ 
return
ÅÅ 
Json
ÅÅ 
(
ÅÅ 
	empleados
ÅÅ %
)
ÅÅ% &
;
ÅÅ& '
}
ÇÇ 
catch
ÉÉ 
(
ÉÉ 
	Exception
ÉÉ 
e
ÉÉ 
)
ÉÉ 
{
ÑÑ 
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
Util
ÖÖ  
.
ÖÖ  !
	ErrorJson
ÖÖ! *
(
ÖÖ* +
e
ÖÖ+ ,
)
ÖÖ, -
)
ÖÖ- .
;
ÖÖ. /
}
ÜÜ 
}
áá 	
public
ââ 

JsonResult
ââ "
ObtenerDatosEmpleado
ââ .
(
ââ. /
int
ââ/ 2

idEmpleado
ââ3 =
)
ââ= >
{
ää 	
try
ãã 
{
åå 
var
çç 
	resultado
çç 
=
çç  
actorNegocioLogica
çç  2
.
çç2 3
ObtenerEmpleado
çç3 B
(
ççB C

idEmpleado
ççC M
)
ççM N
;
ççN O
return
èè 
Json
èè 
(
èè 
new
èè 
{
èè  !
nombreApellido
èè" 0
=
èè1 2
	resultado
èè3 <
.
èè< =
Nombres
èè= D
+
èèD E
$str
èèE H
+
èèH I
	resultado
èèI R
.
èèR S
ApellidoPaterno
èèS b
+
èèb c
$str
èèc f
+
èèf g
	resultado
èèg p
.
èèp q
ApellidoMaternoèèq Ä
,èèÄ Å
cargoèèÇ á
=èèà â
	resultadoèèä ì
.èèì î
cargoèèî ô
(èèô ö
)èèö õ
}èèõ ú
)èèú ù
;èèù û
}
êê 
catch
ëë 
(
ëë 
	Exception
ëë 
e
ëë 
)
ëë 
{
íí 
return
ìì 
Json
ìì 
(
ìì 
Util
ìì  
.
ìì  !
	ErrorJson
ìì! *
(
ìì* +
e
ìì+ ,
)
ìì, -
)
ìì- .
;
ìì. /
}
îî 
}
ïï 	
public
òò 
async
òò 
Task
òò 
<
òò 

JsonResult
òò %
>
òò% &0
"ListarTiposDeDocumentosDeIdentidad
òò' I
(
òòI J
)
òòJ K
{
ôô 	
try
öö 
{
õõ 
var
úú 

resultados
úú 
=
úú  
await
úú! &
maestroLogica
úú' 4
.
úú4 51
#ObtenerTiposDeDocumentosDeIdentidad
úú5 X
(
úúX Y
)
úúY Z
;
úúZ [
List
ùù 
<
ùù $
ComboGenericoViewModel
ùù +
>
ùù+ ,*
tiposDeDocuemntosDeIdentidad
ùù- I
=
ùùJ K
new
ùùL O
List
ùùP T
<
ùùT U$
ComboGenericoViewModel
ùùU k
>
ùùk l
(
ùùl m
)
ùùm n
;
ùùn o
foreach
ûû 
(
ûû 
var
ûû 
item
ûû !
in
ûû" $

resultados
ûû% /
)
ûû/ 0
{
üü *
tiposDeDocuemntosDeIdentidad
†† 0
.
††0 1
Add
††1 4
(
††4 5
new
††5 8$
ComboGenericoViewModel
††9 O
(
††O P
item
††P T
.
††T U
id
††U W
,
††W X
item
††Y ]
.
††] ^
nombre
††^ d
)
††d e
)
††e f
;
††f g
}
°° 
return
¢¢ 
Json
¢¢ 
(
¢¢ *
tiposDeDocuemntosDeIdentidad
¢¢ 8
)
¢¢8 9
;
¢¢9 :
}
££ 
catch
§§ 
(
§§ 
	Exception
§§ 
e
§§ 
)
§§ 
{
•• 
return
¶¶ 
Json
¶¶ 
(
¶¶ 
Util
¶¶  
.
¶¶  !
	ErrorJson
¶¶! *
(
¶¶* +
e
¶¶+ ,
)
¶¶, -
)
¶¶- .
;
¶¶. /
}
ßß 
}
®® 	
public
©© 

JsonResult
©© "
ListarUbigeoDistrito
©© .
(
©©. /
)
©©/ 0
{
™™ 	
try
´´ 
{
¨¨ 
List
≠≠ 
<
≠≠ 
Ubigeo
≠≠ 
>
≠≠ 

respuestas
≠≠ '
=
≠≠( )
maestroLogica
≠≠* 7
.
≠≠7 8#
obtenerUbigeoDistrito
≠≠8 M
(
≠≠M N
)
≠≠N O
;
≠≠O P
List
ÆÆ 
<
ÆÆ $
ComboGenericoViewModel
ÆÆ +
>
ÆÆ+ ,
ubigeos
ÆÆ- 4
=
ÆÆ5 6
new
ÆÆ7 :
List
ÆÆ; ?
<
ÆÆ? @$
ComboGenericoViewModel
ÆÆ@ V
>
ÆÆV W
(
ÆÆW X
)
ÆÆX Y
;
ÆÆY Z
foreach
ØØ 
(
ØØ 
var
ØØ 
item
ØØ !
in
ØØ" $

respuestas
ØØ% /
)
ØØ/ 0
{
∞∞ 
ubigeos
±± 
.
±± 
Add
±± 
(
±±  
new
±±  #$
ComboGenericoViewModel
±±$ :
(
±±: ;
item
±±; ?
.
±±? @
id
±±@ B
,
±±B C
item
±±D H
.
±±H I
descripcion_larga
±±I Z
)
±±Z [
)
±±[ \
;
±±\ ]
}
≤≤ 
return
≥≥ 
Json
≥≥ 
(
≥≥ 
ubigeos
≥≥ #
)
≥≥# $
;
≥≥$ %
}
¥¥ 
catch
µµ 
(
µµ 
	Exception
µµ 
e
µµ 
)
µµ 
{
∂∂ 
return
∑∑ 
Json
∑∑ 
(
∑∑ 
Util
∑∑  
.
∑∑  !
	ErrorJson
∑∑! *
(
∑∑* +
e
∑∑+ ,
)
∑∑, -
)
∑∑- .
;
∑∑. /
}
∏∏ 
}
ππ 	
public
∫∫ 

JsonResult
∫∫ "
ObtenerRolesPersonal
∫∫ .
(
∫∫. /
)
∫∫/ 0
{
ªª 	
try
ºº 
{
ΩΩ 
var
ææ 

resultados
ææ 
=
ææ   
actorNegocioLogica
ææ! 3
.
ææ3 4"
ObtenerRolesPersonal
ææ4 H
(
ææH I
)
ææI J
;
ææJ K
List
øø 
<
øø $
ComboGenericoViewModel
øø +
>
øø+ ,
roles
øø- 2
=
øø3 4
new
øø5 8
List
øø9 =
<
øø= >$
ComboGenericoViewModel
øø> T
>
øøT U
(
øøU V
)
øøV W
;
øøW X
foreach
¿¿ 
(
¿¿ 
var
¿¿ 
item
¿¿ !
in
¿¿" $

resultados
¿¿% /
)
¿¿/ 0
{
¡¡ 
roles
¬¬ 
.
¬¬ 
Add
¬¬ 
(
¬¬ 
new
¬¬ !$
ComboGenericoViewModel
¬¬" 8
(
¬¬8 9
item
¬¬9 =
.
¬¬= >
id
¬¬> @
,
¬¬@ A
item
¬¬B F
.
¬¬F G
nombre
¬¬G M
)
¬¬M N
)
¬¬N O
;
¬¬O P
}
√√ 
return
ƒƒ 
Json
ƒƒ 
(
ƒƒ 
roles
ƒƒ !
)
ƒƒ! "
;
ƒƒ" #
}
≈≈ 
catch
∆∆ 
(
∆∆ 
	Exception
∆∆ 
e
∆∆ 
)
∆∆ 
{
«« 
return
»» 
Json
»» 
(
»» 
Util
»»  
.
»»  !
	ErrorJson
»»! *
(
»»* +
e
»»+ ,
)
»», -
)
»»- .
;
»». /
}
…… 
}
   	
public
ÀÀ 
async
ÀÀ 
Task
ÀÀ 
<
ÀÀ 

JsonResult
ÀÀ %
>
ÀÀ% &
ListarTiposDeVia
ÀÀ' 7
(
ÀÀ7 8
)
ÀÀ8 9
{
ÃÃ 	
try
ÕÕ 
{
ŒŒ 
var
œœ 

resultados
œœ 
=
œœ  
await
œœ! &
maestroLogica
œœ' 4
.
œœ4 5
ObtenerTiposDeVia
œœ5 F
(
œœF G
)
œœG H
;
œœH I
List
–– 
<
–– $
ComboGenericoViewModel
–– +
>
––+ ,
roles
––- 2
=
––3 4
new
––5 8
List
––9 =
<
––= >$
ComboGenericoViewModel
––> T
>
––T U
(
––U V
)
––V W
;
––W X
foreach
—— 
(
—— 
var
—— 
item
—— !
in
——" $

resultados
——% /
)
——/ 0
{
““ 
roles
”” 
.
”” 
Add
”” 
(
”” 
new
”” !$
ComboGenericoViewModel
””" 8
(
””8 9
item
””9 =
.
””= >
id
””> @
,
””@ A
item
””B F
.
””F G
nombre
””G M
)
””M N
)
””N O
;
””O P
}
‘‘ 
return
’’ 
Json
’’ 
(
’’ 
roles
’’ !
)
’’! "
;
’’" #
}
÷÷ 
catch
◊◊ 
(
◊◊ 
	Exception
◊◊ 
e
◊◊ 
)
◊◊ 
{
ÿÿ 
return
ŸŸ 
Json
ŸŸ 
(
ŸŸ 
Util
ŸŸ  
.
ŸŸ  !
	ErrorJson
ŸŸ! *
(
ŸŸ* +
e
ŸŸ+ ,
)
ŸŸ, -
)
ŸŸ- .
;
ŸŸ. /
}
⁄⁄ 
}
€€ 	
public
›› 
async
›› 
Task
›› 
<
›› 

JsonResult
›› $
>
››$ %
ListarTiposDeZona
››& 7
(
››7 8
)
››8 9
{
ﬁﬁ 	
try
ﬂﬂ 
{
‡‡ 
var
·· 

resultados
·· 
=
··  
await
··! &
maestroLogica
··' 4
.
··5 6 
ObtenerTiposDeZona
··6 H
(
··H I
)
··I J
;
··J K
List
‚‚ 
<
‚‚ $
ComboGenericoViewModel
‚‚ +
>
‚‚+ ,
roles
‚‚- 2
=
‚‚3 4
new
‚‚5 8
List
‚‚9 =
<
‚‚= >$
ComboGenericoViewModel
‚‚> T
>
‚‚T U
(
‚‚U V
)
‚‚V W
;
‚‚W X
foreach
„„ 
(
„„ 
var
„„ 
item
„„ !
in
„„" $

resultados
„„% /
)
„„/ 0
{
‰‰ 
roles
ÂÂ 
.
ÂÂ 
Add
ÂÂ 
(
ÂÂ 
new
ÂÂ !$
ComboGenericoViewModel
ÂÂ" 8
(
ÂÂ8 9
item
ÂÂ9 =
.
ÂÂ= >
id
ÂÂ> @
,
ÂÂ@ A
item
ÂÂB F
.
ÂÂF G
nombre
ÂÂG M
)
ÂÂM N
)
ÂÂN O
;
ÂÂO P
}
ÊÊ 
return
ÁÁ 
Json
ÁÁ 
(
ÁÁ 
roles
ÁÁ !
)
ÁÁ! "
;
ÁÁ" #
}
ËË 
catch
ÈÈ 
(
ÈÈ 
	Exception
ÈÈ 
e
ÈÈ 
)
ÈÈ 
{
ÍÍ 
return
ÎÎ 
Json
ÎÎ 
(
ÎÎ 
Util
ÎÎ  
.
ÎÎ  !
	ErrorJson
ÎÎ! *
(
ÎÎ* +
e
ÎÎ+ ,
)
ÎÎ, -
)
ÎÎ- .
;
ÎÎ. /
}
ÏÏ 
}
ÌÌ 	
public
ÓÓ 
async
ÓÓ 
Task
ÓÓ 
<
ÓÓ 

JsonResult
ÓÓ $
>
ÓÓ$ %
ListarNaciones
ÓÓ& 4
(
ÓÓ4 5
)
ÓÓ5 6
{
ÔÔ 	
try
 
{
ÒÒ 
var
ÚÚ 

resultados
ÚÚ 
=
ÚÚ  
await
ÚÚ! &
maestroLogica
ÚÚ' 4
.
ÚÚ4 5
ObtenerNaciones
ÚÚ5 D
(
ÚÚD E
)
ÚÚE F
;
ÚÚF G
List
ÛÛ 
<
ÛÛ $
ComboGenericoViewModel
ÛÛ +
>
ÛÛ+ ,
roles
ÛÛ- 2
=
ÛÛ3 4
new
ÛÛ5 8
List
ÛÛ9 =
<
ÛÛ= >$
ComboGenericoViewModel
ÛÛ> T
>
ÛÛT U
(
ÛÛU V
)
ÛÛV W
;
ÛÛW X
foreach
ÙÙ 
(
ÙÙ 
var
ÙÙ 
item
ÙÙ !
in
ÙÙ" $

resultados
ÙÙ% /
)
ÙÙ/ 0
{
ıı 
roles
ˆˆ 
.
ˆˆ 
Add
ˆˆ 
(
ˆˆ 
new
ˆˆ !$
ComboGenericoViewModel
ˆˆ" 8
(
ˆˆ8 9
item
ˆˆ9 =
.
ˆˆ= >
id
ˆˆ> @
,
ˆˆ@ A
item
ˆˆB F
.
ˆˆF G
nombre
ˆˆG M
)
ˆˆM N
)
ˆˆN O
;
ˆˆO P
}
˜˜ 
return
¯¯ 
Json
¯¯ 
(
¯¯ 
roles
¯¯ !
)
¯¯! "
;
¯¯" #
}
˘˘ 
catch
˙˙ 
(
˙˙ 
	Exception
˙˙ 
e
˙˙ 
)
˙˙ 
{
˚˚ 
return
¸¸ 
Json
¸¸ 
(
¸¸ 
Util
¸¸  
.
¸¸  !
	ErrorJson
¸¸! *
(
¸¸* +
e
¸¸+ ,
)
¸¸, -
)
¸¸- .
;
¸¸. /
}
˝˝ 
}
˛˛ 	
public
ÄÄ 
async
ÄÄ 
Task
ÄÄ 
<
ÄÄ 

JsonResult
ÄÄ $
>
ÄÄ$ %$
ListarTiposDeDireccion
ÄÄ& <
(
ÄÄ< =
)
ÄÄ= >
{
ÅÅ 	
try
ÇÇ 
{
ÉÉ 
List
ÑÑ 
<
ÑÑ 
Detalle_maestro
ÑÑ $
>
ÑÑ$ %

resultados
ÑÑ& 0
=
ÑÑ1 2
await
ÑÑ3 8
maestroLogica
ÑÑ9 F
.
ÑÑG H%
ObtenerTiposDeDireccion
ÑÑH _
(
ÑÑ_ `
)
ÑÑ` a
;
ÑÑa b
List
ÖÖ 
<
ÖÖ $
ComboGenericoViewModel
ÖÖ +
>
ÖÖ+ ,
roles
ÖÖ- 2
=
ÖÖ3 4
new
ÖÖ5 8
List
ÖÖ9 =
<
ÖÖ= >$
ComboGenericoViewModel
ÖÖ> T
>
ÖÖT U
(
ÖÖU V
)
ÖÖV W
;
ÖÖW X
foreach
ÜÜ 
(
ÜÜ 
var
ÜÜ 
item
ÜÜ !
in
ÜÜ" $

resultados
ÜÜ% /
)
ÜÜ/ 0
{
áá 
roles
àà 
.
àà 
Add
àà 
(
àà 
new
àà !$
ComboGenericoViewModel
àà" 8
(
àà8 9
item
àà9 =
.
àà= >
id
àà> @
,
àà@ A
item
ààB F
.
ààF G
nombre
ààG M
)
ààM N
)
ààN O
;
ààO P
}
ââ 
return
ää 
Json
ää 
(
ää 
roles
ää !
)
ää! "
;
ää" #
}
ãã 
catch
åå 
(
åå 
	Exception
åå 
e
åå 
)
åå 
{
çç 
return
éé 
Json
éé 
(
éé 
Util
éé  
.
éé  !
	ErrorJson
éé! *
(
éé* +
e
éé+ ,
)
éé, -
)
éé- .
;
éé. /
}
èè 
}
êê 	
public
íí 

JsonResult
íí 
ObtenerTarifas
íí (
(
íí( )
)
íí) *
{
ìì 	
try
îî 
{
ïï 
var
ññ 

resultados
ññ 
=
ññ  
maestroLogica
ññ! .
.
ññ. /
obtenerTarifas
ññ/ =
(
ññ= >
)
ññ> ?
;
ññ? @
List
óó 
<
óó $
ComboGenericoViewModel
óó +
>
óó+ ,
roles
óó- 2
=
óó3 4
new
óó5 8
List
óó9 =
<
óó= >$
ComboGenericoViewModel
óó> T
>
óóT U
(
óóU V
)
óóV W
;
óóW X
foreach
òò 
(
òò 
var
òò 
item
òò !
in
òò" $

resultados
òò% /
)
òò/ 0
{
ôô 
roles
öö 
.
öö 
Add
öö 
(
öö 
new
öö !$
ComboGenericoViewModel
öö" 8
(
öö8 9
item
öö9 =
.
öö= >
id
öö> @
,
öö@ A
item
ööB F
.
ööF G
nombre
ööG M
)
ööM N
)
ööN O
;
ööO P
}
õõ 
return
úú 
Json
úú 
(
úú 
roles
úú !
)
úú! "
;
úú" #
}
ùù 
catch
ûû 
(
ûû 
	Exception
ûû 
e
ûû 
)
ûû 
{
üü 
return
†† 
Json
†† 
(
†† 
Util
††  
.
††  !
	ErrorJson
††! *
(
††* +
e
††+ ,
)
††, -
)
††- .
;
††. /
}
°° 
}
¢¢ 	
public
¶¶ 

JsonResult
¶¶ %
ObtenerFamiliasVigentes
¶¶ 1
(
¶¶1 2
)
¶¶2 3
{
ßß 	
try
®® 
{
©© 
List
™™ 
<
™™ (
Familia_Concepto_Comercial
™™ /
>
™™/ 0
	resultado
™™1 :
=
™™; <
maestroLogica
™™= J
.
™™J K%
ObtenerFamiliasVigentes
™™K b
(
™™b c
)
™™c d
;
™™d e
return
´´ 
Json
´´ 
(
´´ 
	resultado
´´ %
)
´´% &
;
´´& '
}
¨¨ 
catch
≠≠ 
(
≠≠ 
	Exception
≠≠ 
e
≠≠ 
)
≠≠ 
{
ÆÆ 
return
ØØ 
Json
ØØ 
(
ØØ 
Util
ØØ  
.
ØØ  !
	ErrorJson
ØØ! *
(
ØØ* +
e
ØØ+ ,
)
ØØ, -
)
ØØ- .
;
ØØ. /
}
∞∞ 
}
±± 	
public
≥≥ 

JsonResult
≥≥ @
2ObtenerFamiliasVigentesPorModoSeleccionTipoFamilia
≥≥ L
(
≥≥L M
int
≥≥M P&
modoSeleccionTipoFamilia
≥≥Q i
)
≥≥i j
{
¥¥ 	
try
µµ 
{
∂∂ 
List
∑∑ 
<
∑∑ (
Familia_Concepto_Comercial
∑∑ /
>
∑∑/ 0
	resultado
∑∑1 :
=
∑∑; <
maestroLogica
∑∑= J
.
∑∑J K%
ObtenerFamiliasVigentes
∑∑K b
(
∑∑b c&
modoSeleccionTipoFamilia
∑∑c {
)
∑∑{ |
;
∑∑| }
return
∏∏ 
Json
∏∏ 
(
∏∏ 
	resultado
∏∏ %
)
∏∏% &
;
∏∏& '
}
ππ 
catch
∫∫ 
(
∫∫ 
	Exception
∫∫ 
e
∫∫ 
)
∫∫ 
{
ªª 
return
ºº 
Json
ºº 
(
ºº 
Util
ºº  
.
ºº  !
	ErrorJson
ºº! *
(
ºº* +
e
ºº+ ,
)
ºº, -
)
ºº- .
;
ºº. /
}
ΩΩ 
}
ææ 	
public
¿¿ 

JsonResult
¿¿ 9
+ObtenerFamiliasConceptosComercialesVigentes
¿¿ E
(
¿¿E F
)
¿¿F G
{
¡¡ 	
try
¬¬ 
{
√√ 
List
ƒƒ 
<
ƒƒ (
Familia_Concepto_Comercial
ƒƒ /
>
ƒƒ/ 0
	resultado
ƒƒ1 :
=
ƒƒ; <
maestroLogica
ƒƒ= J
.
ƒƒJ K9
+ObtenerFamiliasConceptosComercialesVigentes
ƒƒK v
(
ƒƒv w
)
ƒƒw x
;
ƒƒx y
return
≈≈ 
Json
≈≈ 
(
≈≈ 
	resultado
≈≈ %
)
≈≈% &
;
≈≈& '
}
∆∆ 
catch
«« 
(
«« 
	Exception
«« 
e
«« 
)
«« 
{
»» 
return
…… 
Json
…… 
(
…… 
Util
……  
.
……  !
	ErrorJson
……! *
(
……* +
e
……+ ,
)
……, -
)
……- .
;
……. /
}
   
}
ÀÀ 	
public
ÃÃ 

JsonResult
ÃÃ T
FObtenerFamiliasConceptosComercialesVigentesPorModoSeleccionTipoFamilia
ÃÃ `
(
ÃÃ` a
int
ÃÃa d&
modoSeleccionTipoFamilia
ÃÃe }
)
ÃÃ} ~
{
ÕÕ 	
try
ŒŒ 
{
œœ 
List
–– 
<
–– (
Familia_Concepto_Comercial
–– /
>
––/ 0
	resultado
––1 :
=
––; <
maestroLogica
––= J
.
––J K9
+ObtenerFamiliasConceptosComercialesVigentes
––K v
(
––v w'
modoSeleccionTipoFamilia––w è
)––è ê
;––ê ë
return
—— 
Json
—— 
(
—— 
	resultado
—— %
)
——% &
;
——& '
}
““ 
catch
”” 
(
”” 
	Exception
”” 
e
”” 
)
”” 
{
‘‘ 
return
’’ 
Json
’’ 
(
’’ 
Util
’’  
.
’’  !
	ErrorJson
’’! *
(
’’* +
e
’’+ ,
)
’’, -
)
’’- .
;
’’. /
}
÷÷ 
}
◊◊ 	
public
ŸŸ 

JsonResult
ŸŸ +
ObtenerConceptosDeCompraVenta
ŸŸ 7
(
ŸŸ7 8
)
ŸŸ8 9
{
⁄⁄ 	
try
€€ 
{
‹‹ 
List
›› 
<
›› 
Detalle_maestro
›› $
>
››$ %

resultados
››& 0
=
››1 2
maestroLogica
››3 @
.
››@ A3
%ObtenerConceptosVigentesDeCompraVenta
››A f
(
››f g
)
››g h
;
››h i
List
ﬁﬁ 
<
ﬁﬁ $
ComboGenericoViewModel
ﬁﬁ +
>
ﬁﬁ+ ,
	conceptos
ﬁﬁ- 6
=
ﬁﬁ7 8
new
ﬁﬁ9 <
List
ﬁﬁ= A
<
ﬁﬁA B$
ComboGenericoViewModel
ﬁﬁB X
>
ﬁﬁX Y
(
ﬁﬁY Z
)
ﬁﬁZ [
;
ﬁﬁ[ \
foreach
‡‡ 
(
‡‡ 
var
‡‡ 
item
‡‡ !
in
‡‡" $

resultados
‡‡% /
)
‡‡/ 0
{
·· 
	conceptos
‚‚ 
.
‚‚ 
Add
‚‚ !
(
‚‚! "
new
‚‚" %$
ComboGenericoViewModel
‚‚& <
(
‚‚< =
item
‚‚= A
.
‚‚A B
id
‚‚B D
,
‚‚D E
item
‚‚F J
.
‚‚J K
nombre
‚‚K Q
)
‚‚Q R
)
‚‚R S
;
‚‚S T
}
„„ 
return
‰‰ 
Json
‰‰ 
(
‰‰ 
	conceptos
‰‰ %
)
‰‰% &
;
‰‰& '
}
ÂÂ 
catch
ÊÊ 
(
ÊÊ 
	Exception
ÊÊ 
e
ÊÊ 
)
ÊÊ 
{
ÁÁ 
return
ËË 
Json
ËË 
(
ËË 
Util
ËË  
.
ËË  !
	ErrorJson
ËË! *
(
ËË* +
e
ËË+ ,
)
ËË, -
)
ËË- .
;
ËË. /
}
ÈÈ 
}
ÍÍ 	
public
ÏÏ 

JsonResult
ÏÏ -
ObtenerConceptosDeConceptoGasto
ÏÏ 9
(
ÏÏ9 :
)
ÏÏ: ;
{
ÌÌ 	
try
ÓÓ 
{
ÔÔ 
List
 
<
 
Detalle_maestro
 $
>
$ %
detalles
& .
=
/ 0
conceptoLogica
1 ?
.
? @,
ObtenerConceptosBasicosDeGasto
@ ^
(
^ _
)
_ `
;
` a
List
ÒÒ 
<
ÒÒ $
ComboGenericoViewModel
ÒÒ +
>
ÒÒ+ ,
	conceptos
ÒÒ- 6
=
ÒÒ7 8$
ComboGenericoViewModel
ÒÒ9 O
.
ÒÒO P
Convert
ÒÒP W
(
ÒÒW X
detalles
ÒÒX `
)
ÒÒ` a
;
ÒÒa b
return
ÚÚ 
Json
ÚÚ 
(
ÚÚ 
	conceptos
ÚÚ %
)
ÚÚ% &
;
ÚÚ& '
}
ÛÛ 
catch
ÙÙ 
(
ÙÙ 
	Exception
ÙÙ 
e
ÙÙ 
)
ÙÙ 
{
ıı 
return
ˆˆ 
Json
ˆˆ 
(
ˆˆ 
Util
ˆˆ  
.
ˆˆ  !
	ErrorJson
ˆˆ! *
(
ˆˆ* +
e
ˆˆ+ ,
)
ˆˆ, -
)
ˆˆ- .
;
ˆˆ. /
}
˜˜ 
}
¯¯ 	
public
˙˙ 

JsonResult
˙˙ %
ObtenerConceptosBasicos
˙˙ 1
(
˙˙1 2
)
˙˙2 3
{
˚˚ 	
try
¸¸ 
{
˝˝ 
List
˛˛ 
<
˛˛ 
Detalle_maestro
˛˛ $
>
˛˛$ %

resultados
˛˛& 0
=
˛˛1 2
maestroLogica
˛˛3 @
.
˛˛@ A&
ObtenerConceptosVigentes
˛˛A Y
(
˛˛Y Z
)
˛˛Z [
;
˛˛[ \
List
ˇˇ 
<
ˇˇ $
ComboGenericoViewModel
ˇˇ +
>
ˇˇ+ ,'
conceptosBasicosViewModel
ˇˇ- F
=
ˇˇG H$
ComboGenericoViewModel
ˇˇI _
.
ˇˇ_ `
Convert
ˇˇ` g
(
ˇˇg h

resultados
ˇˇh r
)
ˇˇr s
.
ˇˇs t
ToList
ˇˇt z
(
ˇˇz {
)
ˇˇ{ |
;
ˇˇ| }
return
ÅÅ 
Json
ÅÅ 
(
ÅÅ '
conceptosBasicosViewModel
ÅÅ 5
)
ÅÅ5 6
;
ÅÅ6 7
}
ÇÇ 
catch
ÉÉ 
(
ÉÉ 
	Exception
ÉÉ 
e
ÉÉ 
)
ÉÉ 
{
ÑÑ 
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
Util
ÖÖ  
.
ÖÖ  !
	ErrorJson
ÖÖ! *
(
ÖÖ* +
e
ÖÖ+ ,
)
ÖÖ, -
)
ÖÖ- .
;
ÖÖ. /
}
ÜÜ 
}
áá 	
public
ââ 

JsonResult
ââ -
ObtenerConceptosBasicosServicio
ââ 9
(
ââ9 :
)
ââ: ;
{
ää 	
try
ãã 
{
åå 
List
çç 
<
çç 
Detalle_maestro
çç $
>
çç$ %

resultados
çç& 0
=
çç1 2
maestroLogica
çç3 @
.
çç@ A.
 ObtenerConceptosServicioVigentes
ççA a
(
çça b
)
ççb c
;
ççc d
List
éé 
<
éé $
ComboGenericoViewModel
éé +
>
éé+ ,'
conceptosBasicosViewModel
éé- F
=
ééG H$
ComboGenericoViewModel
ééI _
.
éé_ `
Convert
éé` g
(
éég h

resultados
ééh r
)
éér s
.
éés t
ToList
éét z
(
ééz {
)
éé{ |
;
éé| }
return
êê 
Json
êê 
(
êê '
conceptosBasicosViewModel
êê 5
)
êê5 6
;
êê6 7
}
ëë 
catch
íí 
(
íí 
	Exception
íí 
e
íí 
)
íí 
{
ìì 
return
îî 
Json
îî 
(
îî 
Util
îî  
.
îî  !
	ErrorJson
îî! *
(
îî* +
e
îî+ ,
)
îî, -
)
îî- .
;
îî. /
}
ïï 
}
ññ 	
public
òò 
async
òò 
Task
òò 
<
òò 

JsonResult
òò $
>
òò$ %*
ListarConceptosPagoEmpleados
òò% A
(
òòA B
)
òòB C
{
ôô 	
try
öö 
{
õõ 
List
úú 
<
úú 
Detalle_maestro
úú $
>
úú$ %

resultados
úú& 0
=
úú1 2
await
úú3 8
maestroLogica
úú9 F
.
úúF G+
ObtenerConceptosPagoEmpleados
úúG d
(
úúd e
)
úúe f
;
úúf g
List
ùù 
<
ùù $
ComboGenericoViewModel
ùù +
>
ùù+ ,
	conceptos
ùù- 6
=
ùù7 8
new
ùù9 <
List
ùù= A
<
ùùA B$
ComboGenericoViewModel
ùùB X
>
ùùX Y
(
ùùY Z
)
ùùZ [
;
ùù[ \
foreach
üü 
(
üü 
var
üü 
item
üü !
in
üü" $

resultados
üü% /
)
üü/ 0
{
†† 
	conceptos
°° 
.
°° 
Add
°° !
(
°°! "
new
°°" %$
ComboGenericoViewModel
°°& <
(
°°< =
item
°°= A
.
°°A B
id
°°B D
,
°°D E
item
°°F J
.
°°J K
nombre
°°K Q
)
°°Q R
)
°°R S
;
°°S T
}
¢¢ 
return
££ 
Json
££ 
(
££ 
	conceptos
££ %
)
££% &
;
££& '
}
§§ 
catch
•• 
(
•• 
	Exception
•• 
e
•• 
)
•• 
{
¶¶ 
return
ßß 
Json
ßß 
(
ßß 
Util
ßß  
.
ßß  !
	ErrorJson
ßß! *
(
ßß* +
e
ßß+ ,
)
ßß, -
)
ßß- .
;
ßß. /
}
®® 
}
©© 	
public
¨¨ 
async
¨¨ 
Task
¨¨ 
<
¨¨ 

JsonResult
¨¨ $
>
¨¨$ %*
ObtenerTiposServicioImpuesto
¨¨& B
(
¨¨B C
)
¨¨C D
{
≠≠ 	
try
ÆÆ 
{
ØØ 
List
∞∞ 
<
∞∞ 
Detalle_maestro
∞∞ $
>
∞∞$ %

resultados
∞∞& 0
=
∞∞1 2
await
∞∞3 8
maestroLogica
∞∞9 F
.
∞∞F G*
ObtenerTiposServicioImpuesto
∞∞G c
(
∞∞c d
)
∞∞d e
;
∞∞e f
List
±± 
<
±± $
ComboGenericoViewModel
±± +
>
±±+ ,
	conceptos
±±- 6
=
±±7 8
new
±±9 <
List
±±= A
<
±±A B$
ComboGenericoViewModel
±±B X
>
±±X Y
(
±±Y Z
)
±±Z [
;
±±[ \
foreach
≥≥ 
(
≥≥ 
var
≥≥ 
item
≥≥ !
in
≥≥" $

resultados
≥≥% /
)
≥≥/ 0
{
¥¥ 
	conceptos
µµ 
.
µµ 
Add
µµ !
(
µµ! "
new
µµ" %$
ComboGenericoViewModel
µµ& <
(
µµ< =
item
µµ= A
.
µµA B
id
µµB D
,
µµD E
item
µµF J
.
µµJ K
nombre
µµK Q
)
µµQ R
)
µµR S
;
µµS T
}
∂∂ 
return
∑∑ 
Json
∑∑ 
(
∑∑ 
	conceptos
∑∑ %
)
∑∑% &
;
∑∑& '
}
∏∏ 
catch
ππ 
(
ππ 
	Exception
ππ 
e
ππ 
)
ππ 
{
∫∫ 
return
ªª 
Json
ªª 
(
ªª 
Util
ªª  
.
ªª  !
	ErrorJson
ªª! *
(
ªª* +
e
ªª+ ,
)
ªª, -
)
ªª- .
;
ªª. /
}
ºº 
}
ΩΩ 	
public
¬¬ 

JsonResult
¬¬ 
ObtenerTercero
¬¬ (
(
¬¬( )
int
¬¬) ,
id
¬¬- /
)
¬¬/ 0
{
√√ 	
try
ƒƒ 
{
≈≈ 
ActorComercial
∆∆ 
tercero
∆∆ &
=
∆∆' ( 
actorNegocioLogica
∆∆) ;
.
∆∆; <#
ObtenerActorComercial
∆∆< Q
(
∆∆Q R
id
∆∆R T
)
∆∆T U
;
∆∆U V
return
«« 
Json
«« 
(
«« 
new
«« *
ComboActorComercialViewModel
««  <
(
««< =
tercero
««= D
.
««D E
Id
««E G
,
««G H
tercero
««I P
.
««P Q
RazonSocial
««Q \
,
««\ ]
tercero
««^ e
.
««e f 
DocumentoIdentidad
««f x
)
««x y
)
««y z
;
««z {
}
»» 
catch
…… 
(
…… 
	Exception
…… 
e
…… 
)
…… 
{
   
return
ÀÀ 
Json
ÀÀ 
(
ÀÀ 
Util
ÀÀ  
.
ÀÀ  !
	ErrorJson
ÀÀ! *
(
ÀÀ* +
e
ÀÀ+ ,
)
ÀÀ, -
)
ÀÀ- .
;
ÀÀ. /
}
ÃÃ 
}
ÕÕ 	
public
œœ 
async
œœ 
Task
œœ 
<
œœ 

JsonResult
œœ $
>
œœ$ %*
ObtenerTiposProductoDeCompra
œœ& B
(
œœB C
)
œœC D
{
–– 	
try
—— 
{
““ 
List
”” 
<
”” 
Detalle_maestro
”” $
>
””$ %

resultados
””& 0
=
””1 2
await
””3 8
maestroLogica
””9 F
.
””G H*
ObtenerTiposProductoDeCompra
””H d
(
””d e
)
””e f
;
””f g
List
‘‘ 
<
‘‘ $
ComboGenericoViewModel
‘‘ +
>
‘‘+ ,
	conceptos
‘‘- 6
=
‘‘7 8
new
‘‘9 <
List
‘‘= A
<
‘‘A B$
ComboGenericoViewModel
‘‘B X
>
‘‘X Y
(
‘‘Y Z
)
‘‘Z [
;
‘‘[ \
foreach
÷÷ 
(
÷÷ 
var
÷÷ 
item
÷÷ !
in
÷÷" $

resultados
÷÷% /
)
÷÷/ 0
{
◊◊ 
	conceptos
ÿÿ 
.
ÿÿ 
Add
ÿÿ !
(
ÿÿ! "
new
ÿÿ" %$
ComboGenericoViewModel
ÿÿ& <
(
ÿÿ< =
item
ÿÿ= A
.
ÿÿA B
id
ÿÿB D
,
ÿÿD E
item
ÿÿF J
.
ÿÿJ K
nombre
ÿÿK Q
)
ÿÿQ R
)
ÿÿR S
;
ÿÿS T
}
ŸŸ 
return
⁄⁄ 
Json
⁄⁄ 
(
⁄⁄ 
	conceptos
⁄⁄ %
)
⁄⁄% &
;
⁄⁄& '
}
€€ 
catch
‹‹ 
(
‹‹ 
	Exception
‹‹ 
e
‹‹ 
)
‹‹ 
{
›› 
return
ﬁﬁ 
Json
ﬁﬁ 
(
ﬁﬁ 
Util
ﬁﬁ  
.
ﬁﬁ  !
	ErrorJson
ﬁﬁ! *
(
ﬁﬁ* +
e
ﬁﬁ+ ,
)
ﬁﬁ, -
)
ﬁﬁ- .
;
ﬁﬁ. /
}
ﬂﬂ 
}
‡‡ 	
public
‚‚ 
async
‚‚ 
Task
‚‚ 
<
‚‚ 

JsonResult
‚‚ %
>
‚‚% &
ObtenerTiposBien
‚‚' 7
(
‚‚7 8
)
‚‚8 9
{
„„ 	
try
‰‰ 
{
ÂÂ 
List
ÊÊ 
<
ÊÊ 
Detalle_maestro
ÊÊ $
>
ÊÊ$ %

resultados
ÊÊ& 0
=
ÊÊ1 2
await
ÊÊ3 8
maestroLogica
ÊÊ9 F
.
ÊÊG H
ObtenerTiposBien
ÊÊH X
(
ÊÊX Y
)
ÊÊY Z
;
ÊÊZ [
List
ÁÁ 
<
ÁÁ $
ComboGenericoViewModel
ÁÁ +
>
ÁÁ+ ,
	conceptos
ÁÁ- 6
=
ÁÁ7 8
new
ÁÁ9 <
List
ÁÁ= A
<
ÁÁA B$
ComboGenericoViewModel
ÁÁB X
>
ÁÁX Y
(
ÁÁY Z
)
ÁÁZ [
;
ÁÁ[ \
foreach
ÈÈ 
(
ÈÈ 
var
ÈÈ 
item
ÈÈ !
in
ÈÈ" $

resultados
ÈÈ% /
)
ÈÈ/ 0
{
ÍÍ 
	conceptos
ÎÎ 
.
ÎÎ 
Add
ÎÎ !
(
ÎÎ! "
new
ÎÎ" %$
ComboGenericoViewModel
ÎÎ& <
(
ÎÎ< =
item
ÎÎ= A
.
ÎÎA B
id
ÎÎB D
,
ÎÎD E
item
ÎÎF J
.
ÎÎJ K
nombre
ÎÎK Q
)
ÎÎQ R
)
ÎÎR S
;
ÎÎS T
}
ÏÏ 
return
ÌÌ 
Json
ÌÌ 
(
ÌÌ 
	conceptos
ÌÌ %
)
ÌÌ% &
;
ÌÌ& '
}
ÓÓ 
catch
ÔÔ 
(
ÔÔ 
	Exception
ÔÔ 
e
ÔÔ 
)
ÔÔ 
{
 
return
ÒÒ 
Json
ÒÒ 
(
ÒÒ 
Util
ÒÒ  
.
ÒÒ  !
	ErrorJson
ÒÒ! *
(
ÒÒ* +
e
ÒÒ+ ,
)
ÒÒ, -
)
ÒÒ- .
;
ÒÒ. /
}
ÚÚ 
}
ÛÛ 	
public
ıı 

JsonResult
ıı 
ListarMarcas
ıı &
(
ıı& '
int
ıı' *

IdArticulo
ıı+ 5
)
ıı5 6
{
ˆˆ 	
try
˜˜ 
{
¯¯ 
List
˘˘ 
<
˘˘ 
Detalle_maestro
˘˘ $
>
˘˘$ %

resultados
˘˘& 0
=
˘˘1 2
maestroLogica
˘˘3 @
.
˘˘@ A
obtenerMarcas
˘˘A N
(
˘˘N O

IdArticulo
˘˘O Y
)
˘˘Y Z
;
˘˘Z [
List
˙˙ 
<
˙˙ $
ComboGenericoViewModel
˙˙ +
>
˙˙+ ,
	articulos
˙˙- 6
=
˙˙7 8
new
˙˙9 <
List
˙˙= A
<
˙˙A B$
ComboGenericoViewModel
˙˙B X
>
˙˙X Y
(
˙˙Y Z
)
˙˙Z [
;
˙˙[ \
foreach
¸¸ 
(
¸¸ 
var
¸¸ 
item
¸¸ !
in
¸¸" $

resultados
¸¸% /
)
¸¸/ 0
{
˝˝ 
	articulos
˛˛ 
.
˛˛ 
Add
˛˛ !
(
˛˛! "
new
˛˛" %$
ComboGenericoViewModel
˛˛& <
(
˛˛< =
item
˛˛= A
.
˛˛A B
id
˛˛B D
,
˛˛D E
item
˛˛F J
.
˛˛J K
nombre
˛˛K Q
)
˛˛Q R
)
˛˛R S
;
˛˛S T
}
ˇˇ 
return
ÄÄ 
Json
ÄÄ 
(
ÄÄ 
	articulos
ÄÄ %
)
ÄÄ% &
;
ÄÄ& '
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
e
ÇÇ 
)
ÇÇ 
{
ÉÉ 
return
ÑÑ 
Json
ÑÑ 
(
ÑÑ 
Util
ÑÑ  
.
ÑÑ  !
	ErrorJson
ÑÑ! *
(
ÑÑ* +
e
ÑÑ+ ,
)
ÑÑ, -
)
ÑÑ- .
;
ÑÑ. /
}
ÖÖ 
}
ÜÜ 	
public
àà 
async
àà 
Task
àà 
<
àà 

JsonResult
àà %
>
àà% &%
ObtenerUnidadesDeMedida
àà' >
(
àà> ?
)
àà? @
{
ââ 	
try
ää 
{
ãã 
List
åå 
<
åå 
Detalle_maestro
åå $
>
åå$ %

resultados
åå& 0
=
åå1 2
await
åå3 8
maestroLogica
åå9 F
.
ååG H%
ObtenerUnidadesDeMedida
ååH _
(
åå_ `
)
åå` a
;
ååa b
List
çç 
<
çç $
ComboGenericoViewModel
çç +
>
çç+ ,
unidades
çç- 5
=
çç6 7
new
çç8 ;
List
çç< @
<
çç@ A$
ComboGenericoViewModel
ççA W
>
ççW X
(
ççX Y
)
ççY Z
;
ççZ [
foreach
èè 
(
èè 
var
èè 
item
èè !
in
èè" $

resultados
èè% /
)
èè/ 0
{
êê 
unidades
ëë 
.
ëë 
Add
ëë  
(
ëë  !
new
ëë! $$
ComboGenericoViewModel
ëë% ;
(
ëë; <
item
ëë< @
.
ëë@ A
id
ëëA C
,
ëëC D
item
ëëE I
.
ëëI J
codigo
ëëJ P
)
ëëP Q
)
ëëQ R
;
ëëR S
}
íí 
return
ìì 
Json
ìì 
(
ìì 
unidades
ìì $
)
ìì$ %
;
ìì% &
}
îî 
catch
ïï 
(
ïï 
	Exception
ïï 
e
ïï 
)
ïï 
{
ññ 
return
óó 
Json
óó 
(
óó 
Util
óó  
.
óó  !
	ErrorJson
óó! *
(
óó* +
e
óó+ ,
)
óó, -
)
óó- .
;
óó. /
}
òò 
}
ôô 	
public
öö 
async
öö 
Task
öö 
<
öö 

JsonResult
öö $
>
öö$ %#
ObtenerPresentaciones
öö& ;
(
öö; <
)
öö< =
{
õõ 	
try
úú 
{
ùù 
List
ûû 
<
ûû 
Detalle_maestro
ûû $
>
ûû$ %

resultados
ûû& 0
=
ûû1 2
await
ûû3 8
maestroLogica
ûû9 F
.
ûûF G#
ObtenerPresentaciones
ûûG \
(
ûû\ ]
)
ûû] ^
;
ûû^ _
List
üü 
<
üü $
ComboGenericoViewModel
üü +
>
üü+ ,
	articulos
üü- 6
=
üü7 8
new
üü9 <
List
üü= A
<
üüA B$
ComboGenericoViewModel
üüB X
>
üüX Y
(
üüY Z
)
üüZ [
;
üü[ \
foreach
°° 
(
°° 
var
°° 
item
°° !
in
°°" $

resultados
°°% /
)
°°/ 0
{
¢¢ 
	articulos
££ 
.
££ 
Add
££ !
(
££! "
new
££" %$
ComboGenericoViewModel
££& <
(
££< =
item
££= A
.
££A B
id
££B D
,
££D E
item
££F J
.
££J K
nombre
££K Q
)
££Q R
)
££R S
;
££S T
}
§§ 
return
•• 
Json
•• 
(
•• 
	articulos
•• %
)
••% &
;
••& '
}
¶¶ 
catch
ßß 
(
ßß 
	Exception
ßß 
e
ßß 
)
ßß 
{
®® 
return
©© 
Json
©© 
(
©© 
Util
©©  
.
©©  !
	ErrorJson
©©! *
(
©©* +
e
©©+ ,
)
©©, -
)
©©- .
;
©©. /
}
™™ 
}
´´ 	
public
¨¨ 

JsonResult
¨¨ !
ListarSubContenidos
¨¨ -
(
¨¨- .
int
¨¨. 1
IdModelo
¨¨2 :
)
¨¨: ;
{
≠≠ 	
try
ÆÆ 
{
ØØ 
List
∞∞ 
<
∞∞ 
ConceptoDeNegocio
∞∞ &
>
∞∞& '

resultados
∞∞( 2
=
∞∞3 4
conceptoLogica
∞∞5 C
.
∞∞C D"
obtenerSubContenidos
∞∞D X
(
∞∞X Y
IdModelo
∞∞Y a
)
∞∞a b
;
∞∞b c
List
±± 
<
±± $
ComboGenericoViewModel
±± +
>
±±+ ,
	articulos
±±- 6
=
±±7 8
new
±±9 <
List
±±= A
<
±±A B$
ComboGenericoViewModel
±±B X
>
±±X Y
(
±±Y Z
)
±±Z [
;
±±[ \
foreach
≥≥ 
(
≥≥ 
var
≥≥ 
item
≥≥ !
in
≥≥" $

resultados
≥≥% /
)
≥≥/ 0
{
¥¥ 
	articulos
µµ 
.
µµ 
Add
µµ !
(
µµ! "
new
µµ" %$
ComboGenericoViewModel
µµ& <
(
µµ< =
item
µµ= A
.
µµA B
Id
µµB D
,
µµD E
item
µµF J
.
µµJ K
Nombre
µµK Q
)
µµQ R
)
µµR S
;
µµS T
}
∂∂ 
return
∑∑ 
Json
∑∑ 
(
∑∑ 
	articulos
∑∑ %
)
∑∑% &
;
∑∑& '
}
∏∏ 
catch
ππ 
(
ππ 
	Exception
ππ 
e
ππ 
)
ππ 
{
∫∫ 
return
ªª 
Json
ªª 
(
ªª 
Util
ªª  
.
ªª  !
	ErrorJson
ªª! *
(
ªª* +
e
ªª+ ,
)
ªª, -
)
ªª- .
;
ªª. /
}
ºº 
}
ΩΩ 	
public
ææ 

JsonResult
ææ #
ListarCaracteristicas
ææ /
(
ææ/ 0
int
ææ0 3

IdArticulo
ææ4 >
)
ææ> ?
{
øø 	
try
¿¿ 
{
¡¡ 
List
¬¬ 
<
¬¬ +
Valor_caracteristica_concepto
¬¬ 2
>
¬¬2 3

resultados
¬¬4 >
=
¬¬? @
maestroLogica
¬¬A N
.
¬¬N O1
#obtenercaracteristicasConceptoValor
¬¬O r
(
¬¬r s

IdArticulo
¬¬s }
)
¬¬} ~
;
¬¬~ 
List
√√ 
<
√√ 
Detalle_maestro
√√ $
>
√√$ %
listas
√√& ,
=
√√, -

resultados
√√. 8
.
√√8 9
Select
√√9 ?
(
√√? @
r
√√@ A
=>
√√B D
r
√√E F
.
√√F G"
Valor_caracteristica
√√G [
.
√√[ \
Detalle_maestro
√√\ k
)
√√k l
.
√√l m
Distinct
√√m u
(
√√u v
)
√√v w
.
√√w x
ToList
√√x ~
(
√√~ 
)√√ Ä
;√√Ä Å
List
ƒƒ 
<
ƒƒ *
CaracteristicaValorViewModel
ƒƒ 1
>
ƒƒ1 2
caracteristicas
ƒƒ3 B
=
ƒƒC D
new
ƒƒE H
List
ƒƒI M
<
ƒƒM N*
CaracteristicaValorViewModel
ƒƒN j
>
ƒƒj k
(
ƒƒk l
)
ƒƒl m
;
ƒƒm n
foreach
∆∆ 
(
∆∆ 
var
∆∆ 
item
∆∆ !
in
∆∆" $
listas
∆∆% +
)
∆∆+ ,
{
«« 
var
»» 
valores
»» 
=
»»  !

resultados
»»" ,
.
»», -
Where
»»- 2
(
»»2 3
r
»»3 4
=>
»»5 7
r
»»8 9
.
»»9 :"
Valor_caracteristica
»»: N
.
»»N O
id_caracteristica
»»O `
==
»»a c
item
»»d h
.
»»h i
id
»»i k
)
»»k l
.
»»l m
Select
»»m s
(
»»s t
r
»»t u
=>
»»v x
r
»»y z
.
»»z {#
Valor_caracteristica»»{ è
)»»è ê
.»»ê ë
ToList»»ë ó
(»»ó ò
)»»ò ô
;»»ô ö
caracteristicas
…… #
.
……# $
Add
……$ '
(
……' (
new
……( +*
CaracteristicaValorViewModel
……, H
(
……H I
item
……I M
.
……M N
nombre
……N T
,
……T U
valores
……V ]
)
……] ^
)
……^ _
;
……_ `
}
   
return
ÀÀ 
Json
ÀÀ 
(
ÀÀ 
caracteristicas
ÀÀ +
)
ÀÀ+ ,
;
ÀÀ, -
}
ÃÃ 
catch
ÕÕ 
(
ÕÕ 
	Exception
ÕÕ 
e
ÕÕ 
)
ÕÕ 
{
ŒŒ 
return
œœ 
Json
œœ 
(
œœ 
Util
œœ  
.
œœ  !
	ErrorJson
œœ! *
(
œœ* +
e
œœ+ ,
)
œœ, -
)
œœ- .
;
œœ. /
}
–– 
}
—— 	
public
““ 
async
““ 
Task
““ 
<
““ 

JsonResult
““ %
>
““% &
ObtenerEstados
““' 5
(
““5 6
)
““6 7
{
”” 	
try
‘‘ 
{
’’ 
List
÷÷ 
<
÷÷ 
Detalle_maestro
÷÷ $
>
÷÷$ %

resultados
÷÷& 0
=
÷÷1 2
await
÷÷3 8
maestroLogica
÷÷9 F
.
÷÷F G'
ObtenerEstadosTransaccion
÷÷G `
(
÷÷` a
)
÷÷a b
;
÷÷b c
List
◊◊ 
<
◊◊ $
ComboGenericoViewModel
◊◊ +
>
◊◊+ ,
estados
◊◊- 4
=
◊◊5 6
new
◊◊7 :
List
◊◊; ?
<
◊◊? @$
ComboGenericoViewModel
◊◊@ V
>
◊◊V W
(
◊◊W X
)
◊◊X Y
;
◊◊Y Z
foreach
ÿÿ 
(
ÿÿ 
var
ÿÿ 
item
ÿÿ !
in
ÿÿ" $

resultados
ÿÿ% /
)
ÿÿ/ 0
{
ŸŸ 
estados
⁄⁄ 
.
⁄⁄ 
Add
⁄⁄ 
(
⁄⁄  
new
⁄⁄  #$
ComboGenericoViewModel
⁄⁄$ :
(
⁄⁄: ;
item
⁄⁄; ?
.
⁄⁄? @
id
⁄⁄@ B
,
⁄⁄B C
item
⁄⁄D H
.
⁄⁄H I
nombre
⁄⁄I O
)
⁄⁄O P
)
⁄⁄P Q
;
⁄⁄Q R
}
€€ 
return
‹‹ 
Json
‹‹ 
(
‹‹ 
estados
‹‹ #
)
‹‹# $
;
‹‹$ %
}
›› 
catch
ﬁﬁ 
(
ﬁﬁ 
	Exception
ﬁﬁ 
e
ﬁﬁ 
)
ﬁﬁ 
{
ﬂﬂ 
return
‡‡ 
Json
‡‡ 
(
‡‡ 
Util
‡‡  
.
‡‡  !
	ErrorJson
‡‡! *
(
‡‡* +
e
‡‡+ ,
)
‡‡, -
)
‡‡- .
;
‡‡. /
}
·· 
}
‚‚ 	
public
‰‰ 
async
‰‰ 
Task
‰‰ 
<
‰‰ 

JsonResult
‰‰ $
>
‰‰$ %
ObtenerAcciones
‰‰& 5
(
‰‰5 6
)
‰‰6 7
{
ÂÂ 	
try
ÊÊ 
{
ÁÁ 
List
ËË 
<
ËË 
Detalle_maestro
ËË $
>
ËË$ %

resultados
ËË& 0
=
ËË1 2
await
ËË3 8
maestroLogica
ËË9 F
.
ËËF G(
ObtenerAccionesTransaccion
ËËG a
(
ËËa b
)
ËËb c
;
ËËc d
List
ÈÈ 
<
ÈÈ $
ComboGenericoViewModel
ÈÈ +
>
ÈÈ+ ,
acciones
ÈÈ- 5
=
ÈÈ6 7
new
ÈÈ8 ;
List
ÈÈ< @
<
ÈÈ@ A$
ComboGenericoViewModel
ÈÈA W
>
ÈÈW X
(
ÈÈX Y
)
ÈÈY Z
;
ÈÈZ [
foreach
ÍÍ 
(
ÍÍ 
var
ÍÍ 
item
ÍÍ !
in
ÍÍ" $

resultados
ÍÍ% /
)
ÍÍ/ 0
{
ÎÎ 
acciones
ÏÏ 
.
ÏÏ 
Add
ÏÏ  
(
ÏÏ  !
new
ÏÏ! $$
ComboGenericoViewModel
ÏÏ% ;
(
ÏÏ; <
item
ÏÏ< @
.
ÏÏ@ A
id
ÏÏA C
,
ÏÏC D
item
ÏÏE I
.
ÏÏI J
nombre
ÏÏJ P
)
ÏÏP Q
)
ÏÏQ R
;
ÏÏR S
}
ÌÌ 
return
ÓÓ 
Json
ÓÓ 
(
ÓÓ 
acciones
ÓÓ $
)
ÓÓ$ %
;
ÓÓ% &
}
ÔÔ 
catch
 
(
 
	Exception
 
e
 
)
 
{
ÒÒ 
return
ÚÚ 
Json
ÚÚ 
(
ÚÚ 
Util
ÚÚ  
.
ÚÚ  !
	ErrorJson
ÚÚ! *
(
ÚÚ* +
e
ÚÚ+ ,
)
ÚÚ, -
)
ÚÚ- .
;
ÚÚ. /
}
ÛÛ 
}
ÙÙ 	
public
ˆˆ 

JsonResult
ˆˆ '
ObtenerTiposDeTransaccion
ˆˆ 3
(
ˆˆ3 4
)
ˆˆ4 5
{
˜˜ 	
try
¯¯ 
{
˘˘ 
List
˙˙ 
<
˙˙ 
Tipo_transaccion
˙˙ %
>
˙˙% &

resultados
˙˙' 1
=
˙˙2 3
permisoLogica
˙˙4 A
.
˙˙A B'
ObtenerTiposDeTransaccion
˙˙B [
(
˙˙[ \
)
˙˙\ ]
;
˙˙] ^
List
˚˚ 
<
˚˚ $
ComboGenericoViewModel
˚˚ +
>
˚˚+ , 
tiposDeTransaccion
˚˚- ?
=
˚˚@ A
new
˚˚B E
List
˚˚F J
<
˚˚J K$
ComboGenericoViewModel
˚˚K a
>
˚˚a b
(
˚˚b c
)
˚˚c d
;
˚˚d e
foreach
¸¸ 
(
¸¸ 
var
¸¸ 
item
¸¸ !
in
¸¸" $

resultados
¸¸% /
)
¸¸/ 0
{
˝˝  
tiposDeTransaccion
˛˛ &
.
˛˛& '
Add
˛˛' *
(
˛˛* +
new
˛˛+ .$
ComboGenericoViewModel
˛˛/ E
(
˛˛E F
item
˛˛F J
.
˛˛J K
id
˛˛K M
,
˛˛M N
item
˛˛O S
.
˛˛S T
nombre
˛˛T Z
)
˛˛Z [
)
˛˛[ \
;
˛˛\ ]
}
ˇˇ 
return
ÄÄ 
Json
ÄÄ 
(
ÄÄ  
tiposDeTransaccion
ÄÄ .
)
ÄÄ. /
;
ÄÄ/ 0
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
e
ÇÇ 
)
ÇÇ 
{
ÉÉ 
return
ÑÑ 
Json
ÑÑ 
(
ÑÑ 
Util
ÑÑ  
.
ÑÑ  !
	ErrorJson
ÑÑ! *
(
ÑÑ* +
e
ÑÑ+ ,
)
ÑÑ, -
)
ÑÑ- .
;
ÑÑ. /
}
ÖÖ 
}
ÜÜ 	
public
áá 
async
áá 
Task
áá 
<
áá 

JsonResult
áá $
>
áá$ %&
ObtenerUnidadesDeNegocio
áá& >
(
áá> ?
)
áá? @
{
àà 	
try
ââ 
{
ää 
List
ãã 
<
ãã 
Detalle_maestro
ãã $
>
ãã$ %

resultados
ãã& 0
=
ãã1 2
await
ãã3 8
maestroLogica
ãã9 F
.
ããF G&
ObtenerUnidadesDeNegocio
ããG _
(
ãã_ `
)
ãã` a
;
ããa b
List
åå 
<
åå $
ComboGenericoViewModel
åå +
>
åå+ ,
unidadesDeNegocio
åå- >
=
åå? @
new
ååA D
List
ååE I
<
ååI J$
ComboGenericoViewModel
ååJ `
>
åå` a
(
ååa b
)
ååb c
;
ååc d
foreach
çç 
(
çç 
var
çç 
item
çç !
in
çç" $

resultados
çç% /
)
çç/ 0
{
éé 
unidadesDeNegocio
èè %
.
èè% &
Add
èè& )
(
èè) *
new
èè* -$
ComboGenericoViewModel
èè. D
(
èèD E
item
èèE I
.
èèI J
id
èèJ L
,
èèL M
item
èèN R
.
èèR S
codigo
èèS Y
)
èèY Z
)
èèZ [
;
èè[ \
}
êê 
return
ëë 
Json
ëë 
(
ëë 
unidadesDeNegocio
ëë -
)
ëë- .
;
ëë. /
}
íí 
catch
ìì 
(
ìì 
	Exception
ìì 
e
ìì 
)
ìì 
{
îî 
return
ïï 
Json
ïï 
(
ïï 
Util
ïï  
.
ïï  !
	ErrorJson
ïï! *
(
ïï* +
e
ïï+ ,
)
ïï, -
)
ïï- .
;
ïï. /
}
ññ 
}
óó 	
public
ôô 
ActionResult
ôô 

NavSidebar
ôô &
(
ôô& '
)
ôô' (
{
öö 	
var
õõ 
data
õõ 
=
õõ 
new
õõ 
Data
õõ 
(
õõ  
)
õõ  !
;
õõ! "
ViewBag
úú 
.
úú ,
AplicacionDesplegadaLocalmente
úú 2
=
úú3 4 
AplicacionSettings
úú5 G
.
úúG H
Default
úúH O
.
úúO P,
AplicacionDesplegadaLocalmente
úúP n
;
úún o
return
ùù 
PartialView
ùù 
(
ùù 
data
ùù #
.
ùù# $
navbarItems
ùù$ /
(
ùù/ 0
conceptoLogica
ùù0 >
,
ùù> ? 
actorNegocioLogica
ùù@ R
,
ùùR S
Dependencia
ùùT _
.
ùù_ `
Resolve
ùù` g
<
ùùg h
ISucursal_Logica
ùùh x
>
ùùx y
(
ùùy z
)
ùùz {
)
ùù{ |
.
ùù| }
ToListùù} É
(ùùÉ Ñ
)ùùÑ Ö
)ùùÖ Ü
;ùùÜ á
}
ûû 	
public
üü 
ActionResult
üü 

ContentTop
üü &
(
üü& '
)
üü' (
{
†† 	
return
°° 
PartialView
°° 
(
°° 
)
°°  
;
°°  !
}
¢¢ 	
public
§§ 
async
§§ 
Task
§§ 
<
§§ 

JsonResult
§§ $
>
§§$ %'
ObtenerTiposGrupoClientes
§§& ?
(
§§? @
)
§§@ A
{
•• 	
try
¶¶ 
{
ßß 
var
®® 
	resultado
®® 
=
®® 
await
®®  %
maestroLogica
®®& 3
.
®®3 4'
ObtenerTiposGrupoClientes
®®4 M
(
®®M N
)
®®N O
;
®®O P
return
©© 
Json
©© 
(
©© 
	resultado
©© %
)
©©% &
;
©©& '
}
™™ 
catch
´´ 
(
´´ 
	Exception
´´ 
e
´´ 
)
´´ 
{
¨¨ 
return
≠≠ 
Json
≠≠ 
(
≠≠ 
Util
≠≠  
.
≠≠  !
	ErrorJson
≠≠! *
(
≠≠* +
e
≠≠+ ,
)
≠≠, -
)
≠≠- .
;
≠≠. /
}
ÆÆ 
}
ØØ 	
public
∞∞ 
async
∞∞ 
Task
∞∞ 
<
∞∞ 

JsonResult
∞∞ $
>
∞∞$ %1
#ObtenerClasificacionesGrupoClientes
∞∞& I
(
∞∞I J
)
∞∞J K
{
±± 	
try
≤≤ 
{
≥≥ 
var
¥¥ 
	resultado
¥¥ 
=
¥¥ 
await
¥¥  %
maestroLogica
¥¥& 3
.
¥¥3 41
#ObtenerClasificacionesGrupoClientes
¥¥4 W
(
¥¥W X
)
¥¥X Y
;
¥¥Y Z
return
µµ 
Json
µµ 
(
µµ 
	resultado
µµ %
)
µµ% &
;
µµ& '
}
∂∂ 
catch
∑∑ 
(
∑∑ 
	Exception
∑∑ 
e
∑∑ 
)
∑∑ 
{
∏∏ 
return
ππ 
Json
ππ 
(
ππ 
Util
ππ  
.
ππ  !
	ErrorJson
ππ! *
(
ππ* +
e
ππ+ ,
)
ππ, -
)
ππ- .
;
ππ. /
}
∫∫ 
}
ªª 	
}
ºº 
}ΩΩ …è
SD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\ManageController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
[ 
	Authorize 
] 
public 

class 
ManageController !
:" #

Controller$ .
{ 
private $
ApplicationSignInManager (
_signInManager) 7
;7 8
private "
ApplicationUserManager &
_userManager' 3
;3 4
public 
ManageController 
(  
)  !
{ 	
} 	
public 
ManageController 
(  "
ApplicationUserManager  6
userManager7 B
,B C$
ApplicationSignInManagerD \
signInManager] j
)j k
{ 	
UserManager 
= 
userManager %
;% &
SignInManager 
= 
signInManager )
;) *
} 	
public $
ApplicationSignInManager '
SignInManager( 5
{ 	
get 
{   
return!! 
_signInManager!! %
??!!& (
HttpContext!!) 4
.!!4 5
GetOwinContext!!5 C
(!!C D
)!!D E
.!!E F
Get!!F I
<!!I J$
ApplicationSignInManager!!J b
>!!b c
(!!c d
)!!d e
;!!e f
}"" 
private## 
set## 
{$$ 
_signInManager%% 
=%%  
value%%! &
;%%& '
}&& 
}'' 	
public)) "
ApplicationUserManager)) %
UserManager))& 1
{** 	
get++ 
{,, 
return-- 
_userManager-- #
??--$ &
HttpContext--' 2
.--2 3
GetOwinContext--3 A
(--A B
)--B C
.--C D
GetUserManager--D R
<--R S"
ApplicationUserManager--S i
>--i j
(--j k
)--k l
;--l m
}.. 
private// 
set// 
{00 
_userManager11 
=11 
value11 $
;11$ %
}22 
}33 	
public77 
async77 
Task77 
<77 
ActionResult77 &
>77& '
Index77( -
(77- .
ManageMessageId77. =
?77= >
message77? F
)77F G
{88 	
ViewBag99 
.99 
StatusMessage99 !
=99" #
message:: 
==:: 
ManageMessageId:: *
.::* +!
ChangePasswordSuccess::+ @
?::A B
$str::C b
:;; 
message;; 
==;; 
ManageMessageId;; ,
.;;, -
SetPasswordSuccess;;- ?
?;;@ A
$str;;B d
:<< 
message<< 
==<< 
ManageMessageId<< ,
.<<, -
SetTwoFactorSuccess<<- @
?<<A B
$str	<<C Ö
:== 
message== 
==== 
ManageMessageId== ,
.==, -
Error==- 2
?==3 4
$str==5 P
:>> 
message>> 
==>> 
ManageMessageId>> ,
.>>, -
AddPhoneSuccess>>- <
?>>= >
$str>>? f
:?? 
message?? 
==?? 
ManageMessageId?? ,
.??, -
RemovePhoneSuccess??- ?
???@ A
$str??B h
:@@ 
$str@@ 
;@@ 
varBB 
userIdBB 
=BB 
UserBB 
.BB 
IdentityBB &
.BB& '
	GetUserIdBB' 0
(BB0 1
)BB1 2
;BB2 3
varCC 
modelCC 
=CC 
newCC 
IndexViewModelCC *
{DD 
HasPasswordEE 
=EE 
HasPasswordEE )
(EE) *
)EE* +
,EE+ ,
PhoneNumberFF 
=FF 
awaitFF #
UserManagerFF$ /
.FF/ 0
GetPhoneNumberAsyncFF0 C
(FFC D
userIdFFD J
)FFJ K
,FFK L
	TwoFactorGG 
=GG 
awaitGG !
UserManagerGG" -
.GG- .$
GetTwoFactorEnabledAsyncGG. F
(GGF G
userIdGGG M
)GGM N
,GGN O
LoginsHH 
=HH 
awaitHH 
UserManagerHH *
.HH* +
GetLoginsAsyncHH+ 9
(HH9 :
userIdHH: @
)HH@ A
,HHA B
BrowserRememberedII !
=II" #
awaitII$ )!
AuthenticationManagerII* ?
.II? @+
TwoFactorBrowserRememberedAsyncII@ _
(II_ `
userIdII` f
)IIf g
}JJ 
;JJ 
returnKK 
ViewKK 
(KK 
modelKK 
)KK 
;KK 
}LL 	
[PP 	
HttpPostPP	 
]PP 
[QQ 	$
ValidateAntiForgeryTokenQQ	 !
]QQ! "
publicRR 
asyncRR 
TaskRR 
<RR 
ActionResultRR &
>RR& '
RemoveLoginRR( 3
(RR3 4
stringRR4 :
loginProviderRR; H
,RRH I
stringRRJ P
providerKeyRRQ \
)RR\ ]
{SS 	
ManageMessageIdTT 
?TT 
messageTT $
;TT$ %
varUU 
resultUU 
=UU 
awaitUU 
UserManagerUU *
.UU* +
RemoveLoginAsyncUU+ ;
(UU; <
UserUU< @
.UU@ A
IdentityUUA I
.UUI J
	GetUserIdUUJ S
(UUS T
)UUT U
,UUU V
newUUW Z
UserLoginInfoUU[ h
(UUh i
loginProviderUUi v
,UUv w
providerKey	UUx É
)
UUÉ Ñ
)
UUÑ Ö
;
UUÖ Ü
ifVV 
(VV 
resultVV 
.VV 
	SucceededVV  
)VV  !
{WW 
varXX 
userXX 
=XX 
awaitXX  
UserManagerXX! ,
.XX, -
FindByIdAsyncXX- :
(XX: ;
UserXX; ?
.XX? @
IdentityXX@ H
.XXH I
	GetUserIdXXI R
(XXR S
)XXS T
)XXT U
;XXU V
ifYY 
(YY 
userYY 
!=YY 
nullYY  
)YY  !
{ZZ 
await[[ 
SignInManager[[ '
.[[' (
SignInAsync[[( 3
([[3 4
user[[4 8
,[[8 9
isPersistent[[: F
:[[F G
false[[H M
,[[M N
rememberBrowser[[O ^
:[[^ _
false[[` e
)[[e f
;[[f g
}\\ 
message]] 
=]] 
ManageMessageId]] )
.]]) *
RemoveLoginSuccess]]* <
;]]< =
}^^ 
else__ 
{`` 
messageaa 
=aa 
ManageMessageIdaa )
.aa) *
Erroraa* /
;aa/ 0
}bb 
returncc 
RedirectToActioncc #
(cc# $
$strcc$ 2
,cc2 3
newcc4 7
{cc8 9
Messagecc: A
=ccB C
messageccD K
}ccL M
)ccM N
;ccN O
}dd 	
publichh 
ActionResulthh 
AddPhoneNumberhh *
(hh* +
)hh+ ,
{ii 	
returnjj 
Viewjj 
(jj 
)jj 
;jj 
}kk 	
[oo 	
HttpPostoo	 
]oo 
[pp 	$
ValidateAntiForgeryTokenpp	 !
]pp! "
publicqq 
asyncqq 
Taskqq 
<qq 
ActionResultqq &
>qq& '
AddPhoneNumberqq( 6
(qq6 7#
AddPhoneNumberViewModelqq7 N
modelqqO T
)qqT U
{rr 	
ifss 
(ss 
!ss 

ModelStatess 
.ss 
IsValidss #
)ss# $
{tt 
returnuu 
Viewuu 
(uu 
modeluu !
)uu! "
;uu" #
}vv 
varxx 
codexx 
=xx 
awaitxx 
UserManagerxx (
.xx( )/
#GenerateChangePhoneNumberTokenAsyncxx) L
(xxL M
UserxxM Q
.xxQ R
IdentityxxR Z
.xxZ [
	GetUserIdxx[ d
(xxd e
)xxe f
,xxf g
modelxxh m
.xxm n
Numberxxn t
)xxt u
;xxu v
ifyy 
(yy 
UserManageryy 
.yy 

SmsServiceyy &
!=yy' )
nullyy* .
)yy. /
{zz 
var{{ 
message{{ 
={{ 
new{{ !
IdentityMessage{{" 1
{|| 
Destination}} 
=}}  !
model}}" '
.}}' (
Number}}( .
,}}. /
Body~~ 
=~~ 
$str~~ 8
+~~9 :
code~~; ?
} 
; 
await
ÄÄ 
UserManager
ÄÄ !
.
ÄÄ! "

SmsService
ÄÄ" ,
.
ÄÄ, -
	SendAsync
ÄÄ- 6
(
ÄÄ6 7
message
ÄÄ7 >
)
ÄÄ> ?
;
ÄÄ? @
}
ÅÅ 
return
ÇÇ 
RedirectToAction
ÇÇ #
(
ÇÇ# $
$str
ÇÇ$ 7
,
ÇÇ7 8
new
ÇÇ9 <
{
ÇÇ= >
PhoneNumber
ÇÇ? J
=
ÇÇK L
model
ÇÇM R
.
ÇÇR S
Number
ÇÇS Y
}
ÇÇZ [
)
ÇÇ[ \
;
ÇÇ\ ]
}
ÉÉ 	
[
áá 	
HttpPost
áá	 
]
áá 
[
àà 	&
ValidateAntiForgeryToken
àà	 !
]
àà! "
public
ââ 
async
ââ 
Task
ââ 
<
ââ 
ActionResult
ââ &
>
ââ& '+
EnableTwoFactorAuthentication
ââ( E
(
ââE F
)
ââF G
{
ää 	
await
ãã 
UserManager
ãã 
.
ãã &
SetTwoFactorEnabledAsync
ãã 6
(
ãã6 7
User
ãã7 ;
.
ãã; <
Identity
ãã< D
.
ããD E
	GetUserId
ããE N
(
ããN O
)
ããO P
,
ããP Q
true
ããR V
)
ããV W
;
ããW X
var
åå 
user
åå 
=
åå 
await
åå 
UserManager
åå (
.
åå( )
FindByIdAsync
åå) 6
(
åå6 7
User
åå7 ;
.
åå; <
Identity
åå< D
.
ååD E
	GetUserId
ååE N
(
ååN O
)
ååO P
)
ååP Q
;
ååQ R
if
çç 
(
çç 
user
çç 
!=
çç 
null
çç 
)
çç 
{
éé 
await
èè 
SignInManager
èè #
.
èè# $
SignInAsync
èè$ /
(
èè/ 0
user
èè0 4
,
èè4 5
isPersistent
èè6 B
:
èèB C
false
èèD I
,
èèI J
rememberBrowser
èèK Z
:
èèZ [
false
èè\ a
)
èèa b
;
èèb c
}
êê 
return
ëë 
RedirectToAction
ëë #
(
ëë# $
$str
ëë$ +
,
ëë+ ,
$str
ëë- 5
)
ëë5 6
;
ëë6 7
}
íí 	
[
ññ 	
HttpPost
ññ	 
]
ññ 
[
óó 	&
ValidateAntiForgeryToken
óó	 !
]
óó! "
public
òò 
async
òò 
Task
òò 
<
òò 
ActionResult
òò &
>
òò& ',
DisableTwoFactorAuthentication
òò( F
(
òòF G
)
òòG H
{
ôô 	
await
öö 
UserManager
öö 
.
öö &
SetTwoFactorEnabledAsync
öö 6
(
öö6 7
User
öö7 ;
.
öö; <
Identity
öö< D
.
ööD E
	GetUserId
ööE N
(
ööN O
)
ööO P
,
ööP Q
false
ööR W
)
ööW X
;
ööX Y
var
õõ 
user
õõ 
=
õõ 
await
õõ 
UserManager
õõ (
.
õõ( )
FindByIdAsync
õõ) 6
(
õõ6 7
User
õõ7 ;
.
õõ; <
Identity
õõ< D
.
õõD E
	GetUserId
õõE N
(
õõN O
)
õõO P
)
õõP Q
;
õõQ R
if
úú 
(
úú 
user
úú 
!=
úú 
null
úú 
)
úú 
{
ùù 
await
ûû 
SignInManager
ûû #
.
ûû# $
SignInAsync
ûû$ /
(
ûû/ 0
user
ûû0 4
,
ûû4 5
isPersistent
ûû6 B
:
ûûB C
false
ûûD I
,
ûûI J
rememberBrowser
ûûK Z
:
ûûZ [
false
ûû\ a
)
ûûa b
;
ûûb c
}
üü 
return
†† 
RedirectToAction
†† #
(
††# $
$str
††$ +
,
††+ ,
$str
††- 5
)
††5 6
;
††6 7
}
°° 	
public
•• 
async
•• 
Task
•• 
<
•• 
ActionResult
•• &
>
••& '
VerifyPhoneNumber
••( 9
(
••9 :
string
••: @
phoneNumber
••A L
)
••L M
{
¶¶ 	
var
ßß 
code
ßß 
=
ßß 
await
ßß 
UserManager
ßß (
.
ßß( )1
#GenerateChangePhoneNumberTokenAsync
ßß) L
(
ßßL M
User
ßßM Q
.
ßßQ R
Identity
ßßR Z
.
ßßZ [
	GetUserId
ßß[ d
(
ßßd e
)
ßße f
,
ßßf g
phoneNumber
ßßh s
)
ßßs t
;
ßßt u
return
©© 
phoneNumber
©© 
==
©© !
null
©©" &
?
©©' (
View
©©) -
(
©©- .
$str
©©. 5
)
©©5 6
:
©©7 8
View
©©9 =
(
©©= >
new
©©> A(
VerifyPhoneNumberViewModel
©©B \
{
©©] ^
PhoneNumber
©©_ j
=
©©k l
phoneNumber
©©m x
}
©©y z
)
©©z {
;
©©{ |
}
™™ 	
[
ÆÆ 	
HttpPost
ÆÆ	 
]
ÆÆ 
[
ØØ 	&
ValidateAntiForgeryToken
ØØ	 !
]
ØØ! "
public
∞∞ 
async
∞∞ 
Task
∞∞ 
<
∞∞ 
ActionResult
∞∞ &
>
∞∞& '
VerifyPhoneNumber
∞∞( 9
(
∞∞9 :(
VerifyPhoneNumberViewModel
∞∞: T
model
∞∞U Z
)
∞∞Z [
{
±± 	
if
≤≤ 
(
≤≤ 
!
≤≤ 

ModelState
≤≤ 
.
≤≤ 
IsValid
≤≤ #
)
≤≤# $
{
≥≥ 
return
¥¥ 
View
¥¥ 
(
¥¥ 
model
¥¥ !
)
¥¥! "
;
¥¥" #
}
µµ 
var
∂∂ 
result
∂∂ 
=
∂∂ 
await
∂∂ 
UserManager
∂∂ *
.
∂∂* +$
ChangePhoneNumberAsync
∂∂+ A
(
∂∂A B
User
∂∂B F
.
∂∂F G
Identity
∂∂G O
.
∂∂O P
	GetUserId
∂∂P Y
(
∂∂Y Z
)
∂∂Z [
,
∂∂[ \
model
∂∂] b
.
∂∂b c
PhoneNumber
∂∂c n
,
∂∂n o
model
∂∂p u
.
∂∂u v
Code
∂∂v z
)
∂∂z {
;
∂∂{ |
if
∑∑ 
(
∑∑ 
result
∑∑ 
.
∑∑ 
	Succeeded
∑∑  
)
∑∑  !
{
∏∏ 
var
ππ 
user
ππ 
=
ππ 
await
ππ  
UserManager
ππ! ,
.
ππ, -
FindByIdAsync
ππ- :
(
ππ: ;
User
ππ; ?
.
ππ? @
Identity
ππ@ H
.
ππH I
	GetUserId
ππI R
(
ππR S
)
ππS T
)
ππT U
;
ππU V
if
∫∫ 
(
∫∫ 
user
∫∫ 
!=
∫∫ 
null
∫∫  
)
∫∫  !
{
ªª 
await
ºº 
SignInManager
ºº '
.
ºº' (
SignInAsync
ºº( 3
(
ºº3 4
user
ºº4 8
,
ºº8 9
isPersistent
ºº: F
:
ººF G
false
ººH M
,
ººM N
rememberBrowser
ººO ^
:
ºº^ _
false
ºº` e
)
ººe f
;
ººf g
}
ΩΩ 
return
ææ 
RedirectToAction
ææ '
(
ææ' (
$str
ææ( /
,
ææ/ 0
new
ææ1 4
{
ææ5 6
Message
ææ7 >
=
ææ? @
ManageMessageId
ææA P
.
ææP Q
AddPhoneSuccess
ææQ `
}
ææa b
)
ææb c
;
ææc d
}
øø 

ModelState
¡¡ 
.
¡¡ 
AddModelError
¡¡ $
(
¡¡$ %
$str
¡¡% '
,
¡¡' (
$str
¡¡) P
)
¡¡P Q
;
¡¡Q R
return
¬¬ 
View
¬¬ 
(
¬¬ 
model
¬¬ 
)
¬¬ 
;
¬¬ 
}
√√ 	
[
«« 	
HttpPost
««	 
]
«« 
[
»» 	&
ValidateAntiForgeryToken
»»	 !
]
»»! "
public
…… 
async
…… 
Task
…… 
<
…… 
ActionResult
…… &
>
……& '
RemovePhoneNumber
……( 9
(
……9 :
)
……: ;
{
   	
var
ÀÀ 
result
ÀÀ 
=
ÀÀ 
await
ÀÀ 
UserManager
ÀÀ *
.
ÀÀ* +!
SetPhoneNumberAsync
ÀÀ+ >
(
ÀÀ> ?
User
ÀÀ? C
.
ÀÀC D
Identity
ÀÀD L
.
ÀÀL M
	GetUserId
ÀÀM V
(
ÀÀV W
)
ÀÀW X
,
ÀÀX Y
null
ÀÀZ ^
)
ÀÀ^ _
;
ÀÀ_ `
if
ÃÃ 
(
ÃÃ 
!
ÃÃ 
result
ÃÃ 
.
ÃÃ 
	Succeeded
ÃÃ !
)
ÃÃ! "
{
ÕÕ 
return
ŒŒ 
RedirectToAction
ŒŒ '
(
ŒŒ' (
$str
ŒŒ( /
,
ŒŒ/ 0
new
ŒŒ1 4
{
ŒŒ5 6
Message
ŒŒ7 >
=
ŒŒ? @
ManageMessageId
ŒŒA P
.
ŒŒP Q
Error
ŒŒQ V
}
ŒŒW X
)
ŒŒX Y
;
ŒŒY Z
}
œœ 
var
–– 
user
–– 
=
–– 
await
–– 
UserManager
–– (
.
––( )
FindByIdAsync
––) 6
(
––6 7
User
––7 ;
.
––; <
Identity
––< D
.
––D E
	GetUserId
––E N
(
––N O
)
––O P
)
––P Q
;
––Q R
if
—— 
(
—— 
user
—— 
!=
—— 
null
—— 
)
—— 
{
““ 
await
”” 
SignInManager
”” #
.
””# $
SignInAsync
””$ /
(
””/ 0
user
””0 4
,
””4 5
isPersistent
””6 B
:
””B C
false
””D I
,
””I J
rememberBrowser
””K Z
:
””Z [
false
””\ a
)
””a b
;
””b c
}
‘‘ 
return
’’ 
RedirectToAction
’’ #
(
’’# $
$str
’’$ +
,
’’+ ,
new
’’- 0
{
’’1 2
Message
’’3 :
=
’’; <
ManageMessageId
’’= L
.
’’L M 
RemovePhoneSuccess
’’M _
}
’’` a
)
’’a b
;
’’b c
}
÷÷ 	
public
⁄⁄ 
ActionResult
⁄⁄ 
ChangePassword
⁄⁄ *
(
⁄⁄* +
)
⁄⁄+ ,
{
€€ 	
return
‹‹ 
View
‹‹ 
(
‹‹ 
)
‹‹ 
;
‹‹ 
}
›› 	
[
·· 	
HttpPost
··	 
]
·· 
[
‚‚ 	&
ValidateAntiForgeryToken
‚‚	 !
]
‚‚! "
public
„„ 
async
„„ 
Task
„„ 
<
„„ 
ActionResult
„„ &
>
„„& '
ChangePassword
„„( 6
(
„„6 7%
ChangePasswordViewModel
„„7 N
model
„„O T
)
„„T U
{
‰‰ 	
if
ÂÂ 
(
ÂÂ 
!
ÂÂ 

ModelState
ÂÂ 
.
ÂÂ 
IsValid
ÂÂ #
)
ÂÂ# $
{
ÊÊ 
return
ÁÁ 
View
ÁÁ 
(
ÁÁ 
model
ÁÁ !
)
ÁÁ! "
;
ÁÁ" #
}
ËË 
var
ÈÈ 
result
ÈÈ 
=
ÈÈ 
await
ÈÈ 
UserManager
ÈÈ *
.
ÈÈ* +!
ChangePasswordAsync
ÈÈ+ >
(
ÈÈ> ?
User
ÈÈ? C
.
ÈÈC D
Identity
ÈÈD L
.
ÈÈL M
	GetUserId
ÈÈM V
(
ÈÈV W
)
ÈÈW X
,
ÈÈX Y
model
ÈÈZ _
.
ÈÈ_ `
OldPassword
ÈÈ` k
,
ÈÈk l
model
ÈÈm r
.
ÈÈr s
NewPassword
ÈÈs ~
)
ÈÈ~ 
;ÈÈ Ä
if
ÍÍ 
(
ÍÍ 
result
ÍÍ 
.
ÍÍ 
	Succeeded
ÍÍ  
)
ÍÍ  !
{
ÎÎ 
var
ÏÏ 
user
ÏÏ 
=
ÏÏ 
await
ÏÏ  
UserManager
ÏÏ! ,
.
ÏÏ, -
FindByIdAsync
ÏÏ- :
(
ÏÏ: ;
User
ÏÏ; ?
.
ÏÏ? @
Identity
ÏÏ@ H
.
ÏÏH I
	GetUserId
ÏÏI R
(
ÏÏR S
)
ÏÏS T
)
ÏÏT U
;
ÏÏU V
if
ÌÌ 
(
ÌÌ 
user
ÌÌ 
!=
ÌÌ 
null
ÌÌ  
)
ÌÌ  !
{
ÓÓ 
await
ÔÔ 
SignInManager
ÔÔ '
.
ÔÔ' (
SignInAsync
ÔÔ( 3
(
ÔÔ3 4
user
ÔÔ4 8
,
ÔÔ8 9
isPersistent
ÔÔ: F
:
ÔÔF G
false
ÔÔH M
,
ÔÔM N
rememberBrowser
ÔÔO ^
:
ÔÔ^ _
false
ÔÔ` e
)
ÔÔe f
;
ÔÔf g
}
 
return
ÒÒ 
RedirectToAction
ÒÒ '
(
ÒÒ' (
$str
ÒÒ( /
,
ÒÒ/ 0
new
ÒÒ1 4
{
ÒÒ5 6
Message
ÒÒ7 >
=
ÒÒ? @
ManageMessageId
ÒÒA P
.
ÒÒP Q#
ChangePasswordSuccess
ÒÒQ f
}
ÒÒg h
)
ÒÒh i
;
ÒÒi j
}
ÚÚ 
	AddErrors
ÛÛ 
(
ÛÛ 
result
ÛÛ 
)
ÛÛ 
;
ÛÛ 
return
ÙÙ 
View
ÙÙ 
(
ÙÙ 
model
ÙÙ 
)
ÙÙ 
;
ÙÙ 
}
ıı 	
public
˘˘ 
ActionResult
˘˘ 
SetPassword
˘˘ '
(
˘˘' (
)
˘˘( )
{
˙˙ 	
return
˚˚ 
View
˚˚ 
(
˚˚ 
)
˚˚ 
;
˚˚ 
}
¸¸ 	
[
ÄÄ 	
HttpPost
ÄÄ	 
]
ÄÄ 
[
ÅÅ 	&
ValidateAntiForgeryToken
ÅÅ	 !
]
ÅÅ! "
public
ÇÇ 
async
ÇÇ 
Task
ÇÇ 
<
ÇÇ 
ActionResult
ÇÇ &
>
ÇÇ& '
SetPassword
ÇÇ( 3
(
ÇÇ3 4"
SetPasswordViewModel
ÇÇ4 H
model
ÇÇI N
)
ÇÇN O
{
ÉÉ 	
if
ÑÑ 
(
ÑÑ 

ModelState
ÑÑ 
.
ÑÑ 
IsValid
ÑÑ "
)
ÑÑ" #
{
ÖÖ 
var
ÜÜ 
result
ÜÜ 
=
ÜÜ 
await
ÜÜ "
UserManager
ÜÜ# .
.
ÜÜ. /
AddPasswordAsync
ÜÜ/ ?
(
ÜÜ? @
User
ÜÜ@ D
.
ÜÜD E
Identity
ÜÜE M
.
ÜÜM N
	GetUserId
ÜÜN W
(
ÜÜW X
)
ÜÜX Y
,
ÜÜY Z
model
ÜÜ[ `
.
ÜÜ` a
NewPassword
ÜÜa l
)
ÜÜl m
;
ÜÜm n
if
áá 
(
áá 
result
áá 
.
áá 
	Succeeded
áá $
)
áá$ %
{
àà 
var
ââ 
user
ââ 
=
ââ 
await
ââ $
UserManager
ââ% 0
.
ââ0 1
FindByIdAsync
ââ1 >
(
ââ> ?
User
ââ? C
.
ââC D
Identity
ââD L
.
ââL M
	GetUserId
ââM V
(
ââV W
)
ââW X
)
ââX Y
;
ââY Z
if
ää 
(
ää 
user
ää 
!=
ää 
null
ää  $
)
ää$ %
{
ãã 
await
åå 
SignInManager
åå +
.
åå+ ,
SignInAsync
åå, 7
(
åå7 8
user
åå8 <
,
åå< =
isPersistent
åå> J
:
ååJ K
false
ååL Q
,
ååQ R
rememberBrowser
ååS b
:
ååb c
false
ååd i
)
ååi j
;
ååj k
}
çç 
return
éé 
RedirectToAction
éé +
(
éé+ ,
$str
éé, 3
,
éé3 4
new
éé5 8
{
éé9 :
Message
éé; B
=
ééC D
ManageMessageId
ééE T
.
ééT U 
SetPasswordSuccess
ééU g
}
ééh i
)
ééi j
;
ééj k
}
èè 
	AddErrors
êê 
(
êê 
result
êê  
)
êê  !
;
êê! "
}
ëë 
return
îî 
View
îî 
(
îî 
model
îî 
)
îî 
;
îî 
}
ïï 	
public
ôô 
async
ôô 
Task
ôô 
<
ôô 
ActionResult
ôô &
>
ôô& '
ManageLogins
ôô( 4
(
ôô4 5
ManageMessageId
ôô5 D
?
ôôD E
message
ôôF M
)
ôôM N
{
öö 	
ViewBag
õõ 
.
õõ 
StatusMessage
õõ !
=
õõ" #
message
úú 
==
úú 
ManageMessageId
úú *
.
úú* + 
RemoveLoginSuccess
úú+ =
?
úú> ?
$str
úú@ l
:
ùù 
message
ùù 
==
ùù 
ManageMessageId
ùù ,
.
ùù, -
Error
ùù- 2
?
ùù3 4
$str
ùù5 P
:
ûû 
$str
ûû 
;
ûû 
var
üü 
user
üü 
=
üü 
await
üü 
UserManager
üü (
.
üü( )
FindByIdAsync
üü) 6
(
üü6 7
User
üü7 ;
.
üü; <
Identity
üü< D
.
üüD E
	GetUserId
üüE N
(
üüN O
)
üüO P
)
üüP Q
;
üüQ R
if
†† 
(
†† 
user
†† 
==
†† 
null
†† 
)
†† 
{
°° 
return
¢¢ 
View
¢¢ 
(
¢¢ 
$str
¢¢ #
)
¢¢# $
;
¢¢$ %
}
££ 
var
§§ 

userLogins
§§ 
=
§§ 
await
§§ "
UserManager
§§# .
.
§§. /
GetLoginsAsync
§§/ =
(
§§= >
User
§§> B
.
§§B C
Identity
§§C K
.
§§K L
	GetUserId
§§L U
(
§§U V
)
§§V W
)
§§W X
;
§§X Y
var
•• 
otherLogins
•• 
=
•• #
AuthenticationManager
•• 3
.
••3 4,
GetExternalAuthenticationTypes
••4 R
(
••R S
)
••S T
.
••T U
Where
••U Z
(
••Z [
auth
••[ _
=>
••` b

userLogins
••c m
.
••m n
All
••n q
(
••q r
ul
••r t
=>
••u w
auth
••x |
.
••| }!
AuthenticationType••} è
!=••ê í
ul••ì ï
.••ï ñ
LoginProvider••ñ £
)••£ §
)••§ •
.••• ¶
ToList••¶ ¨
(••¨ ≠
)••≠ Æ
;••Æ Ø
ViewBag
¶¶ 
.
¶¶ 
ShowRemoveButton
¶¶ $
=
¶¶% &
user
¶¶' +
.
¶¶+ ,
PasswordHash
¶¶, 8
!=
¶¶9 ;
null
¶¶< @
||
¶¶A C

userLogins
¶¶D N
.
¶¶N O
Count
¶¶O T
>
¶¶U V
$num
¶¶W X
;
¶¶X Y
return
ßß 
View
ßß 
(
ßß 
new
ßß #
ManageLoginsViewModel
ßß 1
{
®® 
CurrentLogins
©© 
=
©© 

userLogins
©©  *
,
©©* +
OtherLogins
™™ 
=
™™ 
otherLogins
™™ )
}
´´ 
)
´´ 
;
´´ 
}
¨¨ 	
[
∞∞ 	
HttpPost
∞∞	 
]
∞∞ 
[
±± 	&
ValidateAntiForgeryToken
±±	 !
]
±±! "
public
≤≤ 
ActionResult
≤≤ 
	LinkLogin
≤≤ %
(
≤≤% &
string
≤≤& ,
provider
≤≤- 5
)
≤≤5 6
{
≥≥ 	
return
µµ 
new
µµ 
AccountController
µµ (
.
µµ( )
ChallengeResult
µµ) 8
(
µµ8 9
provider
µµ9 A
,
µµA B
Url
µµC F
.
µµF G
Action
µµG M
(
µµM N
$str
µµN a
,
µµa b
$str
µµc k
)
µµk l
,
µµl m
User
µµn r
.
µµr s
Identity
µµs {
.
µµ{ |
	GetUserIdµµ| Ö
(µµÖ Ü
)µµÜ á
)µµá à
;µµà â
}
∂∂ 	
public
∫∫ 
async
∫∫ 
Task
∫∫ 
<
∫∫ 
ActionResult
∫∫ &
>
∫∫& '
LinkLoginCallback
∫∫( 9
(
∫∫9 :
)
∫∫: ;
{
ªª 	
var
ºº 
	loginInfo
ºº 
=
ºº 
await
ºº !#
AuthenticationManager
ºº" 7
.
ºº7 8'
GetExternalLoginInfoAsync
ºº8 Q
(
ººQ R
XsrfKey
ººR Y
,
ººY Z
User
ºº[ _
.
ºº_ `
Identity
ºº` h
.
ººh i
	GetUserId
ººi r
(
ººr s
)
ººs t
)
ººt u
;
ººu v
if
ΩΩ 
(
ΩΩ 
	loginInfo
ΩΩ 
==
ΩΩ 
null
ΩΩ !
)
ΩΩ! "
{
ææ 
return
øø 
RedirectToAction
øø '
(
øø' (
$str
øø( 6
,
øø6 7
new
øø8 ;
{
øø< =
Message
øø> E
=
øøF G
ManageMessageId
øøH W
.
øøW X
Error
øøX ]
}
øø^ _
)
øø_ `
;
øø` a
}
¿¿ 
var
¡¡ 
result
¡¡ 
=
¡¡ 
await
¡¡ 
UserManager
¡¡ *
.
¡¡* +
AddLoginAsync
¡¡+ 8
(
¡¡8 9
User
¡¡9 =
.
¡¡= >
Identity
¡¡> F
.
¡¡F G
	GetUserId
¡¡G P
(
¡¡P Q
)
¡¡Q R
,
¡¡R S
	loginInfo
¡¡T ]
.
¡¡] ^
Login
¡¡^ c
)
¡¡c d
;
¡¡d e
return
¬¬ 
result
¬¬ 
.
¬¬ 
	Succeeded
¬¬ #
?
¬¬$ %
RedirectToAction
¬¬& 6
(
¬¬6 7
$str
¬¬7 E
)
¬¬E F
:
¬¬G H
RedirectToAction
¬¬I Y
(
¬¬Y Z
$str
¬¬Z h
,
¬¬h i
new
¬¬j m
{
¬¬n o
Message
¬¬p w
=
¬¬x y
ManageMessageId¬¬z â
.¬¬â ä
Error¬¬ä è
}¬¬ê ë
)¬¬ë í
;¬¬í ì
}
√√ 	
	protected
≈≈ 
override
≈≈ 
void
≈≈ 
Dispose
≈≈  '
(
≈≈' (
bool
≈≈( ,
	disposing
≈≈- 6
)
≈≈6 7
{
∆∆ 	
if
«« 
(
«« 
	disposing
«« 
&&
«« 
_userManager
«« )
!=
««* ,
null
««- 1
)
««1 2
{
»» 
_userManager
…… 
.
…… 
Dispose
…… $
(
……$ %
)
……% &
;
……& '
_userManager
   
=
   
null
   #
;
  # $
}
ÀÀ 
base
ÕÕ 
.
ÕÕ 
Dispose
ÕÕ 
(
ÕÕ 
	disposing
ÕÕ "
)
ÕÕ" #
;
ÕÕ# $
}
ŒŒ 	
private
““ 
const
““ 
string
““ 
XsrfKey
““ $
=
““% &
$str
““' /
;
““/ 0
private
‘‘ $
IAuthenticationManager
‘‘ &#
AuthenticationManager
‘‘' <
{
’’ 	
get
÷÷ 
{
◊◊ 
return
ÿÿ 
HttpContext
ÿÿ "
.
ÿÿ" #
GetOwinContext
ÿÿ# 1
(
ÿÿ1 2
)
ÿÿ2 3
.
ÿÿ3 4
Authentication
ÿÿ4 B
;
ÿÿB C
}
ŸŸ 
}
⁄⁄ 	
private
‹‹ 
void
‹‹ 
	AddErrors
‹‹ 
(
‹‹ 
IdentityResult
‹‹ -
result
‹‹. 4
)
‹‹4 5
{
›› 	
foreach
ﬁﬁ 
(
ﬁﬁ 
var
ﬁﬁ 
error
ﬁﬁ 
in
ﬁﬁ !
result
ﬁﬁ" (
.
ﬁﬁ( )
Errors
ﬁﬁ) /
)
ﬁﬁ/ 0
{
ﬂﬂ 

ModelState
‡‡ 
.
‡‡ 
AddModelError
‡‡ (
(
‡‡( )
$str
‡‡) +
,
‡‡+ ,
error
‡‡- 2
)
‡‡2 3
;
‡‡3 4
}
·· 
}
‚‚ 	
private
‰‰ 
bool
‰‰ 
HasPassword
‰‰  
(
‰‰  !
)
‰‰! "
{
ÂÂ 	
var
ÊÊ 
user
ÊÊ 
=
ÊÊ 
UserManager
ÊÊ "
.
ÊÊ" #
FindById
ÊÊ# +
(
ÊÊ+ ,
User
ÊÊ, 0
.
ÊÊ0 1
Identity
ÊÊ1 9
.
ÊÊ9 :
	GetUserId
ÊÊ: C
(
ÊÊC D
)
ÊÊD E
)
ÊÊE F
;
ÊÊF G
if
ÁÁ 
(
ÁÁ 
user
ÁÁ 
!=
ÁÁ 
null
ÁÁ 
)
ÁÁ 
{
ËË 
return
ÈÈ 
user
ÈÈ 
.
ÈÈ 
PasswordHash
ÈÈ (
!=
ÈÈ) +
null
ÈÈ, 0
;
ÈÈ0 1
}
ÍÍ 
return
ÎÎ 
false
ÎÎ 
;
ÎÎ 
}
ÏÏ 	
private
ÓÓ 
bool
ÓÓ 
HasPhoneNumber
ÓÓ #
(
ÓÓ# $
)
ÓÓ$ %
{
ÔÔ 	
var
 
user
 
=
 
UserManager
 "
.
" #
FindById
# +
(
+ ,
User
, 0
.
0 1
Identity
1 9
.
9 :
	GetUserId
: C
(
C D
)
D E
)
E F
;
F G
if
ÒÒ 
(
ÒÒ 
user
ÒÒ 
!=
ÒÒ 
null
ÒÒ 
)
ÒÒ 
{
ÚÚ 
return
ÛÛ 
user
ÛÛ 
.
ÛÛ 
PhoneNumber
ÛÛ '
!=
ÛÛ( *
null
ÛÛ+ /
;
ÛÛ/ 0
}
ÙÙ 
return
ıı 
false
ıı 
;
ıı 
}
ˆˆ 	
public
¯¯ 
enum
¯¯ 
ManageMessageId
¯¯ #
{
˘˘ 	
AddPhoneSuccess
˙˙ 
,
˙˙ #
ChangePasswordSuccess
˚˚ !
,
˚˚! "!
SetTwoFactorSuccess
¸¸ 
,
¸¸   
SetPasswordSuccess
˝˝ 
,
˝˝  
RemoveLoginSuccess
˛˛ 
,
˛˛  
RemovePhoneSuccess
ˇˇ 
,
ˇˇ 
Error
ÄÄ 
}
ÅÅ 	
}
ÑÑ 
}ÖÖ Ër
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\PersonaController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
PersonaController "
:# $

Controller% /
{ 
private 
readonly 
IActorNegocioLogica ,
_logicaActorNegocio- @
;@ A
public 
PersonaController  
(  !
)! "
{ 	
_logicaActorNegocio 
=  !
Dependencia" -
.- .
Resolve. 5
<5 6
IActorNegocioLogica6 I
>I J
(J K
)K L
;L M
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str %
)% &
]& '
public 
ActionResult 
Cliente #
(# $
)$ %
{ 	
ViewBag 
. 
idRolCliente  
=! "
ActorSettings# 0
.0 1
Default1 8
.8 9
IdRolCliente9 E
;E F
ViewBag 
. 
idClienteGenerico %
=& '
ActorSettings( 5
.5 6
Default6 =
.= >
IdClienteGenerico> O
;O P
ViewBag 
. ;
/mascaraDeVisualizacionValidacionRegistroCliente C
=D E
ActorSettingsF S
.S T
DefaultT [
.[ \<
/MascaraDeVisualizacionValidacionRegistroCliente	\ ã
;
ã å
ViewBag 
. 4
(mascaraDatosAdicionalesEnBandejaClientes <
== >
ActorSettings? L
.L M
DefaultM T
.T U4
(MascaraDatosAdicionalesEnBandejaClientesU }
;} ~
return 
View 
( 
) 
; 
} 	
[!! 	
	Authorize!!	 
(!! 
Roles!! 
=!! 
$str!! &
)!!& '
]!!' (
public"" 
ActionResult"" 
	Proveedor"" %
(""% &
)""& '
{## 	
ViewBag$$ 
.$$ 
idRolProveedor$$ "
=$$# $
ActorSettings$$% 2
.$$2 3
Default$$3 :
.$$: ;
IdRolProveedor$$; I
;$$I J
ViewBag%% 
.%% 
idProveedorGenerico%% '
=%%( )
ActorSettings%%* 7
.%%7 8
Default%%8 ?
.%%? @
idProveedorGenerico%%@ S
;%%S T
ViewBag&& 
.&& =
1mascaraDeVisualizacionValidacionRegistroProveedor&& E
=&&F G
ActorSettings&&H U
.&&U V
Default&&V ]
.&&] ^>
1MascaraDeVisualizacionValidacionRegistroProveedor	&&^ è
;
&&è ê
return11 
View11 
(11 
)11 
;11 
}22 	
[44 	
	Authorize44	 
(44 
Roles44 
=44 
$str44 A
)44A B
]44B C
public55 
ActionResult55 
Empleado55 $
(55$ %
)55% &
{66 	
ViewBag77 
.77 
idRolEmpleado77 !
=77" #
ActorSettings77$ 1
.771 2
Default772 9
.779 :
IdRolEmpleado77: G
;77G H
ViewBag88 
.88 <
0mascaraDeVisualizacionValidacionRegistroEmpleado88 D
=88E F
ActorSettings88G T
.88T U
Default88U \
.88\ ]=
0MascaraDeVisualizacionValidacionRegistroEmpleado	88] ç
;
88ç é
return99 
View99 
(99 
)99 
;99 
}:: 	
public<< 

JsonResult<< )
obtenerDenominacionClaseActor<< 7
(<<7 8
int<<8 ;
IdTipoDeActor<<< I
)<<I J
{== 	
try>> 
{?? 
string@@ 
denominacion@@ #
=@@$ %
_logicaActorNegocio@@& 9
.@@9 :$
ObtenerDenominacionClase@@: R
(@@R S
IdTipoDeActor@@S `
)@@` a
;@@a b
returnAA 
JsonAA 
(AA 
denominacionAA (
)AA( )
;AA) *
}BB 
catchCC 
(CC 
	ExceptionCC 
eCC 
)CC 
{DD 
returnEE 
JsonEE 
(EE 
UtilEE  
.EE  !
	ErrorJsonEE! *
(EE* +
eEE+ ,
)EE, -
)EE- .
;EE. /
}FF 
}GG 	
publicHH 

JsonResultHH 
ListarTiposDeActorHH ,
(HH, -
)HH- .
{II 	
tryJJ 
{KK 
ListLL 
<LL 

Tipo_actorLL 
>LL  

resultadosLL! +
=LL, -
_logicaActorNegocioLL. A
.LLA B
ObtenerTiposDeActorLLB U
(LLU V
)LLV W
;LLW X
ListMM 
<MM "
ComboGenericoViewModelMM +
>MM+ ,
rolesMM- 2
=MM3 4
newMM5 8
ListMM9 =
<MM= >"
ComboGenericoViewModelMM> T
>MMT U
(MMU V
)MMV W
;MMW X
foreachNN 
(NN 
varNN 
itemNN !
inNN" $

resultadosNN% /
)NN/ 0
{OO 
rolesPP 
.PP 
AddPP 
(PP 
newPP !"
ComboGenericoViewModelPP" 8
(PP8 9
itemPP9 =
.PP= >
idPP> @
,PP@ A
itemPPB F
.PPF G
nombrePPG M
)PPM N
)PPN O
;PPO P
}QQ 
returnRR 
JsonRR 
(RR 
rolesRR !
)RR! "
;RR" #
}SS 
catchTT 
(TT 
	ExceptionTT 
eTT 
)TT 
{UU 
returnVV 
JsonVV 
(VV 
UtilVV  
.VV  !
	ErrorJsonVV! *
(VV* +
eVV+ ,
)VV, -
)VV- .
;VV. /
}WW 
}XX 	
publicZZ 

JsonResultZZ #
ListarTiposDeClaseActorZZ 1
(ZZ1 2
intZZ2 5
IdTipoDeActorZZ6 C
)ZZC D
{[[ 	
try\\ 
{]] 
List^^ 
<^^ 
Clase_actor^^  
>^^  !

resultados^^" ,
=^^- .
_logicaActorNegocio^^/ B
.^^B C$
ObtenerTiposDeClaseActor^^C [
(^^[ \
IdTipoDeActor^^\ i
)^^i j
;^^j k
List__ 
<__ "
ComboGenericoViewModel__ +
>__+ ,
combo__- 2
=__3 4
new__5 8
List__9 =
<__= >"
ComboGenericoViewModel__> T
>__T U
(__U V
)__V W
;__W X
foreach`` 
(`` 
var`` 
item`` !
in``" $

resultados``% /
)``/ 0
{aa 
combobb 
.bb 
Addbb 
(bb 
newbb !"
ComboGenericoViewModelbb" 8
(bb8 9
itembb9 =
.bb= >
idbb> @
,bb@ A
itembbB F
.bbF G
nombrebbG M
)bbM N
)bbN O
;bbO P
}cc 
returndd 
Jsondd 
(dd 
combodd !
)dd! "
;dd" #
}ee 
catchff 
(ff 
	Exceptionff 
eff 
)ff 
{gg 
returnhh 
Jsonhh 
(hh 
Utilhh  
.hh  !
	ErrorJsonhh! *
(hh* +
ehh+ ,
)hh, -
)hh- .
;hh. /
}ii 
}jj 	
publicll 

JsonResultll )
ListarTiposDeEstadoLegalActorll 7
(ll7 8
intll8 ;
IdTipoDeActorll< I
)llI J
{mm 	
trynn 
{oo 
Listpp 
<pp 
Estado_legalpp !
>pp! "

resultadospp# -
=pp. /
_logicaActorNegociopp0 C
.ppC D%
ObtenerTiposDeEstadoLegalppD ]
(pp] ^
IdTipoDeActorpp^ k
)ppk l
;ppl m
Listqq 
<qq "
ComboGenericoViewModelqq +
>qq+ ,
rolesqq- 2
=qq3 4
newqq5 8
Listqq9 =
<qq= >"
ComboGenericoViewModelqq> T
>qqT U
(qqU V
)qqV W
;qqW X
foreachrr 
(rr 
varrr 
itemrr !
inrr" $

resultadosrr% /
)rr/ 0
{ss 
rolestt 
.tt 
Addtt 
(tt 
newtt !"
ComboGenericoViewModeltt" 8
(tt8 9
itemtt9 =
.tt= >
idtt> @
,tt@ A
itemttB F
.ttF G
nombrettG M
)ttM N
)ttN O
;ttO P
}uu 
returnvv 
Jsonvv 
(vv 
rolesvv !
)vv! "
;vv" #
}ww 
catchxx 
(xx 
	Exceptionxx 
exx 
)xx 
{yy 
returnzz 
Jsonzz 
(zz 
Utilzz  
.zz  !
	ErrorJsonzz! *
(zz* +
ezz+ ,
)zz, -
)zz- .
;zz. /
}{{ 
}|| 	
public}} 

JsonResult}} 
ObtenerListaSexos}} +
(}}+ ,
)}}, -
{~~ 	
try 
{
ÄÄ 
List
ÅÅ 
<
ÅÅ 
Clase_actor
ÅÅ  
>
ÅÅ  !

resultados
ÅÅ" ,
=
ÅÅ- .!
_logicaActorNegocio
ÅÅ/ B
.
ÅÅB C
ObtenerListaSexos
ÅÅC T
(
ÅÅT U
)
ÅÅU V
;
ÅÅV W
List
ÇÇ 
<
ÇÇ 
ItemGenerico
ÇÇ !
>
ÇÇ! "
combo
ÇÇ# (
=
ÇÇ) *
new
ÇÇ+ .
List
ÇÇ/ 3
<
ÇÇ3 4
ItemGenerico
ÇÇ4 @
>
ÇÇ@ A
(
ÇÇA B
)
ÇÇB C
;
ÇÇC D
foreach
ÉÉ 
(
ÉÉ 
var
ÉÉ 
item
ÉÉ !
in
ÉÉ" $

resultados
ÉÉ% /
)
ÉÉ/ 0
{
ÑÑ 
combo
ÖÖ 
.
ÖÖ 
Add
ÖÖ 
(
ÖÖ 
new
ÖÖ !
ItemGenerico
ÖÖ" .
(
ÖÖ. /
item
ÖÖ/ 3
.
ÖÖ3 4
id
ÖÖ4 6
,
ÖÖ6 7
item
ÖÖ8 <
.
ÖÖ< =
nombre
ÖÖ= C
)
ÖÖC D
)
ÖÖD E
;
ÖÖE F
}
ÜÜ 
return
áá 
Json
áá 
(
áá 
combo
áá !
)
áá! "
;
áá" #
}
àà 
catch
ââ 
(
ââ 
	Exception
ââ 
e
ââ 
)
ââ 
{
ää 
return
ãã 
Json
ãã 
(
ãã 
Util
ãã  
.
ãã  !
	ErrorJson
ãã! *
(
ãã* +
e
ãã+ ,
)
ãã, -
)
ãã- .
;
ãã. /
}
åå 
}
çç 	
public
èè 

JsonResult
èè )
ObtenerListaTiposDeSociedad
èè 5
(
èè5 6
)
èè6 7
{
êê 	
try
ëë 
{
íí 
List
ìì 
<
ìì 
Clase_actor
ìì  
>
ìì  !

resultados
ìì" ,
=
ìì- .!
_logicaActorNegocio
ìì/ B
.
ììB C)
ObtenerListaTiposDeSociedad
ììC ^
(
ìì^ _
)
ìì_ `
;
ìì` a
List
îî 
<
îî 
ItemGenerico
îî !
>
îî! "
roles
îî# (
=
îî) *
new
îî+ .
List
îî/ 3
<
îî3 4
ItemGenerico
îî4 @
>
îî@ A
(
îîA B
)
îîB C
;
îîC D
foreach
ïï 
(
ïï 
var
ïï 
item
ïï !
in
ïï" $

resultados
ïï% /
)
ïï/ 0
{
ññ 
roles
óó 
.
óó 
Add
óó 
(
óó 
new
óó !
ItemGenerico
óó" .
(
óó. /
item
óó/ 3
.
óó3 4
id
óó4 6
,
óó6 7
item
óó8 <
.
óó< =
nombre
óó= C
)
óóC D
)
óóD E
;
óóE F
}
òò 
return
ôô 
Json
ôô 
(
ôô 
roles
ôô !
)
ôô! "
;
ôô" #
}
öö 
catch
õõ 
(
õõ 
	Exception
õõ 
e
õõ 
)
õõ 
{
úú 
return
ùù 
Json
ùù 
(
ùù 
Util
ùù  
.
ùù  !
	ErrorJson
ùù! *
(
ùù* +
e
ùù+ ,
)
ùù, -
)
ùù- .
;
ùù. /
}
ûû 
}
üü 	
public
°°	 

JsonResult
°° (
ObtenerListaEstadosCiviles
°° 5
(
°°5 6
)
°°6 7
{
¢¢ 	
try
££ 
{
§§ 
List
•• 
<
•• 
Estado_legal
•• !
>
••! "

resultados
••# -
=
••. /!
_logicaActorNegocio
••0 C
.
••C D(
ObtenerListaEstadosCiviles
••D ^
(
••^ _
)
••_ `
;
••` a
List
¶¶ 
<
¶¶ 
ItemGenerico
¶¶ !
>
¶¶! "
roles
¶¶# (
=
¶¶) *
new
¶¶+ .
List
¶¶/ 3
<
¶¶3 4
ItemGenerico
¶¶4 @
>
¶¶@ A
(
¶¶A B
)
¶¶B C
;
¶¶C D
foreach
ßß 
(
ßß 
var
ßß 
item
ßß !
in
ßß" $

resultados
ßß% /
)
ßß/ 0
{
®® 
roles
©© 
.
©© 
Add
©© 
(
©© 
new
©© !
ItemGenerico
©©" .
(
©©. /
item
©©/ 3
.
©©3 4
id
©©4 6
,
©©6 7
item
©©8 <
.
©©< =
nombre
©©= C
)
©©C D
)
©©D E
;
©©E F
}
™™ 
return
´´ 
Json
´´ 
(
´´ 
roles
´´ !
)
´´! "
;
´´" #
}
¨¨ 
catch
≠≠ 
(
≠≠ 
	Exception
≠≠ 
e
≠≠ 
)
≠≠ 
{
ÆÆ 
return
ØØ 
Json
ØØ 
(
ØØ 
Util
ØØ  
.
ØØ  !
	ErrorJson
ØØ! *
(
ØØ* +
e
ØØ+ ,
)
ØØ, -
)
ØØ- .
;
ØØ. /
}
∞∞ 
}
±± 	
}
≤≤ 
}≥≥ ñ¬
SD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\PrecioController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
PrecioController !
:" #
BaseController$ 2
{ 
private 
readonly 
IPrecioLogica &
_precioLogica' 4
;4 5
private 
readonly 
IMaestroLogica '
_maestroLogica( 6
;6 7
private 
readonly 
IConceptoLogica (
conceptoLogica) 7
;7 8
private 
readonly 
IActorNegocioLogica ,
actorNegocioLogica- ?
;? @
	protected 
readonly $
ICentroDeAtencion_Logica 3#
centroDeAtencion_Logica4 K
;K L
public 
PrecioController 
(  
)  !
{ 	
_maestroLogica 
= 
Dependencia (
.( )
Resolve) 0
<0 1
IMaestroLogica1 ?
>? @
(@ A
)A B
;B C
_precioLogica 
= 
Dependencia '
.' (
Resolve( /
</ 0
IPrecioLogica0 =
>= >
(> ?
)? @
;@ A
conceptoLogica 
= 
Dependencia (
.( )
Resolve) 0
<0 1
IConceptoLogica1 @
>@ A
(A B
)B C
;C D
actorNegocioLogica 
=  
Dependencia! ,
., -
Resolve- 4
<4 5
IActorNegocioLogica5 H
>H I
(I J
)J K
;K L#
centroDeAtencion_Logica #
=$ %
Dependencia& 1
.1 2
Resolve2 9
<9 :$
ICentroDeAtencion_Logica: R
>R S
(S T
)T U
;U V
} 	
[   	
	Authorize  	 
(   
Roles   
=   
$str   &
)  & '
]  ' (
public!! 
ActionResult!! 
Precio!! "
(!!" #
)!!# $
{"" 	
ViewBag## 
.## #
numeroDecimalesEnPrecio## +
=##, -
AplicacionSettings##. @
.##@ A
Default##A H
.##H I#
NumeroDecimalesEnPrecio##I `
;##` a
return$$ 
View$$ 
($$ 
)$$ 
;$$ 
}%% 	
[&& 	
	Authorize&&	 
(&& 
Roles&& 
=&& 
$str&& &
)&&& '
]&&' (
public'' 
ActionResult'' 
	Descuento'' %
(''% &
)''& '
{(( 	
return)) 
View)) 
()) 
))) 
;)) 
}** 	
[++ 	
	Authorize++	 
(++ 
Roles++ 
=++ 
$str++ &
)++& '
]++' (
public,, 
ActionResult,, 
Bonificacion,, (
(,,( )
),,) *
{-- 	
return.. 
View.. 
(.. 
).. 
;.. 
}// 	
public11 

JsonResult11 
ObtenerPrecios11 (
(11( )
)11) *
{22 	
try33 
{44 
var55 
precios55 
=55 
_precioLogica55 +
.55+ ,
ObtenerPrecios55, :
(55: ;
)55; <
;55< =
var66 

jsonResult66 
=66  
Json66! %
(66% &
precios66& -
,66- .
JsonRequestBehavior66/ B
.66B C
AllowGet66C K
)66K L
;66L M

jsonResult77 
.77 
MaxJsonLength77 (
=77) *
int77+ .
.77. /
MaxValue77/ 7
;777 8
return88 

jsonResult88 !
;88! "
}CC 
catchDD 
(DD 
	ExceptionDD 
eDD 
)DD 
{EE 
returnFF 
JsonFF 
(FF 
UtilFF  
.FF  !
	ErrorJsonFF! *
(FF* +
eFF+ ,
)FF, -
)FF- .
;FF. /
}GG 
}HH 	
publicJJ 

JsonResultJJ +
ObtenerPreciosDeConceptoNegocioJJ 9
(JJ9 :
intJJ: =
idConceptoNegocioJJ> O
)JJO P
{KK 	
tryLL 
{MM 
varNN 
puntosDePrecioNN "
=NN# $"
ComboGenericoViewModelNN% ;
.NN; <
ConvertNN< C
(NNC D#
centroDeAtencion_LogicaNND [
.NN[ \!
ObtenerPuntosDePrecioNN\ q
(NNq r
)NNr s
)NNs t
;NNt u
varOO 
tarifasDePrecioOO #
=OO$ %"
ComboGenericoViewModelOO& <
.OO< =
ConvertOO= D
(OOD E
_maestroLogicaOOE S
.OOS T
obtenerTarifasOOT b
(OOb c
)OOc d
)OOd e
;OOe f
varPP 
preciosCompraVentaPP &
=PP' (
conceptoLogicaPP) 7
.PP7 86
*ObtenerPreciosCompraVentaDeConceptoNegocioPP8 b
(PPb c
idConceptoNegocioPPc t
)PPt u
;PPu v
varQQ 
registroPrecioQQ "
=QQ# $
newQQ% (#
RegistroPrecioViewModelQQ) @
(QQ@ A
preciosCompraVentaQQA S
,QQS T
idConceptoNegocioQQU f
,QQf g
puntosDePrecioQQh v
,QQv w
tarifasDePrecio	QQx á
,
QQá à
DateTimeUtil
QQà î
.
QQî ï
FechaActual
QQï †
(
QQ† °
)
QQ° ¢
)
QQ¢ £
;
QQ£ §
returnRR 
JsonRR 
(RR 
registroPrecioRR *
)RR* +
;RR+ ,
}SS 
catchTT 
(TT 
	ExceptionTT 
eTT 
)TT 
{UU 
returnVV 
JsonVV 
(VV 
UtilVV  
.VV  !
	ErrorJsonVV! *
(VV* +
eVV+ ,
)VV, -
)VV- .
;VV. /
}WW 
}XX 	
public\\ 

JsonResult\\ 
GuardarPrecio\\ '
(\\' (#
RegistroPrecioViewModel\\( ?
registroPrecio\\@ N
)\\N O
{]] 	
try^^ 
{__ 
OperationResult`` 
	resultado``  )
=``* +
new``, /
OperationResult``0 ?
(``? @
)``@ A
;``A B
varaa 
resultaa 
=aa #
RegistroPrecioViewModelaa 4
.aa4 5
Convertaa5 <
(aa< =
registroPrecioaa= K
)aaK L
;aaL M
	resultadobb 
=bb 
_precioLogicabb )
.bb) *
EstablecerPreciobb* :
(bb: ;
resultbb; A
,bbA B
registroPreciobbC Q
.bbQ R

IdConceptobbR \
,bb\ ]
ProfileDatabb^ i
(bbi j
)bbj k
.bbk l
Empleadobbl t
.bbt u
Idbbu w
)bbw x
;bbx y
Utilcc 
.cc &
ManageIfResultIsNotSuccesscc /
(cc/ 0
	resultadocc0 9
,cc9 :
$strcc; T
)ccT U
;ccU V
returndd 
Jsondd 
(dd 
newdd 
{dd  !
	resultadodd" +
.dd+ ,
code_resultdd, 7
,dd7 8
	resultadodd9 B
.ddB C
dataddC G
,ddG H
result_descriptionddI [
=dd\ ]
$strdd^ }
}dd~ 
)	dd Ä
;
ddÄ Å
}ee 
catchff 
(ff 
	Exceptionff 
eff 
)ff 
{gg 
returnhh 
newhh  
JsonHttpStatusResulthh /
(hh/ 0
Utilhh0 4
.hh4 5
	ErrorJsonhh5 >
(hh> ?
newhh? B
	ExceptionhhC L
(hhL M
$strhhM o
,hho p
ehhq r
)hhr s
)hhs t
,hht u
HttpStatusCode	hhv Ñ
.
hhÑ Ö!
InternalServerError
hhÖ ò
)
hhò ô
;
hhô ö
}ii 
}jj 	
publickk 

JsonResultkk 
ObtenerDescuentoskk +
(kk+ ,
)kk, -
{ll 	
trymm 
{nn 
varoo 

descuentosoo 
=oo  
_precioLogicaoo! .
.oo. /
obtenerDescuentosoo/ @
(oo@ A
)ooA B
;ooB C
Listpp 
<pp 1
%BandejaBonificacionDescuentoViewModelpp :
>pp: ;
	respuestapp< E
=ppF G1
%BandejaBonificacionDescuentoViewModelppH m
.ppm n
Convertppn u
(ppu v

descuentos	ppv Ä
)
ppÄ Å
;
ppÅ Ç
returnqq 
Jsonqq 
(qq 
	respuestaqq %
)qq% &
;qq& '
}rr 
catchss 
(ss 
	Exceptionss 
ess 
)ss 
{tt 
HttpContextuu 
.uu 
Responseuu $
.uu$ %

StatusCodeuu% /
=uu0 1
$numuu2 5
;uu5 6
returnvv 
Jsonvv 
(vv 
Utilvv  
.vv  !
	ErrorJsonvv! *
(vv* +
evv+ ,
)vv, -
)vv- .
;vv. /
}ww 
}xx 	
publicyy 

JsonResultyy !
ObtenerBonificacionesyy /
(yy/ 0
)yy0 1
{zz 	
try{{ 
{|| 
var}} 
bonificaciones}} "
=}}# $
_precioLogica}}% 2
.}}2 3!
obtenerBonificaciones}}3 H
(}}H I
)}}I J
;}}J K
List~~ 
<~~ 1
%BandejaBonificacionDescuentoViewModel~~ :
>~~: ;
	respuesta~~< E
=~~F G1
%BandejaBonificacionDescuentoViewModel~~H m
.~~m n
Convert~~n u
(~~u v
bonificaciones	~~v Ñ
)
~~Ñ Ö
;
~~Ö Ü
return 
Json 
( 
	respuesta %
)% &
;& '
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ 
	Exception
ÅÅ 
e
ÅÅ 
)
ÅÅ 
{
ÇÇ 
HttpContext
ÉÉ 
.
ÉÉ 
Response
ÉÉ $
.
ÉÉ$ %

StatusCode
ÉÉ% /
=
ÉÉ0 1
$num
ÉÉ2 5
;
ÉÉ5 6
return
ÑÑ 
Json
ÑÑ 
(
ÑÑ 
Util
ÑÑ  
.
ÑÑ  !
	ErrorJson
ÑÑ! *
(
ÑÑ* +
e
ÑÑ+ ,
)
ÑÑ, -
)
ÑÑ- .
;
ÑÑ. /
}
ÖÖ 
}
ÜÜ 	
public
àà 

JsonResult
àà 
GuardarDescuento
àà *
(
àà* +,
BonificacionDescuentoViewModel
àà+ I
	descuento
ààJ S
)
ààS T
{
ââ 	
try
ää 
{
ãã 
OperationResult
åå 
	resultado
åå  )
=
åå* +
_precioLogica
åå, 9
.
åå9 :
crearDescuento
åå: H
(
ååH I
ProfileData
ååI T
(
ååT U
)
ååU V
.
ååV W,
IdCentroDeAtencionSeleccionado
ååW u
,
ååu v
	descuentoååw Ä
.ååÄ Å

MercaderiaååÅ ã
.ååã å
Idååå é
,ååé è
	descuentoååê ô
.ååô ö

Porcentajeååö §
,åå§ •
	descuentoåå¶ Ø
.ååØ ∞
Valoråå∞ µ
,ååµ ∂
	descuento
çç 
.
çç 
CantidadMinima
çç ,
,
çç, -
	descuento
çç. 7
.
çç7 8
CantidadMaxima
çç8 F
,
ççF G
	descuento
ççH Q
.
ççQ R

FechaDesde
ççR \
,
çç\ ]
	descuento
çç^ g
.
ççg h

FechaHasta
ççh r
,
ççr s
	descuento
éé 
.
éé 
Descripcion
éé )
,
éé) *
ProfileData
éé+ 6
(
éé6 7
)
éé7 8
.
éé8 9
Empleado
éé9 A
.
ééA B
Id
ééB D
)
ééD E
;
ééE F
Util
èè 
.
èè 
VerificarError
èè #
(
èè# $
	resultado
èè$ -
)
èè- .
;
èè. /
return
êê 
Json
êê 
(
êê 
new
êê 
{
êê  !
code_result
êê" -
=
êê. /
	resultado
êê0 9
.
êê9 :
code_result
êê: E
,
êêE F
data
êêG K
=
êêL M
	resultado
êêN W
.
êêW X
data
êêX \
,
êê\ ] 
result_description
êê^ p
=
êêq r
	resultado
êês |
.
êê| }
messageêê} Ñ
}êêÖ Ü
)êêÜ á
;êêá à
}
íí 
catch
ìì 
(
ìì 
	Exception
ìì 
e
ìì 
)
ìì 
{
îî 
HttpContext
ïï 
.
ïï 
Response
ïï $
.
ïï$ %

StatusCode
ïï% /
=
ïï0 1
$num
ïï2 5
;
ïï5 6
return
ññ 
Json
ññ 
(
ññ 
Util
ññ  
.
ññ  !
	ErrorJson
ññ! *
(
ññ* +
e
ññ+ ,
)
ññ, -
)
ññ- .
;
ññ. /
}
óó 
}
òò 	
public
ôô 

JsonResult
ôô !
GuardarBonificacion
ôô -
(
ôô- .,
BonificacionDescuentoViewModel
ôô. L
bonificacion
ôôM Y
)
ôôY Z
{
öö 	
try
õõ 
{
úú 
OperationResult
ùù 
	resultado
ùù  )
=
ùù* +
_precioLogica
ùù, 9
.
ùù9 :
crearBonificacion
ùù: K
(
ùùK L
ProfileData
ùùL W
(
ùùW X
)
ùùX Y
.
ùùY Z,
IdCentroDeAtencionSeleccionado
ùùZ x
,
ùùx y
bonificacionùùz Ü
.ùùÜ á

Mercaderiaùùá ë
.ùùë í
Idùùí î
,ùùî ï
bonificacionùùñ ¢
.ùù¢ £

Porcentajeùù£ ≠
,ùù≠ Æ
bonificacionùùØ ª
.ùùª º
Valorùùº ¡
,ùù¡ ¬
bonificacion
ûû  
.
ûû  !
CantidadMinima
ûû! /
,
ûû/ 0
bonificacion
ûû1 =
.
ûû= >
CantidadMaxima
ûû> L
,
ûûL M
bonificacion
ûûN Z
.
ûûZ [

FechaDesde
ûû[ e
,
ûûe f
bonificacion
ûûg s
.
ûûs t

FechaHasta
ûût ~
,
ûû~ 
bonificacion
üü  
.
üü  !"
MercaderiaReferencia
üü! 5
.
üü5 6
Id
üü6 8
,
üü8 9
bonificacion
üü: F
.
üüF G
Descripcion
üüG R
,
üüR S
ProfileData
üüT _
(
üü_ `
)
üü` a
.
üüa b
Empleado
üüb j
.
üüj k
Id
üük m
)
üüm n
;
üün o
Util
†† 
.
†† 
VerificarError
†† #
(
††# $
	resultado
††$ -
)
††- .
;
††. /
return
°° 
Json
°° 
(
°° 
new
°° 
{
°°  !
code_result
°°" -
=
°°. /
	resultado
°°0 9
.
°°9 :
code_result
°°: E
,
°°E F
data
°°G K
=
°°L M
	resultado
°°N W
.
°°W X
data
°°X \
,
°°\ ] 
result_description
°°^ p
=
°°q r
	resultado
°°s |
.
°°| }
message°°} Ñ
}°°Ö Ü
)°°Ü á
;°°á à
}
££ 
catch
§§ 
(
§§ 
	Exception
§§ 
e
§§ 
)
§§ 
{
•• 
HttpContext
¶¶ 
.
¶¶ 
Response
¶¶ $
.
¶¶$ %

StatusCode
¶¶% /
=
¶¶0 1
$num
¶¶2 5
;
¶¶5 6
return
ßß 
Json
ßß 
(
ßß 
Util
ßß  
.
ßß  !
	ErrorJson
ßß! *
(
ßß* +
e
ßß+ ,
)
ßß, -
)
ßß- .
;
ßß. /
}
®® 
}
©© 	
public
™™ 

JsonResult
™™ 
CaducarPrecio
™™ '
(
™™' (
int
™™( +
idPrecio
™™, 4
)
™™4 5
{
´´ 	
try
¨¨ 
{
≠≠ 
OperationResult
ÆÆ 
result
ÆÆ  &
=
ÆÆ' (
_precioLogica
ÆÆ) 6
.
ÆÆ6 7
caducarPrecio
ÆÆ7 D
(
ÆÆD E
idPrecio
ÆÆE M
)
ÆÆM N
;
ÆÆN O
Util
ØØ 
.
ØØ 
VerificarError
ØØ #
(
ØØ# $
result
ØØ$ *
)
ØØ* +
;
ØØ+ ,
return
∞∞ 
Json
∞∞ 
(
∞∞ 
new
∞∞ 
{
∞∞  !
code_result
∞∞" -
=
∞∞. /
result
∞∞0 6
.
∞∞6 7
code_result
∞∞7 B
,
∞∞B C
data
∞∞D H
=
∞∞I J
result
∞∞K Q
.
∞∞Q R
data
∞∞R V
,
∞∞V W 
result_description
∞∞X j
=
∞∞k l
result
∞∞m s
.
∞∞s t
title
∞∞t y
}
∞∞z {
)
∞∞{ |
;
∞∞| }
}
±± 
catch
≤≤ 
(
≤≤ 
	Exception
≤≤ 
e
≤≤ 
)
≤≤ 
{
≥≥ 
HttpContext
¥¥ 
.
¥¥ 
Response
¥¥ $
.
¥¥$ %

StatusCode
¥¥% /
=
¥¥0 1
$num
¥¥2 5
;
¥¥5 6
return
µµ 
Json
µµ 
(
µµ 
Util
µµ  
.
µµ  !
	ErrorJson
µµ! *
(
µµ* +
e
µµ+ ,
)
µµ, -
)
µµ- .
;
µµ. /
}
∂∂ 
}
∑∑ 	
public
ππ 

JsonResult
ππ 
CargarPrecio
ππ &
(
ππ& '
int
ππ' *
idPrecio
ππ+ 3
)
ππ3 4
{
∫∫ 	
try
ªª 
{
ºº 
PrecioViewModel
ΩΩ 
precio
ΩΩ  &
=
ΩΩ' (
new
ΩΩ) ,
PrecioViewModel
ΩΩ- <
(
ΩΩ< =
_precioLogica
ΩΩ= J
.
ΩΩJ K
obtenerPrecio
ΩΩK X
(
ΩΩX Y
idPrecio
ΩΩY a
)
ΩΩa b
)
ΩΩb c
;
ΩΩc d
return
ææ 
Json
ææ 
(
ææ 
precio
ææ "
)
ææ" #
;
ææ# $
}
øø 
catch
¿¿ 
(
¿¿ 
	Exception
¿¿ 
e
¿¿ 
)
¿¿ 
{
¡¡ 
return
¬¬ 
Json
¬¬ 
(
¬¬ 
Util
¬¬  
.
¬¬  !
	ErrorJson
¬¬! *
(
¬¬* +
e
¬¬+ ,
)
¬¬, -
)
¬¬- .
;
¬¬. /
}
√√ 
}
ƒƒ 	
public
∆∆ 

JsonResult
∆∆ 4
&ObtenerTarifasConPrecioMercaderiaUnica
∆∆ @
(
∆∆@ A
int
∆∆A D
idMercaderia
∆∆E Q
)
∆∆Q R
{
«« 	
try
»» 
{
…… 
List
ÀÀ 
<
ÀÀ 
Detalle_maestro
ÀÀ $
>
ÀÀ$ %
tarifas
ÀÀ& -
=
ÀÀ. /
_maestroLogica
ÀÀ0 >
.
ÀÀ> ?
obtenerTarifas
ÀÀ? M
(
ÀÀM N
)
ÀÀN O
;
ÀÀO P
List
ÃÃ 
<
ÃÃ 
Precio
ÃÃ 
>
ÃÃ 
precios
ÃÃ $
=
ÃÃ% &
_precioLogica
ÃÃ' 4
.
ÃÃ4 5+
ObtenerPreciosMercaderiaUnica
ÃÃ5 R
(
ÃÃR S
idMercaderia
ÃÃS _
)
ÃÃ_ `
;
ÃÃ` a
List
ÕÕ 
<
ÕÕ 8
*PrecioParaRegistroMercaderiaUnicaViewModel
ÕÕ ?
>
ÕÕ? @
tarifasConPrecio
ÕÕA Q
=
ÕÕR S8
*PrecioParaRegistroMercaderiaUnicaViewModel
ÕÕT ~
.
ÕÕ~ 
MatchÕÕ Ñ
(ÕÕÑ Ö
tarifasÕÕÖ å
,ÕÕå ç
preciosÕÕé ï
)ÕÕï ñ
;ÕÕñ ó
return
ŒŒ 
Json
ŒŒ 
(
ŒŒ 
tarifasConPrecio
ŒŒ ,
)
ŒŒ, -
;
ŒŒ- .
}
œœ 
catch
–– 
(
–– 
	Exception
–– 
e
–– 
)
–– 
{
—— 
HttpContext
““ 
.
““ 
Response
““ $
.
““$ %

StatusCode
““% /
=
““0 1
$num
““2 5
;
““5 6
return
”” 
Json
”” 
(
”” 
Util
””  
.
””  !
	ErrorJson
””! *
(
””* +
e
””+ ,
)
””, -
)
””- .
;
””. /
}
‘‘ 
}
’’ 	
public
◊◊ 

JsonResult
◊◊ (
ObtenerPrecioConceptoUnico
◊◊ 4
(
◊◊4 5
int
◊◊5 8

idConcepto
◊◊9 C
)
◊◊C D
{
ÿÿ 	
try
ŸŸ 
{
⁄⁄ 
List
‹‹ 
<
‹‹ 
Precio
‹‹ 
>
‹‹ 
precios
‹‹ $
=
‹‹% &
_precioLogica
‹‹' 4
.
‹‹4 5+
ObtenerPreciosMercaderiaUnica
‹‹5 R
(
‹‹R S

idConcepto
‹‹S ]
)
‹‹] ^
;
‹‹^ _
List
›› 
<
›› 0
"PrecioParaRegistroDeVentaViewModel
›› 7
>
››7 8
preciosVenta
››9 E
=
››F G0
"PrecioParaRegistroDeVentaViewModel
››H j
.
››j k
Convert
››k r
(
››r s
precios
››s z
)
››z {
;
››{ |
return
ﬁﬁ 
Json
ﬁﬁ 
(
ﬁﬁ 
preciosVenta
ﬁﬁ (
)
ﬁﬁ( )
;
ﬁﬁ) *
}
ﬂﬂ 
catch
‡‡ 
(
‡‡ 
	Exception
‡‡ 
e
‡‡ 
)
‡‡ 
{
·· 
HttpContext
‚‚ 
.
‚‚ 
Response
‚‚ $
.
‚‚$ %

StatusCode
‚‚% /
=
‚‚0 1
$num
‚‚2 5
;
‚‚5 6
return
„„ 
Json
„„ 
(
„„ 
Util
„„  
.
„„  !
	ErrorJson
„„! *
(
„„* +
e
„„+ ,
)
„„, -
)
„„- .
;
„„. /
}
‰‰ 
}
ÂÂ 	
public
ÁÁ 

JsonResult
ÁÁ 4
&GuardarTarifasConPrecioMercaderiaUnica
ÁÁ @
(
ÁÁ@ A
List
ÁÁA E
<
ÁÁE F8
*PrecioParaRegistroMercaderiaUnicaViewModel
ÁÁF p
>
ÁÁp q
tarifasConPrecioÁÁr Ç
,ÁÁÇ É
intÁÁÑ á
idMercaderiaÁÁà î
)ÁÁî ï
{
ËË 	
try
ÍÍ 
{
ÎÎ 
OperationResult
ÏÏ 
	resultado
ÏÏ  )
;
ÏÏ) *
	resultado
ÓÓ 
=
ÓÓ 
_precioLogica
ÓÓ )
.
ÓÓ) *
establecerPrecios
ÓÓ* ;
(
ÓÓ; <
ProfileData
ÓÓ< G
(
ÓÓG H
)
ÓÓH I
.
ÓÓI J0
"IdCentroAtencionQueTieneLosPrecios
ÓÓJ l
,
ÓÓl m
ActorSettings
ÓÓn {
.
ÓÓ{ |
DefaultÓÓ| É
.ÓÓÉ Ñ"
IdActorNegocioSedeÓÓÑ ñ
,ÓÓñ ó
ProfileDataÓÓò £
(ÓÓ£ §
)ÓÓ§ •
.ÓÓ• ¶
EmpleadoÓÓ¶ Æ
.ÓÓÆ Ø
IdÓÓØ ±
,ÓÓ± ≤:
*PrecioParaRegistroMercaderiaUnicaViewModelÓÓ≥ ›
.ÓÓ› ﬁ
ConvertÓÓﬁ Â
(ÓÓÂ Ê 
tarifasConPrecioÓÓÊ ˆ
)ÓÓˆ ˜
,ÓÓ˜ ¯
idMercaderiaÓÓ˘ Ö
)ÓÓÖ Ü
;ÓÓÜ á
Util
 
.
 
VerificarError
 #
(
# $
	resultado
$ -
)
- .
;
. /
return
ÒÒ 
Json
ÒÒ 
(
ÒÒ 
new
ÒÒ 
{
ÒÒ  !
code_result
ÒÒ" -
=
ÒÒ. /
	resultado
ÒÒ0 9
.
ÒÒ9 :
code_result
ÒÒ: E
,
ÒÒE F
data
ÒÒG K
=
ÒÒL M
	resultado
ÒÒN W
.
ÒÒW X
data
ÒÒX \
,
ÒÒ\ ] 
result_description
ÒÒ^ p
=
ÒÒq r
$strÒÒs í
}ÒÒì î
)ÒÒî ï
;ÒÒï ñ
}
ÛÛ 
catch
ÙÙ 
(
ÙÙ 
	Exception
ÙÙ 
e
ÙÙ 
)
ÙÙ 
{
ıı 
HttpContext
ˆˆ 
.
ˆˆ 
Response
ˆˆ $
.
ˆˆ$ %

StatusCode
ˆˆ% /
=
ˆˆ0 1
$num
ˆˆ2 5
;
ˆˆ5 6
return
˜˜ 
Json
˜˜ 
(
˜˜ 
Util
˜˜  
.
˜˜  !
	ErrorJson
˜˜! *
(
˜˜* +
e
˜˜+ ,
)
˜˜, -
)
˜˜- .
;
˜˜. /
}
¯¯ 
}
˘˘ 	
}
˝˝ 
}˛˛ ”Ì
VD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\ProveedorController.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Controllers& 1
{ 
public 

class 
ProveedorController $
:% &
ActorBaseController' :
{ 
private 
readonly 
IActorNegocioLogica ,
_logica- 4
;4 5
private 
readonly *
IValidacionActorNegocio_Logica 7)
_validacionActorNegocioLogica8 U
;U V
public 
ProveedorController "
(" #
)# $
{ 	
_logica 
= 
Dependencia !
.! "
Resolve" )
<) *
IActorNegocioLogica* =
>= >
(> ?
)? @
;@ A)
_validacionActorNegocioLogica )
=* +
Dependencia, 7
.7 8
Resolve8 ?
<? @*
IValidacionActorNegocio_Logica@ ^
>^ _
(_ `
)` a
;a b
} 	
public 

JsonResult 
ListarProveedores +
(+ ,
), -
{ 	
try   
{!! 
List"" 
<"" %
BandejaProveedorViewModel"" .
>"". /
	respuesta""0 9
="": ;%
BandejaProveedorViewModel""< U
.""U V
Convert""V ]
(""] ^
_logica""^ e
.""e f'
ObtenerProveedoresVigentes	""f Ä
(
""Ä Å
)
""Å Ç
)
""Ç É
;
""É Ñ
return## 
Json## 
(## 
	respuesta## %
)##% &
;##& '
}$$ 
catch%% 
(%% 
	Exception%% 
e%% 
)%% 
{&& 
return'' 
Json'' 
('' 
Util''  
.''  !
	ErrorJson''! *
(''* +
e''+ ,
)'', -
)''- .
;''. /
}(( 
}** 	
public,, 

JsonResult,, 
GuardarProveedor,, *
(,,* +
ProveedorViewModel,,+ =
	proveedor,,> G
),,G H
{-- 	
try.. 
{// 
List00 
<00 
	Direccion00 
>00 
direcciones00  +
=00, -
new00. 1
List002 6
<006 7
	Direccion007 @
>00@ A
(00A B
)00B C
;00C D
OperationResult11 
result11  &
;11& '
if22 
(22 
	proveedor22 
.22 
Id22  
>22! "
$num22# $
)22$ %
{33 
if44 
(44 
	proveedor44 !
.44! "
Direcciones44" -
!=44. 0
null441 5
)445 6
{55 
foreach66 
(66  !
var66! $
item66% )
in66* ,
	proveedor66- 6
.666 7
Direcciones667 B
)66B C
{77 
if88 
(88  
item88  $
.88$ %
Id88% '
>88( )
$num88* +
)88+ ,
{99 
direcciones::  +
.::+ ,
Add::, /
(::/ 0
new::0 3
	Direccion::4 =
(::= >
item::> B
.::B C
Id::C E
,::E F
	proveedor::G P
.::P Q
IdActor::Q X
,::X Y
item::Z ^
.::^ _
Tipo::_ c
.::c d
Id::d f
,::f g
item::h l
.::l m
Nacion::m s
.::s t
Id::t v
,::v w
item::x |
.::| }
Ubigeo	::} É
.
::É Ñ
Id
::Ñ Ü
,
::Ü á
item
::à å
.
::å ç
Detalle
::ç î
,
::î ï
null;;$ (
,;;( )
null;;* .
,;;. /
item;;0 4
.;;4 5
EsPrincipal;;5 @
,;;@ A
item;;B F
.;;F G
	EsVigente;;G P
);;P Q
);;Q R
;;;R S
}<< 
else==  
{>> 
direcciones??  +
.??+ ,
Add??, /
(??/ 0
new??0 3
	Direccion??4 =
(??= >
	proveedor??> G
.??G H
IdActor??H O
,??O P
item??Q U
.??U V
Tipo??V Z
.??Z [
Id??[ ]
,??] ^
MaestroSettings??_ n
.??n o
Default??o v
.??v w'
IdDetalleMaestroNacionPeru	??w ë
,
??ë í
item
??ì ó
.
??ó ò
Ubigeo
??ò û
.
??û ü
Id
??ü °
,
??° ¢
item@@$ (
.@@( )
Detalle@@) 0
,@@0 1
null@@2 6
,@@6 7
null@@8 <
,@@< =
item@@> B
.@@B C
EsPrincipal@@C N
,@@N O
item@@P T
.@@T U
	EsVigente@@U ^
)@@^ _
)@@_ `
;@@` a
}AA 
}BB 
}CC 
resultDD 
=DD 
_logicaDD $
.DD$ %
ActualizarProveedorDD% 8
(DD8 9
	proveedorDD9 B
.DDB C
IdDDC E
,DDE F
	proveedorDDG P
.DDP Q
IdActorDDQ X
,DDX Y
	proveedorDDZ c
.DDc d
CodigoDDd j
,DDj k
	proveedorDDl u
.DDu v
TipoPersona	DDv Å
.
DDÅ Ç
Id
DDÇ Ñ
,
DDÑ Ö
	proveedor
DDÜ è
.
DDè ê
RazonSocial
DDê õ
,
DDõ ú
	proveedor
DDù ¶
.
DD¶ ß
ApellidoPaterno
DDß ∂
,
DD∂ ∑
	proveedor
DD∏ ¡
.
DD¡ ¬
ApellidoMaterno
DD¬ —
,
DD— “
	proveedor
DD” ‹
.
DD‹ ›
Nombres
DD› ‰
,
DD‰ Â
	proveedorEE "
.EE" #
NombreComercialEE# 2
,EE2 3
	proveedorEE4 =
.EE= >
NombreCortoEE> I
,EEI J
	proveedorEEK T
.EET U"
TipoDocumentoIdentidadEEU k
.EEk l
IdEEl n
,EEn o
	proveedorEEp y
.EEy z%
NumeroDocumentoIdentidad	EEz í
,
EEí ì
	proveedorFF "
.FF" #

ClaseActorFF# -
!=FF. 0
nullFF1 5
?FF6 7
	proveedorFF8 A
.FFA B

ClaseActorFFB L
.FFL M
IdFFM O
:FFP Q
(FFR S
intFFS V
?FFV W
)FFW X
nullFFX \
,FF\ ]
	proveedorFF^ g
.FFg h
EstadoLegalActorFFh x
!=FFy {
null	FF| Ä
?
FFÅ Ç
	proveedor
FFÉ å
.
FFå ç
EstadoLegalActor
FFç ù
.
FFù û
Id
FFû †
:
FF° ¢
(
FF£ §
int
FF§ ß
?
FFß ®
)
FF® ©
null
FF© ≠
,
FF≠ Æ
	proveedorGG "
.GG" #
CorreoGG# )
,GG) *
	proveedorGG+ 4
.GG4 5
TelefonoGG5 =
,GG= >
direccionesGG? J
)GGJ K
;GGK L
}HH 
elseII 
{JJ 
ifKK 
(KK 
	proveedorKK !
.KK! "
IdActorKK" )
>KK* +
$numKK, -
)KK- .
{LL 
ifMM 
(MM 
	proveedorMM %
.MM% &
DireccionesMM& 1
!=MM2 4
nullMM5 9
)MM9 :
{NN 
foreachOO #
(OO$ %
varOO% (
itemOO) -
inOO. 0
	proveedorOO1 :
.OO: ;
DireccionesOO; F
)OOF G
{PP 
ifQQ  "
(QQ# $
itemQQ$ (
.QQ( )
IdQQ) +
>QQ, -
$numQQ. /
)QQ/ 0
{RR  !
direccionesSS$ /
.SS/ 0
AddSS0 3
(SS3 4
newSS4 7
	DireccionSS8 A
(SSA B
itemSSB F
.SSF G
IdSSG I
,SSI J
	proveedorSSK T
.SST U
IdActorSSU \
,SS\ ]
itemSS^ b
.SSb c
TipoSSc g
.SSg h
IdSSh j
,SSj k
itemSSl p
.SSp q
NacionSSq w
.SSw x
IdSSx z
,SSz {
item	SS| Ä
.
SSÄ Å
Ubigeo
SSÅ á
.
SSá à
Id
SSà ä
,
SSä ã
item
SSå ê
.
SSê ë
Detalle
SSë ò
,
SSò ô
nullTT( ,
,TT, -
nullTT. 2
,TT2 3
itemTT4 8
.TT8 9
EsPrincipalTT9 D
,TTD E
itemTTF J
.TTJ K
	EsVigenteTTK T
)TTT U
)TTU V
;TTV W
}UU  !
elseVV  $
{WW  !
direccionesXX$ /
.XX/ 0
AddXX0 3
(XX3 4
newXX4 7
	DireccionXX8 A
(XXA B
	proveedorXXB K
.XXK L
IdActorXXL S
,XXS T
itemXXU Y
.XXY Z
TipoXXZ ^
.XX^ _
IdXX_ a
,XXa b
MaestroSettingsXXc r
.XXr s
DefaultXXs z
.XXz {'
IdDetalleMaestroNacionPeru	XX{ ï
,
XXï ñ
itemYY( ,
.YY, -
UbigeoYY- 3
.YY3 4
IdYY4 6
,YY6 7
itemYY8 <
.YY< =
DetalleYY= D
,YYD E
nullYYF J
,YYJ K
nullYYL P
,YYP Q
itemYYR V
.YYV W
EsPrincipalYYW b
,YYb c
itemYYd h
.YYh i
	EsVigenteYYi r
)YYr s
)YYs t
;YYt u
}ZZ  !
}[[ 
}\\ 
result]] 
=]]  
_logica]]! (
.]]( )+
CrearProveedorActualizandoActor]]) H
(]]H I
	proveedor]]I R
.]]R S
IdActor]]S Z
,]]Z [
	proveedor]]\ e
.]]e f
TipoPersona]]f q
.]]q r
Id]]r t
,]]t u
	proveedor]]v 
.	]] Ä
RazonSocial
]]Ä ã
,
]]ã å
	proveedor
]]ç ñ
.
]]ñ ó
ApellidoPaterno
]]ó ¶
,
]]¶ ß
	proveedor
]]® ±
.
]]± ≤
ApellidoMaterno
]]≤ ¡
,
]]¡ ¬
	proveedor
]]√ Ã
.
]]Ã Õ
Nombres
]]Õ ‘
,
]]‘ ’
	proveedor
]]÷ ﬂ
.
]]ﬂ ‡
NombreComercial
]]‡ Ô
,
]]Ô 
	proveedor^^ %
.^^% &
NombreCorto^^& 1
,^^1 2
	proveedor^^3 <
.^^< ="
TipoDocumentoIdentidad^^= S
.^^S T
Id^^T V
,^^V W
	proveedor^^X a
.^^a b$
NumeroDocumentoIdentidad^^b z
,^^z {
	proveedor	^^| Ö
.
^^Ö Ü

ClaseActor
^^Ü ê
!=
^^ë ì
null
^^î ò
?
^^ô ö
	proveedor
^^õ §
.
^^§ •

ClaseActor
^^• Ø
.
^^Ø ∞
Id
^^∞ ≤
:
^^≥ ¥
(
^^µ ∂
int
^^∂ π
?
^^π ∫
)
^^∫ ª
null
^^ª ø
,
^^ø ¿
	proveedor__ %
.__% &
EstadoLegalActor__& 6
!=__7 9
null__: >
?__? @
	proveedor__A J
.__J K
EstadoLegalActor__K [
.__[ \
Id__\ ^
:___ `
(__a b
int__b e
?__e f
)__f g
null__g k
,__k l
	proveedor__m v
.__v w
Correo__w }
,__} ~
	proveedor	__ à
.
__à â
Telefono
__â ë
,
__ë í
direcciones
__ì û
)
__û ü
;
__ü †
}`` 
elseaa 
{bb 
ifcc 
(cc 
	proveedorcc %
.cc% &
Direccionescc& 1
!=cc2 4
nullcc5 9
)cc9 :
{dd 
foreachee #
(ee$ %
varee% (
itemee) -
inee. 0
	proveedoree1 :
.ee: ;
Direccionesee; F
)eeF G
{ff 
direccionesgg  +
.gg+ ,
Addgg, /
(gg/ 0
newgg0 3
	Direcciongg4 =
(gg= >
itemgg> B
.ggB C
TipoggC G
.ggG H
IdggH J
,ggJ K
MaestroSettingsggL [
.gg[ \
Defaultgg\ c
.ggc d&
IdDetalleMaestroNacionPeruggd ~
,gg~ 
item
ggÄ Ñ
.
ggÑ Ö
Ubigeo
ggÖ ã
.
ggã å
Id
ggå é
,
ggé è
item
ggê î
.
ggî ï
Detalle
ggï ú
,
ggú ù
nullhh$ (
,hh( )
nullhh* .
,hh. /
itemhh0 4
.hh4 5
EsPrincipalhh5 @
,hh@ A
itemhhB F
.hhF G
	EsVigentehhG P
)hhP Q
)hhQ R
;hhR S
}ii 
}jj 
resultll 
=ll  
_logicall! (
.ll( )
CrearProveedorll) 7
(ll7 8
	proveedorll8 A
.llA B
TipoPersonallB M
.llM N
IdllN P
,llP Q
	proveedorllR [
.ll[ \
RazonSocialll\ g
,llg h
	proveedorlli r
.llr s
ApellidoPaterno	lls Ç
,
llÇ É
	proveedor
llÑ ç
.
llç é
ApellidoMaterno
llé ù
,
llù û
	proveedor
llü ®
.
ll® ©
Nombres
ll© ∞
,
ll∞ ±
	proveedor
ll≤ ª
.
llª º
NombreComercial
llº À
,
llÀ Ã
	proveedor
llÕ ÷
.
ll÷ ◊
NombreCorto
ll◊ ‚
,
ll‚ „
	proveedormm0 9
.mm9 :"
TipoDocumentoIdentidadmm: P
.mmP Q
IdmmQ S
,mmS T
	proveedormmU ^
.mm^ _$
NumeroDocumentoIdentidadmm_ w
,mmw x
	proveedor	mmy Ç
.
mmÇ É

ClaseActor
mmÉ ç
!=
mmé ê
null
mmë ï
?
mmñ ó
	proveedor
mmò °
.
mm° ¢

ClaseActor
mm¢ ¨
.
mm¨ ≠
Id
mm≠ Ø
:
mm∞ ±
(
mm≤ ≥
int
mm≥ ∂
?
mm∂ ∑
)
mm∑ ∏
null
mm∏ º
,
mmº Ω
	proveedornn0 9
.nn9 :
EstadoLegalActornn: J
!=nnK M
nullnnN R
?nnS T
	proveedornnU ^
.nn^ _
EstadoLegalActornn_ o
.nno p
Idnnp r
:nns t
(nnu v
intnnv y
?nny z
)nnz {
nullnn{ 
,	nn Ä
	proveedor
nnÅ ä
.
nnä ã
Correo
nnã ë
,
nnë í
	proveedor
nnì ú
.
nnú ù
Telefono
nnù •
,
nn• ¶
direcciones
nnß ≤
)
nn≤ ≥
;
nn≥ ¥
}oo 
}pp 
Utilqq 
.qq 
VerificarErrorqq #
(qq# $
resultqq$ *
)qq* +
;qq+ ,
returnrr 
Jsonrr 
(rr 
newrr 
{rr  !
code_resultrr" -
=rr. /
resultrr0 6
.rr6 7
code_resultrr7 B
,rrB C
datarrD H
=rrI J
resultrrK Q
.rrQ R
datarrR V
,rrV W
result_descriptionrrX j
=rrk l
resultrrm s
.rrs t
titlerrt y
}rrz {
)rr{ |
;rr| }
}ss 
catchtt 
(tt 
	Exceptiontt 
ett 
)tt 
{uu 
HttpContextvv 
.vv 
Responsevv $
.vv$ %

StatusCodevv% /
=vv0 1
$numvv2 5
;vv5 6
returnww 
Jsonww 
(ww 
Utilww  
.ww  !
	ErrorJsonww! *
(ww* +
eww+ ,
)ww, -
)ww- .
;ww. /
}xx 
}yy 	
publiczz 

JsonResultzz 
Validarzz !
(zz! "
intzz" %
idTipoDocumentozz& 5
,zz5 6
stringzz7 =
numeroDocumentozz> M
)zzM N
{{{ 	
ProveedorViewModel|| 
actor|| $
=||% &
null||' +
;||+ ,
ProveedorViewModel}} 
	proveedor}} (
=}}) *
null}}+ /
;}}/ 0
try~~ 
{ /
!RespuestaVerificacionActorNegocio
ÄÄ 1
result
ÄÄ2 8
=
ÄÄ9 :
_logica
ÄÄ; B
.
ÄÄB C
VerificarActor
ÄÄC Q
(
ÄÄQ R
idTipoDocumento
ÄÄR a
,
ÄÄa b
numeroDocumento
ÄÄc r
,
ÄÄr s
ActorSettingsÄÄt Å
.ÄÄÅ Ç
DefaultÄÄÇ â
.ÄÄâ ä
IdRolProveedorÄÄä ò
)ÄÄò ô
;ÄÄô ö
if
ÇÇ 
(
ÇÇ 
result
ÇÇ 
.
ÇÇ 
	respuesta
ÇÇ $
==
ÇÇ% ''
RespuestaVerificacionEnum
ÇÇ( A
.
ÇÇA B
ExisteSoloActor
ÇÇB Q
)
ÇÇQ R
{
ÉÉ 
actor
ÑÑ 
=
ÑÑ 
new
ÑÑ  
ProveedorViewModel
ÑÑ  2
(
ÑÑ2 3
result
ÑÑ3 9
.
ÑÑ9 :
actor
ÑÑ: ?
)
ÑÑ? @
;
ÑÑ@ A
}
ÖÖ 
if
ÜÜ 
(
ÜÜ 
result
ÜÜ 
.
ÜÜ 
	respuesta
ÜÜ $
==
ÜÜ% ''
RespuestaVerificacionEnum
ÜÜ( A
.
ÜÜA B 
ExisteActorNegocio
ÜÜB T
)
ÜÜT U
{
áá 
	Proveedor
àà 
p
àà 
=
àà  !
new
àà" %
	Proveedor
àà& /
(
àà/ 0
result
àà0 6
.
àà6 7
actorNegocio
àà7 C
)
ààC D
;
ààD E
	proveedor
ââ 
=
ââ 
new
ââ  # 
ProveedorViewModel
ââ$ 6
(
ââ6 7
p
ââ7 8
)
ââ8 9
;
ââ9 :
}
ää 
if
ãã 
(
ãã 
result
ãã 
.
ãã 
	respuesta
ãã $
==
ãã% ''
RespuestaVerificacionEnum
ãã( A
.
ããA B
NoExisteActor
ããB O
)
ããO P
{
åå 
if
çç 
(
çç 
idTipoDocumento
çç '
==
çç( *
ActorSettings
çç+ 8
.
çç8 9
Default
çç9 @
.
çç@ A)
IdTipoDocumentoIdentidadRuc
ççA \
)
çç\ ]
{
éé 
var
èè 
datos
èè !
=
èè" # 
ObtenerActorRucApi
èè$ 6
(
èè6 7
numeroDocumento
èè7 F
)
èèF G
;
èèG H
return
êê 
Json
êê #
(
êê# $
new
êê$ '
{
êê( )
result
êê* 0
.
êê0 1
	respuesta
êê1 :
,
êê: ;
dataApi
êê< C
=
êêD E
datos
êêF K
}
êêL M
)
êêM N
;
êêN O
}
ëë 
if
íí 
(
íí 
idTipoDocumento
íí '
==
íí( *
ActorSettings
íí+ 8
.
íí8 9
Default
íí9 @
.
íí@ A)
IdTipoDocumentoIdentidadDni
ííA \
)
íí\ ]
{
ìì 
var
îî 
datos
îî !
=
îî" # 
ObtenerActorDniApi
îî$ 6
(
îî6 7
numeroDocumento
îî7 F
)
îîF G
;
îîG H
return
ïï 
Json
ïï #
(
ïï# $
new
ïï$ '
{
ïï( )
result
ïï* 0
.
ïï0 1
	respuesta
ïï1 :
,
ïï: ;
dataApi
ïï< C
=
ïïD E
datos
ïïF K
}
ïïL M
)
ïïM N
;
ïïN O
}
ññ 
}
óó 
return
òò 
Json
òò 
(
òò 
new
òò 
{
òò  !
result
òò" (
.
òò( )
	respuesta
òò) 2
,
òò2 3
actor
òò4 9
,
òò9 :
	proveedor
òò; D
}
òòE F
)
òòF G
;
òòG H
}
ôô 
catch
öö 
(
öö 
	Exception
öö 
e
öö 
)
öö 
{
õõ 
HttpContext
úú 
.
úú 
Response
úú $
.
úú$ %

StatusCode
úú% /
=
úú0 1
$num
úú2 5
;
úú5 6
return
ùù 
Json
ùù 
(
ùù 
new
ùù 
{
ùù  !
	respuesta
ùù" +
=
ùù, -'
RespuestaVerificacionEnum
ùù. G
.
ùùG H
NoSePudoVerificar
ùùH Y
,
ùùY Z
actor
ùù[ `
,
ùù` a
	proveedor
ùùb k
,
ùùk l
mensaje
ùùm t
=
ùùu v
e
ùùw x
.
ùùx y
Messageùùy Ä
}ùùÅ Ç
)ùùÇ É
;ùùÉ Ñ
}
ûû 
}
üü 	
public
†† 

JsonResult
†† 
EliminarProveedor
†† +
(
††+ ,
int
††, /
IdProveedor
††0 ;
)
††; <
{
°° 	
try
¢¢ 
{
££ 
OperationResult
§§ 
result
§§  &
=
§§' (
_logica
§§) 0
.
§§0 1 
DarDeBajaProveedor
§§1 C
(
§§C D
IdProveedor
§§D O
)
§§O P
;
§§P Q
Util
•• 
.
•• 
VerificarError
•• #
(
••# $
result
••$ *
)
••* +
;
••+ ,
return
¶¶ 
Json
¶¶ 
(
¶¶ 
new
¶¶ 
{
¶¶  !
code_result
¶¶" -
=
¶¶. /
result
¶¶0 6
.
¶¶6 7
code_result
¶¶7 B
,
¶¶B C
data
¶¶D H
=
¶¶I J
result
¶¶K Q
.
¶¶Q R
data
¶¶R V
,
¶¶V W 
result_description
¶¶X j
=
¶¶k l
result
¶¶m s
.
¶¶s t
title
¶¶t y
}
¶¶z {
)
¶¶{ |
;
¶¶| }
}
ßß 
catch
®® 
(
®® 
	Exception
®® 
e
®® 
)
®® 
{
©© 
HttpContext
™™ 
.
™™ 
Response
™™ $
.
™™$ %

StatusCode
™™% /
=
™™0 1
$num
™™2 5
;
™™5 6
return
´´ 
Json
´´ 
(
´´ 
Util
´´  
.
´´  !
	ErrorJson
´´! *
(
´´* +
e
´´+ ,
)
´´, -
)
´´- .
;
´´. /
}
¨¨ 
}
≠≠ 	
public
ÆÆ 

JsonResult
ÆÆ 
CargarProveedor
ÆÆ )
(
ÆÆ) *
int
ÆÆ* -
idProveedor
ÆÆ. 9
)
ÆÆ9 :
{
ØØ 	
try
∞∞ 
{
±± 
	Proveedor
≤≤ 
p
≤≤ 
=
≤≤ 
_logica
≤≤ %
.
≤≤% &
ObtenerProveedor
≤≤& 6
(
≤≤6 7
idProveedor
≤≤7 B
)
≤≤B C
;
≤≤C D 
ProveedorViewModel
≥≥ "
pv
≥≥# %
=
≥≥& '
new
≥≥( + 
ProveedorViewModel
≥≥, >
(
≥≥> ?
p
≥≥? @
)
≥≥@ A
;
≥≥A B
return
¥¥ 
Json
¥¥ 
(
¥¥ 
pv
¥¥ 
)
¥¥ 
;
¥¥  
}
µµ 
catch
∂∂ 
(
∂∂ 
	Exception
∂∂ 
e
∂∂ 
)
∂∂ 
{
∑∑ 
return
ππ 
Json
ππ 
(
ππ 
Util
ππ  
.
ππ  !
	ErrorJson
ππ! *
(
ππ* +
e
ππ+ ,
)
ππ, -
)
ππ- .
;
ππ. /
}
∫∫ 
}
ªª 	
public
ææ 

JsonResult
ææ  
ObtenerProveedores
ææ ,
(
ææ, -
)
ææ- .
{
øø 	
try
¿¿ 
{
¡¡ 
var
¬¬ 

resultados
¬¬ 
=
¬¬  
_logica
¬¬! (
.
¬¬( ) 
ObtenerProveedores
¬¬) ;
(
¬¬; <
)
¬¬< =
;
¬¬= >
List
√√ 
<
√√ *
ComboActorComercialViewModel
√√ 1
>
√√1 2
proveedores
√√3 >
=
√√? @*
ComboActorComercialViewModel
√√A ]
.
√√] ^
Convert
√√^ e
(
√√e f

resultados
√√f p
)
√√p q
;
√√q r
return
ƒƒ 
Json
ƒƒ 
(
ƒƒ 
proveedores
ƒƒ '
)
ƒƒ' (
;
ƒƒ( )
}
≈≈ 
catch
∆∆ 
(
∆∆ 
	Exception
∆∆ 
e
∆∆ 
)
∆∆ 
{
«« 
return
»» 
Json
»» 
(
»» 
Util
»»  
.
»»  !
	ErrorJson
»»! *
(
»»* +
e
»»+ ,
)
»», -
)
»»- .
;
»». /
}
…… 
}
ÀÀ 	
public
ÃÃ 
async
ÃÃ 
Task
ÃÃ 
<
ÃÃ 

JsonResult
ÃÃ $
>
ÃÃ$ %(
ObtenerProveedoresGenerico
ÃÃ& @
(
ÃÃ@ A
)
ÃÃA B
{
ÕÕ 	
try
ŒŒ 
{
œœ 
var
–– 
proveedores
–– 
=
––  !
await
––" '
_logica
––( /
.
––/ 0:
,ObtenerProveedoresVigentesComoItemsGenericos
––0 \
(
––\ ]
)
––] ^
;
––^ _
return
—— 
Json
—— 
(
—— 
proveedores
—— '
)
——' (
;
——( )
}
““ 
catch
”” 
(
”” 
	Exception
”” 
e
”” 
)
”” 
{
‘‘ 
return
’’ 
Json
’’ 
(
’’ 
Util
’’  
.
’’  !
	ErrorJson
’’! *
(
’’* +
e
’’+ ,
)
’’, -
)
’’- .
;
’’. /
}
÷÷ 
}
ÿÿ 	
public
ŸŸ 

JsonResult
ŸŸ '
ObtenerDireccionProveedor
ŸŸ 3
(
ŸŸ3 4
int
ŸŸ4 7
idProveedor
ŸŸ8 C
)
ŸŸC D
{
⁄⁄ 	
try
€€ 
{
‹‹ 
return
›› 
Json
›› 
(
›› 
_logica
›› #
.
››# $,
ObtenerDireccionActorComercial
››$ B
(
››B C
idProveedor
››C N
)
››N O
)
››O P
;
››P Q
}
ﬁﬁ 
catch
ﬂﬂ 
(
ﬂﬂ 
	Exception
ﬂﬂ 
e
ﬂﬂ 
)
ﬂﬂ 
{
‡‡ 
return
·· 
Json
·· 
(
·· 
Util
··  
.
··  !
	ErrorJson
··! *
(
··* +
e
··+ ,
)
··, -
)
··- .
;
··. /
}
‚‚ 
}
„„ 	
public
ÂÂ 

JsonResult
ÂÂ "
ValidarProveedorYRuc
ÂÂ .
(
ÂÂ. /
int
ÂÂ/ 2
idProveedor
ÂÂ3 >
,
ÂÂ> ?
int
ÂÂ@ C
idTipoDocumento
ÂÂD S
)
ÂÂS T
{
ÊÊ 	
try
ÁÁ 
{
ËË 
if
ÈÈ 
(
ÈÈ 
idTipoDocumento
ÈÈ #
==
ÈÈ$ &
MaestroSettings
ÈÈ' 6
.
ÈÈ6 7
Default
ÈÈ7 >
.
ÈÈ> ?0
"IdDetalleMaestroComprobanteFactura
ÈÈ? a
)
ÈÈa b
{
ÍÍ 
if
ÎÎ 
(
ÎÎ +
_validacionActorNegocioLogica
ÎÎ 5
.
ÎÎ5 6"
ValidarProveedorYRUC
ÎÎ6 J
(
ÎÎJ K
idProveedor
ÎÎK V
)
ÎÎV W
)
ÎÎW X
{
ÏÏ 
return
ÌÌ 
Json
ÌÌ #
(
ÌÌ# $
new
ÌÌ$ '
{
ÌÌ( )
	respuesta
ÌÌ* 3
=
ÌÌ4 5!
OperationResultEnum
ÌÌ6 I
.
ÌÌI J
Success
ÌÌJ Q
,
ÌÌQ R
mensaje
ÌÌS Z
=
ÌÌ[ \
$strÌÌ] Ñ
}ÌÌÖ Ü
)ÌÌÜ á
;ÌÌá à
}
ÓÓ 
else
ÔÔ 
{
 
return
ÒÒ 
Json
ÒÒ #
(
ÒÒ# $
new
ÒÒ$ '
{
ÒÒ( )
	respuesta
ÒÒ* 3
=
ÒÒ4 5!
OperationResultEnum
ÒÒ6 I
.
ÒÒI J
Warning
ÒÒJ Q
,
ÒÒQ R
mensaje
ÒÒS Z
=
ÒÒ[ \
$strÒÒ] Ñ
}ÒÒÖ Ü
)ÒÒÜ á
;ÒÒá à
}
ÚÚ 
}
ÛÛ 
else
ÙÙ 
{
ıı 
return
ˆˆ 
Json
ˆˆ 
(
ˆˆ  
new
ˆˆ  #
{
ˆˆ$ %
	respuesta
ˆˆ& /
=
ˆˆ0 1!
OperationResultEnum
ˆˆ2 E
.
ˆˆE F
Success
ˆˆF M
,
ˆˆM N
mensaje
ˆˆO V
=
ˆˆW X
$strˆˆY Ä
}ˆˆÅ Ç
)ˆˆÇ É
;ˆˆÉ Ñ
}
˜˜ 
}
¯¯ 
catch
˘˘ 
(
˘˘ 
	Exception
˘˘ 
e
˘˘ 
)
˘˘ 
{
˙˙ 
return
˚˚ 
Json
˚˚ 
(
˚˚ 
new
˚˚ 
{
˚˚  !
	respuesta
˚˚" +
=
˚˚, -!
OperationResultEnum
˚˚. A
.
˚˚A B
Error
˚˚B G
,
˚˚G H
mensaje
˚˚I P
=
˚˚Q R
e
˚˚S T
.
˚˚T U
Message
˚˚U \
}
˚˚] ^
)
˚˚^ _
;
˚˚_ `
}
¸¸ 
}
˝˝ 	
public
ˇˇ 

JsonResult
ˇˇ -
ObtenerUbigeoDireccionProveedor
ˇˇ 9
(
ˇˇ9 :
int
ˇˇ: =
idProveedor
ˇˇ> I
)
ˇˇI J
{
ÄÄ 	
try
ÅÅ 
{
ÇÇ 
return
ÉÉ 
Json
ÉÉ 
(
ÉÉ 
_logica
ÉÉ #
.
ÉÉ# $4
&ObtenerIdUbigeoDireccionActorComercial
ÉÉ$ J
(
ÉÉJ K
idProveedor
ÉÉK V
)
ÉÉV W
)
ÉÉW X
;
ÉÉX Y
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ 
	Exception
ÖÖ 
e
ÖÖ 
)
ÖÖ 
{
ÜÜ 
return
áá 
Json
áá 
(
áá 
Util
áá  
.
áá  !
	ErrorJson
áá! *
(
áá* +
e
áá+ ,
)
áá, -
)
áá- .
;
áá. /
}
àà 
}
ââ 	
public
ãã 

JsonResult
ãã .
 ObtenerDetalleDireccionProveedor
ãã :
(
ãã: ;
int
ãã; >
idProveedor
ãã? J
)
ããJ K
{
åå 	
try
çç 
{
éé 
return
èè 
Json
èè 
(
èè 
_logica
èè #
.
èè# $3
%ObtenerDetalleDireccionActorComercial
èè$ I
(
èèI J
idProveedor
èèJ U
)
èèU V
)
èèV W
;
èèW X
}
êê 
catch
ëë 
(
ëë 
	Exception
ëë 
e
ëë 
)
ëë 
{
íí 
return
ìì 
Json
ìì 
(
ìì 
Util
ìì  
.
ìì  !
	ErrorJson
ìì! *
(
ìì* +
e
ìì+ ,
)
ìì, -
)
ìì- .
;
ìì. /
}
îî 
}
ïï 	
}
ññ 
}òò ¢Q
^D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Controllers\WebClientPrintAPIController.cs
	namespace 	!
WebClientPrint4MVC5CS
 
.  
Controllers  +
{ 
public 

class '
WebClientPrintAPIController ,
:- .

Controller/ 9
{ 
[ 	
AllowAnonymous	 
] 
public 
void 
ProcessRequest "
(" #
)# $
{ 	
string 
	sessionID 
= 
(  
HttpContext  +
.+ ,
Request, 3
[3 4
$str4 9
]9 :
!=; =
null> B
?C D
HttpContextE P
.P Q
RequestQ X
[X Y
$strY ^
]^ _
:` a
nullb f
)f g
;g h
string 
queryString 
=  
HttpContext! ,
., -
Request- 4
.4 5
Url5 8
.8 9
Query9 >
;> ?
try 
{ 
RequestType!! 
prType!! "
=!!# $
WebClientPrint!!% 3
.!!3 4!
GetProcessRequestType!!4 I
(!!I J
queryString!!J U
)!!U V
;!!V W
if## 
(## 
prType## 
==## 
RequestType## )
.##) *
GenPrintScript##* 8
||##9 ;
prType$$ 
==$$ 
RequestType$$ )
.$$) *
GenWcppDetectScript$$* =
)$$= >
{%% 
byte'' 
['' 
]'' 
script'' !
=''" #
WebClientPrint''$ 2
.''2 3
GenerateScript''3 A
(''A B
Url''B E
.''E F
Action''F L
(''L M
$str''M ]
,''] ^
$str''_ r
,''r s
null''t x
,''x y
HttpContext	''z Ö
.
''Ö Ü
Request
''Ü ç
.
''ç é
Url
''é ë
.
''ë í
Scheme
''í ò
)
''ò ô
,
''ô ö
queryString
''õ ¶
)
''¶ ß
;
''ß ®
HttpContext)) 
.))  
Response))  (
.))( )
ContentType))) 4
=))5 6
$str))7 H
;))H I
HttpContext** 
.**  
Response**  (
.**( )
BinaryWrite**) 4
(**4 5
script**5 ;
)**; <
;**< =
HttpContext++ 
.++  
Response++  (
.++( )
End++) ,
(++, -
)++- .
;++. /
},, 
else-- 
if-- 
(-- 
prType-- 
==--  "
RequestType--# .
.--. / 
ClientSetWcppVersion--/ C
)--C D
{.. 
string22 
wcppVersion22 &
=22' (
HttpContext22) 4
.224 5
Request225 <
[22< =
$str22= F
]22F G
;22G H
if33 
(33 
string33 
.33 
IsNullOrEmpty33 ,
(33, -
wcppVersion33- 8
)338 9
)339 :
wcppVersion44 #
=44$ %
$str44& /
;44/ 0
HttpContext66 
.66  
Application66  +
.66+ ,
Set66, /
(66/ 0
	sessionID660 9
+66: ;
$str66< K
,66K L
wcppVersion66M X
)66X Y
;66Y Z
}77 
else88 
if88 
(88 
prType88 
==88  "
RequestType88# .
.88. /&
ClientSetInstalledPrinters88/ I
)88I J
{99 
string<< 
printers<< #
=<<$ %
HttpContext<<& 1
.<<1 2
Request<<2 9
[<<9 :
$str<<: D
]<<D E
;<<E F
if== 
(== 
string== 
.== 
IsNullOrEmpty== ,
(==, -
printers==- 5
)==5 6
====7 9
false==: ?
)==? @
printers>>  
=>>! "
System>># )
.>>) *
Text>>* .
.>>. /
Encoding>>/ 7
.>>7 8
UTF8>>8 <
.>>< =
	GetString>>= F
(>>F G
Convert>>G N
.>>N O
FromBase64String>>O _
(>>_ `
printers>>` h
)>>h i
)>>i j
;>>j k
HttpContext@@ 
.@@  
Application@@  +
.@@+ ,
Set@@, /
(@@/ 0
	sessionID@@0 9
+@@: ;
$str@@< F
,@@F G
printers@@H P
)@@P Q
;@@Q R
}BB 
elseCC 
ifCC 
(CC 
prTypeCC 
==CC  "
RequestTypeCC# .
.CC. /*
ClientSetInstalledPrintersInfoCC/ M
)CCM N
{DD 
stringHH 
printersInfoHH '
=HH( )
HttpContextHH* 5
.HH5 6
RequestHH6 =
.HH= >
FormHH> B
[HHB C
$strHHC X
]HHX Y
;HHY Z
ifJJ 
(JJ 
stringJJ 
.JJ 
IsNullOrEmptyJJ ,
(JJ, -
printersInfoJJ- 9
)JJ9 :
==JJ; =
falseJJ> C
)JJC D
printersInfoKK $
=KK% &
SystemKK' -
.KK- .
TextKK. 2
.KK2 3
EncodingKK3 ;
.KK; <
UTF8KK< @
.KK@ A
	GetStringKKA J
(KKJ K
ConvertKKK R
.KKR S
FromBase64StringKKS c
(KKc d
printersInfoKKd p
)KKp q
)KKq r
;KKr s
HttpContextMM 
.MM  
ApplicationMM  +
.MM+ ,
SetMM, /
(MM/ 0
	sessionIDMM0 9
+MM: ;
$strMM< J
,MMJ K
printersInfoMML X
)MMX Y
;MMY Z
}PP 
elseQQ 
ifQQ 
(QQ 
prTypeQQ 
==QQ  "
RequestTypeQQ# .
.QQ. / 
ClientGetWcppVersionQQ/ C
)QQC D
{RR 
boolTT 
sidWcppVersionTT '
=TT( )
(TT* +
HttpContextTT+ 6
.TT6 7
ApplicationTT7 B
.TTB C
GetTTC F
(TTF G
	sessionIDTTG P
+TTQ R
$strTTS b
)TTb c
!=TTd f
nullTTg k
)TTk l
;TTl m
HttpContextVV 
.VV  
ResponseVV  (
.VV( )
ContentTypeVV) 4
=VV5 6
$strVV7 C
;VVC D
HttpContextWW 
.WW  
ResponseWW  (
.WW( )
WriteWW) .
(WW. /
(WW/ 0
sidWcppVersionWW0 >
?WW? @
HttpContextWWA L
.WWL M
ApplicationWWM X
.WWX Y
GetWWY \
(WW\ ]
	sessionIDWW] f
+WWg h
$strWWi x
)WWx y
:WWz {
$strWW| ~
)WW~ 
)	WW Ä
;
WWÄ Å
HttpContextXX 
.XX  
ResponseXX  (
.XX( )
EndXX) ,
(XX, -
)XX- .
;XX. /
}ZZ 
else[[ 
if[[ 
([[ 
prType[[ 
==[[  "
RequestType[[# .
.[[. /&
ClientGetInstalledPrinters[[/ I
)[[I J
{\\ 
bool^^ 
sidHasPrinters^^ '
=^^( )
(^^* +
HttpContext^^+ 6
.^^6 7
Application^^7 B
.^^B C
Get^^C F
(^^F G
	sessionID^^G P
+^^Q R
$str^^S ]
)^^] ^
!=^^_ a
null^^b f
)^^f g
;^^g h
HttpContext`` 
.``  
Response``  (
.``( )
ContentType``) 4
=``5 6
$str``7 C
;``C D
HttpContextaa 
.aa  
Responseaa  (
.aa( )
Writeaa) .
(aa. /
(aa/ 0
sidHasPrintersaa0 >
?aa? @
HttpContextaaA L
.aaL M
ApplicationaaM X
.aaX Y
GetaaY \
(aa\ ]
	sessionIDaa] f
+aag h
$straai s
)aas t
:aau v
$straaw y
)aay z
)aaz {
;aa{ |
HttpContextbb 
.bb  
Responsebb  (
.bb( )
Endbb) ,
(bb, -
)bb- .
;bb. /
}cc 
elsedd 
ifdd 
(dd 
prTypedd 
==dd  "
RequestTypedd# .
.dd. /*
ClientGetInstalledPrintersInfodd/ M
)ddM N
{ee 
boolgg 
sidHasPrintersgg '
=gg( )
(gg* +
HttpContextgg+ 6
.gg6 7
Applicationgg7 B
[ggB C
	sessionIDggC L
+ggM N
$strggO ]
]gg] ^
!=gg_ a
nullggb f
)ggf g
;ggg h
HttpContextii 
.ii  
Responseii  (
.ii( )
ContentTypeii) 4
=ii5 6
$strii7 C
;iiC D
HttpContextjj 
.jj  
Responsejj  (
.jj( )
Writejj) .
(jj. /
sidHasPrintersjj/ =
?jj> ?
HttpContextjj@ K
.jjK L
ApplicationjjL W
[jjW X
	sessionIDjjX a
+jjb c
$strjjd r
]jjr s
:jjt u
$strjjv x
)jjx y
;jjy z
}ll 
}nn 
catchoo 
(oo 
	Exceptionoo 
exoo 
)oo  
{pp 
HttpContextqq 
.qq 
Responseqq $
.qq$ %

StatusCodeqq% /
=qq0 1
$numqq2 5
;qq5 6
HttpContextrr 
.rr 
Responserr $
.rr$ %
ContentTyperr% 0
=rr1 2
$strrr3 ?
;rr? @
HttpContextss 
.ss 
Responsess $
.ss$ %
Writess% *
(ss* +
exss+ -
.ss- .
Messagess. 5
+ss6 7
$strss8 I
+ssJ K
exssL N
.ssN O

StackTracessO Y
)ssY Z
;ssZ [
HttpContexttt 
.tt 
Responsett $
.tt$ %
Endtt% (
(tt( )
)tt) *
;tt* +
}uu 
}xx 	
}yy 
}zz ⁄
ZD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\ErrorHandler\AiHandleErrorAttribute.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
ErrorHandler& 2
{ 
[ 
AttributeUsage 
( 
AttributeTargets $
.$ %
Class% *
|+ ,
AttributeTargets- =
.= >
Method> D
,D E
	InheritedF O
=P Q
trueR V
,V W
AllowMultipleX e
=f g
trueh l
)l m
]m n
public 

class "
AiHandleErrorAttribute '
:( ) 
HandleErrorAttribute* >
{		 
public

 
override

 
void

 
OnException

 (
(

( )
ExceptionContext

) 9
filterContext

: G
)

G H
{ 	
if 
( 
filterContext 
!=  
null! %
&&& (
filterContext) 6
.6 7
HttpContext7 B
!=C E
nullF J
&&K M
filterContextN [
.[ \
	Exception\ e
!=f h
nulli m
)m n
{ 
if 
( 
filterContext !
.! "
HttpContext" -
.- . 
IsCustomErrorEnabled. B
)B C
{ 
var 
ai 
= 
new  
TelemetryClient! 0
(0 1
)1 2
;2 3
ai 
. 
TrackException %
(% &
filterContext& 3
.3 4
	Exception4 =
)= >
;> ?
} 
} 
base 
. 
OnException 
( 
filterContext *
)* +
;+ ,
} 	
} 
} ©
BD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Global.asax.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
{ 
public 

class 
MvcApplication 
:  !
System" (
.( )
Web) ,
., -
HttpApplication- <
{ 
	protected 
void 
Application_Start (
(( )
)) *
{ 	
AreaRegistration 
. 
RegisterAllAreas -
(- .
). /
;/ 0
GlobalConfiguration 
.  
	Configure  )
() *
WebApiConfig* 6
.6 7
Register7 ?
)? @
;@ A
FilterConfig 
. !
RegisterGlobalFilters .
(. /
GlobalFilters/ <
.< =
Filters= D
)D E
;E F
RouteConfig 
. 
RegisterRoutes &
(& '

RouteTable' 1
.1 2
Routes2 8
)8 9
;9 :
BundleConfig 
. 
RegisterBundles (
(( )
BundleTable) 4
.4 5
Bundles5 <
)< =
;= >
AntiForgeryConfig 
. +
SuppressIdentityHeuristicChecks =
=> ?
true@ D
;D E"
ValueProviderFactories "
." #
	Factories# ,
., -
Add- 0
(0 1
new1 4$
JsonValueProviderFactory5 M
(M N
)N O
)O P
;P Q
} 	
void   
Session_Start   
(   
object   !
sender  " (
,  ( )
	EventArgs  * 3
e  4 5
)  5 6
{!! 	
HttpContext"" 
."" 
Current"" 
.""  
Session""  '
.""' (
Add""( +
(""+ ,
$str"", <
,""< =
string""> D
.""D E
Empty""E J
)""J K
;""K L
}$$ 	
}'' 
}(( ÿ
RD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\AccionOperativaVista.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class  
AccionOperativaVista %
{ 
[ 	

DataMember	 
] 
public 
int 
IdAccion 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
CodigoAccion "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
NombreAccion "
{# $
get% (
;( )
set* -
;- .
}/ 0
public  
AccionOperativaVista #
(# $
)$ %
{ 	
} 	
public  
AccionOperativaVista #
(# $
AccionOperativa$ 3
ao4 6
)6 7
{ 	
this 
. 
IdAccion 
= 
ao 
. 
IdAccion '
;' (
this 
. 
CodigoAccion 
= 
ao  "
." #
CodigoAccion# /
;/ 0
this 
. 
NombreAccion 
= 
ao !
.! "
NombreAccion" .
;. /
} 	
public  
AccionOperativaVista #
(# $
int$ '
id( *
,* +
string+ 1
codigo2 8
,8 9
string9 ?
nombre@ F
)F G
{   	
this!! 
.!! 
IdAccion!! 
=!! 
id!! 
;!! 
this"" 
."" 
CodigoAccion"" 
="" 
codigo""  &
;""& '
this## 
.## 
NombreAccion## 
=## 
nombre##  &
;##& '
}$$ 	
public&& 
static&& 
new&& 
List&& 
<&&  
AccionOperativaVista&& 3
>&&3 4
convert&&5 <
(&&< =
List&&= A
<&&A B
AccionOperativa&&B Q
>&&Q R
accionesOperativas&&S e
)&&e f
{'' 	
var((  
accionOperativaVista(( $
=((% &
new((' *
List((+ /
<((/ 0 
AccionOperativaVista((0 D
>((D E
(((E F
)((F G
;((G H
foreach** 
(** 
var** 
accionOperativa** (
in**) +
accionesOperativas**, >
)**> ?
{++  
accionOperativaVista,, $
.,,$ %
Add,,% (
(,,( )
new,,) , 
AccionOperativaVista,,- A
(,,A B
accionOperativa,,B Q
),,Q R
),,R S
;,,S T
}-- 
return..  
accionOperativaVista.. '
;..' (
}// 	
}00 
}11 £
nD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Almacen\BandejaIngresoYSalidaMercaderiaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
}66 ë7
jD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Almacen\BandejaMovimientoMercaderiaViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 0
$BandejaMovimientoMercaderiaViewModel 5
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
FechaEmision "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
NumeroComprobante '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
DocumentoTercero &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
NombreTercero #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Motivo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
Enviado 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
EstaEnviado !
{" #
get$ '
=>( *
Enviado+ 2
?3 4
$str5 9
:: ;
$str< @
;@ A
}B C
public 
bool 
Aceptado 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
EstaAceptado "
{# $
get% (
=>) +
Aceptado, 4
?5 6
$str7 ;
:< =
$str> B
;B C
}D E
public 0
$BandejaMovimientoMercaderiaViewModel 3
(3 4
MovimientoDeAlmacen4 G

movimientoH R
,R S
ListT X
<X Y
Detalle_maestroY h
>h i
motivosj q
)q r
{ 	
this 
. 
Id 
= 

movimiento  
.  !
Id! #
;# $
this   
.   
FechaEmision   
=   

movimiento    *
.  * +
FechaEmision  + 7
.  7 8
ToString  8 @
(  @ A
$str  A M
)  M N
;  N O
this!! 
.!! 
NumeroComprobante!! "
=!!# $

movimiento!!% /
.!!/ 0
Comprobante!!0 ;
(!!; <
)!!< =
.!!= >
NumeroDeSerie!!> K
+!!L M
$str!!N S
+!!T U

movimiento!!V `
.!!` a
Comprobante!!a l
(!!l m
)!!m n
.!!n o 
NumeroDeComprobante	!!o Ç
;
!!Ç É
this"" 
."" 
DocumentoTercero"" !
=""" #

movimiento""$ .
."". /
Tercero""/ 6
(""6 7
)""7 8
.""8 9
DocumentoIdentidad""9 K
;""K L
this## 
.## 
NombreTercero## 
=##  

movimiento##! +
.##+ ,
Tercero##, 3
(##3 4
)##4 5
.##5 6
RazonSocial##6 A
;##A B
this$$ 
.$$ 
Motivo$$ 
=$$ 
motivos$$ !
.$$! "
Single$$" (
($$( )
m$$) *
=>$$+ -
m$$. /
.$$/ 0
id$$0 2
==$$3 5
($$6 7
int$$7 :
)$$: ;

movimiento$$; E
.$$E F 
IdMotivoDeTransporte$$F Z
($$Z [
)$$[ \
)$$\ ]
.$$] ^
nombre$$^ d
+$$e f
$str$$g j
+$$k l

movimiento$$m w
.$$w x 
DescripcionDeMotivo	$$x ã
(
$$ã å
)
$$å ç
;
$$ç é
this%% 
.%% 
Estado%% 
=%% 

movimiento%% $
.%%$ %
IdEstadoActual%%% 3
==%%4 6
$num%%7 8
?%%9 :
$str%%; ?
:%%@ A

movimiento%%B L
.%%L M
EstadoActual%%M Y
(%%Y Z
)%%Z [
.%%[ \
nombre%%\ b
;%%b c
this&& 
.&& 
Enviado&& 
=&& 

movimiento&& %
.&&% &
Transaccion&&& 1
(&&1 2
)&&2 3
.&&3 4
Evento_transaccion&&4 F
.&&F G
Select&&G M
(&&M N
ev&&N P
=>&&Q S
ev&&T V
.&&V W
	id_evento&&W `
)&&` a
.&&a b
Contains&&b j
(&&j k
MaestroSettings&&k z
.&&z {
Default	&&{ Ç
.
&&Ç É/
!IdDetalleMaestroEstadoTransmitido
&&É §
)
&&§ •
;
&&• ¶
this'' 
.'' 
Aceptado'' 
='' 
!'' 
string'' #
.''# $
IsNullOrEmpty''$ 1
(''1 2

movimiento''2 <
.''< =
Informacion''= H
)''H I
;''I J
}(( 	
public** 
static** 
List** 
<** 0
$BandejaMovimientoMercaderiaViewModel** ?
>**? @
Convert**A H
(**H I
List**I M
<**M N
MovimientoDeAlmacen**N a
>**a b#
ordenesDeDesplazamiento**c z
,**z {
List	**| Ä
<
**Ä Å
Detalle_maestro
**Å ê
>
**ê ë
motivos
**í ô
)
**ô ö
{++ 	
List,, 
<,, 0
$BandejaMovimientoMercaderiaViewModel,, 5
>,,5 6
ordenes,,7 >
=,,? @
new,,A D
List,,E I
<,,I J0
$BandejaMovimientoMercaderiaViewModel,,J n
>,,n o
(,,o p
),,p q
;,,q r
foreach-- 
(-- 
var-- !
ordenDeDesplazamiento-- .
in--/ 1#
ordenesDeDesplazamiento--2 I
)--I J
{.. 
ordenes// 
.// 
Add// 
(// 
new// 0
$BandejaMovimientoMercaderiaViewModel//  D
(//D E!
ordenDeDesplazamiento//E Z
,//Z [
motivos//\ c
)//c d
)//d e
;//e f
}00 
return11 
ordenes11 
;11 
}22 	
}33 
}44 …V
UD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Almacen\KardexViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class @
4KardexInventarioValorizadoConceptoDeNegocioViewModel E
{ 
public 
List 
< 
KardexViewModel #
># $
Kardex% +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
List 
< )
InventarioValorizadoViewModel 1
>1 20
$InventarioValorizadoParaSaldoInicial3 W
{X Y
getZ ]
;] ^
set_ b
;b c
}d e
public 
List 
< )
InventarioValorizadoViewModel 1
>1 2.
"InventarioValorizadoParaSaldoFinal3 U
{V W
getX [
;[ \
set] `
;` a
}b c
public @
4KardexInventarioValorizadoConceptoDeNegocioViewModel C
(C D
ListD H
<H I
KardexViewModelI X
>X Y
kardexZ `
,` a
Listb f
<f g*
InventarioValorizadoViewModel	g Ñ
>
Ñ Ö2
$inventarioValorizadoParaSaldoInicial
Ü ™
,
™ ´
List
¨ ∞
<
∞ ±+
InventarioValorizadoViewModel
± Œ
>
Œ œ0
"inventarioValorizadoParaSaldoFinal
– Ú
)
Ú Û
{ 	
this 
. 
Kardex 
= 
kardex  
;  !
this 
. 0
$InventarioValorizadoParaSaldoInicial 5
=6 70
$inventarioValorizadoParaSaldoInicial8 \
;\ ]
this 
. .
"InventarioValorizadoParaSaldoFinal 3
=4 5.
"inventarioValorizadoParaSaldoFinal6 X
;X Y
} 	
} 
public 

class 
KardexViewModel  
{ 
[   	

DataMember  	 
]   
public!! 
int!! 
Index!! 
{!! 
get!! 
;!! 
set!!  #
;!!# $
}!!% &
public"" 
string"" 
Fecha"" 
{"" 
get"" !
;""! "
set""# &
;""& '
}""( )
public## 
string## %
NombreActorNegocioExterno## /
{##0 1
get##2 5
;##5 6
set##7 :
;##: ;
}##< =
public$$ 
int$$ 
IdTipoTransaccion$$ $
{$$% &
get$$' *
;$$* +
set$$, /
;$$/ 0
}$$1 2
public%% 
string%% 
	Operacion%% 
{%%  !
get%%" %
;%%% &
set%%' *
;%%* +
}%%, -
public&& 
string&& !
CodigoTipoComprobante&& +
{&&, -
get&&. 1
;&&1 2
set&&3 6
;&&6 7
}&&8 9
public'' 
string'' 6
*NumeroDeSerieComprobanteYNumeroComprobante'' @
{''A B
get''C F
;''F G
set''H K
;''K L
}''M N
public(( 
string(( 
CantidadEntrada(( %
{((& '
get((( +
;((+ ,
set((- 0
;((0 1
}((2 3
public)) 
string)) 
LoteEntrada)) !
{))" #
get))$ '
;))' (
set))) ,
;)), -
})). /
public** 
string** "
ImporteUnitarioEntrada** ,
{**- .
get**/ 2
;**2 3
set**4 7
;**7 8
}**9 :
public++ 
string++ 
ImporteTotalEntrada++ )
{++* +
get++, /
;++/ 0
set++1 4
;++4 5
}++6 7
public,, 
string,, 
CantidadSalida,, $
{,,% &
get,,' *
;,,* +
set,,, /
;,,/ 0
},,1 2
public-- 
string-- !
ImporteUnitarioSalida-- +
{--, -
get--. 1
;--1 2
set--3 6
;--6 7
}--8 9
public.. 
string.. 
ImporteTotalSalida.. (
{..) *
get..+ .
;... /
set..0 3
;..3 4
}..5 6
public// 
string// 
Saldo// 
{// 
get// !
;//! "
set//# &
;//& '
}//( )
public11 
KardexViewModel11 
(11 
)11  
{22 	
}44 	
public66 
static66 
List66 
<66 
KardexViewModel66 *
>66* +
Convert66, 3
(663 4
List664 8
<668 9
MovimientoAlmacen669 J
>66J K%
detallesTransaccionKardex66L e
,66e f&
InventarioConceptoNegocio	66g Ä'
inventarioConceptoNegocio
66Å ö
)
66ö õ
{77 	
List88 
<88 
KardexViewModel88  
>88  !
kardexViewModel88" 1
=882 3
new884 7
List888 <
<88< =
KardexViewModel88= L
>88L M
(88M N
)88N O
;88O P
KardexViewModel99 
item99  
;99  !
decimal:: 
saldo:: 
=:: %
inventarioConceptoNegocio:: 5
.::5 6
CantidadPrincipal::6 G
;::G H
int;; 
index;; 
=;; 
$num;; 
;;; 
foreach<< 
(<< 
var<< 
detalle<<  
in<<! #%
detallesTransaccionKardex<<$ =
)<<= >
{== 
item>> 
=>> 
new>> 
KardexViewModel>> *
(>>* +
)>>+ ,
;>>, -
item?? 
.?? 
Index?? 
=?? 
index?? "
++??" $
;??$ %
item@@ 
.@@ 
Fecha@@ 
=@@ 
detalle@@ $
.@@$ %
Fecha@@% *
.@@* +
ToString@@+ 3
(@@3 4
$str@@4 @
)@@@ A
;@@A B
itemAA 
.AA %
NombreActorNegocioExternoAA .
=AA/ 0
detalleAA1 8
.AA8 9%
NombreActorNegocioExternoAA9 R
.AAR S
ReplaceAAS Z
(AAZ [
$strAA[ ^
,AA^ _
$strAA` c
)AAc d
;AAd e
itemBB 
.BB 
	OperacionBB 
=BB  
detalleBB! (
.BB( )!
NombreTipoTransaccionBB) >
;BB> ?
itemCC 
.CC !
CodigoTipoComprobanteCC *
=CC+ ,
detalleCC- 4
.CC4 5!
CodigoTipoComprobanteCC5 J
;CCJ K
itemDD 
.DD 6
*NumeroDeSerieComprobanteYNumeroComprobanteDD ?
=DD@ A
detalleDDB I
.DDI J
NumeroSerieDDJ U
+DDV W
$strDDX [
+DD\ ]
detalleDD^ e
.DDe f
NumeroComprobanteDDf w
;DDw x
ifFF 
(FF 
detalleFF 
.FF 
	EsEntradaFF %
)FF% &
{GG 
itemHH 
.HH 
CantidadEntradaHH (
=HH) *
detalleHH+ 2
.HH2 3
CantidadHH3 ;
.HH; <
ToStringHH< D
(HHD E
$strHHE H
+HHI J
AplicacionSettingsHHK ]
.HH] ^
DefaultHH^ e
.HHe f%
NumeroDecimalesEnCantidadHHf 
)	HH Ä
;
HHÄ Å
itemII 
.II "
ImporteUnitarioEntradaII /
=II0 1
detalleII2 9
.II9 :
ImporteUnitarioII: I
.III J
ToStringIIJ R
(IIR S
$strIIS V
+IIW X
AplicacionSettingsIIY k
.IIk l
DefaultIIl s
.IIs t$
NumeroDecimalesEnPrecio	IIt ã
)
IIã å
;
IIå ç
itemJJ 
.JJ 
ImporteTotalEntradaJJ ,
=JJ- .
(JJ/ 0
detalleJJ0 7
.JJ7 8
CantidadJJ8 @
*JJA B
detalleJJC J
.JJJ K
ImporteUnitarioJJK Z
)JJZ [
.JJ[ \
ToStringJJ\ d
(JJd e
$strJJe i
)JJi j
;JJj k
}KK 
elseLL 
{MM 
itemNN 
.NN 
CantidadSalidaNN '
=NN( )
detalleNN* 1
.NN1 2
CantidadNN2 :
.NN: ;
ToStringNN; C
(NNC D
$strNND G
+NNH I
AplicacionSettingsNNJ \
.NN\ ]
DefaultNN] d
.NNd e%
NumeroDecimalesEnCantidadNNe ~
)NN~ 
;	NN Ä
itemOO 
.OO !
ImporteUnitarioSalidaOO .
=OO/ 0
detalleOO1 8
.OO8 9
ImporteUnitarioOO9 H
.OOH I
ToStringOOI Q
(OOQ R
$strOOR U
+OOV W
AplicacionSettingsOOX j
.OOj k
DefaultOOk r
.OOr s$
NumeroDecimalesEnPrecio	OOs ä
)
OOä ã
;
OOã å
itemPP 
.PP 
ImporteTotalSalidaPP +
=PP, -
(PP. /
detallePP/ 6
.PP6 7
CantidadPP7 ?
*PP@ A
detallePPB I
.PPI J
ImporteUnitarioPPJ Y
)PPY Z
.PPZ [
ToStringPP[ c
(PPc d
$strPPd h
)PPh i
;PPi j
}QQ 
saldoRR 
+=RR 
(RR 
SystemRR  
.RR  !
ConvertRR! (
.RR( )
	ToDecimalRR) 2
(RR2 3
itemRR3 7
.RR7 8
CantidadEntradaRR8 G
)RRG H
-RRI J
SystemRRK Q
.RRQ R
ConvertRRR Y
.RRY Z
	ToDecimalRRZ c
(RRc d
itemRRd h
.RRh i
CantidadSalidaRRi w
)RRw x
)RRx y
;RRy z
kardexViewModelSS 
.SS  
AddSS  #
(SS# $
itemSS$ (
)SS( )
;SS) *
itemTT 
.TT 
SaldoTT 
=TT 
saldoTT "
.TT" #
ToStringTT# +
(TT+ ,
$strTT, 0
)TT0 1
;TT1 2
}UU 
returnVV 
kardexViewModelVV "
;VV" #
}WW 	
publicYY 
staticYY 
ListYY 
<YY 
KardexViewModelYY *
>YY* +
ConvertYY, 3
(YY3 4
)YY4 5
{ZZ 	
return[[ 
new[[ 
List[[ 
<[[ 
KardexViewModel[[ +
>[[+ ,
([[, -
)[[- .
;[[. /
}\\ 	
}^^ 
}bb ®
bD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Almacen\MovimientoDeAlmacenViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class (
MovimientoDeAlmacenViewModel -
{ 
[ 	

DataMember	 
] 
public 
long 
IdMovimiento  
;  !
public 
long 
IdOrden 
; 
public 
string +
CadenaHtmlDeMovimientoDeAlmacen 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
string )
CadenaHtmlDeOrdenDeMovimiento 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public (
MovimientoDeAlmacenViewModel +
(+ ,
), -
{ 	
} 	
public (
MovimientoDeAlmacenViewModel +
(+ ,
long, 0
idMovimiento1 =
,= >
string? E+
cadenaHtmlDeMovimientoDeAlmacenF e
,e f
stringg m*
cadenaHtmlDeOrdenDeMovimiento	n ã
)
ã å
{ 	
IdMovimiento 
= 
idMovimiento '
;' (+
CadenaHtmlDeMovimientoDeAlmacen +
=, -+
cadenaHtmlDeMovimientoDeAlmacen. M
;M N)
CadenaHtmlDeOrdenDeMovimiento )
=* +)
cadenaHtmlDeOrdenDeMovimiento, I
;I J
} 	
} 
}aa ã2
eD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Almacen\RegistroOrdenDeAlmacenViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public		 

class		 +
RegistroOrdenDeAlmacenViewModel		 0
{

 
public 
long 
IdOrdenDeOperacion &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DateTime 
FechaTraslado %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public "
ComboGenericoViewModel %
CentroDeAtencion& 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
IEnumerable 
< /
#DetalleMovimientoDeAlmacenViewModel >
>> ?
Detalles@ H
{I J
getK N
;N O
setP S
;S T
}U V
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
EsGeneracionTotal %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public +
RegistroOrdenDeAlmacenViewModel .
(. /
)/ 0
{ 	
this 
. 
TipoDeComprobante "
=# $
new% (%
SelectorTipoDeComprobante) B
(B C
)C D
;D E
} 	
} 
public 

class *
DetalleOrdenDeAlmacenViewModel /
{ 
public 
int 

IdProducto 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Ordenado 
{  !
get" %
;% &
set' *
;* +
}, -
public 
decimal 
RecibidoEntregado (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
decimal 
IngresoSalidaActual *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public   
bool   
EsBien   
{   
get    
;    !
set  " %
;  % &
}  ' (
public"" *
DetalleOrdenDeAlmacenViewModel"" -
(""- .
)"". /
{## 	
}$$ 	
public&& *
DetalleOrdenDeAlmacenViewModel&& -
(&&- .
DetalleDeOperacion&&. @
detalle&&A H
,&&H I
decimal&&J Q%
cantidadEntregadaRecibida&&R k
)&&k l
{'' 	

IdProducto(( 
=(( 
detalle((  
.((  !
Producto((! )
.(() *
Id((* ,
;((, -
Descripcion)) 
=)) 
detalle)) !
.))! "
Producto))" *
.))* +
Nombre))+ 1
;))1 2
Ordenado** 
=** 
detalle** 
.** 
Cantidad** '
;**' (
RecibidoEntregado++ 
=++ %
cantidadEntregadaRecibida++  9
;++9 :
IngresoSalidaActual,, 
=,,  !
Ordenado,," *
-,,+ ,
RecibidoEntregado,,- >
;,,> ?
EsBien-- 
=-- 
detalle-- 
.-- 
Producto-- %
.--% &
EsBien--& ,
;--, -
}.. 	
public00 
static00 
List00 
<00 *
DetalleOrdenDeAlmacenViewModel00 9
>009 :
	Convertir00; D
(00D E
List00E I
<00I J
DetalleDeOperacion00J \
>00\ ]
detalles00^ f
,00f g
List00h l
<00l m'
OrdenDeMovimientoDeAlmacen	00m á
>
00á à
ordenes
00â ê
)
00ê ë
{11 	
List22 
<22 *
DetalleOrdenDeAlmacenViewModel22 /
>22/ 0(
detallesTrasladoDeMercaderia221 M
=22N O
new22P S
List22T X
<22X Y*
DetalleOrdenDeAlmacenViewModel22Y w
>22w x
(22x y
)22y z
;22z {
foreach33 
(33 
var33 
detalle33  
in33! #
detalles33$ ,
)33, -
{44 
var55 

idConcepto55 
=55  
detalle55! (
.55( )
Producto55) 1
.551 2
Id552 4
;554 5
decimal66 %
cantidadEntregadaRecibida66 1
=662 3
$num664 5
;665 6
if77 
(77 
ordenes77 
!=77 
null77 #
)77# $
{88 
foreach99 
(99 
var99  
orden99! &
in99' )
ordenes99* 1
)991 2
{:: %
cantidadEntregadaRecibida;; 1
+=;;2 4
orden;;5 :
.;;: ;
DetalleTransaccion;;; M
(;;M N
);;N O
.;;O P
Single;;P V
(;;V W
dt;;W Y
=>;;Z \
dt;;] _
.;;_ `
id_concepto_negocio;;` s
==;;t v

idConcepto	;;w Å
)
;;Å Ç
.
;;Ç É
cantidad
;;É ã
;
;;ã å
}<< 
}== (
detallesTrasladoDeMercaderia>> ,
.>>, -
Add>>- 0
(>>0 1
new>>1 4*
DetalleOrdenDeAlmacenViewModel>>5 S
(>>S T
detalle>>T [
,>>[ \%
cantidadEntregadaRecibida>>] v
)>>v w
)>>w x
;>>x y
}?? 
return@@ (
detallesTrasladoDeMercaderia@@ /
;@@/ 0
}AA 	
}BB 
}CC ¸7
]D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Almacen\OrdenDeAlmacenViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class #
OrdenDeAlmacenViewModel (
{ 
[ 	

DataMember	 
] 
public 
long 
IdOrdenDeAlmacen $
;$ %
public 
string &
CadenaHtmlDeOrdenDeAlmacen 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public #
OrdenDeAlmacenViewModel &
(& '
)' (
{ 	
} 	
public #
OrdenDeAlmacenViewModel &
(& '
long' +
idOrdenDeAlmacen, <
,< =
string> D&
cadenaHtmlDeOrdenDeAlmacenE _
)_ `
{ 	
IdOrdenDeAlmacen 
= 
idOrdenDeAlmacen /
;/ 0&
CadenaHtmlDeOrdenDeAlmacen &
=' (&
cadenaHtmlDeOrdenDeAlmacen) C
;C D
} 	
} 
public 

class :
.OrdenDeAlmacenParaMovimientoDeAlmacenViewModel ?
{ 
public 
long 
IdOrdenDeAlmacen $
;$ %
public   
string   -
!EtiquetaDocumentoIdentidadTercero   7
{  8 9
get  : =
;  = >
set  ? B
;  B C
}  D E
public!! 
string!! %
DocumentoIdentidadTercero!! /
{!!0 1
get!!2 5
;!!5 6
set!!7 :
;!!: ;
}!!< =
public"" 
string"" !
EtiquetaNombreTercero"" +
{"", -
get"". 1
;""1 2
set""3 6
;""6 7
}""8 9
public## 
int## 
	IdTercero## 
{## 
get## "
;##" #
set##$ '
;##' (
}##) *
public$$ 
string$$ 
Tercero$$ 
{$$ 
get$$  #
;$$# $
set$$% (
;$$( )
}$$* +
public%% 
int%% 
IdUbigeoTercero%% "
{%%# $
get%%% (
;%%( )
set%%* -
;%%- .
}%%/ 0
public&& 
string&& 
DireccionTercero&& &
{&&' (
get&&) ,
;&&, -
set&&. 1
;&&1 2
}&&3 4
public'' 
string'' 
UbigeoTercero'' #
{''$ %
get''& )
;'') *
set''+ .
;''. /
}''0 1
public(( 
List(( 
<(( /
#DetalleMovimientoDeAlmacenViewModel(( 7
>((7 8
Detalles((9 A
;((A B
public** :
.OrdenDeAlmacenParaMovimientoDeAlmacenViewModel** =
(**= >
)**> ?
{++ 	
},, 	
public.. :
.OrdenDeAlmacenParaMovimientoDeAlmacenViewModel.. =
(..= >&
OrdenDeMovimientoDeAlmacen..> X
ordenDeMovimiento..Y j
)..j k
{// 	
IdOrdenDeAlmacen00 
=00 
ordenDeMovimiento00 0
.000 1
Id001 3
;003 4
this11 
.11 -
!EtiquetaDocumentoIdentidadTercero11 2
=113 4
ordenDeMovimiento115 F
.11F G
Tercero11G N
(11N O
)11O P
.11P Q(
CodigoTipoDocumentoIdentidad11Q m
(11m n
)11n o
;11o p
this22 
.22 %
DocumentoIdentidadTercero22 *
=22+ ,
ordenDeMovimiento22- >
.22> ?
Tercero22? F
(22F G
)22G H
.22H I
DocumentoIdentidad22I [
;22[ \
this33 
.33 !
EtiquetaNombreTercero33 &
=33' (
ordenDeMovimiento33) :
.33: ;
Tercero33; B
(33B C
)33C D
.33D E!
NombreRolActorNegocio33E Z
(33Z [
)33[ \
;33\ ]
this44 
.44 
	IdTercero44 
=44 
ordenDeMovimiento44 .
.44. /
Tercero44/ 6
(446 7
)447 8
.448 9
Id449 ;
;44; <
this55 
.55 
Tercero55 
=55 
ordenDeMovimiento55 ,
.55, -
Tercero55- 4
(554 5
)555 6
.556 7
RazonSocial557 B
;55B C
this66 
.66 
IdUbigeoTercero66  
=66! "
(66# $
ordenDeMovimiento66$ 5
.665 6
Tercero666 =
(66= >
)66> ?
.66? @
DomicilioFiscal66@ O
(66O P
)66P Q
!=66R T
null66U Y
)66Y Z
?66[ \
ordenDeMovimiento66] n
.66n o
Tercero66o v
(66v w
)66w x
.66x y
DomicilioFiscal	66y à
(
66à â
)
66â ä
.
66ä ã
Ubigeo
66ã ë
.
66ë í
id
66í î
:
66ï ñ
$num
66ó ò
;
66ò ô
this77 
.77 
UbigeoTercero77 
=77  
(77! "
ordenDeMovimiento77" 3
.773 4
Tercero774 ;
(77; <
)77< =
.77= >
DomicilioFiscal77> M
(77M N
)77N O
!=77P R
null77S W
)77W X
?77Y Z
ordenDeMovimiento77[ l
.77l m
Tercero77m t
(77t u
)77u v
.77v w
DomicilioFiscal	77w Ü
(
77Ü á
)
77á à
.
77à â
Ubigeo
77â è
.
77è ê
descripcion_larga
77ê °
:
77¢ £
$str
77§ ¶
;
77ß ®
this88 
.88 
DireccionTercero88 !
=88" #
(88$ %
ordenDeMovimiento88% 6
.886 7
Tercero887 >
(88> ?
)88? @
.88@ A
DomicilioFiscal88A P
(88P Q
)88Q R
!=88S U
null88V Z
)88Z [
?88\ ]
ordenDeMovimiento88^ o
.88o p
Tercero88p w
(88w x
)88x y
.88y z
DomicilioFiscal	88z â
(
88â ä
)
88ä ã
.
88ã å
detalle
88å ì
:
88î ï
$str
88ñ ò
;
88ò ô
Detalles99 
=99 /
#DetalleMovimientoDeAlmacenViewModel99 :
.99: ;
	Convertir99; D
(99D E
DetalleDeOperacion99E W
.99W X
Convert99X _
(99_ `
ordenDeMovimiento99` q
.99q r
DetalleTransaccion	99r Ñ
(
99Ñ Ö
)
99Ö Ü
)
99Ü á
,
99á à
ordenDeMovimiento
99â ö
.
99ö õ"
MovimientosDeAlmacen
99õ Ø
(
99Ø ∞
)
99∞ ±
)
99± ≤
;
99≤ ≥
}:: 	
};; 
}ÑÑ ÛU
jD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Almacen\RegistroMovimientoDeAlmacenViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
public 

class 0
$RegistroMovimientoDeAlmacenViewModel 5
{ 
public 
long 
IdOrdenDeAlmacen $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
long 
IdOperacion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
DateTime 
FechaInicioTraslado +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public '
RegistroTransporteViewModel *
Transportista+ 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public &
RegistroConductorViewModel )
	Conductor* 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public "
ComboGenericoViewModel %
ModalidadTransporte& 9
{: ;
get< ?
;? @
setA D
;D E
}F G
public "
ComboGenericoViewModel %
MotivoTraslado& 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public 
string 
DescripcionMotivo '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
decimal 
PesoBrutoTotal %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
int 
NumeroBultos 
{  !
get" %
;% &
set' *
;* +
}, -
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
IEnumerable 
< /
#DetalleMovimientoDeAlmacenViewModel >
>> ?
Detalles@ H
{I J
getK N
;N O
setP S
;S T
}U V
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
EsTrasladoTotal #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public "
ComboGenericoViewModel %
UbigeoOrigen& 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
string 
DireccionOrigen %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public "
ComboGenericoViewModel %
UbigeoDestino& 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
string 
DireccionDestino &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
ActorComercial_ 
Tercero &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public   "
ComboGenericoViewModel   %
CentroDeAtencion  & 6
{  7 8
get  9 <
;  < =
set  > A
;  A B
}  C D
public!! "
ComboGenericoViewModel!! %

Almacenero!!& 0
{!!1 2
get!!3 6
;!!6 7
set!!8 ;
;!!; <
}!!= >
public"" 
string"" 
DocumentoReferencia"" )
{""* +
get"", /
;""/ 0
set""1 4
;""4 5
}""6 7
public$$ 0
$RegistroMovimientoDeAlmacenViewModel$$ 3
($$3 4
)$$4 5
{%% 	
this&& 
.&& 
TipoDeComprobante&& "
=&&# $
new&&% (%
SelectorTipoDeComprobante&&) B
(&&B C
)&&C D
;&&D E
this'' 
.'' 
Transportista'' 
=''  
new''! $'
RegistroTransporteViewModel''% @
(''@ A
)''A B
;''B C
this(( 
.(( 
	Conductor(( 
=(( 
new((  &
RegistroConductorViewModel((! ;
(((; <
)((< =
;((= >
})) 	
}++ 
public-- 

class-- /
#DetalleMovimientoDeAlmacenViewModel-- 4
{.. 
public// 
int// 

IdProducto// 
{// 
get//  #
;//# $
set//% (
;//( )
}//* +
public00 
string00 
Descripcion00 !
{00" #
get00$ '
;00' (
set00) ,
;00, -
}00. /
public11 
decimal11 
StockActual11 "
{11# $
get11% (
;11( )
set11* -
;11- .
}11/ 0
public22 
decimal22 
Ordenado22 
{22  !
get22" %
;22% &
set22' *
;22* +
}22, -
public33 
decimal33 
RecibidoEntregado33 (
{33) *
get33+ .
;33. /
set330 3
;333 4
}335 6
public44 
decimal44 
IngresoSalidaActual44 *
{44+ ,
get44- 0
;440 1
set442 5
;445 6
}447 8
public55 
string55 
Lote55 
{55 
get55  
;55  !
set55" %
;55% &
}55' (
public66 
bool66 
EsBien66 
{66 
get66  
;66  !
set66" %
;66% &
}66' (
public88 /
#DetalleMovimientoDeAlmacenViewModel88 2
(882 3
)883 4
{99 	
}:: 	
public<< /
#DetalleMovimientoDeAlmacenViewModel<< 2
(<<2 3
DetalleDeOperacion<<3 E
detalle<<F M
,<<M N
string<<O U
lote<<V Z
,<<Z [
decimal<<\ c%
cantidadEntregadaRecibida<<d }
)<<} ~
{== 	

IdProducto>> 
=>> 
detalle>>  
.>>  !
Producto>>! )
.>>) *
Id>>* ,
;>>, -
Descripcion?? 
=?? 
detalle?? !
.??! "
Producto??" *
.??* +
Nombre??+ 1
;??1 2
Ordenado@@ 
=@@ 
detalle@@ 
.@@ 
Cantidad@@ '
;@@' (
RecibidoEntregadoAA 
=AA %
cantidadEntregadaRecibidaAA  9
;AA9 :
IngresoSalidaActualBB 
=BB  !
OrdenadoBB" *
-BB+ ,
RecibidoEntregadoBB- >
;BB> ?
LoteCC 
=CC 
loteCC 
;CC 
EsBienDD 
=DD 
detalleDD 
.DD 
ProductoDD %
.DD% &
EsBienDD& ,
;DD, -
}EE 	
publicGG 
staticGG 
ListGG 
<GG /
#DetalleMovimientoDeAlmacenViewModelGG >
>GG> ?
	ConvertirGG@ I
(GGI J
ListGGJ N
<GGN O
DetalleDeOperacionGGO a
>GGa b
detallesGGc k
,GGk l
ListGGm q
<GGq r 
MovimientoDeAlmacen	GGr Ö
>
GGÖ Ü
ordenes
GGá é
)
GGé è
{HH 	
ListII 
<II /
#DetalleMovimientoDeAlmacenViewModelII 4
>II4 5(
detallesTrasladoDeMercaderiaII6 R
=IIS T
newIIU X
ListIIY ]
<II] ^0
#DetalleMovimientoDeAlmacenViewModel	II^ Å
>
IIÅ Ç
(
IIÇ É
)
IIÉ Ñ
;
IIÑ Ö
foreachJJ 
(JJ 
varJJ 
detalleJJ  
inJJ! #
detallesJJ$ ,
)JJ, -
{KK 
varLL 

idConceptoLL 
=LL  
detalleLL! (
.LL( )
ProductoLL) 1
.LL1 2
IdLL2 4
;LL4 5
decimalMM %
cantidadEntregadaRecibidaMM 1
=MM2 3
$numMM4 5
;MM5 6
ifNN 
(NN 
ordenesNN 
!=NN 
nullNN #
)NN# $
{OO 
foreachPP 
(PP 
varPP  
ordenPP! &
inPP' )
ordenesPP* 1
)PP1 2
{QQ %
cantidadEntregadaRecibidaRR 1
+=RR2 4
ordenRR5 :
.RR: ;
DetalleTransaccionRR; M
(RRM N
)RRN O
.RRO P
SingleRRP V
(RRV W
dtRRW Y
=>RRZ \
dtRR] _
.RR_ `
id_concepto_negocioRR` s
==RRt v

idConcepto	RRw Å
)
RRÅ Ç
.
RRÇ É
cantidad
RRÉ ã
;
RRã å
}SS 
}TT (
detallesTrasladoDeMercaderiaUU ,
.UU, -
AddUU- 0
(UU0 1
newUU1 4/
#DetalleMovimientoDeAlmacenViewModelUU5 X
(UUX Y
detalleUUY `
,UU` a
detalleUUb i
.UUi j
LoteUUj n
,UUn o&
cantidadEntregadaRecibida	UUp â
)
UUâ ä
)
UUä ã
;
UUã å
}VV 
returnWW (
detallesTrasladoDeMercaderiaWW /
;WW/ 0
}XX 	
}YY 
public[[ 

class[[ '
RegistroTransporteViewModel[[ ,
{\\ 
public]] "
ComboGenericoViewModel]] %
Transportista]]& 3
{]]4 5
get]]6 9
;]]9 :
set]]; >
;]]> ?
}]]@ A
public^^ 
string^^ 
Placa^^ 
{^^ 
get^^ !
;^^! "
set^^# &
;^^& '
}^^( )
public`` '
RegistroTransporteViewModel`` *
(``* +
)``+ ,
{aa 	
}bb 	
}cc 
publicdd 

classdd &
RegistroConductorViewModeldd +
{ee 
publicff "
ComboGenericoViewModelff %
	Conductorff& /
{ff0 1
getff2 5
;ff5 6
setff7 :
;ff: ;
}ff< =
publicgg 
stringgg 
NumeroLicenciagg $
{gg% &
getgg' *
;gg* +
setgg, /
;gg/ 0
}gg1 2
publicii &
RegistroConductorViewModelii )
(ii) *
)ii* +
{jj 	
}kk 	
}ll 
}mm Ó>
nD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\CentroAtencion\RegistroCentroDeAtencionViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
.

, -
Comprobante

- 8
{ 
public 

class -
!RegistroCentroDeAtencionViewModel 2
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
IdActor 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool  
SalidaBienesSinStock (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
List 
< "
ComboGenericoViewModel *
>* +
Roles, 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public -
!RegistroCentroDeAtencionViewModel 0
(0 1
)1 2
{ 	
} 	
public -
!RegistroCentroDeAtencionViewModel 0
(0 1%
CentroDeAtencionExtendido1 J
centroDeAtencionK [
)[ \
{ 	
this 
. 
Id 
= 
centroDeAtencion &
.& '
Id' )
;) *
this   
.   
IdActor   
=   
centroDeAtencion   +
.  + ,
IdActor  , 3
;  3 4
this!! 
.!! 
Codigo!! 
=!! 
centroDeAtencion!! *
.!!* +
Codigo!!+ 1
;!!1 2
this"" 
."" 
Nombre"" 
="" 
centroDeAtencion"" *
.""* +
Nombre""+ 1
;""1 2
this## 
.##  
SalidaBienesSinStock## %
=##& '
centroDeAtencion##( 8
.##8 9 
SalidaBienesSinStock##9 M
;##M N
this$$ 
.$$ 
Roles$$ 
=$$ 
new$$ 
List$$ !
<$$! ""
ComboGenericoViewModel$$" 8
>$$8 9
($$9 :
)$$: ;
;$$; <
foreach%% 
(%% 
var%% 
item%% 
in%%  
centroDeAtencion%%! 1
.%%1 2
RolesHijosVigentes%%2 D
)%%D E
{&& 
this'' 
.'' 
Roles'' 
.'' 
Add'' 
('' 
new'' ""
ComboGenericoViewModel''# 9
(''9 :
item'': >
.''> ?
Id''? A
,''A B
item''C G
.''G H
Nombre''H N
)''N O
)''O P
;''P Q
}(( 
})) 	
}++ 
public-- 

class-- ,
 BandejaCentroDeAtencionViewModel-- 1
{.. 
[// 	

DataMember//	 
]// 
public00 
int00 
Id00 
{00 
get00 
;00 
set00  
;00  !
}00" #
public11 
string11 
Codigo11 
{11 
get11 "
;11" #
set11$ '
;11' (
}11) *
public22 
string22 
Nombre22 
{22 
get22 "
;22" #
set22$ '
;22' (
}22) *
public33 
string33 
Roles33 
{33 
get33 !
;33! "
set33# &
;33& '
}33( )
public44 
bool44 1
%EsCentroAtencionParaObtencioDePrecios44 9
{44: ;
get44< ?
;44? @
set44A D
;44D E
}44F G
public55 
bool55 /
#EsCentroAtencionParaObtencioDeStock55 7
{558 9
get55: =
;55= >
set55? B
;55B C
}55D E
public77 ,
 BandejaCentroDeAtencionViewModel77 /
(77/ 0
)770 1
{88 	
}:: 	
public<< ,
 BandejaCentroDeAtencionViewModel<< /
(<</ 0%
CentroDeAtencionExtendido<<0 I
centroDeAtencion<<J Z
)<<Z [
{== 	
this>> 
.>> 
Id>> 
=>> 
centroDeAtencion>> &
.>>& '
Id>>' )
;>>) *
this?? 
.?? 
Codigo?? 
=?? 
centroDeAtencion?? *
.??* +
Codigo??+ 1
;??1 2
this@@ 
.@@ 
Nombre@@ 
=@@ 
centroDeAtencion@@ *
.@@* +
Nombre@@+ 1
;@@1 2
thisAA 
.AA 
RolesAA 
=AA 
CadenaRolesAA $
(AA$ %
centroDeAtencionAA% 5
.AA5 6
RolesHijosVigentesAA6 H
.AAH I
ToListAAI O
(AAO P
)AAP Q
)AAQ R
;AAR S
thisBB 
.BB 1
%EsCentroAtencionParaObtencioDePreciosBB 6
=BB7 8
centroDeAtencionBB9 I
.BBI J1
%EsCentroAtencionParaObtencioDePreciosBBJ o
;BBo p
thisCC 
.CC /
#EsCentroAtencionParaObtencioDeStockCC 4
=CC5 6
centroDeAtencionCC7 G
.CCG H/
#EsCentroAtencionParaObtencioDeStockCCH k
;CCk l
}DD 	
publicFF 
staticFF 
ListFF 
<FF ,
 BandejaCentroDeAtencionViewModelFF ;
>FF; <
ConvertFF= D
(FFD E
ListFFE I
<FFI J%
CentroDeAtencionExtendidoFFJ c
>FFc d
centrosDeAtencionFFe v
)FFv w
{GG 	
ListHH 
<HH ,
 BandejaCentroDeAtencionViewModelHH 1
>HH1 2&
centrosDeAtencionViewModelHH3 M
=HHN O
newHHP S
ListHHT X
<HHX Y,
 BandejaCentroDeAtencionViewModelHHY y
>HHy z
(HHz {
)HH{ |
;HH| }
foreachJJ 
(JJ 
varJJ 
itemJJ 
inJJ  
centrosDeAtencionJJ! 2
)JJ2 3
{KK &
centrosDeAtencionViewModelLL *
.LL* +
AddLL+ .
(LL. /
newLL/ 2,
 BandejaCentroDeAtencionViewModelLL3 S
(LLS T
itemLLT X
)LLX Y
)LLY Z
;LLZ [
}MM 
returnNN &
centrosDeAtencionViewModelNN -
;NN- .
}OO 	
publicQQ 
stringQQ 
CadenaRolesQQ !
(QQ! "
ListQQ" &
<QQ& '
ItemGenericoQQ' 3
>QQ3 4
rolesQQ5 :
)QQ: ;
{RR 	
stringSS 
rolesViewModelSS !
=SS" #
$strSS$ &
;SS& '
foreachUU 
(UU 
varUU 
itemUU 
inUU  
rolesUU! &
)UU& '
{VV 
rolesViewModelWW 
+=WW !
itemWW" &
.WW& '
NombreWW' -
+WW. /
$strWW0 4
;WW4 5
}XX 
rolesViewModelYY 
=YY 
rolesViewModelYY +
==YY, .
$strYY/ 1
?YY2 3
rolesViewModelYY4 B
:YYC D
rolesViewModelYYE S
.YYS T
	SubstringYYT ]
(YY] ^
$numYY^ _
,YY_ `
rolesViewModelYYa o
.YYo p
LengthYYp v
-YYw x
$numYYy z
)YYz {
;YY{ |
returnZZ 
rolesViewModelZZ !
;ZZ! "
}[[ 	
}]] 
}__ ô
ZD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\CentroAtencion\FotoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
public

 

class

 
FotoViewModel

 
{ 
public 
string 
Foto 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
FotoSrc 
{ 
get  #
;# $
set% (
;( )
}* +
public 
bool 
HayFoto 
{ 
get !
;! "
set# &
;& '
}( )
public 
FotoViewModel 
( 
) 
{ 	
} 	
public 
FotoViewModel 
( 
bool !
hayFoto" )
,) *
byte+ /
[0 1
]1 2
foto3 7
)7 8
{ 	
this 
. 
Foto 
= 
Convert 
.  
ToBase64String  .
(. /
foto/ 3
)3 4
;4 5
this 
. 
HayFoto 
= 
hayFoto "
;" #
this 
. 
FotoSrc 
= 
ResolverFoto '
(' (
hayFoto( /
,0 1
foto2 6
)6 7
;7 8
} 	
public 
string 
ResolverFoto #
(# $
bool$ (
hayFoto) 0
,0 1
byte2 6
[6 7
]7 8
foto9 =
)= >
{   	
string!! 
fotoSrc!! 
=!! 
$str!! 
;!!  
if"" 
("" 
hayFoto"" 
)"" 
{## 
fotoSrc$$ 
=$$ 
($$ 
$str$$ 4
+$$5 6
Convert$$7 >
.$$> ?
ToBase64String$$? M
($$M N
foto$$N R
,$$R S
$num$$T U
,$$U V
foto$$W [
.$$[ \
Length$$\ b
)$$b c
)$$c d
;$$d e
}%% 
else&& 
{'' 
fotoSrc(( 
=(( 
$str(( [
;(([ \
})) 
return++ 
fotoSrc++ 
;++ 
},, 	
}.. 
}11 ôE
fD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\CentroAtencion\RegistroSucursalViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
.

, -
Comprobante

- 8
{ 
public 

class %
RegistroSucursalViewModel *
{ 
public 
int 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
int 
IdActor 
{ 
get  
;  !
set" %
;% &
}' (
public 
string !
CodigoEstablecimiento +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
string #
InformacionPublicitaria -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
NombreInterno #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Correo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DireccionViewModel !
	Direccion" +
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
FotoViewModel 
Foto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
? 2
&IdCentroDeAtencionParaObtencionPrecios :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
int 
? 0
$IdCentroDeAtencionParaObtencionStock 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
string (
CodigoEstablecimientoDigemid 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public %
RegistroSucursalViewModel (
(( )
)) *
{ 	
} 	
public!! %
RegistroSucursalViewModel!! (
(!!( )4
(EstablecimientoComercialExtendidoConLogo!!) Q
sucursal!!R Z
)!!Z [
{"" 	
this## 
.## 
Id## 
=## 
sucursal## 
.## 
Id## !
;##! "
this$$ 
.$$ 
IdActor$$ 
=$$ 
sucursal$$ #
.$$# $
IdActor$$$ +
;$$+ ,
this%% 
.%% !
CodigoEstablecimiento%% &
=%%' (
sucursal%%) 1
.%%1 2
Codigo%%2 8
;%%8 9
this&& 
.&& #
InformacionPublicitaria&& (
=&&) *
sucursal&&+ 3
.&&3 4#
InformacionPublicitaria&&4 K
;&&K L
this'' 
.'' 
Nombre'' 
='' 
sucursal'' "
.''" #
Nombre''# )
;'') *
this(( 
.(( 
NombreInterno(( 
=((  
sucursal((! )
.(() *
NombreInterno((* 7
;((7 8
this)) 
.)) 
Telefono)) 
=)) 
sucursal)) $
.))$ %
Telefono))% -
;))- .
this** 
.** 
Correo** 
=** 
sucursal** "
.**" #
Correo**# )
;**) *
this++ 
.++ 
	Direccion++ 
=++ 
new++  
DireccionViewModel++! 3
(++3 4
sucursal++4 <
.++< =
	Domicilio++= F
)++F G
;++G H
this,, 
.,, 
Foto,, 
=,, 
new,, 
FotoViewModel,, )
(,,) *
sucursal,,* 2
.,,2 3
	TieneLogo,,3 <
,,,< =
sucursal,,> F
.,,F G
Logo,,G K
),,K L
;,,L M
this-- 
.-- 2
&IdCentroDeAtencionParaObtencionPrecios-- 7
=--8 9
sucursal--: B
.--B C4
(IdCentroDeAtencionParaObtencionDePrecios--C k
;--k l
this.. 
... 0
$IdCentroDeAtencionParaObtencionStock.. 5
=..6 7
sucursal..8 @
...@ A2
&IdCentroDeAtencionParaObtencionDeStock..A g
;..g h
if// 
(// 
ActorSettings// 
.// 
Default// %
.//% &D
8PermitirRegistroCodigoDigemidEnEstableciemientoComercial//& ^
)//^ _
this//` d
.//d e)
CodigoEstablecimientoDigemid	//e Å
=
//Ç É
sucursal
//Ñ å
.
//å ç*
CodigoEstablecimientoDigemid
//ç ©
;
//© ™
}00 	
}22 
public55 

class55 $
BandejaSucursalViewModel55 )
{66 
[77 	

DataMember77	 
]77 
public88 
int88 
Id88 
{88 
get88 
;88 
set88  
;88  !
}88" #
public99 
string99 
Nombre99 
{99 
get99 "
;99" #
set99$ '
;99' (
}99) *
public:: 
string:: 
TipoDeDocumento:: %
{::& '
get::( +
;::+ ,
set::- 0
;::0 1
}::2 3
public;; 
string;; &
NumeroDocumentoDeIdentidad;; 0
{;;1 2
get;;3 6
;;;6 7
set;;8 ;
;;;; <
};;= >
public<< 
string<< 
	Direccion<< 
{<<  !
get<<" %
;<<% &
set<<' *
;<<* +
}<<, -
public== 
bool== 
Vigente== 
{== 
get== !
;==! "
set==# &
;==& '
}==( )
public?? $
BandejaSucursalViewModel?? '
(??' (
)??( )
{@@ 	
}BB 	
publicDD $
BandejaSucursalViewModelDD '
(DD' (-
!EstablecimientoComercialExtendidoDD( I
sucursalDDJ R
)DDR S
{EE 	
thisFF 
.FF 
IdFF 
=FF 
sucursalFF 
.FF 
IdFF !
;FF! "
thisGG 
.GG 
NombreGG 
=GG 
sucursalGG "
.GG" #
NombreGG# )
;GG) *
thisHH 
.HH 
TipoDeDocumentoHH  
=HH! "
sucursalHH# +
.HH+ ,
NombreTipoDocumentoHH, ?
;HH? @
thisII 
.II &
NumeroDocumentoDeIdentidadII +
=II, -
sucursalII. 6
.II6 7
DocumentoIdentidadII7 I
;III J
ifJJ 
(JJ 
sucursalJJ 
.JJ 
DomicilioFiscalJJ (
!=JJ) +
nullJJ, 0
)JJ0 1
{KK 
thisLL 
.LL 
	DireccionLL 
=LL  
DireccionViewModelLL! 3
.LL3 4
	DireccionLL4 =
(LL= >
sucursalLL> F
.LLF G
DomicilioFiscalLLG V
)LLV W
;LLW X
}MM 
}OO 	
publicQQ 
staticQQ 
ListQQ 
<QQ $
BandejaSucursalViewModelQQ 3
>QQ3 4
ConvertQQ5 <
(QQ< =
ListQQ= A
<QQA B
SucursalQQB J
>QQJ K

sucursalesQQL V
)QQV W
{RR 	
ListSS 
<SS $
BandejaSucursalViewModelSS )
>SS) *
sucursalViewModelSS+ <
=SS= >
newSS? B
ListSSC G
<SSG H$
BandejaSucursalViewModelSSH `
>SS` a
(SSa b
)SSb c
;SSc d
foreachTT 
(TT 
varTT 
itemTT 
inTT  

sucursalesTT! +
)TT+ ,
{UU 
sucursalViewModelVV !
.VV! "
AddVV" %
(VV% &
newVV& )$
BandejaSucursalViewModelVV* B
(VVB C
itemVVC G
)VVG H
)VVH I
;VVI J
}WW 
returnXX 
sucursalViewModelXX $
;XX$ %
}YY 	
}ZZ 
}[[ ö6
bD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\CentroAtencion\RegistroSedeViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
.		, -
Comprobante		- 8
{

 
public 

class !
RegistroSedeViewModel &
{ 
public 
int 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
int 
IdActor 
{ 
get  
;  !
set" %
;% &
}' (
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string !
CodigoEstablecimiento +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
string #
InformacionPublicitaria -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public "
ComboGenericoViewModel %
TipoPersona& 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public "
ComboGenericoViewModel %

ClaseActor& 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
NombreComercial %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
NombreInterno #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Correo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DireccionViewModel !
	Direccion" +
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
FotoViewModel 
Foto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
? 2
&IdCentroDeAtencionParaObtencionPrecios :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
int 
? 0
$IdCentroDeAtencionParaObtencionStock 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
string (
CodigoEstablecimientoDigemid 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public   !
RegistroSedeViewModel   $
(  $ %
)  % &
{!! 	
}## 	
public%% !
RegistroSedeViewModel%% $
(%%$ %4
(EstablecimientoComercialExtendidoConLogo%%% M
sede%%N R
)%%R S
{&& 	
this'' 
.'' 
Id'' 
='' 
sede'' 
.'' 
Id'' 
;'' 
this(( 
.(( 
IdActor(( 
=(( 
sede(( 
.((  
IdActor((  '
;((' (
this)) 
.)) $
NumeroDocumentoIdentidad)) )
=))* +
sede)), 0
.))0 1
DocumentoIdentidad))1 C
;))C D
this** 
.** !
CodigoEstablecimiento** &
=**' (
sede**) -
.**- .
Codigo**. 4
;**4 5
this++ 
.++ #
InformacionPublicitaria++ (
=++) *
sede+++ /
.++/ 0#
InformacionPublicitaria++0 G
;++G H
this,, 
.,, 
TipoPersona,, 
=,, 
new,, ""
ComboGenericoViewModel,,# 9
(,,9 :
sede,,: >
.,,> ?
IdTipoPersona,,? L
,,,L M
sede,,N R
.,,R S
TipoPersona,,S ^
),,^ _
;,,_ `
this-- 
.-- 

ClaseActor-- 
=-- 
new-- !"
ComboGenericoViewModel--" 8
(--8 9
sede--9 =
.--= >
IdClaseActor--> J
,--J K
sede--L P
.--P Q

ClaseActor--Q [
)--[ \
;--\ ]
this.. 
... 
RazonSocial.. 
=.. 
sede.. #
...# $
Nombre..$ *
;..* +
this// 
.// 
NombreComercial//  
=//! "
sede//# '
.//' (
NombreComercial//( 7
;//7 8
this00 
.00 
NombreInterno00 
=00  
sede00! %
.00% &
NombreInterno00& 3
;003 4
this11 
.11 
Telefono11 
=11 
sede11  
.11  !
Telefono11! )
;11) *
this22 
.22 
Correo22 
=22 
sede22 
.22 
Correo22 %
;22% &
this33 
.33 
	Direccion33 
=33 
new33  
DireccionViewModel33! 3
(333 4
sede334 8
.338 9
	Domicilio339 B
)33B C
;33C D
this44 
.44 
Foto44 
=44 
new44 
FotoViewModel44 )
(44) *
sede44* .
.44. /
	TieneLogo44/ 8
,448 9
sede44: >
.44> ?
Logo44? C
)44C D
;44D E
this55 
.55 2
&IdCentroDeAtencionParaObtencionPrecios55 7
=558 9
sede55: >
.55> ?4
(IdCentroDeAtencionParaObtencionDePrecios55? g
;55g h
this66 
.66 0
$IdCentroDeAtencionParaObtencionStock66 5
=666 7
sede668 <
.66< =2
&IdCentroDeAtencionParaObtencionDeStock66= c
;66c d
if77 
(77 
ActorSettings77 
.77 
Default77 %
.77% &D
8PermitirRegistroCodigoDigemidEnEstableciemientoComercial77& ^
)77^ _
this77` d
.77d e)
CodigoEstablecimientoDigemid	77e Å
=
77Ç É
sede
77Ñ à
.
77à â*
CodigoEstablecimientoDigemid
77â •
;
77• ¶
}88 	
}:: 
}== ì
^D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Cochera\RegistroIngresoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
} øt
jD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Compra\CompraCorporativaConDetallesViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class &
CompraCorporativaViewModel +
{ 
[ 	

DataMember	 
] 
public 
long 
IdOrden 
{ 
get !
;! "
set# &
;& '
}( )
public 
long 
IdCompra 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
AccionEditar  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
AccionConfirmar #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
bool 
AccionInvalidar #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
bool 
AccionAnular  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool &
AccionModificarComprobante .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
bool '
AccionGenerarOrdenDeAlmacen /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
string !
CadenaHtmlDeDocumento +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
List 
< ,
 DetalleOrdenDeOperacionViewModel 4
>4 5
Detalles6 >
{? @
getA D
;D E
setF I
;I J
}K L
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public   
string   #
EtiquetaNombreDocumento   -
{  . /
get  0 3
;  3 4
set  5 8
;  8 9
}  : ;
public!! 
string!! &
EtiquetaDocumentoIdentidad!! 0
{!!1 2
get!!3 6
;!!6 7
set!!8 ;
;!!; <
}!!= >
public"" 
string"" '
DocumentoIdentidadProveedor"" 1
{""2 3
get""4 7
;""7 8
set""9 <
;""< =
}""> ?
public## 
string## 
NombreDocumento## %
{##& '
get##( +
;##+ ,
set##- 0
;##0 1
}##2 3
public$$ 
string$$  
SerieNumeroDocumento$$ *
{$$+ ,
get$$- 0
;$$0 1
set$$2 5
;$$5 6
}$$7 8
public%% 
int%% 
IdProveedor%% 
{%%  
get%%! $
;%%$ %
set%%& )
;%%) *
}%%+ ,
public&& 
string&& 
	Proveedor&& 
{&&  !
get&&" %
;&&% &
set&&' *
;&&* +
}&&, -
public'' 
string'' 
DireccionProveedor'' (
{'') *
get''+ .
;''. /
set''0 3
;''3 4
}''5 6
public(( 
string(( 
TelefonoProveedor(( '
{((( )
get((* -
;((- .
set((/ 2
;((2 3
}((4 5
public)) 
string)) 
Empleado)) 
{))  
get))! $
;))$ %
set))& )
;))) *
}))+ ,
public** 
string** 
SubTotal** 
{**  
get**! $
;**$ %
set**& )
;**) *
}**+ ,
public++ 
string++ 
Igv++ 
{++ 
get++ 
;++  
set++! $
;++$ %
}++& '
public,, 
string,, 
Total,, 
{,, 
get,, !
;,,! "
set,,# &
;,,& '
},,( )
public-- 
string-- 
Estado-- 
{-- 
get-- "
;--" #
set--$ '
;--' (
}--) *
public.. 
string.. 
Flete.. 
{.. 
get.. !
;..! "
set..# &
;..& '
}..( )
public00 &
CompraCorporativaViewModel00 )
(00) *
)00* +
{11 	
}33 	
public55 &
CompraCorporativaViewModel55 )
(55) *
OrdenDeCompra55* 7
ordenDeCompra558 E
,55E F
string55G M!
cadenaHtmlDeDocumento55N c
)55c d
{66 	
this77 
.77 
IdOrden77 
=77 
ordenDeCompra77 (
.77( )
Id77) +
;77+ ,
this88 
.88 
IdCompra88 
=88 
ordenDeCompra88 )
.88) *
IdCompra88* 2
;882 3
this99 
.99 
AccionEditar99 
=99 
ordenDeCompra99  -
.99- .
IdEstadoActual99. <
==99= ?
MaestroSettings99@ O
.99O P
Default99P W
.99W X,
 IdDetalleMaestroEstadoRegistrado99X x
;99x y
this:: 
.:: 
AccionConfirmar::  
=::! "
ordenDeCompra::# 0
.::0 1
IdEstadoActual::1 ?
==::@ B
MaestroSettings::C R
.::R S
Default::S Z
.::Z [,
 IdDetalleMaestroEstadoRegistrado::[ {
;::{ |
this;; 
.;; 
AccionInvalidar;;  
=;;! "
ordenDeCompra;;# 0
.;;0 1$
esAnulableConNotaInterna;;1 I
(;;I J
);;J K
;;;K L
this<< 
.<< 
AccionAnular<< 
=<< 
ordenDeCompra<<  -
.<<- .&
esAnulableConNotaDeCredito<<. H
(<<H I
)<<I J
;<<J K
this== 
.== &
AccionModificarComprobante== +
===, -
ordenDeCompra==. ;
.==; <
IdEstadoActual==< J
====K M
MaestroSettings==N ]
.==] ^
Default==^ e
.==e f-
 IdDetalleMaestroEstadoConfirmado	==f Ü
;
==Ü á
this>> 
.>> '
AccionGenerarOrdenDeAlmacen>> ,
=>>- .
!>>/ 0
(>>0 1
bool>>1 5
)>>5 6
ordenDeCompra>>6 C
.>>C D,
 SeGeneroOrdenDeAlmacenTotalMente>>D d
(>>d e
)>>e f
;>>f g
this?? 
.?? !
CadenaHtmlDeDocumento?? &
=??' (!
cadenaHtmlDeDocumento??) >
;??> ?
thisAA 
.AA 
DetallesAA 
=AA ,
 DetalleOrdenDeOperacionViewModelAA <
.AA< =
ConvertirABienesAA= M
(AAM N
ordenDeCompraAAN [
.AA[ \
DetallesAA\ d
(AAd e
)AAe f
.AAf g
WhereAAg l
(AAl m
dAAm n
=>AAo q
dAAr s
.AAs t
DetalleTransaccion	AAt Ü
(
AAÜ á
)
AAá à
.
AAà â!
id_concepto_negocio
AAâ ú
!=
AAù ü
ConceptoSettings
AA† ∞
.
AA∞ ±
Default
AA± ∏
.
AA∏ π$
IdConceptoNegocioFlete
AAπ œ
)
AAœ –
.
AA– —
ToList
AA— ◊
(
AA◊ ÿ
)
AAÿ Ÿ
)
AAŸ ⁄
;
AA⁄ €
thisBB 
.BB 
IdBB 
=BB 
ordenDeCompraBB #
.BB# $
IdBB$ &
;BB& '
thisCC 
.CC 
FechaCC 
=CC 
ordenDeCompraCC &
.CC& '

FechaOrdenCC' 1
(CC1 2
)CC2 3
.CC3 4
ToStringCC4 <
(CC< =
$strCC= I
)CCI J
;CCJ K
thisEE 
.EE 
NombreDocumentoEE  
=EE! "
ordenDeCompraEE# 0
.EE0 1
ComprobanteEE1 <
(EE< =
)EE= >
.EE> ?
TipoEE? C
(EEC D
)EED E
.EEE F
NombreEEF L
;EEL M
thisFF 
.FF  
SerieNumeroDocumentoFF %
=FF& '
ordenDeCompraFF( 5
.FF5 6
ComprobanteFF6 A
(FFA B
)FFB C
.FFC D
NumeroDeComprobanteFFD W
>FFX Y
$numFFZ [
?FF\ ]
ordenDeCompraFF^ k
.FFk l
ComprobanteFFl w
(FFw x
)FFx y
.FFy z
NumeroDeSerie	FFz á
+
FFà â
$str
FFä ç
+
FFé è
ordenDeCompra
FFê ù
.
FFù û
Comprobante
FFû ©
(
FF© ™
)
FF™ ´
.
FF´ ¨!
NumeroDeComprobante
FF¨ ø
:
FF¿ ¡
ordenDeCompra
FF¬ œ
.
FFœ –
Comprobante
FF– €
(
FF€ ‹
)
FF‹ ›
.
FF› ﬁ
NombreCortoTipo
FFﬁ Ì
;
FFÌ Ó
thisGG 
.GG 
IdProveedorGG 
=GG 
ordenDeCompraGG ,
.GG, -
	ProveedorGG- 6
(GG6 7
)GG7 8
.GG8 9
IdGG9 ;
;GG; <
thisHH 
.HH 
	ProveedorHH 
=HH 
ordenDeCompraHH *
.HH* +
	ProveedorHH+ 4
(HH4 5
)HH5 6
.HH6 7
RazonSocialHH7 B
;HHB C
thisII 
.II '
DocumentoIdentidadProveedorII ,
=II- .
ordenDeCompraII/ <
.II< =
	ProveedorII= F
(IIF G
)IIG H
.IIH I
DocumentoIdentidadIII [
;II[ \
thisJJ 
.JJ 
DireccionProveedorJJ #
=JJ$ %
(JJ& '
ordenDeCompraJJ' 4
.JJ4 5
	ProveedorJJ5 >
(JJ> ?
)JJ? @
.JJ@ A
DomicilioFiscalJJA P
(JJP Q
)JJQ R
!=JJS U
nullJJV Z
)JJZ [
?JJ\ ]
(JJ^ _
ordenDeCompraJJ_ l
.JJl m
	ProveedorJJm v
(JJv w
)JJw x
.JJx y
DomicilioFiscal	JJy à
(
JJà â
)
JJâ ä
.
JJä ã
detalle
JJã í
+
JJì î
$str
JJï ö
+
JJõ ú
ordenDeCompra
JJù ™
.
JJ™ ´
	Proveedor
JJ´ ¥
(
JJ¥ µ
)
JJµ ∂
.
JJ∂ ∑
DomicilioFiscal
JJ∑ ∆
(
JJ∆ «
)
JJ« »
.
JJ» …
Ubigeo
JJ… œ
.
JJœ –
descripcion_larga
JJ– ·
)
JJ· ‚
.
JJ‚ „
ToUpper
JJ„ Í
(
JJÍ Î
)
JJÎ Ï
:
JJÌ Ó
$str
JJÔ Ò
;
JJÒ Ú
thisKK 
.KK 
TelefonoProveedorKK "
=KK# $
ordenDeCompraKK% 2
.KK2 3
	ProveedorKK3 <
(KK< =
)KK= >
.KK> ?
TelefonoKK? G
(KKG H
)KKH I
??KKJ L
$strKKM O
;KKO P
thisLL 
.LL #
EtiquetaNombreDocumentoLL (
=LL) *
ordenDeCompraLL+ 8
.LL8 9
ComprobanteLL9 D
(LLD E
)LLE F
.LLF G
TipoLLG K
(LLK L
)LLL M
.LLM N
NombreLLN T
;LLT U
thisMM 
.MM &
EtiquetaDocumentoIdentidadMM +
=MM, -
ordenDeCompraMM. ;
.MM; <
	ProveedorMM< E
(MME F
)MMF G
.MMG H(
CodigoTipoDocumentoIdentidadMMH d
(MMd e
)MMe f
;MMf g
thisNN 
.NN 
EmpleadoNN 
=NN 
ordenDeCompraNN )
.NN) *
EmpleadoNN* 2
(NN2 3
)NN3 4
.NN4 5
NombresNN5 <
;NN< =
thisOO 
.OO 
IgvOO 
=OO 
ordenDeCompraOO $
.OO$ %
IgvOO% (
(OO( )
)OO) *
.OO* +
ToStringOO+ 3
(OO3 4
$strOO4 8
)OO8 9
;OO9 :
thisPP 
.PP 
TotalPP 
=PP 
ordenDeCompraPP &
.PP& '
TotalPP' ,
.PP, -
ToStringPP- 5
(PP5 6
$strPP6 :
)PP: ;
;PP; <
thisQQ 
.QQ 
SubTotalQQ 
=QQ 
(QQ 
SystemQQ #
.QQ# $
ConvertQQ$ +
.QQ+ ,
	ToDecimalQQ, 5
(QQ5 6
TotalQQ6 ;
)QQ; <
-QQ= >
SystemQQ? E
.QQE F
ConvertQQF M
.QQM N
	ToDecimalQQN W
(QQW X
IgvQQX [
)QQ[ \
)QQ\ ]
.QQ] ^
ToStringQQ^ f
(QQf g
$strQQg k
)QQk l
;QQl m
thisRR 
.RR 
EstadoRR 
=RR 
ordenDeCompraRR '
.RR' (
EstadoActualRR( 4
(RR4 5
)RR5 6
.RR6 7
nombreRR7 =
;RR= >
thisSS 
.SS 
FleteSS 
=SS 
ordenDeCompraSS &
.SS& '
FleteSS' ,
.SS, -
ToStringSS- 5
(SS5 6
$strSS6 :
)SS: ;
;SS; <
}TT 	
}UU 
public
££ 

class
££ )
ConfirmacionCompraViewModel
££ ,
{
§§ 
[
•• 	

DataMember
••	 
]
•• 
public
¶¶ 
long
¶¶ 
IdOrden
¶¶ 
{
¶¶ 
get
¶¶ !
;
¶¶! "
set
¶¶# &
;
¶¶& '
}
¶¶( )
public
ßß 
bool
ßß "
HayRegistroTrazaPago
ßß (
{
ßß) *
get
ßß+ .
;
ßß. /
set
ßß0 3
;
ßß3 4
}
ßß5 6
public
®® 
bool
®® ,
HayRegistroMovimientoDeAlmacen
®® 2
{
®®3 4
get
®®5 8
;
®®8 9
set
®®: =
;
®®= >
}
®®? @
public
©© 
bool
©© !
UsaComprobanteOrden
©© '
{
©©( )
get
©©* -
;
©©- .
set
©©/ 2
;
©©2 3
}
©©4 5
public
´´ )
ConfirmacionCompraViewModel
´´ *
(
´´* +
)
´´+ ,
{
¨¨ 	
}
ÆÆ 	
}
ØØ 
}∞∞ ø
eD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Compra\RegistroAnulacionCompraViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
public 

class ,
 RegistroAnulacionCompraViewModel 1
{ 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
	Proveedor 
{  !
get" %
;% &
set' *
;* +
}, -
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
List 
< ,
 DetalleOrdenDeOperacionViewModel 4
>4 5
Detalles6 >
{? @
getA D
;D E
setF I
;I J
}K L
public 
string 
SubTotal 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Igv 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Total 
{ 
get !
;! "
set# &
;& '
}( )
public ,
 RegistroAnulacionCompraViewModel /
(/ 0
)0 1
{ 	
} 	
public ,
 RegistroAnulacionCompraViewModel /
(/ 0
OrdenDeCompra0 =
orden> C
)C D
{ 	
this 
. 
Id 
= 
orden 
. 
Id 
; 
this 
. 
Fecha 
= 
orden 
. 

FechaOrden )
() *
)* +
.+ ,
ToString, 4
(4 5
$str5 A
)A B
;B C
this   
.   
	Proveedor   
=   
orden   "
.  " #
	Proveedor  # ,
(  , -
)  - .
.  . /
RazonSocial  / :
;  : ;
this!! 
.!! 
Igv!! 
=!! 
orden!! 
.!! 
Igv!!  
(!!  !
)!!! "
.!!" #
ToString!!# +
(!!+ ,
$str!!, 0
)!!0 1
;!!1 2
this"" 
."" 
Total"" 
="" 
orden"" 
."" 
Total"" $
.""$ %
ToString""% -
(""- .
$str"". 2
)""2 3
;""3 4
this## 
.## 
SubTotal## 
=## 
(## 
System## #
.### $
Convert##$ +
.##+ ,
	ToDecimal##, 5
(##5 6
Total##6 ;
)##; <
-##= >
System##? E
.##E F
Convert##F M
.##M N
	ToDecimal##N W
(##W X
Igv##X [
)##[ \
)##\ ]
.##] ^
ToString##^ f
(##f g
$str##g k
)##k l
;##l m
this$$ 
.$$ 
Detalles$$ 
=$$ ,
 DetalleOrdenDeOperacionViewModel$$ <
.$$< =
Convert$$= D
($$D E
orden$$E J
.$$J K
Detalles$$K S
($$S T
)$$T U
)$$U V
;$$V W
}%% 	
}&& 
}'' î(
lD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Comprobante\BandejaSerieDeComprobanteViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
.		, -
Comprobante		- 8
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class .
"BandejaSerieDeComprobanteViewModel 3
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string $
EstablecimientoComercial .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
CentroDeAtencion &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
TipoDeComprobante '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
NumeroDeSerie #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
int (
NumeroDeComprobanteSiguiente /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
bool 
Autonumerica  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
Vigente 
{ 
get !
;! "
set# &
;& '
}( )
public .
"BandejaSerieDeComprobanteViewModel 1
(1 2
)2 3
{ 	
} 	
public .
"BandejaSerieDeComprobanteViewModel 1
(1 2
SerieDeComprobante2 D
serieDeComprobanteE W
)W X
{   	
this!! 
.!! 
Id!! 
=!! 
serieDeComprobante!! (
.!!( )
Id!!) +
;!!+ ,
this"" 
."" $
EstablecimientoComercial"" )
=""* +
serieDeComprobante"", >
.""> ?
CentroDeAtencion""? O
(""O P
)""P Q
.""Q R$
EstablecimientoComercial""R j
!=""k m
null""n r
?""s t
serieDeComprobante	""u á
.
""á à&
EstablecimientoComercial
""à †
(
""† °
)
""° ¢
.
""¢ £
NombreInterno
""£ ∞
:
""± ≤
$str
""≥ µ
;
""µ ∂
this## 
.## 
CentroDeAtencion## !
=##" #
serieDeComprobante##$ 6
.##6 7
CentroDeAtencion##7 G
(##G H
)##H I
.##I J
Nombre##J P
;##P Q
this$$ 
.$$ 
TipoDeComprobante$$ "
=$$# $
serieDeComprobante$$% 7
.$$7 8
Comprobante$$8 C
($$C D
)$$D E
.$$E F
Nombre$$F L
;$$L M
this%% 
.%% 
NumeroDeSerie%% 
=%%  
serieDeComprobante%%! 3
.%%3 4
Numero%%4 :
;%%: ;
this&& 
.&& (
NumeroDeComprobanteSiguiente&& -
=&&. /
serieDeComprobante&&0 B
.&&B C&
ProximoNumeroDeComprobante&&C ]
;&&] ^
this'' 
.'' 
Autonumerica'' 
='' 
serieDeComprobante''  2
.''2 3
EsAutonumerable''3 B
;''B C
this(( 
.(( 
Vigente(( 
=(( 
serieDeComprobante(( -
.((- .
Vigente((. 5
;((5 6
})) 	
public++ 
static++ 
List++ 
<++ .
"BandejaSerieDeComprobanteViewModel++ =
>++= >
Convert++? F
(++F G
List++G K
<++K L
SerieDeComprobante++L ^
>++^ _
seriesDeComprobante++` s
)++s t
{,, 	
List-- 
<-- .
"BandejaSerieDeComprobanteViewModel-- 3
>--3 4(
seriesDeComprobanteViewModel--5 Q
=--R S
new--T W
List--X \
<--\ ].
"BandejaSerieDeComprobanteViewModel--] 
>	-- Ä
(
--Ä Å
)
--Å Ç
;
--Ç É
foreach// 
(// 
var// 
item// 
in//  
seriesDeComprobante//! 4
)//4 5
{00 (
seriesDeComprobanteViewModel11 ,
.11, -
Add11- 0
(110 1
new111 4.
"BandejaSerieDeComprobanteViewModel115 W
(11W X
item11X \
)11\ ]
)11] ^
;11^ _
}22 
return33 (
seriesDeComprobanteViewModel33 /
;33/ 0
}44 	
}66 
}77 ≠"
mD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Comprobante\RegistroSerieDeComprobanteViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -
Comprobante- 8
{ 
public		 

class		 /
#RegistroSerieDeComprobanteViewModel		 4
{

 
public 
int 
Id 
{ 
get 
; 
set !
;! "
}# $
public "
ComboGenericoViewModel %$
EstablecimientoComercial& >
{? @
getA D
;D E
setF I
;I J
}K L
public "
ComboGenericoViewModel %
CentroDeAtencion& 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public "
ComboGenericoViewModel %
TipoDeComprobante& 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
string 
NumeroDeSerie #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
int (
NumeroDeComprobanteSiguiente /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
bool 
Autonumerica  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
Vigente 
{ 
get !
;! "
set# &
;& '
}( )
public /
#RegistroSerieDeComprobanteViewModel 2
(2 3
)3 4
{ 	
} 	
public /
#RegistroSerieDeComprobanteViewModel 2
(2 3
SerieDeComprobante3 E
serieDeComprobanteF X
)X Y
{ 	
this 
. 
Id 
= 
serieDeComprobante (
.( )
Id) +
;+ ,
this 
. $
EstablecimientoComercial )
=* +
new, /"
ComboGenericoViewModel0 F
(F G
serieDeComprobanteG Y
.Y Z$
EstablecimientoComercialZ r
(r s
)s t
.t u
Idu w
,w x
serieDeComprobante	y ã
.
ã å&
EstablecimientoComercial
å §
(
§ •
)
• ¶
.
¶ ß
NombreInterno
ß ¥
)
¥ µ
;
µ ∂
this 
. 
CentroDeAtencion !
=" #
new$ '"
ComboGenericoViewModel( >
(> ?
serieDeComprobante? Q
.Q R
CentroDeAtencionR b
(b c
)c d
.d e
Ide g
,g h
serieDeComprobanteh z
.z {
CentroDeAtencion	{ ã
(
ã å
)
å ç
.
ç é
Nombre
é î
)
î ï
;
ï ñ
this 
. 
TipoDeComprobante "
=# $
new% ("
ComboGenericoViewModel) ?
(? @
serieDeComprobante@ R
.R S
ComprobanteS ^
(^ _
)_ `
.` a
Ida c
,c d
serieDeComprobanted v
.v w
Comprobante	w Ç
(
Ç É
)
É Ñ
.
Ñ Ö
Nombre
Ö ã
)
ã å
;
å ç
this 
. 
NumeroDeSerie 
=  
serieDeComprobante! 3
.3 4
Numero4 :
;: ;
this   
.   (
NumeroDeComprobanteSiguiente   -
=  . /
serieDeComprobante  0 B
.  B C&
ProximoNumeroDeComprobante  C ]
;  ] ^
this!! 
.!! 
Autonumerica!! 
=!! 
serieDeComprobante!!  2
.!!2 3
EsAutonumerable!!3 B
;!!B C
this"" 
."" 
Vigente"" 
="" 
serieDeComprobante"" -
.""- .
Vigente"". 5
;""5 6
}$$ 	
}%% 
}&& ¢S
qD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Comprobante\TipoTransaccionTipoComprobanteViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
.		, -
Comprobante		- 8
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 7
+TipoDeTransaccionTipoDeComprobanteViewModel <
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
IdTipoTransaccion $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 7
+TipoDeTransaccionTipoDeComprobanteViewModel :
(: ;
); <
{ 	
} 	
public 7
+TipoDeTransaccionTipoDeComprobanteViewModel :
(: ;
int; >
Id? A
,A B
intC F
IdTipoTransaccionG X
)X Y
{ 	
this 
. 
Id 
= 
Id 
; 
this 
. 
IdTipoTransaccion "
=# $
IdTipoTransaccion% 6
;6 7
} 	
public 
static 
List 
< 7
+TipoDeTransaccionTipoDeComprobanteViewModel F
>F G
ConvertH O
(O P
ListP T
<T U,
 TipoDeComprobanteParaTransaccionU u
>u v.
!tiposDeComprobanteParaTransaccion	w ò
)
ò ô
{ 	
List   
<   7
+TipoDeTransaccionTipoDeComprobanteViewModel   <
>  < =4
(tiposTransaccionTipoComprobanteViewModel  > f
=  g h
new  i l
List  m q
<  q r8
+TipoDeTransaccionTipoDeComprobanteViewModel	  r ù
>
  ù û
(
  û ü
)
  ü †
;
  † °
foreach!! 
(!! 
var!! 
item!! 
in!!  -
!tiposDeComprobanteParaTransaccion!!! B
)!!B C
{"" 4
(tiposTransaccionTipoComprobanteViewModel## 8
.##8 9
Add##9 <
(##< =
new##= @7
+TipoDeTransaccionTipoDeComprobanteViewModel##A l
(##l m
item##m q
.##q r
Id##r t
,##t u
item##v z
.##z {
IdTipoTransaccion	##{ å
)
##å ç
)
##ç é
;
##é è
}$$ 
return%% 4
(tiposTransaccionTipoComprobanteViewModel%% ;
;%%; <
}&& 	
public(( 
static(( 
List(( 
<(( 7
+TipoDeTransaccionTipoDeComprobanteViewModel(( F
>((F G!
MatchTiposTransaccion((H ]
(((] ^
List((^ b
<((b c8
+TipoDeTransaccionTipoDeComprobanteViewModel	((c é
>
((é è 
TiposDeTransaccion
((ê ¢
,
((¢ £
List
((§ ®
<
((® ©
int
((© ¨
>
((¨ ≠$
IdDeTiposDeTransaccion
((Æ ƒ
)
((ƒ ≈
{)) 	
if++ 
(++ "
IdDeTiposDeTransaccion++ &
==++' )
null++* .
)++. /
{,, 
TiposDeTransaccion-- "
.--" #
Clear--# (
(--( )
)--) *
;--* +
}.. 
else// 
{00 
if11 
(11 
TiposDeTransaccion11 &
.11& '
Count11' ,
(11, -
)11- .
!=11/ 1
$num112 3
)113 4
{22 
int33 
[33 
]33 
idsAEliminar33 &
=33' (
TiposDeTransaccion33) ;
.33; <
Where33< A
(33A B
tdt33B E
=>33F H
!33I J"
IdDeTiposDeTransaccion33J `
.33` a
Contains33a i
(33i j
tdt33j m
.33m n
IdTipoTransaccion33n 
)	33 Ä
)
33Ä Å
.
33Å Ç
Select
33Ç à
(
33à â
tdt
33â å
=>
33ç è
tdt
33ê ì
.
33ì î
IdTipoTransaccion
33î •
)
33• ¶
.
33¶ ß
ToArray
33ß Æ
(
33Æ Ø
)
33Ø ∞
;
33∞ ±
for44 
(44 
int44 
i44 
=44  
$num44! "
;44" #
i44$ %
<44& '
idsAEliminar44( 4
.444 5
Length445 ;
;44; <
i44= >
++44> @
)44@ A
{55 
TiposDeTransaccion66 *
.66* +
Remove66+ 1
(661 2
TiposDeTransaccion662 D
.66D E
Single66E K
(66K L
tdt66L O
=>66P R
tdt66S V
.66V W
IdTipoTransaccion66W h
==66i k
idsAEliminar66l x
[66x y
i66y z
]66z {
)66{ |
)66| }
;66} ~
}77 
foreach88 
(88 
var88  
item88! %
in88& ("
IdDeTiposDeTransaccion88) ?
)88? @
{99 
if:: 
(:: 
!:: 
TiposDeTransaccion:: /
.::/ 0
Any::0 3
(::3 4
tdtcp::4 9
=>::: <
tdtcp::= B
.::B C
IdTipoTransaccion::C T
==::U W
item::X \
)::\ ]
)::] ^
{;; 
TiposDeTransaccion<< .
.<<. /
Add<</ 2
(<<2 3
new<<3 67
+TipoDeTransaccionTipoDeComprobanteViewModel<<7 b
(<<b c
$num<<c d
,<<d e
item<<f j
)<<j k
)<<k l
;<<l m
}== 
}>> 
}?? 
else@@ 
{AA 
foreachBB 
(BB 
varBB  
itemBB! %
inBB& ("
IdDeTiposDeTransaccionBB) ?
)BB? @
{CC 
ifDD 
(DD 
!DD 
TiposDeTransaccionDD /
.DD/ 0
AnyDD0 3
(DD3 4
tdtcpDD4 9
=>DD: <
tdtcpDD= B
.DDB C
IdTipoTransaccionDDC T
==DDU W
itemDDX \
)DD\ ]
)DD] ^
{EE 
TiposDeTransaccionFF .
.FF. /
AddFF/ 2
(FF2 3
newFF3 67
+TipoDeTransaccionTipoDeComprobanteViewModelFF7 b
(FFb c
$numFFc d
,FFd e
itemFFf j
)FFj k
)FFk l
;FFl m
}GG 
}HH 
}JJ 
}KK 
returnMM 
TiposDeTransaccionMM %
;MM% &
}NN 	
publicPP 
staticPP 
ListPP 
<PP 
stringPP !
>PP! "0
$TiposDeTransaccionesConEmisionPropiaPP# G
(PPG H
ListPPH L
<PPL M
TipoDeTransaccionPPM ^
>PP^ _5
(listTiposDeTransaccionesConEmisionPropia	PP` à
)
PPà â
{QQ 	
ListRR 
<RR 
stringRR 
>RR 
listaRR 
=RR  
newRR! $
ListRR% )
<RR) *
stringRR* 0
>RR0 1
(RR1 2
)RR2 3
;RR3 4
listaSS 
=SS 4
(listTiposDeTransaccionesConEmisionPropiaSS <
.SS< =
SelectSS= C
(SSC D
ttcpSSD H
=>SSI K
ttcpSSL P
.SSP Q
NombreSSQ W
)SSW X
.SSX Y
ToListSSY _
(SS_ `
)SS` a
;SSa b
returnUU 
listaUU 
;UU 
}VV 	
publicXX 
staticXX 
ListXX 
<XX 
stringXX !
>XX! "2
&TiposDeTransaccionesConEmisionTercerosXX# I
(XXI J
ListXXJ N
<XXN O
TipoDeTransaccionXXO `
>XX` a7
*listTiposDeTransaccionesConEmisionTerceros	XXb å
)
XXå ç
{YY 	
ListZZ 
<ZZ 
stringZZ 
>ZZ 
listaZZ 
=ZZ  
newZZ! $
ListZZ% )
<ZZ) *
stringZZ* 0
>ZZ0 1
(ZZ1 2
)ZZ2 3
;ZZ3 4
lista[[ 
=[[ 6
*listTiposDeTransaccionesConEmisionTerceros[[ >
.[[> ?
Select[[? E
([[E F
ttcp[[F J
=>[[K M
ttcp[[N R
.[[R S
Nombre[[S Y
)[[Y Z
.[[Z [
ToList[[[ a
([[a b
)[[b c
;[[c d
return\\ 
lista\\ 
;\\ 
}]] 	
public__ 
static__ 
string__ *
ConcatenarTiposDeTransacciones__ ;
(__; <
List__< @
<__@ A
string__A G
>__G H
lista__I N
)__N O
{`` 	
stringaa 
	resultadoaa 
=aa 
stringaa %
.aa% &
Joinaa& *
(aa* +
$straa+ /
,aa/ 0
listaaa1 6
)aa6 7
;aa7 8
returnbb 
	resultadobb 
;bb 
}cc 	
publicdd 
staticdd 
Listdd 
<dd ,
 TipoDeComprobanteParaTransacciondd ;
>dd; <3
'ConvertTipoDeComprobanteParaTransacciondd= d
(ddd e
Listdde i
<ddi j8
+TipoDeTransaccionTipoDeComprobanteViewModel	ddj ï
>
ddï ñ5
'TipoTransaccionTipoComprobanteViewModel
ddó æ
)
ddæ ø
{ee 	
Listff 
<ff ,
 TipoDeComprobanteParaTransaccionff 1
>ff1 2+
tiposTransaccionTipoComprobanteff3 R
=ffS T
newffU X
ListffY ]
<ff] ^,
 TipoDeComprobanteParaTransaccionff^ ~
>ff~ 
(	ff Ä
)
ffÄ Å
;
ffÅ Ç
foreachgg 
(gg 
vargg 
itemgg 
ingg  3
'TipoTransaccionTipoComprobanteViewModelgg! H
)ggH I
{hh +
tiposTransaccionTipoComprobanteii /
.ii/ 0
Addii0 3
(ii3 4
newii4 7,
 TipoDeComprobanteParaTransaccionii8 X
(iiX Y
itemiiY ]
.ii] ^
Idii^ `
,ii` a
itemiib f
.iif g
IdTipoTransaccioniig x
)iix y
)iiy z
;iiz {
}jj 
returnkk +
tiposTransaccionTipoComprobantekk 2
;kk2 3
}ll 	
}mm 
}nn ’
dD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Concepto\BandejaConceptoGastoViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class )
BandejaConceptoGastoViewModel .
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Sufijo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Clasificacion #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public )
BandejaConceptoGastoViewModel ,
(, -
ConceptoDeNegocio- >
producto? G
)G H
{ 	
this 
. 
Id 
= 
producto 
. 
Id !
;! "
this 
. 
Nombre 
= 
producto "
." #
Nombre# )
;) *
this 
. 
Sufijo 
= 
producto "
." #
Sufijo# )
;) *
this 
. 
Clasificacion 
=  
producto! )
.) *
RolDeProducto* 7
(7 8
)8 9
.9 :
nombre: @
;@ A
} 	
public   
static   
List   
<   $
BandejaProductoViewModel   3
>  3 4
Convert_  5 =
(  = >
List  > B
<  B C
ConceptoDeNegocio  C T
>  T U
	productos  V _
,  _ `
int  a d
idCentroAtencion  e u
)  u v
{!! 	
var"" 

productos_"" 
="" 
new""  
List""! %
<""% &$
BandejaProductoViewModel""& >
>""> ?
(""? @
)""@ A
;""A B
foreach$$ 
($$ 
var$$ 
producto$$ !
in$$" $
	productos$$% .
)$$. /
{%% 

productos_&& 
.&& 
Add&& 
(&& 
new&& "$
BandejaProductoViewModel&&# ;
(&&; <
producto&&< D
,&&D E
idCentroAtencion&&F V
)&&V W
)&&W X
;&&X Y
}'' 
return(( 

productos_(( 
;(( 
})) 	
}** 
}-- ô
^D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Concepto\CaracteristicaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
public

 

class

 #
CaracteristicaViewModel

 (
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
EsComun 
{ 
get !
;! "
set# &
;& '
}( )
public #
CaracteristicaViewModel &
(& '
)' (
{ 	
} 	
public #
CaracteristicaViewModel &
(& '
Detalle_maestro' 6
detalle7 >
)> ?
{ 	
Id 
= 
detalle 
. 
id 
; 
Nombre 
= 
detalle 
. 
nombre #
;# $
EsComun 
= 
detalle 
. 

id_maestro (
==) +
MaestroSettings, ;
.; <
Default< C
.C D+
IdMaestroCaracteristicaConceptoD c
;c d
;e f
} 	
public 
static 
List 
< #
CaracteristicaViewModel 2
>2 3
Convert4 ;
(; <
List< @
<@ A
Detalle_maestroA P
>P Q
detallesR Z
)Z [
{ 	
List 
< #
CaracteristicaViewModel (
>( )
	conceptos* 3
=4 5
new6 9
List: >
<> ?#
CaracteristicaViewModel? V
>V W
(W X
)X Y
;Y Z
foreach 
( 
var 
detalle  
in! #
detalles$ ,
), -
{   
	conceptos!! 
.!! 
Add!! 
(!! 
new!! !#
CaracteristicaViewModel!!" 9
(!!9 :
detalle!!: A
)!!B C
)!!C D
;!!D E
}"" 
return## 
	conceptos## 
;## 
}$$ 	
}%% 
}&& ‡
lD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Concepto\RegistroCaracteristicaPropiaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
public

 

class

 )
CaracteristicaPropiaViewModel

 .
{ 
public 
int 
Numero 
{ 
get 
;  
set! $
;$ %
}& '
public 
List 
< /
#ValoreCaracteristicaPropiaViewModel 7
>7 8
Valores9 @
{A B
getC F
;F G
setH K
;K L
}M N
public )
CaracteristicaPropiaViewModel ,
(, -
)- .
{ 	
this 
. 
Valores 
= 
new 
List #
<# $/
#ValoreCaracteristicaPropiaViewModel$ G
>G H
(H I
)I J
;J K
} 	
public 
static 
List 
< 1
%ValorDetalleMaestroDetalleTransaccion @
>@ A
ConvertB I
(I J
ListJ N
<N O)
CaracteristicaPropiaViewModelO l
>l m%
caracteristicasViewModel	n Ü
)
Ü á
{ 	
List 
< 1
%ValorDetalleMaestroDetalleTransaccion 6
>6 7
valores_8 @
=A B
newC F
ListG K
<K L1
%ValorDetalleMaestroDetalleTransaccionL q
>q r
(r s
)s t
;t u
foreach 
( 
var 
caracteristicaModel ,
in- /$
caracteristicasViewModel0 H
)H I
{ 
foreach 
( 
var 
item !
in" $
caracteristicaModel% 8
.8 9
Valores9 @
)@ A
{ 
valores_ 
. 
Add  
(  !
new! $1
%ValorDetalleMaestroDetalleTransaccion% J
(J K
itemK O
.O P
IdP R
,R S
itemS W
.W X
IdDetalleMaestroX h
,h i
caracteristicaModelj }
.} ~
Numero	~ Ñ
,
Ñ Ö
item
Ü ä
.
ä ã
Valor
ã ê
)
ê ë
)
ë í
;
í ì
} 
} 
return 
valores_ 
; 
} 	
}   
public"" 

class"" /
#ValoreCaracteristicaPropiaViewModel"" 4
{## 
public%% 
int%% 
Id%% 
{%% 
get%% 
;%% 
set%%  
;%%  !
}%%" #
public&& 
int&& 
IdDetalleMaestro&& #
{&&$ %
get&&& )
;&&) *
set&&+ .
;&&. /
}&&0 1
public'' 
string'' 
Valor'' 
{'' 
get'' !
;''! "
set''# &
;''& '
}''( )
public)) /
#ValoreCaracteristicaPropiaViewModel)) 2
())2 3
)))3 4
{** 	
},, 	
}.. 
}// ¡
eD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Concepto\RegistroConceptoGastoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class *
RegistroConceptoGastoViewModel /
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public "
ComboGenericoViewModel %
ConceptoBasico& 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public 
string 
Sufijo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string  
NombreConceptoBasico *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
string 
Valor 
{ 
get !
;! "
set# &
;& '
}( )
public 
bool &
ConceptoBasicoSeleccionado .
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public *
RegistroConceptoGastoViewModel -
(- .
). /
{ 	
} 	
public *
RegistroConceptoGastoViewModel -
(- .
ConceptoDeNegocio. ?
concepto@ H
)H I
{ 	
}$$ 	
}%% 
public'' 

class'' -
!RegistroConceptoServicioViewModel'' 2
{(( 
[** 	

DataMember**	 
]** 
public++ 
int++ 
Id++ 
{++ 
get++ 
;++ 
set++  
;++  !
}++" #
public,, "
ComboGenericoViewModel,, %
ConceptoBasico,,& 4
{,,5 6
get,,7 :
;,,: ;
set,,< ?
;,,? @
},,A B
public-- 
string-- 
Sufijo-- 
{-- 
get-- "
;--" #
set--$ '
;--' (
}--) *
public.. 
string..  
NombreConceptoBasico.. *
{..+ ,
get..- 0
;..0 1
set..2 5
;..5 6
}..7 8
public// 
string// 
Valor// 
{// 
get// !
;//! "
set//# &
;//& '
}//( )
public00 
bool00 &
ConceptoBasicoSeleccionado00 .
{00/ 0
get001 4
;004 5
set006 9
;009 :
}00; <
public11 
string11 
NombreCompleto11 $
{11% &
get11' *
;11* +
set11, /
;11/ 0
}111 2
public33 -
!RegistroConceptoServicioViewModel33 0
(330 1
)331 2
{44 	
}66 	
}77 
}88 ã>
cD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Cotizacion\BandejaCotizacionViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class &
BandejaCotizacionViewModel +
{ 
[ 	

DataMember	 
] 
public 
long 
IdOrden 
{ 
get !
;! "
set# &
;& '
}( )
public 
long 
IdCotizacion  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
FechaVencimiento &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
CodigoDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
TipoDocumento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Numero 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
	IdCliente 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Cliente 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Cajero 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Total 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 

Convertido 
{  
get! $
;$ %
set& )
;) *
}+ ,
public &
BandejaCotizacionViewModel )
() *
OrdenDeCotizacion* ;
orden< A
)A B
{ 	
this   
.   
IdOrden   
=   
orden    
.    !
Id  ! #
;  # $
this!! 
.!! 
IdCotizacion!! 
=!! 
orden!!  %
.!!% &
IdVenta!!& -
;!!- .
this"" 
."" 
Fecha"" 
="" 
orden"" 
."" 

FechaOrden"" )
("") *
)""* +
.""+ ,
ToString"", 4
(""4 5
$str""5 A
)""A B
;""B C
this## 
.## 
FechaVencimiento## !
=##" #
orden##$ )
.##) *
FechaVencimiento##* :
.##: ;
ToString##; C
(##C D
$str##D P
)##P Q
;##Q R
this$$ 
.$$ 
CodigoDocumento$$  
=$$! "
orden$$# (
.$$( )
Comprobante$$) 4
($$4 5
)$$5 6
.$$6 7
Tipo$$7 ;
($$; <
)$$< =
.$$= >
Codigo$$> D
;$$D E
this%% 
.%% 
TipoDocumento%% 
=%%  
orden%%! &
.%%& '
Comprobante%%' 2
(%%2 3
)%%3 4
.%%4 5

NombreTipo%%5 ?
;%%? @
this&& 
.&& 
Numero&& 
=&& 
orden&& 
.&&  
Comprobante&&  +
(&&+ ,
)&&, -
.&&- .
NumeroDeSerie&&. ;
+&&< =
$str&&> C
+&&D E
orden&&F K
.&&K L
Comprobante&&L W
(&&W X
)&&X Y
.&&Y Z
NumeroDeComprobante&&Z m
;&&m n
this'' 
.'' 
	IdCliente'' 
='' 
orden'' "
.''" #
Cliente''# *
(''* +
)''+ ,
.'', -
Id''- /
;''/ 0
this(( 
.(( 
Cliente(( 
=(( 
((( 
orden(( !
.((! "
Cliente((" )
((() *
)((* +
.((+ ,
Id((, .
==((/ 1
ActorSettings((2 ?
.((? @
Default((@ G
.((G H
IdClienteGenerico((H Y
?((Z [
$str((\ _
:((` a
orden((b g
.((g h
Cliente((h o
(((o p
)((p q
.((q r,
NumeroDocumentoIdentidadCliente	((r ë
)
((ë í
+
((ì î
$str
((ï ö
+
((õ ú
(
((ù û!
TransaccionSettings
((û ±
.
((± ≤
Default
((≤ π
.
((π ∫+
MostrarAliasDeClienteGenerico
((∫ ◊
&&
((ÿ ⁄
!
((€ ‹
String
((‹ ‚
.
((‚ „
IsNullOrEmpty
((„ 
(
(( Ò
orden
((Ò ˆ
.
((ˆ ˜
AliasCliente
((˜ É
(
((É Ñ
)
((Ñ Ö
)
((Ö Ü
?
((á à
orden
((â é
.
((é è
Cliente
((è ñ
(
((ñ ó
)
((ó ò
.
((ò ô
RazonSocial
((ô §
+
((• ¶
$str
((ß ¨
+
((≠ Æ
orden
((Ø ¥
.
((¥ µ
AliasCliente
((µ ¡
(
((¡ ¬
)
((¬ √
:
((ƒ ≈
orden
((∆ À
.
((À Ã
Cliente
((Ã ”
(
((” ‘
)
((‘ ’
.
((’ ÷
RazonSocial
((÷ ·
)
((· ‚
;
((‚ „
this)) 
.)) 
Cajero)) 
=)) 
orden)) 
.))  
Empleado))  (
())( )
)))) *
.))* +
NombreCompleto))+ 9
;))9 :
this** 
.** 
Total** 
=** 
orden** 
.** 
Total** $
.**$ %
ToString**% -
(**- .
$str**. 2
)**2 3
;**3 4
this++ 
.++ 
Estado++ 
=++ 
orden++ 
.++  
EstadoActual++  ,
(++, -
)++- .
.++. /
nombre++/ 5
;++5 6
this,, 
.,, 

Convertido,, 
=,, 
orden,, #
.,,# $
ConvertidoAVenta,,$ 4
;,,4 5
}-- 	
public// 
static// 
List// 
<// &
BandejaCotizacionViewModel// 5
>//5 6
Convert//7 >
(//> ?
List//? C
<//C D
OrdenDeCotizacion//D U
>//U V
ordenesDeCotizacion//W j
)//j k
{00 	
List11 
<11 &
BandejaCotizacionViewModel11 +
>11+ ,
ordenes11- 4
=115 6
new117 :
List11; ?
<11? @&
BandejaCotizacionViewModel11@ Z
>11Z [
(11[ \
)11\ ]
;11] ^
foreach22 
(22 
var22 
ordenDeCotizacion22 *
in22+ -
ordenesDeCotizacion22. A
)22A B
{33 
ordenes44 
.44 
Add44 
(44 
new44 &
BandejaCotizacionViewModel44  :
(44: ;
ordenDeCotizacion44; L
)44L M
)44M N
;44N O
}55 
return66 
ordenes66 
;66 
}77 	
}99 
}:: Ö
\D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Cotizacion\CotizacionViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 
CotizacionViewModel $
{ 
[ 	

DataMember	 
] 
public 
long 
IdOrden 
{ 
get !
;! "
set# &
;& '
}( )
public 
long 
IdCotizacion  
{! "
get# &
;& '
set( +
;+ ,
}- .
public&& 
string&& !
CadenaHtmlDeDocumento&& +
{&&, -
get&&. 1
;&&1 2
set&&3 6
;&&6 7
}&&8 9
public(( 
CotizacionViewModel(( "
(((" #
OrdenDeCotizacion((# 4
ordenDeCotizacion((5 F
)((F G
{)) 	
this** 
.** 
IdOrden** 
=** 
ordenDeCotizacion** ,
.**, -
Id**- /
;**/ 0
this++ 
.++ 
IdCotizacion++ 
=++ 
ordenDeCotizacion++  1
.++1 2
IdCotizacion++2 >
;++> ?
}@@ 	
publicBB 
CotizacionViewModelBB "
(BB" #
OrdenDeCotizacionBB# 4
ordenDeCotizacionBB5 F
,BBF G
stringBBH N!
cadenaHtmlDeDocumentoBBO d
)BBd e
{CC 	
thisDD 
.DD 
IdOrdenDD 
=DD 
ordenDeCotizacionDD ,
.DD, -
IdDD- /
;DD/ 0
thisEE 
.EE 
IdCotizacionEE 
=EE 
ordenDeCotizacionEE  1
.EE1 2
IdCotizacionEE2 >
;EE> ?
thisZZ 
.ZZ !
CadenaHtmlDeDocumentoZZ &
=ZZ' (!
cadenaHtmlDeDocumentoZZ) >
;ZZ> ?
}[[ 	
public]] 
static]] 
List]] 
<]] 
CotizacionViewModel]] .
>]]. /
Convert]]0 7
(]]7 8
List]]8 <
<]]< =
OrdenDeCotizacion]]= N
>]]N O
ordenesDeCotizacion]]P c
)]]c d
{^^ 	
List__ 
<__ 
CotizacionViewModel__ $
>__$ %
ordenes__& -
=__. /
new__0 3
List__4 8
<__8 9
CotizacionViewModel__9 L
>__L M
(__M N
)__N O
;__O P
foreach`` 
(`` 
var`` 
ordenDeCotizacion`` *
in``+ -
ordenesDeCotizacion``. A
)``A B
{aa 
ordenesbb 
.bb 
Addbb 
(bb 
newbb 
CotizacionViewModelbb  3
(bb3 4
ordenDeCotizacionbb4 E
)bbE F
)bbF G
;bbG H
}cc 
returndd 
ordenesdd 
;dd 
}ee 	
}ff 
}gg ¢E
dD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Cotizacion\RegistroCotizacionViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
public

 

class

 '
RegistroCotizacionViewModel

 ,
{ 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdOrden 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
IdEstado 
{ 
get !
;! "
set# &
;& '
}( )
public 
long 
IdComprobante !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
GrabaIgv 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Alias 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Flete 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
FechaVencimiento (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public (
ComboActorComercialViewModel +
Cliente, 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
IEnumerable 
< )
RegistroDetalleVentaViewModel 8
>8 9
Detalles: B
{C D
getE H
;H I
setJ M
;M N
}O P
public '
RegistroCotizacionViewModel *
(* +
)+ ,
{ 	
} 	
public '
RegistroCotizacionViewModel *
(* +
OrdenDeCotizacion+ <
ordenDeCotizacion= N
,N O
ListP T
<T U%
SelectorTipoDeComprobanteU n
>n o
tiposComprobantes	p Å
)
Å Ç
{ 	
Id   
=   
ordenDeCotizacion   "
.  " #
IdCotizacion  # /
;  / 0
IdOrden!! 
=!! 
ordenDeCotizacion!! '
.!!' (
Id!!( *
;!!* +
IdEstado"" 
="" 
ordenDeCotizacion"" (
.""( )
IdEstadoActual"") 7
;""7 8
IdComprobante## 
=## 
ordenDeCotizacion## -
.##- .
Comprobante##. 9
(##9 :
)##: ;
.##; <
Id##< >
;##> ?
GrabaIgv$$ 
=$$ 
ordenDeCotizacion$$ (
.$$( )
Detalles$$) 1
($$1 2
)$$2 3
.$$3 4
Sum$$4 7
($$7 8
d$$8 9
=>$$: <
d$$= >
.$$> ?
Igv$$? B
)$$B C
>$$D E
$num$$F G
;$$G H
Alias%% 
=%% 
ordenDeCotizacion%% %
.%%% &
AliasCliente%%& 2
(%%2 3
)%%3 4
.%%4 5
Replace%%5 <
(%%< =
$str%%= @
,%%@ A
$str%%A C
)%%C D
.%%D E
Replace%%E L
(%%L M
$str%%M P
,%%P Q
$str%%Q S
)%%S T
;%%T U
Observacion&& 
=&& 
ordenDeCotizacion&& +
.&&+ ,
Observacion&&, 7
(&&7 8
)&&8 9
;&&9 :
Flete'' 
='' 
ordenDeCotizacion'' %
.''% &
Flete''& +
;''+ ,
FechaVencimiento(( 
=(( 
ordenDeCotizacion(( 0
.((0 1
FechaVencimiento((1 A
;((A B
Cliente)) 
=)) 
new)) (
ComboActorComercialViewModel)) 6
())6 7
ordenDeCotizacion))7 H
.))H I
Cliente))I P
())P Q
)))Q R
.))R S
Id))S U
,))U V
$str))W [
,))[ \
$str))] a
)))a b
;))b c
TipoDeComprobante** 
=** 
tiposComprobantes**  1
.**1 2
SingleOrDefault**2 A
(**A B
sc**B D
=>**E G
sc**H J
.**J K
TipoComprobante**K Z
.**Z [
Id**[ ]
==**^ `
ordenDeCotizacion**a r
.**r s
Comprobante**s ~
(**~ 
)	** Ä
.
**Ä Å
IdTipo
**Å á
)
**á à
;
**à â
if++ 
(++ 
TipoDeComprobante++ !
.++! "
Series++" (
.++( )
Count++) .
(++. /
)++/ 0
>++1 2
$num++3 4
)++4 5
{++6 7
TipoDeComprobante++8 I
.++I J
SerieSeleccionada++J [
=++\ ]
(++^ _
int++_ b
)++b c
ordenDeCotizacion++c t
.++t u
Comprobante	++u Ä
(
++Ä Å
)
++Å Ç
.
++Ç É
IdSerie
++É ä
;
++ä ã
}
++å ç
else,, 
{,, 
TipoDeComprobante,, $
.,,$ %
SerieSeleccionada,,% 6
=,,7 8
$num,,9 :
;,,: ;
},,< =
Detalles-- 
=-- )
RegistroDetalleVentaViewModel-- 4
.--4 5
Convert_--5 =
(--= >
ordenDeCotizacion--> O
.--O P
Detalles--P X
(--X Y
)--Y Z
.--Z [
Where--[ `
(--` a
d--a b
=>--c e
d--f g
.--g h
DetalleTransaccion--h z
(--z {
)--{ |
.--| } 
id_concepto_negocio	--} ê
!=
--ë ì
ConceptoSettings
--î §
.
--§ •
Default
--• ¨
.
--¨ ≠$
IdConceptoNegocioFlete
--≠ √
)
--√ ƒ
.
--ƒ ≈
ToList
--≈ À
(
--À Ã
)
--Ã Õ
)
--Õ Œ
;
--Œ œ
}// 	
}00 
public33 

class33 .
"RegistroDetalleCotizacionViewModel33 3
{44 
public55 
long55 
	IdDetalle55 
{55 
get55  #
;55# $
set55% (
;55( )
}55* +
public66 
int66 
IdPrecioUnitario66 #
{66$ %
get66& )
;66) *
set66+ .
;66. /
}660 1
public77 &
ProductoParaVentaViewModel77 )
Producto77* 2
{773 4
get775 8
;778 9
set77: =
;77= >
}77? @
public88 
bool88  
PrecioCalculadoVenta88 (
{88) *
get88+ .
;88. /
set880 3
;883 4
}885 6
public99 
string99 
VersionFila99 !
{99" #
get99$ '
;99' (
set99) ,
;99, -
}99. /
public:: 
string:: 
Observacion:: !
{::" #
get::$ '
;::' (
set::) ,
;::, -
}::. /
public;; 
decimal;; 
Stock;; 
{;; 
get;; "
;;;" #
set;;$ '
;;;' (
};;) *
public<< 
decimal<< 
PrecioUnitario<< %
{<<& '
get<<( +
;<<+ ,
set<<- 0
;<<0 1
}<<2 3
public== 
decimal== 
Cantidad== 
{==  !
get==" %
;==% &
set==' *
;==* +
}==, -
public>> 
decimal>> 
Importe>> 
{>>  
get>>! $
;>>$ %
set>>& )
;>>) *
}>>+ ,
public?? 
decimal?? 
Igv?? 
{?? 
get??  
;??  !
set??" %
;??% &
}??' (
public@@ 
decimal@@ 
	Descuento@@  
{@@! "
get@@# &
;@@& '
set@@( +
;@@+ ,
}@@- .
publicBB .
"RegistroDetalleCotizacionViewModelBB 1
(BB1 2
)BB2 3
{CC 	
}EE 	
}GG 
}HH ≥%
qD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Almacen\BandejaMovimientoInternoMercaderiaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class 7
+BandejaMovimientoInternoMercaderiaViewModel <
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdOperacion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
TipoOperacion #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string  
AlmacenOrigenDestino *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
string 
TipoDocumento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Numero 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public 7
+BandejaMovimientoInternoMercaderiaViewModel :
(: ;"
OrdenDeTrasladoInterno; Q
ordenR W
)W X
{ 	
this 
. 
Id 
= 
orden 
. 
Id 
; 
this 
. 
IdOperacion 
= 
orden $
.$ %
IdDesplazamiento% 5
(5 6
)6 7
;7 8
this 
. 
Fecha 
= 
orden 
. 

FechaOrden )
() *
)* +
.+ ,
ToString, 4
(4 5
$str5 A
)A B
;B C
this   
.   
TipoDocumento   
=    
orden  ! &
.  & '
Comprobante  ' 2
(  2 3
)  3 4
.  4 5

NombreTipo  5 ?
;  ? @
this!! 
.!! 
Numero!! 
=!! 
orden!! 
.!!  
Comprobante!!  +
(!!+ ,
)!!, -
.!!- .
NumeroDeSerie!!. ;
+!!< =
$str!!> C
+!!D E
orden!!F K
.!!K L
Comprobante!!L W
(!!W X
)!!X Y
.!!Y Z
NumeroDeComprobante!!Z m
;!!m n
this"" 
.""  
AlmacenOrigenDestino"" %
=""& '
orden""( -
.""- .
AlmacenDestino"". <
(""< =
)""= >
.""> ?
Nombre""? E
;""E F
this## 
.## 
Estado## 
=## 
orden## 
.##  
EstadoActual##  ,
(##, -
)##- .
.##. /
nombre##/ 5
;##5 6
}%% 	
public'' 
static'' 
List'' 
<'' 7
+BandejaMovimientoInternoMercaderiaViewModel'' F
>''F G
Convert''H O
(''O P
List''P T
<''T U"
OrdenDeTrasladoInterno''U k
>''k l$
ordenesDeDesplazamiento	''m Ñ
)
''Ñ Ö
{(( 	
List)) 
<)) 7
+BandejaMovimientoInternoMercaderiaViewModel)) <
>))< =
ordenes))> E
=))F G
new))H K
List))L P
<))P Q7
+BandejaMovimientoInternoMercaderiaViewModel))Q |
>))| }
())} ~
)))~ 
;	)) Ä
foreach** 
(** 
var** !
ordenDeDesplazamiento** .
in**/ 1#
ordenesDeDesplazamiento**2 I
)**I J
{++ 
ordenes,, 
.,, 
Add,, 
(,, 
new,, 7
+BandejaMovimientoInternoMercaderiaViewModel,,  K
(,,K L!
ordenDeDesplazamiento,,L a
),,a b
),,b c
;,,c d
}-- 
return.. 
ordenes.. 
;.. 
}// 	
}00 
}11 ì-
^D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Almacen\TrasladoInternoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class 2
&MovimientoInternoDeMercaderiaViewModel 7
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdDesplazamiento $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
NombreDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string  
SerieNumeroDocumento *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
int "
IdAlmacenDestinoOrigen )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
string  
AlmacenDestinoOrigen *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
string 
Empleado 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public 
List 
< ,
 DetalleOrdenDeOperacionViewModel 4
>4 5
Detalles6 >
{? @
getA D
;D E
setF I
;I J
}K L
public 2
&MovimientoInternoDeMercaderiaViewModel 5
(5 6"
OrdenDeTrasladoInterno6 L
ordenM R
)R S
{ 	
this 
. 
Id 
= 
orden 
. 
Id 
; 
this 
. 
IdDesplazamiento !
=" #
orden$ )
.) *
IdDesplazamiento* :
(: ;
); <
;< =
this 
. 
Fecha 
= 
orden 
. 

FechaOrden )
() *
)* +
.+ ,
ToString, 4
(4 5
$str5 A
)A B
;B C
this   
.   
NombreDocumento    
=  ! "
orden  # (
.  ( )
Comprobante  ) 4
(  4 5
)  5 6
.  6 7
Tipo  7 ;
(  ; <
)  < =
.  = >
Nombre  > D
;  D E
this!! 
.!!  
SerieNumeroDocumento!! %
=!!& '
orden!!( -
.!!- .
Comprobante!!. 9
(!!9 :
)!!: ;
.!!; <
SerieYNumero!!< H
(!!H I
)!!I J
;!!J K
this"" 
."" "
IdAlmacenDestinoOrigen"" '
=""( )
orden""* /
.""/ 0
AlmacenDestino""0 >
(""> ?
)""? @
.""@ A
Id""A C
;""C D
this## 
.##  
AlmacenDestinoOrigen## %
=##& '
orden##( -
.##- .
AlmacenDestino##. <
(##< =
)##= >
.##> ?
Nombre##? E
;##E F
this$$ 
.$$ 
Empleado$$ 
=$$ 
orden$$ !
.$$! "
Empleado$$" *
($$* +
)$$+ ,
.$$, -
Nombres$$- 4
;$$4 5
this%% 
.%% 
Estado%% 
=%% 
orden%% 
.%%  
EstadoActual%%  ,
(%%, -
)%%- .
.%%. /
nombre%%/ 5
;%%5 6
this&& 
.&& 
Detalles&& 
=&& ,
 DetalleOrdenDeOperacionViewModel&& <
.&&< =
Convert&&= D
(&&D E
orden&&E J
.&&J K
Detalles&&K S
(&&S T
)&&T U
)&&U V
;&&V W
}'' 	
public)) 
static)) 
List)) 
<)) 2
&MovimientoInternoDeMercaderiaViewModel)) A
>))A B
Convert))C J
())J K
List))K O
<))O P"
OrdenDeTrasladoInterno))P f
>))f g!
ordenDeDesplazminetos))h }
)))} ~
{** 	
List++ 
<++ 2
&MovimientoInternoDeMercaderiaViewModel++ 7
>++7 8
ordenes++9 @
=++A B
new++C F
List++G K
<++K L2
&MovimientoInternoDeMercaderiaViewModel++L r
>++r s
(++s t
)++t u
;++u v
foreach,, 
(,, 
var,, !
ordenDeDesplazamiento,, .
in,,/ 1!
ordenDeDesplazminetos,,2 G
),,G H
{-- 
ordenes.. 
... 
Add.. 
(.. 
new.. 2
&MovimientoInternoDeMercaderiaViewModel..  F
(..F G!
ordenDeDesplazamiento..G \
)..\ ]
)..] ^
;..^ _
}// 
return00 
ordenes00 
;00 
}11 	
}22 
}33 ˇ
rD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Almacen\RegistroTrasladoInternoDeMercaderiaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public		 

class		 8
,RegistroTrasladoInternoDeMercaderiaViewModel		 =
{

 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
DateTime 
Fecha 
{ 
get  #
;# $
set% (
;( )
}* +
public "
ComboGenericoViewModel %
AlmacenDestino& 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public "
ComboGenericoViewModel %
ResponsableDestino& 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
IEnumerable 
< +
DetalleTrasladoInternoViewModel :
>: ;
Detalles< D
{E F
getG J
;J K
setL O
;O P
}Q R
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 8
,RegistroTrasladoInternoDeMercaderiaViewModel ;
(; <
)< =
{ 	
} 	
} 
public 

class +
DetalleTrasladoInternoViewModel 0
{ 
public (
ProductoParaAlmacenViewModel +
Producto, 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public 
decimal 
Cantidad 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Lote 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public!! +
DetalleTrasladoInternoViewModel!! .
(!!. /
)!!/ 0
{"" 	
}$$ 	
}%% 
}&& »]
_D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Compra\CompraConDetallesViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class &
CompraConDetallesViewModel +
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdCompra 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string #
EtiquetaNombreDocumento -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
string &
EtiquetaDocumentoIdentidad 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
string '
DocumentoIdentidadProveedor 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
string 
NombreDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string  
SerieNumeroDocumento *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
int 
IdProveedor 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	Proveedor 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
DireccionProveedor (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
TelefonoProveedor '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
Empleado 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
SubTotal 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Igv 
{ 
get 
;  
set! $
;$ %
}& '
public   
string   
Total   
{   
get   !
;  ! "
set  # &
;  & '
}  ( )
public!! 
string!! 
Estado!! 
{!! 
get!! "
;!!" #
set!!$ '
;!!' (
}!!) *
public"" 
string"" 
Flete"" 
{"" 
get"" !
;""! "
set""# &
;""& '
}""( )
public## 
List## 
<## ,
 DetalleOrdenDeOperacionViewModel## 4
>##4 5
Detalles##6 >
{##? @
get##A D
;##D E
set##F I
;##I J
}##K L
public$$ 
bool$$ 
AccionInvalidar$$ #
{$$$ %
get$$& )
;$$) *
set$$+ .
;$$. /
}$$0 1
public%% 
bool%% 
AccionAnular%%  
{%%! "
get%%# &
;%%& '
set%%( +
;%%+ ,
}%%- .
public'' &
CompraConDetallesViewModel'' )
('') *
OrdenDeCompra''* 7
orden''8 =
)''= >
{(( 	
this)) 
.)) 
Id)) 
=)) 
orden)) 
.)) 
Id)) 
;)) 
this** 
.** 
IdCompra** 
=** 
orden** !
.**! "
IdCompra**" *
;*** +
this++ 
.++ 
Fecha++ 
=++ 
orden++ 
.++ 

FechaOrden++ )
(++) *
)++* +
.+++ ,
ToString++, 4
(++4 5
$str++5 A
)++A B
;++B C
this-- 
.-- 
NombreDocumento--  
=--! "
orden--# (
.--( )
Comprobante--) 4
(--4 5
)--5 6
.--6 7
Tipo--7 ;
(--; <
)--< =
.--= >
Nombre--> D
;--D E
this.. 
...  
SerieNumeroDocumento.. %
=..& '
orden..( -
...- .
Comprobante... 9
(..9 :
)..: ;
...; <
NumeroDeComprobante..< O
>..P Q
$num..Q R
?..S T
orden..U Z
...Z [
Comprobante..[ f
(..f g
)..g h
...h i
NumeroDeSerie..i v
+..w x
$str..y |
+..} ~
orden	.. Ñ
.
..Ñ Ö
Comprobante
..Ö ê
(
..ê ë
)
..ë í
.
..í ì!
NumeroDeComprobante
..ì ¶
:
..ß ®
orden
..© Æ
.
..Æ Ø
Comprobante
..Ø ∫
(
..∫ ª
)
..ª º
.
..º Ω
NombreCortoTipo
..Ω Ã
;
..Ã Õ
this// 
.// 
IdProveedor// 
=// 
orden// $
.//$ %
	Proveedor//% .
(//. /
)/// 0
.//0 1
Id//1 3
;//3 4
this00 
.00 
	Proveedor00 
=00 
orden00 "
.00" #
	Proveedor00# ,
(00, -
)00- .
.00. /
RazonSocial00/ :
;00: ;
this11 
.11 '
DocumentoIdentidadProveedor11 ,
=11- .
orden11/ 4
.114 5
	Proveedor115 >
(11> ?
)11? @
.11@ A
DocumentoIdentidad11A S
;11S T
this22 
.22 
DireccionProveedor22 #
=22$ %
(22& '
orden22' ,
.22, -
	Proveedor22- 6
(226 7
)227 8
.228 9
DomicilioFiscal229 H
(22H I
)22I J
!=22K M
null22N R
)22R S
?22T U
(22V W
orden22W \
.22\ ]
	Proveedor22] f
(22f g
)22g h
.22h i
DomicilioFiscal22i x
(22x y
)22y z
.22z {
detalle	22{ Ç
+
22É Ñ
$str
22Ö ä
+
22ã å
orden
22ç í
.
22í ì
	Proveedor
22ì ú
(
22ú ù
)
22ù û
.
22û ü
DomicilioFiscal
22ü Æ
(
22Æ Ø
)
22Ø ∞
.
22∞ ±
Ubigeo
22± ∑
.
22∑ ∏
descripcion_larga
22∏ …
)
22…  
.
22  À
ToUpper
22À “
(
22“ ”
)
22” ‘
:
22’ ÷
$str
22◊ Ÿ
;
22Ÿ ⁄
this33 
.33 
TelefonoProveedor33 "
=33# $
orden33% *
.33* +
	Proveedor33+ 4
(334 5
)335 6
.336 7
Telefono337 ?
(33? @
)33@ A
??33B D
$str33E G
;33G H
this44 
.44 #
EtiquetaNombreDocumento44 (
=44) *
orden44+ 0
.440 1
Comprobante441 <
(44< =
)44= >
.44> ?
Tipo44? C
(44C D
)44D E
.44E F
Nombre44F L
;44L M
this55 
.55 &
EtiquetaDocumentoIdentidad55 +
=55, -
orden55. 3
.553 4
	Proveedor554 =
(55= >
)55> ?
.55? @(
CodigoTipoDocumentoIdentidad55@ \
(55\ ]
)55] ^
;55^ _
this66 
.66 
Empleado66 
=66 
orden66 !
.66! "
Empleado66" *
(66* +
)66+ ,
.66, -
Nombres66- 4
;664 5
this77 
.77 
Igv77 
=77 
orden77 
.77 
Igv77  
(77  !
)77! "
.77" #
ToString77# +
(77+ ,
$str77, 0
)770 1
;771 2
this88 
.88 
Total88 
=88 
orden88 
.88 
Total88 $
.88$ %
ToString88% -
(88- .
$str88. 2
)882 3
;883 4
this99 
.99 
SubTotal99 
=99 
(99 
System99 #
.99# $
Convert99$ +
.99+ ,
	ToDecimal99, 5
(995 6
Total996 ;
)99; <
-99= >
System99? E
.99E F
Convert99F M
.99M N
	ToDecimal99N W
(99W X
Igv99X [
)99[ \
)99\ ]
.99] ^
ToString99^ f
(99f g
$str99g k
)99k l
;99l m
this:: 
.:: 
Estado:: 
=:: 
orden:: 
.::  
EstadoActual::  ,
(::, -
)::- .
.::. /
nombre::/ 5
;::5 6
this;; 
.;; 
Flete;; 
=;; 
orden;; 
.;; 
Flete;; $
.;;$ %
ToString;;% -
(;;- .
$str;;. 2
);;2 3
;;;3 4
this<< 
.<< 
Detalles<< 
=<< ,
 DetalleOrdenDeOperacionViewModel<< <
.<<< =
Convert<<= D
(<<D E
orden<<E J
.<<J K
Detalles<<K S
(<<S T
)<<T U
.<<U V
Where<<V [
(<<[ \
d<<\ ]
=><<^ `
d<<a b
.<<b c
DetalleTransaccion<<c u
(<<u v
)<<v w
.<<w x 
id_concepto_negocio	<<x ã
!=
<<å é
ConceptoSettings
<<è ü
.
<<ü †
Default
<<† ß
.
<<ß ®$
IdConceptoNegocioFlete
<<® æ
)
<<æ ø
.
<<ø ¿
ToList
<<¿ ∆
(
<<∆ «
)
<<« »
)
<<» …
;
<<…  
this== 
.== 
AccionInvalidar==  
===! "
orden==# (
.==( )$
esAnulableConNotaInterna==) A
(==A B
)==B C
;==C D
this>> 
.>> 
AccionAnular>> 
=>> 
orden>>  %
.>>% &&
esAnulableConNotaDeCredito>>& @
(>>@ A
)>>A B
;>>B C
}?? 	
publicAA 
staticAA 
ListAA 
<AA &
CompraConDetallesViewModelAA 5
>AA5 6
ConvertAA7 >
(AA> ?
ListAA? C
<AAC D
OrdenDeCompraAAD Q
>AAQ R
ordenDeComprasAAS a
)AAa b
{BB 	
ListCC 
<CC &
CompraConDetallesViewModelCC +
>CC+ ,
ordenesCC- 4
=CC5 6
newCC7 :
ListCC; ?
<CC? @&
CompraConDetallesViewModelCC@ Z
>CCZ [
(CC[ \
)CC\ ]
;CC] ^
foreachDD 
(DD 
varDD 
ordenDeCompraDD &
inDD' )
ordenDeComprasDD* 8
)DD8 9
{EE 
ordenesFF 
.FF 
AddFF 
(FF 
newFF &
CompraConDetallesViewModelFF  :
(FF: ;
ordenDeCompraFF; H
)FFH I
)FFI J
;FFJ K
}GG 
returnHH 
ordenesHH 
;HH 
}II 	
}KK 
}LL “?
cD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Compra\ReporteCompraConceptoViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
public 

class *
ReporteCompraConceptoViewModel /
{ 
public 
long 
CodigoConcepto "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
CodigoBarra !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
NombreBasico "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Concepto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Cantidad 
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 
PrecioUnitario %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
IdPuntoCompra  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
NombrePuntoCompra '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public *
ReporteCompraConceptoViewModel -
(- .
). /
{ 	
} 	
public *
ReporteCompraConceptoViewModel -
(- .
long. 2
codigoConcepto3 A
,A B
stringC I
codigoBarraJ U
,U V
stringW ]
nombreBasico^ j
,j k
stringl r
conceptoNegocio	s Ç
,
Ç É
decimal
Ñ ã
cantidadVendida
å õ
,
ú ù
int
ù †
idPuntoCompra
° Æ
,
Æ Ø
string
Ø µ
nombrePuntoCompra
∂ «
,
« »
decimal
… –
precioUnitario
— ﬂ
,
ﬂ ‡
decimal
· Ë
importe
È 
)
 Ò
{ 	
CodigoConcepto 
= 
codigoConcepto +
;+ ,
CodigoBarra   
=   
codigoBarra   %
;  % &
NombreBasico!! 
=!! 
nombreBasico!! '
;!!' (
Concepto"" 
="" 
conceptoNegocio"" &
;""& '
Cantidad## 
=## 
cantidadVendida## &
;##& '
PrecioUnitario$$ 
=$$ 
precioUnitario$$ +
;$$+ ,
Importe%% 
=%% 
importe%% 
;%% 
IdPuntoCompra&& 
=&& 
idPuntoCompra&& )
;&&) *
NombrePuntoCompra'' 
='' 
nombrePuntoCompra''  1
;''1 2
}(( 	
public** *
ReporteCompraConceptoViewModel** -
(**- .
DetalleDeOperacion**. @ 
detalleOrdenDeCompra**A U
)**U V
{++ 	
CodigoConcepto,, 
=,,  
detalleOrdenDeCompra,, 1
.,,1 2
Producto,,2 :
.,,: ;
Id,,; =
;,,= >
CodigoBarra-- 
=--  
detalleOrdenDeCompra-- .
.--. /
Producto--/ 7
.--7 8
CodigoBarra--8 C
;--C D
NombreBasico.. 
=..  
detalleOrdenDeCompra.. /
.../ 0
Producto..0 8
...8 9 
NombreConceptoBasico..9 M
;..M N
Concepto// 
=//  
detalleOrdenDeCompra// +
.//+ ,
Producto//, 4
.//4 5
Nombre//5 ;
;//; <
Cantidad00 
=00  
detalleOrdenDeCompra00 +
.00+ ,
Cantidad00, 4
;004 5
PrecioUnitario11 
=11  
detalleOrdenDeCompra11 1
.111 2
PrecioUnitario112 @
;11@ A
Importe22 
=22  
detalleOrdenDeCompra22 *
.22* +
Importe22+ 2
;222 3
IdPuntoCompra33 
=33  
detalleOrdenDeCompra33 0
.330 1
	Operacion331 :
(33: ;
)33; <
.33< =
CentroDeAtencion33= M
(33M N
)33N O
.33O P
Id33P R
;33R S
NombrePuntoCompra44 
=44  
detalleOrdenDeCompra44  4
.444 5
	Operacion445 >
(44> ?
)44? @
.44@ A
CentroDeAtencion44A Q
(44Q R
)44R S
.44S T
Nombre44T Z
;44Z [
}55 	
public77 *
ReporteCompraConceptoViewModel77 -
(77- .
Detalle_transaccion77. A 
detalleOrdenDeCompra77B V
)77V W
{88 	
CodigoConcepto99 
=99  
detalleOrdenDeCompra99 1
.991 2
Concepto_negocio992 B
.99B C
id99C E
;99E F
CodigoBarra:: 
=::  
detalleOrdenDeCompra:: .
.::. /
Concepto_negocio::/ ?
.::? @
codigo_barra::@ L
;::L M
NombreBasico;; 
=;;  
detalleOrdenDeCompra;; /
.;;/ 0
Concepto_negocio;;0 @
.;;@ A
Detalle_maestro4;;A Q
.;;Q R
nombre;;R X
;;;X Y
Concepto<< 
=<<  
detalleOrdenDeCompra<< +
.<<+ ,
Concepto_negocio<<, <
.<<< =
nombre<<= C
;<<C D
Cantidad== 
===  
detalleOrdenDeCompra== +
.==+ ,
cantidad==, 4
;==4 5
PrecioUnitario>> 
=>>  
detalleOrdenDeCompra>> 1
.>>1 2
precio_unitario>>2 A
;>>A B
Importe?? 
=??  
detalleOrdenDeCompra?? *
.??* +
total??+ 0
;??0 1
IdPuntoCompra@@ 
=@@  
detalleOrdenDeCompra@@ 0
.@@0 1
Transaccion@@1 <
.@@< =
Actor_negocio2@@= K
.@@K L
id@@L N
;@@N O
NombrePuntoCompraAA 
=AA  
detalleOrdenDeCompraAA  4
.AA4 5
TransaccionAA5 @
.AA@ A
Actor_negocio2AAA O
.AAO P
ActorAAP U
.AAU V
primer_nombreAAV c
;AAc d
}BB 	
publicEE 
staticEE 
ListEE 
<EE *
ReporteCompraConceptoViewModelEE 9
>EE9 :
ConvertEE; B
(EEB C
ListEEC G
<EEG H
OrdenDeCompraEEH U
>EEU V
ordenesEEW ^
)EE^ _
{FF 	
varGG "
reporteVentaViewModelsGG &
=GG' (
newGG) ,
ListGG- 1
<GG1 2*
ReporteCompraConceptoViewModelGG2 P
>GGP Q
(GGQ R
)GGR S
;GGS T
foreachII 
(II 
varII 
detalleII  
inII! #
ordenesII$ +
.II+ ,

SelectManyII, 6
(II6 7
oII7 8
=>II9 ;
oII< =
.II= >
DetalleTransaccionII> P
(IIP Q
)IIQ R
)IIR S
)IIS T
{JJ "
reporteVentaViewModelsKK &
.KK& '
AddKK' *
(KK* +
newKK+ .*
ReporteCompraConceptoViewModelKK/ M
(KKM N
detalleKKN U
)KKU V
)KKV W
;KKW X
}LL 
returnNN "
reporteVentaViewModelsNN )
;NN) *
}OO 	
}RR 
}SS Ø%
fD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Compra\ReporteCompraComprobanteViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
public 

class $
ReporteCompraComprobante )
{ 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
DateTime 
Fecha 
{ 
get  #
;# $
set% (
;( )
}* +
public 
DateTime 
FechaRegistro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
TipoDocumento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
OrdenCompra !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
Numero 
{ 
get 
;  
set! $
;$ %
}& '
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	Proveedor 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
ModoPago 
{  
get! $
;$ %
set& )
;) *
}+ ,
public $
ReporteCompraComprobante '
(' (
)( )
{ 	
} 	
public $
ReporteCompraComprobante '
(' (
OrdenDeCompra( 5
ordenCompra6 A
)A B
{ 	
this 
. 
Id 
= 
ordenCompra !
.! "
Id" $
;$ %
this   
.   
Fecha   
=   
ordenCompra   $
.  $ %
FechaEmision  % 1
;  1 2
this!! 
.!! 
FechaRegistro!! 
=!!  
ordenCompra!!! ,
.!!, -
FechaDeRegistro!!- <
;!!< =
this"" 
."" 
TipoDocumento"" 
=""  
ordenCompra""! ,
."", -
Comprobante""- 8
(""8 9
)""9 :
."": ;
NombreCortoTipo""; J
;""J K
this## 
.## 
OrdenCompra## 
=## 
ordenCompra## )
.##) *
Codigo##* 0
;##0 1
this$$ 
.$$ 
Numero$$ 
=$$ 
ordenCompra$$ %
.$$% &
Comprobante$$& 1
($$1 2
)$$2 3
.$$3 4
NumeroDeComprobante$$4 G
;$$G H
this%% 
.%% 
Importe%% 
=%% 
ordenCompra%% &
.%%& '
Total%%' ,
;%%, -
this&& 
.&& 
	Proveedor&& 
=&& 
ordenCompra&& (
.&&( )
	Proveedor&&) 2
(&&2 3
)&&3 4
.&&4 5
RazonSocial&&5 @
;&&@ A
this'' 
.'' 
ModoPago'' 
='' 
	Enumerado'' '
.''' (
GetDescription''( 6
(''6 7
ordenCompra''7 B
.''B C

ModoDePago''C M
(''M N
)''N O
)''O P
;''P Q
}(( 	
public++ 
static++ 
List++ 
<++ $
ReporteCompraComprobante++ 3
>++3 4
Convert++5 <
(++< =
List++= A
<++A B
OrdenDeCompra++B O
>++O P
ordenes++Q X
)++X Y
{,, 	
var-- "
reporteVentaViewModels-- &
=--' (
new--) ,
List--- 1
<--1 2$
ReporteCompraComprobante--2 J
>--J K
(--K L
)--L M
;--M N
foreach.. 
(.. 
var.. 
orden.. 
in.. !
ordenes.." )
)..) *
{// "
reporteVentaViewModels// %
.//% &
Add//& )
(//) *
new//* -$
ReporteCompraComprobante//. F
(//F G
orden//G L
)//L M
)//M N
;//N O
}//T U
return00 "
reporteVentaViewModels00 )
;00) *
}11 	
}FF 
}GG ·$
iD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Comprobante\BandejaTipoComprobanteViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
.		, -
Comprobante		- 8
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class +
BandejaTipoComprobanteViewModel 0
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
NombreCorto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
CodigoSunat !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string )
TransaccionesConEmisionPropia 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
string -
!TransaccionesConEmisionDeTerceros 7
{8 9
get: =
;= >
set? B
;B C
}D E
public +
BandejaTipoComprobanteViewModel .
(. /
)/ 0
{ 	
} 	
public +
BandejaTipoComprobanteViewModel .
(. /
TipoDeComprobante/ @
tipoDeComprobanteA R
)R S
{ 	
this 
. 
Id 
= 
tipoDeComprobante '
.' (
Id( *
;* +
this 
. 
Nombre 
= 
tipoDeComprobante +
.+ ,
Nombre, 2
;2 3
this   
.   
NombreCorto   
=   
tipoDeComprobante   0
.  0 1
Valor  1 6
;  6 7
this!! 
.!! 
CodigoSunat!! 
=!! 
tipoDeComprobante!! 0
.!!0 1
Codigo!!1 7
;!!7 8
this"" 
."" )
TransaccionesConEmisionPropia"" .
=""/ 07
+TipoDeTransaccionTipoDeComprobanteViewModel""1 \
.""\ ]*
ConcatenarTiposDeTransacciones""] {
(""{ |8
+TipoDeTransaccionTipoDeComprobanteViewModel	""| ß
.
""ß ®2
$TiposDeTransaccionesConEmisionPropia
""® Ã
(
""Ã Õ
tipoDeComprobante
""Õ ﬁ
.
""ﬁ ﬂ2
$TiposDeTransaccionesConEmisionPropia
""ﬂ É
(
""É Ñ
)
""Ñ Ö
)
""Ö Ü
)
""Ü á
;
""á à
this## 
.## -
!TransaccionesConEmisionDeTerceros## 2
=##3 47
+TipoDeTransaccionTipoDeComprobanteViewModel##5 `
.##` a*
ConcatenarTiposDeTransacciones##a 
(	## Ä9
+TipoDeTransaccionTipoDeComprobanteViewModel
##Ä ´
.
##´ ¨4
&TiposDeTransaccionesConEmisionTerceros
##¨ “
(
##“ ”
tipoDeComprobante
##” ‰
.
##‰ Â4
&TiposDeTransaccionesConEmisionTerceros
##Â ã
(
##ã å
)
##å ç
)
##ç é
)
##é è
;
##è ê
}%% 	
public(( 
static(( 
List(( 
<(( +
BandejaTipoComprobanteViewModel(( :
>((: ;
Convert((< C
(((C D
List((D H
<((H I
TipoDeComprobante((I Z
>((Z [
tiposDeComprobante((\ n
)((n o
{)) 	
List** 
<** +
BandejaTipoComprobanteViewModel** 0
>**0 1'
tiposDeComprobanteViewModel**2 M
=**N O
new**P S
List**T X
<**X Y+
BandejaTipoComprobanteViewModel**Y x
>**x y
(**y z
)**z {
;**{ |
foreach,, 
(,, 
var,, 
item,, 
in,,  
tiposDeComprobante,,! 3
),,3 4
{-- '
tiposDeComprobanteViewModel.. +
...+ ,
Add.., /
(../ 0
new..0 3+
BandejaTipoComprobanteViewModel..4 S
(..S T
item..T X
)..X Y
)..Y Z
;..Z [
}// 
return00 '
tiposDeComprobanteViewModel00 .
;00. /
}11 	
}44 
}55 Ç)
jD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Comprobante\RegistroTipoComprobanteViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -
Comprobante- 8
{ 
public		 

class		 ,
 RegistroTipoComprobanteViewModel		 1
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
NombreCorto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
CodigoSunat !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
List 
< 
int 
> 2
&IdDeTiposDeTransaccionConEmisionPropia ?
{@ A
getB E
;E F
setG J
;J K
}L M
public 
List 
< 
int 
> 4
(IdDeTiposDeTransaccionConEmisionTerceros A
{B C
getD G
;G H
setI L
;L M
}N O
public 
List 
< 7
+TipoDeTransaccionTipoDeComprobanteViewModel ?
>? @.
"TiposDeTransaccionConEmisionPropiaA c
{d e
getf i
;i j
setk n
;n o
}p q
public 
List 
< 7
+TipoDeTransaccionTipoDeComprobanteViewModel ?
>? @0
$TiposDeTransaccionConEmisionTercerosA e
{f g
geth k
;k l
setm p
;p q
}r s
public ,
 RegistroTipoComprobanteViewModel /
(/ 0
)0 1
{ 	
this 
. 2
&IdDeTiposDeTransaccionConEmisionPropia 7
=8 9
new: =
List> B
<B C
intC F
>F G
(G H
)H I
;I J
this 
. 4
(IdDeTiposDeTransaccionConEmisionTerceros 9
=: ;
new< ?
List@ D
<D E
intE H
>H I
(I J
)J K
;K L
this 
. .
"TiposDeTransaccionConEmisionPropia 3
=4 5
new6 9
List: >
<> ?7
+TipoDeTransaccionTipoDeComprobanteViewModel? j
>j k
(k l
)l m
;m n
this 
. 0
$TiposDeTransaccionConEmisionTerceros 5
=6 7
new8 ;
List< @
<@ A7
+TipoDeTransaccionTipoDeComprobanteViewModelA l
>l m
(m n
)n o
;o p
} 	
public ,
 RegistroTipoComprobanteViewModel /
(/ 0
TipoDeComprobante0 A
tipoDeComprobanteB S
)S T
{ 	
this 
. 
Id 
= 
tipoDeComprobante '
.' (
Id( *
;* +
this 
. 
Nombre 
= 
tipoDeComprobante +
.+ ,
Nombre, 2
;2 3
this   
.   
NombreCorto   
=   
tipoDeComprobante   0
.  0 1
Valor  1 6
;  6 7
this!! 
.!! 
CodigoSunat!! 
=!! 
tipoDeComprobante!! 0
.!!0 1
Codigo!!1 7
;!!7 8
this"" 
."" 2
&IdDeTiposDeTransaccionConEmisionPropia"" 7
=""8 9
tipoDeComprobante"": K
.""K L4
(IdDeTiposDeTransaccionesConEmisionPropia""L t
(""t u
)""u v
;""v w
this## 
.## 4
(IdDeTiposDeTransaccionConEmisionTerceros## 9
=##: ;
tipoDeComprobante##< M
.##M N6
*IdDeTiposDeTransaccionesConEmisionTerceros##N x
(##x y
)##y z
;##z {
this$$ 
.$$ .
"TiposDeTransaccionConEmisionPropia$$ 3
=$$4 57
+TipoDeTransaccionTipoDeComprobanteViewModel$$6 a
.$$a b
Convert$$b i
($$i j
tipoDeComprobante$$j {
.$${ |N
ATipoComprobanteParaTransaccionTiposDeTransaccionsConEmisionPropia	$$| Ω
(
$$Ω æ
)
$$æ ø
)
$$ø ¿
;
$$¿ ¡
this%% 
.%% 0
$TiposDeTransaccionConEmisionTerceros%% 5
=%%6 77
+TipoDeTransaccionTipoDeComprobanteViewModel%%8 c
.%%c d
Convert%%d k
(%%k l
tipoDeComprobante%%l }
.%%} ~P
CTipoComprobanteParaTransaccionTiposDeTransaccionsConEmisionTerceros	%%~ ¡
(
%%¡ ¬
)
%%¬ √
)
%%√ ƒ
;
%%ƒ ≈
}&& 	
}'' 
}(( ﬂ
`D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Concepto\RegistroConceptoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
public

 

class

 %
RegistroConceptoViewModel

 *
{ 
public 
int 

IdConcepto 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Valor 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
List 
< !
ModeloBasicoViewModel )
>) *

Categorias+ 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
List 
< !
ModeloBasicoViewModel )
>) *
Caracteristicas+ :
{; <
get= @
;@ A
setB E
;E F
}G H
public %
RegistroConceptoViewModel (
(( )
)) *
{ 	
} 	
public %
RegistroConceptoViewModel (
(( )
Detalle_maestro) 8
concepto9 A
)A B
{ 	

IdConcepto 
= 
concepto !
.! "
id" $
;$ %
Nombre 
= 
concepto 
. 
nombre $
;$ %
Valor 
= 
concepto 
. 
valor "
;" #

Categorias 
= 
new 
List !
<! "!
ModeloBasicoViewModel" 7
>7 8
(8 9
)9 :
;: ;
Caracteristicas 
= 
new !
List" &
<& '!
ModeloBasicoViewModel' <
>< =
(= >
)> ?
;? @
foreach 
( 
var 
c 
in 
concepto &
.& '
Categoria_concepto' 9
)9 :
{   

Categorias!! 
.!! 
Add!! 
(!! 
new!! "!
ModeloBasicoViewModel!!# 8
(!!8 9
)!!9 :
{!!; <
Id!!= ?
=!!@ A
c!!B C
.!!C D
Detalle_maestro1!!D T
.!!T U
id!!U W
,!!W X
Nombre!!Y _
=!!` a
c!!b c
.!!c d
Detalle_maestro1!!d t
.!!t u
nombre!!u {
}!!| }
)!!} ~
;!!~ 
}"" 
foreach## 
(## 
var## 
c## 
in## 
concepto## &
.##& '#
Caracteristica_concepto##' >
)##> ?
{$$ 
Caracteristicas%% 
.%%  
Add%%  #
(%%# $
new%%$ '!
ModeloBasicoViewModel%%( =
(%%= >
)%%> ?
{%%@ A
Id%%B D
=%%E F
c%%G H
.%%H I
Detalle_maestro1%%I Y
.%%Y Z
id%%Z \
,%%\ ]
Nombre%%^ d
=%%e f
c%%g h
.%%h i
Detalle_maestro1%%i y
.%%y z
nombre	%%z Ä
}
%%Å Ç
)
%%Ç É
;
%%É Ñ
}&& 
}'' 	
}(( 
}** „$
\D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Concepto\StockGeneralViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[ 
Serializable 
] 
public 

class !
StockGeneralViewModel &
{ 
public 
string 
CodigoConcepto $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
UnidadMedidad #
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
decimal 
Stock 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
NombreBasico "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string  
NombreEntidadInterna *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
int 
IdEntidadInterna #
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
bool 

TieneStock 
{  
get! $
;$ %
set& )
;) *
}+ ,
public !
StockGeneralViewModel $
($ %
)% &
{ 	
} 	
public !
StockGeneralViewModel $
($ %
ConceptoDeNegocio% 6
producto7 ?
,? @
int@ C
idEntidadInternaD T
)T U
{ 	
CodigoConcepto 
= 
producto %
.% &
CodigoBarra& 1
;1 2
Nombre   
=   
producto   
.   
Nombre   $
;  $ %
UnidadMedidad!! 
=!! 
producto!! $
.!!$ %!
UnidadMedidaComercial!!% :
(!!: ;
)!!; <
.!!< =
Codigo!!= C
;!!C D
Stock"" 
="" 
producto"" 
."" 
Stock"" "
(""" #
idEntidadInterna""# 3
)""3 4
;""4 5
NombreBasico## 
=## 
producto## #
.### $
ConceptoBasico##$ 2
(##2 3
)##3 4
.##4 5
Nombre##5 ;
;##; <
IdEntidadInterna$$ 
=$$ 
idEntidadInterna$$ /
;$$/ 0 
NombreEntidadInterna%%  
=%%! "
producto%%$ ,
.%%, - 
NombreEntidadInterna%%- A
(%%A B
idEntidadInterna%%B R
)%%R S
;%%S T

TieneStock&& 
=&& 
Stock&& 
>&&  
$num&&! "
;&&" #
}'' 	
public)) 
static)) 
List)) 
<)) !
StockGeneralViewModel)) 0
>))0 1
Convert))2 9
())9 :
List)): >
<))> ?
ConceptoDeNegocio))? P
>))P Q
	productos))R [
,))[ \
int))] `
[))a b
]))b c
idsEntidadInterna))d u
)))u v
{** 	
var++ 
stockViewModels++ 
=++  !
new++" %
List++& *
<++* +!
StockGeneralViewModel+++ @
>++@ A
(++A B
)++B C
;++C D
for-- 
(-- 
int-- 
idEntidadInterna-- $
=--$ %
$num--% &
;--& '
idEntidadInterna--( 8
<--8 9
idsEntidadInterna--: K
.--K L
Length--L R
;--R S
idEntidadInterna--S c
++--c e
)--e f
{.. 
foreach// 
(// 
var// 
producto// %
in//& (
	productos//) 2
)//2 3
{00 
stockViewModels22 #
.22# $
Add22$ '
(22' (
new22( +!
StockGeneralViewModel22, A
(22A B
producto22B J
,22J K
idsEntidadInterna22L ]
[22] ^
idEntidadInterna22^ n
]22n o
)22o p
)22p q
;22q r
}33 
}44 
return77 
stockViewModels77 "
;77" #
}88 	
}:: 
};; …"
UD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Concepto\StockViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[ 
Serializable 
] 
public 

class 
StockViewModel 
{ 
public 
string 
CodigoConcepto $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
UnidadMedidad #
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
decimal 
Stock 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
NombreBasico "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
bool 

TieneStock 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
StockViewModel 
( 
) 
{ 	
} 	
public 
StockViewModel 
( 
string $
codigoConcepto% 3
,3 4
string5 ;
nombre< B
,B C
stringD J
descripcionK V
,V W
stringX ^
unidadMedidad_ l
,l m
decimaln u
stockv {
,| }
string	~ Ñ
nombreBasico
Ö ë
)
ë í
{ 	
CodigoConcepto 
= 
codigoConcepto +
;+ ,
Nombre 
= 
nombre 
; 
UnidadMedidad 
= 
unidadMedidad )
;) *
Stock 
= 
stock 
; 
NombreBasico 
= 
nombreBasico '
;' (

TieneStock   
=   
stock   
>   
$num    
;    !
}!! 
public## 
StockViewModel## 
(## 
Stock## #
stock##$ )
)##) *
{$$ 	
CodigoConcepto%% 
=%% 
stock%% "
.%%" #
CodigoBarraProducto%%# 6
;%%6 7
Nombre&& 
=&& 
stock&& 
.&& 
NombreProducto&& )
;&&) *
UnidadMedidad'' 
='' 
stock'' !
.''! "
producto''" *
(''* +
)''+ ,
.'', -!
UnidadMedidaComercial''- B
(''B C
)''C D
.''D E
Codigo''E K
;''K L
Stock(( 
=(( 
stock(( 
.(( 
Valor(( 
;((  
NombreBasico)) 
=)) 
stock))  
.))  !
producto))! )
())) *
)))* +
.))+ ,
ConceptoBasico)), :
()): ;
))); <
.))< =
Nombre))= C
;))C D

TieneStock** 
=** 
Stock** 
>**  
$num**! "
;**" #
}++ 	
public.. 
static.. 
List.. 
<.. 
StockViewModel.. )
>..) *
Convert..+ 2
(..2 3
List..3 7
<..7 8
Stock..8 =
>..= >
stocks..? E
)..E F
{// 	
var00 
stockViewModels00 
=00  !
new00" %
List00& *
<00* +
StockViewModel00+ 9
>009 :
(00: ;
)00; <
;00< =
foreach22 
(22 
var22 
stock22 
in22 !
stocks22" (
)22( )
{33 
stockViewModels33 
.33  
Add33  #
(33# $
new33$ '
StockViewModel33( 6
(336 7
stock337 <
)33< =
)33= >
;33> ?
}33@ A
return55 
stockViewModels55 "
;55" #
}66 	
}88 
}99 ∏
bD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Configuracion\ConfiguracionViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -
Configuracion- :
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class "
ConfiguracionViewModel '
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public "
ConfiguracionViewModel %
(% &
)& '
{ 	
} 	
public "
ConfiguracionViewModel %
(% &
Modelo& ,
., -
	Entidades- 6
.6 7
Configuracion7 D
configuracionE R
)R S
{ 	
this 
. 
Id 
= 
configuracion #
.# $
id$ &
;& '
this 
. 
Nombre 
= 
configuracion '
.' (
nombre( .
;. /
this 
. 
Descripcion 
= 
configuracion ,
., -
descripcion- 8
;8 9
} 	
} 
} ï
kD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Configuracion\ParametroConfiguracionViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -
Configuracion- :
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class +
ParametroConfiguracionViewModel 0
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
IdConfiguracion "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Tipo 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Valor 
{ 
get !
;! "
set# &
;& '
}( )
public +
ParametroConfiguracionViewModel .
(. /
)/ 0
{ 	
} 	
public +
ParametroConfiguracionViewModel .
(. /&
Parametro_de_configuracion/ I
	parametroJ S
)S T
{ 	
this 
. 
Id 
= 
	parametro 
.  
id  "
;" #
this 
. 
IdConfiguracion  
=! "
	parametro# ,
., -
id_configuracion- =
;= >
this 
. 
Nombre 
= 
	parametro #
.# $
nombre$ *
;* +
this 
. 
Tipo 
= 
	parametro !
.! "
tipo" &
;& '
this   
.   
Descripcion   
=   
	parametro   (
.  ( )
descripcion  ) 4
;  4 5
this!! 
.!! 
Valor!! 
=!! 
	parametro!! "
.!!" #
valor!!# (
;!!( )
}## 	
}$$ 
}%% ∆I
LD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\DataConsultApi.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public		 

class		 
DataActorApi		 
{

 
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
ApellidoPaterno %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
ApellidoMaterno %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Nombres 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
NombreComercial %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Ubigeo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Sexo 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
TipoContribuyente '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
public 
DataActorApi 
( 
) 
{ 	
} 	
public 
ActorComercial_ 
ConvertConDNI ,
(, -
string- 3
dni4 7
)7 8
{ 	
return 
ConvertirConDni "
(" #
dni# &
)& '
;' (
} 	
public "
RegistroActorComercial %
ConvertirConDni& 5
(5 6
string6 <
dni= @
)@ A
{ 	
return   
new   "
RegistroActorComercial   -
(  - .
)  . /
{!! $
NumeroDocumentoIdentidad"" (
="") *
dni""+ .
,"". /
ApellidoPaterno## 
=##  !
this##" &
.##& '
ApellidoPaterno##' 6
,##6 7
ApellidoMaterno$$ 
=$$  !
this$$" &
.$$& '
ApellidoMaterno$$' 6
,$$6 7
Nombres%% 
=%% 
this%% 
.%% 
Nombres%% &
,%%& '
NombreORazonSocial&& "
=&&# $
this&&% )
.&&) *
Nombres&&* 1
+&&2 3
$str&&4 7
+&&8 9
this&&: >
.&&> ?
ApellidoPaterno&&? N
+&&O P
$str&&Q T
+&&U V
this&&W [
.&&[ \
ApellidoMaterno&&\ k
,&&k l
NombreComercial'' 
=''  !
this''" &
.''& '
Nombres''' .
+''/ 0
$str''1 4
+''5 6
this''7 ;
.''; <
ApellidoPaterno''< K
+''L M
$str''N Q
+''R S
this''T X
.''X Y
ApellidoMaterno''Y h
,''h i"
TipoDocumentoIdentidad(( &
=((' (
new(() ,
ItemGenerico((- 9
(((9 :
ActorSettings((: G
.((G H
Default((H O
.((O P'
IdTipoDocumentoIdentidadDni((P k
)((k l
,((l m
TipoPersona)) 
=)) 
new)) !
ItemGenerico))" .
()). /
ActorSettings))/ <
.))< =
Default))= D
.))D E%
IdTipoActorPersonaNatural))E ^
)))^ _
,))_ `
DomicilioFiscal** 
=**  !
new**" %

Direccion_**& 0
{**1 2
Pais**3 7
=**8 9
new**: =
ItemGenerico**> J
(**J K
)**K L
{**M N
Id**O Q
=**R S
MaestroSettings**T c
.**c d
Default**d k
.**k l'
IdDetalleMaestroNacionPeru	**l Ü
,
**Ü á
Nombre
**à é
=
**è ê
MaestroSettings
**ë †
.
**† °
Default
**° ®
.
**® ©,
NombreDetalleMaestroNacionPeru
**© «
}
**» …
,
**…  
Ubigeo
**À —
=
**“ ”
new
**‘ ◊
ItemGenerico
**ÿ ‰
(
**‰ Â
)
**Â Ê
{
**Á Ë
Id
**È Î
=
**Ï Ì
ActorSettings
**Ó ˚
.
**˚ ¸
Default
**¸ É
.
**É Ñ,
IdUbigeoSeleccionadoPorDefecto
**Ñ ¢
,
**¢ £
Nombre
**§ ™
=
**´ ¨
ActorSettings
**≠ ∫
.
**∫ ª
Default
**ª ¬
.
**¬ √0
"NombreUbigeoSeleccionadoPorDefecto
**√ Â
}
**Ê Á
,
**Á Ë
Detalle
**È 
=
**Ò Ú
this
**Û ˜
.
**˜ ¯
	Direccion
**¯ Å
}
**Ç É
}++ 
;++ 
},, 	
public-- 
ActorComercial_-- 
ConvertConRUC-- ,
(--, -
string--- 3
ruc--4 7
)--7 8
{.. 	
return// 
ConvertirConDni// "
(//" #
ruc//# &
)//& '
;//' (
}00 	
public11 "
RegistroActorComercial11 %
ConvertirConRuc11& 5
(115 6
string116 <
ruc11= @
)11@ A
{22 	
return33 
new33 "
RegistroActorComercial33 -
(33- .
)33. /
{44 $
NumeroDocumentoIdentidad55 (
=55) *
ruc55+ .
,55. /
ApellidoPaterno66 
=66  !
this66" &
.66& '
ApellidoPaterno66' 6
,666 7
ApellidoMaterno77 
=77  !
this77" &
.77& '
ApellidoMaterno77' 6
,776 7
Nombres88 
=88 
this88 
.88 
Nombres88 &
,88& '
NombreORazonSocial99 "
=99# $
this99% )
.99) *
RazonSocial99* 5
,995 6
NombreComercial:: 
=::  !
ruc::" %
.::% &

StartsWith::& 0
(::0 1
$str::1 5
)::5 6
?::7 8
this::9 =
.::= >
Nombres::> E
+::F G
$str::H K
+::L M
this::N R
.::R S
ApellidoPaterno::S b
+::c d
$str::e h
+::i j
this::k o
.::o p
ApellidoMaterno::p 
:
::Ä Å
this
::Ç Ü
.
::Ü á
NombreComercial
::á ñ
,
::ñ ó"
TipoDocumentoIdentidad;; &
=;;' (
new;;) ,
ItemGenerico;;- 9
(;;9 :
ActorSettings;;: G
.;;G H
Default;;H O
.;;O P'
IdTipoDocumentoIdentidadRuc;;P k
);;k l
,;;l m
TipoPersona<< 
=<< 
new<< !
ItemGenerico<<" .
(<<. /
)<</ 0
{<<1 2
Id<<3 5
=<<6 7
ruc<<8 ;
.<<; <

StartsWith<<< F
(<<F G
$str<<G K
)<<K L
?<<M N
ActorSettings<<O \
.<<\ ]
Default<<] d
.<<d e%
IdTipoActorPersonaNatural<<e ~
:	<< Ä
ActorSettings
<<Å é
.
<<é è
Default
<<è ñ
.
<<ñ ó(
IdTipoActorPersonaJuridica
<<ó ±
}
<<≤ ≥
,
<<≥ ¥
DomicilioFiscal== 
===  !
ruc==" %
.==% &

StartsWith==& 0
(==0 1
$str==1 5
)==5 6
?==7 8
new==9 <

Direccion_=== G
{==H I
Ubigeo==J P
===Q R
new==S V
ItemGenerico==W c
(==c d
)==d e
{==f g
Id==h j
===k l
Int32==m r
.==r s
Parse==s x
(==x y
this==y }
.==} ~
Ubigeo	==~ Ñ
)
==Ñ Ö
}
==Ü á
,
==á à
Detalle
==â ê
=
==ë í
this
==ì ó
.
==ó ò
	Direccion
==ò °
}
==¢ £
:
==§ •
new
==¶ ©

Direccion_
==™ ¥
{
==µ ∂
Ubigeo
==∑ Ω
=
==æ ø
new
==¿ √
ItemGenerico
==ƒ –
(
==– —
)
==— “
{
==” ‘
Id
==’ ◊
=
==ÿ Ÿ
ActorSettings
==⁄ Á
.
==Á Ë
Default
==Ë Ô
.
==Ô ,
IdUbigeoSeleccionadoPorDefecto
== é
}
==è ê
,
==ê ë
Detalle
==í ô
=
==ö õ
this
==ú †
.
==† °
	Direccion
==° ™
}
==´ ¨
}>> 
;>> 
}?? 	
}@@ 
}BB ˘v
^D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\DetalleOrdenDeOperacionViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class ,
 DetalleOrdenDeOperacionViewModel 1
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
int 

IdConcepto 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Concepto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Detalle 
{ 
get  #
;# $
set% (
;( )
}* +
public 
decimal 
Cantidad 
{  !
get" %
;% &
set' *
;* +
}, -
public 
decimal 
Precio 
{ 
get  #
;# $
set% (
;( )
}* +
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Total 
{ 
get "
;" #
set$ '
;' (
}) *
public 
decimal 
Igv 
{ 
get  
;  !
set" %
;% &
}' (
public 
decimal 
Icbper 
{ 
get  #
;# $
set% (
;( )
}* +
public 
decimal 
ValorIcbper "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
decimal 
	Descuento  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Lote 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Vencimiento !
{" #
get$ '
;' (
set) ,
;, -
}. /
public   
string   
Registro   
{    
get  ! $
;  $ %
set  & )
;  ) *
}  + ,
public!! 
bool!! 
EsBien!! 
{!! 
get!!  
;!!  !
set!!" %
;!!% &
}!!' (
public## ,
 DetalleOrdenDeOperacionViewModel## /
(##/ 0
)##0 1
{$$ 	
}%% 	
public'' ,
 DetalleOrdenDeOperacionViewModel'' /
(''/ 0
DetalleDeOperacion''0 B
detalle''C J
)''J K
{(( 	
this)) 
.)) 
Id)) 
=)) 
detalle)) 
.)) 
Id))  
;))  !
this** 
.** 

IdConcepto** 
=** 
detalle** %
.**% &
Producto**& .
.**. /
Id**/ 1
;**1 2
this++ 
.++ 
Codigo++ 
=++ 
detalle++ !
.++! "
Producto++" *
.++* +
Codigo+++ 1
;++1 2
this,, 
.,, 
Concepto,, 
=,, 
detalle,, #
.,,# $
Producto,,$ ,
.,,, -
Nombre,,- 3
;,,3 4
this-- 
.-- 
EsBien-- 
=-- 
detalle-- !
.--! "
Producto--" *
.--* +
EsBien--+ 1
;--1 2
this.. 
... 
Detalle.. 
=.. 
detalle.. "
..." #
Detalle..# *
;..* +
this// 
.// 
Cantidad// 
=// 
detalle// #
.//# $
Cantidad//$ ,
;//, -
this00 
.00 
Precio00 
=00 
detalle00 !
.00! "
PrecioUnitario00" 0
;000 1
this11 
.11 
	Descuento11 
=11 
detalle11 $
.11$ %
	Descuento11% .
;11. /
this22 
.22 
Igv22 
=22 
detalle22 
.22 
Igv22 "
;22" #
this33 
.33 
Importe33 
=33 
detalle33 "
.33" #
Importe33# *
;33* +
this44 
.44 
Lote44 
=44 
detalle44 
.44  
Lote44  $
;44$ %
this55 
.55 
Vencimiento55 
=55 
detalle55 &
.55& '
Vencimiento55' 2
!=553 5
null556 :
?55; <
(55= >
(55> ?
DateTime55? G
)55G H
detalle55H O
.55O P
Vencimiento55P [
)55[ \
.55\ ]
ToString55] e
(55e f
$str55f r
)55r s
:55t u
null55v z
;55z {
this66 
.66 
Registro66 
=66 
detalle66 #
.66# $
Registro66$ ,
;66, -
}77 	
public99 ,
 DetalleOrdenDeOperacionViewModel99 /
(99/ 0
DetalleDeOperacion990 B
detalle99C J
,99J K
decimal99L S
valorIcbper99T _
)99_ `
{:: 	
this;; 
.;; 
Id;; 
=;; 
detalle;; 
.;; 
Id;;  
;;;  !
this<< 
.<< 

IdConcepto<< 
=<< 
detalle<< %
.<<% &
Producto<<& .
.<<. /
Id<</ 1
;<<1 2
this== 
.== 
Codigo== 
=== 
detalle== !
.==! "
Producto==" *
.==* +
Codigo==+ 1
;==1 2
this>> 
.>> 
Concepto>> 
=>> 
detalle>> #
.>># $
Producto>>$ ,
.>>, -
Nombre>>- 3
;>>3 4
this?? 
.?? 
EsBien?? 
=?? 
detalle?? !
.??! "
Producto??" *
.??* +
EsBien??+ 1
;??1 2
this@@ 
.@@ 
Detalle@@ 
=@@ 
detalle@@ "
.@@" #
Detalle@@# *
;@@* +
thisAA 
.AA 
CantidadAA 
=AA 
detalleAA #
.AA# $
CantidadAA$ ,
;AA, -
thisBB 
.BB 
PrecioBB 
=BB 
detalleBB !
.BB! "
PrecioUnitarioBB" 0
;BB0 1
thisCC 
.CC 
	DescuentoCC 
=CC 
detalleCC $
.CC$ %
	DescuentoCC% .
;CC. /
thisDD 
.DD 
IgvDD 
=DD 
detalleDD 
.DD 
IgvDD "
;DD" #
thisEE 
.EE 
ImporteEE 
=EE 
detalleEE "
.EE" #
ImporteEE# *
;EE* +
thisFF 
.FF 
IcbperFF 
=FF 
detalleFF !
.FF! "
ProductoFF" *
.FF* +
IdConceptoBasicoFF+ ;
==FF< >
MaestroSettingsFF? N
.FFN O
DefaultFFO V
.FFV W8
+IdDetalleMaestroConceptoBasicoBolsaPlastica	FFW Ç
?
FFÉ Ñ
detalle
FFÖ å
.
FFå ç
Cantidad
FFç ï
*
FFñ ó
valorIcbper
FFò £
:
FF§ •
$num
FF¶ ß
;
FFß ®
thisGG 
.GG 
ValorIcbperGG 
=GG 
detalleGG &
.GG& '
ProductoGG' /
.GG/ 0
IdConceptoBasicoGG0 @
==GGA C
MaestroSettingsGGD S
.GGS T
DefaultGGT [
.GG[ \8
+IdDetalleMaestroConceptoBasicoBolsaPlastica	GG\ á
?
GGà â
valorIcbper
GGä ï
:
GGñ ó
$num
GGò ô
;
GGô ö
thisHH 
.HH 
TotalHH 
=HH 
thisHH 
.HH 
ImporteHH %
+HH& '
thisHH( ,
.HH, -
IcbperHH- 3
;HH3 4
thisII 
.II 
LoteII 
=II 
detalleII 
.II  
LoteII  $
;II$ %
thisJJ 
.JJ 
VencimientoJJ 
=JJ 
detalleJJ &
.JJ& '
VencimientoJJ' 2
!=JJ3 5
nullJJ6 :
?JJ; <
(JJ= >
(JJ> ?
DateTimeJJ? G
)JJG H
detalleJJH O
.JJO P
VencimientoJJP [
)JJ[ \
.JJ\ ]
ToStringJJ] e
(JJe f
$strJJf r
)JJr s
:JJt u
nullJJv z
;JJz {
thisKK 
.KK 
RegistroKK 
=KK 
detalleKK #
.KK# $
RegistroKK$ ,
;KK, -
}LL 	
publicNN ,
 DetalleOrdenDeOperacionViewModelNN /
(NN/ 0
DetalleDeOperacionNN0 B
detalleNNC J
,NNJ K
boolNNL P
esBienNNQ W
)NNW X
{OO 	
thisPP 
.PP 
IdPP 
=PP 
detallePP 
.PP 
IdPP  
;PP  !
thisQQ 
.QQ 

IdConceptoQQ 
=QQ 
detalleQQ %
.QQ% &
ProductoQQ& .
.QQ. /
IdQQ/ 1
;QQ1 2
thisRR 
.RR 
ConceptoRR 
=RR 
detalleRR #
.RR# $
ProductoRR$ ,
.RR, -
NombreRR- 3
;RR3 4
thisSS 
.SS 
DetalleSS 
=SS 
detalleSS "
.SS" #
DetalleSS# *
;SS* +
thisTT 
.TT 
CantidadTT 
=TT 
detalleTT #
.TT# $
CantidadTT$ ,
;TT, -
thisUU 
.UU 
PrecioUU 
=UU 
detalleUU !
.UU! "
PrecioUnitarioUU" 0
;UU0 1
thisVV 
.VV 
	DescuentoVV 
=VV 
detalleVV $
.VV$ %
	DescuentoVV% .
;VV. /
thisWW 
.WW 
IgvWW 
=WW 
detalleWW 
.WW 
IgvWW "
;WW" #
thisXX 
.XX 
ImporteXX 
=XX 
detalleXX "
.XX" #
ImporteXX# *
;XX* +
thisYY 
.YY 
LoteYY 
=YY 
detalleYY 
.YY  
LoteYY  $
;YY$ %
thisZZ 
.ZZ 
VencimientoZZ 
=ZZ 
detalleZZ &
.ZZ& '
VencimientoZZ' 2
!=ZZ3 5
nullZZ6 :
?ZZ; <
(ZZ= >
(ZZ> ?
DateTimeZZ? G
)ZZG H
detalleZZH O
.ZZO P
VencimientoZZP [
)ZZ[ \
.ZZ\ ]
ToStringZZ] e
(ZZe f
$strZZf r
)ZZr s
:ZZt u
nullZZv z
;ZZz {
this[[ 
.[[ 
Registro[[ 
=[[ 
detalle[[ #
.[[# $
Registro[[$ ,
;[[, -
this\\ 
.\\ 
EsBien\\ 
=\\ 
esBien\\  
;\\  !
}]] 	
public__ 
static__ 
List__ 
<__ ,
 DetalleOrdenDeOperacionViewModel__ ;
>__; <
Convert__= D
(__D E
List__E I
<__I J
DetalleDeOperacion__J \
>__\ ]
detalles__^ f
)__f g
{`` 	
varaa 
detalleDeOperacionaa "
=aa# $
newaa% (
Listaa) -
<aa- .,
 DetalleOrdenDeOperacionViewModelaa. N
>aaN O
(aaO P
)aaP Q
;aaQ R
foreachbb 
(bb 
varbb 
detallebb  
inbb! #
detallesbb$ ,
)bb, -
{cc 
detalleDeOperaciondd "
.dd" #
Adddd# &
(dd& '
newdd' *,
 DetalleOrdenDeOperacionViewModeldd+ K
(ddK L
detalleddL S
)ddS T
)ddT U
;ddU V
}ee 
returnff 
detalleDeOperacionff %
;ff% &
}gg 	
publicii 
staticii 
Listii 
<ii ,
 DetalleOrdenDeOperacionViewModelii ;
>ii; <
ConvertirABienesii= M
(iiM N
ListiiN R
<iiR S
DetalleDeOperacioniiS e
>iie f
detallesiig o
)iio p
{jj 	
varkk 
detalleDeOperacionkk "
=kk# $
newkk% (
Listkk) -
<kk- .,
 DetalleOrdenDeOperacionViewModelkk. N
>kkN O
(kkO P
)kkP Q
;kkQ R
foreachll 
(ll 
varll 
detallell  
inll! #
detallesll$ ,
)ll, -
{mm 
detalleDeOperacionnn "
.nn" #
Addnn# &
(nn& '
newnn' *,
 DetalleOrdenDeOperacionViewModelnn+ K
(nnK L
detallennL S
,nnS T
truennT X
)nnX Y
)nnY Z
;nnZ [
}oo 
returnpp 
detalleDeOperacionpp %
;pp% &
}qq 	
publicss 
staticss 
Listss 
<ss ,
 DetalleOrdenDeOperacionViewModelss ;
>ss; <
Convertss= D
(ssD E
ListssE I
<ssI J
DetalleDeOperacionssJ \
>ss\ ]
detallesss^ f
,ssf g
decimalssh o
valorIcbperssp {
)ss{ |
{tt 	
varuu 
detalleDeOperacionuu "
=uu# $
newuu% (
Listuu) -
<uu- .,
 DetalleOrdenDeOperacionViewModeluu. N
>uuN O
(uuO P
)uuP Q
;uuQ R
foreachvv 
(vv 
varvv 
detallevv  
invv! #
detallesvv$ ,
)vv, -
{ww 
detalleDeOperacionxx "
.xx" #
Addxx# &
(xx& '
newxx' *,
 DetalleOrdenDeOperacionViewModelxx+ K
(xxK L
detallexxL S
,xxS T
valorIcbperxxU `
)xx` a
)xxa b
;xxb c
}yy 
returnzz 
detalleDeOperacionzz %
;zz% &
}{{ 	
}
óó 
}òò Ü
JD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\DocumentoXml.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public		 

class		 
DocumentoXml		 
{

 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
NombreDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
byte 
[ 
] 
	Documento 
{  !
get" %
;% &
set' *
;* +
}, -
} 
public 

class 
DocumentoPdf 
{ 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
NombreDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
PdfDocument 
	Documento $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ã
mD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\FacturacionElectronica\EnvioIndividualVielModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
.		, -"
FacturacionElectronica		- C
{

 
public 

class $
EnvioIndividualVielModel )
:* +
EnvioViewModel, :
{ 
public 
long 

IdSigescom 
; 
public $
EnvioIndividualVielModel '
(' (
)( )
{ 	
} 	
public $
EnvioIndividualVielModel '
(' (
Envio( -
envio. 3
)3 4
:5 6
base7 ;
(< =
envio= B
)B C
{ 	

IdSigescom 
= 
envio 
. 
EnvioDocumento -
.- .
SingleOrDefault. =
(= >
)> ?
.? @
	Documento@ I
.I J

idSigescomJ T
;T U
} 	
public 
new 
static 
List 
< $
EnvioIndividualVielModel 7
>7 8
Convert9 @
(@ A
ListA E
<E F
EnvioF K
>K L
enviosM S
)S T
{ 	
List 
< $
EnvioIndividualVielModel )
>) *
	Resultado+ 4
=5 6
new7 :
List; ?
<? @$
EnvioIndividualVielModel@ X
>X Y
(Y Z
)Z [
;[ \
foreach 
( 
var 
item 
in  
envios! '
)' (
{ 
	Resultado 
. 
Add 
( 
new !$
EnvioIndividualVielModel" :
(: ;
item; ?
)? @
)@ A
;A B
} 
return 
	Resultado 
; 
}   	
}!! 
}"" ©
YD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\HangfireAuthorizationFilter.cs
	namespace 	!
DemoSendEmailHangfire
 
.  
Models  &
{		 
public

 

class

 '
HangfireAuthorizationFilter

 ,
:

- .)
IDashboardAuthorizationFilter

/ L
{ 
public 
bool 
	Authorize 
( 
[ 
NotNull &
]& '
DashboardContext( 8
context9 @
)@ A
{ 	
return 
HttpContext 
. 
Current &
.& '
User' +
.+ ,
Identity, 4
.4 5
IsAuthenticated5 D
;D E
} 	
} 
} À√
mD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\NotaCreditoDebito\DocumentoDeOperacionViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
public 

class )
DocumentoDeOperacionViewModel .
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdOperacion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
IdEncriptado "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
long 
IdOrden 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
	IdCliente 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
TelefonoCliente %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string -
!EtiquetaDocumentoIdentidadTercero 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
string %
DocumentoIdentidadTercero /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
string 
EtiquetaTercero %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
NombreTercero #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
DireccionTercero &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string #
EtiquetaNombreDocumento -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
string  
SerieNumeroDocumento *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
HayRegistroFlete &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
decimal 
Flete 
{ 
get "
;" #
set$ '
;' (
}) *
public   
decimal   
SubTotal   
{    !
get  " %
;  % &
set  ' *
;  * +
}  , -
public!! 
decimal!! 
Igv!! 
{!! 
get!!  
;!!  !
set!!" %
;!!% &
}!!' (
public"" 
decimal"" 
Total"" 
{"" 
get"" "
;""" #
set""$ '
;""' (
}"") *
public## 
List## 
<## ,
 DetalleOrdenDeOperacionViewModel## 4
>##4 5
Detalles##6 >
{##? @
get##A D
;##D E
set##F I
;##I J
}##K L
public$$ 
bool$$ 
AccionInvalidar$$ #
{$$$ %
get$$& )
;$$) *
set$$+ .
;$$. /
}$$0 1
public%% 
bool%% 
AccionEmitirNota%% $
{%%% &
get%%' *
;%%* +
set%%, /
;%%/ 0
}%%1 2
public&& 
string&& %
CadenaHtmlDeComprobante80&& /
{&&0 1
get&&2 5
;&&5 6
set&&7 :
;&&: ;
}&&< =
public'' 
string'' %
CadenaHtmlDeComprobanteA4'' /
{''0 1
get''2 5
;''5 6
set''7 :
;'': ;
}''< =
public(( 
bool(( 
EsOrden(( 
{(( 
get(( !
;((! "
set((# &
;((& '
}((( )
public)) 
bool)) 
TieneGuiaDeRemision)) '
{))( )
get))* -
;))- .
set))/ 2
;))2 3
}))4 5
public** 
List** 
<** 
string** 
>** )
CadenasHtmlDeGuiaDeRemision80** 9
{**: ;
get**< ?
;**? @
set**A D
;**D E
}**F G
public++ 
List++ 
<++ 
string++ 
>++ )
CadenasHtmlDeGuiaDeRemisionA4++ 9
{++: ;
get++< ?
;++? @
set++A D
;++D E
}++F G
public,, 
string,, 
Formato,, 
{,, 
get,,  #
;,,# $
set,,% (
;,,( )
},,* +
public-- 
bool-- "
HayMovimientoEconomico-- *
{--+ ,
get--- 0
=>--1 3
Total--4 9
==--: <$
TotalMovimientoEconomico--= U
;--U V
}--W X
public.. 
decimal.. $
TotalMovimientoEconomico.. /
{..0 1
get..2 5
;..5 6
set..7 :
;..: ;
}..< =
public// 
bool// !
MostrarEntregaAlmacen// )
{//* +
get//, /
;/// 0
set//1 4
;//4 5
}//6 7
public00 
bool00  
HayMovimientoAlmacen00 (
{00) *
get00+ .
;00. /
set000 3
;003 4
}005 6
public11 
bool11 "
EstadoAlmacenPendiente11 *
{11+ ,
get11- 0
;110 1
set112 5
;115 6
}117 8
public22 
bool22  
EstadoAlmacenParcial22 (
{22) *
get22+ .
;22. /
set220 3
;223 4
}225 6
public33 
bool33 #
EstadoAlmacenCompletada33 +
{33, -
get33. 1
;331 2
set333 6
;336 7
}338 9
public44 
List44 
<44 !
DetalleDeOrdenAlmacen44 )
>44) * 
DetallesOrdenAlmacen44+ ?
{44@ A
get44B E
;44E F
set44G J
;44J K
}44L M
public55 
bool55 
EstaPagadoConPuntos55 '
{55( )
get55* -
;55- .
set55/ 2
;552 3
}554 5
public77 )
DocumentoDeOperacionViewModel77 ,
(77, -
)77- .
{88 	
}99 	
public;; )
DocumentoDeOperacionViewModel;; ,
(;;, -
OrdenDeCompra;;- :
ordenDeCompra;;; H
,;;H I
string;;J P%
cadenaHtmlDeComprobante80;;Q j
,;;j k
bool
;;í ñ!
tieneGuiaDeRemision
;;ó ™
,
;;™ ´
List
;;¨ ∞
<
;;∞ ±
string
;;± ∑
>
;;∑ ∏+
cadenasHtmlDeGuiaDeRemision80
;;π ÷
)
;;Ü á
{<< 	
this== 
.== 
IdOperacion== 
=== 
ordenDeCompra== ,
.==, -
IdCompra==- 5
;==5 6
this>> 
.>> 
IdOrden>> 
=>> 
ordenDeCompra>> (
.>>( )
Id>>) +
;>>+ ,
this?? 
.?? -
!EtiquetaDocumentoIdentidadTercero?? 2
=??3 4
ordenDeCompra??5 B
.??B C
	Proveedor??C L
(??L M
)??M N
.??N O(
CodigoTipoDocumentoIdentidad??O k
(??k l
)??l m
;??m n
this@@ 
.@@ %
DocumentoIdentidadTercero@@ *
=@@+ ,
ordenDeCompra@@- :
.@@: ;
	Proveedor@@; D
(@@D E
)@@E F
.@@F G
DocumentoIdentidad@@G Y
;@@Y Z
thisAA 
.AA 
EtiquetaTerceroAA  
=AA! "
ordenDeCompraAA# 0
.AA0 1
	ProveedorAA1 :
(AA: ;
)AA; <
.AA< =!
NombreRolActorNegocioAA= R
(AAR S
)AAS T
;AAT U
thisBB 
.BB 
NombreTerceroBB 
=BB  
ordenDeCompraBB! .
.BB. /
	ProveedorBB/ 8
(BB8 9
)BB9 :
.BB: ;
RazonSocialBB; F
;BBF G
thisCC 
.CC 
DireccionTerceroCC !
=CC" #
(CC$ %
ordenDeCompraCC% 2
.CC2 3
	ProveedorCC3 <
(CC< =
)CC= >
.CC> ?
DomicilioFiscalCC? N
(CCN O
)CCO P
!=CCQ S
nullCCT X
)CCX Y
?CCZ [
(CC\ ]
ordenDeCompraCC] j
.CCj k
	ProveedorCCk t
(CCt u
)CCu v
.CCv w
DomicilioFiscal	CCw Ü
(
CCÜ á
)
CCá à
.
CCà â
detalle
CCâ ê
+
CCë í
$str
CCì ò
+
CCô ö
ordenDeCompra
CCõ ®
.
CC® ©
	Proveedor
CC© ≤
(
CC≤ ≥
)
CC≥ ¥
.
CC¥ µ
DomicilioFiscal
CCµ ƒ
(
CCƒ ≈
)
CC≈ ∆
.
CC∆ «
Ubigeo
CC« Õ
.
CCÕ Œ
descripcion_larga
CCŒ ﬂ
)
CCﬂ ‡
.
CC‡ ·
ToUpper
CC· Ë
(
CCË È
)
CCÈ Í
:
CCÎ Ï
$str
CCÌ 
;
CC Ò
thisDD 
.DD #
EtiquetaNombreDocumentoDD (
=DD) *
ordenDeCompraDD+ 8
.DD8 9
ComprobanteDD9 D
(DDD E
)DDE F
.DDF G
TipoDDG K
(DDK L
)DDL M
.DDM N
NombreDDN T
;DDT U
thisEE 
.EE  
SerieNumeroDocumentoEE %
=EE& '
ordenDeCompraEE( 5
.EE5 6
ComprobanteEE6 A
(EEA B
)EEB C
.EEC D
NumeroDeComprobanteEED W
>EEX Y
$numEEZ [
?EE\ ]
ordenDeCompraEE^ k
.EEk l
ComprobanteEEl w
(EEw x
)EEx y
.EEy z
NumeroDeSerie	EEz á
+
EEà â
$str
EEä è
+
EEê ë
ordenDeCompra
EEí ü
.
EEü †
Comprobante
EE† ´
(
EE´ ¨
)
EE¨ ≠
.
EE≠ Æ!
NumeroDeComprobante
EEÆ ¡
:
EE¬ √
ordenDeCompra
EEƒ —
.
EE— “
Comprobante
EE“ ›
(
EE› ﬁ
)
EEﬁ ﬂ
.
EEﬂ ‡
NombreCortoTipo
EE‡ Ô
;
EEÔ 
thisFF 
.FF 
FechaFF 
=FF 
ordenDeCompraFF &
.FF& '

FechaOrdenFF' 1
(FF1 2
)FF2 3
.FF3 4
ToStringFF4 <
(FF< =
$strFF= I
)FFI J
;FFJ K
thisGG 
.GG 
EstadoGG 
=GG 
ordenDeCompraGG '
.GG' (
EstadoActualGG( 4
(GG4 5
)GG5 6
.GG6 7
nombreGG7 =
;GG= >
thisHH 
.HH 
HayRegistroFleteHH !
=HH" #
SystemHH$ *
.HH* +
ConvertHH+ 2
.HH2 3
ToStringHH3 ;
(HH; <
ordenDeCompraHH< I
.HHI J
FleteHHJ O
!=HHP R
$numHHS T
)HHT U
;HHU V
thisII 
.II 
FleteII 
=II 
ordenDeCompraII &
.II& '
FleteII' ,
;II, -
thisJJ 
.JJ 
SubTotalJJ 
=JJ 
ordenDeCompraJJ )
.JJ) *
TotalJJ* /
-JJ0 1
ordenDeCompraJJ2 ?
.JJ? @
IgvJJ@ C
(JJC D
)JJD E
;JJE F
thisKK 
.KK 
IgvKK 
=KK 
ordenDeCompraKK $
.KK$ %
IgvKK% (
(KK( )
)KK) *
;KK* +
thisLL 
.LL 
TotalLL 
=LL 
ordenDeCompraLL &
.LL& '
TotalLL' ,
;LL, -
thisMM 
.MM $
TotalMovimientoEconomicoMM )
=MM* +
ordenDeCompraMM, 9
.MM9 :
CuotasMM: @
(MM@ A
)MMA B
.MMB C
SumMMC F
(MMF G
cMMG H
=>MMI K
cMML M
.MMM N
pago_a_cuentaMMN [
)MM[ \
;MM\ ]
thisNN 
.NN 
DetallesNN 
=NN ,
 DetalleOrdenDeOperacionViewModelNN <
.NN< =
ConvertNN= D
(NND E
ordenDeCompraNNE R
.NNR S
DetallesNNS [
(NN[ \
)NN\ ]
.NN] ^
WhereNN^ c
(NNc d
dNNd e
=>NNf h
dNNi j
.NNj k
DetalleTransaccionNNk }
(NN} ~
)NN~ 
.	NN Ä!
id_concepto_negocio
NNÄ ì
!=
NNî ñ
ConceptoSettings
NNó ß
.
NNß ®
Default
NN® Ø
.
NNØ ∞$
IdConceptoNegocioFlete
NN∞ ∆
)
NN∆ «
.
NN« »
ToList
NN» Œ
(
NNŒ œ
)
NNœ –
)
NN– —
;
NN— “
thisOO 
.OO 
AccionInvalidarOO  
=OO! "
ordenDeCompraOO# 0
.OO0 1$
esAnulableConNotaInternaOO1 I
(OOI J
)OOJ K
;OOK L
thisPP 
.PP 
AccionEmitirNotaPP !
=PP" #
ordenDeCompraPP$ 1
.PP1 2&
esAnulableConNotaDeCreditoPP2 L
(PPL M
)PPM N
;PPN O
thisQQ 
.QQ %
CadenaHtmlDeComprobante80QQ *
=QQ+ ,%
cadenaHtmlDeComprobante80QQ- F
;QQF G
thisSS 
.SS 
TieneGuiaDeRemisionSS $
=SS% &
tieneGuiaDeRemisionSS' :
;SS: ;
thisTT 
.TT )
CadenasHtmlDeGuiaDeRemision80TT .
=TT/ 0)
cadenasHtmlDeGuiaDeRemision80TT1 N
;TTN O
thisVV 
.VV 
FormatoVV 
=VV 
$strVV "
;VV" #
}WW 	
publicYY )
DocumentoDeOperacionViewModelYY ,
(YY, -
OrdenDeVentaYY- 9
ordenDeVentaYY: F
,YYF G
stringYYH N%
cadenaHtmlDeComprobante80YYO h
,YYh i
stringYYj p&
cadenaHtmlDeComprobanteA4	YYq ä
,
YYä ã
bool
YYå ê!
tieneGuiaDeRemision
YYë §
,
YY§ •
List
YY¶ ™
<
YY™ ´
string
YY´ ±
>
YY± ≤+
cadenasHtmlDeGuiaDeRemision80
YY≥ –
,
YY– —
List
YY“ ÷
<
YY÷ ◊
string
YY◊ ›
>
YY› ﬁ+
cadenasHtmlDeGuiaDeRemisionA4
YYﬂ ¸
,
YY¸ ˝
string
YY˛ Ñ
idEncriptado
YYÖ ë
)
YYë í
{ZZ 	
this[[ 
.[[ 
IdOperacion[[ 
=[[ 
ordenDeVenta[[ +
.[[+ ,
IdVenta[[, 3
;[[3 4
this\\ 
.\\ 
IdOrden\\ 
=\\ 
ordenDeVenta\\ '
.\\' (
Id\\( *
;\\* +
this]] 
.]] 
IdEncriptado]] 
=]] 
idEncriptado]]  ,
;]], -
this^^ 
.^^ 
	IdCliente^^ 
=^^ 
ordenDeVenta^^ )
.^^) *
	IdCliente^^* 3
;^^3 4
this__ 
.__ 
TelefonoCliente__  
=__! "
ordenDeVenta__# /
.__/ 0
Cliente__0 7
(__7 8
)__8 9
.__9 :
Telefono__: B
(__B C
)__C D
;__D E
this`` 
.``  
SerieNumeroDocumento`` %
=``& '
ordenDeVenta``( 4
.``4 5
Comprobante``5 @
(``@ A
)``A B
.``B C
NumeroDeComprobante``C V
>``W X
$num``Y Z
?``[ \
ordenDeVenta``] i
.``i j
Comprobante``j u
(``u v
)``v w
.``w x
NumeroDeSerie	``x Ö
+
``Ü á
$str
``à ã
+
``å ç
ordenDeVenta
``é ö
.
``ö õ
Comprobante
``õ ¶
(
``¶ ß
)
``ß ®
.
``® ©!
NumeroDeComprobante
``© º
:
``Ω æ
ordenDeVenta
``ø À
.
``À Ã
Comprobante
``Ã ◊
(
``◊ ÿ
)
``ÿ Ÿ
.
``Ÿ ⁄
NombreCortoTipo
``⁄ È
;
``È Í
thisaa 
.aa 
Fechaaa 
=aa 
ordenDeVentaaa %
.aa% &

FechaOrdenaa& 0
(aa0 1
)aa1 2
.aa2 3
ToStringaa3 ;
(aa; <
$straa< H
)aaH I
;aaI J
thisbb 
.bb 
SubTotalbb 
=bb 
ordenDeVentabb (
.bb( )
Totalbb) .
-bb/ 0
ordenDeVentabb1 =
.bb= >
Igvbb> A
(bbA B
)bbB C
;bbC D
thiscc 
.cc 
Igvcc 
=cc 
ordenDeVentacc #
.cc# $
Igvcc$ '
(cc' (
)cc( )
;cc) *
thisdd 
.dd 
Totaldd 
=dd 
ordenDeVentadd %
.dd% &
Totaldd& +
;dd+ ,
thisee 
.ee 
Detallesee 
=ee ,
 DetalleOrdenDeOperacionViewModelee <
.ee< =
Convertee= D
(eeD E
ordenDeVentaeeE Q
.eeQ R
DetalleseeR Z
(eeZ [
)ee[ \
.ee\ ]
Whereee] b
(eeb c
deec d
=>eee g
deeh i
.eei j
DetalleTransaccioneej |
(ee| }
)ee} ~
.ee~  
id_concepto_negocio	ee í
!=
eeì ï
ConceptoSettings
eeñ ¶
.
ee¶ ß
Default
eeß Æ
.
eeÆ Ø$
IdConceptoNegocioFlete
eeØ ≈
)
ee≈ ∆
.
ee∆ «
ToList
ee« Õ
(
eeÕ Œ
)
eeŒ œ
,
eeœ –
ordenDeVenta
ee— ›
.
ee› ﬁ
ValorIcbper
eeﬁ È
(
eeÈ Í
)
eeÍ Î
)
eeÎ Ï
;
eeÏ Ì
thisff 
.ff 
AccionInvalidarff  
=ff! "
ordenDeVentaff# /
.ff/ 0$
EsAnulableConNotaInternaff0 H
(ffH I
)ffI J
;ffJ K
thisgg 
.gg 
AccionEmitirNotagg !
=gg" #
ordenDeVentagg$ 0
.gg0 1&
EsAnulableConNotaDeCreditogg1 K
(ggK L
)ggL M
;ggM N
thishh 
.hh %
CadenaHtmlDeComprobante80hh *
=hh+ ,%
cadenaHtmlDeComprobante80hh- F
;hhF G
thisii 
.ii %
CadenaHtmlDeComprobanteA4ii *
=ii+ ,%
cadenaHtmlDeComprobanteA4ii- F
;iiF G
thisjj 
.jj 
EsOrdenjj 
=jj 
ordenDeVentajj '
.jj' (
EsOrdenDeVentajj( 6
(jj6 7
)jj7 8
;jj8 9
thiskk 
.kk 
TieneGuiaDeRemisionkk $
=kk% &
tieneGuiaDeRemisionkk' :
;kk: ;
thisll 
.ll $
TotalMovimientoEconomicoll )
=ll* +
ordenDeVentall, 8
.ll8 9
Cuotasll9 ?
(ll? @
)ll@ A
.llA B
SumllB E
(llE F
cllF G
=>llH J
cllK L
.llL M
pago_a_cuentallM Z
)llZ [
;ll[ \
thismm 
.mm !
MostrarEntregaAlmacenmm &
=mm' (
VentasSettingsmm) 7
.mm7 8
Defaultmm8 ?
.mm? @(
MostrarSeccionEntregaEnVentamm@ \
;mm\ ]
thisnn 
.nn  
HayMovimientoAlmacennn %
=nn& '
ordenDeVentann( 4
.nn4 5&
IdEstadoActualOrdenAlmacennn5 O
==nnP R
MaestroSettingsnnS b
.nnb c
Defaultnnc j
.nnj k-
 IdDetalleMaestroEstadoCompletada	nnk ã
||
nnå é
ordenDeVenta
nnè õ
.
nnõ ú(
IdEstadoActualOrdenAlmacen
nnú ∂
==
nn∑ π
MaestroSettings
nn∫ …
.
nn…  
Default
nn  —
.
nn— “+
IdDetalleMaestroEstadoParcial
nn“ Ô
;
nnÔ 
thisoo 
.oo "
EstadoAlmacenPendienteoo '
=oo( )
ordenDeVentaoo* 6
.oo6 7&
IdEstadoActualOrdenAlmacenoo7 Q
==ooR T
MaestroSettingsooU d
.ood e
Defaultooe l
.ool m,
IdDetalleMaestroEstadoPendiente	oom å
;
ooå ç
thispp 
.pp  
EstadoAlmacenParcialpp %
=pp& '
ordenDeVentapp( 4
.pp4 5&
IdEstadoActualOrdenAlmacenpp5 O
==ppP R
MaestroSettingsppS b
.ppb c
Defaultppc j
.ppj k*
IdDetalleMaestroEstadoParcial	ppk à
;
ppà â
thisqq 
.qq #
EstadoAlmacenCompletadaqq (
=qq) *
ordenDeVentaqq+ 7
.qq7 8&
IdEstadoActualOrdenAlmacenqq8 R
==qqS U
MaestroSettingsqqV e
.qqe f
Defaultqqf m
.qqm n-
 IdDetalleMaestroEstadoCompletada	qqn é
;
qqé è
thisrr 
.rr )
CadenasHtmlDeGuiaDeRemision80rr .
=rr/ 0)
cadenasHtmlDeGuiaDeRemision80rr1 N
;rrN O
thisss 
.ss )
CadenasHtmlDeGuiaDeRemisionA4ss .
=ss/ 0)
cadenasHtmlDeGuiaDeRemisionA4ss1 N
;ssN O
thistt 
.tt 
EstaPagadoConPuntostt $
=tt% &
ordenDeVentatt' 3
.tt3 4
Ventatt4 9
(tt9 :
)tt: ;
.tt; <
ObtenerPagostt< H
(ttH I
)ttI J
.ttJ K
FirstOrDefaultttK Y
(ttY Z
pttZ [
=>tt\ ^
ptt_ `
.tt` a
TrazaDePagotta l
(ttl m
)ttm n
.ttn o
MedioDePagotto z
(ttz {
)tt{ |
.tt| }
idtt} 
==
ttÄ Ç
MaestroSettings
ttÉ í
.
ttí ì
Default
ttì ö
.
ttö õ/
!IdDetalleMaestroMedioDepagoPuntos
ttõ º
)
ttº Ω
!=
ttæ ¿
null
tt¡ ≈
;
tt≈ ∆
}uu 	
}vv 
publicww 

classww !
CadenasHtmlVentaYGuiaww &
{xx 
publicyy 
stringyy #
CadenaHtmlDeComprobanteyy -
{yy. /
getyy0 3
;yy3 4
setyy5 8
;yy8 9
}yy: ;
publiczz 
Listzz 
<zz 
stringzz 
>zz '
CadenasHtmlDeGuiaDeRemisionzz 7
{zz8 9
getzz: =
;zz= >
setzz? B
;zzB C
}zzD E
public|| !
CadenasHtmlVentaYGuia|| $
(||$ %
)||% &
{}} 	
}~~ 	
public
ÄÄ #
CadenasHtmlVentaYGuia
ÄÄ $
(
ÄÄ$ %
string
ÄÄ% +%
cadenaHtmlDeComprobante
ÄÄ, C
,
ÄÄC D
List
ÄÄE I
<
ÄÄI J
string
ÄÄJ P
>
ÄÄP Q)
cadenasHtmlDeGuiaDeRemision
ÄÄR m
)
ÄÄm n
{
ÅÅ 	%
CadenaHtmlDeComprobante
ÇÇ #
=
ÇÇ$ %%
cadenaHtmlDeComprobante
ÇÇ& =
;
ÇÇ= >)
CadenasHtmlDeGuiaDeRemision
ÉÉ '
=
ÉÉ( ))
cadenasHtmlDeGuiaDeRemision
ÉÉ* E
;
ÉÉE F
}
ÑÑ 	
}
ÖÖ 
public
áá 

class
áá ,
DocumentoComprobanteOrdenVenta
áá /
{
àà 
public
ââ 
long
ââ 
Id
ââ 
{
ââ 
get
ââ 
;
ââ 
set
ââ !
;
ââ! "
}
ââ# $
public
ää 
long
ää 
IdOrden
ää 
{
ää 
get
ää !
;
ää! "
set
ää# &
;
ää& '
}
ää( )
public
ãã 
string
ãã '
CadenaHtmlDeComprobante80
ãã /
{
ãã0 1
get
ãã2 5
;
ãã5 6
set
ãã7 :
;
ãã: ;
}
ãã< =
public
åå 
string
åå '
CadenaHtmlDeComprobanteA4
åå /
{
åå0 1
get
åå2 5
;
åå5 6
set
åå7 :
;
åå: ;
}
åå< =
public
éé ,
DocumentoComprobanteOrdenVenta
éé -
(
éé- .
)
éé. /
{
èè 	
}
êê 	
}
íí 
}ìì ≤
gD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Empleado\RegistroUsuarioEmpleadoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
public

 

class

 ,
 RegistroUsuarioEmpleadoViewModel

 1
{ 
public 
List 
< $
UsuarioEmpleadoViewModel ,
>, -#
UsuariosEmpleadoInicial. E
{F G
getH K
;K L
setM P
;P Q
}R S
public 
List 
< $
UsuarioEmpleadoViewModel ,
>, -
UsuariosEmpleado. >
{? @
getA D
;D E
setF I
;I J
}K L
public ,
 RegistroUsuarioEmpleadoViewModel /
(/ 0
List0 4
<4 5$
UsuarioEmpleadoViewModel5 M
>M N#
usuariosEmpleadoInicialO f
,f g
Listh l
<l m%
UsuarioEmpleadoViewModel	m Ö
>
Ö Ü
usuariosEmpleado
á ó
)
ó ò
{ 	
this 
. #
UsuariosEmpleadoInicial (
=) *#
usuariosEmpleadoInicial+ B
;B C
this 
. 
UsuariosEmpleado !
=" #
usuariosEmpleado$ 4
;4 5
} 	
public ,
 RegistroUsuarioEmpleadoViewModel /
(/ 0
)0 1
{ 	
this 
. #
UsuariosEmpleadoInicial (
=) *
new+ .
List/ 3
<3 4$
UsuarioEmpleadoViewModel4 L
>L M
(M N
)N O
;O P
this 
. 
UsuariosEmpleado !
=" #
new$ '
List( ,
<, -$
UsuarioEmpleadoViewModel- E
>E F
(F G
)G H
;H I
} 	
} 
} ù
_D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Empleado\UsuarioEmpleadoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
public

 

class

 $
UsuarioEmpleadoViewModel

 )
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	IdUsuario 
{  !
get" %
;% &
set' *
;* +
}, -
public $
UsuarioEmpleadoViewModel '
(' (
)( )
{ 	
} 	
public $
UsuarioEmpleadoViewModel '
(' (
int( +
id, .
,. /
string0 6
nombre7 =
,= >
string? E
	idUsuarioF O
)O P
{ 	
this 
. 
Id 
= 
id 
; 
this 
. 
Nombre 
= 
nombre  
;  !
this 
. 
	IdUsuario 
= 
	idUsuario &
;& '
} 	
public 
static 
List 
< $
UsuarioEmpleadoViewModel 3
>3 4
Convert5 <
(< =
List= A
<A B
EmpleadoB J
>J K
	empleadosL U
)U V
{ 	
List 
< $
UsuarioEmpleadoViewModel )
>) *
usuariosEmpleado+ ;
=< =
new> A
ListB F
<F G$
UsuarioEmpleadoViewModelG _
>_ `
(` a
)a b
;b c
foreach!! 
(!! 
var!! 
item!! 
in!!  
	empleados!!! *
)!!* +
{"" 
usuariosEmpleado##  
.##  !
Add##! $
(##$ %
new##% ($
UsuarioEmpleadoViewModel##) A
(##A B
item##B F
.##F G
Id##G I
,##I J
item##J N
.##N O
NombreCompleto##O ]
,##] ^
item##^ b
.##b c
	IdUsuario##c l
)##l m
)##m n
;##n o
}$$ 
return%% 
usuariosEmpleado%% #
;%%# $
}&& 	
}(( 
})) √#
bD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Finanza\BandejaCobrosYPagosViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class (
BandejaCobrosYPagosViewModel -
{ 
[ 	

DataMember	 
] 
public 
long 
IdTransaccion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
ActorComercial $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
FechaDePago !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
MedioDePago !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Afavor 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
	Documento 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Total 
{ 
get !
;! "
set# &
;& '
}( )
public (
BandejaCobrosYPagosViewModel +
(+ ,
), -
{ 	
} 	
public (
BandejaCobrosYPagosViewModel +
(+ ,
MovimientoEconomico, ?
pago@ D
)D E
{ 	
this 
. 
	Documento 
= 
pago !
.! "
PagadorRecibidor" 2
(2 3
)3 4
.4 5(
CodigoTipoDocumentoIdentidad5 Q
(Q R
)R S
+T U
$strV Y
+Z [
pago\ `
.` a
PagadorRecibidora q
(q r
)r s
.s t
DocumentoIdentidad	t Ü
;
Ü á
this   
.   
ActorComercial   
=    !
pago  " &
.  & '
PagadorRecibidor  ' 7
(  7 8
)  8 9
.  9 :
RazonSocial  : E
;  E F
this!! 
.!! 
Total!! 
=!! 
pago!! 
.!! 
Total!! #
.!!# $
ToString!!$ ,
(!!, -
$str!!- 1
)!!1 2
;!!2 3
this"" 
."" 
FechaDePago"" 
="" 
pago"" #
.""# $
FechaEmision""$ 0
.""0 1
ToString""1 9
(""9 :
$str"": F
)""F G
;""G H
this$$ 
.$$ 
MedioDePago$$ 
=$$ 
pago$$ #
.$$# $
TrazaDePago$$$ /
($$/ 0
)$$0 1
!=$$2 4
null$$5 9
?$$: ;
pago$$< @
.$$@ A
TrazaDePago$$A L
($$L M
)$$M N
.$$N O
MedioDePago$$O Z
($$Z [
)$$[ \
.$$\ ]
nombre$$] c
:$$d e
$str$$f p
;$$p q
}%% 	
public'' 
static'' 
List'' 
<'' (
BandejaCobrosYPagosViewModel'' 7
>''7 8
Convert_''9 A
(''A B
List''B F
<''F G
MovimientoEconomico''G Z
>''Z [
lista''\ a
)''a b
{(( 	
List)) 
<)) (
BandejaCobrosYPagosViewModel)) -
>))- .
	respuesta))/ 8
=))9 :
new)); >
List))? C
<))C D(
BandejaCobrosYPagosViewModel))D `
>))` a
())a b
)))b c
;))c d
foreach** 
(** 
var** 
cuenta** 
in**  "
lista**# (
)**( )
{++ 
	respuesta,, 
.,, 
Add,, 
(,, 
new,, !(
BandejaCobrosYPagosViewModel,," >
(,,> ?
cuenta,,? E
),,E F
),,F G
;,,G H
}-- 
return.. 
	respuesta.. 
;.. 
}// 	
}11 
}22 ∫3
dD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Finanza\DetalleCuotaOperacionViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
public

 

class

 *
DetalleCuotaOperacionViewModel

 /
{ 
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Emision 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Vencimiento !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Capital 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Interes 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Total 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string #
CadenaHtmlDeComprobante -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
OperacionViewModel !
	Operacion" +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public *
DetalleCuotaOperacionViewModel -
(- .
). /
{/ 0
}0 1
public *
DetalleCuotaOperacionViewModel -
(- . 
CuentaPorCobrarPagar. B
cuentaC I
,I J
stringK Q

cadenaHtmlR \
)\ ]
{ 	
this 
. 
Codigo 
= 
cuenta  
.  !
Codigo! '
;' (
this 
. 
Emision 
= 
cuenta !
.! "
FechaDeEmision" 0
.0 1
ToString1 9
(9 :
$str: F
)F G
;G H
this 
. 
Vencimiento 
= 
cuenta %
.% &
FechaDeVencimiento& 8
.8 9
ToString9 A
(A B
$strB N
)N O
;O P
this 
. 
Capital 
= 
cuenta !
.! "
Capital" )
() *
)* +
;+ ,
this 
. 
Interes 
= 
cuenta !
.! "
Interes" )
() *
)* +
;+ ,
this 
. 
Total 
= 
cuenta 
.  
Total  %
(% &
)& '
;' (
this22 
.22 #
CadenaHtmlDeComprobante22 (
=22) *

cadenaHtml22+ 5
;225 6
}33 	
}44 
public55 

class55 
OperacionViewModel55 #
{66 
public77 
long77 
Id77 
{77 
get77 
;77 
set77 !
;77! "
}77# $
public88 
long88 
IdOperacion88 
{88  !
get88" %
;88% &
set88' *
;88* +
}88, -
public99 
string99 
Fecha99 
{99 
get99 !
;99! "
set99# &
;99& '
}99( )
public:: 
string:: 
NombreDocumento:: %
{::& '
get::( +
;::+ ,
set::- 0
;::0 1
}::2 3
public;; 
string;;  
SerieNumeroDocumento;; *
{;;+ ,
get;;- 0
;;;0 1
set;;2 5
;;;5 6
};;7 8
public<< 
string<< !
EtiquetaNombreTercero<< +
{<<, -
get<<. 1
;<<1 2
set<<3 6
;<<6 7
}<<8 9
public== 
int== 
IdProveedor== 
{==  
get==! $
;==$ %
set==& )
;==) *
}==+ ,
public>> 
string>> 
	Proveedor>> 
{>>  !
get>>" %
;>>% &
set>>' *
;>>* +
}>>, -
public?? 
string?? &
EtiquetaDocumentoIdentidad?? 0
{??1 2
get??3 6
;??6 7
set??8 ;
;??; <
}??= >
public@@ 
string@@ '
DocumentoIdentidadProveedor@@ 1
{@@2 3
get@@4 7
;@@7 8
set@@9 <
;@@< =
}@@> ?
publicAA 
stringAA 
DireccionProveedorAA (
{AA) *
getAA+ .
;AA. /
setAA0 3
;AA3 4
}AA5 6
publicBB 
stringBB 
TelefonoProveedorBB '
{BB( )
getBB* -
;BB- .
setBB/ 2
;BB2 3
}BB4 5
publicCC 
stringCC 
EmpleadoCC 
{CC  
getCC! $
;CC$ %
setCC& )
;CC) *
}CC+ ,
publicDD 
stringDD 
SubTotalDD 
{DD  
getDD! $
;DD$ %
setDD& )
;DD) *
}DD+ ,
publicEE 
stringEE 
IgvEE 
{EE 
getEE 
;EE  
setEE! $
;EE$ %
}EE& '
publicFF 
stringFF 
TotalFF 
{FF 
getFF !
;FF! "
setFF# &
;FF& '
}FF( )
publicGG 
stringGG 
EstadoGG 
{GG 
getGG "
;GG" #
setGG$ '
;GG' (
}GG) *
publicHH 
stringHH 
FleteHH 
{HH 
getHH !
;HH! "
setHH# &
;HH& '
}HH( )
publicII 
ListII 
<II ,
 DetalleOrdenDeOperacionViewModelII 4
>II4 5
DetallesII6 >
{II? @
getIIA D
;IID E
setIIF I
;III J
}IIK L
publicKK 
OperacionViewModelKK !
(KK! "
)KK" #
{KK$ %
}KK& '
}LL 
}MM ö
lD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Finanza\BandejaIngresosYEgresosVariosViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public 

class 2
&BandejaIngresosYEgresosVariosViewModel 7
{		 
}

 
} ›
SD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Finanza\NotaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[		 
Serializable		 
]		 
[

 
DataContract

 
]

 
public 

class 
NotaViewModel 
{ 
[ 	

DataMember	 
] 
public 
long 
IdCuota 
; 
public 
decimal 
Saldo 
; 
public 
decimal 
	MontoPago  
;  !
public 
NotaViewModel 
( 
) 
{  
}  !
}"" 
}## ƒ
fD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Finanza\RegistroCobroYPagoCuotaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public		 

class		 ,
 RegistroCobroYPagoCuotaViewModel		 1
{

 
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
DateTime 
FechaDePago #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
IdTipoTransaccion $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
int 
IdActorComercial #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
decimal 
Total 
{ 
get "
;" #
set$ '
;' (
}) *
public 
IEnumerable 
< #
CuotaSaldoPagoViewModel 2
>2 3
CuotaSaldoPago4 B
{C D
getE H
;H I
setJ M
;M N
}O P
public  
TrazaDePagoViewModel #
	trazaPago$ -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public ,
 RegistroCobroYPagoCuotaViewModel /
(/ 0
)0 1
{ 	
} 	
} 
public 

class #
CuotaSaldoPagoViewModel (
{ 
public 
int 
IdCuota 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
CodigoCuota !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Saldo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
decimal 
	MontoPago  
{! "
get# &
;& '
set( +
;+ ,
}- .
public #
CuotaSaldoPagoViewModel &
(& '
)' (
{   	
}!! 	
}"" 
}## ¯	
kD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Finanza\RegistroIngresoYEgresoVariosViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public		 

class		 1
%RegistroIngresoYEgresoVariosViewModel		 6
{

 
public (
ComboActorComercialViewModel +
Emisor, 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public (
ComboActorComercialViewModel +
PagadorBeneficiario, ?
{@ A
getB E
;E F
setG J
;J K
}L M
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ˜.
YD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Gasto\BandejaGastoViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class !
BandejaGastoViewModel &
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdGasto 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
TipoDocumento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
	TipoGasto 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Numero 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	Proveedor 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Ruc 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Total 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
EstaConfirmado "
{# $
get% (
;( )
set* -
;- .
}/ 0
public !
BandejaGastoViewModel $
($ %
OrdenDeGasto% 1
orden2 7
)7 8
{ 	
this 
. 
Id 
= 
orden 
. 
Id 
; 
this 
. 
IdGasto 
= 
orden  
.  !
IdGasto! (
;( )
this   
.   
Fecha   
=   
orden   
.   

FechaOrden   )
(  ) *
)  * +
.  + ,
ToString  , 4
(  4 5
$str  5 A
)  A B
;  B C
this!! 
.!! 
TipoDocumento!! 
=!!  
orden!!! &
.!!& '
Comprobante!!' 2
(!!2 3
)!!3 4
.!!4 5

NombreTipo!!5 ?
;!!? @
this"" 
."" 
	TipoGasto"" 
="" 
orden"" "
.""" #
Transaccion""# .
("". /
)""/ 0
.""0 1
Tipo_transaccion""1 A
.""A B
nombre""B H
;""H I
this## 
.## 
Numero## 
=## 
orden## 
.##  
Comprobante##  +
(##+ ,
)##, -
.##- .
NumeroDeSerie##. ;
+##< =
$str##> C
+##D E
orden##F K
.##K L
Comprobante##L W
(##W X
)##X Y
.##Y Z
NumeroDeComprobante##Z m
;##m n
this$$ 
.$$ 
	Proveedor$$ 
=$$ 
orden$$ "
.$$" #
	proveedor$$# ,
($$, -
)$$- .
.$$. /
RazonSocial$$/ :
;$$: ;
this%% 
.%% 
Ruc%% 
=%% 
orden%% 
.%% 
	proveedor%% &
(%%& '
)%%' (
.%%( )
DocumentoIdentidad%%) ;
;%%; <
this&& 
.&& 
Total&& 
=&& 
orden&& 
.&& 
Total&& $
.&&$ %
ToString&&% -
(&&- .
$str&&. 2
)&&2 3
;&&3 4
this'' 
.'' 
Estado'' 
='' 
orden'' 
.''  
EstadoActual''  ,
('', -
)''- .
.''. /
nombre''/ 5
;''5 6
this(( 
.(( 
EstaConfirmado(( 
=((  !
orden((" '
.((' (
EstadoActual((( 4
(((4 5
)((5 6
.((6 7
id((7 9
==((: <
MaestroSettings((> M
.((M N
Default((N U
.((U V,
 IdDetalleMaestroEstadoConfirmado((V v
;((v w
})) 	
public++ 
static++ 
List++ 
<++ !
BandejaGastoViewModel++ 0
>++0 1
Convert++2 9
(++9 :
List++: >
<++> ?
OrdenDeGasto++? K
>++K L
ordenesDeGasto++M [
)++[ \
{,, 	
List-- 
<-- !
BandejaGastoViewModel-- &
>--& '
ordenes--( /
=--0 1
new--2 5
List--6 :
<--: ;!
BandejaGastoViewModel--; P
>--P Q
(--Q R
)--R S
;--S T
foreach.. 
(.. 
var.. 
ordenDeCompra.. &
in..' )
ordenesDeGasto..* 8
)..8 9
{// 
ordenes00 
.00 
Add00 
(00 
new00 !
BandejaGastoViewModel00  5
(005 6
ordenDeCompra006 C
)00C D
)00D E
;00E F
}11 
return22 
ordenes22 
;22 
}33 	
}44 
}55 ÅU
]D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Gasto\GastoConDetallesViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class %
GastoConDetallesViewModel *
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdGasto 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
NombreDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string  
SerieNumeroDocumento *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
int 
IdProveedor 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	Proveedor 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string '
DocumentoIdentidadProveedor 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
string 
DireccionProveedor (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
TelefonoProveedor '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
Empleado 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
SubTotal 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Igv 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Total 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public   
string   
Observacion   !
{  " #
get  $ '
;  ' (
set  ) ,
;  , -
}  . /
public!! 
string!! 
Flete!! 
{!! 
get!! !
;!!! "
set!!# &
;!!& '
}!!( )
public"" 
List"" 
<"" ,
 DetalleOrdenDeOperacionViewModel"" 4
>""4 5
Detalles""6 >
{""? @
get""A D
;""D E
set""F I
;""I J
}""K L
public%% %
GastoConDetallesViewModel%% (
(%%( )
OrdenDeGasto%%) 5
orden%%6 ;
)%%; <
{&& 	
this'' 
.'' 
Id'' 
='' 
orden'' 
.'' 
Id'' 
;'' 
this(( 
.(( 
IdGasto(( 
=(( 
orden((  
.((  !
IdGasto((! (
;((( )
this)) 
.)) 
Fecha)) 
=)) 
orden)) 
.)) 

FechaOrden)) )
())) *
)))* +
.))+ ,
ToString)), 4
())4 5
$str))5 A
)))A B
;))B C
this++ 
.++ 
NombreDocumento++  
=++! "
orden++# (
.++( )
Comprobante++) 4
(++4 5
)++5 6
.++6 7
Tipo++7 ;
(++; <
)++< =
.++= >
Nombre++> D
;++D E
this,, 
.,,  
SerieNumeroDocumento,, %
=,,& '
orden,,( -
.,,- .
Comprobante,,. 9
(,,9 :
),,: ;
.,,; <
NumeroDeComprobante,,< O
>,,P Q
$num,,Q R
?,,S T
orden,,U Z
.,,Z [
Comprobante,,[ f
(,,f g
),,g h
.,,h i
NumeroDeSerie,,i v
+,,w x
$str,,y |
+,,} ~
orden	,, Ñ
.
,,Ñ Ö
Comprobante
,,Ö ê
(
,,ê ë
)
,,ë í
.
,,í ì!
NumeroDeComprobante
,,ì ¶
:
,,ß ®
orden
,,© Æ
.
,,Æ Ø
Comprobante
,,Ø ∫
(
,,∫ ª
)
,,ª º
.
,,º Ω
NombreCortoTipo
,,Ω Ã
;
,,Ã Õ
this-- 
.-- 
IdProveedor-- 
=-- 
orden-- $
.--$ %
	proveedor--% .
(--. /
)--/ 0
.--0 1
Id--1 3
;--3 4
this.. 
... 
	Proveedor.. 
=.. 
orden.. "
..." #
	proveedor..# ,
(.., -
)..- .
.... /
RazonSocial../ :
;..: ;
this// 
.// '
DocumentoIdentidadProveedor// ,
=//- .
orden/// 4
.//4 5
	proveedor//5 >
(//> ?
)//? @
.//@ A
DocumentoIdentidad//A S
;//S T
this00 
.00 
DireccionProveedor00 #
=00$ %
(00& '
orden00' ,
.00, -
	proveedor00- 6
(006 7
)007 8
.008 9
DomicilioFiscal009 H
(00H I
)00I J
!=00K M
null00N R
)00R S
?00T U
(00V W
orden00W \
.00\ ]
	proveedor00] f
(00f g
)00g h
.00h i
DomicilioFiscal00i x
(00x y
)00y z
.00z {
detalle	00{ Ç
+
00É Ñ
$str
00Ö ä
+
00ã å
orden
00ç í
.
00í ì
	proveedor
00ì ú
(
00ú ù
)
00ù û
.
00û ü
DomicilioFiscal
00ü Æ
(
00Æ Ø
)
00Ø ∞
.
00∞ ±
Ubigeo
00± ∑
.
00∑ ∏
descripcion_larga
00∏ …
)
00…  
.
00  À
ToUpper
00À “
(
00“ ”
)
00” ‘
:
00’ ÷
$str
00◊ Ÿ
;
00Ÿ ⁄
this11 
.11 
TelefonoProveedor11 "
=11# $
(11% &
orden11& +
.11+ ,
	proveedor11, 5
(115 6
)116 7
.117 8
Telefono118 @
(11@ A
)11A B
!=11C E
null11F J
)11J K
?11L M
orden11N S
.11S T
	proveedor11T ]
(11] ^
)11^ _
.11_ `
Telefono11` h
(11h i
)11i j
:11k l
$str11m o
;11o p
this22 
.22 
Empleado22 
=22 
orden22 !
.22! "
empleado22" *
(22* +
)22+ ,
.22, -
Nombres22- 4
;224 5
this33 
.33 
Igv33 
=33 
orden33 
.33 
Igv33  
(33  !
)33! "
.33" #
ToString33# +
(33+ ,
$str33, 0
)330 1
;331 2
this44 
.44 
Total44 
=44 
orden44 
.44 
Total44 $
.44$ %
ToString44% -
(44- .
$str44. 2
)442 3
;443 4
this55 
.55 
SubTotal55 
=55 
(55 
System55 #
.55# $
Convert55$ +
.55+ ,
	ToDecimal55, 5
(555 6
Total556 ;
)55; <
-55= >
System55? E
.55E F
Convert55F M
.55M N
	ToDecimal55N W
(55W X
Igv55X [
)55[ \
)55\ ]
.55] ^
ToString55^ f
(55f g
$str55g k
)55k l
;55l m
this66 
.66 
Estado66 
=66 
orden66 
.66  
EstadoActual66  ,
(66, -
)66- .
.66. /
nombre66/ 5
;665 6
this77 
.77 
Observacion77 
=77 
orden77 $
.77$ %

Comentario77% /
;77/ 0
this88 
.88 
Flete88 
=88 
orden88 
.88 
Flete88 $
.88$ %
ToString88% -
(88- .
$str88. 2
)882 3
;883 4
this99 
.99 
Detalles99 
=99 ,
 DetalleOrdenDeOperacionViewModel99 <
.99< =
Convert99= D
(99D E
orden99E J
.99J K
Detalles99K S
(99S T
)99T U
.99U V
Where99V [
(99[ \
d99\ ]
=>99^ `
d99a b
.99b c
DetalleTransaccion99c u
(99u v
)99v w
.99w x 
id_concepto_negocio	99x ã
!=
99å é
ConceptoSettings
99è ü
.
99ü †
Default
99† ß
.
99ß ®$
IdConceptoNegocioFlete
99® æ
)
99æ ø
.
99ø ¿
ToList
99¿ ∆
(
99∆ «
)
99« »
)
99» …
;
99…  
};; 	
public== 
static== 
List== 
<== %
GastoConDetallesViewModel== 4
>==4 5
Convert==6 =
(=== >
List==> B
<==B C
OrdenDeGasto==C O
>==O P
ordenDeGastos==Q ^
)==^ _
{>> 	
List?? 
<?? %
GastoConDetallesViewModel?? *
>??* +
ordenes??, 3
=??4 5
new??6 9
List??: >
<??> ?%
GastoConDetallesViewModel??? X
>??X Y
(??Y Z
)??Z [
;??[ \
foreach@@ 
(@@ 
var@@ 
ordenDeGasto@@ %
in@@& (
ordenDeGastos@@) 6
)@@6 7
{AA 
ordenesBB 
.BB 
AddBB 
(BB 
newBB %
GastoConDetallesViewModelBB  9
(BB9 :
ordenDeGastoBB: F
)BBF G
)BBG H
;BBH I
}CC 
returnDD 
ordenesDD 
;DD 
}EE 	
}GG 
}HH ˝0
ZD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Gasto\RegistroGastoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public		 

class		 "
RegistroGastoViewModel		 '
{

 
public (
ComboActorComercialViewModel +
	Proveedor, 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
int 
	TipoGasto 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 

TipoCompra 
{ 
get  #
;# $
set% (
;( )
}* +
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
DateTime 
FechaRegistro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
IEnumerable 
< )
RegistroDetalleGastoViewModel 8
>8 9
Detalles: B
{C D
getE H
;H I
setJ M
;M N
}O P
public 
bool 
EsCompraACredito $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
bool 
EsCreditoRapido #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
IEnumerable 
< 2
&RegistroDetalleFinanciamientoViewModel A
>A B
CuotasC I
{J K
getL O
;O P
setQ T
;T U
}V W
public 
decimal 
Inicial 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Flete 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool "
PagarInicialAlConfimar *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public "
RegistroGastoViewModel %
(% &
)& '
{ 	
} 	
} 
public 

class )
RegistroDetalleGastoViewModel .
{   
public!! 5
)RegsitroProductoParaFacturacionViewModels!! 8
Producto!!9 A
{!!B C
get!!D G
;!!G H
set!!I L
;!!L M
}!!N O
public"" 
decimal"" 
PrecioUnitario"" %
{""& '
get""( +
;""+ ,
set""- 0
;""0 1
}""2 3
public## 
decimal## 
Cantidad## 
{##  !
get##" %
;##% &
set##' *
;##* +
}##, -
public$$ 
decimal$$ 
Importe$$ 
{$$  
get$$! $
;$$$ %
set$$& )
;$$) *
}$$+ ,
public%% 
string%% 
VersionFila%% !
{%%" #
get%%$ '
;%%' (
set%%) ,
;%%, -
}%%. /
public&& 
decimal&& 
Igv&& 
{&& 
get&&  
;&&  !
set&&" %
;&&% &
}&&' (
public'' 
decimal'' 
	Descuento''  
{''! "
get''# &
;''& '
set''( +
;''+ ,
}''- .
public++ 
string++ 
Observacion++ !
{++" #
get++$ '
;++' (
set++) ,
;++, -
}++. /
public-- )
RegistroDetalleGastoViewModel-- ,
(--, -
)--- .
{.. 	
}00 	
}11 
public33 

class33 #
RegistroGastoViewModel_33 (
{44 
public55 (
ComboActorComercialViewModel55 +
	Proveedor55, 5
{556 7
get558 ;
;55; <
set55= @
;55@ A
}55B C
public66 %
SelectorTipoDeComprobante66 (
TipoDeComprobante66) :
{66; <
get66= @
;66@ A
set66B E
;66E F
}66G H
public77 
IEnumerable77 
<77 2
&RegistroDetalleFinanciamientoViewModel77 A
>77A B
Cuotas77C I
{77J K
get77L O
;77O P
set77Q T
;77T U
}77V W
public88 
DateTime88 
FechaEmision88 $
{88% &
get88' *
;88* +
set88, /
;88/ 0
}881 2
public99 
ComboGenerico99 
Concepto99 %
{99& '
get99( +
;99+ ,
set99- 0
;990 1
}992 3
public:: 
string:: 
Detalle:: 
{:: 
get::  #
;::# $
set::% (
;::( )
}::* +
public;; 
decimal;; 
Igv;; 
{;; 
get;;  
;;;  !
set;;" %
;;;% &
};;' (
public<< 
decimal<< 
Total<< 
{<< 
get<< "
;<<" #
set<<$ '
;<<' (
}<<) *
public== 
bool== 
EsGastoACredito== #
{==$ %
get==& )
;==) *
set==+ .
;==. /
}==0 1
public>> 
bool>> 
EsCreditoRapido>> #
{>>$ %
get>>& )
;>>) *
set>>+ .
;>>. /
}>>0 1
public?? 
string?? 
Observacion?? !
{??" #
get??$ '
;??' (
set??) ,
;??, -
}??. /
}AA 
}BB ›
gD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\NotaCreditoDebito\RegistroDeNotaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
public

 

class

 #
RegistroDeNotaViewModel

 (
{ 
public 
long 
IdOrdenDeOperacion &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
ItemGenerico 
TipoNota $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public %
SelectorTipoDeComprobante (
Comprobante) 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
	MontoNota  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 
Igv 
{ 
get  
;  !
set" %
;% &
}' (
public 
decimal 
Isc 
{ 
get  
;  !
set" %
;% &
}' (
public 
IEnumerable 
< *
RegistroDetalleDeNotaViewModel 9
>9 :
Detalles; C
{D E
getF I
;I J
setK N
;N O
}P Q
public 
bool 
EsDebito 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 

EsDiferida 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
	DatosPago 
Pago 
{ 
get  #
;# $
set% (
;( )
}* +
} 
public 

class *
RegistroDetalleDeNotaViewModel /
{ 
public 
int 

IdConcepto 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Concepto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Cantidad 
{  !
get" %
;% &
set' *
;* +
}, -
public   
decimal   
Precio   
{   
get    #
;  # $
set  % (
;  ( )
}  * +
public!! 
decimal!! 
Importe!! 
{!!  
get!!! $
;!!$ %
set!!& )
;!!) *
}!!+ ,
public"" 
decimal"" 
Igv"" 
{"" 
get""  
;""  !
set""" %
;""% &
}""' (
public## 
decimal## 
	Descuento##  
{##! "
get### &
;##& '
set##( +
;##+ ,
}##- .
public$$ 
string$$ 
Observacion$$ !
{$$" #
get$$$ '
;$$' (
set$$) ,
;$$, -
}$$. /
public%% 
decimal%% 
MontoDetalle%% #
{%%$ %
get%%& )
;%%) *
set%%+ .
;%%. /
}%%0 1
public&& 
decimal&& 
MontoRevocado&& $
{&&% &
get&&' *
;&&* +
set&&, /
;&&/ 0
}&&1 2
public'' 
decimal'' 
MontoDevuelto'' $
{''% &
get''' *
;''* +
set'', /
;''/ 0
}''1 2
}(( 
})) æE
WD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\OrdenVentaCompraViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class %
OrdenVentaCompraViewModel *
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
Cliente 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
DocumentoCliente &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
TipoComprobante %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
SerieComprobante &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
NumeroComprobante '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
List 
< ,
 DetalleOrdenDeOperacionViewModel 4
>4 5
Detalles6 >
{? @
getA D
;D E
setF I
;I J
}K L
public 
decimal 
? 
SubTotal  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 
? 
IGV 
{ 
get !
;! "
set# &
;& '
}( )
public 
decimal 
? 
Total 
{ 
get  #
;# $
set% (
;( )
}* +
public 
DateTime 
Fecha 
{ 
get  #
;# $
set% (
;( )
}* +
public %
OrdenVentaCompraViewModel (
(( )
)) *
{   	
}"" 	
public$$ %
OrdenVentaCompraViewModel$$ (
($$( )
OrdenDeVenta$$) 5
ov$$6 8
)$$8 9
{%% 	
this&& 
.&& 
Id&& 
=&& 
ov&& 
.&& 
Id&& 
;&& 
this'' 
.'' 
Fecha'' 
='' 
ov'' 
.'' 
FechaEmision'' (
;''( )
this(( 
.(( 
Cliente(( 
=(( 
ov(( 
.(( 
Cliente(( %
(((% &
)((& '
.((' (
RazonSocial((( 3
;((3 4
this)) 
.)) 
DocumentoCliente)) !
=))! "
ov))# %
.))% &
Cliente))& -
())- .
))). /
.))/ 0(
CodigoTipoDocumentoIdentidad))0 L
())L M
)))M N
+))N O
$str))P S
+))S T
ov))U W
.))W X
Cliente))X _
())_ `
)))` a
.))a b
DocumentoIdentidad))b t
;))t u
this** 
.** 
TipoComprobante**  
=**! "
ov**# %
.**% &
Comprobante**& 1
(**1 2
)**2 3
.**3 4

CodigoTipo**4 >
;**> ?
this++ 
.++ 
SerieComprobante++ !
=++" #
ov++$ &
.++& '
Comprobante++' 2
(++2 3
)++3 4
.++4 5
NumeroDeSerie++5 B
;++B C
this,, 
.,, 
NumeroComprobante,, "
=,,# $
ov,,% '
.,,' (
Comprobante,,( 3
(,,3 4
),,4 5
.,,5 6
NumeroDeComprobante,,6 I
.,,I J
ToString,,J R
(,,R S
),,S T
.,,T U
PadLeft,,U \
(,,\ ]
$num,,] ^
,,,^ _
$char,,` c
),,c d
;,,d e
this-- 
.-- 
Detalles-- 
=-- ,
 DetalleOrdenDeOperacionViewModel-- <
.--< =
Convert--= D
(--D E
ov--E G
.--G H
Detalles--H P
(--P Q
)--Q R
)--R S
;--S T
this.. 
... 
SubTotal.. 
=.. 
ov.. 
... 
ValorDeVenta.. +
;..+ ,
this// 
.// 
IGV// 
=// 
ov// 
.// 
Igv// 
(// 
)// 
;//  
this00 
.00 
Total00 
=00 
ov00 
.00 
Total00 !
;00! "
}11 	
public22 %
OrdenVentaCompraViewModel22 (
(22( )
OrdenDeCompra22) 6
oc227 9
)229 :
{33 	
this44 
.44 
Id44 
=44 
oc44 
.44 
Id44 
;44 
this55 
.55 
TipoComprobante55  
=55! "
oc55# %
.55% &
Comprobante55& 1
(551 2
)552 3
.553 4

CodigoTipo554 >
;55> ?
this66 
.66 
Detalles66 
=66 ,
 DetalleOrdenDeOperacionViewModel66 <
.66< =
Convert66= D
(66D E
oc66E G
.66G H
Detalles66H P
(66P Q
)66Q R
)66R S
;66S T
this77 
.77 
NumeroComprobante77 "
=77# $
oc77% '
.77' (
Comprobante77( 3
(773 4
)774 5
.775 6
NumeroDeSerie776 C
+77D E
$str77F I
+77J K
oc77L N
.77N O
Comprobante77O Z
(77Z [
)77[ \
.77\ ]
NumeroDeComprobante77] p
.77p q
ToString77q y
(77y z
)77z {
.77{ |
PadLeft	77| É
(
77É Ñ
$num
77Ñ Ö
,
77Ö Ü
$char
77á ä
)
77ä ã
;
77ã å
this88 
.88 
SubTotal88 
=88 
oc88 
.88 
ValorDeVenta88 +
;88+ ,
this99 
.99 
IGV99 
=99 
oc99 
.99 
Igv99 
(99 
)99 
;99  
this:: 
.:: 
Total:: 
=:: 
oc:: 
.:: 
Total:: !
;::! "
};; 	
public<< 
static<< 
List<< 
<<< %
OrdenVentaCompraViewModel<< 4
><<4 5
convert<<6 =
(<<= >
List<<> B
<<<B C
OrdenDeCompra<<C P
><<P Q

documentos<<R \
)<<\ ]
{== 	
var>> 
documentosDeCompra>> "
=>># $
new>>% (
List>>) -
<>>- .%
OrdenVentaCompraViewModel>>. G
>>>G H
(>>H I
)>>I J
;>>J K
foreach@@ 
(@@ 
var@@ 
	documento@@ "
in@@# %

documentos@@& 0
)@@0 1
{AA 
documentosDeCompraBB "
.BB" #
AddBB# &
(BB& '
newBB' *%
OrdenVentaCompraViewModelBB+ D
(BBD E
	documentoBBE N
)BBN O
)BBO P
;BBP Q
}CC 
returnDD 
documentosDeCompraDD %
;DD% &
}EE 	
publicFF 
staticFF 
ListFF 
<FF %
OrdenVentaCompraViewModelFF 4
>FF4 5
convertFF6 =
(FF= >
ListFF> B
<FFB C
OrdenDeVentaFFC O
>FFO P

documentosFFQ [
)FF[ \
{GG 	
varHH 
documentosDeVentaHH !
=HH" #
newHH$ '
ListHH( ,
<HH, -%
OrdenVentaCompraViewModelHH- F
>HHF G
(HHG H
)HHH I
;HHI J
foreachJJ 
(JJ 
varJJ 
	documentoJJ "
inJJ# %

documentosJJ& 0
)JJ0 1
{KK 
documentosDeVentaLL !
.LL! "
AddLL" %
(LL% &
newLL& )%
OrdenVentaCompraViewModelLL* C
(LLC D
	documentoLLD M
)LLM N
)LLN O
;LLO P
}MM 
returnNN 
documentosDeVentaNN $
;NN$ %
}OO 	
}PP 
}QQ ±
_D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Concepto\BandejaConceptoViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class $
BandejaConceptoViewModel )
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Valor 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 

Categorias  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
	EsVigente 
{ 
get  #
;# $
set% (
;( )
}* +
public $
BandejaConceptoViewModel '
(' (
Detalle_maestro( 7
detalle8 ?
)? @
{ 	
this 
. 
Id 
= 
detalle 
. 
id  
;  !
this 
. 
Nombre 
= 
detalle !
.! "
nombre" (
;( )
this 
. 
Valor 
= 
detalle  
.  !
valor! &
;& '
this 
. 

Categorias 
= 
detalle %
.% &
Categoria_concepto& 8
.8 9
Count9 >
<=? A
$numB C
?D E
$strF H
:I J
detalleK R
.R S
Categoria_conceptoS e
.e f
Selectf l
(l m
ccm o
=>p r
ccs u
.u v
Detalle_maestro1	v Ü
.
Ü á
nombre
á ç
)
ç é
.
é è
	Aggregate
è ò
(
ò ô
(
ô ö
cc
ö ú
,
ú ù
ccNext
û §
)
§ •
=>
¶ ®
cc
© ´
+
¨ ≠
$str
Æ ≥
+
¥ µ
ccNext
∂ º
)
º Ω
;
Ω æ
this 
. 
	EsVigente 
= 
detalle $
.$ %

es_vigente% /
;/ 0
} 	
public   
static   
List   
<   $
BandejaConceptoViewModel   3
>  3 4
Convert  5 <
(  < =
List  = A
<  A B
Detalle_maestro  B Q
>  Q R
detalle  S Z
)  Z [
{!! 	
List"" 
<"" $
BandejaConceptoViewModel"" )
>"") *
ordenes""+ 2
=""3 4
new""5 8
List""9 =
<""= >$
BandejaConceptoViewModel""> V
>""V W
(""W X
)""X Y
;""Y Z
foreach## 
(## 
var## 
ordenDeVenta## %
in##& (
detalle##) 0
)##0 1
{$$ 
ordenes%% 
.%% 
Add%% 
(%% 
new%% $
BandejaConceptoViewModel%%  8
(%%8 9
ordenDeVenta%%9 E
)%%E F
)%%F G
;%%G H
}&& 
return'' 
ordenes'' 
;'' 
}(( 	
})) 
}** È
gD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\FacturacionElectronica\DocumentoViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
.

, -"
FacturacionElectronica

- C
{ 
public 

class 
DocumentoViewModel #
{ 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdOperacion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
FechaEmision "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
CodigoTipoDocumento )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
string 
TipoDocumento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
NumeroDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
SerieDocumento $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
EstadoSigescom $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
long 
IdBinarioDocumento &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DocumentoViewModel !
(! "
	Documento" +
	documento, 5
)5 6
{ 	
Id 
= 
	documento 
. 
id 
; 
IdOperacion 
= 
	documento #
.# $

idSigescom$ .
;. /
FechaEmision 
= 
	documento $
.$ %
fechaEmision% 1
.1 2
ToString2 :
(: ;
$str; G
)G H
;H I
;J K
CodigoTipoDocumento 
=  !
	documento" +
.+ ,!
codigoTipoComprobante, A
;A B
TipoDocumento 
= 
	documento %
.% &
tipoComprobante& 5
;5 6
NumeroDocumento   
=   
	documento   '
.  ' (
numeroComprobante  ( 9
;  9 :
SerieDocumento!! 
=!! 
	documento!! &
.!!& '
serieComprobante!!' 7
;!!7 8
Estado"" 
="" 
	documento"" 
."" 
EnvioDocumento"" -
.""- .
Any"". 1
(""1 2
)""2 3
?""4 5
$str""6 ?
:""@ A
$str""B N
;""N O
EstadoSigescom## 
=## 
	Enumerado## &
.##& '
GetDescription##' 5
(##5 6
(##6 7.
"EstadoSigescomDocumentoElectronico##7 Y
)##Y Z
	documento##Z c
.##c d
estadoSigescom##d r
)##r s
;##s t
IdBinarioDocumento$$ 
=$$  
	documento$$! *
.$$* +
idBinarioDocumento$$+ =
;$$= >
}%% 	
}00 
}11 ÔS
cD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\FacturacionElectronica\EnvioViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
.		, -"
FacturacionElectronica		- C
{

 
public 

class 
EnvioViewModel 
{ 
public 
long 
Id 
; 
public 
string 

FechaEnvio  
;  !
public 
string 
FechaEmision "
;" #
public 
string 
IdentificadorEnvio (
;( )
public 
string 
	TipoEnvio 
;  
public 
string 
	ModoEnvio 
;  
public 
string 
DocumentosEnviados (
;( )
public 
string 
Estado 
; 
public 
long 
IdBinarioEnvio "
;" #
public 
long 
IdBinarioRespuesta &
;& '
public 
string 
CodigoRespuesta %
;% &
public 
string 
Observacion !
;! "
public 
string 
NumeroTicket "
;" #
public 
bool 
EsPendiente 
;  
public 
bool 
EsRechazado 
;  
public 
bool 
EsObservado 
;  
public 
EnvioViewModel 
( 
) 
{ 	
}   	
public"" 
EnvioViewModel"" 
("" 
Envio"" #
envio""$ )
)"") *
{## 	
Id$$ 
=$$ 
envio$$ 
.$$ 
id$$ 
;$$ 

FechaEnvio%% 
=%% 
envio%% 
.%% 

fechaEnvio%% )
.%%) *
ToString%%* 2
(%%2 3
$str%%3 K
)%%K L
;%%L M
FechaEmision&& 
=&& 
envio&&  
.&&  !
EnvioDocumento&&! /
.&&/ 0
FirstOrDefault&&0 >
(&&> ?
)&&? @
.&&@ A
	Documento&&A J
.&&J K
fechaEmision&&K W
.&&W X
ToString&&X `
(&&` a
$str&&a m
)&&m n
;&&n o
IdentificadorEnvio'' 
=''  
envio''! &
.''& '
identificadorEnvio''' 9
;''9 :
	TipoEnvio(( 
=(( 
envio(( 
.(( 
	tipoEnvio(( '
;((' (
	ModoEnvio)) 
=)) 
	Enumerado)) !
.))! "
GetDescription))" 0
())0 1
())1 2
	ModoEnvio))2 ;
))); <
envio))< A
.))A B
	modoEnvio))B K
)))K L
;))L M
if** 
(** 
	TipoEnvio** 
==** *
FacturacionElectronicaSettings** ;
.**; <
Default**< C
.**C D
TipoEnvioIndividual**D W
)**W X
{++ 
DocumentosEnviados,, "
=,,# $
envio,,% *
.,,* +
EnvioDocumento,,+ 9
.,,9 :
SingleOrDefault,,: I
(,,I J
),,J K
.,,K L
	Documento,,L U
.,,U V
serieComprobante,,V f
+,,g h
$str,,i l
+,,m n
envio,,o t
.,,t u
EnvioDocumento	,,u É
.
,,É Ñ
SingleOrDefault
,,Ñ ì
(
,,ì î
)
,,î ï
.
,,ï ñ
	Documento
,,ñ ü
.
,,ü †
numeroComprobante
,,† ±
;
,,± ≤
}-- 
else.. 
{// 
if00 
(00 
envio00 
.00 
	modoEnvio00 #
==00$ &
(00' (
int00( +
)00+ ,
Modelo00, 2
.002 3
	Entidades003 <
.00< =
	ModoEnvio00= F
.00F G
	Anulacion00G P
)00P Q
{11 
foreach22 
(22 
var22  
item22! %
in22& (
envio22) .
.22. /
EnvioDocumento22/ =
.22= >
Select22> D
(22D E
ed22E G
=>22H J
ed22K M
.22M N
	Documento22N W
)22W X
.22X Y
ToList22Y _
(22_ `
)22` a
)22a b
{33 
DocumentosEnviados44 *
=44+ ,
DocumentosEnviados44- ?
+44@ A
$str44B E
+44F G
item44H L
.44L M
serieComprobante44M ]
+44^ _
$str44` c
+44d e
item44f j
.44j k
numeroComprobante44k |
+44} ~
$str	44 Ñ
;
44Ñ Ö
}55 
}66 
else77 
{88 
foreach99 
(99 
var99  
item99! %
in99& (
envio99) .
.99. /
EnvioDocumento99/ =
.99= >
Select99> D
(99D E
ed99E G
=>99H J
ed99K M
.99M N
	Documento99N W
.99W X
serieComprobante99X h
)99h i
.99i j
Distinct99j r
(99r s
)99s t
.99t u
ToList99u {
(99{ |
)99| }
)99} ~
{:: 
DocumentosEnviados;; *
=;;+ ,
DocumentosEnviados;;- ?
+;;@ A
$str;;B E
+;;F G
item;;H L
+;;M N
$str;;O R
+;;S T
envio;;U Z
.;;Z [
EnvioDocumento;;[ i
.;;i j
Select;;j p
(;;p q
ed;;q s
=>;;t v
ed;;w y
.;;y z
	Documento	;;z É
)
;;É Ñ
.
;;Ñ Ö
Where
;;Ö ä
(
;;ä ã
s
;;ã å
=>
;;ç è
s
;;ê ë
.
;;ë í
serieComprobante
;;í ¢
==
;;£ •
item
;;¶ ™
)
;;™ ´
.
;;´ ¨
OrderBy
;;¨ ≥
(
;;≥ ¥
d
;;¥ µ
=>
;;∂ ∏
System
;;π ø
.
;;ø ¿
Convert
;;¿ «
.
;;« »
ToInt32
;;» œ
(
;;œ –
d
;;– —
.
;;— “
numeroComprobante
;;“ „
)
;;„ ‰
)
;;‰ Â
.
;;Â Ê
FirstOrDefault
;;Ê Ù
(
;;Ù ı
)
;;ı ˆ
.
;;ˆ ˜
numeroComprobante
;;˜ à
+
;;â ä
$str
;;ã é
+
;;è ê
envio
;;ë ñ
.
;;ñ ó
EnvioDocumento
;;ó •
.
;;• ¶
Select
;;¶ ¨
(
;;¨ ≠
ed
;;≠ Ø
=>
;;∞ ≤
ed
;;≥ µ
.
;;µ ∂
	Documento
;;∂ ø
)
;;ø ¿
.
;;¿ ¡
Where
;;¡ ∆
(
;;∆ «
s
;;« »
=>
;;… À
s
;;Ã Õ
.
;;Õ Œ
serieComprobante
;;Œ ﬁ
==
;;ﬂ ·
item
;;‚ Ê
)
;;Ê Á
.
;;Á Ë
OrderByDescending
;;Ë ˘
(
;;˘ ˙
d
;;˙ ˚
=>
;;¸ ˛
System
;;ˇ Ö
.
;;Ö Ü
Convert
;;Ü ç
.
;;ç é
ToInt32
;;é ï
(
;;ï ñ
d
;;ñ ó
.
;;ó ò
numeroComprobante
;;ò ©
)
;;© ™
)
;;™ ´
.
;;´ ¨
FirstOrDefault
;;¨ ∫
(
;;∫ ª
)
;;ª º
.
;;º Ω
numeroComprobante
;;Ω Œ
+
;;œ –
$str
;;— ÷
;
;;÷ ◊
}<< 
}== 
DocumentosEnviados>> "
=>># $
DocumentosEnviados>>% 7
.>>7 8
	Substring>>8 A
(>>A B
$num>>B C
,>>C D
DocumentosEnviados>>E W
.>>W X
Length>>X ^
->>_ `
$num>>a b
)>>b c
;>>c d
}?? 
Estado@@ 
=@@ 
	Enumerado@@ 
.@@ 
GetDescription@@ -
(@@- .
(@@. /
EstadoEnvio@@/ :
)@@: ;
envio@@; @
.@@@ A
estado@@A G
)@@G H
;@@H I
EsPendienteAA 
=AA 
envioAA 
.AA  
estadoAA  &
==AA' )
(AA* +
intAA+ .
)AA. /
EstadoEnvioAA/ :
.AA: ;
	PendienteAA; D
;AAD E
EsRechazadoBB 
=BB 
envioBB 
.BB  
estadoBB  &
==BB' )
(BB* +
intBB+ .
)BB. /
EstadoEnvioBB/ :
.BB: ;
	RechazadoBB; D
;BBD E
EsObservadoCC 
=CC 
envioCC 
.CC  
estadoCC  &
==CC' )
(CC* +
intCC+ .
)CC. /
EstadoEnvioCC/ :
.CC: ;$
AceptadoConObservacionesCC; S
;CCS T
IdBinarioEnvioDD 
=DD 
envioDD "
.DD" #
idBinarioEnvioDD# 1
;DD1 2
IdBinarioRespuestaEE 
=EE  
(EE! "
envioEE" '
.EE' (
idBinarioRespuestaEE( :
==EE; =
nullEE> B
)EEB C
?EED E
$numEEF G
:EEH I
(EEJ K
longEEK O
)EEO P
envioEEP U
.EEU V
idBinarioRespuestaEEV h
;EEh i
CodigoRespuestaFF 
=FF 
envioFF #
.FF# $
codigoRespuestaFF$ 3
;FF3 4
ObservacionGG 
=GG 
envioGG 
.GG  
observacionGG  +
;GG+ ,
NumeroTicketHH 
=HH 
envioHH  
.HH  !
numeroTicketHH! -
;HH- .
}JJ 	
publicKK 
staticKK 
ListKK 
<KK 
EnvioViewModelKK )
>KK) *
ConvertKK+ 2
(KK2 3
ListKK3 7
<KK7 8
EnvioKK8 =
>KK= >
enviosKK? E
)KKE F
{LL 	
ListMM 
<MM 
EnvioViewModelMM 
>MM  
	ResultadoMM! *
=MM+ ,
newMM- 0
ListMM1 5
<MM5 6
EnvioViewModelMM6 D
>MMD E
(MME F
)MMF G
;MMG H
foreachNN 
(NN 
varNN 
itemNN 
inNN  
enviosNN! '
)NN' (
{OO 
	ResultadoPP 
.PP 
AddPP 
(PP 
newPP !
EnvioViewModelPP" 0
(PP0 1
itemPP1 5
)PP5 6
)PP6 7
;PP7 8
}QQ 
returnRR 
	ResultadoRR 
;RR 
}SS 	
}TT 
}UU ˇ

oD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\FacturacionElectronica\RegistroDocumentoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -"
FacturacionElectronica- C
{ 
public 

class &
RegistroDocumentoViewModel +
{		 
public

 
long

 

IdSigescom

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
public 
DateTime 
FechaEmision $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
int 
TipoDocumento  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
NumeroDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
SerieDocumento $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} º
kD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\FacturacionElectronica\RegistroEnvioViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -"
FacturacionElectronica- C
{ 
public 

class "
RegistroEnvioViewModel '
{		 
}

 
} ¢	
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\ModeloBasicoViewModels.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
public

 

class

 !
ModeloBasicoViewModel

 &
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public !
ModeloBasicoViewModel $
($ %
)% &
{ 	
} 	
public !
ModeloBasicoViewModel $
($ %
int% (
id) +
,+ ,
string- 3
nombre4 :
): ;
{ 	
this 
. 
Id 
= 
id 
; 
this 
. 
Nombre 
= 
nombre  
;  !
} 	
} 
} äC
bD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Finanza\BandejaCobrarYPagarViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class (
BandejaCobrarYPagarViewModel -
{ 
[ 	

DataMember	 
] 
public 
long 
IdTransaccion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
long 
IdCuota 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
IdTipoTransaccion $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
TipoTransaccion %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string #
DocumentoActorComercial -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
int 
IdActorComercial #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
ActorComercial $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
CodigoCuota !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Saldo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
TipoComprobante %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
CodigoDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Comprobante !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Emitida 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Vence 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
CodigoUnico !
{" #
get$ '
;' (
set) ,
;, -
}. /
public   
string   
Estado   
{   
get   "
;  " #
set  $ '
;  ' (
}  ) *
public!! 
decimal!! 
Total!! 
{!! 
get!! "
;!!" #
set!!$ '
;!!' (
}!!) *
public"" 
bool"" 
AccionCobrarPagar"" %
{""& '
get""( +
;""+ ,
set""- 0
;""0 1
}""2 3
public$$ (
BandejaCobrarYPagarViewModel$$ +
($$+ ,
)$$, -
{%% 	
}&& 	
public(( (
BandejaCobrarYPagarViewModel(( +
(((+ , 
CuentaPorCobrarPagar((, @
cuenta((A G
)((G H
{)) 	
this** 
.** 
IdCuota** 
=** 
cuenta** !
.**! "
Id**" $
;**$ %
this++ 
.++ 
CodigoCuota++ 
=++ 
cuenta++ %
.++% &
Codigo++& ,
;++, -
this,, 
.,, 
IdTransaccion,, 
=,,  
cuenta,,! '
.,,' (
IdOperacionBase,,( 7
;,,7 8
this-- 
.-- 
IdTipoTransaccion-- "
=--# $
cuenta--% +
.--+ ,
OperacionBase--, 9
(--9 :
)--: ;
.--; <
TipoTransaccion--< K
(--K L
)--L M
.--M N
Id--N P
;--P Q
this.. 
... 
TipoTransaccion..  
=..! "
cuenta..# )
...) *
OperacionBase..* 7
(..7 8
)..8 9
...9 :#
TipoTransaccionSuperior..: Q
(..Q R
)..R S
...S T
Nombre..T Z
;..Z [
this// 
.// 
IdActorComercial// !
=//" #
cuenta//$ *
.//* +
ClienteProveedor//+ ;
(//; <
)//< =
.//= >
Id//> @
;//@ A
this00 
.00 
ActorComercial00 
=00  !
cuenta00" (
.00( )
ClienteProveedor00) 9
(009 :
)00: ;
.00; <
RazonSocial00< G
;00G H
this11 
.11 #
DocumentoActorComercial11 (
=11) *
cuenta11+ 1
.111 2
ClienteProveedor112 B
(11B C
)11C D
.11D E
DocumentoIdentidad11E W
;11W X
this22 
.22 
Comprobante22 
=22 
cuenta22 %
.22% &
OperacionBase22& 3
(223 4
)224 5
.225 6
Comprobante226 A
(22A B
)22B C
.22C D
NumeroDeSerie22D Q
+22R S
$str22T W
+22X Y
cuenta22Z `
.22` a
OperacionBase22a n
(22n o
)22o p
.22p q
Comprobante22q |
(22| }
)22} ~
.22~  
NumeroDeComprobante	22 í
;
22í ì
this33 
.33 
TipoComprobante33  
=33! "
cuenta33# )
.33) *
OperacionBase33* 7
(337 8
)338 9
.339 :
Comprobante33: E
(33E F
)33F G
.33G H

NombreTipo33H R
;33R S
this44 
.44 
CodigoDocumento44  
=44! "
cuenta44# )
.44) *
OperacionBase44* 7
(447 8
)448 9
.449 :
Comprobante44: E
(44E F
)44F G
.44G H
Tipo44H L
(44L M
)44M N
.44N O
Codigo44O U
;44U V
this55 
.55 
Saldo55 
=55 
cuenta55 
.55  
Saldo55  %
(55% &
)55& '
;55' (
this66 
.66 
Emitida66 
=66 
cuenta66 !
.66! "
FechaDeEmision66" 0
.660 1
ToString661 9
(669 :
$str66: F
)66F G
;66G H
this77 
.77 
Vence77 
=77 
cuenta77 
.77  
FechaDeVencimiento77  2
.772 3
ToString773 ;
(77; <
$str77< H
)77H I
;77I J
this88 
.88 
Total88 
=88 
cuenta88 
.88  
Total88  %
(88% &
)88& '
;88' (
this99 
.99 
AccionCobrarPagar99 "
=99# $
Saldo99% *
>99+ ,
$num99- .
;99. /
}:: 	
public<< 
static<< 
List<< 
<<< (
BandejaCobrarYPagarViewModel<< 7
><<7 8
Convert<<9 @
(<<@ A
List<<A E
<<<E F 
CuentaPorCobrarPagar<<F Z
><<Z [
lista<<\ a
)<<a b
{== 	
List>> 
<>> (
BandejaCobrarYPagarViewModel>> -
>>>- .
	respuesta>>/ 8
=>>9 :
new>>; >
List>>? C
<>>C D(
BandejaCobrarYPagarViewModel>>D `
>>>` a
(>>a b
)>>b c
;>>c d
foreach?? 
(?? 
var?? 
cuenta?? 
in??  "
lista??# (
)??( )
{@@ 
	respuestaAA 
.AA 
AddAA 
(AA 
newAA !(
BandejaCobrarYPagarViewModelAA" >
(AA> ?
cuentaAA? E
)AAE F
)AAF G
;AAG H
}BB 
returnCC 
	respuestaCC 
;CC 
}DD 	
}FF 
}II î+
]D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\CaracteristicaConceptoViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class +
CaracteristicaConceptoViewModel 0
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
List 
< "
ComboGenericoViewModel *
>* +
Valores, 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
bool 
EsComun 
{ 
get !
;! "
set# &
;& '
}( )
public 
bool 
	EsVigente 
{ 
get  #
;# $
set% (
;( )
}* +
public +
CaracteristicaConceptoViewModel .
(. /
)/ 0
{ 	
} 	
public +
CaracteristicaConceptoViewModel .
(. /
Detalle_maestro/ >
detalle? F
)F G
{ 	
this 
. 
Id 
= 
detalle 
. 
id  
;  !
this 
. 
Nombre 
= 
detalle !
.! "
nombre" (
;( )
this 
. 
Descripcion 
= 
detalle &
.& '
valor' ,
;, -
this   
.   
Valores   
=   
new   
List   #
<  # $"
ComboGenericoViewModel  $ :
>  : ;
(  ; <
)  < =
;  = >
this!! 
.!! 
EsComun!! 
=!! 
detalle!! "
.!!" #

id_maestro!!# -
==!!. 0
MaestroSettings!!1 @
.!!@ A
Default!!A H
.!!H I+
IdMaestroCaracteristicaConcepto!!I h
;!!h i
this"" 
."" 
	EsVigente"" 
="" 
detalle"" $
.""$ %

es_vigente""% /
;""/ 0
foreach## 
(## 
var## 
item## 
in##  
detalle##! (
.##( ) 
Valor_caracteristica##) =
)##= >
{$$ 
Valores%% 
.%% 
Add%% 
(%% 
new%% "
ComboGenericoViewModel%%  6
(%%6 7
item%%7 ;
.%%; <
id%%< >
,%%> ?
item%%? C
.%%C D
valor%%D I
)%%I J
)%%J K
;%%K L
}&& 
}'' 	
public)) 
static)) 
List)) 
<)) +
CaracteristicaConceptoViewModel)) :
>)): ;
Convert))< C
())C D
List))E I
<))I J
Detalle_maestro))J Y
>))Y Z
detalles))[ c
)))c d
{** 	
List++ 
<++ +
CaracteristicaConceptoViewModel++ 0
>++0 1
caracteristicas++2 A
=++B C
new++D G
List++H L
<++L M+
CaracteristicaConceptoViewModel++M l
>++l m
(++m n
)++n o
;++o p
foreach,, 
(,, 
var,, 
item,, 
in,,  
detalles,,! )
),,) *
{-- 
caracteristicas.. 
...  
Add..  #
(..# $
new..$ '+
CaracteristicaConceptoViewModel..( G
(..G H
item..H L
)..L M
)..M N
;..N O
}// 
return11 
caracteristicas11 "
;11" #
}22 	
public44 
static44 
List44 
<44 +
CaracteristicaConceptoViewModel44 :
>44: ;
Convert44< C
(44C D
Detalle_maestro44D S
detalle44T [
)44[ \
{55 	
List66 
<66 +
CaracteristicaConceptoViewModel66 0
>660 1
caracteristicas662 A
=66B C
new66D G
List66H L
<66L M+
CaracteristicaConceptoViewModel66M l
>66l m
(66m n
)66n o
;66o p
foreach88 
(88 
var88 
item88 
in88  
detalle88! (
.88( )#
Caracteristica_concepto88) @
)88@ A
{99 
caracteristicas:: 
.::  
Add::  #
(::# $
new::$ '+
CaracteristicaConceptoViewModel::( G
(::G H
item::H L
.::L M
Detalle_maestro1::M ]
)::] ^
)::^ _
;::_ `
};; 
return== 
caracteristicas== "
;==" #
}>> 	
}?? 
}@@ ·
RD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\FacturacionViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class  
FacturacionViewModel %
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
ComboGenerico 
TipoDeTercero *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
ComboActorGenerico !
Tercero" )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
ComboGenerico 
TipoDeComprobante .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
SerieViewModel 
SerieComprobante .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
FechaEmision "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Concepto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
ComboGenerico 
Moneda #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
ComboGenerico 
TipoPago %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Glosa 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public  
FacturacionViewModel #
(# $
)$ %
{ 	
} 	
public    
FacturacionViewModel   #
(  # $
OperacionDeVenta  $ 4
ov  5 7
)  7 8
{!! 	
}(( 	
public** 
static** 
new** 
List** 
<**  
FacturacionViewModel** 3
>**3 4
convert**5 <
(**< =
List**= A
<**A B
OperacionDeVenta**B R
>**R S

documentos**T ^
)**^ _
{++ 	
var,, 
documentosDeVenta,, !
=,," #
new,,$ '
List,,( ,
<,,, - 
FacturacionViewModel,,- A
>,,A B
(,,B C
),,C D
;,,D E
foreach.. 
(.. 
var.. 
	documento.. "
in..# %

documentos..& 0
)..0 1
{// 
documentosDeVenta00 !
.00! "
Add00" %
(00% &
new00& ) 
FacturacionViewModel00* >
(00> ?
	documento00? H
)00H I
)00I J
;00J K
}11 
return22 
documentosDeVenta22 $
;22$ %
}33 	
}44 
}55 Ê
DD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\NavBar.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public 

class 
NavBar 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Controlador !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Accion 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Area 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Icono 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Activeli 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
bool 
Estado 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
IdPadre 
{ 
get  
;  !
set" %
;% &
}' (
public 
bool 
EsPadre 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
IdCaracteristica #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
int 

IdSucursal 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Rol 
{ 
get 
;  
set! $
;$ %
}& '
=( )
$str* ,
;, -
public 
List 
< 
string 
> 
Roles !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
	Separador 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
false. 3
;3 4
} 
} ú
WD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\OperacionBandejaViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class %
OperacionBandejaViewModel *
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Semana 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Cliente 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Shipper 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Consignatario #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Moneda 
{ 
get "
;" #
set$ '
;' (
}) *
public 
decimal 

TotalSoles !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
TotalDolares #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Booking 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Bl 
{ 
get 
; 
set  #
;# $
}% &
public 
string 

Contenedor  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Naviera 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Nave 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Puerto 
{ 
get "
;" #
set$ '
;' (
}) *
public   
string   
Producto   
{    
get  ! $
;  $ %
set  & )
;  ) *
}  + ,
public!! 
string!! 
Variedad!! 
{!!  
get!!! $
;!!$ %
set!!& )
;!!) *
}!!+ ,
public"" 
string"" 
UnidadNegocio"" #
{""$ %
get""& )
;"") *
set""+ .
;"". /
}""0 1
public## 
string## 
Estado## 
{## 
get## "
;##" #
set##$ '
;##' (
}##) *
public%% %
OperacionBandejaViewModel%% (
(%%( )
)%%) *
{&& 	
}(( 	
}KK 
}LL ≠
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Pedido\PedidoViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 
PedidoViewModel  
{ 
[ 	

DataMember	 
] 
public 
long 
IdOrden 
{ 
get !
;! "
set# &
;& '
}( )
public 
long 
IdCotizacion  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string !
CadenaHtmlDeDocumento +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
PedidoViewModel 
( 
OrdenDePedido ,
ordenDePedido- :
): ;
{ 	
this 
. 
IdOrden 
= 
ordenDePedido (
.( )
Id) +
;+ ,
this 
. 
IdCotizacion 
= 
ordenDePedido  -
.- .
IdPedido. 6
;6 7
} 	
public 
PedidoViewModel 
( 
OrdenDePedido ,
ordenDePedido- :
,: ;
string< B!
cadenaHtmlDeDocumentoC X
)X Y
{ 	
this 
. 
IdOrden 
= 
ordenDePedido (
.( )
Id) +
;+ ,
this 
. 
IdCotizacion 
= 
ordenDePedido  -
.- .
IdPedido. 6
;6 7
this 
. !
CadenaHtmlDeDocumento &
=' (!
cadenaHtmlDeDocumento) >
;> ?
}   	
public"" 
static"" 
List"" 
<"" 
PedidoViewModel"" *
>""* +
Convert"", 3
(""3 4
List""4 8
<""8 9
OrdenDePedido""9 F
>""F G
ordenesDeCotizacion""H [
)""[ \
{## 	
List$$ 
<$$ 
PedidoViewModel$$  
>$$  !
ordenes$$" )
=$$* +
new$$, /
List$$0 4
<$$4 5
PedidoViewModel$$5 D
>$$D E
($$E F
)$$F G
;$$G H
foreach%% 
(%% 
var%% 
ordenDePedido%% &
in%%' )
ordenesDeCotizacion%%* =
)%%= >
{&& 
ordenes'' 
.'' 
Add'' 
('' 
new'' 
PedidoViewModel''  /
(''/ 0
ordenDePedido''0 =
)''= >
)''> ?
;''? @
}(( 
return)) 
ordenes)) 
;)) 
}** 	
}++ 
},, ò$
ND:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\PermisoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class 
PermisoViewModel !
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public "
ComboGenericoViewModel %
TipoTransaccion& 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public "
ComboGenericoViewModel %
Estado& ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public "
ComboGenericoViewModel %
RolPersonal& 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public "
ComboGenericoViewModel %
UnidadNegocio& 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public "
ComboGenericoViewModel %
Accion& ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
PermisoViewModel 
(  
)  !
{ 	
} 	
public 
PermisoViewModel 
(  
int  #
id$ &
,& '
int( +
idTipoTransaccion, =
,= >
string? E
tipoTransaccionF U
,U V
intV Y
idRolPersonalZ g
,g h
stringi o
rolPersonalp {
,{ |
int	} Ä
idAccion
Å â
,
â ä
string
ä ê
accion
ë ó
,
ó ò
int
ò õ
idUnidadNegocio
ú ´
,
´ ¨
string
¨ ≤
unidadNegocio
≥ ¿
)
¿ ¡
{ 	
this 
. 
Id 
= 
id 
; 
this 
. 
TipoTransaccion  
=! "
new# &"
ComboGenericoViewModel' =
(= >
idTipoTransaccion> O
,O P
tipoTransaccionP _
)_ `
;` a
this 
. 
RolPersonal 
= 
new ""
ComboGenericoViewModel# 9
(9 :
idRolPersonal: G
,G H
rolPersonalH S
)S T
;T U
this   
.   
Accion   
=   
new   "
ComboGenericoViewModel   4
(  4 5
idAccion  5 =
,  = >
accion  ? E
)  E F
;  F G
this!! 
.!! 
UnidadNegocio!! 
=!!  
new!!! $"
ComboGenericoViewModel!!% ;
(!!; <
idUnidadNegocio!!< K
,!!K L
unidadNegocio!!M Z
)!!Z [
;!![ \
}"" 	
public$$ 
PermisoViewModel$$ 
($$  
int$$  #
id$$$ &
,$$& '
int$$( +
idTipoTransaccion$$, =
,$$= >
string$$? E
tipoTransaccion$$F U
,$$U V
int$$W Z
idEstado$$[ c
,$$c d
string$$d j
estado$$k q
,$$q r
int$$s v
idAccion$$w 
,	$$ Ä
string
$$Å á
accion
$$à é
)
$$é è
{%% 	
this&& 
.&& 
Id&& 
=&& 
id&& 
;&& 
this'' 
.'' 
TipoTransaccion''  
=''! "
new''# &"
ComboGenericoViewModel''' =
(''= >
idTipoTransaccion''> O
,''O P
tipoTransaccion''Q `
)''` a
;''a b
this(( 
.(( 
Estado(( 
=(( 
new(( "
ComboGenericoViewModel(( 4
(((4 5
idEstado((5 =
,((= >
estado((? E
)((E F
;((F G
this)) 
.)) 
Accion)) 
=)) 
new)) "
ComboGenericoViewModel)) 4
())4 5
idAccion))5 =
,))= >
accion))? E
)))E F
;))F G
}** 	
}++ 
},, æG
OD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\AccountViewModels.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public 

class .
"ExternalLoginConfirmationViewModel 3
{ 
[ 	
Required	 
] 
[		 	
Display			 
(		 
Name		 
=		 
$str		 ,
)		, -
]		- .
public

 
string

 
Email

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
} 
public 

class &
ExternalLoginListViewModel +
{ 
public 
string 
	ReturnUrl 
{  !
get" %
;% &
set' *
;* +
}, -
} 
public 

class 
SendCodeViewModel "
{ 
public 
string 
SelectedProvider &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
ICollection 
< 
System !
.! "
Web" %
.% &
Mvc& )
.) *
SelectListItem* 8
>8 9
	Providers: C
{D E
getF I
;I J
setK N
;N O
}P Q
public 
string 
	ReturnUrl 
{  !
get" %
;% &
set' *
;* +
}, -
public 
bool 

RememberMe 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
public 

class 
VerifyCodeViewModel $
{ 
[ 	
Required	 
] 
public 
string 
Provider 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[   	
Display  	 
(   
Name   
=   
$str    
)    !
]  ! "
public!! 
string!! 
Code!! 
{!! 
get!!  
;!!  !
set!!" %
;!!% &
}!!' (
public"" 
string"" 
	ReturnUrl"" 
{""  !
get""" %
;""% &
set""' *
;""* +
}"", -
[$$ 	
Display$$	 
($$ 
Name$$ 
=$$ 
$str$$ 4
)$$4 5
]$$5 6
public%% 
bool%% 
RememberBrowser%% #
{%%$ %
get%%& )
;%%) *
set%%+ .
;%%. /
}%%0 1
public'' 
bool'' 

RememberMe'' 
{''  
get''! $
;''$ %
set''& )
;'') *
}''+ ,
}(( 
public** 

class** 
ForgotViewModel**  
{++ 
[,, 	
Required,,	 
],, 
[-- 	
Display--	 
(-- 
Name-- 
=-- 
$str-- ,
)--, -
]--- .
public.. 
string.. 
Email.. 
{.. 
get.. !
;..! "
set..# &
;..& '
}..( )
}// 
public11 

class11 
LoginViewModel11 
{22 
[33 	
Display33	 
(33 
Name33 
=33 
$str33 $
)33$ %
]33% &
public44 
bool44 

RememberMe44 
{44  
get44! $
;44$ %
set44& )
;44) *
}44+ ,
[66 	
Required66	 
]66 
[77 	
Display77	 
(77 
Name77 
=77 
$str77 ,
)77, -
]77- .
[88 	
EmailAddress88	 
]88 
public99 
string99 
Email99 
{99 
get99 !
;99! "
set99# &
;99& '
}99( )
[;; 	
Required;;	 
];; 
[<< 	
DataType<<	 
(<< 
DataType<< 
.<< 
Password<< #
)<<# $
]<<$ %
[== 	
Display==	 
(== 
Name== 
=== 
$str== $
)==$ %
]==% &
public>> 
string>> 
Password>> 
{>>  
get>>! $
;>>$ %
set>>& )
;>>) *
}>>+ ,
}?? 
publicAA 

classAA 
RegisterViewModelAA "
{BB 
[CC 	
RequiredCC	 
]CC 
[DD 	
EmailAddressDD	 
]DD 
[EE 	
DisplayEE	 
(EE 
NameEE 
=EE 
$strEE ,
)EE, -
]EE- .
publicFF 
stringFF 
EmailFF 
{FF 
getFF !
;FF! "
setFF# &
;FF& '
}FF( )
[HH 	
RequiredHH	 
]HH 
[II 	
StringLengthII	 
(II 
$numII 
,II 
ErrorMessageII '
=II( )
$strII* a
,IIa b
MinimumLengthIIc p
=IIq r
$numIIs t
)IIt u
]IIu v
[JJ 	
DataTypeJJ	 
(JJ 
DataTypeJJ 
.JJ 
PasswordJJ #
)JJ# $
]JJ$ %
[KK 	
DisplayKK	 
(KK 
NameKK 
=KK 
$strKK $
)KK$ %
]KK% &
publicLL 
stringLL 
PasswordLL 
{LL  
getLL! $
;LL$ %
setLL& )
;LL) *
}LL+ ,
[NN 	
DataTypeNN	 
(NN 
DataTypeNN 
.NN 
PasswordNN #
)NN# $
]NN$ %
[OO 	
DisplayOO	 
(OO 
NameOO 
=OO 
$strOO .
)OO. /
]OO/ 0
[PP 	
ComparePP	 
(PP 
$strPP 
,PP 
ErrorMessagePP )
=PP* +
$strPP, i
)PPi j
]PPj k
publicQQ 
stringQQ 
ConfirmPasswordQQ %
{QQ& '
getQQ( +
;QQ+ ,
setQQ- 0
;QQ0 1
}QQ2 3
}RR 
publicTT 

classTT "
ResetPasswordViewModelTT '
{UU 
[VV 	
RequiredVV	 
]VV 
[WW 	
EmailAddressWW	 
]WW 
[XX 	
DisplayXX	 
(XX 
NameXX 
=XX 
$strXX ,
)XX, -
]XX- .
publicYY 
stringYY 
EmailYY 
{YY 
getYY !
;YY! "
setYY# &
;YY& '
}YY( )
[[[ 	
Required[[	 
][[ 
[\\ 	
StringLength\\	 
(\\ 
$num\\ 
,\\ 
ErrorMessage\\ '
=\\( )
$str\\* a
,\\a b
MinimumLength\\c p
=\\q r
$num\\s t
)\\t u
]\\u v
[]] 	
DataType]]	 
(]] 
DataType]] 
.]] 
Password]] #
)]]# $
]]]$ %
[^^ 	
Display^^	 
(^^ 
Name^^ 
=^^ 
$str^^ $
)^^$ %
]^^% &
public__ 
string__ 
Password__ 
{__  
get__! $
;__$ %
set__& )
;__) *
}__+ ,
[aa 	
DataTypeaa	 
(aa 
DataTypeaa 
.aa 
Passwordaa #
)aa# $
]aa$ %
[bb 	
Displaybb	 
(bb 
Namebb 
=bb 
$strbb .
)bb. /
]bb/ 0
[cc 	
Comparecc	 
(cc 
$strcc 
,cc 
ErrorMessagecc )
=cc* +
$strcc, i
)cci j
]ccj k
publicdd 
stringdd 
ConfirmPassworddd %
{dd& '
getdd( +
;dd+ ,
setdd- 0
;dd0 1
}dd2 3
publicff 
stringff 
Codeff 
{ff 
getff  
;ff  !
setff" %
;ff% &
}ff' (
}gg 
publicii 

classii #
ForgotPasswordViewModelii (
{jj 
[kk 	
Requiredkk	 
]kk 
[ll 	
EmailAddressll	 
]ll 
[mm 	
Displaymm	 
(mm 
Namemm 
=mm 
$strmm ,
)mm, -
]mm- .
publicnn 
stringnn 
Emailnn 
{nn 
getnn !
;nn! "
setnn# &
;nn& '
}nn( )
}oo 
}pp ˘<
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\ActorGenericoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class "
ActorGenericoViewModel '
{ 
[ 	

DataMember	 
] 
public 
int 
IdActor 
{ 
get  
;  !
set" %
;% &
}' (
public 
ComboGenerico 
TipoPersona (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
ComboGenerico "
TipoDocumentoIdentidad 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
NombreComercial %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
NombreCorto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
IdNacionDireccion $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
ComboGenerico 
UbigeoDireccion ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
int 
IdViaDireccion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
IdZonaDireccion "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
DetalleDireccion &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
bool 
VigenciaDireccion %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public   "
ActorGenericoViewModel   %
(  % &
)  & '
{!! 	
}## 	
public%% "
ActorGenericoViewModel%% %
(%%% &
Actor%%& +
a%%, -
)%%- .
{&& 	
this'' 
.'' 
IdActor'' 
='' 
a'' 
.'' 
id'' 
;''  
this(( 
.(( 
TipoPersona(( 
=(( 
new(( "
ComboGenerico((# 0
(((0 1
a((1 2
.((2 3
id_tipo_actor((3 @
,((@ A
a((A B
.((B C

Tipo_actor((C M
.((M N
nombre((N T
)((T U
;((U V
this)) 
.)) 
RazonSocial)) 
=)) 
a))  
.))  !
primer_nombre))! .
;)). /
this** 
.** "
TipoDocumentoIdentidad** '
=**( )
new*** -
ComboGenerico**. ;
(**; <
a**< =
.**= >"
id_documento_identidad**> T
,**T U
a**U V
.**V W
Detalle_maestro**W f
.**f g
codigo**g m
)**m n
;**n o
this++ 
.++ $
NumeroDocumentoIdentidad++ )
=++* +
a++, -
.++- .&
numero_documento_identidad++. H
;++H I
this,, 
.,, 
NombreComercial,,  
=,,! "
a,,# $
.,,$ %
segundo_nombre,,% 3
;,,3 4
this-- 
.-- 
NombreCorto-- 
=-- 
a--  
.--  !
tercer_nombre--! .
;--. /
this.. 
... 
IdNacionDireccion.. "
=..# $
a..% &
...& '
DireccionPrincipal..' 9
...9 :
	id_nacion..: C
;..C D
this// 
.// 
UbigeoDireccion//  
=//! "
new//# &
ComboGenerico//' 4
(//4 5
a//5 6
.//6 7
DireccionPrincipal//7 I
.//I J
	id_ubigeo//J S
,//S T
a//U V
.//V W
DireccionPrincipal//W i
.//i j
Ubigeo//j p
.//p q
descripcion_larga	//q Ç
)
//Ç É
;
//É Ñ
this22 
.22 
DetalleDireccion22 !
=22" #
a22$ %
.22% &
DireccionPrincipal22& 8
.228 9
detalle229 @
;22@ A
this33 
.33 
VigenciaDireccion33 "
=33# $
a33% &
.33& '
DireccionPrincipal33' 9
.339 :
	es_activo33: C
;33C D
}44 	
public66 "
ActorGenericoViewModel66 %
(66% &
int66& )
idActor66* 1
,661 2
int663 6
idTipoPersona667 D
,66D E
string66F L
RazonSocial66M X
,66X Y
int66Y \$
idTipoDocumentoIdentidad66] u
,66u v
string66v |%
numeroDocumentoIdentidad	66} ï
,
66ï ñ
string77 
nombreComercial77 "
,77" #
string77# )
nombreCorto77* 5
,775 6
int777 :
idNacionDireccion77; L
,77L M
int77M P
idUbigeoDireccion77Q b
,77b c
string77c i!
nombreUbigeoDireccion77j 
,	77 Ä
int
77Ä É
idViaDireccion
77Ñ í
,
77í ì
int
77ì ñ
idZonaDireccion
77ó ¶
,
77¶ ß
string88 
detalleDireccion88 #
,88# $
bool88$ (
vigenciaDireccion88) :
)88: ;
{99 	
this:: 
.:: 
IdActor:: 
=:: 
idActor:: "
;::" #
this<< 
.<< 
RazonSocial<< 
=<< 
RazonSocial<< *
;<<* +
this>> 
.>> $
NumeroDocumentoIdentidad>> )
=>>* +$
numeroDocumentoIdentidad>>, D
;>>D E
this?? 
.?? 
NombreComercial??  
=??! "
nombreComercial??# 2
;??2 3
this@@ 
.@@ 
NombreCorto@@ 
=@@ 
nombreCorto@@ *
;@@* +
thisAA 
.AA 
IdNacionDireccionAA "
=AA# $
idNacionDireccionAA% 6
;AA6 7
thisBB 
.BB 
UbigeoDireccionBB  
=BB! "
newBB# &
ComboGenericoBB' 4
(BB4 5
idUbigeoDireccionBB5 F
,BBF G!
nombreUbigeoDireccionBBG \
)BB\ ]
;BB] ^
thisCC 
.CC 
IdViaDireccionCC 
=CC  !
idViaDireccionCC" 0
;CC0 1
thisDD 
.DD 
IdZonaDireccionDD  
=DD! "
idZonaDireccionDD# 2
;DD2 3
thisEE 
.EE 
DetalleDireccionEE !
=EE" #
detalleDireccionEE$ 4
;EE4 5
thisFF 
.FF 
VigenciaDireccionFF "
=FF# $
vigenciaDireccionFF% 6
;FF6 7
}GG 	
}HH 
}II À
MD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\ActorViewModels.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public 

class 
ActorViewModels  
{		 
public

 
int

 
IdActor

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
public "
ComboGenericoViewModel %
TipoPersona& 1
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public "
ComboGenericoViewModel %"
TipoDocumentoIdentidad& <
{= >
get? B
;B C
setD G
;G H
}I J
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DateTime 
FechaInicio #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 
FechaFin  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
NombreComercial %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
NombreCorto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
	Direccion 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} Ö
ZD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\CaracteristicaValorViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
public 

class (
CaracteristicaValorViewModel -
{ 
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
List 
< "
ComboGenericoViewModel *
>* +
Valores, 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public (
CaracteristicaValorViewModel +
(+ ,
), -
{ 	
} 	
public (
CaracteristicaValorViewModel +
(+ ,
string, 2
nombre3 9
,9 :
List: >
<> ? 
Valor_caracteristica? S
>S T
valoresU \
)\ ]
{ 	
this 
. 
Nombre 
= 
nombre  
;  !
this 
. 
Valores 
= 
new 
List #
<# $"
ComboGenericoViewModel$ :
>: ;
(; <
)< =
;= >
foreach 
( 
var 
item 
in  
valores! (
)( )
{ 
Valores 
. 
Add 
( 
new "
ComboGenericoViewModel  6
(6 7
item7 ;
.; <
id< >
,> ?
item@ D
.D E
valorE J
)J K
)K L
;L M
} 
} 	
} 
} º(
jD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Precio\BandejaBonificacionDescuentoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 1
%BandejaBonificacionDescuentoViewModel 6
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Producto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Valor 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
CantidadMaxima $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
CantidadMinima $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 

FechaDesde  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 

FechaHasta  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
ProductoReferencia (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
	EsVigente 
{ 
get  #
;# $
set% (
;( )
}* +
public 1
%BandejaBonificacionDescuentoViewModel 4
(4 5
Precio5 ;
precio< B
)B C
{ 	
this 
. 
Id 
= 
precio 
. 
id 
;  
this 
. 
Producto 
= 
precio "
." #
Concepto_negocio1# 4
.4 5
nombre5 ;
;; <
this   
.   
Valor   
=   
precio   
.    
valor    %
.  % &
ToString  & .
(  . /
$str  / 2
+  3 4
AplicacionSettings  5 G
.  G H
Default  H O
.  O P#
NumeroDecimalesEnPrecio  P g
)  g h
;  h i
this!! 
.!! 
CantidadMinima!! 
=!!  !
precio!!" (
.!!( )
cantidad_minima!!) 8
.!!8 9
ToString!!9 A
(!!A B
)!!B C
;!!C D
this"" 
."" 
CantidadMaxima"" 
=""  !
precio""" (
.""( )
cantidad_maxima"") 8
.""8 9
ToString""9 A
(""A B
)""B C
;""C D
this## 
.## 

FechaDesde## 
=## 
precio## $
.##$ %
fecha_inicio##% 1
.##1 2
ToString##2 :
(##: ;
$str##; G
)##G H
;##H I
this$$ 
.$$ 

FechaHasta$$ 
=$$ 
precio$$ $
.$$$ %
	fecha_fin$$% .
.$$. /
ToString$$/ 7
($$7 8
$str$$8 D
)$$D E
;$$E F
this%% 
.%% 
	EsVigente%% 
=%% 
precio%% #
.%%# $

es_vigente%%$ .
;%%. /
this&& 
.&& 
ProductoReferencia&& #
=&&$ %
precio&&& ,
.&&, -
Concepto_negocio&&- =
!=&&> @
null&&A E
?&&F G
precio&&H N
.&&N O
Concepto_negocio&&O _
.&&_ `
nombre&&` f
:&&g h
$str&&i k
;&&k l
}'' 	
public)) 
static)) 
List)) 
<)) 1
%BandejaBonificacionDescuentoViewModel)) @
>))@ A
Convert))B I
())I J
List))J N
<))N O
Precio))O U
>))U V
precios))W ^
)))^ _
{** 	
var++ 
precios_++ 
=++ 
new++ 
List++ #
<++# $1
%BandejaBonificacionDescuentoViewModel++$ I
>++I J
(++J K
)++K L
;++L M
foreach-- 
(-- 
var-- 
precio-- 
in--  "
precios--# *
)--* +
{.. 
precios_// 
.// 
Add// 
(// 
new//  1
%BandejaBonificacionDescuentoViewModel//! F
(//F G
precio//G M
)//M N
)//N O
;//O P
}00 
return11 
precios_11 
;11 
}22 	
}33 
}66 ≈#
cD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Precio\BonoficacionDescuentoViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class *
BonificacionDescuentoViewModel /
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public "
ComboGenericoViewModel %

Mercaderia& 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public "
ComboGenericoViewModel % 
MercaderiaReferencia& :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
decimal 
Valor 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
CantidadMaxima !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
CantidadMinima !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 

FechaDesde "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DateTime 

FechaHasta "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
bool 

Porcentaje 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public *
BonificacionDescuentoViewModel -
(- .
). /
{ 	
}   	
public"" *
BonificacionDescuentoViewModel"" -
(""- .
Precio"". 4
precio""5 ;
)""; <
{## 	
this$$ 
.$$ 
Id$$ 
=$$ 
precio$$ 
.$$ 
id$$ 
;$$  
this%% 
.%% 

Mercaderia%% 
=%% 
new%% !"
ComboGenericoViewModel%%" 8
(%%8 9
precio%%9 ?
.%%? @
id_concepto_negocio%%@ S
,%%S T
precio%%U [
.%%[ \
Concepto_negocio1%%\ m
.%%m n
nombre%%n t
)%%t u
;%%u v
this&& 
.&&  
MercaderiaReferencia&& %
=&&& '
new&&( +"
ComboGenericoViewModel&&, B
(&&B C
(&&C D
int&&D G
)&&G H
precio&&H N
.&&N O+
id_concepto_negocio_referencial&&O n
,&&n o
precio&&p v
.&&v w
Concepto_negocio	&&w á
.
&&á à
nombre
&&à é
)
&&é è
;
&&è ê
this'' 
.'' 
Valor'' 
='' 
precio'' 
.''  
valor''  %
;''% &
this(( 
.(( 
CantidadMinima(( 
=((  !
(((" #
int((# &
)((& '
precio((' -
.((- .
cantidad_minima((. =
;((= >
this)) 
.)) 
CantidadMaxima)) 
=))  !
())" #
int))# &
)))& '
precio))' -
.))- .
cantidad_maxima)). =
;))= >
this** 
.** 

FechaDesde** 
=** 
precio** $
.**$ %
fecha_inicio**% 1
;**1 2
this++ 
.++ 

FechaHasta++ 
=++ 
precio++ $
.++$ %
	fecha_fin++% .
;++. /
this,, 
.,, 

Porcentaje,, 
=,, 
(,, 
bool,, #
),,# $
precio,,$ *
.,,* +

porcentaje,,+ 5
;,,5 6
this-- 
.-- 
Descripcion-- 
=-- 
precio-- %
.--% &
descripcion--& 1
;--1 2
}.. 	
}00 
}33 ˚q
\D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Precio\RegistroPrecioViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class #
RegistroPrecioViewModel (
{ 
[ 	

DataMember	 
] 
public 
int 

IdConcepto 
{ 
get  #
;# $
set% (
;( )
}* +
public 
List 
< +
RegistroPuntosDePrecioViewModel 3
>3 4
PuntosDePrecio5 C
{D E
getF I
;I J
setK N
;N O
}P Q
public #
RegistroPrecioViewModel &
(& '
)' (
{ 	
} 	
public #
RegistroPrecioViewModel &
(& '
List' +
<+ ,(
Precio_Compra_Venta_Concepto, H
>H I
preciosJ Q
,Q R
intS V

idConceptoW a
,a b
Listc g
<g h"
ComboGenericoViewModelh ~
>~ !
totalPuntosDePrecio
Ä ì
,
ì î
List
ï ô
<
ô ö$
ComboGenericoViewModel
ö ∞
>
∞ ±
totalTarifas
≤ æ
,
æ ø
DateTime
¿ »
fechaActual
… ‘
)
‘ ’
{ 	
this 
. 

IdConcepto 
= 

idConcepto (
;( )
PuntosDePrecio 
= 
new  
List! %
<% &+
RegistroPuntosDePrecioViewModel& E
>E F
(F G
)G H
;H I
Decimal 
precioCompra  
=! "
precios# *
.* +
Count+ 0
!=1 3
$num4 5
?6 7
precios8 ?
.? @
First@ E
(E F
)F G
.G H
PrecioCompraH T
:U V
$numW X
;X Y
foreach 
( 
var 
item 
in  
totalPuntosDePrecio! 4
)4 5
{ 
PuntosDePrecio   
.   
Add   "
(  " #
new  # &+
RegistroPuntosDePrecioViewModel  ' F
(  F G
new  G J"
ComboGenericoViewModel  K a
(  a b
item  b f
.  f g
Id  g i
,  i j
item  k o
.  o p
Nombre  p v
)  v w
,  w x
precios	  y Ä
.
  Ä Å
Where
  Å Ü
(
  Ü á
p
  á à
=>
  â ã
p
  å ç
.
  ç é
IdPuntoPrecio
  é õ
==
  ú û
item
  ü £
.
  £ §
Id
  § ¶
)
  ¶ ß
.
  ß ®
ToList
  ® Æ
(
  Æ Ø
)
  Ø ∞
,
  ∞ ±
totalTarifas
  ≤ æ
,
  æ ø
precioCompra
  ¿ Ã
,
  Ã Õ
fechaActual
  Œ Ÿ
)
  Ÿ ⁄
)
  ⁄ €
;
  € ‹
}!! 
}"" 	
public++ 
static++ 
List++ 
<++ (
Precio_Compra_Venta_Concepto++ 7
>++7 8
Convert++9 @
(++@ A#
RegistroPrecioViewModel++A X
registro++Y a
)++a b
{,, 	
List-- 
<-- (
Precio_Compra_Venta_Concepto-- -
>--- .
precios--/ 6
=--7 8
new--9 <
List--= A
<--A B(
Precio_Compra_Venta_Concepto--B ^
>--^ _
(--_ `
)--` a
;--a b
foreach.. 
(.. 
var.. 
itemPuntoDePrecio.. *
in..+ -
registro... 6
...6 7
PuntosDePrecio..7 E
)..E F
{// 
foreach00 
(00 
var00 
itemTarifaDePrecio00 /
in000 2
itemPuntoDePrecio003 D
.00D E
Tarifas00E L
)00L M
{11 
if22 
(22 
itemTarifaDePrecio22 *
.22* +
EsIngresado22+ 6
||227 9
itemTarifaDePrecio22: L
.22L M
IdPrecio22M U
!=22V X
$num22Y Z
)22Z [
{33 
precios44 
.44  
Add44  #
(44# $
new44$ '(
Precio_Compra_Venta_Concepto44( D
(44D E
itemTarifaDePrecio44E W
.44W X
IdPrecio44X `
,44` a
itemPuntoDePrecio44b s
.44s t
PuntoDePrecio	44t Å
.
44Å Ç
Id
44Ç Ñ
,
44Ñ Ö 
itemTarifaDePrecio
44Ü ò
.
44ò ô
Tarifa
44ô ü
.
44ü †
Id
44† ¢
,
44¢ £ 
itemTarifaDePrecio
44§ ∂
.
44∂ ∑
Valor
44∑ º
,
44º Ω 
itemTarifaDePrecio
44æ –
.
44– —

FechaDesde
44— €
,
44€ ‹ 
itemTarifaDePrecio
44› Ô
.
44Ô 

FechaHasta
44 ˙
,
44˙ ˚ 
itemTarifaDePrecio
44¸ é
.
44é è
Descripcion
44è ö
,
44ö õ 
itemTarifaDePrecio
44ú Æ
.
44Æ Ø
EsIngresado
44Ø ∫
)
44∫ ª
)
44ª º
;
44º Ω
}55 
}66 
}77 
return88 
precios88 
;88 
}99 	
}:: 
[<< 
Serializable<< 
]<< 
[== 
DataContract== 
]== 
public>> 

class>> +
RegistroPuntosDePrecioViewModel>> 0
{?? 
[@@ 	

DataMember@@	 
]@@ 
publicAA "
ComboGenericoViewModelAA %
PuntoDePrecioAA& 3
{AA4 5
getAA6 9
;AA9 :
setAA; >
;AA> ?
}AA@ A
publicBB 
ListBB 
<BB )
RegistroTarifaPrecioViewModelBB 1
>BB1 2
TarifasBB3 :
{BB; <
getBB= @
;BB@ A
setBBB E
;BBE F
}BBG H
publicDD +
RegistroPuntosDePrecioViewModelDD .
(DD. /
)DD/ 0
{EE 	
}GG 	
publicII +
RegistroPuntosDePrecioViewModelII .
(II. /"
ComboGenericoViewModelII/ E
puntoDePrecioIIF S
,IIS T
ListIIU Y
<IIY Z(
Precio_Compra_Venta_ConceptoIIZ v
>IIv w
tarifasIIx 
,	II Ä
List
IIÅ Ö
<
IIÖ Ü$
ComboGenericoViewModel
IIÜ ú
>
IIú ù
totalTarifas
IIû ™
,
II™ ´
Decimal
II¨ ≥
precioCompra
II¥ ¿
,
II¿ ¡
DateTime
II¬  
fechaActual
IIÀ ÷
)
II÷ ◊
{JJ 	
PuntoDePrecioKK 
=KK 
puntoDePrecioKK )
;KK) *
TarifasLL 
=LL 
newLL 
ListLL 
<LL )
RegistroTarifaPrecioViewModelLL <
>LL< =
(LL= >
)LL> ?
;LL? @
foreachMM 
(MM 
varMM 
itemMM 
inMM  
totalTarifasMM! -
)MM- .
{NN 
varOO 
tarifaOO 
=OO 
tarifasOO $
.OO$ %
SingleOrDefaultOO% 4
(OO4 5
pOO5 6
=>OO7 9
pOO: ;
.OO; <
IdTarifaOO< D
==OOE G
itemOOH L
.OOL M
IdOOM O
)OOO P
;OOP Q
ifPP 
(PP 
tarifaPP 
!=PP 
nullPP "
)PP" #
{QQ 
boolSS #
esNuloOVacioPrecioVentaSS 0
=SS1 2
stringSS3 9
.SS9 :
IsNullOrEmptySS: G
(SSG H
tarifaSSH N
.SSN O
PrecioVentaSSO Z
.SSZ [
ToStringSS[ c
(SSc d
$strSSd g
+SSh i
AplicacionSettingsSSj |
.SS| }
Default	SS} Ñ
.
SSÑ Ö%
NumeroDecimalesEnPrecio
SSÖ ú
)
SSú ù
)
SSù û
;
SSû ü
TarifasTT 
.TT 
AddTT 
(TT  
newTT  #)
RegistroTarifaPrecioViewModelTT$ A
(TTA B
!TTB C#
esNuloOVacioPrecioVentaTTC Z
,TTZ [
tarifaTT\ b
.TTb c
IdPrecioTTc k
,TTk l
tarifaTTm s
.TTs t
PrecioCompra	TTt Ä
.
TTÄ Å
ToString
TTÅ â
(
TTâ ä
$str
TTä ç
+
TTé è 
AplicacionSettings
TTê ¢
.
TT¢ £
Default
TT£ ™
.
TT™ ´%
NumeroDecimalesEnPrecio
TT´ ¬
)
TT¬ √
,
TT√ ƒ
tarifa
TT≈ À
.
TTÀ Ã
PrecioVenta
TTÃ ◊
.
TT◊ ÿ
ToString
TTÿ ‡
(
TT‡ ·
$str
TT· ‰
+
TTÂ Ê 
AplicacionSettings
TTÁ ˘
.
TT˘ ˙
Default
TT˙ Å
.
TTÅ Ç%
NumeroDecimalesEnPrecio
TTÇ ô
)
TTô ö
,
TTö õ
new
TTú ü$
ComboGenericoViewModel
TT† ∂
(
TT∂ ∑
tarifa
TT∑ Ω
.
TTΩ æ
IdTarifa
TTæ ∆
,
TT∆ «
tarifa
TT» Œ
.
TTŒ œ
Tarifa
TTœ ’
)
TT’ ÷
,
TT÷ ◊
tarifa
TTÿ ﬁ
.
TTﬁ ﬂ
PrecioVenta
TTﬂ Í
,
TTÍ Î
tarifa
TTÏ Ú
.
TTÚ Û
FechaInicio
TTÛ ˛
,
TT˛ ˇ
tarifa
TTÄ Ü
.
TTÜ á
FechaFin
TTá è
,
TTè ê
tarifa
TTë ó
.
TTó ò
Descripcion
TTò £
)
TT£ §
)
TT§ •
;
TT• ¶
}UU 
elseVV 
{WW 
TarifasXX 
.XX 
AddXX 
(XX  
newXX  #)
RegistroTarifaPrecioViewModelXX$ A
(XXA B
falseXXB G
,XXG H
$numXXI J
,XXJ K
precioCompraXXL X
.XXX Y
ToStringXXY a
(XXa b
$strXXb e
+XXf g
AplicacionSettingsXXh z
.XXz {
Default	XX{ Ç
.
XXÇ É%
NumeroDecimalesEnPrecio
XXÉ ö
)
XXö õ
,
XXõ ú
$num
XXù û
.
XXû ü
ToString
XXü ß
(
XXß ®
$str
XX® ´
+
XX¨ ≠ 
AplicacionSettings
XXÆ ¿
.
XX¿ ¡
Default
XX¡ »
.
XX» …%
NumeroDecimalesEnPrecio
XX… ‡
)
XX‡ ·
,
XX· ‚
new
XX„ Ê$
ComboGenericoViewModel
XXÁ ˝
(
XX˝ ˛
item
XX˛ Ç
.
XXÇ É
Id
XXÉ Ö
,
XXÖ Ü
item
XXá ã
.
XXã å
Nombre
XXå í
)
XXí ì
,
XXì î
$num
XXï ñ
,
XXñ ó
fechaActual
XXò £
,
XX£ §
fechaActual
XX• ∞
.
XX∞ ±
	AddMonths
XX± ∫
(
XX∫ ª
ConceptoSettings
XXª À
.
XXÀ Ã
Default
XXÃ ”
.
XX” ‘-
PrecioDuracionPorDefectoEnMeses
XX‘ Û
)
XXÛ Ù
,
XXÙ ı
$str
XXˆ ˇ
)
XXˇ Ä
)
XXÄ Å
;
XXÅ Ç
}YY 
}ZZ 
}[[ 	
}\\ 
[^^ 
Serializable^^ 
]^^ 
[__ 
DataContract__ 
]__ 
public`` 

class`` )
RegistroTarifaPrecioViewModel`` .
{aa 
[bb 	

DataMemberbb	 
]bb 
publiccc 
intcc 
IdPreciocc 
{cc 
getcc !
;cc! "
setcc# &
;cc& '
}cc( )
publicdd 
booldd 
EsIngresadodd 
{dd  !
getdd" %
;dd% &
setdd' *
;dd* +
}dd, -
publicee 
stringee 
PrecioCompraee "
{ee# $
getee% (
;ee( )
setee* -
;ee- .
}ee/ 0
publicff 
stringff 
PrecioActualff "
{ff# $
getff% (
;ff( )
setff* -
;ff- .
}ff/ 0
publicgg "
ComboGenericoViewModelgg %
Tarifagg& ,
{gg- .
getgg/ 2
;gg2 3
setgg4 7
;gg7 8
}gg9 :
publichh 
decimalhh 
Valorhh 
{hh 
gethh "
;hh" #
sethh$ '
;hh' (
}hh) *
publicii 
DateTimeii 

FechaDesdeii "
{ii# $
getii% (
;ii( )
setii* -
;ii- .
}ii/ 0
publicjj 
DateTimejj 

FechaHastajj "
{jj# $
getjj% (
;jj( )
setjj* -
;jj- .
}jj/ 0
publickk 
stringkk 
Descripcionkk !
{kk" #
getkk$ '
;kk' (
setkk) ,
;kk, -
}kk. /
publicmm )
RegistroTarifaPrecioViewModelmm ,
(mm, -
)mm- .
{nn 	
}pp 	
publicrr )
RegistroTarifaPrecioViewModelrr ,
(rr, -
boolrr- 1
esIngresadorr2 =
,rr= >
intrr? B
idPreciorrC K
,rrK L
stringrrM S
precioComprarrT `
,rr` a
stringrrb h
precioActualrri u
,rru v#
ComboGenericoViewModel	rrw ç
tarifa
rré î
,
rrî ï
decimal
rrñ ù
valor
rrû £
,
rr£ §
DateTime
rr• ≠

fechaDesde
rrÆ ∏
,
rr∏ π
DateTime
rr∫ ¬

fechaHasta
rr√ Õ
,
rrÕ Œ
string
rrœ ’
descripcion
rr÷ ·
)
rr· ‚
{ss 	
EsIngresadott 
=tt 
esIngresadott %
;tt% &
IdPreciouu 
=uu 
idPreciouu 
;uu  
PrecioCompravv 
=vv 
precioCompravv '
;vv' (
PrecioActualww 
=ww 
precioActualww '
;ww' (
Tarifaxx 
=xx 
tarifaxx 
;xx 
Valoryy 
=yy 
valoryy 
;yy 

FechaDesdezz 
=zz 

fechaDesdezz #
;zz# $

FechaHasta{{ 
={{ 

fechaHasta{{ #
;{{# $
Descripcion|| 
=|| 
descripcion|| %
;||% &
}}} 	
}~~ 
} ±*
_D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Producto\BandejaProductoViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class $
BandejaProductoViewModel )
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
CodigoBarra !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Presentacion "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
StockMinimo !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Stock 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
PrecioCompra "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
PrecioVenta !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string !
UnidadMedidaComercial +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public $
BandejaProductoViewModel '
(' (
ConceptoDeNegocio( 9
producto: B
,B C
intD G
idCentroAtencionH X
)X Y
{ 	
this 
. 
Id 
= 
producto 
. 
Id !
;! "
this 
. 
CodigoBarra 
= 
producto '
.' (
CodigoBarra( 3
;3 4
this   
.   
Nombre   
=   
producto   "
.  " #
Nombre  # )
;  ) *
this!! 
.!! 
Presentacion!! 
=!! 
producto!!  (
.!!( )
Presentacion!!) 5
(!!5 6
)!!6 7
.!!7 8
Nombre!!8 >
+!!> ?
$str!!? B
+!!B C
Convert!!D K
.!!K L
ToInt32!!L S
(!!S T
producto!!T \
.!!\ ] 
CantidadPresentacion!!] q
)!!q r
.!!r s
ToString!!s {
(!!{ |
)!!| }
+!!} ~
$str	!!~ Å
+
!!Å Ç
producto
!!Ç ä
.
!!ä ã&
UnidadMedidaPresentacion
!!ã £
(
!!£ §
)
!!§ •
.
!!• ¶
Codigo
!!¶ ¨
;
!!¨ ≠
this"" 
."" 
StockMinimo"" 
="" 
producto"" '
.""' (
StockMinimo""( 3
.""3 4
ToString""4 <
(""< =
)""= >
;""> ?
this## 
.## 
Stock## 
=## 
Convert##  
.##  !
ToInt32##! (
(##( )
producto##) 1
.##1 2
Stock##2 7
(##7 8
)##8 9
)##9 :
.##: ;
ToString##; C
(##C D
)##D E
;##E F
this%% 
.%% 
PrecioVenta%% 
=%% 
producto%% '
.%%' (
PrecioVentaNormal%%( 9
(%%9 :
idCentroAtencion%%: J
)%%J K
.%%K L
ToString%%L T
(%%T U
)%%U V
;%%V W
this&& 
.&& !
UnidadMedidaComercial&& &
=&&' (
producto&&) 1
.&&1 2!
UnidadMedidaComercial&&2 G
(&&G H
)&&H I
.&&I J
Codigo&&J P
;&&P Q
}'' 	
public)) 
static)) 
List)) 
<)) $
BandejaProductoViewModel)) 3
>))3 4
Convert_))5 =
())= >
List))> B
<))B C
ConceptoDeNegocio))C T
>))T U
	productos))V _
,))_ `
int))a d
idCentroAtencion))e u
)))u v
{** 	
var++ 

productos_++ 
=++ 
new++  
List++! %
<++% &$
BandejaProductoViewModel++& >
>++> ?
(++? @
)++@ A
;++A B
foreach-- 
(-- 
var-- 
producto-- !
in--" $
	productos--% .
)--. /
{.. 

productos_// 
.// 
Add// 
(// 
new// "$
BandejaProductoViewModel//# ;
(//; <
producto//< D
,//D E
idCentroAtencion//F V
)//V W
)//W X
;//X Y
}00 
return11 

productos_11 
;11 
}22 	
}33 
}66 ç@
kD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Producto\ProductoParaVentaConFiltrosViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 0
$ProductoParaVentaConFiltrosViewModel 5
{ 
public 
List 
< &
Concepto_Negocio_Comercial .
>. /(
ConceptosNegociosComerciales0 L
{M N
getO R
;R S
setT W
;W X
}Y Z
public 
List 
< 
FiltroOpcion  
>  !
FiltrosConOpciones" 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public 0
$ProductoParaVentaConFiltrosViewModel 3
(3 4
)4 5
{ 	
} 	
public 0
$ProductoParaVentaConFiltrosViewModel 3
(3 4
List4 8
<8 9&
Concepto_Negocio_Comercial9 S
>S T(
conceptosNegociosComercialesU q
,q r
Lists w
<w x
FiltroOpcion	x Ñ
>
Ñ Ö 
filtrosConOpciones
Ü ò
)
ò ô
{ 	(
ConceptosNegociosComerciales (
=) *(
conceptosNegociosComerciales+ G
;G H
FiltrosConOpciones 
=  
filtrosConOpciones! 3
;3 4
} 	
public 
static 0
$ProductoParaVentaConFiltrosViewModel :
Convert; B
(B C
ListC G
<G H&
Concepto_Negocio_ComercialH b
>b c)
conceptosNegociosComerciales	d Ä
)
Ä Å
{ 	
List   
<   
FiltroOpcion   
>   
filtrosConOpciones   1
=  2 3
new  4 7
List  8 <
<  < =
FiltroOpcion  = I
>  I J
(  J K
)  K L
;  L M
var""  
nombresFiltrosUnicos"" $
=""% &(
conceptosNegociosComerciales""' C
.""C D

SelectMany""D N
(""N O
cnc""O R
=>""S U
cnc""V Y
.""Y Z
Filtros""Z a
)""a b
.""b c
OrderBy""c j
(""j k
f""k l
=>""m o
f""p q
.""q r
Nombre""r x
)""x y
.""y z
Select	""z Ä
(
""Ä Å
f
""Å Ç
=>
""É Ö
f
""Ü á
.
""á à
Nombre
""à é
)
""é è
.
""è ê
Distinct
""ê ò
(
""ò ô
)
""ô ö
;
""ö õ
foreach## 
(## 
var## 
item## 
in##   
nombresFiltrosUnicos##! 5
)##5 6
{$$ 
var'' 
opciones'' 
='' (
conceptosNegociosComerciales'' ;
.''; <

SelectMany''< F
(''F G
cnc''G J
=>''K M
cnc''N Q
.''Q R
Filtros''R Y
)''Y Z
.((I J
Where((J O
(((O P
f((P Q
=>((R T
f((U V
.((V W
Nombre((W ]
==((^ `
item((a e
)((e f
.))I J
GroupBy))J Q
())Q R
f))R S
=>))T V
f))W X
.))X Y
Valor))Y ^
)))^ _
.**I J
Select**J P
(**P Q
o**Q R
=>**S U
new**V Y
Opcion**Z `
(**` a
)**a b
{++I J
Valor,,M R
=,,S T
o,,U V
.,,V W
Key,,W Z
,,,Z [
Cantidad--M U
=--V W
o--X Y
.--Y Z
Sum--Z ]
(--] ^
c--_ `
=>--a c
c--d e
.--e f
Cantidad--f n
)--n o
,--o p
EsSeleccionado..M [
=..\ ]
false..^ c
,..c d
}00I J
)00J K
.00K L
Distinct00L T
(00T U
)00U V
.00V W
ToList00W ]
(00] ^
)00^ _
;00_ `
filtrosConOpciones22 "
.22" #
Add22# &
(22& '
new22' *
FiltroOpcion22+ 7
(227 8
item228 <
,22< =
opciones22> F
.22F G
OrderBy22G N
(22N O
o22O P
=>22Q S
o22T U
.22U V
Valor22V [
)22[ \
.22\ ]
ToList22] c
(22c d
)22d e
)22e f
)22f g
;22g h
}33 
return66 
new66 0
$ProductoParaVentaConFiltrosViewModel66 ;
(66; <(
conceptosNegociosComerciales66< X
,66X Y
filtrosConOpciones66Z l
)66l m
;66m n
}77 	
public99 
class99 
FiltroOpcion99 !
{99" #
private:: 
string:: 
nombre:: !
;::! "
private;; 
List;; 
<;; 
Opcion;; 
>;;  
opciones;;! )
;;;) *
public== 
FiltroOpcion== 
(==  
string==  &
nombre==' -
,==- .
List==/ 3
<==3 4
Opcion==4 :
>==: ;
opciones==< D
)==D E
{>> 
this?? 
.?? 
nombre?? 
=?? 
nombre?? $
;??$ %
this@@ 
.@@ 
opciones@@ 
=@@ 
opciones@@  (
;@@( )
}AA 
publicCC 
stringCC 
NombreCC  
{CC! "
getCC# &
=>CC' )
nombreCC* 0
;CC0 1
setCC2 5
=>CC6 8
nombreCC9 ?
=CC@ A
valueCCB G
;CCG H
}CCI J
publicDD 
ListDD 
<DD 
OpcionDD 
>DD 
OpcionesDD  (
{DD) *
getDD+ .
=>DD/ 1
opcionesDD2 :
;DD: ;
setDD< ?
=>DD@ B
opcionesDDC K
=DDL M
valueDDN S
;DDS T
}DDU V
}EE 	
publicGG 
classGG 
OpcionGG 
{HH 	
privateJJ 
stringJJ 
valorJJ  
;JJ  !
privateKK 
boolKK 
esSeleccionadoKK '
;KK' (
privateLL 
intLL 
cantidadLL  
;LL  !
publicMM 
OpcionMM 
(MM 
)MM 
{NN 
}PP 
publicRR 
OpcionRR 
(RR 
stringRR  
valorRR! &
,RR& '
boolRR( ,
esSeleccionadoRR- ;
,RR; <
intRR= @
cantidadRRA I
)RRI J
{SS 
thisTT 
.TT 
valorTT 
=TT 
valorTT "
;TT" #
thisUU 
.UU 
esSeleccionadoUU #
=UU$ %
esSeleccionadoUU& 4
;UU4 5
thisVV 
.VV 
cantidadVV 
=VV 
cantidadVV  (
;VV( )
}WW 
publicYY 
stringYY 
ValorYY 
{YY  !
getYY" %
=>YY& (
valorYY) .
;YY. /
setYY0 3
=>YY4 6
valorYY7 <
=YY= >
valueYY? D
;YYD E
}YYF G
publicZZ 
boolZZ 
EsSeleccionadoZZ &
{ZZ' (
getZZ) ,
=>ZZ- /
esSeleccionadoZZ0 >
;ZZ> ?
setZZ@ C
=>ZZD F
esSeleccionadoZZG U
=ZZV W
valueZZX ]
;ZZ] ^
}ZZ_ `
public[[ 
int[[ 
Cantidad[[ 
{[[  !
get[[" %
=>[[& (
cantidad[[) 1
;[[1 2
set[[3 6
=>[[7 9
cantidad[[: B
=[[C D
value[[E J
;[[J K
}[[L M
}\\ 	
}^^ 
}`` ∂$
pD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Producto\RegsitroProductoParaFacturacionViewModels.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public 

class 5
)RegsitroProductoParaFacturacionViewModels :
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
EsBien 
{ 
get  
;  !
set" %
;% &
}' (
public #
ConceptoBasicoViewModel &
ConceptoBasico' 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
decimal 
PrecioUnitario %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
int 
IdActorVersion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
	IdVersion 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
VersionFila !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Stock 
{ 
get "
;" #
set$ '
;' (
}) *
public 5
)RegsitroProductoParaFacturacionViewModels 8
(8 9
)9 :
{ 	
} 	
public 5
)RegsitroProductoParaFacturacionViewModels 8
(8 9
int9 <
id= ?
,? @
stringA G
nombreH N
,N O
decimalP W
precioUnitarioX f
,f g
byteh l
[l m
]m n
versionFilao z
,{ |
decimal	| É
stock
Ñ â
)
â ä
{   	
this!! 
.!! 
Id!! 
=!! 
id!! 
;!! 
this"" 
."" 
Nombre"" 
="" 
nombre""  
;""  !
this## 
.## 
PrecioUnitario## 
=##  !
precioUnitario##" 0
;##0 1
this$$ 
.$$ 
VersionFila$$ 
=$$ 
versionFila$$ *
!=$$* ,
null$$, 0
?$$0 1
Convert$$2 9
.$$9 :
ToBase64String$$: H
($$H I
versionFila$$I T
)$$T U
:$$U V
null$$V Z
;$$Z [
this%% 
.%% 
Stock%% 
=%% 
stock%% 
;%% 
}&& 	
public'' 5
)RegsitroProductoParaFacturacionViewModels'' 8
(''8 9
int''9 <
id''= ?
,''? @
string''A G
nombre''H N
,''N O
byte''P T
[''T U
]''U V
versionFila''W b
,''b c
decimal''d k
precioUnitario''l z
,''z {
decimal	''| É
stock
''Ñ â
,
''â ä
int
''ä ç
	idVersion
''é ó
,
''ó ò
int
''ô ú
idActorVersion
''ù ´
)
''´ ¨
{(( 	
this)) 
.)) 
Id)) 
=)) 
id)) 
;)) 
this** 
.** 
Nombre** 
=** 
nombre**  
;**  !
this++ 
.++ 
VersionFila++ 
=++ 
versionFila++ *
!=+++ -
null++. 2
?++3 4
Convert++5 <
.++< =
ToBase64String++= K
(++K L
versionFila++L W
)++W X
:++Y Z
null++[ _
;++_ `
this,, 
.,, 
PrecioUnitario,, 
=,,  !
precioUnitario,," 0
;,,0 1
this-- 
.-- 
Stock-- 
=-- 
stock-- 
;-- 
this.. 
... 
	IdVersion.. 
=.. 
	idVersion.. &
;..& '
this// 
.// 
IdActorVersion// 
=//  !
idActorVersion//" 0
;//0 1
}00 	
}11 
}33 Ò#
uD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Producto\ValorDetalleMaestroDetalleTransaccionViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class :
.ValorDetalleMaestroDetalleTransaccionViewModel ?
{ 
public 
int 
Numero 
{ 
get 
;  
set! $
;$ %
}& '
public 
List 
< 1
%ValorDetalleMaestroDetalleTransaccion 9
>9 :
Valores; B
{C D
getE H
;H I
setJ M
;M N
}O P
public :
.ValorDetalleMaestroDetalleTransaccionViewModel =
(= >
)> ?
{ 	
} 	
public :
.ValorDetalleMaestroDetalleTransaccionViewModel =
(= >
int> A
numeroB H
,H I
ListJ N
<N O1
%ValorDetalleMaestroDetalleTransaccionO t
>t u
valoresv }
)} ~
{ 	
this 
. 
Numero 
= 
numero  
;  !
this 
. 
Valores 
= 
valores "
;" #
} 	
public"" 
static"" 
List"" 
<"" :
.ValorDetalleMaestroDetalleTransaccionViewModel"" I
>""I J
Convert""K R
(""R S
List""S W
<""W X1
%ValorDetalleMaestroDetalleTransaccion""X }
>""} ~
valores	"" Ü
)
""Ü á
{## 	
List$$ 
<$$ :
.ValorDetalleMaestroDetalleTransaccionViewModel$$ ?
>$$? @
	resultado$$A J
=$$K L
new$$M P
List$$Q U
<$$U V;
.ValorDetalleMaestroDetalleTransaccionViewModel	$$V Ñ
>
$$Ñ Ö
(
$$Ö Ü
)
$$Ü á
;
$$á à
if(( 
((( 
valores(( 
!=(( 
null(( 
)((  
{)) 
	resultado** 
.** 
Add** 
(** 
new** !:
.ValorDetalleMaestroDetalleTransaccionViewModel**" P
(**P Q
$num**Q R
,**R S
valores**S Z
)**Z [
)**[ \
;**\ ]
},, 
return22 
	resultado22 
;22 
}33 	
public55 
static55 
List55 
<55 1
%ValorDetalleMaestroDetalleTransaccion55 @
>55@ A
Convert55B I
(55I J
List55J N
<55N O:
.ValorDetalleMaestroDetalleTransaccionViewModel55O }
>55} ~
valoresModel	55 ã
)
55ã å
{66 	
List77 
<77 1
%ValorDetalleMaestroDetalleTransaccion77 6
>776 7
	resultado778 A
=77B C
new77D G
List77H L
<77L M1
%ValorDetalleMaestroDetalleTransaccion77M r
>77r s
(77s t
)77t u
;77u v
if:: 
(:: 
valoresModel:: 
!=:: 
null::  $
)::$ %
{;; 
foreach<< 
(<< 
var<< 

valorModel<< '
in<<( *
valoresModel<<+ 7
)<<7 8
{== 
foreach>> 
(>> 
var>>  
item>>! %
in>>& (

valorModel>>) 3
.>>3 4
Valores>>4 ;
)>>; <
{?? 
	resultado@@ !
.@@! "
Add@@" %
(@@% &
new@@& )1
%ValorDetalleMaestroDetalleTransaccion@@* O
(@@O P
)@@P Q
{AA 
IdDetalleMaestroBB ,
=BB- .
itemBB/ 3
.BB3 4
IdDetalleMaestroBB4 D
,BBD E 
IdDetalleTransaccionCC 0
=CC1 2
itemCC3 7
.CC7 8 
IdDetalleTransaccionCC8 L
,CCL M
NumeroDD "
=DD# $

valorModelDD% /
.DD/ 0
NumeroDD0 6
,DD6 7
ValorEE !
=EE" #
itemEE$ (
.EE( )
ValorEE) .
}FF 
)FF 
;FF 
}GG 
}HH 
}KK 
returnNN 
	resultadoNN 
;NN 
}OO 	
}QQ 
}UU •h
aD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Producto\ProductoParaVentaViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class &
ProductoParaVentaViewModel +
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

SoloNombre  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
NombreParaDetalle '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool 
EsBien 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
IdConceptoBasico #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public #
ConceptoBasicoViewModel &
ConceptoBasico' 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
List 
< 2
&Complemento_Concepto_Negocio_Comercial :
>: ;
Complementos< H
{I J
getK N
;N O
setP S
;S T
}U V
public 
string 
CodigoBarra !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
List 
< .
"PrecioParaRegistroDeVentaViewModel 6
>6 7
Precios8 ?
{@ A
getB E
;E F
setG J
;J K
}L M
public 
string 
NombreYPrecios $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
decimal 
Stock 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
IdActorVersion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
	IdVersion 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
VersionFila !
{" #
get$ '
;' (
set) ,
;, -
}. /
public!! 
decimal!! 
Precio!! 
{!! 
get!!  #
;!!# $
set!!% (
;!!( )
}!!* +
public"" 
decimal"" 
PrecioUnitario"" %
{""& '
get""( +
;""+ ,
set""- 0
;""0 1
}""2 3
public$$ 
bool$$ 
HayDescuento$$  
{$$! "
get$$# &
;$$& '
set$$( +
;$$+ ,
}$$- .
public%% 
decimal%% 
	Descuento%%  
{%%! "
get%%# &
;%%& '
set%%( +
;%%+ ,
}%%- .
public&& 
bool&& 
DescuentoPorcentaje&& '
{&&( )
get&&* -
;&&- .
set&&/ 2
;&&2 3
}&&4 5
public'' 
int'' #
CantidadMinimaDescuento'' *
{''+ ,
get''- 0
;''0 1
set''2 5
;''5 6
}''7 8
public(( 
int(( #
CantidadMaximaDescuento(( *
{((+ ,
get((- 0
;((0 1
set((2 5
;((5 6
}((7 8
public** &
ProductoParaVentaViewModel** )
(**) *
)*** +
{++ 	
},, 	
public.. &
ProductoParaVentaViewModel.. )
(..) *&
Concepto_Negocio_Comercial..* D
cnComercial..E P
)..P Q
{// 	
this00 
.00 
Id00 
=00 
cnComercial00 !
.00! "
Id00" $
;00$ %
this11 
.11 
CodigoBarra11 
=11 
cnComercial11 *
.11* +
CodigoBarra11+ 6
;116 7
this22 
.22 
Nombre22 
=22 
cnComercial22 %
.22% &
Nombre22& ,
;22, -
this33 
.33 

SoloNombre33 
=33 
cnComercial33 )
.33) *

SoloNombre33* 4
;334 5
this44 
.44 
NombreParaDetalle44 "
=44# $
cnComercial44% 0
.440 1
NombreParaDetalle441 B
;44B C
this55 
.55 
EsBien55 
=55 
cnComercial55 %
.55% &
EsBien55& ,
;55, -
this66 
.66 
IdConceptoBasico66 !
=66" #
cnComercial66$ /
.66/ 0
IdConceptoBasico660 @
;66@ A
this77 
.77 
Precios77 
=77 .
"PrecioParaRegistroDeVentaViewModel77 =
.77= >
Convert77> E
(77E F
cnComercial77F Q
.77Q R
Precios77R Y
.77Y Z
ToList77Z `
(77` a
)77a b
)77b c
;77c d
this88 
.88 
ConceptoBasico88 
=88  !
new88" %#
ConceptoBasicoViewModel88& =
(88= >
)88> ?
;88? @
}99 	
public;; 
static;; 
List;; 
<;; &
ProductoParaVentaViewModel;; 5
>;;5 6-
!ConvertProductoParaVentaViewModel;;7 X
(;;X Y
List;;Y ]
<;;] ^&
Concepto_Negocio_Comercial;;^ x
>;;x y)
conceptosNegociosComerciales	;;z ñ
)
;;ñ ó
{<< 	
List>> 
<>> &
ProductoParaVentaViewModel>> +
>>>+ ,
	productos>>- 6
=>>7 8
new>>9 <
List>>= A
<>>A B&
ProductoParaVentaViewModel>>B \
>>>\ ]
(>>] ^
)>>^ _
;>>_ `
foreach?? 
(?? 
var?? 
item?? 
in??  (
conceptosNegociosComerciales??! =
)??= >
{@@ 
	productosAA 
.AA 
AddAA 
(AA 
newAA !&
ProductoParaVentaViewModelAA" <
(AA< =
itemAA= A
)AAA B
)AAB C
;AAC D
}BB 
returnCC 
	productosCC 
;CC 
}DD 	
publicKK &
ProductoParaVentaViewModelKK )
(KK) *
ConceptoDeNegocioKK* ;
productoKK< D
,KKD E
intKKF I"
idCentroAtencionPrecioKKJ `
,KK` a
intKKa d!
idCentroAtencionStockKKe z
)KKz {
{LL 	
thisMM 
.MM 
IdMM 
=MM 
productoMM 
.MM 
IdMM !
;MM! "
thisNN 
.NN 
CodigoBarraNN 
=NN 
productoNN '
.NN' (
CodigoBarraNN( 3
;NN3 4
thisOO 
.OO 
NombreOO 
=OO 
productoOO "
.OO" #
NombreOO# )
;OO) *
thisPP 
.PP 
EsBienPP 
=PP 
productoPP "
.PP" #
EsBienPP# )
;PP) *
thisQQ 
.QQ 
StockQQ 
=QQ 
productoQQ !
.QQ! "
StockQQ" '
(QQ' (!
idCentroAtencionStockQQ( =
)QQ= >
;QQ> ?
thisRR 
.RR 
IdActorVersionRR 
=RR  !
productoRR" *
.RR* +
IdActorExistenciaRR+ <
(RR< =
)RR= >
;RR> ?
thisSS 
.SS 
	IdVersionSS 
=SS 
productoSS %
.SS% &
IdExistenciaSS& 2
(SS2 3
)SS3 4
;SS4 5
thisTT 
.TT 
VersionFilaTT 
=TT 
productoTT '
.TT' (
VersionFilaTT( 3
(TT3 4
)TT4 5
!=TT6 8
nullTT9 =
?TT> ?
ConvertTT@ G
.TTG H
ToBase64StringTTH V
(TTV W
productoTTW _
.TT_ `
VersionFilaTT` k
(TTk l
)TTl m
)TTm n
:TTo p
nullTTq u
;TTu v
thisUU 
.UU 
PrecioUU 
=UU 
productoUU "
.UU" #
PrecioVentaNormalUU# 4
(UU4 5"
idCentroAtencionPrecioUU5 K
)UUK L
;UUL M
thisVV 
.VV 
PreciosVV 
=VV .
"PrecioParaRegistroDeVentaViewModelVV <
.VV< =
ConvertVV= D
(VVD E
productoVVE M
.VVM N
PreciosVVN U
(VVU V"
idCentroAtencionPrecioVVV l
)VVl m
)VVm n
;VVn o
thisWW 
.WW 
NombreYPreciosWW 
=WW  !
CodigoBarraWW" -
+WW. /
$strWW0 5
+WW6 7
NombreWW8 >
+WW? @
$strWWA F
;WWG H
thisXX 
.XX 
PrecioUnitarioXX 
=XX  !
productoXX" *
.XX* +
PrecioVentaNormalXX+ <
(XX< ="
idCentroAtencionPrecioXX= S
)XXS T
;XXT U
foreachZZ 
(ZZ 
varZZ 
itemZZ 
inZZ  
PreciosZZ! (
)ZZ( )
{[[ 
this\\ 
.\\ 
NombreYPrecios\\ #
+=\\$ &
item\\' +
.\\+ ,
Codigo\\, 2
+\\3 4
$str\\5 8
;\\8 9
this]] 
.]] 
NombreYPrecios]] #
+=]]$ &
item]]' +
.]]+ ,
Valor]], 1
+]]2 3
$str]]4 9
;]]9 :
}^^ 
ifaa 
(aa 
productoaa 
.aa 
	Descuentoaa "
(aa" #
)aa# $
!=aa% '
nullaa( ,
)aa, -
{bb 
thiscc 
.cc 
HayDescuentocc !
=cc" #
truecc$ (
;cc( )
thisdd 
.dd 
	Descuentodd 
=dd  
productodd! )
.dd) *
	Descuentodd* 3
(dd3 4
)dd4 5
.dd5 6
valordd6 ;
;dd; <
thisee 
.ee 
DescuentoPorcentajeee (
=ee) *
(ee+ ,
boolee, 0
)ee0 1
productoee1 9
.ee9 :
	Descuentoee: C
(eeC D
)eeD E
.eeE F

porcentajeeeF P
;eeP Q
thisff 
.ff #
CantidadMinimaDescuentoff ,
=ff- .
(ff/ 0
intff0 3
)ff3 4
productoff4 <
.ff< =
	Descuentoff= F
(ffF G
)ffG H
.ffH I
cantidad_minimaffI X
;ffX Y
thisgg 
.gg #
CantidadMaximaDescuentogg ,
=gg- .
(gg/ 0
intgg0 3
)gg3 4
productogg4 <
.gg< =
	Descuentogg= F
(ggF G
)ggG H
.ggH I
cantidad_maximaggI X
;ggX Y
}hh 
elseii 
{jj 
thiskk 
.kk 
HayDescuentokk !
=kk" #
falsekk$ )
;kk) *
}ll 
}mm 	
publicoo 
staticoo 
Listoo 
<oo &
ProductoParaVentaViewModeloo 5
>oo5 6-
!ConvertProductoParaVentaViewModeloo7 X
(ooX Y
ListooY ]
<oo] ^
ConceptoDeNegociooo^ o
>ooo p
conceptosNegocio	ooq Å
,
ooÅ Ç
int
ooÉ Ü0
"idCentroAtencionQueTieneLosPrecios
ooá ©
,
oo© ™
int
oo´ Æ2
$idCentroAtencionQueTieneLaExistencia
ooØ ”
)
oo” ‘
{pp 	
Listqq 
<qq &
ProductoParaVentaViewModelqq +
>qq+ ,
	productosqq- 6
=qq7 8
newqq9 <
Listqq= A
<qqA B&
ProductoParaVentaViewModelqqB \
>qq\ ]
(qq] ^
)qq^ _
;qq_ `
foreachrr 
(rr 
varrr 
itemrr 
inrr  
conceptosNegociorr! 1
)rr1 2
{ss 
	productostt 
.tt 
Addtt 
(tt 
newtt !&
ProductoParaVentaViewModeltt" <
(tt< =
itemtt= A
,ttA B.
"idCentroAtencionQueTieneLosPreciosttC e
,tte f1
$idCentroAtencionQueTieneLaExistencia	ttg ã
)
ttã å
)
ttå ç
;
ttç é
}uu 
returnvv 
	productosvv 
;vv 
}ww 	
}zz 
}|| À
cD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Producto\ProductoParaAlmacenViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class (
ProductoParaAlmacenViewModel -
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
VersionFila !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Stock 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
	IdVersion 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
IdActorVersion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public (
ProductoParaAlmacenViewModel +
(+ ,
), -
{ 	
} 	
public (
ProductoParaAlmacenViewModel +
(+ ,
ConceptoDeNegocio, =
p> ?
,? @
intA D
idCentroAtencionE U
)U V
{ 	
this 
. 
Id 
= 
p 
. 
Id 
; 
this 
. 
Nombre 
= 
p 
. 
Nombre "
;" #
this 
. 
Stock 
= 
p 
. 
Stock  
(  !
idCentroAtencion! 1
)1 2
;2 3
this 
. 
VersionFila 
= 
p  
.  !
VersionFila! ,
(, -
)- .
!=/ 1
null2 6
?7 8
Convert9 @
.@ A
ToBase64StringA O
(O P
pP Q
.Q R
VersionFilaR ]
(] ^
)^ _
)_ `
:a b
nullc g
;g h
this   
.   
IdActorVersion   
=    !
p  " #
.  # $
IdActorExistencia  $ 5
(  5 6
)  6 7
;  7 8
this!! 
.!! 
	IdVersion!! 
=!! 
p!! 
.!! 
IdExistencia!! +
(!!+ ,
)!!, -
;!!- .
}"" 	
}$$ 
}%% ⁄;
bD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Producto\ProductoParaCompraViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class '
ProductoParaCompraViewModel ,
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

SoloNombre  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
NombreParaDetalle '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool 
EsBien 
{ 
get  
;  !
set" %
;% &
}' (
public #
ConceptoBasicoViewModel &
ConceptoBasico' 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
int 
IdActorVersion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
	IdVersion 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
VersionFila !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Stock 
{ 
get "
;" #
set$ '
;' (
}) *
public!! '
ProductoParaCompraViewModel!! *
(!!* +
)!!+ ,
{!!, -
}"" 	
public$$ '
ProductoParaCompraViewModel$$ *
($$* +&
Concepto_Negocio_Comercial$$+ E
cnComercial$$F Q
)$$Q R
{%% 	
this&& 
.&& 
Id&& 
=&& 
cnComercial&& !
.&&! "
Id&&" $
;&&$ %
this'' 
.'' 
Nombre'' 
='' 
cnComercial'' %
.''% &
Nombre''& ,
;'', -
this(( 
.(( 
Nombre(( 
=(( 
cnComercial(( %
.((% &
Nombre((& ,
;((, -
this)) 
.)) 

SoloNombre)) 
=)) 
cnComercial)) )
.))) *

SoloNombre))* 4
;))4 5
this** 
.** 
NombreParaDetalle** "
=**# $
cnComercial**% 0
.**0 1
NombreParaDetalle**1 B
;**B C
this++ 
.++ 
EsBien++ 
=++ 
cnComercial++ %
.++% &
EsBien++& ,
;++, -
this,, 
.,, 
ConceptoBasico,, 
=,,  !
new,," %#
ConceptoBasicoViewModel,,& =
(,,= >
),,> ?
;,,? @
}-- 	
public// 
static// 
List// 
<// '
ProductoParaCompraViewModel// 6
>//6 7.
"ConvertProductoParaCompraViewModel//8 Z
(//Z [
List//[ _
<//_ `&
Concepto_Negocio_Comercial//` z
>//z {)
conceptosNegociosComerciales	//| ò
)
//ò ô
{00 	
List11 
<11 '
ProductoParaCompraViewModel11 ,
>11, -
	productos11. 7
=118 9
new11: =
List11> B
<11B C'
ProductoParaCompraViewModel11C ^
>11^ _
(11_ `
)11` a
;11a b
foreach22 
(22 
var22 
item22 
in22  (
conceptosNegociosComerciales22! =
)22= >
{33 
	productos44 
.44 
Add44 
(44 
new44 !'
ProductoParaCompraViewModel44" =
(44= >
item44> B
)44B C
)44C D
;44D E
}55 
return66 
	productos66 
;66 
}77 	
public== '
ProductoParaCompraViewModel== *
(==* +
ConceptoDeNegocio==+ <
producto=== E
,==E F
int==G J
idEntidadInterna==K [
)==[ \
{>> 	
this?? 
.?? 
Id?? 
=?? 
producto?? 
.?? 
Id?? !
;??! "
this@@ 
.@@ 
Nombre@@ 
=@@ 
producto@@ "
.@@" #
CodigoBarra@@# .
+@@/ 0
$str@@1 6
+@@7 8
producto@@9 A
.@@A B
Nombre@@B H
;@@H I
thisAA 
.AA 

SoloNombreAA 
=AA 
productoAA &
.AA& '
NombreAA' -
;AA- .
thisBB 
.BB 
NombreParaDetalleBB "
=BB# $
productoBB% -
.BB- .
NombreBB. 4
;BB4 5
thisCC 
.CC 
StockCC 
=CC 
productoCC !
.CC! "
StockCC" '
(CC' (
idEntidadInternaCC( 8
)CC8 9
;CC9 :
thisDD 
.DD 
IdActorVersionDD 
=DD  !
productoDD" *
.DD* +
IdActorExistenciaDD+ <
(DD< =
)DD= >
;DD> ?
thisEE 
.EE 
	IdVersionEE 
=EE 
productoEE %
.EE% &
IdExistenciaEE& 2
(EE2 3
)EE3 4
;EE4 5
thisFF 
.FF 
VersionFilaFF 
=FF 
productoFF '
.FF' (
VersionFilaFF( 3
(FF3 4
)FF4 5
!=FF6 8
nullFF9 =
?FF> ?
ConvertFF@ G
.FFG H
ToBase64StringFFH V
(FFV W
productoFFW _
.FF_ `
VersionFilaFF` k
(FFk l
)FFl m
)FFm n
:FFo p
nullFFq u
;FFu v
}GG 	
publicII 
staticII 
ListII 
<II '
ProductoParaCompraViewModelII 6
>II6 7%
ConvertProductoParaCompraII8 Q
(IIQ R
ListIIR V
<IIV W
ConceptoDeNegocioIIW h
>IIh i
conceptosDeNegocioIIj |
,II| }
int	II~ Å,
idCentroDeAtencionSeleccionado
IIÇ †
)
II† °
{JJ 	
ListKK 
<KK '
ProductoParaCompraViewModelKK ,
>KK, -
	productosKK. 7
=KK8 9
newKK: =
ListKK> B
<KKB C'
ProductoParaCompraViewModelKKC ^
>KK^ _
(KK_ `
)KK` a
;KKa b
foreachLL 
(LL 
varLL 
itemLL 
inLL  
conceptosDeNegocioLL! 3
)LL3 4
{MM 
	productosNN 
.NN 
AddNN 
(NN 
newNN !'
ProductoParaCompraViewModelNN" =
(NN= >
itemNN> B
,NNB C*
idCentroDeAtencionSeleccionadoNND b
)NNb c
)NNc d
;NNd e
}OO 
returnPP 
	productosPP 
;PP 
}QQ 	
}SS 
}TT ·
_D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Producto\ReporteProductoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[ 
Serializable 
] 
public 

class $
ReporteProductoViewModel )
{ 
public 
string 
CodigoBarra !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
UnidadMedidad #
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
NombreBasico "
{# $
get% (
;( )
set* -
;- .
}/ 0
public $
ReporteProductoViewModel '
(' (
)( )
{ 	
} 	
public $
ReporteProductoViewModel '
(' (
string( .
codigoConcepto/ =
,= >
string? E
nombreF L
,L M
stringN T
unidadMedidadU b
,b c
intd g
stockh m
,n o
stringp v
nombreBasico	w É
,
É Ñ
string
Ñ ä"
nombreEntidadInterna
ã ü
,
ü †
int
† £
idEntidadInterna
§ ¥
)
¥ µ
{ 	
CodigoBarra 
= 
codigoConcepto (
;( )
Nombre 
= 
nombre 
; 
NombreBasico 
= 
nombreBasico '
;' (
UnidadMedidad 
= 
unidadMedidad )
;) *
} 	
public   $
ReporteProductoViewModel   '
(  ' (
ConceptoDeNegocio  ( 9
producto  : B
)  B C
{!! 	
CodigoBarra"" 
="" 
producto"" !
.""! "
CodigoBarra""" -
;""- .
Nombre## 
=## 
producto## 
.## 
Nombre## $
;##$ %
UnidadMedidad$$ 
=$$ 
producto$$ $
.$$$ %!
UnidadMedidaComercial$$% :
($$: ;
)$$; <
.$$< =
Codigo$$= C
;$$C D
NombreBasico%% 
=%% 
producto%% #
.%%# $
ConceptoBasico%%$ 2
(%%2 3
)%%3 4
.%%4 5
Nombre%%5 ;
;%%; <
}&& 	
public(( 
static(( 
List(( 
<(( $
ReporteProductoViewModel(( 3
>((3 4
Convert((5 <
(((< =
List((= A
<((A B
ConceptoDeNegocio((B S
>((S T
	productos((U ^
)((^ _
{)) 	
var** $
reporteProductoViewModel** (
=**) *
new**+ .
List**/ 3
<**3 4$
ReporteProductoViewModel**4 L
>**L M
(**M N
)**N O
;**O P
foreach++ 
(++ 
var++ 
producto++ %
in++& (
	productos++) 2
)++2 3
{,, $
reporteProductoViewModel-- (
.--( )
Add--) ,
(--, -
new--- 0$
ReporteProductoViewModel--1 I
(--I J
producto--J R
)--R S
)--S T
;--T U
}.. 
return// $
reporteProductoViewModel// 0
;//0 1
}00 	
}22 
}33 Æ
PD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\PropiedadViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public		 

class		 
PropiedadViewModel		 #
{

 
public 
string 
nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
formato 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
PropiedadViewModel !
(! "
)" #
{ 	
} 	
} 
} ∞#
aD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Proveedor\BandejaProveedorViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class %
BandejaProveedorViewModel *
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
TipoPersona !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string "
TipoDocumentoIdentidad ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public %
BandejaProveedorViewModel (
(( )
	Proveedor) 2
	proveedor3 <
)< =
{ 	
this 
. 
Id 
= 
	proveedor 
.  
Id  "
;" #
this 
. 
Codigo 
= 
	proveedor #
.# $
Codigo$ *
;* +
this 
. 
RazonSocial 
= 
	proveedor (
.( )
RazonSocial) 4
;4 5
this 
. $
NumeroDocumentoIdentidad )
=* +
	proveedor, 5
.5 6
DocumentoIdentidad6 H
;H I
this 
. "
TipoDocumentoIdentidad '
=( )
	proveedor* 3
.3 4(
CodigoTipoDocumentoIdentidad4 P
(P Q
)Q R
;R S
this   
.   
TipoPersona   
=   
	proveedor   (
.  ( )
TipoPersona  ) 4
(  4 5
)  5 6
;  6 7
if!! 
(!! 
	proveedor!! 
.!! 
DomicilioFiscal!! )
(!!) *
)!!* +
!=!!, .
null!!/ 3
)!!3 4
{"" 
this## 
.## 
	Direccion## 
=##  
(##! "
	proveedor##" +
.##+ ,
DomicilioFiscal##, ;
(##; <
)##< =
.##= >
detalle##> E
+##F G
$str##H M
+##N O
	proveedor##P Y
.##Y Z
DomicilioFiscal##Z i
(##i j
)##j k
.##k l
Ubigeo##l r
.##r s
descripcion_larga	##s Ñ
)
##Ñ Ö
.
##Ö Ü
ToUpper
##Ü ç
(
##ç é
)
##é è
;
##è ê
}$$ 
}%% 	
public'' 
static'' 
List'' 
<'' %
BandejaProveedorViewModel'' 4
>''4 5
Convert''6 =
(''= >
List''> B
<''B C
	Proveedor''C L
>''L M
proveedores''N Y
)''Y Z
{(( 	
var)) 
proveedores_)) 
=)) 
new)) "
List))# '
<))' (%
BandejaProveedorViewModel))( A
>))A B
())B C
)))C D
;))D E
foreach++ 
(++ 
var++ 
	proveedor++ "
in++# %
proveedores++& 1
)++1 2
{,, 
proveedores_-- 
.-- 
Add--  
(--  !
new--! $%
BandejaProveedorViewModel--% >
(--> ?
	proveedor--? H
)--H I
)--I J
;--J K
}.. 
return// 
proveedores_// 
;//  
}00 	
}11 
}44 ∞l
VD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Cliente\ClienteViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 
ClienteViewModel !
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
IdActor 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public "
ComboGenericoViewModel %
TipoPersona& 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public ,
 ComboDocumentoIdentidadViewModel /"
TipoDocumentoIdentidad0 F
{G H
getI L
;L M
setN Q
;Q R
}S T
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
ApellidoPaterno %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
ApellidoMaterno %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Nombres 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
NombreComercial %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
NombreCorto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Correo 
{ 
get "
;" #
set$ '
;' (
}) *
public   "
ComboGenericoViewModel   %
EstadoLegalActor  & 6
{  7 8
get  9 <
;  < =
set  > A
;  A B
}  C D
public!! "
ComboGenericoViewModel!! %

ClaseActor!!& 0
{!!1 2
get!!3 6
;!!6 7
set!!8 ;
;!!; <
}!!= >
public"" 
List"" 
<"" 
DireccionViewModel"" &
>""& '
Direcciones""( 3
{""4 5
get""6 9
;""9 :
set""; >
;""> ?
}""@ A
public## 
bool## 0
$mostrarApellidoPaternoMaternoYNombre## 8
{##9 :
get##; >
;##> ?
set##@ C
;##C D
}##E F
public$$ 
int$$ '
IdComprobantePredeterminado$$ .
{$$/ 0
get$$1 4
;$$4 5
set$$6 9
;$$9 :
}$$; <
public&& 
ClienteViewModel&& 
(&&  
)&&  !
{'' 	
})) 	
public** 
ClienteViewModel** 
(**  
Actor**  %
actor**& +
)**+ ,
{++ 	
this,, 
.,, 
IdActor,, 
=,, 
actor,,  
.,,  !
id,,! #
;,,# $
this-- 
.-- 
TipoPersona-- 
=-- 
new-- ""
ComboGenericoViewModel--# 9
(--9 :
actor--: ?
.--? @
id_tipo_actor--@ M
,--M N
actor--O T
.--T U

Tipo_actor--U _
.--_ `
nombre--` f
)--f g
;--g h
this.. 
... 
RazonSocial.. 
=.. 
actor.. $
...$ %
primer_nombre..% 2
;..2 3
this11 
.11 
ApellidoPaterno11  
=11! "
TipoPersona11# .
.11. /
Id11/ 1
==112 4
ActorSettings115 B
.11B C
Default11C J
.11J K%
IdTipoActorPersonaNatural11K d
?11e f
actor11g l
.11l m
primer_nombre11m z
.11z {
Split	11{ Ä
(
11Ä Å
$char
11Å Ñ
)
11Ñ Ö
[
11Ö Ü
$num
11Ü á
]
11á à
:
11â ä
$str
11ã ç
;
11ç é
this22 
.22 
ApellidoMaterno22  
=22! "
TipoPersona22# .
.22. /
Id22/ 1
==222 4
ActorSettings225 B
.22B C
Default22C J
.22J K%
IdTipoActorPersonaNatural22K d
?22e f
actor22g l
.22l m
primer_nombre22m z
.22z {
Split	22{ Ä
(
22Ä Å
$char
22Å Ñ
)
22Ñ Ö
[
22Ö Ü
$num
22Ü á
]
22á à
:
22â ä
$str
22ã ç
;
22ç é
this33 
.33 
Nombres33 
=33 
TipoPersona33 &
.33& '
Id33' )
==33* ,
ActorSettings33- :
.33: ;
Default33; B
.33B C%
IdTipoActorPersonaNatural33C \
?33] ^
actor33_ d
.33d e
primer_nombre33e r
.33r s
Split33s x
(33x y
$char33y |
)33| }
[33} ~
$num33~ 
]	33 Ä
:
33Å Ç
$str
33É Ö
;
33Ö Ü
this44 
.44 
Telefono44 
=44 
actor44 !
.44! "
telefono44" *
;44* +
this66 
.66 
NombreComercial66  
=66! "
actor66# (
.66( )
segundo_nombre66) 7
;667 8
this77 
.77 
NombreCorto77 
=77 
actor77 $
.77$ %
tercer_nombre77% 2
;772 3
this88 
.88 
Correo88 
=88 
actor88 
.88  
correo88  &
;88& '
this99 
.99 

ClaseActor99 
=99 
new99 !"
ComboGenericoViewModel99" 8
(998 9
actor999 >
.99> ?
id_clase_actor99? M
,99M N
actor99O T
.99T U
Clase_actor99U `
.99` a
nombre99a g
)99g h
;99h i
this:: 
.:: 
EstadoLegalActor:: !
=::" #
new::$ '"
ComboGenericoViewModel::( >
(::> ?
actor::? D
.::D E
id_estado_legal::E T
,::T U
actor::V [
.::[ \
Estado_legal::\ h
.::h i
nombre::i o
)::o p
;::p q
this;; 
.;; "
TipoDocumentoIdentidad;; '
=;;( )
new;;* -,
 ComboDocumentoIdentidadViewModel;;. N
(;;N O
actor;;O T
.;;T U"
id_documento_identidad;;U k
,;;k l
actor;;m r
.;;r s
Detalle_maestro	;;s Ç
.
;;Ç É
codigo
;;É â
)
;;â ä
;
;;ä ã
this<< 
.<< $
NumeroDocumentoIdentidad<< )
=<<* +
actor<<, 1
.<<1 2&
numero_documento_identidad<<2 L
;<<L M
this== 
.== 
Telefono== 
=== 
actor== !
.==! "
telefono==" *
;==* +
this>> 
.>> 0
$mostrarApellidoPaternoMaternoYNombre>> 5
=>>6 7
this>>8 <
.>>< =
TipoPersona>>= H
.>>H I
Id>>I K
==>>L N
ActorSettings>>O \
.>>\ ]
Default>>] d
.>>d e1
$IdClaseActorPersonaNaturalPorDefecto	>>e â
;
>>â ä
if?? 
(?? 
actor?? 
.?? 
	Direccion?? 
.??  
Any??  #
(??# $
)??$ %
)??% &
{@@ 
thisAA 
.AA 
DireccionesAA  
=AA! "
DireccionViewModelAA# 5
.AA5 6
ConvertAA6 =
(AA= >
actorAA> C
.AAC D
	DireccionAAD M
.AAM N
ToListAAN T
(AAT U
)AAU V
)AAV W
;AAW X
}BB 
}CC 	
publicDD 
ClienteViewModelDD 
(DD  
ClienteDD  '
clienteDD( /
)DD/ 0
{EE 	
thisFF 
.FF 
IdFF 
=FF 
clienteFF 
.FF 
IdFF  
;FF  !
thisGG 
.GG 
IdActorGG 
=GG 
clienteGG "
.GG" #
ActorDeNegocioGG# 1
.GG1 2
ActorGG2 7
.GG7 8
idGG8 :
;GG: ;
thisHH 
.HH 
TipoPersonaHH 
=HH 
newHH ""
ComboGenericoViewModelHH# 9
(HH9 :
clienteHH: A
.HHA B
IdTipoPersonaHHB O
,HHO P
clienteHHQ X
.HHX Y
TipoPersonaHHY d
(HHd e
)HHe f
)HHf g
;HHg h
thisII 
.II 
CodigoII 
=II 
clienteII !
.II! "
CodigoII" (
;II( )
thisJJ 
.JJ 
RazonSocialJJ 
=JJ 
clienteJJ &
.JJ& '
RazonSocialJJ' 2
;JJ2 3
thisKK 
.KK 
ApellidoPaternoKK  
=KK! "
clienteKK# *
.KK* +
ApellidoPaternoKK+ :
;KK: ;
thisLL 
.LL 
ApellidoMaternoLL  
=LL! "
clienteLL# *
.LL* +
ApellidoMaternoLL+ :
;LL: ;
thisMM 
.MM 
NombresMM 
=MM 
clienteMM "
.MM" #
NombresMM# *
;MM* +
thisNN 
.NN 
NombreComercialNN  
=NN! "
clienteNN# *
.NN* +
NombreComercialNN+ :
;NN: ;
thisOO 
.OO 
NombreCortoOO 
=OO 
clienteOO &
.OO& '
NombreCortoOO' 2
;OO2 3
thisPP 
.PP 
CorreoPP 
=PP 
clientePP !
.PP! "
CorreoPP" (
(PP( )
)PP) *
;PP* +
thisQQ 
.QQ 
TelefonoQQ 
=QQ 
clienteQQ #
.QQ# $
TelefonoQQ$ ,
(QQ, -
)QQ- .
;QQ. /
thisRR 
.RR 

ClaseActorRR 
=RR 
newRR !"
ComboGenericoViewModelRR" 8
(RR8 9
clienteRR9 @
.RR@ A
IdClaseActorRRA M
,RRM N
clienteRRO V
.RRV W

ClaseActorRRW a
(RRa b
)RRb c
.RRc d
nombreRRd j
)RRj k
;RRk l
thisSS 
.SS 
EstadoLegalActorSS !
=SS" #
newSS$ '"
ComboGenericoViewModelSS( >
(SS> ?
clienteSS? F
.SSF G
IdEstadoLegalSSG T
,SST U
clienteSSV ]
.SS] ^
EstadoLegalSS^ i
(SSi j
)SSj k
.SSk l
nombreSSl r
)SSr s
;SSs t
thisTT 
.TT "
TipoDocumentoIdentidadTT '
=TT( )
newTT* -,
 ComboDocumentoIdentidadViewModelTT. N
(TTN O
clienteTTO V
.TTV W$
IdTipoDocumentoIdentidadTTW o
,TTo p
clienteTTq x
.TTx y)
CodigoTipoDocumentoIdentidad	TTy ï
(
TTï ñ
)
TTñ ó
)
TTó ò
;
TTò ô
thisUU 
.UU $
NumeroDocumentoIdentidadUU )
=UU* +
clienteUU, 3
.UU3 4
DocumentoIdentidadUU4 F
;UUF G
thisVV 
.VV 0
$mostrarApellidoPaternoMaternoYNombreVV 5
=VV6 7
thisVV8 <
.VV< =
TipoPersonaVV= H
.VVH I
IdVVI K
==VVL N
ActorSettingsVVO \
.VV\ ]
DefaultVV] d
.VVd e1
$IdClaseActorPersonaNaturalPorDefecto	VVe â
;
VVâ ä
thisWW 
.WW 
DireccionesWW 
=WW 
newWW "
ListWW# '
<WW' (
DireccionViewModelWW( :
>WW: ;
(WW; <
)WW< =
;WW= >
varXX 
domicilioFiscalXX 
=XX  !
clienteXX" )
.XX) *
DomicilioFiscalXX* 9
(XX9 :
)XX: ;
;XX; <
ifYY 
(YY 
domicilioFiscalYY 
!=YY  "
nullYY# '
)YY' (
{ZZ 
Direcciones[[ 
.[[ 
Add[[ 
([[  
new[[  #
DireccionViewModel[[$ 6
([[6 7
domicilioFiscal[[7 F
)[[F G
)[[G H
;[[H I
}\\ 
this]] 
.]] '
IdComprobantePredeterminado]] ,
=]]- .
cliente]]/ 6
.]]6 7'
IdComprobantePredeterminado]]7 R
(]]R S
)]]S T
;]]T U
}__ 	
}aa 
}dd ›)
]D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Cliente\BandejaClienteViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class #
BandejaClienteViewModel (
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
TipoPersona !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string "
TipoDocumentoIdentidad ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Correo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public #
BandejaClienteViewModel &
(& '
Cliente' .
cliente/ 6
)6 7
{ 	
this 
. 
Id 
= 
cliente 
. 
Id  
;  !
this 
. 
Codigo 
= 
cliente !
.! "
Codigo" (
;( )
this 
. 
RazonSocial 
= 
cliente &
.& '
RazonSocial' 2
;2 3
this   
.   $
NumeroDocumentoIdentidad   )
=  * +
cliente  , 3
.  3 4
DocumentoIdentidad  4 F
;  F G
this!! 
.!! "
TipoDocumentoIdentidad!! '
=!!( )
cliente!!* 1
.!!1 2(
CodigoTipoDocumentoIdentidad!!2 N
(!!N O
)!!O P
;!!P Q
this"" 
."" 
TipoPersona"" 
="" 
cliente"" &
.""& '
TipoPersona""' 2
(""2 3
)""3 4
;""4 5
this## 
.## 
Telefono## 
=## 
cliente## #
.### $
Telefono##$ ,
(##, -
)##- .
;##. /
this$$ 
.$$ 
Correo$$ 
=$$ 
cliente$$ !
.$$! "
Correo$$" (
($$( )
)$$) *
;$$* +
if%% 
(%% 
cliente%% 
.%% 
DomicilioFiscal%% '
(%%' (
)%%( )
!=%%* ,
null%%- 1
)%%1 2
{&& 
this'' 
.'' 
	Direccion'' 
=''  
(''! "
cliente''" )
.'') *
DomicilioFiscal''* 9
(''9 :
)'': ;
.''; <
detalle''< C
+''D E
$str''F K
+''L M
cliente''N U
.''U V
DomicilioFiscal''V e
(''e f
)''f g
.''g h
Ubigeo''h n
.''n o
descripcion_larga	''o Ä
)
''Ä Å
.
''Å Ç
ToUpper
''Ç â
(
''â ä
)
''ä ã
;
''ã å
}(( 
})) 	
public++ 
static++ 
List++ 
<++ #
BandejaClienteViewModel++ 2
>++2 3
Convert++4 ;
(++; <
List++< @
<++@ A
Cliente++A H
>++H I
clientes++J R
)++R S
{,, 	
var-- 
	clientes_-- 
=-- 
new-- 
List--  $
<--$ %#
BandejaClienteViewModel--% <
>--< =
(--= >
)--> ?
;--? @
foreach// 
(// 
var// 
cliente//  
in//! #
clientes//$ ,
)//, -
{00 
	clientes_11 
.11 
Add11 
(11 
new11 !#
BandejaClienteViewModel11" 9
(119 :
cliente11: A
)11A B
)11B C
;11C D
}22 
return33 
	clientes_33 
.33 
OrderByDescending33 .
(33. /
c33/ 0
=>331 3
c334 5
.335 6
Id336 8
)338 9
.339 :
ToList33: @
(33@ A
)33A B
;33B C
}44 	
}55 
}88 ﬁJ
ZD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\ComboActorComercialViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class (
ComboActorComercialViewModel -
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public (
ComboActorComercialViewModel +
(+ ,
), -
{ 	
} 	
public (
ComboActorComercialViewModel +
(+ ,
int, /
id0 2
,2 3
string4 :
razonSocial; F
,F G
stringH N$
numeroDocuemntoIdentidadO g
)g h
{ 	
this 
. 
Id 
= 
id 
; 
this 
. 
RazonSocial 
= 
razonSocial *
;* +
this 
. $
NumeroDocumentoIdentidad )
=* +$
numeroDocuemntoIdentidad, D
;D E
} 	
public 
static 
List 
< (
ComboActorComercialViewModel 7
>7 8
Convert9 @
(@ A
ListA E
<E F
ClienteF M
>M N
clientesO W
)W X
{ 	
List 
< (
ComboActorComercialViewModel -
>- . 
comboGenericoActores/ C
=D E
newF I
ListJ N
<N O(
ComboActorComercialViewModelO k
>k l
(l m
)m n
;n o
foreach   
(   
var   
cleinte    
in  ! #
clientes  $ ,
)  , -
{!!  
comboGenericoActores"" $
.""$ %
Add""% (
(""( )
new"") ,(
ComboActorComercialViewModel""- I
(""I J
cleinte""J Q
.""Q R
Id""R T
,""T U
cleinte""V ]
.""] ^
RazonSocial""^ i
,""i j
cleinte""k r
.""r s
DocumentoIdentidad	""s Ö
)
""Ö Ü
)
""Ü á
;
""á à
}## 
return$$  
comboGenericoActores$$ '
;$$' (
}%% 	
public'' 
static'' 
List'' 
<'' (
ComboActorComercialViewModel'' 7
>''7 8
Convert''9 @
(''@ A
List''A E
<''E F
	Proveedor''F O
>''O P
proveedores''Q \
)''\ ]
{(( 	
List)) 
<)) (
ComboActorComercialViewModel)) -
>))- . 
comboGenericoActores))/ C
=))D E
new))F I
List))J N
<))N O(
ComboActorComercialViewModel))O k
>))k l
())l m
)))m n
;))n o
foreach** 
(** 
var** 

prooveedor** #
in**$ &
proveedores**' 2
)**2 3
{++  
comboGenericoActores,, $
.,,$ %
Add,,% (
(,,( )
new,,) ,(
ComboActorComercialViewModel,,- I
(,,I J

prooveedor,,J T
.,,T U
Id,,U W
,,,W X

prooveedor,,Y c
.,,c d
RazonSocial,,d o
,,,o p

prooveedor,,q {
.,,{ |
DocumentoIdentidad	,,| é
)
,,é è
)
,,è ê
;
,,ê ë
}-- 
return..  
comboGenericoActores.. '
;..' (
}// 	
public11 
static11 
List11 
<11 (
ComboActorComercialViewModel11 7
>117 8
Convert119 @
(11@ A
List11A E
<11E F
Empleado11F N
>11N O
	empleados11P Y
)11Y Z
{22 	
List33 
<33 (
ComboActorComercialViewModel33 -
>33- . 
comboGenericoActores33/ C
=33D E
new33F I
List33J N
<33N O(
ComboActorComercialViewModel33O k
>33k l
(33l m
)33m n
;33n o
foreach44 
(44 
var44 
empleado44 !
in44" $
	empleados44% .
)44. /
{55  
comboGenericoActores66 $
.66$ %
Add66% (
(66( )
new66) ,(
ComboActorComercialViewModel66- I
(66I J
empleado66J R
.66R S
Id66S U
,66U V
empleado66W _
.66_ `
NombreCompleto66` n
,66n o
empleado66p x
.66x y
DocumentoIdentidad	66y ã
)
66ã å
)
66å ç
;
66ç é
}77 
return88  
comboGenericoActores88 '
;88' (
}99 	
}:: 
public<< 

class<< (
ComboCentroAtencionViewModel<< -
{== 
public>> 
int>> 
Id>> 
{>> 
get>> 
;>> 
set>>  
;>>  !
}>>" #
public?? 
string?? 
Codigo?? 
{?? 
get?? "
;??" #
set??$ '
;??' (
}??) *
public@@ 
string@@ 
Nombre@@ 
{@@ 
get@@ "
;@@" #
set@@$ '
;@@' (
}@@) *
publicBB (
ComboCentroAtencionViewModelBB +
(BB+ ,
)BB, -
{CC 	
}EE 	
publicFF (
ComboCentroAtencionViewModelFF +
(FF+ ,
intFF, /
idFF0 2
,FF2 3
stringFF4 :
codigoFF; A
,FFA B
stringFFC I
nombreFFJ P
)FFP Q
{GG 	
thisHH 
.HH 
IdHH 
=HH 
idHH 
;HH 
thisII 
.II 
CodigoII 
=II 
codigoII  
;II  !
thisJJ 
.JJ 
NombreJJ 
=JJ 
nombreJJ  
;JJ  !
}KK 	
publicMM 
staticMM 
ListMM 
<MM (
ComboCentroAtencionViewModelMM 7
>MM7 8
ConvertMM9 @
(MM@ A
ListMMA E
<MME F%
CentroDeAtencionExtendidoMMF _
>MM_ `
centrosDeAtencionMMa r
)MMr s
{NN 	
ListOO 
<OO (
ComboCentroAtencionViewModelOO -
>OO- . 
comboGenericoActoresOO/ C
=OOD E
newOOF I
ListOOJ N
<OON O(
ComboCentroAtencionViewModelOOO k
>OOk l
(OOl m
)OOm n
;OOn o
foreachPP 
(PP 
varPP 
itemPP 
inPP  
centrosDeAtencionPP! 2
)PP2 3
{QQ  
comboGenericoActoresRR $
.RR$ %
AddRR% (
(RR( )
newRR) ,(
ComboCentroAtencionViewModelRR- I
(RRI J
itemRRJ N
.RRN O
IdRRO Q
,RRQ R
itemRRS W
.RRW X
CodigoRRX ^
,RR^ _
itemRR` d
.RRd e
CodigoRRe k
+RRl m
$strRRn s
+RRt u
itemRRv z
.RRz {%
EstablecimientoComercial	RR{ ì
.
RRì î
NombreInterno
RRî °
+
RR¢ £
$str
RR§ ©
+
RR™ ´
item
RR¨ ∞
.
RR∞ ±
Nombre
RR± ∑
)
RR∏ π
)
RRπ ∫
;
RR∫ ª
}SS 
returnTT  
comboGenericoActoresTT '
;TT' (
}UU 	
publicWW 
staticWW 
ListWW 
<WW (
ComboCentroAtencionViewModelWW 7
>WW7 8
ConvertWW9 @
(WW@ A
ListWWA E
<WWE F
EmpleadoWWF N
>WWN O
	empleadosWWP Y
)WWY Z
{XX 	
ListYY 
<YY (
ComboCentroAtencionViewModelYY -
>YY- . 
comboGenericoActoresYY/ C
=YYD E
newYYF I
ListYYJ N
<YYN O(
ComboCentroAtencionViewModelYYO k
>YYk l
(YYl m
)YYm n
;YYn o
foreachZZ 
(ZZ 
varZZ 
itemZZ 
inZZ  
	empleadosZZ! *
)ZZ* +
{[[  
comboGenericoActores\\ $
.\\$ %
Add\\% (
(\\( )
new\\) ,(
ComboCentroAtencionViewModel\\- I
(\\I J
item\\J N
.\\N O
Id\\O Q
,\\Q R
item\\S W
.\\W X
Codigo\\X ^
,\\^ _
item\\` d
.\\d e
Codigo\\e k
+\\l m
$str\\n s
+\\t u
item\\v z
.\\z {
NombreCompleto	\\{ â
)
\\â ä
)
\\ä ã
;
\\ã å
}]] 
return^^  
comboGenericoActores^^ '
;^^' (
}__ 	
}`` 
}aa Û
PD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\ComboActorGenerico.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[		 
Serializable		 
]		 
[

 
DataContract

 
]

 
public 

class 
ComboActorGenerico #
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
NombreCorto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 

IdTipoPago 
{ 
get  #
;# $
set% (
;( )
}* +
public 
ComboActorGenerico !
(! "
)" #
{ 	
} 	
public 
ComboActorGenerico !
(! "
int" %
id& (
,( )
string* 0$
numeroDocumentoIdentidad1 I
,I J
stringJ P
razonSocialQ \
)\ ]
{ 	
this 
. 
Id 
= 
id 
; 
this 
. $
NumeroDocumentoIdentidad )
=* +$
numeroDocumentoIdentidad, D
;D E
this 
. 
RazonSocial 
= 
razonSocial *
;* +
} 	
public 
ComboActorGenerico !
(! "
int" %
id& (
,( )
string* 0$
numeroDocumentoIdentidad1 I
,I J
stringK Q
razonSocialR ]
,] ^
string^ d
nombreCortoe p
)p q
{   	
this!! 
.!! 
Id!! 
=!! 
id!! 
;!! 
this"" 
."" $
NumeroDocumentoIdentidad"" )
=""* +$
numeroDocumentoIdentidad"", D
;""D E
this## 
.## 
RazonSocial## 
=## 
razonSocial## *
;##* +
this$$ 
.$$ 
NombreCorto$$ 
=$$ 
nombreCorto$$ *
;$$* +
}%% 	
public&& 
ComboActorGenerico&& !
(&&! "
int&&" %
id&&& (
,&&( )
string&&* 0$
numeroDocumentoIdentidad&&1 I
,&&I J
string&&K Q
razonSocial&&R ]
,&&] ^
string&&_ e
nombreCorto&&f q
,&&q r
int&&r u
idTipoDePago	&&v Ç
)
&&Ç É
{'' 	
this(( 
.(( 
Id(( 
=(( 
id(( 
;(( 
this)) 
.)) $
NumeroDocumentoIdentidad)) )
=))* +$
numeroDocumentoIdentidad)), D
;))D E
this** 
.** 
RazonSocial** 
=** 
razonSocial** *
;*** +
this++ 
.++ 
NombreCorto++ 
=++ 
nombreCorto++ *
;++* +
this,, 
.,, 

IdTipoPago,, 
=,, 
idTipoDePago,, *
;,,* +
}-- 	
}.. 
}// … 
KD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\ComboGenerico.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
[		 
DataContract		 
]		 
public

 

class

 
ComboGenerico

 
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
Longitud 
{ 
get !
;! "
set# &
;& '
}( )
public 
ComboGenerico 
( 
) 
{ 	
} 	
public 
ComboGenerico 
( 
int  
id! #
,# $
string% +
nombre, 2
,2 3
string4 :
codigo; A
)A B
{ 	
this 
. 
Id 
= 
id 
; 
this 
. 
Nombre 
= 
nombre  
;  !
this 
. 
Codigo 
= 
codigo  
;  !
} 	
public 
ComboGenerico 
( 
int  
id! #
,# $
string% +
nombre, 2
)2 3
{ 	
this 
. 
Id 
= 
id 
; 
this 
. 
Nombre 
= 
nombre  
;  !
} 	
public!! 
ComboGenerico!! 
(!! 
int!!  
id!!! #
,!!# $
string!!% +
nombre!!, 2
,!!2 3
int!!4 7
longitud!!8 @
)!!@ A
{"" 	
this## 
.## 
Id## 
=## 
id## 
;## 
this$$ 
.$$ 
Nombre$$ 
=$$ 
nombre$$  
;$$  !
this%% 
.%% 
Longitud%% 
=%% 
longitud%% $
;%%$ %
}&& 	
public'' 
List'' 
<'' 
ComboGenerico'' !
>''! "
Convert''# *
(''* +
List''+ /
<''/ 0
Detalle_maestro''0 ?
>''? @
list''A E
)''E F
{(( 	
List)) 
<)) 
ComboGenerico)) 
>)) 
	respuesta))  )
=))* +
new)), /
List))0 4
<))4 5
ComboGenerico))5 B
>))B C
())C D
)))D E
;))E F
for** 
(** 
int** 
i** 
=** 
$num** 
;** 
i** 
<** 
list**  $
.**$ %
Count**% *
;*** +
i**, -
++**- /
)**/ 0
{++ 
Detalle_maestro,, 
t,,  !
=,," #
list,,$ (
[,,( )
i,,) *
],,* +
;,,+ ,
ComboGenerico-- 
c-- 
=--  !
new--" %
ComboGenerico--& 3
(--3 4
t--4 5
.--5 6
id--6 8
,--8 9
t--: ;
.--; <
nombre--< B
,--B C
t--D E
.--E F
codigo--F L
)--L M
;--M N
	respuesta.. 
... 
Add.. 
(.. 
c.. 
)..  
;..  !
}// 
return00 
	respuesta00 
;00 
}11 	
}>> 
}?? ßÍ
ND:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\CombosViewModels.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public 

class "
ComboGenericoViewModel '
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public "
ComboGenericoViewModel %
(% &
)& '
{ 	
} 	
public "
ComboGenericoViewModel %
(% &
int& )
id* ,
,, -
string. 4
nombre5 ;
); <
{ 	
this 
. 
Id 
= 
id 
; 
this 
. 
Nombre 
= 
nombre  
.  !
ToUpper! (
(( )
)) *
;* +
} 	
public 
static 
List 
< "
ComboGenericoViewModel 1
>1 2
Convert3 :
(: ;
List; ?
<? @
CentroDeAtencion@ P
>P Q
actoresR Y
)Y Z
{ 	
List   
<   "
ComboGenericoViewModel   '
>  ' ( 
comboGenericoActores  ) =
=  > ?
new  @ C
List  D H
<  H I"
ComboGenericoViewModel  I _
>  _ `
(  ` a
)  a b
;  b c
foreach!! 
(!! 
var!! 
actor!! 
in!! !
actores!!" )
)!!) *
{""  
comboGenericoActores## $
.##$ %
Add##% (
(##( )
new##) ,"
ComboGenericoViewModel##- C
(##C D
actor##D I
.##I J
Id##J L
,##L M
actor##N S
.##S T
Nombre##T Z
)##Z [
)##[ \
;##\ ]
}$$ 
return%%  
comboGenericoActores%% '
;%%' (
}&& 	
public(( 
static(( 
List(( 
<(( "
ComboGenericoViewModel(( 1
>((1 2
Convert((3 :
(((: ;
List((; ?
<((? @%
CentroDeAtencionExtendido((@ Y
>((Y Z
centrosDeAtencion(([ l
)((l m
{)) 	
List** 
<** "
ComboGenericoViewModel** '
>**' ( 
comboGenericoActores**) =
=**> ?
new**@ C
List**D H
<**H I"
ComboGenericoViewModel**I _
>**_ `
(**` a
)**a b
;**b c
foreach++ 
(++ 
var++ 
item++ 
in++  
centrosDeAtencion++! 2
)++2 3
{,,  
comboGenericoActores-- $
.--$ %
Add--% (
(--( )
new--) ,"
ComboGenericoViewModel--- C
(--C D
item--D H
.--H I
Id--I K
,--K L
item--M Q
.--Q R
Nombre--R X
)--X Y
)--Y Z
;--Z [
}.. 
return//  
comboGenericoActores// '
;//' (
}00 	
public22 
static22 
List22 
<22 "
ComboGenericoViewModel22 1
>221 2
ConvertirConCodigo223 E
(22E F
List22F J
<22J K%
CentroDeAtencionExtendido22K d
>22d e
centrosDeAtencion22f w
)22w x
{33 	
List44 
<44 "
ComboGenericoViewModel44 '
>44' ( 
comboGenericoActores44) =
=44> ?
new44@ C
List44D H
<44H I"
ComboGenericoViewModel44I _
>44_ `
(44` a
)44a b
;44b c
foreach55 
(55 
var55 
item55 
in55  
centrosDeAtencion55! 2
)552 3
{66  
comboGenericoActores77 $
.77$ %
Add77% (
(77( )
new77) ,"
ComboGenericoViewModel77- C
(77C D
item77D H
.77H I
Id77I K
,77K L
item77M Q
.77Q R
Codigo77R X
+77Y Z
$str77[ `
+77` a
item77b f
.77f g
Nombre77g m
)77m n
)77n o
;77o p
}88 
return99  
comboGenericoActores99 '
;99' (
}:: 	
public<< 
static<< 
List<< 
<<< "
ComboGenericoViewModel<< 1
><<1 2
Convert<<3 :
(<<: ;
List<<; ?
<<<? @
Sucursal<<@ H
><<H I

sucursales<<J T
)<<T U
{== 	
List>> 
<>> "
ComboGenericoViewModel>> '
>>>' (#
comboGenericoSucursales>>) @
=>>A B
new>>C F
List>>G K
<>>K L"
ComboGenericoViewModel>>L b
>>>b c
(>>c d
)>>d e
;>>e f
foreach?? 
(?? 
var?? 
item?? 
in??  

sucursales??! +
)??+ ,
{@@ #
comboGenericoSucursalesAA '
.AA' (
AddAA( +
(AA+ ,
newAA, /"
ComboGenericoViewModelAA0 F
(AAF G
itemAAG K
.AAK L
IdAAL N
,AAN O
itemAAP T
.AAT U
NombreInternoAAU b
)AAb c
)AAc d
;AAd e
}BB 
returnCC #
comboGenericoSucursalesCC *
;CC* +
}DD 	
publicFF 
staticFF 
ListFF 
<FF "
ComboGenericoViewModelFF 1
>FF1 2
ConvertFF3 :
(FF: ;
ListFF; ?
<FF? @-
!EstablecimientoComercialExtendidoFF@ a
>FFa b
establecimientosFFc s
)FFs t
{GG 	
ListHH 
<HH "
ComboGenericoViewModelHH '
>HH' (
comboGenericoHH) 6
=HH7 8
newHH9 <
ListHH= A
<HHA B"
ComboGenericoViewModelHHB X
>HHX Y
(HHY Z
)HHZ [
;HH[ \
foreachII 
(II 
varII 
itemII 
inII  
establecimientosII! 1
)II1 2
{JJ 
comboGenericoKK 
.KK 
AddKK !
(KK! "
newKK" %"
ComboGenericoViewModelKK& <
(KK< =
itemKK= A
.KKA B
IdKKB D
,KKD E
itemKKF J
.KKJ K
NombreInternoKKK X
)KKX Y
)KKY Z
;KKZ [
}LL 
returnMM 
comboGenericoMM  
;MM  !
}NN 	
publicPP 
staticPP 
ListPP 
<PP "
ComboGenericoViewModelPP 1
>PP1 2
ConvertPP3 :
(PP: ;
ListPP; ?
<PP? @
TipoDeTransaccionPP@ Q
>PPQ R
tiposTransaccionPPS c
)PPc d
{QQ 	
ListRR 
<RR "
ComboGenericoViewModelRR '
>RR' ()
comboGenericoTiposTransaccionRR) F
=RRG H
newRRI L
ListRRM Q
<RRQ R"
ComboGenericoViewModelRRR h
>RRh i
(RRi j
)RRj k
;RRk l
foreachSS 
(SS 
varSS 
itemSS 
inSS  
tiposTransaccionSS! 1
)SS1 2
{TT )
comboGenericoTiposTransaccionUU -
.UU- .
AddUU. 1
(UU1 2
newUU2 5"
ComboGenericoViewModelUU6 L
(UUL M
itemUUM Q
.UUQ R
IdUUR T
,UUT U
itemUUV Z
.UUZ [
NombreUU[ a
)UUa b
)UUb c
;UUc d
}VV 
returnWW )
comboGenericoTiposTransaccionWW 0
;WW0 1
}XX 	
publicZZ 
staticZZ 
ListZZ 
<ZZ "
ComboGenericoViewModelZZ 1
>ZZ1 2
ConvertZZ3 :
(ZZ: ;
ListZZ; ?
<ZZ? @
TipoDeComprobanteZZ@ Q
>ZZQ R
tiposDeComprobanteZZS e
)ZZe f
{[[ 	
List\\ 
<\\ "
ComboGenericoViewModel\\ '
>\\' (+
comboGenericoTiposDeComprobante\\) H
=\\I J
new\\K N
List\\O S
<\\S T"
ComboGenericoViewModel\\T j
>\\j k
(\\k l
)\\l m
;\\m n
foreach]] 
(]] 
var]] 
item]] 
in]]  
tiposDeComprobante]]! 3
)]]3 4
{^^ +
comboGenericoTiposDeComprobante__ /
.__/ 0
Add__0 3
(__3 4
new__4 7"
ComboGenericoViewModel__8 N
(__N O
item__O S
.__S T
Id__T V
,__V W
item__X \
.__\ ]
Nombre__] c
)__c d
)__d e
;__e f
}`` 
returnaa +
comboGenericoTiposDeComprobanteaa 2
;aa2 3
}bb 	
publicdd 
staticdd 
Listdd 
<dd "
ComboGenericoViewModeldd 1
>dd1 2
Convertdd3 :
(dd: ;
Listdd; ?
<dd? @
RolDeNegociodd@ L
>ddL M
rolesDeNegocioddN \
)dd\ ]
{ee 	
Listff 
<ff "
ComboGenericoViewModelff '
>ff' (%
comboGenericoRolDeNegocioff) B
=ffC D
newffE H
ListffI M
<ffM N"
ComboGenericoViewModelffN d
>ffd e
(ffe f
)fff g
;ffg h
foreachgg 
(gg 
vargg 
itemgg 
ingg  
rolesDeNegociogg! /
)gg/ 0
{hh %
comboGenericoRolDeNegocioii )
.ii) *
Addii* -
(ii- .
newii. 1"
ComboGenericoViewModelii2 H
(iiH I
itemiiI M
.iiM N
IdiiN P
,iiP Q
itemiiR V
.iiV W
NombreiiW ]
)ii] ^
)ii^ _
;ii_ `
}jj 
returnkk %
comboGenericoRolDeNegociokk ,
;kk, -
}ll 	
publicmm 
staticmm 
Listmm 
<mm "
ComboGenericoViewModelmm 1
>mm1 2
Convertmm3 :
(mm: ;
Listmm; ?
<mm? @
Empleadomm@ H
>mmH I
	empleadosmmJ S
)mmS T
{nn 	
Listoo 
<oo "
ComboGenericoViewModeloo '
>oo' ("
comboGenericoEmpleadosoo) ?
=oo@ A
newooB E
ListooF J
<ooJ K"
ComboGenericoViewModelooK a
>ooa b
(oob c
)ooc d
;ood e
foreachpp 
(pp 
varpp 
itempp 
inpp  
	empleadospp! *
)pp* +
{qq "
comboGenericoEmpleadosrr &
.rr& '
Addrr' *
(rr* +
newrr+ ."
ComboGenericoViewModelrr/ E
(rrE F
itemrrF J
.rrJ K
IdrrK M
,rrM N
itemrrO S
.rrS T
NombreCompletorrT b
)rrb c
)rrc d
;rrd e
}ss 
returntt "
comboGenericoEmpleadostt )
;tt) *
}uu 	
publicww 
staticww 
Listww 
<ww "
ComboGenericoViewModelww 1
>ww1 2
Convertww3 :
(ww: ;
Listww; ?
<ww? @
Clienteww@ G
>wwG H
clienteswwI Q
)wwQ R
{xx 	
Listyy 
<yy "
ComboGenericoViewModelyy '
>yy' (!
comboGenericoClientesyy) >
=yy? @
newyyA D
ListyyE I
<yyI J"
ComboGenericoViewModelyyJ `
>yy` a
(yya b
)yyb c
;yyc d
foreachzz 
(zz 
varzz 
itemzz 
inzz  
clienteszz! )
)zz) *
{{{ !
comboGenericoClientes|| %
.||% &
Add||& )
(||) *
new||* -"
ComboGenericoViewModel||. D
(||D E
item||E I
.||I J
Id||J L
,||L M
item||N R
.||R S
RazonSocial||S ^
+||_ `
$str||a d
+||e f
item||g k
.||k l
DocumentoIdentidad||l ~
)||~ 
)	|| Ä
;
||Ä Å
}}} 
return~~ !
comboGenericoClientes~~ (
;~~( )
} 	
public
ÅÅ 
static
ÅÅ 
List
ÅÅ 
<
ÅÅ $
ComboGenericoViewModel
ÅÅ 1
>
ÅÅ1 2
Convert
ÅÅ3 :
(
ÅÅ: ;
List
ÅÅ; ?
<
ÅÅ? @
ConceptoDeNegocio
ÅÅ@ Q
>
ÅÅQ R 
conceptosDeNegocio
ÅÅS e
)
ÅÅe f
{
ÇÇ 	
List
ÉÉ 
<
ÉÉ $
ComboGenericoViewModel
ÉÉ '
>
ÉÉ' (-
comboGenericoConceptosDeNegocio
ÉÉ) H
=
ÉÉI J
new
ÉÉK N
List
ÉÉO S
<
ÉÉS T$
ComboGenericoViewModel
ÉÉT j
>
ÉÉj k
(
ÉÉk l
)
ÉÉl m
;
ÉÉm n
foreach
ÑÑ 
(
ÑÑ 
var
ÑÑ 
conceptoDeNegocio
ÑÑ *
in
ÑÑ+ - 
conceptosDeNegocio
ÑÑ. @
)
ÑÑ@ A
{
ÖÖ -
comboGenericoConceptosDeNegocio
ÜÜ /
.
ÜÜ/ 0
Add
ÜÜ0 3
(
ÜÜ3 4
new
ÜÜ4 7$
ComboGenericoViewModel
ÜÜ8 N
(
ÜÜN O
conceptoDeNegocio
ÜÜO `
.
ÜÜ` a
Id
ÜÜa c
,
ÜÜc d
conceptoDeNegocio
ÜÜe v
.
ÜÜv w
CodigoBarraÜÜw Ç
+ÜÜÉ Ñ
$strÜÜÖ ã
+ÜÜå ç!
conceptoDeNegocioÜÜé ü
.ÜÜü †
NombreÜÜ† ¶
)ÜÜ¶ ß
)ÜÜß ®
;ÜÜ® ©
}
áá 
return
àà -
comboGenericoConceptosDeNegocio
àà 2
;
àà2 3
}
ââ 	
public
ãã 
static
ãã 
List
ãã 
<
ãã $
ComboGenericoViewModel
ãã 1
>
ãã1 2
Convert
ãã3 :
(
ãã: ;
List
ãã; ?
<
ãã? @
DetalleGenerico
ãã@ O
>
ããO P
detalles
ããQ Y
)
ããY Z
{
åå 	
List
çç 
<
çç $
ComboGenericoViewModel
çç '
>
çç' (#
comboGenericoDetalles
çç) >
=
çç? @
new
ççA D
List
ççE I
<
ççI J$
ComboGenericoViewModel
ççJ `
>
çç` a
(
çça b
)
ççb c
;
ççc d
foreach
éé 
(
éé 
var
éé 
detalle
éé  
in
éé! #
detalles
éé$ ,
)
éé, -
{
èè #
comboGenericoDetalles
êê %
.
êê% &
Add
êê& )
(
êê) *
new
êê* -$
ComboGenericoViewModel
êê. D
(
êêD E
detalle
êêE L
.
êêL M
Id
êêM O
,
êêO P
detalle
êêQ X
.
êêX Y
Nombre
êêY _
)
êê_ `
)
êê` a
;
êêa b
}
ëë 
return
íí #
comboGenericoDetalles
íí (
;
íí( )
}
ìì 	
public
ïï 
static
ïï 
List
ïï 
<
ïï $
ComboGenericoViewModel
ïï 1
>
ïï1 2
Convert
ïï3 :
(
ïï: ;
List
ïï; ?
<
ïï? @
Detalle_maestro
ïï@ O
>
ïïO P
detalles
ïïQ Y
)
ïïY Z
{
ññ 	
List
óó 
<
óó $
ComboGenericoViewModel
óó '
>
óó' (#
comboGenericoDetalles
óó) >
=
óó? @
new
óóA D
List
óóE I
<
óóI J$
ComboGenericoViewModel
óóJ `
>
óó` a
(
óóa b
)
óób c
;
óóc d
foreach
òò 
(
òò 
var
òò 
detalle
òò  
in
òò! #
detalles
òò$ ,
)
òò, -
{
ôô #
comboGenericoDetalles
öö %
.
öö% &
Add
öö& )
(
öö) *
new
öö* -$
ComboGenericoViewModel
öö. D
(
ööD E
detalle
ööE L
.
ööL M
id
ööM O
,
ööO P
detalle
ööQ X
.
ööX Y
nombre
ööY _
)
öö_ `
)
öö` a
;
ööa b
}
õõ 
return
úú #
comboGenericoDetalles
úú (
;
úú( )
}
ùù 	
public
üü 
static
üü 
List
üü 
<
üü $
ComboGenericoViewModel
üü 1
>
üü1 2B
4ConvertirCentroDeAtencionConEstablecimientoComercial
üü3 g
(
üüg h
List
üüh l
<
üül m(
CentroDeAtencionExtendidoüüm Ü
>üüÜ á!
centrosDeAtencionüüà ô
)üüô ö
{
†† 	
List
°° 
<
°° $
ComboGenericoViewModel
°° '
>
°°' ("
comboGenericoActores
°°) =
=
°°> ?
new
°°@ C
List
°°D H
<
°°H I$
ComboGenericoViewModel
°°I _
>
°°_ `
(
°°` a
)
°°a b
;
°°b c
foreach
¢¢ 
(
¢¢ 
var
¢¢ 
item
¢¢ 
in
¢¢  
centrosDeAtencion
¢¢! 2
)
¢¢2 3
{
££ "
comboGenericoActores
§§ $
.
§§$ %
Add
§§% (
(
§§( )
new
§§) ,$
ComboGenericoViewModel
§§- C
(
§§C D
item
§§D H
.
§§H I
Id
§§I K
,
§§K L
item
§§M Q
.
§§Q R&
EstablecimientoComercial
§§R j
.
§§j k
NombreInterno
§§k x
+
§§y z
$str§§{ Ä
+§§Å Ç
item§§É á
.§§á à
Nombre§§à é
)§§é è
)§§è ê
;§§ê ë
}
•• 
return
¶¶ "
comboGenericoActores
¶¶ '
;
¶¶' (
}
ßß 	
public
®® 
static
®® 
List
®® 
<
®® $
ComboGenericoViewModel
®® 1
>
®®1 2
Convert
®®3 :
(
®®: ;
List
®®; ?
<
®®? @.
 TipoDeComprobanteParaTransaccion
®®@ `
>
®®` a
tipoDeComprobante
®®b s
)
®®s t
{
©© 	
List
™™ 
<
™™ $
ComboGenericoViewModel
™™ '
>
™™' ("
comboGenericoActores
™™) =
=
™™> ?
new
™™@ C
List
™™D H
<
™™H I$
ComboGenericoViewModel
™™I _
>
™™_ `
(
™™` a
)
™™a b
;
™™b c
foreach
´´ 
(
´´ 
var
´´ 
tipoComprobante
´´ (
in
´´) +
tipoDeComprobante
´´, =
)
´´= >
{
¨¨ "
comboGenericoActores
≠≠ $
.
≠≠$ %
Add
≠≠% (
(
≠≠( )
new
≠≠) ,$
ComboGenericoViewModel
≠≠- C
(
≠≠C D
tipoComprobante
≠≠D S
.
≠≠S T
Id
≠≠T V
,
≠≠V W
tipoComprobante
≠≠X g
.
≠≠g h
Nombre
≠≠h n
)
≠≠n o
)
≠≠o p
;
≠≠p q
}
ÆÆ 
return
ØØ "
comboGenericoActores
ØØ '
;
ØØ' (
}
∞∞ 	
public
±± 
static
±± 
List
±± 
<
±± $
ComboGenericoViewModel
±± 1
>
±±1 2
Convert
±±3 :
(
±±: ;
List
±±; ?
<
±±? @
CuentaBancaria
±±@ N
>
±±N O
cuentasBancarias
±±P `
)
±±` a
{
≤≤ 	
List
≥≥ 
<
≥≥ $
ComboGenericoViewModel
≥≥ '
>
≥≥' ("
comboGenericoActores
≥≥) =
=
≥≥> ?
new
≥≥@ C
List
≥≥D H
<
≥≥H I$
ComboGenericoViewModel
≥≥I _
>
≥≥_ `
(
≥≥` a
)
≥≥a b
;
≥≥b c
foreach
¥¥ 
(
¥¥ 
var
¥¥ 
item
¥¥ 
in
¥¥  
cuentasBancarias
¥¥! 1
)
¥¥1 2
{
µµ "
comboGenericoActores
∂∂ $
.
∂∂$ %
Add
∂∂% (
(
∂∂( )
new
∂∂) ,$
ComboGenericoViewModel
∂∂- C
(
∂∂C D
item
∂∂D H
.
∂∂H I
Id
∂∂I K
,
∂∂K L
item
∂∂M Q
.
∂∂Q R
NumeroCuenta
∂∂R ^
+
∂∂_ `
$str
∂∂a f
+
∂∂g h
item
∂∂i m
.
∂∂m n
Moneda
∂∂n t
.
∂∂t u
Nombre
∂∂u {
)
∂∂| }
)
∂∂} ~
;
∂∂~ 
}
∑∑ 
return
∏∏ "
comboGenericoActores
∏∏ '
;
∏∏' (
}
ππ 	
}
∫∫ 
public
øø 

class
øø .
 ComboDocumentoIdentidadViewModel
øø 1
{
¿¿ 
public
¡¡ 
int
¡¡ 
Id
¡¡ 
{
¡¡ 
get
¡¡ 
;
¡¡ 
set
¡¡  
;
¡¡  !
}
¡¡" #
public
¬¬ 
string
¬¬ 
Nombre
¬¬ 
{
¬¬ 
get
¬¬ "
;
¬¬" #
set
¬¬$ '
;
¬¬' (
}
¬¬) *
public
≈≈ .
 ComboDocumentoIdentidadViewModel
≈≈ /
(
≈≈/ 0
)
≈≈0 1
{
∆∆ 	
}
»» 	
public
…… .
 ComboDocumentoIdentidadViewModel
…… /
(
……/ 0
int
……0 3
id
……4 6
,
……6 7
string
……8 >
nombre
……? E
)
……E F
{
   	
this
ÀÀ 
.
ÀÀ 
Id
ÀÀ 
=
ÀÀ 
id
ÀÀ 
;
ÀÀ 
this
ÃÃ 
.
ÃÃ 
Nombre
ÃÃ 
=
ÃÃ 
nombre
ÃÃ  
;
ÃÃ  !
}
ŒŒ 	
}
œœ 
public
‘‘ 

class
‘‘ ;
-ValorDeCaracteristicaConceptoNegocioViewModel
‘‘ >
{
’’ 
public
÷÷ 
int
÷÷ 
IdCaracteristica
÷÷ #
{
÷÷$ %
get
÷÷& )
;
÷÷) *
set
÷÷+ .
;
÷÷. /
}
÷÷0 1
public
◊◊ 
int
◊◊ 
IdValor
◊◊ 
{
◊◊ 
get
◊◊  
;
◊◊  !
set
◊◊" %
;
◊◊% &
}
◊◊' (
public
ÿÿ 
string
ÿÿ 
NombreValor
ÿÿ !
{
ÿÿ" #
get
ÿÿ$ '
;
ÿÿ' (
set
ÿÿ) ,
;
ÿÿ, -
}
ÿÿ. /
public
⁄⁄ ;
-ValorDeCaracteristicaConceptoNegocioViewModel
⁄⁄ <
(
⁄⁄< =
)
⁄⁄= >
{
€€ 	
}
›› 	
public
ﬁﬁ ;
-ValorDeCaracteristicaConceptoNegocioViewModel
ﬁﬁ <
(
ﬁﬁ< =
int
ﬁﬁ= @
idCaracteristica
ﬁﬁA Q
,
ﬁﬁQ R
int
ﬁﬁS V
idValor
ﬁﬁW ^
,
ﬁﬁ^ _
string
ﬁﬁ` f
nombreValor
ﬁﬁg r
)
ﬁﬁr s
{
ﬂﬂ 	
this
‡‡ 
.
‡‡ 
IdCaracteristica
‡‡ !
=
‡‡" #
idCaracteristica
‡‡$ 4
;
‡‡4 5
this
·· 
.
·· 
IdValor
·· 
=
·· 
idValor
·· "
;
··" #
this
‚‚ 
.
‚‚ 
NombreValor
‚‚ 
=
‚‚ 
nombreValor
‚‚ *
;
‚‚* +
}
„„ 	
public
ÂÂ ;
-ValorDeCaracteristicaConceptoNegocioViewModel
ÂÂ <
(
ÂÂ< =3
%Valor_caracteristica_concepto_negocio
ÂÂ= b
valor
ÂÂc h
)
ÂÂh i
{
ÊÊ 	
this
ÁÁ 
.
ÁÁ 
IdCaracteristica
ÁÁ !
=
ÁÁ" #
valor
ÁÁ$ )
.
ÁÁ) *"
Valor_caracteristica
ÁÁ* >
.
ÁÁ> ?
id_caracteristica
ÁÁ? P
;
ÁÁP Q
this
ËË 
.
ËË 
IdValor
ËË 
=
ËË 
valor
ËË  
.
ËË  !%
id_valor_caracteristica
ËË! 8
;
ËË8 9
this
ÈÈ 
.
ÈÈ 
NombreValor
ÈÈ 
=
ÈÈ 
valor
ÈÈ $
.
ÈÈ$ %"
Valor_caracteristica
ÈÈ% 9
.
ÈÈ9 :
valor
ÈÈ: ?
;
ÈÈ? @
}
ÍÍ 	
public
ÏÏ 
static
ÏÏ 
List
ÏÏ 
<
ÏÏ ;
-ValorDeCaracteristicaConceptoNegocioViewModel
ÏÏ H
>
ÏÏH I
Convert
ÏÏJ Q
(
ÏÏQ R
List
ÏÏR V
<
ÏÏV W3
%Valor_caracteristica_concepto_negocio
ÏÏW |
>
ÏÏ| }
valoresÏÏ~ Ö
)ÏÏÖ Ü
{
ÌÌ 	
var
ÓÓ 
valoresViewModel
ÓÓ  
=
ÓÓ! "
new
ÓÓ# &
List
ÓÓ' +
<
ÓÓ+ ,;
-ValorDeCaracteristicaConceptoNegocioViewModel
ÓÓ, Y
>
ÓÓY Z
(
ÓÓZ [
)
ÓÓ[ \
;
ÓÓ\ ]
foreach
ÔÔ 
(
ÔÔ 
var
ÔÔ 
valor
ÔÔ 
in
ÔÔ !
valores
ÔÔ" )
)
ÔÔ) *
{
 
valoresViewModel
ÒÒ  
.
ÒÒ  !
Add
ÒÒ! $
(
ÒÒ$ %
new
ÒÒ% (;
-ValorDeCaracteristicaConceptoNegocioViewModel
ÒÒ) V
(
ÒÒV W
valor
ÒÒW \
)
ÒÒ\ ]
)
ÒÒ] ^
;
ÒÒ^ _
}
ÚÚ 
return
ÛÛ 
valoresViewModel
ÛÛ #
;
ÛÛ# $
}
ÙÙ 	
}
ˆˆ 
public
¯¯ 

class
¯¯ 8
*DetalleMaestroValorCaracteristicaViewModel
¯¯ ;
{
˘˘ 
public
˚˚ 
string
˚˚ 
NombreValor
˚˚ !
{
˚˚" #
get
˚˚$ '
;
˚˚' (
set
˚˚) ,
;
˚˚, -
}
˚˚. /
public
¸¸ 
string
¸¸ "
NombreCaracteristica
¸¸ *
{
¸¸+ ,
get
¸¸- 0
;
¸¸0 1
set
¸¸2 5
;
¸¸5 6
}
¸¸7 8
public
˛˛ 8
*DetalleMaestroValorCaracteristicaViewModel
˛˛ 9
(
˛˛9 :
)
˛˛: ;
{
ˇˇ 	
}
ÅÅ 	
public
ÉÉ 8
*DetalleMaestroValorCaracteristicaViewModel
ÉÉ 9
(
ÉÉ9 :
string
ÉÉ: @"
nombreCaracteristica
ÉÉA U
,
ÉÉU V
string
ÉÉW ]
nombreValor
ÉÉ^ i
)
ÉÉi j
{
ÑÑ 	
this
ÖÖ 
.
ÖÖ 
NombreValor
ÖÖ 
=
ÖÖ 
nombreValor
ÖÖ *
;
ÖÖ* +
this
ÜÜ 
.
ÜÜ "
NombreCaracteristica
ÜÜ %
=
ÜÜ& '"
nombreCaracteristica
ÜÜ( <
;
ÜÜ< =
}
áá 	
public
èè 
static
èè 
List
èè 
<
èè 8
*DetalleMaestroValorCaracteristicaViewModel
èè E
>
èèE F
Match
èèG L
(
èèL M
List
èèM Q
<
èèQ R;
-ValorDeCaracteristicaConceptoNegocioViewModel
èèR 
>èè Ä
valoresèèÅ à
,èèà â
Listèèä é
<èèé è&
ComboGenericoViewModelèèè •
>èè• ¶
caracteristicasèèß ∂
)èè∂ ∑
{
êê 	
var
ëë 
valoresViewModel
ëë  
=
ëë! "
new
ëë# &
List
ëë' +
<
ëë+ ,8
*DetalleMaestroValorCaracteristicaViewModel
ëë, V
>
ëëV W
(
ëëW X
)
ëëX Y
;
ëëY Z
if
íí 
(
íí 
valores
íí 
.
íí 
Count
íí 
(
íí 
)
íí 
==
íí  "
$num
íí# $
)
íí$ %
{
ìì 
foreach
îî 
(
îî 
var
îî 
item
îî !
in
îî" $
caracteristicas
îî% 4
)
îî4 5
{
ïï 
valoresViewModel
ññ $
.
ññ$ %
Add
ññ% (
(
ññ( )
new
ññ) ,8
*DetalleMaestroValorCaracteristicaViewModel
ññ- W
(
ññW X
item
ññX \
.
ññ\ ]
Nombre
ññ] c
,
ññc d
$str
ññe g
)
ññg h
)
ññh i
;
ññi j
}
óó 
return
ôô 
valoresViewModel
ôô '
;
ôô' (
}
öö 
else
õõ 
{
úú 
foreach
ùù 
(
ùù 
var
ùù 
item
ùù !
in
ùù" $
caracteristicas
ùù% 4
)
ùù4 5
{
ûû 
int
üü 
index
üü 
=
üü 
valores
üü  '
.
üü' (
	FindIndex
üü( 1
(
üü1 2
v
üü2 3
=>
üü4 6
v
üü7 8
.
üü8 9
IdCaracteristica
üü9 I
==
üüJ L
item
üüM Q
.
üüQ R
Id
üüR T
)
üüT U
;
üüU V
if
°° 
(
°° 
index
°° 
>=
°°  
$num
°°! "
)
°°" #
{
¢¢ 
valoresViewModel
££ (
.
££( )
Add
££) ,
(
££, -
new
££- 08
*DetalleMaestroValorCaracteristicaViewModel
££1 [
(
££[ \
item
££\ `
.
££` a
Nombre
££a g
,
££g h
valores
££i p
[
££p q
index
££q v
]
££v w
.
££w x
NombreValor££x É
)££É Ñ
)££Ñ Ö
;££Ö Ü
}
§§ 
else
•• 
{
¶¶ 
valoresViewModel
ßß (
.
ßß( )
Add
ßß) ,
(
ßß, -
new
ßß- 08
*DetalleMaestroValorCaracteristicaViewModel
ßß1 [
(
ßß[ \
item
ßß\ `
.
ßß` a
Nombre
ßßa g
,
ßßg h
$str
ßßi k
)
ßßk l
)
ßßl m
;
ßßm n
}
®® 
}
©© 
return
™™ 
valoresViewModel
™™ '
;
™™' (
}
´´ 
}
≠≠ 	
}
ØØ 
}∞∞ ÙU
[D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Compra\BandejaCompraViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class "
BandejaCompraViewModel '
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdCompra 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
TipoDocumento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
CodigoDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Numero 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	Proveedor 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Ruc 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Total 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool #
EsAnuladoConNotaInterna +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
bool %
EsAnuladoConNotaDeCredito -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public   
bool   
EsOrdenDeCompra   #
{  $ %
get  & )
;  ) *
set  + .
;  . /
}  0 1
public!! 
string!! 
ModoPago!! 
{!!  
get!!! $
;!!$ %
set!!& )
;!!) *
}!!+ ,
public## "
BandejaCompraViewModel## %
(##% &
OrdenDeCompra##' 4
orden##5 :
)##: ;
{$$ 	
this%% 
.%% 
Id%% 
=%% 
orden%% 
.%% 
Id%% 
;%% 
this&& 
.&& 
IdCompra&& 
=&& 
orden&& !
.&&! "
IdCompra&&" *
;&&* +
this'' 
.'' 
Fecha'' 
='' 
orden'' 
.'' 

FechaOrden'' )
('') *
)''* +
.''+ ,
ToString'', 4
(''4 5
$str''5 A
)''A B
;''B C
this(( 
.(( 
TipoDocumento(( 
=((  
orden((! &
.((& '
Comprobante((' 2
(((2 3
)((3 4
.((4 5
Tipo((5 9
(((9 :
)((: ;
.((; <
Nombre((< B
;((B C
this)) 
.)) 
CodigoDocumento))  
=))! "
orden))# (
.))( )
Comprobante))) 4
())4 5
)))5 6
.))6 7
Tipo))7 ;
()); <
)))< =
.))= >
Codigo))> D
;))D E
this** 
.** 
Numero** 
=** 
orden** 
.**  
Comprobante**  +
(**+ ,
)**, -
.**- .
NumeroDeSerie**. ;
+**; <
$str**< A
+**A B
orden**C H
.**H I
Comprobante**I T
(**T U
)**U V
.**V W
NumeroDeComprobante**W j
;**j k
this++ 
.++ 
	Proveedor++ 
=++ 
orden++ "
.++" #
	Proveedor++# ,
(++, -
)++- .
.++. /
RazonSocial++/ :
;++: ;
this,, 
.,, 
Ruc,, 
=,, 
orden,, 
.,, 
	Proveedor,, &
(,,& '
),,' (
.,,( )
DocumentoIdentidad,,) ;
;,,; <
this-- 
.-- 
Total-- 
=-- 
orden-- 
.-- 
Total-- $
.--$ %
ToString--% -
(--- .
$str--. 2
)--2 3
;--3 4
this.. 
... 
Estado.. 
=.. 
orden.. 
...  
EstadoActual..  ,
(.., -
)..- .
.... /
nombre../ 5
;..5 6
this// 
.// #
EsAnuladoConNotaInterna// (
=//) *
orden//+ 0
.//0 1$
esAnulableConNotaInterna//1 I
(//I J
)//J K
;//K L
this00 
.00 %
EsAnuladoConNotaDeCredito00 *
=00+ ,
orden00- 2
.002 3&
esAnulableConNotaDeCredito003 M
(00M N
)00N O
;00O P
}11 	
public33 "
BandejaCompraViewModel33 %
(33% &
OperacionDeCompra33& 7
orden338 =
)33= >
{44 	
this55 
.55 
Id55 
=55 
orden55 
.55 
Id55 
;55 
this66 
.66 
IdCompra66 
=66 
orden66 !
.66! "
IdCompra66" *
;66* +
this77 
.77 
Fecha77 
=77 
orden77 
.77 

FechaOrden77 )
(77) *
)77* +
.77+ ,
ToString77, 4
(774 5
$str775 A
)77A B
;77B C
this88 
.88 
TipoDocumento88 
=88  
orden88! &
.88& '
Comprobante88' 2
(882 3
)883 4
.884 5

NombreTipo885 ?
;88? @
this99 
.99 
CodigoDocumento99  
=99! "
orden99# (
.99( )
Comprobante99) 4
(994 5
)995 6
.996 7
Tipo997 ;
(99; <
)99< =
.99= >
Codigo99> D
;99D E
this:: 
.:: 
Numero:: 
=:: 
orden:: 
.::  
Comprobante::  +
(::+ ,
)::, -
.::- .
NumeroDeSerie::. ;
+::< =
$str::> C
+::D E
orden::F K
.::K L
Comprobante::L W
(::W X
)::X Y
.::Y Z
NumeroDeComprobante::Z m
;::m n
this;; 
.;; 
	Proveedor;; 
=;; 
orden;; "
.;;" #
	Proveedor;;# ,
(;;, -
);;- .
.;;. /
RazonSocial;;/ :
;;;: ;
this<< 
.<< 
Ruc<< 
=<< 
orden<< 
.<< 
	Proveedor<< &
(<<& '
)<<' (
.<<( )
DocumentoIdentidad<<) ;
;<<; <
this== 
.== 
Total== 
=== 
orden== 
.== 
Total== $
.==$ %
ToString==% -
(==- .
$str==. 2
)==2 3
;==3 4
this>> 
.>> 
Estado>> 
=>> 
orden>> 
.>>  
EstadoActual>>  ,
(>>, -
)>>- .
.>>. /
nombre>>/ 5
;>>5 6
this?? 
.?? #
EsAnuladoConNotaInterna?? (
=??) *
orden??+ 0
.??0 1$
esAnulableConNotaInterna??1 I
(??I J
)??J K
;??K L
this@@ 
.@@ %
EsAnuladoConNotaDeCredito@@ *
=@@+ ,
orden@@- 2
.@@2 3&
esAnulableConNotaDeCredito@@3 M
(@@M N
)@@N O
;@@O P
thisAA 
.AA 
EsOrdenDeCompraAA  
=AA! "
ordenAA# (
.AA( )
esOrdenDeCompraAA) 8
(AA8 9
)AA9 :
;AA: ;
thisBB 
.BB 
ModoPagoBB 
=BB 
	EnumeradoBB %
.BB% &
GetDescriptionBB& 4
(BB4 5
ordenBB5 :
.BB: ;

ModoDePagoBB; E
(BBE F
)BBF G
)BBG H
;BBH I
}CC 	
publicEE 
staticEE 
ListEE 
<EE "
BandejaCompraViewModelEE 1
>EE1 2
ConvertEE3 :
(EE: ;
ListEE; ?
<EE? @
OrdenDeCompraEE@ M
>EEM N
ordenesDeCompraEEO ^
)EE^ _
{FF 	
ListGG 
<GG "
BandejaCompraViewModelGG '
>GG' (
ordenesGG) 0
=GG1 2
newGG3 6
ListGG7 ;
<GG; <"
BandejaCompraViewModelGG< R
>GGR S
(GGS T
)GGT U
;GGU V
foreachHH 
(HH 
varHH 
ordenDeCompraHH &
inHH' )
ordenesDeCompraHH* 9
)HH9 :
{II 
ordenesJJ 
.JJ 
AddJJ 
(JJ 
newJJ "
BandejaCompraViewModelJJ  6
(JJ6 7
ordenDeCompraJJ7 D
)JJD E
)JJE F
;JJF G
}KK 
returnLL 
ordenesLL 
;LL 
}MM 	
publicOO 
staticOO 
ListOO 
<OO "
BandejaCompraViewModelOO 1
>OO1 2
Convert_OO3 ;
(OO; <
ListOO< @
<OO@ A
OperacionDeCompraOOA R
>OOR S
operacionesDeCompraOOT g
)OOg h
{PP 	
ListQQ 
<QQ "
BandejaCompraViewModelQQ '
>QQ' (
ordenesQQ) 0
=QQ1 2
newQQ3 6
ListQQ7 ;
<QQ; <"
BandejaCompraViewModelQQ< R
>QQR S
(QQS T
)QQT U
;QQU V
foreachRR 
(RR 
varRR 
operacionDeCompraRR *
inRR+ -
operacionesDeCompraRR. A
)RRA B
{SS 
ordenesTT 
.TT 
AddTT 
(TT 
newTT "
BandejaCompraViewModelTT  6
(TT6 7
operacionDeCompraTT7 H
)TTH I
)TTI J
;TTJ K
}UU 
returnVV 
ordenesVV 
;VV 
}WW 	
}XX 
}YY µü
]D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Compra\RegistroCompraViewModels.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
public 

class #
RegistroCompraViewModel (
{ 
public 
long 
IdCompra 
{ 
get "
;" #
set$ '
;' (
}) *
public (
ComboActorComercialViewModel +
	Proveedor, 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
int 

TipoCompra 
{ 
get  #
;# $
set% (
;( )
}* +
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
DateTime 
FechaRegistro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
IEnumerable 
< *
RegistroDetalleCompraViewModel 9
>9 :
Detalles; C
{D E
getF I
;I J
setK N
;N O
}P Q
public 
bool 
EsCompraACredito $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
bool 
EsCreditoRapido #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
IEnumerable 
< 2
&RegistroDetalleFinanciamientoViewModel A
>A B
CuotasC I
{J K
getL O
;O P
setQ T
;T U
}V W
public 
decimal 
Inicial 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Flete 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool  
HayRegistroTrazaPago (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool *
HayRegistroMovimientoDeAlmacen 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
bool 
UsaComprobanteOrden '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public "
ComboGenericoViewModel %
CentroDeAtencion& 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public "
ComboGenericoViewModel %
	Comprador& /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public!! #
RegistroCompraViewModel!! &
(!!& '
)!!' (
{"" 	
}## 	
public%% #
RegistroCompraViewModel%% &
(%%& '
OrdenDeCompra%%' 4
ordenDeCompra%%5 B
,%%B C
List%%D H
<%%H I%
SelectorTipoDeComprobante%%I b
>%%b c
selectorComprobante%%d w
)%%w x
{&& 	
this'' 
.'' 
IdCompra'' 
='' 
ordenDeCompra'' )
.'') *
IdCompra''* 2
;''2 3
this(( 
.(( 
	Proveedor(( 
=(( 
new((  (
ComboActorComercialViewModel((! =
(((= >
ordenDeCompra((> K
.((K L
	Proveedor((L U
(((U V
)((V W
.((W X
Id((X Z
,((Z [
ordenDeCompra((\ i
.((i j
	Proveedor((j s
(((s t
)((t u
.((u v
RazonSocial	((v Å
,
((Å Ç
ordenDeCompra
((É ê
.
((ê ë
	Proveedor
((ë ö
(
((ö õ
)
((õ ú
.
((ú ù 
DocumentoIdentidad
((ù Ø
)
((Ø ∞
;
((∞ ±
this)) 
.)) 

TipoCompra)) 
=)) 
Convert)) %
.))% &
ToInt32))& -
())- .
ordenDeCompra)). ;
.)); <#
TipoDeOperacionDeCompra))< S
())S T
)))T U
)))U V
;))V W
this** 
.** 
TipoDeComprobante** "
=**# $
selectorComprobante**% 8
.**8 9
SingleOrDefault**9 H
(**H I
sc**I K
=>**L N
sc**O Q
.**Q R
TipoComprobante**R a
.**a b
Id**b d
==**e g
ordenDeCompra**h u
.**u v
Comprobante	**v Å
(
**Å Ç
)
**Ç É
.
**É Ñ
IdTipo
**Ñ ä
)
**ä ã
;
**ã å
if++ 
(++ 
ordenDeCompra++ 
.++ 
Comprobante++ )
(++) *
)++* +
.+++ ,
IdSerie++, 3
==++4 6
null++7 ;
)++; <
{,, 
TipoDeComprobante-- !
.--! "
SerieIngresada--" 0
=--1 2
ordenDeCompra--3 @
.--@ A
Comprobante--A L
(--L M
)--M N
.--N O
NumeroDeSerie--O \
;--\ ]
TipoDeComprobante.. !
...! "
NumeroIngresado.." 1
=..2 3
ordenDeCompra..4 A
...A B
Comprobante..B M
(..M N
)..N O
...O P
NumeroDeComprobante..P c
;..c d
}// 
else00 
{11 
if22 
(22 
TipoDeComprobante22 %
.22% &
Series22& ,
.22, -
Count22- 2
(222 3
)223 4
>225 6
$num227 8
)228 9
{22: ;
TipoDeComprobante22< M
.22M N
SerieSeleccionada22N _
=22` a
(22b c
int22c f
)22f g
ordenDeCompra22g t
.22t u
Comprobante	22u Ä
(
22Ä Å
)
22Å Ç
.
22Ç É
IdSerie
22É ä
;
22ä ã
}
22å ç
else33 
{33 
TipoDeComprobante33 (
.33( )
SerieSeleccionada33) :
=33; <
$num33= >
;33> ?
}33@ A
}44 
this55 
.55 
TipoDeComprobante55 "
.55" #
IdComprobante55# 0
=551 2
ordenDeCompra553 @
.55@ A
Comprobante55A L
(55L M
)55M N
.55N O
Id55O Q
;55Q R
this66 
.66 
FechaRegistro66 
=66  
ordenDeCompra66! .
.66. /
FechaEmision66/ ;
;66; <
this77 
.77 
Observacion77 
=77 
ordenDeCompra77 ,
.77, -

Comentario77- 7
;777 8
this88 
.88 
EsCompraACredito88 !
=88" #
Convert88$ +
.88+ ,
ToInt3288, 3
(883 4
ordenDeCompra884 A
.88A B

ModoDePago88B L
(88L M
)88M N
)88N O
==88P R
$num88S T
?88U V
false88W \
:88] ^
true88_ c
;88c d
if99 
(99 
EsCompraACredito99  
)99  !
{99" #
this99$ (
.99( )
EsCreditoRapido99) 8
=999 :
Convert99; B
.99B C
ToInt3299C J
(99J K
ordenDeCompra99K X
.99X Y

ModoDePago99Y c
(99c d
)99d e
)99e f
==99g i
$num99j k
?99l m
false99n s
:99t u
true99v z
;99z {
}99| }
this:: 
.:: 
Cuotas:: 
=:: 2
&RegistroDetalleFinanciamientoViewModel:: @
.::@ A
Convert_::A I
(::I J
ordenDeCompra::J W
.::W X
Cuotas::X ^
(::^ _
)::_ `
)::` a
;::a b
this;; 
.;; 
Inicial;; 
=;; 
ordenDeCompra;; (
.;;( )
Cuotas;;) /
(;;/ 0
);;0 1
.;;1 2
SingleOrDefault;;2 A
(;;A B
c;;B C
=>;;D F
c;;G H
.;;H I
cuota_inicial;;I V
==;;W Y
true;;Z ^
);;^ _
.;;_ `
saldo;;` e
;;;e f
this<< 
.<< 
Flete<< 
=<< 
ordenDeCompra<< &
.<<& '
Flete<<' ,
;<<, -
this== 
.== 
Detalles== 
=== *
RegistroDetalleCompraViewModel== :
.==: ;
Convert_==; C
(==C D
ordenDeCompra==D Q
.==Q R
Detalles==R Z
(==Z [
)==[ \
.==\ ]
Where==] b
(==b c
d==c d
=>==e g
d==h i
.==i j
DetalleTransaccion==j |
(==| }
)==} ~
.==~  
id_concepto_negocio	== í
!=
==ì ï
ConceptoSettings
==ñ ¶
.
==¶ ß
Default
==ß Æ
.
==Æ Ø$
IdConceptoNegocioFlete
==Ø ≈
)
==≈ ∆
.
==∆ «
ToList
==« Õ
(
==Õ Œ
)
==Œ œ
)
==œ –
;
==– —
}>> 	
}?? 
publicAA 

classAA *
RegistroDetalleCompraViewModelAA /
{BB 
publicCC 
longCC 
	IdDetalleCC 
{CC 
getCC  #
;CC# $
setCC% (
;CC( )
}CC* +
publicDD 5
)RegsitroProductoParaFacturacionViewModelsDD 8
ProductoDD9 A
{DDB C
getDDD G
;DDG H
setDDI L
;DDL M
}DDN O
publicEE 
decimalEE 
PrecioUnitarioEE %
{EE& '
getEE( +
;EE+ ,
setEE- 0
;EE0 1
}EE2 3
publicFF 
decimalFF 
CantidadFF 
{FF  !
getFF" %
;FF% &
setFF' *
;FF* +
}FF, -
publicGG 
decimalGG 
ImporteGG 
{GG  
getGG! $
;GG$ %
setGG& )
;GG) *
}GG+ ,
publicHH 
stringHH 
VersionFilaHH !
{HH" #
getHH$ '
;HH' (
setHH) ,
;HH, -
}HH. /
publicII 
boolII 
IgvII 
{II 
getII 
;II 
setII "
;II" #
}II$ %
publicJJ 
decimalJJ 
	DescuentoJJ  
{JJ! "
getJJ# &
;JJ& '
setJJ( +
;JJ+ ,
}JJ- .
publicKK 
stringKK 
ObservacionKK !
{KK" #
getKK$ '
;KK' (
setKK) ,
;KK, -
}KK. /
publicLL 
stringLL 
LoteLL 
{LL 
getLL  
;LL  !
setLL" %
;LL% &
}LL' (
publicMM 
DateTimeMM 
?MM 
VencimientoMM $
{MM% &
getMM' *
;MM* +
setMM, /
;MM/ 0
}MM1 2
publicNN 
stringNN 
RegistroNN 
{NN  
getNN! $
;NN$ %
setNN& )
;NN) *
}NN+ ,
publicPP *
RegistroDetalleCompraViewModelPP -
(PP- .
)PP. /
{QQ 	
}RR 	
publicTT *
RegistroDetalleCompraViewModelTT -
(TT- .
DetalleDeOperacionTT. @
detalleTTA H
)TTH I
{UU 	
	IdDetalleVV 
=VV 
detalleVV 
.VV  
IdVV  "
;VV" #
ConceptoDeNegocioWW 
productoWW &
=WW' (
newWW) ,
ConceptoDeNegocioWW- >
(WW> ?
detalleWW? F
.WWF G
DetalleTransaccionWWG Y
(WWY Z
)WWZ [
.WW[ \
Concepto_negocioWW\ l
)WWl m
;WWm n
thisXX 
.XX 
ProductoXX 
=XX 
newXX 5
)RegsitroProductoParaFacturacionViewModelsXX  I
(XXI J
detalleXXJ Q
.XXQ R
ProductoXXR Z
.XXZ [
IdXX[ ]
,XX] ^
detalleXX_ f
.XXf g
ProductoXXg o
.XXo p
NombreXXp v
,XXv w
detalleXXx 
.	XX Ä
PrecioUnitario
XXÄ é
,
XXé è
producto
XXê ò
.
XXò ô
VersionFila
XXô §
(
XX§ •
)
XX• ¶
,
XX¶ ß
producto
XX® ∞
.
XX∞ ±
Stock
XX± ∂
(
XX∂ ∑
)
XX∑ ∏
)
XX∏ π
;
XXπ ∫
thisYY 
.YY 
PrecioUnitarioYY 
=YY  !
detalleYY" )
.YY) *
PrecioUnitarioYY* 8
;YY8 9
thisZZ 
.ZZ 
CantidadZZ 
=ZZ 
detalleZZ #
.ZZ# $
CantidadZZ$ ,
;ZZ, -
this[[ 
.[[ 
Importe[[ 
=[[ 
detalle[[ "
.[[" #
Importe[[# *
;[[* +
this\\ 
.\\ 
VersionFila\\ 
=\\ 
producto\\ '
.\\' (
VersionFila\\( 3
(\\3 4
)\\4 5
.\\5 6
ToString\\6 >
(\\> ?
)\\? @
;\\@ A
this]] 
.]] 
Igv]] 
=]] 
$num]] 
<]] 
detalle]] "
.]]" #
Igv]]# &
;]]& '
this^^ 
.^^ 
	Descuento^^ 
=^^ 
detalle^^ $
.^^$ %
	Descuento^^% .
;^^. /
this__ 
.__ 
Lote__ 
=__ 
detalle__ 
.__  
Lote__  $
;__$ %
this`` 
.`` 
Observacion`` 
=`` 
$str`` !
;``! "
thisaa 
.aa 
Vencimientoaa 
=aa 
detalleaa &
.aa& '
Vencimientoaa' 2
;aa2 3
thisbb 
.bb 
Registrobb 
=bb 
detallebb #
.bb# $
Registrobb$ ,
;bb, -
}cc 	
publicee 
staticee 
Listee 
<ee *
RegistroDetalleCompraViewModelee 9
>ee9 :
Convert_ee; C
(eeC D
ListeeD H
<eeH I
DetalleDeOperacioneeI [
>ee[ \
detallesee] e
)eee f
{ff 	
Listgg 
<gg *
RegistroDetalleCompraViewModelgg /
>gg/ 0
nuevosDetallesgg1 ?
=gg@ A
newggB E
ListggF J
<ggJ K*
RegistroDetalleCompraViewModelggK i
>ggi j
(ggj k
)ggk l
;ggl m
foreachhh 
(hh 
varhh 
itemhh 
inhh  
detalleshh! )
)hh) *
{ii 
nuevosDetallesjj 
.jj 
Addjj "
(jj" #
newjj# &*
RegistroDetalleCompraViewModeljj' E
(jjE F
itemjjF J
)jjJ K
)jjK L
;jjL M
}kk 
returnll 
nuevosDetallesll !
;ll! "
}mm 	
publicoo 
staticoo 
DetalleDeOperacionoo (
Convertoo) 0
(oo0 1*
RegistroDetalleCompraViewModeloo1 O
detalleooP W
)ooW X
{pp 	
returnqq 
newqq 
DetalleDeOperacionqq )
(qq) *
detallerr( /
.rr/ 0
	IdDetallerr0 9
,rr9 :
detalless( /
.ss/ 0
Productoss0 8
.ss8 9
Idss9 ;
,ss; <
detallett( /
.tt/ 0
Productott0 8
.tt8 9
Nombrett9 ?
,tt? @
detalleuu( /
.uu/ 0
Cantidaduu0 8
,uu8 9
detallevv( /
.vv/ 0
PrecioUnitariovv0 >
,vv> ?
detalleww( /
.ww/ 0
Importeww0 7
,ww7 8
$numxx( )
,xx) *
$numxx+ ,
,xx, -
detalleyy( /
.yy/ 0
	Descuentoyy0 9
,yy9 :
detalleyy; B
.yyB C
ObservacionyyC N
,yyN O
detallezz( /
.zz/ 0
Lotezz0 4
,zz4 5
detalle{{( /
.{{/ 0
Vencimiento{{0 ;
,{{; <
detalle||( /
.||/ 0
Registro||0 8
,||8 9
detalle}}( /
.}}/ 0
Producto}}0 8
.}}8 9
EsBien}}9 ?
,}}? @
null~~( ,
,~~, -
detalle( /
./ 0
Producto0 8
.8 9
ConceptoBasico9 G
==H J
nullK O
?P Q
nullR V
:V W)
CaracteristicaPropiaViewModelX u
.u v
Convertv }
(} ~
detalle	~ Ö
.
Ö Ü
Producto
Ü é
.
é è
ConceptoBasico
è ù
.
ù û$
CaracteristicasPropias
û ¥
)
¥ µ
)
µ ∂
;
∂ ∑
}
ÄÄ 	
public
ÇÇ 
static
ÇÇ 
List
ÇÇ 
<
ÇÇ  
DetalleDeOperacion
ÇÇ -
>
ÇÇ- .
Convert
ÇÇ/ 6
(
ÇÇ6 7
List
ÇÇ7 ;
<
ÇÇ; <,
RegistroDetalleCompraViewModel
ÇÇ< Z
>
ÇÇZ [
detalles
ÇÇ\ d
)
ÇÇd e
{
ÉÉ 	
List
ÑÑ 
<
ÑÑ  
DetalleDeOperacion
ÑÑ #
>
ÑÑ# $
	detalles_
ÑÑ% .
=
ÑÑ/ 0
new
ÑÑ1 4
List
ÑÑ5 9
<
ÑÑ9 : 
DetalleDeOperacion
ÑÑ: L
>
ÑÑL M
(
ÑÑM N
)
ÑÑN O
;
ÑÑO P
foreach
ÖÖ 
(
ÖÖ 
var
ÖÖ 
detalle
ÖÖ  
in
ÖÖ! #
detalles
ÖÖ$ ,
)
ÖÖ, -
{
ÜÜ 
	detalles_
áá 
.
áá 
Add
áá 
(
áá 
Convert
áá %
(
áá% &
detalle
áá& -
)
áá- .
)
áá. /
;
áá/ 0
}
àà 
return
ââ 
	detalles_
ââ 
;
ââ 
}
ää 	
}
ãã 
public
çç 
class
çç "
TrazaDePagoViewModel
çç )
{
éé 	
public
èè $
ComboGenericoViewModel
èè )
MedioDePago
èè* 5
{
èè6 7
get
èè8 ;
;
èè; <
set
èè= @
;
èè@ A
}
èèB C
public
êê $
ComboGenericoViewModel
êê )
EntidadFinanciera
êê* ;
{
êê< =
get
êê> A
;
êêA B
set
êêC F
;
êêF G
}
êêH I
public
ëë $
ComboGenericoViewModel
ëë )
CuentaBancaria
ëë* 8
{
ëë9 :
get
ëë; >
;
ëë> ?
set
ëë@ C
;
ëëC D
}
ëëE F
public
íí $
ComboGenericoViewModel
íí )
OperadorTarjeta
íí* 9
{
íí: ;
get
íí< ?
;
íí? @
set
ííA D
;
ííD E
}
ííF G
public
ìì 
string
ìì 
InformacionDePago
ìì +
{
ìì, -
get
ìì. 1
;
ìì1 2
set
ìì3 6
;
ìì6 7
}
ìì8 9
public
îî $
ComboGenericoViewModel
îî )
CentroDeAtencion
îî* :
{
îî; <
get
îî= @
;
îî@ A
set
îîB E
;
îîE F
}
îîG H
public
ïï $
ComboGenericoViewModel
ïï )
Cajero
ïï* 0
{
ïï1 2
get
ïï3 6
;
ïï6 7
set
ïï8 ;
;
ïï; <
}
ïï= >
public
óó "
TrazaDePagoViewModel
óó '
(
óó' (
)
óó( )
{
òò 
}
ôô 
}
öö 	
}
õõ È
^D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Concepto\ConceptoBasicoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public		 

class		 #
ConceptoBasicoViewModel		 (
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Valor 
{ 
get !
;! "
set# &
;& '
}( )
public 
bool 
EsBien 
{ 
get  
;  !
set" %
;% &
}' (
public 
bool '
TieneCaracteristicasPropias /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
List 
< )
CaracteristicaPropiaViewModel 1
>1 2"
CaracteristicasPropias3 I
{J K
getL O
;O P
setQ T
;T U
}V W
public #
ConceptoBasicoViewModel &
(& '
)' (
{ 	"
CaracteristicasPropias "
=# $
new% (
List) -
<- .)
CaracteristicaPropiaViewModel. K
>K L
(L M
)M N
;N O
} 	
public #
ConceptoBasicoViewModel &
(& '
Detalle_maestro' 6
detalle7 >
)> ?
{ 	
Id 
= 
detalle 
. 
id 
; 
Nombre 
= 
detalle 
. 
nombre #
;# $
Valor 
= 
detalle 
. 
valor !
;! "
EsBien 
= 
detalle 
. 
valor "
==# %
$str& )
;) *
} 	
public #
ConceptoBasicoViewModel &
(& '
DetalleGenerico' 6
detalle7 >
)> ?
{   	
Id!! 
=!! 
detalle!! 
.!! 
Id!! 
;!! 
Nombre"" 
="" 
detalle"" 
."" 
Nombre"" #
;""# $
Valor## 
=## 
detalle## 
.## 
Valor## !
;##! "
EsBien$$ 
=$$ 
detalle$$ 
.$$ 
Valor$$ "
==$$# %
$str$$& )
;$$) *
}%% 	
public'' 
static'' 
List'' 
<'' #
ConceptoBasicoViewModel'' 2
>''2 3
Convert''4 ;
(''; <
List''< @
<''@ A
Detalle_maestro''A P
>''P Q
detalles''R Z
)''Z [
{(( 	
List)) 
<)) #
ConceptoBasicoViewModel)) (
>))( )
	conceptos))* 3
=))4 5
new))6 9
List)): >
<))> ?#
ConceptoBasicoViewModel))? V
>))V W
())W X
)))X Y
;))Y Z
foreach** 
(** 
var** 
detalle**  
in**! #
detalles**$ ,
)**, -
{++ 
	conceptos,, 
.,, 
Add,, 
(,, 
new,, !#
ConceptoBasicoViewModel,," 9
(,,9 :
detalle,,: A
),,A B
),,B C
;,,C D
}-- 
return.. 
	conceptos.. 
;.. 
}// 	
}22 
}33 ™/
PD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\DireccionViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
public

 

class

 
DireccionViewModel

 #
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public "
ComboGenericoViewModel %
Tipo& *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public "
ComboGenericoViewModel %
Nacion& ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public "
ComboGenericoViewModel %
Ubigeo& ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public "
ComboGenericoViewModel %
Via& )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public "
ComboGenericoViewModel %
Zona& *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
string 
Detalle 
{ 
get  #
;# $
set% (
;( )
}* +
public 
bool 
	EsVigente 
{ 
get  #
;# $
set% (
;( )
}* +
public 
bool 
EsPrincipal 
{  !
get" %
;% &
set' *
;* +
}, -
public 
DireccionViewModel !
(! "
)" #
{ 	
} 	
public 
DireccionViewModel !
(! "
	Direccion" +
	direccion, 5
)5 6
{ 	
this 
. 
Id 
= 
	direccion 
.  
id  "
;" #
this 
. 
Tipo 
= 
new "
ComboGenericoViewModel 2
(2 3
	direccion3 <
.< =
Detalle_maestro= L
.L M
idM O
,O P
	direccionQ Z
.Z [
Detalle_maestro[ j
.j k
nombrek q
)q r
;r s
this   
.   
Nacion   
=   
new   "
ComboGenericoViewModel   3
(  3 4
	direccion  4 =
.  = >
Detalle_maestro1  > N
.  N O
id  O Q
,  Q R
	direccion  S \
.  \ ]
Detalle_maestro1  ] m
.  m n
nombre  n t
)  t u
;  u v
this!! 
.!! 
Ubigeo!! 
=!! 
new!! "
ComboGenericoViewModel!! 4
(!!4 5
	direccion!!5 >
.!!> ?
Ubigeo!!? E
.!!E F
id!!F H
,!!H I
	direccion!!J S
.!!S T
Ubigeo!!T Z
.!!Z [
descripcion_corta!![ l
)!!l m
;!!m n
this$$ 
.$$ 
Detalle$$ 
=$$ 
	direccion$$ $
.$$$ %
detalle$$% ,
;$$, -
this%% 
.%% 
	EsVigente%% 
=%% 
	direccion%% &
.%%& '
	es_activo%%' 0
;%%0 1
this&& 
.&& 
EsPrincipal&& 
=&& 
	direccion&& (
.&&( )
es_principal&&) 5
;&&5 6
}'' 	
public)) 
static)) 
List)) 
<)) 
DireccionViewModel)) -
>))- .
Convert))/ 6
())6 7
List))7 ;
<)); <
	Direccion))< E
>))E F
direcciones))G R
)))R S
{** 	
List++ 
<++ 
DireccionViewModel++ #
>++# $
direcciones_++% 1
=++2 3
new++4 7
List++8 <
<++< =
DireccionViewModel++= O
>++O P
(++P Q
)++Q R
;++R S
foreach,, 
(,, 
var,, 
item,, 
in,, 
direcciones,,  +
),,+ ,
{-- 
direcciones_.. 
... 
Add..  
(..  !
new..! $
DireccionViewModel..% 7
(..7 8
item..8 <
)..< =
)..= >
;..> ?
}// 
return00 
direcciones_00 
;00  
}11 	
public33 
static33 
string33 
	Direccion33 &
(33& '
	Direccion33' 0
	direccion331 :
)33: ;
{55 	
string66 
direccionViewModel66 %
=66& '
(66( )
	direccion66) 2
.662 3
detalle663 :
+66; <
$str66= A
+66B C
	direccion66D M
.66M N
Ubigeo66N T
.66T U
descripcion_larga66U f
)66f g
.66g h
ToUpper66h o
(66o p
)66p q
;66q r
return77 
direccionViewModel77 %
;77% &
}88 	
public:: 
static:: 
string:: 
	Direccion:: &
(::& '

Direccion_::' 1
	direccion::2 ;
)::; <
{<< 	
string== 
direccionViewModel== %
===& '
(==( )
	direccion==) 2
.==2 3
Detalle==3 :
+==; <
$str=== A
+==B C
	direccion==D M
.==M N
Ubigeo==N T
.==T U
Nombre==U [
)==[ \
.==\ ]
ToUpper==] d
(==d e
)==e f
;==f g
return>> 
direccionViewModel>> %
;>>% &
}?? 	
}MM 
}NN §Y
XD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Empleado\EmpleadoViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 
EmpleadoViewModel "
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
IdActor 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ApellidoPaterno %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
ApellidoMaterno %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Nombres 
{ 
get  #
;# $
set% (
;( )
}* +
public 
DateTime 
FechaNacimiento '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public "
ComboGenericoViewModel %

ClaseActor& 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
int 
IdTipoActor 
{  
get! $
;$ %
set& )
;) *
}+ ,
public "
ComboGenericoViewModel %
EstadoLegalActor& 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public 
string 
Correo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public ,
 ComboDocumentoIdentidadViewModel /"
TipoDocumentoIdentidad0 F
{G H
getI L
;L M
setN Q
;Q R
}S T
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
List 
< "
ComboGenericoViewModel *
>* +
Roles, 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public   
List   
<   
DireccionViewModel   &
>  & '
Direcciones  ( 3
{  4 5
get  6 9
;  9 :
set  ; >
;  > ?
}  @ A
public!! 
bool!! 
ExisteUsuario!! !
{!!" #
get!!$ '
;!!' (
set!!) ,
;!!, -
}!!. /
public"" 
string"" 
NombreUsuario"" #
{""$ %
get""& )
;"") *
set""+ .
;"". /
}""0 1
public## 
bool## 
GuardarUsuario## "
{### $
get##% (
;##( )
set##* -
;##- .
}##/ 0
public%% 
EmpleadoViewModel%%  
(%%  !
)%%! "
{&& 	
this'' 
.'' 
Roles'' 
='' 
new'' 
List'' !
<''! ""
ComboGenericoViewModel''" 8
>''8 9
(''9 :
)'': ;
;''; <
this(( 
.(( 
Direcciones(( 
=(( 
new(( "
List((# '
<((' (
DireccionViewModel((( :
>((: ;
(((; <
)((< =
;((= >
this** 
.** 
Telefono** 
=** 
$str** '
;**' (
}++ 	
public,, 
EmpleadoViewModel,,  
(,,  !
Actor,,! &
actor,,' ,
),,, -
{-- 	
this.. 
... 
IdActor.. 
=.. 
actor..  
...  !
id..! #
;..# $
this// 
.// 
ApellidoPaterno//  
=//! "
actor//# (
.//( )
segundo_nombre//) 7
;//7 8
this00 
.00 
ApellidoMaterno00  
=00! "
actor00# (
.00( )
tercer_nombre00) 6
;006 7
this11 
.11 
Nombres11 
=11 
actor11  
.11  !
primer_nombre11! .
;11. /
this22 
.22 
Correo22 
=22 
actor22 
.22  
correo22  &
;22& '
this33 
.33 "
TipoDocumentoIdentidad33 '
=33( )
new33* -,
 ComboDocumentoIdentidadViewModel33. N
(33N O
actor33O T
.33T U"
id_documento_identidad33U k
,33k l
actor33m r
.33r s
Detalle_maestro	33s Ç
.
33Ç É
codigo
33É â
)
33â ä
;
33ä ã
this44 
.44 $
NumeroDocumentoIdentidad44 )
=44* +
actor44, 1
.441 2&
numero_documento_identidad442 L
;44L M
if55 
(55 
actor55 
.55 
	Direccion55 
.55  
Any55  #
(55# $
)55$ %
)55% &
{66 
this77 
.77 
Direcciones77  
=77! "
DireccionViewModel77# 5
.775 6
Convert776 =
(77= >
actor77> C
.77C D
	Direccion77D M
.77M N
ToList77N T
(77T U
)77U V
)77V W
;77W X
}88 
this99 
.99 
NombreUsuario99 
=99  
$str99! #
;99# $
}:: 	
public<< 
EmpleadoViewModel<<  
(<<  !
Empleado<<! )
empleado<<* 2
)<<2 3
{== 	
this>> 
.>> 
Id>> 
=>> 
empleado>> 
.>> 
Id>> !
;>>! "
this?? 
.?? 
IdActor?? 
=?? 
empleado?? #
.??# $
ActorNegocio??$ 0
.??0 1
Actor??1 6
.??6 7
id??7 9
;??9 :
this@@ 
.@@ 
Codigo@@ 
=@@ 
empleado@@ "
.@@" #
Codigo@@# )
;@@) *
thisAA 
.AA 
ApellidoPaternoAA  
=AA! "
empleadoAA# +
.AA+ ,
ApellidoPaternoAA, ;
;AA; <
thisBB 
.BB 
ApellidoMaternoBB  
=BB! "
empleadoBB# +
.BB+ ,
ApellidoMaternoBB, ;
;BB; <
thisCC 
.CC 
NombresCC 
=CC 
empleadoCC #
.CC# $
NombresCC$ +
;CC+ ,
thisDD 
.DD 
CorreoDD 
=DD 
empleadoDD "
.DD" #
CorreoDD# )
(DD) *
)DD* +
;DD+ ,
thisEE 
.EE 
FechaNacimientoEE  
=EE! "
empleadoEE# +
.EE+ ,
FechaNacimientoEE, ;
(EE; <
)EE< =
;EE= >
thisFF 
.FF 
TelefonoFF 
=FF 
empleadoFF $
.FF$ %
TelefonoFF% -
(FF- .
)FF. /
;FF/ 0
thisGG 
.GG 

ClaseActorGG 
=GG 
newGG !"
ComboGenericoViewModelGG" 8
(GG8 9
empleadoGG9 A
.GGA B
IdClaseActorGGB N
,GGN O
empleadoGGO W
.GGW X
SexoGGX \
(GG\ ]
)GG] ^
.GG^ _
nombreGG_ e
)GGe f
;GGf g
thisHH 
.HH 
EstadoLegalActorHH !
=HH" #
newHH# &"
ComboGenericoViewModelHH' =
(HH= >
empleadoHH> F
.HHF G
IdEstadoLegalHHG T
,HHT U
empleadoHHU ]
.HH] ^
EstadoLegalHH^ i
(HHi j
)HHj k
.HHk l
nombreHHl r
)HHr s
;HHs t
thisII 
.II "
TipoDocumentoIdentidadII '
=II( )
newII* -,
 ComboDocumentoIdentidadViewModelII. N
(IIN O
empleadoIIO W
.IIW X$
IdTipoDocumentoIdentidadIIX p
,IIp q
empleadoIIq y
.IIy z
TipoDocumento	IIz á
)
IIá à
;
IIà â
thisJJ 
.JJ $
NumeroDocumentoIdentidadJJ )
=JJ* +
empleadoJJ, 4
.JJ4 5
DocumentoIdentidadJJ5 G
;JJG H
ifLL 
(LL 
empleadoLL 
.LL 
DireccionesLL $
(LL$ %
)LL% &
!=LL' )
nullLL* .
)LL. /
{MM 
thisNN 
.NN 
DireccionesNN  
=NN! "
DireccionViewModelNN# 5
.NN5 6
ConvertNN6 =
(NN= >
empleadoNN> F
.NNF G
DireccionesNNG R
(NNR S
)NNS T
)NNT U
;NNU V
}OO 
thisTT 
.TT 
RolesTT 
=TT 
newTT 
ListTT !
<TT! ""
ComboGenericoViewModelTT" 8
>TT8 9
(TT9 :
)TT: ;
;TT; <
foreachUU 
(UU 
varUU 
itemUU 
inUU 
empleadoUU  (
.UU( )%
ObtenerRolesHijosVigentesUU) B
(UUB C
)UUC D
)UUD E
{VV 
thisWW 
.WW 
RolesWW 
.WW 
AddWW 
(WW 
newWW ""
ComboGenericoViewModelWW# 9
(WW9 :
itemWW: >
.WW> ?
idWW? A
,WWA B
itemWWC G
.WWG H
nombreWWH N
)WWN O
)WWO P
;WWP Q
}XX 
thisYY 
.YY 
ExisteUsuarioYY 
=YY  
empleadoYY! )
.YY) *

HayUsuarioYY* 4
(YY4 5
)YY5 6
;YY6 7
thisZZ 
.ZZ 
NombreUsuarioZZ 
=ZZ  
$strZZ! #
;ZZ# $
}\\ 	
public^^ 
EmpleadoViewModel^^  
(^^  !
Empleado^^! )
empleado^^* 2
,^^2 3
AspNetUsers^^4 ?
usuario^^@ G
)^^G H
:^^H I
this^^I M
(^^M N
empleado^^N V
)^^V W
{__ 	
this`` 
.`` 
NombreUsuario`` 
=``  
this``! %
.``% &
ExisteUsuario``& 3
?``4 5
usuario``6 =
.``= >
UserName``> F
:``F G
$str``H ]
;``] ^
}aa 	
}bb 
}cc ö;
_D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Empleado\BandejaEmpleadoViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class $
BandejaEmpleadoViewModel )
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
NombresYApellidos '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
TipoPersona !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string "
TipoDocumentoIdentidad ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
Roles 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
bool 
ExisteUsuario !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
NombreUsuario #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public $
BandejaEmpleadoViewModel '
(' (
Empleado( 0
empleado1 9
,9 :
ApplicationUser; J
usuarioK R
)R S
{ 	
Inicializar 
( 
empleado  
)  !
;! "
this   
.   
NombreUsuario   
=    
(    !
usuario  ! (
!=  ( *
null  * .
&&  / 1
this  2 6
.  6 7
ExisteUsuario  7 D
)  D E
?  F G
usuario  H O
.  O P
UserName  P X
:  Y Z
$str  [ p
;  p q
}!! 	
public%% $
BandejaEmpleadoViewModel%% '
(%%' (
Empleado%%( 0
empleado%%1 9
)%%9 :
{&& 	
Inicializar'' 
('' 
empleado''  
)''  !
;''! "
}(( 	
private)) 
void)) 
Inicializar))  
())  !
Empleado))! )
empleado))* 2
)))2 3
{** 	
this++ 
.++ 
Id++ 
=++ 
empleado++ 
.++ 
Id++ !
;++! "
this,, 
.,, 
Codigo,, 
=,, 
empleado,, "
.,," #
Codigo,,# )
;,,) *
this-- 
.-- 
NombresYApellidos-- "
=--# $
empleado--% -
.--- .
NombreCompleto--. <
;--< =
this.. 
... $
NumeroDocumentoIdentidad.. )
=..* +
empleado.., 4
...4 5
DocumentoIdentidad..5 G
;..G H
this// 
.// "
TipoDocumentoIdentidad// '
=//( )
empleado//* 2
.//2 3
TipoDocumento//3 @
;//@ A
this00 
.00 
TipoPersona00 
=00 
empleado00 '
.00' (
TipoPersona00( 3
;003 4
if11 
(11 
empleado11 
.11 
DomicilioFiscal11 (
(11( )
)11) *
!=11+ -
null11. 2
)112 3
{22 
this33 
.33 
	Direccion33 
=33  
(33! "
empleado33" *
.33* +
DomicilioFiscal33+ :
(33: ;
)33; <
.33< =
detalle33= D
+33E F
$str33G L
+33M N
empleado33O W
.33W X
DomicilioFiscal33X g
(33g h
)33h i
.33i j
Ubigeo33j p
.33p q
descripcion_larga	33q Ç
)
33Ç É
.
33É Ñ
ToUpper
33Ñ ã
(
33ã å
)
33å ç
;
33ç é
}44 
if55 
(55 
empleado55 
.55 %
ObtenerRolesHijosVigentes55 2
(552 3
)553 4
!=555 7
null558 <
)55< =
{66 
var77 
roles77 
=77 
$str77 
;77 
foreach88 
(88 
var88 
item88 !
in88" $
empleado88% -
.88- .%
ObtenerRolesHijosVigentes88. G
(88G H
)88H I
)88I J
{99 
roles:: 
+=:: 
item:: !
.::! "
nombre::" (
+::) *
$str::+ /
;::/ 0
};; 
this<< 
.<< 
Roles<< 
=<< 
roles<< "
==<<# %
$str<<& (
?<<) *
roles<<+ 0
:<<1 2
roles<<3 8
.<<8 9
	Substring<<9 B
(<<B C
$num<<C D
,<<D E
roles<<F K
.<<K L
Length<<L R
-<<S T
$num<<U V
)<<V W
;<<W X
}== 
this>> 
.>> 
ExisteUsuario>> 
=>>  
empleado>>! )
.>>) *

HayUsuario>>* 4
(>>4 5
)>>5 6
;>>6 7
this?? 
.?? 
NombreUsuario?? 
=??  
$str??! #
;??# $
}@@ 	
publicAA 
staticAA 
ListAA 
<AA $
BandejaEmpleadoViewModelAA 3
>AA3 4
ConvertAA5 <
(AA< =
ListAA= A
<AAA B
EmpleadoAAB J
>AAJ K
	empleadosAAL U
,AAU V
ListAAW [
<AA[ \
ApplicationUserAA\ k
>AAk l
usuariosAAm u
)AAu v
{BB 
varCC 

empleados_CC 
=CC 
newCC  
ListCC! %
<CC% &$
BandejaEmpleadoViewModelCC& >
>CC> ?
(CC? @
)CC@ A
;CCA B
foreachEE 
(EE 
varEE 
empleadoEE !
inEE" $
	empleadosEE% .
)EE. /
{FF 

empleados_GG 
.GG 
AddGG 
(GG 
newGG "$
BandejaEmpleadoViewModelGG# ;
(GG; <
empleadoGG< D
,GGD E
usuariosGGF N
.GGN O
SingleOrDefaultGGO ^
(GG^ _
uGG_ `
=>GG` b
uGGb c
.GGc d
IdGGd f
==GGf h
empleadoGGi q
.GGq r
	IdUsuarioGGr {
)GG{ |
)GG| }
)GG} ~
;GG~ 
}HH 
returnII 

empleados_II 
;II 
}JJ 	
}KK 
}NN ‚'
UD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\DetalleMaestroViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class #
DetalleMaestroViewModel (
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
	IdMaestro 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Valor 
{ 
get !
;! "
set# &
;& '
}( )
public 
DateTime 
FechaRegistro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public #
DetalleMaestroViewModel &
DetalleMaestroPadre' :
{; <
get= @
;@ A
setB E
;E F
}G H
public #
DetalleMaestroViewModel &
(& '
)' (
{ 	
} 	
public #
DetalleMaestroViewModel &
(& '
Detalle_maestro' 6
detalle7 >
)> ?
{ 	
this 
. 
Id 
= 
detalle 
. 
id  
;  !
this   
.   
	IdMaestro   
=   
detalle   $
.  $ %

id_maestro  % /
;  / 0
this!! 
.!! 
Codigo!! 
=!! 
detalle!! !
.!!! "
codigo!!" (
;!!( )
this"" 
."" 
Nombre"" 
="" 
detalle"" !
.""! "
nombre""" (
;""( )
this## 
.## 
Valor## 
=## 
detalle##  
.##  !
valor##! &
;##& '
this$$ 
.$$ 
FechaRegistro$$ 
=$$  
detalle$$! (
.$$( )
fecha_registro$$) 7
;$$7 8
}&& 	
public(( 
static(( #
DetalleMaestroViewModel(( -*
ConvertirDetalleDetalleMaestro((. L
(((L M
Detalle_maestro((M \
detalle((] d
)((d e
{)) 	#
DetalleMaestroViewModel** #
detalleMaestro**$ 2
=**3 4
new**5 8#
DetalleMaestroViewModel**9 P
(**P Q
detalle**Q X
)**X Y
;**Y Z
detalleMaestro++ 
.++ 
DetalleMaestroPadre++ .
=++/ 0
new++1 4#
DetalleMaestroViewModel++5 L
(++L M
detalle++M T
.++T U$
Detalle_detalle_maestro1++U m
.++m n
Single++n t
(++t u
)++u v
.++v w
Detalle_maestro	++w Ü
)
++Ü á
;
++á à
return,, 
detalleMaestro,, !
;,,! "
}-- 	
public// 
static// 
List// 
<// #
DetalleMaestroViewModel// 2
>//2 34
(ConvertirCategoriasDetalleDetalleMaestro//4 \
(//\ ]
List//] a
<//a b
Detalle_maestro//b q
>//q r
detalles//s {
)//{ |
{00 	
List11 
<11 #
DetalleMaestroViewModel11 (
>11( )
nuevosDetalles11* 8
=119 :
new11; >
List11? C
<11C D#
DetalleMaestroViewModel11D [
>11[ \
(11\ ]
)11] ^
;11^ _
foreach22 
(22 
var22 
detalle22  
in22! #
detalles22$ ,
)22, -
{33 
var44 
	categoria44 
=44 
detalle44  '
.44' ($
Detalle_detalle_maestro144( @
.44@ A
Count44A F
(44F G
)44G H
>44I J
$num44K L
?44M N*
ConvertirDetalleDetalleMaestro44O m
(44m n
detalle44n u
)44u v
:44w x
new44y |$
DetalleMaestroViewModel	44} î
(
44î ï
detalle
44ï ú
)
44ú ù
;
44ù û
nuevosDetalles55 
.55 
Add55 "
(55" #
	categoria55# ,
)55, -
;55- .
}66 
return77 
nuevosDetalles77 !
;77! "
}88 	
}99 
}:: Ú
ND:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\MaestroViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class 
MaestroViewModel !
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
MaestroViewModel 
(  
)  !
{ 	
} 	
public 
MaestroViewModel 
(  
Maestro  '
maestro( /
)/ 0
{ 	
this 
. 
Id 
= 
maestro 
. 
id  
;  !
this 
. 
Codigo 
= 
maestro !
.! "
codigo" (
;( )
this 
. 
Nombre 
= 
maestro !
.! "
nombre" (
;( )
} 	
} 
} Î
PD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\ParametroViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class 
ParametroViewModel #
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
IdActorNegocio !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
IdParametro 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
NombreParametro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
int 
IdValorParametro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
ValorParametro $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
decimal 
Valor 
{ 
get "
;" #
set$ '
;' (
}) *
public 
ParametroViewModel !
(! "
)" #
{ 	
} 	
public 
ParametroViewModel !
(! "
int" %
idParametro& 1
,1 2
int2 5
idValorParametro6 F
,F G
stringH N
valorParametroO ]
,] ^
decimal^ e
valorf k
)k l
{ 	
this 
. 
IdParametro 
= 
idParametro *
;* +
this 
. 
IdValorParametro !
=" #
idValorParametro$ 4
;4 5
this   
.   
ValorParametro   
=    !
valorParametro  " 0
;  0 1
this!! 
.!! 
Valor!! 
=!! 
valor!! 
;!! 
}"" 	
public$$ 
ParametroViewModel$$ !
($$! "
IDataReader$$" -
reader$$. 4
)$$4 5
{%% 	
this&& 
.&& 
Id&& 
=&& 
Convert&& 
.&& 
ToInt32&& %
(&&% &
reader&&& ,
[&&, -
$str&&- 1
]&&1 2
)&&2 3
;&&3 4
})) 	
}** 
}++ ÜÅ
TD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Precio\PrecioViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 
PrecioViewModel  
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public "
ComboGenericoViewModel %

Mercaderia& 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public "
ComboGenericoViewModel %
Tarifa& ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
decimal 
Valor 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 

FechaDesde "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DateTime 

FechaHasta "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
PrecioViewModel 
( 
)  
{ 	
} 	
public 
PrecioViewModel 
( 
Precio %
precio& ,
), -
{   	
this!! 
.!! 
Id!! 
=!! 
precio!! 
.!! 
id!! 
;!!  
this"" 
."" 

Mercaderia"" 
="" 
new"" !"
ComboGenericoViewModel""" 8
(""8 9
precio""9 ?
.""? @
id_concepto_negocio""@ S
,""S T
precio""U [
.""[ \
Concepto_negocio""\ l
.""l m
nombre""m s
)""s t
;""t u
this## 
.## 
Tarifa## 
=## 
new## "
ComboGenericoViewModel## 4
(##4 5
precio##5 ;
.##; <
id_tarifa_d##< G
,##G H
precio##H N
.##N O
Detalle_maestro3##O _
.##_ `
nombre##` f
)##f g
;##g h
this$$ 
.$$ 
Valor$$ 
=$$ 
precio$$ 
.$$  
valor$$  %
;$$% &
this%% 
.%% 

FechaDesde%% 
=%% 
precio%% $
.%%$ %
fecha_inicio%%% 1
;%%1 2
this&& 
.&& 

FechaHasta&& 
=&& 
precio&& $
.&&$ %
	fecha_fin&&% .
;&&. /
this'' 
.'' 
Descripcion'' 
='' 
precio'' %
.''% &
descripcion''& 1
;''1 2
}(( 	
}** 
[-- 
Serializable-- 
]-- 
[.. 
DataContract.. 
].. 
public// 

class// .
"PrecioParaRegistroDeVentaViewModel// 3
{00 
[11 	

DataMember11	 
]11 
public22 
int22 
Id22 
{22 
get22 
;22 
set22  
;22  !
}22" #
public33 
string33 
Tarifa33 
{33 
get33 "
;33" #
set33$ '
;33' (
}33) *
public44 
int44 
IdTarifa44 
{44 
get44 !
;44! "
set44# &
;44& '
}44( )
public55 
decimal55 
Valor55 
{55 
get55 "
;55" #
set55$ '
;55' (
}55) *
public66 
string66 
Codigo66 
{66 
get66 "
;66" #
set66$ '
;66' (
}66) *
public88 .
"PrecioParaRegistroDeVentaViewModel88 1
(881 2
)882 3
{99 	
};; 	
public>> .
"PrecioParaRegistroDeVentaViewModel>> 1
(>>1 2
Precio>>2 8
precio>>9 ?
)>>? @
{?? 	
this@@ 
.@@ 
Id@@ 
=@@ 
precio@@ 
.@@ 
id@@ 
;@@  
thisAA 
.AA 
TarifaAA 
=AA 
precioAA  
.AA  !
Detalle_maestro3AA! 1
.AA1 2
nombreAA2 8
;AA8 9
thisBB 
.BB 
ValorBB 
=BB 
precioBB 
.BB  
valorBB  %
;BB% &
thisCC 
.CC 
IdTarifaCC 
=CC 
precioCC "
.CC" #
id_tarifa_dCC# .
;CC. /
thisDD 
.DD 
CodigoDD 
=DD 
precioDD  
.DD  !
Detalle_maestro3DD! 1
.DD1 2
codigoDD2 8
;DD8 9
}EE 	
publicHH .
"PrecioParaRegistroDeVentaViewModelHH 1
(HH1 2-
!Precio_Concepto_Negocio_ComercialHH2 S
precioHHT Z
)HHZ [
{II 	
thisJJ 
.JJ 
IdJJ 
=JJ 
precioJJ 
.JJ 
IdJJ 
;JJ  
thisKK 
.KK 
TarifaKK 
=KK 
precioKK  
.KK  !
TarifaKK! '
;KK' (
thisLL 
.LL 
ValorLL 
=LL 
precioLL 
.LL  
ValorLL  %
;LL% &
thisMM 
.MM 
IdTarifaMM 
=MM 
precioMM "
.MM" #
IdTarifaMM# +
;MM+ ,
thisNN 
.NN 
CodigoNN 
=NN 
precioNN  
.NN  !
CodigoNN! '
;NN' (
}OO 	
internalQQ 
staticQQ 
ListQQ 
<QQ .
"PrecioParaRegistroDeVentaViewModelQQ ?
>QQ? @
ConvertQQA H
(QQH I
ListQQI M
<QQM N
PrecioQQN T
>QQT U
preciosQQV ]
)QQ] ^
{RR 	
ListSS 
<SS .
"PrecioParaRegistroDeVentaViewModelSS 3
>SS3 4
	resultadoSS5 >
=SS? @
newSSA D
ListSSE I
<SSI J.
"PrecioParaRegistroDeVentaViewModelSSJ l
>SSl m
(SSm n
)SSn o
;SSo p
foreachTT 
(TT 
varTT 
precioTT 
inTT  "
preciosTT# *
)TT* +
{UU 
	resultadoVV 
.VV 
AddVV 
(VV 
newVV !.
"PrecioParaRegistroDeVentaViewModelVV" D
(VVD E
precioVVE K
)VVK L
)VVL M
;VVM N
}WW 
returnXX 
	resultadoXX 
;XX 
}YY 	
internal[[ 
static[[ 
List[[ 
<[[ .
"PrecioParaRegistroDeVentaViewModel[[ ?
>[[? @
Convert[[A H
([[H I
List[[I M
<[[M N-
!Precio_Concepto_Negocio_Comercial[[N o
>[[o p
precios[[q x
)[[x y
{\\ 	
List]] 
<]] .
"PrecioParaRegistroDeVentaViewModel]] 3
>]]3 4
	resultado]]5 >
=]]? @
new]]A D
List]]E I
<]]I J.
"PrecioParaRegistroDeVentaViewModel]]J l
>]]l m
(]]m n
)]]n o
;]]o p
foreach^^ 
(^^ 
var^^ 
precio^^ 
in^^  "
precios^^# *
)^^* +
{__ 
	resultado`` 
.`` 
Add`` 
(`` 
new`` !.
"PrecioParaRegistroDeVentaViewModel``" D
(``D E
precio``E K
)``K L
)``L M
;``M N
}aa 
returnbb 
	resultadobb 
;bb 
}cc 	
internalee 
staticee 
Listee 
<ee 
Precioee #
>ee# $
Convertee% ,
(ee, -
Listee- 1
<ee1 2.
"PrecioParaRegistroDeVentaViewModelee2 T
>eeT U
precioseeV ]
)ee] ^
{ff 	
Listhh 
<hh 
Preciohh 
>hh 
	resultadohh "
=hh# $
newhh% (
Listhh) -
<hh- .
Preciohh. 4
>hh4 5
(hh5 6
)hh6 7
;hh7 8
Precioii 
precioii 
;ii 
foreachjj 
(jj 
varjj 
preciovmjj !
injj" $
preciosjj% ,
)jj, -
{kk 
precioll 
=ll 
newll 
Precioll #
(ll# $
)ll$ %
;ll% &
preciomm 
.mm 
id_tarifa_dmm "
=mm# $
preciovmmm% -
.mm- .
IdTarifamm. 6
;mm6 7
precionn 
.nn 
valornn 
=nn 
preciovmnn '
.nn' (
Valornn( -
;nn- .
	resultadooo 
.oo 
Addoo 
(oo 
preciooo $
)oo$ %
;oo% &
}pp 
returnqq 
	resultadoqq 
;qq 
}rr 	
}tt 
[vv 
Serializablevv 
]vv 
[ww 
DataContractww 
]ww 
publicxx 

classxx 6
*PrecioParaRegistroMercaderiaUnicaViewModelxx ;
{yy 
[zz 	

DataMemberzz	 
]zz 
public{{ 
bool{{ 
Activo{{ 
{{{ 
get{{  
;{{  !
set{{" %
;{{% &
}{{' (
public|| 
int|| 
IdTarifa|| 
{|| 
get|| !
;||! "
set||# &
;||& '
}||( )
public}} 
string}} 
NombreTarifa}} "
{}}" #
get}}$ '
;}}' (
set}}) ,
;}}, -
}}}. /
public~~ 
decimal~~ 
?~~ 
PrecioActual~~ $
{~~% &
get~~' *
;~~* +
set~~, /
;~~/ 0
}~~1 2
public 
decimal 
? 
NuevoPrecio #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public
ÅÅ 8
*PrecioParaRegistroMercaderiaUnicaViewModel
ÅÅ 9
(
ÅÅ9 :
)
ÅÅ: ;
{
ÇÇ 	
}
ÑÑ 	
public
áá 8
*PrecioParaRegistroMercaderiaUnicaViewModel
áá 9
(
áá9 :
int
áá: =
idTarifa
áá> F
,
ááF G
string
ááH N
nombreTarifa
ááO [
,
áá[ \
decimal
áá\ c
?
áác d
valor
ááe j
)
áák l
{
ââ 	
this
åå 
.
åå 
Activo
åå 
=
åå 
valor
åå 
!=
åå !
null
åå" &
?
åå' (
true
åå) -
:
åå. /
false
åå0 5
;
åå5 6
this
çç 
.
çç 
IdTarifa
çç 
=
çç 
idTarifa
çç $
;
çç$ %
this
éé 
.
éé 
NombreTarifa
éé 
=
éé 
nombreTarifa
éé  ,
;
éé, -
this
èè 
.
èè 
PrecioActual
èè 
=
èè 
valor
èè  %
;
èè% &
this
êê 
.
êê 
NuevoPrecio
êê 
=
êê 
valor
êê $
;
êê$ %
}
ëë 	
internal
üü 
static
üü 
List
üü 
<
üü 
Precio
üü #
>
üü# $
Convert
üü% ,
(
üü, -
List
üü- 1
<
üü1 28
*PrecioParaRegistroMercaderiaUnicaViewModel
üü2 \
>
üü\ ]
preciosViewModel
üü^ n
)
üün o
{
†† 	
List
°° 
<
°° 
Precio
°° 
>
°° 

resultados
°° #
=
°°$ %
new
°°& )
List
°°* .
<
°°. /
Precio
°°/ 5
>
°°5 6
(
°°6 7
)
°°7 8
;
°°8 9
foreach
¢¢ 
(
¢¢ 
var
¢¢ 
precioViewModel
¢¢ (
in
¢¢) +
preciosViewModel
¢¢, <
)
¢¢< =
{
££ 
if
•• 
(
•• 
precioViewModel
•• #
.
••# $
Activo
••$ *
==
••+ -
true
••. 2
&&
••3 5
precioViewModel
••6 E
.
••E F
NuevoPrecio
••F Q
>=
••R T
$num
••U V
)
••V W
{
¶¶ 
Precio
ßß 
precio
ßß !
=
ßß" #
new
ßß$ '
Precio
ßß( .
(
ßß. /
)
ßß/ 0
{
®® 
id_tarifa_d
™™ #
=
™™$ %
precioViewModel
™™& 5
.
™™5 6
IdTarifa
™™6 >
,
™™> ?
valor
´´ 
=
´´ 
(
´´  !
decimal
´´! (
)
´´( )
precioViewModel
´´) 8
.
´´8 9
NuevoPrecio
´´9 D
}
≠≠ 
;
≠≠ 

resultados
ÆÆ 
.
ÆÆ 
Add
ÆÆ "
(
ÆÆ" #
precio
ÆÆ# )
)
ÆÆ) *
;
ÆÆ* +
}
ØØ 
}
≥≥ 
return
¥¥ 

resultados
¥¥ 
;
¥¥ 
}
∂∂ 	
internal
ππ 
static
ππ 
List
ππ 
<
ππ 8
*PrecioParaRegistroMercaderiaUnicaViewModel
ππ G
>
ππG H
Match
ππI N
(
ππN O
List
ππO S
<
ππS T
Detalle_maestro
ππT c
>
ππc d
tarifas
ππe l
,
ππl m
List
ππn r
<
ππr s
Precio
ππs y
>
ππy z
preciosππ{ Ç
)ππÇ É
{
∫∫ 	
List
ªª 
<
ªª 8
*PrecioParaRegistroMercaderiaUnicaViewModel
ªª ;
>
ªª; <

resultados
ªª= G
=
ªªH I
new
ªªJ M
List
ªªN R
<
ªªR S8
*PrecioParaRegistroMercaderiaUnicaViewModel
ªªS }
>
ªª} ~
(
ªª~ 
)ªª Ä
;ªªÄ Å
bool
ºº 
band
ºº 
;
ºº 
foreach
ΩΩ 
(
ΩΩ 
var
ΩΩ 
tarifa
ΩΩ 
in
ΩΩ  "
tarifas
ΩΩ# *
)
ΩΩ* +
{
ææ 
band
øø 
=
øø 
false
øø 
;
øø 
foreach
¿¿ 
(
¿¿ 
var
¿¿ 
precio
¿¿ #
in
¿¿$ &
precios
¿¿' .
)
¿¿. /
{
¡¡ 
if
¬¬ 
(
¬¬ 
tarifa
¬¬ 
.
¬¬ 
id
¬¬ !
==
¬¬" $
precio
¬¬% +
.
¬¬+ ,
id_tarifa_d
¬¬, 7
)
¬¬7 8
{
√√ 

resultados
ƒƒ "
.
ƒƒ" #
Add
ƒƒ# &
(
ƒƒ& '
new
ƒƒ' *8
*PrecioParaRegistroMercaderiaUnicaViewModel
ƒƒ+ U
(
ƒƒU V
tarifa
ƒƒV \
.
ƒƒ\ ]
id
ƒƒ] _
,
ƒƒ_ `
tarifa
ƒƒa g
.
ƒƒg h
nombre
ƒƒh n
,
ƒƒn o
precio
ƒƒp v
.
ƒƒv w
valor
ƒƒw |
)
ƒƒ| }
)
ƒƒ} ~
;
ƒƒ~ 
band
≈≈ 
=
≈≈ 
true
≈≈ #
;
≈≈# $
break
∆∆ 
;
∆∆ 
}
»» 
}
…… 
if
ÀÀ 
(
ÀÀ 
!
ÀÀ 
band
ÀÀ 
)
ÀÀ 
{
ÃÃ 

resultados
ÕÕ 
.
ÕÕ 
Add
ÕÕ "
(
ÕÕ" #
new
ÕÕ# &8
*PrecioParaRegistroMercaderiaUnicaViewModel
ÕÕ' Q
(
ÕÕQ R
tarifa
ÕÕR X
.
ÕÕX Y
id
ÕÕY [
,
ÕÕ[ \
tarifa
ÕÕ] c
.
ÕÕc d
nombre
ÕÕd j
,
ÕÕj k
null
ÕÕk o
)
ÕÕo p
)
ÕÕp q
;
ÕÕq r
}
œœ 
}
—— 
return
‘‘ 

resultados
‘‘ 
;
‘‘ 
}
÷÷ 	
}
⁄⁄ 
}ﬂﬂ ≈ 
[D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Precio\BandejaPrecioViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class "
BandejaPrecioViewModel '
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Producto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Tarifa 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Precio 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

FechaDesde  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 

FechaHasta  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
EsPrecioVigente #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public "
BandejaPrecioViewModel %
(% &
Precio& ,
precio- 3
)3 4
{ 	
this 
. 
Id 
= 
precio 
. 
id 
;  
this 
. 
Producto 
= 
precio "
." #
Concepto_negocio1# 4
.4 5
nombre5 ;
;; <
this 
. 
Tarifa 
= 
precio  
.  !
Detalle_maestro3! 1
.1 2
nombre2 8
;8 9
this 
. 
Precio 
= 
precio  
.  !
valor! &
.& '
ToString' /
(/ 0
$str0 3
+4 5
AplicacionSettings6 H
.H I
DefaultI P
.P Q#
NumeroDecimalesEnPrecioQ h
)h i
;i j
this   
.   

FechaDesde   
=   
precio   $
.  $ %
fecha_inicio  % 1
.  1 2
ToString  2 :
(  : ;
$str  ; G
)  G H
;  H I
this!! 
.!! 

FechaHasta!! 
=!! 
precio!! $
.!!$ %
	fecha_fin!!% .
.!!. /
ToString!!/ 7
(!!7 8
$str!!8 D
)!!D E
;!!E F
this"" 
."" 
EsPrecioVigente""  
=""! "
precio""# )
."") *

es_vigente""* 4
;""4 5
}## 	
public%% 
static%% 
List%% 
<%% "
BandejaPrecioViewModel%% 1
>%%1 2
Convert%%3 :
(%%: ;
List%%; ?
<%%? @
Precio%%@ F
>%%F G
precios%%H O
)%%O P
{&& 	
var'' 
precios_'' 
='' 
new'' 
List'' #
<''# $"
BandejaPrecioViewModel''$ :
>'': ;
(''; <
)''< =
;''= >
foreach)) 
()) 
var)) 
precio)) 
in))  "
precios))# *
)))* +
{** 
precios_++ 
.++ 
Add++ 
(++ 
new++  "
BandejaPrecioViewModel++! 7
(++7 8
precio++8 >
)++> ?
)++? @
;++@ A
},, 
return-- 
precios_-- 
;-- 
}.. 	
}// 
}22 ıD
dD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\ProductoConPreciosVentaCompraViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 2
&ProductoConPreciosVentaCompraViewModel 7
{ 
public "
ComboGenericoViewModel %
Producto& .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
List 
< !
PrecioYFechaViewModel )
>) *
PreciosCompra+ 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
List 
< !
PrecioYFechaViewModel )
>) *
PreciosVenta+ 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
string  
PromedioPrecioCompra *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
string 
PromedioPrecioVenta )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 2
&ProductoConPreciosVentaCompraViewModel 5
(5 6
)6 7
{ 	
} 	
public 2
&ProductoConPreciosVentaCompraViewModel 5
(5 6
ConceptoDeNegocio6 G
pH I
)I J
{ 	
this 
. 
Producto 
= 
new "
ComboGenericoViewModel  6
(6 7
p7 8
.8 9
Id9 ;
,; <
p= >
.> ?
Nombre? E
)E F
;F G
List 
< 
PrecioDeCompra 
>  
PreciosCompra! .
=/ 0
p1 2
.2 3!
Ultimos5PreciosCompra3 H
(H I
)I J
;J K
List 
< 
PrecioDeVenta 
> 
PreciosVenta  ,
=- .
p/ 0
.0 1"
Ultimos5PreciosDeVenta1 G
(G H
)H I
;I J
this   
.   
PreciosCompra   
=    
new  ! $
List  % )
<  ) *!
PrecioYFechaViewModel  * ?
>  ? @
(  @ A
)  A B
;  B C
this!! 
.!! 
PreciosVenta!! 
=!! 
new!!  #
List!!$ (
<!!( )!
PrecioYFechaViewModel!!) >
>!!> ?
(!!? @
)!!@ A
;!!A B
foreach%% 
(%% 
var%% 
item%% 
in%%  
PreciosCompra%%! .
)%%. /
{&& 
this'' 
.'' 
PreciosCompra'' "
.''" #
Add''# &
(''& '
new''' *!
PrecioYFechaViewModel''+ @
(''@ A
item''A E
.''E F
Precio''F L
.''L M
ToString''M U
(''U V
$str''V Y
+''Z [
AplicacionSettings''\ n
.''n o
Default''o v
.''v w$
NumeroDecimalesEnPrecio	''w é
)
''é è
,
''è ê
item
''ë ï
.
''ï ñ
Fecha
''ñ õ
.
''õ ú
ToString
''ú §
(
''§ •
$str
''• Ø
)
''Ø ∞
,
''∞ ±
item
''± µ
.
''µ ∂
Tarifa
''∂ º
)
''º Ω
)
''Ω æ
;
''æ ø
}(( 
foreach** 
(** 
var** 
item** 
in**  
PreciosVenta**! -
)**- .
{++ 
this,, 
.,, 
PreciosVenta,, !
.,,! "
Add,," %
(,,% &
new,,& )!
PrecioYFechaViewModel,,* ?
(,,? @
item,,@ D
.,,D E
Precio,,E K
.,,K L
ToString,,L T
(,,T U
$str,,U X
+,,Y Z
AplicacionSettings,,[ m
.,,m n
Default,,n u
.,,u v$
NumeroDecimalesEnPrecio	,,v ç
)
,,ç é
,
,,é è
item
,,ê î
.
,,î ï
Fecha
,,ï ö
.
,,ö õ
ToString
,,õ £
(
,,£ §
$str
,,§ Æ
)
,,Æ Ø
,
,,Ø ∞
item
,,± µ
.
,,µ ∂
Tarifa
,,∂ º
)
,,º Ω
)
,,Ω æ
;
,,æ ø
}-- 
this.. 
...  
PromedioPrecioCompra.. %
=..& '
PreciosCompra..( 5
...5 6
Count..6 ;
>..< =
$num..> ?
?..@ A
PreciosCompra..B O
...O P
Average..P W
(..W X
up..X Z
=>..[ ]
up..^ `
...` a
Precio..a g
)..g h
...h i
ToString..i q
(..q r
$str..r u
+..v w
AplicacionSettings	..x ä
.
..ä ã
Default
..ã í
.
..í ì%
NumeroDecimalesEnPrecio
..ì ™
)
..™ ´
:
..¨ ≠
$num
..Æ Ø
.
..Ø ∞
ToString
..∞ ∏
(
..∏ π
$str
..π º
+
..Ω æ 
AplicacionSettings
..ø —
.
..— “
Default
..“ Ÿ
.
..Ÿ ⁄%
NumeroDecimalesEnPrecio
..⁄ Ò
)
..Ò Ú
;
..Ú Û
;
..Ù ı
this// 
.// 
PromedioPrecioVenta// $
=//% &
PreciosVenta//' 3
.//3 4
Count//4 9
>//: ;
$num//< =
?//> ?
PreciosVenta//@ L
.//L M
Average//M T
(//T U
up//U W
=>//X Z
up//[ ]
.//] ^
Precio//^ d
)//d e
.//e f
ToString//f n
(//n o
$str//o r
+//s t
AplicacionSettings	//u á
.
//á à
Default
//à è
.
//è ê%
NumeroDecimalesEnPrecio
//ê ß
)
//ß ®
:
//© ™
$num
//´ ¨
.
//¨ ≠
ToString
//≠ µ
(
//µ ∂
$str
//∂ π
+
//∫ ª 
AplicacionSettings
//º Œ
.
//Œ œ
Default
//œ ÷
.
//÷ ◊%
NumeroDecimalesEnPrecio
//◊ Ó
)
//Ó Ô
;
//Ô 
;
//Ò Ú
}00 	
public22 
static22 
List22 
<22 2
&ProductoConPreciosVentaCompraViewModel22 A
>22A B
Convert22C J
(22J K
List22K O
<22O P
ConceptoDeNegocio22P a
>22a b
	productos22c l
)22l m
{33 	
var44 
ListaProductos44 
=44  
new44! $
List44% )
<44) *2
&ProductoConPreciosVentaCompraViewModel44* P
>44P Q
(44Q R
)44R S
;44S T
foreach66 
(66 
var66 
producto66 !
in66" $
	productos66% .
)66. /
{77 
ListaProductos88 
.88 
Add88 "
(88" #
new88# &2
&ProductoConPreciosVentaCompraViewModel88' M
(88M N
producto88N V
)88V W
)88W X
;88X Y
}99 
return:: 
ListaProductos:: !
;::! "
};; 	
}<< 
[>> 
Serializable>> 
]>> 
[?? 
DataContract?? 
]?? 
public@@ 

class@@ !
PrecioYFechaViewModel@@ &
{AA 
publicBB 
stringBB 
PrecioBB 
{BB 
getBB "
;BB" #
setBB$ '
;BB' (
}BB) *
publicCC 
stringCC 
FechaCC 
{CC 
getCC !
;CC! "
setCC# &
;CC& '
}CC( )
publicDD 
stringDD 
TarifaDD 
{DD 
getDD "
;DD" #
setDD$ '
;DD' (
}DD) *
publicEE !
PrecioYFechaViewModelEE $
(EE$ %
stringEE% +
precioEE, 2
,EE2 3
stringEE4 :
fechaEE; @
,EE@ A
stringEEB H
tarifaEEI O
)EEO P
{FF 	
thisGG 
.GG 
PrecioGG 
=GG 
precioGG  
;GG  !
thisHH 
.HH 
FechaHH 
=HH 
fechaHH 
;HH 
thisII 
.II 
TarifaII 
=II 
tarifaII  
;II  !
}JJ 	
}KK 
}LL Á
XD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\ProductoConTarifaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class &
ProductoConTarifaViewModel +
{ 
public "
ComboGenericoViewModel %
Producto& .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
List 
< 
TarifaViewModel #
># $
Tarifas% ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
decimal 
Stock 
{ 
get "
;" #
set$ '
;' (
}) *
public &
ProductoConTarifaViewModel )
() *
)* +
{ 	
} 	
public &
ProductoConTarifaViewModel )
() *
ConceptoDeNegocio* ;
p< =
)= >
{ 	
this 
. 
Producto 
= 
new "
ComboGenericoViewModel  6
(6 7
p7 8
.8 9
Id9 ;
,; <
p= >
.> ?
Nombre? E
)E F
;F G
this 
. 
Tarifas 
= 
new 
List #
<# $
TarifaViewModel$ 3
>3 4
(4 5
)5 6
;6 7
this 
. 
Stock 
= 
p 
. 
Stock  
(  !
)! "
;" #
} 	
public!! 
static!! 
List!! 
<!! &
ProductoConTarifaViewModel!! 5
>!!5 6
Convert!!7 >
(!!> ?
List!!? C
<!!C D
ConceptoDeNegocio!!D U
>!!U V
	productos!!W `
)!!` a
{"" 	
var## 
ListaProductos## 
=##  
new##! $
List##% )
<##) *&
ProductoConTarifaViewModel##* D
>##D E
(##E F
)##F G
;##G H
foreach%% 
(%% 
var%% 
producto%% !
in%%" $
	productos%%% .
)%%. /
{&& 
ListaProductos'' 
.'' 
Add'' "
(''" #
new''# &&
ProductoConTarifaViewModel''' A
(''A B
producto''B J
)''J K
)''K L
;''L M
}(( 
return)) 
ListaProductos)) !
;))! "
}** 	
}++ 
},, ÔP
XD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Producto\ProductoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 
ProductoViewModel "
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public #
ConceptoBasicoViewModel &
Concepto' /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
string 
Sufijo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
CodigoBarra !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
CodigoDigemid #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public "
ComboGenericoViewModel %
UnidadDeMedidaCom& 7
{8 9
get: =
;= >
set? B
;B C
}D E
public "
ComboGenericoViewModel %
UnidadDeMedidaRef& 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
List 
< 
int 
> 
IdsCaracteristicas +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public "
ComboGenericoViewModel %
Presentacion& 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
string 
Caracteristica $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
decimal  
CantidadPresentacion +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public   "
ComboGenericoViewModel   %
UnidadDeMedidaPres  & 8
{  9 :
get  ; >
;  > ?
set  @ C
;  C D
}  E F
public!! "
ComboGenericoViewModel!! %$
PresentacionSubContenido!!& >
{!!? @
get!!A D
;!!D E
set!!F I
;!!I J
}!!K L
public"" 
FotoViewModel"" 
Foto"" !
{""" #
get""$ '
;""' (
set"") ,
;"", -
}"". /
public## #
RegistroPrecioViewModel## &
PreciosVenta##' 3
{##4 5
get##6 9
;##9 :
set##; >
;##> ?
}##@ A
public$$ 
decimal$$ 
StockMinimo$$ "
{$$# $
get$$% (
;$$( )
set$$* -
;$$- .
}$$/ 0
public%% 
List%% 
<%% 
int%% 
>%% 
ModulosAdicionales%% +
{%%, -
get%%. 1
;%%1 2
set%%3 6
;%%6 7
}%%8 9
private'' 
List'' 
<'' 
int'' 
>'' "
ConvertirRolesAModulos'' 0
(''0 1
List''1 5
<''5 6
int''6 9
>''9 :
idsRol''; A
)''A B
{(( 	
List)) 
<)) 
int)) 
>))  
idModulosAdicionales)) *
=))+ ,
new))- 0
List))1 5
<))5 6
int))6 9
>))9 :
()): ;
))); <
;))< =
foreach** 
(** 
var** 
idRol** 
in** !
idsRol**" (
)**( )
{++ 
if,, 
(,, 
idRol,, 
!=,, 
ConceptoSettings,, -
.,,- .
Default,,. 5
.,,5 6
IdRolMercaderia,,6 E
),,E F 
idModulosAdicionales-- (
.--( )
Add--) ,
(--, -
Diccionario--- 8
.--8 9#
MapeoModuloVsRolNegocio--9 P
.--P Q
Single--Q W
(--W X
m--X Y
=>--Z \
m--] ^
.--^ _
Value--_ d
==--e g
idRol--h m
)--m n
.--n o
Key--o r
)--r s
;--s t
}.. 
return//  
idModulosAdicionales// '
;//' (
}00 	
public22 
ProductoViewModel22  
(22  !
)22! "
{33 	
}55 	
public77 
ProductoViewModel77  
(77  !
ConceptoDeNegocio77! 2
producto773 ;
,77; <
List77= A
<77A B(
Precio_Compra_Venta_Concepto77B ^
>77^ _
precios77` g
,77g h
List77i m
<77m n#
ComboGenericoViewModel	77n Ñ
>
77Ñ Ö
totalPuntos
77Ü ë
,
77ë í
List
77ì ó
<
77ó ò$
ComboGenericoViewModel
77ò Æ
>
77Æ Ø
totalTarifas
77∞ º
,
77º Ω
DateTime
77æ ∆
fechaActual
77« “
)
77“ ”
{88 	
this99 
.99 
Id99 
=99 
producto99 
.99 
Id99 !
;99! "
this:: 
.:: 
Nombre:: 
=:: 
producto:: "
.::" #
Nombre::# )
;::) *
this;; 
.;; 
Sufijo;; 
=;; 
producto;; "
.;;" #
Sufijo;;# )
;;;) *
this<< 
.<< 
Codigo<< 
=<< 
producto<< "
.<<" #
Codigo<<# )
;<<) *
this== 
.== 
CodigoBarra== 
=== 
producto== '
.==' (
CodigoBarra==( 3
;==3 4
this>> 
.>> 
CodigoDigemid>> 
=>>  
producto>>! )
.>>) *
CodigoDigemid>>* 7
;>>7 8
this?? 
.?? 
Concepto?? 
=?? 
new?? #
ConceptoBasicoViewModel??  7
(??7 8
producto??8 @
.??@ A
ConceptoBasico??A O
(??O P
)??P Q
)??Q R
;??R S
this@@ 
.@@ 
UnidadDeMedidaCom@@ "
=@@# $
new@@% ("
ComboGenericoViewModel@@) ?
(@@? @
producto@@@ H
.@@H I!
UnidadMedidaComercial@@I ^
(@@^ _
)@@_ `
.@@` a
Id@@a c
,@@c d
producto@@e m
.@@m n"
UnidadMedidaComercial	@@n É
(
@@É Ñ
)
@@Ñ Ö
.
@@Ö Ü
Nombre
@@Ü å
)
@@å ç
;
@@ç é
thisAA 
.AA 
UnidadDeMedidaRefAA "
=AA# $
newAA% ("
ComboGenericoViewModelAA) ?
(AA? @
productoAA@ H
.AAH I#
UnidadMedidaReferencialAAI `
(AA` a
)AAa b
.AAb c
IdAAc e
,AAe f
productoAAg o
.AAo p$
UnidadMedidaReferencial	AAp á
(
AAá à
)
AAà â
.
AAâ ä
Nombre
AAä ê
)
AAê ë
;
AAë í
thisBB 
.BB 
UnidadDeMedidaPresBB #
=BB$ %
newBB& )"
ComboGenericoViewModelBB* @
(BB@ A
productoBBA I
.BBI J$
UnidadMedidaPresentacionBBJ b
(BBb c
)BBc d
.BBd e
IdBBe g
,BBg h
productoBBi q
.BBq r%
UnidadMedidaPresentacion	BBr ä
(
BBä ã
)
BBã å
.
BBå ç
Nombre
BBç ì
)
BBì î
;
BBî ï
thisCC 
.CC 
PresentacionCC 
=CC 
newCC  #"
ComboGenericoViewModelCC$ :
(CC: ;
productoCC; C
.CCC D
PresentacionCCD P
(CCP Q
)CCQ R
.CCR S
IdCCS U
,CCU V
productoCCW _
.CC_ `
PresentacionCC` l
(CCl m
)CCm n
.CCn o
NombreCCo u
)CCu v
;CCv w
thisDD 
.DD  
CantidadPresentacionDD %
=DD& '
productoDD( 0
.DD0 1 
CantidadPresentacionDD1 E
;DDE F
thisEE 
.EE 
FotoEE 
=EE 
newEE 
FotoViewModelEE )
(EE) *
productoEE* 2
.EE2 3
HayFotoEE3 :
(EE: ;
)EE; <
,EE< =
productoEE> F
.EEF G
FotoEEG K
(EEK L
)EEL M
)EEM N
;EEN O
thisFF 
.FF 
IdsCaracteristicasFF #
=FF$ %
productoFF& .
.FF. /#
IdsValorCaracteristicasFF/ F
(FFF G
)FFG H
;FFH I
thisGG 
.GG 
PreciosVentaGG 
=GG 
newGG  ##
RegistroPrecioViewModelGG$ ;
(GG; <
preciosGG< C
,GGC D
productoGGE M
.GGM N
IdGGN P
,GGP Q
totalPuntosGGR ]
,GG] ^
totalTarifasGG_ k
,GGk l
fechaActualGGm x
)GGx y
;GGy z
thisHH 
.HH 
StockMinimoHH 
=HH 
productoHH '
.HH' (
StockMinimoHH( 3
;HH3 4
thisII 
.II 
ModulosAdicionalesII #
=II$ %"
ConvertirRolesAModulosII& <
(II< =
productoII= E
.IIE F
IdsRolesAdicionalesIIF Y
(IIY Z
)IIZ [
)II[ \
;II\ ]
}JJ 	
}KK 
}LL Ìi
ZD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Proveedor\ProveedorViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 
ProveedorViewModel #
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
IdActor 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Codigo 
{ 
get "
;" #
set$ '
;' (
}) *
public "
ComboGenericoViewModel %
TipoPersona& 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public ,
 ComboDocumentoIdentidadViewModel /"
TipoDocumentoIdentidad0 F
{G H
getI L
;L M
setN Q
;Q R
}S T
public 
string $
NumeroDocumentoIdentidad .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
ApellidoPaterno %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
ApellidoMaterno %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Nombres 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
NombreComercial %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
NombreCorto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Correo 
{ 
get "
;" #
set$ '
;' (
}) *
public   "
ComboGenericoViewModel   %
EstadoLegalActor  & 6
{  7 8
get  9 <
;  < =
set  > A
;  A B
}  C D
public!! "
ComboGenericoViewModel!! %

ClaseActor!!& 0
{!!1 2
get!!3 6
;!!6 7
set!!8 ;
;!!; <
}!!= >
public"" 
List"" 
<"" 
DireccionViewModel"" &
>""& '
Direcciones""( 3
{""4 5
get""6 9
;""9 :
set""; >
;""> ?
}""@ A
public## 
bool## 0
$mostrarApellidoPaternoMaternoYNombre## 8
{##9 :
get##; >
;##> ?
set##@ C
;##C D
}##E F
public%% 
ProveedorViewModel%% !
(%%! "
)%%" #
{&& 	
}(( 	
public)) 
ProveedorViewModel)) !
())! "
Actor))" '
actor))( -
)))- .
{** 	
this++ 
.++ 
IdActor++ 
=++ 
actor++  
.++  !
id++! #
;++# $
this,, 
.,, 
TipoPersona,, 
=,, 
new,, ""
ComboGenericoViewModel,,# 9
(,,9 :
actor,,: ?
.,,? @
id_tipo_actor,,@ M
,,,M N
actor,,O T
.,,T U

Tipo_actor,,U _
.,,_ `
nombre,,` f
),,f g
;,,g h
this-- 
.-- 
RazonSocial-- 
=-- 
actor-- $
.--$ %
primer_nombre--% 2
;--2 3
this00 
.00 
ApellidoPaterno00  
=00! "
TipoPersona00# .
.00. /
Id00/ 1
==002 4
ActorSettings005 B
.00B C
Default00C J
.00J K%
IdTipoActorPersonaNatural00K d
?00e f
actor00g l
.00l m
primer_nombre00m z
.00z {
Split	00{ Ä
(
00Ä Å
$char
00Å Ñ
)
00Ñ Ö
[
00Ö Ü
$num
00Ü á
]
00á à
:
00â ä
$str
00ã ç
;
00ç é
this11 
.11 
ApellidoMaterno11  
=11! "
TipoPersona11# .
.11. /
Id11/ 1
==112 4
ActorSettings115 B
.11B C
Default11C J
.11J K%
IdTipoActorPersonaNatural11K d
?11e f
actor11g l
.11l m
primer_nombre11m z
.11z {
Split	11{ Ä
(
11Ä Å
$char
11Å Ñ
)
11Ñ Ö
[
11Ö Ü
$num
11Ü á
]
11á à
:
11â ä
$str
11ã ç
;
11ç é
this22 
.22 
Nombres22 
=22 
TipoPersona22 &
.22& '
Id22' )
==22* ,
ActorSettings22- :
.22: ;
Default22; B
.22B C%
IdTipoActorPersonaNatural22C \
?22] ^
actor22_ d
.22d e
primer_nombre22e r
.22r s
Split22s x
(22x y
$char22y |
)22| }
[22} ~
$num22~ 
]	22 Ä
:
22Å Ç
$str
22É Ö
;
22Ö Ü
this33 
.33 
Telefono33 
=33 
actor33 !
.33! "
telefono33" *
;33* +
this55 
.55 
NombreComercial55  
=55! "
actor55# (
.55( )
segundo_nombre55) 7
;557 8
this66 
.66 
NombreCorto66 
=66 
actor66 $
.66$ %
tercer_nombre66% 2
;662 3
this77 
.77 
Correo77 
=77 
actor77 
.77  
correo77  &
;77& '
this88 
.88 

ClaseActor88 
=88 
new88 !"
ComboGenericoViewModel88" 8
(888 9
actor889 >
.88> ?
id_clase_actor88? M
,88M N
actor88O T
.88T U
Clase_actor88U `
.88` a
nombre88a g
)88g h
;88h i
this99 
.99 
EstadoLegalActor99 !
=99" #
new99$ '"
ComboGenericoViewModel99( >
(99> ?
actor99? D
.99D E
id_estado_legal99E T
,99T U
actor99V [
.99[ \
Estado_legal99\ h
.99h i
nombre99i o
)99o p
;99p q
this:: 
.:: "
TipoDocumentoIdentidad:: '
=::( )
new::* -,
 ComboDocumentoIdentidadViewModel::. N
(::N O
actor::O T
.::T U"
id_documento_identidad::U k
,::k l
actor::m r
.::r s
Detalle_maestro	::s Ç
.
::Ç É
codigo
::É â
)
::â ä
;
::ä ã
this;; 
.;; $
NumeroDocumentoIdentidad;; )
=;;* +
actor;;, 1
.;;1 2&
numero_documento_identidad;;2 L
;;;L M
this<< 
.<< 
Telefono<< 
=<< 
actor<< !
.<<! "
telefono<<" *
;<<* +
this== 
.== 0
$mostrarApellidoPaternoMaternoYNombre== 5
===6 7
this==8 <
.==< =
TipoPersona=== H
.==H I
Id==I K
====L N
ActorSettings==O \
.==\ ]
Default==] d
.==d e1
$IdClaseActorPersonaNaturalPorDefecto	==e â
;
==â ä
if>> 
(>> 
actor>> 
.>> 
	Direccion>> 
.>>  
Any>>  #
(>># $
)>>$ %
)>>% &
{?? 
this@@ 
.@@ 
Direcciones@@  
=@@! "
DireccionViewModel@@# 5
.@@5 6
Convert@@6 =
(@@= >
actor@@> C
.@@C D
	Direccion@@D M
.@@M N
ToList@@N T
(@@T U
)@@U V
)@@V W
;@@W X
}AA 
}BB 	
publicCC 
ProveedorViewModelCC !
(CC! "
	ProveedorCC" +
	proveedorCC, 5
)CC5 6
{DD 	
thisEE 
.EE 
IdEE 
=EE 
	proveedorEE 
.EE  
IdEE  "
;EE" #
thisFF 
.FF 
IdActorFF 
=FF 
	proveedorFF $
.FF$ %
ActorDeNegocioFF% 3
.FF3 4
ActorFF4 9
.FF9 :
idFF: <
;FF< =
thisGG 
.GG 
TipoPersonaGG 
=GG 
newGG ""
ComboGenericoViewModelGG# 9
(GG9 :
	proveedorGG: C
.GGC D
IdTipoPersonaGGD Q
,GGQ R
	proveedorGGS \
.GG\ ]
TipoPersonaGG] h
(GGh i
)GGi j
)GGj k
;GGk l
thisHH 
.HH 
CodigoHH 
=HH 
	proveedorHH #
.HH# $
CodigoHH$ *
;HH* +
thisII 
.II 
RazonSocialII 
=II 
	proveedorII (
.II( )
RazonSocialII) 4
;II4 5
thisJJ 
.JJ 
ApellidoPaternoJJ  
=JJ! "
	proveedorJJ# ,
.JJ, -
ApellidoPaternoJJ- <
;JJ< =
thisKK 
.KK 
ApellidoMaternoKK  
=KK! "
	proveedorKK# ,
.KK, -
ApellidoMaternoKK- <
;KK< =
thisLL 
.LL 
NombresLL 
=LL 
	proveedorLL $
.LL$ %
NombresLL% ,
;LL, -
thisMM 
.MM 
NombreComercialMM  
=MM! "
	proveedorMM# ,
.MM, -
NombreComercialMM- <
;MM< =
thisNN 
.NN 
NombreCortoNN 
=NN 
	proveedorNN (
.NN( )
NombreCortoNN) 4
;NN4 5
thisOO 
.OO 
CorreoOO 
=OO 
	proveedorOO #
.OO# $
CorreoOO$ *
(OO* +
)OO+ ,
;OO, -
thisPP 
.PP 
TelefonoPP 
=PP 
	proveedorPP %
.PP% &
TelefonoPP& .
(PP. /
)PP/ 0
;PP0 1
thisQQ 
.QQ 

ClaseActorQQ 
=QQ 
newQQ !"
ComboGenericoViewModelQQ" 8
(QQ8 9
	proveedorQQ9 B
.QQB C
IdClaseActorQQC O
,QQO P
	proveedorQQQ Z
.QQZ [

ClaseActorQQ[ e
(QQe f
)QQf g
.QQg h
nombreQQh n
)QQn o
;QQo p
thisRR 
.RR 
EstadoLegalActorRR !
=RR" #
newRR$ '"
ComboGenericoViewModelRR( >
(RR> ?
	proveedorRR? H
.RRH I
IdEstadoLegalRRI V
,RRV W
	proveedorRRX a
.RRa b
EstadoLegalRRb m
(RRm n
)RRn o
.RRo p
nombreRRp v
)RRv w
;RRw x
thisSS 
.SS "
TipoDocumentoIdentidadSS '
=SS( )
newSS* -,
 ComboDocumentoIdentidadViewModelSS. N
(SSN O
	proveedorSSO X
.SSX Y$
IdTipoDocumentoIdentidadSSY q
,SSq r
	proveedorSSs |
.SS| })
CodigoTipoDocumentoIdentidad	SS} ô
(
SSô ö
)
SSö õ
)
SSõ ú
;
SSú ù
thisTT 
.TT $
NumeroDocumentoIdentidadTT )
=TT* +
	proveedorTT, 5
.TT5 6
DocumentoIdentidadTT6 H
;TTH I
thisUU 
.UU 0
$mostrarApellidoPaternoMaternoYNombreUU 5
=UU6 7
thisUU8 <
.UU< =
TipoPersonaUU= H
.UUH I
IdUUI K
==UUL N
ActorSettingsUUO \
.UU\ ]
DefaultUU] d
.UUd e1
$IdClaseActorPersonaNaturalPorDefecto	UUe â
;
UUâ ä
thisWW 
.WW 
DireccionesWW 
=WW 
newWW "
ListWW# '
<WW' (
DireccionViewModelWW( :
>WW: ;
(WW; <
)WW< =
;WW= >
varXX 
domicilioFiscalXX 
=XX  !
	proveedorXX" +
.XX+ ,
DomicilioFiscalXX, ;
(XX; <
)XX< =
;XX= >
ifYY 
(YY 
domicilioFiscalYY 
!=YY  "
nullYY# '
)YY' (
{ZZ 
Direcciones[[ 
.[[ 
Add[[ 
([[  
new[[  #
DireccionViewModel[[$ 6
([[6 7
domicilioFiscal[[7 F
)[[F G
)[[G H
;[[H I
}\\ 
}]] 	
}^^ 
}`` ¶'
dD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\RegistroDetalleFinanciamientoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public		 

class		 +
RegistroFinanciamientoViewModel		 0
{

 
public 
decimal 
Inicial 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Capital 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Interes 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
CapitalInteres %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
IEnumerable 
< 2
&RegistroDetalleFinanciamientoViewModel A
>A B
DetallesC K
{L M
getN Q
;Q R
setS V
;V W
}X Y
} 
public 

class 2
&RegistroDetalleFinanciamientoViewModel 7
{ 
public 
int 
IdCuota 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
Cuota 
{ 
get 
; 
set  #
;# $
}% &
public 
decimal 
CapitalCuota #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
decimal 
InteresCuota #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
decimal 
ImporteCuota #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
bool 
EsCuotaInicial "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DateTime 
FechaVencimiento (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
ObservacionCuota &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 2
&RegistroDetalleFinanciamientoViewModel 5
(5 6
)6 7
{ 	
} 	
public!! 2
&RegistroDetalleFinanciamientoViewModel!! 5
(!!5 6
int!!6 9
numCuota!!: B
,!!B C
Cuota!!C H
cuota!!I N
)!!N O
{"" 	
IdCuota## 
=## 
cuota## 
.## 
id## 
;## 
Cuota$$ 
=$$ 
numCuota$$ 
;$$ 
CapitalCuota%% 
=%% 
cuota%%  
.%%  !
capital%%! (
;%%( )
InteresCuota&& 
=&& 
cuota&&  
.&&  !
interes&&! (
;&&( )
ImporteCuota'' 
='' 
cuota''  
.''  !
capital''! (
*''( )
cuota''* /
.''/ 0
interes''0 7
;''7 8
FechaVencimiento(( 
=(( 
cuota(( $
.(($ %
fecha_vencimiento((% 6
;((6 7
ObservacionCuota)) 
=)) 
cuota)) $
.))$ %

comentario))% /
;))/ 0
}** 	
public.. 
static.. 
List.. 
<.. 2
&RegistroDetalleFinanciamientoViewModel.. A
>..A B
Convert_..C K
(..K L
List..L P
<..P Q
Cuota..Q V
>..V W
cuotas..X ^
)..^ _
{// 	
List00 
<00 2
&RegistroDetalleFinanciamientoViewModel00 7
>007 8
nuevasCuotas009 E
=00F G
new00H K
List00L P
<00P Q2
&RegistroDetalleFinanciamientoViewModel00Q w
>00w x
(00x y
)00y z
;00z {
int11 
numeroCuota11 
=11 
$num11 
;11  
foreach22 
(22 
var22 
item22 
in22  
cuotas22! '
)22' (
{33 
nuevasCuotas44 
.44 
Add44  
(44  !
new44! $2
&RegistroDetalleFinanciamientoViewModel44% K
(44K L
numeroCuota44L W
++44W Y
,44Y Z
item44Z ^
)44^ _
)44_ `
;44` a
}55 
return66 
nuevasCuotas66 
;66  
}77 	
}88 
}99 â
^D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\ParametrosBasicosReporte.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
public 

class $
ParametrosBasicosReporte )
{ 
private 
ReportParameter 
nombreEmpresa  -
;- .
private 
ReportParameter 
logoSede  (
;( )
private 
ReportParameter 
fechaActualSistema  2
;2 3
private 
ReportParameter 
usuario  '
;' (
public $
ParametrosBasicosReporte '
(' (
)( )
{ 	
}
 
public 
ReportParameter 

NombreSede )
{* +
get, /
=>0 2
nombreEmpresa3 @
;@ A
setB E
=>F H
nombreEmpresaI V
=W X
valueY ^
;^ _
}` a
public 
ReportParameter 
LogoSede '
{( )
get* -
=>. 0
logoSede1 9
;9 :
set; >
=>? A
logoSedeB J
=K L
valueM R
;R S
}T U
public 
ReportParameter 
FechaActualSistema 1
{2 3
get4 7
=>8 :
fechaActualSistema; M
;M N
setO R
=>S U
fechaActualSistemaV h
=i j
valuek p
;p q
}r s
public 
ReportParameter 
Usuario &
{' (
get) ,
=>- /
usuario0 7
;7 8
set9 <
=>= ?
usuario@ G
=H I
valueJ O
;O P
}Q R
} 
} ’m
oD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\ReporteVentaClienteFormatoAdsoftViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
public 

class 5
)ReporteVentaClienteFormatoAdsoftViewModel :
{ 
public 
string 
NumeroSerie !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
NumeroComprobante '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
	NumeroRUC 
{  !
get" %
;% &
set' *
;* +
}, -
public 
long 
	IdCliente 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
CodigoComprobante '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 

TipoMoneda  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 

Detraccion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
ImporteVenta #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
decimal &
ImpuestoSelectivoAlConsumo 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
decimal 
Icbper 
{ 
get  #
;# $
set% (
;( )
}* +
public 
decimal  
ImporteTotalInafecta +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public   
decimal   !
ImporteTotalExonerada   ,
{  - .
get  / 2
;  2 3
set  4 7
;  7 8
}  9 :
public!! 
decimal!! #
ImporteTotalExportacion!! .
{!!/ 0
get!!1 4
;!!4 5
set!!6 9
;!!9 :
}!!; <
public## 
decimal## 
Recargo## 
{##  
get##! $
;##$ %
set##& )
;##) *
}##+ ,
public$$ 
decimal$$ 

ImporteIGV$$ !
{$$" #
get$$$ '
;$$' (
set$$) ,
;$$, -
}$$. /
public%% 
decimal%% 
ImporteTotal%% #
{%%$ %
get%%& )
;%%) *
set%%+ .
;%%. /
}%%0 1
public&& 
string&& 
Estado&& 
{&& 
get&& "
;&&" #
set&&$ '
;&&' (
}&&) *
public(( 
string(( 
SerDqm(( 
{(( 
get(( "
;((" #
set(($ '
;((' (
}(() *
public)) 
string)) 
NumDqm)) 
{)) 
get)) "
;))" #
set))$ '
;))' (
}))) *
public** 
string** 
FecDqm** 
{** 
get** "
;**" #
set**$ '
;**' (
}**) *
public++ 
string++ 
TipDqm++ 
{++ 
get++ "
;++" #
set++$ '
;++' (
}++) *
public,, 
string,, 
SerieFin,, 
{,,  
get,,! $
;,,$ %
set,,& )
;,,) *
},,+ ,
public-- 
string-- 
	NumeroFin-- 
{--  !
get--" %
;--% &
set--' *
;--* +
}--, -
public.. 
string.. 
	NumeroDNI.. 
{..  !
get.." %
;..% &
set..' *
;..* +
}.., -
public// 
string// 
	Pasaporte// 
{//  !
get//" %
;//% &
set//' *
;//* +
}//, -
public00 
string00 
CuentaDeVenta00 #
{00$ %
get00& )
;00) *
set00+ .
;00. /
}000 1
public11 
decimal11 

TipoCambio11 !
{11" #
get11$ '
;11' (
set11) ,
;11, -
}11. /
public33 5
)ReporteVentaClienteFormatoAdsoftViewModel33 8
(338 9
)339 :
{44 	
}44
 
public66 5
)ReporteVentaClienteFormatoAdsoftViewModel66 8
(668 9
Venta_Cliente669 F
venta66G L
)66L M
{77 	
this;; 
.;; 
NumeroSerie;; 
=;; 
venta;; $
.;;$ %
NumeroSerie;;% 0
;;;0 1
this<< 
.<< 
NumeroComprobante<< "
=<<# $
venta<<% *
.<<* +
NumeroComprobante<<+ <
><<= >
$num<<? @
?<<A B
venta<<C H
.<<H I
NumeroComprobante<<I Z
.<<Z [
ToString<<[ c
(<<c d
)<<d e
:<<f g
venta<<h m
.<<m n
NumeroInicial<<n {
.<<{ |
ToString	<<| Ñ
(
<<Ñ Ö
)
<<Ö Ü
;
<<á à
this== 
.== 
Fecha== 
=== 
venta== 
.== 
FechaEmision== +
.==+ ,
ToString==, 4
(==4 5
$str==5 A
)==A B
;==B C
this>> 
.>> 
	NumeroRUC>> 
=>> 
ActorSettings>> *
.>>* +
Default>>+ 2
.>>2 3'
IdTipoDocumentoIdentidadRuc>>3 N
==>>O Q
venta>>R W
.>>W X
IdTipoDocumento>>X g
?>>h i
venta>>j o
.>>o p
NumeroDocumento>>p 
:
>>Ä Å
$str
>>Ç Ñ
;
>>Ñ Ö
this?? 
.?? 
RazonSocial?? 
=?? 
venta?? $
.??$ %
EsInvalidada??% 1
???2 3
$str??4 =
:??> ?
venta??@ E
.??E F
PrimerNombre??F R
.??R S
Replace??S Z
(??Z [
$str??[ ^
,??^ _
$str??` c
)??c d
;??d e
this@@ 
.@@ 
CodigoComprobante@@ "
=@@# $
venta@@% *
.@@* +
CodigoComprobante@@+ <
;@@< =
thisAA 
.AA 

TipoMonedaAA 
=AA 
ventaAA #
.AA# $
CodigoMonedaAA$ 0
;AA0 1
thisCC 
.CC 

DetraccionCC 
=CC 
$numCC 
;CC  
thisDD 
.DD 
ImporteVentaDD 
=DD 
ventaDD  %
.DD% &
EsInvalidadaDD& 2
?DD3 4
$numDD5 6
:DD7 8
ventaDD9 >
.DD> ?=
1ImpuestoGeneralVentasYOImpuestoPromocionMunicipalDD? p
>DDq r
$numDDs t
?DDu v
ventaDDw |
.DD| }2
%BaseImponibleOperacionGravadaConSigno	DD} ¢
:
DD£ §
venta
DD• ™
.
DD™ ´)
ImporteTotalComprobantePago
DD´ ∆
;
DD∆ «
thisFF 
.FF &
ImpuestoSelectivoAlConsumoFF +
=FF, -
$numFF. /
;FF/ 0
thisGG 
.GG  
ImporteTotalInafectaGG %
=GG& '
$numGG( )
;GG) *
thisHH 
.HH !
ImporteTotalExoneradaHH &
=HH' (
ventaHH) .
.HH. /
EsInvalidadaHH/ ;
?HH< =
$numHH> ?
:HH@ A
ventaHHB G
.HHG H2
&ImporteTotalOperacionExoneradaConSignoHHH n
;HHn o
thisII 
.II #
ImporteTotalExportacionII (
=II) *
$numII+ ,
;II, -
thisKK 
.KK 
RecargoKK 
=KK 
$numKK 
;KK 
thisLL 
.LL 

ImporteIGVLL 
=LL 
ventaLL #
.LL# $
EsInvalidadaLL$ 0
?LL1 2
$numLL3 4
:LL5 6
ventaLL7 <
.LL< ==
1ImpuestoGeneralVentasYOImpuestoPromocionMunicipalLL= n
;LLn o
thisMM 
.MM 
IcbperMM 
=MM 
ventaMM 
.MM  
EsInvalidadaMM  ,
?MM- .
$numMM/ 0
:MM1 2
ventaMM3 8
.MM8 9
IcbperMM9 ?
;MM? @
thisNN 
.NN 
ImporteTotalNN 
=NN 
ventaNN  %
.NN% &
EsInvalidadaNN& 2
?NN3 4
$numNN5 6
:NN7 8
ventaNN9 >
.NN> ?'
ImporteTotalComprobantePagoNN? Z
;NNZ [
thisOO 
.OO 
EstadoOO 
=OO 
ventaOO 
.OO  
EsInvalidadaOO  ,
?OO- .
$strOO/ 2
:OO2 3
$strOO3 5
;OO5 6
ifQQ 
(QQ 
ventaQQ 
.QQ 
IdTipoComprobanteQQ '
==QQ( *
MaestroSettingsQQ+ :
.QQ: ;
DefaultQQ; B
.QQB C2
&IdDetalleMaestroComprobanteNotaCreditoQQC i
||QQj l
ventaQQm r
.QQr s
IdTipoComprobante	QQs Ñ
==
QQÖ á
MaestroSettings
QQà ó
.
QQó ò
Default
QQò ü
.
QQü †5
'IdDetalleMaestroComprobanteNotaDeDebito
QQ† «
)
QQ« »
{RR 
thisSS 
.SS 
SerDqmSS 
=SS 
ventaSS #
.SS# $!
NumeroSerieReferenciaSS$ 9
;SS9 :
thisTT 
.TT 
NumDqmTT 
=TT 
ventaTT #
.TT# $'
NumeroComprobanteReferenciaTT$ ?
.TT? @
ToStringTT@ H
(TTH I
)TTI J
;TTJ K
thisUU 
.UU 
FecDqmUU 
=UU 
ventaUU #
.UU# $"
FechaEmisionReferenciaUU$ :
.UU: ;
ToStringUU; C
(UUC D
$strUUD P
)UUP Q
;UUR S
thisVV 
.VV 
TipDqmVV 
=VV 
ventaVV $
.VV$ %'
CodigoComprobanteReferenciaVV% @
;VV@ A
thisWW 
.WW 
SerieFinWW 
=WW 
ventaWW  %
.WW% &!
NumeroSerieReferenciaWW& ;
;WW; <
}XX 
elseYY 
{ZZ 
this[[ 
.[[ 
SerDqm[[ 
=[[ 
$str[[  
;[[  !
this\\ 
.\\ 
NumDqm\\ 
=\\ 
$str\\ !
;\\! "
this]] 
.]] 
FecDqm]] 
=]] 
$str]]  
;]]  !
this^^ 
.^^ 
TipDqm^^ 
=^^ 
$str^^ !
;^^! "
this__ 
.__ 
SerieFin__ 
=__ 
$str__  "
;__" #
}`` 
thisdd 
.dd 
	NumeroFindd 
=dd 
ventadd "
.dd" #
NumeroFinaldd# .
>dd/ 0
$numdd1 2
?dd3 4
ventadd5 :
.dd: ;
NumeroFinaldd; F
.ddF G
ToStringddG O
(ddO P
)ddP Q
:ddR S
ventaddT Y
.ddY Z
NumeroComprobanteddZ k
.ddk l
ToStringddl t
(ddt u
)ddu v
;ddv w
thisee 
.ee 
	NumeroDNIee 
=ee 
ActorSettingsee *
.ee* +
Defaultee+ 2
.ee2 3'
IdTipoDocumentoIdentidadDniee3 N
==eeO Q
ventaeeR W
.eeW X
IdTipoDocumentoeeX g
?eeh i
ventaeej o
.eeo p
NumeroDocumentoeep 
:
eeÄ Å
$str
eeÇ Ñ
;
eeÑ Ö
thisff 
.ff 
	Pasaporteff 
=ff 
$strff 
;ff  
thisgg 
.gg 
CuentaDeVentagg 
=gg  
$strgg! #
;gg# $
thishh 
.hh 

TipoCambiohh 
=hh 
$numhh 
;hh  
}ii 	
publickk 
statickk 
Listkk 
<kk 5
)ReporteVentaClienteFormatoAdsoftViewModelkk D
>kkD E
ConvertkkF M
(kkM N
ListkkN R
<kkR S
Venta_ClientekkS `
>kk` a
ventaskkb h
)kkh i
{ll 	
Listmm 
<mm 5
)ReporteVentaClienteFormatoAdsoftViewModelmm :
>mm: ;
ventasViewModelmm< K
=mmL M
newmmN Q
ListmmR V
<mmV W6
)ReporteVentaClienteFormatoAdsoftViewModel	mmW Ä
>
mmÄ Å
(
mmÅ Ç
)
mmÇ É
;
mmÉ Ñ
foreachnn 
(nn 
varnn 
itemnn 
innn  
ventasnn! '
)nn' (
{oo 
ventasViewModelpp 
.pp  
Addpp  #
(pp# $
newpp$ '5
)ReporteVentaClienteFormatoAdsoftViewModelpp( Q
(ppQ R
itemppR V
)ppV W
)ppW X
;ppX Y
}qq 
returnrr 
ventasViewModelrr "
;rr" #
}ss 	
}uu 
}vv —K
oD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\ReporteVentaClienteFormatoFoxcomViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
public 

class 5
)ReporteVentaClienteFormatoFoxcomViewModel :
{ 
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
CodigoComprobante '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
NumeroSerie !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
NumeroComprobante '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
long 
	IdCliente 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
CodigoDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
NumeroDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
RazonSocial !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal  
BaseImponibleGravada +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
decimal 
IGVoIPM 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Icbper 
{ 
get  #
;# $
set% (
;( )
}* +
public 
decimal !
ImporteTotalExonerada ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
decimal 
	Retencion  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal #
ImporteTotalComprobante .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string !
NumeroSerieReferencia +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
string '
NumeroComprobanteReferencia 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public   
string   "
FechaEmisionReferencia   ,
{  - .
get  / 2
;  2 3
set  4 7
;  7 8
}  9 :
public!! 
string!! '
CodigoComprobanteReferencia!! 1
{!!2 3
get!!4 7
;!!7 8
set!!9 <
;!!< =
}!!> ?
public## 5
)ReporteVentaClienteFormatoFoxcomViewModel## 8
(##8 9
)##9 :
{$$ 	
}$$
 
public&& 5
)ReporteVentaClienteFormatoFoxcomViewModel&& 8
(&&8 9
Venta_Cliente&&9 F
venta&&G L
)&&L M
{'' 	
this(( 
.(( 
Fecha(( 
=(( 
venta(( 
.(( 
FechaEmision(( +
.((+ ,
ToString((, 4
(((4 5
$str((5 A
)((A B
;((B C
this)) 
.)) 
CodigoComprobante)) "
=))# $
venta))% *
.))* +
CodigoComprobante))+ <
;))< =
this** 
.** 
NumeroSerie** 
=** 
venta** $
.**$ %
NumeroSerie**% 0
;**0 1
this++ 
.++ 
NumeroComprobante++ "
=++# $
venta++% *
.++* +
NumeroComprobante+++ <
.++< =
ToString++= E
(++E F
)++F G
.++G H
PadLeft++H O
(++O P
$num++P Q
,++Q R
$char++S V
)++V W
;++W X
this,, 
.,, 
CodigoDocumento,,  
=,,! "
venta,,# (
.,,( )
CodigoDocumento,,) 8
;,,8 9
this-- 
.-- 
NumeroDocumento--  
=--! "
venta--# (
.--( )
NumeroDocumento--) 8
;--8 9
this.. 
... 
RazonSocial.. 
=.. 
venta.. $
...$ %
PrimerNombre..% 1
...1 2
Replace..2 9
(..9 :
$str..: =
,..= >
$str..? B
)..B C
;..C D
this00 
.00  
BaseImponibleGravada00 %
=00& '
venta00( -
.00- .
EsInvalidada00. :
?00; <
$num00= >
:00? @
venta00A F
.00F G1
%BaseImponibleOperacionGravadaConSigno00G l
;00l m
this11 
.11 
IGVoIPM11 
=11 
venta11  
.11  !
EsInvalidada11! -
?11. /
$num110 1
:112 3
venta114 9
.119 :=
1ImpuestoGeneralVentasYOImpuestoPromocionMunicipal11: k
;11k l
this22 
.22 
Icbper22 
=22 
venta22 
.22  
EsInvalidada22  ,
?22- .
$num22/ 0
:221 2
venta223 8
.228 9
Icbper229 ?
;22? @
this33 
.33 !
ImporteTotalExonerada33 &
=33' (
venta33) .
.33. /
EsInvalidada33/ ;
?33< =
$num33> ?
:33@ A
venta33B G
.33G H2
&ImporteTotalOperacionExoneradaConSigno33H n
;33n o
this44 
.44 
	Retencion44 
=44 
$num44 
;44 
this55 
.55 #
ImporteTotalComprobante55 (
=55) *
venta55+ 0
.550 1
EsInvalidada551 =
?55> ?
$num55@ A
:55B C
venta55D I
.55I J'
ImporteTotalComprobantePago55J e
;55e f
if77 
(77 
venta77 
.77 
IdTipoComprobante77 '
==77( *
MaestroSettings77+ :
.77: ;
Default77; B
.77B C2
&IdDetalleMaestroComprobanteNotaCredito77C i
||77j l
venta77m r
.77r s
IdTipoComprobante	77s Ñ
==
77Ö á
MaestroSettings
77à ó
.
77ó ò
Default
77ò ü
.
77ü †5
'IdDetalleMaestroComprobanteNotaDeDebito
77† «
)
77« »
{88 
this99 
.99 !
NumeroSerieReferencia99 *
=99+ ,
venta99- 2
.992 3!
NumeroSerieReferencia993 H
;99H I
this:: 
.:: '
NumeroComprobanteReferencia:: 0
=::1 2
venta::3 8
.::8 9'
NumeroComprobanteReferencia::9 T
.::T U
ToString::U ]
(::] ^
)::^ _
;::_ `
this;; 
.;; "
FechaEmisionReferencia;; +
=;;, -
venta;;. 3
.;;3 4"
FechaEmisionReferencia;;4 J
.;;J K
ToString;;K S
(;;S T
$str;;T `
);;` a
;;;a b
this<< 
.<< '
CodigoComprobanteReferencia<< 0
=<<1 2
venta<<3 8
.<<8 9'
CodigoComprobanteReferencia<<9 T
;<<T U
}>> 
else?? 
{@@ 
thisAA 
.AA !
NumeroSerieReferenciaAA *
=AA+ ,
$strAA- /
;AA/ 0
thisBB 
.BB '
NumeroComprobanteReferenciaBB 0
=BB1 2
$strBB3 5
;BB5 6
thisCC 
.CC "
FechaEmisionReferenciaCC +
=CC, -
$strCC. 0
;CC0 1
thisDD 
.DD '
CodigoComprobanteReferenciaDD 0
=DD1 2
$strDD3 5
;DD5 6
}FF 
}GG 	
publicII 
staticII 
ListII 
<II 5
)ReporteVentaClienteFormatoFoxcomViewModelII D
>IID E
ConvertIIF M
(IIM N
ListIIN R
<IIR S
Venta_ClienteIIS `
>II` a
ventasIIb h
)IIh i
{JJ 	
ListKK 
<KK 5
)ReporteVentaClienteFormatoFoxcomViewModelKK :
>KK: ;
ventasViewModelKK< K
=KKL M
newKKN Q
ListKKR V
<KKV W6
)ReporteVentaClienteFormatoFoxcomViewModel	KKW Ä
>
KKÄ Å
(
KKÅ Ç
)
KKÇ É
;
KKÉ Ñ
foreachLL 
(LL 
varLL 
itemLL 
inLL  
ventasLL! '
)LL' (
{MM 
ventasViewModelNN 
.NN  
AddNN  #
(NN# $
newNN$ '5
)ReporteVentaClienteFormatoFoxcomViewModelNN( Q
(NNQ R
itemNNR V
)NNV W
)NNW X
;NNX Y
}OO 
returnPP 
ventasViewModelPP "
;PP" #
}QQ 	
}SS 
}TT Æ
[D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\ReportViewerComprimir.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public		 

class		 !
ReportViewerComprimir		 &
{

 
public 
ReportViewer 
ReportViewer (
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public !
ReportViewerComprimir $
($ %
ReportViewer% 1
reportViewer2 >
,> ?
string@ F
nombreG M
)M N
{ 	
ReportViewer 
= 
reportViewer '
;' (
Nombre 
= 
nombre 
; 
} 	
} 
} É
}D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\ResumenOperacionDeVentaPorModalidadPorVendedorViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
public 

class C
7ResumenOperacionDeVentaPorModalidadPorVendedorViewModel H
{ 
public C
7ResumenOperacionDeVentaPorModalidadPorVendedorViewModel F
(F G
)G H
{ 	
} 	
public C
7ResumenOperacionDeVentaPorModalidadPorVendedorViewModel F
(F G
stringG M
	modalidadN W
,W X
intY \
cantidadOperaciones] p
,p q
decimalr y
importeTotal	z Ü
)
Ü á
{ 	
	Modalidad 
= 
	modalidad !
;! "
CantidadOperaciones 
=  !
cantidadOperaciones" 5
;5 6
ImporteTotal 
= 
importeTotal '
;' (
} 	
public 
string 
	Modalidad 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
CantidadOperaciones &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
decimal 
ImporteTotal #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public   
static   
List   
<   C
7ResumenOperacionDeVentaPorModalidadPorVendedorViewModel   R
>  R S
Convert  T [
(  [ \
List  \ `
<  ` a.
!Resumen_Transaccion_Por_Modalidad	  a Ç
>
  Ç É
ventas
  Ñ ä
)
  ä ã
{!! 	
List"" 
<"" C
7ResumenOperacionDeVentaPorModalidadPorVendedorViewModel"" H
>""H I$
resumenVentaPorModalidad""J b
=""c d
new""e h
List""i m
<""m nD
7ResumenOperacionDeVentaPorModalidadPorVendedorViewModel	""n •
>
""• ¶
(
""¶ ß
)
""ß ®
;
""® ©
foreach## 
(## 
var## 
item## 
in##  
ventas##! '
)##' (
{$$ $
resumenVentaPorModalidad%% (
.%%( )
Add%%) ,
(%%, -
new&& C
7ResumenOperacionDeVentaPorModalidadPorVendedorViewModel&& O
(&&O P
	Enumerado'' 
.'' 
GetDescription'' ,
('', -
(''- .
ModoOperacionEnum''. ?
)''? @
Enum''@ D
.''D E
Parse''E J
(''J K
typeof''K Q
(''Q R
ModoOperacionEnum''R c
)''c d
,''d e
item''f j
.''j k
IdModalidad''k v
,''v w
true''x |
)''| }
)''} ~
,''~ 
item(( 
.(( !
CantidadDeOperaciones(( .
,((. /
item)) 
.)) 
Importe))  
)))  !
)))! "
;))" #
}** 
return++ $
resumenVentaPorModalidad++ +
;+++ ,
},, 	
}.. 
}33 …l
cD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\InventarioValorizadoViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
public 

class )
InventarioValorizadoViewModel .
{ 
public 
string 
Producto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Lote 
{ 
get  
;  !
set" %
;% &
}' (
public 
decimal 
? 
Cantidad  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 
? 
CostoUnitario %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 

CostoTotal !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
? 
PrecioVenta #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
decimal 
ImporteTotal #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
decimal 
Utilidad 
{  !
get" %
;% &
set' *
;* +
}, -
public 
List 
< 6
*DetalleMaestroValorCaracteristicaViewModel >
>> ?"
ValoresCaracteristicas@ V
{W X
getY \
;\ ]
set^ a
;a b
}c d
public )
InventarioValorizadoViewModel ,
(, -
)- .
{ 	
}
 
public )
InventarioValorizadoViewModel ,
(, -)
Reporte_Inventario_Valorizado- J

valorizadoK U
,U V
ListW [
<[ \"
ComboGenericoViewModel\ r
>r s
caracteristicas	t É
)
É Ñ
{ 	
this   
.   
Producto   
=   

valorizado   &
.  & '
Producto  ' /
;  / 0
this!! 
.!! 
Cantidad!! 
=!! 

valorizado!! &
.!!& '
Cantidad!!' /
;!!/ 0
this"" 
."" 
Lote"" 
="" 

valorizado"" "
.""" #
Lote""# '
;""' (
this## 
.## 
CostoUnitario## 
=##  

valorizado##! +
.##+ ,
CostoUnitario##, 9
;##9 :
this$$ 
.$$ 

CostoTotal$$ 
=$$ 

valorizado$$ (
.$$( )

CostoTotal$$) 3
;$$3 4
this%% 
.%% 
PrecioVenta%% 
=%% 

valorizado%% )
.%%) *
PrecioVenta%%* 5
;%%5 6
this&& 
.&& 
ImporteTotal&& 
=&& 

valorizado&&  *
.&&* +
ImporteTotal&&+ 7
;&&7 8
this'' 
.'' 
Utilidad'' 
='' 

valorizado'' &
.''& '
Utilidad''' /
;''/ 0
this(( 
.(( "
ValoresCaracteristicas(( '
=((( )6
*DetalleMaestroValorCaracteristicaViewModel((* T
.((T U
Match((U Z
(((Z [:
-ValorDeCaracteristicaConceptoNegocioViewModel	(([ à
.
((à â
Convert
((â ê
(
((ê ë

valorizado
((ë õ
.
((õ ú1
#ValorCaracteristicasConceptoNegocio
((ú ø
.
((ø ¿
ToList
((¿ ∆
(
((∆ «
)
((« »
)
((» …
,
((…  
caracteristicas
((À ⁄
)
((⁄ €
;
((€ ‹
})) 	
public++ )
InventarioValorizadoViewModel++ ,
(++, -
string++- 3
producto++4 <
,++< =
decimal++= D
?++D E
cantidadTotal++F S
,++S T
string++U [
lote++\ `
,++` a
decimal++b i
?++i j
costoUnitario++k x
,++x y
decimal	++z Å

costoTotal
++Ç å
,
++å ç
decimal
++é ï
?
++ï ñ
precioVenta
++ó ¢
,
++¢ £
decimal
++§ ´
importeTotal
++¨ ∏
,
++∏ π
decimal
++∫ ¡
utilidad
++¬  
,
++  À
List
++Ã –
<
++– —3
%Valor_caracteristica_concepto_negocio
++— ˆ
>
++ˆ ˜$
valoresCaracteristicas
++¯ é
,
++é è
List
++è ì
<
++ì î$
ComboGenericoViewModel
++î ™
>
++™ ´
caracteristicas
++¨ ª
)
++ª º
{,, 	
this.. 
... 
Producto.. 
=.. 
producto.. $
;..$ %
this// 
.// 
Lote// 
=// 
lote// 
;// 
this00 
.00 
Cantidad00 
=00 
cantidadTotal00 )
;00) *
this11 
.11 
CostoUnitario11 
=11  
costoUnitario11! .
;11. /
this22 
.22 

CostoTotal22 
=22 

costoTotal22 (
;22( )
this33 
.33 
PrecioVenta33 
=33 
precioVenta33 *
;33* +
this44 
.44 
ImporteTotal44 
=44 
importeTotal44  ,
;44, -
this55 
.55 
Utilidad55 
=55 
utilidad55 $
;55$ %
this66 
.66 "
ValoresCaracteristicas66 '
=66( )6
*DetalleMaestroValorCaracteristicaViewModel66* T
.66T U
Match66U Z
(66Z [:
-ValorDeCaracteristicaConceptoNegocioViewModel	66[ à
.
66à â
Convert
66â ê
(
66ê ë$
valoresCaracteristicas
66ë ß
)
66ß ®
,
66® ©
caracteristicas
66™ π
)
66π ∫
;
66∫ ª
}77 	
public:: )
InventarioValorizadoViewModel:: ,
(::, -
decimal::- 4
cantidad::5 =
,::= >
decimal::? F
costoUnitario::G T
,::T U
decimal::V ]
precioVenta::^ i
)::i j
{;; 	
this<< 
.<< 
Cantidad<< 
=<< 
cantidad<< $
;<<$ %
this== 
.== 
CostoUnitario== 
===  
costoUnitario==! .
;==. /
this>> 
.>> 

CostoTotal>> 
=>> 
cantidad>> &
*>>' (
costoUnitario>>) 6
;>>6 7
this?? 
.?? 
PrecioVenta?? 
=?? 
precioVenta?? *
;??* +
this@@ 
.@@ 
ImporteTotal@@ 
=@@ 
cantidad@@  (
*@@) *
precioVenta@@+ 6
;@@6 7
thisAA 
.AA 
UtilidadAA 
=AA 
ImporteTotalAA (
-AA) *

CostoTotalAA+ 5
;AA5 6
}BB 	
publicFF 
staticFF 
ListFF 
<FF )
InventarioValorizadoViewModelFF 8
>FF8 9
ConvertFF: A
(FFA B
ListFFB F
<FFF G)
Reporte_Inventario_ValorizadoFFG d
>FFd e
inventariosFFf q
,FFq r
ListFFs w
<FFw x#
ComboGenericoViewModel	FFx é
>
FFé è
caracteristicas
FFê ü
,
FFü †
bool
FF° •
conLote
FF¶ ≠
)
FF≠ Æ
{GG 	
varHH  
inventariosViewModelHH $
=HH% &
newHH' *
ListHH+ /
<HH/ 0)
InventarioValorizadoViewModelHH0 M
>HHM N
(HHN O
)HHO P
;HHP Q
ifJJ 
(JJ 
conLoteJJ 
)JJ 
{KK 
foreachLL 
(LL 
varLL 
iLL 
inLL !
inventariosLL" -
)LL- .
{MM  
inventariosViewModelNN (
.NN( )
AddNN) ,
(NN, -
newNN- 0)
InventarioValorizadoViewModelNN1 N
(NNN O
iNNO P
,NNP Q
caracteristicasNNR a
)NNa b
)NNb c
;NNc d
}OO 
}PP 
elseQQ 
{RR 
varSS  
inventariosAgrupadosSS (
=SS) *)
Reporte_Inventario_ValorizadoSS+ H
.SSH I'
AgruparPorIdConcpetoNegocioSSI d
(SSd e
inventariosSSe p
)SSp q
;SSq r
foreachTT 
(TT 
varTT 
iTT 
inTT ! 
inventariosAgrupadosTT" 6
)TT6 7
{UU  
inventariosViewModelVV (
.VV( )
AddVV) ,
(VV, -
newVV- 0)
InventarioValorizadoViewModelVV1 N
(VVN O
iVVO P
,VVP Q
caracteristicasVVR a
)VVa b
)VVb c
;VVc d
}WW 
}XX 
return]]  
inventariosViewModel]] '
;]]' (
}^^ 	
public`` 
static`` 
List`` 
<`` )
InventarioValorizadoViewModel`` 8
>``8 9
Convert``: A
(``A B
decimal``B I
cantidad``J R
,``R S
decimal``T [
costoUnitario``\ i
,``i j'
Ultimo_Precio_Compra_Venta	``k Ö
ultimosPrecios
``Ü î
)
``î ï
{aa 	
Listbb 
<bb )
InventarioValorizadoViewModelbb .
>bb. /)
inventarioValorizadoViewModelbb0 M
=bbN O
newbbP S
ListbbT X
<bbX Y)
InventarioValorizadoViewModelbbY v
>bbv w
(bbw x
)bbx y
;bby z
decimaldd 
precioVentadd 
=dd  !
ultimosPreciosdd" 0
.dd0 1
UltimoPrecioVentadd1 B
!=ddC E
nullddF J
?ddK L
(ddM N
decimalddN U
)ddU V
ultimosPreciosddV d
.ddd e
UltimoPrecioVentadde v
:ddw x
$numddy z
;ddz {)
inventarioValorizadoViewModelee )
.ee) *
Addee* -
(ee- .
newee. 1)
InventarioValorizadoViewModelee2 O
(eeO P
cantidadeeP X
,eeX Y
costoUnitarioeeZ g
,eeg h
precioVentaeei t
)eet u
)eeu v
;eev w
returnff )
inventarioValorizadoViewModelff 0
;ff0 1
}gg 	
publicii 
staticii 
Listii 
<ii )
InventarioValorizadoViewModelii 8
>ii8 9
Convertii: A
(iiA B
ListiiB F
<iiF G
KardexViewModeliiG V
>iiV W
kardexiiX ^
,ii^ _&
Ultimo_Precio_Compra_Ventaii` z
ultimosPrecios	ii{ â
)
iiâ ä
{jj 	
Listkk 
<kk )
InventarioValorizadoViewModelkk .
>kk. /)
inventarioValorizadoViewModelkk0 M
=kkN O
newkkP S
ListkkT X
<kkX Y)
InventarioValorizadoViewModelkkY v
>kkv w
(kkw x
)kkx y
;kky z
decimalmm 
cantidadmm 
=mm 
kardexmm %
.mm% &
Countmm& +
(mm+ ,
)mm, -
>mm. /
$nummm0 1
?mm2 3
Systemmm5 ;
.mm; <
Convertmm< C
.mmC D
	ToDecimalmmD M
(mmM N
kardexmmN T
.mmT U
OrderByDescendingmmU f
(mmf g
kmmg h
=>mmi k
kmml m
.mmm n
Indexmmn s
)mms t
.mmt u
Firstmmu z
(mmz {
)mm{ |
.mm| }
Saldo	mm} Ç
)
mmÇ É
:
mmÑ Ö
$num
mmÜ á
;
mmá à
decimalnn 
costoUnitarionn !
=nn" #
ultimosPreciosnn$ 2
.nn2 3
UltimoPrecioComprann3 E
!=nnF H
nullnnI M
?nnN O
(nnP Q
decimalnnQ X
)nnX Y
ultimosPreciosnnY g
.nng h
UltimoPrecioComprannh z
:nn{ |
$numnn} ~
;nn~ 
decimaloo 
precioVentaoo 
=oo  !
ultimosPreciosoo" 0
.oo0 1
UltimoPrecioVentaoo1 B
!=ooC E
nullooF J
?ooK L
(ooM N
decimalooN U
)ooU V
ultimosPreciosooV d
.ood e
UltimoPrecioVentaooe v
:oow x
$numooy z
;ooz {)
inventarioValorizadoViewModelpp )
.pp) *
Addpp* -
(pp- .
newpp. 1)
InventarioValorizadoViewModelpp2 O
(ppO P
cantidadppP X
,ppX Y
costoUnitarioppZ g
,ppg h
precioVentappi t
)ppt u
)ppu v
;ppv w
returnqq )
inventarioValorizadoViewModelqq 0
;qq0 1
}rr 	
publictt 
statictt 
Listtt 
<tt )
InventarioValorizadoViewModeltt 8
>tt8 9
Converttt: A
(ttA B
)ttB C
{uu 	
returnvv 
newvv 
Listvv 
<vv )
InventarioValorizadoViewModelvv 9
>vv9 :
(vv: ;
)vv; <
;vv< =
}ww 	
}yy 
}{{ Œ
sD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\DeudaAProveedorPorCuotaAdministradorViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
public 

class 9
-DeudaAProveedorPorCuotaAdministradorViewModel >
{ 
public 
DateTime 
FechadeVencimiento *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
int 
Cuota 
{ 
get 
; 
set  #
;# $
}% &
public 
string 
NombreProveedor %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Total 
{ 
get "
;" #
set$ '
;' (
}) *
public 
decimal 
Acuenta 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Deuda 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string "
NombreCortoComprobante ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
string 
Comprobante !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 9
-DeudaAProveedorPorCuotaAdministradorViewModel <
(< =
)= >
{ 	
}
 
public 9
-DeudaAProveedorPorCuotaAdministradorViewModel <
(< =1
%Reporte_Transaccion_Deuda_A_Proveedor= b
deudac h
)h i
{ 	
}'' 	
public)) 
static)) 
List)) 
<)) 9
-DeudaAProveedorPorCuotaAdministradorViewModel)) H
>))H I
Convert))J Q
())Q R
List))R V
<))V W1
%Reporte_Transaccion_Deuda_A_Proveedor))W |
>))| }
deudas	))~ Ñ
)
))Ñ Ö
{** 	
var,, 0
$reporteConsolidadoporCuotaViewModels,, 4
=,,5 6
new,,7 :
List,,; ?
<,,? @9
-DeudaAProveedorPorCuotaAdministradorViewModel,,@ m
>,,m n
(,,n o
),,o p
;,,p q
try-- 
{.. 
foreach// 
(// 
var// 
deuda// "
in//# %
deudas//& ,
)//, -
{00 0
$reporteConsolidadoporCuotaViewModels11 8
.118 9
Add119 <
(11< =
new11= @9
-DeudaAProveedorPorCuotaAdministradorViewModel11A n
(11n o
deuda11o t
)11t u
)11u v
;11v w
}22 
return44 0
$reporteConsolidadoporCuotaViewModels44 ;
;44; <
}55 
catch66 
(66 
	Exception66 
e66 
)66 
{77 
throw99 
e99 
;99 
}:: 
}<< 	
}?? 
}@@ ≠
dD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\EstadoDeCuentaClienteViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
public 

class *
EstadoDeCuentaClienteViewModel /
{ 
public 
DateTime 
Fecha 
{ 
get  #
;# $
set% (
;( )
}* +
public 
decimal 
Cantidad  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Concepto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
PrecioUnitario %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Saldo 
{ 
get "
;" #
set$ '
;' (
}) *
public *
EstadoDeCuentaClienteViewModel -
(- .
). /
{ 	
}
 
public *
EstadoDeCuentaClienteViewModel -
(- .
Cuota. 3
deuda4 9
)9 :
{ 	
} 	
public *
EstadoDeCuentaClienteViewModel -
(- .
string. 4
cliente5 <
,< =
decimal> E
totalF K
,K L
decimalM T
acuentaU \
,\ ]
decimal^ e
deudaf k
,k l
stringm s#
nombreCortoComprobante	t ä
,
ä ã
string
å í
numeroSerie
ì û
,
û ü
string
† ¶
numeroComprobante
ß ∏
)
∏ π
{   	
}"" 	
}%% 
}&& ¶N
[D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\DeudaClienteViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
public 

class !
DeudaClienteViewModel &
{ 
public 
int 
	IdCliente 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
NombreCliente #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
NumeroDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 

TotalVenta !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
ACuenta 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Deuda 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
TipoComprobante %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Numeroserie !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
NumeroComprobante $
{$ %
get& )
;) *
set+ .
;. /
}0 1
public !
DeudaClienteViewModel $
($ %
)% &
{ 	
}
 
public !
DeudaClienteViewModel $
($ %
Cuota% *
deuda+ 0
)0 1
{ 	
this 
. 
	IdCliente 
= 
deuda "
." #
Transaccion# .
.. /
Actor_negocio1/ =
.= >
id> @
;@ A
this 
. 
NombreCliente 
=  
deuda! &
.& '
Transaccion' 2
.2 3
Actor_negocio13 A
.A B
PrimerNombreB N
.N O
ReplaceO V
(V W
$strW Z
,Z [
$str\ _
)_ `
;` a
this   
.   
NumeroDocumento    
=  ! "
deuda  # (
.  ( )
Transaccion  ) 4
.  4 5
Actor_negocio1  5 C
.  C D
Actor  D I
.  I J&
numero_documento_identidad  J d
;  d e
this!! 
.!! 

TotalVenta!! 
=!! 
deuda!! #
.!!# $
total!!$ )
*!!* +
(!!, -
deuda!!- 2
.!!2 3

por_cobrar!!3 =
?!!> ?
$num!!@ A
:!!B C
-!!D E
$num!!E F
)!!F G
;!!G H
;!!I J
this"" 
."" 
ACuenta"" 
="" 
deuda""  
.""  !
pago_a_cuenta""! .
*""/ 0
(""1 2
deuda""2 7
.""7 8

por_cobrar""8 B
?""C D
$num""E F
:""G H
-""I J
$num""J K
)""K L
;""L M
this## 
.## 
Deuda## 
=## 
deuda## 
.## 
saldo## $
*##% &
(##' (
deuda##( -
.##- .

por_cobrar##. 8
?##9 :
$num##; <
:##= >
-##? @
$num##@ A
)##A B
;##B C
this$$ 
.$$ 
TipoComprobante$$  
=$$! "
deuda$$# (
.$$( )
Transaccion$$) 4
.$$4 5
Comprobante$$5 @
.$$@ A
Detalle_maestro$$A P
.$$P Q
valor$$Q V
;$$V W
this%% 
.%% 
Numeroserie%% 
=%% 
deuda%% $
.%%$ %
Transaccion%%% 0
.%%0 1
Comprobante%%1 <
.%%< =
numero_serie%%= I
;%%I J
this&& 
.&& 
NumeroComprobante&& "
=&&# $
deuda&&% *
.&&* +
Transaccion&&+ 6
.&&6 7
Comprobante&&7 B
.&&B C
numero&&C I
;&&I J
}'' 	
public)) !
DeudaClienteViewModel)) $
())$ %
int))% (
	idCliente))) 2
,))2 3
string))4 :
cliente)); B
,))B C
decimal))C J
total))K P
,))P Q
decimal))Q X
acuenta))Y `
,))` a
decimal))a h
deuda))i n
,))n o
string))o u#
nombreCortoComprobante	))v å
,
))å ç
string
))ç ì
numeroSerie
))î ü
,
))ü †
int
))† £
numeroComprobante
))§ µ
)
))µ ∂
{++ 	
this,, 
.,, 
	IdCliente,, 
=,, 
	idCliente,, &
;,,& '
this-- 
.-- 
NombreCliente-- 
=--  
cliente--! (
;--( )
this.. 
... 

TotalVenta.. 
=.. 
total.. #
;..# $
this// 
.// 
ACuenta// 
=// 
acuenta// "
;//" #
this00 
.00 
Deuda00 
=00 
deuda00 
;00 
this11 
.11 
TipoComprobante11  
=11! ""
nombreCortoComprobante11# 9
;119 :
this22 
.22 
Numeroserie22 
=22 
numeroSerie22 *
;22* +
this33 
.33 
NumeroComprobante33 "
=33# $
numeroComprobante33% 6
;336 7
}44 	
public66 
static66 
List66 
<66 !
DeudaClienteViewModel66 0
>660 1
Convert662 9
(669 :
List66: >
<66> ?
Cuota66? D
>66D E
deudas66F L
)66L M
{77 	
var88 (
reporteConsolidadoViewModels88 ,
=88- .
new88/ 2
List883 7
<887 8!
DeudaClienteViewModel888 M
>88M N
(88N O
)88O P
;88P Q
try99 
{:: 
foreach;; 
(;; 
var;; 
deuda;; "
in;;# %
deudas;;& ,
);;, -
{<< (
reporteConsolidadoViewModels== 0
.==0 1
Add==1 4
(==4 5
new==5 8!
DeudaClienteViewModel==9 N
(==N O
deuda==O T
)==T U
)==U V
;==V W
}>> 
return@@ (
reporteConsolidadoViewModels@@ 3
.@@3 4
OrderBy@@4 ;
(@@; <
r@@< =
=>@@> @
r@@A B
.@@B C
NombreCliente@@C P
)@@P Q
.@@Q R
ThenBy@@R X
(@@X Y
r@@Y Z
=>@@[ ]
r@@^ _
.@@_ `
TipoComprobante@@` o
)@@o p
.@@p q
ToList@@q w
(@@w x
)@@x y
;@@y z
}AA 
catchBB 
(BB 
	ExceptionBB 
eBB 
)BB 
{CC 
throwDD 
eDD 
;DD 
}EE 
}FF 	
internalHH 
staticHH 
ListHH 
<HH !
DeudaClienteViewModelHH 2
>HH2 3
ResumenHH4 ;
(HH; <
ListHH< @
<HH@ A!
DeudaClienteViewModelHHA V
>HHV W
deudaResumenHHX d
)HHd e
{II 	
ListJJ 
<JJ !
DeudaClienteViewModelJJ &
>JJ& '
reporteResumenJJ( 6
=JJ7 8
newJJ9 <
ListJJ= A
<JJA B!
DeudaClienteViewModelJJB W
>JJW X
(JJX Y
)JJY Z
;JJZ [
reporteResumenLL 
=LL 
deudaResumenLL )
.LL) *
GroupByLL* 1
(LL1 2
dLL2 3
=>LL4 6
dLL7 8
.LL8 9
NumeroDocumentoLL9 H
)LLH I
.MM 
SelectMM  
(MM  !
dcMM! #
=>MM$ &
newNN "!
DeudaClienteViewModelNN# 8
(NN8 9
)NN9 :
{OO  
NombreClientePP# 0
=PP1 2
dcPP3 5
.PP5 6
FirstOrDefaultPP6 D
(PPD E
)PPE F
.PPF G
NombreClientePPG T
,PPT U
ACuentaQQ# *
=QQ+ ,
dcQQ- /
.QQ/ 0
SumQQ0 3
(QQ3 4
sQQ4 5
=>QQ6 8
sQQ9 :
.QQ: ;
ACuentaQQ; B
)QQB C
,QQC D
DeudaRR# (
=RR) *
dcRR+ -
.RR- .
SumRR. 1
(RR1 2
sRR2 3
=>RR4 6
sRR7 8
.RR8 9
DeudaRR9 >
)RR> ?
,RR? @

TotalVentaSS# -
=SS. /
dcSS0 2
.SS2 3
SumSS3 6
(SS6 7
sSS7 8
=>SS9 ;
sSS< =
.SS= >

TotalVentaSS> H
)SSH I
,SSI J
}TT  
)TT  !
.TT! "
OrderByTT" )
(TT) *
rTT* +
=>TT, .
rTT/ 0
.TT0 1
NombreClienteTT1 >
)TT> ?
.TT? @
ThenByTT@ F
(TTF G
rTTG H
=>TTI K
rTTL M
.TTM N
TipoComprobanteTTN ]
)TT] ^
.TT^ _
ToListTT_ e
(TTe f
)TTf g
;TTg h
returnUU 
reporteResumenUU !
;UU! "
}VV 	
}ZZ 
}[[ ¨Z
mD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\ReporteDeConceptoBasicoAlcoholViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
public 

class 3
'ReporteDeConceptoBasicoAlcoholViewModel 8
{ 
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
IdConceptoNegocio $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
int 
IdTipoComprobante $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
Denominacion "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string !
CodigoTipoComprobante +
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
string %
SerieYNumeroDeComprobante /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
string 
Concentracion #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
UnidadMedida "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string '
PresentacionNumeroDeEnvases 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
decimal 
Envasado 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
AGranel 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
SalidaDelPais #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
decimal 
Merma 
{ 
get "
;" #
set$ '
;' (
}) *
public 
decimal 
Perdida 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Otros 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
CodigoUbigeo "
{# $
get% (
;( )
set* -
;- .
}/ 0
public   
string   
NombreCliente   #
{  $ %
get  & )
;  ) *
set  + .
;  . /
}  0 1
public!! 
string!! "
NumeroDocumentoCliente!! ,
{!!- .
get!!/ 2
;!!2 3
set!!4 7
;!!7 8
}!!9 :
public"" 
string"" 
LugarEntrega"" "
{""# $
get""% (
;""( )
set""* -
;""- .
}""/ 0
public## 
string## #
UbigeoDelLugarDeEntrega## -
{##. /
get##0 3
;##3 4
set##5 8
;##8 9
}##: ;
public$$ 
string$$ 
Obersavaciones$$ $
{$$% &
get$$' *
;$$* +
set$$, /
;$$/ 0
}$$1 2
public&& 
decimal&& 
ContenidoCalculado&& )
{&&* +
get&&, /
;&&/ 0
set&&1 4
;&&4 5
}&&6 7
public'' 
string'' '
NombreUnidadMedidaCalculada'' 1
{''2 3
get''4 7
;''7 8
set''9 <
;''< =
}''> ?
public++ 3
'ReporteDeConceptoBasicoAlcoholViewModel++ 6
(++6 7
)++7 8
{,, 	
}.. 	
public00 3
'ReporteDeConceptoBasicoAlcoholViewModel00 6
(006 7#
Reporte_Concepto_Basico007 N!
reporteConceptoBasico00O d
)00d e
{11 	
this33 
.33 
IdConceptoNegocio33 "
=33# $!
reporteConceptoBasico33% :
.33: ;
IdConceptoNegocio33; L
;33L M
this44 
.44 
IdTipoComprobante44 "
=44# $!
reporteConceptoBasico44% :
.44: ;
IdTipoComprobante44; L
;44L M
this55 
.55 
Fecha55 
=55 !
reporteConceptoBasico55 .
.55. /
FechaInicio55/ :
.55: ;
ToString55; C
(55C D
$str55D P
)55P Q
;55Q R
this66 
.66 
Denominacion66 
=66 !
reporteConceptoBasico66  5
.665 6 
NombreConceptoBasico666 J
;66J K
this77 
.77 !
CodigoTipoComprobante77 &
=77' (!
reporteConceptoBasico77) >
.77> ?!
CodigoTipoComprobante77? T
;77T U
this88 
.88 %
SerieYNumeroDeComprobante88 *
=88+ ,!
reporteConceptoBasico88- B
.88B C"
NumeroSerieComprobante88C Y
+88Z [
$str88\ _
+88_ `!
reporteConceptoBasico88a v
.88v w
NumeroComprobante	88w à
;
88à â
this99 
.99 
Concentracion99 
=99  !
reporteConceptoBasico99! 6
.996 7
Sufijo997 =
;99= >
this;; 
.;; 
UnidadMedida;; 
=;; !
reporteConceptoBasico;;  5
.;;5 6
ValorUnidadMedida;;6 G
==;;H J
$str;;K O
?;;P Q
$str;;R U
:;;V W!
reporteConceptoBasico;;X m
.;;m n
ValorUnidadMedida;;n 
;	;; Ä
this<< 
.<< 
ContenidoCalculado<< #
=<<$ %!
reporteConceptoBasico<<& ;
.<<; <
ValorUnidadMedida<<< M
==<<N P
$str<<Q U
?<<V W!
reporteConceptoBasico<<X m
.<<m n
	Contenido<<n w
/<<w x
$num<<x |
:<<~ #
reporteConceptoBasico
<<Ä ï
.
<<ï ñ
	Contenido
<<ñ ü
;
<<ü †
this== 
.== '
NombreUnidadMedidaCalculada== ,
===- .!
reporteConceptoBasico==/ D
.==D E
ValorUnidadMedida==E V
====W Y
$str==Z ^
?==_ `
$str==a i
:==j k"
reporteConceptoBasico	==l Å
.
==Å Ç 
NombreUnidadMedida
==Ç î
;
==î ï
this>> 
.>> '
PresentacionNumeroDeEnvases>> ,
=>>- .!
reporteConceptoBasico>>/ D
.>>D E
CantidadVendida>>E T
.>>T U
ToString>>U ]
(>>] ^
$str>>^ d
)>>d e
+>>f g
$str>>h k
+>>l m"
reporteConceptoBasico	>>n É
.
>>É Ñ 
NombrePresentacion
>>Ñ ñ
+
>>ó ò
$str
>>ô û
+
>>ü † 
ContenidoCalculado
>>° ≥
.
>>≥ ¥
ToString
>>¥ º
(
>>º Ω
$str
>>Ω ƒ
)
>>ƒ ≈
+
>>∆ «
$str
>>» À
+
>>À Ã)
NombreUnidadMedidaCalculada
>>Õ Ë
;
>>Ë È
this@@ 
.@@ 
Envasado@@ 
=@@ !
reporteConceptoBasico@@ 1
.@@1 2
ValorUnidadMedida@@2 C
==@@D F
$str@@G K
?@@L M
(@@N O!
reporteConceptoBasico@@O d
.@@d e
	Contenido@@e n
/@@o p
$num@@q u
)@@u v
*@@w x"
reporteConceptoBasico	@@y é
.
@@é è
CantidadVendida
@@è û
:
@@† °#
reporteConceptoBasico
@@¢ ∑
.
@@∑ ∏
CantidadVendida
@@∏ «
*
@@» … 
ContenidoCalculado
@@  ‹
;
@@‹ ›
thisBB 
.BB 
AGranelBB 
=BB 
$strBB 
;BB 
thisCC 
.CC 
SalidaDelPaisCC 
=CC  
$strCC! #
;CC# $
thisDD 
.DD 
MermaDD 
=DD 
$numDD 
;DD 
thisEE 
.EE 
PerdidaEE 
=EE 
$numEE 
;EE  
thisFF 
.FF 
OtrosFF 
=FF 
$numFF 
;FF 
thisGG 
.GG 
	DireccionGG 
=GG !
reporteConceptoBasicoGG 2
.GG2 3%
DireccionCentroDeAtencionGG3 L
;GGL M
thisHH 
.HH 
CodigoUbigeoHH 
=HH !
reporteConceptoBasicoHH  5
.HH5 6
CodigoUbigeoHH6 B
.HHB C
ToStringHHC K
(HHK L
)HHL M
;HHM N
thisII 
.II 
NombreClienteII 
=II  !
reporteConceptoBasicoII! 6
.II6 7
NombreClienteII7 D
.IID E
ReplaceIIE L
(IIL M
$strIIM P
,IIP Q
$strIIR U
)IIU V
;IIV W
thisJJ 
.JJ "
NumeroDocumentoClienteJJ '
=JJ( )!
reporteConceptoBasicoJJ* ?
.JJ? @"
NumeroDocumentoClienteJJ@ V
;JJV W
thisKK 
.KK 
LugarEntregaKK 
=KK !
reporteConceptoBasicoKK  5
.KK5 6%
DireccionCentroDeAtencionKK6 O
;KKO P
thisLL 
.LL #
UbigeoDelLugarDeEntregaLL (
=LL) *!
reporteConceptoBasicoLL+ @
.LL@ A
CodigoUbigeoLLA M
.LLM N
ToStringLLN V
(LLV W
)LLW X
;LLX Y
thisMM 
.MM 
ObersavacionesMM 
=MM  !
$strMM" $
;MM$ %
}OO 	
publicQQ 
staticQQ 
ListQQ 
<QQ 3
'ReporteDeConceptoBasicoAlcoholViewModelQQ B
>QQB C,
 ConvertirConceptosBasicosALitrosQQD d
(QQd e
ListQQe i
<QQi j$
Reporte_Concepto_Basico	QQj Å
>
QQÅ Ç%
reporteConceptosBasicos
QQÉ ö
)
QQö õ
{RR 	
varSS ,
 reporteConceptosBasicosViewModelSS 0
=SS1 2
newSS3 6
ListSS7 ;
<SS; <3
'ReporteDeConceptoBasicoAlcoholViewModelSS< c
>SSc d
(SSd e
)SSe f
;SSf g
foreachUU 
(UU 
varUU 
itemUU 
inUU  #
reporteConceptosBasicosUU! 8
)UU8 9
{VV ,
 reporteConceptosBasicosViewModelWW 0
.WW0 1
AddWW1 4
(WW4 5
newWW5 83
'ReporteDeConceptoBasicoAlcoholViewModelWW9 `
(WW` a
itemWWa e
)WWe f
)WWf g
;WWg h
}XX 
returnYY ,
 reporteConceptosBasicosViewModelYY 3
;YY3 4
}ZZ 	
}]] 
}^^ €
jD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\VentaPorConceptoDelVendedorViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
public 

class 0
$VentaPorConceptoDelVendedorViewModel 5
{ 
public 
string 
CodigoBarra !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Concepto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Cantidad 
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 
PrecioUnitario %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 0
$VentaPorConceptoDelVendedorViewModel 3
(3 4
)4 5
{ 	
} 	
public 0
$VentaPorConceptoDelVendedorViewModel 3
(3 4
string4 :
codigoBarra; F
,F G
stringH N
nombreconceptoO ]
,] ^
decimal_ f
cantidadVendidag v
,w x
decimal	y Ä
precioUnitario
Å è
,
è ê
decimal
ë ò
importe
ô †
,
† °
string
¢ ®
vendedor
© ±
)
± ≤
{ 	
CodigoBarra 
= 
codigoBarra %
;% &
Concepto 
= 
nombreconcepto %
;% &
Cantidad 
= 
cantidadVendida &
;& '
PrecioUnitario 
= 
precioUnitario +
;+ ,
Importe 
= 
importe 
; 
}   	
public"" 0
$VentaPorConceptoDelVendedorViewModel"" 3
(""3 41
%Resumen_transaccion_Venta_PorConcepto""4 Y
orden""Z _
)""_ `
{## 	
CodigoBarra$$ 
=$$ 
orden$$ 
.$$  
CodigoBarra$$  +
;$$+ ,
Concepto%% 
=%% 
orden%% 
.%% 
Concepto%% %
;%%% &
Cantidad&& 
=&& 
orden&& 
.&& 
Cantidad&& %
;&&% &
PrecioUnitario'' 
='' 
orden'' "
.''" #
PrecioUnitario''# 1
;''1 2
Importe(( 
=(( 
orden(( 
.(( 
Importe(( #
;((# $
})) 	
public++ 
static++ 
List++ 
<++ 0
$VentaPorConceptoDelVendedorViewModel++ ?
>++? @
Convert++A H
(++H I
List++I M
<++M N1
%Resumen_transaccion_Venta_PorConcepto++N s
>++s t
ordenes++u |
)++| }
{,, 	
var-- "
reporteVentaViewModels-- &
=--' (
new--) ,
List--- 1
<--1 20
$VentaPorConceptoDelVendedorViewModel--2 V
>--V W
(--W X
)--X Y
;--Y Z
foreach.. 
(.. 
var.. 
orden.. 
in.. !
ordenes.." )
)..) *
{// "
reporteVentaViewModels00 &
.00& '
Add00' *
(00* +
new00+ .0
$VentaPorConceptoDelVendedorViewModel00/ S
(00S T
orden00T Y
)00Y Z
)00Z [
;00[ \
}11 
return22 "
reporteVentaViewModels22 )
;22) *
}33 	
}55 
}66 ÁM
]D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\DeudaProveedorViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
public 

class #
DeudaProveedorViewModel (
{ 
public 
string 
NombreProveedor %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Total 
{ 
get "
;" #
set$ '
;' (
}) *
public 
decimal 
Acuenta 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Deuda 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string "
NombreCortoComprobante ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
string 
NumeroSerie !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
NumeroComprobante $
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
CodigoCuota !
{" #
get$ '
;' (
set) ,
;, -
}. /
public #
DeudaProveedorViewModel &
(& '
)' (
{ 	
}
 
public #
DeudaProveedorViewModel &
(& '
Cuota' ,
deuda- 2
)2 3
{ 	
this 
. 
NombreProveedor 
=  !
deuda" '
.' (
Transaccion( 3
.3 4
Actor_negocio14 B
.B C
PrimerNombreC O
.O P
ReplaceP W
(W X
$strX [
,[ \
$str] `
)` a
;a b
this 
. 
Total 
= 
deuda 
. 
total $
*% &
(' (
deuda( -
.- .

por_cobrar. 8
?9 :
-: ;
$num; <
:= >
$num> ?
)@ A
;A B
this 
. 
Acuenta 
= 
deuda  
.  !
pago_a_cuenta! .
*/ 0
(1 2
deuda2 7
.7 8

por_cobrar8 B
?C D
-E F
$numF G
:H I
$numJ K
)K L
;L M
this   
.   
Deuda   
=   
deuda   
.   
saldo   $
*  % &
(  ' (
deuda  ( -
.  - .

por_cobrar  . 8
?  9 :
-  ; <
$num  < =
:  > ?
$num  @ A
)  A B
;  B C
this$$ 
.$$ "
NombreCortoComprobante$$ '
=$$( )
deuda$$* /
.$$/ 0
Transaccion$$0 ;
.$$; <
Comprobante$$< G
.$$G H
Detalle_maestro$$H W
.$$W X
valor$$X ]
;$$] ^
this%% 
.%% 
NumeroSerie%% 
=%% 
deuda%% $
.%%$ %
Transaccion%%% 0
.%%0 1
Comprobante%%1 <
.%%< =
numero_serie%%= I
;%%I J
this&& 
.&& 
NumeroComprobante&& "
=&&# $
(&&% &
int&&& )
)&&) *
deuda&&* /
.&&/ 0
Transaccion&&0 ;
.&&; <
Comprobante&&< G
.&&G H
numero&&H N
;&&N O
this'' 
.'' 
CodigoCuota'' 
='' 
deuda'' $
.''$ %
codigo''% +
;''+ ,
}(( 	
public)) #
DeudaProveedorViewModel)) &
())& '
string))' -
	proveedor)). 7
,))7 8
decimal))8 ?
total))@ E
,))E F
decimal))F M
acuenta))N U
,))U V
decimal))V ]
deuda))^ c
,))c d
string))d j#
nombreCortoComprobante	))k Å
,
))Å Ç
string
))Ç à
numeroSerie
))â î
,
))î ï
int
))ï ò
numeroComprobante
))ô ™
)
))™ ´
{** 	
this++ 
.++ 
NombreProveedor++  
=++! "
	proveedor++# ,
;++, -
this,, 
.,, 
Total,, 
=,, 
total,, 
;,, 
this-- 
.-- 
Acuenta-- 
=-- 
acuenta-- "
;--" #
this.. 
... 
Deuda.. 
=.. 
deuda.. 
;.. 
this// 
.// "
NombreCortoComprobante// '
=//( )"
nombreCortoComprobante//* @
;//@ A
this00 
.00 
NumeroSerie00 
=00 
numeroSerie00 *
;00* +
this11 
.11 
NumeroComprobante11 "
=11# $
numeroComprobante11% 6
;116 7
}22 	
public44 
static44 
List44 
<44 #
DeudaProveedorViewModel44 2
>442 3
Convert444 ;
(44; <
List44< @
<44@ A
Cuota44A F
>44F G
deudas44H N
)44N O
{55 	
var77 (
reporteConsolidadoViewModels77 ,
=77- .
new77/ 2
List773 7
<777 8#
DeudaProveedorViewModel778 O
>77O P
(77P Q
)77Q R
;77R S
try88 
{99 
foreach:: 
(:: 
var:: 
deuda:: "
in::# %
deudas::& ,
)::, -
{;; (
reporteConsolidadoViewModels<< 0
.<<0 1
Add<<1 4
(<<4 5
new<<5 8#
DeudaProveedorViewModel<<9 P
(<<P Q
deuda<<Q V
)<<V W
)<<W X
;<<X Y
}== 
return?? (
reporteConsolidadoViewModels?? 3
.??3 4
OrderBy??4 ;
(??; <
r??< =
=>??= ?
r??? @
.??@ A
NombreProveedor??A P
)??P Q
.??Q R
ThenBy??R X
(??X Y
r??Y Z
=>??Z \
r??\ ]
.??] ^"
NombreCortoComprobante??^ t
)??t u
.??u v
ToList??v |
(??| }
)??} ~
;??~ 
}@@ 
catchAA 
(AA 
	ExceptionAA 
eAA 
)AA 
{BB 
throwDD 
eDD 
;DD 
}EE 
}FF 	
internalHH 
staticHH 
ListHH 
<HH #
DeudaProveedorViewModelHH 4
>HH4 5
ResumenHH6 =
(HH= >
ListHH> B
<HHB C#
DeudaProveedorViewModelHHC Z
>HHZ [
deudasHH\ b
)HHb c
{II 	
ListJJ 
<JJ #
DeudaProveedorViewModelJJ (
>JJ( )
reporteResumenJJ* 8
=JJ9 :
newJJ; >
ListJJ? C
<JJC D#
DeudaProveedorViewModelJJD [
>JJ[ \
(JJ\ ]
)JJ] ^
;JJ^ _
ListKK 
<KK 
stringKK 
>KK 
proveedoresKK $
=KK% &
deudasKK' -
.KK- .
SelectKK. 4
(KK4 5
dKK5 6
=>KK7 9
dKK: ;
.KK; <
NombreProveedorKK< K
)KKK L
.KKL M
DistinctKKM U
(KKU V
)KKV W
.KKW X
ToListKKX ^
(KK^ _
)KK_ `
;KK` a
foreachMM 
(MM 
varMM 
	proveedorMM "
inMM# %
proveedoresMM& 1
)MM1 2
{NN 
varOO 
deudasProveedorOO #
=OO$ %
deudasOO& ,
.OO, -
WhereOO- 2
(OO2 3
dOO3 4
=>OO5 7
dOO8 9
.OO9 :
NombreProveedorOO: I
==OOJ L
	proveedorOOM V
)OOV W
;OOW X
reporteResumenPP 
.PP 
AddPP "
(PP" #
newPP# &#
DeudaProveedorViewModelPP' >
(PP> ?
	proveedorPP? H
,PPH I
deudasProveedorPPJ Y
.PPY Z
SumPPZ ]
(PP] ^
dPP^ _
=>PP` b
dPPc d
.PPd e
TotalPPe j
)PPj k
,PPk l
deudasProveedorPPm |
.PP| }
Sum	PP} Ä
(
PPÄ Å
d
PPÅ Ç
=>
PPÇ Ñ
d
PPÖ Ü
.
PPÜ á
Acuenta
PPá é
)
PPé è
,
PPè ê
deudasProveedor
PPë †
.
PP† °
Sum
PP° §
(
PP§ •
d
PP• ¶
=>
PP¶ ®
d
PP® ©
.
PP© ™
Deuda
PP™ Ø
)
PPØ ∞
,
PP∞ ±
$str
PP≤ ¥
,
PP¥ µ
$str
PPµ ∑
,
PP∑ ∏
$num
PP∏ π
)
PPπ ∫
)
PP∫ ª
;
PPª º
}QQ 
returnSS 
reporteResumenSS !
.SS! "
OrderBySS" )
(SS) *
rSS* +
=>SS+ -
rSS- .
.SS. /
NombreProveedorSS/ >
)SS> ?
.SS? @
ThenBySS@ F
(SSF G
rSSG H
=>SSI K
rSSL M
.SSM N"
NombreCortoComprobanteSSN d
)SSd e
.SSe f
ToListSSf l
(SSl m
)SSm n
;SSn o
}TT 	
}VV 
}WW ó
_D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\GastoPorConceptoViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
public 

class %
GastoPorConceptoViewModel *
{ 
public 
string 
ConceptoBasico $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
int 
IdConceptoNegocio $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
ConceptoNegocio %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Cantidad 
{  !
get" %
;% &
set' *
;* +
}, -
public 
decimal 
PrecioUnitario %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
public %
GastoPorConceptoViewModel (
(( )
)) *
{ 	
}
 
public %
GastoPorConceptoViewModel (
(( )2
&Resumen_Transaccion_Gasto_Por_Concepto) O
gastoP U
)U V
{ 	
this 
. 
IdConceptoNegocio "
=# $
gasto% *
.* +
IdConceptoNegocio+ <
;< =
this 
. 
ConceptoNegocio  
=! "
gasto# (
.( )
ConceptoNegocio) 8
;8 9
this 
. 
Cantidad 
= 
gasto !
.! "
Cantidad" *
;* +
this 
. 
PrecioUnitario 
=  !
gasto" '
.' (
PrecioUnitario( 6
;6 7
this 
. 
Importe 
= 
gasto  
.  !
Importe! (
;( )
; 
}   	
public"" 
static"" 
List"" 
<"" %
GastoPorConceptoViewModel"" 4
>""4 5
Convert""6 =
(""= >
List""> B
<""B C2
&Resumen_Transaccion_Gasto_Por_Concepto""C i
>""i j
gastos""k q
)""q r
{## 	
var$$ (
reporteConsolidadoViewModels$$ ,
=$$- .
new$$/ 2
List$$3 7
<$$7 8%
GastoPorConceptoViewModel$$8 Q
>$$Q R
($$R S
)$$S T
;$$T U
foreach%% 
(%% 
var%% 
gasto%% 
in%% !
gastos%%" (
)%%( )
{&& (
reporteConsolidadoViewModels'' ,
.'', -
Add''- 0
(''0 1
new''1 4%
GastoPorConceptoViewModel''5 N
(''N O
gasto''O T
)''T U
)''U V
;''V W
}(( 
return)) (
reporteConsolidadoViewModels)) /
;))/ 0
}** 	
}++ 
},, —#
ZD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\ConsolidadoViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
public 

class  
ConsolidadoViewModel %
{ 
public 
int 
IdTipoTransaccion $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
NombreTransaccion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
int 
	IdEntidad 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
EntidadInterna $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
bool 
EntradaSalida !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
SaldoAnteterior &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
decimal 

SaldoTotal !
{" #
get$ '
;' (
set) ,
;, -
}. /
public  
ConsolidadoViewModel #
(# $
)$ %
{ 	
}
 
public  
ConsolidadoViewModel #
(# $+
Resumen_Transaccion_Consolidado$ C
consolidadoD O
)O P
{ 	
consolidado 
. 
Importe 
=  !
consolidado" -
.- .
EntradaSalida. ;
==< >
true? C
?D E
consolidadoF Q
.Q R
ImporteR Y
*Z [
$num\ ]
:^ _
consolidado` k
.k l
Importel s
*t u
-v w
$numw x
;x y
this 
. 
IdTipoTransaccion "
=# $
consolidado% 0
.0 1
IdTipoTransaccion1 B
;B C
this 
. 
NombreTransaccion "
=# $
consolidado% 0
.0 1
NombreTransaccion1 B
;B C
this   
.   
	IdEntidad   
=   
consolidado   (
.  ( )
	IdEntidad  ) 2
;  2 3
this!! 
.!! 
EntidadInterna!! 
=!!  !
consolidado!!" -
.!!- .
EntidadInterna!!. <
;!!< =
this"" 
."" 
Importe"" 
="" 
consolidado"" &
.""& '
Importe""' .
;"". /
this## 
.## 
EntradaSalida## 
=##  
consolidado##! ,
.##, -
EntradaSalida##- :
;##: ;
this$$ 
.$$ 

SaldoTotal$$ 
=$$ 

SaldoTotal$$ (
+$$) *
this$$+ /
.$$/ 0
Importe$$0 7
;$$7 8
}%% 	
public'' 
static'' 
List'' 
<''  
ConsolidadoViewModel'' /
>''/ 0
Convert''1 8
(''8 9
List''9 =
<''= >+
Resumen_Transaccion_Consolidado''> ]
>''] ^
consolidados''_ k
)''k l
{(( 	
var)) (
reporteConsolidadoViewModels)) ,
=))- .
new))/ 2
List))3 7
<))7 8 
ConsolidadoViewModel))8 L
>))L M
())M N
)))N O
;))O P
foreach++ 
(++ 
var++ 
consolidado++ $
in++% '
consolidados++( 4
)++4 5
{,, (
reporteConsolidadoViewModels-- ,
.--, -
Add--- 0
(--0 1
new--1 4 
ConsolidadoViewModel--5 I
(--I J
consolidado--J U
)--U V
)--V W
;--W X
}.. 
return00 (
reporteConsolidadoViewModels00 /
;00/ 0
}11 	
}44 
}55 …9
bD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Reporte\GastoPorComprobanteViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
public 

class (
GastoPorComprobanteViewModel -
{ 
public 
long 
IdComprobante !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 
Fecha 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
TipoDocumento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Serie 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
NumeroComprobante $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Cliente 
{ 
get  #
;# $
set% (
;( )
}* +
public (
GastoPorComprobanteViewModel +
(+ ,
), -
{ 	
} 	
public (
GastoPorComprobanteViewModel +
(+ ,
long- 1
idComprobante2 ?
,? @
DateTime@ H
fechaI N
,N O
stringP V
tipoDocumentoW d
,d e
stringf l
seriem r
,r s
intt w
numerox ~
,~ 
decimal
Ä á
importe
à è
,
è ê
string
ë ó
razonSocial
ò £
)
£ §
{ 	
IdComprobante 
= 
idComprobante )
;) *
Fecha 
= 
fecha 
; 
TipoDocumento 
= 
tipoDocumento )
;) *
Serie   
=   
serie   
;   
NumeroComprobante!! 
=!! 
numero!!  &
;!!& '
Importe"" 
="" 
importe"" 
;"" 
Cliente## 
=## 
razonSocial## !
;##! "
}$$ 	
public%% (
GastoPorComprobanteViewModel%% +
(%%+ ,5
)Reporte_Transaccion_Gasto_Por_Comprobante%%, U
gasto%%V [
)%%[ \
{&& 	
this'' 
.'' 
IdComprobante'' 
=''  
gasto''! &
.''& '
IdTipoComprobante''' 8
;''8 9
this(( 
.(( 
TipoDocumento(( 
=((  
gasto((! &
.((& '"
NombreCorteComprobante((' =
;((= >
this)) 
.)) 
Serie)) 
=)) 
gasto)) 
.)) 
Serie)) #
;))# $
this** 
.** 
NumeroComprobante** "
=**# $
gasto**% *
.*** +
NumeroComprobante**+ <
;**< =
this++ 
.++ 
Importe++ 
=++ 
gasto++  
.++  !
Importe++! (
;++( )
this,, 
.,, 
Cliente,, 
=,, 
gasto,,  
.,,  !
Cliente,,! (
;,,( )
this-- 
.-- 
Fecha-- 
=-- 
gasto-- 
.-- 
Fecha-- $
;--$ %
}.. 	
public11 
static11 
List11 
<11 (
GastoPorComprobanteViewModel11 7
>117 8
Convert119 @
(11@ A
List11A E
<11E F5
)Reporte_Transaccion_Gasto_Por_Comprobante11F o
>11o p
gastos11q w
)11w x
{22 	
var33 "
reporteGastoViewModels33 &
=33' (
new33) ,
List33- 1
<331 2(
GastoPorComprobanteViewModel332 N
>33N O
(33O P
)33P Q
;33Q R
foreach44 
(44 
var44 
gasto44 
in44 !
gastos44" (
)44( )
{55 "
reporteGastoViewModels66 &
.66& '
Add66' *
(66* +
new66+ .(
GastoPorComprobanteViewModel66/ K
(66K L
gasto66L Q
)66Q R
)66R S
;66S T
}77 
return99 "
reporteGastoViewModels99 )
;99) *
}:: 	
internal<< 
static<< 
List<< 
<<< (
GastoPorComprobanteViewModel<< 9
><<9 :
Resumen<<; B
(<<B C
List<<C G
<<<G H(
GastoPorComprobanteViewModel<<H d
><<d e*
reporteVentaViewModelDetalles	<<f É
)
<<É Ñ
{== 	
List>> 
<>> (
GastoPorComprobanteViewModel>> -
>>>- .*
reporteVentaViewModelResumenes>>/ M
=>>N O
new>>P S
List>>T X
<>>X Y(
GastoPorComprobanteViewModel>>Y u
>>>u v
(>>v w
)>>w x
;>>x y
foreach?? 
(?? 
var?? 
item?? 
in??  )
reporteVentaViewModelDetalles??! >
.??> ?
Select??? E
(??E F
d??F G
=>??H J
new??K N
{??O P
tipo??Q U
=??V W
d??X Y
.??Y Z
TipoDocumento??Z g
,??g h
serie??i n
=??o p
d??q r
.??r s
Serie??s x
}??y z
)??z {
.??{ |
Distinct	??| Ñ
(
??Ñ Ö
)
??Ö Ü
)
??Ü á
{@@ *
reporteVentaViewModelResumenesAA .
.AA. /
AddAA/ 2
(AA2 3
newAA3 6(
GastoPorComprobanteViewModelAA7 S
(AAS T
$numAAT U
,AAU V
DateTimeAAV ^
.AA^ _
NowAA_ b
,AAb c
itemAAd h
.AAh i
tipoAAi m
,AAm n
itemAAo s
.AAs t
serieAAt y
,AAy z
$numAA{ |
,AA| }*
reporteVentaViewModelDetalles	AA~ õ
.
AAõ ú
Where
AAú °
(
AA° ¢
d
AA¢ £
=>
AA§ ¶
d
AAß ®
.
AA® ©
TipoDocumento
AA© ∂
==
AA∑ π
item
AA∫ æ
.
AAæ ø
tipo
AAø √
&&
AAƒ ∆
d
AA« »
.
AA» …
Serie
AA… Œ
==
AAœ —
item
AA“ ÷
.
AA÷ ◊
serie
AA◊ ‹
)
AA‹ ›
.
AA› ﬁ
Sum
AAﬁ ·
(
AA· ‚
d
AA‚ „
=>
AA‰ Ê
d
AAÁ Ë
.
AAË È
Importe
AAÈ 
)
AA Ò
,
AAÒ Ú
$str
AAÛ ı
)
AAı ˆ
)
AAˆ ˜
;
AA˜ ¯
}BB 
returnDD *
reporteVentaViewModelResumenesDD 1
;DD1 2
}EE 	
}FF 
}GG ‡
VD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Rol\RegistroRolViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -
Turno- 2
{ 
public		 

class		  
RegistroRolViewModel		 %
{

 
public 
int 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
Nombre 
{ 
get "
;" #
set# &
;& '
}( )
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public "
ComboGenericoViewModel %
RolPadre& .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
int 
Aplica 
{ 
get 
;  
set! $
;$ %
}& '
public  
RegistroRolViewModel #
(# $
)$ %
{ 	
this 
. 
RolPadre 
= 
new "
ComboGenericoViewModel  6
(6 7
)7 8
;8 9
} 	
public  
RegistroRolViewModel #
(# $
TurnoDeEmpleado$ 3
turno4 9
)9 :
{ 	
this 
. 
Id 
= 
turno 
. 
Id 
; 
}   	
}"" 
}$$ ‘$
]D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Seguridad\EstadoAccionViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -
	Seguridad- 6
{ 
[		 
Serializable		 
]		 
[

 
DataContract

 
]

 
public 

class !
EstadoAccionViewModel &
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
IdTipoTransaccion $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
TipoTransaccion %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
int 
IdEstado 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
IdRolPersonal  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
RolPersonal !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
IdUnidadNegocio "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
UnidadNegocio #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
int 
IdAccion 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Accion 
{ 
get "
;" #
set$ '
;' (
}) *
public !
EstadoAccionViewModel $
($ %
)% &
{ 	
} 	
public   !
EstadoAccionViewModel   $
(  $ %
int  % (
id  ) +
,  + ,
int  - 0
idTipoTransaccion  1 B
,  B C
string  D J
tipoTransaccion  K Z
,  Z [
int  \ _
idRolPersonal  ` m
,  m n
string  o u
rolPersonal	  v Å
,
  Å Ç
int
  É Ü
idAccion
  á è
,
  è ê
string
  ë ó
accion
  ò û
,
  û ü
int
  † £
idUnidadNegocio
  § ≥
,
  ≥ ¥
string
  µ ª
unidadNegocio
  º …
)
  …  
{!! 	
this"" 
."" 
Id"" 
="" 
id"" 
;"" 
this## 
.## 
IdTipoTransaccion## "
=### $
idTipoTransaccion##% 6
;##6 7
this$$ 
.$$ 
TipoTransaccion$$  
=$$! "
tipoTransaccion$$# 2
;$$2 3
this%% 
.%% 
IdRolPersonal%% 
=%%  
idRolPersonal%%! .
;%%. /
this&& 
.&& 
RolPersonal&& 
=&& 
rolPersonal&& *
;&&* +
this'' 
.'' 
IdAccion'' 
='' 
idAccion'' $
;''$ %
this(( 
.(( 
Accion(( 
=(( 
accion((  
;((  !
this)) 
.)) 
IdUnidadNegocio))  
=))! "
idUnidadNegocio))# 2
;))2 3
this** 
.** 
UnidadNegocio** 
=**  
unidadNegocio**! .
;**. /
}++ 	
public-- !
EstadoAccionViewModel-- $
(--$ %
int--% (
id--) +
,--+ ,
int--- 0
idTipoTransaccion--1 B
,--B C
int--D G
idEstado--H P
,--P Q
int--R U
idAccion--V ^
)--^ _
{.. 	
this// 
.// 
Id// 
=// 
id// 
;// 
this00 
.00 
IdTipoTransaccion00 "
=00# $
idTipoTransaccion00% 6
;006 7
this11 
.11 
IdEstado11 
=11 
idEstado11 $
;11$ %
this22 
.22 
IdAccion22 
=22 
idAccion22 $
;22$ %
}33 	
}44 
}55 †5
LD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\SerieViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 
SerieViewModel 
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
IdTipoDeComprobante )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
string 
TipoDeComprobante '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
NumeroSerie !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
IdSede 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Sede 
{ 
get  
;  !
set" %
;% &
}' (
public 
bool 
Autonumerico  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
NumeroSiguiente "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
bool 
Vigente 
{ 
get !
;! "
set# &
;& '
}( )
public 
SerieViewModel 
( 
) 
{ 	
} 	
public 
SerieViewModel 
( 
Serie_comprobante /
s0 1
)1 2
{   	
this!! 
.!! 
Id!! 
=!! 
s!! 
.!! 
id!! 
;!! 
this"" 
."" 
NumeroSerie"" 
="" 
s""  
.""  !
numero""! '
;""' (
this## 
.## 
Autonumerico## 
=## 
s##  !
.##! "
es_autonumerable##" 2
;##2 3
}$$ 	
public%% 
SerieViewModel%% 
(%% 
SerieDeComprobante%% 0
s%%1 2
)%%2 3
{&& 	
this'' 
.'' 
Id'' 
='' 
s'' 
.'' 
Id'' 
;'' 
this(( 
.(( 
IdTipoDeComprobante(( $
=((% &
s((' (
.((( )
Comprobante(() 4
(((4 5
)((5 6
.((6 7
Id((7 9
.((9 :
ToString((: B
(((B C
)((C D
;((D E
this)) 
.)) 
TipoDeComprobante)) "
=))# $
s))% &
.))& '
Comprobante))' 2
())2 3
)))3 4
.))4 5
Nombre))5 ;
;)); <
this** 
.** 
NumeroSerie** 
=** 
s**  
.**  !
Numero**! '
;**' (
this++ 
.++ 
IdSede++ 
=++ 
s++ 
.++ 
CentroDeAtencion++ ,
(++, -
)++- .
.++. /
Id++/ 1
.++1 2
ToString++2 :
(++: ;
)++; <
;++< =
this,, 
.,, 
Sede,, 
=,, 
s,, 
.,, 
CentroDeAtencion,, *
(,,* +
),,+ ,
.,,, -
Nombre,,- 3
;,,3 4
this-- 
.-- 
Autonumerico-- 
=-- 
s--  !
.--! "
EsAutonumerable--" 1
;--1 2
this.. 
... 
NumeroSiguiente..  
=..! "
s..# $
...$ %&
ProximoNumeroDeComprobante..% ?
;..? @
this// 
.// 
Vigente// 
=// 
s// 
.// 
Vigente// $
;//$ %
}00 	
public22 
SerieViewModel22 
(22 
int22 !
id22" $
,22$ %
string22% +
numero22, 2
,222 3
bool223 7
autonumerico228 D
)22D E
{33 	
this44 
.44 
Id44 
=44 
id44 
;44 
this55 
.55 
NumeroSerie55 
=55 
numero55 %
;55% &
this66 
.66 
Autonumerico66 
=66 
autonumerico66  ,
;66, -
}77 	
public88 
static88 
List88 
<88 
SerieViewModel88 )
>88) *
convert88+ 2
(882 3
List883 7
<887 8
Serie_comprobante888 I
>88I J
series88K Q
)88Q R
{99 	
var:: 
ListaSeries:: 
=:: 
new:: !
List::" &
<::& '
SerieViewModel::' 5
>::5 6
(::6 7
)::7 8
;::8 9
foreach<< 
(<< 
var<< 
serie<< 
in<< !
series<<" (
)<<( )
{== 
ListaSeries>> 
.>> 
Add>> 
(>>  
new>>  #
SerieViewModel>>$ 2
(>>2 3
serie>>3 8
)>>8 9
)>>9 :
;>>: ;
}?? 
return@@ 
ListaSeries@@ 
;@@ 
}AA 	
publicBB 
staticBB 
ListBB 
<BB 
SerieViewModelBB )
>BB) *
ConvertBB+ 2
(BB2 3
ListBB3 7
<BB7 8
SerieDeComprobanteBB8 J
>BBJ K
seriesBBL R
)BBR S
{CC 	
varDD 
ListaSeriesDD 
=DD 
newDD !
ListDD" &
<DD& '
SerieViewModelDD' 5
>DD5 6
(DD6 7
)DD7 8
;DD8 9
foreachFF 
(FF 
varFF 
serieFF 
inFF !
seriesFF" (
)FF( )
{GG 
ListaSeriesHH 
.HH 
AddHH 
(HH  
newHH  #
SerieViewModelHH$ 2
(HH2 3
serieHH3 8
)HH8 9
)HH9 :
;HH: ;
}II 
returnJJ 
ListaSeriesJJ 
;JJ 
}KK 	
}LL 
}MM ¥
cD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\SolicitudAnticipoYDevolucionViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 1
%SolicitudAnticipoYDevolucionViewModel 6
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdAgrupadorAnticipo '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
int 

IdAnticipo 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
NumeroSolicitud %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
EstadoSolicitud %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
IdTipoSolicitud %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DateTime 
FechaSolicitud &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
ComboActorGenerico !
Solicitante" -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
ComboActorGenerico !

Benefactor" ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
ComboActorGenerico !
Beneficiario" .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
ComboGenerico 
Moneda #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
decimal 
Total 
{ 
get "
;" #
set$ '
;' (
}) *
public   
string   
CodigoTipoSolicitud   )
{  * +
get  , /
;  / 0
set  1 4
;  4 5
}  6 7
public!! 
string!! /
#CodigoTipoSolicitudNumeroReferencia!! 9
{!!: ;
get!!< ?
;!!? @
set!!A D
;!!D E
}!!F G
public$$ 1
%SolicitudAnticipoYDevolucionViewModel$$ 4
($$4 5
)$$5 6
{%% 	
}'' 	
}ee 
}ff ˚
QD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\TipoCambioViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[		 
Serializable		 
]		 
[

 
DataContract

 
]

 
public 

class 
TipoCambioViewModel $
{ 
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Dia 
{ 
get 
;  
set! $
;$ %
}& '
public 
double 
Compra 
{ 
get "
;" #
set$ '
;' (
}) *
public 
double 
Venta 
{ 
get !
;! "
set# &
;& '
}( )
public 
TipoCambioViewModel "
(" #
)# $
{% &
}' (
public 
TipoCambioViewModel "
(" #
string# )
fecha* /
,/ 0
string0 6
dia7 :
,; <
double= C
compraD J
,J K
doubleL R
ventaS X
)X Y
{ 	
this 
. 
Fecha 
= 
fecha 
; 
this 
. 
Dia 
= 
dia 
; 
this 
. 
Compra 
= 
compra  
;  !
this 
. 
Venta 
= 
venta 
; 
} 	
} 
} ≥
MD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\TarifaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[		 
Serializable		 
]		 
[

 
DataContract

 
]

 
public 

class 
TarifaViewModel  
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
decimal 
Precio 
{ 
get  #
;# $
set% (
;( )
}* +
public 
TarifaViewModel 
( 
)  
{! "
}# $
public 
TarifaViewModel 
( 
int "
id# %
,% &
string' -
nombre. 4
,4 5
decimal6 =
precio> D
)D E
{ 	
this 
. 
Id 
= 
id 
; 
this 
. 
Nombre 
= 
nombre  
;  !
this 
. 
Precio 
= 
precio  
;  !
} 	
} 
} ü/
WD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\TipoComprobanteViewModels.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class $
TipoComprobanteViewModel )
{ 
[ 	

DataMember	 
] 
public 
bool 
EsPropio 
; 
public "
ComboGenericoViewModel %
TipoComprobante& 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
List 
< "
ComboGenericoViewModel *
>* +
Series, 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public $
TipoComprobanteViewModel '
(' (
)( )
{ 	
} 	
public $
TipoComprobanteViewModel '
(' (,
 TipoDeComprobanteParaTransaccion( H
tcI K
)K L
{ 	
this 
. 
EsPropio 
= 
tc 
. 
EsPropio '
;' (
this 
. 
TipoComprobante  
=! "
new# &"
ComboGenericoViewModel' =
(= >
tc> @
.@ A
IdA C
,C D
tcE G
.G H
NombreH N
)N O
;O P
this 
. 
Series 
= 
new 
List "
<" #"
ComboGenericoViewModel# 9
>9 :
(: ;
); <
;< =
foreach 
( 
var 
item 
in  
tc! #
.# $
Series$ *
(* +
)+ ,
), -
{ 
this 
. 
Series 
. 
Add 
(  
new  #"
ComboGenericoViewModel$ :
(: ;
item; ?
.? @
id@ B
,B C
itemC G
.G H
numeroH N
)N O
)O P
;P Q
} 
}   	
public'' $
TipoComprobanteViewModel'' '
(''' (,
 TipoDeComprobanteParaTransaccion''( H
tc''I K
,''K L
char''M Q
prefijoFiltroSeries''R e
)''e f
{(( 	
this)) 
.)) 
EsPropio)) 
=)) 
tc)) 
.)) 
EsPropio)) '
;))' (
this** 
.** 
TipoComprobante**  
=**! "
new**# &"
ComboGenericoViewModel**' =
(**= >
tc**> @
.**@ A
Id**A C
,**C D
tc**E G
.**G H
Nombre**H N
)**N O
;**O P
this++ 
.++ 
Series++ 
=++ 
new++ 
List++ "
<++" #"
ComboGenericoViewModel++# 9
>++9 :
(++: ;
)++; <
;++< =
foreach,, 
(,, 
var,, 
item,, 
in,,  
tc,,! #
.,,# $
Series,,$ *
(,,* +
prefijoFiltroSeries,,+ >
),,> ?
),,? @
{-- 
this.. 
... 
Series.. 
... 
Add.. 
(..  
new..  #"
ComboGenericoViewModel..$ :
(..: ;
item..; ?
...? @
id..@ B
,..B C
item..D H
...H I
numero..I O
)..O P
)..P Q
;..Q R
}// 
}00 	
public22 
static22 
List22 
<22 $
TipoComprobanteViewModel22 3
>223 4
Convert225 <
(22< =
List22= A
<22A B,
 TipoDeComprobanteParaTransaccion22B b
>22b c
comprobantes22d p
)22p q
{33 	
var44 
ListaComprobantes44 !
=44" #
new44$ '
List44( ,
<44, -$
TipoComprobanteViewModel44- E
>44E F
(44F G
)44G H
;44H I
foreach66 
(66 
var66 
comprobante66 $
in66% '
comprobantes66( 4
)664 5
{77 
ListaComprobantes88 !
.88! "
Add88" %
(88% &
new88& )$
TipoComprobanteViewModel88* B
(88B C
comprobante88C N
)88N O
)88O P
;88P Q
}99 
return:: 
ListaComprobantes:: $
;::$ %
};; 	
public== 
static== 
List== 
<== $
TipoComprobanteViewModel== 3
>==3 4
Convert==5 <
(==< =
List=== A
<==A B,
 TipoDeComprobanteParaTransaccion==B b
>==b c
comprobantes==d p
,==p q
char==r v 
prefijoFiltroSeries	==w ä
)
==ä ã
{>> 	
var?? 
ListaComprobantes?? !
=??" #
new??$ '
List??( ,
<??, -$
TipoComprobanteViewModel??- E
>??E F
(??F G
)??G H
;??H I
foreachAA 
(AA 
varAA 
comprobanteAA $
inAA% '
comprobantesAA( 4
)AA4 5
{BB 
ListaComprobantesCC !
.CC! "
AddCC" %
(CC% &
newCC& )$
TipoComprobanteViewModelCC* B
(CCB C
comprobanteCCC N
,CCN O
prefijoFiltroSeriesCCO b
)CCb c
)CCc d
;CCd e
}DD 
returnEE 
ListaComprobantesEE $
;EE$ %
}FF 	
}GG 
}HH  .
oD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\TipoTransaccion\BandejaTipoDeTransaccionViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
.		, -
TipoTransaccion		- <
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class -
!BandejaTipoDeTransaccionViewModel 2
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
TransaccionMaestro (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 1
%AccionesDeNegocioPorTipoDeTransaccion ;
{< =
get> A
;A B
setC F
;F G
}H I
public -
!BandejaTipoDeTransaccionViewModel 0
(0 1
)1 2
{ 	
} 	
public -
!BandejaTipoDeTransaccionViewModel 0
(0 1
TipoDeTransaccion1 B
tipoDeTransaccionC T
)T U
{ 	
this 
. 
Id 
= 
tipoDeTransaccion '
.' (
Id( *
;* +
this 
. 
Nombre 
= 
tipoDeTransaccion +
.+ ,
Nombre, 2
;2 3
this 
. 
Descripcion 
= 
tipoDeTransaccion 0
.0 1
Descripcion1 <
;< =
this 
. 
TransaccionMaestro #
=$ %
tipoDeTransaccion& 7
.7 8$
NombreTransaccionMaestro8 P
(P Q
)Q R
;R S
this   
.   1
%AccionesDeNegocioPorTipoDeTransaccion   6
=  7 85
)CadenaAccionesDeNegocioPorTipoTransaccion  9 b
(  b c
tipoDeTransaccion  c t
.  t u7
*ListaDeAccionesDeNegocioPorTipoTransaccion	  u ü
(
  ü †
)
  † °
)
  ° ¢
;
  ¢ £
}!! 	
public## 
static## 
List## 
<## -
!BandejaTipoDeTransaccionViewModel## <
>##< =
Convert##> E
(##E F
List##F J
<##J K
TipoDeTransaccion##K \
>##\ ]
tiposDeTransaccion##^ p
)##p q
{$$ 	
List%% 
<%% -
!BandejaTipoDeTransaccionViewModel%% 2
>%%2 3'
tiposDeTransaccionViewModel%%4 O
=%%P Q
new%%R U
List%%V Z
<%%Z [-
!BandejaTipoDeTransaccionViewModel%%[ |
>%%| }
(%%} ~
)%%~ 
;	%% Ä
foreach&& 
(&& 
var&& 
item&& 
in&&  
tiposDeTransaccion&&! 3
)&&3 4
{'' '
tiposDeTransaccionViewModel(( +
.((+ ,
Add((, /
(((/ 0
new((0 3-
!BandejaTipoDeTransaccionViewModel((4 U
(((U V
item((V Z
)((Z [
)(([ \
;((\ ]
})) 
return** '
tiposDeTransaccionViewModel** .
;**. /
}++ 	
private-- 
string-- 5
)CadenaAccionesDeNegocioPorTipoTransaccion-- @
(--@ A
List--A E
<--E F-
!AccionDeNegocioPorTipoTransaccion--F g
>--g h4
'listAccionesDeNegocioPorTipoTransaccion	--i ê
)
--ê ë
{.. 	
var// 
lista// 
=// 3
'listAccionesDeNegocioPorTipoTransaccion// ?
.//? @
Select//@ F
(//F G
antt//G K
=>//L N
new//O R
{//S T
antt//U Y
.//Y Z
AccionDeNegocio//Z i
(//i j
)//j k
.//k l
Nombre//l r
,//r s
valor//t y
=//z {
antt	//| Ä
.
//Ä Å
Valor
//Å Ü
?
//á à
$str
//â é
:
//è ê
$str
//ë ñ
}
//ó ò
)
//ò ô
.
//ô ö
ToList
//ö †
(
//† °
)
//° ¢
;
//¢ £
string00 /
#accionesDeNegocioPorTipoTransaccion00 6
=007 8
$str009 ;
;00; <
foreach11 
(11 
var11 
item11 
in11  
lista11! &
)11& '
{22 /
#accionesDeNegocioPorTipoTransaccion33 3
+=334 6
item337 ;
.33; <
Nombre33< B
+33C D
$str33E H
+33I J
item33K O
.33O P
valor33P U
+33V W
$str33X \
;33\ ]
}44 /
#accionesDeNegocioPorTipoTransaccion55 /
=550 1/
#accionesDeNegocioPorTipoTransaccion552 U
==55V X
$str55Y [
?55\ ]0
#accionesDeNegocioPorTipoTransaccion	55^ Å
:
55Ç É1
#accionesDeNegocioPorTipoTransaccion
55Ñ ß
.
55ß ®
	Substring
55® ±
(
55± ≤
$num
55≤ ≥
,
55≥ ¥1
#accionesDeNegocioPorTipoTransaccion
55µ ÿ
.
55ÿ Ÿ
Length
55Ÿ ﬂ
-
55‡ ·
$num
55‚ „
)
55„ ‰
;
55‰ Â
return66 /
#accionesDeNegocioPorTipoTransaccion66 6
;666 7
}77 	
}99 
}:: …s
xD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\TipoTransaccion\AccionDeNegocioPorTipoTransaccionViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
public 

class 6
*AccionDeNegocioPorTipoTransaccionViewModel ;
{ 
public 
int 
	IdEntrada 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
IdSalida 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
IdAccionDeNegocio $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string !
NombreAccionDeNegocio +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
bool 
Entrada 
{ 
get !
;! "
set# &
;& '
}( )
public 
bool 
Salida 
{ 
get  
;  !
set" %
;% &
}' (
public 6
*AccionDeNegocioPorTipoTransaccionViewModel 9
(9 :
): ;
{ 	
} 	
public 6
*AccionDeNegocioPorTipoTransaccionViewModel 9
(9 :
int: =
idAccionDeNegocio> O
,O P
stringQ W!
NombreAccionDeNegocioX m
)m n
{ 	
this 
. 
IdAccionDeNegocio "
=# $
idAccionDeNegocio% 6
;6 7
this 
. !
NombreAccionDeNegocio &
=' (!
NombreAccionDeNegocio) >
;> ?
} 	
public 6
*AccionDeNegocioPorTipoTransaccionViewModel 9
(9 :
int: =
idAccionDeNegocio> O
,O P
stringQ W!
NombreAccionDeNegocioX m
,m n
intp s
	idEntradat }
,~ 
bool	 É
entrada
Ñ ã
,
ã å
int
ç ê
idSalida
ë ô
,
ö õ
bool
ú †
salida
° ß
)
ß ®
{ 	
this   
.   
IdAccionDeNegocio   "
=  # $
idAccionDeNegocio  % 6
;  6 7
this!! 
.!! !
NombreAccionDeNegocio!! &
=!!' (!
NombreAccionDeNegocio!!) >
;!!> ?
this"" 
."" 
	IdEntrada"" 
="" 
	idEntrada"" &
;""& '
this## 
.## 
Entrada## 
=## 
entrada## "
;##" #
this$$ 
.$$ 
IdSalida$$ 
=$$ 
idSalida$$ $
;$$$ %
this%% 
.%% 
Salida%% 
=%% 
salida%%  
;%%  !
}&& 	
public)) 
static)) 
List)) 
<)) 6
*AccionDeNegocioPorTipoTransaccionViewModel)) E
>))E F
Convert))G N
())N O
List))O S
<))S T-
!AccionDeNegocioPorTipoTransaccion))T u
>))u v2
%accionesDeNegocioPorTipoDeTransaccion	))w ú
)
))ú ù
{** 	
List++ 
<++ 6
*AccionDeNegocioPorTipoTransaccionViewModel++ ;
>++; <:
.accionesDeNegocioPorTipoDeTransaccionViewModel++= k
=++l m
new++n q
List++r v
<++v w7
*AccionDeNegocioPorTipoTransaccionViewModel	++w °
>
++° ¢
(
++¢ £
)
++£ §
;
++§ •
var,, -
!accionesAgrupadasPorAccionNegocio,, 1
=,,2 31
%accionesDeNegocioPorTipoDeTransaccion,,4 Y
.,,Y Z
GroupBy,,Z a
(,,a b
d,,b c
=>,,d f
d,,g h
.,,h i
IdAccionDeNegocio,,i z
),,z {
.,,{ |
ToList	,,| Ç
(
,,Ç É
)
,,É Ñ
;
,,Ñ Ö
foreach-- 
(-- 
var-- *
accionAgrupadaPorAccionNegocio-- 7
in--8 :-
!accionesAgrupadasPorAccionNegocio--; \
)--\ ]
{.. :
.accionesDeNegocioPorTipoDeTransaccionViewModel// >
.//> ?
Add//? B
(//B C
new//C F6
*AccionDeNegocioPorTipoTransaccionViewModel//G q
(//q r+
accionAgrupadaPorAccionNegocio	//r ê
.
//ê ë
Key
//ë î
,
//î ï,
accionAgrupadaPorAccionNegocio
//ñ ¥
.
//¥ µ
First
//µ ∫
(
//∫ ª
)
//ª º
.
//º Ω
AccionDeNegocio
//Ω Ã
(
//Ã Õ
)
//Õ Œ
.
//Œ œ
Nombre
//œ ’
,
//’ ÷,
accionAgrupadaPorAccionNegocio
//◊ ı
.
//ı ˆ
SingleOrDefault
//ˆ Ö
(
//Ö Ü
a
//Ü á
=>
//à ä
a
//ã å
.
//å ç
Valor
//ç í
)
//í ì
==
//î ñ
null
//ó õ
?
//ú ù
$num
//û ü
:
//† °,
accionAgrupadaPorAccionNegocio
//¢ ¿
.
//¿ ¡
SingleOrDefault
//¡ –
(
//– —
a
//— “
=>
//” ’
a
//÷ ◊
.
//◊ ÿ
Valor
//ÿ ›
)
//› ﬁ
.
//ﬁ ﬂ
Id
//ﬂ ·
,
//· ‚,
accionAgrupadaPorAccionNegocio
//„ Å
.
//Å Ç
SingleOrDefault
//Ç ë
(
//ë í
a
//í ì
=>
//î ñ
a
//ó ò
.
//ò ô
Valor
//ô û
)
//û ü
!=
//† ¢
null
//£ ß
,
//ß ®,
accionAgrupadaPorAccionNegocio
//© «
.
//« »
SingleOrDefault
//» ◊
(
//◊ ÿ
a
//ÿ Ÿ
=>
//⁄ ‹
!
//› ﬁ
a
//ﬁ ﬂ
.
//ﬂ ‡
Valor
//‡ Â
)
//Â Ê
==
//Á È
null
//Í Ó
?
//Ô 
$num
//Ò Ú
:
//Û Ù,
accionAgrupadaPorAccionNegocio
//ı ì
.
//ì î
SingleOrDefault
//î £
(
//£ §
a
//§ •
=>
//¶ ®
!
//© ™
a
//™ ´
.
//´ ¨
Valor
//¨ ±
)
//± ≤
.
//≤ ≥
Id
//≥ µ
,
//µ ∂,
accionAgrupadaPorAccionNegocio
//∑ ’
.
//’ ÷
SingleOrDefault
//÷ Â
(
//Â Ê
a
//Ê Á
=>
//Ë Í
!
//Î Ï
a
//Ï Ì
.
//Ì Ó
Valor
//Ó Û
)
//Û Ù
!=
//ı ˜
null
//¯ ¸
)
//¸ ˝
)
//˝ ˛
;
//˛ ˇ
}00 
return11 :
.accionesDeNegocioPorTipoDeTransaccionViewModel11 A
;11A B
}22 	
public55 
static55 
List55 
<55 6
*AccionDeNegocioPorTipoTransaccionViewModel55 E
>55E FA
5SetearAccionesDeNegocioPorTipoDeTransaccionParaEditar55G |
(55| }
List	55} Å
<
55Å Ç
AccionDeNegocio
55Ç ë
>
55ë í
accionesDeNegocio
55ì §
,
55§ •
List
55¶ ™
<
55™ ´8
*AccionDeNegocioPorTipoTransaccionViewModel
55´ ’
>
55’ ÷3
%accionesDeNegocioPorTipoDeTransaccion
55◊ ¸
)
55¸ ˝
{66 	
List77 
<77 6
*AccionDeNegocioPorTipoTransaccionViewModel77 ;
>77; <5
)accionesDeNegocioPorTipoTransaccionEditar77= f
=77g h
new77i l
List77m q
<77q r7
*AccionDeNegocioPorTipoTransaccionViewModel	77r ú
>
77ú ù
(
77ù û
)
77û ü
;
77ü †
if88 
(88 1
%accionesDeNegocioPorTipoDeTransaccion88 5
==886 8
null889 =
)88= >
{99 1
%accionesDeNegocioPorTipoDeTransaccion:: 5
=::6 7
new::8 ;
List::< @
<::@ A6
*AccionDeNegocioPorTipoTransaccionViewModel::A k
>::k l
(::l m
)::m n
;::n o
};; 
int== 
	idEntrada== 
=== 
$num== 
;== 
bool>> 
entrada>> 
=>> 
false>>  
;>>  !
int?? 
idSalida?? 
=?? 
$num?? 
;?? 
bool@@ 
salida@@ 
=@@ 
false@@ 
;@@  
foreachAA 
(AA 
varAA 
accionDeNegocioAA (
inAA) +
accionesDeNegocioAA, =
)AA= >
{BB 
boolCC 
bandCC 
=CC 
falseCC !
;CC! "
foreachDD 
(DD 
varDD /
#accionDeNegocioPorTipoDeTransaccionDD @
inDDA C1
%accionesDeNegocioPorTipoDeTransaccionDDD i
)DDi j
{EE 
ifFF 
(FF 
accionDeNegocioFF '
.FF' (
IdFF( *
==FF+ -/
#accionDeNegocioPorTipoDeTransaccionFF. Q
.FFQ R
IdAccionDeNegocioFFR c
)FFc d
{GG 
bandHH 
=HH 
trueHH #
;HH# $
	idEntradaII !
=II" #/
#accionDeNegocioPorTipoDeTransaccionII$ G
.IIG H
	IdEntradaIIH Q
;IIQ R
entradaJJ 
=JJ  !/
#accionDeNegocioPorTipoDeTransaccionJJ" E
.JJE F
EntradaJJF M
;JJM N
idSalidaKK  
=KK! "/
#accionDeNegocioPorTipoDeTransaccionKK# F
.KKF G
IdSalidaKKG O
;KKO P
salidaLL 
=LL  /
#accionDeNegocioPorTipoDeTransaccionLL! D
.LLD E
SalidaLLE K
;LLK L
}MM 
}NN 
ifOO 
(OO 
bandOO 
)OO 
{PP 5
)accionesDeNegocioPorTipoTransaccionEditarQQ =
.QQ= >
AddQQ> A
(QQA B
newQQB E6
*AccionDeNegocioPorTipoTransaccionViewModelQQF p
(QQp q
accionDeNegocio	QQq Ä
.
QQÄ Å
Id
QQÅ É
,
QQÉ Ñ
accionDeNegocio
QQÖ î
.
QQî ï
Nombre
QQï õ
,
QQõ ú
	idEntrada
QQù ¶
,
QQ¶ ß
entrada
QQ® Ø
,
QQØ ∞
idSalida
QQ± π
,
QQπ ∫
salida
QQª ¡
)
QQ¡ ¬
)
QQ¬ √
;
QQ√ ƒ
}RR 
elseSS 
{TT 5
)accionesDeNegocioPorTipoTransaccionEditarUU =
.UU= >
AddUU> A
(UUA B
newUUB E6
*AccionDeNegocioPorTipoTransaccionViewModelUUF p
(UUp q
accionDeNegocio	UUq Ä
.
UUÄ Å
Id
UUÅ É
,
UUÉ Ñ
accionDeNegocio
UUÖ î
.
UUî ï
Nombre
UUï õ
)
UUõ ú
)
UUú ù
;
UUù û
}VV 
}WW 
returnXX 5
)accionesDeNegocioPorTipoTransaccionEditarXX <
;XX< =
}YY 	
public]] 
static]] 
List]] 
<]] 6
*AccionDeNegocioPorTipoTransaccionViewModel]] E
>]]E F
Convert]]G N
(]]N O
List]]O S
<]]S T
AccionDeNegocio]]T c
>]]c d
accionesDeNegocio]]e v
)]]v w
{^^ 	
List__ 
<__ 6
*AccionDeNegocioPorTipoTransaccionViewModel__ ;
>__; <7
+accionesDeNegocioPorTipoTransaccionGenerico__= h
=__i j
new__k n
List__o s
<__s t7
*AccionDeNegocioPorTipoTransaccionViewModel	__t û
>
__û ü
(
__ü †
)
__† °
;
__° ¢
foreach`` 
(`` 
var`` 
accionDeNegocio`` (
in``) +
accionesDeNegocio``, =
)``= >
{aa 7
+accionesDeNegocioPorTipoTransaccionGenericobb ;
.bb; <
Addbb< ?
(bb? @
newbb@ C6
*AccionDeNegocioPorTipoTransaccionViewModelbbD n
(bbn o
accionDeNegociobbo ~
.bb~ 
Id	bb Å
,
bbÅ Ç
accionDeNegocio
bbÉ í
.
bbí ì
Nombre
bbì ô
)
bbô ö
)
bbö õ
;
bbõ ú
}cc 
returndd 7
+accionesDeNegocioPorTipoTransaccionGenericodd >
;dd> ?
}ee 	
publicgg 
staticgg 
Listgg 
<gg -
!AccionDeNegocioPorTipoTransacciongg <
>gg< =
Convertgg> E
(ggE F
ListggF J
<ggJ K6
*AccionDeNegocioPorTipoTransaccionViewModelggK u
>ggu v;
.accionesDeNegocioPorTipoDeTransaccionViewModel	ggw •
)
gg• ¶
{hh 	
Listii 
<ii -
!AccionDeNegocioPorTipoTransaccionii 2
>ii2 3/
#accionesDeNegocioPorTipoTransaccionii4 W
=iiX Y
newiiZ ]
Listii^ b
<iib c.
!AccionDeNegocioPorTipoTransaccion	iic Ñ
>
iiÑ Ö
(
iiÖ Ü
)
iiÜ á
;
iiá à
foreachjj 
(jj 
varjj 8
,accionDeNegocioPorTipoDeTransaccionViewModeljj E
injjF H:
.accionesDeNegocioPorTipoDeTransaccionViewModeljjI w
)jjw x
{kk 
ifll 
(ll 8
,accionDeNegocioPorTipoDeTransaccionViewModelll @
.ll@ A
EntradallA H
)llH I
{mm /
#accionesDeNegocioPorTipoTransaccionnn 7
.nn7 8
Addnn8 ;
(nn; <
newnn< ?-
!AccionDeNegocioPorTipoTransaccionnn@ a
(nna b9
,accionDeNegocioPorTipoDeTransaccionViewModel	nnb é
.
nné è
IdAccionDeNegocio
nnè †
,
nn† °:
,accionDeNegocioPorTipoDeTransaccionViewModel
nn¢ Œ
.
nnŒ œ
	IdEntrada
nnœ ÿ
,
nnÿ Ÿ
true
nn⁄ ﬁ
)
nnﬁ ﬂ
)
nnﬂ ‡
;
nn‡ ·
}oo 
ifpp 
(pp 8
,accionDeNegocioPorTipoDeTransaccionViewModelpp @
.pp@ A
SalidappA G
)ppG H
{qq /
#accionesDeNegocioPorTipoTransaccionrr 7
.rr7 8
Addrr8 ;
(rr; <
newrr< ?-
!AccionDeNegocioPorTipoTransaccionrr@ a
(rra b9
,accionDeNegocioPorTipoDeTransaccionViewModel	rrb é
.
rré è
IdAccionDeNegocio
rrè †
,
rr† °:
,accionDeNegocioPorTipoDeTransaccionViewModel
rr¢ Œ
.
rrŒ œ
IdSalida
rrœ ◊
,
rr◊ ÿ
false
rrŸ ﬁ
)
rrﬁ ﬂ
)
rrﬂ ‡
;
rr‡ ·
}ss 
}tt 
returnuu /
#accionesDeNegocioPorTipoTransaccionuu 6
;uu6 7
}vv 	
}ww 
}zz π
pD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\TipoTransaccion\RegistroTipoDeTransaccionViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -
TipoTransaccion- <
{ 
public		 

class		 .
"RegistroTipoDeTransaccionViewModel		 3
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public "
ComboGenericoViewModel %
TransaccionMaestro& 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
List 
< 6
*AccionDeNegocioPorTipoTransaccionViewModel >
>> ?1
%AccionesDeNegocioPorTipoDeTransaccion@ e
{f g
geth k
;k l
setm p
;p q
}r s
public .
"RegistroTipoDeTransaccionViewModel 1
(1 2
)2 3
{ 	
this 
. 
TransaccionMaestro #
=$ %
new& )"
ComboGenericoViewModel* @
(@ A
)A B
;B C
this 
. 1
%AccionesDeNegocioPorTipoDeTransaccion 6
=7 8
new9 <
List= A
<A B6
*AccionDeNegocioPorTipoTransaccionViewModelB l
>l m
(m n
)n o
;o p
} 	
public .
"RegistroTipoDeTransaccionViewModel 1
(1 2
TipoDeTransaccion2 C
tipoDeTransaccionD U
)U V
{ 	
this 
. 
Id 
= 
tipoDeTransaccion '
.' (
Id( *
;* +
this 
. 
Nombre 
= 
tipoDeTransaccion +
.+ ,
Nombre, 2
;2 3
this 
. 
Descripcion 
= 
tipoDeTransaccion 0
.0 1
Descripcion1 <
;< =
this 
. 
TransaccionMaestro #
=$ %
new& )"
ComboGenericoViewModel* @
(@ A
tipoDeTransaccionA R
.R S
TransaccionMaestroS e
(e f
)f g
.g h
Idh j
,j k
tipoDeTransaccionl }
.} ~
TransaccionMaestro	~ ê
(
ê ë
)
ë í
.
í ì
Nombre
ì ô
)
ô ö
;
ö õ
this 
. 1
%AccionesDeNegocioPorTipoDeTransaccion 6
=7 86
*AccionDeNegocioPorTipoTransaccionViewModel9 c
.c d
Convertd k
(k l
tipoDeTransaccionl }
.} ~7
*ListaDeAccionesDeNegocioPorTipoTransaccion	~ ®
(
® ©
)
© ™
.
™ ´
ToList
´ ±
(
± ≤
)
≤ ≥
)
≥ ¥
;
¥ µ
} 	
}!! 
}## Ò:
lD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\BandejaVentasYCobrosPorVendedorViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class 4
(BandejaVentasYCobrosPorVendedorViewModel 9
{ 
[ 	

DataMember	 
] 
public 
long 
IdTransaccion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
FechaEmision "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
FechaRegistro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
CentroDeAtencion &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
IdCentroDeAtencion (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
Vendedor 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Cajero 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

TotalVenta  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
TotalCobranza #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 4
(BandejaVentasYCobrosPorVendedorViewModel 7
(7 8
)8 9
{ 	
} 	
public!! 4
(BandejaVentasYCobrosPorVendedorViewModel!! 7
(!!7 8+
VentaYCobranzaCarteraDeClientes!!8 W 
ventaYCobranzaMasiva!!X l
)!!l m
{"" 	
this## 
.## 
IdTransaccion## 
=##   
ventaYCobranzaMasiva##! 5
.##5 6
IdTransaccion##6 C
;##C D
this$$ 
.$$ 
FechaEmision$$ 
=$$  
ventaYCobranzaMasiva$$  4
.$$4 5
Venta$$5 :
!=$$; =
null$$> B
?$$C D 
ventaYCobranzaMasiva$$E Y
.$$Y Z
Venta$$Z _
.$$_ `
FechaEmision$$` l
.$$l m
ToString$$m u
($$u v
$str	$$v Ç
)
$$Ç É
:
$$Ñ Ö"
ventaYCobranzaMasiva
$$Ü ö
.
$$ö õ
Cobranza
$$õ £
.
$$£ §
FechaEmision
$$§ ∞
.
$$∞ ±
ToString
$$± π
(
$$π ∫
$str
$$∫ ∆
)
$$∆ «
;
$$« »
this%% 
.%% 
FechaRegistro%% 
=%%   
ventaYCobranzaMasiva%%! 5
.%%5 6
Venta%%6 ;
!=%%< >
null%%? C
?%%D E 
ventaYCobranzaMasiva%%F Z
.%%Z [
Venta%%[ `
.%%` a
FechaRegistro%%a n
.%%n o
ToString%%o w
(%%w x
$str	%%x ë
)
%%ë í
:
%%ì î"
ventaYCobranzaMasiva
%%ï ©
.
%%© ™
Cobranza
%%™ ≤
.
%%≤ ≥
FechaRegistro
%%≥ ¿
.
%%¿ ¡
ToString
%%¡ …
(
%%…  
$str
%%  „
)
%%„ ‰
;
%%‰ Â
this&& 
.&& 
IdCentroDeAtencion&& #
=&&$ % 
ventaYCobranzaMasiva&&& :
.&&: ;
IdCentroAtencion&&; K
.&&K L
ToString&&L T
(&&T U
)&&U V
;&&V W
this'' 
.'' 
CentroDeAtencion'' !
=''" # 
ventaYCobranzaMasiva''$ 8
.''8 9 
NombreCentroAtencion''9 M
;''N O
this(( 
.(( 
Vendedor(( 
=((  
ventaYCobranzaMasiva(( 0
.((0 1
Venta((1 6
!=((7 9
null((: >
?((? @ 
ventaYCobranzaMasiva((A U
.((U V
Venta((V [
.(([ \
NombreVendedor((\ j
:((k l
$str((m o
;((o p
this)) 
.)) 
Cajero)) 
=))  
ventaYCobranzaMasiva)) .
.)). /
Cobranza))/ 7
!=))8 :
null)); ?
?))@ A 
ventaYCobranzaMasiva))B V
.))V W
Cobranza))W _
.))_ `
NombreCajero))` l
:))l m
$str))n p
;))p q
this** 
.** 

TotalVenta** 
=**  
ventaYCobranzaMasiva** 2
.**2 3
Venta**3 8
!=**9 ;
null**< @
?**A B 
ventaYCobranzaMasiva**C W
.**W X
Venta**X ]
.**] ^
Detalles**^ f
.**f g
Sum**g j
(**j k
d**k l
=>**m o
d**p q
.**q r
PrecioUnitario	**r Ä
*
**Å Ç
d
**É Ñ
.
**Ñ Ö
Cantidad
**Ö ç
)
**ç é
.
**é è
ToString
**è ó
(
**ó ò
$str
**ò ú
)
**ú ù
:
**ù û
$num
**ü †
.
**† °
ToString
**° ©
(
**© ™
$str
**™ Æ
)
**Æ Ø
;
**Ø ∞
this++ 
.++ 
TotalCobranza++ 
=++   
ventaYCobranzaMasiva++! 5
.++5 6
Cobranza++6 >
!=++? A
null++B F
?++G H 
ventaYCobranzaMasiva++I ]
.++] ^
Cobranza++^ f
.++f g
Detalles++g o
.++o p
Sum++p s
(++s t
d++t u
=>++v x
d++y z
.++z {
Importe	++{ Ç
)
++Ç É
.
++É Ñ
ToString
++Ñ å
(
++å ç
$str
++ç ë
)
++ë í
:
++ì î
$num
++ï ñ
.
++ñ ó
ToString
++ó ü
(
++ü †
$str
++† §
)
++§ •
;
++• ¶
},, 	
public00 
static00 
List00 
<00 4
(BandejaVentasYCobrosPorVendedorViewModel00 C
>00C D
Convert00E L
(00L M
List00M Q
<00Q R+
VentaYCobranzaCarteraDeClientes00R q
>00q r$
ventasYCobranzasMasivas	00s ä
)
00ä ã
{11 	
List22 
<22 4
(BandejaVentasYCobrosPorVendedorViewModel22 9
>229 :"
VentasYCobrosViewModel22; Q
=22R S
new22T W
List22X \
<22\ ]5
(BandejaVentasYCobrosPorVendedorViewModel	22] Ö
>
22Ö Ü
(
22Ü á
)
22á à
;
22à â
foreach44 
(44 
var44 
item44 
in44  #
ventasYCobranzasMasivas44! 8
)448 9
{55 "
VentasYCobrosViewModel66 &
.66& '
Add66' *
(66* +
new66+ .4
(BandejaVentasYCobrosPorVendedorViewModel66/ W
(66W X
item66X \
)66\ ]
)66] ^
;66^ _
}77 
return88 "
VentasYCobrosViewModel88 )
;88) *
}99 	
};; 
}<< æ-
`D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\RegistroVentaMasivaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public 

class (
RegistroVentaMasivaViewModel -
{ 
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public "
ComboGenericoViewModel %
PuntoDeVenta& 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public "
ComboGenericoViewModel %
Almacen& -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public "
ComboGenericoViewModel %
Caja& *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public "
ComboGenericoViewModel %
Vendedor& .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public "
ComboGenericoViewModel %
Cajero& ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public "
ComboGenericoViewModel %

Almacenero& 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
DateTime 
FechaDeEmision &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
IEnumerable 
< *
RegistroDetalleVentasViewModel 9
>9 :
Detalles; C
{D E
getF I
;I J
setK N
;N O
}P Q
public (
RegistroVentaMasivaViewModel +
(+ ,
), -
{ 	
} 	
public 
static 
VentaMasiva !
ConvertVenta" .
(. /(
RegistroVentaMasivaViewModel/ K
ventaL Q
)Q R
{ 	
List   
<   
VentaMonoDetalle   !
>  ! "
detalles  # +
=  , -
new  . 1
List  2 6
<  6 7
VentaMonoDetalle  7 G
>  G H
(  H I
)  I J
;  J K
foreach!! 
(!! 
var!! 
item!! 
in!!  
venta!!! &
.!!& '
Detalles!!' /
)!!/ 0
{"" 
detalles## 
.## 
Add## 
(## 
new##  
VentaMonoDetalle##! 1
(##1 2
)##2 3
{$$ 
Cantidad%% 
=%% 
item%% #
.%%# $
Cantidad%%$ ,
,%%, -
PrecioUnitario&& "
=&&# $
item&&% )
.&&) *
PrecioUnitario&&* 8
,&&8 9

IdConcepto'' 
=''  
item''! %
.''% &

IdConcepto''& 0
,''0 1
Importe(( 
=(( 
item(( "
.((" #
Importe((# *
,((* +
MascaraDeCalculo)) $
=))% &
item))' +
.))+ ,
MascaraDeCalculo)), <
,))< =
EsBien** 
=** 
item** !
.**! "
EsBien**" (
}++ 
)++ 
;++ 
},, 
return-- 
new-- 
VentaMasiva-- "
(--" #
venta--# (
.--( )
TipoDeComprobante--) :
.--: ;
SerieSeleccionada--; L
,--L M
venta--M R
.--R S
PuntoDeVenta--S _
.--_ `
Id--` b
,--b c
venta--d i
.--i j
Caja--j n
.--n o
Id--o q
,--q r
venta--s x
.--x y
Almacen	--y Ä
.
--Ä Å
Id
--Å É
,
--É Ñ
venta
--Ö ä
.
--ä ã
Vendedor
--ã ì
.
--ì î
Id
--î ñ
,
--ñ ó
venta
--ò ù
.
--ù û
Cajero
--û §
.
--§ •
Id
--• ß
,
--ß ®
venta
--© Æ
.
--Æ Ø

Almacenero
--Ø π
.
--π ∫
Id
--∫ º
,
--º Ω
venta
--Ω ¬
.
--¬ √
FechaDeEmision
--√ —
,
--— “
detalles
--” €
)
--€ ‹
;
--‹ ›
}.. 	
public11 
class11 *
RegistroDetalleVentasViewModel11 3
{22 	
public33 
int33 

IdConcepto33 !
{33" #
get33$ '
;33' (
set33) ,
;33, -
}33. /
public44 
decimal44 
Cantidad44 #
{44$ %
get44& )
;44) *
set44+ .
;44. /
}440 1
public55 
decimal55 
PrecioUnitario55 )
{55* +
get55, /
;55/ 0
set551 4
;554 5
}556 7
public66 
decimal66 
Importe66 "
{66# $
get66% (
;66( )
set66* -
;66- .
}66/ 0
public77 
string77 
MascaraDeCalculo77 *
{77+ ,
get77- 0
;770 1
set772 5
;775 6
}777 8
public88 
bool88 
EsBien88 
{88  
get88! $
;88$ %
set88& )
;88) *
}88+ ,
public;; *
RegistroDetalleVentasViewModel;; 1
(;;1 2
);;2 3
{<< 
}>> 
}WW 	
}XX 
}YY –æ
cD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\VentaYCobroPorVendedorViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class +
VentaYCobroPorVendedorViewModel 0
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
PuntoDeVenta "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Almacen 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Caja 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Cajero 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

Almacenero  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Vendedor 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
List 
< )
ClienteVentasYCobrosViewModel 1
>1 2
Clientes3 ;
{< =
get> A
;A B
setC F
;F G
}H I
public 
string 
SaldoAnteriorTotal (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 

CobroTotal  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 

SaldoTotal  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
ImporteTotal "
{# $
get% (
;( )
set* -
;- .
}/ 0
public   
string   
PrecioUnitarioTotal   )
{  * +
get  , /
;  / 0
set  1 4
;  4 5
}  6 7
public!! 
string!! 
CantidadTotal!! #
{!!$ %
get!!& )
;!!) *
set!!+ .
;!!. /
}!!0 1
public## +
VentaYCobroPorVendedorViewModel## .
(##. /
)##/ 0
{$$ 	
}%% 	
public'' +
VentaYCobroPorVendedorViewModel'' .
(''. /+
VentaYCobranzaCarteraDeClientes''/ N 
ventaYCobranzaMasiva''O c
,''c d
List''e i
<''i j
Deuda_Actor_Negocio''j }
>''} ~
saldosAnterios	'' ç
)
''ç é
{(( 	
this)) 
.)) 
Fecha)) 
=))  
ventaYCobranzaMasiva)) -
.))- .
Venta)). 3
!=))4 6
null))7 ;
?))< = 
ventaYCobranzaMasiva))> R
.))R S
Venta))S X
.))X Y
FechaEmision))Y e
.))e f
ToString))f n
())n o
$str	))o Ñ
)
))Ñ Ö
:
))Ü á"
ventaYCobranzaMasiva
))à ú
.
))ú ù
Cobranza
))ù •
.
))• ¶
FechaEmision
))¶ ≤
.
))≤ ≥
ToString
))≥ ª
(
))ª º
$str
))º —
)
))— “
;
))“ ”
this++ 
.++ 
PuntoDeVenta++ 
=++  
ventaYCobranzaMasiva++  4
.++4 5
Venta++5 :
!=++; =
null++> B
?++C D 
ventaYCobranzaMasiva++E Y
.++Y Z
Venta++Z _
.++_ `
NombrePuntoDeVenta++` r
:++s t
$str++u w
;++w x
this,, 
.,, 
Almacen,, 
=,,  
ventaYCobranzaMasiva,, /
.,,/ 0
Venta,,0 5
!=,,6 8
null,,9 =
?,,> ? 
ventaYCobranzaMasiva,,@ T
.,,T U
Venta,,U Z
.,,Z [
NombreAlmacen,,[ h
:,,i j
$str,,k m
;,,m n
this-- 
.-- 

Almacenero-- 
=--  
ventaYCobranzaMasiva-- 2
.--2 3
Venta--3 8
!=--9 ;
null--< @
?--A B 
ventaYCobranzaMasiva--C W
.--W X
Venta--X ]
.--] ^
NombreAlmacenero--^ n
:--o p
$str--q s
;--s t
this.. 
... 
Vendedor.. 
=..  
ventaYCobranzaMasiva.. 0
...0 1
Venta..1 6
!=..7 9
null..: >
?..? @ 
ventaYCobranzaMasiva..A U
...U V
Venta..V [
...[ \
NombreVendedor..\ j
:..k l
$str..m o
;..o p
this00 
.00 
Caja00 
=00  
ventaYCobranzaMasiva00 ,
.00, -
Cobranza00- 5
!=006 8
null009 =
?00> ? 
ventaYCobranzaMasiva00@ T
.00T U
Cobranza00U ]
.00] ^

NombreCaja00^ h
:00i j
$str00k m
;00m n
this11 
.11 
Cajero11 
=11  
ventaYCobranzaMasiva11 .
.11. /
Cobranza11/ 7
!=118 :
null11; ?
?11@ A 
ventaYCobranzaMasiva11B V
.11V W
Cobranza11W _
.11_ `
NombreCajero11` l
:11m n
$str11o q
;11q r
this33 
.33 
Clientes33 
=33 )
ClienteVentasYCobrosViewModel33 9
.339 :
Convert33: A
(33A B 
ventaYCobranzaMasiva33B V
,33V W
saldosAnterios33X f
)33f g
;33g h
this55 
.55 
SaldoAnteriorTotal55 #
=55$ %
Clientes55& .
.55. /
Sum55/ 2
(552 3
d553 4
=>555 7
System558 >
.55> ?
Convert55? F
.55F G
	ToDecimal55G P
(55P Q
d55Q R
.55R S
SaldoAnterior55S `
)55` a
)55a b
.55b c
ToString55c k
(55k l
$str55l p
)55p q
;55q r
this66 
.66 

CobroTotal66 
=66 
Clientes66 &
.66& '
Sum66' *
(66* +
d66+ ,
=>66- /
System660 6
.666 7
Convert667 >
.66> ?
	ToDecimal66? H
(66H I
d66I J
.66J K
Cobro66K P
)66P Q
)66Q R
.66R S
ToString66S [
(66[ \
$str66\ `
)66` a
;66a b
this77 
.77 

SaldoTotal77 
=77 
Clientes77 &
.77& '
Sum77' *
(77* +
d77+ ,
=>77- /
System770 6
.776 7
Convert777 >
.77> ?
	ToDecimal77? H
(77H I
d77I J
.77J K
SaldoActual77K V
)77V W
)77W X
.77X Y
ToString77Y a
(77a b
$str77b f
)77f g
;77g h
this99 
.99 
CantidadTotal99 
=99  
Clientes99! )
.99) *
Sum99* -
(99- .
d99. /
=>990 2
System993 9
.999 :
Convert99: A
.99A B
	ToDecimal99B K
(99K L
d99L M
.99M N
Cantidad99N V
)99V W
)99W X
.99X Y
ToString99Y a
(99a b
$str99b e
+99f g
AplicacionSettings99h z
.99z {
Default	99{ Ç
.
99Ç É'
NumeroDecimalesEnCantidad
99É ú
)
99ú ù
;
99ù û
this:: 
.:: 
PrecioUnitarioTotal:: $
=::% &
Clientes::' /
.::/ 0
Sum::0 3
(::3 4
d::4 5
=>::6 8
System::9 ?
.::? @
Convert::@ G
.::G H
	ToDecimal::H Q
(::Q R
d::R S
.::S T
PrecioUnitario::T b
)::b c
)::c d
.::d e
ToString::e m
(::m n
$str::n q
+::r s
AplicacionSettings	::t Ü
.
::Ü á
Default
::á é
.
::é è%
NumeroDecimalesEnPrecio
::è ¶
)
::¶ ß
;
::ß ®
this;; 
.;; 
ImporteTotal;; 
=;; 
Clientes;;  (
.;;( )
Sum;;) ,
(;;, -
d;;- .
=>;;/ 1
System;;2 8
.;;8 9
Convert;;9 @
.;;@ A
	ToDecimal;;A J
(;;J K
d;;K L
.;;L M
ImporteTotal;;M Y
);;Y Z
);;Z [
.;;[ \
ToString;;\ d
(;;d e
$str;;e i
);;i j
;;;j k
}== 	
}?? 
publicAA 

classAA )
ClienteVentasYCobrosViewModelAA .
{BB 
[CC 	

DataMemberCC	 
]CC 
publicDD 
intDD 
	IdClienteDD 
{DD 
getDD "
;DD" #
setDD$ '
;DD' (
}DD) *
publicEE 
stringEE 
ClienteEE 
{EE 
getEE  #
;EE# $
setEE% (
;EE( )
}EE* +
publicFF 
stringFF 
SaldoAnteriorFF #
{FF$ %
getFF& )
;FF) *
setFF+ .
;FF. /
}FF0 1
publicGG 
stringGG 
CobroGG 
{GG 
getGG !
;GG! "
setGG# &
;GG& '
}GG( )
publicHH 
stringHH 
SaldoActualHH !
{HH" #
getHH$ '
;HH' (
setHH) ,
;HH, -
}HH. /
publicII 
stringII 
ImporteTotalII "
{II# $
getII% (
;II( )
setII* -
;II- .
}II/ 0
publicJJ 
ListJJ 
<JJ "
DetalleVentasViewModelJJ *
>JJ* +
DetallesJJ, 4
{JJ5 6
getJJ7 :
;JJ: ;
setJJ< ?
;JJ? @
}JJA B
publicKK 
stringKK 
CantidadKK 
{KK  
getKK! $
;KK$ %
setKK& )
;KK) *
}KK+ ,
publicLL 
stringLL 
PrecioUnitarioLL $
{LL% &
getLL' *
;LL* +
setLL, /
;LL/ 0
}LL1 2
publicNN )
ClienteVentasYCobrosViewModelNN ,
(NN, -
)NN- .
{OO 	
thisPP 
.PP 
	IdClientePP 
=PP 
$numPP 
;PP 
thisQQ 
.QQ 
ClienteQQ 
=QQ 
$strQQ 
;QQ 
thisRR 
.RR 
SaldoAnteriorRR 
=RR  
$strRR! '
;RR' (
thisSS 
.SS 
CobroSS 
=SS 
$strSS 
;SS  
thisTT 
.TT 
SaldoActualTT 
=TT 
$strTT %
;TT% &
thisUU 
.UU 
ImporteTotalUU 
=UU 
$strUU  &
;UU& '
thisVV 
.VV 
DetallesVV 
=VV 
newVV 
ListVV  $
<VV$ %"
DetalleVentasViewModelVV% ;
>VV; <
(VV< =
)VV= >
;VV> ?
}WW 	
publicYY )
ClienteVentasYCobrosViewModelYY ,
(YY, -"
ComboGenericoViewModelYY- C
clienteYYD K
,YYK L
ListYYM Q
<YYQ R
VentaMonoDetalleYYR b
>YYb c
detallesVentasYYd r
,YYr s"
DetalleCobranzaMasiva	YYt â
cobranza
YYä í
,
YYí ì
decimal
YYî õ
saldoAnterior
YYú ©
)
YY© ™
{ZZ 	
this[[ 
.[[ 
	IdCliente[[ 
=[[ 
cliente[[ $
.[[$ %
Id[[% '
;[[' (
this\\ 
.\\ 
Cliente\\ 
=\\ 
cliente\\ "
.\\" #
Nombre\\# )
;\\) *
this]] 
.]] 
Cobro]] 
=]] 
(]] 
cobranza]] "
!=]]# %
null]]& *
?]]+ ,
cobranza]]- 5
.]]5 6
Importe]]6 =
:]]> ?
$num]]@ A
)]]A B
.]]B C
ToString]]C K
(]]K L
$str]]L R
)]]R S
;]]S T
if^^ 
(^^ 
detallesVentas^^ 
!=^^ !
null^^" &
&&^^' )
detallesVentas^^* 8
.^^8 9
Count^^9 >
(^^> ?
)^^? @
>^^A B
$num^^C D
)^^D E
{__ 
this`` 
.`` 
ImporteTotal`` !
=``" #
(``$ %
detallesVentas``% 3
.``3 4
Sum``4 7
(``7 8
d``8 9
=>``: <
d``= >
.``> ?
Cantidad``? G
*``H I
d``J K
.``K L
PrecioUnitario``L Z
)``Z [
)``[ \
.``\ ]
ToString``] e
(``e f
$str``f l
)``l m
;``m n
thisaa 
.aa 
Detallesaa 
=aa "
DetalleVentasViewModelaa  6
.aa6 7
Convertaa7 >
(aa> ?
detallesVentasaa? M
)aaM N
;aaN O
}bb 
}cc 	
publicee 
staticee 
Listee 
<ee )
ClienteVentasYCobrosViewModelee 8
>ee8 9
Convertee: A
(eeA B+
VentaYCobranzaCarteraDeClienteseeB a 
ventaYCobranzaMasivaeeb v
,eev w
Listeex |
<ee| } 
Deuda_Actor_Negocio	ee} ê
>
eeê ë
saldosAnterios
eeí †
)
ee† °
{ff 	
vargg )
clientesVentaYCobroViewModelsgg -
=gg. /
newgg0 3
Listgg4 8
<gg8 9)
ClienteVentasYCobrosViewModelgg9 V
>ggV W
(ggW X
)ggX Y
;ggY Z
Listii 
<ii 
intii 
>ii !
idsClientesUnificadosii +
=ii, - 
ventaYCobranzaMasivaii. B
.iiB C"
ListaClientesUnificadoiiC Y
(iiY Z
)iiZ [
;ii[ \
foreachjj 
(jj 
varjj 
itemjj 
injj  !
idsClientesUnificadosjj! 6
)jj6 7
{kk 
Listll 
<ll 
VentaMonoDetallell %
>ll% & 
detallesVentaClientell' ;
=ll< = 
ventaYCobranzaMasivall> R
.llR S
VentallS X
?llX Y
.llY Z
DetallesllZ b
.llb c
Wherellc h
(llh i
dlli j
=>llk m
dlln o
.llo p
	IdClientellp y
==llz |
item	ll} Å
)
llÅ Ç
.
llÇ É
ToList
llÉ â
(
llâ ä
)
llä ã
;
llã å!
DetalleCobranzaMasivamm %
cobroClientemm& 2
=mm3 4 
ventaYCobranzaMasivamm5 I
.mmI J
CobranzammJ R
?mmR S
.mmS T
DetallesmmT \
.mm\ ]
SingleOrDefaultmm] l
(mml m
dmmm n
=>mmo q
dmmr s
.mms t
	IdClientemmt }
==	mm~ Ä
item
mmÅ Ö
)
mmÖ Ü
;
mmÜ á
intnn 
	idClientenn 
=nn  
detallesVentaClientenn  4
!=nn5 7
nullnn8 <
&&nn= ? 
detallesVentaClientenn@ T
.nnT U
CountnnU Z
(nnZ [
)nn[ \
>nn] ^
$numnn_ `
?nna b 
detallesVentaClientennc w
.nnw x
FirstOrDefault	nnx Ü
(
nnÜ á
)
nná à
.
nnà â
	IdCliente
nnâ í
:
nnì î
cobroCliente
nnï °
.
nn° ¢
	IdCliente
nn¢ ´
;
nn´ ¨
stringoo 
nombreClienteoo $
=oo% & 
detallesVentaClienteoo' ;
!=oo< >
nulloo? C
&&ooD F 
detallesVentaClienteooG [
.oo[ \
Countoo\ a
(ooa b
)oob c
>ood e
$numoof g
?ooh i 
detallesVentaClienteooj ~
.oo~ 
FirstOrDefault	oo ç
(
ooç é
)
ooé è
.
ooè ê
NombreCliente
ooê ù
:
ooû ü
cobroCliente
oo† ¨
.
oo¨ ≠
NombreCliente
oo≠ ∫
;
oo∫ ª"
ComboGenericoViewModelpp &
clientepp' .
=pp/ 0
newpp1 4"
ComboGenericoViewModelpp5 K
(ppK L
	idClienteppL U
,ppU V
nombreClienteppW d
)ppd e
;ppe f)
clientesVentaYCobroViewModelsqq -
.qq- .
Addqq. 1
(qq1 2
newqq2 5)
ClienteVentasYCobrosViewModelqq6 S
(qqS T
clienteqqT [
,qq[ \ 
detallesVentaClienteqq] q
,qqq r
cobroClienteqqs 
,	qq Ä
saldosAnterios
qqÅ è
.
qqè ê
SingleOrDefault
qqê ü
(
qqü †
sa
qq† ¢
=>
qq£ •
sa
qq¶ ®
.
qq® ©
ActorNegocio
qq© µ
.
qqµ ∂
id
qq∂ ∏
==
qqπ ª
item
qqº ¿
)
qq¿ ¡
.
qq¡ ¬
Deuda
qq¬ «
(
qq« »
)
qq» …
)
qq…  
)
qq  À
;
qqÀ Ã
}rr )
clientesVentaYCobroViewModelstt )
=tt* +)
clientesVentaYCobroViewModelstt, I
.ttI J
OrderByttJ Q
(ttQ R
dvcttR U
=>ttV X
dvcttY \
.tt\ ]
Clientett] d
)ttd e
.tte f
ToListttf l
(ttl m
)ttm n
;ttn o
returnuu )
clientesVentaYCobroViewModelsuu 0
;uu0 1
}vv 	
}xx 
publiczz 

classzz "
DetalleVentasViewModelzz '
{{{ 
public|| 
string|| 
NombreConcepto|| $
{||% &
get||' *
;||* +
set||, /
;||/ 0
}||1 2
public}} 
string}} 
Cantidad}} 
{}}  
get}}! $
;}}$ %
set}}& )
;}}) *
}}}+ ,
public~~ 
string~~ 
PrecioUnitario~~ $
{~~% &
get~~' *
;~~* +
set~~, /
;~~/ 0
}~~1 2
public 
string 
Importe 
{ 
get  #
;# $
set% (
;( )
}* +
public
ÅÅ $
DetalleVentasViewModel
ÅÅ %
(
ÅÅ% &
)
ÅÅ& '
{
ÇÇ 	
this
ÉÉ 
.
ÉÉ 
NombreConcepto
ÉÉ 
=
ÉÉ  !
$str
ÉÉ" $
;
ÉÉ$ %
this
ÑÑ 
.
ÑÑ 
Cantidad
ÑÑ 
=
ÑÑ 
$num
ÑÑ 
.
ÑÑ 
ToString
ÑÑ &
(
ÑÑ& '
$str
ÑÑ' *
+
ÑÑ+ , 
AplicacionSettings
ÑÑ- ?
.
ÑÑ? @
Default
ÑÑ@ G
.
ÑÑG H'
NumeroDecimalesEnCantidad
ÑÑH a
)
ÑÑa b
;
ÑÑb c
this
ÖÖ 
.
ÖÖ 
PrecioUnitario
ÖÖ 
=
ÖÖ  !
$num
ÖÖ" #
.
ÖÖ# $
ToString
ÖÖ$ ,
(
ÖÖ, -
$str
ÖÖ- 0
+
ÖÖ1 2 
AplicacionSettings
ÖÖ3 E
.
ÖÖE F
Default
ÖÖF M
.
ÖÖM N%
NumeroDecimalesEnPrecio
ÖÖN e
)
ÖÖe f
;
ÖÖf g
this
ÜÜ 
.
ÜÜ 
Importe
ÜÜ 
=
ÜÜ 
$num
ÜÜ 
.
ÜÜ 
ToString
ÜÜ %
(
ÜÜ% &
$str
ÜÜ& *
)
ÜÜ* +
;
ÜÜ+ ,
}
áá 	
public
ää $
DetalleVentasViewModel
ää %
(
ää% &
VentaMonoDetalle
ää& 6
detalleVenta
ää7 C
)
ääC D
{
ãã 	
this
åå 
.
åå 
NombreConcepto
åå 
=
åå  !
detalleVenta
åå" .
!=
åå/ 1
null
åå2 6
?
åå7 8
detalleVenta
åå9 E
.
ååE F
NombreConcepto
ååF T
:
ååU V
$str
ååW Y
;
ååY Z
this
çç 
.
çç 
PrecioUnitario
çç 
=
çç  !
detalleVenta
çç" .
!=
çç/ 1
null
çç2 6
?
çç7 8
detalleVenta
çç9 E
.
ççE F
PrecioUnitario
ççF T
.
ççT U
ToString
ççU ]
(
çç] ^
$str
çç^ a
+
ççb c 
AplicacionSettings
ççd v
.
ççv w
Default
ççw ~
.
çç~ &
NumeroDecimalesEnPrecioçç ñ
)ççñ ó
:ççò ô
$numççö õ
.ççõ ú
ToStringççú §
(çç§ •
$strçç• ®
+çç© ™"
AplicacionSettingsçç´ Ω
.ççΩ æ
Defaultççæ ≈
.çç≈ ∆'
NumeroDecimalesEnPrecioçç∆ ›
)çç› ﬁ
;ççﬁ ﬂ
this
éé 
.
éé 
Cantidad
éé 
=
éé 
detalleVenta
éé (
!=
éé) +
null
éé, 0
?
éé1 2
detalleVenta
éé3 ?
.
éé? @
Cantidad
éé@ H
.
ééH I
ToString
ééI Q
(
ééQ R
$str
ééR U
+
ééV W 
AplicacionSettings
ééX j
.
ééj k
Default
éék r
.
éér s(
NumeroDecimalesEnCantidadéés å
)ééå ç
:ééé è
$numééê ë
.ééë í
ToStringééí ö
(ééö õ
$strééõ û
+ééü †"
AplicacionSettingséé° ≥
.éé≥ ¥
Defaultéé¥ ª
.ééª º)
NumeroDecimalesEnCantidadééº ’
)éé’ ÷
;éé÷ ◊
this
èè 
.
èè 
Importe
èè 
=
èè 
detalleVenta
èè '
!=
èè( *
null
èè+ /
?
èè0 1
(
èè2 3
detalleVenta
èè3 ?
.
èè? @
Cantidad
èè@ H
*
èèI J
detalleVenta
èèK W
.
èèW X
PrecioUnitario
èèX f
)
èèf g
.
èèg h
ToString
èèh p
(
èèp q
$str
èèq u
)
èèu v
:
èèw x
$num
èèy z
.
èèz {
ToStringèè{ É
(èèÉ Ñ
$strèèÑ à
)èèà â
;èèâ ä
}
êê 	
public
íí 
static
íí 
List
íí 
<
íí $
DetalleVentasViewModel
íí 1
>
íí1 2
Convert
íí3 :
(
íí: ;
List
íí; ?
<
íí? @
VentaMonoDetalle
íí@ P
>
ííP Q
detallesVenta
ííR _
)
íí_ `
{
ìì 	
List
îî 
<
îî $
DetalleVentasViewModel
îî '
>
îî' ($
detallesVentaViewModel
îî) ?
=
îî@ A
new
îîB E
List
îîF J
<
îîJ K$
DetalleVentasViewModel
îîK a
>
îîa b
(
îîb c
)
îîc d
;
îîd e
foreach
ïï 
(
ïï 
var
ïï 
item
ïï 
in
ïï  
detallesVenta
ïï! .
)
ïï. /
{
ññ $
detallesVentaViewModel
óó &
.
óó& '
Add
óó' *
(
óó* +
new
óó+ .$
DetalleVentasViewModel
óó/ E
(
óóE F
item
óóF J
)
óóJ K
)
óóK L
;
óóL M
}
òò 
return
ôô $
detallesVentaViewModel
ôô )
;
ôô) *
}
öö 	
}
õõ 
}úú ⁄
gD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Vinculo\BandejaCarteraDeClientesViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class -
!BandejaCarteraDeClientesViewModel 2
{ 
[ 	

DataMember	 
] 
public 
int 
	IdCartera 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string $
EstablecimientoComercial .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
CentroDeAtencion &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
CantidadClientes &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public -
!BandejaCarteraDeClientesViewModel 0
(0 1
)1 2
{ 	
} 	
public -
!BandejaCarteraDeClientesViewModel 0
(0 1
CarteraDeClientes1 B
carteraC J
)J K
{ 	
this 
. 
	IdCartera 
= 
cartera $
.$ %
centroDeAtencion% 5
.5 6
Id6 8
;8 9
this 
. $
EstablecimientoComercial )
=* +
cartera, 3
.3 4$
establecimientoComercial4 L
.L M
NombreInternoM Z
;Z [
this 
. 
CentroDeAtencion !
=" #
cartera$ +
.+ ,
centroDeAtencion, <
.< =
Nombre= C
;C D
this 
. 
CantidadClientes !
=" #
System$ *
.* +
Convert+ 2
.2 3
ToString3 ;
(; <
cartera< C
.C D
clientesD L
.L M
CountM R
(R S
)S T
)T U
+V W
$strX e
;e f
}   	
public"" 
static"" 
List"" 
<"" -
!BandejaCarteraDeClientesViewModel"" <
>""< =
Convert""> E
(""E F
List""F J
<""J K
CarteraDeClientes""K \
>""\ ]
carteras""^ f
)""f g
{## 	
List$$ 
<$$ -
!BandejaCarteraDeClientesViewModel$$ 2
>$$2 3
carterasViewModel$$4 E
=$$F G
new$$H K
List$$L P
<$$P Q-
!BandejaCarteraDeClientesViewModel$$Q r
>$$r s
($$s t
)$$t u
;$$u v
foreach&& 
(&& 
var&& 
item&& 
in&&  
carteras&&! )
)&&) *
{'' 
carterasViewModel(( !
.((! "
Add((" %
(((% &
new((& )-
!BandejaCarteraDeClientesViewModel((* K
(((K L
item((L P
)((P Q
)((Q R
;((R S
})) 
return** 
carterasViewModel** $
;**$ %
}++ 	
}-- 
}.. é#
[D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Vinculo\BandejaTurnoViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
.		, -
Turno		- 2
{

 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class !
BandejaTurnoViewModel &
{ 
[ 	

DataMember	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string $
EstablecimientoComercial .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
CentroDeAtencion &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
Empleado 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Usuario 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Desde 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Hasta 
{ 
get !
;! "
set# &
;& '
}( )
public !
BandejaTurnoViewModel $
($ %
)% &
{ 	
} 	
public !
BandejaTurnoViewModel $
($ %
TurnoDeEmpleado% 4
turno5 :
): ;
{ 	
this   
.   
Id   
=   
turno   
.   
Id   
;   
this!! 
.!! $
EstablecimientoComercial!! )
=!!* +
turno!!, 1
.!!1 2$
EstablecimientoComercial!!2 J
(!!J K
)!!K L
.!!L M
NombreInterno!!M Z
;!!Z [
this"" 
."" 
CentroDeAtencion"" !
=""" #
turno""$ )
."") *
CentroDeAtencion""* :
("": ;
)""; <
.""< =
Nombre""= C
;""C D
this## 
.## 
Empleado## 
=## 
turno## !
.##! "
Empleado##" *
(##* +
)##+ ,
.##, -
NombreCompleto##- ;
;##; <
this$$ 
.$$ 
Usuario$$ 
=$$ 
turno$$  
.$$  !
Empleado$$! )
($$) *
)$$* +
.$$+ ,
Correo$$, 2
($$2 3
)$$3 4
;$$4 5
this%% 
.%% 
Desde%% 
=%% 
turno%% 
.%% 
Desde%% $
(%%$ %
)%%% &
.%%& '
ToString%%' /
(%%/ 0
$str%%0 <
)%%< =
;%%= >
this&& 
.&& 
Hasta&& 
=&& 
turno&& 
.&& 
Hasta&& $
(&&$ %
)&&% &
.&&& '
ToString&&' /
(&&/ 0
$str&&0 <
)&&< =
;&&= >
}'' 	
public)) 
static)) 
List)) 
<)) !
BandejaTurnoViewModel)) 0
>))0 1
Convert))2 9
())9 :
List)): >
<))> ?
TurnoDeEmpleado))? N
>))N O
turnos))P V
)))V W
{** 	
List++ 
<++ !
BandejaTurnoViewModel++ &
>++& '
turnosViewModel++( 7
=++8 9
new++: =
List++> B
<++B C!
BandejaTurnoViewModel++C X
>++X Y
(++Y Z
)++Z [
;++[ \
foreach-- 
(-- 
var-- 
item-- 
in--  
turnos--! '
)--' (
{.. 
turnosViewModel// 
.//  
Add//  #
(//# $
new//$ '!
BandejaTurnoViewModel//( =
(//= >
item//> B
)//B C
)//C D
;//D E
}00 
return11 
turnosViewModel11 "
;11" #
}22 	
}44 
}55 ◊
gD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Vinculo\DetalleCarteraDeClientesViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class -
!DetalleCarteraDeClientesViewModel 2
{ 
[ 	

DataMember	 
] 
public 
int 
	IdCartera 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string $
EstablecimientoComercial .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
string 
CentroDeAtencion &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
List 
< 
string 
> 
Clientes $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public -
!DetalleCarteraDeClientesViewModel 0
(0 1
)1 2
{ 	
} 	
public -
!DetalleCarteraDeClientesViewModel 0
(0 1
CarteraDeClientes1 B
carteraC J
)J K
{ 	
this 
. 
	IdCartera 
= 
cartera $
.$ %
centroDeAtencion% 5
.5 6
Id6 8
;8 9
this 
. $
EstablecimientoComercial )
=* +
cartera, 3
.3 4$
establecimientoComercial4 L
.L M
NombreInternoM Z
;Z [
this 
. 
CentroDeAtencion !
=" #
cartera$ +
.+ ,
centroDeAtencion, <
.< =
Nombre= C
;C D
this 
. 
Clientes 
= 
cartera #
.# $
clientes$ ,
., -
Select- 3
(3 4
c4 5
=>6 8
c9 :
.: ;
RazonSocial; F
)F G
.G H
ToListH N
(N O
)O P
;P Q
} 	
}   
}!! ê
hD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Vinculo\RegistroCarteraDeClientesViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -
Turno- 2
{ 
public		 

class		 .
"RegistroCarteraDeClientesViewModel		 3
{

 
public 
int 
Id 
{ 
get 
; 
set !
;! "
}# $
public "
ComboGenericoViewModel %$
EstablecimientoComercial& >
{? @
getA D
;D E
setF I
;I J
}K L
public "
ComboGenericoViewModel %
CentroDeAtencion& 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public 
List 
< "
ComboGenericoViewModel *
>* +
Detalles, 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public .
"RegistroCarteraDeClientesViewModel 1
(1 2
)2 3
{ 	
} 	
public .
"RegistroCarteraDeClientesViewModel 1
(1 2
CarteraDeClientes2 C
carteraD K
)K L
{ 	
this 
. 
Id 
= 
cartera 
. 
centroDeAtencion .
.. /
Id/ 1
;1 2
this 
. $
EstablecimientoComercial )
=* +
new, /"
ComboGenericoViewModel0 F
(F G
carteraG N
.N O$
establecimientoComercialO g
.g h
Idh j
,j k
carteral s
.s t%
establecimientoComercial	t å
.
å ç
NombreInterno
ç ö
)
ö õ
;
õ ú
this 
. 
CentroDeAtencion !
=" #
new$ '"
ComboGenericoViewModel( >
(> ?
cartera? F
.F G
centroDeAtencionG W
.W X
IdX Z
,Z [
cartera\ c
.c d
centroDeAtenciond t
.t u
Nombreu {
){ |
;| }
this 
. 
Detalles 
= 
new 
List  $
<$ %"
ComboGenericoViewModel% ;
>; <
(< =
)= >
;> ?
foreach 
( 
var 
item 
in  
cartera! (
.( )
clientes) 1
)1 2
{ 
this 
. 
Detalles 
. 
Add !
(! "
new" %"
ComboGenericoViewModel& <
(< =
item= A
.A B
IdB D
,D E
itemF J
.J K
RazonSocialK V
)V W
)W X
;X Y
}   
}!! 	
}## 
}%% ∑
\D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Vinculo\RegistroTurnoViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -
Turno- 2
{ 
public		 

class		 "
RegistroTurnoViewModel		 '
{

 
public 
int 
Id 
{ 
get 
; 
set !
;! "
}# $
public "
ComboGenericoViewModel %$
EstablecimientoComercial& >
{? @
getA D
;D E
setF I
;I J
}K L
public "
ComboGenericoViewModel %
CentroDeAtencion& 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public "
ComboGenericoViewModel %
Empleado& .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DateTime 
Desde 
{ 
get  #
;# $
set% (
;( )
}* +
public 
DateTime 
Hasta 
{ 
get  #
;# $
set% (
;( )
}* +
public "
RegistroTurnoViewModel %
(% &
)& '
{ 	
} 	
public "
RegistroTurnoViewModel %
(% &
TurnoDeEmpleado& 5
turno6 ;
); <
{ 	
this 
. 
Id 
= 
turno 
. 
Id 
; 
this 
. $
EstablecimientoComercial )
=* +
new, /"
ComboGenericoViewModel0 F
(F G
turnoG L
.L M$
EstablecimientoComercialM e
(e f
)f g
.g h
Idh j
,j k
turnol q
.q r%
EstablecimientoComercial	r ä
(
ä ã
)
ã å
.
å ç
NombreInterno
ç ö
)
ö õ
;
õ ú
this 
. 
CentroDeAtencion !
=" #
new$ '"
ComboGenericoViewModel( >
(> ?
turno? D
.D E
CentroDeAtencionE U
(U V
)V W
.W X
IdX Z
,Z [
turno\ a
.a b
CentroDeAtencionb r
(r s
)s t
.t u
Nombreu {
){ |
;| }
this 
. 
Empleado 
= 
new "
ComboGenericoViewModel  6
(6 7
turno7 <
.< =
Empleado= E
(E F
)F G
.G H
IdH J
,J K
turnoL Q
.Q R
EmpleadoR Z
(Z [
)[ \
.\ ]
NombreCompleto] k
)k l
;l m
this 
. 
Desde 
= 
turno 
. 
Desde $
($ %
)% &
;& '
this 
. 
Hasta 
= 
turno 
. 
Hasta $
($ %
)% &
;& '
}!! 	
}## 
}%% Ù8
dD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\BandejaOrdenesCajaVentaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -
Venta- 2
{		 
[

 
Serializable

 
]

 
[ 
DataContract 
] 
public 

class ,
 BandejaOrdenesCajaVentaViewModel 1
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdVenta 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
TipoDocumento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
NombreDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
long 
IdTipoDocumento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
int 
	IdCliente 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Cliente 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Empleado 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Total 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public 
List 
< ,
 DetalleOrdenDeOperacionViewModel 4
>4 5
Detalles6 >
{? @
getA D
;D E
setF I
;I J
}K L
public ,
 BandejaOrdenesCajaVentaViewModel /
(/ 0
OrdenDeVenta0 <
orden= B
)B C
{ 	
this 
. 
Id 
= 
orden 
. 
Id 
; 
this   
.   
IdVenta   
=   
orden    
.    !
IdVenta  ! (
;  ( )
this!! 
.!! 
Fecha!! 
=!! 
orden!! 
.!! 

FechaOrden!! )
(!!) *
)!!* +
.!!+ ,
ToString!!, 4
(!!4 5
$str!!5 A
)!!A B
;!!B C
this"" 
."" 
TipoDocumento"" 
=""  
orden""! &
.""& '
Comprobante""' 2
(""2 3
)""3 4
.""4 5
NombreCortoTipo""5 D
+""E F
$str""F I
+""I J
orden""K P
.""P Q
Comprobante""Q \
(""\ ]
)""] ^
.""^ _
NumeroDeComprobante""_ r
==""s u
$str""v y
?""z {
orden	""| Å
.
""Å Ç
Comprobante
""Ç ç
(
""ç é
)
""é è
.
""è ê
NombreCortoTipo
""ê ü
+
""† °
$str
""¢ •
+
""¶ ß
orden
""® ≠
.
""≠ Æ
Comprobante
""Æ π
(
""π ∫
)
""∫ ª
.
""ª º
NumeroDeSerie
""º …
+
""  À
$str
""À Œ
+
""Œ œ
orden
""– ’
.
""’ ÷
Comprobante
""÷ ·
(
""· ‚
)
""‚ „
.
""„ ‰!
NumeroDeComprobante
""‰ ˜
:
""¯ ˘
orden
""˙ ˇ
.
""ˇ Ä
Comprobante
""Ä ã
(
""ã å
)
""å ç
.
""ç é
NombreCortoTipo
""é ù
;
""ù û
this## 
.## 
IdTipoDocumento##  
=##! "
orden### (
.##( )
Comprobante##) 4
(##4 5
)##5 6
.##6 7
SerieComprobante##7 G
(##G H
)##H I
.##I J
id##J L
;##L M
this$$ 
.$$ 
NombreDocumento$$  
=$$! "
orden$$# (
.$$( )
Comprobante$$) 4
($$4 5
)$$5 6
.$$6 7

NombreTipo$$7 A
;$$A B
this%% 
.%% 
	IdCliente%% 
=%% 
orden%% "
.%%" #
Cliente%%# *
(%%* +
)%%+ ,
.%%, -
Id%%- /
;%%/ 0
this&& 
.&& 
Cliente&& 
=&& 
orden&&  
.&&  !
Cliente&&! (
(&&( )
)&&) *
.&&* +
RazonSocial&&+ 6
;&&6 7
this'' 
.'' 
Empleado'' 
='' 
orden'' !
.''! "
Empleado''" *
(''* +
)''+ ,
.'', -
Nombres''- 4
;''4 5
this(( 
.(( 
Total(( 
=(( 
orden(( 
.(( 
Total(( $
.(($ %
ToString((% -
(((- .
$str((. 2
)((2 3
;((3 4
this)) 
.)) 
Estado)) 
=)) 
orden)) 
.))  
EstadoActual))  ,
()), -
)))- .
.)). /
nombre))/ 5
;))5 6
this** 
.** 
Detalles** 
=** ,
 DetalleOrdenDeOperacionViewModel** <
.**< =
Convert**= D
(**D E
orden**E J
.**J K
Detalles**K S
(**S T
)**T U
)**U V
;**V W
}++ 	
public-- 
static-- 
List-- 
<-- ,
 BandejaOrdenesCajaVentaViewModel-- ;
>--; <
Convert--= D
(--D E
List--E I
<--I J
OrdenDeVenta--J V
>--V W
ordenesDeVenta--X f
)--f g
{.. 	
List// 
<// ,
 BandejaOrdenesCajaVentaViewModel// 1
>//1 2
ordenes//3 :
=//; <
new//= @
List//A E
<//E F,
 BandejaOrdenesCajaVentaViewModel//F f
>//f g
(//g h
)//h i
;//i j
foreach00 
(00 
var00 
ordenDeVenta00 %
in00& (
ordenesDeVenta00) 7
)007 8
{11 
ordenes22 
.22 
Add22 
(22 
new22 ,
 BandejaOrdenesCajaVentaViewModel22  @
(22@ A
ordenDeVenta22A M
)22M N
)22N O
;22O P
}33 
return44 
ordenes44 
;44 
}55 	
}66 
}77 ò!
cD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\RegistroAnulacionVentaViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
public 

class +
RegistroAnulacionVentaViewModel 0
{ 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
Cliente 
{ 
get  #
;# $
set% (
;( )
}* +
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
IdMedioDePago  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
List 
< ,
 DetalleOrdenDeOperacionViewModel 4
>4 5
Detalles6 >
{? @
getA D
;D E
setF I
;I J
}K L
public 
string 
SubTotal 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Igv 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Total 
{ 
get !
;! "
set# &
;& '
}( )
public +
RegistroAnulacionVentaViewModel .
(. /
)/ 0
{ 	
} 	
public +
RegistroAnulacionVentaViewModel .
(. /
OrdenDeVenta/ ;
orden< A
)A B
{ 	
this 
. 
Id 
= 
orden 
. 
Id 
; 
this 
. 
Cliente 
= 
orden  
.  !
Cliente! (
(( )
)) *
.* +
RazonSocial+ 6
;6 7
this 
. 
IdMedioDePago 
=  
orden! &
.& '
Venta' ,
(, -
)- .
.. /
ObtenerPagos/ ;
(; <
)< =
.= >
First> C
(C D
)D E
.E F
TrazaDePagoF Q
(Q R
)R S
.S T
MedioDePagoT _
(_ `
)` a
.a b
idb d
;d e
this   
.   
Igv   
=   
orden   
.   
Igv    
(    !
)  ! "
.  " #
ToString  # +
(  + ,
$str  , 0
)  0 1
;  1 2
this!! 
.!! 
Total!! 
=!! 
orden!! 
.!! 
Total!! $
.!!$ %
ToString!!% -
(!!- .
$str!!. 2
)!!2 3
;!!3 4
this"" 
."" 
SubTotal"" 
="" 
("" 
System"" #
.""# $
Convert""$ +
.""+ ,
	ToDecimal"", 5
(""5 6
Total""6 ;
)""; <
-""= >
System""? E
.""E F
Convert""F M
.""M N
	ToDecimal""N W
(""W X
Igv""X [
)""[ \
)""\ ]
.""] ^
ToString""^ f
(""f g
$str""g k
)""k l
;""l m
this## 
.## 
Detalles## 
=## ,
 DetalleOrdenDeOperacionViewModel## <
.##< =
Convert##= D
(##D E
orden##E J
.##J K
Detalles##K S
(##S T
)##T U
)##U V
;##V W
}$$ 	
}%% 
}&& ˝c
dD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\RegistroDeVentasYCobrosViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public 

class ,
 RegistroDeVentasYCobrosViewModel 1
{ 
public 
DateTime 
Fecha 
{ 
get  #
;# $
set% (
;( )
}* +
public "
ComboGenericoViewModel %
PuntoDeVenta& 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public "
ComboGenericoViewModel %
Almacen& -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public "
ComboGenericoViewModel %
Caja& *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public "
ComboGenericoViewModel %
Cajero& ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public "
ComboGenericoViewModel %

Almacenero& 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public "
ComboGenericoViewModel %
Vendedor& .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
IEnumerable 
< /
#RegistroClienteVentaYCobroViewModel >
>> ?
Clientes@ H
{I J
getK N
;N O
setP S
;S T
}U V
public ,
 RegistroDeVentasYCobrosViewModel /
(/ 0
)0 1
{ 	
} 	
public 
static 
VentaMasiva !
ConvertVenta" .
(. /,
 RegistroDeVentasYCobrosViewModel/ O
ventasYCobrosP ]
)] ^
{ 	
List 
< 
VentaMonoDetalle !
>! "
detalles# +
=, -
new. 1
List2 6
<6 7
VentaMonoDetalle7 G
>G H
(H I
)I J
;J K
foreach   
(   
var   
cliente    
in  ! #
ventasYCobros  $ 1
.  1 2
Clientes  2 :
)  : ;
{!! 
var"" 
c"" 
="" 
cliente"" 
;""  
foreach## 
(## 
var## 
detalle## $
in##% '
c##( )
.##) *
Detalles##* 2
)##2 3
{$$ 
detalles%% 
.%% 
Add%%  
(%%  !
new%%! $
VentaMonoDetalle%%% 5
(%%5 6
)%%6 7
{&& 
	IdCliente'' !
=''" #
c''$ %
.''% &
Cliente''& -
.''- .
Id''. 0
,''0 1

IdConcepto(( "
=((# $
detalle((% ,
.((, -

IdConcepto((- 7
,((7 8
NombreConcepto)) &
=))' (
detalle))) 0
.))0 1
NombreConceto))1 >
,))> ?
Cantidad**  
=**! "
detalle**# *
.*** +
Cantidad**+ 3
,**3 4
PrecioUnitario++ &
=++' (
detalle++) 0
.++0 1
PrecioUnitario++1 ?
,++? @
Importe,, 
=,,  !
detalle,," )
.,,) *
Importe,,* 1
,,,1 2'
IdComprobantePredeterminado-- 3
=--4 5
c--6 7
.--7 8'
IdComprobantePredeterminado--8 S
,--S T
EsBien.. 
=..  
detalle..! (
...( )
EsBien..) /
,../ 0
MascaraDeCalculo// (
=//) *
detalle//+ 2
.//2 3
MascaraDeCalculo//3 C
}00 
)00 
;00 
}11 
}22 
return33 
new33 
VentaMasiva33 "
(33" #
ventasYCobros33# 0
.330 1
PuntoDeVenta331 =
.33= >
Id33> @
,33@ A
ventasYCobros33A N
.33N O
Almacen33O V
.33V W
Id33W Y
,33Y Z
ventasYCobros33Z g
.33g h

Almacenero33h r
.33r s
Id33s u
,33v w
ventasYCobros	33w Ñ
.
33Ñ Ö
Vendedor
33Ö ç
.
33ç é
Id
33é ê
,
33ê ë
ventasYCobros
33ë û
.
33û ü
Caja
33ü £
.
33£ §
Id
33§ ¶
,
33® ©
ventasYCobros
33© ∂
.
33∂ ∑
Cajero
33∑ Ω
.
33Ω æ
Id
33æ ¿
,
33¿ ¡
ventasYCobros
33¡ Œ
.
33Œ œ
Fecha
33œ ‘
,
33‘ ’
detalles
33÷ ﬁ
)
33ﬁ ﬂ
;
33ﬂ ‡
}44 	
public66 
static66 
CobranzaMasiva66 $
ConvertCobranza66% 4
(664 5,
 RegistroDeVentasYCobrosViewModel665 U
ventasYCobros66V c
)66c d
{77 	
List88 
<88 !
DetalleCobranzaMasiva88 &
>88& '
detalles88( 0
=881 2
new883 6
List887 ;
<88; <!
DetalleCobranzaMasiva88< Q
>88Q R
(88R S
)88S T
;88T U
foreach99 
(99 
var99 
item99 
in99  
ventasYCobros99! .
.99. /
Clientes99/ 7
)997 8
{:: 
detalles;; 
.;; 
Add;; 
(;; 
new;;  !
DetalleCobranzaMasiva;;! 6
(;;6 7
item;;7 ;
.;;; <
Cliente;;< C
.;;C D
Id;;D F
,;;F G
item;;H L
.;;L M
Cobro;;M R
);;R S
{;;T U
};;V W
);;W X
;;;X Y
}== 
return>> 
new>> 
CobranzaMasiva>> %
(>>% &
ventasYCobros>>& 3
.>>3 4
Caja>>4 8
.>>8 9
Id>>9 ;
,>>; <
ventasYCobros>>= J
.>>J K
Cajero>>K Q
.>>Q R
Id>>R T
,>>T U
ventasYCobros>>V c
.>>c d
Fecha>>d i
,>>i j
detalles>>k s
)>>s t
;>>t u
}?? 	
}AA 
}CC 
publicEE 

classEE /
#RegistroClienteVentaYCobroViewModelEE 4
{FF 
publicHH "
ComboGenericoViewModelHH %
ClienteHH& -
{HH. /
getHH0 3
;HH3 4
setHH5 8
;HH8 9
}HH: ;
publicII 
decimalII 
?II 
SaldoAnteriorII %
{II& '
getII( +
;II+ ,
setII- 0
;II0 1
}II2 3
publicJJ 
decimalJJ 
CobroJJ 
{JJ 
getJJ "
;JJ" #
setJJ$ '
;JJ' (
}JJ) *
publicKK 
decimalKK 
	DescuentoKK  
{KK! "
getKK# &
;KK& '
setKK( +
;KK+ ,
}KK- .
publicLL 
boolLL 
RealizaCanjeLL  
{LL! "
getLL# &
;LL& '
setLL( +
;LL+ ,
}LL- .
publicMM 
intMM 
IdComprobanteCanjeMM %
{MM& '
getMM( +
;MM+ ,
setMM- 0
;MM0 1
}MM2 3
publicNN 

decimalNN 
SaldoActualNN 
{NN  
getNN! $
;NN$ %
setNN& )
;NN) *
}NN+ ,
publicOO 
decimalOO 
ImporteTotalOO #
{OO$ %
getOO& )
;OO) *
setOO+ .
;OO. /
}OO0 1
publicPP 
IEnumerablePP 
<PP *
RegistroDetalleVentasViewModelPP 9
>PP9 :
DetallesPP; C
{PPD E
getPPF I
;PPI J
setPPK N
;PPN O
}PPP Q
publicQQ 
intQQ '
IdComprobantePredeterminadoQQ .
{QQ/ 0
getQQ1 4
;QQ4 5
setQQ6 9
;QQ9 :
}QQ; <
publicSS /
#RegistroClienteVentaYCobroViewModelSS 2
(SS2 3
)SS3 4
{TT 	
thisUU 
.UU 
DetallesUU 
=UU 
newUU 
ListUU  $
<UU$ %*
RegistroDetalleVentasViewModelUU% C
>UUC D
(UUD E
)UUE F
;UUF G
}VV 	
publicXX /
#RegistroClienteVentaYCobroViewModelXX 2
(XX2 3
Deuda_Actor_NegocioXX3 F
deudaXXG L
)XXL M
{YY 	
thisZZ 
.ZZ 
ClienteZZ 
=ZZ 
newZZ "
ComboGenericoViewModelZZ 5
(ZZ5 6
deudaZZ6 ;
.ZZ; <
ActorNegocioZZ< H
.ZZH I
idZZI K
,ZZK L
deudaZZM R
.ZZR S
ActorNegocioZZS _
.ZZ_ `
PrimerNombreZZ` l
.ZZl m
ReplaceZZm t
(ZZt u
$strZZu x
,ZZx y
$strZZz }
)ZZ} ~
)ZZ~ 
;	ZZ Ä
this[[ 
.[[ 
SaldoAnterior[[ 
=[[  
deuda[[! &
.[[& '
Deuda[[' ,
([[, -
)[[- .
;[[. /
this\\ 
.\\ 
Cobro\\ 
=\\ 
$num\\ 
;\\ 
this]] 
.]] 
SaldoActual]] 
=]] 
$num]]  
;]]  !
this^^ 
.^^ 
ImporteTotal^^ 
=^^ 
$num^^  !
;^^! "
this__ 
.__ 
Detalles__ 
=__ 
new__ 
List__! %
<__% &*
RegistroDetalleVentasViewModel__& D
>__D E
(__E F
)__F G
;__G H
this`` 
.`` '
IdComprobantePredeterminado`` ,
=``- .
deuda``/ 4
.``4 51
%IdTipoComprobantePredeterminadoEntero``5 Z
;``Z [
}aa 	
publiccc 
staticcc 
Listcc 
<cc /
#RegistroClienteVentaYCobroViewModelcc >
>cc> ?
Convertcc@ G
(ccG H
ListccH L
<ccL M
Deuda_Actor_NegocioccM `
>cc` a
clientesccb j
)ccj k
{dd 	
Listee 
<ee /
#RegistroClienteVentaYCobroViewModelee 4
>ee4 53
'registroDeDetalleVentasYCobrosViewModelee6 ]
=ee^ _
newee` c
Listeed h
<eeh i0
#RegistroClienteVentaYCobroViewModel	eei å
>
eeå ç
(
eeç é
)
eeé è
;
eeè ê
foreachff 
(ff 
varff 
itemff 
inff  
clientesff! )
)ff) *
{gg 3
'registroDeDetalleVentasYCobrosViewModelhh 7
.hh7 8
Addhh8 ;
(hh; <
newhh< ?/
#RegistroClienteVentaYCobroViewModelhh@ c
(hhc d
itemhhd h
)hhh i
)hhi j
;hhj k
}ii 
returnjj 3
'registroDeDetalleVentasYCobrosViewModeljj :
;jj: ;
}kk 	
}ll 
publicnn 

classnn *
RegistroDetalleVentasViewModelnn /
{oo 
publicpp 
intpp 

IdConceptopp 
{pp 
getpp  #
;pp# $
setpp% (
;pp( )
}pp* +
publicqq 
stringqq 
NombreConcetoqq #
{qq$ %
getqq& )
;qq) *
setqq+ .
;qq. /
}qq0 1
publicrr 
decimalrr 
Cantidadrr 
{rr  !
getrr" %
;rr% &
setrr' *
;rr* +
}rr, -
publicss 
decimalss 
PrecioUnitarioss %
{ss& '
getss( +
;ss+ ,
setss- 0
;ss0 1
}ss2 3
publictt 
decimaltt 
Importett 
{tt  
gettt! $
;tt$ %
settt& )
;tt) *
}tt+ ,
publicuu 
booluu 
EsBienuu 
{uu 
getuu  
;uu  !
setuu" %
;uu% &
}uu' (
publicvv 
stringvv 
MascaraDeCalculovv &
{vv' (
getvv) ,
;vv, -
setvv. 1
;vv1 2
}vv3 4
publicww *
RegistroDetalleVentasViewModelww -
(ww- .
)ww. /
{xx 	
}zz 	
}{{ √H
mD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\ReporteVentaDetalladoSinConceptoViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
public 

class 5
)ReporteVentaDetalladoSinConceptoViewModel :
{ 
public 
string 
CUO 
{ 
get 
;  
set! $
;$ %
}& '
public 
DateTime #
FechaEmisionComprobante /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
DateTime '
FechaVencimientoComprobante 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
string 
TipoComprobante %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
SerieComprobante &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
int 
NumeroComprobante $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string )
TipoDocumentoIdentidadCliente 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
string +
NumeroDocumentoIdentidadCliente 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
string 
RazonSocialCliente (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
decimal 
ValorExportacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
decimal  
BaseImponibleGravada +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
decimal !
ImporteTotalExonerada ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
decimal  
ImporteTotalInafecta +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
decimal 
ISC 
{ 
get  
;  !
set" %
;% &
}' (
public 
decimal 
IGVoIPM 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal &
TributosYCargosNoImponible 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
decimal #
ImporteTotalComprobante .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public   
decimal   

TipoCambio   !
{  " #
get  $ '
;  ' (
set  ) ,
;  , -
}  . /
public!! 
DateTime!! 
?!! $
FechaComprobanteModifica!! 1
{!!2 3
get!!4 7
;!!7 8
set!!9 <
;!!< =
}!!> ?
public"" 
string"" #
TipoComprobanteModifica"" -
{"". /
get""0 3
;""3 4
set""5 8
;""8 9
}"": ;
public## 
string## $
SerieComprobanteModifica## .
{##/ 0
get##1 4
;##4 5
set##6 9
;##9 :
}##; <
public$$ 
int$$ %
NumeroComprobanteModifica$$ ,
{$$- .
get$$/ 2
;$$2 3
set$$4 7
;$$7 8
}$$9 :
public&& 5
)ReporteVentaDetalladoSinConceptoViewModel&& 8
(&&8 9
)&&9 :
{'' 	
}(( 	
public** 5
)ReporteVentaDetalladoSinConceptoViewModel** 8
(**8 9
OperacionDeVenta**9 I
orden**J O
)**O P
{++ 	
CUO.. 
=.. 
$str.. 
;.. #
FechaEmisionComprobante// #
=//$ %
orden//& +
.//+ ,
FechaEmision//, 8
;//8 9'
FechaVencimientoComprobante00 '
=00( )
orden00* /
.00/ 0
FechaVencimiento000 @
;00@ A
TipoComprobante11 
=11 
orden11 #
.11# $
Comprobante11$ /
(11/ 0
)110 1
.111 2

CodigoTipo112 <
;11< =
SerieComprobante22 
=22 
orden22 $
.22$ %
Comprobante22% 0
(220 1
)221 2
.222 3
NumeroDeSerie223 @
;22@ A
NumeroComprobante33 
=33 
orden33  %
.33% &
Comprobante33& 1
(331 2
)332 3
.333 4
NumeroDeComprobante334 G
;33G H)
TipoDocumentoIdentidadCliente44 )
=44* +
orden44, 1
.441 24
(CodigoSunatTipoDocumentoIdentidadCliente442 Z
;44Z [+
NumeroDocumentoIdentidadCliente55 +
=55, -
orden55. 3
.553 4+
NumeroDocumentoIdentidadCliente554 S
;55S T
RazonSocialCliente66 
=66  
orden66! &
.66& '
ApellidosYNombres66' 8
;668 9
ValorExportacion77 
=77 
$num77  
;77  ! 
BaseImponibleGravada88  
=88! "
orden88# (
.88( )
EsInvalidada88) 5
?886 7
$num888 9
:88: ;
orden88< A
.88A B1
%BaseImponibleOperacionGravadaConSigno88B g
;88g h!
ImporteTotalExonerada99 !
=99" #
orden99$ )
.99) *
EsInvalidada99* 6
?997 8
$num999 :
:99; <
orden99= B
.99B C2
&ImporteTotalOperacionExoneradaConSigno99C i
;99i j 
ImporteTotalInafecta::  
=::! "
orden::# (
.::( ))
ImporteTotalOperacionInafecta::) F
;::F G
ISC;; 
=;; 
orden;; 
.;; 
EsInvalidada;; $
?;;% &
$num;;' (
:;;) *
orden;;+ 0
.;;0 1$
ImpuestoSelectivoConsumo;;1 I
;;;I J
IGVoIPM<< 
=<< 
orden<< 
.<< 
EsInvalidada<< (
?<<) *
$num<<+ ,
:<<- .
orden<</ 4
.<<4 5=
1ImpuestoGeneralVentasYOImpuestoPromocionMunicipal<<5 f
;<<f g&
TributosYCargosNoImponible== &
===' (
$num==) *
;==* +#
ImporteTotalComprobante>> #
=>>$ %
orden>>& +
.>>+ ,
EsInvalidada>>, 8
?>>9 :
$num>>; <
:>>= >
orden>>? D
.>>D E'
ImporteTotalComprobantePago>>E `
;>>` a

TipoCambio?? 
=?? 
orden?? 
.?? 
EsInvalidada?? +
???, -
$num??. /
:??0 1
orden??2 7
.??7 8
TipoDeCambio??8 D
;??D E$
FechaComprobanteModifica@@ $
=@@% &
orden@@' ,
.@@, -4
(FechaEmisionComprobantePagoQueSeModifica@@- U
;@@U V#
TipoComprobanteModificaAA #
=AA$ %
ordenAA& +
.AA+ ,,
 TipoComprobantePagoQueSeModificaAA, L
;AAL M$
SerieComprobanteModificaBB $
=BB% &
ordenBB' ,
.BB, -M
ANumeroSerieComprobantePagoQueSeModificaC√≥digoDependenciaAduaneraBB- m
;BBm n%
NumeroComprobanteModificaCC %
=CC& '
ordenCC( -
.CC- .8
,NumeroComprobantePagoQueSeModificaN√∫meroDUACC. Y
;CCY Z
}DD 	
publicHH 
staticHH 
ListHH 
<HH 5
)ReporteVentaDetalladoSinConceptoViewModelHH D
>HHD E
ConvertHHF M
(HHM N
ListHHN R
<HHR S
OperacionDeVentaHHS c
>HHc d
ordenesHHe l
)HHl m
{II 	
varJJ "
reporteVentaViewModelsJJ &
=JJ' (
newJJ) ,
ListJJ- 1
<JJ1 25
)ReporteVentaDetalladoSinConceptoViewModelJJ2 [
>JJ[ \
(JJ\ ]
)JJ] ^
;JJ^ _
foreachKK 
(KK 
varKK 

ordenVentaKK #
inKK$ &
ordenesKK' .
)KK. /
{LL "
reporteVentaViewModelsMM &
.MM& '
AddMM' *
(MM* +
newMM+ .5
)ReporteVentaDetalladoSinConceptoViewModelMM/ X
(MMX Y

ordenVentaMMY c
)MMc d
)MMd e
;MMe f
}OO 
returnPP "
reporteVentaViewModelsPP )
;PP) *
}QQ 	
}TT 
}UU ªs
bD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\ReporteVentaDetalladoViewModel.cs
	namespace

 	
Tsp


 
.

 
Sigescom

 
.

 
WebApplication

 %
.

% &
Models

& ,
{ 
[ 
Serializable 
] 
public 

class *
ReporteVentaDetalladoViewModel /
{ 
public 
string 
CUO 
{ 
get 
;  
set! $
;$ %
}& '
public 
DateTime #
FechaEmisionComprobante /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
DateTime '
FechaVencimientoComprobante 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
string 
TipoComprobante %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
SerieComprobante &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
int 
NumeroComprobante $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string )
TipoDocumentoIdentidadCliente 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
string +
NumeroDocumentoIdentidadCliente 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
string 
RazonSocialCliente (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
CodigoProducto $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
DescripcionProducto )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
decimal 
CantidadProducto '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
decimal "
PrecioUnitarioProducto -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
decimal 
ValorExportacion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
decimal  
BaseImponibleGravada +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
decimal !
ImporteTotalExonerada ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
decimal  
ImporteTotalInafecta +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public   
decimal   
ISC   
{   
get    
;    !
set  " %
;  % &
}  ' (
public!! 
decimal!! 
IGVoIPM!! 
{!!  
get!!! $
;!!$ %
set!!& )
;!!) *
}!!+ ,
public"" 
decimal"" 
Icbper"" 
{"" 
get""  #
;""# $
set""% (
;""( )
}""* +
public## 
decimal## &
TributosYCargosNoImponible## 1
{##2 3
get##4 7
;##7 8
set##9 <
;##< =
}##> ?
public$$ 
decimal$$ #
ImporteTotalComprobante$$ .
{$$/ 0
get$$1 4
;$$4 5
set$$6 9
;$$9 :
}$$; <
public%% 
decimal%% 

TipoCambio%% !
{%%" #
get%%$ '
;%%' (
set%%) ,
;%%, -
}%%. /
public&& 
DateTime&& 
?&& $
FechaComprobanteModifica&& 1
{&&2 3
get&&4 7
;&&7 8
set&&9 <
;&&< =
}&&> ?
public'' 
string'' #
TipoComprobanteModifica'' -
{''. /
get''0 3
;''3 4
set''5 8
;''8 9
}'': ;
public(( 
string(( $
SerieComprobanteModifica(( .
{((/ 0
get((1 4
;((4 5
set((6 9
;((9 :
}((; <
public)) 
int)) %
NumeroComprobanteModifica)) ,
{))- .
get))/ 2
;))2 3
set))4 7
;))7 8
}))9 :
public++ *
ReporteVentaDetalladoViewModel++ -
(++- .
)++. /
{,, 	
}-- 	
public// *
ReporteVentaDetalladoViewModel// -
(//- .
DetalleDeOperacion//. @
detalle//A H
,//H I
OperacionDeVenta//J Z
orden//[ `
)//` a
{00 	
var11 
esNotaDeCredito11 
=11  !
orden11" '
.11' (
Comprobante11( 3
(113 4
)114 5
.115 6
IdTipo116 <
==11= ?
MaestroSettings11@ O
.11O P
Default11P W
.11W X2
&IdDetalleMaestroComprobanteNotaCredito11X ~
;11~ 
CUO44 
=44 
$str44 
;44 #
FechaEmisionComprobante55 #
=55$ %
orden55& +
.55+ ,
FechaEmision55, 8
;558 9'
FechaVencimientoComprobante66 '
=66( )
orden66* /
.66/ 0
FechaVencimiento660 @
;66@ A
TipoComprobante77 
=77 
orden77 #
.77# $
Comprobante77$ /
(77/ 0
)770 1
.771 2

CodigoTipo772 <
;77< =
SerieComprobante88 
=88 
orden88 $
.88$ %
Comprobante88% 0
(880 1
)881 2
.882 3
NumeroDeSerie883 @
;88@ A
NumeroComprobante99 
=99 
orden99  %
.99% &
Comprobante99& 1
(991 2
)992 3
.993 4
NumeroDeComprobante994 G
;99G H)
TipoDocumentoIdentidadCliente:: )
=::* +
orden::, 1
.::1 24
(CodigoSunatTipoDocumentoIdentidadCliente::2 Z
;::Z [+
NumeroDocumentoIdentidadCliente;; +
=;;, -
orden;;. 3
.;;3 4+
NumeroDocumentoIdentidadCliente;;4 S
;;;S T
RazonSocialCliente<< 
=<<  
orden<<! &
.<<& '
ApellidosYNombres<<' 8
;<<8 9
CodigoProducto== 
=== 
detalle== $
.==$ %
Producto==% -
.==- .
CodigoBarra==. 9
;==9 :
DescripcionProducto>> 
=>>  !
detalle>>" )
.>>) *
Producto>>* 2
.>>2 3
Nombre>>3 9
;>>9 :
CantidadProducto?? 
=?? 
orden?? $
.??$ %
EsInvalidada??% 1
???2 3
$num??4 6
:??7 8
detalle??9 @
.??@ A
Cantidad??A I
;??I J"
PrecioUnitarioProducto@@ "
=@@# $
orden@@% *
.@@* +
EsInvalidada@@+ 7
?@@8 9
$num@@: <
:@@= >
detalle@@? F
.@@F G
PrecioUnitario@@G U
;@@U V
ValorExportacionAA 
=AA 
$numAA  
;AA  ! 
BaseImponibleGravadaBB  
=BB! "
ordenBB# (
.BB( )
EsInvalidadaBB) 5
?BB6 7
$numBB8 9
:BB: ;
detalleBB< C
.BBC D
IgvBBD G
>BBH I
$numBBJ K
?BBL M
esNotaDeCreditoBBN ]
?BB^ _
(BB` a
-BBa b
$numBBb c
)BBc d
*BBe f
detalleBBg n
.BBn o
ImporteBBo v
:BBw x
detalle	BBy Ä
.
BBÄ Å
Importe
BBÅ à
:
BBâ ä
$num
BBã å
;
BBå ç!
ImporteTotalExoneradaCC !
=CC" #
ordenCC$ )
.CC) *
EsInvalidadaCC* 6
?CC7 8
$numCC9 :
:CC; <
detalleCC= D
.CCD E
IgvCCE H
<=CCI K
$numCCL M
?CCN O
esNotaDeCreditoCCP _
?CC` a
(CCb c
-CCc d
$numCCd e
)CCe f
*CCg h
detalleCCi p
.CCp q
ImporteCCq x
:CCy z
detalle	CC{ Ç
.
CCÇ É
Importe
CCÉ ä
:
CCã å
$num
CCç é
;
CCé è 
ImporteTotalInafectaDD  
=DD! "
$numDD# $
;DD$ %
ISCEE 
=EE 
ordenEE 
.EE 
EsInvalidadaEE $
?EE% &
$numEE' (
:EE) *
esNotaDeCreditoEE+ :
?EE; <
(EE= >
-EE> ?
$numEE? @
)EE@ A
*EEB C
detalleEED K
.EEK L
IscEEL O
:EEP Q
detalleEER Y
.EEY Z
IscEEZ ]
;EE] ^
IGVoIPMFF 
=FF 
ordenFF 
.FF 
EsInvalidadaFF (
?FF) *
$numFF+ ,
:FF- .
esNotaDeCreditoFF/ >
?FF? @
(FFA B
-FFB C
$numFFC D
)FFD E
*FFF G
detalleFFH O
.FFO P
IgvFFP S
:FFT U
detalleFFV ]
.FF] ^
IgvFF^ a
;FFa b
IcbperGG 
=GG 
ordenGG 
.GG 
EsInvalidadaGG '
?GG( )
$numGG* +
:GG, -
esNotaDeCreditoGG. =
?GG> ?
(GG@ A
-GGA B
$numGGB C
)GGC D
*GGE F
(GGG H
(GGH I
MaestroSettingsGGI X
.GGX Y
DefaultGGY `
.GG` a8
+IdDetalleMaestroConceptoBasicoBolsaPlastica	GGa å
==
GGç è
detalle
GGê ó
.
GGó ò
Producto
GGò †
.
GG† °
IdConceptoBasico
GG° ±
)
GG± ≤
?
GG≥ ¥
detalle
GGµ º
.
GGº Ω
Cantidad
GGΩ ≈
*
GG∆ «
orden
GG» Õ
.
GGÕ Œ
ValorIcbper
GGŒ Ÿ
(
GGŸ ⁄
)
GG⁄ €
:
GG‹ ›
$num
GGﬁ ﬂ
)
GGﬂ ‡
:
GG· ‚
(
GG„ ‰
(
GG‰ Â
MaestroSettings
GGÂ Ù
.
GGÙ ı
Default
GGı ¸
.
GG¸ ˝9
+IdDetalleMaestroConceptoBasicoBolsaPlastica
GG˝ ®
==
GG© ´
detalle
GG¨ ≥
.
GG≥ ¥
Producto
GG¥ º
.
GGº Ω
IdConceptoBasico
GGΩ Õ
)
GGÕ Œ
?
GGœ –
detalle
GG— ÿ
.
GGÿ Ÿ
Cantidad
GGŸ ·
*
GG‚ „
orden
GG‰ È
.
GGÈ Í
ValorIcbper
GGÍ ı
(
GGı ˆ
)
GGˆ ˜
:
GG¯ ˘
$num
GG˙ ˚
)
GG˚ ¸
;
GG¸ ˝&
TributosYCargosNoImponibleHH &
=HH' (
$numHH) *
;HH* +#
ImporteTotalComprobanteII #
=II$ %
ordenII& +
.II+ ,
EsInvalidadaII, 8
?II9 :
$numII; <
:II= >
esNotaDeCreditoII? N
?IIO P
(IIQ R
-IIR S
$numIIS T
)IIT U
*IIV W
detalleIIX _
.II_ `
ImporteII` g
:IIh i
detalleIIj q
.IIq r
ImporteIIr y
;IIy z

TipoCambioJJ 
=JJ 
ordenJJ 
.JJ 
EsInvalidadaJJ +
?JJ, -
$numJJ. /
:JJ0 1
ordenJJ2 7
.JJ7 8
TipoDeCambioJJ8 D
;JJD E$
FechaComprobanteModificaKK $
=KK% &
ordenKK' ,
.KK, -4
(FechaEmisionComprobantePagoQueSeModificaKK- U
;KKU V#
TipoComprobanteModificaLL #
=LL$ %
ordenLL& +
.LL+ ,,
 TipoComprobantePagoQueSeModificaLL, L
;LLL M$
SerieComprobanteModificaMM $
=MM% &
ordenMM' ,
.MM, -M
ANumeroSerieComprobantePagoQueSeModificaC√≥digoDependenciaAduaneraMM- m
;MMm n%
NumeroComprobanteModificaNN %
=NN& '
ordenNN( -
.NN- .8
,NumeroComprobantePagoQueSeModificaN√∫meroDUANN. Y
;NNY Z
}OO 	
publicRR 
staticRR 
ListRR 
<RR *
ReporteVentaDetalladoViewModelRR 9
>RR9 :
ConvertRR; B
(RRB C
ListRRC G
<RRG H
OperacionDeVentaRRH X
>RRX Y
ordenesRRZ a
)RRa b
{SS 	
varTT "
reporteVentaViewModelsTT &
=TT' (
newTT) ,
ListTT- 1
<TT1 2*
ReporteVentaDetalladoViewModelTT2 P
>TTP Q
(TTQ R
)TTR S
;TTS T
foreachUU 
(UU 
varUU 

ordenVentaUU #
inUU$ &
ordenesUU' .
)UU. /
{VV "
reporteVentaViewModelsWW &
.WW& '
AddRangeWW' /
(WW/ 0*
ReporteVentaDetalladoViewModelWW0 N
.WWN O
ConvertWWO V
(WWV W

ordenVentaWWW a
)WWa b
)WWb c
;WWc d
}XX 
returnZZ "
reporteVentaViewModelsZZ )
;ZZ) *
}[[ 	
public]] 
static]] 
List]] 
<]] *
ReporteVentaDetalladoViewModel]] 9
>]]9 :
Convert]]; B
(]]B C
OperacionDeVenta]]C S
orden]]T Y
)]]Y Z
{^^ 	
var__ "
reporteVentaViewModels__ &
=__' (
new__) ,
List__- 1
<__1 2*
ReporteVentaDetalladoViewModel__2 P
>__P Q
(__Q R
)__R S
;__S T
foreach`` 
(`` 
var`` 
detalle``  
in``! #
orden``$ )
.``) *
Detalles``* 2
(``2 3
)``3 4
)``4 5
{aa "
reporteVentaViewModelsbb &
.bb& '
Addbb' *
(bb* +
newbb+ .*
ReporteVentaDetalladoViewModelbb/ M
(bbM N
detallebbN U
,bbU V
ordenbbW \
)bb\ ]
)bb] ^
;bb^ _
}cc 
returnee "
reporteVentaViewModelsee )
;ee) *
}ff 	
}gg 
}hh ∞&
jD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\ReporteVentaPorSerieYConceptoViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
public 

class 2
&ReporteVentaPorSerieYConceptoViewModel 7
{ 
public 
int 
IdSerie 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Serie 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
NombreCorto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
CodigoBarra !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Concepto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Cantidad 
{  !
get" %
;% &
set' *
;* +
}, -
public 
decimal 
PrecioUnitario %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 2
&ReporteVentaPorSerieYConceptoViewModel 5
(5 6
)6 7
{ 	
} 
public 2
&ReporteVentaPorSerieYConceptoViewModel 5
(5 6<
0Resumen_Transaccion_Por_Serie_y_Concepto_Negocio6 f

ordenVentag q
)q r
{ 	
this 
. 
IdSerie 
= 

ordenVenta %
.% &
IdSerie& -
;- .
this 
. 
Serie 
= 

ordenVenta #
.# $
Serie$ )
;) *
this   
.   
NombreCorto   
=   

ordenVenta   )
.  ) * 
NombreCortoDocumento  * >
;  > ?
this!! 
.!! 
CodigoBarra!! 
=!! 

ordenVenta!! )
.!!) *
CodigoBarra!!* 5
;!!5 6
this"" 
."" 
Concepto"" 
="" 

ordenVenta"" &
.""& '
ConceptoNegocio""' 6
;""6 7
this## 
.## 
Cantidad## 
=## 

ordenVenta## &
.##& '
Cantidad##' /
;##/ 0
this$$ 
.$$ 
PrecioUnitario$$ 
=$$  !

ordenVenta$$" ,
.$$, -
PrecioUnitario$$- ;
;$$; <
this%% 
.%% 
Importe%% 
=%% 

ordenVenta%% %
.%%% &
Importe%%& -
;%%- .
})) 
public++ 2
&ReporteVentaPorSerieYConceptoViewModel++ 5
(++5 6
long++6 :
id++; =
,++= >
DateTime++? G
fecha++H M
,++M N
string++O U
tipoDocumento++V c
,++c d
string++e k

ordenVenta++l v
,++v w
string++x ~
serie	++ Ñ
,
++Ñ Ö
string
++Ü å
numero
++ç ì
,
++ì î
decimal
++ï ú
importe
++ù §
,
++§ •
string
++• ´
razonSocial
++¨ ∑
)
++∑ ∏
{,, 	
}55 	
public77 
static77 
List77 
<77 2
&ReporteVentaPorSerieYConceptoViewModel77 A
>77A B
Convert77C J
(77J K
List77K O
<77O P=
0Resumen_Transaccion_Por_Serie_y_Concepto_Negocio	77P Ä
>
77Ä Å
ordenes
77Ç â
)
77â ä
{88 	
var99 "
reporteVentaViewModels99 &
=99' (
new99) ,
List99- 1
<991 22
&ReporteVentaPorSerieYConceptoViewModel992 X
>99X Y
(99Y Z
)99Z [
;99[ \
foreach:: 
(:: 
var:: 

ordenVenta:: #
in::$ &
ordenes::' .
)::. /
{;; "
reporteVentaViewModels<< &
.<<& '
Add<<' *
(<<* +
new<<+ .2
&ReporteVentaPorSerieYConceptoViewModel<</ U
(<<U V

ordenVenta<<V `
)<<` a
)<<a b
;<<b c
}== 
return?? "
reporteVentaViewModels?? )
;??) *
}@@ 	
}CC 
}DD ƒ$
pD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\ReporteVentaPorSerieYConceptoBasicoViewModel.cs
	namespace		 	
Tsp		
 
.		 
Sigescom		 
.		 
WebApplication		 %
.		% &
Models		& ,
{

 
[ 
Serializable 
] 
public 

class 8
,ReporteVentaPorSerieYConceptoBasicoViewModel =
{ 
public 
int 
IdSerie 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Serie 
{ 
get !
;! "
set# &
;& '
}( )
public 
string  
NombreCortoDocumento *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
string 
ConceptoBasico $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
decimal 
Cantidad 
{  !
get" %
;% &
set' *
;* +
}, -
public 
decimal 
PrecioUnitario %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 8
,ReporteVentaPorSerieYConceptoBasicoViewModel ;
(; <
)< =
{ 	
}
 
public 8
,ReporteVentaPorSerieYConceptoBasicoViewModel ;
(; <:
.Resumen_Transaccion_Por_Serie_y_ConceptoBasico< j

ordenVentak u
)u v
{ 	
this 
. 
IdSerie 
= 

ordenVenta %
.% &
IdSerie& -
;- .
this 
. 
Serie 
= 

ordenVenta #
.# $
Serie$ )
;) *
this 
.  
NombreCortoDocumento %
=& '

ordenVenta( 2
.2 3 
NombreCortoDocumento3 G
;G H
this 
. 
ConceptoBasico 
=  !

ordenVenta" ,
., -
ConceptoBasico- ;
;; <
this   
.   
Cantidad   
=   

ordenVenta   &
.  & '
Cantidad  ' /
;  / 0
this!! 
.!! 
PrecioUnitario!! 
=!!  !

ordenVenta!!" ,
.!!, -
PrecioUnitario!!- ;
;!!; <
this"" 
."" 
Importe"" 
="" 

ordenVenta"" %
.""% &
Importe""& -
;""- .
}$$ 
public&& 8
,ReporteVentaPorSerieYConceptoBasicoViewModel&& ;
(&&; <
long&&< @
id&&A C
,&&C D
DateTime&&E M
fecha&&N S
,&&S T
string&&U [
tipoDocumento&&\ i
,&&i j
string&&k q

ordenVenta&&r |
,&&| }
string	&&~ Ñ
serie
&&Ö ä
,
&&ä ã
string
&&å í
numero
&&ì ô
,
&&ô ö
decimal
&&õ ¢
importe
&&£ ™
,
&&™ ´
string
&&´ ±
razonSocial
&&≤ Ω
)
&&Ω æ
{'' 	
})) 	
public++ 
static++ 
List++ 
<++ 8
,ReporteVentaPorSerieYConceptoBasicoViewModel++ G
>++G H
Convert++H O
(++O P
List++P T
<++T U;
.Resumen_Transaccion_Por_Serie_y_ConceptoBasico	++U É
>
++É Ñ
ordenes
++Ö å
)
++å ç
{,, 	
var-- "
reporteVentaViewModels-- &
=--' (
new--) ,
List--- 1
<--1 28
,ReporteVentaPorSerieYConceptoBasicoViewModel--2 ^
>--^ _
(--_ `
)--` a
;--a b
foreach.. 
(.. 
var.. 

ordenVenta.. #
in..$ &
ordenes..' .
)... /
{// "
reporteVentaViewModels00 &
.00& '
Add00' *
(00* +
new00+ .8
,ReporteVentaPorSerieYConceptoBasicoViewModel00/ [
(00[ \

ordenVenta00\ f
)00f g
)00g h
;00h i
}11 
return33 "
reporteVentaViewModels33 )
;33) *
}44 	
}77 
}88 úT
YD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\BandejaVentaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[ 
Serializable 
] 
[ 
DataContract 
] 
public 

class !
BandejaVentaViewModel &
{ 
[ 	

DataMember	 
] 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
long 
IdVenta 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Fecha 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
TipoDocumento #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
CodigoDocumento %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Numero 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
	IdCliente 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Cliente 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Cajero 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Total 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
TipoDeVenta !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 

ModoDePago  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
EstaTransmitido %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public   
bool   $
EsAnulableConNotaInterna   ,
{  - .
get  / 2
;  2 3
set  4 7
;  7 8
}  9 :
public!! 
bool!! &
EsAnulableConNotaDeCredito!! .
{!!/ 0
get!!1 4
;!!4 5
set!!6 9
;!!9 :
}!!; <
public"" 
bool"" 
EsOrdenDeVenta"" "
{""# $
get""% (
;""( )
set""* -
;""- .
}""/ 0
public$$ !
BandejaVentaViewModel$$ $
($$$ %
OperacionDeVenta$$% 5
orden$$6 ;
)$$; <
{%% 	
this&& 
.&& 
Id&& 
=&& 
orden&& 
.&& 
Id&& 
;&& 
this'' 
.'' 
IdVenta'' 
='' 
orden''  
.''  !
IdVenta''! (
;''( )
this(( 
.(( 
Fecha(( 
=(( 
orden(( 
.(( 

FechaOrden(( )
((() *
)((* +
.((+ ,
ToString((, 4
(((4 5
$str((5 A
)((A B
;((B C
this)) 
.)) 
TipoDocumento)) 
=))  
orden))! &
.))& '
Comprobante))' 2
())2 3
)))3 4
.))4 5

NombreTipo))5 ?
;))? @
this** 
.** 
CodigoDocumento**  
=**! "
orden**# (
.**( )
Comprobante**) 4
(**4 5
)**5 6
.**6 7
Tipo**7 ;
(**; <
)**< =
.**= >
Codigo**> D
;**D E
this++ 
.++ 
Numero++ 
=++ 
orden++ 
.++  
Comprobante++  +
(+++ ,
)++, -
.++- .
NumeroDeSerie++. ;
+++< =
$str++> C
+++D E
orden++F K
.++K L
Comprobante++L W
(++W X
)++X Y
.++Y Z
NumeroDeComprobante++Z m
;++m n
this,, 
.,, 
	IdCliente,, 
=,, 
orden,, "
.,," #
Cliente,,# *
(,,* +
),,+ ,
.,,, -
Id,,- /
;,,/ 0
this-- 
.-- 
Cliente-- 
=-- 
TransaccionSettings-- .
.--. /
Default--/ 6
.--6 7)
MostrarAliasDeClienteGenerico--7 T
&&--U W
!--X Y
String--Y _
.--_ `
IsNullOrEmpty--` m
(--m n
orden--n s
.--s t
AliasCliente	--t Ä
(
--Ä Å
)
--Å Ç
)
--Ç É
?
--Ñ Ö
orden
--Ü ã
.
--ã å
Cliente
--å ì
(
--ì î
)
--î ï
.
--ï ñ
RazonSocial
--ñ °
+
--¢ £
$str
--§ ©
+
--™ ´
orden
--¨ ±
.
--± ≤
AliasCliente
--≤ æ
(
--æ ø
)
--ø ¿
:
--¡ ¬
orden
--√ »
.
--» …
Cliente
--… –
(
--– —
)
--— “
.
--“ ”
RazonSocial
--” ﬁ
;
--ﬁ ﬂ
this.. 
... 
Cajero.. 
=.. 
orden.. 
...  
Empleado..  (
(..( )
)..) *
...* +
NombreCompleto..+ 9
;..9 :
this// 
.// 
Total// 
=// 
orden// 
.// 
Total// $
.//$ %
ToString//% -
(//- .
$str//. 2
)//2 3
;//3 4
this00 
.00 
TipoDeVenta00 
=00 
	Enumerado00 (
.00( )
GetDescription00) 7
(007 8
orden008 =
.00= >
TipoDeVenta00> I
(00I J
)00J K
)00K L
;00L M
this11 
.11 
Estado11 
=11 
orden11 
.11  
EstadoActual11  ,
(11, -
)11- .
.11. /
nombre11/ 5
;115 6
this22 
.22 
EstaTransmitido22  
=22! "
orden22# (
.22( )
EstaTransmitido22) 8
(228 9
)229 :
?22; <
$str22= A
:22B C
$str22D H
;22H I
this33 
.33 $
EsAnulableConNotaInterna33 )
=33* +
orden33, 1
.331 2$
EsAnulableConNotaInterna332 J
(33J K
)33K L
;33L M
this44 
.44 &
EsAnulableConNotaDeCredito44 +
=44, -
orden44. 3
.443 4&
EsAnulableConNotaDeCredito444 N
(44N O
)44O P
;44P Q
this55 
.55 
EsOrdenDeVenta55 
=55  !
orden55" '
.55' (
EsOrdenDeVenta55( 6
(556 7
)557 8
;558 9
}66 	
public88 
static88 
List88 
<88 !
BandejaVentaViewModel88 0
>880 1
Convert_882 :
(88: ;
List88; ?
<88? @
OperacionDeVenta88@ P
>88P Q
operacionesDeVenta88R d
)88d e
{99 	
List:: 
<:: !
BandejaVentaViewModel:: &
>::& '
ordenes::( /
=::0 1
new::2 5
List::6 :
<::: ;!
BandejaVentaViewModel::; P
>::P Q
(::Q R
)::R S
;::S T
foreach;; 
(;; 
var;; 
operacionDeVenta;; )
in;;* ,
operacionesDeVenta;;- ?
);;? @
{<< 
ordenes== 
.== 
Add== 
(== 
new== !
BandejaVentaViewModel==  5
(==5 6
operacionDeVenta==6 F
)==F G
)==G H
;==H I
}>> 
return?? 
ordenes?? 
;?? 
}@@ 	
publicBB !
BandejaVentaViewModelBB $
(BB$ %
Resumen_VentaBB% 2
ventaBB3 8
)BB8 9
{CC 	
}PP 	
publicRR 
staticRR 
ListRR 
<RR !
BandejaVentaViewModelRR 0
>RR0 1
Convert_RR2 :
(RR: ;
ListRR; ?
<RR? @
Resumen_VentaRR@ M
>RRM N
resumesDeVentaRRO ]
)RR] ^
{SS 	
ListTT 
<TT !
BandejaVentaViewModelTT &
>TT& '
ventasTT( .
=TT/ 0
newTT1 4
ListTT5 9
<TT9 :!
BandejaVentaViewModelTT: O
>TTO P
(TTP Q
)TTQ R
;TTR S
foreachUU 
(UU 
varUU 
resumenUU  
inUU! #
resumesDeVentaUU$ 2
)UU2 3
{VV 
ventasWW 
.WW 
AddWW 
(WW 
newWW !
BandejaVentaViewModelWW 4
(WW4 5
resumenWW5 <
)WW< =
)WW= >
;WW> ?
}XX 
returnYY 
ventasYY 
;YY 
}ZZ 	
public\\ 
string\\ 
AliasCliente\\ "
(\\" #!
Parametro_transaccion\\# 8 
parametroTransaccion\\9 M
)\\M N
{]] 	
return^^  
parametroTransaccion^^ '
!=^^( *
null^^+ /
?^^0 1
$str^^2 5
+^^6 7
Convert^^8 ?
.^^? @
ToString^^@ H
(^^H I 
parametroTransaccion^^I ]
.^^] ^
valor^^^ c
)^^c d
+^^e f
$str^^g j
:^^k l
$str^^m o
;^^o p
}__ 	
publicaa 
stringaa 
RazonSocialaa !
(aa! "
Actoraa" '
actoraa( -
)aa- .
{bb 	
returncc 
actorcc 
.cc 
primer_nombrecc &
.cc& '
Replacecc' .
(cc. /
$strcc/ 2
,cc2 3
$strcc4 7
)cc7 8
;cc8 9
}dd 	
}ee 
}ff ≠
LD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\IdentityModels.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public

 

class

 
ApplicationUser

  
:

! "
IdentityUser

# /
{ 
public 
async 
Task 
< 
ClaimsIdentity (
>( )%
GenerateUserIdentityAsync* C
(C D
UserManagerD O
<O P
ApplicationUserP _
>_ `
managera h
)h i
{ 	
var 
userIdentity 
= 
await $
manager% ,
., -
CreateIdentityAsync- @
(@ A
thisA E
,E F&
DefaultAuthenticationTypesG a
.a b
ApplicationCookieb s
)s t
;t u
return 
userIdentity 
;  
} 	
} 
public 

class  
ApplicationDbContext %
:& '
IdentityDbContext( 9
<9 :
ApplicationUser: I
>I J
{ 
public  
ApplicationDbContext #
(# $
)$ %
: 
base 
( 
$str $
,$ %
throwIfV1Schema& 5
:5 6
false7 <
)< =
{ 	
} 	
public 
static  
ApplicationDbContext *
Create+ 1
(1 2
)2 3
{ 	
return 
new  
ApplicationDbContext +
(+ ,
), -
;- .
} 	
}   
}!! ç9
ND:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\ManageViewModels.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public 

class 
IndexViewModel 
{		 
public

 
bool

 
HasPassword

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
public 
IList 
< 
UserLoginInfo "
>" #
Logins$ *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
	TwoFactor 
{ 
get  #
;# $
set% (
;( )
}* +
public 
bool 
BrowserRemembered %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
public 

class !
ManageLoginsViewModel &
{ 
public 
IList 
< 
UserLoginInfo "
>" #
CurrentLogins$ 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
IList 
< %
AuthenticationDescription .
>. /
OtherLogins0 ;
{< =
get> A
;A B
setC F
;F G
}H I
} 
public 

class 
FactorViewModel  
{ 
public 
string 
Purpose 
{ 
get  #
;# $
set% (
;( )
}* +
} 
public 

class  
SetPasswordViewModel %
{ 
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
, 
ErrorMessage '
=( )
$str* _
,_ `
MinimumLengtha n
=o p
$numq r
)r s
]s t
[   	
DataType  	 
(   
DataType   
.   
Password   #
)  # $
]  $ %
[!! 	
Display!!	 
(!! 
Name!! 
=!! 
$str!! *
)!!* +
]!!+ ,
public"" 
string"" 
NewPassword"" !
{""" #
get""$ '
;""' (
set"") ,
;"", -
}"". /
[$$ 	
DataType$$	 
($$ 
DataType$$ 
.$$ 
Password$$ #
)$$# $
]$$$ %
[%% 	
Display%%	 
(%% 
Name%% 
=%% 
$str%% 6
)%%6 7
]%%7 8
[&& 	
Compare&&	 
(&& 
$str&& 
,&& 
ErrorMessage&&  ,
=&&- .
$str&&/ r
)&&r s
]&&s t
public'' 
string'' 
ConfirmPassword'' %
{''& '
get''( +
;''+ ,
set''- 0
;''0 1
}''2 3
}(( 
public** 

class** #
ChangePasswordViewModel** (
{++ 
[,, 	
Required,,	 
],, 
[-- 	
DataType--	 
(-- 
DataType-- 
.-- 
Password-- #
)--# $
]--$ %
[.. 	
Display..	 
(.. 
Name.. 
=.. 
$str.. +
)..+ ,
].., -
public// 
string// 
OldPassword// !
{//" #
get//$ '
;//' (
set//) ,
;//, -
}//. /
[11 	
Required11	 
]11 
[22 	
StringLength22	 
(22 
$num22 
,22 
ErrorMessage22 '
=22( )
$str22* _
,22_ `
MinimumLength22a n
=22o p
$num22q r
)22r s
]22s t
[33 	
DataType33	 
(33 
DataType33 
.33 
Password33 #
)33# $
]33$ %
[44 	
Display44	 
(44 
Name44 
=44 
$str44 *
)44* +
]44+ ,
public55 
string55 
NewPassword55 !
{55" #
get55$ '
;55' (
set55) ,
;55, -
}55. /
[77 	
DataType77	 
(77 
DataType77 
.77 
Password77 #
)77# $
]77$ %
[88 	
Display88	 
(88 
Name88 
=88 
$str88 6
)886 7
]887 8
[99 	
Compare99	 
(99 
$str99 
,99 
ErrorMessage99  ,
=99- .
$str99/ r
)99r s
]99s t
public:: 
string:: 
ConfirmPassword:: %
{::& '
get::( +
;::+ ,
set::- 0
;::0 1
}::2 3
};; 
public== 

class== #
AddPhoneNumberViewModel== (
{>> 
[?? 	
Required??	 
]?? 
[@@ 	
Phone@@	 
]@@ 
[AA 	
DisplayAA	 
(AA 
NameAA 
=AA 
$strAA ,
)AA, -
]AA- .
publicBB 
stringBB 
NumberBB 
{BB 
getBB "
;BB" #
setBB$ '
;BB' (
}BB) *
}CC 
publicEE 

classEE &
VerifyPhoneNumberViewModelEE +
{FF 
[GG 	
RequiredGG	 
]GG 
[HH 	
DisplayHH	 
(HH 
NameHH 
=HH 
$strHH  
)HH  !
]HH! "
publicII 
stringII 
CodeII 
{II 
getII  
;II  !
setII" %
;II% &
}II' (
[KK 	
RequiredKK	 
]KK 
[LL 	
PhoneLL	 
]LL 
[MM 	
DisplayMM	 
(MM 
NameMM 
=MM 
$strMM ,
)MM, -
]MM- .
publicNN 
stringNN 
PhoneNumberNN !
{NN" #
getNN$ '
;NN' (
setNN) ,
;NN, -
}NN. /
}OO 
publicQQ 

classQQ '
ConfigureTwoFactorViewModelQQ ,
{RR 
publicSS 
stringSS 
SelectedProviderSS &
{SS' (
getSS) ,
;SS, -
setSS. 1
;SS1 2
}SS3 4
publicTT 
ICollectionTT 
<TT 
SystemTT !
.TT! "
WebTT" %
.TT% &
MvcTT& )
.TT) *
SelectListItemTT* 8
>TT8 9
	ProvidersTT: C
{TTD E
getTTF I
;TTI J
setTTK N
;TTN O
}TTP Q
}UU 
}VV è-
JD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\UserRolesDTO.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public 

class 
ExpandedUserDTO  
{ 
[		 	
Key			 
]		 
[

 	
Display

	 
(

 
Name

 
=

 
$str

 !
)

! "
]

" #
[ 	
Required	 
( 
ErrorMessage 
=  
$str! $
)$ %
]% &
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! %
)% &
]& '
[ 	
Display	 
( 
Name 
= 
$str  
)  !
]! "
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Display	 
( 
Name 
= 
$str 
)  
]  !
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Display	 
( 
Name 
= 
$str +
)+ ,
], -
public 
DateTime 
? 
LockoutEndDateUtc *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
int 
AccessFailedCount $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
IEnumerable 
< 
UserRolesDTO '
>' (
Roles) .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
int 

IdEmpleado 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
NombreEmpleado $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
	IdUsuario 
{  !
get" %
;% &
set' *
;* +
}, -
public 
bool 
EsUsuarioPrincipal &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
NombresRoles "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
ExpandedUserDTO 
( 
)  
{! "
}# $
} 
public   

class   
UserRolesDTO   
{!! 
["" 	
Key""	 
]"" 
[## 	
Display##	 
(## 
Name## 
=## 
$str## #
)### $
]##$ %
public$$ 
string$$ 
RoleName$$ 
{$$  
get$$! $
;$$$ %
set$$& )
;$$) *
}$$+ ,
public&& 
UserRolesDTO&& 
(&& 
)&& 
{&& 
}&&  !
}'' 
public)) 

class)) 
UserRoleDTO)) 
{** 
[++ 	
Key++	 
]++ 
[,, 	
Display,,	 
(,, 
Name,, 
=,, 
$str,, #
),,# $
],,$ %
public-- 
string-- 
UserName-- 
{--  
get--! $
;--$ %
set--& )
;--) *
}--+ ,
[.. 	
Display..	 
(.. 
Name.. 
=.. 
$str.. #
)..# $
]..$ %
public// 
string// 
RoleName// 
{//  
get//! $
;//$ %
set//& )
;//) *
}//+ ,
}00 
public22 

class22 
RoleDTO22 
{33 
[44 	
Key44	 
]44 
public55 
string55 
Id55 
{55 
get55 
;55 
set55  #
;55# $
}55% &
[66 	
Display66	 
(66 
Name66 
=66 
$str66 
)66 
]66 
public77 
string77 
RoleName77 
{77  
get77! $
;77$ %
set77& )
;77) *
}77+ ,
}88 
public:: 

class:: 
UserAndRolesDTO::  
{;; 
[<< 	
Key<<	 
]<< 
[== 	
Display==	 
(== 
Name== 
=== 
$str== #
)==# $
]==$ %
public>> 
string>> 
UserName>> 
{>>  
get>>! $
;>>$ %
set>>& )
;>>) *
}>>+ ,
public?? 
List?? 
<?? 
UserRoleDTO?? 
>??  
colUserRoleDTO??! /
{??0 1
get??2 5
;??5 6
set??7 :
;??: ;
}??< =
}@@ 
}AA ¿
_D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\RegistroOrdenVentaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
., -
Venta- 2
{ 
public 

class '
RegistroOrdenVentaViewModel ,
{		 
public

 
long

 
Id

 
{

 
get

 
;

 
set

 !
;

! "
}

# $
public (
ComboActorComercialViewModel +
Cliente, 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public "
ComboGenericoViewModel %
TipoDeComprobante& 7
{8 9
get: =
;= >
set? B
;B C
}D E
public "
ComboGenericoViewModel %
SerieDeComprobante& 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
DateTime 
FechaRegistro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
IEnumerable 
< )
RegistroDetalleVentaViewModel 8
>8 9
Detalles: B
{C D
getE H
;H I
setJ M
;M N
}O P
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
public 

class .
"ConfirmadoYPagoOrdenVentaViewModel 3
{ 
public 
int 
IdMedioDePago  
{! "
get# &
;& '
set( +
;+ ,
}- .
public "
ComboGenericoViewModel %
EntidadFinanciera& 7
{8 9
get: =
;= >
set? B
;B C
}D E
public "
ComboGenericoViewModel %
TipoTarjeta& 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
string "
InformacionDeMedioPago ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} ”∑
[D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\RegistroVentaViewModels.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
public 

class "
RegistroVentaViewModel '
{ 
public 
long 
IdVenta 
{ 
get !
;! "
set# &
;& '
}( )
public 
bool 
GrabaIgv 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
DetalleUnificado $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
bool 
EsVentaPasada !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
EsVentaACredito #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
bool 
EsCreditoRapido #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
bool  
HayRegistroTrazaPago (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool +
HayRegistroMovimientoMercaderia 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
bool 
UsaComprobanteOrden '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
Alias 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Observacion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
Inicial 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Flete 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
FechaRegistro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public (
ComboActorComercialViewModel +
Cliente, 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public %
SelectorTipoDeComprobante (
TipoDeComprobante) :
{; <
get= @
;@ A
setB E
;E F
}G H
public   
IEnumerable   
<   2
&RegistroDetalleFinanciamientoViewModel   A
>  A B
Cuotas  C I
{  J K
get  L O
;  O P
set  Q T
;  T U
}  V W
public!! 
IEnumerable!! 
<!! )
RegistroDetalleVentaViewModel!! 8
>!!8 9
Detalles!!: B
{!!C D
get!!E H
;!!H I
set!!J M
;!!M N
}!!O P
public## 
int## 
IdMedioDePago##  
{##! "
get### &
;##& '
set##( +
;##+ ,
}##- .
public$$ 
string$$ "
InformacionDeMedioPago$$ ,
{$$- .
get$$/ 2
;$$2 3
set$$4 7
;$$7 8
}$$9 :
public%% "
ComboGenericoViewModel%% %
EntidadFinanciera%%& 7
{%%8 9
get%%: =
;%%= >
set%%? B
;%%B C
}%%D E
public&& "
ComboGenericoViewModel&& %
TipoTarjeta&&& 1
{&&2 3
get&&4 7
;&&7 8
set&&9 <
;&&< =
}&&> ?
public'' 
bool'' !
HaySalidaDeMercaderia'' )
{''* +
get'', /
;''/ 0
set''1 4
;''4 5
}''6 7
public(( 
IEnumerable(( 
<(( 0
$RegistroMovimientoDeAlmacenViewModel(( ?
>((? @
SalidasDeMercaderia((A T
{((U V
get((W Z
;((Z [
set((\ _
;((_ `
}((a b
public)) 
int)) "
NumeroBolsasDePlastico)) )
{))* +
get)), /
;))/ 0
set))1 4
;))4 5
}))6 7
public** 
decimal** 
Icbper** 
{** 
get**  #
;**# $
set**% (
;**( )
}*** +
public-- "
ComboGenericoViewModel-- %
PuntoDeVenta--& 2
{--3 4
get--5 8
;--8 9
set--: =
;--= >
}--? @
public.. "
ComboGenericoViewModel.. %
Almacen..& -
{... /
get..0 3
;..3 4
set..5 8
;..8 9
}..: ;
public// "
ComboGenericoViewModel// %
Caja//& *
{//+ ,
get//- 0
;//0 1
set//2 5
;//5 6
}//7 8
public00 "
ComboGenericoViewModel00 %
Vendedor00& .
{00/ 0
get001 4
;004 5
set006 9
;009 :
}00; <
public11 "
ComboGenericoViewModel11 %
Cajero11& ,
{11- .
get11/ 2
;112 3
set114 7
;117 8
}119 :
public22 "
ComboGenericoViewModel22 %

Almacenero22& 0
{221 2
get223 6
;226 7
set228 ;
;22; <
}22= >
public55 "
RegistroVentaViewModel55 %
(55% &
)55& '
{66 	
}77 	
public99 "
RegistroVentaViewModel99 %
(99% &
OrdenDeVenta99& 2
ordenDeVenta993 ?
,99? @
List99A E
<99E F%
SelectorTipoDeComprobante99F _
>99_ `
selectorComprobante99a t
)99t u
{:: 	
this;; 
.;; 
IdVenta;; 
=;; 
ordenDeVenta;; '
.;;' (
IdVenta;;( /
;;;/ 0
this<< 
.<< 
Cliente<< 
=<< 
new<< (
ComboActorComercialViewModel<< ;
(<<; <
ordenDeVenta<<< H
.<<H I
Cliente<<I P
(<<P Q
)<<Q R
.<<R S
Id<<S U
,<<U V
ordenDeVenta<<W c
.<<c d
Cliente<<d k
(<<k l
)<<l m
.<<m n
RazonSocial<<n y
,<<y z
ordenDeVenta	<<{ á
.
<<á à
Cliente
<<à è
(
<<è ê
)
<<ê ë
.
<<ë í 
DocumentoIdentidad
<<í §
)
<<§ •
;
<<• ¶
this== 
.== 
Alias== 
=== 
ordenDeVenta== %
.==% &
AliasCliente==& 2
(==2 3
)==3 4
;==4 5
this>> 
.>> 
TipoDeComprobante>> "
=>># $
selectorComprobante>>% 8
.>>8 9
SingleOrDefault>>9 H
(>>H I
sc>>I K
=>>>L N
sc>>O Q
.>>Q R
TipoComprobante>>R a
.>>a b
Id>>b d
==>>e g
ordenDeVenta>>h t
.>>t u
Comprobante	>>u Ä
(
>>Ä Å
)
>>Å Ç
.
>>Ç É
IdTipo
>>É â
)
>>â ä
;
>>ä ã
if?? 
(?? 
ordenDeVenta?? 
.?? 
Comprobante?? (
(??( )
)??) *
.??* +
IdSerie??+ 2
==??3 5
null??6 :
)??: ;
{@@ 
TipoDeComprobanteAA !
.AA! "
SerieIngresadaAA" 0
=AA1 2
ordenDeVentaAA3 ?
.AA? @
ComprobanteAA@ K
(AAK L
)AAL M
.AAM N
NumeroDeSerieAAN [
;AA[ \
TipoDeComprobanteBB !
.BB! "
NumeroIngresadoBB" 1
=BB2 3
ordenDeVentaBB4 @
.BB@ A
ComprobanteBBA L
(BBL M
)BBM N
.BBN O
NumeroDeComprobanteBBO b
;BBb c
}CC 
elseDD 
{EE 
ifFF 
(FF 
TipoDeComprobanteFF %
.FF% &
SeriesFF& ,
.FF, -
CountFF- 2
(FF2 3
)FF3 4
>FF5 6
$numFF7 8
)FF8 9
{FF: ;
TipoDeComprobanteFF< M
.FFM N
SerieSeleccionadaFFN _
=FF` a
(FFb c
intFFc f
)FFf g
ordenDeVentaFFg s
.FFs t
ComprobanteFFt 
(	FF Ä
)
FFÄ Å
.
FFÅ Ç
IdSerie
FFÇ â
;
FFâ ä
}
FFã å
elseGG 
{GG 
TipoDeComprobanteGG (
.GG( )
SerieSeleccionadaGG) :
=GG; <
$numGG= >
;GG> ?
}GG@ A
}HH 
thisII 
.II 
TipoDeComprobanteII "
.II" #
IdComprobanteII# 0
=II1 2
ordenDeVentaII3 ?
.II? @
ComprobanteII@ K
(IIK L
)IIL M
.IIM N
IdIIN P
;IIP Q
thisJJ 
.JJ 
FechaRegistroJJ 
=JJ  
ordenDeVentaJJ! -
.JJ- .
FechaEmisionJJ. :
;JJ: ;
thisKK 
.KK 
ObservacionKK 
=KK 
ordenDeVentaKK +
.KK+ ,

ComentarioKK, 6
;KK6 7
thisLL 
.LL 
GrabaIgvLL 
=LL 
(LL 
ordenDeVentaLL )
.LL) *
IgvLL* -
(LL- .
)LL. /
>LL0 1
$numLL2 3
)LL3 4
?LL5 6
trueLL7 ;
:LL< =
falseLL> C
;LLC D
thisMM 
.MM 
DetalleUnificadoMM !
=MM" #
trueMM$ (
;MM( )
thisNN 
.NN 
EsVentaACreditoNN  
=NN! "
ConvertNN# *
.NN* +
ToInt32NN+ 2
(NN2 3
ordenDeVentaNN3 ?
.NN? @

ModoDePagoNN@ J
(NNJ K
)NNK L
)NNL M
==NNN P
$numNNQ R
?NNS T
falseNNU Z
:NN[ \
trueNN] a
;NNa b
ifOO 
(OO 
EsVentaACreditoOO 
)OO  
{OO! "
thisOO# '
.OO' (
EsCreditoRapidoOO( 7
=OO8 9
ConvertOO: A
.OOA B
ToInt32OOB I
(OOI J
ordenDeVentaOOJ V
.OOV W

ModoDePagoOOW a
(OOa b
)OOb c
)OOc d
==OOe g
$numOOh i
?OOj k
falseOOl q
:OOr s
trueOOt x
;OOx y
}OOz {
thisPP 
.PP 
CuotasPP 
=PP 2
&RegistroDetalleFinanciamientoViewModelPP @
.PP@ A
Convert_PPA I
(PPI J
ordenDeVentaPPJ V
.PPV W
CuotasPPW ]
(PP] ^
)PP^ _
)PP_ `
;PP` a
thisQQ 
.QQ 
InicialQQ 
=QQ 
ordenDeVentaQQ '
.QQ' (
CuotasQQ( .
(QQ. /
)QQ/ 0
.QQ0 1
SingleOrDefaultQQ1 @
(QQ@ A
cQQA B
=>QQC E
cQQF G
.QQG H
cuota_inicialQQH U
==QQV X
trueQQY ]
)QQ] ^
==QQ_ a
nullQQb f
?QQg h
$numQQi j
:QQk l
ordenDeVentaQQm y
.QQy z
Cuotas	QQz Ä
(
QQÄ Å
)
QQÅ Ç
.
QQÇ É
SingleOrDefault
QQÉ í
(
QQí ì
c
QQì î
=>
QQï ó
c
QQò ô
.
QQô ö
cuota_inicial
QQö ß
==
QQ® ™
true
QQ´ Ø
)
QQØ ∞
.
QQ∞ ±
saldo
QQ± ∂
;
QQ∂ ∑
thisRR 
.RR 
FleteRR 
=RR 
ordenDeVentaRR %
.RR% &
FleteRR& +
;RR+ ,
thisSS 
.SS 
DetallesSS 
=SS )
RegistroDetalleVentaViewModelSS 9
.SS9 :
Convert_SS: B
(SSB C
ordenDeVentaSSC O
.SSO P
DetallesSSP X
(SSX Y
)SSY Z
.SSZ [
WhereSS[ `
(SS` a
dSSa b
=>SSc e
dSSf g
.SSg h
DetalleTransaccionSSh z
(SSz {
)SS{ |
.SS| } 
id_concepto_negocio	SS} ê
!=
SSë ì
ConceptoSettings
SSî §
.
SS§ •
Default
SS• ¨
.
SS¨ ≠$
IdConceptoNegocioFlete
SS≠ √
)
SS√ ƒ
.
SSƒ ≈
ToList
SS≈ À
(
SSÀ Ã
)
SSÃ Õ
)
SSÕ Œ
;
SSŒ œ
}TT 	
}UU 
publicWW 

classWW )
RegistroDetalleVentaViewModelWW .
{XX 
publicYY 
longYY 
	IdDetalleYY 
{YY 
getYY  #
;YY# $
setYY% (
;YY( )
}YY* +
publicZZ 
intZZ 
IdPrecioUnitarioZZ #
{ZZ$ %
getZZ& )
;ZZ) *
setZZ+ .
;ZZ. /
}ZZ0 1
public[[ &
ProductoParaVentaViewModel[[ )
Producto[[* 2
{[[3 4
get[[5 8
;[[8 9
set[[: =
;[[= >
}[[? @
public\\ 
bool\\  
PrecioCalculadoVenta\\ (
{\\) *
get\\+ .
;\\. /
set\\0 3
;\\3 4
}\\5 6
public]] 
string]] 
VersionFila]] !
{]]" #
get]]$ '
;]]' (
set]]) ,
;]], -
}]]. /
public^^ 
string^^ 
Observacion^^ !
{^^" #
get^^$ '
;^^' (
set^^) ,
;^^, -
}^^. /
public__ 
string__ 
Lote__ 
{__ 
get__  
;__  !
set__" %
;__% &
}__' (
public`` 
string`` 
Registro`` 
{``  
get``! $
;``$ %
set``& )
;``) *
}``+ ,
publicaa 
decimalaa 
Stockaa 
{aa 
getaa "
;aa" #
setaa$ '
;aa' (
}aa) *
publicbb 
decimalbb 
PrecioUnitariobb %
{bb& '
getbb( +
;bb+ ,
setbb- 0
;bb0 1
}bb2 3
publiccc 
decimalcc 
Cantidadcc 
{cc  !
getcc" %
;cc% &
setcc' *
;cc* +
}cc, -
publicdd 
decimaldd 
Importedd 
{dd  
getdd! $
;dd$ %
setdd& )
;dd) *
}dd+ ,
publicee 
decimalee 
Igvee 
{ee 
getee  
;ee  !
setee" %
;ee% &
}ee' (
publicff 
decimalff 
	Descuentoff  
{ff! "
getff# &
;ff& '
setff( +
;ff+ ,
}ff- .
publicgg 
DateTimegg 
?gg 
Vencimientogg $
{gg% &
getgg' *
;gg* +
setgg, /
;gg/ 0
}gg1 2
publichh 
stringhh 
MascaraDeCalculohh &
{hh' (
gethh) ,
;hh, -
sethh. 1
;hh1 2
}hh3 4
publicii '
Concepto_Negocio_Comercial_ii *
ConceptoCompletoii+ ;
{ii< =
getii> A
;iiA B
setiiC F
;iiF G
}iiH I
publickk )
RegistroDetalleVentaViewModelkk ,
(kk, -
)kk- .
{ll 	
}mm 	
publicoo )
RegistroDetalleVentaViewModeloo ,
(oo, -
DetalleDeOperacionoo- ?
detalleoo@ G
)ooG H
{pp 	
	IdDetalleqq 
=qq 
detalleqq 
.qq  
Idqq  "
;qq" #
ConceptoDeNegociorr 
productorr &
=rr' (
newrr) ,
ConceptoDeNegociorr- >
(rr> ?
detallerr? F
.rrF G
DetalleTransaccionrrG Y
(rrY Z
)rrZ [
.rr[ \
Concepto_negociorr\ l
)rrl m
;rrm n
thisss 
.ss 
Productoss 
=ss 
newss &
ProductoParaVentaViewModelss  :
(ss: ;
)ss; <
{tt 
Iduu 
=uu 
detalleuu 
.uu 
Productouu %
.uu% &
Iduu& (
,uu( )
Nombrevv 
=vv 
detallevv  
.vv  !
Productovv! )
.vv) *
Nombrevv* 0
,vv0 1
EsBienww 
=ww 
detalleww  
.ww  !
Productoww! )
.ww) *
EsBienww* 0
}xx 
;xx 
thisyy 
.yy 
PrecioUnitarioyy 
=yy  !
detalleyy" )
.yy) *
PrecioUnitarioyy* 8
;yy8 9
thiszz 
.zz 
Cantidadzz 
=zz 
detallezz #
.zz# $
Cantidadzz$ ,
;zz, -
this{{ 
.{{ 
Importe{{ 
={{ 
detalle{{ "
.{{" #
Importe{{# *
;{{* +
this}} 
.}} 
Igv}} 
=}} 
detalle}} 
.}} 
Igv}} "
;}}" #
this~~ 
.~~ 
	Descuento~~ 
=~~ 
detalle~~ $
.~~$ %
	Descuento~~% .
;~~. /
this 
. 
Lote 
= 
detalle 
.  
Lote  $
;$ %
this
ÄÄ 
.
ÄÄ 
Observacion
ÄÄ 
=
ÄÄ 
$str
ÄÄ !
;
ÄÄ! "
this
ÅÅ 
.
ÅÅ 
Vencimiento
ÅÅ 
=
ÅÅ 
detalle
ÅÅ &
.
ÅÅ& '
Vencimiento
ÅÅ' 2
;
ÅÅ2 3
this
ÇÇ 
.
ÇÇ 
Registro
ÇÇ 
=
ÇÇ 
detalle
ÇÇ #
.
ÇÇ# $
Registro
ÇÇ$ ,
;
ÇÇ, -
}
ÉÉ 	
public
ÖÖ 
static
ÖÖ 
List
ÖÖ 
<
ÖÖ ,
RegistroDetalleCompraViewModel
ÖÖ 9
>
ÖÖ9 :
Convert
ÖÖ; B
(
ÖÖB C
List
ÖÖC G
<
ÖÖG H 
DetalleDeOperacion
ÖÖH Z
>
ÖÖZ [
detalles
ÖÖ\ d
)
ÖÖd e
{
ÜÜ 	
List
áá 
<
áá ,
RegistroDetalleCompraViewModel
áá /
>
áá/ 0
	detalles_
áá1 :
=
áá; <
new
áá= @
List
ááA E
<
ááE F,
RegistroDetalleCompraViewModel
ááF d
>
áád e
(
ááe f
)
ááf g
;
áág h
foreach
àà 
(
àà 
var
àà 
item
àà 
in
àà  
detalles
àà! )
)
àà) *
{
ââ 
	detalles_
ää 
.
ää 
Add
ää 
(
ää 
new
ää !,
RegistroDetalleCompraViewModel
ää" @
(
ää@ A
item
ääA E
)
ääE F
)
ääF G
;
ääG H
}
ãã 
return
åå 
	detalles_
åå 
;
åå 
}
çç 	
public
èè 
static
èè 
List
èè 
<
èè +
RegistroDetalleVentaViewModel
èè 8
>
èè8 9
Convert_
èè: B
(
èèB C
List
èèC G
<
èèG H 
DetalleDeOperacion
èèH Z
>
èèZ [
detalles
èè\ d
)
èèd e
{
êê 	
List
ëë 
<
ëë +
RegistroDetalleVentaViewModel
ëë .
>
ëë. /
	detalles_
ëë0 9
=
ëë: ;
new
ëë< ?
List
ëë@ D
<
ëëD E+
RegistroDetalleVentaViewModel
ëëE b
>
ëëb c
(
ëëc d
)
ëëd e
;
ëëe f
foreach
íí 
(
íí 
var
íí 
item
íí 
in
íí  
detalles
íí! )
)
íí) *
{
ìì 
	detalles_
îî 
.
îî 
Add
îî 
(
îî 
new
îî !+
RegistroDetalleVentaViewModel
îî" ?
(
îî? @
item
îî@ D
)
îîD E
)
îîE F
;
îîF G
}
ïï 
return
ññ 
	detalles_
ññ 
;
ññ 
}
óó 	
public
ôô 
static
ôô  
DetalleDeOperacion
ôô (
Convert
ôô) 0
(
ôô0 1+
RegistroDetalleVentaViewModel
ôô1 N
detalle
ôôO V
)
ôôV W
{
öö 	
return
õõ 
new
õõ  
DetalleDeOperacion
õõ )
(
õõ) *
detalle
úú( /
.
úú/ 0
	IdDetalle
úú0 9
,
úú9 :
detalle
ùù( /
.
ùù/ 0
Producto
ùù0 8
.
ùù8 9
Id
ùù9 ;
,
ùù; <
detalle
ûû( /
.
ûû/ 0
Producto
ûû0 8
.
ûû8 9
Nombre
ûû9 ?
,
ûû? @
detalle
üü( /
.
üü/ 0
Cantidad
üü0 8
,
üü8 9
detalle
††( /
.
††/ 0
PrecioUnitario
††0 >
,
††> ?
detalle
°°( /
.
°°/ 0
Importe
°°0 7
,
°°7 8
$num
¢¢( )
,
¢¢) *
$num
¢¢+ ,
,
¢¢, -
detalle
££( /
.
££/ 0
	Descuento
££0 9
,
££9 :
detalle
§§( /
.
§§/ 0
Observacion
§§0 ;
,
§§; <
detalle
••( /
.
••/ 0
Lote
••0 4
,
••4 5
detalle
¶¶( /
.
¶¶/ 0
Vencimiento
¶¶0 ;
,
¶¶; <
detalle
ßß( /
.
ßß/ 0
Registro
ßß0 8
,
ßß8 9
detalle
®®( /
.
®®/ 0
Producto
®®0 8
.
®®8 9
EsBien
®®9 ?
,
®®? @
detalle
©©( /
.
©©/ 0
MascaraDeCalculo
©©0 @
,
©©@ A
null
™™( ,
)
™™, -
;
™™- .
}
´´ 	
public
≠≠ 
static
≠≠ 
List
≠≠ 
<
≠≠  
DetalleDeOperacion
≠≠ -
>
≠≠- .
Convert
≠≠/ 6
(
≠≠6 7
List
≠≠7 ;
<
≠≠; <+
RegistroDetalleVentaViewModel
≠≠< Y
>
≠≠Y Z
detalles
≠≠[ c
)
≠≠c d
{
ÆÆ 	
List
ØØ 
<
ØØ  
DetalleDeOperacion
ØØ #
>
ØØ# $
	detalles_
ØØ% .
=
ØØ/ 0
new
ØØ1 4
List
ØØ5 9
<
ØØ9 : 
DetalleDeOperacion
ØØ: L
>
ØØL M
(
ØØM N
)
ØØN O
;
ØØO P
foreach
∞∞ 
(
∞∞ 
var
∞∞ 
detalle
∞∞  
in
∞∞! #
detalles
∞∞$ ,
)
∞∞, -
{
±± 
	detalles_
≤≤ 
.
≤≤ 
Add
≤≤ 
(
≤≤ 
Convert
≤≤ %
(
≤≤% &
detalle
≤≤& -
)
≤≤- .
)
≤≤. /
;
≤≤/ 0
}
≥≥ 
return
¥¥ 
	detalles_
¥¥ 
;
¥¥ 
}
µµ 	
}
∂∂ 
}∑∑ éá
DD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\MenuData\Data.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
MenuData& .
{ 
public 

class 
Data 
{ 
public 
IEnumerable 
< 
NavBar !
>! "
navbarItems# .
(. /
IConceptoLogica/ >
_logicaConcepto? N
,N O
IActorNegocioLogicaP c
_actorNegocioLogicad w
,w x
ISucursal_Logica	y â
sucursal_Logica
ä ô
)
ô ö
{ 	
var 
cont 
= 
$num 
; 
var 
caracteristicas 
=  !
_logicaConcepto" 1
.1 2"
ObtenerCaracteristicas2 H
(H I
)I J
;J K
var 

sucursales 
= 
sucursal_Logica ,
., -%
ObtenerSucursalesVigentes- F
(F G
)G H
;H I
var 
menu 
= 
new 
List 
<  
NavBar  &
>& '
(' (
)( )
;) *
menu 
. 
Add 
( 
new 
NavBar 
{  !
Id" $
=% &
$num' *
,* +
Nombre, 2
=3 4
$str5 <
,< =
Icono> C
=D E
$strF \
,\ ]
Estado^ d
=e f
trueg k
,k l
EsPadrem t
=u v
truew {
,{ |
IdPadre	} Ñ
=
Ö Ü
$num
á à
,
à â
Roles
ä è
=
ê ë
new
í ï
List
ñ ö
<
ö õ
string
õ °
>
° ¢
{
£ §
$str
• ≥
,
≥ ¥
$str
µ ø
,
ø ¿
$str
¡ À
,
À Ã
$str
Õ „
,
„ ‰
$str
Â Û
,
Û Ù
$str
ı ˛
}
ˇ Ä
}
Å Ç
)
Ç É
;
É Ñ
if 
( 
AplicacionSettings "
." #
Default# *
.* +
	TipoVenta+ 4
==5 7
$num8 9
)9 :
menu 
. 
Add 
( 
new 
NavBar #
{$ %
Id& (
=) *
$num+ .
,. /
Nombre0 6
=7 8
$str9 F
,F G
ControladorH S
=T U
$strV ]
,] ^
Accion_ e
=f g
$strh p
,p q
Iconor w
=x y
$str	z ë
,
ë í
Estado
ì ô
=
ö õ
true
ú †
,
† °
EsPadre
¢ ©
=
™ ´
false
¨ ±
,
± ≤
IdPadre
≥ ∫
=
ª º
$num
Ω ¿
,
¿ ¡
Roles
¬ «
=
» …
new
  Õ
List
Œ “
<
“ ”
string
” Ÿ
>
Ÿ ⁄
{
€ ‹
$str
› Î
,
Î Ï
$str
Ì ˜
}
¯ ˘
}
˙ ˚
)
˚ ¸
;
¸ ˝
else 
if 
( 
AplicacionSettings '
.' (
Default( /
./ 0
	TipoVenta0 9
==: <
$num= >
)> ?
menu 
. 
Add 
( 
new 
NavBar #
{$ %
Id& (
=) *
$num+ .
,. /
Nombre0 6
=7 8
$str9 F
,F G
ControladorH S
=T U
$strV ]
,] ^
Accion_ e
=f g
$strh v
,v w
Iconox }
=~ 
$str
Ä ó
,
ó ò
Estado
ô ü
=
† °
true
¢ ¶
,
¶ ß
EsPadre
® Ø
=
∞ ±
false
≤ ∑
,
∑ ∏
IdPadre
π ¿
=
¡ ¬
$num
√ ∆
,
∆ «
Roles
» Õ
=
Œ œ
new
– ”
List
‘ ÿ
<
ÿ Ÿ
string
Ÿ ﬂ
>
ﬂ ‡
{
· ‚
$str
„ Ò
,
Ò Ú
$str
Û ˝
}
˛ ˇ
}
Ä Å
)
Å Ç
;
Ç É
menu 
. 
Add 
( 
new 
NavBar 
{  !
Id" $
=% &
$num' *
,* +
Nombre, 2
=3 4
$str5 F
,F G
ControladorH S
=T U
$strV ]
,] ^
Accion_ e
=f g
$str	h å
,
å ç
Icono
é ì
=
î ï
$str
ñ ®
,
® ©
Estado
™ ∞
=
± ≤
true
≥ ∑
,
∑ ∏
EsPadre
π ¿
=
¡ ¬
false
√ »
,
» …
IdPadre
  —
=
“ ”
$num
‘ ◊
,
◊ ÿ
Roles
Ÿ ﬁ
=
ﬂ ‡
new
· ‰
List
Â È
<
È Í
string
Í 
>
 Ò
{
Ú Û
$str
Ù ˛
}
ˇ Ä
}
Å Ç
)
Ç É
;
É Ñ
menu 
. 
Add 
( 
new 
NavBar 
{  !
Id" $
=% &
$num' *
,* +
Nombre, 2
=3 4
$str5 M
,M N
ControladorO Z
=[ \
$str] d
,d e
Accionf l
=m n
$str	o Ü
,
Ü á
Icono
à ç
=
é è
$str
ê £
,
£ §
Estado
• ´
=
¨ ≠
true
Æ ≤
,
≤ ≥
EsPadre
¥ ª
=
º Ω
false
æ √
,
√ ƒ
IdPadre
≈ Ã
=
Õ Œ
$num
œ “
,
“ ”
Roles
‘ Ÿ
=
⁄ €
new
‹ ﬂ
List
‡ ‰
<
‰ Â
string
Â Î
>
Î Ï
{
Ì Ó
$str
Ô ˘
}
˙ ˚
}
¸ ˝
)
˝ ˛
;
˛ ˇ
menu   
.   
Add   
(   
new   
NavBar   
{    !
Id  " $
=  % &
$num  ' *
,  * +
Nombre  , 2
=  3 4
$str  5 A
,  A B
Controlador  C N
=  O P
$str  Q X
,  X Y
Accion  Z `
=  a b
$str  c t
,  t u
Icono  v {
=  | }
$str	  ~ õ
,
  õ ú
Estado
  ù £
=
  § •
true
  ¶ ™
,
  ™ ´
EsPadre
  ¨ ≥
=
  ¥ µ
false
  ∂ ª
,
  ª º
IdPadre
  Ω ƒ
=
  ≈ ∆
$num
  «  
,
    À
Roles
  Ã —
=
  “ ”
new
  ‘ ◊
List
  ÿ ‹
<
  ‹ ›
string
  › „
>
  „ ‰
{
  Â Ê
$str
  Á Ò
}
  Ú Û
}
  Ù ı
)
  ı ˆ
;
  ˆ ˜
menu!! 
.!! 
Add!! 
(!! 
new!! 
NavBar!! 
{!!  !
Id!!" $
=!!% &
$num!!' *
,!!* +
Nombre!!, 2
=!!3 4
$str!!5 C
,!!C D
Controlador!!E P
=!!Q R
$str!!S Z
,!!Z [
Accion!!\ b
=!!c d
$str!!e t
,!!t u
Icono!!v {
=!!| }
$str	!!~ ë
,
!!ë í
Estado
!!ì ô
=
!!ö õ
true
!!ú †
,
!!† °
EsPadre
!!¢ ©
=
!!™ ´
false
!!¨ ±
,
!!± ≤
IdPadre
!!≥ ∫
=
!!ª º
$num
!!Ω ¿
,
!!¿ ¡
Roles
!!¬ «
=
!!» …
new
!!  Õ
List
!!Œ “
<
!!“ ”
string
!!” Ÿ
>
!!Ÿ ⁄
{
!!€ ‹
$str
!!› Í
}
!!Î Ï
}
!!Ì Ó
)
!!Ó Ô
;
!!Ô 
menu"" 
."" 
Add"" 
("" 
new"" 
NavBar"" 
{""  !
Id""" $
=""% &
$num""' *
,""* +
Nombre"", 2
=""3 4
$str""5 J
,""J K
Controlador""L W
=""X Y
$str""Z a
,""a b
Accion""c i
=""j k
$str	""l Ü
,
""Ü á
Icono
""à ç
=
""é è
$str
""ê £
,
""£ §
Estado
""• ´
=
""¨ ≠
true
""Æ ≤
,
""≤ ≥
EsPadre
""¥ ª
=
""º Ω
false
""æ √
,
""√ ƒ
IdPadre
""≈ Ã
=
""Õ Œ
$num
""œ “
,
""“ ”
Roles
""‘ Ÿ
=
""⁄ €
new
""‹ ﬂ
List
""‡ ‰
<
""‰ Â
string
""Â Î
>
""Î Ï
{
""Ì Ó
$str
""Ô ¸
}
""˝ ˛
}
""ˇ Ä
)
""Ä Å
;
""Å Ç
menu## 
.## 
Add## 
(## 
new## 
NavBar## 
{##  !
Id##" $
=##% &
$num##' *
,##* +
Nombre##, 2
=##3 4
$str##5 N
,##N O
Controlador##P [
=##\ ]
$str##^ e
,##e f
Accion##g m
=##n o
$str	##p í
,
##í ì
Icono
##î ô
=
##ö õ
$str
##ú Ø
,
##Ø ∞
Estado
##± ∑
=
##∏ π
true
##∫ æ
,
##æ ø
EsPadre
##¿ «
=
##» …
false
##  œ
,
##œ –
IdPadre
##— ÿ
=
##Ÿ ⁄
$num
##€ ﬁ
,
##ﬁ ﬂ
Roles
##‡ Â
=
##Ê Á
new
##Ë Î
List
##Ï 
<
## Ò
string
##Ò ˜
>
##˜ ¯
{
##˘ ˙
$str
##˚ à
}
##â ä
}
##ã å
)
##å ç
;
##ç é
menu&& 
.&& 
Add&& 
(&& 
new&& 
NavBar&& 
{&&  !
Id&&" $
=&&% &
$num&&' *
,&&* +
Nombre&&, 2
=&&3 4
$str&&5 H
,&&H I
Controlador&&J U
=&&V W
$str&&X _
,&&_ `
Accion&&a g
=&&h i
$str&&j |
,&&| }
Icono	&&~ É
=
&&Ñ Ö
$str
&&Ü ô
,
&&ô ö
Estado
&&õ °
=
&&¢ £
true
&&§ ®
,
&&® ©
EsPadre
&&™ ±
=
&&≤ ≥
false
&&¥ π
,
&&π ∫
IdPadre
&&ª ¬
=
&&√ ƒ
$num
&&≈ »
,
&&» …
Roles
&&  œ
=
&&– —
new
&&“ ’
List
&&÷ ⁄
<
&&⁄ €
string
&&€ ·
>
&&· ‚
{
&&„ ‰
$str
&&Â Ô
}
&& Ò
}
&&Ú Û
)
&&Û Ù
;
&&Ù ı
if'' 
('' 
VentasSettings'' 
.'' 
Default'' &
.''& '!
GenerarPuntosEnVentas''' <
||''= ?
VentasSettings''@ N
.''N O
Default''O V
.''V W%
UsarPuntosComoMedioDePago''W p
)''p q
menu(( 
.(( 
Add(( 
((( 
new(( 
NavBar(( #
{(($ %
Id((& (
=(() *
$num((+ .
,((. /
Nombre((0 6
=((7 8
$str((9 J
,((J K
Controlador((L W
=((X Y
$str((Z c
,((c d
Accion((e k
=((l m
$str((n }
,((} ~
Icono	(( Ñ
=
((Ö Ü
$str
((á ö
,
((ö õ
Estado
((ú ¢
=
((£ §
true
((• ©
,
((© ™
EsPadre
((´ ≤
=
((≥ ¥
false
((µ ∫
,
((∫ ª
IdPadre
((º √
=
((ƒ ≈
$num
((∆ …
,
((…  
Roles
((À –
=
((— “
new
((” ÷
List
((◊ €
<
((€ ‹
string
((‹ ‚
>
((‚ „
{
((‰ Â
$str
((Ê ¸
,
((¸ ˝
$str
((˛ á
}
((à â
}
((ä ã
)
((ã å
;
((å ç
menu)) 
.)) 
Add)) 
()) 
new)) 
NavBar)) 
{))  !
Id))" $
=))% &
$num))' *
,))* +
Nombre)), 2
=))3 4
$str))5 G
,))G H
Controlador))I T
=))U V
$str))W ^
,))^ _
Accion))` f
=))g h
$str	))i Ä
,
))Ä Å
Icono
))Ç á
=
))à â
$str
))ä ù
,
))ù û
Estado
))ü •
=
))¶ ß
true
))® ¨
,
))¨ ≠
EsPadre
))Æ µ
=
))∂ ∑
false
))∏ Ω
,
))Ω æ
IdPadre
))ø ∆
=
))« »
$num
))… Ã
,
))Ã Õ
Roles
))Œ ”
=
))‘ ’
new
))÷ Ÿ
List
))⁄ ﬁ
<
))ﬁ ﬂ
string
))ﬂ Â
>
))Â Ê
{
))Á Ë
$str
))È Ú
,
))Ú Û
$str
))Ù ˛
,
))˛ ˇ
$str
))Ä ñ
}
))ó ò
}
))ô ö
)
))ö õ
;
))õ ú
menu++ 
.++ 
Add++ 
(++ 
new++ 
NavBar++ 
{++  !
Id++" $
=++% &
$num++' *
,++* +
Nombre++, 2
=++3 4
$str++5 ?
,++? @
Controlador++A L
=++M N
$str++O ^
,++^ _
Accion++` f
=++g h
$str++i t
,++t u
Icono++v {
=++| }
$str	++~ ê
,
++ê ë
Estado
++í ò
=
++ô ö
true
++õ ü
,
++ü †
EsPadre
++° ®
=
++© ™
false
++´ ∞
,
++∞ ±
IdPadre
++≤ π
=
++∫ ª
$num
++º ø
,
++ø ¿
Roles
++¡ ∆
=
++« »
new
++… Ã
List
++Õ —
<
++— “
string
++“ ÿ
>
++ÿ Ÿ
{
++⁄ €
$str
++‹ Â
,
++Â Ê
$str
++Á ˝
,
++˝ ˛
$str
++ˇ ä
}
++ã å
}
++ç é
)
++é è
;
++è ê
menu00 
.00 
Add00 
(00 
new00 
NavBar00 
{00  !
Id00" $
=00% &
$num00' +
,00+ ,
Nombre00- 3
=004 5
$str006 >
,00> ?
Controlador00@ K
=00L M
$str00N V
,00V W
Accion00X ^
=00_ `
$str00a h
,00h i
Icono00j o
=00p q
$str	00r â
,
00â ä
Estado
00ã ë
=
00í ì
true
00î ò
,
00ò ô
EsPadre
00ö °
=
00¢ £
true
00§ ®
,
00® ©
IdPadre
00™ ±
=
00≤ ≥
$num
00¥ µ
,
00µ ∂
Roles
00∑ º
=
00Ω æ
new
00ø ¬
List
00√ «
<
00« »
string
00» Œ
>
00Œ œ
{
00– —
$str
00“ ‹
,
00‹ ›
$str
00ﬁ Ê
,
00Ê Á
$str
00Ë Û
,
00Û Ù
$str
00ı ã
,
00ã å
$str
00ç ñ
}
00ó ò
}
00ô ö
)
00ö õ
;
00õ ú
menu11 
.11 
Add11 
(11 
new11 
NavBar11 
{11  !
Id11" $
=11% &
$num11' +
,11+ ,
Nombre11- 3
=114 5
$str116 B
,11B C
Controlador11D O
=11P Q
$str11R Z
,11Z [
Accion11\ b
=11c d
$str11e l
,11l m
Icono11n s
=11t u
$str	11v â
,
11â ä
Estado
11ã ë
=
11í ì
true
11î ò
,
11ò ô
EsPadre
11ö °
=
11¢ £
false
11§ ©
,
11© ™
IdPadre
11´ ≤
=
11≥ ¥
$num
11µ π
,
11π ∫
Roles
11ª ¿
=
11¡ ¬
new
11√ ∆
List
11« À
<
11À Ã
string
11Ã “
>
11“ ”
{
11‘ ’
$str
11÷ ‡
,
11‡ ·
$str
11‚ Í
,
11Í Î
$str
11Ï ˜
,
11˜ ¯
$str
11˘ è
}
11ê ë
}
11í ì
)
11ì î
;
11î ï
menu22 
.22 
Add22 
(22 
new22 
NavBar22 
{22  !
Id22" $
=22% &
$num22' +
,22+ ,
Nombre22- 3
=224 5
$str226 @
,22@ A
Controlador22B M
=22N O
$str22P `
,22` a
Accion22b h
=22i j
$str22k r
,22r s
Icono22t y
=22z {
$str	22| è
,
22è ê
Estado
22ë ó
=
22ò ô
true
22ö û
,
22û ü
EsPadre
22† ß
=
22® ©
false
22™ Ø
,
22Ø ∞
IdPadre
22± ∏
=
22π ∫
$num
22ª ø
,
22ø ¿
Roles
22¡ ∆
=
22« »
new
22… Ã
List
22Õ —
<
22— “
string
22“ ÿ
>
22ÿ Ÿ
{
22⁄ €
$str
22‹ Á
,
22Á Ë
$str
22È ˇ
,
22ˇ Ä
$str
22Å ä
}
22ã å
}
22ç é
)
22é è
;
22è ê
menu66 
.66 
Add66 
(66 
new66 
NavBar66 
{66  !
Id66" $
=66% &
$num66' *
,66* +
Nombre66, 2
=663 4
$str665 A
,66A B
Controlador66C N
=66O P
$str66Q ]
,66] ^
Accion66_ e
=66f g
$str66h o
,66o p
Icono66q v
=66w x
$str	66y ë
,
66ë í
Estado
66ì ô
=
66ö õ
true
66ú †
,
66† °
EsPadre
66¢ ©
=
66™ ´
false
66¨ ±
,
66± ≤
IdPadre
66≥ ∫
=
66ª º
$num
66Ω æ
,
66æ ø
Roles
66¿ ≈
=
66∆ «
new
66» À
List
66Ã –
<
66– —
string
66— ◊
>
66◊ ÿ
{
66Ÿ ⁄
$str
66€ Â
}
66Ê Á
}
66Ë È
)
66È Í
;
66Í Î
menu:: 
.:: 
Add:: 
(:: 
new:: 
NavBar:: 
{::  !
Id::" $
=::% &
$num::' *
,::* +
Nombre::, 2
=::3 4
$str::5 =
,::= >
Icono::? D
=::E F
$str::G Y
,::Y Z
Estado::[ a
=::b c
true::d h
,::h i
EsPadre::j q
=::r s
true::t x
,::x y
IdPadre	::z Å
=
::Ç É
$num
::Ñ Ö
,
::Ö Ü
Roles
::á å
=
::ç é
new
::è í
List
::ì ó
<
::ó ò
string
::ò û
>
::û ü
{
::† °
$str
::¢ ≠
}
::Æ Ø
}
::∞ ±
)
::± ≤
;
::≤ ≥
menu;; 
.;; 
Add;; 
(;; 
new;; 
NavBar;; 
{;;  !
Id;;" $
=;;% &
$num;;' *
,;;* +
Nombre;;, 2
=;;3 4
$str;;5 G
,;;G H
Controlador;;I T
=;;U V
$str;;W _
,;;_ `
Accion;;a g
=;;h i
$str;;j r
,;;r s
Icono;;t y
=;;z {
$str	;;| é
,
;;é è
Estado
;;ê ñ
=
;;ó ò
true
;;ô ù
,
;;ù û
EsPadre
;;ü ¶
=
;;ß ®
false
;;© Æ
,
;;Æ Ø
IdPadre
;;∞ ∑
=
;;∏ π
$num
;;∫ Ω
,
;;Ω æ
Roles
;;ø ƒ
=
;;≈ ∆
new
;;«  
List
;;À œ
<
;;œ –
string
;;– ÷
>
;;÷ ◊
{
;;ÿ Ÿ
$str
;;⁄ Â
}
;;Ê Á
}
;;Ë È
)
;;È Í
;
;;Í Î
menuAA 
.AA 
AddAA 
(AA 
newAA 
NavBarAA 
{AA  !
IdAA" $
=AA% &
$numAA' *
,AA* +
NombreAA, 2
=AA3 4
$strAA5 =
,AA= >
IconoAA? D
=AAE F
$strAAG Z
,AAZ [
EstadoAA\ b
=AAc d
trueAAe i
,AAi j
EsPadreAAk r
=AAs t
trueAAu y
,AAy z
IdPadre	AA{ Ç
=
AAÉ Ñ
$num
AAÖ Ü
,
AAÜ á
Roles
AAà ç
=
AAé è
new
AAê ì
List
AAî ò
<
AAò ô
string
AAô ü
>
AAü †
{
AA° ¢
$str
AA£ Æ
,
AAÆ Ø
$str
AA∞ ∆
,
AA∆ «
$str
AA» —
}
AA“ ”
}
AA‘ ’
)
AA’ ÷
;
AA÷ ◊
menuBB 
.BB 
AddBB 
(BB 
newBB 
NavBarBB 
{BB  !
IdBB" $
=BB% &
$numBB' *
,BB* +
NombreBB, 2
=BB3 4
$strBB5 C
,BBC D
ControladorBBE P
=BBQ R
$strBBS [
,BB[ \
AccionBB] c
=BBd e
$strBBf o
,BBo p
IconoBBq v
=BBw x
$str	BBy á
,
BBá à
Estado
BBâ è
=
BBê ë
true
BBí ñ
,
BBñ ó
EsPadre
BBò ü
=
BB† °
false
BB¢ ß
,
BBß ®
IdPadre
BB© ∞
=
BB± ≤
$num
BB≥ ∂
,
BB∂ ∑
Roles
BB∏ Ω
=
BBæ ø
new
BB¿ √
List
BBƒ »
<
BB» …
string
BB… œ
>
BBœ –
{
BB— “
$str
BB” ﬁ
}
BBﬂ ‡
}
BB· ‚
)
BB‚ „
;
BB„ ‰
menuCC 
.CC 
AddCC 
(CC 
newCC 
NavBarCC 
{CC  !
IdCC" $
=CC% &
$numCC' *
,CC* +
NombreCC, 2
=CC3 4
$strCC5 B
,CCB C
ControladorCCD O
=CCP Q
$strCCR Z
,CCZ [
AccionCC\ b
=CCc d
$strCCe w
,CCw x
IconoCCy ~
=	CC Ä
$str
CCÅ ú
,
CCú ù
Estado
CCû §
=
CC• ¶
true
CCß ´
,
CC´ ¨
EsPadre
CC≠ ¥
=
CCµ ∂
false
CC∑ º
,
CCº Ω
IdPadre
CCæ ≈
=
CC∆ «
$num
CC» À
,
CCÀ Ã
Roles
CCÕ “
=
CC” ‘
new
CC’ ÿ
List
CCŸ ›
<
CC› ﬁ
string
CCﬁ ‰
>
CC‰ Â
{
CCÊ Á
$str
CCË Û
}
CCÙ ı
}
CCˆ ˜
)
CC˜ ¯
;
CC¯ ˘
menuFF 
.FF 
AddFF 
(FF 
newFF 
NavBarFF 
{FF  !
IdFF" $
=FF% &
$numFF' *
,FF* +
NombreFF, 2
=FF3 4
$strFF5 ?
,FF? @
ControladorFFA L
=FFM N
$strFFO X
,FFX Y
AccionFFZ `
=FFa b
$str	FFc É
,
FFÉ Ñ
Icono
FFÖ ä
=
FFã å
$str
FFç †
,
FF† °
Estado
FF¢ ®
=
FF© ™
true
FF´ Ø
,
FFØ ∞
EsPadre
FF± ∏
=
FFπ ∫
false
FFª ¿
,
FF¿ ¡
IdPadre
FF¬ …
=
FF  À
$num
FFÃ œ
,
FFœ –
Roles
FF— ÷
=
FF◊ ÿ
new
FFŸ ‹
List
FF› ·
<
FF· ‚
string
FF‚ Ë
>
FFË È
{
FFÍ Î
$str
FFÏ ı
,
FFı ˆ
$str
FF˜ ç
}
FFé è
}
FFê ë
)
FFë í
;
FFí ì
menuJJ 
.JJ 
AddJJ 
(JJ 
newJJ 
NavBarJJ 
{JJ  !
IdJJ" $
=JJ% &
$numJJ' *
,JJ* +
NombreJJ, 2
=JJ3 4
$strJJ5 ?
,JJ? @
IconoJJA F
=JJG H
$strJJI _
,JJ_ `
EstadoJJa g
=JJh i
trueJJj n
,JJn o
EsPadreJJp w
=JJx y
trueJJz ~
,JJ~ 
IdPadre
JJÄ á
=
JJà â
$num
JJä ã
,
JJã å
Roles
JJç í
=
JJì î
new
JJï ò
List
JJô ù
<
JJù û
string
JJû §
>
JJ§ •
{
JJ¶ ß
$str
JJ® ±
}
JJ≤ ≥
}
JJ¥ µ
)
JJµ ∂
;
JJ∂ ∑
menuKK 
.KK 
AddKK 
(KK 
newKK 
NavBarKK 
{KK  !
IdKK" $
=KK% &
$numKK' *
,KK* +
NombreKK, 2
=KK3 4
$strKK5 I
,KKI J
ControladorKKK V
=KKW X
$strKKY b
,KKb c
AccionKKd j
=KKk l
$str	KKm Ü
,
KKÜ á
Icono
KKà ç
=
KKé è
$str
KKê £
,
KK£ §
Estado
KK• ´
=
KK¨ ≠
true
KKÆ ≤
,
KK≤ ≥
EsPadre
KK¥ ª
=
KKº Ω
false
KKæ √
,
KK√ ƒ
IdPadre
KK≈ Ã
=
KKÕ Œ
$num
KKœ “
,
KK“ ”
Roles
KK‘ Ÿ
=
KK⁄ €
new
KK‹ ﬂ
List
KK‡ ‰
<
KK‰ Â
string
KKÂ Î
>
KKÎ Ï
{
KKÌ Ó
$str
KKÔ ¯
}
KK˘ ˙
}
KK˚ ¸
)
KK¸ ˝
;
KK˝ ˛
menuLL 
.LL 
AddLL 
(LL 
newLL 
NavBarLL 
{LL  !
IdLL" $
=LL% &
$numLL' *
,LL* +
NombreLL, 2
=LL3 4
$strLL5 C
,LLC D
ControladorLLE P
=LLQ R
$strLLS \
,LL\ ]
AccionLL^ d
=LLe f
$str	LLg â
,
LLâ ä
Icono
LLã ê
=
LLë í
$str
LLì ¶
,
LL¶ ß
Estado
LL® Æ
=
LLØ ∞
true
LL± µ
,
LLµ ∂
EsPadre
LL∑ æ
=
LLø ¿
false
LL¡ ∆
,
LL∆ «
IdPadre
LL» œ
=
LL– —
$num
LL“ ’
,
LL’ ÷
Roles
LL◊ ‹
=
LL› ﬁ
new
LLﬂ ‚
List
LL„ Á
<
LLÁ Ë
string
LLË Ó
>
LLÓ Ô
{
LL Ò
$str
LLÚ É
}
LLÑ Ö
}
LLÜ á
)
LLá à
;
LLà â
menuPP 
.PP 
AddPP 
(PP 
newPP 
NavBarPP 
{PP  !
IdPP" $
=PP% &
$numPP' *
,PP* +
NombrePP, 2
=PP3 4
$strPP5 >
,PP> ?
IconoPP@ E
=PPF G
$strPPH b
,PPb c
EstadoPPd j
=PPk l
truePPm q
,PPq r
EsPadrePPs z
=PP{ |
true	PP} Å
,
PPÅ Ç
IdPadre
PPÉ ä
=
PPã å
$num
PPç é
,
PPé è
Roles
PPê ï
=
PPñ ó
new
PPò õ
List
PPú †
<
PP† °
string
PP° ß
>
PPß ®
{
PP© ™
$str
PP´ ∑
,
PP∑ ∏
$str
PPπ œ
,
PPœ –
$str
PP— ⁄
}
PP€ ‹
}
PP› ﬁ
)
PPﬁ ﬂ
;
PPﬂ ‡
menuQQ 
.QQ 
AddQQ 
(QQ 
newQQ 
NavBarQQ 
{QQ  !
IdQQ" $
=QQ% &
$numQQ' *
,QQ* +
NombreQQ, 2
=QQ3 4
$strQQ5 >
,QQ> ?
ControladorQQ@ K
=QQL M
$strQQN \
,QQ\ ]
AccionQQ^ d
=QQe f
$strQQg r
,QQr s
IconoQQt y
=QQz {
$str	QQ| ñ
,
QQñ ó
Estado
QQò û
=
QQü †
true
QQ° •
,
QQ• ¶
EsPadre
QQß Æ
=
QQØ ∞
false
QQ± ∂
,
QQ∂ ∑
IdPadre
QQ∏ ø
=
QQ¿ ¡
$num
QQ¬ ≈
,
QQ≈ ∆
Roles
QQ« Ã
=
QQÕ Œ
new
QQœ “
List
QQ” ◊
<
QQ◊ ÿ
string
QQÿ ﬁ
>
QQﬁ ﬂ
{
QQ‡ ·
$str
QQ‚ Ó
,
QQÓ Ô
$str
QQ Ü
}
QQá à
}
QQâ ä
)
QQä ã
;
QQã å
menuRR 
.RR 
AddRR 
(RR 
newRR 
NavBarRR 
{RR  !
IdRR" $
=RR% &
$numRR' *
,RR* +
NombreRR, 2
=RR3 4
$strRR5 @
,RR@ A
ControladorRRB M
=RRN O
$strRRP Y
,RRY Z
AccionRR[ a
=RRb c
$strRRd w
,RRw x
IconoRRy ~
=	RR Ä
$str
RRÅ õ
,
RRõ ú
Estado
RRù £
=
RR§ •
true
RR¶ ™
,
RR™ ´
EsPadre
RR¨ ≥
=
RR¥ µ
false
RR∂ ª
,
RRª º
IdPadre
RRΩ ƒ
=
RR≈ ∆
$num
RR«  
,
RR  À
Roles
RRÃ —
=
RR“ ”
new
RR‘ ◊
List
RRÿ ‹
<
RR‹ ›
string
RR› „
>
RR„ ‰
{
RRÂ Ê
$str
RRÁ Û
}
RRÙ ı
}
RRˆ ˜
)
RR˜ ¯
;
RR¯ ˘
menuSS 
.SS 
AddSS 
(SS 
newSS 
NavBarSS 
{SS  !
IdSS" $
=SS% &
$numSS' *
,SS* +
NombreSS, 2
=SS3 4
$strSS5 G
,SSG H
ControladorSSI T
=SSU V
$strSSW `
,SS` a
AccionSSb h
=SSi j
$str	SSk Å
,
SSÅ Ç
Icono
SSÉ à
=
SSâ ä
$str
SSã •
,
SS• ¶
Estado
SSß ≠
=
SSÆ Ø
true
SS∞ ¥
,
SS¥ µ
EsPadre
SS∂ Ω
=
SSæ ø
false
SS¿ ≈
,
SS≈ ∆
IdPadre
SS« Œ
=
SSœ –
$num
SS— ‘
,
SS‘ ’
Roles
SS÷ €
=
SS‹ ›
new
SSﬁ ·
List
SS‚ Ê
<
SSÊ Á
string
SSÁ Ì
>
SSÌ Ó
{
SSÔ 
$str
SSÒ ˝
}
SS˛ ˇ
}
SSÄ Å
)
SSÅ Ç
;
SSÇ É
menuTT 
.TT 
AddTT 
(TT 
newTT 
NavBarTT 
{TT  !
IdTT" $
=TT% &
$numTT' *
,TT* +
NombreTT, 2
=TT3 4
$strTT5 H
,TTH I
ControladorTTJ U
=TTV W
$strTTX a
,TTa b
AccionTTc i
=TTj k
$str	TTl Ñ
,
TTÑ Ö
Icono
TTÜ ã
=
TTå ç
$str
TTé °
,
TT° ¢
Estado
TT£ ©
=
TT™ ´
true
TT¨ ∞
,
TT∞ ±
EsPadre
TT≤ π
=
TT∫ ª
false
TTº ¡
,
TT¡ ¬
IdPadre
TT√  
=
TTÀ Ã
$num
TTÕ –
,
TT– —
Roles
TT“ ◊
=
TTÿ Ÿ
new
TT⁄ ›
List
TTﬁ ‚
<
TT‚ „
string
TT„ È
>
TTÈ Í
{
TTÎ Ï
$str
TTÌ ˘
}
TT˙ ˚
}
TT¸ ˝
)
TT˝ ˛
;
TT˛ ˇ
menuUU 
.UU 
AddUU 
(UU 
newUU 
NavBarUU 
{UU  !
IdUU" $
=UU% &
$numUU' *
,UU* +
NombreUU, 2
=UU3 4
$strUU5 S
,UUS T
ControladorUUU `
=UUa b
$strUUc t
,UUt u
AccionUUv |
=UU} ~
$str	UU ú
,
UUú ù
Icono
UUû £
=
UU§ •
$str
UU¶ π
,
UUπ ∫
Estado
UUª ¡
=
UU¬ √
true
UUƒ »
,
UU» …
EsPadre
UU  —
=
UU“ ”
false
UU‘ Ÿ
,
UUŸ ⁄
IdPadre
UU€ ‚
=
UU„ ‰
$num
UUÂ Ë
,
UUË È
Roles
UUÍ Ô
=
UU Ò
new
UUÚ ı
List
UUˆ ˙
<
UU˙ ˚
string
UU˚ Å
>
UUÅ Ç
{
UUÉ Ñ
$str
UUÖ ë
,
UUë í
$str
UUì ©
,
UU© ™
$str
UU´ ¥
}
UUµ ∂
}
UU∑ ∏
)
UU∏ π
;
UUπ ∫
menuVV 
.VV 
AddVV 
(VV 
newVV 
NavBarVV 
{VV  !
IdVV" $
=VV% &
$numVV' *
,VV* +
NombreVV, 2
=VV3 4
$strVV5 K
,VVK L
ControladorVVM X
=VVY Z
$strVV[ d
,VVd e
AccionVVf l
=VVm n
$str	VVo Ñ
,
VVÑ Ö
Icono
VVÜ ã
=
VVå ç
$str
VVé °
,
VV° ¢
Estado
VV£ ©
=
VV™ ´
true
VV¨ ∞
,
VV∞ ±
EsPadre
VV≤ π
=
VV∫ ª
false
VVº ¡
,
VV¡ ¬
IdPadre
VV√  
=
VVÀ Ã
$num
VVÕ –
,
VV– —
Roles
VV“ ◊
=
VVÿ Ÿ
new
VV⁄ ›
List
VVﬁ ‚
<
VV‚ „
string
VV„ È
>
VVÈ Í
{
VVÎ Ï
$str
VVÌ ˛
}
VVˇ Ä
}
VVÅ Ç
)
VVÇ É
;
VVÉ Ñ
ifWW 
(WW 
AplicacionSettingsWW "
.WW" #
DefaultWW# *
.WW* +*
MostrarReporteSalidasDeAlcoholWW+ I
)WWI J
menuXX 
.XX 
AddXX 
(XX 
newXX 
NavBarXX #
{XX$ %
IdXX& (
=XX) *
$numXX+ .
,XX. /
NombreXX0 6
=XX7 8
$strXX9 M
,XXM N
ControladorXXO Z
=XX[ \
$strXX] f
,XXf g
AccionXXh n
=XXo p
$str	XXq à
,
XXà â
Icono
XXä è
=
XXê ë
$str
XXí •
,
XX• ¶
Estado
XXß ≠
=
XXÆ Ø
true
XX∞ ¥
,
XX¥ µ
EsPadre
XX∂ Ω
=
XXæ ø
false
XX¿ ≈
,
XX≈ ∆
IdPadre
XX« Œ
=
XXœ –
$num
XX— ‘
,
XX‘ ’
Roles
XX÷ €
=
XX‹ ›
new
XXﬁ ·
List
XX‚ Ê
<
XXÊ Á
string
XXÁ Ì
>
XXÌ Ó
{
XXÔ 
$str
XXÒ ˝
,
XX˝ ˛
$str
XXˇ ï
,
XXï ñ
$str
XXó †
}
XX° ¢
}
XX£ §
)
XX§ •
;
XX• ¶
menuZZ 
.ZZ 
AddZZ 
(ZZ 
newZZ 
NavBarZZ 
{ZZ  !
IdZZ" $
=ZZ% &
$numZZ' *
,ZZ* +
NombreZZ, 2
=ZZ3 4
$strZZ5 ?
,ZZ? @
ControladorZZA L
=ZZM N
$strZZO `
,ZZ` a
AccionZZb h
=ZZi j
$strZZk v
,ZZv w
IconoZZx }
=ZZ~ 
$str
ZZÄ í
,
ZZí ì
Estado
ZZî ö
=
ZZõ ú
true
ZZù °
,
ZZ° ¢
EsPadre
ZZ£ ™
=
ZZ´ ¨
false
ZZ≠ ≤
,
ZZ≤ ≥
IdPadre
ZZ¥ ª
=
ZZº Ω
$num
ZZæ ¡
,
ZZ¡ ¬
Roles
ZZ√ »
=
ZZ…  
new
ZZÀ Œ
List
ZZœ ”
<
ZZ” ‘
string
ZZ‘ ⁄
>
ZZ⁄ €
{
ZZ‹ ›
$str
ZZﬁ Á
,
ZZÁ Ë
$str
ZZÈ ˇ
,
ZZˇ Ä
$str
ZZÅ ç
}
ZZé è
}
ZZê ë
)
ZZë í
;
ZZí ì
menu^^ 
.^^ 
Add^^ 
(^^ 
new^^ 
NavBar^^ 
{^^  !
Id^^" $
=^^% &
$num^^' *
,^^* +
Nombre^^, 2
=^^3 4
$str^^5 K
,^^K L
Icono^^M R
=^^S T
$str^^U o
,^^o p
Estado^^q w
=^^x y
true^^z ~
,^^~ 
EsPadre
^^Ä á
=
^^à â
true
^^ä é
,
^^é è
IdPadre
^^ê ó
=
^^ò ô
$num
^^ö õ
,
^^õ ú
Roles
^^ù ¢
=
^^£ §
new
^^• ®
List
^^© ≠
<
^^≠ Æ
string
^^Æ ¥
>
^^¥ µ
{
^^∂ ∑
$str
^^∏ ¿
,
^^¿ ¡
$str
^^¬ œ
,
^^œ –
$str
^^— Á
,
^^Á Ë
$str
^^È Ú
}
^^Û Ù
}
^^ı ˆ
)
^^ˆ ˜
;
^^˜ ¯
if`` 
(`` 
AplicacionSettings`` "
.``" #
Default``# *
.``* +
	TipoVenta``+ 4
==``5 7
$num``8 9
)``9 :
menuaa 
.aa 
Addaa 
(aa 
newaa 
NavBaraa #
{aa$ %
Idaa& (
=aa) *
$numaa+ .
,aa. /
Nombreaa0 6
=aa7 8
$straa9 G
,aaG H
ControladoraaI T
=aaU V
$straaW ^
,aa^ _
Accionaa` f
=aag h
$straai v
,aav w
Iconoaax }
=aa~ 
$str
aaÄ ì
,
aaì î
Estado
aaï õ
=
aaú ù
true
aaû ¢
,
aa¢ £
EsPadre
aa§ ´
=
aa¨ ≠
false
aaÆ ≥
,
aa≥ ¥
IdPadre
aaµ º
=
aaΩ æ
$num
aaø ¬
,
aa¬ √
Roles
aaƒ …
=
aa  À
new
aaÃ œ
List
aa– ‘
<
aa‘ ’
string
aa’ €
>
aa€ ‹
{
aa› ﬁ
$str
aaﬂ Á
}
aaË È
}
aaÍ Î
)
aaÎ Ï
;
aaÏ Ì
menudd 
.dd 
Adddd 
(dd 
newdd 
NavBardd 
{dd  !
Iddd" $
=dd% &
$numdd' *
,dd* +
Nombredd, 2
=dd3 4
$strdd5 H
,ddH I
ControladorddJ U
=ddV W
$strddX a
,dda b
Accionddc i
=ddj k
$strddl }
,dd} ~
Icono	dd Ñ
=
ddÖ Ü
$str
ddá ö
,
ddö õ
Estado
ddú ¢
=
dd£ §
true
dd• ©
,
dd© ™
EsPadre
dd´ ≤
=
dd≥ ¥
false
ddµ ∫
,
dd∫ ª
IdPadre
ddº √
=
ddƒ ≈
$num
dd∆ …
,
dd…  
Roles
ddÀ –
=
dd— “
new
dd” ÷
List
dd◊ €
<
dd€ ‹
string
dd‹ ‚
>
dd‚ „
{
dd‰ Â
$str
ddÊ ˜
}
dd¯ ˘
}
dd˙ ˚
)
dd˚ ¸
;
dd¸ ˝
menuee 
.ee 
Addee 
(ee 
newee 
NavBaree 
{ee  !
Idee" $
=ee% &
$numee' *
,ee* +
Nombreee, 2
=ee3 4
$stree5 O
,eeO P
ControladoreeQ \
=ee] ^
$stree_ h
,eeh i
Accioneej p
=eeq r
$str	ees Å
,
eeÅ Ç
Icono
eeÉ à
=
eeâ ä
$str
eeã û
,
eeû ü
Estado
ee† ¶
=
eeß ®
true
ee© ≠
,
ee≠ Æ
EsPadre
eeØ ∂
=
ee∑ ∏
false
eeπ æ
,
eeæ ø
IdPadre
ee¿ «
=
ee» …
$num
ee  Õ
,
eeÕ Œ
Roles
eeœ ‘
=
ee’ ÷
new
ee◊ ⁄
List
ee€ ﬂ
<
eeﬂ ‡
string
ee‡ Ê
>
eeÊ Á
{
eeË È
$str
eeÍ Ä
}
eeÅ Ç
}
eeÉ Ñ
)
eeÑ Ö
;
eeÖ Ü
menuff 
.ff 
Addff 
(ff 
newff 
NavBarff 
{ff  !
Idff" $
=ff% &
$numff' *
,ff* +
Nombreff, 2
=ff3 4
$strff5 G
,ffG H
ControladorffI T
=ffU V
$strffW `
,ff` a
Accionffb h
=ffi j
$strffk y
,ffy z
Icono	ff{ Ä
=
ffÅ Ç
$str
ffÉ ñ
,
ffñ ó
Estado
ffò û
=
ffü †
true
ff° •
,
ff• ¶
EsPadre
ffß Æ
=
ffØ ∞
false
ff± ∂
,
ff∂ ∑
IdPadre
ff∏ ø
=
ff¿ ¡
$num
ff¬ ≈
,
ff≈ ∆
Roles
ff« Ã
=
ffÕ Œ
new
ffœ “
List
ff” ◊
<
ff◊ ÿ
string
ffÿ ﬁ
>
ffﬁ ﬂ
{
ff‡ ·
$str
ff‚ ¯
,
ff¯ ˘
$str
ff˙ Ç
}
ffÉ Ñ
}
ffÖ Ü
)
ffÜ á
;
ffá à
menugg 
.gg 
Addgg 
(gg 
newgg 
NavBargg 
{gg  !
Idgg" $
=gg% &
$numgg' *
,gg* +
Nombregg, 2
=gg3 4
$strgg5 H
,ggH I
ControladorggJ U
=ggV W
$strggX a
,gga b
Accionggc i
=ggj k
$strggl ~
,gg~ 
Icono
ggÄ Ö
=
ggÜ á
$str
ggà õ
,
ggõ ú
Estado
ggù £
=
gg§ •
true
gg¶ ™
,
gg™ ´
EsPadre
gg¨ ≥
=
gg¥ µ
false
gg∂ ª
,
ggª º
IdPadre
ggΩ ƒ
=
gg≈ ∆
$num
gg«  
,
gg  À
Roles
ggÃ —
=
gg“ ”
new
gg‘ ◊
List
ggÿ ‹
<
gg‹ ›
string
gg› „
>
gg„ ‰
{
ggÂ Ê
$str
ggÁ ˝
}
gg˛ ˇ
}
ggÄ Å
)
ggÅ Ç
;
ggÇ É
menuhh 
.hh 
Addhh 
(hh 
newhh 
NavBarhh 
{hh  !
Idhh" $
=hh% &
$numhh' *
,hh* +
Nombrehh, 2
=hh3 4
$strhh5 ?
,hh? @
ControladorhhA L
=hhM N
$strhhO `
,hh` a
Accionhhb h
=hhi j
$strhhk v
,hhv w
Iconohhx }
=hh~ 
$str
hhÄ í
,
hhí ì
Estado
hhî ö
=
hhõ ú
true
hhù °
,
hh° ¢
EsPadre
hh£ ™
=
hh´ ¨
false
hh≠ ≤
,
hh≤ ≥
IdPadre
hh¥ ª
=
hhº Ω
$num
hhæ ¡
,
hh¡ ¬
Roles
hh√ »
=
hh…  
new
hhÀ Œ
List
hhœ ”
<
hh” ‘
string
hh‘ ⁄
>
hh⁄ €
{
hh‹ ›
$str
hhﬁ Á
,
hhÁ Ë
$str
hhÈ ˇ
,
hhˇ Ä
$str
hhÅ â
}
hhä ã
}
hhå ç
)
hhç é
;
hhé è
menu}} 
.}} 
Add}} 
(}} 
new}} 
NavBar}} 
{}}  !
Id}}" $
=}}% &
$num}}' +
,}}+ ,
Nombre}}- 3
=}}4 5
$str}}6 =
,}}= >
Icono}}? D
=}}E F
$str}}G X
,}}X Y
Estado}}Z `
=}}a b
true}}c g
,}}g h
EsPadre}}i p
=}}q r
true}}s w
,}}w x
IdPadre	}}y Ä
=
}}Å Ç
$num
}}É Ñ
,
}}Ñ Ö
Roles
}}Ü ã
=
}}å ç
new
}}é ë
List
}}í ñ
<
}}ñ ó
string
}}ó ù
>
}}ù û
{
}}ü †
$str
}}° ∑
}
}}∏ π
}
}}∫ ª
)
}}ª º
;
}}º Ω
menu~~ 
.~~ 
Add~~ 
(~~ 
new~~ 
NavBar~~ 
{~~  !
Id~~" $
=~~% &
$num~~' +
,~~+ ,
Nombre~~- 3
=~~4 5
$str~~6 <
,~~< =
Controlador~~> I
=~~J K
$str~~L S
,~~S T
Accion~~U [
=~~\ ]
$str~~^ e
,~~e f
Icono~~g l
=~~m n
$str	~~o ä
,
~~ä ã
Estado
~~å í
=
~~ì î
true
~~ï ô
,
~~ô ö
EsPadre
~~õ ¢
=
~~£ §
false
~~• ™
,
~~™ ´
IdPadre
~~¨ ≥
=
~~¥ µ
$num
~~∂ ∫
,
~~∫ ª
Roles
~~º ¡
=
~~¬ √
new
~~ƒ «
List
~~» Ã
<
~~Ã Õ
string
~~Õ ”
>
~~” ‘
{
~~’ ÷
$str
~~◊ Ì
}
~~Ó Ô
}
~~ Ò
)
~~Ò Ú
;
~~Ú Û
menu 
. 
Add 
( 
new 
NavBar 
{  !
Id" $
=% &
$num' +
,+ ,
Nombre- 3
=4 5
$str6 @
,@ A
ControladorB M
=N O
$strP W
,W X
AccionY _
=` a
$strb l
,l m
Iconon s
=t u
$str	v ë
,
ë í
Estado
ì ô
=
ö õ
true
ú †
,
† °
EsPadre
¢ ©
=
™ ´
false
¨ ±
,
± ≤
IdPadre
≥ ∫
=
ª º
$num
Ω ¡
,
¡ ¬
Roles
√ »
=
…  
new
À Œ
List
œ ”
<
” ‘
string
‘ ⁄
>
⁄ €
{
‹ ›
$str
ﬁ Ù
}
Ù ı
}
ˆ ˜
)
˜ ¯
;
¯ ˘
menu
ÄÄ 
.
ÄÄ 
Add
ÄÄ 
(
ÄÄ 
new
ÄÄ 
NavBar
ÄÄ 
{
ÄÄ  !
Id
ÄÄ" $
=
ÄÄ% &
$num
ÄÄ' +
,
ÄÄ+ ,
Nombre
ÄÄ- 3
=
ÄÄ4 5
$str
ÄÄ6 ?
,
ÄÄ? @
Controlador
ÄÄA L
=
ÄÄM N
$str
ÄÄO X
,
ÄÄX Y
Accion
ÄÄZ `
=
ÄÄa b
$strÄÄc Ä
,ÄÄÄ Å
IconoÄÄÇ á
=ÄÄà â
$strÄÄä ù
,ÄÄù û
EstadoÄÄü •
=ÄÄ¶ ß
trueÄÄ® ¨
,ÄÄ¨ ≠
EsPadreÄÄÆ µ
=ÄÄ∂ ∑
falseÄÄ∏ Ω
,ÄÄΩ æ
IdPadreÄÄø ∆
=ÄÄ« »
$numÄÄ… Õ
,ÄÄÕ Œ
RolesÄÄœ ‘
=ÄÄ’ ÷
newÄÄ◊ ⁄
ListÄÄ€ ﬂ
<ÄÄﬂ ‡
stringÄÄ‡ Ê
>ÄÄÊ Á
{ÄÄË È
$strÄÄÍ Û
}ÄÄÙ ı
}ÄÄˆ ˜
)ÄÄ˜ ¯
;ÄÄ¯ ˘
menu
ÖÖ 
.
ÖÖ 
Add
ÖÖ 
(
ÖÖ 
new
ÖÖ 
NavBar
ÖÖ 
{
ÖÖ  !
Id
ÖÖ" $
=
ÖÖ% &
$num
ÖÖ' *
,
ÖÖ* +
Nombre
ÖÖ, 2
=
ÖÖ3 4
$str
ÖÖ5 @
,
ÖÖ@ A
Icono
ÖÖB G
=
ÖÖH I
$str
ÖÖJ ]
,
ÖÖ] ^
Estado
ÖÖ_ e
=
ÖÖf g
true
ÖÖh l
,
ÖÖl m
EsPadre
ÖÖn u
=
ÖÖv w
true
ÖÖx |
,
ÖÖ| }
IdPadreÖÖ~ Ö
=ÖÖÜ á
$numÖÖà â
,ÖÖâ ä
RolesÖÖã ê
=ÖÖë í
newÖÖì ñ
ListÖÖó õ
<ÖÖõ ú
stringÖÖú ¢
>ÖÖ¢ £
{ÖÖ§ •
$strÖÖ¶ ±
,ÖÖ± ≤
$strÖÖ≥ ƒ
,ÖÖƒ ≈
$strÖÖ∆ —
,ÖÖ— “
$strÖÖ” È
}ÖÖÍ Î
}ÖÖÏ Ì
)ÖÖÌ Ó
;ÖÖÓ Ô
menu
ÜÜ 
.
ÜÜ 
Add
ÜÜ 
(
ÜÜ 
new
ÜÜ 
NavBar
ÜÜ 
{
ÜÜ  !
Id
ÜÜ" $
=
ÜÜ% &
$num
ÜÜ' *
,
ÜÜ* +
Nombre
ÜÜ, 2
=
ÜÜ3 4
$str
ÜÜ5 D
,
ÜÜD E
Controlador
ÜÜF Q
=
ÜÜR S
$str
ÜÜT ^
,
ÜÜ^ _
Accion
ÜÜ` f
=
ÜÜg h
$str
ÜÜi y
,
ÜÜy z
IconoÜÜ{ Ä
=ÜÜÅ Ç
$strÜÜÉ ñ
,ÜÜñ ó
EstadoÜÜò û
=ÜÜü †
trueÜÜ° •
,ÜÜ• ¶
EsPadreÜÜß Æ
=ÜÜØ ∞
falseÜÜ± ∂
,ÜÜ∂ ∑
IdPadreÜÜ∏ ø
=ÜÜ¿ ¡
$numÜÜ¬ ≈
,ÜÜ≈ ∆
RolesÜÜ« Ã
=ÜÜÕ Œ
newÜÜœ “
ListÜÜ” ◊
<ÜÜ◊ ÿ
stringÜÜÿ ﬁ
>ÜÜﬁ ﬂ
{ÜÜ‡ ·
$strÜÜ‚ ¯
}ÜÜ˘ ˙
}ÜÜ˚ ¸
)ÜÜ¸ ˝
;ÜÜ˝ ˛
menu
áá 
.
áá 
Add
áá 
(
áá 
new
áá 
NavBar
áá 
{
áá  !
Id
áá" $
=
áá% &
$num
áá' *
,
áá* +
Nombre
áá, 2
=
áá3 4
$str
áá5 C
,
ááC D
Controlador
ááE P
=
ááQ R
$str
ááS ]
,
áá] ^
Accion
áá_ e
=
ááf g
$strááh É
,ááÉ Ñ
IconoááÖ ä
=ááã å
$strááç †
,áá† °
Estadoáá¢ ®
=áá© ™
trueáá´ Ø
,ááØ ∞
EsPadreáá± ∏
=ááπ ∫
falseááª ¿
,áá¿ ¡
IdPadreáá¬ …
=áá  À
$numááÃ œ
,ááœ –
Rolesáá— ÷
=áá◊ ÿ
newááŸ ‹
Listáá› ·
<áá· ‚
stringáá‚ Ë
>ááË È
{ááÍ Î
$strááÏ Ç
}ááÉ Ñ
}ááÖ Ü
)ááÜ á
;ááá à
menu
àà 
.
àà 
Add
àà 
(
àà 
new
àà 
NavBar
àà 
{
àà  !
Id
àà" $
=
àà% &
$num
àà' *
,
àà* +
Nombre
àà, 2
=
àà3 4
$str
àà5 A
,
ààA B
Controlador
ààC N
=
ààO P
$str
ààQ [
,
àà[ \
Accion
àà] c
=
ààd e
$str
ààf r
,
ààr s
Icono
ààt y
=
ààz {
$stràà| è
,ààè ê
Estadoààë ó
=ààò ô
trueààö û
,ààû ü
EsPadreàà† ß
=àà® ©
falseàà™ Ø
,ààØ ∞
IdPadreàà± ∏
=ààπ ∫
$numààª æ
,ààæ ø
Rolesàà¿ ≈
=àà∆ «
newàà» À
ListààÃ –
<àà– —
stringàà— ◊
>àà◊ ÿ
{ààŸ ⁄
$stràà€ Ò
}ààÚ Û
}ààÙ ı
)ààı ˆ
;ààˆ ˜
menu
ââ 
.
ââ 
Add
ââ 
(
ââ 
new
ââ 
NavBar
ââ 
{
ââ  !
Id
ââ" $
=
ââ% &
$num
ââ' *
,
ââ* +
Nombre
ââ, 2
=
ââ3 4
$str
ââ5 E
,
ââE F
Controlador
ââG R
=
ââS T
$str
ââU ^
,
ââ^ _
Accion
ââ` f
=
ââg h
$str
ââi y
,
âây z
Iconoââ{ Ä
=ââÅ Ç
$strââÉ ñ
,ââñ ó
Estadoââò û
=ââü †
trueââ° •
,ââ• ¶
EsPadreââß Æ
=ââØ ∞
falseââ± ∂
,ââ∂ ∑
IdPadreââ∏ ø
=ââ¿ ¡
$numââ¬ ≈
,ââ≈ ∆
Rolesââ« Ã
=ââÕ Œ
newââœ “
Listââ” ◊
<ââ◊ ÿ
stringââÿ ﬁ
>ââﬁ ﬂ
{ââ‡ ·
$strââ‚ ¯
}ââ˘ ˙
}ââ˚ ¸
)ââ¸ ˝
;ââ˝ ˛
menu
ää 
.
ää 
Add
ää 
(
ää 
new
ää 
NavBar
ää 
{
ää  !
Id
ää" $
=
ää% &
$num
ää' *
,
ää* +
Nombre
ää, 2
=
ää3 4
$str
ää5 E
,
ääE F
Controlador
ääG R
=
ääS T
$str
ääU _
,
ää_ `
Accion
ääa g
=
ääh i
$str
ääj t
,
äät u
Icono
ääv {
=
ää| }
$strää~ ë
,ääë í
Estadoääì ô
=ääö õ
trueääú †
,ää† °
EsPadreää¢ ©
=ää™ ´
falseää¨ ±
,ää± ≤
IdPadreää≥ ∫
=ääª º
$numääΩ ¿
,ää¿ ¡
Rolesää¬ «
=ää» …
newää  Õ
ListääŒ “
<ää“ ”
stringää” Ÿ
>ääŸ ⁄
{ää€ ‹
$strää› Ë
,ääË È
$strääÍ Ä
}ääÅ Ç
}ääÉ Ñ
)ääÑ Ö
;ääÖ Ü
menu
ãã 
.
ãã 
Add
ãã 
(
ãã 
new
ãã 
NavBar
ãã 
{
ãã  !
Id
ãã" $
=
ãã% &
$num
ãã' *
,
ãã* +
Nombre
ãã, 2
=
ãã3 4
$str
ãã5 D
,
ããD E
Controlador
ããF Q
=
ããR S
$str
ããT ^
,
ãã^ _
Accion
ãã` f
=
ããg h
$str
ããi }
,
ãã} ~
Iconoãã Ñ
=ããÖ Ü
$strããá ö
,ããö õ
Estadoããú ¢
=ãã£ §
trueãã• ©
,ãã© ™
EsPadreãã´ ≤
=ãã≥ ¥
falseããµ ∫
,ãã∫ ª
IdPadreããº √
=ããƒ ≈
$numãã∆ …
,ãã…  
RolesããÀ –
=ãã— “
newãã” ÷
Listãã◊ €
<ãã€ ‹
stringãã‹ ‚
>ãã‚ „
{ãã‰ Â
$strããÊ Ò
,ããÒ Ú
$strããÛ â
}ããä ã
}ããå ç
)ããç é
;ããé è
menu
åå 
.
åå 
Add
åå 
(
åå 
new
åå 
NavBar
åå 
{
åå  !
Id
åå" $
=
åå% &
$num
åå' *
,
åå* +
Nombre
åå, 2
=
åå3 4
$str
åå5 I
,
ååI J
Controlador
ååK V
=
ååW X
$str
ååY k
,
ååk l
Accion
ååm s
=
ååt u
$strååv ç
,ååç é
Iconoååè î
=ååï ñ
$strååó ©
,åå© ™
Estadoåå´ ±
=åå≤ ≥
trueåå¥ ∏
,åå∏ π
EsPadreåå∫ ¡
=åå¬ √
falseååƒ …
,åå…  
IdPadreååÀ “
=åå” ‘
$numåå’ ÿ
,ååÿ Ÿ
Rolesåå⁄ ﬂ
=åå‡ ·
newåå‚ Â
ListååÊ Í
<ååÍ Î
stringååÎ Ò
>ååÒ Ú
{ååÛ Ù
$strååı ˛
,åå˛ ˇ
$strååÄ ñ
}ååó ò
}ååô ö
)ååö õ
;ååõ ú
menu
éé 
.
éé 
Add
éé 
(
éé 
new
éé 
NavBar
éé 
{
éé  !
Id
éé" $
=
éé% &
$num
éé' *
,
éé* +
Nombre
éé, 2
=
éé3 4
$str
éé5 R
,
ééR S
Controlador
ééT _
=
éé` a
$str
ééb l
,
éél m
Accion
één t
=
ééu v
$strééw Ç
,ééÇ É
IconoééÑ â
=ééä ã
$strééå ü
,ééü †
Estadoéé° ß
=éé® ©
trueéé™ Æ
,ééÆ Ø
EsPadreéé∞ ∑
=éé∏ π
falseéé∫ ø
,ééø ¿
IdPadreéé¡ »
=éé…  
$numééÀ Œ
,ééŒ œ
Roleséé– ’
=éé÷ ◊
newééÿ €
Listéé‹ ‡
<éé‡ ·
stringéé· Á
>ééÁ Ë
{ééÈ Í
$strééÎ ˆ
}éé˜ ¯
}éé˘ ˙
)éé˙ ˚
;éé˚ ¸
menu
èè 
.
èè 
Add
èè 
(
èè 
new
èè 
NavBar
èè 
{
èè  !
Id
èè" $
=
èè% &
$num
èè' *
,
èè* +
Nombre
èè, 2
=
èè3 4
$str
èè5 J
,
èèJ K
Controlador
èèL W
=
èèX Y
$str
èèZ d
,
èèd e
Accion
èèf l
=
èèm n
$str
èèo w
,
èèw x
Icono
èèy ~
=èè Ä
$strèèÅ î
,èèî ï
Estadoèèñ ú
=èèù û
trueèèü £
,èè£ §
EsPadreèè• ¨
=èè≠ Æ
falseèèØ ¥
,èè¥ µ
IdPadreèè∂ Ω
=èèæ ø
$numèè¿ √
,èè√ ƒ
Rolesèè≈  
=èèÀ Ã
newèèÕ –
Listèè— ’
<èè’ ÷
stringèè÷ ‹
>èè‹ ›
{èèﬁ ﬂ
$strèè‡ ˆ
,èèˆ ˜
$strèè¯ É
}èèÑ Ö
}èèÜ á
)èèá à
;èèà â
if
êê 
(
êê 
ActorSettings
êê 
.
êê 
Default
êê %
.
êê% &F
8PermitirRegistroCodigoDigemidEnEstableciemientoComercial
êê& ^
)
êê^ _
menu
ëë 
.
ëë 
Add
ëë 
(
ëë 
new
ëë 
NavBar
ëë #
{
ëë$ %
Id
ëë& (
=
ëë) *
$num
ëë+ .
,
ëë. /
Nombre
ëë0 6
=
ëë7 8
$str
ëë9 J
,
ëëJ K
Controlador
ëëL W
=
ëëX Y
$str
ëëZ d
,
ëëd e
Accion
ëëf l
=
ëëm n
$str
ëëo 
,ëë Ä
IconoëëÅ Ü
=ëëá à
$strëëâ ú
,ëëú ù
Estadoëëû §
=ëë• ¶
trueëëß ´
,ëë´ ¨
EsPadreëë≠ ¥
=ëëµ ∂
falseëë∑ º
,ëëº Ω
IdPadreëëæ ≈
=ëë∆ «
$numëë» À
,ëëÀ Ã
RolesëëÕ “
=ëë” ‘
newëë’ ÿ
ListëëŸ ›
<ëë› ﬁ
stringëëﬁ ‰
>ëë‰ Â
{ëëÊ Á
$strëëË ˛
,ëë˛ ˇ
$strëëÄ ã
}ëëå ç
}ëëé è
)ëëè ê
;ëëê ë
menu
íí 
.
íí 
Add
íí 
(
íí 
new
íí 
NavBar
íí 
{
íí  !
Id
íí" $
=
íí% &
$num
íí' *
,
íí* +
Nombre
íí, 2
=
íí3 4
$str
íí5 F
,
ííF G
Controlador
ííH S
=
ííT U
$str
ííV `
,
íí` a
Accion
ííb h
=
ííi j
$str
íík |
,
íí| }
Iconoíí~ É
=ííÑ Ö
$strííÜ ô
,ííô ö
Estadoííõ °
=íí¢ £
trueíí§ ®
,íí® ©
EsPadreíí™ ±
=íí≤ ≥
falseíí¥ π
,ííπ ∫
IdPadreííª ¬
=íí√ ƒ
$numíí≈ »
,íí» …
Rolesíí  œ
=íí– —
newíí“ ’
Listíí÷ ⁄
<íí⁄ €
stringíí€ ·
>íí· ‚
{íí„ ‰
$strííÂ ˚
}íí¸ ˝
}íí˛ ˇ
)ííˇ Ä
;ííÄ Å
menu
ìì 
.
ìì 
Add
ìì 
(
ìì 
new
ìì 
NavBar
ìì 
{
ìì  !
Id
ìì" $
=
ìì% &
$num
ìì' *
,
ìì* +
Nombre
ìì, 2
=
ìì3 4
$str
ìì5 O
,
ììO P
Icono
ììQ V
=
ììW X
$str
ììY l
,
ììl m
Estado
ììn t
=
ììu v
true
ììw {
,
ìì{ |
EsPadreìì} Ñ
=ììÖ Ü
trueììá ã
,ììã å
IdPadreììç î
=ììï ñ
$numììó ö
,ììö õ
Rolesììú °
=ìì¢ £
newìì§ ß
Listìì® ¨
<ìì¨ ≠
stringìì≠ ≥
>ìì≥ ¥
{ììµ ∂
$strìì∑ Õ
}ììŒ œ
}ìì– —
)ìì— “
;ìì“ ”
foreach
ïï 
(
ïï 
var
ïï 
item
ïï 
in
ïï  
caracteristicas
ïï! 0
)
ïï0 1
{
ññ 
menu
óó 
.
óó 
Add
óó 
(
óó 
new
óó 
NavBar
óó #
{
óó$ %
Id
óó& (
=
óó) *
(
óó+ ,
$num
óó, /
+
óó0 1
cont
óó2 6
)
óó6 7
,
óó7 8
Nombre
óó9 ?
=
óó@ A
CultureInfo
óóB M
.
óóM N
CurrentCulture
óóN \
.
óó\ ]
TextInfo
óó] e
.
óóe f
ToTitleCase
óóf q
(
óóq r
CultureInfo
óór }
.
óó} ~
CurrentCultureóó~ å
.óóå ç
TextInfoóóç ï
.óóï ñ
ToLoweróóñ ù
(óóù û
itemóóû ¢
.óó¢ £
nombreóó£ ©
)óó© ™
)óó™ ´
,óó´ ¨
Controladoróó≠ ∏
=óóπ ∫
$stróóª ≈
,óó≈ ∆
Accionóó« Õ
=óóŒ œ
$stróó– ·
,óó· ‚
Iconoóó„ Ë
=óóÈ Í
$stróóÎ ˛
,óó˛ ˇ
EstadoóóÄ Ü
=óóá à
trueóóâ ç
,óóç é
EsPadreóóè ñ
=óóó ò
falseóóô û
,óóû ü
IdPadreóó† ß
=óó® ©
$numóó™ ≠
,óó≠ Æ 
IdCaracteristicaóóØ ø
=óó¿ ¡
itemóó¬ ∆
.óó∆ «
idóó« …
,óó…  
RolesóóÀ –
=óó— “
newóó” ÷
Listóó◊ €
<óó€ ‹
stringóó‹ ‚
>óó‚ „
{óó‰ Â
$stróóÊ ¸
}óó˝ ˛
}óóˇ Ä
)óóÄ Å
;óóÅ Ç
cont
òò 
++
òò 
;
òò 
}
ôô 
menu
ùù 
.
ùù 
Add
ùù 
(
ùù 
new
ùù 
NavBar
ùù 
{
ùù  !
Id
ùù" $
=
ùù% &
$num
ùù' +
,
ùù+ ,
Nombre
ùù- 3
=
ùù4 5
$str
ùù6 ?
,
ùù? @
Icono
ùùA F
=
ùùG H
$str
ùùI c
,
ùùc d
Estado
ùùe k
=
ùùl m
true
ùùn r
,
ùùr s
EsPadre
ùùt {
=
ùù| }
trueùù~ Ç
,ùùÇ É
IdPadreùùÑ ã
=ùùå ç
$numùùé è
,ùùè ê
Rolesùùë ñ
=ùùó ò
newùùô ú
Listùùù °
<ùù° ¢
stringùù¢ ®
>ùù® ©
{ùù™ ´
$strùù¨ ∂
,ùù∂ ∑
$strùù∏ Œ
}ùùœ –
}ùù— “
)ùù“ ”
;ùù” ‘
menu
ûû 
.
ûû 
Add
ûû 
(
ûû 
new
ûû 
NavBar
ûû 
{
ûû  !
Id
ûû" $
=
ûû% &
$num
ûû' +
,
ûû+ ,
Nombre
ûû- 3
=
ûû4 5
$str
ûû6 ;
,
ûû; <
Controlador
ûû= H
=
ûûI J
$str
ûûK T
,
ûûT U
Accion
ûûV \
=
ûû] ^
$str
ûû_ h
,
ûûh i
Icono
ûûj o
=
ûûp q
$strûûr ç
,ûûç é
Estadoûûè ï
=ûûñ ó
trueûûò ú
,ûûú ù
EsPadreûûû •
=ûû¶ ß
falseûû® ≠
,ûû≠ Æ
IdPadreûûØ ∂
=ûû∑ ∏
$numûûπ Ω
,ûûΩ æ
Rolesûûø ƒ
=ûû≈ ∆
newûû«  
ListûûÀ œ
<ûûœ –
stringûû– ÷
>ûû÷ ◊
{ûûÿ Ÿ
$strûû⁄ ‰
}ûûÂ Ê
}ûûÁ Ë
)ûûË È
;ûûÈ Í
menu
üü 
.
üü 
Add
üü 
(
üü 
new
üü 
NavBar
üü 
{
üü  !
Id
üü" $
=
üü% &
$num
üü' +
,
üü+ ,
Nombre
üü- 3
=
üü4 5
$str
üü6 K
,
üüK L
Controlador
üüM X
=
üüY Z
$str
üü[ d
,
üüd e
Accion
üüf l
=
üüm n
$strüüo Ç
,üüÇ É
IconoüüÑ â
=üüä ã
$strüüå ü
,üüü †
Estadoüü° ß
=üü® ©
trueüü™ Æ
,üüÆ Ø
EsPadreüü∞ ∑
=üü∏ π
falseüü∫ ø
,üüø ¿
IdPadreüü¡ »
=üü…  
$numüüÀ œ
,üüœ –
Rolesüü— ÷
=üü◊ ÿ
newüüŸ ‹
Listüü› ·
<üü· ‚
stringüü‚ Ë
>üüË È
{üüÍ Î
$strüüÏ Ç
}üüÉ Ñ
}üüÖ Ü
)üüÜ á
;üüá à
menu
†† 
.
†† 
Add
†† 
(
†† 
new
†† 
NavBar
†† 
{
††  !
Id
††" $
=
††% &
$num
††' +
,
††+ ,
Nombre
††- 3
=
††4 5
$str
††6 I
,
††I J
Controlador
††K V
=
††W X
$str
††Y b
,
††b c
Accion
††d j
=
††k l
$str
††m |
,
††| }
Icono††~ É
=††Ñ Ö
$str††Ü ô
,††ô ö
Estado††õ °
=††¢ £
true††§ ®
,††® ©
EsPadre††™ ±
=††≤ ≥
false††¥ π
,††π ∫
IdPadre††ª ¬
=††√ ƒ
$num††≈ …
,††…  
Roles††À –
=††— “
new††” ÷
List††◊ €
<††€ ‹
string††‹ ‚
>††‚ „
{††‰ Â
$str††Ê ¸
}††˝ ˛
}††ˇ Ä
)††Ä Å
;††Å Ç
menu
§§ 
.
§§ 
Add
§§ 
(
§§ 
new
§§ 
NavBar
§§ 
{
§§  !
Id
§§" $
=
§§% &
$num
§§' +
,
§§+ ,
Nombre
§§- 3
=
§§4 5
$str
§§6 A
,
§§A B
Controlador
§§C N
=
§§O P
$str
§§Q Z
,
§§Z [
Accion
§§\ b
=
§§c d
$str
§§e p
,
§§p q
Icono
§§r w
=
§§x y
$str§§z ì
,§§ì î
Estado§§ï õ
=§§ú ù
true§§û ¢
,§§¢ £
EsPadre§§§ ´
=§§¨ ≠
false§§Æ ≥
,§§≥ ¥
IdPadre§§µ º
=§§Ω æ
$num§§ø ¿
,§§¿ ¡
Roles§§¬ «
=§§» …
new§§  Õ
List§§Œ “
<§§“ ”
string§§” Ÿ
>§§Ÿ ⁄
{§§€ ‹
$str§§› Ë
}§§È Í
}§§Î Ï
)§§Ï Ì
;§§Ì Ó
menu
®® 
.
®® 
Add
®® 
(
®® 
new
®® 
NavBar
®® 
{
®®  !
Id
®®" $
=
®®% &
$num
®®' +
,
®®+ ,
Nombre
®®- 3
=
®®4 5
$str
®®6 @
,
®®@ A
Icono
®®B G
=
®®H I
$str
®®J ]
,
®®] ^
Estado
®®_ e
=
®®f g
true
®®h l
,
®®l m
EsPadre
®®n u
=
®®v w
true
®®x |
,
®®| }
IdPadre®®~ Ö
=®®Ü á
$num®®à â
,®®â ä
Roles®®ã ê
=®®ë í
new®®ì ñ
List®®ó õ
<®®õ ú
string®®ú ¢
>®®¢ £
{®®§ •
$str®®¶ º
,®®º Ω
$str®®æ œ
}®®– —
}®®“ ”
)®®” ‘
;®®‘ ’
menu
©© 
.
©© 
Add
©© 
(
©© 
new
©© 
NavBar
©© 
{
©©  !
Id
©©" $
=
©©% &
$num
©©' +
,
©©+ ,
Nombre
©©- 3
=
©©4 5
$str
©©6 ;
,
©©; <
Controlador
©©= H
=
©©I J
$str
©©K T
,
©©T U
Accion
©©V \
=
©©] ^
$str
©©_ i
,
©©i j
Icono
©©k p
=
©©q r
$str©©s à
,©©à â
Estado©©ä ê
=©©ë í
true©©ì ó
,©©ó ò
EsPadre©©ô †
=©©° ¢
false©©£ ®
,©©® ©
IdPadre©©™ ±
=©©≤ ≥
$num©©¥ ∏
,©©∏ π
Roles©©∫ ø
=©©¿ ¡
new©©¬ ≈
List©©∆  
<©©  À
string©©À —
>©©— “
{©©” ‘
$str©©’ Ê
,©©Ê Á
$str©©Ë ˛
}©©ˇ Ä
}©©Å Ç
)©©Ç É
;©©É Ñ
menu
™™ 
.
™™ 
Add
™™ 
(
™™ 
new
™™ 
NavBar
™™ 
{
™™  !
Id
™™" $
=
™™% &
$num
™™' +
,
™™+ ,
Nombre
™™- 3
=
™™4 5
$str
™™6 =
,
™™= >
Controlador
™™? J
=
™™K L
$str
™™M W
,
™™W X
Accion
™™Y _
=
™™` a
$str
™™b j
,
™™j k
Icono
™™l q
=
™™r s
$str™™t ä
,™™ä ã
Estado™™å í
=™™ì î
true™™ï ô
,™™ô ö
EsPadre™™õ ¢
=™™£ §
false™™• ™
,™™™ ´
IdPadre™™¨ ≥
=™™¥ µ
$num™™∂ ∫
,™™∫ ª
Roles™™º ¡
=™™¬ √
new™™ƒ «
List™™» Ã
<™™Ã Õ
string™™Õ ”
>™™” ‘
{™™’ ÷
$str™™◊ Ë
,™™Ë È
$str™™Í Ä
}™™Å Ç
}™™É Ñ
)™™Ñ Ö
;™™Ö Ü
menu
ÆÆ 
.
ÆÆ 
Add
ÆÆ 
(
ÆÆ 
new
ÆÆ 
NavBar
ÆÆ 
{
ÆÆ  !
Id
ÆÆ" $
=
ÆÆ% &
$num
ÆÆ' +
,
ÆÆ+ ,
Nombre
ÆÆ- 3
=
ÆÆ4 5
$str
ÆÆ6 J
,
ÆÆJ K
Icono
ÆÆL Q
=
ÆÆR S
$str
ÆÆT f
,
ÆÆf g
Estado
ÆÆh n
=
ÆÆo p
true
ÆÆq u
,
ÆÆu v
EsPadre
ÆÆw ~
=ÆÆ Ä
trueÆÆÅ Ö
,ÆÆÖ Ü
IdPadreÆÆá é
=ÆÆè ê
$numÆÆë í
,ÆÆí ì
RolesÆÆî ô
=ÆÆö õ
newÆÆú ü
ListÆÆ† §
<ÆÆ§ •
stringÆÆ• ´
>ÆÆ´ ¨
{ÆÆ≠ Æ
$strÆÆØ ¿
}ÆÆ¡ ¬
}ÆÆ√ ƒ
)ÆÆƒ ≈
;ÆÆ≈ ∆
menu
ØØ 
.
ØØ 
Add
ØØ 
(
ØØ 
new
ØØ 
NavBar
ØØ 
{
ØØ  !
Id
ØØ" $
=
ØØ% &
$num
ØØ' +
,
ØØ+ ,
Nombre
ØØ- 3
=
ØØ4 5
$str
ØØ6 <
,
ØØ< =
Controlador
ØØ> I
=
ØØJ K
$str
ØØL ^
,
ØØ^ _
Accion
ØØ` f
=
ØØg h
$str
ØØi o
,
ØØo p
Icono
ØØq v
=
ØØw x
$strØØy å
,ØØå ç
EstadoØØé î
=ØØï ñ
trueØØó õ
,ØØõ ú
EsPadreØØù §
=ØØ• ¶
falseØØß ¨
,ØØ¨ ≠
IdPadreØØÆ µ
=ØØ∂ ∑
$numØØ∏ º
,ØØº Ω
RolesØØæ √
=ØØƒ ≈
newØØ∆ …
ListØØ  Œ
<ØØŒ œ
stringØØœ ’
>ØØ’ ÷
{ØØ◊ ÿ
$strØØŸ Í
}ØØÎ Ï
}ØØÌ Ó
)ØØÓ Ô
;ØØÔ 
menu
∞∞ 
.
∞∞ 
Add
∞∞ 
(
∞∞ 
new
∞∞ 
NavBar
∞∞ 
{
∞∞  !
Id
∞∞" $
=
∞∞% &
$num
∞∞' +
,
∞∞+ ,
Nombre
∞∞- 3
=
∞∞4 5
$str
∞∞6 A
,
∞∞A B
Controlador
∞∞C N
=
∞∞O P
$str
∞∞Q c
,
∞∞c d
Accion
∞∞e k
=
∞∞l m
$str
∞∞n x
,
∞∞x y
Icono
∞∞z 
=∞∞Ä Å
$str∞∞Ç ï
,∞∞ï ñ
Estado∞∞ó ù
=∞∞û ü
true∞∞† §
,∞∞§ •
EsPadre∞∞¶ ≠
=∞∞Æ Ø
false∞∞∞ µ
,∞∞µ ∂
IdPadre∞∞∑ æ
=∞∞ø ¿
$num∞∞¡ ≈
,∞∞≈ ∆
Roles∞∞« Ã
=∞∞Õ Œ
new∞∞œ “
List∞∞” ◊
<∞∞◊ ÿ
string∞∞ÿ ﬁ
>∞∞ﬁ ﬂ
{∞∞‡ ·
$str∞∞‚ Û
}∞∞Ù ı
}∞∞ˆ ˜
)∞∞˜ ¯
;∞∞¯ ˘
foreach
≤≤ 
(
≤≤ 
var
≤≤ 
item
≤≤ 
in
≤≤  

sucursales
≤≤! +
)
≤≤+ ,
{
≥≥ 
menu
¥¥ 
.
¥¥ 
Add
¥¥ 
(
¥¥ 
new
¥¥ 
NavBar
¥¥ #
{
¥¥$ %
Id
¥¥& (
=
¥¥) *
(
¥¥+ ,
$num
¥¥, 0
+
¥¥1 2
cont
¥¥3 7
)
¥¥7 8
,
¥¥8 9
Nombre
¥¥: @
=
¥¥A B
CultureInfo
¥¥C N
.
¥¥N O
CurrentCulture
¥¥O ]
.
¥¥] ^
TextInfo
¥¥^ f
.
¥¥f g
ToTitleCase
¥¥g r
(
¥¥r s
CultureInfo
¥¥s ~
.
¥¥~ 
CurrentCulture¥¥ ç
.¥¥ç é
TextInfo¥¥é ñ
.¥¥ñ ó
ToLower¥¥ó û
(¥¥û ü
item¥¥ü £
.¥¥£ §
Nombre¥¥§ ™
)¥¥™ ´
)¥¥´ ¨
,¥¥¨ ≠
Controlador¥¥Æ π
=¥¥∫ ª
$str¥¥º Œ
,¥¥Œ œ
Accion¥¥– ÷
=¥¥◊ ÿ
$str¥¥Ÿ ‰
,¥¥‰ Â
Icono¥¥Ê Î
=¥¥Ï Ì
$str¥¥Ó Å
,¥¥Å Ç
Estado¥¥É â
=¥¥ä ã
true¥¥å ê
,¥¥ê ë
EsPadre¥¥í ô
=¥¥ö õ
false¥¥ú °
,¥¥° ¢
IdPadre¥¥£ ™
=¥¥´ ¨
$num¥¥≠ ±
,¥¥± ≤

IdSucursal¥¥≥ Ω
=¥¥æ ø
item¥¥¿ ƒ
.¥¥ƒ ≈
Id¥¥≈ «
,¥¥« »
Roles¥¥… Œ
=¥¥œ –
new¥¥— ‘
List¥¥’ Ÿ
<¥¥Ÿ ⁄
string¥¥⁄ ‡
>¥¥‡ ·
{¥¥‚ „
$str¥¥‰ ˙
}¥¥˚ ¸
}¥¥˝ ˛
)¥¥˛ ˇ
;¥¥ˇ Ä
cont
µµ 
++
µµ 
;
µµ 
}
∂∂ 
menu
∫∫ 
.
∫∫ 
Add
∫∫ 
(
∫∫ 
new
∫∫ 
NavBar
∫∫ 
{
∫∫  !
Id
∫∫" $
=
∫∫% &
$num
∫∫' +
,
∫∫+ ,
Nombre
∫∫- 3
=
∫∫4 5
$str
∫∫6 D
,
∫∫D E
Icono
∫∫F K
=
∫∫L M
$str
∫∫N a
,
∫∫a b
Estado
∫∫c i
=
∫∫j k
true
∫∫l p
,
∫∫p q
EsPadre
∫∫r y
=
∫∫z {
true∫∫| Ä
,∫∫Ä Å
IdPadre∫∫Ç â
=∫∫ä ã
$num∫∫å ç
,∫∫ç é
Roles∫∫è î
=∫∫ï ñ
new∫∫ó ö
List∫∫õ ü
<∫∫ü †
string∫∫† ¶
>∫∫¶ ß
{∫∫® ©
$str∫∫™ ¥
,∫∫¥ µ
$str∫∫∂ «
}∫∫» …
}∫∫  À
)∫∫À Ã
;∫∫Ã Õ
menu
ªª 
.
ªª 
Add
ªª 
(
ªª 
new
ªª 
NavBar
ªª 
{
ªª  !
Id
ªª" $
=
ªª% &
$num
ªª' +
,
ªª+ ,
Nombre
ªª- 3
=
ªª4 5
$str
ªª6 K
,
ªªK L
Controlador
ªªM X
=
ªªY Z
$str
ªª[ s
,
ªªs t
Accion
ªªu {
=
ªª| }
$strªª~ ì
,ªªì î
Iconoªªï ö
=ªªõ ú
$strªªù Ø
,ªªØ ∞
Estadoªª± ∑
=ªª∏ π
trueªª∫ æ
,ªªæ ø
EsPadreªª¿ «
=ªª» …
falseªª  œ
,ªªœ –
IdPadreªª— ÿ
=ªªŸ ⁄
$numªª€ ﬂ
,ªªﬂ ‡
Rolesªª· Ê
=ªªÁ Ë
newªªÈ Ï
ListªªÌ Ò
<ªªÒ Ú
stringªªÚ ¯
>ªª¯ ˘
{ªª˙ ˚
$strªª¸ Ü
}ªªá à
}ªªâ ä
)ªªä ã
;ªªã å
menu
ºº 
.
ºº 
Add
ºº 
(
ºº 
new
ºº 
NavBar
ºº 
{
ºº  !
Id
ºº" $
=
ºº% &
$num
ºº' +
,
ºº+ ,
Nombre
ºº- 3
=
ºº4 5
$str
ºº6 K
,
ººK L
Controlador
ººM X
=
ººY Z
$str
ºº[ s
,
ººs t
Accion
ººu {
=
ºº| }
$strºº~ ë
,ººë í
Iconoººì ò
=ººô ö
$strººõ ≠
,ºº≠ Æ
EstadoººØ µ
=ºº∂ ∑
trueºº∏ º
,ººº Ω
EsPadreººæ ≈
=ºº∆ «
falseºº» Õ
,ººÕ Œ
IdPadreººœ ÷
=ºº◊ ÿ
$numººŸ ›
,ºº› ﬁ
Rolesººﬂ ‰
=ººÂ Ê
newººÁ Í
ListººÎ Ô
<ººÔ 
stringºº ˆ
>ººˆ ˜
{ºº¯ ˘
$strºº˙ Ñ
}ººÖ Ü
}ººá à
)ººà â
;ººâ ä
menu
ΩΩ 
.
ΩΩ 
Add
ΩΩ 
(
ΩΩ 
new
ΩΩ 
NavBar
ΩΩ 
{
ΩΩ  !
Id
ΩΩ" $
=
ΩΩ% &
$num
ΩΩ' +
,
ΩΩ+ ,
Nombre
ΩΩ- 3
=
ΩΩ4 5
$str
ΩΩ6 W
,
ΩΩW X
Controlador
ΩΩY d
=
ΩΩe f
$str
ΩΩg 
,ΩΩ Ä
AccionΩΩÅ á
=ΩΩà â
$strΩΩä ô
,ΩΩô ö
IconoΩΩõ †
=ΩΩ° ¢
$strΩΩ£ µ
,ΩΩµ ∂
EstadoΩΩ∑ Ω
=ΩΩæ ø
trueΩΩ¿ ƒ
,ΩΩƒ ≈
EsPadreΩΩ∆ Õ
=ΩΩŒ œ
falseΩΩ– ’
,ΩΩ’ ÷
IdPadreΩΩ◊ ﬁ
=ΩΩﬂ ‡
$numΩΩ· Â
,ΩΩÂ Ê
RolesΩΩÁ Ï
=ΩΩÌ Ó
newΩΩÔ Ú
ListΩΩÛ ˜
<ΩΩ˜ ¯
stringΩΩ¯ ˛
>ΩΩ˛ ˇ
{ΩΩÄ Å
$strΩΩÇ ì
}ΩΩî ï
}ΩΩñ ó
)ΩΩó ò
;ΩΩò ô
menu
ææ 
.
ææ 
Add
ææ 
(
ææ 
new
ææ 
NavBar
ææ 
{
ææ  !
Id
ææ" $
=
ææ% &
$num
ææ' +
,
ææ+ ,
Nombre
ææ- 3
=
ææ4 5
$str
ææ6 K
,
ææK L
Controlador
ææM X
=
ææY Z
$str
ææ[ o
,
ææo p
Accion
ææq w
=
ææx y
$strææz å
,ææå ç
Iconoææé ì
=ææî ï
$strææñ ®
,ææ® ©
Estadoææ™ ∞
=ææ± ≤
trueææ≥ ∑
,ææ∑ ∏
EsPadreææπ ¿
=ææ¡ ¬
falseææ√ »
,ææ» …
IdPadreææ  —
=ææ“ ”
$numææ‘ ÿ
,ææÿ Ÿ
Rolesææ⁄ ﬂ
=ææ‡ ·
newææ‚ Â
ListææÊ Í
<ææÍ Î
stringææÎ Ò
>ææÒ Ú
{ææÛ Ù
$strææı ˇ
}ææÄ Å
}ææÇ É
)ææÉ Ñ
;ææÑ Ö
menu
øø 
.
øø 
Add
øø 
(
øø 
new
øø 
NavBar
øø 
{
øø  !
Id
øø" $
=
øø% &
$num
øø' +
,
øø+ ,
Nombre
øø- 3
=
øø4 5
$str
øø6 C
,
øøC D
Controlador
øøE P
=
øøQ R
$str
øøS _
,
øø_ `
Accion
øøa g
=
øøh i
$str
øøj v
,
øøv w
Icono
øøx }
=
øø~ 
$strøøÄ õ
,øøõ ú
Estadoøøù £
=øø§ •
trueøø¶ ™
,øø™ ´
EsPadreøø¨ ≥
=øø¥ µ
falseøø∂ ª
,øøª º
IdPadreøøΩ ƒ
=øø≈ ∆
$numøø« À
,øøÀ Ã
RolesøøÕ “
=øø” ‘
newøø’ ÿ
ListøøŸ ›
<øø› ﬁ
stringøøﬁ ‰
>øø‰ Â
{øøÊ Á
$strøøË ˘
}øø˙ ˚
}øø¸ ˝
)øø˝ ˛
;øø˛ ˇ
menu
¿¿ 
.
¿¿ 
Add
¿¿ 
(
¿¿ 
new
¿¿ 
NavBar
¿¿ 
{
¿¿  !
Id
¿¿" $
=
¿¿% &
$num
¿¿' +
,
¿¿+ ,
Nombre
¿¿- 3
=
¿¿4 5
$str
¿¿6 =
,
¿¿= >
Controlador
¿¿? J
=
¿¿K L
$str
¿¿M Z
,
¿¿Z [
Accion
¿¿\ b
=
¿¿c d
$str
¿¿e y
,
¿¿y z
Icono¿¿{ Ä
=¿¿Å Ç
$str¿¿É ñ
,¿¿ñ ó
Estado¿¿ò û
=¿¿ü †
true¿¿° •
,¿¿• ¶
EsPadre¿¿ß Æ
=¿¿Ø ∞
false¿¿± ∂
,¿¿∂ ∑
IdPadre¿¿∏ ø
=¿¿¿ ¡
$num¿¿¬ ∆
,¿¿∆ «
Roles¿¿» Õ
=¿¿Œ œ
new¿¿– ”
List¿¿‘ ÿ
<¿¿ÿ Ÿ
string¿¿Ÿ ﬂ
>¿¿ﬂ ‡
{¿¿· ‚
$str¿¿„ Ù
}¿¿ı ˆ
}¿¿˜ ¯
)¿¿¯ ˘
;¿¿˘ ˙
menu
¡¡ 
.
¡¡ 
Add
¡¡ 
(
¡¡ 
new
¡¡ 
NavBar
¡¡ 
{
¡¡  !
Id
¡¡" $
=
¡¡% &
$num
¡¡' +
,
¡¡+ ,
Nombre
¡¡- 3
=
¡¡4 5
$str
¡¡6 >
,
¡¡> ?
Controlador
¡¡@ K
=
¡¡L M
$str
¡¡N [
,
¡¡[ \
Accion
¡¡] c
=
¡¡d e
$str
¡¡f {
,
¡¡{ |
Icono¡¡} Ç
=¡¡É Ñ
$str¡¡Ö ò
,¡¡ò ô
Estado¡¡ö †
=¡¡° ¢
true¡¡£ ß
,¡¡ß ®
EsPadre¡¡© ∞
=¡¡± ≤
false¡¡≥ ∏
,¡¡∏ π
IdPadre¡¡∫ ¡
=¡¡¬ √
$num¡¡ƒ »
,¡¡» …
Roles¡¡  œ
=¡¡– —
new¡¡“ ’
List¡¡÷ ⁄
<¡¡⁄ €
string¡¡€ ·
>¡¡· ‚
{¡¡„ ‰
$str¡¡Â ˆ
}¡¡˜ ¯
}¡¡˘ ˙
)¡¡˙ ˚
;¡¡˚ ¸
menu
≈≈ 
.
≈≈ 
Add
≈≈ 
(
≈≈ 
new
≈≈ 
NavBar
≈≈ 
{
≈≈  !
Id
≈≈" $
=
≈≈% &
$num
≈≈' +
,
≈≈+ ,
Nombre
≈≈- 3
=
≈≈4 5
$str
≈≈6 E
,
≈≈E F
Icono
≈≈G L
=
≈≈M N
$str
≈≈O `
,
≈≈` a
Estado
≈≈b h
=
≈≈i j
true
≈≈k o
,
≈≈o p
EsPadre
≈≈q x
=
≈≈y z
true
≈≈{ 
,≈≈ Ä
IdPadre≈≈Å à
=≈≈â ä
$num≈≈ã å
,≈≈å ç
Roles≈≈é ì
=≈≈î ï
new≈≈ñ ô
List≈≈ö û
<≈≈û ü
string≈≈ü •
>≈≈• ¶
{≈≈ß ®
$str≈≈© ∫
}≈≈ª º
}≈≈Ω æ
)≈≈æ ø
;≈≈ø ¿
menu
∆∆ 
.
∆∆ 
Add
∆∆ 
(
∆∆ 
new
∆∆ 
NavBar
∆∆ 
{
∆∆  !
Id
∆∆" $
=
∆∆% &
$num
∆∆' +
,
∆∆+ ,
Nombre
∆∆- 3
=
∆∆4 5
$str
∆∆6 ?
,
∆∆? @
Controlador
∆∆A L
=
∆∆M N
$str
∆∆O X
,
∆∆X Y
Accion
∆∆Z `
=
∆∆a b
$str
∆∆c j
,
∆∆j k
Icono
∆∆l q
=
∆∆r s
$str∆∆t å
,∆∆å ç
Estado∆∆é î
=∆∆ï ñ
true∆∆ó õ
,∆∆õ ú
EsPadre∆∆ù §
=∆∆• ¶
false∆∆ß ¨
,∆∆¨ ≠
IdPadre∆∆Æ µ
=∆∆∂ ∑
$num∆∆∏ º
,∆∆º Ω
Roles∆∆æ √
=∆∆ƒ ≈
new∆∆∆ …
List∆∆  Œ
<∆∆Œ œ
string∆∆œ ’
>∆∆’ ÷
{∆∆◊ ÿ
$str∆∆Ÿ Í
}∆∆Î Ï
}∆∆Ì Ó
)∆∆Ó Ô
;∆∆Ô 
menu
«« 
.
«« 
Add
«« 
(
«« 
new
«« 
NavBar
«« 
{
««  !
Id
««" $
=
««% &
$num
««' +
,
««+ ,
Nombre
««- 3
=
««4 5
$str
««6 A
,
««A B
Controlador
««C N
=
««O P
$str
««Q `
,
««` a
Accion
««b h
=
««i j
$str
««k r
,
««r s
Icono
««t y
=
««z {
$str««| é
,««é è
Estado««ê ñ
=««ó ò
true««ô ù
,««ù û
EsPadre««ü ¶
=««ß ®
false««© Æ
,««Æ Ø
IdPadre««∞ ∑
=««∏ π
$num««∫ æ
,««æ ø
Roles««¿ ≈
=««∆ «
new««» À
List««Ã –
<««– —
string««— ◊
>««◊ ÿ
{««Ÿ ⁄
$str««€ Ï
}««Ì Ó
}««Ô 
)«« Ò
;««Ò Ú
menu
»» 
.
»» 
Add
»» 
(
»» 
new
»» 
NavBar
»» 
{
»»  !
Id
»»" $
=
»»% &
$num
»»' +
,
»»+ ,
Nombre
»»- 3
=
»»4 5
$str
»»6 L
,
»»L M
Controlador
»»N Y
=
»»Z [
$str
»»\ o
,
»»o p
Accion
»»q w
=
»»x y
$str»»z é
,»»é è
Icono»»ê ï
=»»ñ ó
$str»»ò ™
,»»™ ´
Estado»»¨ ≤
=»»≥ ¥
true»»µ π
,»»π ∫
EsPadre»»ª ¬
=»»√ ƒ
false»»≈  
,»»  À
IdPadre»»Ã ”
=»»‘ ’
$num»»÷ ⁄
,»»⁄ €
Roles»»‹ ·
=»»‚ „
new»»‰ Á
List»»Ë Ï
<»»Ï Ì
string»»Ì Û
>»»Û Ù
{»»ı ˆ
$str»»˜ à
}»»â ä
}»»ã å
)»»å ç
;»»ç é
menu
…… 
.
…… 
Add
…… 
(
…… 
new
…… 
NavBar
…… 
{
……  !
Id
……" $
=
……% &
$num
……' +
,
……+ ,
Nombre
……- 3
=
……4 5
$str
……6 ;
,
……; <
Controlador
……= H
=
……I J
$str
……K P
,
……P Q
Accion
……R X
=
……Y Z
$str
……[ b
,
……b c
Icono
……d i
=
……j k
$str……l á
,……á à
Estado……â è
=……ê ë
true……í ñ
,……ñ ó
EsPadre……ò ü
=……† °
false……¢ ß
,……ß ®
IdPadre……© ∞
=……± ≤
$num……≥ ∑
,……∑ ∏
Roles……π æ
=……ø ¿
new……¡ ƒ
List……≈ …
<………  
string……  –
>……– —
{……“ ”
$str……‘ Â
}……Ê Á
}……Ë È
)……È Í
;……Í Î
menu
ÕÕ 
.
ÕÕ 
Add
ÕÕ 
(
ÕÕ 
new
ÕÕ 
NavBar
ÕÕ 
{
ÕÕ  !
Id
ÕÕ" $
=
ÕÕ% &
$num
ÕÕ' +
,
ÕÕ+ ,
Nombre
ÕÕ- 3
=
ÕÕ4 5
$str
ÕÕ6 K
,
ÕÕK L
Icono
ÕÕM R
=
ÕÕS T
$str
ÕÕU i
,
ÕÕi j
Estado
ÕÕk q
=
ÕÕr s
true
ÕÕt x
,
ÕÕx y
EsPadreÕÕz Å
=ÕÕÇ É
trueÕÕÑ à
,ÕÕà â
IdPadreÕÕä ë
=ÕÕí ì
$numÕÕî ï
,ÕÕï ñ
RolesÕÕó ú
=ÕÕù û
newÕÕü ¢
ListÕÕ£ ß
<ÕÕß ®
stringÕÕ® Æ
>ÕÕÆ Ø
{ÕÕ∞ ±
$strÕÕ≤ √
}ÕÕƒ ≈
}ÕÕ∆ «
)ÕÕ« »
;ÕÕ» …
menu
ŒŒ 
.
ŒŒ 
Add
ŒŒ 
(
ŒŒ 
new
ŒŒ 
NavBar
ŒŒ 
{
ŒŒ  !
Id
ŒŒ" $
=
ŒŒ% &
$num
ŒŒ' +
,
ŒŒ+ ,
Nombre
ŒŒ- 3
=
ŒŒ4 5
$str
ŒŒ6 H
,
ŒŒH I
Controlador
ŒŒJ U
=
ŒŒV W
$str
ŒŒX _
,
ŒŒ_ `
Accion
ŒŒa g
=
ŒŒh i
$str
ŒŒj q
,
ŒŒq r
Icono
ŒŒs x
=
ŒŒy z
$strŒŒ{ ç
,ŒŒç é
EstadoŒŒè ï
=ŒŒñ ó
trueŒŒò ú
,ŒŒú ù
EsPadreŒŒû •
=ŒŒ¶ ß
falseŒŒ® ≠
,ŒŒ≠ Æ
IdPadreŒŒØ ∂
=ŒŒ∑ ∏
$numŒŒπ Ω
,ŒŒΩ æ
RolesŒŒø ƒ
=ŒŒ≈ ∆
newŒŒ«  
ListŒŒÀ œ
<ŒŒœ –
stringŒŒ– ÷
>ŒŒ÷ ◊
{ŒŒÿ Ÿ
$strŒŒ⁄ Î
}ŒŒÏ Ì
}ŒŒÓ Ô
)ŒŒÔ 
;ŒŒ Ò
menu
œœ 
.
œœ 
Add
œœ 
(
œœ 
new
œœ 
NavBar
œœ 
{
œœ  !
Id
œœ" $
=
œœ% &
$num
œœ' +
,
œœ+ ,
Nombre
œœ- 3
=
œœ4 5
$str
œœ6 J
,
œœJ K
Controlador
œœL W
=
œœX Y
$str
œœZ c
,
œœc d
Accion
œœe k
=
œœl m
$str
œœn u
,
œœu v
Icono
œœw |
=
œœ} ~
$strœœ ë
,œœë í
Estadoœœì ô
=œœö õ
trueœœú †
,œœ† °
EsPadreœœ¢ ©
=œœ™ ´
falseœœ¨ ±
,œœ± ≤
IdPadreœœ≥ ∫
=œœª º
$numœœΩ ¡
,œœ¡ ¬
Rolesœœ√ »
=œœ…  
newœœÀ Œ
Listœœœ ”
<œœ” ‘
stringœœ‘ ⁄
>œœ⁄ €
{œœ‹ ›
$strœœﬁ Ô
}œœ Ò
}œœÚ Û
)œœÛ Ù
;œœÙ ı
menu
’’ 
.
’’ 
Add
’’ 
(
’’ 
new
’’ 
NavBar
’’ 
{
’’  !
Id
’’" $
=
’’% &
$num
’’' +
,
’’+ ,
Nombre
’’- 3
=
’’4 5
$str
’’6 ?
,
’’? @
Icono
’’A F
=
’’G H
$str
’’I V
,
’’V W
Estado
’’X ^
=
’’_ `
true
’’a e
,
’’e f
EsPadre
’’g n
=
’’o p
true
’’q u
,
’’u v
IdPadre
’’w ~
=’’ Ä
$num’’Å Ç
,’’Ç É
Roles’’Ñ â
=’’ä ã
new’’å è
List’’ê î
<’’î ï
string’’ï õ
>’’õ ú
{’’ù û
$str’’ü ®
}’’© ™
}’’´ ¨
)’’¨ ≠
;’’≠ Æ
menu
÷÷ 
.
÷÷ 
Add
÷÷ 
(
÷÷ 
new
÷÷ 
NavBar
÷÷ 
{
÷÷  !
Id
÷÷" $
=
÷÷% &
$num
÷÷' +
,
÷÷+ ,
Nombre
÷÷- 3
=
÷÷4 5
$str
÷÷6 J
,
÷÷J K
Controlador
÷÷L W
=
÷÷X Y
$str
÷÷Z c
,
÷÷c d
Accion
÷÷e k
=
÷÷l m
$str
÷÷n u
,
÷÷u v
Icono
÷÷w |
=
÷÷} ~
$str÷÷ í
,÷÷í ì
Estado÷÷î ö
=÷÷õ ú
true÷÷ù °
,÷÷° ¢
EsPadre÷÷£ ™
=÷÷´ ¨
false÷÷≠ ≤
,÷÷≤ ≥
IdPadre÷÷¥ ª
=÷÷º Ω
$num÷÷æ ¬
,÷÷¬ √
Roles÷÷ƒ …
=÷÷  À
new÷÷Ã œ
List÷÷– ‘
<÷÷‘ ’
string÷÷’ €
>÷÷€ ‹
{÷÷› ﬁ
$str÷÷ﬂ Ë
}÷÷È Í
}÷÷Î Ï
)÷÷Ï Ì
;÷÷Ì Ó
menu
◊◊ 
.
◊◊ 
Add
◊◊ 
(
◊◊ 
new
◊◊ 
NavBar
◊◊ 
{
◊◊  !
Id
◊◊" $
=
◊◊% &
$num
◊◊' +
,
◊◊+ ,
Nombre
◊◊- 3
=
◊◊4 5
$str
◊◊6 E
,
◊◊E F
Controlador
◊◊G R
=
◊◊S T
$str
◊◊U ^
,
◊◊^ _
Accion
◊◊` f
=
◊◊g h
$str
◊◊i x
,
◊◊x y
Icono
◊◊z 
=◊◊Ä Å
$str◊◊Ç ï
,◊◊ï ñ
Estado◊◊ó ù
=◊◊û ü
true◊◊† §
,◊◊§ •
EsPadre◊◊¶ ≠
=◊◊Æ Ø
false◊◊∞ µ
,◊◊µ ∂
IdPadre◊◊∑ æ
=◊◊ø ¿
$num◊◊¡ ≈
,◊◊≈ ∆
Roles◊◊« Ã
=◊◊Õ Œ
new◊◊œ “
List◊◊” ◊
<◊◊◊ ÿ
string◊◊ÿ ﬁ
>◊◊ﬁ ﬂ
{◊◊‡ ·
$str◊◊‚ Î
}◊◊Ï Ì
}◊◊Ó Ô
)◊◊Ô 
;◊◊ Ò
menu
ÿÿ 
.
ÿÿ 
Add
ÿÿ 
(
ÿÿ 
new
ÿÿ 
NavBar
ÿÿ 
{
ÿÿ  !
Id
ÿÿ" $
=
ÿÿ% &
$num
ÿÿ' +
,
ÿÿ+ ,
Nombre
ÿÿ- 3
=
ÿÿ4 5
$str
ÿÿ6 @
,
ÿÿ@ A
Controlador
ÿÿB M
=
ÿÿN O
$str
ÿÿP Y
,
ÿÿY Z
Accion
ÿÿ[ a
=
ÿÿb c
$str
ÿÿd n
,
ÿÿn o
Icono
ÿÿp u
=
ÿÿv w
$strÿÿx ã
,ÿÿã å
Estadoÿÿç ì
=ÿÿî ï
trueÿÿñ ö
,ÿÿö õ
EsPadreÿÿú £
=ÿÿ§ •
falseÿÿ¶ ´
,ÿÿ´ ¨
IdPadreÿÿ≠ ¥
=ÿÿµ ∂
$numÿÿ∑ ª
,ÿÿª º
RolesÿÿΩ ¬
=ÿÿ√ ƒ
newÿÿ≈ »
Listÿÿ… Õ
<ÿÿÕ Œ
stringÿÿŒ ‘
>ÿÿ‘ ’
{ÿÿ÷ ◊
$strÿÿÿ ·
}ÿÿ‚ „
}ÿÿ‰ Â
)ÿÿÂ Ê
;ÿÿÊ Á
menu
ŸŸ 
.
ŸŸ 
Add
ŸŸ 
(
ŸŸ 
new
ŸŸ 
NavBar
ŸŸ 
{
ŸŸ  !
Id
ŸŸ" $
=
ŸŸ% &
$num
ŸŸ' +
,
ŸŸ+ ,
Nombre
ŸŸ- 3
=
ŸŸ4 5
$str
ŸŸ6 E
,
ŸŸE F
Controlador
ŸŸG R
=
ŸŸS T
$str
ŸŸU ^
,
ŸŸ^ _
Accion
ŸŸ` f
=
ŸŸg h
$str
ŸŸi x
,
ŸŸx y
Icono
ŸŸz 
=ŸŸÄ Å
$strŸŸÇ ï
,ŸŸï ñ
EstadoŸŸó ù
=ŸŸû ü
trueŸŸ† §
,ŸŸ§ •
EsPadreŸŸ¶ ≠
=ŸŸÆ Ø
falseŸŸ∞ µ
,ŸŸµ ∂
IdPadreŸŸ∑ æ
=ŸŸø ¿
$numŸŸ¡ ≈
,ŸŸ≈ ∆
RolesŸŸ« Ã
=ŸŸÕ Œ
newŸŸœ “
ListŸŸ” ◊
<ŸŸ◊ ÿ
stringŸŸÿ ﬁ
>ŸŸﬁ ﬂ
{ŸŸ‡ ·
$strŸŸ‚ Î
}ŸŸÏ Ì
}ŸŸÓ Ô
)ŸŸÔ 
;ŸŸ Ò
if
›› 
(
›› &
MascaraArrayItemGenerico
›› (
.
››( )0
"ConvertirMascaraModulosAdicionales
››) K
(
››K L 
AplicacionSettings
››L ^
.
››^ _
Default
››_ f
.
››f g3
$MascaraModulosAdicionalesHabilitados››g ã
)››ã å
.››å ç
Any››ç ê
(››ê ë
m››ë í
=>››ì ï
m››ñ ó
.››ó ò
Id››ò ö
==››õ ù
(››û ü
int››ü ¢
)››¢ £"
ModulosAdicionales››£ µ
.››µ ∂
Restaurante››∂ ¡
)››¡ ¬
)››¬ √
{
ﬁﬁ 
menu
ﬂﬂ 
.
ﬂﬂ 
Add
ﬂﬂ 
(
ﬂﬂ 
new
ﬂﬂ 
NavBar
ﬂﬂ #
{
‡‡ 
Id
‡‡ 
=
‡‡ 
$num
‡‡ 
,
‡‡ 
Nombre
‡‡ #
=
‡‡$ %
$str
‡‡& 3
,
‡‡3 4
Icono
‡‡5 :
=
‡‡; <
$str
‡‡= K
,
‡‡K L
Estado
‡‡M S
=
‡‡T U
true
‡‡V Z
,
‡‡Z [
EsPadre
‡‡\ c
=
‡‡d e
true
‡‡f j
,
‡‡j k
IdPadre
‡‡l s
=
‡‡t u
$num
‡‡v w
,
‡‡w x
Roles
‡‡y ~
=‡‡ Ä
new‡‡Å Ñ
List‡‡Ö â
<‡‡â ä
string‡‡ä ê
>‡‡ê ë
{‡‡í ì
$str‡‡î ™
,‡‡™ ´
$str‡‡¨ ø
,‡‡ø ¿
$str‡‡¡ “
,‡‡“ ”
$str‡‡‘ Î
}‡‡Ï Ì
}‡‡Ó Ô
)‡‡Ô 
;‡‡ Ò
menu
·· 
.
·· 
Add
·· 
(
·· 
new
·· 
NavBar
·· #
{
‚‚ 
Id
‚‚ 
=
‚‚ 
$num
‚‚ 
,
‚‚ 
Nombre
‚‚ #
=
‚‚$ %
$str
‚‚& 0
,
‚‚0 1
Icono
‚‚2 7
=
‚‚8 9
$str
‚‚: Q
,
‚‚Q R
Controlador
‚‚S ^
=
‚‚_ `
$str
‚‚a n
,
‚‚n o
Accion
‚‚p v
=
‚‚w x
$str‚‚y Ä
,‚‚Ä Å
Estado‚‚Ç à
=‚‚â ä
true‚‚ã è
,‚‚è ê
EsPadre‚‚ë ò
=‚‚ô ö
false‚‚õ †
,‚‚† °
IdPadre‚‚¢ ©
=‚‚™ ´
$num‚‚¨ ∞
,‚‚∞ ±
Roles‚‚≤ ∑
=‚‚∏ π
new‚‚∫ Ω
List‚‚æ ¬
<‚‚¬ √
string‚‚√ …
>‚‚…  
{‚‚À Ã
$str‚‚Õ ‡
,‚‚‡ ·
$str‚‚‚ Û
}‚‚Ù ı
}‚‚ˆ ˜
)‚‚˜ ¯
;‚‚¯ ˘
if
„„ 
(
„„ !
RestauranteSettings
„„ '
.
„„' (
Default
„„( /
.
„„/ 0'
ModuloPreparacionActivado
„„0 I
)
„„I J
menu
‰‰ 
.
‰‰ 
Add
‰‰ 
(
‰‰ 
new
‰‰  
NavBar
‰‰! '
{
ÂÂ 
Id
ÂÂ 
=
ÂÂ 
$num
ÂÂ 
,
ÂÂ  
Nombre
ÂÂ! '
=
ÂÂ( )
$str
ÂÂ* 7
,
ÂÂ7 8
Icono
ÂÂ9 >
=
ÂÂ? @
$str
ÂÂA S
,
ÂÂS T
Estado
ÂÂU [
=
ÂÂ\ ]
true
ÂÂ^ b
,
ÂÂb c
Controlador
ÂÂd o
=
ÂÂp q
$str
ÂÂr 
,ÂÂ Ä
AccionÂÂÅ á
=ÂÂà â
$strÂÂä ó
,ÂÂó ò
EsPadreÂÂô †
=ÂÂ° ¢
falseÂÂ£ ®
,ÂÂ® ©
IdPadreÂÂ™ ±
=ÂÂ≤ ≥
$numÂÂ¥ ∏
,ÂÂ∏ π
RolesÂÂ∫ ø
=ÂÂ¿ ¡
newÂÂ¬ ≈
ListÂÂ∆  
<ÂÂ  À
stringÂÂÀ —
>ÂÂ— “
{ÂÂ” ‘
$strÂÂ’ Ï
}ÂÂÌ Ó
}ÂÂÔ 
)ÂÂ Ò
;ÂÂÒ Ú
menu
ÊÊ 
.
ÊÊ 
Add
ÊÊ 
(
ÊÊ 
new
ÊÊ 
NavBar
ÊÊ #
{
ÊÊ$ %
Id
ÊÊ& (
=
ÊÊ) *
$num
ÊÊ+ /
,
ÊÊ/ 0
Nombre
ÊÊ1 7
=
ÊÊ8 9
$str
ÊÊ: @
,
ÊÊ@ A
Icono
ÊÊB G
=
ÊÊH I
$str
ÊÊJ d
,
ÊÊd e
Controlador
ÊÊf q
=
ÊÊr s
$strÊÊt Å
,ÊÊÅ Ç
AccionÊÊÉ â
=ÊÊä ã
$strÊÊå í
,ÊÊí ì
EstadoÊÊî ö
=ÊÊõ ú
trueÊÊù °
,ÊÊ° ¢
EsPadreÊÊ£ ™
=ÊÊ´ ¨
falseÊÊ≠ ≤
,ÊÊ≤ ≥
IdPadreÊÊ¥ ª
=ÊÊº Ω
$numÊÊæ ¬
,ÊÊ¬ √
RolesÊÊƒ …
=ÊÊ  À
newÊÊÃ œ
ListÊÊ– ‘
<ÊÊ‘ ’
stringÊÊ’ €
>ÊÊ€ ‹
{ÊÊ› ﬁ
$strÊÊﬂ Ú
}ÊÊÛ Ù
}ÊÊı ˆ
)ÊÊˆ ˜
;ÊÊ˜ ¯
menu
ÁÁ 
.
ÁÁ 
Add
ÁÁ 
(
ÁÁ 
new
ÁÁ 
NavBar
ÁÁ #
{
ÁÁ$ %
Id
ÁÁ& (
=
ÁÁ) *
$num
ÁÁ+ /
,
ÁÁ/ 0
Nombre
ÁÁ1 7
=
ÁÁ8 9
$str
ÁÁ: H
,
ÁÁH I
Icono
ÁÁJ O
=
ÁÁP Q
$str
ÁÁR l
,
ÁÁl m
Controlador
ÁÁn y
=
ÁÁz {
$strÁÁ| â
,ÁÁâ ä
AccionÁÁã ë
=ÁÁí ì
$strÁÁî ¢
,ÁÁ¢ £
EstadoÁÁ§ ™
=ÁÁ´ ¨
trueÁÁ≠ ±
,ÁÁ± ≤
EsPadreÁÁ≥ ∫
=ÁÁª º
falseÁÁΩ ¬
,ÁÁ¬ √
IdPadreÁÁƒ À
=ÁÁÃ Õ
$numÁÁŒ “
,ÁÁ“ ”
RolesÁÁ‘ Ÿ
=ÁÁ⁄ €
newÁÁ‹ ﬂ
ListÁÁ‡ ‰
<ÁÁ‰ Â
stringÁÁÂ Î
>ÁÁÎ Ï
{ÁÁÌ Ó
$strÁÁÔ Ö
}ÁÁÜ á
}ÁÁà â
)ÁÁâ ä
;ÁÁä ã
menu
ËË 
.
ËË 
Add
ËË 
(
ËË 
new
ËË 
NavBar
ËË #
{
ÈÈ 
Id
ÈÈ 
=
ÈÈ 
$num
ÈÈ 
,
ÈÈ 
Nombre
ÈÈ #
=
ÈÈ$ %
$str
ÈÈ& 0
,
ÈÈ0 1
Icono
ÈÈ2 7
=
ÈÈ8 9
$str
ÈÈ: T
,
ÈÈT U
Controlador
ÈÈV a
=
ÈÈb c
$str
ÈÈd y
,
ÈÈy z
AccionÈÈ{ Å
=ÈÈÇ É
$strÈÈÑ é
,ÈÈé è
EstadoÈÈê ñ
=ÈÈó ò
trueÈÈô ù
,ÈÈù û
EsPadreÈÈü ¶
=ÈÈß ®
falseÈÈ© Æ
,ÈÈÆ Ø
IdPadreÈÈ∞ ∑
=ÈÈ∏ π
$numÈÈ∫ æ
,ÈÈæ ø
RolesÈÈ¿ ≈
=ÈÈ∆ «
newÈÈ» À
ListÈÈÃ –
<ÈÈ– —
stringÈÈ— ◊
>ÈÈ◊ ÿ
{ÈÈŸ ⁄
$strÈÈ€ Ó
,ÈÈÓ Ô
$strÈÈ Ü
}ÈÈá à
}ÈÈâ ä
)ÈÈä ã
;ÈÈã å
}
ÍÍ 
menu
ÔÔ 
.
ÔÔ 
Add
ÔÔ 
(
ÔÔ 
new
ÔÔ 
NavBar
ÔÔ 
{
ÔÔ  !
Id
ÔÔ" $
=
ÔÔ% &
$num
ÔÔ' +
,
ÔÔ+ ,
Nombre
ÔÔ- 3
=
ÔÔ4 5
$str
ÔÔ6 G
,
ÔÔG H
Icono
ÔÔI N
=
ÔÔO P
$str
ÔÔQ e
,
ÔÔe f
Estado
ÔÔg m
=
ÔÔn o
true
ÔÔp t
,
ÔÔt u
EsPadre
ÔÔv }
=
ÔÔ~ 
trueÔÔÄ Ñ
,ÔÔÑ Ö
IdPadreÔÔÜ ç
=ÔÔé è
$numÔÔê ë
,ÔÔë í
RolesÔÔì ò
=ÔÔô ö
newÔÔõ û
ListÔÔü £
<ÔÔ£ §
stringÔÔ§ ™
>ÔÔ™ ´
{ÔÔ¨ ≠
$strÔÔÆ π
}ÔÔ∫ ª
}ÔÔº Ω
)ÔÔΩ æ
;ÔÔæ ø
menu
 
.
 
Add
 
(
 
new
 
NavBar
 
{
  !
Id
" $
=
% &
$num
' +
,
+ ,
Nombre
- 3
=
4 5
$str
6 @
,
@ A
Controlador
B M
=
N O
$str
P `
,
` a
Accion
b h
=
i j
$str
k u
,
u v
Icono
w |
=
} ~
$str ë
,ë í
Estadoì ô
=ö õ
trueú †
,† °
EsPadre¢ ©
=™ ´
false¨ ±
,± ≤
IdPadre≥ ∫
=ª º
$numΩ ¡
,¡ ¬
Roles√ »
=…  
newÀ Œ
Listœ ”
<” ‘
string‘ ⁄
>⁄ €
{‹ ›
$strﬁ È
}Í Î
}Ï Ì
)Ì Ó
;Ó Ô
menu
ÒÒ 
.
ÒÒ 
Add
ÒÒ 
(
ÒÒ 
new
ÒÒ 
NavBar
ÒÒ 
{
ÒÒ  !
Id
ÒÒ" $
=
ÒÒ% &
$num
ÒÒ' +
,
ÒÒ+ ,
Nombre
ÒÒ- 3
=
ÒÒ4 5
$str
ÒÒ6 I
,
ÒÒI J
Controlador
ÒÒK V
=
ÒÒW X
$str
ÒÒY i
,
ÒÒi j
Accion
ÒÒk q
=
ÒÒr s
$strÒÒt É
,ÒÒÉ Ñ
IconoÒÒÖ ä
=ÒÒã å
$strÒÒç ü
,ÒÒü †
EstadoÒÒ° ß
=ÒÒ® ©
trueÒÒ™ Æ
,ÒÒÆ Ø
EsPadreÒÒ∞ ∑
=ÒÒ∏ π
falseÒÒ∫ ø
,ÒÒø ¿
IdPadreÒÒ¡ »
=ÒÒ…  
$numÒÒÀ œ
,ÒÒœ –
RolesÒÒ— ÷
=ÒÒ◊ ÿ
newÒÒŸ ‹
ListÒÒ› ·
<ÒÒ· ‚
stringÒÒ‚ Ë
>ÒÒË È
{ÒÒÍ Î
$strÒÒÏ Ç
}ÒÒÉ Ñ
}ÒÒÖ Ü
)ÒÒÜ á
;ÒÒá à
menu
ÚÚ 
.
ÚÚ 
Add
ÚÚ 
(
ÚÚ 
new
ÚÚ 
NavBar
ÚÚ 
{
ÚÚ  !
Id
ÚÚ" $
=
ÚÚ% &
$num
ÚÚ' +
,
ÚÚ+ ,
Nombre
ÚÚ- 3
=
ÚÚ4 5
$str
ÚÚ6 G
,
ÚÚG H
Controlador
ÚÚI T
=
ÚÚU V
$str
ÚÚW g
,
ÚÚg h
Accion
ÚÚi o
=
ÚÚp q
$str
ÚÚr 
,ÚÚ Ä
IconoÚÚÅ Ü
=ÚÚá à
$strÚÚâ õ
,ÚÚõ ú
EstadoÚÚù £
=ÚÚ§ •
trueÚÚ¶ ™
,ÚÚ™ ´
EsPadreÚÚ¨ ≥
=ÚÚ¥ µ
falseÚÚ∂ ª
,ÚÚª º
IdPadreÚÚΩ ƒ
=ÚÚ≈ ∆
$numÚÚ« À
,ÚÚÀ Ã
RolesÚÚÕ “
=ÚÚ” ‘
newÚÚ’ ÿ
ListÚÚŸ ›
<ÚÚ› ﬁ
stringÚÚﬁ ‰
>ÚÚ‰ Â
{ÚÚÊ Á
$strÚÚË ˛
}ÚÚˇ Ä
}ÚÚÅ Ç
)ÚÚÇ É
;ÚÚÉ Ñ
if
ˆˆ 
(
ˆˆ &
MascaraArrayItemGenerico
ˆˆ (
.
ˆˆ( )0
"ConvertirMascaraModulosAdicionales
ˆˆ) K
(
ˆˆK L 
AplicacionSettings
ˆˆL ^
.
ˆˆ^ _
Default
ˆˆ_ f
.
ˆˆf g3
$MascaraModulosAdicionalesHabilitadosˆˆg ã
)ˆˆã å
.ˆˆå ç
Anyˆˆç ê
(ˆˆê ë
mˆˆë í
=>ˆˆì ï
mˆˆñ ó
.ˆˆó ò
Idˆˆò ö
==ˆˆõ ù
(ˆˆû ü
intˆˆü ¢
)ˆˆ¢ £"
ModulosAdicionalesˆˆ£ µ
.ˆˆµ ∂
Hotelˆˆ∂ ª
)ˆˆª º
)ˆˆº Ω
{
˜˜ 
menu
¯¯ 
.
¯¯ 
Add
¯¯ 
(
¯¯ 
new
¯¯ 
NavBar
¯¯ #
{
¯¯$ %
Id
¯¯& (
=
¯¯) *
$num
¯¯+ /
,
¯¯/ 0
Nombre
¯¯1 7
=
¯¯8 9
$str
¯¯: A
,
¯¯A B
Icono
¯¯C H
=
¯¯I J
$str
¯¯K a
,
¯¯a b
Estado
¯¯c i
=
¯¯j k
true
¯¯l p
,
¯¯p q
EsPadre
¯¯r y
=
¯¯z {
true¯¯| Ä
,¯¯Ä Å
IdPadre¯¯Ç â
=¯¯ä ã
$num¯¯å ç
,¯¯ç é
Roles¯¯è î
=¯¯ï ñ
new¯¯ó ö
List¯¯õ ü
<¯¯ü †
string¯¯† ¶
>¯¯¶ ß
{¯¯® ©
$str¯¯™ ¿
,¯¯¿ ¡
$str¯¯¬ ÷
,¯¯÷ ◊
}¯¯ÿ Ÿ
}¯¯⁄ €
)¯¯€ ‹
;¯¯‹ ›
menu
˘˘ 
.
˘˘ 
Add
˘˘ 
(
˘˘ 
new
˘˘ 
NavBar
˘˘ #
{
˘˘$ %
Id
˘˘& (
=
˘˘) *
$num
˘˘+ /
,
˘˘/ 0
Nombre
˘˘1 7
=
˘˘8 9
$str
˘˘: H
,
˘˘H I
Controlador
˘˘J U
=
˘˘V W
$str
˘˘X _
,
˘˘_ `
Accion
˘˘a g
=
˘˘h i
$str
˘˘j q
,
˘˘q r
Icono
˘˘s x
=
˘˘y z
$str˘˘{ ñ
,˘˘ñ ó
Estado˘˘ò û
=˘˘ü †
true˘˘° •
,˘˘• ¶
EsPadre˘˘ß Æ
=˘˘Ø ∞
false˘˘± ∂
,˘˘∂ ∑
IdPadre˘˘∏ ø
=˘˘¿ ¡
$num˘˘¬ ∆
,˘˘∆ «
Roles˘˘» Õ
=˘˘Œ œ
new˘˘– ”
List˘˘‘ ÿ
<˘˘ÿ Ÿ
string˘˘Ÿ ﬂ
>˘˘ﬂ ‡
{˘˘· ‚
$str˘˘„ ˘
,˘˘˘ ˙
$str˘˘˚ è
}˘˘ê ë
}˘˘í ì
)˘˘ì î
;˘˘î ï
menu
˙˙ 
.
˙˙ 
Add
˙˙ 
(
˙˙ 
new
˙˙ 
NavBar
˙˙ #
{
˙˙$ %
Id
˙˙& (
=
˙˙) *
$num
˙˙+ /
,
˙˙/ 0
Nombre
˙˙1 7
=
˙˙8 9
$str
˙˙: D
,
˙˙D E
Controlador
˙˙F Q
=
˙˙R S
$str
˙˙T [
,
˙˙[ \
Accion
˙˙] c
=
˙˙d e
$str
˙˙f p
,
˙˙p q
Icono
˙˙r w
=
˙˙x y
$str˙˙z ï
,˙˙ï ñ
Estado˙˙ó ù
=˙˙û ü
true˙˙† §
,˙˙§ •
EsPadre˙˙¶ ≠
=˙˙Æ Ø
false˙˙∞ µ
,˙˙µ ∂
IdPadre˙˙∑ æ
=˙˙ø ¿
$num˙˙¡ ≈
,˙˙≈ ∆
Roles˙˙« Ã
=˙˙Õ Œ
new˙˙œ “
List˙˙” ◊
<˙˙◊ ÿ
string˙˙ÿ ﬁ
>˙˙ﬁ ﬂ
{˙˙‡ ·
$str˙˙‚ ¯
,˙˙¯ ˘
$str˙˙˙ é
}˙˙è ê
}˙˙ë í
)˙˙í ì
;˙˙ì î
menu
˚˚ 
.
˚˚ 
Add
˚˚ 
(
˚˚ 
new
˚˚ 
NavBar
˚˚ #
{
˚˚$ %
Id
˚˚& (
=
˚˚) *
$num
˚˚+ /
,
˚˚/ 0
Nombre
˚˚1 7
=
˚˚8 9
$str
˚˚: D
,
˚˚D E
Controlador
˚˚F Q
=
˚˚R S
$str
˚˚T [
,
˚˚[ \
Accion
˚˚] c
=
˚˚d e
$str
˚˚f p
,
˚˚p q
Icono
˚˚r w
=
˚˚x y
$str˚˚z ï
,˚˚ï ñ
Estado˚˚ó ù
=˚˚û ü
true˚˚† §
,˚˚§ •
EsPadre˚˚¶ ≠
=˚˚Æ Ø
false˚˚∞ µ
,˚˚µ ∂
IdPadre˚˚∑ æ
=˚˚ø ¿
$num˚˚¡ ≈
,˚˚≈ ∆
Roles˚˚« Ã
=˚˚Õ Œ
new˚˚œ “
List˚˚” ◊
<˚˚◊ ÿ
string˚˚ÿ ﬁ
>˚˚ﬁ ﬂ
{˚˚‡ ·
$str˚˚‚ ¯
,˚˚¯ ˘
$str˚˚˙ é
}˚˚è ê
}˚˚ë í
)˚˚í ì
;˚˚ì î
menu
¸¸ 
.
¸¸ 
Add
¸¸ 
(
¸¸ 
new
¸¸ 
NavBar
¸¸ #
{
¸¸$ %
Id
¸¸& (
=
¸¸) *
$num
¸¸+ /
,
¸¸/ 0
Nombre
¸¸1 7
=
¸¸8 9
$str
¸¸: H
,
¸¸H I
Controlador
¸¸J U
=
¸¸V W
$str
¸¸X _
,
¸¸_ `
Accion
¸¸a g
=
¸¸h i
$str
¸¸j x
,
¸¸x y
Icono
¸¸z 
=¸¸Ä Å
$str¸¸Ç ù
,¸¸ù û
Estado¸¸ü •
=¸¸¶ ß
true¸¸® ¨
,¸¸¨ ≠
EsPadre¸¸Æ µ
=¸¸∂ ∑
false¸¸∏ Ω
,¸¸Ω æ
IdPadre¸¸ø ∆
=¸¸« »
$num¸¸… Õ
,¸¸Õ Œ
Roles¸¸œ ‘
=¸¸’ ÷
new¸¸◊ ⁄
List¸¸€ ﬂ
<¸¸ﬂ ‡
string¸¸‡ Ê
>¸¸Ê Á
{¸¸Ë È
$str¸¸Í Ä
}¸¸Å Ç
}¸¸É Ñ
)¸¸Ñ Ö
;¸¸Ö Ü
menu
˛˛ 
.
˛˛ 
Add
˛˛ 
(
˛˛ 
new
˛˛ 
NavBar
˛˛ #
{
˛˛$ %
Id
˛˛& (
=
˛˛) *
$num
˛˛+ /
,
˛˛/ 0
Nombre
˛˛1 7
=
˛˛8 9
$str
˛˛: O
,
˛˛O P
Controlador
˛˛Q \
=
˛˛] ^
$str
˛˛_ f
,
˛˛f g
Accion
˛˛h n
=
˛˛o p
$str˛˛q Å
,˛˛Å Ç
Icono˛˛É à
=˛˛â ä
$str˛˛ã ¶
,˛˛¶ ß
Estado˛˛® Æ
=˛˛Ø ∞
true˛˛± µ
,˛˛µ ∂
EsPadre˛˛∑ æ
=˛˛ø ¿
false˛˛¡ ∆
,˛˛∆ «
IdPadre˛˛» œ
=˛˛– —
$num˛˛“ ÷
,˛˛÷ ◊
Roles˛˛ÿ ›
=˛˛ﬁ ﬂ
new˛˛‡ „
List˛˛‰ Ë
<˛˛Ë È
string˛˛È Ô
>˛˛Ô 
{˛˛Ò Ú
$str˛˛Û â
}˛˛ä ã
}˛˛å ç
)˛˛ç é
;˛˛é è
menu
ˇˇ 
.
ˇˇ 
Add
ˇˇ 
(
ˇˇ 
new
ˇˇ 
NavBar
ˇˇ #
{
ˇˇ$ %
Id
ˇˇ& (
=
ˇˇ) *
$num
ˇˇ+ /
,
ˇˇ/ 0
Nombre
ˇˇ1 7
=
ˇˇ8 9
$str
ˇˇ: E
,
ˇˇE F
Controlador
ˇˇG R
=
ˇˇS T
$str
ˇˇU \
,
ˇˇ\ ]
Accion
ˇˇ^ d
=
ˇˇe f
$str
ˇˇg r
,
ˇˇr s
Icono
ˇˇt y
=
ˇˇz {
$strˇˇ| ó
,ˇˇó ò
Estadoˇˇô ü
=ˇˇ† °
trueˇˇ¢ ¶
,ˇˇ¶ ß
EsPadreˇˇ® Ø
=ˇˇ∞ ±
falseˇˇ≤ ∑
,ˇˇ∑ ∏
IdPadreˇˇπ ¿
=ˇˇ¡ ¬
$numˇˇ√ «
,ˇˇ« »
Rolesˇˇ… Œ
=ˇˇœ –
newˇˇ— ‘
Listˇˇ’ Ÿ
<ˇˇŸ ⁄
stringˇˇ⁄ ‡
>ˇˇ‡ ·
{ˇˇ‚ „
$strˇˇ‰ ˙
}ˇˇ˚ ¸
}ˇˇ˝ ˛
)ˇˇ˛ ˇ
;ˇˇˇ Ä
menu
ÄÄ 
.
ÄÄ 
Add
ÄÄ 
(
ÄÄ 
new
ÄÄ 
NavBar
ÄÄ #
{
ÄÄ$ %
Id
ÄÄ& (
=
ÄÄ) *
$num
ÄÄ+ /
,
ÄÄ/ 0
Nombre
ÄÄ1 7
=
ÄÄ8 9
$str
ÄÄ: D
,
ÄÄD E
Controlador
ÄÄF Q
=
ÄÄR S
$str
ÄÄT c
,
ÄÄc d
Accion
ÄÄe k
=
ÄÄl m
$str
ÄÄn x
,
ÄÄx y
Icono
ÄÄz 
=ÄÄÄ Å
$strÄÄÇ ù
,ÄÄù û
EstadoÄÄü •
=ÄÄ¶ ß
trueÄÄ® ¨
,ÄÄ¨ ≠
EsPadreÄÄÆ µ
=ÄÄ∂ ∑
falseÄÄ∏ Ω
,ÄÄΩ æ
IdPadreÄÄø ∆
=ÄÄ« »
$numÄÄ… Õ
,ÄÄÕ Œ
RolesÄÄœ ‘
=ÄÄ’ ÷
newÄÄ◊ ⁄
ListÄÄ€ ﬂ
<ÄÄﬂ ‡
stringÄÄ‡ Ê
>ÄÄÊ Á
{ÄÄË È
$strÄÄÍ Ä
}ÄÄÅ Ç
}ÄÄÉ Ñ
)ÄÄÑ Ö
;ÄÄÖ Ü
}
ÅÅ 
return
ää 
menu
ää 
.
ää 
ToList
ää 
(
ää 
)
ää  
;
ää  !
}
ãã 	
}
åå 
}çç ∫,
hD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Models\Venta\DetalleDeVentaConPuntoVentaViewModel.cs
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
.% &
Models& ,
{ 
[		 
Serializable		 
]		 
public 

class 0
$DetalleDeVentaConPuntoVentaViewModel 5
{ 
public 
long 
CodigoConcepto "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
NombreBasico "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Concepto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Cantidad 
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 
PrecioUnitario %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Importe 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
NombrePuntoVenta &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
int 
IdPuntoVenta 
{  !
get" %
;% &
set' *
;* +
}, -
public 0
$DetalleDeVentaConPuntoVentaViewModel 3
(3 4
)4 5
{ 	
} 	
public 0
$DetalleDeVentaConPuntoVentaViewModel 3
(3 4
long4 8
codigoConcepto9 G
,G H
stringI O
nombreBasicoP \
,\ ]
string^ d
conceptoNegocioe t
,t u
decimalv }
cantidadVendida	~ ç
,
é è
decimal
ê ó
precioUnitario
ò ¶
,
¶ ß
decimal
® Ø
importe
∞ ∑
)
∑ ∏
{ 	
CodigoConcepto 
= 
codigoConcepto +
;+ ,
NombreBasico 
= 
nombreBasico '
;' (
Concepto 
= 
conceptoNegocio &
;& '
Cantidad 
= 
cantidadVendida &
;& '
PrecioUnitario   
=   
precioUnitario   +
;  + ,
Importe!! 
=!! 
importe!! 
;!! 
}"" 	
public$$ 0
$DetalleDeVentaConPuntoVentaViewModel$$ 3
($$3 4
DetalleDeOperacion$$4 F
detalleOrdenDeVenta$$G Z
)$$Z [
{%% 	
CodigoConcepto&& 
=&& 
detalleOrdenDeVenta&& 0
.&&0 1
DetalleTransaccion&&1 C
(&&C D
)&&D E
.&&E F
id_concepto_negocio&&F Y
;&&Y Z
NombreBasico(( 
=(( 
detalleOrdenDeVenta(( .
.((. /
Producto((/ 7
.((7 8 
NombreConceptoBasico((8 L
;((L M
Concepto)) 
=)) 
detalleOrdenDeVenta)) *
.))* +
Producto))+ 3
.))3 4
Nombre))4 :
;)): ;
Cantidad++ 
=++ 
detalleOrdenDeVenta++ *
.++* +
Cantidad+++ 3
;++3 4
PrecioUnitario-- 
=-- 
detalleOrdenDeVenta-- 0
.--0 1
PrecioUnitario--1 ?
;--? @
Importe.. 
=.. 
detalleOrdenDeVenta.. )
...) *
Importe..* 1
;..1 2
IdPuntoVenta// 
=// 
detalleOrdenDeVenta// .
.//. /
	Operacion/// 8
(//8 9
)//9 :
.//: ;
CentroDeAtencion//; K
(//K L
)//L M
.//M N
Id//N P
;//P Q
NombrePuntoVenta00 
=00 
detalleOrdenDeVenta00 2
.002 3
	Operacion003 <
(00< =
)00= >
.00> ?
CentroDeAtencion00? O
(00O P
)00P Q
.00Q R
Nombre00R X
;00X Y
}11 	
public44 
static44 
List44 
<44 0
$DetalleDeVentaConPuntoVentaViewModel44 ?
>44? @
Convert44A H
(44H I
List44I M
<44M N
OrdenDeVenta44N Z
>44Z [
ordenes44\ c
)44c d
{55 	
var66 "
reporteVentaViewModels66 &
=66' (
new66) ,
List66- 1
<661 20
$DetalleDeVentaConPuntoVentaViewModel662 V
>66V W
(66W X
)66X Y
;66Y Z
foreach77 
(77 
var77 
detalle77  
in77! #
ordenes77$ +
.77+ ,

SelectMany77, 6
(776 7
o777 8
=>779 ;
o77< =
.77= >
Detalles77> F
(77F G
)77G H
)77H I
)77I J
{88 "
reporteVentaViewModels99 &
.99& '
Add99' *
(99* +
new99+ .0
$DetalleDeVentaConPuntoVentaViewModel99/ S
(99S T
detalle99T [
)99[ \
)99\ ]
;99] ^
}:: 
return<< "
reporteVentaViewModels<< )
;<<) *
}== 	
}@@ 
}AA ˘
ND:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str 6
)6 7
]7 8
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str 8
)8 9
]9 :
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
["" 
assembly"" 	
:""	 

AssemblyVersion"" 
("" 
$str"" $
)""$ %
]""% &
[## 
assembly## 	
:##	 

AssemblyFileVersion## 
(## 
$str## (
)##( )
]##) *î
LD:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\SqlServerTypes\Loader.cs
	namespace 	
SqlServerTypes
 
{ 
public

 

class

 
	Utilities

 
{ 
[ 	
	DllImport	 
( 
$str !
,! "
CharSet# *
=+ ,
CharSet- 4
.4 5
Auto5 9
,9 :
SetLastError; G
=H I
trueJ N
)N O
]O P
private 
static 
extern 
IntPtr $
LoadLibrary% 0
(0 1
string1 7
libname8 ?
)? @
;@ A
public 
static 
void  
LoadNativeAssemblies /
(/ 0
string0 6
rootApplicationPath7 J
)J K
{ 	
var 
nativeBinaryPath  
=! "
IntPtr# )
.) *
Size* .
>/ 0
$num1 2
? 
Path 
. 
Combine 
( 
rootApplicationPath 2
,2 3
$str4 J
)J K
: 
Path 
. 
Combine 
( 
rootApplicationPath 2
,2 3
$str4 J
)J K
;K L
LoadNativeAssembly 
( 
nativeBinaryPath /
,/ 0
$str1 ?
)? @
;@ A
LoadNativeAssembly 
( 
nativeBinaryPath /
,/ 0
$str1 J
)J K
;K L
} 	
private   
static   
void   
LoadNativeAssembly   .
(  . /
string  / 5
nativeBinaryPath  6 F
,  F G
string  H N
assemblyName  O [
)  [ \
{!! 	
var"" 
path"" 
="" 
Path"" 
."" 
Combine"" #
(""# $
nativeBinaryPath""$ 4
,""4 5
assemblyName""6 B
)""B C
;""C D
var## 
ptr## 
=## 
LoadLibrary## !
(##! "
path##" &
)##& '
;##' (
if$$ 
($$ 
ptr$$ 
==$$ 
IntPtr$$ 
.$$ 
Zero$$ "
)$$" #
{%% 
throw&& 
new&& 
	Exception&& #
(&&# $
string&&$ *
.&&* +
Format&&+ 1
(&&1 2
$str'' 8
,''8 9
assemblyName((  
,((  !
Marshal)) 
.)) 
GetLastWin32Error)) -
())- .
))). /
)))/ 0
)))0 1
;))1 2
}** 
}++ 	
},, 
}-- ßf
>D:\Tsp.Sigescom2.3-Back\Tsp.Sigescom.WebApplication\Startup.cs
[ 
assembly 	
:	 
 
OwinStartupAttribute 
(  
typeof  &
(& '
Tsp' *
.* +
Sigescom+ 3
.3 4
WebApplication4 B
.B C
StartupC J
)J K
)K L
]L M
	namespace 	
Tsp
 
. 
Sigescom 
. 
WebApplication %
{ 
public 

partial 
class 
Startup  
{ 
public 
void 
Configuration !
(! "
IAppBuilder" -
app. 1
)1 2
{ 	
ConfigureAuth 
( 
app 
) 
; 
Flags 
.  
FacturacionEnProceso &
=' (
false) .
;. /
if 
( *
FacturacionElectronicaSettings .
.. /
Default/ 6
.6 76
*UtilizarHangfireParaFacturacionElectronica7 a
)a b
{ ,
 FacturacionElectronicaController 0,
 facturacionElectronicaController1 Q
=R S
newT W,
 FacturacionElectronicaControllerX x
(x y
)y z
;z {
GlobalConfiguration #
.# $
Configuration$ 1
.1 2
UseSqlServerStorage2 E
(E F
$strF Y
)Y Z
;Z [
TimeZoneInfo 
timeZone %
=& '
TimeZoneInfo( 4
.4 5"
FindSystemTimeZoneById5 K
(K L
$strL f
)f g
;g h
app   
.    
UseHangfireDashboard   (
(  ( )
$str  ) 4
,  4 5
new  6 9
DashboardOptions  : J
(  J K
)  K L
{!! 
Authorization"" !
=""" #
new""$ '
[""' (
]""( )
{""* +
new"", /'
HangfireAuthorizationFilter""0 K
(""K L
)""L M
}""N O
}## 
)## 
;## 
RecurringJob$$ 
.$$ 
AddOrUpdate$$ (
($$( )
($$) *
)$$* +
=>$$, .,
 facturacionElectronicaController$$/ O
.$$O P:
.TransmitirEnviarConsultarYReenviarComprobantes$$P ~
($$~ 
)	$$ Ä
,
$$Ä Å,
FacturacionElectronicaSettings
$$Ç †
.
$$† °
Default
$$° ®
.
$$® ©J
<CronExpressionTransmitirEnviarConsultarYReenviarComprobantes
$$© Â
,
$$Â Ê
timeZone
$$Á Ô
)
$$Ô 
;
$$ Ò
app%% 
.%% 
UseHangfireServer%% %
(%%% &
)%%& '
;%%' (
}&& 
else'' 
{(( 
GlobalConfiguration)) #
.))# $
Configuration))$ 1
.))1 2
UseSqlServerStorage))2 E
())E F
$str))F Y
)))Y Z
;))Z [
using** 
(** 
var** 

connection** %
=**& '

JobStorage**( 2
.**2 3
Current**3 :
.**: ;
GetConnection**; H
(**H I
)**I J
)**J K
{++ 
foreach,, 
(,, 
var,,  
recurringJob,,! -
in,,. 0

connection,,1 ;
.,,; <
GetRecurringJobs,,< L
(,,L M
),,M N
),,N O
{-- 
if.. 
(.. 
recurringJob.. (
...( )
Id..) +
...+ ,
Equals.., 2
(..2 3
$str	..3 Ñ
)
..Ñ Ö
)
..Ö Ü
RecurringJob// (
.//( )
RemoveIfExists//) 7
(//7 8
recurringJob//8 D
.//D E
Id//E G
)//G H
;//H I
}00 
}11 
}22 
if44 
(44 
AplicacionSettings44 "
.44" #
Default44# *
.44* +-
!PermitirEnvioAutomaticoDeReportes44+ L
)44L M
{55 
ReporteController66 !
reporteController66" 3
=664 5
new666 9
ReporteController66: K
(66K L
)66L M
;66M N
GlobalConfiguration77 #
.77# $
Configuration77$ 1
.771 2
UseSqlServerStorage772 E
(77E F
$str77F Y
)77Y Z
;77Z [
TimeZoneInfo88 
timeZone88 %
=88& '
TimeZoneInfo88( 4
.884 5"
FindSystemTimeZoneById885 K
(88K L
$str88L f
)88f g
;88g h
app:: 
.::  
UseHangfireDashboard:: (
(::( )
$str::) 4
,::4 5
new::6 9
DashboardOptions::: J
(::J K
)::K L
{;; 
Authorization<< !
=<<" #
new<<$ '
[<<' (
]<<( )
{<<* +
new<<, /'
HangfireAuthorizationFilter<<0 K
(<<K L
)<<L M
}<<N O
}== 
)== 
;== 
RecurringJob>> 
.>> 
AddOrUpdate>> (
(>>( )
(>>) *
)>>* +
=>>>, .
reporteController>>/ @
.>>@ A=
1EnviarCorreoElectronicoConReportesAutomaticamente>>A r
(>>r s
)>>s t
,>>t u
AplicacionSettings	>>v à
.
>>à â
Default
>>â ê
.
>>ê ë5
'CronExpressionEnvioAutomaticoDeReportes
>>ë ∏
,
>>∏ π
timeZone
>>∫ ¬
)
>>¬ √
;
>>√ ƒ
app?? 
.?? 
UseHangfireServer?? %
(??% &
)??& '
;??' (
}@@ 
elseAA 
{BB 
GlobalConfigurationCC #
.CC# $
ConfigurationCC$ 1
.CC1 2
UseSqlServerStorageCC2 E
(CCE F
$strCCF Y
)CCY Z
;CCZ [
usingDD 
(DD 
varDD 

connectionDD %
=DD& '

JobStorageDD( 2
.DD2 3
CurrentDD3 :
.DD: ;
GetConnectionDD; H
(DDH I
)DDI J
)DDJ K
{EE 
foreachFF 
(FF 
varFF  
recurringJobFF! -
inFF. 0

connectionFF1 ;
.FF; <
GetRecurringJobsFF< L
(FFL M
)FFM N
)FFN O
{GG 
ifHH 
(HH 
recurringJobHH (
.HH( )
IdHH) +
.HH+ ,
EqualsHH, 2
(HH2 3
$strHH3 x
)HHx y
)HHy z
RecurringJobII (
.II( )
RemoveIfExistsII) 7
(II7 8
recurringJobII8 D
.IID E
IdIIE G
)IIG H
;IIH I
}JJ 
}KK 
}LL 
ifNN 
(NN 
AplicacionSettingsNN "
.NN" #
DefaultNN# *
.NN* +:
.PermitirGenerarInventarioLogicoAutomaticamenteNN+ Y
)NNY Z
{OO 
AlmacenControllerPP !
almacenControllerPP" 3
=PP4 5
newPP6 9
AlmacenControllerPP: K
(PPK L
)PPL M
;PPM N
GlobalConfigurationQQ #
.QQ# $
ConfigurationQQ$ 1
.QQ1 2
UseSqlServerStorageQQ2 E
(QQE F
$strQQF Y
)QQY Z
;QQZ [
TimeZoneInfoRR 
timeZoneRR %
=RR& '
TimeZoneInfoRR( 4
.RR4 5"
FindSystemTimeZoneByIdRR5 K
(RRK L
$strRRL f
)RRf g
;RRg h
appTT 
.TT  
UseHangfireDashboardTT (
(TT( )
$strTT) 4
,TT4 5
newTT6 9
DashboardOptionsTT: J
(TTJ K
)TTK L
{UU 
AuthorizationVV !
=VV" #
newVV$ '
[VV' (
]VV( )
{VV* +
newVV, /'
HangfireAuthorizationFilterVV0 K
(VVK L
)VVL M
}VVN O
}WW 
)WW 
;WW 
RecurringJobXX 
.XX 
AddOrUpdateXX (
(XX( )
(XX) *
)XX* +
=>XX, .
almacenControllerXX/ @
.XX@ A5
)GenerarInventarioHistoricoAutomaticamenteXXA j
(XXj k
)XXk l
,XXl m
AplicacionSettings	XXn Ä
.
XXÄ Å
Default
XXÅ à
.
XXà âB
4CronExpressionGenerarInventarioLogicoAutomaticamente
XXâ Ω
,
XXΩ æ
timeZone
XXø «
)
XX« »
;
XX» …
appYY 
.YY 
UseHangfireServerYY %
(YY% &
)YY& '
;YY' (
}ZZ 
else[[ 
{\\ 
GlobalConfiguration]] #
.]]# $
Configuration]]$ 1
.]]1 2
UseSqlServerStorage]]2 E
(]]E F
$str]]F Y
)]]Y Z
;]]Z [
using^^ 
(^^ 
var^^ 

connection^^ %
=^^& '

JobStorage^^( 2
.^^2 3
Current^^3 :
.^^: ;
GetConnection^^; H
(^^H I
)^^I J
)^^J K
{__ 
foreach`` 
(`` 
var``  
recurringJob``! -
in``. 0

connection``1 ;
.``; <
GetRecurringJobs``< L
(``L M
)``M N
)``N O
{aa 
ifbb 
(bb 
recurringJobbb (
.bb( )
Idbb) +
.bb+ ,
Equalsbb, 2
(bb2 3
$strbb3 p
)bbp q
)bbq r
RecurringJobcc (
.cc( )
RemoveIfExistscc) 7
(cc7 8
recurringJobcc8 D
.ccD E
IdccE G
)ccG H
;ccH I
}dd 
}ee 
}ff 
ifhh 
(hh 
AplicacionSettingshh "
.hh" #
Defaulthh# *
.hh* +4
(PermitirGenerarArqueoCajaAutomaticamentehh+ S
)hhS T
{ii 
FinanzaControllerjj !
finanzaControllerjj" 3
=jj4 5
newjj6 9
FinanzaControllerjj: K
(jjK L
)jjL M
;jjM N
GlobalConfigurationkk #
.kk# $
Configurationkk$ 1
.kk1 2
UseSqlServerStoragekk2 E
(kkE F
$strkkF Y
)kkY Z
;kkZ [
TimeZoneInfoll 
timeZonell %
=ll& '
TimeZoneInfoll( 4
.ll4 5"
FindSystemTimeZoneByIdll5 K
(llK L
$strllL f
)llf g
;llg h
appnn 
.nn  
UseHangfireDashboardnn (
(nn( )
$strnn) 4
,nn4 5
newnn6 9
DashboardOptionsnn: J
(nnJ K
)nnK L
{oo 
Authorizationpp !
=pp" #
newpp$ '
[pp' (
]pp( )
{pp* +
newpp, /'
HangfireAuthorizationFilterpp0 K
(ppK L
)ppL M
}ppN O
}qq 
)qq 
;qq 
RecurringJobrr 
.rr 
AddOrUpdaterr (
(rr( )
(rr) *
)rr* +
=>rr, .
finanzaControllerrr/ @
.rr@ A,
 GenerarArqueoCajaAutomaticamenterrA a
(rra b
)rrb c
,rrc d
AplicacionSettingsrre w
.rrw x
Defaultrrx 
.	rr Ä<
.CronExpressionGenerarArqueoCajaAutomaticamente
rrÄ Æ
,
rrÆ Ø
timeZone
rr∞ ∏
)
rr∏ π
;
rrπ ∫
appss 
.ss 
UseHangfireServerss %
(ss% &
)ss& '
;ss' (
}tt 
elseuu 
{vv 
GlobalConfigurationww #
.ww# $
Configurationww$ 1
.ww1 2
UseSqlServerStorageww2 E
(wwE F
$strwwF Y
)wwY Z
;wwZ [
usingxx 
(xx 
varxx 

connectionxx %
=xx& '

JobStoragexx( 2
.xx2 3
Currentxx3 :
.xx: ;
GetConnectionxx; H
(xxH I
)xxI J
)xxJ K
{yy 
foreachzz 
(zz 
varzz  
recurringJobzz! -
inzz. 0

connectionzz1 ;
.zz; <
GetRecurringJobszz< L
(zzL M
)zzM N
)zzN O
{{{ 
if|| 
(|| 
recurringJob|| (
.||( )
Id||) +
.||+ ,
Equals||, 2
(||2 3
$str||3 g
)||g h
)||h i
RecurringJob}} (
.}}( )
RemoveIfExists}}) 7
(}}7 8
recurringJob}}8 D
.}}D E
Id}}E G
)}}G H
;}}H I
}~~ 
} 
}
ÄÄ 
}
ÅÅ 	
}
ÇÇ 
public
ÉÉ 

partial
ÉÉ 
class
ÉÉ 
Flags
ÉÉ 
{
ÑÑ 
public
ÖÖ 
static
ÖÖ 
bool
ÖÖ "
FacturacionEnProceso
ÖÖ /
;
ÖÖ/ 0
}
ÜÜ 
}áá 